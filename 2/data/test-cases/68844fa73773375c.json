{"uid":"68844fa73773375c","name":"test_publish_with_rate_limit_proof","fullName":"tests.relay.test_publish.TestRelayPublish#test_publish_with_rate_limit_proof","historyId":"58ff45f8a2408b41d19abca733d8b3e6","time":{"start":1705589136541,"stop":1705589136648,"duration":107},"status":"skipped","statusMessage":"XFAIL Bug reported: https://github.com/waku-org/nwaku/issues/2214\n\nAssertionError: Incorrect field: rateLimitProof. Published: {'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='} Received: {}","statusTrace":"tests/relay/test_publish.py:191: in test_publish_with_rate_limit_proof\n    self.check_published_message_reaches_relay_peer(self.create_message(rateLimitProof=rate_limit_proof))\nsrc/steps/relay.py:88: in check_published_message_reaches_relay_peer\n    waku_message.assert_received_message(message)\nsrc/node/waku_message.py:48: in assert_received_message\n    assert str(message.rateLimitProof) == str(sent_message[\"rateLimitProof\"]), assert_fail_message(\"rateLimitProof\")\nE   AssertionError: Incorrect field: rateLimitProof. Published: {'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='} Received: {}","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1705588828882,"stop":1705588828882,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1705589133193,"stop":1705589133193,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1705589133193,"stop":1705589133193,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1705589133193,"stop":1705589133193,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1705589133193,"stop":1705589133193,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_relay_nodes","time":{"start":1705589133194,"stop":1705589136425,"duration":3231},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"relay_setup","time":{"start":1705589133194,"stop":1705589133194,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"subscribe_main_relay_nodes","time":{"start":1705589136425,"stop":1705589136432,"duration":7},"status":"passed","steps":[{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1705589136425,"stop":1705589136432,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7f01100e3380>, <src.node.waku_node.WakuNode object at 0x7f01101ea6c0>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/0/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"relay_warm_up","time":{"start":1705589136432,"stop":1705589136541,"duration":109},"status":"passed","steps":[{"name":"wait_for_published_message_to_reach_relay_peer","time":{"start":1705589136432,"stop":1705589136541,"duration":109},"status":"passed","steps":[{"name":"check_published_message_reaches_relay_peer","time":{"start":1705589136432,"stop":1705589136541,"duration":109},"status":"passed","steps":[{"name":"assert_received_message","time":{"start":1705589136538,"stop":1705589136538,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1705589136432069376}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1705589136540,"stop":1705589136541,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1705589136432069376}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1705589136432069376}"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"timeout_duration","value":"120"},{"name":"time_between_retries","value":"1"},{"name":"pubsub_topic","value":"None"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"status":"skipped","statusMessage":"XFAIL Bug reported: https://github.com/waku-org/nwaku/issues/2214\n\nAssertionError: Incorrect field: rateLimitProof. Published: {'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='} Received: {}","statusTrace":"tests/relay/test_publish.py:191: in test_publish_with_rate_limit_proof\n    self.check_published_message_reaches_relay_peer(self.create_message(rateLimitProof=rate_limit_proof))\nsrc/steps/relay.py:88: in check_published_message_reaches_relay_peer\n    waku_message.assert_received_message(message)\nsrc/node/waku_message.py:48: in assert_received_message\n    assert str(message.rateLimitProof) == str(sent_message[\"rateLimitProof\"]), assert_fail_message(\"rateLimitProof\")\nE   AssertionError: Incorrect field: rateLimitProof. Published: {'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='} Received: {}","steps":[{"name":"create_message","time":{"start":1705589136541,"stop":1705589136541,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"rateLimitProof","value":"{'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='}"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_published_message_reaches_relay_peer","time":{"start":1705589136541,"stop":1705589136647,"duration":106},"status":"failed","statusMessage":"AssertionError: Incorrect field: rateLimitProof. Published: {'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='} Received: {}\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/relay.py\", line 88, in check_published_message_reaches_relay_peer\n    waku_message.assert_received_message(message)\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_message.py\", line 48, in assert_received_message\n    assert str(message.rateLimitProof) == str(sent_message[\"rateLimitProof\"]), assert_fail_message(\"rateLimitProof\")\n","steps":[{"name":"assert_received_message","time":{"start":1705589136647,"stop":1705589136647,"duration":0},"status":"failed","statusMessage":"AssertionError: Incorrect field: rateLimitProof. Published: {'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='} Received: {}\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_message.py\", line 48, in assert_received_message\n    assert str(message.rateLimitProof) == str(sent_message[\"rateLimitProof\"]), assert_fail_message(\"rateLimitProof\")\n","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1705589136541313536, 'rateLimitProof': {'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='}}"},{"name":"index","value":"0"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1705589136541313536, 'rateLimitProof': {'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='}}"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"a81386627809e215","name":"log","source":"a81386627809e215.txt","type":"text/plain","size":10445}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":3,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1705589136714,"stop":1705589136716,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1705589136716,"stop":1705589142811,"duration":6095},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1705589142811,"stop":1705589142811,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1705589189487,"stop":1705589189487,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"@pytest.mark.xfail(reason='Bug reported: https://github.com/waku-org/nwaku/issues/2214')"},{"name":"tag","value":"@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')"},{"name":"parentSuite","value":"tests.relay"},{"name":"suite","value":"test_publish"},{"name":"subSuite","value":"TestRelayPublish"},{"name":"host","value":"fv-az841-757"},{"name":"thread","value":"2122-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.relay.test_publish"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":4,"broken":4,"skipped":2,"passed":0,"unknown":0,"total":10},"items":[{"uid":"b0a9719ca7c03a87","reportUrl":"https://waku-org.github.io/waku-interop-tests/1//#testresult/b0a9719ca7c03a87","status":"skipped","statusDetails":"XFAIL Bug reported: https://github.com/waku-org/nwaku/issues/2214\n\nAssertionError: Incorrect field: rateLimitProof. Published: {'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='} Received: {}","time":{"start":1705588128558,"stop":1705588128666,"duration":108}},{"uid":"5581b5a07583e822","reportUrl":"https://waku-org.github.io/waku-interop-tests/35//#testresult/5581b5a07583e822","status":"failed","statusDetails":"AssertionError: Incorrect field: rateLimitProof. Published: {'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='} Received: {}","time":{"start":1705579904689,"stop":1705579904799,"duration":110}},{"uid":"80d93fdb92ae5a3b","reportUrl":"https://waku-org.github.io/waku-interop-tests/29//#testresult/80d93fdb92ae5a3b","status":"broken","statusDetails":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:39870/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1 with response: b'Invalid content body, could not decode. Unable to deserialize data'","time":{"start":1705579781116,"stop":1705579781120,"duration":4}},{"uid":"eec6e624302bbdce","reportUrl":"https://waku-org.github.io/waku-interop-tests/32//#testresult/eec6e624302bbdce","status":"failed","statusDetails":"AssertionError: Incorrect field: rateLimitProof. Published: {'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='} Received: {}","time":{"start":1705577534168,"stop":1705577534278,"duration":110}},{"uid":"d2d3d2fbb066e7a0","reportUrl":"https://waku-org.github.io/waku-interop-tests/26//#testresult/d2d3d2fbb066e7a0","status":"broken","statusDetails":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:10187/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1 with response: b'Invalid content body, could not decode. Unable to deserialize data'","time":{"start":1705577390382,"stop":1705577390385,"duration":3}},{"uid":"9ea4d5032599f0b6","reportUrl":"https://waku-org.github.io/waku-interop-tests/30//#testresult/9ea4d5032599f0b6","status":"failed","statusDetails":"AssertionError: Incorrect field: rateLimitProof. Published: {'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='} Received: {}","time":{"start":1705575897448,"stop":1705575897556,"duration":108}},{"uid":"7e8f98b57a63cae8","reportUrl":"https://waku-org.github.io/waku-interop-tests/24//#testresult/7e8f98b57a63cae8","status":"broken","statusDetails":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:1629/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1 with response: b'Invalid content body, could not decode. Unable to deserialize data'","time":{"start":1705575726669,"stop":1705575726672,"duration":3}},{"uid":"daab88696cc69f1e","reportUrl":"https://waku-org.github.io/waku-interop-tests/23//#testresult/daab88696cc69f1e","status":"broken","statusDetails":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:22896/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1 with response: b'Invalid content body, could not decode. Unable to deserialize data'","time":{"start":1705574442020,"stop":1705574442024,"duration":4}},{"uid":"6f757bbd89d36731","reportUrl":"https://waku-org.github.io/waku-interop-tests/29//#testresult/6f757bbd89d36731","status":"failed","statusDetails":"AssertionError: Incorrect field: rateLimitProof. Published: {'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='} Received: {}","time":{"start":1705573430971,"stop":1705573431080,"duration":109}}]},"tags":["@pytest.mark.xfail(reason='Bug reported: https://github.com/waku-org/nwaku/issues/2214')","@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')"]},"source":"68844fa73773375c.json","parameterValues":[]}