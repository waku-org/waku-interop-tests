{"uid":"6f757bbd89d36731","name":"test_publish_with_rate_limit_proof","fullName":"tests.relay.test_publish.TestRelayPublish#test_publish_with_rate_limit_proof","historyId":"58ff45f8a2408b41d19abca733d8b3e6","time":{"start":1705573430971,"stop":1705573431080,"duration":109},"status":"failed","statusMessage":"AssertionError: Incorrect field: rateLimitProof. Published: {'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='} Received: {}","statusTrace":"tests/relay/test_publish.py:187: in test_publish_with_rate_limit_proof\n    self.check_published_message_reaches_relay_peer(self.create_message(rateLimitProof=rate_limit_proof))\nsrc/steps/relay.py:88: in check_published_message_reaches_relay_peer\n    waku_message.assert_received_message(message)\nsrc/node/waku_message.py:48: in assert_received_message\n    assert str(message.rateLimitProof) == str(sent_message[\"rateLimitProof\"]), assert_fail_message(\"rateLimitProof\")\nE   AssertionError: Incorrect field: rateLimitProof. Published: {'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='} Received: {}","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1705572838854,"stop":1705572838854,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0},{"name":"attach_logs_on_fail","time":{"start":1705573427432,"stop":1705573427432,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0},{"name":"test_id","time":{"start":1705573427433,"stop":1705573427433,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0},{"name":"relay_setup","time":{"start":1705573427433,"stop":1705573427433,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0},{"name":"close_open_nodes","time":{"start":1705573427433,"stop":1705573427433,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0},{"name":"test_setup","time":{"start":1705573427433,"stop":1705573427433,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0},{"name":"setup_main_relay_nodes","time":{"start":1705573427434,"stop":1705573430852,"duration":3418},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0},{"name":"subscribe_main_relay_nodes","time":{"start":1705573430852,"stop":1705573430859,"duration":7},"status":"passed","steps":[{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1705573430852,"stop":1705573430859,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7f2343e99670>, <src.node.waku_node.WakuNode object at 0x7f2343fa1010>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/0/1']"}],"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0}],"attachments":[],"parameters":[],"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0},{"name":"relay_warm_up","time":{"start":1705573430859,"stop":1705573430970,"duration":111},"status":"passed","steps":[{"name":"wait_for_published_message_to_reach_relay_peer","time":{"start":1705573430859,"stop":1705573430970,"duration":111},"status":"passed","steps":[{"name":"check_published_message_reaches_relay_peer","time":{"start":1705573430859,"stop":1705573430970,"duration":111},"status":"passed","steps":[{"name":"assert_received_message","time":{"start":1705573430967,"stop":1705573430967,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1705573430859137024}"},{"name":"index","value":"0"}],"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0},{"name":"assert_received_message","time":{"start":1705573430970,"stop":1705573430970,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1705573430859137024}"},{"name":"index","value":"0"}],"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0}],"attachments":[],"parameters":[{"name":"message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1705573430859137024}"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0}],"attachments":[],"parameters":[{"name":"timeout_duration","value":"120"},{"name":"time_between_retries","value":"1"},{"name":"pubsub_topic","value":"None"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0}],"attachments":[],"parameters":[],"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":0}],"testStage":{"status":"failed","statusMessage":"AssertionError: Incorrect field: rateLimitProof. Published: {'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='} Received: {}","statusTrace":"tests/relay/test_publish.py:187: in test_publish_with_rate_limit_proof\n    self.check_published_message_reaches_relay_peer(self.create_message(rateLimitProof=rate_limit_proof))\nsrc/steps/relay.py:88: in check_published_message_reaches_relay_peer\n    waku_message.assert_received_message(message)\nsrc/node/waku_message.py:48: in assert_received_message\n    assert str(message.rateLimitProof) == str(sent_message[\"rateLimitProof\"]), assert_fail_message(\"rateLimitProof\")\nE   AssertionError: Incorrect field: rateLimitProof. Published: {'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='} Received: {}","steps":[{"name":"create_message","time":{"start":1705573430971,"stop":1705573430971,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"rateLimitProof","value":"{'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='}"}],"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0},{"name":"check_published_message_reaches_relay_peer","time":{"start":1705573430971,"stop":1705573431079,"duration":108},"status":"failed","statusMessage":"AssertionError: Incorrect field: rateLimitProof. Published: {'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='} Received: {}\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/relay.py\", line 88, in check_published_message_reaches_relay_peer\n    waku_message.assert_received_message(message)\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_message.py\", line 48, in assert_received_message\n    assert str(message.rateLimitProof) == str(sent_message[\"rateLimitProof\"]), assert_fail_message(\"rateLimitProof\")\n","steps":[{"name":"assert_received_message","time":{"start":1705573431079,"stop":1705573431079,"duration":0},"status":"failed","statusMessage":"AssertionError: Incorrect field: rateLimitProof. Published: {'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='} Received: {}\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_message.py\", line 48, in assert_received_message\n    assert str(message.rateLimitProof) == str(sent_message[\"rateLimitProof\"]), assert_fail_message(\"rateLimitProof\")\n","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1705573430971020032, 'rateLimitProof': {'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='}}"},{"name":"index","value":"0"}],"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0}],"attachments":[],"parameters":[{"name":"message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1705573430971020032, 'rateLimitProof': {'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='}}"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0}],"attachments":[{"uid":"a303349d7a7252b8","name":"log","source":"a303349d7a7252b8.txt","type":"text/plain","size":22343}],"parameters":[],"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":true,"stepsCount":3,"attachmentsCount":1},"afterStages":[{"name":"test_setup::0","time":{"start":1705573431104,"stop":1705573431107,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0},{"name":"close_open_nodes::0","time":{"start":1705573431108,"stop":1705573436254,"duration":5146},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0},{"name":"attach_logs_on_fail::0","time":{"start":1705573436254,"stop":1705573436258,"duration":4},"status":"passed","steps":[],"attachments":[{"uid":"f46b75345341ee1f","name":"node2_2024-01-18_10-23-47__2570b9e6-d46a-4b41-a129-f9274bd71dd7__harbor.status.im_wakuorg_go-waku:latest.log","source":"f46b75345341ee1f.txt","type":"text/plain","size":54436},{"uid":"aaceb6bf85eb0899","name":"node1_2024-01-18_10-23-47__2570b9e6-d46a-4b41-a129-f9274bd71dd7__harbor.status.im_wakuorg_go-waku:latest.log","source":"aaceb6bf85eb0899.txt","type":"text/plain","size":48137}],"parameters":[],"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2},{"name":"set_allure_env_variables::0","time":{"start":1705573525837,"stop":1705573525838,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0}],"labels":[{"name":"tag","value":"@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')"},{"name":"parentSuite","value":"tests.relay"},{"name":"suite","value":"test_publish"},{"name":"subSuite","value":"TestRelayPublish"},{"name":"host","value":"fv-az837-944"},{"name":"thread","value":"2028-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.relay.test_publish"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"20d169e6e6e04869","status":"failed","statusDetails":"AssertionError: Incorrect field: rateLimitProof. Published: {'proof': 'cHJvb2ZEYXRh', 'epoch': 'ZXBvY2hEYXRh', 'nullifier': 'bnVsbGlmaWVyRGF0YQ=='} Received: {}","time":{"start":1705573420302,"stop":1705573420415,"duration":113}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')"]},"source":"6f757bbd89d36731.json","parameterValues":[]}