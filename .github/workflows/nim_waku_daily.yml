name: Nim -> Nim Waku Interop Tests

concurrency:
  group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.ref }}
  cancel-in-progress: false

on:
  schedule:
    - cron:  '0 4 * * *'
  workflow_dispatch:

env:
    QUAY_PASSWORD: ${{ secrets.QUAY_PASSWORD }}
    QUAY_USER: ${{ secrets.QUAY_USER }}

jobs:
  test-common:
    uses: waku-org/nwaku/.github/workflows/container-image.yml@master
    secrets: inherit
    with:
      node1: quay.io/wakuorg/nwaku-pr:3181
      node2: "wakuorg/nwaku:latest"
      additional_nodes: "wakuorg/nwaku:latest,wakuorg/nwaku:latest,wakuorg/nwaku:latest"
      caller: "nim"
