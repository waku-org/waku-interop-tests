[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-10-03_04-14-18__a708ffc4-3a7b-4725-937d-bbcf70164602
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-03_04-14-18__a708ffc4-3a7b-4725-937d-bbcf70164602__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-03_04-14-18__a708ffc4-3a7b-4725-937d-bbcf70164602__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-10-03_04-14-18__a708ffc4-3a7b-4725-937d-bbcf70164602__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.230.205
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['4520', '4521', '4522', '4523', '4524']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 4520:4520 -p 4521:4521 -p 4522:4522 -p 4523:4523 -p 4524:4524 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4522 --rest-port=4520 --tcp-port=4521 --discv5-udp-port=4523 --rest-address=0.0.0.0 --nat=extip:172.18.230.205 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bfdc69ebaa53390318d993b087f2c6c4fd9816bbfcefdebc72eac7ebb3ddb4ca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4524 --metrics-logging=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.230.205 waku ce2d0f9a781d5731bb55c9fc52d7cbe4d7c46c4bc105810f25c38104067224b3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ce2d0f9a781d. Setting up logs at ./log/docker/node1_2024-10-03_04-14-18__a708ffc4-3a7b-4725-937d-bbcf70164602__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 4520
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4520/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4520/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.230.205/tcp/4521/p2p/16Uiu2HAmGUMD5jgs5i94cWf9DGMoPGTGc9W2o9ya8Zu8e7SkaS4o","/ip4/172.18.230.205/tcp/4522/ws/p2p/16Uiu2HAmGUMD5jgs5i94cWf9DGMoPGTGc9W2o9ya8Zu8e7SkaS4o"],"enrUri":"enr:-LO4QO3Bc85PE_fUMlQk8IRjaC0--PZinhnCyyK8RZiUiEDFUtDT8N5KtKq632R1uYFRE1fpdmNibdVepxfUKJn6sNgBgmlkgnY0gmlwhKwS5s2KbXVsdGlhZGRyc4wACgSsEubNBhGq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM4tPGOYesas5vXxTRpOUE5-lVHV8QjQjVr-2YCIuA32IN0Y3CCEamDdWRwghGrhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.232.70
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['40518', '40519', '40520', '40521', '40522']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 40518:40518 -p 40519:40519 -p 40520:40520 -p 40521:40521 -p 40522:40522 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40520 --rest-port=40518 --tcp-port=40519 --discv5-udp-port=40521 --rest-address=0.0.0.0 --nat=extip:172.18.232.70 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=64ae3f3bc76bfa80c23d6175ce0252dfff78b31522ffa820dc34cf18d1e6d6e2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40522 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-LO4QO3Bc85PE_fUMlQk8IRjaC0--PZinhnCyyK8RZiUiEDFUtDT8N5KtKq632R1uYFRE1fpdmNibdVepxfUKJn6sNgBgmlkgnY0gmlwhKwS5s2KbXVsdGlhZGRyc4wACgSsEubNBhGq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM4tPGOYesas5vXxTRpOUE5-lVHV8QjQjVr-2YCIuA32IN0Y3CCEamDdWRwghGrhXdha3UyCQ --lightpushnode=/ip4/172.18.230.205/tcp/4521/p2p/16Uiu2HAmGUMD5jgs5i94cWf9DGMoPGTGc9W2o9ya8Zu8e7SkaS4o
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.232.70 waku 963a7de26f4a95a19b8e265dfbd2a8d662d603bcd71c29368b7f0d6289479f99
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 963a7de26f4a. Setting up logs at ./log/docker/node2_2024-10-03_04-14-18__a708ffc4-3a7b-4725-937d-bbcf70164602__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 40518
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40518/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40518/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.232.70/tcp/40519/p2p/16Uiu2HAm9zKKZ78YAuDHdaxZWioCc1hBXZCnhxQ2a1536TPHyf52","/ip4/172.18.232.70/tcp/40520/ws/p2p/16Uiu2HAm9zKKZ78YAuDHdaxZWioCc1hBXZCnhxQ2a1536TPHyf52"],"enrUri":"enr:-LO4QHtIpCfAUncMcIBJfsaJ7QMuL-uuCPluemTW1Goy_xPNGNueNQIyfgk2GrqlQsLA085bP34iGW1t9tr435R7kxABgmlkgnY0gmlwhKwS6EaKbXVsdGlhZGRyc4wACgSsEuhGBp5I3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLYYGyTqryaoNo-u5kOr_jsR_Tngs5WOUguba87QMPSwYN0Y3CCnkeDdWRwgp5JhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.140.40
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['17029', '17030', '17031', '17032', '17033']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 17029:17029 -p 17030:17030 -p 17031:17031 -p 17032:17032 -p 17033:17033 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17031 --rest-port=17029 --tcp-port=17030 --discv5-udp-port=17032 --rest-address=0.0.0.0 --nat=extip:172.18.140.40 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1ac9547077ea7dafb9bd1bdbe4659ecd9470f659c3aced674b13355cb3afc4f6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17033 --metrics-logging=true --relay=false --storenode=/ip4/172.18.232.70/tcp/40519/p2p/16Uiu2HAm9zKKZ78YAuDHdaxZWioCc1hBXZCnhxQ2a1536TPHyf52 --discv5-bootstrap-node=enr:-LO4QHtIpCfAUncMcIBJfsaJ7QMuL-uuCPluemTW1Goy_xPNGNueNQIyfgk2GrqlQsLA085bP34iGW1t9tr435R7kxABgmlkgnY0gmlwhKwS6EaKbXVsdGlhZGRyc4wACgSsEuhGBp5I3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLYYGyTqryaoNo-u5kOr_jsR_Tngs5WOUguba87QMPSwYN0Y3CCnkeDdWRwgp5JhXdha3UyCw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.140.40 waku 5313de7b8be7c2193f20ae1b124c5e714bb37d0483cf6320dd729296c9bd2efe
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5313de7b8be7. Setting up logs at ./log/docker/node3_2024-10-03_04-14-18__a708ffc4-3a7b-4725-937d-bbcf70164602__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 17029
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17029/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17029/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.140.40/tcp/17030/p2p/16Uiu2HAmRj1QnSPeQtQ8R86xF22EiUczVDE61kUEdbc5ysU6bzW1","/ip4/172.18.140.40/tcp/17031/ws/p2p/16Uiu2HAmRj1QnSPeQtQ8R86xF22EiUczVDE61kUEdbc5ysU6bzW1"],"enrUri":"enr:-LO4QDPeWVCUk_jEclrT9SsTi3X7RTJY9yB3j8zBergheAn1dSj7gR6boYpQDxNlRX5gLdDxVd6rsJ6ebWOvh94Xn3YBgmlkgnY0gmlwhKwSjCiKbXVsdGlhZGRyc4wACgSsEowoBkKH3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPCL3O9Hh0cpSV7sI0nl7ODvBLU78y8QIuK9WtqiVcEloN0Y3CCQoaDdWRwgkKIhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4520/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40518/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4520/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.232.70/tcp/40519/p2p/16Uiu2HAm9zKKZ78YAuDHdaxZWioCc1hBXZCnhxQ2a1536TPHyf52","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40518/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.230.205/tcp/4521/p2p/16Uiu2HAmGUMD5jgs5i94cWf9DGMoPGTGc9W2o9ya8Zu8e7SkaS4o","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4520/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1727928892734218496}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17029/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"d8d58baa8011ee3cb96b","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"ueNX/R+Nuq7PR/zVQs+PryZ+PztSFMHJGgrZWNrDzpY="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ce2d0f9a781d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 963a7de26f4a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5313de7b8be7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.