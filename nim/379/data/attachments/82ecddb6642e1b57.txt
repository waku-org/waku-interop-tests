[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2024-10-03_04-19-48__5d034693-29de-43ad-a16a-b12964dee426
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-03_04-19-48__5d034693-29de-43ad-a16a-b12964dee426__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.59.114
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['59181', '59182', '59183', '59184', '59185']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 59181:59181 -p 59182:59182 -p 59183:59183 -p 59184:59184 -p 59185:59185 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59183 --rest-port=59181 --tcp-port=59182 --discv5-udp-port=59184 --rest-address=0.0.0.0 --nat=extip:172.18.59.114 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dbe35018a3d2be7ffd410daefeac2c0e2be74ee382ee9dc94ba6aaaa7a1fda92 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59185 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.59.114 waku 3dd746a7c4052ed66355225fdcd2f1c9c2c372e21cdcaf7997994df3672b5aff
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3dd746a7c405. Setting up logs at ./log/docker/receiving_node1_2024-10-03_04-19-48__5d034693-29de-43ad-a16a-b12964dee426__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 59181
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59181/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59181/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.59.114/tcp/59182/p2p/16Uiu2HAkyey2gvivQREbqAsC4uzCg4vHDtRyYkgF5KDgGwDtfYD6","/ip4/172.18.59.114/tcp/59183/ws/p2p/16Uiu2HAkyey2gvivQREbqAsC4uzCg4vHDtRyYkgF5KDgGwDtfYD6"],"enrUri":"enr:-LO4QNfPX0VGWIKvmrM8DcNFvrVYFFSwRBbI0m6gHbBqw7J_dnlKi9RrCJn63Da01tk1KvpVOHlY2fZQRT8lhYl4pXsBgmlkgnY0gmlwhKwSO3KKbXVsdGlhZGRyc4wACgSsEjtyBucv3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI-1pOeZX0vI-fGV30ICyRj3f_-1UnFs_oKH-7clbivuYN0Y3CC5y6DdWRwgucwhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-03_04-19-48__5d034693-29de-43ad-a16a-b12964dee426__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.108.6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['22630', '22631', '22632', '22633', '22634']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 22630:22630 -p 22631:22631 -p 22632:22632 -p 22633:22633 -p 22634:22634 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22632 --rest-port=22630 --tcp-port=22631 --discv5-udp-port=22633 --rest-address=0.0.0.0 --nat=extip:172.18.108.6 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bf4ae3113afdc7ac493dcd0bf3bcea2e18b559a9b597cbaedaed74fdebdb5bc2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22634 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.108.6 waku a8ee7fd8896090907a80f129cc60cf7ffea0e0c68b872c8bb60682ed39541c30
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a8ee7fd88960. Setting up logs at ./log/docker/receiving_node2_2024-10-03_04-19-48__5d034693-29de-43ad-a16a-b12964dee426__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 22630
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22630/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22630/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.108.6/tcp/22631/p2p/16Uiu2HAkyNQUpLPvD8YTvLcnEzrLYuNE5ja1yrbu14YNA4PP2gth","/ip4/172.18.108.6/tcp/22632/ws/p2p/16Uiu2HAkyNQUpLPvD8YTvLcnEzrLYuNE5ja1yrbu14YNA4PP2gth"],"enrUri":"enr:-LO4QPJBXXlYUDLAPFXleStnDYrsGkJRljhEoCmIzbviazOSCd2k6OoorzXppK-djlE7tVeD1jBF36EtRF_MZ_i7swMBgmlkgnY0gmlwhKwSbAaKbXVsdGlhZGRyc4wACgSsEmwGBlho3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI6mHrWDWmg7pty4LegnFmyVLVZXYRZFHsuOY8wwcaZuoN0Y3CCWGeDdWRwglhphXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22630/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.59.114/tcp/59182/p2p/16Uiu2HAkyey2gvivQREbqAsC4uzCg4vHDtRyYkgF5KDgGwDtfYD6"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-03_04-19-48__5d034693-29de-43ad-a16a-b12964dee426__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.36.57
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['42378', '42379', '42380', '42381', '42382']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 42378:42378 -p 42379:42379 -p 42380:42380 -p 42381:42381 -p 42382:42382 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42380 --rest-port=42378 --tcp-port=42379 --discv5-udp-port=42381 --rest-address=0.0.0.0 --nat=extip:172.18.36.57 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eedd963d8ca83ae4630f10d1b501c6b4d367deb9c8f75d5baab929db3d1ddb70 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42382 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QNfPX0VGWIKvmrM8DcNFvrVYFFSwRBbI0m6gHbBqw7J_dnlKi9RrCJn63Da01tk1KvpVOHlY2fZQRT8lhYl4pXsBgmlkgnY0gmlwhKwSO3KKbXVsdGlhZGRyc4wACgSsEjtyBucv3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI-1pOeZX0vI-fGV30ICyRj3f_-1UnFs_oKH-7clbivuYN0Y3CC5y6DdWRwgucwhXdha3UyCQ --lightpushnode=/ip4/172.18.59.114/tcp/59182/p2p/16Uiu2HAkyey2gvivQREbqAsC4uzCg4vHDtRyYkgF5KDgGwDtfYD6 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.36.57 waku ba9e444758875b39a6819b5c1433963fdcd1f7242f029955aaa69d78bb6a5014
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ba9e44475887. Setting up logs at ./log/docker/lightpush_node1_2024-10-03_04-19-48__5d034693-29de-43ad-a16a-b12964dee426__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 42378
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42378/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42378/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.36.57/tcp/42379/p2p/16Uiu2HAmTB1vgufnAxNUVc2M44YUg96Dw7KqEX9E9pznjkZj3qhV","/ip4/172.18.36.57/tcp/42380/ws/p2p/16Uiu2HAmTB1vgufnAxNUVc2M44YUg96Dw7KqEX9E9pznjkZj3qhV"],"enrUri":"enr:-LO4QCI-1dRrFbt9fk2oVDs3ZIlunc-bGpdbTIMu6iV9e2b_QBT3PmsxVniLPmo693DSyLFyEL0eiEtwr2x6WpskNSIBgmlkgnY0gmlwhKwSJDmKbXVsdGlhZGRyc4wACgSsEiQ5BqWM3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPXtNKzuH6raARyD3ZAlDF06s6At64OF47DjobM2IaVnIN0Y3CCpYuDdWRwgqWNhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42378/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.59.114/tcp/59182/p2p/16Uiu2HAkyey2gvivQREbqAsC4uzCg4vHDtRyYkgF5KDgGwDtfYD6"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42378/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.108.6/tcp/22631/p2p/16Uiu2HAkyNQUpLPvD8YTvLcnEzrLYuNE5ja1yrbu14YNA4PP2gth"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59181/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22630/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42378/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727929193402397184}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:42378/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42378/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727929193412666624}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:42378/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42378/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727929193419781120}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:42378/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42378/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727929193425594880}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:42378/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3dd746a7c405
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a8ee7fd88960
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ba9e44475887
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.