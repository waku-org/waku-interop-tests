[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush with id: 2024-12-13_04-03-13__d61c9dae-5f9a-4ec5-aad2-e1f9ba4ae53c
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-13_04-03-13__d61c9dae-5f9a-4ec5-aad2-e1f9ba4ae53c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.131.97
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['6178', '6179', '6180', '6181', '6182']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 6178:6178 -p 6179:6179 -p 6180:6180 -p 6181:6181 -p 6182:6182 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6180 --rest-port=6178 --tcp-port=6179 --discv5-udp-port=6181 --rest-address=0.0.0.0 --nat=extip:172.18.131.97 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9b93b97e019af8fecfc597b3d0ae3e9fd9c081ca2cfc9c56d98dfb3d55d74f7f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6182 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.131.97 waku 5516bbdcee8eca09485984a4309f624e24cc1397888751ec90ade697af146b67
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5516bbdcee8e. Setting up logs at ./log/docker/node1_2024-12-13_04-03-13__d61c9dae-5f9a-4ec5-aad2-e1f9ba4ae53c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 6178
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d167c99c947d. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6178/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6178/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.131.97/tcp/6179/p2p/16Uiu2HAmTbks1TNtCxD5VzF7eazL27GwQS2uyLgBdh7LmHxNtZWz","/ip4/172.18.131.97/tcp/6180/ws/p2p/16Uiu2HAmTbks1TNtCxD5VzF7eazL27GwQS2uyLgBdh7LmHxNtZWz"],"enrUri":"enr:-L24QKEYt6xUlVNPSUQUH5HjaxeI2zTcyhWccsfi0meJa9XdWhoSMVB1KiLvCYUdXBHtt8KlvaxH6RKuACpzSYHA9xACgmlkgnY0gmlwhKwSg2GKbXVsdGlhZGRyc5YACASsEoNhBhgjAAoErBKDYQYYJN0DgnJzhQADAQAAiXNlY3AyNTZrMaED3gtPnIOHQcQ7o8kRi3gm66QXXpSA-qMul-KphmimufODdGNwghgjg3VkcIIYJYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-13_04-03-13__d61c9dae-5f9a-4ec5-aad2-e1f9ba4ae53c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.99.66
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['39063', '39064', '39065', '39066', '39067']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 39063:39063 -p 39064:39064 -p 39065:39065 -p 39066:39066 -p 39067:39067 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39065 --rest-port=39063 --tcp-port=39064 --discv5-udp-port=39066 --rest-address=0.0.0.0 --nat=extip:172.18.99.66 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ffdbc5cc499a18d118eacc26d8c784eafd3a1cdebe3ae324caa5c6cb3bd01fef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39067 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QKEYt6xUlVNPSUQUH5HjaxeI2zTcyhWccsfi0meJa9XdWhoSMVB1KiLvCYUdXBHtt8KlvaxH6RKuACpzSYHA9xACgmlkgnY0gmlwhKwSg2GKbXVsdGlhZGRyc5YACASsEoNhBhgjAAoErBKDYQYYJN0DgnJzhQADAQAAiXNlY3AyNTZrMaED3gtPnIOHQcQ7o8kRi3gm66QXXpSA-qMul-KphmimufODdGNwghgjg3VkcIIYJYV3YWt1Mgk
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.99.66 waku 28a0e3e16e8fbe03546c9b6fb8ccc930e77d2e1886b588bea82424f9e21f0e2c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 28a0e3e16e8f. Setting up logs at ./log/docker/node1_2024-12-13_04-03-13__d61c9dae-5f9a-4ec5-aad2-e1f9ba4ae53c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 39063
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39063/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39063/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.99.66/tcp/39064/p2p/16Uiu2HAmLYZeEPWk5AYSoNcC5DakmzmKBdnHqmD5SjUa6nwxU18Q","/ip4/172.18.99.66/tcp/39065/ws/p2p/16Uiu2HAmLYZeEPWk5AYSoNcC5DakmzmKBdnHqmD5SjUa6nwxU18Q"],"enrUri":"enr:-L24QHWq8BdTXzIaRtmjCxKr96EbzChpZsnevA6uw5YNx_NxQ6zm-ZHyucZZ8uaSFUL2kg7JwnL9aLMy3M9jUUhZFOoCgmlkgnY0gmlwhKwSY0KKbXVsdGlhZGRyc5YACASsEmNCBpiYAAoErBJjQgaYmd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDdTgSwCHAcdh_3eCrspZLOgG5DVI8i8pOHqC6sZ2DHtWDdGNwgpiYg3VkcIKYmoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-13_04-03-13__d61c9dae-5f9a-4ec5-aad2-e1f9ba4ae53c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.127.207
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37608', '37609', '37610', '37611', '37612']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37608:37608 -p 37609:37609 -p 37610:37610 -p 37611:37611 -p 37612:37612 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37610 --rest-port=37608 --tcp-port=37609 --discv5-udp-port=37611 --rest-address=0.0.0.0 --nat=extip:172.18.127.207 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a72c9eeeff0efabf9f01faeb1f8fb8e65da89aaabfc9c5a4030717b7bcabfbc9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37612 --metrics-logging=true --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QKEYt6xUlVNPSUQUH5HjaxeI2zTcyhWccsfi0meJa9XdWhoSMVB1KiLvCYUdXBHtt8KlvaxH6RKuACpzSYHA9xACgmlkgnY0gmlwhKwSg2GKbXVsdGlhZGRyc5YACASsEoNhBhgjAAoErBKDYQYYJN0DgnJzhQADAQAAiXNlY3AyNTZrMaED3gtPnIOHQcQ7o8kRi3gm66QXXpSA-qMul-KphmimufODdGNwghgjg3VkcIIYJYV3YWt1Mgk --lightpushnode=/ip4/172.18.131.97/tcp/6179/p2p/16Uiu2HAmTbks1TNtCxD5VzF7eazL27GwQS2uyLgBdh7LmHxNtZWz
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.127.207 waku 1fcfbbec9aee13c7ba89544c8c4a06fbcb949aefd1d0bdea2222774dc1a4c32d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1fcfbbec9aee. Setting up logs at ./log/docker/node1_2024-12-13_04-03-13__d61c9dae-5f9a-4ec5-aad2-e1f9ba4ae53c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 37608
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37608/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37608/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.127.207/tcp/37609/p2p/16Uiu2HAmRxvgt8FoNaUQcnjawLQ46niixrSw8vZDe9W1WwSUPtBz","/ip4/172.18.127.207/tcp/37610/ws/p2p/16Uiu2HAmRxvgt8FoNaUQcnjawLQ46niixrSw8vZDe9W1WwSUPtBz"],"enrUri":"enr:-L24QFPgs8ZdeYFu6EaUgC34AYU5foRIiksR0PtT6XsrxohmcftNpCGkQQ5XNwxyGgZhp87vq5Lg1zJ1v64tn9fzvZsCgmlkgnY0gmlwhKwSf8-KbXVsdGlhZGRyc5YACASsEn_PBpLpAAoErBJ_zwaS6t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDxcA-ZfaTo2kOxPr1-LmxTZIM4rjTnCEAkeTRAb0LOWmDdGNwgpLpg3VkcIKS64V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6178/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39063/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37608/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1734062597455668224}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6178/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1734062597455668224,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39063/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1734062597455668224,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5516bbdcee8e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 28a0e3e16e8f
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5516bbdcee8e. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1fcfbbec9aee
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 28a0e3e16e8f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.