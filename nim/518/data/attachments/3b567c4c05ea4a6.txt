[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_metrics_after_light_push with id: 2024-12-13_04-14-54__5a6bcb85-007b-4303-ae47-c6ee3ff0fafd
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-13_04-14-54__5a6bcb85-007b-4303-ae47-c6ee3ff0fafd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.110.10
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['13534', '13535', '13536', '13537', '13538']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 13534:13534 -p 13535:13535 -p 13536:13536 -p 13537:13537 -p 13538:13538 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13536 --rest-port=13534 --tcp-port=13535 --discv5-udp-port=13537 --rest-address=0.0.0.0 --nat=extip:172.18.110.10 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e45a07be19effe1ebb87c26ba70bfa7bbffd5ff746bfa4d50ba593bcb417ad2b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13538 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.110.10 waku a4fcbb78615ba1167fe83710894ce9fd659744aef19088b53c591ac7acd3e188
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a4fcbb78615b. Setting up logs at ./log/docker/receiving_node1_2024-12-13_04-14-54__5a6bcb85-007b-4303-ae47-c6ee3ff0fafd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 13534
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c21c9cbb6a68. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13534/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13534/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.110.10/tcp/13535/p2p/16Uiu2HAmPhh45ombec4we4ymw6YcDUdMnbH3FBJTKVESdyYq4dfh","/ip4/172.18.110.10/tcp/13536/ws/p2p/16Uiu2HAmPhh45ombec4we4ymw6YcDUdMnbH3FBJTKVESdyYq4dfh"],"enrUri":"enr:-L24QOkvdCIaT9Dr2kGcnmbnvoKvxxDlQh4_ydDRSEZCVuKfFFg81fiJJ9aTPD5rl2bnwSYWtsYjZqJh-uN9vAKrDCkCgmlkgnY0gmlwhKwSbgqKbXVsdGlhZGRyc5YACASsEm4KBjTfAAoErBJuCgY04N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDpCG9wMqq1BfAWbLveiXx-DriEQ1SNa6v2zylFLokhKyDdGNwgjTfg3VkcII04YV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-13_04-14-54__5a6bcb85-007b-4303-ae47-c6ee3ff0fafd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.100.0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['28355', '28356', '28357', '28358', '28359']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 28355:28355 -p 28356:28356 -p 28357:28357 -p 28358:28358 -p 28359:28359 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28357 --rest-port=28355 --tcp-port=28356 --discv5-udp-port=28358 --rest-address=0.0.0.0 --nat=extip:172.18.100.0 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=53e2c986c65a9b4264e0fee3a9f6ef06092cffc26ab1bcb46b0ecaee1fdbb6f7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28359 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.100.0 waku 3fbce11ce9ef902ab53df07fd817815feeed77e15b2162d5d717783e7ab19945
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3fbce11ce9ef. Setting up logs at ./log/docker/receiving_node2_2024-12-13_04-14-54__5a6bcb85-007b-4303-ae47-c6ee3ff0fafd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 28355
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28355/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28355/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.100.0/tcp/28356/p2p/16Uiu2HAmK9BmkBjCccHb4rq7UPtaEu9QQ6dwatdP75bSgBxpjkou","/ip4/172.18.100.0/tcp/28357/ws/p2p/16Uiu2HAmK9BmkBjCccHb4rq7UPtaEu9QQ6dwatdP75bSgBxpjkou"],"enrUri":"enr:-L24QN4VxrX1IWzJg8maBd2t0lf7157pXuE6xncPKSNguQvwWBW2pPQg9Gl7Pk0W_sDxV4eoM4NCgcAw-HpfEClR358CgmlkgnY0gmlwhKwSZACKbXVsdGlhZGRyc5YACASsEmQABm7EAAoErBJkAAZuxd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDYF9MeDajMTHSQX_Lo_Rhe76jCXbviYx_ekVe0TibmoyDdGNwgm7Eg3VkcIJuxoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28355/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.110.10/tcp/13535/p2p/16Uiu2HAmPhh45ombec4we4ymw6YcDUdMnbH3FBJTKVESdyYq4dfh"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-13_04-14-54__5a6bcb85-007b-4303-ae47-c6ee3ff0fafd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.117.157
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['36361', '36362', '36363', '36364', '36365']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 36361:36361 -p 36362:36362 -p 36363:36363 -p 36364:36364 -p 36365:36365 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36363 --rest-port=36361 --tcp-port=36362 --discv5-udp-port=36364 --rest-address=0.0.0.0 --nat=extip:172.18.117.157 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fbb6fc80b7e5aebb3492d3ddfbd6fa4e3ea1cec03c114b7b0ac8defdebbfa968 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36365 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QOkvdCIaT9Dr2kGcnmbnvoKvxxDlQh4_ydDRSEZCVuKfFFg81fiJJ9aTPD5rl2bnwSYWtsYjZqJh-uN9vAKrDCkCgmlkgnY0gmlwhKwSbgqKbXVsdGlhZGRyc5YACASsEm4KBjTfAAoErBJuCgY04N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDpCG9wMqq1BfAWbLveiXx-DriEQ1SNa6v2zylFLokhKyDdGNwgjTfg3VkcII04YV3YWt1Mgk --lightpushnode=/ip4/172.18.110.10/tcp/13535/p2p/16Uiu2HAmPhh45ombec4we4ymw6YcDUdMnbH3FBJTKVESdyYq4dfh --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.117.157 waku 8a4912edb6852b2851e737977e8e2126658301268c4a9539d7cfbb9558a555a5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8a4912edb685. Setting up logs at ./log/docker/lightpush_node1_2024-12-13_04-14-54__5a6bcb85-007b-4303-ae47-c6ee3ff0fafd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 36361
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36361/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36361/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.117.157/tcp/36362/p2p/16Uiu2HAmTDww3SEKgzQdJPfZWjC6revZmoJWictLcFhVJGpE35LT","/ip4/172.18.117.157/tcp/36363/ws/p2p/16Uiu2HAmTDww3SEKgzQdJPfZWjC6revZmoJWictLcFhVJGpE35LT"],"enrUri":"enr:-L24QPYygzAI2RlQDQokO0aFBwy4vGPpCsKMXFGQeSbJ0kCvJBTkQXqReRNNDz0re4GVxEL77WlSH-GgaTmr65U_ZF8CgmlkgnY0gmlwhKwSdZ2KbXVsdGlhZGRyc5YACASsEnWdBo4KAAoErBJ1nQaOC90DgnJzhQADAQAAiXNlY3AyNTZrMaED2HUMsG4UKyI3RJmHbtXp6Ly5n1_is9iopMP2AiGsy7iDdGNwgo4Kg3VkcIKODIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36361/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.110.10/tcp/13535/p2p/16Uiu2HAmPhh45ombec4we4ymw6YcDUdMnbH3FBJTKVESdyYq4dfh"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36361/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.100.0/tcp/28356/p2p/16Uiu2HAmK9BmkBjCccHb4rq7UPtaEu9QQ6dwatdP75bSgBxpjkou"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13534/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28355/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36361/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1734063298767284992}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.5 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13534/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1734063298767284992,"ephemeral":false}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 5 seconds
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: waku_service_peers{protocol="/vac/waku/lightpush/2.0.0-beta1",peerId="/ip4/172.18.110.10/tcp/13535"} has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: waku_service_peers{protocol="/vac/waku/lightpush/2.0.0-beta1",peerId="/ip4/172.18.110.10/tcp/13535"} with value 1.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: libp2p_peers has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: libp2p_peers with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: waku_peer_store_size has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: waku_peer_store_size with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: libp2p_peers has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: libp2p_peers with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: libp2p_pubsub_peers has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: libp2p_pubsub_peers with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: libp2p_pubsub_topics has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: libp2p_pubsub_topics with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: libp2p_pubsub_subscriptions_total has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: libp2p_pubsub_subscriptions_total with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: waku_peer_store_size has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: waku_peer_store_size with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: waku_histogram_message_size_count has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: waku_histogram_message_size_count with value 1.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: waku_node_messages_total{type="relay"} has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: waku_node_messages_total{type="relay"} with value 1.0
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a4fcbb78615b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 3fbce11ce9ef
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a4fcbb78615b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 8a4912edb685
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3fbce11ce9ef. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.