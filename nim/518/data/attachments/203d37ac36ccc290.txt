[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-12-13_04-14-31__e6d4c93d-5a6d-4fbd-8327-1bd60cd2616b
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-13_04-14-31__e6d4c93d-5a6d-4fbd-8327-1bd60cd2616b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.53.28
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['19857', '19858', '19859', '19860', '19861']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 19857:19857 -p 19858:19858 -p 19859:19859 -p 19860:19860 -p 19861:19861 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19859 --rest-port=19857 --tcp-port=19858 --discv5-udp-port=19860 --rest-address=0.0.0.0 --nat=extip:172.18.53.28 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=84dddc63d2d0d6500ca39f415e5efca93cb7f678a6f4a7ed6ead48dfd4f681eb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19861 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.53.28 waku 221de957e722502afd04db771516babf8c68a953c7c743e1efea0a8d68b20435
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 221de957e722. Setting up logs at ./log/docker/receiving_node1_2024-12-13_04-14-31__e6d4c93d-5a6d-4fbd-8327-1bd60cd2616b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 19857
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ce97944a1f57. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19857/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19857/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.53.28/tcp/19858/p2p/16Uiu2HAmG5TwHi7XbefVsWmZgWz2HCAU8rnFSCmWAq8LTt8LwBz4","/ip4/172.18.53.28/tcp/19859/ws/p2p/16Uiu2HAmG5TwHi7XbefVsWmZgWz2HCAU8rnFSCmWAq8LTt8LwBz4"],"enrUri":"enr:-L24QGtqBA_4UUfNi-BIaY66TMHnOeJDTbYi6ypHn5T3NVFqd3vVc_YZNUNlh3csn8IB80PP-UwgEjzqCoRXupT8kPwCgmlkgnY0gmlwhKwSNRyKbXVsdGlhZGRyc5YACASsEjUcBk2SAAoErBI1HAZNk90DgnJzhQADAQAAiXNlY3AyNTZrMaEDMtgxJwEM_qKw5ef3Vj6uuyfq7gdPeYmfdEFCjJ8blRWDdGNwgk2Sg3VkcIJNlIV3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-13_04-14-31__e6d4c93d-5a6d-4fbd-8327-1bd60cd2616b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.180.180
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['64769', '64770', '64771', '64772', '64773']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 64769:64769 -p 64770:64770 -p 64771:64771 -p 64772:64772 -p 64773:64773 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64771 --rest-port=64769 --tcp-port=64770 --discv5-udp-port=64772 --rest-address=0.0.0.0 --nat=extip:172.18.180.180 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=daf4cdb02eddf3ef5a57268ac1c3bb7c5cc8204aff314bf400b440e38ed18f10 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64773 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.180.180 waku f0815b96fce22d1e0cb7b38cd7f5384e05d71df9f33fa3fb6e9448a833370af2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f0815b96fce2. Setting up logs at ./log/docker/receiving_node2_2024-12-13_04-14-31__e6d4c93d-5a6d-4fbd-8327-1bd60cd2616b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 64769
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64769/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64769/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.180.180/tcp/64770/p2p/16Uiu2HAm5cuM57xfWwQpeLbBgdZyuDPSr2TyBPUDQT1GV3JdQkDk","/ip4/172.18.180.180/tcp/64771/ws/p2p/16Uiu2HAm5cuM57xfWwQpeLbBgdZyuDPSr2TyBPUDQT1GV3JdQkDk"],"enrUri":"enr:-L24QLFBIB2ujHbbtqytnvEqFonYT7APo9m3qQthLaMZBLBsFBCFzppGM5WiXe6vpkxHxwH05qgZojtsQxu23zYvHh8CgmlkgnY0gmlwhKwStLSKbXVsdGlhZGRyc5YACASsErS0Bv0CAAoErBK0tAb9A90DgnJzhQADAQAAiXNlY3AyNTZrMaECl3VfQ9hNrUdmg9kh8GQ45K6PJyepRfZTZ9WuUzROWOeDdGNwgv0Cg3VkcIL9BIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64769/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.53.28/tcp/19858/p2p/16Uiu2HAmG5TwHi7XbefVsWmZgWz2HCAU8rnFSCmWAq8LTt8LwBz4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-13_04-14-31__e6d4c93d-5a6d-4fbd-8327-1bd60cd2616b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.142.173
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['39370', '39371', '39372', '39373', '39374']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 39370:39370 -p 39371:39371 -p 39372:39372 -p 39373:39373 -p 39374:39374 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39372 --rest-port=39370 --tcp-port=39371 --discv5-udp-port=39373 --rest-address=0.0.0.0 --nat=extip:172.18.142.173 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9a034ca5b780ec33d7d08b1b04ecd3aed9f6fc80e4a11b3b7edbad1ad37ad490 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39374 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QGtqBA_4UUfNi-BIaY66TMHnOeJDTbYi6ypHn5T3NVFqd3vVc_YZNUNlh3csn8IB80PP-UwgEjzqCoRXupT8kPwCgmlkgnY0gmlwhKwSNRyKbXVsdGlhZGRyc5YACASsEjUcBk2SAAoErBI1HAZNk90DgnJzhQADAQAAiXNlY3AyNTZrMaEDMtgxJwEM_qKw5ef3Vj6uuyfq7gdPeYmfdEFCjJ8blRWDdGNwgk2Sg3VkcIJNlIV3YWt1Mg0 --lightpushnode=/ip4/172.18.53.28/tcp/19858/p2p/16Uiu2HAmG5TwHi7XbefVsWmZgWz2HCAU8rnFSCmWAq8LTt8LwBz4 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.142.173 waku 0cf294c89a06ba3a5677acc7aae6b76d249831cdf425e121e4d9f0e1d60208f4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0cf294c89a06. Setting up logs at ./log/docker/lightpush_node1_2024-12-13_04-14-31__e6d4c93d-5a6d-4fbd-8327-1bd60cd2616b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 39370
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39370/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39370/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.142.173/tcp/39371/p2p/16Uiu2HAmEdJLNwpc4B6jNsGrMwsVkesmWZvTgvNDovMME8S7uF9A","/ip4/172.18.142.173/tcp/39372/ws/p2p/16Uiu2HAmEdJLNwpc4B6jNsGrMwsVkesmWZvTgvNDovMME8S7uF9A"],"enrUri":"enr:-L24QJ9D03Hh57_GbicyvTyCn0NxGmNxi585WLCG0bznhpndRwSFowz2TNXoKXBJC4tULK1kUF0TB8l9MZy4ltt_FjMCgmlkgnY0gmlwhKwSjq2KbXVsdGlhZGRyc5YACASsEo6tBpnLAAoErBKOrQaZzN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDHUiMEbsjGchuU72k4YOPjxSUBTf-MA5fGIjKeKLPaTGDdGNwgpnLg3VkcIKZzYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39370/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.53.28/tcp/19858/p2p/16Uiu2HAmG5TwHi7XbefVsWmZgWz2HCAU8rnFSCmWAq8LTt8LwBz4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39370/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.180.180/tcp/64770/p2p/16Uiu2HAm5cuM57xfWwQpeLbBgdZyuDPSr2TyBPUDQT1GV3JdQkDk"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19857/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64769/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39370/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1734063276078078208}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19857/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1734063276078078208,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64769/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1734063276078078208,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 221de957e722
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f0815b96fce2
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 221de957e722. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0cf294c89a06
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f0815b96fce2. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.