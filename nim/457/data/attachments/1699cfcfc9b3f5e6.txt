[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 796bd4e2f8cc. Exiting log stream.
[35mDEBUG   [0m src.postgres_setup:postgres_setup.py:36 Postgres container started
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_on_empty_postgress_db with id: 2024-11-21_04-29-52__5ae4f86a-fa95-4db6-93b9-f86f5c292b6a
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-11-21_04-29-52__5ae4f86a-fa95-4db6-93b9-f86f5c292b6a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.172.142
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['20127', '20128', '20129', '20130', '20131']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 20127:20127 -p 20128:20128 -p 20129:20129 -p 20130:20130 -p 20131:20131 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20129 --rest-port=20127 --tcp-port=20128 --discv5-udp-port=20130 --rest-address=0.0.0.0 --nat=extip:172.18.172.142 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7d7f075ccbc2ced3c70743feeebd2a8cd1f921f86afccd84ff35244577ed4540 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20131 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.172.142 waku 0d12d97da7b176e5cc699370d8dc0eceb0e2ce7c0f57f53d06f7a86855214ae2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0d12d97da7b1. Setting up logs at ./log/docker/publishing_node1_2024-11-21_04-29-52__5ae4f86a-fa95-4db6-93b9-f86f5c292b6a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 20127
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20127/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Initializing","protocolsHealth":[]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20127/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Initializing","protocolsHealth":[]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20127/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20127/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.172.142/tcp/20128/p2p/16Uiu2HAm6EDCeV4WwP2aRMx3jHhR6GStNorSgRHZ3rv9n8uJSBsf","/ip4/172.18.172.142/tcp/20129/ws/p2p/16Uiu2HAm6EDCeV4WwP2aRMx3jHhR6GStNorSgRHZ3rv9n8uJSBsf"],"enrUri":"enr:-L24QCe83ho_gzNkSfHAKrz_wi443NTbI8Bg840B9nNcKzNVLAA1d9lCZvlCKDbTQzGcEU7qSPN-JsoEmGLzdUmLHgICgmlkgnY0gmlwhKwSrI6KbXVsdGlhZGRyc5YACASsEqyOBk6gAAoErBKsjgZOod0DgnJzhQADAQAAiXNlY3AyNTZrMaECoIDjjRhRDGXIQPwvQizNod-UvAY40-DrQ_dFhobP4ZqDdGNwgk6gg3VkcIJOooV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-11-21_04-29-52__5ae4f86a-fa95-4db6-93b9-f86f5c292b6a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.111.1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['27472', '27473', '27474', '27475', '27476']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 27472:27472 -p 27473:27473 -p 27474:27474 -p 27475:27475 -p 27476:27476 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27474 --rest-port=27472 --tcp-port=27473 --discv5-udp-port=27475 --rest-address=0.0.0.0 --nat=extip:172.18.111.1 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6a98bfe3ec4e46a096cfecac4e60af605faf8279bacb8bf1bad7c9ec3bc49dc6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27476 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QCe83ho_gzNkSfHAKrz_wi443NTbI8Bg840B9nNcKzNVLAA1d9lCZvlCKDbTQzGcEU7qSPN-JsoEmGLzdUmLHgICgmlkgnY0gmlwhKwSrI6KbXVsdGlhZGRyc5YACASsEqyOBk6gAAoErBKsjgZOod0DgnJzhQADAQAAiXNlY3AyNTZrMaECoIDjjRhRDGXIQPwvQizNod-UvAY40-DrQ_dFhobP4ZqDdGNwgk6gg3VkcIJOooV3YWt1MgM --storenode=/ip4/172.18.172.142/tcp/20128/p2p/16Uiu2HAm6EDCeV4WwP2aRMx3jHhR6GStNorSgRHZ3rv9n8uJSBsf --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.111.1 waku 1486605acbd3756b19d300156a6234d74764fb4ed85126ae75d1c22055bed4c5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1486605acbd3. Setting up logs at ./log/docker/store_node1_2024-11-21_04-29-52__5ae4f86a-fa95-4db6-93b9-f86f5c292b6a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 27472
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27472/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27472/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.111.1/tcp/27473/p2p/16Uiu2HAm3r86U54TJL5FbS97EXqCTXNJ29pgpTeMwbeRobKbNqmM","/ip4/172.18.111.1/tcp/27474/ws/p2p/16Uiu2HAm3r86U54TJL5FbS97EXqCTXNJ29pgpTeMwbeRobKbNqmM"],"enrUri":"enr:-L24QBjrQKqNXzbc_EhNrvzkXh_oBzekGGyQRzWVEdzv0fgmA2nFS9CJtNmFw8KxzHko4ISg4tKUDX_XQd8qYZXmHyICgmlkgnY0gmlwhKwSbwGKbXVsdGlhZGRyc5YACASsEm8BBmtRAAoErBJvAQZrUt0DgnJzhQADAQAAiXNlY3AyNTZrMaECfSD2llosLg5bgAqeyws37rUT9Tx9OZzax74C27Z-0PSDdGNwgmtRg3VkcIJrU4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27472/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.172.142/tcp/20128/p2p/16Uiu2HAm6EDCeV4WwP2aRMx3jHhR6GStNorSgRHZ3rv9n8uJSBsf"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20127/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27472/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20127/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20127/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"mtjgYJlR2McDwvjMr/ur+Gl1/khmsloypkQVs5bh3Ko="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27472/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"ad950f36bf07b9bca36f","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"mtjgYJlR2McDwvjMr/ur+Gl1/khmsloypkQVs5bh3Ko="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 0d12d97da7b1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 1486605acbd3
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0d12d97da7b1. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.postgres_setup:postgres_setup.py:44 Postgres container stopped and removed.