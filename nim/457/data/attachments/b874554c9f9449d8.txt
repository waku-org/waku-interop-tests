[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_cant_retrieve_messages_on_not_subscribed_content_topic with id: 2024-11-21_04-23-06__28a7ea89-9112-4ca1-ab52-25e5b53d455e
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-21_04-23-06__28a7ea89-9112-4ca1-ab52-25e5b53d455e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.75.105
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['48096', '48097', '48098', '48099', '48100']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 48096:48096 -p 48097:48097 -p 48098:48098 -p 48099:48099 -p 48100:48100 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48098 --rest-port=48096 --tcp-port=48097 --discv5-udp-port=48099 --rest-address=0.0.0.0 --nat=extip:172.18.75.105 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=f4d89d67ff66d06d0f6ea78f617955accc34ca07df3837af32fec4d6dace805c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48100 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.159.64
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['16087', '16088', '16089', '16090', '16091']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 16087:16087 -p 16088:16088 -p 16089:16089 -p 16090:16090 -p 16091:16091 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16089 --rest-port=16087 --tcp-port=16088 --discv5-udp-port=16090 --rest-address=0.0.0.0 --nat=extip:172.18.159.64 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=667fd27560b4c7ad38c98fa80eabac0d2c8b8d8210adbc6e8a1bf4ecd6f77845 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16091 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.159.64 waku b8e6b559d87f518fade25bc168e46aaa8dbef67402be02f665cd791609f67355
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 92152d0cc0a8. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b8e6b559d87f. Setting up logs at ./log/docker/node1_2024-11-21_04-23-06__28a7ea89-9112-4ca1-ab52-25e5b53d455e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 16087
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16087/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16087/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.159.64/tcp/16088/p2p/16Uiu2HAmEyw2u5sWjLsSJ8NpjsaeLXjGYB4EJyYGWToah3xnxqav","/ip4/172.18.159.64/tcp/16089/ws/p2p/16Uiu2HAmEyw2u5sWjLsSJ8NpjsaeLXjGYB4EJyYGWToah3xnxqav"],"enrUri":"enr:-L24QGhG9_cZNK_DbDD5KHzAFiezWR-kW-4W7ZuF4gBINUNxV98iXcim2PaMUtS1HvBI_XTx5jnD82cPJO5y4Mw2VwkCgmlkgnY0gmlwhKwSn0CKbXVsdGlhZGRyc5YACASsEp9ABj7YAAoErBKfQAY-2d0DgnJzhQACAQAAiXNlY3AyNTZrMaEDIpGomN8KC_ngyALxd_V9IqqRqh6Cle8wDcb0CKSmy7eDdGNwgj7Yg3VkcII-2oV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-21_04-23-06__28a7ea89-9112-4ca1-ab52-25e5b53d455e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.84.236
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['20246', '20247', '20248', '20249', '20250']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 20246:20246 -p 20247:20247 -p 20248:20248 -p 20249:20249 -p 20250:20250 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20248 --rest-port=20246 --tcp-port=20247 --discv5-udp-port=20249 --rest-address=0.0.0.0 --nat=extip:172.18.84.236 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=c54cfc45dddcc785caaf080ffb7642bf1df15f7774edef76b89daa95e95fcdaa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20250 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QGhG9_cZNK_DbDD5KHzAFiezWR-kW-4W7ZuF4gBINUNxV98iXcim2PaMUtS1HvBI_XTx5jnD82cPJO5y4Mw2VwkCgmlkgnY0gmlwhKwSn0CKbXVsdGlhZGRyc5YACASsEp9ABj7YAAoErBKfQAY-2d0DgnJzhQACAQAAiXNlY3AyNTZrMaEDIpGomN8KC_ngyALxd_V9IqqRqh6Cle8wDcb0CKSmy7eDdGNwgj7Yg3VkcII-2oV3YWt1MgU --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.84.236 waku c6ba21317e0edd22fea96192138d9faaa463f8d5f6a8a580ef93cde488f6026f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c6ba21317e0e. Setting up logs at ./log/docker/node2_2024-11-21_04-23-06__28a7ea89-9112-4ca1-ab52-25e5b53d455e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 20246
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20246/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20246/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.236/tcp/20247/p2p/16Uiu2HAmMxKHzrxJ91HFEsGJkfYuxKi2nCE7kXyw83SzApYyrYyT","/ip4/172.18.84.236/tcp/20248/ws/p2p/16Uiu2HAmMxKHzrxJ91HFEsGJkfYuxKi2nCE7kXyw83SzApYyrYyT"],"enrUri":"enr:-L24QHVESUw1JWA2R3sgLwQwiRh9Fo4hWyFmyGPrZZAOTGu7OfUxrgRu9vGiOSO8ao_12bwqAy1S4v-N2GqPpH1oaXwCgmlkgnY0gmlwhKwSVOyKbXVsdGlhZGRyc5YACASsElTsBk8XAAoErBJU7AZPGN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDiil5rNTiuxQrxc05k2aa_Bw46pI9Ts_c2qrlhlPmZu6DdGNwgk8Xg3VkcIJPGYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20246/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.159.64/tcp/16088/p2p/16Uiu2HAmEyw2u5sWjLsSJ8NpjsaeLXjGYB4EJyYGWToah3xnxqav"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16087/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20246/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16087/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16087/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:16087/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto. Response content: b'/toychat/2/huilong/proto'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id b8e6b559d87f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id c6ba21317e0e
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b8e6b559d87f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.