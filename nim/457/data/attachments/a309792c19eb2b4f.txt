[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_pubsub_topics with id: 2024-11-21_04-16-16__0863e0c9-ab48-4ec6-bc96-30f49a594786
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-21_04-16-16__0863e0c9-ab48-4ec6-bc96-30f49a594786__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.171.20
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['58587', '58588', '58589', '58590', '58591']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 58587:58587 -p 58588:58588 -p 58589:58589 -p 58590:58590 -p 58591:58591 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58589 --rest-port=58587 --tcp-port=58588 --discv5-udp-port=58590 --rest-address=0.0.0.0 --nat=extip:172.18.171.20 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a83fc501d9f38f73a65f9d181b3f2de278c9a7b5beeba55ac08cfc4ea9aef86e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58591 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.171.20 waku e26de53d9dbd7cdb8a634c0a60aaee2b7719769aa3451f897ae9c379d21d4590
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1cf8319d6a92. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e26de53d9dbd. Setting up logs at ./log/docker/receiving_node1_2024-11-21_04-16-16__0863e0c9-ab48-4ec6-bc96-30f49a594786__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 58587
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58587/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58587/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.171.20/tcp/58588/p2p/16Uiu2HAkxz7wNwaSRxwALBHVx1Uwug4bo1Gmr3JZhDkodqHze3Gq","/ip4/172.18.171.20/tcp/58589/ws/p2p/16Uiu2HAkxz7wNwaSRxwALBHVx1Uwug4bo1Gmr3JZhDkodqHze3Gq"],"enrUri":"enr:-L24QCHa-fe7aD_p-bKptOLCelMfA0O2Jv6FkkCujfDLI59YUo2pG-NYV9WPvu0yMdhcElW2ZianYyfDj1pWu_ry4m4CgmlkgnY0gmlwhKwSqxSKbXVsdGlhZGRyc5YACASsEqsUBuTcAAoErBKrFAbk3d0DgnJzhQADAQAAiXNlY3AyNTZrMaECNOL_dgSoVN2fvyLwn_vwYH-XAaMp2ws_T2TMHsU5SjaDdGNwguTcg3VkcILk3oV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-21_04-16-16__0863e0c9-ab48-4ec6-bc96-30f49a594786__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.154.185
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['38877', '38878', '38879', '38880', '38881']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 38877:38877 -p 38878:38878 -p 38879:38879 -p 38880:38880 -p 38881:38881 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38879 --rest-port=38877 --tcp-port=38878 --discv5-udp-port=38880 --rest-address=0.0.0.0 --nat=extip:172.18.154.185 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ae03aafaa86b2a05a0fab75874dabfbdfdefa4e55b7ea2adf9e451ec60c102da --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38881 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.154.185 waku 1947cf466ebe20cdebf543c59b87b10fe01d6d35bc55b2379a0ad180e86411a2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1947cf466ebe. Setting up logs at ./log/docker/receiving_node2_2024-11-21_04-16-16__0863e0c9-ab48-4ec6-bc96-30f49a594786__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 38877
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38877/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38877/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.154.185/tcp/38878/p2p/16Uiu2HAmFtZtuvEg2y4V2LBgJg3JCXF4qykRvLTLJWXzW7HjxUh8","/ip4/172.18.154.185/tcp/38879/ws/p2p/16Uiu2HAmFtZtuvEg2y4V2LBgJg3JCXF4qykRvLTLJWXzW7HjxUh8"],"enrUri":"enr:-L24QGjiGsiXe_nOLjyR-iGsk2WrLF_TKaQmB0IvICZYzFUBAsjzLYGazXvQPyZGK2YZHapwjU9dyPEfraVeiGKokTUCgmlkgnY0gmlwhKwSmrmKbXVsdGlhZGRyc5YACASsEpq5BpfeAAoErBKauQaX390DgnJzhQADAQAAiXNlY3AyNTZrMaEDMA2Kf5IMSX8qpR9Xru9gFko9TQD9I8OqK3SqUwxyMBuDdGNwgpfeg3VkcIKX4IV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38877/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.171.20/tcp/58588/p2p/16Uiu2HAkxz7wNwaSRxwALBHVx1Uwug4bo1Gmr3JZhDkodqHze3Gq"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-21_04-16-16__0863e0c9-ab48-4ec6-bc96-30f49a594786__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.127.248
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['48341', '48342', '48343', '48344', '48345']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 48341:48341 -p 48342:48342 -p 48343:48343 -p 48344:48344 -p 48345:48345 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48343 --rest-port=48341 --tcp-port=48342 --discv5-udp-port=48344 --rest-address=0.0.0.0 --nat=extip:172.18.127.248 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fe4dfc7ceeb610bc44cdb68ec2eca87e927dde1f3e6b9876fca843dccaa86e7b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48345 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QCHa-fe7aD_p-bKptOLCelMfA0O2Jv6FkkCujfDLI59YUo2pG-NYV9WPvu0yMdhcElW2ZianYyfDj1pWu_ry4m4CgmlkgnY0gmlwhKwSqxSKbXVsdGlhZGRyc5YACASsEqsUBuTcAAoErBKrFAbk3d0DgnJzhQADAQAAiXNlY3AyNTZrMaECNOL_dgSoVN2fvyLwn_vwYH-XAaMp2ws_T2TMHsU5SjaDdGNwguTcg3VkcILk3oV3YWt1Mgk --lightpushnode=/ip4/172.18.171.20/tcp/58588/p2p/16Uiu2HAkxz7wNwaSRxwALBHVx1Uwug4bo1Gmr3JZhDkodqHze3Gq --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.127.248 waku b976855dc4e50b5c1904d40c8a77b509fb852e4e08ff7ed33dc44a37affeca56
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b976855dc4e5. Setting up logs at ./log/docker/lightpush_node1_2024-11-21_04-16-16__0863e0c9-ab48-4ec6-bc96-30f49a594786__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 48341
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48341/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48341/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.127.248/tcp/48342/p2p/16Uiu2HAm4TVEf1Ca4LpY9dW8fmZU8w6XH144YpVSSucfJPXkuao5","/ip4/172.18.127.248/tcp/48343/ws/p2p/16Uiu2HAm4TVEf1Ca4LpY9dW8fmZU8w6XH144YpVSSucfJPXkuao5"],"enrUri":"enr:-L24QIn4zA_wLUUdKk5aBo2Qrc-xW54rJV6DgEyBr3S-yWcPN-GrLC_peU0V6lO2HoRW1eCB6_kWyaLxWpL3QHzXbIkCgmlkgnY0gmlwhKwSf_iKbXVsdGlhZGRyc5YACASsEn_4BrzWAAoErBJ_-Aa8190DgnJzhQADAQAAiXNlY3AyNTZrMaEChjAyKl-2RNiwfxOXeZwToHUxygMq0f_gpi0oeeXnnqSDdGNwgrzWg3VkcIK82IV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48341/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.171.20/tcp/58588/p2p/16Uiu2HAkxz7wNwaSRxwALBHVx1Uwug4bo1Gmr3JZhDkodqHze3Gq"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48341/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.154.185/tcp/38878/p2p/16Uiu2HAmFtZtuvEg2y4V2LBgJg3JCXF4qykRvLTLJWXzW7HjxUh8"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58587/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38877/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48341/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1732162582364909824}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:48341/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id e26de53d9dbd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 1947cf466ebe
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e26de53d9dbd. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id b976855dc4e5
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1947cf466ebe. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.