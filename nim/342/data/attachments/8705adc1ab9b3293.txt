[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2024-09-02_04-21-31__b4c464c2-2d6f-41ae-ab33-15f88ab9fd5f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-02_04-21-31__b4c464c2-2d6f-41ae-ab33-15f88ab9fd5f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.205.94
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['37352', '37353', '37354', '37355', '37356']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 37352:37352 -p 37353:37353 -p 37354:37354 -p 37355:37355 -p 37356:37356 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37354 --rest-port=37352 --tcp-port=37353 --discv5-udp-port=37355 --rest-address=0.0.0.0 --nat=extip:172.18.205.94 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b214cd9ba2e5ec9a3d120aca31d0f94488ec8ed4ace6aa1f4bc96c7dadaabfcf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37356 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.205.94 waku beabf6caab99e446f5d026b6568ed83b1f8b2d1493dcef923e4aa0219e964146
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID beabf6caab99. Setting up logs at ./log/docker/receiving_node1_2024-09-02_04-21-31__b4c464c2-2d6f-41ae-ab33-15f88ab9fd5f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 37352
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37352/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37352/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.205.94/tcp/37353/p2p/16Uiu2HAkxYCS2dYE57HvEg65AW7zt3CCfCHBZRzMiAdBkvo86SAQ","/ip4/172.18.205.94/tcp/37354/ws/p2p/16Uiu2HAkxYCS2dYE57HvEg65AW7zt3CCfCHBZRzMiAdBkvo86SAQ"],"enrUri":"enr:-LO4QISOrxuW_ZZLUa6xGYmX8_AMZhXhMj9_NpyCISnMEgc9KCGsXH-gUNttzxYN48M7iijeF44Xotzee4lNfg0UJY4BgmlkgnY0gmlwhKwSzV6KbXVsdGlhZGRyc4wACgSsEs1eBpHq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIuPvprLeJ8Wxd5oF1SeP4H7VOrzf390xOnD5r2YFKYXYN0Y3CCkemDdWRwgpHrhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-02_04-21-31__b4c464c2-2d6f-41ae-ab33-15f88ab9fd5f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.239.23
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['39662', '39663', '39664', '39665', '39666']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 39662:39662 -p 39663:39663 -p 39664:39664 -p 39665:39665 -p 39666:39666 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39664 --rest-port=39662 --tcp-port=39663 --discv5-udp-port=39665 --rest-address=0.0.0.0 --nat=extip:172.18.239.23 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d09d6f1c7eb5c4d2e409a96cbc7e183fbb8f4c31eda6edf1cdaa1042bc32309f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39666 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.239.23 waku e3e4500dc4e092c01991aefb2f4d1aec8311540810a333a8d5ebcaaeb051dced
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e3e4500dc4e0. Setting up logs at ./log/docker/receiving_node2_2024-09-02_04-21-31__b4c464c2-2d6f-41ae-ab33-15f88ab9fd5f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 39662
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39662/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39662/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.239.23/tcp/39663/p2p/16Uiu2HAmHSqdG76psVGt2cHxDG2Z7PE3mWguuwnT78sdMjQ6jVRY","/ip4/172.18.239.23/tcp/39664/ws/p2p/16Uiu2HAmHSqdG76psVGt2cHxDG2Z7PE3mWguuwnT78sdMjQ6jVRY"],"enrUri":"enr:-LO4QG6C_w7lYy-wJ9TYUUb_se-HcIYuULZPocLE5aRE6CeYNlxUhtP7A7ZZv4lveZmPcyn-mqrNavqILcQkxUb_3FsBgmlkgnY0gmlwhKwS7xeKbXVsdGlhZGRyc4wACgSsEu8XBprw3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNHLZmWXN0HJgxt_TwVnz9xf50V5KU8m276rmqFnjhvP4N0Y3CCmu-DdWRwgprxhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39662/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.205.94/tcp/37353/p2p/16Uiu2HAkxYCS2dYE57HvEg65AW7zt3CCfCHBZRzMiAdBkvo86SAQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-02_04-21-31__b4c464c2-2d6f-41ae-ab33-15f88ab9fd5f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.47.223
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['6327', '6328', '6329', '6330', '6331']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 6327:6327 -p 6328:6328 -p 6329:6329 -p 6330:6330 -p 6331:6331 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6329 --rest-port=6327 --tcp-port=6328 --discv5-udp-port=6330 --rest-address=0.0.0.0 --nat=extip:172.18.47.223 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eab6f7d0dedadf863c5bc75aafac0eefeb8cae618b83ce8fb74f1baa2d42d0be --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6331 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QISOrxuW_ZZLUa6xGYmX8_AMZhXhMj9_NpyCISnMEgc9KCGsXH-gUNttzxYN48M7iijeF44Xotzee4lNfg0UJY4BgmlkgnY0gmlwhKwSzV6KbXVsdGlhZGRyc4wACgSsEs1eBpHq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIuPvprLeJ8Wxd5oF1SeP4H7VOrzf390xOnD5r2YFKYXYN0Y3CCkemDdWRwgpHrhXdha3UyCQ --lightpushnode=/ip4/172.18.205.94/tcp/37353/p2p/16Uiu2HAkxYCS2dYE57HvEg65AW7zt3CCfCHBZRzMiAdBkvo86SAQ --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.47.223 waku d489f5631430edef09e8a7602c8c6f77447b22a31eb191223580114a71b80901
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d489f5631430. Setting up logs at ./log/docker/lightpush_node1_2024-09-02_04-21-31__b4c464c2-2d6f-41ae-ab33-15f88ab9fd5f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 6327
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6327/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6327/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.47.223/tcp/6328/p2p/16Uiu2HAmGHtLneD7akzx8WMSoGUoB9q79wvjGf4wcuyhB4hvQb8V","/ip4/172.18.47.223/tcp/6329/ws/p2p/16Uiu2HAmGHtLneD7akzx8WMSoGUoB9q79wvjGf4wcuyhB4hvQb8V"],"enrUri":"enr:-LO4QLFCNYpeH4D6Db8Sli0sSZIL6l8tNuy1zEzV4r0qjBX9cE-YRd5ke_huMUiYGNP7gIpSefwmsfBfcknAeN7Uw00BgmlkgnY0gmlwhKwSL9-KbXVsdGlhZGRyc4wACgSsEi_fBhi53QOCcnOFAAMBAACJc2VjcDI1NmsxoQM2BsG3XDw1lXmdvUvubf2OHRONEuXrF5sH4qnreyRrIoN0Y3CCGLiDdWRwghi6hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6327/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.205.94/tcp/37353/p2p/16Uiu2HAkxYCS2dYE57HvEg65AW7zt3CCfCHBZRzMiAdBkvo86SAQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6327/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.239.23/tcp/39663/p2p/16Uiu2HAmHSqdG76psVGt2cHxDG2Z7PE3mWguuwnT78sdMjQ6jVRY"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37352/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39662/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6327/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725250896400951296, "extraField": "extraValue"}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:6327/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id beabf6caab99
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e3e4500dc4e0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d489f5631430
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.