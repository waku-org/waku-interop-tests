[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_pubsub_topics with id: 2024-09-02_04-20-48__50e85e8e-ac5f-4da8-b30b-a42678804595
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-02_04-20-48__50e85e8e-ac5f-4da8-b30b-a42678804595__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.180.149
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['4321', '4322', '4323', '4324', '4325']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 4321:4321 -p 4322:4322 -p 4323:4323 -p 4324:4324 -p 4325:4325 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4323 --rest-port=4321 --tcp-port=4322 --discv5-udp-port=4324 --rest-address=0.0.0.0 --nat=extip:172.18.180.149 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=af3dfbbec5d4fa3bbbf68bc2ba33ecfffff56566b3d9eaf450d8e0b506c89b99 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4325 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.180.149 waku 6be03f1f9ad5bbe76499a1b7e98d54bcf56eded7d9706e81b7e83f57fa4732af
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 6be03f1f9ad5. Setting up logs at ./log/docker/receiving_node1_2024-09-02_04-20-48__50e85e8e-ac5f-4da8-b30b-a42678804595__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 4321
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4321/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4321/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.180.149/tcp/4322/p2p/16Uiu2HAm6QerQWJcWbTZ9huSAnPjyXqCBbQhFvcRviNyhzFsssWp","/ip4/172.18.180.149/tcp/4323/ws/p2p/16Uiu2HAm6QerQWJcWbTZ9huSAnPjyXqCBbQhFvcRviNyhzFsssWp"],"enrUri":"enr:-LO4QPQgwqCOR6Cm-J2OjThTJ8FN8h8CV28yuKoMvNT9HrPLZT3LaqlmPS24FlJwkR3pG00x2HV3DtuH_Tzr_mzMdY4BgmlkgnY0gmlwhKwStJWKbXVsdGlhZGRyc4wACgSsErSVBhDj3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKjLbNecp8bWSupZtUIIjaJVw63uvM4stxGS5ysv4O9uYN0Y3CCEOKDdWRwghDkhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-02_04-20-48__50e85e8e-ac5f-4da8-b30b-a42678804595__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.155.189
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['11616', '11617', '11618', '11619', '11620']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 11616:11616 -p 11617:11617 -p 11618:11618 -p 11619:11619 -p 11620:11620 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11618 --rest-port=11616 --tcp-port=11617 --discv5-udp-port=11619 --rest-address=0.0.0.0 --nat=extip:172.18.155.189 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1ec34f4f057f2f84855b914cda84af5552eec4429f8ae7fc537e8ae8bdea98b4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11620 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.155.189 waku a92b3078dae95bd35902274c70399acb18b0b8e010ccd81981cda400ce60aac2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a92b3078dae9. Setting up logs at ./log/docker/receiving_node2_2024-09-02_04-20-48__50e85e8e-ac5f-4da8-b30b-a42678804595__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 11616
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11616/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11616/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.155.189/tcp/11617/p2p/16Uiu2HAm1LtMyEyByfQv4zG5u46tvCHpvx7WcefE837n5JDUm3pD","/ip4/172.18.155.189/tcp/11618/ws/p2p/16Uiu2HAm1LtMyEyByfQv4zG5u46tvCHpvx7WcefE837n5JDUm3pD"],"enrUri":"enr:-LO4QJbGKuir64LV__dG-6NYiLkZ6c7WDUuwky5VMhZXWCqsGLScch61suX-3FFjUshisUeD8N7y6X7FXNlmGSmggLkBgmlkgnY0gmlwhKwSm72KbXVsdGlhZGRyc4wACgSsEpu9Bi1i3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJX7DfiFj6Ouj4w42h2mjeLKfsTs45qsUtftuBI0B71SoN0Y3CCLWGDdWRwgi1jhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11616/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.180.149/tcp/4322/p2p/16Uiu2HAm6QerQWJcWbTZ9huSAnPjyXqCBbQhFvcRviNyhzFsssWp"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-02_04-20-48__50e85e8e-ac5f-4da8-b30b-a42678804595__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.228.76
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['65235', '65236', '65237', '65238', '65239']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 65235:65235 -p 65236:65236 -p 65237:65237 -p 65238:65238 -p 65239:65239 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65237 --rest-port=65235 --tcp-port=65236 --discv5-udp-port=65238 --rest-address=0.0.0.0 --nat=extip:172.18.228.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f944e9dfa5d6afced38ab3c0affcc0b3d7b52a1e4e0ad68e0fe3ebf09dbeabc3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65239 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QPQgwqCOR6Cm-J2OjThTJ8FN8h8CV28yuKoMvNT9HrPLZT3LaqlmPS24FlJwkR3pG00x2HV3DtuH_Tzr_mzMdY4BgmlkgnY0gmlwhKwStJWKbXVsdGlhZGRyc4wACgSsErSVBhDj3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKjLbNecp8bWSupZtUIIjaJVw63uvM4stxGS5ysv4O9uYN0Y3CCEOKDdWRwghDkhXdha3UyCQ --lightpushnode=/ip4/172.18.180.149/tcp/4322/p2p/16Uiu2HAm6QerQWJcWbTZ9huSAnPjyXqCBbQhFvcRviNyhzFsssWp --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.228.76 waku eb46d743a42a8a105fd13dd28d85a2b4a7605e54a811c1eaeba563de63158565
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID eb46d743a42a. Setting up logs at ./log/docker/lightpush_node1_2024-09-02_04-20-48__50e85e8e-ac5f-4da8-b30b-a42678804595__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 65235
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65235/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65235/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.228.76/tcp/65236/p2p/16Uiu2HAmKqZWBj2igeAo9VgchSCZghSf2wtaB9F6mMDKCrGTdLTV","/ip4/172.18.228.76/tcp/65237/ws/p2p/16Uiu2HAmKqZWBj2igeAo9VgchSCZghSf2wtaB9F6mMDKCrGTdLTV"],"enrUri":"enr:-LO4QDHQlrTB-YCaYAwv0mfRLROG8qND1APK07KCfWLYcPh0exszpC2v8v_hEJ29Ch9BdcXhGCwXcwVCebWSJSmwM-gBgmlkgnY0gmlwhKwS5EyKbXVsdGlhZGRyc4wACgSsEuRMBv7V3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNqtxpseoIyPr4oYyKV7_LnrQlLek5HtlxTHcQ444NVDIN0Y3CC_tSDdWRwgv7WhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65235/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.180.149/tcp/4322/p2p/16Uiu2HAm6QerQWJcWbTZ9huSAnPjyXqCBbQhFvcRviNyhzFsssWp"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65235/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.155.189/tcp/11617/p2p/16Uiu2HAm1LtMyEyByfQv4zG5u46tvCHpvx7WcefE837n5JDUm3pD"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4321/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11616/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65235/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725250853568582400}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:65235/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0xbc48bf897bf74b16187b294054e1b9360963cf18258a2cf8cc9f1f0add9f9649'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 6be03f1f9ad5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a92b3078dae9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id eb46d743a42a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.