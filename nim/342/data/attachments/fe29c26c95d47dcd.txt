[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_works_with_auto_sharding with id: 2024-09-02_04-26-27__bb29d935-5110-455c-9843-55c84665b394
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-02_04-26-27__bb29d935-5110-455c-9843-55c84665b394__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.232.179
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['57465', '57466', '57467', '57468', '57469']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 57465:57465 -p 57466:57466 -p 57467:57467 -p 57468:57468 -p 57469:57469 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57467 --rest-port=57465 --tcp-port=57466 --discv5-udp-port=57468 --rest-address=0.0.0.0 --nat=extip:172.18.232.179 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=87bac4aa2b02d931e1587c21a4ebff0fd30b18e78ccfaeef5ad240ef0dc1d26b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57469 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.232.179 waku 2359dd96fb57858eaacf7549ce3842559748e463193c834f0eb93efa0fc529a1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2359dd96fb57. Setting up logs at ./log/docker/node1_2024-09-02_04-26-27__bb29d935-5110-455c-9843-55c84665b394__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 57465
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57465/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57465/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.232.179/tcp/57466/p2p/16Uiu2HAky9L8h953ev1yFYvYqEXYqZJhhyDh9Ax7f2HqaVKji7db","/ip4/172.18.232.179/tcp/57467/ws/p2p/16Uiu2HAky9L8h953ev1yFYvYqEXYqZJhhyDh9Ax7f2HqaVKji7db"],"enrUri":"enr:-LO4QBH3lqVMsH11N9u0PLQzt8hreqydJlF4-wdjrLWD4fRVOfJ4SB3uaP20AzrhZrtAywvlnRjgOFJn5jVPoo3F1bkBgmlkgnY0gmlwhKwS6LOKbXVsdGlhZGRyc4wACgSsEuizBuB73QOCcnOFAAIBAACJc2VjcDI1NmsxoQI3PwOhTWGCkp9fe63g0VSzIaGk5Sebawsj4mM85Uge6oN0Y3CC4HqDdWRwguB8hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-02_04-26-27__bb29d935-5110-455c-9843-55c84665b394__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.37.128
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['54649', '54650', '54651', '54652', '54653']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 54649:54649 -p 54650:54650 -p 54651:54651 -p 54652:54652 -p 54653:54653 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54651 --rest-port=54649 --tcp-port=54650 --discv5-udp-port=54652 --rest-address=0.0.0.0 --nat=extip:172.18.37.128 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ec5ce9cd40d8fafec4fcb7c24c1dc75a7b8cb86815f3b25cea301fa14239ceef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54653 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QBH3lqVMsH11N9u0PLQzt8hreqydJlF4-wdjrLWD4fRVOfJ4SB3uaP20AzrhZrtAywvlnRjgOFJn5jVPoo3F1bkBgmlkgnY0gmlwhKwS6LOKbXVsdGlhZGRyc4wACgSsEuizBuB73QOCcnOFAAIBAACJc2VjcDI1NmsxoQI3PwOhTWGCkp9fe63g0VSzIaGk5Sebawsj4mM85Uge6oN0Y3CC4HqDdWRwguB8hXdha3UyBQ --filternode=/ip4/172.18.232.179/tcp/57466/p2p/16Uiu2HAky9L8h953ev1yFYvYqEXYqZJhhyDh9Ax7f2HqaVKji7db --content-topic=/myapp/1/latest/proto --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.37.128 waku b7eefb17ae487a2ce68b3bfe2d585baab514d7ef1f4ec093c2beb49371a71fa9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b7eefb17ae48. Setting up logs at ./log/docker/node2_2024-09-02_04-26-27__bb29d935-5110-455c-9843-55c84665b394__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 54649
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54649/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54649/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.37.128/tcp/54650/p2p/16Uiu2HAkwNcfJvPtCxjtiZ1aB5W95dcAbUqBqm7uUVwekaBv3nKi","/ip4/172.18.37.128/tcp/54651/ws/p2p/16Uiu2HAkwNcfJvPtCxjtiZ1aB5W95dcAbUqBqm7uUVwekaBv3nKi"],"enrUri":"enr:-LO4QB6imCZ4AWJcQ0a0KrgFu6K8kpTDjLmgBQlp35bEw8fOMktSOVnPJ_b24jVAhMsNvQZ-zp79qmQ6FJH2hgAy4noBgmlkgnY0gmlwhKwSJYCKbXVsdGlhZGRyc4wACgSsEiWABtV73QOCcnOFAAIBAACJc2VjcDI1NmsxoQIc7uEEmmRE2LBKqGEB-BnHeFOGLApqeP39nln7bvPvMYN0Y3CC1XqDdWRwgtV8hXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54649/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.232.179/tcp/57466/p2p/16Uiu2HAky9L8h953ev1yFYvYqEXYqZJhhyDh9Ax7f2HqaVKji7db"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57465/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54649/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "619b0ac8-c6fe-4102-9e3c-6d5b3513d4ea", "contentFilters": ["/myapp/1/latest/proto"], "pubsubTopic": "/waku/2/rs/2/0"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"619b0ac8-c6fe-4102-9e3c-6d5b3513d4ea","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57465/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:186 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54649/filter/v2/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725251190729612288,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2359dd96fb57
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b7eefb17ae48
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.