[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_meta with id: 2024-08-26_04-21-19__db5fe4a1-77e8-41d1-b981-6b8a65d514d2
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_04-21-19__db5fe4a1-77e8-41d1-b981-6b8a65d514d2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.234.214
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['52977', '52978', '52979', '52980', '52981']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 52977:52977 -p 52978:52978 -p 52979:52979 -p 52980:52980 -p 52981:52981 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52979 --rest-port=52977 --tcp-port=52978 --discv5-udp-port=52980 --rest-address=0.0.0.0 --nat=extip:172.18.234.214 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=116cb14442fd37d99fcab4dffeaed084bb7cdcbed1bbef49c6a34fcfa2c73f4b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52981 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.234.214 waku 27ee8671c61707402bd98d31545dab61a282efb21a618625e46bef7b46663d51
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 27ee8671c617. Setting up logs at ./log/docker/receiving_node1_2024-08-26_04-21-19__db5fe4a1-77e8-41d1-b981-6b8a65d514d2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 52977
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52977/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52977/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.234.214/tcp/52978/p2p/16Uiu2HAm7ynV9xppcvtg2MSmcGL42d3h8f4sBg65zAdhD8BdMZxB","/ip4/172.18.234.214/tcp/52979/ws/p2p/16Uiu2HAm7ynV9xppcvtg2MSmcGL42d3h8f4sBg65zAdhD8BdMZxB"],"enrUri":"enr:-LO4QEyjqWKT1BKe5vnOQP3airvVCuqikxV_r3KpVEFLiYbJSZ8cy8luaLWhpLIBYmYO-w_-uhANNOa3847f7Q_c_nwBgmlkgnY0gmlwhKwS6taKbXVsdGlhZGRyc4wACgSsEurWBs7z3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK6hi-Fsl92036pxBr7_01kMUr_Gfmlf6OBuKvFg3zQYIN0Y3CCzvKDdWRwgs70hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-26_04-21-19__db5fe4a1-77e8-41d1-b981-6b8a65d514d2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.29.29
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['45167', '45168', '45169', '45170', '45171']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 45167:45167 -p 45168:45168 -p 45169:45169 -p 45170:45170 -p 45171:45171 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45169 --rest-port=45167 --tcp-port=45168 --discv5-udp-port=45170 --rest-address=0.0.0.0 --nat=extip:172.18.29.29 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ef1aeb98617cae1b3cdea672fe9d9fac028fddffabc3dafed0fabae8e1faec7c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45171 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.29.29 waku 33759c80f361cea5a838d8e4ec4aa2f5ff6727f706edeaa3b7f81e34b0367330
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 33759c80f361. Setting up logs at ./log/docker/receiving_node2_2024-08-26_04-21-19__db5fe4a1-77e8-41d1-b981-6b8a65d514d2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 45167
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45167/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45167/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.29.29/tcp/45168/p2p/16Uiu2HAkxGZ3kMPW5qVvzMJKXHgu6FCX1ZQpfCTbL9SuY1YtEWou","/ip4/172.18.29.29/tcp/45169/ws/p2p/16Uiu2HAkxGZ3kMPW5qVvzMJKXHgu6FCX1ZQpfCTbL9SuY1YtEWou"],"enrUri":"enr:-LO4QF7qC8i8oxbSX924Jmx2-Wx-ok2QGYRJAkEWk-7ASI6TGeYi12p9EEx5crCWbBICofOA-Pu7Qr4g-U-tzPKmkm0BgmlkgnY0gmlwhKwSHR2KbXVsdGlhZGRyc4wACgSsEh0dBrBx3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIqPP7kL9b_0CZ3eIsp_m1Uk_AsNN0PC1rCh7JBrTevzIN0Y3CCsHCDdWRwgrByhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45167/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.234.214/tcp/52978/p2p/16Uiu2HAm7ynV9xppcvtg2MSmcGL42d3h8f4sBg65zAdhD8BdMZxB"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_04-21-19__db5fe4a1-77e8-41d1-b981-6b8a65d514d2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.234.185
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['53920', '53921', '53922', '53923', '53924']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 53920:53920 -p 53921:53921 -p 53922:53922 -p 53923:53923 -p 53924:53924 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53922 --rest-port=53920 --tcp-port=53921 --discv5-udp-port=53923 --rest-address=0.0.0.0 --nat=extip:172.18.234.185 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3f64ba67ee12e0ac6decaee8fff24f1db7c7ab6b4b2c2e1a8bddfdc46bbc3a9a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53924 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QEyjqWKT1BKe5vnOQP3airvVCuqikxV_r3KpVEFLiYbJSZ8cy8luaLWhpLIBYmYO-w_-uhANNOa3847f7Q_c_nwBgmlkgnY0gmlwhKwS6taKbXVsdGlhZGRyc4wACgSsEurWBs7z3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK6hi-Fsl92036pxBr7_01kMUr_Gfmlf6OBuKvFg3zQYIN0Y3CCzvKDdWRwgs70hXdha3UyCQ --lightpushnode=/ip4/172.18.234.214/tcp/52978/p2p/16Uiu2HAm7ynV9xppcvtg2MSmcGL42d3h8f4sBg65zAdhD8BdMZxB --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.234.185 waku 26f5163e0bacca020918d7efcd98bf197917b1d108b95cbad98e23f9345a14ad
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 26f5163e0bac. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_04-21-19__db5fe4a1-77e8-41d1-b981-6b8a65d514d2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 53920
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53920/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53920/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.234.185/tcp/53921/p2p/16Uiu2HAmQnWeGdrUEadZQu3YdJaxzY9ufbtjTdBs8zFYvrNmm6fU","/ip4/172.18.234.185/tcp/53922/ws/p2p/16Uiu2HAmQnWeGdrUEadZQu3YdJaxzY9ufbtjTdBs8zFYvrNmm6fU"],"enrUri":"enr:-LO4QHGgHwe1HzLo5vlU4rbr8UrsLau3QdbZ-3pQ9s0iZI-pHn77Wu3HQbAnhh_JAaGfyHDl4n1efmSvFXtv-eDAbdUBgmlkgnY0gmlwhKwS6rmKbXVsdGlhZGRyc4wACgSsEuq5BtKi3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO0OY-Yh-Tg1639YSTKxp4MGkf5JA8HqMEw6pNOcaYz64N0Y3CC0qGDdWRwgtKjhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53920/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.234.214/tcp/52978/p2p/16Uiu2HAm7ynV9xppcvtg2MSmcGL42d3h8f4sBg65zAdhD8BdMZxB"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53920/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.29.29/tcp/45168/p2p/16Uiu2HAkxGZ3kMPW5qVvzMJKXHgu6FCX1ZQpfCTbL9SuY1YtEWou"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52977/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45167/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53920/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724646084355757568, "meta": "TGlnaHQgcHVzaCB3b3JrcyEh"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52977/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724646084355757568,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45167/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724646084355757568,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 27ee8671c617
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 33759c80f361
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 26f5163e0bac
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.