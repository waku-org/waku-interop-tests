[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_with_extra_field with id: 2024-08-26_04-15-20__3657e0d7-b0da-4d0f-bf50-e6e6f1388fe0
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-26_04-15-20__3657e0d7-b0da-4d0f-bf50-e6e6f1388fe0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.140.153
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['3506', '3507', '3508', '3509', '3510']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 3506:3506 -p 3507:3507 -p 3508:3508 -p 3509:3509 -p 3510:3510 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3508 --rest-port=3506 --tcp-port=3507 --discv5-udp-port=3509 --rest-address=0.0.0.0 --nat=extip:172.18.140.153 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=76fe4c0d688b283a881d7bfab5eedfdcaa9e6d8a88be9ae7d9bbaefb20ddf15b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3510 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.140.153 waku 5fca2f89533c9ebaa1348b74b219a0ad3359d72c2feee9d01e7c190b145544af
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 5fca2f89533c. Setting up logs at ./log/docker/node1_2024-08-26_04-15-20__3657e0d7-b0da-4d0f-bf50-e6e6f1388fe0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 3506
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3506/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3506/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.140.153/tcp/3507/p2p/16Uiu2HAm73TDTDM73E64MLjXjysYDxVUJtfXQ4DvRenqNZXrKbCm","/ip4/172.18.140.153/tcp/3508/ws/p2p/16Uiu2HAm73TDTDM73E64MLjXjysYDxVUJtfXQ4DvRenqNZXrKbCm"],"enrUri":"enr:-LO4QMu3zxrqpL4-B0C1zPrTSAdhpj8Bikf9AKfb0BXf-8WhButtzKk562JzObA-JiGsYb69wzK-hnfSOKpLJeooA60BgmlkgnY0gmlwhKwSjJmKbXVsdGlhZGRyc4wACgSsEoyZBg203QOCcnOFAAMBAACJc2VjcDI1NmsxoQKsmwhO--aWRZi1MZDFemrZdp2M4hy6OLEo5ijZ-X2rkoN0Y3CCDbODdWRwgg21hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-26_04-15-20__3657e0d7-b0da-4d0f-bf50-e6e6f1388fe0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.193.202
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['29799', '29800', '29801', '29802', '29803']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 29799:29799 -p 29800:29800 -p 29801:29801 -p 29802:29802 -p 29803:29803 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29801 --rest-port=29799 --tcp-port=29800 --discv5-udp-port=29802 --rest-address=0.0.0.0 --nat=extip:172.18.193.202 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=febbbcb47a62fdd9df1165bf2b9d934faeb0ccdabd0278c7e6d27ade163e3dcd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29803 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QMu3zxrqpL4-B0C1zPrTSAdhpj8Bikf9AKfb0BXf-8WhButtzKk562JzObA-JiGsYb69wzK-hnfSOKpLJeooA60BgmlkgnY0gmlwhKwSjJmKbXVsdGlhZGRyc4wACgSsEoyZBg203QOCcnOFAAMBAACJc2VjcDI1NmsxoQKsmwhO--aWRZi1MZDFemrZdp2M4hy6OLEo5ijZ-X2rkoN0Y3CCDbODdWRwgg21hXdha3UyBQ --filternode=/ip4/172.18.140.153/tcp/3507/p2p/16Uiu2HAm73TDTDM73E64MLjXjysYDxVUJtfXQ4DvRenqNZXrKbCm
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.193.202 waku e8faaf48374f299c69f37ede17d128e28f4268b384159c8367d07749919b644c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e8faaf48374f. Setting up logs at ./log/docker/node2_2024-08-26_04-15-20__3657e0d7-b0da-4d0f-bf50-e6e6f1388fe0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 29799
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29799/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29799/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.193.202/tcp/29800/p2p/16Uiu2HAmH32Xj63rKK2c4R6mpqkn35os9sSFK1kEvdb7aUkHQwVw","/ip4/172.18.193.202/tcp/29801/ws/p2p/16Uiu2HAmH32Xj63rKK2c4R6mpqkn35os9sSFK1kEvdb7aUkHQwVw"],"enrUri":"enr:-LO4QKa5Nign9-tejhvhLFA9GdxG18-FyOxRtNzwZ54SyRnIRkUo2dFlYtlX3N5i0GQ16npjWp3_66LavPpUhVUsa5QBgmlkgnY0gmlwhKwSwcqKbXVsdGlhZGRyc4wACgSsEsHKBnRp3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNBE_2JCNdi46JnM081ChzPZXScqLqpatiSGW8_FRUd3oN0Y3CCdGiDdWRwgnRqhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29799/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.140.153/tcp/3507/p2p/16Uiu2HAm73TDTDM73E64MLjXjysYDxVUJtfXQ4DvRenqNZXrKbCm"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3506/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29799/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "ac310a5e-17cd-4f82-9692-4efb5018e143", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"ac310a5e-17cd-4f82-9692-4efb5018e143","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3506/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "extraField": "extraValue"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3506/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 5fca2f89533c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id e8faaf48374f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.