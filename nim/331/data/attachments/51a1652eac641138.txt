[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_to_pubsub_topics_from_multiple_clusters with id: 2024-08-26_04-17-04__7d4ff25d-2005-4694-9ef5-2be3f5cd8774
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-26_04-17-04__7d4ff25d-2005-4694-9ef5-2be3f5cd8774__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.24.111
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['25124', '25125', '25126', '25127', '25128']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 25124:25124 -p 25125:25125 -p 25126:25126 -p 25127:25127 -p 25128:25128 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25126 --rest-port=25124 --tcp-port=25125 --discv5-udp-port=25127 --rest-address=0.0.0.0 --nat=extip:172.18.24.111 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0f23e4d737ca9703c55ebd47ca1e763a643c0e4353aeba00a2e6f8f68fdd04b2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25128 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.24.111 waku af5e059d046c84fe1c60d349d494000ec521f476efc24da89a90a495f7803143
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID af5e059d046c. Setting up logs at ./log/docker/node1_2024-08-26_04-17-04__7d4ff25d-2005-4694-9ef5-2be3f5cd8774__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 25124
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25124/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25124/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.24.111/tcp/25125/p2p/16Uiu2HAmG7iRMSaVBHrAvUryseVrQRfH5knkuBv77oEsoHNK2GwB","/ip4/172.18.24.111/tcp/25126/ws/p2p/16Uiu2HAmG7iRMSaVBHrAvUryseVrQRfH5knkuBv77oEsoHNK2GwB"],"enrUri":"enr:-LO4QJkNHqefvEumVbbOCtahVUvgzZZa23AUepwNw73L8JO7VcsusAqA31FfdpGH9j-TOTGTu2jDSMYeSg_X27vg_toBgmlkgnY0gmlwhKwSGG-KbXVsdGlhZGRyc4wACgSsEhhvBmIm3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMza7sHYaGoSrlxDL_VeqOMKY800FHaR_yvDzPc725vyoN0Y3CCYiWDdWRwgmInhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-26_04-17-04__7d4ff25d-2005-4694-9ef5-2be3f5cd8774__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.214.103
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['27948', '27949', '27950', '27951', '27952']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 27948:27948 -p 27949:27949 -p 27950:27950 -p 27951:27951 -p 27952:27952 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27950 --rest-port=27948 --tcp-port=27949 --discv5-udp-port=27951 --rest-address=0.0.0.0 --nat=extip:172.18.214.103 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cff5d70f87bcf0dd2c6e916478a26ac4fcede6d4902f9a2bc7d3a18c82b8ad56 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27952 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QJkNHqefvEumVbbOCtahVUvgzZZa23AUepwNw73L8JO7VcsusAqA31FfdpGH9j-TOTGTu2jDSMYeSg_X27vg_toBgmlkgnY0gmlwhKwSGG-KbXVsdGlhZGRyc4wACgSsEhhvBmIm3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMza7sHYaGoSrlxDL_VeqOMKY800FHaR_yvDzPc725vyoN0Y3CCYiWDdWRwgmInhXdha3UyBQ --filternode=/ip4/172.18.24.111/tcp/25125/p2p/16Uiu2HAmG7iRMSaVBHrAvUryseVrQRfH5knkuBv77oEsoHNK2GwB
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.214.103 waku a5e9ab256a683ec069aee2f6abeab347a2f2aa6dfb8864e16544e240fdfb5f1f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID a5e9ab256a68. Setting up logs at ./log/docker/node2_2024-08-26_04-17-04__7d4ff25d-2005-4694-9ef5-2be3f5cd8774__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 27948
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27948/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27948/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.214.103/tcp/27949/p2p/16Uiu2HAkz9iG1pixdhY7CQ5zfqWnVJAcb7ciHvUh7bn89tefhEY9","/ip4/172.18.214.103/tcp/27950/ws/p2p/16Uiu2HAkz9iG1pixdhY7CQ5zfqWnVJAcb7ciHvUh7bn89tefhEY9"],"enrUri":"enr:-LO4QOMDySAeyJFxk93xEed0GYINYHv9pGcggQYh7AY5zxOadvgs0iGFV3O7TkxFgS45e30UCzBpSqDTljHZnlJfQfMBgmlkgnY0gmlwhKwS1meKbXVsdGlhZGRyc4wACgSsEtZnBm0u3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJGM7gmAEJfcBCq-uVr-iHrqrYa0zvfxw3_gsmD17JcYoN0Y3CCbS2DdWRwgm0vhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27948/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.24.111/tcp/25125/p2p/16Uiu2HAmG7iRMSaVBHrAvUryseVrQRfH5knkuBv77oEsoHNK2GwB"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25124/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27948/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "6cba324f-81d9-4e59-9869-a89a84b01ef0", "contentFilters": ["/waku/2/rs/3/1"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"6cba324f-81d9-4e59-9869-a89a84b01ef0","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25124/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/1", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27948/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/1","version":0,"timestamp":1724645827966912000,"ephemeral":false}]'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/2/2
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25124/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27948/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "9a4e280b-82a7-460c-b1d3-498bd9f12d5a", "contentFilters": ["/waku/2/rs/2/2"], "pubsubTopic": "/waku/2/rs/2/2"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"9a4e280b-82a7-460c-b1d3-498bd9f12d5a","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25124/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/2/2", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27948/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/2/2","version":0,"timestamp":1724645828093068800,"ephemeral":false}]'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/3/9
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25124/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27948/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0af28d91-f753-4721-833b-220dc47447c6", "contentFilters": ["/waku/2/rs/3/9"], "pubsubTopic": "/waku/2/rs/3/9"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"0af28d91-f753-4721-833b-220dc47447c6","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25124/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/9", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27948/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/9","version":0,"timestamp":1724645828229051648,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id af5e059d046c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id a5e9ab256a68
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.