[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2024-08-26_04-20-44__67ed0142-eca2-477d-a566-30652718a9a9
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_04-20-44__67ed0142-eca2-477d-a566-30652718a9a9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.10.236
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['48558', '48559', '48560', '48561', '48562']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 48558:48558 -p 48559:48559 -p 48560:48560 -p 48561:48561 -p 48562:48562 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48560 --rest-port=48558 --tcp-port=48559 --discv5-udp-port=48561 --rest-address=0.0.0.0 --nat=extip:172.18.10.236 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d229aeeedefa9a09dcba2abbfbfb03730ac7be60a38eb09c8adf55ff2831b0f7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48562 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.10.236 waku 5fbde8f936e1dbf54b718ff0a8f8941966f65df86164a44430885874b9590d54
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 5fbde8f936e1. Setting up logs at ./log/docker/receiving_node1_2024-08-26_04-20-44__67ed0142-eca2-477d-a566-30652718a9a9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 48558
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48558/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48558/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.10.236/tcp/48559/p2p/16Uiu2HAmCVGZ7iadHUstZ3mfy9s5Z8PJX3VKG8fceLFe1KEMa4GX","/ip4/172.18.10.236/tcp/48560/ws/p2p/16Uiu2HAmCVGZ7iadHUstZ3mfy9s5Z8PJX3VKG8fceLFe1KEMa4GX"],"enrUri":"enr:-LO4QE3cX3VYpMAwlGRGV2zj0WRqvDzBzafJGKmb3dS79M7bI0aY0Bb_WQsrqQsNvd-nMNhNeVMYCybZemP2DK_SUCIBgmlkgnY0gmlwhKwSCuyKbXVsdGlhZGRyc4wACgSsEgrsBr2w3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL9goODryJHnMuHMlXLu7QFMEkiRkcsfJPYj0ZHR6pt-IN0Y3CCva-DdWRwgr2xhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-26_04-20-44__67ed0142-eca2-477d-a566-30652718a9a9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.6.74
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['55401', '55402', '55403', '55404', '55405']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 55401:55401 -p 55402:55402 -p 55403:55403 -p 55404:55404 -p 55405:55405 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55403 --rest-port=55401 --tcp-port=55402 --discv5-udp-port=55404 --rest-address=0.0.0.0 --nat=extip:172.18.6.74 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cdbbf833f2f8ed2c56532bcdacd0cfe2b468ceddc6e1fa97c8fadebdb81a09ed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55405 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.6.74 waku dfbbcb4964d025c6f60c1c0d6bebfa9db5702e60c61ac6e5689084026aea502e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID dfbbcb4964d0. Setting up logs at ./log/docker/receiving_node2_2024-08-26_04-20-44__67ed0142-eca2-477d-a566-30652718a9a9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 55401
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55401/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55401/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.6.74/tcp/55402/p2p/16Uiu2HAmVi5JzX3ctoL5U97NLCbBcuU789Q9aSMoE1FLSYFdJTd6","/ip4/172.18.6.74/tcp/55403/ws/p2p/16Uiu2HAmVi5JzX3ctoL5U97NLCbBcuU789Q9aSMoE1FLSYFdJTd6"],"enrUri":"enr:-LO4QNM3Y6e3NucujVCxY9RRo6BBIbXHXE-5zq9hUuRVWxrTaGH0MNwaZOtEXbS560zEG8DDLWglj_eF9fu8PghN63cBgmlkgnY0gmlwhKwSBkqKbXVsdGlhZGRyc4wACgSsEgZKBthr3QOCcnOFAAMBAACJc2VjcDI1NmsxoQP9YQdmZsIJYVjcz2Enqcj_cwy1BRfD_rsuzRgECvBOvYN0Y3CC2GqDdWRwgthshXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55401/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.10.236/tcp/48559/p2p/16Uiu2HAmCVGZ7iadHUstZ3mfy9s5Z8PJX3VKG8fceLFe1KEMa4GX"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_04-20-44__67ed0142-eca2-477d-a566-30652718a9a9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.160.168
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['61827', '61828', '61829', '61830', '61831']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 61827:61827 -p 61828:61828 -p 61829:61829 -p 61830:61830 -p 61831:61831 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61829 --rest-port=61827 --tcp-port=61828 --discv5-udp-port=61830 --rest-address=0.0.0.0 --nat=extip:172.18.160.168 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bceba74179d4bb6f2ff8f0ea9c54c34dc0dbaa02e3a0fa320bc0026c32f9140d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61831 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QE3cX3VYpMAwlGRGV2zj0WRqvDzBzafJGKmb3dS79M7bI0aY0Bb_WQsrqQsNvd-nMNhNeVMYCybZemP2DK_SUCIBgmlkgnY0gmlwhKwSCuyKbXVsdGlhZGRyc4wACgSsEgrsBr2w3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL9goODryJHnMuHMlXLu7QFMEkiRkcsfJPYj0ZHR6pt-IN0Y3CCva-DdWRwgr2xhXdha3UyCQ --lightpushnode=/ip4/172.18.10.236/tcp/48559/p2p/16Uiu2HAmCVGZ7iadHUstZ3mfy9s5Z8PJX3VKG8fceLFe1KEMa4GX --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.160.168 waku bcf91fcd2c3964068975851a56a55b1ab7a8729a1f6e86d8a02fec653ef12069
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID bcf91fcd2c39. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_04-20-44__67ed0142-eca2-477d-a566-30652718a9a9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 61827
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61827/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61827/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.160.168/tcp/61828/p2p/16Uiu2HAmBWAYWLrebmWHv6SPyqCAZzqTSMe5Z3HTkY2nUe14Md1g","/ip4/172.18.160.168/tcp/61829/ws/p2p/16Uiu2HAmBWAYWLrebmWHv6SPyqCAZzqTSMe5Z3HTkY2nUe14Md1g"],"enrUri":"enr:-LO4QAnMoY7voM2BXxhz7kF9jr4G8HvJmzvSGqBn2CtTY5mcBgXHrDi-N7vMMNPaN9FKYHY8FJzHZFWMqcs5ho9jc_QBgmlkgnY0gmlwhKwSoKiKbXVsdGlhZGRyc4wACgSsEqCoBvGF3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLu4ZyLNQ-lbTZmpR1bfs92fp9tZJfNWcxztHAkKPhpR4N0Y3CC8YSDdWRwgvGGhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61827/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.10.236/tcp/48559/p2p/16Uiu2HAmCVGZ7iadHUstZ3mfy9s5Z8PJX3VKG8fceLFe1KEMa4GX"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61827/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.6.74/tcp/55402/p2p/16Uiu2HAmVi5JzX3ctoL5U97NLCbBcuU789Q9aSMoE1FLSYFdJTd6"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48558/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55401/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61827/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724646048760043264}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:61827/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0xf6e697dff2cdbce5668df6a1214d7db493dab6d150a416450c39eee483925ed4'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 5fbde8f936e1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id dfbbcb4964d0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id bcf91fcd2c39
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.