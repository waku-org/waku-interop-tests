[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2024-08-26_04-20-54__eff1c4a8-ffb8-4913-86d2-015cab57979f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_04-20-54__eff1c4a8-ffb8-4913-86d2-015cab57979f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.229.174
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['62711', '62712', '62713', '62714', '62715']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 62711:62711 -p 62712:62712 -p 62713:62713 -p 62714:62714 -p 62715:62715 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62713 --rest-port=62711 --tcp-port=62712 --discv5-udp-port=62714 --rest-address=0.0.0.0 --nat=extip:172.18.229.174 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e11ee0637ef3baa490aa1d6cdfc4b64eb56ba3c55a8b78176b5fb01b7f4b60d1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62715 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.229.174 waku 97d235e88a80c0fc581c5dcf1b71abe19c38957370585d6a40936d34f0f7f1dd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 97d235e88a80. Setting up logs at ./log/docker/receiving_node1_2024-08-26_04-20-54__eff1c4a8-ffb8-4913-86d2-015cab57979f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 62711
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62711/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62711/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.229.174/tcp/62712/p2p/16Uiu2HAm7MPABrUAMRTwiArabN3iR3HjQNQsVGDs8N1YMwJw4hBU","/ip4/172.18.229.174/tcp/62713/ws/p2p/16Uiu2HAm7MPABrUAMRTwiArabN3iR3HjQNQsVGDs8N1YMwJw4hBU"],"enrUri":"enr:-LO4QN5y5wUAsJFYKjsO7WHiKaIwz41ryucg1ALpbseelvbKP7be1q87d4o8jrDwspvNelHKQaPc1X3GcSDQ8rEHUkEBgmlkgnY0gmlwhKwS5a6KbXVsdGlhZGRyc4wACgSsEuWuBvT53QOCcnOFAAMBAACJc2VjcDI1NmsxoQKxMuaK4hG-M_f6vYuJXvFNW9f4HCjUvmkr5V43xu_d94N0Y3CC9PiDdWRwgvT6hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-26_04-20-54__eff1c4a8-ffb8-4913-86d2-015cab57979f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.93.186
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['45565', '45566', '45567', '45568', '45569']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 45565:45565 -p 45566:45566 -p 45567:45567 -p 45568:45568 -p 45569:45569 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45567 --rest-port=45565 --tcp-port=45566 --discv5-udp-port=45568 --rest-address=0.0.0.0 --nat=extip:172.18.93.186 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fd9dcc96c0cb587d97d0d037e68ea18a8cb8cfb5fc78f4c9dee52ad31fb69c5d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45569 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.93.186 waku ba1afa0ad22c9dc65b3e5dc00b2383ba44fb41d5be29fbe18cef21da5a40a11b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID ba1afa0ad22c. Setting up logs at ./log/docker/receiving_node2_2024-08-26_04-20-54__eff1c4a8-ffb8-4913-86d2-015cab57979f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 45565
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45565/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45565/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.93.186/tcp/45566/p2p/16Uiu2HAmS36dQKGKbVEb9WFqWhNpooGT5Jv424pmkN1CaTiseEtA","/ip4/172.18.93.186/tcp/45567/ws/p2p/16Uiu2HAmS36dQKGKbVEb9WFqWhNpooGT5Jv424pmkN1CaTiseEtA"],"enrUri":"enr:-LO4QIOWrcjdFx_GQ8lrmIsHc6dRDGOgiH4y5Dpsys9n_VmPQDsikR46DRvnMXIopHsyrtDe6aSCkwqzCBupP7z6xK0BgmlkgnY0gmlwhKwSXbqKbXVsdGlhZGRyc4wACgSsEl26BrH_3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPG0c5iCno_qAMJrAA_DF5rZd78naKbUITa41cZIsiV84N0Y3CCsf6DdWRwgrIAhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45565/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.229.174/tcp/62712/p2p/16Uiu2HAm7MPABrUAMRTwiArabN3iR3HjQNQsVGDs8N1YMwJw4hBU"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_04-20-54__eff1c4a8-ffb8-4913-86d2-015cab57979f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.237.247
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['22851', '22852', '22853', '22854', '22855']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 22851:22851 -p 22852:22852 -p 22853:22853 -p 22854:22854 -p 22855:22855 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22853 --rest-port=22851 --tcp-port=22852 --discv5-udp-port=22854 --rest-address=0.0.0.0 --nat=extip:172.18.237.247 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bc82af170f3cfff5d8502ba02f1010f6e5d7b6cdc5c90f6b47c92af4596daa63 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22855 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QN5y5wUAsJFYKjsO7WHiKaIwz41ryucg1ALpbseelvbKP7be1q87d4o8jrDwspvNelHKQaPc1X3GcSDQ8rEHUkEBgmlkgnY0gmlwhKwS5a6KbXVsdGlhZGRyc4wACgSsEuWuBvT53QOCcnOFAAMBAACJc2VjcDI1NmsxoQKxMuaK4hG-M_f6vYuJXvFNW9f4HCjUvmkr5V43xu_d94N0Y3CC9PiDdWRwgvT6hXdha3UyCQ --lightpushnode=/ip4/172.18.229.174/tcp/62712/p2p/16Uiu2HAm7MPABrUAMRTwiArabN3iR3HjQNQsVGDs8N1YMwJw4hBU --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.237.247 waku e0bc5a70c8fd5ee2a0a17a857774e4c7c77ff71e470c55f0dd2769458c9093cb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e0bc5a70c8fd. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_04-20-54__eff1c4a8-ffb8-4913-86d2-015cab57979f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 22851
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22851/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22851/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.237.247/tcp/22852/p2p/16Uiu2HAmUFQn565hLvxeYDmJ74pq1zUeEFXUnUfn3ryRjMnWwDkc","/ip4/172.18.237.247/tcp/22853/ws/p2p/16Uiu2HAmUFQn565hLvxeYDmJ74pq1zUeEFXUnUfn3ryRjMnWwDkc"],"enrUri":"enr:-LO4QICZKKGPS0srLlmJ5oJDgOoYAtkyRTAZEhmPd6RUaVALQnO4h5cMzw9Mv29wKqfYpRVWx9QBdeBpIu6-0nCITgMBgmlkgnY0gmlwhKwS7feKbXVsdGlhZGRyc4wACgSsEu33BllF3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPnsKvg9RxrkOP2iioL82hi0F1ANTRT6XBS3e2gxBK18YN0Y3CCWUSDdWRwgllGhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22851/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.229.174/tcp/62712/p2p/16Uiu2HAm7MPABrUAMRTwiArabN3iR3HjQNQsVGDs8N1YMwJw4hBU"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22851/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.93.186/tcp/45566/p2p/16Uiu2HAmS36dQKGKbVEb9WFqWhNpooGT5Jv424pmkN1CaTiseEtA"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62711/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45565/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22851/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724646059643801600}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:22851/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22851/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724646059647872512}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:22851/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22851/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724646059650909184}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:22851/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22851/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724646059653866496}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:22851/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 97d235e88a80
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id ba1afa0ad22c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id e0bc5a70c8fd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.