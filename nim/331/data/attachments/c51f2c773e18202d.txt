[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-08-26_04-21-18__e6aa53f4-183d-4737-9d76-580b4eb04b6f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_04-21-18__e6aa53f4-183d-4737-9d76-580b4eb04b6f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.17.129
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['43119', '43120', '43121', '43122', '43123']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 43119:43119 -p 43120:43120 -p 43121:43121 -p 43122:43122 -p 43123:43123 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43121 --rest-port=43119 --tcp-port=43120 --discv5-udp-port=43122 --rest-address=0.0.0.0 --nat=extip:172.18.17.129 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b3463b9387c3eda935c8efebf7e85c1f5cc75696407464afbd562410ebeccb1e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43123 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.17.129 waku 063aa6a9a81edbbbdc652571410bb6fffc2df0299afa19670ae35dda4c0ae2a3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 063aa6a9a81e. Setting up logs at ./log/docker/receiving_node1_2024-08-26_04-21-18__e6aa53f4-183d-4737-9d76-580b4eb04b6f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 43119
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43119/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43119/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.17.129/tcp/43120/p2p/16Uiu2HAmBAgohTJVd3TMo2BTDo5WNdxh3n7K9kmYxwFsEcQwH5LB","/ip4/172.18.17.129/tcp/43121/ws/p2p/16Uiu2HAmBAgohTJVd3TMo2BTDo5WNdxh3n7K9kmYxwFsEcQwH5LB"],"enrUri":"enr:-LO4QKpLJjHOhKOUyA4sTfgTqb7DZzsY27gWlLJv4P36JVzQMGsKQm_dDu_pHlQ1wxwi_a5mbRC5So2fhMYxpZABlZ8BgmlkgnY0gmlwhKwSEYGKbXVsdGlhZGRyc4wACgSsEhGBBqhx3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLp5DZr5AaIPzl1D3rQXxWTAe61HfjckUBCU9TJuDuPaIN0Y3CCqHCDdWRwgqhyhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-26_04-21-18__e6aa53f4-183d-4737-9d76-580b4eb04b6f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.193.51
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['33399', '33400', '33401', '33402', '33403']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 33399:33399 -p 33400:33400 -p 33401:33401 -p 33402:33402 -p 33403:33403 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33401 --rest-port=33399 --tcp-port=33400 --discv5-udp-port=33402 --rest-address=0.0.0.0 --nat=extip:172.18.193.51 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7a631b712bb9ccba319cc60cff7ee9bf91a1deed5cd05da54afaaaab23ece2f3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33403 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.193.51 waku c7b7b0e59eaac95407a5f80051893a38562a32a535fca4393dda3d23b6413d66
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID c7b7b0e59eaa. Setting up logs at ./log/docker/receiving_node2_2024-08-26_04-21-18__e6aa53f4-183d-4737-9d76-580b4eb04b6f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 33399
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33399/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33399/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.193.51/tcp/33400/p2p/16Uiu2HAmV3DVVLE5G9ZEF5NLuBByDmVfYK7FwwbyYvqpS9eUfrM4","/ip4/172.18.193.51/tcp/33401/ws/p2p/16Uiu2HAmV3DVVLE5G9ZEF5NLuBByDmVfYK7FwwbyYvqpS9eUfrM4"],"enrUri":"enr:-LO4QFQC-bftQO48_YuI8Yaz3ijrIT3ZnStZSayV_b24sTtEHbeAJgsZbRtweyMnUMqeQi9kLW8hroqoOQZjBBHj2gYBgmlkgnY0gmlwhKwSwTOKbXVsdGlhZGRyc4wACgSsEsEzBoJ53QOCcnOFAAMBAACJc2VjcDI1NmsxoQPzbKCrXXKOuAQxoq9X83nGOsukW5bC36EAYJ_SoRD-r4N0Y3CCgniDdWRwgoJ6hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33399/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.17.129/tcp/43120/p2p/16Uiu2HAmBAgohTJVd3TMo2BTDo5WNdxh3n7K9kmYxwFsEcQwH5LB"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_04-21-18__e6aa53f4-183d-4737-9d76-580b4eb04b6f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.157.153
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['24987', '24988', '24989', '24990', '24991']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 24987:24987 -p 24988:24988 -p 24989:24989 -p 24990:24990 -p 24991:24991 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24989 --rest-port=24987 --tcp-port=24988 --discv5-udp-port=24990 --rest-address=0.0.0.0 --nat=extip:172.18.157.153 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3c8bae1dfd3ee7905af8cac80c89ac6d75fa7a44c6cb5e90f4e5fcbfdcc97b1a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24991 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QKpLJjHOhKOUyA4sTfgTqb7DZzsY27gWlLJv4P36JVzQMGsKQm_dDu_pHlQ1wxwi_a5mbRC5So2fhMYxpZABlZ8BgmlkgnY0gmlwhKwSEYGKbXVsdGlhZGRyc4wACgSsEhGBBqhx3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLp5DZr5AaIPzl1D3rQXxWTAe61HfjckUBCU9TJuDuPaIN0Y3CCqHCDdWRwgqhyhXdha3UyCQ --lightpushnode=/ip4/172.18.17.129/tcp/43120/p2p/16Uiu2HAmBAgohTJVd3TMo2BTDo5WNdxh3n7K9kmYxwFsEcQwH5LB --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.157.153 waku 33cd9c7f191cff4f785f992b78a0a8680465e62babd5a730d2bc3469709c4bff
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 33cd9c7f191c. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_04-21-18__e6aa53f4-183d-4737-9d76-580b4eb04b6f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 24987
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24987/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24987/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.157.153/tcp/24988/p2p/16Uiu2HAmH2dsPKYzoFB1CX1ghWeZFRFW5wEf5j1DsN6qevmZYhhG","/ip4/172.18.157.153/tcp/24989/ws/p2p/16Uiu2HAmH2dsPKYzoFB1CX1ghWeZFRFW5wEf5j1DsN6qevmZYhhG"],"enrUri":"enr:-LO4QPvfcYuL34_nMOnbYFM-0Ykf93Dpsyfdq5Fc3SlRj4XOQ3FXJYWP8TMhhjTnmjZrNwj7Zvk0JfMi5-ANe6GtXEYBgmlkgnY0gmlwhKwSnZmKbXVsdGlhZGRyc4wACgSsEp2ZBmGd3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNA-l4QvmnPfPvI3CZRaS-o8vA1q3AK8wm0REeBHF_g14N0Y3CCYZyDdWRwgmGehXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24987/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.17.129/tcp/43120/p2p/16Uiu2HAmBAgohTJVd3TMo2BTDo5WNdxh3n7K9kmYxwFsEcQwH5LB"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24987/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.193.51/tcp/33400/p2p/16Uiu2HAmV3DVVLE5G9ZEF5NLuBByDmVfYK7FwwbyYvqpS9eUfrM4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43119/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33399/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24987/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724646083197495808, "version": 2.1}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:24987/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 063aa6a9a81e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id c7b7b0e59eaa
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 33cd9c7f191c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.