[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_invalid_content_topic_format with id: 2024-08-26_04-17-30__522fd5f0-211f-4b0e-9e56-f956d91b67d9
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-26_04-17-30__522fd5f0-211f-4b0e-9e56-f956d91b67d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.193.155
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['27102', '27103', '27104', '27105', '27106']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 27102:27102 -p 27103:27103 -p 27104:27104 -p 27105:27105 -p 27106:27106 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27104 --rest-port=27102 --tcp-port=27103 --discv5-udp-port=27105 --rest-address=0.0.0.0 --nat=extip:172.18.193.155 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c204c7daf09b4580aae538f2b46b944ba4c7add9bea149c11abd14895f3eab80 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27106 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.193.155 waku d320d50be899cd52f04fed0326abd01ba08e871323dac4c6337d6d6d3cfc3e49
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID d320d50be899. Setting up logs at ./log/docker/node1_2024-08-26_04-17-30__522fd5f0-211f-4b0e-9e56-f956d91b67d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 27102
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27102/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27102/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.193.155/tcp/27103/p2p/16Uiu2HAmTHMzqi1LEDW1qGapgp8YxPjaEi7oVPzvb4TmcbWNVtng","/ip4/172.18.193.155/tcp/27104/ws/p2p/16Uiu2HAmTHMzqi1LEDW1qGapgp8YxPjaEi7oVPzvb4TmcbWNVtng"],"enrUri":"enr:-LO4QFVmkOzDNfxZR9DljatWB4uZnkpbc9lAFZgx_X4HWX9vLhQnxNa0142QLdB1SXj6PuGryg6p6Lu2XC-2Tt0su1wBgmlkgnY0gmlwhKwSwZuKbXVsdGlhZGRyc4wACgSsEsGbBmng3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPZVQC_QrXEKYLhiOV15xIQxExO2OFyS8S3fxfE2SxqVYN0Y3CCad-DdWRwgmnhhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-26_04-17-30__522fd5f0-211f-4b0e-9e56-f956d91b67d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.114.12
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['63792', '63793', '63794', '63795', '63796']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 63792:63792 -p 63793:63793 -p 63794:63794 -p 63795:63795 -p 63796:63796 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63794 --rest-port=63792 --tcp-port=63793 --discv5-udp-port=63795 --rest-address=0.0.0.0 --nat=extip:172.18.114.12 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ebd9d00c5e76a0fddac4f2a28a309e1d00faf5d9dfb43deb04c8fc5da2bdbdbc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63796 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QFVmkOzDNfxZR9DljatWB4uZnkpbc9lAFZgx_X4HWX9vLhQnxNa0142QLdB1SXj6PuGryg6p6Lu2XC-2Tt0su1wBgmlkgnY0gmlwhKwSwZuKbXVsdGlhZGRyc4wACgSsEsGbBmng3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPZVQC_QrXEKYLhiOV15xIQxExO2OFyS8S3fxfE2SxqVYN0Y3CCad-DdWRwgmnhhXdha3UyBQ --filternode=/ip4/172.18.193.155/tcp/27103/p2p/16Uiu2HAmTHMzqi1LEDW1qGapgp8YxPjaEi7oVPzvb4TmcbWNVtng
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.114.12 waku 5abe19ea977e0fcd5264ba17b89a74f0ff6c967811b83c69bc535bb421097e1b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 5abe19ea977e. Setting up logs at ./log/docker/node2_2024-08-26_04-17-30__522fd5f0-211f-4b0e-9e56-f956d91b67d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 63792
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63792/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63792/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.114.12/tcp/63793/p2p/16Uiu2HAmC7fsJjPpuzjDLCDYS61qkeQAiDvEdsKjSuwwtqYx53qj","/ip4/172.18.114.12/tcp/63794/ws/p2p/16Uiu2HAmC7fsJjPpuzjDLCDYS61qkeQAiDvEdsKjSuwwtqYx53qj"],"enrUri":"enr:-LO4QEbohDXY4Y7zhoY30vjj_KblsCrmEhDcXuILuZxCpRiKBa7yN-y3hDgKril8SgJ3zNhpGnky2Hb9KByt5qkVijUBgmlkgnY0gmlwhKwScgyKbXVsdGlhZGRyc4wACgSsEnIMBvky3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL3-hjCu5dLIJvf2FndDziQrP7vIFhH3UpKdkJJppUoQoN0Y3CC-TGDdWRwgvkzhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63792/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.193.155/tcp/27103/p2p/16Uiu2HAmTHMzqi1LEDW1qGapgp8YxPjaEi7oVPzvb4TmcbWNVtng"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27102/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63792/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "151d9642-e7cd-4fd3-a9a1-5edf56cc5e86", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"151d9642-e7cd-4fd3-a9a1-5edf56cc5e86","statusDesc":"OK"}'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:133 Running test with contetn topic Empty string
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63792/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": [{"description": "Empty string", "value": ""}], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63792/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:133 Running test with contetn topic A dictionary
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63792/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": [{"description": "A dictionary", "value": {"key": "YWFh"}}], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63792/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:133 Running test with contetn topic An integer
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63792/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": [{"description": "An integer", "value": 1234567890}], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63792/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:133 Running test with contetn topic A list
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63792/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": [{"description": "A list", "value": ["YWFh"]}], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63792/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:133 Running test with contetn topic A bool
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63792/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": [{"description": "A bool", "value": true}], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63792/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id d320d50be899
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 5abe19ea977e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.