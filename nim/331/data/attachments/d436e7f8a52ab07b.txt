[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_works_with_static_sharding with id: 2024-08-26_04-25-48__3a4e209a-1477-49f1-bc59-64de20ed950a
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-26_04-25-48__3a4e209a-1477-49f1-bc59-64de20ed950a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.236.19
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['19550', '19551', '19552', '19553', '19554']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:71 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 19550:19550 -p 19551:19551 -p 19552:19552 -p 19553:19553 -p 19554:19554 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19552 --rest-port=19550 --tcp-port=19551 --discv5-udp-port=19553 --rest-address=0.0.0.0 --nat=extip:172.18.236.19 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=a85e821dbc61be6983ea91ba198cdf98c5a1e5ae548bfd8e4b9d36a3eca85072 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19554 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.236.19 waku 93db681fed1962e1adb091a79e05e02b09479ee7e77de36b29e4002c6d9bec9d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 93db681fed19. Setting up logs at ./log/docker/node1_2024-08-26_04-25-48__3a4e209a-1477-49f1-bc59-64de20ed950a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 19550
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19550/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19550/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.236.19/tcp/19551/p2p/16Uiu2HAmChNsNBSrQQ4HC4P7rzkYoy9vumEZeASGDxycJrtfMyAc","/ip4/172.18.236.19/tcp/19552/ws/p2p/16Uiu2HAmChNsNBSrQQ4HC4P7rzkYoy9vumEZeASGDxycJrtfMyAc"],"enrUri":"enr:-LO4QKvuc4s-oj5V8DWrv4Zu0g-J9BVD710x0Z-aQr_Kd2xWQrAltkTJvScRhZ07XMZSRsH6RW3U6msEsR7F4GZH9QsBgmlkgnY0gmlwhKwS7BOKbXVsdGlhZGRyc4wACgSsEuwTBkxg3QOCcnOFAAIBAACJc2VjcDI1NmsxoQMAnJ-Y-gt55z6oLO32vpOoCPSojPBY_a9CRo2wD9qQLYN0Y3CCTF-DdWRwgkxhhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-26_04-25-48__3a4e209a-1477-49f1-bc59-64de20ed950a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.113.139
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['31107', '31108', '31109', '31110', '31111']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:71 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 31107:31107 -p 31108:31108 -p 31109:31109 -p 31110:31110 -p 31111:31111 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31109 --rest-port=31107 --tcp-port=31108 --discv5-udp-port=31110 --rest-address=0.0.0.0 --nat=extip:172.18.113.139 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ac217aef16ed7f287215703cbbaf4b41e9a01b92a7dd8e998c60b30b0e269f1d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31111 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QKvuc4s-oj5V8DWrv4Zu0g-J9BVD710x0Z-aQr_Kd2xWQrAltkTJvScRhZ07XMZSRsH6RW3U6msEsR7F4GZH9QsBgmlkgnY0gmlwhKwS7BOKbXVsdGlhZGRyc4wACgSsEuwTBkxg3QOCcnOFAAIBAACJc2VjcDI1NmsxoQMAnJ-Y-gt55z6oLO32vpOoCPSojPBY_a9CRo2wD9qQLYN0Y3CCTF-DdWRwgkxhhXdha3UyBQ --filternode=/ip4/172.18.236.19/tcp/19551/p2p/16Uiu2HAmChNsNBSrQQ4HC4P7rzkYoy9vumEZeASGDxycJrtfMyAc --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.113.139 waku 1c096e6e7750c9cc6d457a0bce5389fb4df74e858c789c5879c0ab9ac5ae478d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 1c096e6e7750. Setting up logs at ./log/docker/node2_2024-08-26_04-25-48__3a4e209a-1477-49f1-bc59-64de20ed950a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 31107
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31107/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31107/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.113.139/tcp/31108/p2p/16Uiu2HAmDhie7vuUJW4YwP5tUgaDXRhrJrkRC5qmtNBoyNqnsxN3","/ip4/172.18.113.139/tcp/31109/ws/p2p/16Uiu2HAmDhie7vuUJW4YwP5tUgaDXRhrJrkRC5qmtNBoyNqnsxN3"],"enrUri":"enr:-LO4QEszJMb9Pz2EllM9RirxpJEtqthtEjLyJ8tH-ZqgemT1KY1sIbo-e7yOe44AyKUXBuiCGgiVu2dr-az1mLw8BwEBgmlkgnY0gmlwhKwScYuKbXVsdGlhZGRyc4wACgSsEnGLBnmF3QOCcnOFAAIBAACJc2VjcDI1NmsxoQMPjqqMRp7I6_A3PNPoDax4mqRzoGSvoKE9oubAbmz6YIN0Y3CCeYSDdWRwgnmGhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31107/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.236.19/tcp/19551/p2p/16Uiu2HAmChNsNBSrQQ4HC4P7rzkYoy9vumEZeASGDxycJrtfMyAc"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19550/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31107/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "35f94453-19db-45cc-b072-d01a93964614", "contentFilters": ["/myapp/1/latest/proto"], "pubsubTopic": "/waku/2/rs/2/0"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"35f94453-19db-45cc-b072-d01a93964614","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19550/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:186 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31107/filter/v2/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724646351967042304,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 93db681fed19
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 1c096e6e7750
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.