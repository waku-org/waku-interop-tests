[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_from_all_subscribed_content_topics with id: 2024-08-26_04-18-18__bf526673-2e4b-484a-9f68-b8b7b2a222b1
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-26_04-18-18__bf526673-2e4b-484a-9f68-b8b7b2a222b1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.20.5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['1555', '1556', '1557', '1558', '1559']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 1555:1555 -p 1556:1556 -p 1557:1557 -p 1558:1558 -p 1559:1559 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1557 --rest-port=1555 --tcp-port=1556 --discv5-udp-port=1558 --rest-address=0.0.0.0 --nat=extip:172.18.20.5 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=146aff45bfef213b2eac574a5c557df8983a71fdce3bffff9e3bbc2683273fcb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1559 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.20.5 waku 45c0ac96a619da8cfa9e5839456339474d4b4191b5462bf29da84e8c2de6e96a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 45c0ac96a619. Setting up logs at ./log/docker/node1_2024-08-26_04-18-18__bf526673-2e4b-484a-9f68-b8b7b2a222b1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 1555
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1555/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1555/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.20.5/tcp/1556/p2p/16Uiu2HAmGEGa8HrtX3zhadpdvMXqyZqQW2EwKsjYbvHPrS5hnhi4","/ip4/172.18.20.5/tcp/1557/ws/p2p/16Uiu2HAmGEGa8HrtX3zhadpdvMXqyZqQW2EwKsjYbvHPrS5hnhi4"],"enrUri":"enr:-LO4QARTHaWx-Zisi-BQUjcimuxGOMrFCZPNsXgbP5QTMFpBSphcADgr8_BQ6FN6qthGwZKvIm0xF9gofJP6taHXI2ABgmlkgnY0gmlwhKwSFAWKbXVsdGlhZGRyc4wACgSsEhQFBgYV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM1GZGpAmemsxbPWA0iPjHflJ3_ERwPMTtSKYrr8_i5tYN0Y3CCBhSDdWRwggYWhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-26_04-18-18__bf526673-2e4b-484a-9f68-b8b7b2a222b1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.204.115
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['27157', '27158', '27159', '27160', '27161']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 27157:27157 -p 27158:27158 -p 27159:27159 -p 27160:27160 -p 27161:27161 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27159 --rest-port=27157 --tcp-port=27158 --discv5-udp-port=27160 --rest-address=0.0.0.0 --nat=extip:172.18.204.115 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dda3e212ad4ded9baa133ac9abbaaac6aeab1087d4ff173dce1f470470c5ba14 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27161 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QARTHaWx-Zisi-BQUjcimuxGOMrFCZPNsXgbP5QTMFpBSphcADgr8_BQ6FN6qthGwZKvIm0xF9gofJP6taHXI2ABgmlkgnY0gmlwhKwSFAWKbXVsdGlhZGRyc4wACgSsEhQFBgYV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM1GZGpAmemsxbPWA0iPjHflJ3_ERwPMTtSKYrr8_i5tYN0Y3CCBhSDdWRwggYWhXdha3UyBQ --filternode=/ip4/172.18.20.5/tcp/1556/p2p/16Uiu2HAmGEGa8HrtX3zhadpdvMXqyZqQW2EwKsjYbvHPrS5hnhi4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.204.115 waku 571e39ad2663121fea1d37bccf46d20b8b5274235a26ac3a5f9d7989d7804bfc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 571e39ad2663. Setting up logs at ./log/docker/node2_2024-08-26_04-18-18__bf526673-2e4b-484a-9f68-b8b7b2a222b1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 27157
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27157/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27157/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.204.115/tcp/27158/p2p/16Uiu2HAm8rrd3x4CBDgg7A2YfEwYEo269pd91SupBM11qcLrJBmn","/ip4/172.18.204.115/tcp/27159/ws/p2p/16Uiu2HAm8rrd3x4CBDgg7A2YfEwYEo269pd91SupBM11qcLrJBmn"],"enrUri":"enr:-LO4QFEFqiu_ZoNeF4ALvN5UqAJX4ruh4VQhzZJy8yZSwsDbBrtGT616vct3SBM8wm7pQ15G0MdXLvZNkHdJ3kSLWQsBgmlkgnY0gmlwhKwSzHOKbXVsdGlhZGRyc4wACgSsEsxzBmoX3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLHm3vQa59Tk3-Qnt6ffhZrA97GDTKbpd8LXTBehGWH5YN0Y3CCahaDdWRwgmoYhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27157/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.20.5/tcp/1556/p2p/16Uiu2HAmGEGa8HrtX3zhadpdvMXqyZqQW2EwKsjYbvHPrS5hnhi4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1555/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27157/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "008c6214-276d-41e0-a838-58cc947bca4c", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"008c6214-276d-41e0-a838-58cc947bca4c","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1555/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27157/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "ab571ee9-84f3-4a70-ad0d-678a9e025f7d", "contentFilters": ["Hello World!", "1234567890"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"ab571ee9-84f3-4a70-ad0d-678a9e025f7d","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1555/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27157/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1724645901612894720,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:27157/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["Hello World!", "1234567890"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1555/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27157/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:27157/filter/v2/messages/1234567890. Response content: b'Not subscribed to topic: 1234567890'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 45c0ac96a619
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 571e39ad2663
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.