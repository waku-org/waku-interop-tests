[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_after_node1_restarts with id: 2024-08-26_04-15-45__7e5241f3-e0a0-4d04-963e-ed3213d41834
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-26_04-15-45__7e5241f3-e0a0-4d04-963e-ed3213d41834__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.121.44
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['15110', '15111', '15112', '15113', '15114']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 15110:15110 -p 15111:15111 -p 15112:15112 -p 15113:15113 -p 15114:15114 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15112 --rest-port=15110 --tcp-port=15111 --discv5-udp-port=15113 --rest-address=0.0.0.0 --nat=extip:172.18.121.44 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3d2165cd08d6edb2c517dede7eb6129f5cfcbae58f5b5b2389ca1a160f3e1e9b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15114 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.121.44 waku 7b3fec2f5a26c82bc60f46451c22e751d15323d969c0eb86710d6c29e0451631
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 7b3fec2f5a26. Setting up logs at ./log/docker/node1_2024-08-26_04-15-45__7e5241f3-e0a0-4d04-963e-ed3213d41834__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 15110
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15110/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15110/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.121.44/tcp/15111/p2p/16Uiu2HAm7pmA2z5cgnboUsm8B9cgdzvYs7soca5a61vXN8iwRHCR","/ip4/172.18.121.44/tcp/15112/ws/p2p/16Uiu2HAm7pmA2z5cgnboUsm8B9cgdzvYs7soca5a61vXN8iwRHCR"],"enrUri":"enr:-LO4QAl43fPy8K453iPm4rf490wtXwYiiYN7abZ4_YaE7uP3VmfMaDekkgNBPFUpQ-ifZxSbTK9ByktshWx3sqYZtPcBgmlkgnY0gmlwhKwSeSyKbXVsdGlhZGRyc4wACgSsEnksBjsI3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK4NnR0VIXwR8hZbhOZuqKfpeEvNojTavnHQpPmYMyg1oN0Y3CCOweDdWRwgjsJhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-26_04-15-45__7e5241f3-e0a0-4d04-963e-ed3213d41834__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.52.86
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['62922', '62923', '62924', '62925', '62926']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 62922:62922 -p 62923:62923 -p 62924:62924 -p 62925:62925 -p 62926:62926 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62924 --rest-port=62922 --tcp-port=62923 --discv5-udp-port=62925 --rest-address=0.0.0.0 --nat=extip:172.18.52.86 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=efe38db4f1e55cf583fd5d0b41cc1b9a5efd376cc57a89abb9faaf6dbd9f0f98 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62926 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QAl43fPy8K453iPm4rf490wtXwYiiYN7abZ4_YaE7uP3VmfMaDekkgNBPFUpQ-ifZxSbTK9ByktshWx3sqYZtPcBgmlkgnY0gmlwhKwSeSyKbXVsdGlhZGRyc4wACgSsEnksBjsI3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK4NnR0VIXwR8hZbhOZuqKfpeEvNojTavnHQpPmYMyg1oN0Y3CCOweDdWRwgjsJhXdha3UyBQ --filternode=/ip4/172.18.121.44/tcp/15111/p2p/16Uiu2HAm7pmA2z5cgnboUsm8B9cgdzvYs7soca5a61vXN8iwRHCR
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.52.86 waku 77cecc3cd6dd16515ea7ac5d7bb5ac6a6bf08fcb53fd135198a45e1a199ecace
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 77cecc3cd6dd. Setting up logs at ./log/docker/node2_2024-08-26_04-15-45__7e5241f3-e0a0-4d04-963e-ed3213d41834__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 62922
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62922/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62922/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.52.86/tcp/62923/p2p/16Uiu2HAm9CurWiMvMJw9TUBPhfsCMMYhxEdNV39ZyTb3phKc4m4v","/ip4/172.18.52.86/tcp/62924/ws/p2p/16Uiu2HAm9CurWiMvMJw9TUBPhfsCMMYhxEdNV39ZyTb3phKc4m4v"],"enrUri":"enr:-LO4QLLhZ-Sk27QdByF7IIE_iYaZHrEbF98GljGfF6NF5ucsSPpA-n_k72LVR_dqmvGcOeLNVyelheuKWV_jEoOZJz0BgmlkgnY0gmlwhKwSNFaKbXVsdGlhZGRyc4wACgSsEjRWBvXM3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLMvsEecIeFZv4ZdOREFUELj0hWRA9cJ4XiIT17zplFe4N0Y3CC9cuDdWRwgvXNhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62922/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.121.44/tcp/15111/p2p/16Uiu2HAm7pmA2z5cgnboUsm8B9cgdzvYs7soca5a61vXN8iwRHCR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15110/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62922/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "3ee668b7-7383-42c5-96b2-af650bf87b67", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"3ee668b7-7383-42c5-96b2-af650bf87b67","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15110/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62922/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1724645749101978880,"ephemeral":false}]'
[35mDEBUG   [0m src.node.waku_node:waku_node.py:243 Restarting container with id 7b3fec2f5a26
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15110/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15110/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15110/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.121.44/tcp/15111/p2p/16Uiu2HAm7pmA2z5cgnboUsm8B9cgdzvYs7soca5a61vXN8iwRHCR","/ip4/172.18.121.44/tcp/15112/ws/p2p/16Uiu2HAm7pmA2z5cgnboUsm8B9cgdzvYs7soca5a61vXN8iwRHCR"],"enrUri":"enr:-LO4QAl43fPy8K453iPm4rf490wtXwYiiYN7abZ4_YaE7uP3VmfMaDekkgNBPFUpQ-ifZxSbTK9ByktshWx3sqYZtPcBgmlkgnY0gmlwhKwSeSyKbXVsdGlhZGRyc4wACgSsEnksBjsI3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK4NnR0VIXwR8hZbhOZuqKfpeEvNojTavnHQpPmYMyg1oN0Y3CCOweDdWRwgjsJhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 2 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15110/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62922/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "af0bf823-eebf-4bb4-b45f-f2208f4ad553", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"af0bf823-eebf-4bb4-b45f-f2208f4ad553","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15110/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62922/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1724645754844768512,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 7b3fec2f5a26
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 77cecc3cd6dd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.