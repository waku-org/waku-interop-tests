[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_receiving_nodes__relay_node1_forwards_lightpushed_message_to_relay_node2 with id: 2024-08-26_04-19-19__521df3ae-3373-4485-83b0-8f5ca94dc9b4
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_04-19-19__521df3ae-3373-4485-83b0-8f5ca94dc9b4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.239.235
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['29571', '29572', '29573', '29574', '29575']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 29571:29571 -p 29572:29572 -p 29573:29573 -p 29574:29574 -p 29575:29575 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29573 --rest-port=29571 --tcp-port=29572 --discv5-udp-port=29574 --rest-address=0.0.0.0 --nat=extip:172.18.239.235 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=61ed5233bc94d131c9abdfc5caad9988a9ebfbca4b5c4d5b2c9f0dbccdc23c1a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29575 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.239.235 waku acef7a36ac897f519c7eaf3e21f86d14881f454ffd95f38c5b9182f4ca1e9e38
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID acef7a36ac89. Setting up logs at ./log/docker/receiving_node1_2024-08-26_04-19-19__521df3ae-3373-4485-83b0-8f5ca94dc9b4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 29571
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29571/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29571/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.239.235/tcp/29572/p2p/16Uiu2HAkuWhquFUVQPz6RH9fzi77pEZyARj5Qax6SE77xHr3BAwX","/ip4/172.18.239.235/tcp/29573/ws/p2p/16Uiu2HAkuWhquFUVQPz6RH9fzi77pEZyARj5Qax6SE77xHr3BAwX"],"enrUri":"enr:-LO4QBSa6tASnt4sz4GDJgwU1CKAFrtukdt5Oz7kJ8M9D2NKBSmELhX9E0xNK3bsNbEVYJBYSgjFUoj4HRi7eTWPtdIBgmlkgnY0gmlwhKwS7-uKbXVsdGlhZGRyc4wACgSsEu_rBnOF3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIBSgL4V8Vx3UmDN7enUepmuh4SLbUVo_gdpEeDw8k5boN0Y3CCc4SDdWRwgnOGhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-26_04-19-19__521df3ae-3373-4485-83b0-8f5ca94dc9b4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.128.178
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['16497', '16498', '16499', '16500', '16501']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 16497:16497 -p 16498:16498 -p 16499:16499 -p 16500:16500 -p 16501:16501 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16499 --rest-port=16497 --tcp-port=16498 --discv5-udp-port=16500 --rest-address=0.0.0.0 --nat=extip:172.18.128.178 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d71249f7ecbaa51d10f0407eb22c4ca7cb4d2c927f1ca46f49af64ce1ec2dc7a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16501 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.128.178 waku dc87245567bfebb2ff7acf3a977179caf3e80fc3936e5e9777f5f012fb10539e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID dc87245567bf. Setting up logs at ./log/docker/receiving_node2_2024-08-26_04-19-19__521df3ae-3373-4485-83b0-8f5ca94dc9b4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 16497
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16497/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16497/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.128.178/tcp/16498/p2p/16Uiu2HAkxL1k3bM8CEm9LqmuUrENrcxopp29b9H699vppciSSk23","/ip4/172.18.128.178/tcp/16499/ws/p2p/16Uiu2HAkxL1k3bM8CEm9LqmuUrENrcxopp29b9H699vppciSSk23"],"enrUri":"enr:-LO4QDpe0RJ6xXeelCQzatmuAGqP4-NBssSHJbSagjWviEUWLqG2ogNtbI6RDV2tN0GvodpSXsiIZaRbJXcEHrw8UO0BgmlkgnY0gmlwhKwSgLKKbXVsdGlhZGRyc4wACgSsEoCyBkBz3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIrH-wG7ya7UhyvtjgQ4shfm99j4LdF_8URy878KkEpoIN0Y3CCQHKDdWRwgkB0hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16497/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.239.235/tcp/29572/p2p/16Uiu2HAkuWhquFUVQPz6RH9fzi77pEZyARj5Qax6SE77xHr3BAwX"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_04-19-19__521df3ae-3373-4485-83b0-8f5ca94dc9b4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.218.62
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['11443', '11444', '11445', '11446', '11447']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 11443:11443 -p 11444:11444 -p 11445:11445 -p 11446:11446 -p 11447:11447 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11445 --rest-port=11443 --tcp-port=11444 --discv5-udp-port=11446 --rest-address=0.0.0.0 --nat=extip:172.18.218.62 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=72decdbb1fb98eef1a8aeaba4fdcca5c6fa52fa32aedcfb248324108ce1c2fea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11447 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QBSa6tASnt4sz4GDJgwU1CKAFrtukdt5Oz7kJ8M9D2NKBSmELhX9E0xNK3bsNbEVYJBYSgjFUoj4HRi7eTWPtdIBgmlkgnY0gmlwhKwS7-uKbXVsdGlhZGRyc4wACgSsEu_rBnOF3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIBSgL4V8Vx3UmDN7enUepmuh4SLbUVo_gdpEeDw8k5boN0Y3CCc4SDdWRwgnOGhXdha3UyCQ --lightpushnode=/ip4/172.18.239.235/tcp/29572/p2p/16Uiu2HAkuWhquFUVQPz6RH9fzi77pEZyARj5Qax6SE77xHr3BAwX --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.218.62 waku 4f2bb5310fe50a7b4f0be0b83fd024194303e083df0ae8211525e7d3902ceec1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 4f2bb5310fe5. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_04-19-19__521df3ae-3373-4485-83b0-8f5ca94dc9b4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 11443
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11443/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11443/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.218.62/tcp/11444/p2p/16Uiu2HAmLG6CESXPFasbByvEeFT3errem4fZYAf9hco6zehpcsSz","/ip4/172.18.218.62/tcp/11445/ws/p2p/16Uiu2HAmLG6CESXPFasbByvEeFT3errem4fZYAf9hco6zehpcsSz"],"enrUri":"enr:-LO4QKQRP_bFQctkwtnMHPIvVQu8KOYhVWyFj_njtwPXVc2pQLxTO1OXzPg-VyTJtTTOvCkk8U7rg0-iWH30xQWQ4EMBgmlkgnY0gmlwhKwS2j6KbXVsdGlhZGRyc4wACgSsEto-Biy13QOCcnOFAAMBAACJc2VjcDI1NmsxoQNw_76UZ8k62tUW-ksO4SghG2hi2nz3FjBISMighqksE4N0Y3CCLLSDdWRwgiy2hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11443/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.239.235/tcp/29572/p2p/16Uiu2HAkuWhquFUVQPz6RH9fzi77pEZyARj5Qax6SE77xHr3BAwX"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11443/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.128.178/tcp/16498/p2p/16Uiu2HAkxL1k3bM8CEm9LqmuUrENrcxopp29b9H699vppciSSk23"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29571/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16497/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11443/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724645963819248384}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29571/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724645963819248384,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16497/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724645963819248384,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id acef7a36ac89
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id dc87245567bf
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 4f2bb5310fe5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.