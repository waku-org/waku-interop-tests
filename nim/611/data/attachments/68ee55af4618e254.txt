[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_content_topic[/app/27/sometopic/someencoding] with id: 2025-01-09_04-04-11__407f0b91-7206-4ec5-b9bc-f666c8342186
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-09_04-04-11__407f0b91-7206-4ec5-b9bc-f666c8342186__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.93.160
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['14048', '14049', '14050', '14051', '14052']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 14048:14048 -p 14049:14049 -p 14050:14050 -p 14051:14051 -p 14052:14052 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14050 --rest-port=14048 --tcp-port=14049 --discv5-udp-port=14051 --rest-address=0.0.0.0 --nat=extip:172.18.93.160 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=eefda4d4f878fd6321d5457132a0abbd4a20d1ae635c9c9e20df2090ad6b716a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14052 --metrics-logging=true --relay=true --filter=true --content-topic=/app/27/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.93.160 waku 6e2b6dde702427d4c6bb14557011c82aa5d6d03d190a49d2d5d52c7a0f78609c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6e2b6dde7024. Setting up logs at ./log/docker/node1_2025-01-09_04-04-11__407f0b91-7206-4ec5-b9bc-f666c8342186__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 14048
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b2a9e22f1582. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14048/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14048/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.93.160/tcp/14049/p2p/16Uiu2HAkxhRYD6vjocb96QVdgztitXBmLqkUhsv7r7EQXofYU6r1","/ip4/172.18.93.160/tcp/14050/ws/p2p/16Uiu2HAkxhRYD6vjocb96QVdgztitXBmLqkUhsv7r7EQXofYU6r1"],"enrUri":"enr:-L24QKJF72ELwAfRitmXFEc2Rhw8WUDK2NvmADtwFGYkv1hIUcjmhEWTp45FuAVfg8KftewEC10S96Sf5zlNLoupsmgCgmlkgnY0gmlwhKwSXaCKbXVsdGlhZGRyc5YACASsEl2gBjbhAAoErBJdoAY24t0DgnJzhQACAQAAiXNlY3AyNTZrMaECMJwGbfuk5mZRfY8Ba4SwRXZtqT0AQ6_EdXyp92OHnTaDdGNwgjbhg3VkcII244V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-09_04-04-11__407f0b91-7206-4ec5-b9bc-f666c8342186__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.201.176
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['7114', '7115', '7116', '7117', '7118']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 7114:7114 -p 7115:7115 -p 7116:7116 -p 7117:7117 -p 7118:7118 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7116 --rest-port=7114 --tcp-port=7115 --discv5-udp-port=7117 --rest-address=0.0.0.0 --nat=extip:172.18.201.176 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=6dadeeccaaedf9e856f0abca12cacbc9a35e8c5a73fe8b6eeccaa25fb1bdd5fd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7118 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QKJF72ELwAfRitmXFEc2Rhw8WUDK2NvmADtwFGYkv1hIUcjmhEWTp45FuAVfg8KftewEC10S96Sf5zlNLoupsmgCgmlkgnY0gmlwhKwSXaCKbXVsdGlhZGRyc5YACASsEl2gBjbhAAoErBJdoAY24t0DgnJzhQACAQAAiXNlY3AyNTZrMaECMJwGbfuk5mZRfY8Ba4SwRXZtqT0AQ6_EdXyp92OHnTaDdGNwgjbhg3VkcII244V3YWt1MgU --content-topic=/app/27/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.201.176 waku 361bf59a4a23ac3a68296338527af34279817aa3c38f88c70a451a1349c88069
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 361bf59a4a23. Setting up logs at ./log/docker/node2_2025-01-09_04-04-11__407f0b91-7206-4ec5-b9bc-f666c8342186__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 7114
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7114/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7114/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.201.176/tcp/7115/p2p/16Uiu2HAmPGBYp3M2W4pogGELAgNCWTDBJmigQJDMnzdUnYLx4i9E","/ip4/172.18.201.176/tcp/7116/ws/p2p/16Uiu2HAmPGBYp3M2W4pogGELAgNCWTDBJmigQJDMnzdUnYLx4i9E"],"enrUri":"enr:-L24QJR4Ui617qU0cXU_DU-KvFBtnWAHDDxQzm793N9dBnRsALNw4cabxw7niZgFyZ-SMZuHZxOr2AkCtAK53TofteYCgmlkgnY0gmlwhKwSybCKbXVsdGlhZGRyc5YACASsEsmwBhvLAAoErBLJsAYbzN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDnZjcJRDSmpl5ZkuLESJ9g2vX1qqP-8HUohKsx4LQ_amDdGNwghvLg3VkcIIbzYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7114/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.93.160/tcp/14049/p2p/16Uiu2HAkxhRYD6vjocb96QVdgztitXBmLqkUhsv7r7EQXofYU6r1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14048/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/27/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7114/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/27/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14048/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14048/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/27/sometopic/someencoding","version":0,"timestamp":1736395454475362304,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7114/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/27/sometopic/someencoding","version":0,"timestamp":1736395454475362304,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 6e2b6dde7024
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 361bf59a4a23
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6e2b6dde7024. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.