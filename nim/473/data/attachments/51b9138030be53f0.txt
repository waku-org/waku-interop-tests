[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_content_topic[/app/22/sometopic/someencoding] with id: 2024-12-01_04-27-51__01c557f3-7b28-45f4-82f4-0594940e9188
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-01_04-27-51__01c557f3-7b28-45f4-82f4-0594940e9188__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.247.181
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['15912', '15913', '15914', '15915', '15916']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 15912:15912 -p 15913:15913 -p 15914:15914 -p 15915:15915 -p 15916:15916 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15914 --rest-port=15912 --tcp-port=15913 --discv5-udp-port=15915 --rest-address=0.0.0.0 --nat=extip:172.18.247.181 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=30fddd7d91c83c13a4b8ae2d4eadffc0f3d1cf30ab8cc2a6b433fef2be37206a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15916 --metrics-logging=true --relay=true --filter=true --content-topic=/app/22/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.247.181 waku d065adc0e414f2f0e36ee0a70d553a61decc67f293b296c657fe09e696a56afc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d065adc0e414. Setting up logs at ./log/docker/node1_2024-12-01_04-27-51__01c557f3-7b28-45f4-82f4-0594940e9188__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 15912
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container baa2dc37ba47. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15912/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15912/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.247.181/tcp/15913/p2p/16Uiu2HAm8YKa1ZT4nURUKZdssmZrSQq1TmvAmDbTcEDnEfUu8sME","/ip4/172.18.247.181/tcp/15914/ws/p2p/16Uiu2HAm8YKa1ZT4nURUKZdssmZrSQq1TmvAmDbTcEDnEfUu8sME"],"enrUri":"enr:-L24QD6jtZOlf4tYiClTKkOrlcJ5hp7d3xtqrp7_QYreSM3dPO5kqa-LfKtML8ntGtmM3zKK38-HzipzGamZnF5Nf6YCgmlkgnY0gmlwhKwS97WKbXVsdGlhZGRyc5YACASsEve1Bj4pAAoErBL3tQY-Kt0DgnJzhQACAQAAiXNlY3AyNTZrMaECwtvrASEo0T3CtOZGPgYlaaEmAsKc0aGbi3dUQSgcQtWDdGNwgj4pg3VkcII-K4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-01_04-27-51__01c557f3-7b28-45f4-82f4-0594940e9188__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.98.144
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['33800', '33801', '33802', '33803', '33804']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 33800:33800 -p 33801:33801 -p 33802:33802 -p 33803:33803 -p 33804:33804 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33802 --rest-port=33800 --tcp-port=33801 --discv5-udp-port=33803 --rest-address=0.0.0.0 --nat=extip:172.18.98.144 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=dbb6e0e12a6cdaa1bcc35aee66ce3bfb53f12689d9a69f6e0b2fd7cd8bcdaa54 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33804 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QD6jtZOlf4tYiClTKkOrlcJ5hp7d3xtqrp7_QYreSM3dPO5kqa-LfKtML8ntGtmM3zKK38-HzipzGamZnF5Nf6YCgmlkgnY0gmlwhKwS97WKbXVsdGlhZGRyc5YACASsEve1Bj4pAAoErBL3tQY-Kt0DgnJzhQACAQAAiXNlY3AyNTZrMaECwtvrASEo0T3CtOZGPgYlaaEmAsKc0aGbi3dUQSgcQtWDdGNwgj4pg3VkcII-K4V3YWt1MgU --content-topic=/app/22/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.98.144 waku 16cfc4fa189a840f4c4dde4b94d3194e781987899a7baa39d9a607c44232321a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 16cfc4fa189a. Setting up logs at ./log/docker/node2_2024-12-01_04-27-51__01c557f3-7b28-45f4-82f4-0594940e9188__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 33800
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33800/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33800/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.98.144/tcp/33801/p2p/16Uiu2HAmHwotYmPWiu1xGGNuTouuVAS1mSuvu2DNYK3tZk75AWno","/ip4/172.18.98.144/tcp/33802/ws/p2p/16Uiu2HAmHwotYmPWiu1xGGNuTouuVAS1mSuvu2DNYK3tZk75AWno"],"enrUri":"enr:-L24QCcL7XK5qj8Oz1nYKzF2W4N40Lbh9XPEzsNxs2qXXYDkB5C7x2fZHTi7D8mNm_8UKE7ea6cVa8znGir_n9f27egCgmlkgnY0gmlwhKwSYpCKbXVsdGlhZGRyc5YACASsEmKQBoQJAAoErBJikAaECt0DgnJzhQACAQAAiXNlY3AyNTZrMaEDTpl64zn2Km0lrWlGwYtqyhZz6jamVr_OVatDaRiDfJyDdGNwgoQJg3VkcIKEC4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33800/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.247.181/tcp/15913/p2p/16Uiu2HAm8YKa1ZT4nURUKZdssmZrSQq1TmvAmDbTcEDnEfUu8sME"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15912/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/22/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33800/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/22/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15912/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15912/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/22/sometopic/someencoding","version":0,"timestamp":1733027275095589632,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33800/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/22/sometopic/someencoding","version":0,"timestamp":1733027275095589632,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d065adc0e414
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 16cfc4fa189a
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d065adc0e414. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.