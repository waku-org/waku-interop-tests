[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_no_request_id with id: 2024-11-26_04-13-38__7267059b-1b23-4a64-92d2-cc5bea675bc8
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-26_04-13-38__7267059b-1b23-4a64-92d2-cc5bea675bc8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.148.243
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['61639', '61640', '61641', '61642', '61643']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 61639:61639 -p 61640:61640 -p 61641:61641 -p 61642:61642 -p 61643:61643 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61641 --rest-port=61639 --tcp-port=61640 --discv5-udp-port=61642 --rest-address=0.0.0.0 --nat=extip:172.18.148.243 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7779abe6e7e72b9d700f6caf01cebf8dbf74da3fea9fe6c7f3ebc9ccedb1d6bb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61643 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.148.243 waku e7e5a5d0d4e2d1d74e1d0571e6b7cb359975735e95e82c9f5a19bf0654b9638a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e7e5a5d0d4e2. Setting up logs at ./log/docker/node1_2024-11-26_04-13-38__7267059b-1b23-4a64-92d2-cc5bea675bc8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 61639
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 88b0e83ca8b1. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61639/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61639/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.148.243/tcp/61640/p2p/16Uiu2HAm21CGyrgjo8L8spHCmtzwvW9jZqiNEy3VsWF5N3rgMLVw","/ip4/172.18.148.243/tcp/61641/ws/p2p/16Uiu2HAm21CGyrgjo8L8spHCmtzwvW9jZqiNEy3VsWF5N3rgMLVw"],"enrUri":"enr:-L24QKdj-mePPWnKY9iBkNnyDxIWaa01V_EtQiUHws9AT7aKYoVukx5pHf_U-YvqEDbr4LHWLu4ZI6RiZnDws-FLZcQCgmlkgnY0gmlwhKwSlPOKbXVsdGlhZGRyc5YACASsEpTzBvDIAAoErBKU8wbwyd0DgnJzhQADAQAAiXNlY3AyNTZrMaECYbyLYCWNs-KcjbltpELsRztlADFX6SESZEHXOgoRiWqDdGNwgvDIg3VkcILwyoV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-26_04-13-38__7267059b-1b23-4a64-92d2-cc5bea675bc8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.123.204
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['65131', '65132', '65133', '65134', '65135']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 65131:65131 -p 65132:65132 -p 65133:65133 -p 65134:65134 -p 65135:65135 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65133 --rest-port=65131 --tcp-port=65132 --discv5-udp-port=65134 --rest-address=0.0.0.0 --nat=extip:172.18.123.204 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a5cf1201bdbbdfbfada1dc43d739bf0ee1cfa9cfbb0eb708dcd58f9f5154e4fe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65135 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QKdj-mePPWnKY9iBkNnyDxIWaa01V_EtQiUHws9AT7aKYoVukx5pHf_U-YvqEDbr4LHWLu4ZI6RiZnDws-FLZcQCgmlkgnY0gmlwhKwSlPOKbXVsdGlhZGRyc5YACASsEpTzBvDIAAoErBKU8wbwyd0DgnJzhQADAQAAiXNlY3AyNTZrMaECYbyLYCWNs-KcjbltpELsRztlADFX6SESZEHXOgoRiWqDdGNwgvDIg3VkcILwyoV3YWt1MgU --filternode=/ip4/172.18.148.243/tcp/61640/p2p/16Uiu2HAm21CGyrgjo8L8spHCmtzwvW9jZqiNEy3VsWF5N3rgMLVw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.123.204 waku 08ec0492317543fb3ef3a5dcb6df4bfa4bdee0bfe0afe898ab08891c116f69d2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 08ec04923175. Setting up logs at ./log/docker/node2_2024-11-26_04-13-38__7267059b-1b23-4a64-92d2-cc5bea675bc8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 65131
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65131/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65131/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.123.204/tcp/65132/p2p/16Uiu2HAmTYUe6uYB7ksngXptqTQi13RBznTZwmF1EhZfCr58B9bw","/ip4/172.18.123.204/tcp/65133/ws/p2p/16Uiu2HAmTYUe6uYB7ksngXptqTQi13RBznTZwmF1EhZfCr58B9bw"],"enrUri":"enr:-L24QBGfOQzqinOZKkM1muU6sRkAOyEQC4bgd8SiV1Kx-SQdWBb1PlF5qdsZO6KYoKMNYrQRzP3fEvGWlYT_FuZn9_0CgmlkgnY0gmlwhKwSe8yKbXVsdGlhZGRyc5YACASsEnvMBv5sAAoErBJ7zAb-bd0DgnJzhQADAQAAiXNlY3AyNTZrMaED3TQ5xzFVKaMx2nJSLArHc7qnoLJVp5VAvsn0gGMu_EqDdGNwgv5sg3VkcIL-boV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65131/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.148.243/tcp/61640/p2p/16Uiu2HAm21CGyrgjo8L8spHCmtzwvW9jZqiNEy3VsWF5N3rgMLVw"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61639/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65131/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "2c6c8ef4-81e3-469c-b24a-61f15d243d81", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"2c6c8ef4-81e3-469c-b24a-61f15d243d81","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65131/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:65131/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id e7e5a5d0d4e2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 08ec04923175
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e7e5a5d0d4e2. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.