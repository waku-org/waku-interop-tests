[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_relay_receiving_node_not_connected_directly_to_relaying_node with id: 2024-12-26_04-02-53__9cbbcf30-ef4a-46af-abd0-390bdd8a0f32
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-26_04-02-53__9cbbcf30-ef4a-46af-abd0-390bdd8a0f32__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-26_04-02-53__9cbbcf30-ef4a-46af-abd0-390bdd8a0f32__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-26_04-02-53__9cbbcf30-ef4a-46af-abd0-390bdd8a0f32__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.15.200
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['4176', '4177', '4178', '4179', '4180']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 4176:4176 -p 4177:4177 -p 4178:4178 -p 4179:4179 -p 4180:4180 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4178 --rest-port=4176 --tcp-port=4177 --discv5-udp-port=4179 --rest-address=0.0.0.0 --nat=extip:172.18.15.200 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8e9cae167d21b6bb5d23cddeef1f3205ba273c4bdfdcb798dc5bc4cd822fa10b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4180 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.15.200 waku 6f33e6bfb447f8d45ebd1012d3b4d2e250ff160de47918a805c6fee2248e1a2c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6f33e6bfb447. Setting up logs at ./log/docker/node1_2024-12-26_04-02-53__9cbbcf30-ef4a-46af-abd0-390bdd8a0f32__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 4176
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ac01e9c8ed1e. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4176/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4176/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.15.200/tcp/4177/p2p/16Uiu2HAm1msHGuuMsjjd2mNDcBrirNPUsEDvPuMzaybQuJP47Vvz","/ip4/172.18.15.200/tcp/4178/ws/p2p/16Uiu2HAm1msHGuuMsjjd2mNDcBrirNPUsEDvPuMzaybQuJP47Vvz"],"enrUri":"enr:-L24QF_kp9r9kJAvRFNiybkQb9nOVggRtDagZ-vws9p2ix42dPAZXX7qG0t9AVQO8QG9Coqu_56rCw5UOumOk28b4AACgmlkgnY0gmlwhKwSD8iKbXVsdGlhZGRyc5YACASsEg_IBhBRAAoErBIPyAYQUt0DgnJzhQADAQAAiXNlY3AyNTZrMaECXlKEKw8tEnhYQCARzAIdhLIwz7yZMwYxt8yWvuhD60uDdGNwghBRg3VkcIIQU4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.253.201
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['28685', '28686', '28687', '28688', '28689']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 28685:28685 -p 28686:28686 -p 28687:28687 -p 28688:28688 -p 28689:28689 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28687 --rest-port=28685 --tcp-port=28686 --discv5-udp-port=28688 --rest-address=0.0.0.0 --nat=extip:172.18.253.201 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ea46fce617d0c4e9a1f7ac69e0a90fc7a4cb514d55b498c1e8656e41b987e533 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28689 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QF_kp9r9kJAvRFNiybkQb9nOVggRtDagZ-vws9p2ix42dPAZXX7qG0t9AVQO8QG9Coqu_56rCw5UOumOk28b4AACgmlkgnY0gmlwhKwSD8iKbXVsdGlhZGRyc5YACASsEg_IBhBRAAoErBIPyAYQUt0DgnJzhQADAQAAiXNlY3AyNTZrMaECXlKEKw8tEnhYQCARzAIdhLIwz7yZMwYxt8yWvuhD60uDdGNwghBRg3VkcIIQU4V3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.253.201 waku 728fd038076a277f999eac9397db99d5374b54663d168c8b16404fcd19831d2d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 728fd038076a. Setting up logs at ./log/docker/node2_2024-12-26_04-02-53__9cbbcf30-ef4a-46af-abd0-390bdd8a0f32__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 28685
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28685/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28685/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.253.201/tcp/28686/p2p/16Uiu2HAmRN1ABa5H23jJfnLHXPbqPRTC2ctSMuQMB83xrZdt5rvv","/ip4/172.18.253.201/tcp/28687/ws/p2p/16Uiu2HAmRN1ABa5H23jJfnLHXPbqPRTC2ctSMuQMB83xrZdt5rvv"],"enrUri":"enr:-L24QLq21va-rdES1YLrwaKE0FlPa70SXBL5mQuDaZS0CeafbLAy6s2BhaMZnH6bnJtceX8pZWxNzFmVfoDV8Xmg_FwCgmlkgnY0gmlwhKwS_cmKbXVsdGlhZGRyc5YACASsEv3JBnAOAAoErBL9yQZwD90DgnJzhQADAQAAiXNlY3AyNTZrMaEDvM34cHI3G1L8w8bPeeodTbzQAUyQrBuK0Gk8Dh1NHuuDdGNwgnAOg3VkcIJwEIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.91.153
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['7689', '7690', '7691', '7692', '7693']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 7689:7689 -p 7690:7690 -p 7691:7691 -p 7692:7692 -p 7693:7693 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7691 --rest-port=7689 --tcp-port=7690 --discv5-udp-port=7692 --rest-address=0.0.0.0 --nat=extip:172.18.91.153 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=afda8fd1daec6bcbaf3add24d9dcabbcdb6f5a1205c589534a1869a4b55fe0b5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7693 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QLq21va-rdES1YLrwaKE0FlPa70SXBL5mQuDaZS0CeafbLAy6s2BhaMZnH6bnJtceX8pZWxNzFmVfoDV8Xmg_FwCgmlkgnY0gmlwhKwS_cmKbXVsdGlhZGRyc5YACASsEv3JBnAOAAoErBL9yQZwD90DgnJzhQADAQAAiXNlY3AyNTZrMaEDvM34cHI3G1L8w8bPeeodTbzQAUyQrBuK0Gk8Dh1NHuuDdGNwgnAOg3VkcIJwEIV3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.91.153 waku 9e7727e860edf5fbb4d8abf01498baac0e8b4590eaa11c61be3327d67571f979
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9e7727e860ed. Setting up logs at ./log/docker/node3_2024-12-26_04-02-53__9cbbcf30-ef4a-46af-abd0-390bdd8a0f32__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 7689
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7689/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7689/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.91.153/tcp/7690/p2p/16Uiu2HAkyjPKdsN6tWtXebgRCiutSTaBU1SSF1AB6wf7fXQKuWxU","/ip4/172.18.91.153/tcp/7691/ws/p2p/16Uiu2HAkyjPKdsN6tWtXebgRCiutSTaBU1SSF1AB6wf7fXQKuWxU"],"enrUri":"enr:-L24QC1aRaVpsiJUttMjvfzwaBfOLVwzip-JaXOpJjb1CBdXWmVCR2cjdNvMuQjIkyO5iBZjVJafScWEwhAfoDjA2qYCgmlkgnY0gmlwhKwSW5mKbXVsdGlhZGRyc5YACASsEluZBh4KAAoErBJbmQYeC90DgnJzhQADAQAAiXNlY3AyNTZrMaECP_hd_SLtEAZSNnumfbwk2kuk21l7uQw2iJHh9vXZosWDdGNwgh4Kg3VkcIIeDIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4176/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28685/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7689/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4176/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.253.201/tcp/28686/p2p/16Uiu2HAmRN1ABa5H23jJfnLHXPbqPRTC2ctSMuQMB83xrZdt5rvv","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28685/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.91.153/tcp/7690/p2p/16Uiu2HAkyjPKdsN6tWtXebgRCiutSTaBU1SSF1AB6wf7fXQKuWxU","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"},{"multiaddr":"/ip4/172.18.15.200/tcp/4177/p2p/16Uiu2HAm1msHGuuMsjjd2mNDcBrirNPUsEDvPuMzaybQuJP47Vvz","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7689/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.253.201/tcp/28686/p2p/16Uiu2HAmRN1ABa5H23jJfnLHXPbqPRTC2ctSMuQMB83xrZdt5rvv","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4176/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7689/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1735185807924581120,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 6f33e6bfb447
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 728fd038076a
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6f33e6bfb447. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 9e7727e860ed
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 728fd038076a. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.