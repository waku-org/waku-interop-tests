[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_relay_receiving_node_not_connected_directly_to_lightpushing_node with id: 2024-12-26_04-03-32__8c8eee1f-0b2f-4da9-813c-b63b90a15bc9
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-26_04-03-32__8c8eee1f-0b2f-4da9-813c-b63b90a15bc9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-26_04-03-32__8c8eee1f-0b2f-4da9-813c-b63b90a15bc9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-26_04-03-32__8c8eee1f-0b2f-4da9-813c-b63b90a15bc9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.50.180
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['45939', '45940', '45941', '45942', '45943']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 45939:45939 -p 45940:45940 -p 45941:45941 -p 45942:45942 -p 45943:45943 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45941 --rest-port=45939 --tcp-port=45940 --discv5-udp-port=45942 --rest-address=0.0.0.0 --nat=extip:172.18.50.180 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b3c16dfd7dd4c9f6b0a4eb8c94b95d606fbb351dfcd4d070bad3c3d368ca60a2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45943 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.50.180 waku b9b4e750d000db8d0e9c30be9022f6bff042ee7e05de64058fc80cf0495a8b74
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b9b4e750d000. Setting up logs at ./log/docker/node1_2024-12-26_04-03-32__8c8eee1f-0b2f-4da9-813c-b63b90a15bc9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 45939
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9e7727e860ed. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45939/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45939/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.50.180/tcp/45940/p2p/16Uiu2HAmSA7Ccva2UtCvGxTHrKKFLAAX9uwjBsCkFPPWNpNDwy9u","/ip4/172.18.50.180/tcp/45941/ws/p2p/16Uiu2HAmSA7Ccva2UtCvGxTHrKKFLAAX9uwjBsCkFPPWNpNDwy9u"],"enrUri":"enr:-L24QHsMdfJYSvStQVqyCxEF3FqdbEAU2G5rWNiHRxgIYFXwMcWK2P73GnNMYVRQ9QNM4P_v5wEq1KccuQ18dKtHahACgmlkgnY0gmlwhKwSMrSKbXVsdGlhZGRyc5YACASsEjK0BrN0AAoErBIytAazdd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDyJ2E-HkXFBioZCDgsxdY9Zul1T7S-cwaIMFTVKAKPHSDdGNwgrN0g3VkcIKzdoV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.75.240
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['45560', '45561', '45562', '45563', '45564']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 45560:45560 -p 45561:45561 -p 45562:45562 -p 45563:45563 -p 45564:45564 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45562 --rest-port=45560 --tcp-port=45561 --discv5-udp-port=45563 --rest-address=0.0.0.0 --nat=extip:172.18.75.240 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d6cb8ca767ca9d46ff174ba358d9f6c93d55a9ec6fac6c6cb635cebae16fbfed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45564 --metrics-logging=true --lightpush=true --relay=true --discv5-bootstrap-node=enr:-L24QHsMdfJYSvStQVqyCxEF3FqdbEAU2G5rWNiHRxgIYFXwMcWK2P73GnNMYVRQ9QNM4P_v5wEq1KccuQ18dKtHahACgmlkgnY0gmlwhKwSMrSKbXVsdGlhZGRyc5YACASsEjK0BrN0AAoErBIytAazdd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDyJ2E-HkXFBioZCDgsxdY9Zul1T7S-cwaIMFTVKAKPHSDdGNwgrN0g3VkcIKzdoV3YWt1Mgk --lightpushnode=/ip4/172.18.50.180/tcp/45940/p2p/16Uiu2HAmSA7Ccva2UtCvGxTHrKKFLAAX9uwjBsCkFPPWNpNDwy9u
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.75.240 waku 5930f70f09a5e4befe09d969b47d9fbb284fcfe62695d49893d3c85c9f8f1508
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5930f70f09a5. Setting up logs at ./log/docker/node2_2024-12-26_04-03-32__8c8eee1f-0b2f-4da9-813c-b63b90a15bc9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 45560
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45560/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45560/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.75.240/tcp/45561/p2p/16Uiu2HAmSy4mPUdbL6xVu8r4oz8zHKazep7GRXJDco4et8Bwf26f","/ip4/172.18.75.240/tcp/45562/ws/p2p/16Uiu2HAmSy4mPUdbL6xVu8r4oz8zHKazep7GRXJDco4et8Bwf26f"],"enrUri":"enr:-L24QNXq2L29o7fmlQ1JWV6kJ695n49kfFI1MO_FlLyXa4E-I2zAzUcgq15ViHgnhXuMsvr0Wc_fEJZNuXDGBbAmzhsCgmlkgnY0gmlwhKwSS_CKbXVsdGlhZGRyc5YACASsEkvwBrH5AAoErBJL8Aax-t0DgnJzhQADAQAAiXNlY3AyNTZrMaED1KUQa7cwkJ4FWE3rnXXXvbbKggG0qbZwzpHGv9NeUDyDdGNwgrH5g3VkcIKx-4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.224.149
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['40569', '40570', '40571', '40572', '40573']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 40569:40569 -p 40570:40570 -p 40571:40571 -p 40572:40572 -p 40573:40573 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40571 --rest-port=40569 --tcp-port=40570 --discv5-udp-port=40572 --rest-address=0.0.0.0 --nat=extip:172.18.224.149 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fbde9cf5cbe57b8254bffffa27a4ca08cc30ef7c5f5b6051ba58dc11af03df78 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40573 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QNXq2L29o7fmlQ1JWV6kJ695n49kfFI1MO_FlLyXa4E-I2zAzUcgq15ViHgnhXuMsvr0Wc_fEJZNuXDGBbAmzhsCgmlkgnY0gmlwhKwSS_CKbXVsdGlhZGRyc5YACASsEkvwBrH5AAoErBJL8Aax-t0DgnJzhQADAQAAiXNlY3AyNTZrMaED1KUQa7cwkJ4FWE3rnXXXvbbKggG0qbZwzpHGv9NeUDyDdGNwgrH5g3VkcIKx-4V3YWt1Mgk
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.224.149 waku 8f60f0dea8bf0e1e4807f9e4e07699fe9db8e6595cd7f3c33818ab8996063931
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8f60f0dea8bf. Setting up logs at ./log/docker/node3_2024-12-26_04-03-32__8c8eee1f-0b2f-4da9-813c-b63b90a15bc9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 40569
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40569/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40569/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.224.149/tcp/40570/p2p/16Uiu2HAmUk4jKSsPeUMsnNdDe2wLhDR3BbH33cWUzUWg7UyxKtbm","/ip4/172.18.224.149/tcp/40571/ws/p2p/16Uiu2HAmUk4jKSsPeUMsnNdDe2wLhDR3BbH33cWUzUWg7UyxKtbm"],"enrUri":"enr:-L24QMfZSpWIw7SjHZsIwGOOWpoGRhgjsS1lpEJDiyiOszhvGPTmU7iuXt-rKKtMGg4l_POdx5o6kT6HVAE20dS5A5UCgmlkgnY0gmlwhKwS4JWKbXVsdGlhZGRyc5YACASsEuCVBp56AAoErBLglQaee90DgnJzhQADAQAAiXNlY3AyNTZrMaED7wfY3cP1Mqt_4eLLVCz1BJLlGGnDTrpMDiwMNBTZSwyDdGNwgp56g3VkcIKefIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45939/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45560/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40569/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45939/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45939/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45939/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.75.240/tcp/45561/p2p/16Uiu2HAmSy4mPUdbL6xVu8r4oz8zHKazep7GRXJDco4et8Bwf26f","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":false},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":false}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45560/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.50.180/tcp/45940/p2p/16Uiu2HAmSA7Ccva2UtCvGxTHrKKFLAAX9uwjBsCkFPPWNpNDwy9u","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":false},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":false}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.224.149/tcp/40570/p2p/16Uiu2HAmUk4jKSsPeUMsnNdDe2wLhDR3BbH33cWUzUWg7UyxKtbm","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40569/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.75.240/tcp/45561/p2p/16Uiu2HAmSy4mPUdbL6xVu8r4oz8zHKazep7GRXJDco4et8Bwf26f","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45939/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1735185848671128832}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40569/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1735185848671128832,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b9b4e750d000
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5930f70f09a5
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b9b4e750d000. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 8f60f0dea8bf
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5930f70f09a5. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.