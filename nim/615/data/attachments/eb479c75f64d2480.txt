[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_duplicate_message with id: 2025-01-13_04-06-42__92697b7a-78ed-4907-b2a5-83fc17bcc26c
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-13_04-06-42__92697b7a-78ed-4907-b2a5-83fc17bcc26c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.63.62
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10497', '10498', '10499', '10500', '10501']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10497:10497 -p 10498:10498 -p 10499:10499 -p 10500:10500 -p 10501:10501 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10499 --rest-port=10497 --tcp-port=10498 --discv5-udp-port=10500 --rest-address=0.0.0.0 --nat=extip:172.18.63.62 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6b1f7fdd8759864bcdcd22aff89901fb3b9823b1a6694fdecfd7ea1a81ee3eb4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10501 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.63.62 waku cecc224eee4813f9debb2c52c780a500c51c97887813d8d67165ffc3b3345e12
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID cecc224eee48. Setting up logs at ./log/docker/node1_2025-01-13_04-06-42__92697b7a-78ed-4907-b2a5-83fc17bcc26c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 10497
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9be2772d9fcc. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10497/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10497/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.63.62/tcp/10498/p2p/16Uiu2HAm6SrXXwbcVj2MF41ZKa26W6UpM8WA7ku69RKqqrnwpmJx","/ip4/172.18.63.62/tcp/10499/ws/p2p/16Uiu2HAm6SrXXwbcVj2MF41ZKa26W6UpM8WA7ku69RKqqrnwpmJx"],"enrUri":"enr:-L24QI6iDcKWuY5tmnfflhfKIPMdRfcylgEtMuXj7FbtEIOScXTm71qLisoIjKnWhCgt1n3u-L8o6-mlenG2W5JTlk4CgmlkgnY0gmlwhKwSPz6KbXVsdGlhZGRyc5YACASsEj8-BikCAAoErBI_PgYpA90DgnJzhQADAQAAiXNlY3AyNTZrMaECo74QFNQeLheCUt56dg60mv-fU8omPIkkGggcHDC6YFmDdGNwgikCg3VkcIIpBIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-13_04-06-42__92697b7a-78ed-4907-b2a5-83fc17bcc26c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.6.178
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['11041', '11042', '11043', '11044', '11045']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 11041:11041 -p 11042:11042 -p 11043:11043 -p 11044:11044 -p 11045:11045 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11043 --rest-port=11041 --tcp-port=11042 --discv5-udp-port=11044 --rest-address=0.0.0.0 --nat=extip:172.18.6.178 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ca48587055aedbaf2aa3ded1b7e0c1ecfce1d23f69fa6bacbe5e1765aecfac8e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11045 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QI6iDcKWuY5tmnfflhfKIPMdRfcylgEtMuXj7FbtEIOScXTm71qLisoIjKnWhCgt1n3u-L8o6-mlenG2W5JTlk4CgmlkgnY0gmlwhKwSPz6KbXVsdGlhZGRyc5YACASsEj8-BikCAAoErBI_PgYpA90DgnJzhQADAQAAiXNlY3AyNTZrMaECo74QFNQeLheCUt56dg60mv-fU8omPIkkGggcHDC6YFmDdGNwgikCg3VkcIIpBIV3YWt1MgU --filternode=/ip4/172.18.63.62/tcp/10498/p2p/16Uiu2HAm6SrXXwbcVj2MF41ZKa26W6UpM8WA7ku69RKqqrnwpmJx
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.6.178 waku f13de1939ebc6b6d1133a3d679bc85caf41f20280f75ddb4e62cd14922ceb232
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f13de1939ebc. Setting up logs at ./log/docker/node2_2025-01-13_04-06-42__92697b7a-78ed-4907-b2a5-83fc17bcc26c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 11041
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11041/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11041/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.6.178/tcp/11042/p2p/16Uiu2HAmQuCKoa5cCuVeTSHpBHVTQdyFNEvPov7Mt8SWCfXAVzu4","/ip4/172.18.6.178/tcp/11043/ws/p2p/16Uiu2HAmQuCKoa5cCuVeTSHpBHVTQdyFNEvPov7Mt8SWCfXAVzu4"],"enrUri":"enr:-L24QGsh1nb5mQ08JwWZNFYq8cREt6asgGnaVjt-zx2BvIt3H1Ne7XIcUDBba8he3O6pNhRs3uKt3f9aSHJ7YKBMMe4CgmlkgnY0gmlwhKwSBrKKbXVsdGlhZGRyc5YACASsEgayBisiAAoErBIGsgYrI90DgnJzhQADAQAAiXNlY3AyNTZrMaEDte_p9lDrTVtaaBv-clrYwwWtY3hGSZG1IXONEPbFj3-DdGNwgisig3VkcIIrJIV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11041/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.63.62/tcp/10498/p2p/16Uiu2HAm6SrXXwbcVj2MF41ZKa26W6UpM8WA7ku69RKqqrnwpmJx"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10497/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11041/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "33258b60-8fde-49ca-a4a8-a66f9597e29a", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"33258b60-8fde-49ca-a4a8-a66f9597e29a","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10497/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11041/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1736741205543623168,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10497/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11041/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id cecc224eee48
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f13de1939ebc
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container cecc224eee48. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.