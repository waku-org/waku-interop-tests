[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_relaying_node with id: 2025-01-03_04-03-44__c65bc04c-d6b7-492e-a7fd-fd1bc1fa6f02
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-03_04-03-44__c65bc04c-d6b7-492e-a7fd-fd1bc1fa6f02__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-03_04-03-44__c65bc04c-d6b7-492e-a7fd-fd1bc1fa6f02__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-03_04-03-44__c65bc04c-d6b7-492e-a7fd-fd1bc1fa6f02__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.73.14
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['34482', '34483', '34484', '34485', '34486']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 34482:34482 -p 34483:34483 -p 34484:34484 -p 34485:34485 -p 34486:34486 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34484 --rest-port=34482 --tcp-port=34483 --discv5-udp-port=34485 --rest-address=0.0.0.0 --nat=extip:172.18.73.14 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f53b88aad2aa5d82a26ddfa1df7f8d5d11acbffcfacabb499b07eb4c28fbe3ef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34486 --metrics-logging=true --filter=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.73.14 waku 4bba54c96b699b508dc0ba6b23b01188247788d1bc54b43e85d52655b856bac6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4bba54c96b69. Setting up logs at ./log/docker/node1_2025-01-03_04-03-44__c65bc04c-d6b7-492e-a7fd-fd1bc1fa6f02__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 34482
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container cc2b200080fe. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34482/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34482/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.73.14/tcp/34483/p2p/16Uiu2HAmJQLbL9k4bDoA3iKUR5KMXZhm7qZTnuXrE36nppAmVgyA","/ip4/172.18.73.14/tcp/34484/ws/p2p/16Uiu2HAmJQLbL9k4bDoA3iKUR5KMXZhm7qZTnuXrE36nppAmVgyA"],"enrUri":"enr:-L24QAOMu3cobrkL-K8a02XPNl38JfTo79mIYpnkiUNC67gBAB73BDAy4TKVYnn0Trwo3A2IMDj3lNAWk-OBQ4vnSpECgmlkgnY0gmlwhKwSSQ6KbXVsdGlhZGRyc5YACASsEkkOBoazAAoErBJJDgaGtN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVWVMFuPbngN9f4DP1V2NUplyHuRG80pzklQ1ij9LrTWDdGNwgoazg3VkcIKGtYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.156.38
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['1497', '1498', '1499', '1500', '1501']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 1497:1497 -p 1498:1498 -p 1499:1499 -p 1500:1500 -p 1501:1501 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1499 --rest-port=1497 --tcp-port=1498 --discv5-udp-port=1500 --rest-address=0.0.0.0 --nat=extip:172.18.156.38 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ff3f870e6aabea25e4dab99b5087762ac4aa07c48edb09d7ec95fb5eff5af5db --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1501 --metrics-logging=true --filter=true --relay=true --discv5-bootstrap-node=enr:-L24QAOMu3cobrkL-K8a02XPNl38JfTo79mIYpnkiUNC67gBAB73BDAy4TKVYnn0Trwo3A2IMDj3lNAWk-OBQ4vnSpECgmlkgnY0gmlwhKwSSQ6KbXVsdGlhZGRyc5YACASsEkkOBoazAAoErBJJDgaGtN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVWVMFuPbngN9f4DP1V2NUplyHuRG80pzklQ1ij9LrTWDdGNwgoazg3VkcIKGtYV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.156.38 waku 3d0a2688470255554d65009284e5387b3f37578577f213f5b7d36f3a6c294452
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3d0a26884702. Setting up logs at ./log/docker/node2_2025-01-03_04-03-44__c65bc04c-d6b7-492e-a7fd-fd1bc1fa6f02__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 1497
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1497/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1497/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.156.38/tcp/1498/p2p/16Uiu2HAmEmefqBaDxuMRSAbWSuMef4GwQmZm8ey4eJkaPxfCCcue","/ip4/172.18.156.38/tcp/1499/ws/p2p/16Uiu2HAmEmefqBaDxuMRSAbWSuMef4GwQmZm8ey4eJkaPxfCCcue"],"enrUri":"enr:-L24QGiJ5E1_05DBQ6DpQ5LkDFPpeN5X_BfKlO88-dE_7L2tdkM-km7ixia7YxBEeXtmwPIum2-edzNIGmqYriplwVoCgmlkgnY0gmlwhKwSnCaKbXVsdGlhZGRyc5YACASsEpwmBgXaAAoErBKcJgYF290DgnJzhQADAQAAiXNlY3AyNTZrMaEDH2wv2XXzErZSDAl0H4C6iNrmDDXe3_Z2KU9cDptLtsGDdGNwggXag3VkcIIF3IV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.255.77
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5729', '5730', '5731', '5732', '5733']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5729:5729 -p 5730:5730 -p 5731:5731 -p 5732:5732 -p 5733:5733 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5731 --rest-port=5729 --tcp-port=5730 --discv5-udp-port=5732 --rest-address=0.0.0.0 --nat=extip:172.18.255.77 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=168bcce2fa1f7ac95fa9ac414f7edc517f2f979bce0656d10621b7c483d01b79 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5733 --metrics-logging=true --relay=false --filternode=/ip4/172.18.156.38/tcp/1498/p2p/16Uiu2HAmEmefqBaDxuMRSAbWSuMef4GwQmZm8ey4eJkaPxfCCcue --discv5-bootstrap-node=enr:-L24QGiJ5E1_05DBQ6DpQ5LkDFPpeN5X_BfKlO88-dE_7L2tdkM-km7ixia7YxBEeXtmwPIum2-edzNIGmqYriplwVoCgmlkgnY0gmlwhKwSnCaKbXVsdGlhZGRyc5YACASsEpwmBgXaAAoErBKcJgYF290DgnJzhQADAQAAiXNlY3AyNTZrMaEDH2wv2XXzErZSDAl0H4C6iNrmDDXe3_Z2KU9cDptLtsGDdGNwggXag3VkcIIF3IV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.255.77 waku 1e5cfae3a6b692b0eb76bcdaf9896f1e2a2e9b475c7e7abb01868a4a615338b4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1e5cfae3a6b6. Setting up logs at ./log/docker/node3_2025-01-03_04-03-44__c65bc04c-d6b7-492e-a7fd-fd1bc1fa6f02__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 5729
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5729/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5729/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.255.77/tcp/5730/p2p/16Uiu2HAkx4AcQgBeuYUTZCgRjLL18XqZMFCxqb2YTD1sKCznGsyV","/ip4/172.18.255.77/tcp/5731/ws/p2p/16Uiu2HAkx4AcQgBeuYUTZCgRjLL18XqZMFCxqb2YTD1sKCznGsyV"],"enrUri":"enr:-L24QMUBp7dCpQWV5Z2JPUHqqrx4M72TYvB3IGDGNCUjfJB6QRNIt7ziELqqbENedYFR6jpiIdHeT_iSGOUGx8z1Gl8CgmlkgnY0gmlwhKwS_02KbXVsdGlhZGRyc5YACASsEv9NBhZiAAoErBL_TQYWY90DgnJzhQADAQAAiXNlY3AyNTZrMaECJxCoEBYPIw51LSLUPjfOLD9KrRF26t6IlzVJ9nevhlyDdGNwghZig3VkcIIWZIV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34482/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1497/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5729/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34482/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.156.38/tcp/1498/p2p/16Uiu2HAmEmefqBaDxuMRSAbWSuMef4GwQmZm8ey4eJkaPxfCCcue","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1497/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.73.14/tcp/34483/p2p/16Uiu2HAmJQLbL9k4bDoA3iKUR5KMXZhm7qZTnuXrE36nppAmVgyA","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.255.77/tcp/5730/p2p/16Uiu2HAkx4AcQgBeuYUTZCgRjLL18XqZMFCxqb2YTD1sKCznGsyV","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5729/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.156.38/tcp/1498/p2p/16Uiu2HAmEmefqBaDxuMRSAbWSuMef4GwQmZm8ey4eJkaPxfCCcue","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34482/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5729/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1735877058894024448,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4bba54c96b69
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 3d0a26884702
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4bba54c96b69. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1e5cfae3a6b6
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3d0a26884702. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.