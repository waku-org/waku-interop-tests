[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_content_topic_also_in_docker_flags[/aaaaa/3/bbbbb/proto] with id: 2025-01-03_04-18-44__997fdb6c-353e-4798-b1a1-2b5d770b05a4
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-03_04-18-44__997fdb6c-353e-4798-b1a1-2b5d770b05a4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.3.199
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['1969', '1970', '1971', '1972', '1973']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 1969:1969 -p 1970:1970 -p 1971:1971 -p 1972:1972 -p 1973:1973 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1971 --rest-port=1969 --tcp-port=1970 --discv5-udp-port=1972 --rest-address=0.0.0.0 --nat=extip:172.18.3.199 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=9a0d08f0bb3edaff27de9a70d9a772f3cdc31eb8bebeb9fbace2dbb8d0b6de7f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1973 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0 --content-topic=/aaaaa/3/bbbbb/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.3.199 waku 16b2688a125516eef76272048b33763926c9f1c2245e4b1c5d8d29250ce59c01
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 16b2688a1255. Setting up logs at ./log/docker/node1_2025-01-03_04-18-44__997fdb6c-353e-4798-b1a1-2b5d770b05a4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 1969
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container dc930190b52c. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1969/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1969/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.3.199/tcp/1970/p2p/16Uiu2HAkxwxMTUyzU4hJVFhpF6gCzwLEcnpCvwvFqHnTCHpXb2S3","/ip4/172.18.3.199/tcp/1971/ws/p2p/16Uiu2HAkxwxMTUyzU4hJVFhpF6gCzwLEcnpCvwvFqHnTCHpXb2S3"],"enrUri":"enr:-L24QEHlWNzz36bfo_cKtvHbPom2i6ZKhJWAGYQEyl7EzN6yQUBbee7pxLXvVbh3rhaX51wBfj7RYQT-6WTgtY_PW0QCgmlkgnY0gmlwhKwSA8eKbXVsdGlhZGRyc5YACASsEgPHBgeyAAoErBIDxwYHs90DgnJzhQACAQAAiXNlY3AyNTZrMaECNFT_pyVvI5f0eKH2cxsjC6L8nW9dkfG25KlzkDGpr-CDdGNwggeyg3VkcIIHtIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-03_04-18-44__997fdb6c-353e-4798-b1a1-2b5d770b05a4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.99.205
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['41062', '41063', '41064', '41065', '41066']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 41062:41062 -p 41063:41063 -p 41064:41064 -p 41065:41065 -p 41066:41066 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41064 --rest-port=41062 --tcp-port=41063 --discv5-udp-port=41065 --rest-address=0.0.0.0 --nat=extip:172.18.99.205 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=8c50ee9acb6f8ee8bfbf2ab61ea28e3eedad53cbd5efe6f84cfda0b51462f97f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41066 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QEHlWNzz36bfo_cKtvHbPom2i6ZKhJWAGYQEyl7EzN6yQUBbee7pxLXvVbh3rhaX51wBfj7RYQT-6WTgtY_PW0QCgmlkgnY0gmlwhKwSA8eKbXVsdGlhZGRyc5YACASsEgPHBgeyAAoErBIDxwYHs90DgnJzhQACAQAAiXNlY3AyNTZrMaECNFT_pyVvI5f0eKH2cxsjC6L8nW9dkfG25KlzkDGpr-CDdGNwggeyg3VkcIIHtIV3YWt1MgU --pubsub-topic=/waku/2/rs/2/0 --content-topic=/aaaaa/3/bbbbb/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.99.205 waku d2d3d7fc25304cf936e27033ed2ec5f3052b1f38cae8fb6cce102694db65c454
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d2d3d7fc2530. Setting up logs at ./log/docker/node2_2025-01-03_04-18-44__997fdb6c-353e-4798-b1a1-2b5d770b05a4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 41062
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41062/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41062/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.99.205/tcp/41063/p2p/16Uiu2HAm7DKSs2mzvDwRyxXXVRiswK9r6DXy5eNzSgb29r8akwbn","/ip4/172.18.99.205/tcp/41064/ws/p2p/16Uiu2HAm7DKSs2mzvDwRyxXXVRiswK9r6DXy5eNzSgb29r8akwbn"],"enrUri":"enr:-L24QDOlX4SijhuMhsEgNqubkGEiKesXsflAtBhhHN9nhOUyNgVgkXf71DCZa_SA1AcZYIcCRfenThfv6kc0i0sTVtkCgmlkgnY0gmlwhKwSY82KbXVsdGlhZGRyc5YACASsEmPNBqBnAAoErBJjzQagaN0DgnJzhQACAQAAiXNlY3AyNTZrMaECryIObV1TfOcUiZnUxxyPd984UYGtFOY4hZ-1lHnT5-GDdGNwgqBng3VkcIKgaYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41062/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.3.199/tcp/1970/p2p/16Uiu2HAkxwxMTUyzU4hJVFhpF6gCzwLEcnpCvwvFqHnTCHpXb2S3"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1969/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41062/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1969/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1969/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735877927468395776,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41062/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735877927468395776,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 16b2688a1255
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d2d3d7fc2530
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 16b2688a1255. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.