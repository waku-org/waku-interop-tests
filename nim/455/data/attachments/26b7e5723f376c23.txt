[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-11-19_04-15-35__0772f72c-169c-45bb-8984-8d05a4bfdbee
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-19_04-15-35__0772f72c-169c-45bb-8984-8d05a4bfdbee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.204.33
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['57189', '57190', '57191', '57192', '57193']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 57189:57189 -p 57190:57190 -p 57191:57191 -p 57192:57192 -p 57193:57193 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57191 --rest-port=57189 --tcp-port=57190 --discv5-udp-port=57192 --rest-address=0.0.0.0 --nat=extip:172.18.204.33 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fce6d6a1f1ce8ccddef7de3ee6da99ccf0b0dd4e0cad3eb80a7ebbbfe22dfec3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57193 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.204.33 waku 21c30704828ce61ee1bd6310f9055df71cc8491c9c15d0fe3089f5c91edaa144
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1c86182640ce. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 21c30704828c. Setting up logs at ./log/docker/receiving_node1_2024-11-19_04-15-35__0772f72c-169c-45bb-8984-8d05a4bfdbee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 57189
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57189/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57189/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.204.33/tcp/57190/p2p/16Uiu2HAm2rxPcbMNLtaX8Y7TgRNp1eAPXbSn7M64d2G9bx6aTcws","/ip4/172.18.204.33/tcp/57191/ws/p2p/16Uiu2HAm2rxPcbMNLtaX8Y7TgRNp1eAPXbSn7M64d2G9bx6aTcws"],"enrUri":"enr:-L24QDxlIKIl9p3azzpCVuyhicP3j8i3NoLRknTDVk-YinrhO5c-i0IDvW5YrtesNNtSfTaDfZmEZIOx3Q4111zcrFECgmlkgnY0gmlwhKwSzCGKbXVsdGlhZGRyc5YACASsEswhBt9mAAoErBLMIQbfZ90DgnJzhQADAQAAiXNlY3AyNTZrMaECbnviZSdxn9Lw_2Wjonl_yqXGrhtaUnegvfVe6OHsOlqDdGNwgt9mg3VkcILfaIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-19_04-15-35__0772f72c-169c-45bb-8984-8d05a4bfdbee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.41.85
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['38005', '38006', '38007', '38008', '38009']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 38005:38005 -p 38006:38006 -p 38007:38007 -p 38008:38008 -p 38009:38009 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38007 --rest-port=38005 --tcp-port=38006 --discv5-udp-port=38008 --rest-address=0.0.0.0 --nat=extip:172.18.41.85 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c4a56689dba56a740e6235b10b220ff0ded4dd2667cb5cd7eadd54b4bc0bbd4d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38009 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.41.85 waku ea9d76bf929b6c44847ac53b92fd11a425b35e8f3c703d3a641dc8a16a0745c2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ea9d76bf929b. Setting up logs at ./log/docker/receiving_node2_2024-11-19_04-15-35__0772f72c-169c-45bb-8984-8d05a4bfdbee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 38005
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38005/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38005/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.41.85/tcp/38006/p2p/16Uiu2HAmLKMpZE2Uiw7LVnHZZC2VSArDcbDXwRES2uHnCbTSRKbQ","/ip4/172.18.41.85/tcp/38007/ws/p2p/16Uiu2HAmLKMpZE2Uiw7LVnHZZC2VSArDcbDXwRES2uHnCbTSRKbQ"],"enrUri":"enr:-L24QFOlLOIPWlLgApPOzVMLDIoWlNL02cxbkdVPnf4Bu4YWJdB3WcVdVWawi2j5txNBOuoRwrT-6ZVrNEEQs1yK_70CgmlkgnY0gmlwhKwSKVWKbXVsdGlhZGRyc5YACASsEilVBpR2AAoErBIpVQaUd90DgnJzhQADAQAAiXNlY3AyNTZrMaEDcdYn0vxp0G0yAOZ3Bw7DQYt2gpO-7RW2oOVXFGnQPeODdGNwgpR2g3VkcIKUeIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38005/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.204.33/tcp/57190/p2p/16Uiu2HAm2rxPcbMNLtaX8Y7TgRNp1eAPXbSn7M64d2G9bx6aTcws"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-19_04-15-35__0772f72c-169c-45bb-8984-8d05a4bfdbee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.158.111
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['15242', '15243', '15244', '15245', '15246']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 15242:15242 -p 15243:15243 -p 15244:15244 -p 15245:15245 -p 15246:15246 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15244 --rest-port=15242 --tcp-port=15243 --discv5-udp-port=15245 --rest-address=0.0.0.0 --nat=extip:172.18.158.111 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=be6ea0fab5acf5dc4c9a8deeefbcdbbf3bf5ad6d1a257faddfa7c25a3f5e4ca6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15246 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QDxlIKIl9p3azzpCVuyhicP3j8i3NoLRknTDVk-YinrhO5c-i0IDvW5YrtesNNtSfTaDfZmEZIOx3Q4111zcrFECgmlkgnY0gmlwhKwSzCGKbXVsdGlhZGRyc5YACASsEswhBt9mAAoErBLMIQbfZ90DgnJzhQADAQAAiXNlY3AyNTZrMaECbnviZSdxn9Lw_2Wjonl_yqXGrhtaUnegvfVe6OHsOlqDdGNwgt9mg3VkcILfaIV3YWt1Mgk --lightpushnode=/ip4/172.18.204.33/tcp/57190/p2p/16Uiu2HAm2rxPcbMNLtaX8Y7TgRNp1eAPXbSn7M64d2G9bx6aTcws --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.158.111 waku c17cf9eae3f2e21c179837462552a676720a61e577ac47040ed3ad113596caff
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c17cf9eae3f2. Setting up logs at ./log/docker/lightpush_node1_2024-11-19_04-15-35__0772f72c-169c-45bb-8984-8d05a4bfdbee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 15242
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15242/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15242/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.158.111/tcp/15243/p2p/16Uiu2HAmBf5NZEjS2GKGvrqRFeEXo7gaeuz63fFm4bxVys6TDerU","/ip4/172.18.158.111/tcp/15244/ws/p2p/16Uiu2HAmBf5NZEjS2GKGvrqRFeEXo7gaeuz63fFm4bxVys6TDerU"],"enrUri":"enr:-L24QPNB4HZ6NkkO83A3GQACHjCcGyZ_XOohZhVGGOPDuy_zX9fGnNa1SZIjLGmPYc6z4aEGtxShD8EeH2MtLnwMLMcCgmlkgnY0gmlwhKwSnm-KbXVsdGlhZGRyc5YACASsEp5vBjuLAAoErBKebwY7jN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC8Sn9xPf5Ou8-V_yJ556eCC5REu_sU7pbO8yOBBi8IYmDdGNwgjuLg3VkcII7jYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15242/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.204.33/tcp/57190/p2p/16Uiu2HAm2rxPcbMNLtaX8Y7TgRNp1eAPXbSn7M64d2G9bx6aTcws"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15242/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.41.85/tcp/38006/p2p/16Uiu2HAmLKMpZE2Uiw7LVnHZZC2VSArDcbDXwRES2uHnCbTSRKbQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57189/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38005/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15242/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1731989740759220480, "version": 2.1}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:15242/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 21c30704828c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id ea9d76bf929b
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 21c30704828c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id c17cf9eae3f2
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ea9d76bf929b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.