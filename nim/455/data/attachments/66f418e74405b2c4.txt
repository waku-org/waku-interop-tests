[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_meta with id: 2024-11-19_04-15-37__174dc481-3baf-44b5-9798-e4e2e1ad787a
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-19_04-15-37__174dc481-3baf-44b5-9798-e4e2e1ad787a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.184.239
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['17850', '17851', '17852', '17853', '17854']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 17850:17850 -p 17851:17851 -p 17852:17852 -p 17853:17853 -p 17854:17854 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17852 --rest-port=17850 --tcp-port=17851 --discv5-udp-port=17853 --rest-address=0.0.0.0 --nat=extip:172.18.184.239 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d86ebe9af8e6ac37f538c4f5d3cf6f25539a972aec1aa7aafbfcfedce1b76b3c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17854 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.184.239 waku ae24794de0dcb43b15446fb44cca046cf4004fe7c22858f35e8713127e0e5fa7
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f78548f0b9c0. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ae24794de0dc. Setting up logs at ./log/docker/receiving_node1_2024-11-19_04-15-37__174dc481-3baf-44b5-9798-e4e2e1ad787a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 17850
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17850/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17850/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.184.239/tcp/17851/p2p/16Uiu2HAmVRXn2hLokivtKfsTiX8eBTkzmoVE7RGDFK3wMdvvCafJ","/ip4/172.18.184.239/tcp/17852/ws/p2p/16Uiu2HAmVRXn2hLokivtKfsTiX8eBTkzmoVE7RGDFK3wMdvvCafJ"],"enrUri":"enr:-L24QGFpSsngBgu6taQkYR4lYxHKtsyR9PMRZ1GXABaerdYOLwAY6FHgjcy0-R9Hg9EskbDsHt8eIfcnymJ_B55xplYCgmlkgnY0gmlwhKwSuO-KbXVsdGlhZGRyc5YACASsErjvBkW7AAoErBK47wZFvN0DgnJzhQADAQAAiXNlY3AyNTZrMaED-SQUnj8TGf_yWZZRzmfPQ2QsRhuP-aELGp5cujhu3XmDdGNwgkW7g3VkcIJFvYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-19_04-15-37__174dc481-3baf-44b5-9798-e4e2e1ad787a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.71.95
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10975', '10976', '10977', '10978', '10979']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10975:10975 -p 10976:10976 -p 10977:10977 -p 10978:10978 -p 10979:10979 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10977 --rest-port=10975 --tcp-port=10976 --discv5-udp-port=10978 --rest-address=0.0.0.0 --nat=extip:172.18.71.95 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=172d5dc81eed1bb3cab10ffa6fe16ef1ddc4460fb80dc3cabbca08cb0b0de59d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10979 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.71.95 waku b0d66c9ac28496db050950dd1b86a41b6e76c1fca087072a17b37ead5c4fdd3d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b0d66c9ac284. Setting up logs at ./log/docker/receiving_node2_2024-11-19_04-15-37__174dc481-3baf-44b5-9798-e4e2e1ad787a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 10975
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10975/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10975/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.71.95/tcp/10976/p2p/16Uiu2HAmVNgeC2Pm2S9h6PH1UEciDZQaW8MrQLMNWEiLfanp74yV","/ip4/172.18.71.95/tcp/10977/ws/p2p/16Uiu2HAmVNgeC2Pm2S9h6PH1UEciDZQaW8MrQLMNWEiLfanp74yV"],"enrUri":"enr:-L24QCiepQK-H3LBlkA0H5w1ocY2ips-UPYwpbYOa0n_6q3OL-x-9pGGGP6OGqECCs2GWcjaVJ7ThDNzuVnO6bxvLe8CgmlkgnY0gmlwhKwSR1-KbXVsdGlhZGRyc5YACASsEkdfBirgAAoErBJHXwYq4d0DgnJzhQADAQAAiXNlY3AyNTZrMaED-GlckzVQ_nFlDt3_SajkNn0mCaJvfVWLtCmm1kbo6niDdGNwgirgg3VkcIIq4oV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10975/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.184.239/tcp/17851/p2p/16Uiu2HAmVRXn2hLokivtKfsTiX8eBTkzmoVE7RGDFK3wMdvvCafJ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-19_04-15-37__174dc481-3baf-44b5-9798-e4e2e1ad787a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.29.156
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['65150', '65151', '65152', '65153', '65154']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 65150:65150 -p 65151:65151 -p 65152:65152 -p 65153:65153 -p 65154:65154 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65152 --rest-port=65150 --tcp-port=65151 --discv5-udp-port=65153 --rest-address=0.0.0.0 --nat=extip:172.18.29.156 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d4430eaf9cbd4b667f5e521a58611a7a2dddaecb71d98d6d3a96fba9cdcfeb6b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65154 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QGFpSsngBgu6taQkYR4lYxHKtsyR9PMRZ1GXABaerdYOLwAY6FHgjcy0-R9Hg9EskbDsHt8eIfcnymJ_B55xplYCgmlkgnY0gmlwhKwSuO-KbXVsdGlhZGRyc5YACASsErjvBkW7AAoErBK47wZFvN0DgnJzhQADAQAAiXNlY3AyNTZrMaED-SQUnj8TGf_yWZZRzmfPQ2QsRhuP-aELGp5cujhu3XmDdGNwgkW7g3VkcIJFvYV3YWt1Mgk --lightpushnode=/ip4/172.18.184.239/tcp/17851/p2p/16Uiu2HAmVRXn2hLokivtKfsTiX8eBTkzmoVE7RGDFK3wMdvvCafJ --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.29.156 waku 3b6201ea07cf48b533ef4ceb67630d872be3323c7e6c5fcc42827a2a5fca4fe5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3b6201ea07cf. Setting up logs at ./log/docker/lightpush_node1_2024-11-19_04-15-37__174dc481-3baf-44b5-9798-e4e2e1ad787a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 65150
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65150/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65150/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.29.156/tcp/65151/p2p/16Uiu2HAmK8e4gRwmnTugvWjZ8NYm9wFDnQjMeUNmvXezWHXg3Ehz","/ip4/172.18.29.156/tcp/65152/ws/p2p/16Uiu2HAmK8e4gRwmnTugvWjZ8NYm9wFDnQjMeUNmvXezWHXg3Ehz"],"enrUri":"enr:-L24QMSGWjmKwDLuAW0N_9Sr1X3WXbiUtdn_hGiqL7j1clHWZJ_8kphhceKxrwqF0zOuUqOgMElLgYw1WyruZSWSLAECgmlkgnY0gmlwhKwSHZyKbXVsdGlhZGRyc5YACASsEh2cBv5_AAoErBIdnAb-gN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDYDtyQ6pyF-7TBUH4ESu5Pzb56n_6wFJSAsoH5ZL5Hh2DdGNwgv5_g3VkcIL-gYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65150/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.184.239/tcp/17851/p2p/16Uiu2HAmVRXn2hLokivtKfsTiX8eBTkzmoVE7RGDFK3wMdvvCafJ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65150/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.71.95/tcp/10976/p2p/16Uiu2HAmVNgeC2Pm2S9h6PH1UEciDZQaW8MrQLMNWEiLfanp74yV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17850/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10975/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65150/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1731989742638484480, "meta": "Light push works!!"}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:65150/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id ae24794de0dc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id b0d66c9ac284
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ae24794de0dc. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 3b6201ea07cf
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b0d66c9ac284. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.