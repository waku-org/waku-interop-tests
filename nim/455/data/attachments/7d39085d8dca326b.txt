[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_no_content_topic with id: 2024-11-19_04-11-38__954229bf-8020-4da6-ab6a-e3e0f852faee
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-19_04-11-38__954229bf-8020-4da6-ab6a-e3e0f852faee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.117.60
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['15100', '15101', '15102', '15103', '15104']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 15100:15100 -p 15101:15101 -p 15102:15102 -p 15103:15103 -p 15104:15104 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15102 --rest-port=15100 --tcp-port=15101 --discv5-udp-port=15103 --rest-address=0.0.0.0 --nat=extip:172.18.117.60 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=433c6dfd791b50ae999fc87aefdd6a0a1bcbcff83bdd5d6befe66a39df0d20a0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15104 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.117.60 waku d58d0171d0d57c23e834560dd4ccc15556fde098fbf34e8b8b7d7c42ce5a8bcf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d58d0171d0d5. Setting up logs at ./log/docker/node1_2024-11-19_04-11-38__954229bf-8020-4da6-ab6a-e3e0f852faee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 15100
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7bd0ddcaf0e7. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15100/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15100/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.117.60/tcp/15101/p2p/16Uiu2HAmUBTPSaSb1SUH6KACM2p42fSw99x5yqif85MNZGph9bjf","/ip4/172.18.117.60/tcp/15102/ws/p2p/16Uiu2HAmUBTPSaSb1SUH6KACM2p42fSw99x5yqif85MNZGph9bjf"],"enrUri":"enr:-L24QC64WTuwSoC-MT21GEVuBY8xB6FTYMl0HzYLMOaF9lMvU6fTTi85wt5uKFyxyCjf5ZpRz0jFJLFUM8IhITYO2FsCgmlkgnY0gmlwhKwSdTyKbXVsdGlhZGRyc5YACASsEnU8Bjr9AAoErBJ1PAY6_t0DgnJzhQADAQAAiXNlY3AyNTZrMaED5q1MkuGDATQa_dLACVTsVm2cDt6XjKw4YD7nDH4fb1KDdGNwgjr9g3VkcII6_4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-19_04-11-38__954229bf-8020-4da6-ab6a-e3e0f852faee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.204.76
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['4214', '4215', '4216', '4217', '4218']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 4214:4214 -p 4215:4215 -p 4216:4216 -p 4217:4217 -p 4218:4218 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4216 --rest-port=4214 --tcp-port=4215 --discv5-udp-port=4217 --rest-address=0.0.0.0 --nat=extip:172.18.204.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=df6a44c384f577b1d0d8aaf2bbd60da65bb3ac9adaadc3e87c4bd5f518d0776c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4218 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QC64WTuwSoC-MT21GEVuBY8xB6FTYMl0HzYLMOaF9lMvU6fTTi85wt5uKFyxyCjf5ZpRz0jFJLFUM8IhITYO2FsCgmlkgnY0gmlwhKwSdTyKbXVsdGlhZGRyc5YACASsEnU8Bjr9AAoErBJ1PAY6_t0DgnJzhQADAQAAiXNlY3AyNTZrMaED5q1MkuGDATQa_dLACVTsVm2cDt6XjKw4YD7nDH4fb1KDdGNwgjr9g3VkcII6_4V3YWt1MgU --filternode=/ip4/172.18.117.60/tcp/15101/p2p/16Uiu2HAmUBTPSaSb1SUH6KACM2p42fSw99x5yqif85MNZGph9bjf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.204.76 waku d6ba69f54ecd09456fb84114cac9edd22a3ddbbf98055a0707b8ec5c34d7a5cb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d6ba69f54ecd. Setting up logs at ./log/docker/node2_2024-11-19_04-11-38__954229bf-8020-4da6-ab6a-e3e0f852faee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 4214
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4214/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4214/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.204.76/tcp/4215/p2p/16Uiu2HAmJZKZ3xPyh9RY695e9vYKRF1in7a8oZb7CGN2tCjh7iPx","/ip4/172.18.204.76/tcp/4216/ws/p2p/16Uiu2HAmJZKZ3xPyh9RY695e9vYKRF1in7a8oZb7CGN2tCjh7iPx"],"enrUri":"enr:-L24QHri73u2Z5rZ1F9vIoSC-z9z08P6AL0QLhhLh6D2F2TLPIzgh6BC6-NwkTuK7KcDkg-gf49n2vf_WgDDT6dAdh0CgmlkgnY0gmlwhKwSzEyKbXVsdGlhZGRyc5YACASsEsxMBhB3AAoErBLMTAYQeN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDV7JZcD2yoypssXm2Mxph4uJ4c7Pc5fHkKA06FenzBueDdGNwghB3g3VkcIIQeYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4214/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.117.60/tcp/15101/p2p/16Uiu2HAmUBTPSaSb1SUH6KACM2p42fSw99x5yqif85MNZGph9bjf"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15100/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4214/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "60afb5f4-6d01-4860-9a5d-0cb9326ac6cd", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"60afb5f4-6d01-4860-9a5d-0cb9326ac6cd","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4214/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:4214/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id d58d0171d0d5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id d6ba69f54ecd
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d58d0171d0d5. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.