[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_legacy_store_v1 with id: 2024-09-07_04-32-50__9bd813d2-7198-466a-9565-6be7f1a19a52
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:36 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-09-07_04-32-50__9bd813d2-7198-466a-9565-6be7f1a19a52__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.57.184
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['39382', '39383', '39384', '39385', '39386']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 39382:39382 -p 39383:39383 -p 39384:39384 -p 39385:39385 -p 39386:39386 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39384 --rest-port=39382 --tcp-port=39383 --discv5-udp-port=39385 --rest-address=0.0.0.0 --nat=extip:172.18.57.184 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5e871a8c3a87ff22dd9069c7ecebd1acbeb87cbf3dfae6bb034693e0eca74fba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39386 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.57.184 waku b7b38113062bf8d82094617963b402f7912b956277a7bae0b6a0d98af8f9bab0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b7b38113062b. Setting up logs at ./log/docker/publishing_node1_2024-09-07_04-32-50__9bd813d2-7198-466a-9565-6be7f1a19a52__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 39382
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39382/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39382/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.57.184/tcp/39383/p2p/16Uiu2HAm8udU95fjRb6b2wDcULVGFGxD3SrfgAC72nemBR3e8ouu","/ip4/172.18.57.184/tcp/39384/ws/p2p/16Uiu2HAm8udU95fjRb6b2wDcULVGFGxD3SrfgAC72nemBR3e8ouu"],"enrUri":"enr:-LO4QHq9lANaw07Q3CzzOqev2BNgujU_k9OFNM-7qbyuy7l7NfttN6NKbQqAZj2KZsx13LUu_9raj6_0M72h4A-JfMsBgmlkgnY0gmlwhKwSObiKbXVsdGlhZGRyc4wACgSsEjm4BpnY3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLIUVprUbE534WEN1SOI913w3TVmkY0k6frIs-VCAM3HIN0Y3CCmdeDdWRwgpnZhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-09-07_04-32-50__9bd813d2-7198-466a-9565-6be7f1a19a52__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.66.205
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['16217', '16218', '16219', '16220', '16221']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 16217:16217 -p 16218:16218 -p 16219:16219 -p 16220:16220 -p 16221:16221 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16219 --rest-port=16217 --tcp-port=16218 --discv5-udp-port=16220 --rest-address=0.0.0.0 --nat=extip:172.18.66.205 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b50acac10acb9b227e1aaeac0ce12fbc795c898fc8bf8bea071d4e4f2d36b76d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16221 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QHq9lANaw07Q3CzzOqev2BNgujU_k9OFNM-7qbyuy7l7NfttN6NKbQqAZj2KZsx13LUu_9raj6_0M72h4A-JfMsBgmlkgnY0gmlwhKwSObiKbXVsdGlhZGRyc4wACgSsEjm4BpnY3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLIUVprUbE534WEN1SOI913w3TVmkY0k6frIs-VCAM3HIN0Y3CCmdeDdWRwgpnZhXdha3UyAw --storenode=/ip4/172.18.57.184/tcp/39383/p2p/16Uiu2HAm8udU95fjRb6b2wDcULVGFGxD3SrfgAC72nemBR3e8ouu --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.66.205 waku ee6905bcbc63b8911467583a95c3ff7d6a752acaded994e7ea4da1dba6749648
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ee6905bcbc63. Setting up logs at ./log/docker/store_node1_2024-09-07_04-32-50__9bd813d2-7198-466a-9565-6be7f1a19a52__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 16217
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16217/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16217/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.66.205/tcp/16218/p2p/16Uiu2HAmSdJ563YsDwC7hyMdUsg6Wtvi392ShotX3myBNUnFEyCH","/ip4/172.18.66.205/tcp/16219/ws/p2p/16Uiu2HAmSdJ563YsDwC7hyMdUsg6Wtvi392ShotX3myBNUnFEyCH"],"enrUri":"enr:-LO4QHUCO2lgw8p_EmW-zf0ID5j-Q_Kx5wbZXo0KhNKnc1b7G3xsBrKlJcOCf98ckxsGKqO9fmgfOrfh3gCNPFvn6xEBgmlkgnY0gmlwhKwSQs2KbXVsdGlhZGRyc4wACgSsEkLNBj9b3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPPlH3-Cp1DHAQO-4SZ5KAsfc3_-y2sEEazyWj3KwQ5toN0Y3CCP1qDdWRwgj9chXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16217/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.57.184/tcp/39383/p2p/16Uiu2HAm8udU95fjRb6b2wDcULVGFGxD3SrfgAC72nemBR3e8ouu"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39382/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16217/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:129 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39382/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39382/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725683582772661760,"ephemeral":false}]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16217/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725683582772661760,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b7b38113062b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ee6905bcbc63
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.