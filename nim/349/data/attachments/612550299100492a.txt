[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_payload with id: 2024-09-07_04-20-26__012a5036-6e2e-4261-9774-9f5dd520633c
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-07_04-20-26__012a5036-6e2e-4261-9774-9f5dd520633c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.244.216
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['42537', '42538', '42539', '42540', '42541']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 42537:42537 -p 42538:42538 -p 42539:42539 -p 42540:42540 -p 42541:42541 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42539 --rest-port=42537 --tcp-port=42538 --discv5-udp-port=42540 --rest-address=0.0.0.0 --nat=extip:172.18.244.216 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fc47c22e00cda039adc7da4aff48e2fe351bf27ea3eebef525cbde1c128b8913 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42541 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.244.216 waku a83c2a1fc1d09cd283295c66d51404ee6c8015bda7c12254b8ca3976984655a3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a83c2a1fc1d0. Setting up logs at ./log/docker/receiving_node1_2024-09-07_04-20-26__012a5036-6e2e-4261-9774-9f5dd520633c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 42537
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42537/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42537/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.244.216/tcp/42538/p2p/16Uiu2HAm7Seo7x2bNb7z8wkLRiK2bJMPp3c2Zrt7RQLmmUqQXWfo","/ip4/172.18.244.216/tcp/42539/ws/p2p/16Uiu2HAm7Seo7x2bNb7z8wkLRiK2bJMPp3c2Zrt7RQLmmUqQXWfo"],"enrUri":"enr:-LO4QOSAJtmjjHogI0pGjygwQU55mboadwSMJMaCZ58FZGYQb7kyIVRituqO9dRfLmm3p0qz4nIjm7haLnA-ay3uoqMBgmlkgnY0gmlwhKwS9NiKbXVsdGlhZGRyc4wACgSsEvTYBqYr3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKyjHwzGstUjLC19XzE1SElYq1MLH8xr6JZ1GphL9J9voN0Y3CCpiqDdWRwgqYshXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-07_04-20-26__012a5036-6e2e-4261-9774-9f5dd520633c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.230.116
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['16876', '16877', '16878', '16879', '16880']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 16876:16876 -p 16877:16877 -p 16878:16878 -p 16879:16879 -p 16880:16880 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16878 --rest-port=16876 --tcp-port=16877 --discv5-udp-port=16879 --rest-address=0.0.0.0 --nat=extip:172.18.230.116 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5ff97ed8b5cc0f5fd64044725fa5cb07aa86ebd2ba41abf341e3adb475aee8d8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16880 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.230.116 waku 4562d6135eb097a4085d44ba5ee5ba994ff576d4ab1f0f35cb3c0745e10e26d7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4562d6135eb0. Setting up logs at ./log/docker/receiving_node2_2024-09-07_04-20-26__012a5036-6e2e-4261-9774-9f5dd520633c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 16876
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16876/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16876/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.230.116/tcp/16877/p2p/16Uiu2HAmFEAmgcmUFmothNKBvWvYWJXjBaG2FoDhrEkmmLwXY4qv","/ip4/172.18.230.116/tcp/16878/ws/p2p/16Uiu2HAmFEAmgcmUFmothNKBvWvYWJXjBaG2FoDhrEkmmLwXY4qv"],"enrUri":"enr:-LO4QBE4Ihhsc_Xw0sQCzym1H10YhJnzx-mvKSsbdK_IMC56Rig9P5XjOJmfFxCHnzhQTFZMT8-2BWT2sr4bGSyHSx4BgmlkgnY0gmlwhKwS5nSKbXVsdGlhZGRyc4wACgSsEuZ0BkHu3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMmN1K5t1HwXaUdXzp15tbTNm-UBJSTNWSTq-SxM8nfuYN0Y3CCQe2DdWRwgkHvhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16876/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.244.216/tcp/42538/p2p/16Uiu2HAm7Seo7x2bNb7z8wkLRiK2bJMPp3c2Zrt7RQLmmUqQXWfo"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-07_04-20-26__012a5036-6e2e-4261-9774-9f5dd520633c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.219.105
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['63866', '63867', '63868', '63869', '63870']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 63866:63866 -p 63867:63867 -p 63868:63868 -p 63869:63869 -p 63870:63870 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63868 --rest-port=63866 --tcp-port=63867 --discv5-udp-port=63869 --rest-address=0.0.0.0 --nat=extip:172.18.219.105 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e0ddae321ecdb1adbe1f64be70232aa8a6fa7ef0c2cd3a3c7cdd3ceafcbe69cb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63870 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QOSAJtmjjHogI0pGjygwQU55mboadwSMJMaCZ58FZGYQb7kyIVRituqO9dRfLmm3p0qz4nIjm7haLnA-ay3uoqMBgmlkgnY0gmlwhKwS9NiKbXVsdGlhZGRyc4wACgSsEvTYBqYr3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKyjHwzGstUjLC19XzE1SElYq1MLH8xr6JZ1GphL9J9voN0Y3CCpiqDdWRwgqYshXdha3UyCQ --lightpushnode=/ip4/172.18.244.216/tcp/42538/p2p/16Uiu2HAm7Seo7x2bNb7z8wkLRiK2bJMPp3c2Zrt7RQLmmUqQXWfo --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.219.105 waku 28b068113248dfa389315ff9125132e5ab289f840e65a5eb7ad11068827aa3bb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 28b068113248. Setting up logs at ./log/docker/lightpush_node1_2024-09-07_04-20-26__012a5036-6e2e-4261-9774-9f5dd520633c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 63866
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63866/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63866/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.219.105/tcp/63867/p2p/16Uiu2HAmFGdmDv2PLXppBkoY7mbLn578pBmzwcmH5ndphUc56QEU","/ip4/172.18.219.105/tcp/63868/ws/p2p/16Uiu2HAmFGdmDv2PLXppBkoY7mbLn578pBmzwcmH5ndphUc56QEU"],"enrUri":"enr:-LO4QJkmShwRoClvgKQW7Tut_9oDjN0k-EZ8i59ThiQMiphbOPdWL0vV4js8Eq2i8AtBbwMA7ehCaATqCjYi7MUFJMUBgmlkgnY0gmlwhKwS22mKbXVsdGlhZGRyc4wACgSsEttpBvl83QOCcnOFAAMBAACJc2VjcDI1NmsxoQMm2QE5sYJ9_9NT12XQseWd4nmCmtExTfL8PIJJG8g08YN0Y3CC-XuDdWRwgvl9hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63866/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.244.216/tcp/42538/p2p/16Uiu2HAm7Seo7x2bNb7z8wkLRiK2bJMPp3c2Zrt7RQLmmUqQXWfo"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63866/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.230.116/tcp/16877/p2p/16Uiu2HAmFEAmgcmUFmothNKBvWvYWJXjBaG2FoDhrEkmmLwXY4qv"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42537/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16876/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63866/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1725682831649140480}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63866/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a83c2a1fc1d0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4562d6135eb0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 28b068113248
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.