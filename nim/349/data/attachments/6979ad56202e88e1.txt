[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2024-09-07_04-36-55__d5321240-4407-4b8b-a6a4-c63cf2ee4628
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-09-07_04-36-55__d5321240-4407-4b8b-a6a4-c63cf2ee4628__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.203.77
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['36065', '36066', '36067', '36068', '36069']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 36065:36065 -p 36066:36066 -p 36067:36067 -p 36068:36068 -p 36069:36069 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36067 --rest-port=36065 --tcp-port=36066 --discv5-udp-port=36068 --rest-address=0.0.0.0 --nat=extip:172.18.203.77 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cef24deceae5f0a5ae549a56f4cbc93cdfcef4fbfce4303fec33e8ce5a11ecd2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36069 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.203.77 waku 915ebaabfaecf4b8a19d8792f7ca5806ccbdfeb3b570e59bdf7e77f1861719d0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 915ebaabfaec. Setting up logs at ./log/docker/publishing_node1_2024-09-07_04-36-55__d5321240-4407-4b8b-a6a4-c63cf2ee4628__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 36065
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36065/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36065/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.203.77/tcp/36066/p2p/16Uiu2HAmDBbaa61afBtcMXCBRFaDLiQvabUVYUqmpiB8dtNht3UV","/ip4/172.18.203.77/tcp/36067/ws/p2p/16Uiu2HAmDBbaa61afBtcMXCBRFaDLiQvabUVYUqmpiB8dtNht3UV"],"enrUri":"enr:-LO4QOPMyhrRGM-gd4vtXtSbpj89Z9Ydm4cqVUhvdbGPJd3sXUDILodXiULvOEa1sk7BNIMmR1GeiBgITGavkT2ee8kBgmlkgnY0gmlwhKwSy02KbXVsdGlhZGRyc4wACgSsEstNBozj3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMH10IAWBvqLWd80hg0lJR7kaqKdXcEPEMSeaBZannG2oN0Y3CCjOKDdWRwgozkhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node2_2024-09-07_04-36-55__d5321240-4407-4b8b-a6a4-c63cf2ee4628__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.56.34
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['4438', '4439', '4440', '4441', '4442']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 4438:4438 -p 4439:4439 -p 4440:4440 -p 4441:4441 -p 4442:4442 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4440 --rest-port=4438 --tcp-port=4439 --discv5-udp-port=4441 --rest-address=0.0.0.0 --nat=extip:172.18.56.34 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fe3cc2dfd26fff2abae445e1cefe2cfc566a04d8880cf07effe8dc6bdfc30e49 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4442 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.56.34 waku 42fffc9ee7bf64f7c8bad65d409154f4cb0c1592083fc159f6ba3af85d2e8eac
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 42fffc9ee7bf. Setting up logs at ./log/docker/publishing_node2_2024-09-07_04-36-55__d5321240-4407-4b8b-a6a4-c63cf2ee4628__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 4438
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4438/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4438/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.56.34/tcp/4439/p2p/16Uiu2HAmEpx9MEwhq2NTq4qv2rQVedkNc7ZSwbJpmwVgf9pdgHnR","/ip4/172.18.56.34/tcp/4440/ws/p2p/16Uiu2HAmEpx9MEwhq2NTq4qv2rQVedkNc7ZSwbJpmwVgf9pdgHnR"],"enrUri":"enr:-LO4QHHs-XzMEnaXwpK1kTj4FfminVvRVxzU5l5gROfpsiIDfTlTmcS0r0mr_QVErZFhQJ_OD7OcD3Wrh22qg70r-vABgmlkgnY0gmlwhKwSOCKKbXVsdGlhZGRyc4wACgSsEjgiBhFY3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMgRLARZ2I07NwgFezqrF6kcGfm3UXNVrmVFPT-LwYPQoN0Y3CCEVeDdWRwghFZhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4438/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.203.77/tcp/36066/p2p/16Uiu2HAmDBbaa61afBtcMXCBRFaDLiQvabUVYUqmpiB8dtNht3UV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-09-07_04-36-55__d5321240-4407-4b8b-a6a4-c63cf2ee4628__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.140.91
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['19908', '19909', '19910', '19911', '19912']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 19908:19908 -p 19909:19909 -p 19910:19910 -p 19911:19911 -p 19912:19912 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19910 --rest-port=19908 --tcp-port=19909 --discv5-udp-port=19911 --rest-address=0.0.0.0 --nat=extip:172.18.140.91 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=462abe3044208bdea91cd61c8a5e9cdc78fa2adbd29f4c9ffbd54c7eed5a4b6a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19912 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QOPMyhrRGM-gd4vtXtSbpj89Z9Ydm4cqVUhvdbGPJd3sXUDILodXiULvOEa1sk7BNIMmR1GeiBgITGavkT2ee8kBgmlkgnY0gmlwhKwSy02KbXVsdGlhZGRyc4wACgSsEstNBozj3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMH10IAWBvqLWd80hg0lJR7kaqKdXcEPEMSeaBZannG2oN0Y3CCjOKDdWRwgozkhXdha3UyCw --storenode=/ip4/172.18.203.77/tcp/36066/p2p/16Uiu2HAmDBbaa61afBtcMXCBRFaDLiQvabUVYUqmpiB8dtNht3UV --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.203.77/tcp/36066/p2p/16Uiu2HAmDBbaa61afBtcMXCBRFaDLiQvabUVYUqmpiB8dtNht3UV
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.140.91 waku a6be6b7f813b97408ba5dcb907b773afb76c08eb789d5bd240be00b5cf83b5fe
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a6be6b7f813b. Setting up logs at ./log/docker/store_node1_2024-09-07_04-36-55__d5321240-4407-4b8b-a6a4-c63cf2ee4628__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 19908
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19908/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19908/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.140.91/tcp/19909/p2p/16Uiu2HAkycPT2cT2YcTJhjdNsY6iWhZKwyKRQNeG5s787fKivj5W","/ip4/172.18.140.91/tcp/19910/ws/p2p/16Uiu2HAkycPT2cT2YcTJhjdNsY6iWhZKwyKRQNeG5s787fKivj5W"],"enrUri":"enr:-LO4QFsD82to35dwULVmVeyPPVfj_YxvDbF5c8m7JW_E8pgjcooB1O8pfmOlg8mp4-r90lFsfSfWb1mtx9LJ5CrqMZwBgmlkgnY0gmlwhKwSjFuKbXVsdGlhZGRyc4wACgSsEoxbBk3G3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI-LXISG6HklKxhVb9kAkDbv2RtrgtoDjHkXVjMrfnXhYN0Y3CCTcWDdWRwgk3HhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19908/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.203.77/tcp/36066/p2p/16Uiu2HAmDBbaa61afBtcMXCBRFaDLiQvabUVYUqmpiB8dtNht3UV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19908/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.56.34/tcp/4439/p2p/16Uiu2HAmEpx9MEwhq2NTq4qv2rQVedkNc7ZSwbJpmwVgf9pdgHnR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36065/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4438/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19908/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725683820045859328}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:217 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36065/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"ClvPalkpxAbUeghku6shtXppbMGMYx9fdCqteoWHMQA="}]}'
[35mDEBUG   [0m src.steps.store:store.py:217 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19908/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"2e354c9bce1323da2703","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"ClvPalkpxAbUeghku6shtXppbMGMYx9fdCqteoWHMQA="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 915ebaabfaec
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 42fffc9ee7bf
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a6be6b7f813b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.