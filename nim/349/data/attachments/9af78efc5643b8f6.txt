[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_with_extra_field with id: 2024-09-07_04-15-47__7327ca30-deb8-45e6-a8ca-ce9f609076e6
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-07_04-15-47__7327ca30-deb8-45e6-a8ca-ce9f609076e6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.85.136
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['10000', '10001', '10002', '10003', '10004']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 10000:10000 -p 10001:10001 -p 10002:10002 -p 10003:10003 -p 10004:10004 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10002 --rest-port=10000 --tcp-port=10001 --discv5-udp-port=10003 --rest-address=0.0.0.0 --nat=extip:172.18.85.136 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7b7305cbaa0fca1170bf1cdbcfbf3daeb7c6ebe01f7fb8dd9c796179538dca44 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10004 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.85.136 waku e9fab6d670c56a7b7347c62aa02d724c25893d905b5fa3eb4719966067db8340
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e9fab6d670c5. Setting up logs at ./log/docker/node1_2024-09-07_04-15-47__7327ca30-deb8-45e6-a8ca-ce9f609076e6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 10000
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10000/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10000/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.85.136/tcp/10001/p2p/16Uiu2HAkwmFS8K31EaBD5Wj3ZBzD3RzphZPse57AGBZY6FW5MrRK","/ip4/172.18.85.136/tcp/10002/ws/p2p/16Uiu2HAkwmFS8K31EaBD5Wj3ZBzD3RzphZPse57AGBZY6FW5MrRK"],"enrUri":"enr:-LO4QGHvqhkqszKsSgd-ZstbXW7rEnOhigq10w9WqsvWVh44LYUnDfa-48GILLi3HRHlEFyU98iJKrQgrmvNIRM0ZgsBgmlkgnY0gmlwhKwSVYiKbXVsdGlhZGRyc4wACgSsElWIBicS3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIiuzxeCKwN7Qcpb4kGmDacC8g8klFzJdToGAFuPmSW5oN0Y3CCJxGDdWRwgicThXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-07_04-15-47__7327ca30-deb8-45e6-a8ca-ce9f609076e6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.203.243
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['19149', '19150', '19151', '19152', '19153']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 19149:19149 -p 19150:19150 -p 19151:19151 -p 19152:19152 -p 19153:19153 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19151 --rest-port=19149 --tcp-port=19150 --discv5-udp-port=19152 --rest-address=0.0.0.0 --nat=extip:172.18.203.243 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7e11ca9b5afef4cb18cd96ef564eae4c569cd02ec3d306af002dc6a51e14ddb5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19153 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QGHvqhkqszKsSgd-ZstbXW7rEnOhigq10w9WqsvWVh44LYUnDfa-48GILLi3HRHlEFyU98iJKrQgrmvNIRM0ZgsBgmlkgnY0gmlwhKwSVYiKbXVsdGlhZGRyc4wACgSsElWIBicS3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIiuzxeCKwN7Qcpb4kGmDacC8g8klFzJdToGAFuPmSW5oN0Y3CCJxGDdWRwgicThXdha3UyBQ --filternode=/ip4/172.18.85.136/tcp/10001/p2p/16Uiu2HAkwmFS8K31EaBD5Wj3ZBzD3RzphZPse57AGBZY6FW5MrRK
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.203.243 waku 3557419636c73120de93baaedf76745b7afaad74779fa41de1a1a79794e5b7a0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3557419636c7. Setting up logs at ./log/docker/node2_2024-09-07_04-15-47__7327ca30-deb8-45e6-a8ca-ce9f609076e6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 19149
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19149/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19149/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.203.243/tcp/19150/p2p/16Uiu2HAm4cAvKKmf3DjJAbTn7mF8xG2oseARTp96AYzZjvYopow8","/ip4/172.18.203.243/tcp/19151/ws/p2p/16Uiu2HAm4cAvKKmf3DjJAbTn7mF8xG2oseARTp96AYzZjvYopow8"],"enrUri":"enr:-LO4QDBjmYKyXGmXhBvvj5oGdsAG2ccADHO2c1lny8MJX6XpcOGYkZ9DYxQA6XgwgddWjyYK1FCPAmZViZrwdOr482MBgmlkgnY0gmlwhKwSy_OKbXVsdGlhZGRyc4wACgSsEsvzBkrP3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKIabaKpbx96hQtwe1YBbM7FVZMlcJVN-wM4DW0cFxvk4N0Y3CCSs6DdWRwgkrQhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19149/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.85.136/tcp/10001/p2p/16Uiu2HAkwmFS8K31EaBD5Wj3ZBzD3RzphZPse57AGBZY6FW5MrRK"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10000/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19149/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "8030a776-459e-4249-bfa6-996f73bbdb32", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"8030a776-459e-4249-bfa6-996f73bbdb32","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10000/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "extraField": "extraValue"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10000/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e9fab6d670c5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3557419636c7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.