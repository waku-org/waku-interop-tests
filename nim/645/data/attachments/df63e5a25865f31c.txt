2025-02-09 04:08:12.706 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:08:12.706 DEBUG [tests.conftest] Running test: test_cant_retrieve_messages_on_not_subscribed_content_topic with id: 2025-02-09_04-08-12__d4b21724-298a-4a92-a02e-f9852031d641
2025-02-09 04:08:12.707 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:08:12.707 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-09 04:08:12.707 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-09 04:08:12.714 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:08:12.715 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-09_04-08-12__d4b21724-298a-4a92-a02e-f9852031d641__wakuorg_nwaku:latest.log
2025-02-09 04:08:12.715 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:08:12.715 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:08:12.716 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:08:12.716 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.16.84
2025-02-09 04:08:12.717 DEBUG [src.node.docker_mananger] Generated ports ['56442', '56443', '56444', '56445', '56446']
2025-02-09 04:08:12.717 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:08:12.717 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:08:12.717 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:08:12.717 DEBUG [src.node.docker_mananger] docker run -i -t -p 56442:56442 -p 56443:56443 -p 56444:56444 -p 56445:56445 -p 56446:56446 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56444 --rest-port=56442 --tcp-port=56443 --discv5-udp-port=56445 --rest-address=0.0.0.0 --nat=extip:172.18.16.84 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=9572d11bc7edd5deabe40edcc4aaeedaac4ad49ac16ebcaff98013a4146d92ef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56446 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2025-02-09 04:08:12.946 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.16.84 waku 5baa2d1be47af1a2c21dc18e93acc6e0502977350500149a82d293aadb5fd13b
2025-02-09 04:08:13.002 DEBUG [src.node.docker_mananger] Container started with ID 5baa2d1be47a. Setting up logs at ./log/docker/node1_2025-02-09_04-08-12__d4b21724-298a-4a92-a02e-f9852031d641__wakuorg_nwaku:latest.log
2025-02-09 04:08:13.002 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56442
2025-02-09 04:08:13.003 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:08:13.514 ERROR [src.node.docker_mananger] Max retries reached for container 92b3efb469a1. Exiting log stream.
2025-02-09 04:08:14.003 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56442/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:08:14.006 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:08:14.007 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:08:14.007 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56442/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:08:14.009 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.16.84/tcp/56443/p2p/16Uiu2HAkyMzjuuYFSHmynG4kjfSgDAAH2CDfBFtSKHsrQfPkqVyu","/ip4/172.18.16.84/tcp/56444/ws/p2p/16Uiu2HAkyMzjuuYFSHmynG4kjfSgDAAH2CDfBFtSKHsrQfPkqVyu"],"enrUri":"enr:-L24QOVkuC8dHQxXE1lW682dAfjwKqaotRVJzg1aepaH64YmPITuPLD2ln6R-GW4MZagM9DzCy52It7R8AfWGNt37XQCgmlkgnY0gmlwhKwSEFSKbXVsdGlhZGRyc5YACASsEhBUBtx7AAoErBIQVAbcfN0DgnJzhQACAQAAiXNlY3AyNTZrMaECOn2jIgqSXowvqHnS6jx4sOZ8hd5v0SgOr0laiFRKtcSDdGNwgtx7g3VkcILcfYV3YWt1MgU"}'
2025-02-09 04:08:14.009 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:08:14.016 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:08:14.016 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-09_04-08-12__d4b21724-298a-4a92-a02e-f9852031d641__wakuorg_nwaku:latest.log
2025-02-09 04:08:14.016 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:08:14.016 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:08:14.018 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:08:14.018 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.45.166
2025-02-09 04:08:14.018 DEBUG [src.node.docker_mananger] Generated ports ['50912', '50913', '50914', '50915', '50916']
2025-02-09 04:08:14.018 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:08:14.018 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:08:14.018 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:08:14.018 DEBUG [src.node.docker_mananger] docker run -i -t -p 50912:50912 -p 50913:50913 -p 50914:50914 -p 50915:50915 -p 50916:50916 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50914 --rest-port=50912 --tcp-port=50913 --discv5-udp-port=50915 --rest-address=0.0.0.0 --nat=extip:172.18.45.166 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=2670c2bfb46fcddbe77eb9e01f64e28dc97bcee9712bf6ef5aef17c3618a2b6e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50916 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QOVkuC8dHQxXE1lW682dAfjwKqaotRVJzg1aepaH64YmPITuPLD2ln6R-GW4MZagM9DzCy52It7R8AfWGNt37XQCgmlkgnY0gmlwhKwSEFSKbXVsdGlhZGRyc5YACASsEhBUBtx7AAoErBIQVAbcfN0DgnJzhQACAQAAiXNlY3AyNTZrMaECOn2jIgqSXowvqHnS6jx4sOZ8hd5v0SgOr0laiFRKtcSDdGNwgtx7g3VkcILcfYV3YWt1MgU --content-topic=/myapp/1/latest/proto
2025-02-09 04:08:14.250 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.45.166 waku c697042da0d0982e034bb062a24008808b8a2cdafa7041dc17f1de5c2b728dc1
2025-02-09 04:08:14.298 DEBUG [src.node.docker_mananger] Container started with ID c697042da0d0. Setting up logs at ./log/docker/node2_2025-02-09_04-08-12__d4b21724-298a-4a92-a02e-f9852031d641__wakuorg_nwaku:latest.log
2025-02-09 04:08:14.299 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 50912
2025-02-09 04:08:14.299 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:08:15.300 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50912/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:08:15.305 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:08:15.305 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:08:15.307 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50912/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:08:15.316 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.166/tcp/50913/p2p/16Uiu2HAmCjJWrMGaYC6dExDFyLB5GsMdknTUqzJQPp1o2ZR5GmaF","/ip4/172.18.45.166/tcp/50914/ws/p2p/16Uiu2HAmCjJWrMGaYC6dExDFyLB5GsMdknTUqzJQPp1o2ZR5GmaF"],"enrUri":"enr:-L24QDUEGNUoXFChAYdAf6JFaUIm1SeitVvwkgO7UysL_JEGDec01JCX_AahbieJtBBd3vkheQJ6dZOrQwqT6NuIB2ACgmlkgnY0gmlwhKwSLaaKbXVsdGlhZGRyc5YACASsEi2mBsbhAAoErBItpgbG4t0DgnJzhQACAQAAiXNlY3AyNTZrMaEDARrcwCue8zRE3GowfWFxVL7xN5oD4R5vvmJK-5oe6dCDdGNwgsbhg3VkcILG44V3YWt1MgE"}'
2025-02-09 04:08:15.317 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:08:15.317 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50912/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.16.84/tcp/56443/p2p/16Uiu2HAkyMzjuuYFSHmynG4kjfSgDAAH2CDfBFtSKHsrQfPkqVyu"]'
2025-02-09 04:08:15.321 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:08:15.321 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56442/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2025-02-09 04:08:15.323 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:08:15.324 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50912/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2025-02-09 04:08:15.326 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:08:15.327 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56442/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:08:15.329 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:08:15.330 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-09 04:08:15.430 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-09 04:08:15.430 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56442/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:08:15.433 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:56442/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto. Response content: b'/toychat/2/huilong/proto'
2025-02-09 04:08:15.436 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:08:15.437 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:08:15.437 DEBUG [src.node.waku_node] Stopping container with id 5baa2d1be47a
2025-02-09 04:08:16.465 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:08:16.465 DEBUG [src.node.waku_node] Stopping container with id c697042da0d0
2025-02-09 04:08:17.278 ERROR [src.node.docker_mananger] Max retries reached for container 5baa2d1be47a. Exiting log stream.
2025-02-09 04:08:17.686 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:08:17.688 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:08:17.693 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:08:17.696 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
