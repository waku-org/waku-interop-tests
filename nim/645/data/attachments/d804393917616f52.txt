2025-02-09 04:07:47.315 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:07:47.315 DEBUG [tests.conftest] Running test: test_main_node_only_lightpush__peer_only_relay with id: 2025-02-09_04-07-47__f30c6568-cf3a-434f-9b42-896a4809c9b7
2025-02-09 04:07:47.315 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:07:47.316 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-09 04:07:47.322 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:07:47.323 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-09_04-07-47__f30c6568-cf3a-434f-9b42-896a4809c9b7__wakuorg_nwaku:latest.log
2025-02-09 04:07:47.323 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:07:47.323 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:07:47.324 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:07:47.324 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.123.142
2025-02-09 04:07:47.325 DEBUG [src.node.docker_mananger] Generated ports ['52605', '52606', '52607', '52608', '52609']
2025-02-09 04:07:47.325 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:07:47.325 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:07:47.325 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:07:47.325 DEBUG [src.node.docker_mananger] docker run -i -t -p 52605:52605 -p 52606:52606 -p 52607:52607 -p 52608:52608 -p 52609:52609 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52607 --rest-port=52605 --tcp-port=52606 --discv5-udp-port=52608 --rest-address=0.0.0.0 --nat=extip:172.18.123.142 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fc82d5e4860d094b5e276acd1edf68caa241fe8fdf817db9f94659619eeaad97 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52609 --metrics-logging=true --lightpush=false --relay=true
2025-02-09 04:07:47.557 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.123.142 waku f2bb0a8b5fe3dffc06e97ae62e58ab37abb1e88d10a2f0c992e0fcec2f7981f8
2025-02-09 04:07:47.611 DEBUG [src.node.docker_mananger] Container started with ID f2bb0a8b5fe3. Setting up logs at ./log/docker/receiving_node1_2025-02-09_04-07-47__f30c6568-cf3a-434f-9b42-896a4809c9b7__wakuorg_nwaku:latest.log
2025-02-09 04:07:47.612 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 52605
2025-02-09 04:07:47.613 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:07:48.119 ERROR [src.node.docker_mananger] Max retries reached for container bcf11b474bed. Exiting log stream.
2025-02-09 04:07:48.615 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52605/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:48.618 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:07:48.618 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:07:48.618 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52605/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:48.620 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.123.142/tcp/52606/p2p/16Uiu2HAm1gUWVsLfcxwPSVZ8Kmk2wsXY1oHfP9rxtQxvbS69jg1k","/ip4/172.18.123.142/tcp/52607/ws/p2p/16Uiu2HAm1gUWVsLfcxwPSVZ8Kmk2wsXY1oHfP9rxtQxvbS69jg1k"],"enrUri":"enr:-L24QJroLiTWLxSK4stnH5sSV5FpWgMTYzbbtjHaMJecCKUwX7guH4Aw5V11g1bnYD2EYOhhEFxSERamRC3Wcb8l0JECgmlkgnY0gmlwhKwSe46KbXVsdGlhZGRyc5YACASsEnuOBs1-AAoErBJ7jgbNf90DgnJzhQADAQAAiXNlY3AyNTZrMaECXPDdJL_b1ZrZoIBKEPVF5gUIgi9EapvCvUFG_SB2MBeDdGNwgs1-g3VkcILNgIV3YWt1MgE"}'
2025-02-09 04:07:48.620 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:07:48.621 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52605/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:07:48.636 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:48.642 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:07:48.642 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-09_04-07-47__f30c6568-cf3a-434f-9b42-896a4809c9b7__wakuorg_nwaku:latest.log
2025-02-09 04:07:48.643 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:07:48.643 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:07:48.644 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:07:48.644 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.190.87
2025-02-09 04:07:48.644 DEBUG [src.node.docker_mananger] Generated ports ['19040', '19041', '19042', '19043', '19044']
2025-02-09 04:07:48.645 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:07:48.645 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:07:48.645 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:07:48.645 DEBUG [src.node.docker_mananger] docker run -i -t -p 19040:19040 -p 19041:19041 -p 19042:19042 -p 19043:19043 -p 19044:19044 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19042 --rest-port=19040 --tcp-port=19041 --discv5-udp-port=19043 --rest-address=0.0.0.0 --nat=extip:172.18.190.87 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d8bd6f1a31fc599bb2ccf3b6c5ae01e3ae4b2aecae1b6f49d34daf4bbcd6dd3f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19044 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJroLiTWLxSK4stnH5sSV5FpWgMTYzbbtjHaMJecCKUwX7guH4Aw5V11g1bnYD2EYOhhEFxSERamRC3Wcb8l0JECgmlkgnY0gmlwhKwSe46KbXVsdGlhZGRyc5YACASsEnuOBs1-AAoErBJ7jgbNf90DgnJzhQADAQAAiXNlY3AyNTZrMaECXPDdJL_b1ZrZoIBKEPVF5gUIgi9EapvCvUFG_SB2MBeDdGNwgs1-g3VkcILNgIV3YWt1MgE --lightpushnode=/ip4/172.18.123.142/tcp/52606/p2p/16Uiu2HAm1gUWVsLfcxwPSVZ8Kmk2wsXY1oHfP9rxtQxvbS69jg1k --lightpush=true --relay=false
2025-02-09 04:07:48.874 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.190.87 waku a93cd2e25d911312e583f9430750f1b38f41ff9383bedfb0c1db978326458701
2025-02-09 04:07:48.922 DEBUG [src.node.docker_mananger] Container started with ID a93cd2e25d91. Setting up logs at ./log/docker/lightpush_node1_2025-02-09_04-07-47__f30c6568-cf3a-434f-9b42-896a4809c9b7__wakuorg_nwaku:latest.log
2025-02-09 04:07:48.923 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 19040
2025-02-09 04:07:48.923 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:07:49.923 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19040/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:49.926 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:07:49.927 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:07:49.927 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19040/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:49.929 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.190.87/tcp/19041/p2p/16Uiu2HAmMyAvxMLPxcNM9qdAJLjtFKgsUzveVeHFEmhT2HzEc1FU","/ip4/172.18.190.87/tcp/19042/ws/p2p/16Uiu2HAmMyAvxMLPxcNM9qdAJLjtFKgsUzveVeHFEmhT2HzEc1FU"],"enrUri":"enr:-L24QDwAwpP50pGLid3D9k7q2OKPgnafemD7jSrsheAw-6C5WpwPi5m1jakoeRyLWWMfavXjj6CA7kmBS-83f6RuY-wCgmlkgnY0gmlwhKwSvleKbXVsdGlhZGRyc5YACASsEr5XBkphAAoErBK-VwZKYt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDimGZqSPNnT0nRRuKBbuVMJq0Fw05TdbAQSvk-6zswa-DdGNwgkphg3VkcIJKY4V3YWt1Mgg"}'
2025-02-09 04:07:49.929 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:07:49.930 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19040/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.123.142/tcp/52606/p2p/16Uiu2HAm1gUWVsLfcxwPSVZ8Kmk2wsXY1oHfP9rxtQxvbS69jg1k"]'
2025-02-09 04:07:49.966 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:49.970 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19040/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739074069970283008}}'
2025-02-09 04:07:49.982 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:19040/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2025-02-09 04:07:49.986 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:07:49.991 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:07:49.991 DEBUG [src.node.waku_node] Stopping container with id f2bb0a8b5fe3
2025-02-09 04:07:51.116 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:07:51.117 DEBUG [src.node.waku_node] Stopping container with id a93cd2e25d91
2025-02-09 04:07:51.929 ERROR [src.node.docker_mananger] Max retries reached for container f2bb0a8b5fe3. Exiting log stream.
2025-02-09 04:07:52.640 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:07:52.641 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:07:52.645 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:07:52.650 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
