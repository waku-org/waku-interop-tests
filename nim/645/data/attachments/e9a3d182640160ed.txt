2025-02-09 04:02:21.525 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:02:21.525 DEBUG [tests.conftest] Running test: test_lightpush with id: 2025-02-09_04-02-21__ba658ec2-8817-47e6-b26f-064123558efc
2025-02-09 04:02:21.526 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:02:21.526 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-09 04:02:21.526 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-09 04:02:21.526 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-09 04:02:21.528 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-09 04:02:21.537 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:02:21.537 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-09_04-02-21__ba658ec2-8817-47e6-b26f-064123558efc__wakuorg_nwaku:latest.log
2025-02-09 04:02:21.538 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:02:21.538 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:02:21.540 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:02:21.540 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.75.24
2025-02-09 04:02:21.541 DEBUG [src.node.docker_mananger] Generated ports ['37759', '37760', '37761', '37762', '37763']
2025-02-09 04:02:21.541 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:02:21.541 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:02:21.541 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:02:21.541 DEBUG [src.node.docker_mananger] docker run -i -t -p 37759:37759 -p 37760:37760 -p 37761:37761 -p 37762:37762 -p 37763:37763 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37761 --rest-port=37759 --tcp-port=37760 --discv5-udp-port=37762 --rest-address=0.0.0.0 --nat=extip:172.18.75.24 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=88b1cfe928bd800a6568a0e2052d79baeffa546ae5f10cf35b3d7ffc8da35e2f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37763 --metrics-logging=true --lightpush=true --relay=true
2025-02-09 04:02:21.774 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.75.24 waku ead14335f4adcda35ad5edbb9d2905976ca463bb8defc8480d58e39a0ed0d076
2025-02-09 04:02:21.822 DEBUG [src.node.docker_mananger] Container started with ID ead14335f4ad. Setting up logs at ./log/docker/node1_2025-02-09_04-02-21__ba658ec2-8817-47e6-b26f-064123558efc__wakuorg_nwaku:latest.log
2025-02-09 04:02:21.822 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37759
2025-02-09 04:02:21.822 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:02:22.349 ERROR [src.node.docker_mananger] Max retries reached for container 1c2d1cbeace6. Exiting log stream.
2025-02-09 04:02:22.823 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37759/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:02:22.826 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:02:22.826 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:02:22.826 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37759/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:02:22.828 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.75.24/tcp/37760/p2p/16Uiu2HAmSnZYiqUXB9jJikkW6qqpnF93f53z7mcYHc9xQH92jqwR","/ip4/172.18.75.24/tcp/37761/ws/p2p/16Uiu2HAmSnZYiqUXB9jJikkW6qqpnF93f53z7mcYHc9xQH92jqwR"],"enrUri":"enr:-L24QGfn5K837E72punHrriz-nVnzyMptcac_0gCzEgRb4skGx1_nQWDrej7OnZd0HuL9In-Tk9SoGEJgYJV8Sx22SYCgmlkgnY0gmlwhKwSSxiKbXVsdGlhZGRyc5YACASsEksYBpOAAAoErBJLGAaTgd0DgnJzhQADAQAAiXNlY3AyNTZrMaED0fQ3_ibxi2k-8lg3EU9qrKJT7Az0PF29cPHOsmVYwDSDdGNwgpOAg3VkcIKTgoV3YWt1Mgk"}'
2025-02-09 04:02:22.828 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:02:22.834 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:02:22.834 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-09_04-02-21__ba658ec2-8817-47e6-b26f-064123558efc__wakuorg_nwaku:latest.log
2025-02-09 04:02:22.834 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:02:22.835 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:02:22.836 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:02:22.836 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.239.104
2025-02-09 04:02:22.836 DEBUG [src.node.docker_mananger] Generated ports ['19341', '19342', '19343', '19344', '19345']
2025-02-09 04:02:22.836 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:02:22.836 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:02:22.836 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:02:22.837 DEBUG [src.node.docker_mananger] docker run -i -t -p 19341:19341 -p 19342:19342 -p 19343:19343 -p 19344:19344 -p 19345:19345 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19343 --rest-port=19341 --tcp-port=19342 --discv5-udp-port=19344 --rest-address=0.0.0.0 --nat=extip:172.18.239.104 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7bdadecb4bbdf0c8f08cfe4ea417044d508d1b0449e3c58bcbc0deadeb13e741 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19345 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QGfn5K837E72punHrriz-nVnzyMptcac_0gCzEgRb4skGx1_nQWDrej7OnZd0HuL9In-Tk9SoGEJgYJV8Sx22SYCgmlkgnY0gmlwhKwSSxiKbXVsdGlhZGRyc5YACASsEksYBpOAAAoErBJLGAaTgd0DgnJzhQADAQAAiXNlY3AyNTZrMaED0fQ3_ibxi2k-8lg3EU9qrKJT7Az0PF29cPHOsmVYwDSDdGNwgpOAg3VkcIKTgoV3YWt1Mgk
2025-02-09 04:02:23.058 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.239.104 waku e58d6baa83f3f25fc1c5468b6b94619f00972499d2303b39f5421210817893e5
2025-02-09 04:02:23.113 DEBUG [src.node.docker_mananger] Container started with ID e58d6baa83f3. Setting up logs at ./log/docker/node1_2025-02-09_04-02-21__ba658ec2-8817-47e6-b26f-064123558efc__wakuorg_nwaku:latest.log
2025-02-09 04:02:23.114 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 19341
2025-02-09 04:02:23.115 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:02:24.116 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19341/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:02:24.121 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:02:24.121 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:02:24.121 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19341/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:02:24.124 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.239.104/tcp/19342/p2p/16Uiu2HAm3H8KSTTL966n4CovmG7oWRGAWrmqPaE4snCw1tx5ntS8","/ip4/172.18.239.104/tcp/19343/ws/p2p/16Uiu2HAm3H8KSTTL966n4CovmG7oWRGAWrmqPaE4snCw1tx5ntS8"],"enrUri":"enr:-L24QBMmcjkbQTO2e0BEoIVNYe_wGpJSdoN7TQjj6Faar_osS-NlEilDZKnkDjphH70J11pzwYcaeaIJUtN2oTn3TmMCgmlkgnY0gmlwhKwS72iKbXVsdGlhZGRyc5YACASsEu9oBkuOAAoErBLvaAZLj90DgnJzhQADAQAAiXNlY3AyNTZrMaECdK0MpwHLpMpb_PFOuriNIVg-JPs73zvJxHmA3iVl3UWDdGNwgkuOg3VkcIJLkIV3YWt1MgE"}'
2025-02-09 04:02:24.124 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:02:24.130 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:02:24.130 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-09_04-02-21__ba658ec2-8817-47e6-b26f-064123558efc__wakuorg_nwaku:latest.log
2025-02-09 04:02:24.130 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:02:24.130 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:02:24.131 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:02:24.132 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.55.136
2025-02-09 04:02:24.132 DEBUG [src.node.docker_mananger] Generated ports ['58606', '58607', '58608', '58609', '58610']
2025-02-09 04:02:24.132 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:02:24.132 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:02:24.132 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:02:24.132 DEBUG [src.node.docker_mananger] docker run -i -t -p 58606:58606 -p 58607:58607 -p 58608:58608 -p 58609:58609 -p 58610:58610 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58608 --rest-port=58606 --tcp-port=58607 --discv5-udp-port=58609 --rest-address=0.0.0.0 --nat=extip:172.18.55.136 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fad9532b2864f5707abbdfd5c1bcbb059b66f837cac157a61a14deaacd13f80b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58610 --metrics-logging=true --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QGfn5K837E72punHrriz-nVnzyMptcac_0gCzEgRb4skGx1_nQWDrej7OnZd0HuL9In-Tk9SoGEJgYJV8Sx22SYCgmlkgnY0gmlwhKwSSxiKbXVsdGlhZGRyc5YACASsEksYBpOAAAoErBJLGAaTgd0DgnJzhQADAQAAiXNlY3AyNTZrMaED0fQ3_ibxi2k-8lg3EU9qrKJT7Az0PF29cPHOsmVYwDSDdGNwgpOAg3VkcIKTgoV3YWt1Mgk --lightpushnode=/ip4/172.18.75.24/tcp/37760/p2p/16Uiu2HAmSnZYiqUXB9jJikkW6qqpnF93f53z7mcYHc9xQH92jqwR
2025-02-09 04:02:24.358 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.55.136 waku b38998d033e356af8988ca374f3423fbd3983a18f1bf3243646d4d397243378b
2025-02-09 04:02:24.412 DEBUG [src.node.docker_mananger] Container started with ID b38998d033e3. Setting up logs at ./log/docker/node1_2025-02-09_04-02-21__ba658ec2-8817-47e6-b26f-064123558efc__wakuorg_nwaku:latest.log
2025-02-09 04:02:24.412 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58606
2025-02-09 04:02:24.412 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:02:25.413 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58606/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:02:25.415 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:02:25.416 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:02:25.416 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58606/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:02:25.418 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.55.136/tcp/58607/p2p/16Uiu2HAmGmRKfFr1hyz91t7oehH5nrbJWZcK9YVwrXszihYiWTg5","/ip4/172.18.55.136/tcp/58608/ws/p2p/16Uiu2HAmGmRKfFr1hyz91t7oehH5nrbJWZcK9YVwrXszihYiWTg5"],"enrUri":"enr:-L24QMUWnMtfC670_mbTAj14beSaVTWNG2JOL_U8lCoNcLGrafQidsx3HabLuJm-fBbNk4jsUUNiL_VBQ711muTRMlMCgmlkgnY0gmlwhKwSN4iKbXVsdGlhZGRyc5YACASsEjeIBuTvAAoErBI3iAbk8N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDPRR35_wX2zJlZqLxaV5b9ZxS3IMhQlmw1626ac0GYHqDdGNwguTvg3VkcILk8YV3YWt1Mgg"}'
2025-02-09 04:02:25.418 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:02:25.418 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37759/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-09 04:02:25.422 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:02:25.422 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19341/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-09 04:02:25.428 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:02:25.428 DEBUG [src.steps.light_push] Lightpushing message
2025-02-09 04:02:25.428 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58606/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1739073745428724992}}'
2025-02-09 04:02:25.477 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:02:25.479 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-09 04:02:25.579 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-09 04:02:25.579 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37759/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:02:25.582 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739073745428724992,"ephemeral":false}]'
2025-02-09 04:02:25.583 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-09 04:02:25.583 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19341/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:02:25.586 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739073745428724992,"ephemeral":false}]'
2025-02-09 04:02:25.588 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:02:25.589 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:02:25.589 DEBUG [src.node.waku_node] Stopping container with id ead14335f4ad
2025-02-09 04:02:26.310 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:02:26.310 DEBUG [src.node.waku_node] Stopping container with id e58d6baa83f3
2025-02-09 04:02:27.121 ERROR [src.node.docker_mananger] Max retries reached for container ead14335f4ad. Exiting log stream.
2025-02-09 04:02:27.801 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:02:27.802 DEBUG [src.node.waku_node] Stopping container with id b38998d033e3
2025-02-09 04:02:28.616 ERROR [src.node.docker_mananger] Max retries reached for container e58d6baa83f3. Exiting log stream.
2025-02-09 04:02:29.096 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:02:29.097 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:02:29.104 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:02:29.112 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:02:29.118 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
