2025-02-09 04:04:02.621 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:04:02.621 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_meta with id: 2025-02-09_04-04-02__e6daea05-99fa-49d1-90e0-e0b0edc32061
2025-02-09 04:04:02.621 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:04:02.622 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-09 04:04:02.628 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:04:02.628 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-09_04-04-02__e6daea05-99fa-49d1-90e0-e0b0edc32061__wakuorg_nwaku:latest.log
2025-02-09 04:04:02.628 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:04:02.629 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:04:02.630 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:04:02.630 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.191.84
2025-02-09 04:04:02.630 DEBUG [src.node.docker_mananger] Generated ports ['57671', '57672', '57673', '57674', '57675']
2025-02-09 04:04:02.630 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:04:02.630 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:04:02.631 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:04:02.631 DEBUG [src.node.docker_mananger] docker run -i -t -p 57671:57671 -p 57672:57672 -p 57673:57673 -p 57674:57674 -p 57675:57675 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57673 --rest-port=57671 --tcp-port=57672 --discv5-udp-port=57674 --rest-address=0.0.0.0 --nat=extip:172.18.191.84 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e0f44ffb7d5fb3fe16a2ede68ba4528fe7d52cc997bbeb9a9e5fd0ebacfda06f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57675 --metrics-logging=true --lightpush=true --relay=true
2025-02-09 04:04:02.869 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.191.84 waku e99d7b1a691673727b4153d70365edb9144c8adc8a94642611729bc0c2bcd1ad
2025-02-09 04:04:02.920 DEBUG [src.node.docker_mananger] Container started with ID e99d7b1a6916. Setting up logs at ./log/docker/receiving_node1_2025-02-09_04-04-02__e6daea05-99fa-49d1-90e0-e0b0edc32061__wakuorg_nwaku:latest.log
2025-02-09 04:04:02.921 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57671
2025-02-09 04:04:02.921 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:04:03.423 ERROR [src.node.docker_mananger] Max retries reached for container ddbd8204bfe5. Exiting log stream.
2025-02-09 04:04:03.922 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57671/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:03.925 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:04:03.926 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:04:03.926 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57671/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:03.928 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.191.84/tcp/57672/p2p/16Uiu2HAkzJKo3KAjE2Xxhq578XeeQvbLpvFVCMCwSCmBkhv6WS5M","/ip4/172.18.191.84/tcp/57673/ws/p2p/16Uiu2HAkzJKo3KAjE2Xxhq578XeeQvbLpvFVCMCwSCmBkhv6WS5M"],"enrUri":"enr:-L24QKDlvH-RKkEA2nSt_lGL_5OkFC9DmYke7NVzGOOO--5nJ49tEntqD3lckB8k2Hai4JCHitL7K0b_5oO7---qk80CgmlkgnY0gmlwhKwSv1SKbXVsdGlhZGRyc5YACASsEr9UBuFIAAoErBK_VAbhSd0DgnJzhQADAQAAiXNlY3AyNTZrMaECSGiLluPzptV5zanHgVsPgqKUoEREGPHwurGZ0kz1rviDdGNwguFIg3VkcILhSoV3YWt1Mgk"}'
2025-02-09 04:04:03.928 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:04:03.935 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:04:03.935 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-09_04-04-02__e6daea05-99fa-49d1-90e0-e0b0edc32061__wakuorg_nwaku:latest.log
2025-02-09 04:04:03.935 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:04:03.935 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:04:03.936 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:04:03.937 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.35.194
2025-02-09 04:04:03.937 DEBUG [src.node.docker_mananger] Generated ports ['19433', '19434', '19435', '19436', '19437']
2025-02-09 04:04:03.937 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:04:03.937 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:04:03.937 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:04:03.937 DEBUG [src.node.docker_mananger] docker run -i -t -p 19433:19433 -p 19434:19434 -p 19435:19435 -p 19436:19436 -p 19437:19437 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19435 --rest-port=19433 --tcp-port=19434 --discv5-udp-port=19436 --rest-address=0.0.0.0 --nat=extip:172.18.35.194 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=302239831deb8d2ebeb6d4d97adf0c29e54fd94512dbdb55c2028e0c58227e9a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19437 --metrics-logging=true --lightpush=false --relay=true
2025-02-09 04:04:04.177 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.35.194 waku c318f8187a9c051626c7ab03069fdc20e9003a35788f665d5d13933ae264c65b
2025-02-09 04:04:04.225 DEBUG [src.node.docker_mananger] Container started with ID c318f8187a9c. Setting up logs at ./log/docker/receiving_node2_2025-02-09_04-04-02__e6daea05-99fa-49d1-90e0-e0b0edc32061__wakuorg_nwaku:latest.log
2025-02-09 04:04:04.225 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 19433
2025-02-09 04:04:04.225 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:04:05.227 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19433/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:05.229 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:04:05.230 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:04:05.230 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19433/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:05.232 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.35.194/tcp/19434/p2p/16Uiu2HAmKSbdza3esRGeQUNFKDUVvBFB61xWKis31325T8uutF3T","/ip4/172.18.35.194/tcp/19435/ws/p2p/16Uiu2HAmKSbdza3esRGeQUNFKDUVvBFB61xWKis31325T8uutF3T"],"enrUri":"enr:-L24QNot0ZH7kUrDJYmQk1E6hFhskRW3b53S0NmG95Zo7hpiBytXPnPlSQS66Pld76OnZKLtucgCqDZM-jesTGE2OCQCgmlkgnY0gmlwhKwSI8KKbXVsdGlhZGRyc5YACASsEiPCBkvqAAoErBIjwgZL690DgnJzhQADAQAAiXNlY3AyNTZrMaEDZNUogX9-jXsbNMwJj7ldwko6qLuIX6yaWIXcyb2c3P6DdGNwgkvqg3VkcIJL7IV3YWt1MgE"}'
2025-02-09 04:04:05.232 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:04:05.232 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19433/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.191.84/tcp/57672/p2p/16Uiu2HAkzJKo3KAjE2Xxhq578XeeQvbLpvFVCMCwSCmBkhv6WS5M"]'
2025-02-09 04:04:05.268 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:05.279 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:04:05.280 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-09_04-04-02__e6daea05-99fa-49d1-90e0-e0b0edc32061__wakuorg_nwaku:latest.log
2025-02-09 04:04:05.280 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:04:05.280 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:04:05.281 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:04:05.281 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.129.127
2025-02-09 04:04:05.282 DEBUG [src.node.docker_mananger] Generated ports ['4950', '4951', '4952', '4953', '4954']
2025-02-09 04:04:05.282 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:04:05.282 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:04:05.282 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:04:05.282 DEBUG [src.node.docker_mananger] docker run -i -t -p 4950:4950 -p 4951:4951 -p 4952:4952 -p 4953:4953 -p 4954:4954 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4952 --rest-port=4950 --tcp-port=4951 --discv5-udp-port=4953 --rest-address=0.0.0.0 --nat=extip:172.18.129.127 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0b2e0d691229dec570acadeb39bf89ffc2bedf5eecfdbd8400f40de7f517ddd8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4954 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QKDlvH-RKkEA2nSt_lGL_5OkFC9DmYke7NVzGOOO--5nJ49tEntqD3lckB8k2Hai4JCHitL7K0b_5oO7---qk80CgmlkgnY0gmlwhKwSv1SKbXVsdGlhZGRyc5YACASsEr9UBuFIAAoErBK_VAbhSd0DgnJzhQADAQAAiXNlY3AyNTZrMaECSGiLluPzptV5zanHgVsPgqKUoEREGPHwurGZ0kz1rviDdGNwguFIg3VkcILhSoV3YWt1Mgk --lightpushnode=/ip4/172.18.191.84/tcp/57672/p2p/16Uiu2HAkzJKo3KAjE2Xxhq578XeeQvbLpvFVCMCwSCmBkhv6WS5M --lightpush=true --relay=false
2025-02-09 04:04:05.526 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.129.127 waku f2c0677db27fb10bec0b5e983feb48c6565a00c1e63d6e35cb227a2184d84505
2025-02-09 04:04:05.577 DEBUG [src.node.docker_mananger] Container started with ID f2c0677db27f. Setting up logs at ./log/docker/lightpush_node1_2025-02-09_04-04-02__e6daea05-99fa-49d1-90e0-e0b0edc32061__wakuorg_nwaku:latest.log
2025-02-09 04:04:05.577 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 4950
2025-02-09 04:04:05.578 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:04:06.579 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4950/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:06.582 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:04:06.582 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:04:06.582 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4950/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:06.584 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.129.127/tcp/4951/p2p/16Uiu2HAm4CghroswvkHoNsfn528cPsDqKEynwRybzpYTeaRFmnUD","/ip4/172.18.129.127/tcp/4952/ws/p2p/16Uiu2HAm4CghroswvkHoNsfn528cPsDqKEynwRybzpYTeaRFmnUD"],"enrUri":"enr:-L24QD7ZH7uuHvxs2PKPxGoVqVo3rG-LJ59T-mAsxfbR-yuHXp6DeDeq_XhPBLe9cehOZyK3bMFnNl_Ae76j2WNNS9gCgmlkgnY0gmlwhKwSgX-KbXVsdGlhZGRyc5YACASsEoF_BhNXAAoErBKBfwYTWN0DgnJzhQADAQAAiXNlY3AyNTZrMaECgmVzrzkZpwa9gXrTPdIRiDAfCoTQsYgNCNZQ4YLaqP6DdGNwghNXg3VkcIITWYV3YWt1Mgg"}'
2025-02-09 04:04:06.584 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:04:06.585 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4950/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.191.84/tcp/57672/p2p/16Uiu2HAkzJKo3KAjE2Xxhq578XeeQvbLpvFVCMCwSCmBkhv6WS5M"]'
2025-02-09 04:04:06.623 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:06.624 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4950/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.35.194/tcp/19434/p2p/16Uiu2HAmKSbdza3esRGeQUNFKDUVvBFB61xWKis31325T8uutF3T"]'
2025-02-09 04:04:06.652 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:06.655 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57671/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:04:06.662 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:06.662 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19433/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:04:06.668 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:06.671 DEBUG [src.steps.light_push] Lightpushing message
2025-02-09 04:04:06.672 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4950/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739073846670987776, "meta": "Light push works!!"}}'
2025-02-09 04:04:06.676 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:4950/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
2025-02-09 04:04:06.678 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:04:06.679 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:04:06.679 DEBUG [src.node.waku_node] Stopping container with id e99d7b1a6916
2025-02-09 04:04:07.417 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:04:07.417 DEBUG [src.node.waku_node] Stopping container with id c318f8187a9c
2025-02-09 04:04:08.230 ERROR [src.node.docker_mananger] Max retries reached for container e99d7b1a6916. Exiting log stream.
2025-02-09 04:04:08.904 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:04:08.905 DEBUG [src.node.waku_node] Stopping container with id f2c0677db27f
2025-02-09 04:04:09.716 ERROR [src.node.docker_mananger] Max retries reached for container c318f8187a9c. Exiting log stream.
2025-02-09 04:04:10.419 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:04:10.420 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:04:10.427 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:04:10.433 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:04:10.438 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
