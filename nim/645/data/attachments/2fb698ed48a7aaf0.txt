2025-02-09 04:06:33.974 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:06:33.974 DEBUG [tests.conftest] Running test: test_publish_on_multiple_pubsub_topics_and_only_after_fetch_them with id: 2025-02-09_04-06-33__6702a54c-aa27-41e4-8b0e-3b4810746432
2025-02-09 04:06:33.974 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:06:33.975 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-09 04:06:33.975 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-09 04:06:33.982 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:06:33.982 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-09_04-06-33__6702a54c-aa27-41e4-8b0e-3b4810746432__wakuorg_nwaku:latest.log
2025-02-09 04:06:33.982 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:06:33.982 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:06:33.984 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:06:33.984 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.23.156
2025-02-09 04:06:33.984 DEBUG [src.node.docker_mananger] Generated ports ['52027', '52028', '52029', '52030', '52031']
2025-02-09 04:06:33.984 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:06:33.984 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:06:33.984 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:06:33.984 DEBUG [src.node.docker_mananger] docker run -i -t -p 52027:52027 -p 52028:52028 -p 52029:52029 -p 52030:52030 -p 52031:52031 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52029 --rest-port=52027 --tcp-port=52028 --discv5-udp-port=52030 --rest-address=0.0.0.0 --nat=extip:172.18.23.156 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=7f9acff0ced993daa50c9a7b16e67bf142b56d6a824f4d6aaef9496c8b8a9569 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52031 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
2025-02-09 04:06:34.216 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.23.156 waku f632ae76e597c6d0430a6f86cede7318fa71d6bc82b0a4c53d442ebe8f31a65a
2025-02-09 04:06:34.267 DEBUG [src.node.docker_mananger] Container started with ID f632ae76e597. Setting up logs at ./log/docker/node1_2025-02-09_04-06-33__6702a54c-aa27-41e4-8b0e-3b4810746432__wakuorg_nwaku:latest.log
2025-02-09 04:06:34.267 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 52027
2025-02-09 04:06:34.269 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:06:34.764 ERROR [src.node.docker_mananger] Max retries reached for container dfae237c3a21. Exiting log stream.
2025-02-09 04:06:35.269 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52027/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:06:35.272 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:06:35.273 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:06:35.273 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52027/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:06:35.275 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.23.156/tcp/52028/p2p/16Uiu2HAm8p8cKQeQRJTS8bDjJyY8u57gvB1DmCyRYPCFEDUhNDRq","/ip4/172.18.23.156/tcp/52029/ws/p2p/16Uiu2HAm8p8cKQeQRJTS8bDjJyY8u57gvB1DmCyRYPCFEDUhNDRq"],"enrUri":"enr:-L24QLzPoNDnYEwYPa7643Q6BpCM8NMQm-CB9hjNxFDU5bJqLzE0sgGpYr0e0iCQ__jtUx0G_CZlj_LSHu9XbB-pQM8CgmlkgnY0gmlwhKwSF5yKbXVsdGlhZGRyc5YACASsEhecBss8AAoErBIXnAbLPd0DgnJzhQACAQAAiXNlY3AyNTZrMaECxujRdEXEQ9pMbV93DX6Nq4S__0zx_AqPeMKN4RIyiniDdGNwgss8g3VkcILLPoV3YWt1MgU"}'
2025-02-09 04:06:35.275 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:06:35.282 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:06:35.282 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-09_04-06-33__6702a54c-aa27-41e4-8b0e-3b4810746432__wakuorg_nwaku:latest.log
2025-02-09 04:06:35.282 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:06:35.282 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:06:35.284 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:06:35.284 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.128.239
2025-02-09 04:06:35.284 DEBUG [src.node.docker_mananger] Generated ports ['25751', '25752', '25753', '25754', '25755']
2025-02-09 04:06:35.284 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:06:35.284 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:06:35.285 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:06:35.285 DEBUG [src.node.docker_mananger] docker run -i -t -p 25751:25751 -p 25752:25752 -p 25753:25753 -p 25754:25754 -p 25755:25755 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25753 --rest-port=25751 --tcp-port=25752 --discv5-udp-port=25754 --rest-address=0.0.0.0 --nat=extip:172.18.128.239 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=6a03a1fad8fbcea4fbe51be951dbaeabdb8ee5d1cb068e0aefdcfd76b06eb21c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25755 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QLzPoNDnYEwYPa7643Q6BpCM8NMQm-CB9hjNxFDU5bJqLzE0sgGpYr0e0iCQ__jtUx0G_CZlj_LSHu9XbB-pQM8CgmlkgnY0gmlwhKwSF5yKbXVsdGlhZGRyc5YACASsEhecBss8AAoErBIXnAbLPd0DgnJzhQACAQAAiXNlY3AyNTZrMaECxujRdEXEQ9pMbV93DX6Nq4S__0zx_AqPeMKN4RIyiniDdGNwgss8g3VkcILLPoV3YWt1MgU --pubsub-topic=/waku/2/rs/2/0
2025-02-09 04:06:35.521 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.128.239 waku 45e143ff8960cf2682dbadbd476b4a3006b029ac962b503b331f5a2145293ac5
2025-02-09 04:06:35.571 DEBUG [src.node.docker_mananger] Container started with ID 45e143ff8960. Setting up logs at ./log/docker/node2_2025-02-09_04-06-33__6702a54c-aa27-41e4-8b0e-3b4810746432__wakuorg_nwaku:latest.log
2025-02-09 04:06:35.571 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 25751
2025-02-09 04:06:35.571 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:06:36.572 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25751/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:06:36.581 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:06:36.584 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:06:36.585 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25751/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:06:36.593 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.128.239/tcp/25752/p2p/16Uiu2HAmL481AGHNg4gbSo3bxnUh6kj1ndVPuiFG9GAzvHEvfNM8","/ip4/172.18.128.239/tcp/25753/ws/p2p/16Uiu2HAmL481AGHNg4gbSo3bxnUh6kj1ndVPuiFG9GAzvHEvfNM8"],"enrUri":"enr:-L24QMhcau1zGMIYAyIcBSisVlC2_wsWkGHfvgoy4LgLTRF5QVad5w9QxeDepfZCuWowrn9XYRHg4WFu8LueF-cXqW0CgmlkgnY0gmlwhKwSgO-KbXVsdGlhZGRyc5YACASsEoDvBmSYAAoErBKA7wZkmd0DgnJzhQACAQAAiXNlY3AyNTZrMaEDbe7R_1tJULXJwPS6F76LlWRvEf1-KyQnvMCbzLqoZ2ODdGNwgmSYg3VkcIJkmoV3YWt1MgE"}'
2025-02-09 04:06:36.593 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:06:36.594 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25751/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.23.156/tcp/52028/p2p/16Uiu2HAm8p8cKQeQRJTS8bDjJyY8u57gvB1DmCyRYPCFEDUhNDRq"]'
2025-02-09 04:06:36.596 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:06:36.597 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52027/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0", "/waku/2/rs/2/1", "/waku/2/rs/2/2", "/waku/2/rs/2/3", "/waku/2/rs/2/4", "/waku/2/rs/2/5", "/waku/2/rs/2/6", "/waku/2/rs/2/7"]'
2025-02-09 04:06:36.607 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:06:36.608 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25751/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0", "/waku/2/rs/2/1", "/waku/2/rs/2/2", "/waku/2/rs/2/3", "/waku/2/rs/2/4", "/waku/2/rs/2/5", "/waku/2/rs/2/6", "/waku/2/rs/2/7"]'
2025-02-09 04:06:36.629 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:06:36.633 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52027/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzA=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:06:36.639 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:06:36.640 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52027/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzE=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:06:36.646 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:06:36.647 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52027/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzI=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:06:36.653 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:06:36.654 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52027/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F3" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzM=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:06:36.659 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:06:36.659 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52027/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F4" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzQ=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:06:36.665 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:06:36.665 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52027/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F5" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzU=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:06:36.670 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:06:36.671 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52027/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F6" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzY=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:06:36.676 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:06:36.677 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52027/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F7" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzc=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:06:36.682 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:06:36.682 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-09 04:06:36.783 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25751/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:06:36.785 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzA=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739073996631841792,"ephemeral":false}]'
2025-02-09 04:06:36.786 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25751/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:06:36.788 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzE=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739073996640795392,"ephemeral":false}]'
2025-02-09 04:06:36.788 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25751/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:06:36.791 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzI=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739073996647384576,"ephemeral":false}]'
2025-02-09 04:06:36.791 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25751/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F3" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:06:36.793 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzM=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739073996653937152,"ephemeral":false}]'
2025-02-09 04:06:36.794 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25751/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F4" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:06:36.796 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzQ=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739073996659836928,"ephemeral":false}]'
2025-02-09 04:06:36.796 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25751/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F5" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:06:36.798 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzU=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739073996665706240,"ephemeral":false}]'
2025-02-09 04:06:36.798 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25751/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F6" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:06:36.800 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzY=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739073996671280128,"ephemeral":false}]'
2025-02-09 04:06:36.801 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25751/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F7" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:06:36.803 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzc=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739073996676862208,"ephemeral":false}]'
2025-02-09 04:06:36.804 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:06:36.805 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:06:36.805 DEBUG [src.node.waku_node] Stopping container with id f632ae76e597
2025-02-09 04:06:37.873 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:06:37.873 DEBUG [src.node.waku_node] Stopping container with id 45e143ff8960
2025-02-09 04:06:38.686 ERROR [src.node.docker_mananger] Max retries reached for container f632ae76e597. Exiting log stream.
2025-02-09 04:06:39.393 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:06:39.394 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:06:39.401 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:06:39.410 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
