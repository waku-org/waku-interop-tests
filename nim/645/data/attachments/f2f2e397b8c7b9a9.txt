2025-02-09 04:04:37.150 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:04:37.150 DEBUG [tests.conftest] Running test: test_invalid_page_size with id: 2025-02-09_04-04-37__44d98ed6-158e-4cde-ab6b-fdb942854ade
2025-02-09 04:04:37.150 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:04:37.151 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-09 04:04:37.151 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-09 04:04:37.157 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:04:37.157 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-09_04-04-37__44d98ed6-158e-4cde-ab6b-fdb942854ade__wakuorg_nwaku:latest.log
2025-02-09 04:04:37.157 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:04:37.157 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:04:37.159 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:04:37.159 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.149.143
2025-02-09 04:04:37.159 DEBUG [src.node.docker_mananger] Generated ports ['3884', '3885', '3886', '3887', '3888']
2025-02-09 04:04:37.159 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:04:37.159 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:04:37.159 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:04:37.160 DEBUG [src.node.docker_mananger] docker run -i -t -p 3884:3884 -p 3885:3885 -p 3886:3886 -p 3887:3887 -p 3888:3888 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3886 --rest-port=3884 --tcp-port=3885 --discv5-udp-port=3887 --rest-address=0.0.0.0 --nat=extip:172.18.149.143 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b94b5d5fbc7dcbc37ca0b77e3671c49d3b4c4f035f7dbd28b7d92ff19e8538fd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3888 --metrics-logging=true --store=true --relay=true
2025-02-09 04:04:37.382 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.149.143 waku 24cfbf02a03da32846c75dfc4c04cb736387c9f402d0ae7c98aa7b949c98bb09
2025-02-09 04:04:37.432 DEBUG [src.node.docker_mananger] Container started with ID 24cfbf02a03d. Setting up logs at ./log/docker/publishing_node1_2025-02-09_04-04-37__44d98ed6-158e-4cde-ab6b-fdb942854ade__wakuorg_nwaku:latest.log
2025-02-09 04:04:37.433 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 3884
2025-02-09 04:04:37.434 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:04:37.951 ERROR [src.node.docker_mananger] Max retries reached for container 67d882ecbe3f. Exiting log stream.
2025-02-09 04:04:38.434 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3884/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:38.437 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:04:38.437 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:04:38.437 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3884/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:38.439 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.149.143/tcp/3885/p2p/16Uiu2HAm7K2Cvs3cHMGXpLJstAmJWedAdNXKGehqtV3fS4Ya7jYp","/ip4/172.18.149.143/tcp/3886/ws/p2p/16Uiu2HAm7K2Cvs3cHMGXpLJstAmJWedAdNXKGehqtV3fS4Ya7jYp"],"enrUri":"enr:-L24QC7Ns0kP29K0r5BSruGilf0FyxuvN0BPDrrJq93OVXahLRxt5ER6vtAYkQ-WXEjT-aT9u60xfAhwXwt0ItbazbQCgmlkgnY0gmlwhKwSlY-KbXVsdGlhZGRyc5YACASsEpWPBg8tAAoErBKVjwYPLt0DgnJzhQADAQAAiXNlY3AyNTZrMaECsJgMMBubClO74XP_wh4AyIegWae4Diehg2VRK9yHdL2DdGNwgg8tg3VkcIIPL4V3YWt1MgM"}'
2025-02-09 04:04:38.440 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:04:38.446 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:04:38.446 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-09_04-04-37__44d98ed6-158e-4cde-ab6b-fdb942854ade__wakuorg_nwaku:latest.log
2025-02-09 04:04:38.446 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:04:38.446 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:04:38.448 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:04:38.448 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.41.5
2025-02-09 04:04:38.448 DEBUG [src.node.docker_mananger] Generated ports ['36661', '36662', '36663', '36664', '36665']
2025-02-09 04:04:38.448 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:04:38.448 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:04:38.449 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:04:38.449 DEBUG [src.node.docker_mananger] docker run -i -t -p 36661:36661 -p 36662:36662 -p 36663:36663 -p 36664:36664 -p 36665:36665 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36663 --rest-port=36661 --tcp-port=36662 --discv5-udp-port=36664 --rest-address=0.0.0.0 --nat=extip:172.18.41.5 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eb0d919b4faebff58c5a3dcdb8ff6b7befcbb5bfb4ddabca7a2f0aeca8b0e367 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36665 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QC7Ns0kP29K0r5BSruGilf0FyxuvN0BPDrrJq93OVXahLRxt5ER6vtAYkQ-WXEjT-aT9u60xfAhwXwt0ItbazbQCgmlkgnY0gmlwhKwSlY-KbXVsdGlhZGRyc5YACASsEpWPBg8tAAoErBKVjwYPLt0DgnJzhQADAQAAiXNlY3AyNTZrMaECsJgMMBubClO74XP_wh4AyIegWae4Diehg2VRK9yHdL2DdGNwgg8tg3VkcIIPL4V3YWt1MgM --storenode=/ip4/172.18.149.143/tcp/3885/p2p/16Uiu2HAm7K2Cvs3cHMGXpLJstAmJWedAdNXKGehqtV3fS4Ya7jYp --store=true --relay=true
2025-02-09 04:04:38.682 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.41.5 waku fb70063a3551fb9dba6ab88cd5244531debb28083c74cfcebf29d2eada9fe1d0
2025-02-09 04:04:38.733 DEBUG [src.node.docker_mananger] Container started with ID fb70063a3551. Setting up logs at ./log/docker/store_node1_2025-02-09_04-04-37__44d98ed6-158e-4cde-ab6b-fdb942854ade__wakuorg_nwaku:latest.log
2025-02-09 04:04:38.734 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36661
2025-02-09 04:04:38.734 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:04:39.735 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36661/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:39.739 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:04:39.739 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:04:39.739 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36661/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:39.741 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.41.5/tcp/36662/p2p/16Uiu2HAkuhUeneSVTvx5KGC4HcvWJSpR1rgABUmW61ScZ8T2UUQ4","/ip4/172.18.41.5/tcp/36663/ws/p2p/16Uiu2HAkuhUeneSVTvx5KGC4HcvWJSpR1rgABUmW61ScZ8T2UUQ4"],"enrUri":"enr:-L24QDE_1WPq_YOMTp2dBHwjHSfFCPhXMkmuj-H5yPQZP9GFFX5QYe0TCq8QET3s_RtN1A2SEFDtLJcAkGOUy0PQhUACgmlkgnY0gmlwhKwSKQWKbXVsdGlhZGRyc5YACASsEikFBo82AAoErBIpBQaPN90DgnJzhQADAQAAiXNlY3AyNTZrMaECBAx8FLtkRtpTPVuaibLhmei8K1mRLmqJRHXjV1jrCk2DdGNwgo82g3VkcIKPOIV3YWt1MgM"}'
2025-02-09 04:04:39.741 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:04:39.742 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36661/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.149.143/tcp/3885/p2p/16Uiu2HAm7K2Cvs3cHMGXpLJstAmJWedAdNXKGehqtV3fS4Ya7jYp"]'
2025-02-09 04:04:39.744 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:39.744 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3884/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:04:39.747 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:39.747 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36661/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:04:39.749 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:39.750 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:39.750 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3884/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:39.756 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:39.756 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:39.957 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:39.957 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3884/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:39.964 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:39.964 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:40.165 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:40.166 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3884/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:40.172 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:40.173 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:40.373 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:40.374 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3884/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:40.381 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:40.382 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:40.582 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:40.583 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3884/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV80", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:40.589 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:40.589 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:40.790 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:40.790 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3884/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV81", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:40.797 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:40.797 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:40.998 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:40.999 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3884/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV82", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:41.006 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:41.007 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:41.208 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:41.208 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3884/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV83", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:41.214 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:41.215 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:41.415 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:41.415 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3884/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV84", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:41.422 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:41.422 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:41.623 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:41.623 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3884/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV85", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:41.629 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:41.630 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:41.830 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3884/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:41.833 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3884/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true. Response content: b'page size parsing error: invalid integer: $2'
2025-02-09 04:04:41.834 DEBUG [tests.store.test_page_size] the invalid page_size $2 wasn't accepted 
2025-02-09 04:04:41.834 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36661/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:41.837 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:36661/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true. Response content: b'page size parsing error: invalid integer: $2'
2025-02-09 04:04:41.837 DEBUG [tests.store.test_page_size] the invalid page_size $2 wasn't accepted 
2025-02-09 04:04:41.839 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:04:41.840 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:04:41.840 DEBUG [src.node.waku_node] Stopping container with id 24cfbf02a03d
2025-02-09 04:04:42.944 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:04:42.945 DEBUG [src.node.waku_node] Stopping container with id fb70063a3551
2025-02-09 04:04:43.758 ERROR [src.node.docker_mananger] Max retries reached for container 24cfbf02a03d. Exiting log stream.
2025-02-09 04:04:44.456 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:04:44.457 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:04:44.464 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:04:44.471 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
