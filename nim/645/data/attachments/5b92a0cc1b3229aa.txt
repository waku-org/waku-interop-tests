2025-02-09 04:07:20.729 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:07:20.729 DEBUG [tests.conftest] Running test: test_relay_subscribe_with_multiple_overlapping_pubsub_topics with id: 2025-02-09_04-07-20__747639c8-a126-438e-840f-1593fbbf67c6
2025-02-09 04:07:20.729 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:07:20.730 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-09 04:07:20.730 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-09 04:07:20.736 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:07:20.736 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-09_04-07-20__747639c8-a126-438e-840f-1593fbbf67c6__wakuorg_nwaku:latest.log
2025-02-09 04:07:20.736 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:07:20.737 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:07:20.738 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:07:20.738 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.172.185
2025-02-09 04:07:20.738 DEBUG [src.node.docker_mananger] Generated ports ['6215', '6216', '6217', '6218', '6219']
2025-02-09 04:07:20.738 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:07:20.739 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:07:20.739 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:07:20.739 DEBUG [src.node.docker_mananger] docker run -i -t -p 6215:6215 -p 6216:6216 -p 6217:6217 -p 6218:6218 -p 6219:6219 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6217 --rest-port=6215 --tcp-port=6216 --discv5-udp-port=6218 --rest-address=0.0.0.0 --nat=extip:172.18.172.185 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0efa4fadf124893bba8f01fd36eeb7a5d0f24cdab31cd7efbc1c8ce913eddd6e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6219 --metrics-logging=true --relay=true
2025-02-09 04:07:20.972 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.172.185 waku 12d495ebc461d260b10b7994568b3cd4f5649782d13e979f5c98562bc3afb34c
2025-02-09 04:07:21.020 DEBUG [src.node.docker_mananger] Container started with ID 12d495ebc461. Setting up logs at ./log/docker/node1_2025-02-09_04-07-20__747639c8-a126-438e-840f-1593fbbf67c6__wakuorg_nwaku:latest.log
2025-02-09 04:07:21.021 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6215
2025-02-09 04:07:21.021 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:07:21.531 ERROR [src.node.docker_mananger] Max retries reached for container 60096ad2c122. Exiting log stream.
2025-02-09 04:07:22.021 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6215/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:22.024 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:07:22.024 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:07:22.025 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6215/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:22.027 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.172.185/tcp/6216/p2p/16Uiu2HAmGXRi9YjMmPmMttp1eAoWQSQmkwGaaFahgbLhf99mZo9G","/ip4/172.18.172.185/tcp/6217/ws/p2p/16Uiu2HAmGXRi9YjMmPmMttp1eAoWQSQmkwGaaFahgbLhf99mZo9G"],"enrUri":"enr:-L24QMAGPoVhLWVUfck3RR3hJ6dXwxWNwcGVuk6Oqmavv-iLA6VyP3UHgSSjAypI2FqQL2gtfhXDfZQxPpKxM0aEjsECgmlkgnY0gmlwhKwSrLmKbXVsdGlhZGRyc5YACASsEqy5BhhIAAoErBKsuQYYSd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDOX7GhBrRaHe3yRiLGaA-2MAybodQg_uUxk4kIZ-1xheDdGNwghhIg3VkcIIYSoV3YWt1MgE"}'
2025-02-09 04:07:22.027 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:07:22.033 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:07:22.034 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-09_04-07-20__747639c8-a126-438e-840f-1593fbbf67c6__wakuorg_nwaku:latest.log
2025-02-09 04:07:22.034 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:07:22.034 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:07:22.035 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:07:22.035 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.115.132
2025-02-09 04:07:22.036 DEBUG [src.node.docker_mananger] Generated ports ['35845', '35846', '35847', '35848', '35849']
2025-02-09 04:07:22.036 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:07:22.036 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:07:22.036 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:07:22.036 DEBUG [src.node.docker_mananger] docker run -i -t -p 35845:35845 -p 35846:35846 -p 35847:35847 -p 35848:35848 -p 35849:35849 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35847 --rest-port=35845 --tcp-port=35846 --discv5-udp-port=35848 --rest-address=0.0.0.0 --nat=extip:172.18.115.132 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b019ec4e65ba3fcdaf6fefb5bea45da1a29cc24ae52de2fae8b7efaa18aeb4db --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35849 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QMAGPoVhLWVUfck3RR3hJ6dXwxWNwcGVuk6Oqmavv-iLA6VyP3UHgSSjAypI2FqQL2gtfhXDfZQxPpKxM0aEjsECgmlkgnY0gmlwhKwSrLmKbXVsdGlhZGRyc5YACASsEqy5BhhIAAoErBKsuQYYSd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDOX7GhBrRaHe3yRiLGaA-2MAybodQg_uUxk4kIZ-1xheDdGNwghhIg3VkcIIYSoV3YWt1MgE
2025-02-09 04:07:22.265 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.115.132 waku f4b3ba543c814c2c2019bd720c1f7b082015ba4eb86d17584e8277c85cab3e36
2025-02-09 04:07:22.316 DEBUG [src.node.docker_mananger] Container started with ID f4b3ba543c81. Setting up logs at ./log/docker/node2_2025-02-09_04-07-20__747639c8-a126-438e-840f-1593fbbf67c6__wakuorg_nwaku:latest.log
2025-02-09 04:07:22.316 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 35845
2025-02-09 04:07:22.317 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:07:23.317 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35845/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:23.325 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:07:23.326 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:07:23.327 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35845/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:23.330 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.115.132/tcp/35846/p2p/16Uiu2HAmV8r98mUwYQtvkjPcr6hD7ymT6TmzuLZqXmBVDknsQoHV","/ip4/172.18.115.132/tcp/35847/ws/p2p/16Uiu2HAmV8r98mUwYQtvkjPcr6hD7ymT6TmzuLZqXmBVDknsQoHV"],"enrUri":"enr:-L24QNmbBw9mDe9KGl3IdIrrOiWVC1-n1KCz2UOSGsBvKuLLLS6GA6HE8JlHz4LKjb5YpF5U7WiTGUYIrBQNjZ2DeTcCgmlkgnY0gmlwhKwSc4SKbXVsdGlhZGRyc5YACASsEnOEBowGAAoErBJzhAaMB90DgnJzhQADAQAAiXNlY3AyNTZrMaED9N34i9SuPgihkc5gVOwptgtqwDWwSJg3SLxyZhc3fsyDdGNwgowGg3VkcIKMCIV3YWt1MgE"}'
2025-02-09 04:07:23.330 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:07:23.331 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35845/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.172.185/tcp/6216/p2p/16Uiu2HAmGXRi9YjMmPmMttp1eAoWQSQmkwGaaFahgbLhf99mZo9G"]'
2025-02-09 04:07:23.333 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:23.334 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6215/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9"]'
2025-02-09 04:07:23.340 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:23.340 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35845/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9"]'
2025-02-09 04:07:23.349 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:23.350 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6215/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25"]'
2025-02-09 04:07:23.356 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:23.356 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35845/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25"]'
2025-02-09 04:07:23.362 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:23.363 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6215/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:07:23.369 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:23.369 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-09 04:07:23.469 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-09 04:07:23.470 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6215/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:23.473 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739074043363012096,"ephemeral":false}]'
2025-02-09 04:07:23.474 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-09 04:07:23.474 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35845/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:23.477 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739074043363012096,"ephemeral":false}]'
2025-02-09 04:07:23.478 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6215/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:07:23.483 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:23.484 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-09 04:07:23.585 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-09 04:07:23.585 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6215/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:23.588 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739074043478821888,"ephemeral":false}]'
2025-02-09 04:07:23.589 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-09 04:07:23.589 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35845/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:23.592 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739074043478821888,"ephemeral":false}]'
2025-02-09 04:07:23.594 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6215/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:07:23.598 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:23.599 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-09 04:07:23.699 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-09 04:07:23.699 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6215/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:23.702 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739074043593851648,"ephemeral":false}]'
2025-02-09 04:07:23.703 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-09 04:07:23.704 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35845/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:23.706 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739074043593851648,"ephemeral":false}]'
2025-02-09 04:07:23.707 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6215/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F25" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:07:23.712 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:23.713 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-09 04:07:23.813 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-09 04:07:23.813 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6215/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F25" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:23.816 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739074043707775488,"ephemeral":false}]'
2025-02-09 04:07:23.817 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-09 04:07:23.818 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35845/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F25" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:23.820 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739074043707775488,"ephemeral":false}]'
2025-02-09 04:07:23.823 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:07:23.824 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:07:23.824 DEBUG [src.node.waku_node] Stopping container with id 12d495ebc461
2025-02-09 04:07:24.529 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:07:24.529 DEBUG [src.node.waku_node] Stopping container with id f4b3ba543c81
2025-02-09 04:07:25.342 ERROR [src.node.docker_mananger] Max retries reached for container 12d495ebc461. Exiting log stream.
2025-02-09 04:07:26.029 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:07:26.030 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:07:26.036 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:07:26.042 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
