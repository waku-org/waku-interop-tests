2025-02-09 04:04:44.475 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:04:44.475 DEBUG [tests.conftest] Running test: test_time_filter_big_timestamp with id: 2025-02-09_04-04-44__8d7793bb-16ee-4154-8ca3-b2cf8e88b540
2025-02-09 04:04:44.476 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:04:44.476 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-09 04:04:44.476 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-09 04:04:44.483 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:04:44.483 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-09_04-04-44__8d7793bb-16ee-4154-8ca3-b2cf8e88b540__wakuorg_nwaku:latest.log
2025-02-09 04:04:44.483 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:04:44.483 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:04:44.485 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:04:44.485 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.104.199
2025-02-09 04:04:44.485 DEBUG [src.node.docker_mananger] Generated ports ['32078', '32079', '32080', '32081', '32082']
2025-02-09 04:04:44.485 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:04:44.485 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:04:44.485 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:04:44.485 DEBUG [src.node.docker_mananger] docker run -i -t -p 32078:32078 -p 32079:32079 -p 32080:32080 -p 32081:32081 -p 32082:32082 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32080 --rest-port=32078 --tcp-port=32079 --discv5-udp-port=32081 --rest-address=0.0.0.0 --nat=extip:172.18.104.199 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bab0a9af3c3ffc45effb4ef86edddf21db7a58c22acccce795d4dd1e708bea2a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32082 --metrics-logging=true --store=true --relay=true
2025-02-09 04:04:44.723 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.104.199 waku b0f964d4210d7535d55feb6166ae3250bdb955cc06a0a3c040e7ac40f42157b1
2025-02-09 04:04:44.770 DEBUG [src.node.docker_mananger] Container started with ID b0f964d4210d. Setting up logs at ./log/docker/publishing_node1_2025-02-09_04-04-44__8d7793bb-16ee-4154-8ca3-b2cf8e88b540__wakuorg_nwaku:latest.log
2025-02-09 04:04:44.772 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32078
2025-02-09 04:04:44.772 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:04:45.282 ERROR [src.node.docker_mananger] Max retries reached for container fb70063a3551. Exiting log stream.
2025-02-09 04:04:45.772 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32078/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:45.775 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:04:45.776 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:04:45.776 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32078/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:45.778 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.199/tcp/32079/p2p/16Uiu2HAm2bXej3mVmjfmPCyQFiYuRaicN2tdCCet2BP7v7DtJ6ga","/ip4/172.18.104.199/tcp/32080/ws/p2p/16Uiu2HAm2bXej3mVmjfmPCyQFiYuRaicN2tdCCet2BP7v7DtJ6ga"],"enrUri":"enr:-L24QK2T89P198AJXsxLAs1wdFCS-R3zWmiQVp1yrNjgu79HVM052h3nJ6t3SPP9rEYOy3Otr5sV_UOCWxMDXn2EA84CgmlkgnY0gmlwhKwSaMeKbXVsdGlhZGRyc5YACASsEmjHBn1PAAoErBJoxwZ9UN0DgnJzhQADAQAAiXNlY3AyNTZrMaECaogzAEVs6-pLmH4PJdlP_Xamlbrp73QR7S8gPsXAeQODdGNwgn1Pg3VkcIJ9UYV3YWt1MgM"}'
2025-02-09 04:04:45.778 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:04:45.786 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:04:45.786 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-09_04-04-44__8d7793bb-16ee-4154-8ca3-b2cf8e88b540__wakuorg_nwaku:latest.log
2025-02-09 04:04:45.786 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:04:45.786 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:04:45.788 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:04:45.788 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.39.242
2025-02-09 04:04:45.788 DEBUG [src.node.docker_mananger] Generated ports ['18722', '18723', '18724', '18725', '18726']
2025-02-09 04:04:45.788 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:04:45.788 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:04:45.788 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:04:45.789 DEBUG [src.node.docker_mananger] docker run -i -t -p 18722:18722 -p 18723:18723 -p 18724:18724 -p 18725:18725 -p 18726:18726 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18724 --rest-port=18722 --tcp-port=18723 --discv5-udp-port=18725 --rest-address=0.0.0.0 --nat=extip:172.18.39.242 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a3a8b8e4dfbdb4dfbffd36b2cdc1cec7ecbb8eac3e716b8fad46afebebfc69d5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18726 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QK2T89P198AJXsxLAs1wdFCS-R3zWmiQVp1yrNjgu79HVM052h3nJ6t3SPP9rEYOy3Otr5sV_UOCWxMDXn2EA84CgmlkgnY0gmlwhKwSaMeKbXVsdGlhZGRyc5YACASsEmjHBn1PAAoErBJoxwZ9UN0DgnJzhQADAQAAiXNlY3AyNTZrMaECaogzAEVs6-pLmH4PJdlP_Xamlbrp73QR7S8gPsXAeQODdGNwgn1Pg3VkcIJ9UYV3YWt1MgM --storenode=/ip4/172.18.104.199/tcp/32079/p2p/16Uiu2HAm2bXej3mVmjfmPCyQFiYuRaicN2tdCCet2BP7v7DtJ6ga --store=true --relay=true
2025-02-09 04:04:46.024 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.39.242 waku acb81f2ed698a456b45db5072a0c7ec50a948c853be3acdb2938510e4dc103d5
2025-02-09 04:04:46.076 DEBUG [src.node.docker_mananger] Container started with ID acb81f2ed698. Setting up logs at ./log/docker/store_node1_2025-02-09_04-04-44__8d7793bb-16ee-4154-8ca3-b2cf8e88b540__wakuorg_nwaku:latest.log
2025-02-09 04:04:46.078 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18722
2025-02-09 04:04:46.079 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:04:47.079 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18722/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:47.082 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:04:47.082 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:04:47.082 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18722/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:47.084 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.39.242/tcp/18723/p2p/16Uiu2HAmSfQz77gHWwyVo8D3KftayoruacBHAps217hWjTTT72jY","/ip4/172.18.39.242/tcp/18724/ws/p2p/16Uiu2HAmSfQz77gHWwyVo8D3KftayoruacBHAps217hWjTTT72jY"],"enrUri":"enr:-L24QBgLYeKrYc-2GNNootlHVl_Rc76cOrdqVtYOqm14i6zCcxBvY1YJMgHmzgUJ28mbo-T3oSryA80XbB8d0p6B0YECgmlkgnY0gmlwhKwSJ_KKbXVsdGlhZGRyc5YACASsEifyBkkjAAoErBIn8gZJJN0DgnJzhQADAQAAiXNlY3AyNTZrMaED0B94ueYWuMnIjOSKYx5vt_QEtZv5ofBcrcaXlDGQiheDdGNwgkkjg3VkcIJJJYV3YWt1MgM"}'
2025-02-09 04:04:47.085 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:04:47.085 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18722/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.104.199/tcp/32079/p2p/16Uiu2HAm2bXej3mVmjfmPCyQFiYuRaicN2tdCCet2BP7v7DtJ6ga"]'
2025-02-09 04:04:47.088 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:47.088 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32078/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:04:47.090 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:47.091 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18722/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:04:47.093 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:47.094 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:47.094 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32078/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:47.100 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:47.101 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:47.302 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:47.302 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32078/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:47.309 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:47.309 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:47.510 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:47.510 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32078/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:47.517 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:47.517 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:47.718 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:47.718 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32078/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:47.724 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:47.725 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:47.925 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:47.926 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32078/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:47.932 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:47.932 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:48.133 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:48.133 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32078/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:48.139 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:48.139 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:48.339 DEBUG [tests.store.test_time_filter] inquering stored messages with start time 1739073884094144000 after end time 2430273888339779072
2025-02-09 04:04:48.340 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32078/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739073884094144000&endTime=2430273888339779072&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:48.344 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xde6c613b48abe8a650553c3b303a89c7950c8ff8af11bb28636b1c1e4cfadd61","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739073884094144000,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x85de6ae19a2bf93b6719d1c3e2f27f34ea7b052519a31b03ee0a81e826022c84","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739073886094150912,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0xbc793bd4f2ca3e3a784c85bcddcb481b6a54635f6acbf448adf1250b05bd2465","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739073886994152960,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0xf176f2ad4902e096594a4f16273e7d0263f4b00d3b3d88a727f4dba0c852ac3c","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739073887194156032,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x11fb12cb4bd44db93f8087d2b8612d2362542821f8a057298bc696f0e0ad4ece","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739073889094157056,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x08e9f4ec46a83ea09a3790123555588436df146212220e229d9583279565fd78","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739073897094158848,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
2025-02-09 04:04:48.384 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:04:48.385 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:04:48.385 DEBUG [src.node.waku_node] Stopping container with id b0f964d4210d
2025-02-09 04:04:49.332 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:04:49.332 DEBUG [src.node.waku_node] Stopping container with id acb81f2ed698
2025-02-09 04:04:50.145 ERROR [src.node.docker_mananger] Max retries reached for container b0f964d4210d. Exiting log stream.
2025-02-09 04:04:50.832 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:04:50.832 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:04:50.839 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:04:50.845 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:04:50.846 DEBUG [tests.conftest] Running fixture teardown: attach_logs_on_fail
2025-02-09 04:04:50.846 DEBUG [tests.conftest] Test failed, attempting to attach logs to the allure reports
2025-02-09 04:04:50.847 DEBUG [src.libs.common] Attaching file ./log/docker/publishing_node1_2025-02-09_04-04-44__8d7793bb-16ee-4154-8ca3-b2cf8e88b540__wakuorg_nwaku:latest.log
2025-02-09 04:04:50.848 DEBUG [src.libs.common] Attaching file ./log/docker/store_node1_2025-02-09_04-04-44__8d7793bb-16ee-4154-8ca3-b2cf8e88b540__wakuorg_nwaku:latest.log
