2025-02-09 04:05:53.865 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:05:53.866 DEBUG [tests.conftest] Running test: test_messages_with_timestamps_far_from_now with id: 2025-02-09_04-05-53__4ef9f22d-ff0a-4f2e-9461-c87147325409
2025-02-09 04:05:53.867 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:05:53.867 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-09 04:05:53.867 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-09 04:05:53.875 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:05:53.876 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-09_04-05-53__4ef9f22d-ff0a-4f2e-9461-c87147325409__wakuorg_nwaku:latest.log
2025-02-09 04:05:53.876 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:05:53.876 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:05:53.878 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:05:53.879 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.201.206
2025-02-09 04:05:53.879 DEBUG [src.node.docker_mananger] Generated ports ['35958', '35959', '35960', '35961', '35962']
2025-02-09 04:05:53.879 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:05:53.879 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:05:53.879 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:05:53.879 DEBUG [src.node.docker_mananger] docker run -i -t -p 35958:35958 -p 35959:35959 -p 35960:35960 -p 35961:35961 -p 35962:35962 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35960 --rest-port=35958 --tcp-port=35959 --discv5-udp-port=35961 --rest-address=0.0.0.0 --nat=extip:172.18.201.206 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=47fba6f3e41a25dd0027a7a3bc3454bab5eddda7a576bf56a5dc8b9db8d5e383 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35962 --metrics-logging=true --store=true --relay=true
2025-02-09 04:05:54.117 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.201.206 waku e88045434709e394f2bdf788f0a7638c1b1a7b9cab1c9fa7dd2ad46222eac0cb
2025-02-09 04:05:54.167 DEBUG [src.node.docker_mananger] Container started with ID e88045434709. Setting up logs at ./log/docker/publishing_node1_2025-02-09_04-05-53__4ef9f22d-ff0a-4f2e-9461-c87147325409__wakuorg_nwaku:latest.log
2025-02-09 04:05:54.169 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 35958
2025-02-09 04:05:54.171 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:05:54.703 ERROR [src.node.docker_mananger] Max retries reached for container 94fa60529b39. Exiting log stream.
2025-02-09 04:05:55.172 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35958/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:55.175 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:05:55.175 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:05:55.175 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35958/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:55.177 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.201.206/tcp/35959/p2p/16Uiu2HAm2iZWgaB1ajr8qMve2B3VZi7YFCmDcHkF7g3zLFUUKAg5","/ip4/172.18.201.206/tcp/35960/ws/p2p/16Uiu2HAm2iZWgaB1ajr8qMve2B3VZi7YFCmDcHkF7g3zLFUUKAg5"],"enrUri":"enr:-L24QFEZkX0CGvTHYsFJs1dqYmNQs4dfbbPERJYZXJr27JjpHmibNs5aRdS4X0Dey0T_RQkuS3phdyyILtEYfyqIqe0CgmlkgnY0gmlwhKwSyc6KbXVsdGlhZGRyc5YACASsEsnOBox3AAoErBLJzgaMeN0DgnJzhQADAQAAiXNlY3AyNTZrMaECbFVel7TIEwf-kx5zbR4rzg6__YlWAmcIwxzEp0rVtn6DdGNwgox3g3VkcIKMeYV3YWt1MgM"}'
2025-02-09 04:05:55.178 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:05:55.184 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:05:55.184 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-09_04-05-53__4ef9f22d-ff0a-4f2e-9461-c87147325409__wakuorg_nwaku:latest.log
2025-02-09 04:05:55.185 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:05:55.185 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:05:55.186 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:05:55.186 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.94.183
2025-02-09 04:05:55.186 DEBUG [src.node.docker_mananger] Generated ports ['20855', '20856', '20857', '20858', '20859']
2025-02-09 04:05:55.186 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:05:55.187 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:05:55.187 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:05:55.187 DEBUG [src.node.docker_mananger] docker run -i -t -p 20855:20855 -p 20856:20856 -p 20857:20857 -p 20858:20858 -p 20859:20859 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20857 --rest-port=20855 --tcp-port=20856 --discv5-udp-port=20858 --rest-address=0.0.0.0 --nat=extip:172.18.94.183 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fd2cdfb18511d1aaf5c55769fb0a201fd7bceedcaae7a6c3dbabcf877a4c00ab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20859 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFEZkX0CGvTHYsFJs1dqYmNQs4dfbbPERJYZXJr27JjpHmibNs5aRdS4X0Dey0T_RQkuS3phdyyILtEYfyqIqe0CgmlkgnY0gmlwhKwSyc6KbXVsdGlhZGRyc5YACASsEsnOBox3AAoErBLJzgaMeN0DgnJzhQADAQAAiXNlY3AyNTZrMaECbFVel7TIEwf-kx5zbR4rzg6__YlWAmcIwxzEp0rVtn6DdGNwgox3g3VkcIKMeYV3YWt1MgM --storenode=/ip4/172.18.201.206/tcp/35959/p2p/16Uiu2HAm2iZWgaB1ajr8qMve2B3VZi7YFCmDcHkF7g3zLFUUKAg5 --store=true --relay=true
2025-02-09 04:05:55.423 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.94.183 waku 98c056c5299ee9867ce4ac1590abb026fbfcfe158dc7776f919419eecf58e5e2
2025-02-09 04:05:55.475 DEBUG [src.node.docker_mananger] Container started with ID 98c056c5299e. Setting up logs at ./log/docker/store_node1_2025-02-09_04-05-53__4ef9f22d-ff0a-4f2e-9461-c87147325409__wakuorg_nwaku:latest.log
2025-02-09 04:05:55.477 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20855
2025-02-09 04:05:55.477 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:05:56.478 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20855/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:56.481 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:05:56.481 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:05:56.481 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20855/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:56.484 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.94.183/tcp/20856/p2p/16Uiu2HAmD23xZiZoxNQXaDT66zoKw8o8mijNjbMqxtQuz6n1b6yj","/ip4/172.18.94.183/tcp/20857/ws/p2p/16Uiu2HAmD23xZiZoxNQXaDT66zoKw8o8mijNjbMqxtQuz6n1b6yj"],"enrUri":"enr:-L24QIy5msbld-spp8O302V67-H9_yVx6mbQ-aBe5icpPMdyEXlw5CWgsQif8CLSuE9QHNitIiwMhCb3AojGhgaHsGUCgmlkgnY0gmlwhKwSXreKbXVsdGlhZGRyc5YACASsEl63BlF4AAoErBJetwZRed0DgnJzhQADAQAAiXNlY3AyNTZrMaEDBWVG21FicgDYV31dsAa_qrZ-0Tzm8GRAskM48EG_mL6DdGNwglF4g3VkcIJReoV3YWt1MgM"}'
2025-02-09 04:05:56.484 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:05:56.484 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20855/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.201.206/tcp/35959/p2p/16Uiu2HAm2iZWgaB1ajr8qMve2B3VZi7YFCmDcHkF7g3zLFUUKAg5"]'
2025-02-09 04:05:56.487 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:56.487 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35958/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:05:56.489 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:56.490 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20855/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:05:56.492 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:56.493 DEBUG [tests.store.test_time_filter] Running test with payload 20 sec Past
2025-02-09 04:05:56.493 DEBUG [src.steps.store] Relaying message
2025-02-09 04:05:56.493 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35958/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:05:56.498 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:56.498 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:05:56.699 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-09 04:05:56.700 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35958/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:56.703 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-09 04:05:56.704 DEBUG [tests.store.test_time_filter] Running test with payload 40 sec Future
2025-02-09 04:05:56.704 DEBUG [src.steps.store] Relaying message
2025-02-09 04:05:56.704 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35958/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:05:56.709 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:56.710 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:05:56.911 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-09 04:05:56.911 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35958/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:56.914 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-09 04:05:56.916 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:05:56.917 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:05:56.917 DEBUG [src.node.waku_node] Stopping container with id e88045434709
2025-02-09 04:05:57.703 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:05:57.703 DEBUG [src.node.waku_node] Stopping container with id 98c056c5299e
2025-02-09 04:05:58.516 ERROR [src.node.docker_mananger] Max retries reached for container e88045434709. Exiting log stream.
2025-02-09 04:05:59.232 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:05:59.233 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:05:59.239 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:05:59.244 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
