2025-02-09 04:03:37.295 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:03:37.295 DEBUG [tests.conftest] Running test: test_light_push_with_payload_less_than_150_kb with id: 2025-02-09_04-03-37__35c00df6-87f9-427a-bf89-6182c47fca9a
2025-02-09 04:03:37.296 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:03:37.296 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-09 04:03:37.306 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:03:37.306 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-09_04-03-37__35c00df6-87f9-427a-bf89-6182c47fca9a__wakuorg_nwaku:latest.log
2025-02-09 04:03:37.306 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:03:37.307 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:03:37.309 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:03:37.309 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.237.75
2025-02-09 04:03:37.309 DEBUG [src.node.docker_mananger] Generated ports ['49797', '49798', '49799', '49800', '49801']
2025-02-09 04:03:37.310 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:03:37.310 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:03:37.310 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:03:37.310 DEBUG [src.node.docker_mananger] docker run -i -t -p 49797:49797 -p 49798:49798 -p 49799:49799 -p 49800:49800 -p 49801:49801 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49799 --rest-port=49797 --tcp-port=49798 --discv5-udp-port=49800 --rest-address=0.0.0.0 --nat=extip:172.18.237.75 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cc07bbec85bb0caf6de0a3f4a6fcbcc0030f8f945a8b69cace72c6bfe9446e1a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49801 --metrics-logging=true --lightpush=true --relay=true
2025-02-09 04:03:37.544 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.237.75 waku b249621d9b3f6b4e4f316f2db87e87538f8c696d8dda6347bb01a060a5044e70
2025-02-09 04:03:37.597 DEBUG [src.node.docker_mananger] Container started with ID b249621d9b3f. Setting up logs at ./log/docker/receiving_node1_2025-02-09_04-03-37__35c00df6-87f9-427a-bf89-6182c47fca9a__wakuorg_nwaku:latest.log
2025-02-09 04:03:37.599 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49797
2025-02-09 04:03:37.601 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:03:38.119 ERROR [src.node.docker_mananger] Max retries reached for container 3732c0a336f0. Exiting log stream.
2025-02-09 04:03:38.601 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49797/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:38.604 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:03:38.605 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:03:38.605 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49797/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:38.607 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.237.75/tcp/49798/p2p/16Uiu2HAm6cgwu1Hs3G93DMSwxgCs2ofGBq3KX7Uq8c4kxZoAWPuM","/ip4/172.18.237.75/tcp/49799/ws/p2p/16Uiu2HAm6cgwu1Hs3G93DMSwxgCs2ofGBq3KX7Uq8c4kxZoAWPuM"],"enrUri":"enr:-L24QHL36y0jqQb2i92GN7DXY2T-CtmQ2IzcZo4Ln_n8RTayFlI-8IhBor0aglBqjYbBfy2RKlXhBPvTSopSEfsvPOoCgmlkgnY0gmlwhKwS7UuKbXVsdGlhZGRyc5YACASsEu1LBsKGAAoErBLtSwbCh90DgnJzhQADAQAAiXNlY3AyNTZrMaECpkMJ8L-QA7BYg6pTrN1DLD3xjbLcbGv47DKRkoSkAkyDdGNwgsKGg3VkcILCiIV3YWt1Mgk"}'
2025-02-09 04:03:38.607 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:03:38.614 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:03:38.615 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-09_04-03-37__35c00df6-87f9-427a-bf89-6182c47fca9a__wakuorg_nwaku:latest.log
2025-02-09 04:03:38.615 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:03:38.615 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:03:38.616 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:03:38.616 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.110.222
2025-02-09 04:03:38.617 DEBUG [src.node.docker_mananger] Generated ports ['34101', '34102', '34103', '34104', '34105']
2025-02-09 04:03:38.617 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:03:38.617 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:03:38.617 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:03:38.617 DEBUG [src.node.docker_mananger] docker run -i -t -p 34101:34101 -p 34102:34102 -p 34103:34103 -p 34104:34104 -p 34105:34105 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34103 --rest-port=34101 --tcp-port=34102 --discv5-udp-port=34104 --rest-address=0.0.0.0 --nat=extip:172.18.110.222 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a86c3c6f57cd08e5e31c7e4d3d4c514b57ecd65efe3ffeb1ea1a13afb7df8fc7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34105 --metrics-logging=true --lightpush=false --relay=true
2025-02-09 04:03:38.857 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.110.222 waku 99d064e319e606e442b34dd6d8c4bc40affe582e3489ef49509b520682dee840
2025-02-09 04:03:38.907 DEBUG [src.node.docker_mananger] Container started with ID 99d064e319e6. Setting up logs at ./log/docker/receiving_node2_2025-02-09_04-03-37__35c00df6-87f9-427a-bf89-6182c47fca9a__wakuorg_nwaku:latest.log
2025-02-09 04:03:38.907 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 34101
2025-02-09 04:03:38.908 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:03:39.909 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34101/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:39.912 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:03:39.912 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:03:39.912 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34101/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:39.914 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.110.222/tcp/34102/p2p/16Uiu2HAmKLVmRMmFyiuPnvTQzWsuCQkzocko4mjLtoDDt55p6NC5","/ip4/172.18.110.222/tcp/34103/ws/p2p/16Uiu2HAmKLVmRMmFyiuPnvTQzWsuCQkzocko4mjLtoDDt55p6NC5"],"enrUri":"enr:-L24QMtsarpNBzUHSC3UcIGc6YaMFy9ufcqckEvoBmks7bBvOTfLXpWpts1-qHfn8jzOecbrw25OQo4ghPkS7ITOJd4CgmlkgnY0gmlwhKwSbt6KbXVsdGlhZGRyc5YACASsEm7eBoU2AAoErBJu3gaFN90DgnJzhQADAQAAiXNlY3AyNTZrMaEDY0UIsK4SH9oAYGgsnPXJluuF5KiR4tW4fwP3RAyxyi6DdGNwgoU2g3VkcIKFOIV3YWt1MgE"}'
2025-02-09 04:03:39.915 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:03:39.915 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34101/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.237.75/tcp/49798/p2p/16Uiu2HAm6cgwu1Hs3G93DMSwxgCs2ofGBq3KX7Uq8c4kxZoAWPuM"]'
2025-02-09 04:03:39.955 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:39.964 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:03:39.964 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-09_04-03-37__35c00df6-87f9-427a-bf89-6182c47fca9a__wakuorg_nwaku:latest.log
2025-02-09 04:03:39.964 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:03:39.964 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:03:39.966 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:03:39.966 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.205.54
2025-02-09 04:03:39.966 DEBUG [src.node.docker_mananger] Generated ports ['54713', '54714', '54715', '54716', '54717']
2025-02-09 04:03:39.966 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:03:39.967 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:03:39.967 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:03:39.967 DEBUG [src.node.docker_mananger] docker run -i -t -p 54713:54713 -p 54714:54714 -p 54715:54715 -p 54716:54716 -p 54717:54717 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54715 --rest-port=54713 --tcp-port=54714 --discv5-udp-port=54716 --rest-address=0.0.0.0 --nat=extip:172.18.205.54 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d4bf7f0907fdbd8fa5c3f8d925bd06d2dd6bb83123e1cc44ba636cad325a4dde --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54717 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QHL36y0jqQb2i92GN7DXY2T-CtmQ2IzcZo4Ln_n8RTayFlI-8IhBor0aglBqjYbBfy2RKlXhBPvTSopSEfsvPOoCgmlkgnY0gmlwhKwS7UuKbXVsdGlhZGRyc5YACASsEu1LBsKGAAoErBLtSwbCh90DgnJzhQADAQAAiXNlY3AyNTZrMaECpkMJ8L-QA7BYg6pTrN1DLD3xjbLcbGv47DKRkoSkAkyDdGNwgsKGg3VkcILCiIV3YWt1Mgk --lightpushnode=/ip4/172.18.237.75/tcp/49798/p2p/16Uiu2HAm6cgwu1Hs3G93DMSwxgCs2ofGBq3KX7Uq8c4kxZoAWPuM --lightpush=true --relay=false
2025-02-09 04:03:40.213 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.205.54 waku 8afb69cf97f6a3b09612288d0bfc9cc47fc906c07dc8431191656656e25eb539
2025-02-09 04:03:40.261 DEBUG [src.node.docker_mananger] Container started with ID 8afb69cf97f6. Setting up logs at ./log/docker/lightpush_node1_2025-02-09_04-03-37__35c00df6-87f9-427a-bf89-6182c47fca9a__wakuorg_nwaku:latest.log
2025-02-09 04:03:40.261 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 54713
2025-02-09 04:03:40.261 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:03:41.262 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54713/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:41.265 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:03:41.265 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:03:41.265 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54713/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:41.267 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.205.54/tcp/54714/p2p/16Uiu2HAmE8wC4wVuye69on9hFLa7VfRyoZGjsrfAzUzYmXRbLtzk","/ip4/172.18.205.54/tcp/54715/ws/p2p/16Uiu2HAmE8wC4wVuye69on9hFLa7VfRyoZGjsrfAzUzYmXRbLtzk"],"enrUri":"enr:-L24QKGIs-rFdhkfTCJoo15ZJVLhhtWwOG_CGyyMTPDQmtaKPlqfn82JYPdy6HDvIyEwKB7OZkyys5JI1Xa9_qJLvoICgmlkgnY0gmlwhKwSzTaKbXVsdGlhZGRyc5YACASsEs02BtW6AAoErBLNNgbVu90DgnJzhQADAQAAiXNlY3AyNTZrMaEDFgRgsUAmYK3J9QUn1D1CC4ci_nQ9XO8AjvIyF6xoddmDdGNwgtW6g3VkcILVvIV3YWt1Mgg"}'
2025-02-09 04:03:41.267 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:03:41.268 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54713/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.237.75/tcp/49798/p2p/16Uiu2HAm6cgwu1Hs3G93DMSwxgCs2ofGBq3KX7Uq8c4kxZoAWPuM"]'
2025-02-09 04:03:41.312 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:41.313 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54713/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.110.222/tcp/34102/p2p/16Uiu2HAmKLVmRMmFyiuPnvTQzWsuCQkzocko4mjLtoDDt55p6NC5"]'
2025-02-09 04:03:41.341 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:41.343 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49797/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:03:41.351 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:41.353 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34101/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:03:41.357 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:41.358 DEBUG [tests.light_push.test_publish] Running test with payload length of 143360 bytes
2025-02-09 04:03:41.360 DEBUG [src.steps.light_push] Lightpushing message
2025-02-09 04:03:41.362 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-09 04:03:41.517 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:41.517 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-09 04:03:41.618 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-09 04:03:41.618 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49797/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:41.623 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-09 04:03:41.626 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-09 04:03:41.626 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34101/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:41.631 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-09 04:03:41.635 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:03:41.636 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:03:41.636 DEBUG [src.node.waku_node] Stopping container with id b249621d9b3f
2025-02-09 04:03:42.846 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:03:42.847 DEBUG [src.node.waku_node] Stopping container with id 99d064e319e6
2025-02-09 04:03:43.686 ERROR [src.node.docker_mananger] Max retries reached for container b249621d9b3f. Exiting log stream.
2025-02-09 04:03:43.890 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:03:43.890 DEBUG [src.node.waku_node] Stopping container with id 8afb69cf97f6
2025-02-09 04:03:44.703 ERROR [src.node.docker_mananger] Max retries reached for container 99d064e319e6. Exiting log stream.
2025-02-09 04:03:45.239 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:03:45.241 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:03:45.253 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:03:45.260 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:03:45.279 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
