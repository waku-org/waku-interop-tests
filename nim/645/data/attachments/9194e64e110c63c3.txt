2025-02-09 04:05:11.172 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:05:11.173 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_very_large_request_id with id: 2025-02-09_04-05-11__4316be2f-d03b-478f-827e-7ea61ea4681e
2025-02-09 04:05:11.173 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:05:11.173 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-09 04:05:11.174 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-09 04:05:11.180 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:05:11.180 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-09_04-05-11__4316be2f-d03b-478f-827e-7ea61ea4681e__wakuorg_nwaku:latest.log
2025-02-09 04:05:11.180 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:05:11.180 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:05:11.181 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:05:11.182 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.96.243
2025-02-09 04:05:11.182 DEBUG [src.node.docker_mananger] Generated ports ['56388', '56389', '56390', '56391', '56392']
2025-02-09 04:05:11.182 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:05:11.182 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:05:11.182 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:05:11.182 DEBUG [src.node.docker_mananger] docker run -i -t -p 56388:56388 -p 56389:56389 -p 56390:56390 -p 56391:56391 -p 56392:56392 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56390 --rest-port=56388 --tcp-port=56389 --discv5-udp-port=56391 --rest-address=0.0.0.0 --nat=extip:172.18.96.243 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9b19ed1c3bfee2dda178ca3a42c84c5fc9e1333c4f4587bfdec0fc1fd5da6ec0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56392 --metrics-logging=true --relay=true --filter=true
2025-02-09 04:05:11.414 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.96.243 waku c2ca801d162fe935448516523dae444b68e331a918b45c4cf54d98fa90423de6
2025-02-09 04:05:11.459 DEBUG [src.node.docker_mananger] Container started with ID c2ca801d162f. Setting up logs at ./log/docker/node1_2025-02-09_04-05-11__4316be2f-d03b-478f-827e-7ea61ea4681e__wakuorg_nwaku:latest.log
2025-02-09 04:05:11.460 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56388
2025-02-09 04:05:11.460 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:05:11.979 ERROR [src.node.docker_mananger] Max retries reached for container 8d6da2f69e85. Exiting log stream.
2025-02-09 04:05:12.460 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56388/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:12.463 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:05:12.464 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:05:12.464 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56388/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:12.466 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.96.243/tcp/56389/p2p/16Uiu2HAm8eGbC22xaofLnL3thfyiB9Sqe9VfGDnkx4BGkTdhZaBi","/ip4/172.18.96.243/tcp/56390/ws/p2p/16Uiu2HAm8eGbC22xaofLnL3thfyiB9Sqe9VfGDnkx4BGkTdhZaBi"],"enrUri":"enr:-L24QAtkN1FC7IMRKNDFlbrLafSA3QrzFseOa74uEyOBTioBQYlSBsOjWMvl56dZVgOw4r7GOFZvfNNeep_NbM61I5ECgmlkgnY0gmlwhKwSYPOKbXVsdGlhZGRyc5YACASsEmDzBtxFAAoErBJg8wbcRt0DgnJzhQADAQAAiXNlY3AyNTZrMaECxGIIoys6x76fykfvzxd4Zc7gBPqjoWKcZDoqdtoYGxGDdGNwgtxFg3VkcILcR4V3YWt1MgU"}'
2025-02-09 04:05:12.466 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:05:12.466 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-09 04:05:12.473 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:05:12.473 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-09_04-05-11__4316be2f-d03b-478f-827e-7ea61ea4681e__wakuorg_nwaku:latest.log
2025-02-09 04:05:12.473 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:05:12.473 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:05:12.475 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:05:12.475 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.1.15
2025-02-09 04:05:12.475 DEBUG [src.node.docker_mananger] Generated ports ['37331', '37332', '37333', '37334', '37335']
2025-02-09 04:05:12.475 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:05:12.475 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:05:12.475 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:05:12.476 DEBUG [src.node.docker_mananger] docker run -i -t -p 37331:37331 -p 37332:37332 -p 37333:37333 -p 37334:37334 -p 37335:37335 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37333 --rest-port=37331 --tcp-port=37332 --discv5-udp-port=37334 --rest-address=0.0.0.0 --nat=extip:172.18.1.15 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b4ab70eec02d2d9ce3442a5ef1363efc8ebaf85fcf0548f4cc0deb8bb728d8b8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37335 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QAtkN1FC7IMRKNDFlbrLafSA3QrzFseOa74uEyOBTioBQYlSBsOjWMvl56dZVgOw4r7GOFZvfNNeep_NbM61I5ECgmlkgnY0gmlwhKwSYPOKbXVsdGlhZGRyc5YACASsEmDzBtxFAAoErBJg8wbcRt0DgnJzhQADAQAAiXNlY3AyNTZrMaECxGIIoys6x76fykfvzxd4Zc7gBPqjoWKcZDoqdtoYGxGDdGNwgtxFg3VkcILcR4V3YWt1MgU --filternode=/ip4/172.18.96.243/tcp/56389/p2p/16Uiu2HAm8eGbC22xaofLnL3thfyiB9Sqe9VfGDnkx4BGkTdhZaBi
2025-02-09 04:05:12.705 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.1.15 waku e8ffbf856a5d2e83df14d503d9394ca2bb1c286a6d11733f3646c3e2f2c3e1bd
2025-02-09 04:05:12.755 DEBUG [src.node.docker_mananger] Container started with ID e8ffbf856a5d. Setting up logs at ./log/docker/node2_2025-02-09_04-05-11__4316be2f-d03b-478f-827e-7ea61ea4681e__wakuorg_nwaku:latest.log
2025-02-09 04:05:12.756 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37331
2025-02-09 04:05:12.756 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:05:13.756 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37331/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:13.759 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:05:13.760 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:05:13.760 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37331/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:13.762 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.1.15/tcp/37332/p2p/16Uiu2HAmDcfyDAhMrJCxyYqCxq6ECADcgPJSArFHFYDx9ihYVAWq","/ip4/172.18.1.15/tcp/37333/ws/p2p/16Uiu2HAmDcfyDAhMrJCxyYqCxq6ECADcgPJSArFHFYDx9ihYVAWq"],"enrUri":"enr:-L24QLsqvPsuhm_JD8ZspuaaXzgf7jYPLVx3J7DY7TBrxYP8QdwghDFpypRnD7Aoj1bXq-CyfpDZFKvGVx4oI-wH8s8CgmlkgnY0gmlwhKwSAQ-KbXVsdGlhZGRyc5YACASsEgEPBpHUAAoErBIBDwaR1d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDkO-AXxccBD9-_Svz679I3sLIuULuzhc9Th9SfK9fpaDdGNwgpHUg3VkcIKR1oV3YWt1MgA"}'
2025-02-09 04:05:13.762 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:05:13.763 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37331/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.96.243/tcp/56389/p2p/16Uiu2HAm8eGbC22xaofLnL3thfyiB9Sqe9VfGDnkx4BGkTdhZaBi"]'
2025-02-09 04:05:13.797 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:13.797 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-09 04:05:13.798 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56388/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-09 04:05:13.819 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:13.820 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37331/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "9f522e63-b966-468c-a704-5c01e75adc3f", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-09 04:05:13.831 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"9f522e63-b966-468c-a704-5c01e75adc3f","statusDesc":"OK"}'
2025-02-09 04:05:13.832 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56388/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:05:13.840 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:13.840 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-09 04:05:13.941 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-09 04:05:13.941 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37331/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:13.944 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1739073913832880384,"ephemeral":false}]'
2025-02-09 04:05:13.946 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:37331/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345678901234567890123456789012345678901234567890", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-09 04:05:13.954 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"12345678901234567890123456789012345678901234567890","statusDesc":"OK"}'
2025-02-09 04:05:13.954 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56388/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:05:13.957 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:13.958 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-09 04:05:14.058 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-09 04:05:14.058 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37331/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:14.061 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:37331/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto. Response content: b'Not subscribed to topic: /test/1/waku-filter/proto'
2025-02-09 04:05:14.064 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:05:14.064 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:05:14.065 DEBUG [src.node.waku_node] Stopping container with id c2ca801d162f
2025-02-09 04:05:15.059 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:05:15.059 DEBUG [src.node.waku_node] Stopping container with id e8ffbf856a5d
2025-02-09 04:05:15.872 ERROR [src.node.docker_mananger] Max retries reached for container c2ca801d162f. Exiting log stream.
2025-02-09 04:05:16.555 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:05:16.556 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:05:16.561 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:05:16.566 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
