2025-02-09 04:06:11.690 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:06:11.690 DEBUG [tests.conftest] Running test: test_main_node_only_lightpush__peer_only_filter with id: 2025-02-09_04-06-11__7171be27-c11b-4312-b877-5e94194536de
2025-02-09 04:06:11.691 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:06:11.691 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-09 04:06:11.697 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:06:11.697 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-09_04-06-11__7171be27-c11b-4312-b877-5e94194536de__wakuorg_nwaku:latest.log
2025-02-09 04:06:11.698 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:06:11.698 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:06:11.699 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:06:11.699 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.36.74
2025-02-09 04:06:11.699 DEBUG [src.node.docker_mananger] Generated ports ['48229', '48230', '48231', '48232', '48233']
2025-02-09 04:06:11.699 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:06:11.699 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:06:11.700 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:06:11.700 DEBUG [src.node.docker_mananger] docker run -i -t -p 48229:48229 -p 48230:48230 -p 48231:48231 -p 48232:48232 -p 48233:48233 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48231 --rest-port=48229 --tcp-port=48230 --discv5-udp-port=48232 --rest-address=0.0.0.0 --nat=extip:172.18.36.74 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9c5aa916b6e9f4e7c6f65dde327e06cb8caf8ab37ebddcbf3bb0befd9fa247ed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48233 --metrics-logging=true --lightpush=false --relay=false --filter=true
2025-02-09 04:06:11.928 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.36.74 waku 4239d7038ea939bcd443a59946f7e7be404eccf9ed2649117de5f14097ce847d
2025-02-09 04:06:11.972 DEBUG [src.node.docker_mananger] Container started with ID 4239d7038ea9. Setting up logs at ./log/docker/receiving_node1_2025-02-09_04-06-11__7171be27-c11b-4312-b877-5e94194536de__wakuorg_nwaku:latest.log
2025-02-09 04:06:11.973 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 48229
2025-02-09 04:06:11.973 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:06:12.490 ERROR [src.node.docker_mananger] Max retries reached for container 7487e76acb12. Exiting log stream.
2025-02-09 04:06:12.974 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48229/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:06:12.977 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:06:12.977 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:06:12.977 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48229/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:06:12.979 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.36.74/tcp/48230/p2p/16Uiu2HAkx5ztzjHXFf3pY5MpEfvK7TG7FTsPfKm4x5GacJx42caY","/ip4/172.18.36.74/tcp/48231/ws/p2p/16Uiu2HAkx5ztzjHXFf3pY5MpEfvK7TG7FTsPfKm4x5GacJx42caY"],"enrUri":"enr:-L24QGlJTyXwY9RaWlZ-SuxNN2AL7vDJVjLljBeBdpM3N2U3AoGijjDA5X2Qd0TSld4YAULKpea-RRBET_QwIFrFOTMCgmlkgnY0gmlwhKwSJEqKbXVsdGlhZGRyc5YACASsEiRKBrxmAAoErBIkSga8Z90DgnJzhQADAQAAiXNlY3AyNTZrMaECJ4jVnfpkrC56wQPJ6pvCXlZu787ONM41ZxqbXhvjcv2DdGNwgrxmg3VkcIK8aIV3YWt1MgQ"}'
2025-02-09 04:06:12.980 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:06:12.986 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:06:12.986 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-09_04-06-11__7171be27-c11b-4312-b877-5e94194536de__wakuorg_nwaku:latest.log
2025-02-09 04:06:12.987 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:06:12.987 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:06:12.988 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:06:12.988 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.172.212
2025-02-09 04:06:12.988 DEBUG [src.node.docker_mananger] Generated ports ['58907', '58908', '58909', '58910', '58911']
2025-02-09 04:06:12.989 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:06:12.989 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:06:12.989 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:06:12.989 DEBUG [src.node.docker_mananger] docker run -i -t -p 58907:58907 -p 58908:58908 -p 58909:58909 -p 58910:58910 -p 58911:58911 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58909 --rest-port=58907 --tcp-port=58908 --discv5-udp-port=58910 --rest-address=0.0.0.0 --nat=extip:172.18.172.212 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=145a9fb7a0e504cfdd4afaabb0c9e7f0d0ebd07ff665a01bcda01a05480f1b20 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58911 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QGlJTyXwY9RaWlZ-SuxNN2AL7vDJVjLljBeBdpM3N2U3AoGijjDA5X2Qd0TSld4YAULKpea-RRBET_QwIFrFOTMCgmlkgnY0gmlwhKwSJEqKbXVsdGlhZGRyc5YACASsEiRKBrxmAAoErBIkSga8Z90DgnJzhQADAQAAiXNlY3AyNTZrMaECJ4jVnfpkrC56wQPJ6pvCXlZu787ONM41ZxqbXhvjcv2DdGNwgrxmg3VkcIK8aIV3YWt1MgQ --lightpushnode=/ip4/172.18.36.74/tcp/48230/p2p/16Uiu2HAkx5ztzjHXFf3pY5MpEfvK7TG7FTsPfKm4x5GacJx42caY --lightpush=true --relay=false
2025-02-09 04:06:13.223 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.172.212 waku 81372f2a98772f063daa69a9b4a5e40a63d75405f1360daf45bd88c29830a39d
2025-02-09 04:06:13.272 DEBUG [src.node.docker_mananger] Container started with ID 81372f2a9877. Setting up logs at ./log/docker/lightpush_node1_2025-02-09_04-06-11__7171be27-c11b-4312-b877-5e94194536de__wakuorg_nwaku:latest.log
2025-02-09 04:06:13.273 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58907
2025-02-09 04:06:13.273 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:06:14.273 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58907/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:06:14.276 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:06:14.276 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:06:14.276 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58907/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:06:14.279 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.172.212/tcp/58908/p2p/16Uiu2HAmTBQdSYGXxJiGnyQxR96WehCvuHJmo9E95g881SQMnn4i","/ip4/172.18.172.212/tcp/58909/ws/p2p/16Uiu2HAmTBQdSYGXxJiGnyQxR96WehCvuHJmo9E95g881SQMnn4i"],"enrUri":"enr:-L24QOZEO_hLVpLDgiLU8sBQEJ3vgFVT4Ff6SHU9Y6ZHFyh-CL--OCl9MZRp7Ost53IysJaASy6_3OYPNqyuDjnqZOgCgmlkgnY0gmlwhKwSrNSKbXVsdGlhZGRyc5YACASsEqzUBuYcAAoErBKs1AbmHd0DgnJzhQADAQAAiXNlY3AyNTZrMaED185-NOpBXP0OrxTEFDB_BuIiP6EX7MYFLxZumSO2VRODdGNwguYcg3VkcILmHoV3YWt1Mgg"}'
2025-02-09 04:06:14.279 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:06:14.279 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58907/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.36.74/tcp/48230/p2p/16Uiu2HAkx5ztzjHXFf3pY5MpEfvK7TG7FTsPfKm4x5GacJx42caY"]'
2025-02-09 04:06:14.311 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:06:14.312 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58907/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739073974312106240}}'
2025-02-09 04:06:14.335 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:58907/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2025-02-09 04:06:14.336 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:06:14.337 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:06:14.337 DEBUG [src.node.waku_node] Stopping container with id 4239d7038ea9
2025-02-09 04:06:15.436 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:06:15.437 DEBUG [src.node.waku_node] Stopping container with id 81372f2a9877
2025-02-09 04:06:16.247 ERROR [src.node.docker_mananger] Max retries reached for container 4239d7038ea9. Exiting log stream.
2025-02-09 04:06:16.928 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:06:16.929 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:06:16.932 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:06:16.935 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
