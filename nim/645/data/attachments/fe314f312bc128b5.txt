2025-02-09 04:05:35.132 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:05:35.133 DEBUG [tests.conftest] Running test: test_store_with_invalid_hash with id: 2025-02-09_04-05-35__2acc571e-15cf-4d76-a27c-b1f21eca928b
2025-02-09 04:05:35.133 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:05:35.133 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-09 04:05:35.133 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-09 04:05:35.140 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:05:35.140 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-09_04-05-35__2acc571e-15cf-4d76-a27c-b1f21eca928b__wakuorg_nwaku:latest.log
2025-02-09 04:05:35.140 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:05:35.140 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:05:35.141 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:05:35.142 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.228.174
2025-02-09 04:05:35.142 DEBUG [src.node.docker_mananger] Generated ports ['50288', '50289', '50290', '50291', '50292']
2025-02-09 04:05:35.142 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:05:35.142 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:05:35.142 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:05:35.142 DEBUG [src.node.docker_mananger] docker run -i -t -p 50288:50288 -p 50289:50289 -p 50290:50290 -p 50291:50291 -p 50292:50292 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50290 --rest-port=50288 --tcp-port=50289 --discv5-udp-port=50291 --rest-address=0.0.0.0 --nat=extip:172.18.228.174 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a56df4dc25b17dfb5cccfbf4ef02aec8ecbb8cd0e3b016a1fe7ca0af070fd719 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50292 --metrics-logging=true --store=true --relay=true
2025-02-09 04:05:35.372 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.228.174 waku e37c1cd598c30c82a80fe37dbfbf764cac2453d4c159528f449ed3ec11f7dcc0
2025-02-09 04:05:35.419 DEBUG [src.node.docker_mananger] Container started with ID e37c1cd598c3. Setting up logs at ./log/docker/publishing_node1_2025-02-09_04-05-35__2acc571e-15cf-4d76-a27c-b1f21eca928b__wakuorg_nwaku:latest.log
2025-02-09 04:05:35.419 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 50288
2025-02-09 04:05:35.420 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:05:35.938 ERROR [src.node.docker_mananger] Max retries reached for container 1200afe19c61. Exiting log stream.
2025-02-09 04:05:36.420 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50288/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:36.423 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:05:36.423 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:05:36.424 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50288/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:36.426 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.228.174/tcp/50289/p2p/16Uiu2HAmM2cAaW7qtVghD4AojpzX8BoXFg74HQ4bqcNAY4PuaQzm","/ip4/172.18.228.174/tcp/50290/ws/p2p/16Uiu2HAmM2cAaW7qtVghD4AojpzX8BoXFg74HQ4bqcNAY4PuaQzm"],"enrUri":"enr:-L24QBKYcwS-ODSp1I3mwwk0qc_HlNpLayDwT7BCStuOxpmuJqXRFyoxnfzWhcxplRj_b9XvJONp0e45KHyK8odzvCkCgmlkgnY0gmlwhKwS5K6KbXVsdGlhZGRyc5YACASsEuSuBsRxAAoErBLkrgbEct0DgnJzhQADAQAAiXNlY3AyNTZrMaEDfGcwXJfJV0KmCBIq3pIrbJSh72IEue16TOoLJi5YrLqDdGNwgsRxg3VkcILEc4V3YWt1MgM"}'
2025-02-09 04:05:36.426 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:05:36.433 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:05:36.433 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-09_04-05-35__2acc571e-15cf-4d76-a27c-b1f21eca928b__wakuorg_nwaku:latest.log
2025-02-09 04:05:36.433 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:05:36.434 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:05:36.435 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:05:36.435 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.173.4
2025-02-09 04:05:36.435 DEBUG [src.node.docker_mananger] Generated ports ['48565', '48566', '48567', '48568', '48569']
2025-02-09 04:05:36.435 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:05:36.436 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:05:36.436 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:05:36.436 DEBUG [src.node.docker_mananger] docker run -i -t -p 48565:48565 -p 48566:48566 -p 48567:48567 -p 48568:48568 -p 48569:48569 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48567 --rest-port=48565 --tcp-port=48566 --discv5-udp-port=48568 --rest-address=0.0.0.0 --nat=extip:172.18.173.4 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4b9cbe9efbdc741aec9cf2fe3bf12b0ad269c0be1bf7dc1d69ffd35a8eaf241f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48569 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QBKYcwS-ODSp1I3mwwk0qc_HlNpLayDwT7BCStuOxpmuJqXRFyoxnfzWhcxplRj_b9XvJONp0e45KHyK8odzvCkCgmlkgnY0gmlwhKwS5K6KbXVsdGlhZGRyc5YACASsEuSuBsRxAAoErBLkrgbEct0DgnJzhQADAQAAiXNlY3AyNTZrMaEDfGcwXJfJV0KmCBIq3pIrbJSh72IEue16TOoLJi5YrLqDdGNwgsRxg3VkcILEc4V3YWt1MgM --storenode=/ip4/172.18.228.174/tcp/50289/p2p/16Uiu2HAmM2cAaW7qtVghD4AojpzX8BoXFg74HQ4bqcNAY4PuaQzm --store=true --relay=true
2025-02-09 04:05:36.673 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.173.4 waku 3c06bc3e30cb461a694d1bb5c360b54212549bbfaee1f3d26c2ea3c525cbcdda
2025-02-09 04:05:36.721 DEBUG [src.node.docker_mananger] Container started with ID 3c06bc3e30cb. Setting up logs at ./log/docker/store_node1_2025-02-09_04-05-35__2acc571e-15cf-4d76-a27c-b1f21eca928b__wakuorg_nwaku:latest.log
2025-02-09 04:05:36.721 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 48565
2025-02-09 04:05:36.721 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:05:37.722 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48565/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:37.725 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:05:37.725 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:05:37.725 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48565/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:37.727 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.173.4/tcp/48566/p2p/16Uiu2HAmJRFXyc9iiQaa1DUo3hgnZJvTR1aAK173gW2DzAjhvVhM","/ip4/172.18.173.4/tcp/48567/ws/p2p/16Uiu2HAmJRFXyc9iiQaa1DUo3hgnZJvTR1aAK173gW2DzAjhvVhM"],"enrUri":"enr:-L24QOdDFbJ0BJB73twCnaG7TdldlEmboAbafd5aWlOMEYr3AYQvtPu6vto02Jqu8El6Vaa6DGDnmO3XpGNVJhK9mB0CgmlkgnY0gmlwhKwSrQSKbXVsdGlhZGRyc5YACASsEq0EBr22AAoErBKtBAa9t90DgnJzhQADAQAAiXNlY3AyNTZrMaEDVaEovG3Z-E88J6_fsfrkse44TewNKl7Qo9i_bRjC-tyDdGNwgr22g3VkcIK9uIV3YWt1MgM"}'
2025-02-09 04:05:37.728 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:05:37.728 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48565/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.228.174/tcp/50289/p2p/16Uiu2HAmM2cAaW7qtVghD4AojpzX8BoXFg74HQ4bqcNAY4PuaQzm"]'
2025-02-09 04:05:37.730 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:37.731 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50288/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:05:37.733 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:37.733 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48565/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:05:37.735 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:37.736 DEBUG [src.steps.store] Relaying message
2025-02-09 04:05:37.736 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50288/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:05:37.742 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:37.742 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:05:37.943 DEBUG [src.steps.store] Relaying message
2025-02-09 04:05:37.943 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50288/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:05:37.949 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:37.950 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:05:38.150 DEBUG [src.steps.store] Relaying message
2025-02-09 04:05:38.151 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50288/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:05:38.157 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:38.157 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:05:38.358 DEBUG [src.steps.store] Relaying message
2025-02-09 04:05:38.359 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50288/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:05:38.365 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:38.365 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:05:38.566 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50288/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:38.569 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:50288/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true. Response content: b'waku message hash parsing error: invalid hash length: 4'
2025-02-09 04:05:38.570 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48565/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:38.572 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:48565/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true. Response content: b'waku message hash parsing error: invalid hash length: 4'
2025-02-09 04:05:38.574 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:05:38.575 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:05:38.575 DEBUG [src.node.waku_node] Stopping container with id e37c1cd598c3
2025-02-09 04:05:39.248 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:05:39.250 DEBUG [src.node.waku_node] Stopping container with id 3c06bc3e30cb
2025-02-09 04:05:40.062 ERROR [src.node.docker_mananger] Max retries reached for container e37c1cd598c3. Exiting log stream.
2025-02-09 04:05:40.750 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:05:40.751 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:05:40.757 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:05:40.762 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
