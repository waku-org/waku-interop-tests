2025-02-09 04:05:20.134 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:05:20.134 DEBUG [tests.conftest] Running test: test_publish_on_multiple_content_topics_and_only_after_fetch_them[content_topic_list0] with id: 2025-02-09_04-05-20__c4b3f4f7-49e7-4ce3-9718-90688229d8c8
2025-02-09 04:05:20.135 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:05:20.135 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-09 04:05:20.135 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-09 04:05:20.142 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:05:20.142 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-09_04-05-20__c4b3f4f7-49e7-4ce3-9718-90688229d8c8__wakuorg_nwaku:latest.log
2025-02-09 04:05:20.142 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:05:20.142 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:05:20.144 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:05:20.144 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.53.140
2025-02-09 04:05:20.144 DEBUG [src.node.docker_mananger] Generated ports ['38221', '38222', '38223', '38224', '38225']
2025-02-09 04:05:20.144 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:05:20.144 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:05:20.144 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:05:20.144 DEBUG [src.node.docker_mananger] docker run -i -t -p 38221:38221 -p 38222:38222 -p 38223:38223 -p 38224:38224 -p 38225:38225 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38223 --rest-port=38221 --tcp-port=38222 --discv5-udp-port=38224 --rest-address=0.0.0.0 --nat=extip:172.18.53.140 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=c8bff44fdbb6caaee61d04325fe71ffd5bf44da9dc3d6e12b94deb849570876e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38225 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2025-02-09 04:05:20.374 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.53.140 waku 9a7aef1a13768e443b3354eb6a5371da11bf7e93eb843e7da098c77f22ff1368
2025-02-09 04:05:20.422 DEBUG [src.node.docker_mananger] Container started with ID 9a7aef1a1376. Setting up logs at ./log/docker/node1_2025-02-09_04-05-20__c4b3f4f7-49e7-4ce3-9718-90688229d8c8__wakuorg_nwaku:latest.log
2025-02-09 04:05:20.423 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38221
2025-02-09 04:05:20.424 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:05:20.937 ERROR [src.node.docker_mananger] Max retries reached for container 659e9c89487d. Exiting log stream.
2025-02-09 04:05:21.424 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38221/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:21.427 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:05:21.427 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:05:21.427 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38221/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:21.429 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.53.140/tcp/38222/p2p/16Uiu2HAm4yYaGnWY4G9eML8hQ4x8C5dysJQAHJqWHdxtF5Zez3NG","/ip4/172.18.53.140/tcp/38223/ws/p2p/16Uiu2HAm4yYaGnWY4G9eML8hQ4x8C5dysJQAHJqWHdxtF5Zez3NG"],"enrUri":"enr:-L24QM_Q5QuJfDcbFwmFvXY0e0_Qs_Ds-FpKaJo3Wqlsev-yPXURt-EjqJLroKpSt9dNVoy_D1L2fNesECjZCpwkYgQCgmlkgnY0gmlwhKwSNYyKbXVsdGlhZGRyc5YACASsEjWMBpVOAAoErBI1jAaVT90DgnJzhQACAQAAiXNlY3AyNTZrMaECjeNlD8Nn8UxGYXCOhsoxPmIuv6pyNYmpm8ybmpNxXlGDdGNwgpVOg3VkcIKVUIV3YWt1MgU"}'
2025-02-09 04:05:21.430 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:05:21.436 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:05:21.436 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-09_04-05-20__c4b3f4f7-49e7-4ce3-9718-90688229d8c8__wakuorg_nwaku:latest.log
2025-02-09 04:05:21.436 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:05:21.436 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:05:21.438 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:05:21.438 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.242.225
2025-02-09 04:05:21.438 DEBUG [src.node.docker_mananger] Generated ports ['20711', '20712', '20713', '20714', '20715']
2025-02-09 04:05:21.438 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:05:21.438 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:05:21.438 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:05:21.438 DEBUG [src.node.docker_mananger] docker run -i -t -p 20711:20711 -p 20712:20712 -p 20713:20713 -p 20714:20714 -p 20715:20715 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20713 --rest-port=20711 --tcp-port=20712 --discv5-udp-port=20714 --rest-address=0.0.0.0 --nat=extip:172.18.242.225 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=107bdf5a1c8e5aa898fbf5cbe868fee3633972de057c28cf117fa331a4aedaea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20715 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QM_Q5QuJfDcbFwmFvXY0e0_Qs_Ds-FpKaJo3Wqlsev-yPXURt-EjqJLroKpSt9dNVoy_D1L2fNesECjZCpwkYgQCgmlkgnY0gmlwhKwSNYyKbXVsdGlhZGRyc5YACASsEjWMBpVOAAoErBI1jAaVT90DgnJzhQACAQAAiXNlY3AyNTZrMaECjeNlD8Nn8UxGYXCOhsoxPmIuv6pyNYmpm8ybmpNxXlGDdGNwgpVOg3VkcIKVUIV3YWt1MgU --content-topic=/myapp/1/latest/proto
2025-02-09 04:05:21.671 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.242.225 waku 7f3044c0cb118f2f46076b39f6dd57ffe1eacd2446155777dca34688f4aa8a42
2025-02-09 04:05:21.721 DEBUG [src.node.docker_mananger] Container started with ID 7f3044c0cb11. Setting up logs at ./log/docker/node2_2025-02-09_04-05-20__c4b3f4f7-49e7-4ce3-9718-90688229d8c8__wakuorg_nwaku:latest.log
2025-02-09 04:05:21.722 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20711
2025-02-09 04:05:21.722 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:05:22.722 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20711/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:22.734 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:05:22.735 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:05:22.737 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20711/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:22.743 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.242.225/tcp/20712/p2p/16Uiu2HAm6GPN14Pv9f4e4PaGaJwQV6YNbKQPKyYQoYMs61UjwhJm","/ip4/172.18.242.225/tcp/20713/ws/p2p/16Uiu2HAm6GPN14Pv9f4e4PaGaJwQV6YNbKQPKyYQoYMs61UjwhJm"],"enrUri":"enr:-L24QPaJBaADB4uXhzGAXwySzlaXoD0Pv6Aq-UWSw46boFPDVI9CqAYN8KzU5Uz703lhtZi0eyyOsxyZRrHYmj_yBDMCgmlkgnY0gmlwhKwS8uGKbXVsdGlhZGRyc5YACASsEvLhBlDoAAoErBLy4QZQ6d0DgnJzhQACAQAAiXNlY3AyNTZrMaECoQ-KNpaMLwE657uQxG8AdpiA4UJ7CDhyzT2g5izcDRaDdGNwglDog3VkcIJQ6oV3YWt1MgE"}'
2025-02-09 04:05:22.744 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:05:22.744 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20711/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.53.140/tcp/38222/p2p/16Uiu2HAm4yYaGnWY4G9eML8hQ4x8C5dysJQAHJqWHdxtF5Zez3NG"]'
2025-02-09 04:05:22.750 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:22.750 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38221/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/newsService/1.0/weekly/protobuf", "/newsService/1.0/alerts/xml", "/newsService/1.0/updates/json", "/newsService/2.0/alerts/json", "/newsService/2.0/summaries/xml", "/newsService/2.0/highlights/yaml", "/newsService/3.0/weekly/json", "/newsService/3.0/summaries/xml"]'
2025-02-09 04:05:22.756 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:22.757 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20711/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/newsService/1.0/weekly/protobuf", "/newsService/1.0/alerts/xml", "/newsService/1.0/updates/json", "/newsService/2.0/alerts/json", "/newsService/2.0/summaries/xml", "/newsService/2.0/highlights/yaml", "/newsService/3.0/weekly/json", "/newsService/3.0/summaries/xml"]'
2025-02-09 04:05:22.770 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:22.771 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38221/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzEuMC93ZWVrbHkvcHJvdG9idWY=", "contentTopic": "/newsService/1.0/weekly/protobuf", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:05:22.776 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:22.777 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38221/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzEuMC9hbGVydHMveG1s", "contentTopic": "/newsService/1.0/alerts/xml", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:05:22.783 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:22.783 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38221/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzEuMC91cGRhdGVzL2pzb24=", "contentTopic": "/newsService/1.0/updates/json", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:05:22.788 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:22.788 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38221/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzIuMC9hbGVydHMvanNvbg==", "contentTopic": "/newsService/2.0/alerts/json", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:05:22.793 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:22.794 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38221/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzIuMC9zdW1tYXJpZXMveG1s", "contentTopic": "/newsService/2.0/summaries/xml", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:05:22.799 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:22.800 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38221/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzIuMC9oaWdobGlnaHRzL3lhbWw=", "contentTopic": "/newsService/2.0/highlights/yaml", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:05:22.805 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:22.806 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38221/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzMuMC93ZWVrbHkvanNvbg==", "contentTopic": "/newsService/3.0/weekly/json", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:05:22.810 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:22.811 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38221/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzMuMC9zdW1tYXJpZXMveG1s", "contentTopic": "/newsService/3.0/summaries/xml", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:05:22.817 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:22.817 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-09 04:05:22.918 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20711/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:22.920 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzEuMC93ZWVrbHkvcHJvdG9idWY=","contentTopic":"/newsService/1.0/weekly/protobuf","version":0,"timestamp":1739073922771029504,"ephemeral":false}]'
2025-02-09 04:05:22.921 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20711/relay/v1/auto/messages/%2FnewsService%2F1.0%2Falerts%2Fxml" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:22.923 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzEuMC9hbGVydHMveG1s","contentTopic":"/newsService/1.0/alerts/xml","version":0,"timestamp":1739073922777126912,"ephemeral":false}]'
2025-02-09 04:05:22.923 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20711/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fupdates%2Fjson" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:22.925 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzEuMC91cGRhdGVzL2pzb24=","contentTopic":"/newsService/1.0/updates/json","version":0,"timestamp":1739073922783625728,"ephemeral":false}]'
2025-02-09 04:05:22.926 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20711/relay/v1/auto/messages/%2FnewsService%2F2.0%2Falerts%2Fjson" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:22.928 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzIuMC9hbGVydHMvanNvbg==","contentTopic":"/newsService/2.0/alerts/json","version":0,"timestamp":1739073922788675584,"ephemeral":false}]'
2025-02-09 04:05:22.928 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20711/relay/v1/auto/messages/%2FnewsService%2F2.0%2Fsummaries%2Fxml" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:22.931 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzIuMC9zdW1tYXJpZXMveG1s","contentTopic":"/newsService/2.0/summaries/xml","version":0,"timestamp":1739073922794597888,"ephemeral":false}]'
2025-02-09 04:05:22.931 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20711/relay/v1/auto/messages/%2FnewsService%2F2.0%2Fhighlights%2Fyaml" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:22.933 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzIuMC9oaWdobGlnaHRzL3lhbWw=","contentTopic":"/newsService/2.0/highlights/yaml","version":0,"timestamp":1739073922800647168,"ephemeral":false}]'
2025-02-09 04:05:22.933 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20711/relay/v1/auto/messages/%2FnewsService%2F3.0%2Fweekly%2Fjson" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:22.936 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzMuMC93ZWVrbHkvanNvbg==","contentTopic":"/newsService/3.0/weekly/json","version":0,"timestamp":1739073922806136832,"ephemeral":false}]'
2025-02-09 04:05:22.936 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20711/relay/v1/auto/messages/%2FnewsService%2F3.0%2Fsummaries%2Fxml" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:22.938 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzMuMC9zdW1tYXJpZXMveG1s","contentTopic":"/newsService/3.0/summaries/xml","version":0,"timestamp":1739073922811561472,"ephemeral":false}]'
2025-02-09 04:05:22.939 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:05:22.940 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:05:22.940 DEBUG [src.node.waku_node] Stopping container with id 9a7aef1a1376
2025-02-09 04:05:23.612 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:05:23.612 DEBUG [src.node.waku_node] Stopping container with id 7f3044c0cb11
2025-02-09 04:05:24.424 ERROR [src.node.docker_mananger] Max retries reached for container 9a7aef1a1376. Exiting log stream.
2025-02-09 04:05:24.660 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:05:24.661 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:05:24.669 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:05:24.676 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
