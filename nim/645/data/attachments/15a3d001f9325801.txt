2025-02-09 04:05:11.542 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:05:11.543 DEBUG [tests.conftest] Running test: test_valid_payloads_random_user_message_limit with id: 2025-02-09_04-05-11__58789abf-0ebc-497b-bdd3-fc9856b4fd36
2025-02-09 04:05:11.543 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:05:11.544 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-09 04:05:11.554 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:05:11.554 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-09_04-05-11__58789abf-0ebc-497b-bdd3-fc9856b4fd36__wakuorg_nwaku:latest.log
2025-02-09 04:05:11.555 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:05:11.556 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:05:11.558 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:05:11.558 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.202.172
2025-02-09 04:05:11.559 DEBUG [src.node.docker_mananger] Generated ports ['39328', '39329', '39330', '39331', '39332']
2025-02-09 04:05:11.560 DEBUG [src.node.waku_node] Using volumes ['/home/runner/work/waku-interop-tests/waku-interop-tests/rln_tree_htwr_1:/etc/rln_tree', '/home/runner/work/waku-interop-tests/waku-interop-tests/keystore_htwr_1:/keystore']
2025-02-09 04:05:11.561 DEBUG [src.node.docker_mananger] docker run -i -t -p 39328:39328 -p 39329:39329 -p 39330:39330 -p 39331:39331 -p 39332:39332 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39330 --rest-port=39328 --tcp-port=39329 --discv5-udp-port=39331 --rest-address=0.0.0.0 --nat=extip:172.18.202.172 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=00cd3baacb5ad47bcf0d16fe3cccc5a7d1b0c1ab3da0a8f185bc10ff254c31ca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39332 --metrics-logging=true --relay=true --rln-relay-membership-index=1 --rln-relay-user-message-limit=2 --rln-relay-epoch-sec=1 --rln-relay=true --rln-relay-cred-path=/keystore/keystore.json --rln-relay-cred-password=password
2025-02-09 04:05:11.789 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.202.172 waku aafee616e90867b3712643c8c92ec584df2d7a6fd22918f4d6886eab622f02de
2025-02-09 04:05:11.841 DEBUG [src.node.docker_mananger] Container started with ID aafee616e908. Setting up logs at ./log/docker/node1_2025-02-09_04-05-11__58789abf-0ebc-497b-bdd3-fc9856b4fd36__wakuorg_nwaku:latest.log
2025-02-09 04:05:11.843 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 39328
2025-02-09 04:05:11.844 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:05:12.392 ERROR [src.node.docker_mananger] Max retries reached for container 7139d6a9ecb8. Exiting log stream.
2025-02-09 04:05:12.844 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39328/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:18.214 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Initializing","protocolsHealth":[{"Rln Relay":"Ready"}]}'
2025-02-09 04:05:18.315 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39328/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:18.317 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[{"Rln Relay":"Ready"}]}'
2025-02-09 04:05:18.317 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:05:18.318 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39328/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:18.320 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.202.172/tcp/39329/p2p/16Uiu2HAmRSY3bQxwg7WmfbwewzBeCYJ1U4qWqea2imcmStY5HBkd","/ip4/172.18.202.172/tcp/39330/ws/p2p/16Uiu2HAmRSY3bQxwg7WmfbwewzBeCYJ1U4qWqea2imcmStY5HBkd"],"enrUri":"enr:-L24QAAfCh94ZIVWLUF-2bwuhqWIXr-vadf5qkzOcrvita5ndq1_0At5QlKnlHpqKWInjtz1xt6DrC9bOdxng9aMvqwCgmlkgnY0gmlwhKwSyqyKbXVsdGlhZGRyc5YACASsEsqsBpmhAAoErBLKrAaZot0DgnJzhQADAQAAiXNlY3AyNTZrMaEDvfc3kXwgMPr9JBvFiPJaY_XIcnGlqlLEh6IyKINniaqDdGNwgpmhg3VkcIKZo4V3YWt1MgE"}'
2025-02-09 04:05:18.320 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:05:18.326 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:05:18.326 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-09_04-05-11__58789abf-0ebc-497b-bdd3-fc9856b4fd36__wakuorg_nwaku:latest.log
2025-02-09 04:05:18.326 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:05:18.326 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:05:18.328 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:05:18.328 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.26.21
2025-02-09 04:05:18.328 DEBUG [src.node.docker_mananger] Generated ports ['63273', '63274', '63275', '63276', '63277']
2025-02-09 04:05:18.328 DEBUG [src.node.waku_node] Using volumes ['/home/runner/work/waku-interop-tests/waku-interop-tests/rln_tree_aoyf_2:/etc/rln_tree', '/home/runner/work/waku-interop-tests/waku-interop-tests/keystore_aoyf_2:/keystore']
2025-02-09 04:05:18.328 DEBUG [src.node.docker_mananger] docker run -i -t -p 63273:63273 -p 63274:63274 -p 63275:63275 -p 63276:63276 -p 63277:63277 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63275 --rest-port=63273 --tcp-port=63274 --discv5-udp-port=63276 --rest-address=0.0.0.0 --nat=extip:172.18.26.21 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b0507fdabddbf7c83c8d70fd33ef5f8d2d872a1c8cacf6dacc548245accefc6b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63277 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QAAfCh94ZIVWLUF-2bwuhqWIXr-vadf5qkzOcrvita5ndq1_0At5QlKnlHpqKWInjtz1xt6DrC9bOdxng9aMvqwCgmlkgnY0gmlwhKwSyqyKbXVsdGlhZGRyc5YACASsEsqsBpmhAAoErBLKrAaZot0DgnJzhQADAQAAiXNlY3AyNTZrMaEDvfc3kXwgMPr9JBvFiPJaY_XIcnGlqlLEh6IyKINniaqDdGNwgpmhg3VkcIKZo4V3YWt1MgE --rln-relay-membership-index=1 --rln-relay-user-message-limit=2 --rln-relay-epoch-sec=1 --rln-relay=true --rln-relay-cred-path=/keystore/keystore.json --rln-relay-cred-password=password
2025-02-09 04:05:18.556 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.26.21 waku 211babd321d5dfb19f7969e8716b60b3956e2bdc478d24c4d229215c17047ad4
2025-02-09 04:05:18.614 DEBUG [src.node.docker_mananger] Container started with ID 211babd321d5. Setting up logs at ./log/docker/node2_2025-02-09_04-05-11__58789abf-0ebc-497b-bdd3-fc9856b4fd36__wakuorg_nwaku:latest.log
2025-02-09 04:05:18.615 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63273
2025-02-09 04:05:18.616 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:05:19.616 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63273/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:25.133 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Initializing","protocolsHealth":[{"Rln Relay":"Ready"}]}'
2025-02-09 04:05:25.234 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63273/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:25.236 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[{"Rln Relay":"Ready"}]}'
2025-02-09 04:05:25.237 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:05:25.237 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63273/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:05:25.239 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.26.21/tcp/63274/p2p/16Uiu2HAmFgpxmshJK1bykABShCsdEN3H6WLVjxgzhDW4KWpoa491","/ip4/172.18.26.21/tcp/63275/ws/p2p/16Uiu2HAmFgpxmshJK1bykABShCsdEN3H6WLVjxgzhDW4KWpoa491"],"enrUri":"enr:-L24QMa2lfB2bmpzOPGvdCFgRLCubQILvhgJUELyhMuwFgp7DtYZ3HgpHhNtekSQVKCUKOZbI4YEqdlmqRS-8fDVg60CgmlkgnY0gmlwhKwSGhWKbXVsdGlhZGRyc5YACASsEhoVBvcqAAoErBIaFQb3K90DgnJzhQADAQAAiXNlY3AyNTZrMaEDLQubbOFBaiaIRH5tli1ndDGjHAOYXK9dhXZDl84zAOSDdGNwgvcqg3VkcIL3LIV3YWt1MgE"}'
2025-02-09 04:05:25.239 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:05:25.239 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63273/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.202.172/tcp/39329/p2p/16Uiu2HAmRSY3bQxwg7WmfbwewzBeCYJ1U4qWqea2imcmStY5HBkd"]'
2025-02-09 04:05:25.282 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:25.282 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39328/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/1/0"]'
2025-02-09 04:05:25.303 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:25.304 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63273/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/1/0"]'
2025-02-09 04:05:25.310 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:25.311 DEBUG [tests.relay.test_rln] Running test with payload A simple string
2025-02-09 04:05:25.311 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39328/relay/v1/messages/%2Fwaku%2F2%2Frs%2F1%2F0" -H "Content-Type: application/json" -d '{"payload": "SGVsbG8gV29ybGQh", "contentTopic": "/test/1/waku-rln-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:05:25.591 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:25.591 DEBUG [tests.relay.test_rln] Running test with payload An integer
2025-02-09 04:05:25.592 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39328/relay/v1/messages/%2Fwaku%2F2%2Frs%2F1%2F0" -H "Content-Type: application/json" -d '{"payload": "MTIzNDU2Nzg5MA==", "contentTopic": "/test/1/waku-rln-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:05:25.828 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:05:25.831 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:05:25.832 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:05:25.832 DEBUG [src.node.waku_node] Stopping container with id aafee616e908
2025-02-09 04:05:26.711 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:05:26.712 DEBUG [src.node.waku_node] Stopping container with id 211babd321d5
2025-02-09 04:05:27.541 ERROR [src.node.docker_mananger] Max retries reached for container aafee616e908. Exiting log stream.
2025-02-09 04:05:28.092 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:05:28.093 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:05:28.104 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:05:28.109 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
