2025-02-09 04:06:45.489 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:06:45.489 DEBUG [tests.conftest] Running test: test_store_with_not_valid_content_topic with id: 2025-02-09_04-06-45__ccede9a1-c927-4e57-bee9-1883d94ffffd
2025-02-09 04:06:45.490 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:06:45.491 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-09 04:06:45.491 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-09 04:06:45.498 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:06:45.498 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-09_04-06-45__ccede9a1-c927-4e57-bee9-1883d94ffffd__wakuorg_nwaku:latest.log
2025-02-09 04:06:45.498 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:06:45.498 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:06:45.501 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:06:45.501 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.80.237
2025-02-09 04:06:45.501 DEBUG [src.node.docker_mananger] Generated ports ['14449', '14450', '14451', '14452', '14453']
2025-02-09 04:06:45.502 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:06:45.502 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:06:45.502 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:06:45.502 DEBUG [src.node.docker_mananger] docker run -i -t -p 14449:14449 -p 14450:14450 -p 14451:14451 -p 14452:14452 -p 14453:14453 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14451 --rest-port=14449 --tcp-port=14450 --discv5-udp-port=14452 --rest-address=0.0.0.0 --nat=extip:172.18.80.237 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8befb2abde0df80dad5a024ab7c4fbf7ab7fe4f6b5fc25c10c720b4c44646d03 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14453 --metrics-logging=true --store=true --relay=true
2025-02-09 04:06:45.736 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.80.237 waku 63c975c12a5256c60c024c0684875c56088e5fabf66352f152ab7b854ccd07fb
2025-02-09 04:06:45.785 DEBUG [src.node.docker_mananger] Container started with ID 63c975c12a52. Setting up logs at ./log/docker/publishing_node1_2025-02-09_04-06-45__ccede9a1-c927-4e57-bee9-1883d94ffffd__wakuorg_nwaku:latest.log
2025-02-09 04:06:45.786 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14449
2025-02-09 04:06:45.786 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:06:46.326 ERROR [src.node.docker_mananger] Max retries reached for container fd416772c08f. Exiting log stream.
2025-02-09 04:06:46.787 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14449/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:06:46.790 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:06:46.790 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:06:46.790 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14449/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:06:46.793 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.80.237/tcp/14450/p2p/16Uiu2HAkxW8VXexML61Ump3num6hJ6TKYZUv1dXTu4uAHs3qxMDa","/ip4/172.18.80.237/tcp/14451/ws/p2p/16Uiu2HAkxW8VXexML61Ump3num6hJ6TKYZUv1dXTu4uAHs3qxMDa"],"enrUri":"enr:-L24QGPfnltDn085--Spxpokk5HYTM7TKWPv6igsbo2ypV1tT6Uqym-ayC892zf7Qi5oKtHS8Cnt5Rbku6R03MklUoQCgmlkgnY0gmlwhKwSUO2KbXVsdGlhZGRyc5YACASsElDtBjhyAAoErBJQ7QY4c90DgnJzhQADAQAAiXNlY3AyNTZrMaECLbdcrGdrmV4wEpVTmsXx2LjpQ60lp_DKC447z4ThpAGDdGNwgjhyg3VkcII4dIV3YWt1MgM"}'
2025-02-09 04:06:46.793 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:06:46.799 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:06:46.799 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-09_04-06-45__ccede9a1-c927-4e57-bee9-1883d94ffffd__wakuorg_nwaku:latest.log
2025-02-09 04:06:46.800 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:06:46.800 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:06:46.801 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:06:46.801 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.33.93
2025-02-09 04:06:46.801 DEBUG [src.node.docker_mananger] Generated ports ['49204', '49205', '49206', '49207', '49208']
2025-02-09 04:06:46.801 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:06:46.801 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:06:46.802 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:06:46.802 DEBUG [src.node.docker_mananger] docker run -i -t -p 49204:49204 -p 49205:49205 -p 49206:49206 -p 49207:49207 -p 49208:49208 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49206 --rest-port=49204 --tcp-port=49205 --discv5-udp-port=49207 --rest-address=0.0.0.0 --nat=extip:172.18.33.93 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=52d5eb00d3491df2cdbfe0abb316fdbaaf76b9e1f2dac85dfd1af3ad9d513dcf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49208 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QGPfnltDn085--Spxpokk5HYTM7TKWPv6igsbo2ypV1tT6Uqym-ayC892zf7Qi5oKtHS8Cnt5Rbku6R03MklUoQCgmlkgnY0gmlwhKwSUO2KbXVsdGlhZGRyc5YACASsElDtBjhyAAoErBJQ7QY4c90DgnJzhQADAQAAiXNlY3AyNTZrMaECLbdcrGdrmV4wEpVTmsXx2LjpQ60lp_DKC447z4ThpAGDdGNwgjhyg3VkcII4dIV3YWt1MgM --storenode=/ip4/172.18.80.237/tcp/14450/p2p/16Uiu2HAkxW8VXexML61Ump3num6hJ6TKYZUv1dXTu4uAHs3qxMDa --store=true --relay=true
2025-02-09 04:06:47.030 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.33.93 waku 132e70ae539c12d43a09d2c9bebd076ef5522f533f1471683e890a39a99efaf1
2025-02-09 04:06:47.086 DEBUG [src.node.docker_mananger] Container started with ID 132e70ae539c. Setting up logs at ./log/docker/store_node1_2025-02-09_04-06-45__ccede9a1-c927-4e57-bee9-1883d94ffffd__wakuorg_nwaku:latest.log
2025-02-09 04:06:47.087 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49204
2025-02-09 04:06:47.088 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:06:48.088 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49204/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:06:48.091 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:06:48.091 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:06:48.091 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49204/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:06:48.093 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.33.93/tcp/49205/p2p/16Uiu2HAmGdciMLnbkKPm7odwfg7AQwd6ahRAvedNVsHRYaynp48W","/ip4/172.18.33.93/tcp/49206/ws/p2p/16Uiu2HAmGdciMLnbkKPm7odwfg7AQwd6ahRAvedNVsHRYaynp48W"],"enrUri":"enr:-L24QHnl9PbC4_VFwFc3jtcfMnDGpdUxxPgpQReEmhi0DNVpGQ3LZxBlA1HiflfEafsHvdpkzHspRYrOYa9x1qgmtMsCgmlkgnY0gmlwhKwSIV2KbXVsdGlhZGRyc5YACASsEiFdBsA1AAoErBIhXQbANt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDOxSztwe4NxKxtxpg3XIX3hRzCpGpv6mN_WCbP_oKgQeDdGNwgsA1g3VkcILAN4V3YWt1MgM"}'
2025-02-09 04:06:48.094 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:06:48.094 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49204/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.80.237/tcp/14450/p2p/16Uiu2HAkxW8VXexML61Ump3num6hJ6TKYZUv1dXTu4uAHs3qxMDa"]'
2025-02-09 04:06:48.096 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:06:48.097 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14449/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:06:48.099 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:06:48.099 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49204/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:06:48.101 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:06:48.102 DEBUG [src.steps.store] Relaying message
2025-02-09 04:06:48.102 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14449/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:06:48.108 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:06:48.108 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:06:48.309 DEBUG [src.steps.store] Relaying message
2025-02-09 04:06:48.309 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14449/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:06:48.315 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:06:48.315 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:06:48.516 DEBUG [src.steps.store] Relaying message
2025-02-09 04:06:48.516 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14449/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:06:48.523 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:06:48.523 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:06:48.724 DEBUG [src.steps.store] Relaying message
2025-02-09 04:06:48.724 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14449/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:06:48.731 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:06:48.731 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:06:48.932 DEBUG [src.steps.store] Relaying message
2025-02-09 04:06:48.932 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14449/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:06:48.939 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:06:48.939 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:06:49.140 DEBUG [src.steps.store] Relaying message
2025-02-09 04:06:49.140 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14449/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:06:49.146 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:06:49.147 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:06:49.347 DEBUG [src.steps.store] Relaying message
2025-02-09 04:06:49.348 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14449/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:06:49.354 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:06:49.354 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:06:49.555 DEBUG [src.steps.store] Relaying message
2025-02-09 04:06:49.555 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14449/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:06:49.562 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:06:49.562 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:06:49.764 DEBUG [tests.store.test_topics] trying to find stored messages with wrong content_topic =##
2025-02-09 04:06:49.764 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14449/store/v3/messages?includeData=true&contentTopics=%23%23&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:06:49.767 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-09 04:06:49.767 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49204/store/v3/messages?includeData=true&contentTopics=%23%23&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:06:49.770 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-09 04:06:49.770 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14449/store/v3/messages?includeData=true&contentTopics=%20&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:06:49.772 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-09 04:06:49.772 DEBUG [tests.store.test_topics]  response for invalid content_topic {'requestId': '', 'statusCode': 200, 'statusDesc': 'OK', 'messages': []}
2025-02-09 04:06:49.775 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:06:49.776 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:06:49.776 DEBUG [src.node.waku_node] Stopping container with id 63c975c12a52
2025-02-09 04:06:50.308 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:06:50.309 DEBUG [src.node.waku_node] Stopping container with id 132e70ae539c
2025-02-09 04:06:51.121 ERROR [src.node.docker_mananger] Max retries reached for container 63c975c12a52. Exiting log stream.
2025-02-09 04:06:51.786 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:06:51.787 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:06:51.794 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:06:51.801 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
