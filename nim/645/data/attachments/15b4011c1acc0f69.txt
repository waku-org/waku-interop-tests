2025-02-09 04:02:10.787 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:02:10.788 DEBUG [tests.conftest] Running test: test_filter_node_not_connected_directly_to_relaying_node with id: 2025-02-09_04-02-10__4d0caac9-a297-4800-87d1-303e5b72f292
2025-02-09 04:02:10.788 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:02:10.788 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-09 04:02:10.789 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-09 04:02:10.798 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:02:10.799 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-09_04-02-10__4d0caac9-a297-4800-87d1-303e5b72f292__wakuorg_nwaku:latest.log
2025-02-09 04:02:10.804 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:02:10.805 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-09_04-02-10__4d0caac9-a297-4800-87d1-303e5b72f292__wakuorg_nwaku:latest.log
2025-02-09 04:02:10.810 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:02:10.810 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-09_04-02-10__4d0caac9-a297-4800-87d1-303e5b72f292__wakuorg_nwaku:latest.log
2025-02-09 04:02:10.810 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-09 04:02:10.811 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-09 04:02:10.811 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:02:10.812 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:02:10.879 DEBUG [src.node.docker_mananger] Network waku created
2025-02-09 04:02:10.880 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.139.95
2025-02-09 04:02:10.880 DEBUG [src.node.docker_mananger] Generated ports ['39031', '39032', '39033', '39034', '39035']
2025-02-09 04:02:10.880 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:02:10.880 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:02:10.880 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:02:10.880 DEBUG [src.node.docker_mananger] docker run -i -t -p 39031:39031 -p 39032:39032 -p 39033:39033 -p 39034:39034 -p 39035:39035 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39033 --rest-port=39031 --tcp-port=39032 --discv5-udp-port=39034 --rest-address=0.0.0.0 --nat=extip:172.18.139.95 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8e2e283ffd76e54fa001ec86de7cb599edbeca128d74af58418b6acdfcadb8bf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39035 --metrics-logging=true --filter=true --relay=true
2025-02-09 04:02:13.251 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.139.95 waku 4c84e318e18b9fb6567e80106b42751fa9daede74c025137dd7bd2979dd75356
2025-02-09 04:02:13.297 DEBUG [src.node.docker_mananger] Container started with ID 4c84e318e18b. Setting up logs at ./log/docker/node1_2025-02-09_04-02-10__4d0caac9-a297-4800-87d1-303e5b72f292__wakuorg_nwaku:latest.log
2025-02-09 04:02:13.298 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 39031
2025-02-09 04:02:13.298 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:02:14.298 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39031/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:02:14.301 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:02:14.302 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:02:14.302 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39031/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:02:14.304 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.139.95/tcp/39032/p2p/16Uiu2HAmCTjviLptsEMrZ1UGurtZkHVR2mxxYUEDbK9tRmzRgY4o","/ip4/172.18.139.95/tcp/39033/ws/p2p/16Uiu2HAmCTjviLptsEMrZ1UGurtZkHVR2mxxYUEDbK9tRmzRgY4o"],"enrUri":"enr:-L24QCNK4Qc8Q6RbnD8o-kEAsaaD2fwCKEkZa3KPBKycl0f8OFWt58xbIBfV1GUf92LVhvusDld3gJPLXAUYv67PLP8CgmlkgnY0gmlwhKwSi1-KbXVsdGlhZGRyc5YACASsEotfBph4AAoErBKLXwaYed0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_R5NWOszi2yCcLhnZCU2iEDp6pOqqic7OIEvQIXfSHCDdGNwgph4g3VkcIKYeoV3YWt1MgU"}'
2025-02-09 04:02:14.304 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:02:14.304 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:02:14.305 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:02:14.306 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:02:14.306 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.103.168
2025-02-09 04:02:14.306 DEBUG [src.node.docker_mananger] Generated ports ['21363', '21364', '21365', '21366', '21367']
2025-02-09 04:02:14.307 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:02:14.307 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:02:14.307 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:02:14.307 DEBUG [src.node.docker_mananger] docker run -i -t -p 21363:21363 -p 21364:21364 -p 21365:21365 -p 21366:21366 -p 21367:21367 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21365 --rest-port=21363 --tcp-port=21364 --discv5-udp-port=21366 --rest-address=0.0.0.0 --nat=extip:172.18.103.168 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8cb77a5078394dfdeeab2c82ba4bbc3baee06cf4c62f2fd166dcf5ccbb7f301e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21367 --metrics-logging=true --filter=true --relay=true --discv5-bootstrap-node=enr:-L24QCNK4Qc8Q6RbnD8o-kEAsaaD2fwCKEkZa3KPBKycl0f8OFWt58xbIBfV1GUf92LVhvusDld3gJPLXAUYv67PLP8CgmlkgnY0gmlwhKwSi1-KbXVsdGlhZGRyc5YACASsEotfBph4AAoErBKLXwaYed0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_R5NWOszi2yCcLhnZCU2iEDp6pOqqic7OIEvQIXfSHCDdGNwgph4g3VkcIKYeoV3YWt1MgU
2025-02-09 04:02:14.535 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.103.168 waku 299bd8d4d229b421b75450fe046c225b1a0535cf1c1cdb9c020bb43cfabe7920
2025-02-09 04:02:14.581 DEBUG [src.node.docker_mananger] Container started with ID 299bd8d4d229. Setting up logs at ./log/docker/node2_2025-02-09_04-02-10__4d0caac9-a297-4800-87d1-303e5b72f292__wakuorg_nwaku:latest.log
2025-02-09 04:02:14.581 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 21363
2025-02-09 04:02:14.582 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:02:15.583 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21363/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:02:15.591 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:02:15.592 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:02:15.593 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21363/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:02:15.597 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.103.168/tcp/21364/p2p/16Uiu2HAmSyga42trnEskhn4VDUSb8r43GzqkhsGZbcmrNupsnf3h","/ip4/172.18.103.168/tcp/21365/ws/p2p/16Uiu2HAmSyga42trnEskhn4VDUSb8r43GzqkhsGZbcmrNupsnf3h"],"enrUri":"enr:-L24QFAhtIxlIHb6B8LCkDgmBX1v9i9Gk_MzFjOLtkCswjPzdcq81GwqmAKDOGT4eiEwYP1-7qL-vE86duEptktlZ0oCgmlkgnY0gmlwhKwSZ6iKbXVsdGlhZGRyc5YACASsEmeoBlN0AAoErBJnqAZTdd0DgnJzhQADAQAAiXNlY3AyNTZrMaED1M2Mah11FbOTb45dHXX99gU5RvXtD4DxlWeelf9AuPyDdGNwglN0g3VkcIJTdoV3YWt1MgU"}'
2025-02-09 04:02:15.598 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:02:15.598 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:02:15.598 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:02:15.599 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:02:15.600 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.101.137
2025-02-09 04:02:15.600 DEBUG [src.node.docker_mananger] Generated ports ['14092', '14093', '14094', '14095', '14096']
2025-02-09 04:02:15.600 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:02:15.600 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:02:15.600 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:02:15.600 DEBUG [src.node.docker_mananger] docker run -i -t -p 14092:14092 -p 14093:14093 -p 14094:14094 -p 14095:14095 -p 14096:14096 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14094 --rest-port=14092 --tcp-port=14093 --discv5-udp-port=14095 --rest-address=0.0.0.0 --nat=extip:172.18.101.137 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0bbef4ccab89f1c507a0cdfae4aabb8accfa9caa1a04d1bfec1aa90c25a8dfcc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14096 --metrics-logging=true --relay=false --filternode=/ip4/172.18.103.168/tcp/21364/p2p/16Uiu2HAmSyga42trnEskhn4VDUSb8r43GzqkhsGZbcmrNupsnf3h --discv5-bootstrap-node=enr:-L24QFAhtIxlIHb6B8LCkDgmBX1v9i9Gk_MzFjOLtkCswjPzdcq81GwqmAKDOGT4eiEwYP1-7qL-vE86duEptktlZ0oCgmlkgnY0gmlwhKwSZ6iKbXVsdGlhZGRyc5YACASsEmeoBlN0AAoErBJnqAZTdd0DgnJzhQADAQAAiXNlY3AyNTZrMaED1M2Mah11FbOTb45dHXX99gU5RvXtD4DxlWeelf9AuPyDdGNwglN0g3VkcIJTdoV3YWt1MgU
2025-02-09 04:02:15.840 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.101.137 waku 6916d1d7f3e41b64a73990705bd4484c96ac919c10c9dad355b7e6858c304005
2025-02-09 04:02:15.888 DEBUG [src.node.docker_mananger] Container started with ID 6916d1d7f3e4. Setting up logs at ./log/docker/node3_2025-02-09_04-02-10__4d0caac9-a297-4800-87d1-303e5b72f292__wakuorg_nwaku:latest.log
2025-02-09 04:02:15.888 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14092
2025-02-09 04:02:15.888 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:02:16.889 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14092/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:02:16.892 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:02:16.892 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:02:16.893 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14092/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:02:16.895 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.101.137/tcp/14093/p2p/16Uiu2HAmHiMQVH2WdoYa2LPw8gHne9qrZoTKAXuq1fLSyFbYUQAq","/ip4/172.18.101.137/tcp/14094/ws/p2p/16Uiu2HAmHiMQVH2WdoYa2LPw8gHne9qrZoTKAXuq1fLSyFbYUQAq"],"enrUri":"enr:-L24QNPOpfQEtykvOWq3RxnNBwRqjgXWxcczWpZUgt4wToOgAGw68vsQ8UxX4bUZCCW7_KbkmxlSyRuYOTY-3IEHTdcCgmlkgnY0gmlwhKwSZYmKbXVsdGlhZGRyc5YACASsEmWJBjcNAAoErBJliQY3Dt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDSyb788Tb0A7c1eBJ-DsZW0oXv6qEYetj1IkaCIOzqV6DdGNwgjcNg3VkcII3D4V3YWt1MgA"}'
2025-02-09 04:02:16.895 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:02:16.895 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39031/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-09 04:02:16.899 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:02:16.899 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21363/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-09 04:02:16.906 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:02:16.906 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14092/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-09 04:02:16.950 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
2025-02-09 04:02:16.950 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39031/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:02:16.958 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.103.168/tcp/21364/p2p/16Uiu2HAmSyga42trnEskhn4VDUSb8r43GzqkhsGZbcmrNupsnf3h","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-09 04:02:16.961 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21363/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:02:16.964 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.139.95/tcp/39032/p2p/16Uiu2HAmCTjviLptsEMrZ1UGurtZkHVR2mxxYUEDbK9tRmzRgY4o","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.101.137/tcp/14093/p2p/16Uiu2HAmHiMQVH2WdoYa2LPw8gHne9qrZoTKAXuq1fLSyFbYUQAq","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-09 04:02:16.964 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14092/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:02:16.967 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.103.168/tcp/21364/p2p/16Uiu2HAmSyga42trnEskhn4VDUSb8r43GzqkhsGZbcmrNupsnf3h","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
2025-02-09 04:02:16.967 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-09 04:02:46.969 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39031/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:02:46.974 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:02:46.975 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:02:47.977 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-09 04:02:47.977 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14092/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:02:47.980 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1739073766969064704,"ephemeral":false}]'
2025-02-09 04:02:47.983 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:02:47.984 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:02:47.984 DEBUG [src.node.waku_node] Stopping container with id 4c84e318e18b
2025-02-09 04:02:49.067 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:02:49.067 DEBUG [src.node.waku_node] Stopping container with id 299bd8d4d229
2025-02-09 04:02:49.880 ERROR [src.node.docker_mananger] Max retries reached for container 4c84e318e18b. Exiting log stream.
2025-02-09 04:02:50.092 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:02:50.092 DEBUG [src.node.waku_node] Stopping container with id 6916d1d7f3e4
2025-02-09 04:02:50.946 ERROR [src.node.docker_mananger] Max retries reached for container 299bd8d4d229. Exiting log stream.
2025-02-09 04:02:51.010 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:02:51.011 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:02:51.020 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:02:51.044 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:02:51.049 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
