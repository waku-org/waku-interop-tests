2025-02-09 04:03:48.995 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:03:48.995 DEBUG [tests.conftest] Running test: test_filter_ping_on_subscribed_peer with id: 2025-02-09_04-03-48__87aa5a91-125b-42bd-a5cd-30197ffdd2c5
2025-02-09 04:03:48.995 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:03:48.995 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-09 04:03:48.996 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-09 04:03:49.002 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:03:49.002 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-09_04-03-48__87aa5a91-125b-42bd-a5cd-30197ffdd2c5__wakuorg_nwaku:latest.log
2025-02-09 04:03:49.002 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:03:49.002 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:03:49.004 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:03:49.004 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.17.115
2025-02-09 04:03:49.004 DEBUG [src.node.docker_mananger] Generated ports ['60367', '60368', '60369', '60370', '60371']
2025-02-09 04:03:49.004 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:03:49.004 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:03:49.004 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:03:49.004 DEBUG [src.node.docker_mananger] docker run -i -t -p 60367:60367 -p 60368:60368 -p 60369:60369 -p 60370:60370 -p 60371:60371 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60369 --rest-port=60367 --tcp-port=60368 --discv5-udp-port=60370 --rest-address=0.0.0.0 --nat=extip:172.18.17.115 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=265df3213ed0ec6434cf4ccba738fbf6aea39cdffa2ffdaed8dcbcc96cdd094e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60371 --metrics-logging=true --relay=true --filter=true
2025-02-09 04:03:49.228 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.17.115 waku b1279544ac6295aecb257ac50be195802b114d2deda2400bbf62008e8a750a10
2025-02-09 04:03:49.274 DEBUG [src.node.docker_mananger] Container started with ID b1279544ac62. Setting up logs at ./log/docker/node1_2025-02-09_04-03-48__87aa5a91-125b-42bd-a5cd-30197ffdd2c5__wakuorg_nwaku:latest.log
2025-02-09 04:03:49.275 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 60367
2025-02-09 04:03:49.276 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:03:49.790 ERROR [src.node.docker_mananger] Max retries reached for container 830958a2efc3. Exiting log stream.
2025-02-09 04:03:50.276 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60367/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:50.279 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:03:50.279 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:03:50.280 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60367/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:50.282 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.17.115/tcp/60368/p2p/16Uiu2HAmFDRwwE3wXiYnJsWARdxJt3h5EuEgfYtbEqYCfZsof1gD","/ip4/172.18.17.115/tcp/60369/ws/p2p/16Uiu2HAmFDRwwE3wXiYnJsWARdxJt3h5EuEgfYtbEqYCfZsof1gD"],"enrUri":"enr:-L24QBi5NBzN8TSzAG5Si4uk3nA9ouBZggQo94um1vjet_HpaQ5N9Kbaszk1OVa_gnO1rbpfxupNOziNnaFEpKM7n0ACgmlkgnY0gmlwhKwSEXOKbXVsdGlhZGRyc5YACASsEhFzBuvQAAoErBIRcwbr0d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJgbnGqVd8xWK9wbAmxnqgayzuB9FhpmGeP4gVZWjDPKDdGNwguvQg3VkcILr0oV3YWt1MgU"}'
2025-02-09 04:03:50.282 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:03:50.282 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-09 04:03:50.288 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:03:50.288 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-09_04-03-48__87aa5a91-125b-42bd-a5cd-30197ffdd2c5__wakuorg_nwaku:latest.log
2025-02-09 04:03:50.288 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:03:50.289 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:03:50.290 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:03:50.290 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.195.175
2025-02-09 04:03:50.290 DEBUG [src.node.docker_mananger] Generated ports ['32645', '32646', '32647', '32648', '32649']
2025-02-09 04:03:50.290 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:03:50.290 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:03:50.290 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:03:50.291 DEBUG [src.node.docker_mananger] docker run -i -t -p 32645:32645 -p 32646:32646 -p 32647:32647 -p 32648:32648 -p 32649:32649 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32647 --rest-port=32645 --tcp-port=32646 --discv5-udp-port=32648 --rest-address=0.0.0.0 --nat=extip:172.18.195.175 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cd0bef36dee3ec2f1cda733ddca47d8774eceebfdffabb49ad4ca572a4c8c1ac --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32649 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QBi5NBzN8TSzAG5Si4uk3nA9ouBZggQo94um1vjet_HpaQ5N9Kbaszk1OVa_gnO1rbpfxupNOziNnaFEpKM7n0ACgmlkgnY0gmlwhKwSEXOKbXVsdGlhZGRyc5YACASsEhFzBuvQAAoErBIRcwbr0d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJgbnGqVd8xWK9wbAmxnqgayzuB9FhpmGeP4gVZWjDPKDdGNwguvQg3VkcILr0oV3YWt1MgU --filternode=/ip4/172.18.17.115/tcp/60368/p2p/16Uiu2HAmFDRwwE3wXiYnJsWARdxJt3h5EuEgfYtbEqYCfZsof1gD
2025-02-09 04:03:50.516 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.195.175 waku e4a2549e4c19bc2a052c9ba62be21b7b93331076f022a7295499f58e35872ed0
2025-02-09 04:03:50.568 DEBUG [src.node.docker_mananger] Container started with ID e4a2549e4c19. Setting up logs at ./log/docker/node2_2025-02-09_04-03-48__87aa5a91-125b-42bd-a5cd-30197ffdd2c5__wakuorg_nwaku:latest.log
2025-02-09 04:03:50.568 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32645
2025-02-09 04:03:50.568 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:03:51.569 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32645/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:51.572 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:03:51.572 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:03:51.573 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32645/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:51.575 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.195.175/tcp/32646/p2p/16Uiu2HAmVN7YNmovnXjhDzDrjEhT77t65ojPXcb5S3sVv7Bpts98","/ip4/172.18.195.175/tcp/32647/ws/p2p/16Uiu2HAmVN7YNmovnXjhDzDrjEhT77t65ojPXcb5S3sVv7Bpts98"],"enrUri":"enr:-L24QC0wXskCj3VpkvIRiv5Q7lrQEifrc-WAb6oKQOTYBPQNCJAwfw85GxDUMqksviuFY5shqb-sUuwnrSKdu1G2WakCgmlkgnY0gmlwhKwSw6-KbXVsdGlhZGRyc5YACASsEsOvBn-GAAoErBLDrwZ_h90DgnJzhQADAQAAiXNlY3AyNTZrMaED-EPvXygANPNEZTP5WU7TEint_Vcc0RvQJEWq9TetWQeDdGNwgn-Gg3VkcIJ_iIV3YWt1MgA"}'
2025-02-09 04:03:51.575 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:03:51.575 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32645/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.17.115/tcp/60368/p2p/16Uiu2HAmFDRwwE3wXiYnJsWARdxJt3h5EuEgfYtbEqYCfZsof1gD"]'
2025-02-09 04:03:51.610 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:51.611 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-09 04:03:51.611 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60367/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-09 04:03:51.629 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:51.631 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32645/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "2a24aa2c-a844-463c-81b2-962d7df67d9d", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-09 04:03:51.643 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"2a24aa2c-a844-463c-81b2-962d7df67d9d","statusDesc":"OK"}'
2025-02-09 04:03:51.644 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32645/filter/v2/subscriptions/7240b75c-18a7-4eef-8896-0cacfaf22dc9" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:51.651 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"7240b75c-18a7-4eef-8896-0cacfaf22dc9","statusDesc":"OK"}'
2025-02-09 04:03:51.652 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:03:51.653 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:03:51.653 DEBUG [src.node.waku_node] Stopping container with id b1279544ac62
2025-02-09 04:03:52.761 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:03:52.761 DEBUG [src.node.waku_node] Stopping container with id e4a2549e4c19
2025-02-09 04:03:53.573 ERROR [src.node.docker_mananger] Max retries reached for container b1279544ac62. Exiting log stream.
2025-02-09 04:03:54.249 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:03:54.250 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:03:54.255 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:03:54.259 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
