2025-02-09 04:02:49.071 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:02:49.071 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_from_non_existing_content_topic with id: 2025-02-09_04-02-49__23b7b496-5aca-490e-9f2b-ddc74a36c253
2025-02-09 04:02:49.072 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:02:49.072 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-09 04:02:49.072 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-09 04:02:49.078 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:02:49.078 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-09_04-02-49__23b7b496-5aca-490e-9f2b-ddc74a36c253__wakuorg_nwaku:latest.log
2025-02-09 04:02:49.078 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:02:49.078 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:02:49.080 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:02:49.080 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.12.234
2025-02-09 04:02:49.080 DEBUG [src.node.docker_mananger] Generated ports ['19754', '19755', '19756', '19757', '19758']
2025-02-09 04:02:49.080 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:02:49.080 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:02:49.080 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:02:49.081 DEBUG [src.node.docker_mananger] docker run -i -t -p 19754:19754 -p 19755:19755 -p 19756:19756 -p 19757:19757 -p 19758:19758 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19756 --rest-port=19754 --tcp-port=19755 --discv5-udp-port=19757 --rest-address=0.0.0.0 --nat=extip:172.18.12.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=226cddaecb73bcea52fddf52ca6cc5cdcb40cf5dbc87dbc3920a40fdb9a0ef74 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19758 --metrics-logging=true --relay=true --filter=true
2025-02-09 04:02:49.306 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.12.234 waku f9af24ab61a9bb79d7d46afc5ce095fa3175dcb7fb1800f6f1c819001a0374be
2025-02-09 04:02:49.357 DEBUG [src.node.docker_mananger] Container started with ID f9af24ab61a9. Setting up logs at ./log/docker/node1_2025-02-09_04-02-49__23b7b496-5aca-490e-9f2b-ddc74a36c253__wakuorg_nwaku:latest.log
2025-02-09 04:02:49.359 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 19754
2025-02-09 04:02:49.359 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:02:49.877 ERROR [src.node.docker_mananger] Max retries reached for container 488902abb301. Exiting log stream.
2025-02-09 04:02:50.360 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19754/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:02:50.362 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:02:50.362 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:02:50.363 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19754/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:02:50.365 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.12.234/tcp/19755/p2p/16Uiu2HAm1oZKwbRN7mgmWXieWCf7BMBu1cGcenB4tuhV4abYpGdy","/ip4/172.18.12.234/tcp/19756/ws/p2p/16Uiu2HAm1oZKwbRN7mgmWXieWCf7BMBu1cGcenB4tuhV4abYpGdy"],"enrUri":"enr:-L24QDwjOUOUBDenO_WnM5-LhXzH-q9fB8et-ixv-0yQe7TGV98mLqrrZcDbbADD-_Kn7k2BKMZpDshVguNLl_2_49ACgmlkgnY0gmlwhKwSDOqKbXVsdGlhZGRyc5YACASsEgzqBk0rAAoErBIM6gZNLN0DgnJzhQADAQAAiXNlY3AyNTZrMaECXsFgkewj7ipCQD_yhVGhBKketXt-jANoNW0pkDQC4MSDdGNwgk0rg3VkcIJNLYV3YWt1MgU"}'
2025-02-09 04:02:50.365 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:02:50.366 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-09 04:02:50.372 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:02:50.372 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-09_04-02-49__23b7b496-5aca-490e-9f2b-ddc74a36c253__wakuorg_nwaku:latest.log
2025-02-09 04:02:50.372 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:02:50.372 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:02:50.374 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:02:50.374 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.165.185
2025-02-09 04:02:50.374 DEBUG [src.node.docker_mananger] Generated ports ['46280', '46281', '46282', '46283', '46284']
2025-02-09 04:02:50.374 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:02:50.374 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:02:50.374 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:02:50.374 DEBUG [src.node.docker_mananger] docker run -i -t -p 46280:46280 -p 46281:46281 -p 46282:46282 -p 46283:46283 -p 46284:46284 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46282 --rest-port=46280 --tcp-port=46281 --discv5-udp-port=46283 --rest-address=0.0.0.0 --nat=extip:172.18.165.185 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5f01f6df031fde28d5dfc2a923ddead72c8faaebfbaf8f166e358edce7bfd1cd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46284 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QDwjOUOUBDenO_WnM5-LhXzH-q9fB8et-ixv-0yQe7TGV98mLqrrZcDbbADD-_Kn7k2BKMZpDshVguNLl_2_49ACgmlkgnY0gmlwhKwSDOqKbXVsdGlhZGRyc5YACASsEgzqBk0rAAoErBIM6gZNLN0DgnJzhQADAQAAiXNlY3AyNTZrMaECXsFgkewj7ipCQD_yhVGhBKketXt-jANoNW0pkDQC4MSDdGNwgk0rg3VkcIJNLYV3YWt1MgU --filternode=/ip4/172.18.12.234/tcp/19755/p2p/16Uiu2HAm1oZKwbRN7mgmWXieWCf7BMBu1cGcenB4tuhV4abYpGdy
2025-02-09 04:02:50.608 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.165.185 waku 76134c4b8cd2dd8761d051aa31ae4a1d7d51d12bed35cf89ca3b0908d331c261
2025-02-09 04:02:50.656 DEBUG [src.node.docker_mananger] Container started with ID 76134c4b8cd2. Setting up logs at ./log/docker/node2_2025-02-09_04-02-49__23b7b496-5aca-490e-9f2b-ddc74a36c253__wakuorg_nwaku:latest.log
2025-02-09 04:02:50.657 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46280
2025-02-09 04:02:50.658 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:02:51.658 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46280/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:02:51.661 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:02:51.661 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:02:51.662 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46280/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:02:51.664 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.165.185/tcp/46281/p2p/16Uiu2HAmDorZbYGKKn76QcX4sckN7PrbsVxbyd8oJLsXcTeKrMax","/ip4/172.18.165.185/tcp/46282/ws/p2p/16Uiu2HAmDorZbYGKKn76QcX4sckN7PrbsVxbyd8oJLsXcTeKrMax"],"enrUri":"enr:-L24QPzqsT5Pkp6jaD205_aMxVmG_UDO3s1BhMHw2DerHR7yJGV5CCKp9diYaLN8fi7StkR41hOioV76NPKoGVKTeBICgmlkgnY0gmlwhKwSpbmKbXVsdGlhZGRyc5YACASsEqW5BrTJAAoErBKluQa0yt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDESEbxiAIz8QJxTSNUdgvaHk9wWBf25uiB67dUk_L02mDdGNwgrTJg3VkcIK0y4V3YWt1MgA"}'
2025-02-09 04:02:51.664 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:02:51.664 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46280/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.12.234/tcp/19755/p2p/16Uiu2HAm1oZKwbRN7mgmWXieWCf7BMBu1cGcenB4tuhV4abYpGdy"]'
2025-02-09 04:02:51.699 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:02:51.700 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-09 04:02:51.700 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19754/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-09 04:02:51.722 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:02:51.722 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46280/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "8e1ae16a-1252-4c62-bd0b-fce52e7ddda3", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-09 04:02:51.734 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"8e1ae16a-1252-4c62-bd0b-fce52e7ddda3","statusDesc":"OK"}'
2025-02-09 04:02:51.736 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:46280/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/2/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-09 04:02:51.744 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:46280/filter/v2/subscriptions. Response content: b'{"requestId":"1","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
2025-02-09 04:02:51.745 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19754/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:02:51.753 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:02:51.754 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-09 04:02:51.854 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-09 04:02:51.854 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46280/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:02:51.856 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1739073771745059584,"ephemeral":false}]'
2025-02-09 04:02:51.859 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:02:51.860 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:02:51.860 DEBUG [src.node.waku_node] Stopping container with id f9af24ab61a9
2025-02-09 04:02:52.902 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:02:52.903 DEBUG [src.node.waku_node] Stopping container with id 76134c4b8cd2
2025-02-09 04:02:53.715 ERROR [src.node.docker_mananger] Max retries reached for container f9af24ab61a9. Exiting log stream.
2025-02-09 04:02:54.396 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:02:54.397 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:02:54.403 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:02:54.407 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
