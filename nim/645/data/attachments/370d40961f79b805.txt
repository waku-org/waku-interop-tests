[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_relaying_node with id: 2025-02-09_04-02-10__4d0caac9-a297-4800-87d1-303e5b72f292
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-02-09_04-02-10__4d0caac9-a297-4800-87d1-303e5b72f292__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-02-09_04-02-10__4d0caac9-a297-4800-87d1-303e5b72f292__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-02-09_04-02-10__4d0caac9-a297-4800-87d1-303e5b72f292__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:33 Network waku created
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.139.95
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['39031', '39032', '39033', '39034', '39035']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 39031:39031 -p 39032:39032 -p 39033:39033 -p 39034:39034 -p 39035:39035 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39033 --rest-port=39031 --tcp-port=39032 --discv5-udp-port=39034 --rest-address=0.0.0.0 --nat=extip:172.18.139.95 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8e2e283ffd76e54fa001ec86de7cb599edbeca128d74af58418b6acdfcadb8bf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39035 --metrics-logging=true --filter=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.139.95 waku 4c84e318e18b9fb6567e80106b42751fa9daede74c025137dd7bd2979dd75356
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4c84e318e18b. Setting up logs at ./log/docker/node1_2025-02-09_04-02-10__4d0caac9-a297-4800-87d1-303e5b72f292__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 39031
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39031/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39031/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.139.95/tcp/39032/p2p/16Uiu2HAmCTjviLptsEMrZ1UGurtZkHVR2mxxYUEDbK9tRmzRgY4o","/ip4/172.18.139.95/tcp/39033/ws/p2p/16Uiu2HAmCTjviLptsEMrZ1UGurtZkHVR2mxxYUEDbK9tRmzRgY4o"],"enrUri":"enr:-L24QCNK4Qc8Q6RbnD8o-kEAsaaD2fwCKEkZa3KPBKycl0f8OFWt58xbIBfV1GUf92LVhvusDld3gJPLXAUYv67PLP8CgmlkgnY0gmlwhKwSi1-KbXVsdGlhZGRyc5YACASsEotfBph4AAoErBKLXwaYed0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_R5NWOszi2yCcLhnZCU2iEDp6pOqqic7OIEvQIXfSHCDdGNwgph4g3VkcIKYeoV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.103.168
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['21363', '21364', '21365', '21366', '21367']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 21363:21363 -p 21364:21364 -p 21365:21365 -p 21366:21366 -p 21367:21367 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21365 --rest-port=21363 --tcp-port=21364 --discv5-udp-port=21366 --rest-address=0.0.0.0 --nat=extip:172.18.103.168 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8cb77a5078394dfdeeab2c82ba4bbc3baee06cf4c62f2fd166dcf5ccbb7f301e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21367 --metrics-logging=true --filter=true --relay=true --discv5-bootstrap-node=enr:-L24QCNK4Qc8Q6RbnD8o-kEAsaaD2fwCKEkZa3KPBKycl0f8OFWt58xbIBfV1GUf92LVhvusDld3gJPLXAUYv67PLP8CgmlkgnY0gmlwhKwSi1-KbXVsdGlhZGRyc5YACASsEotfBph4AAoErBKLXwaYed0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_R5NWOszi2yCcLhnZCU2iEDp6pOqqic7OIEvQIXfSHCDdGNwgph4g3VkcIKYeoV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.103.168 waku 299bd8d4d229b421b75450fe046c225b1a0535cf1c1cdb9c020bb43cfabe7920
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 299bd8d4d229. Setting up logs at ./log/docker/node2_2025-02-09_04-02-10__4d0caac9-a297-4800-87d1-303e5b72f292__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 21363
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21363/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21363/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.103.168/tcp/21364/p2p/16Uiu2HAmSyga42trnEskhn4VDUSb8r43GzqkhsGZbcmrNupsnf3h","/ip4/172.18.103.168/tcp/21365/ws/p2p/16Uiu2HAmSyga42trnEskhn4VDUSb8r43GzqkhsGZbcmrNupsnf3h"],"enrUri":"enr:-L24QFAhtIxlIHb6B8LCkDgmBX1v9i9Gk_MzFjOLtkCswjPzdcq81GwqmAKDOGT4eiEwYP1-7qL-vE86duEptktlZ0oCgmlkgnY0gmlwhKwSZ6iKbXVsdGlhZGRyc5YACASsEmeoBlN0AAoErBJnqAZTdd0DgnJzhQADAQAAiXNlY3AyNTZrMaED1M2Mah11FbOTb45dHXX99gU5RvXtD4DxlWeelf9AuPyDdGNwglN0g3VkcIJTdoV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.101.137
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['14092', '14093', '14094', '14095', '14096']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 14092:14092 -p 14093:14093 -p 14094:14094 -p 14095:14095 -p 14096:14096 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14094 --rest-port=14092 --tcp-port=14093 --discv5-udp-port=14095 --rest-address=0.0.0.0 --nat=extip:172.18.101.137 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0bbef4ccab89f1c507a0cdfae4aabb8accfa9caa1a04d1bfec1aa90c25a8dfcc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14096 --metrics-logging=true --relay=false --filternode=/ip4/172.18.103.168/tcp/21364/p2p/16Uiu2HAmSyga42trnEskhn4VDUSb8r43GzqkhsGZbcmrNupsnf3h --discv5-bootstrap-node=enr:-L24QFAhtIxlIHb6B8LCkDgmBX1v9i9Gk_MzFjOLtkCswjPzdcq81GwqmAKDOGT4eiEwYP1-7qL-vE86duEptktlZ0oCgmlkgnY0gmlwhKwSZ6iKbXVsdGlhZGRyc5YACASsEmeoBlN0AAoErBJnqAZTdd0DgnJzhQADAQAAiXNlY3AyNTZrMaED1M2Mah11FbOTb45dHXX99gU5RvXtD4DxlWeelf9AuPyDdGNwglN0g3VkcIJTdoV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.101.137 waku 6916d1d7f3e41b64a73990705bd4484c96ac919c10c9dad355b7e6858c304005
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6916d1d7f3e4. Setting up logs at ./log/docker/node3_2025-02-09_04-02-10__4d0caac9-a297-4800-87d1-303e5b72f292__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 14092
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14092/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14092/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.101.137/tcp/14093/p2p/16Uiu2HAmHiMQVH2WdoYa2LPw8gHne9qrZoTKAXuq1fLSyFbYUQAq","/ip4/172.18.101.137/tcp/14094/ws/p2p/16Uiu2HAmHiMQVH2WdoYa2LPw8gHne9qrZoTKAXuq1fLSyFbYUQAq"],"enrUri":"enr:-L24QNPOpfQEtykvOWq3RxnNBwRqjgXWxcczWpZUgt4wToOgAGw68vsQ8UxX4bUZCCW7_KbkmxlSyRuYOTY-3IEHTdcCgmlkgnY0gmlwhKwSZYmKbXVsdGlhZGRyc5YACASsEmWJBjcNAAoErBJliQY3Dt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDSyb788Tb0A7c1eBJ-DsZW0oXv6qEYetj1IkaCIOzqV6DdGNwgjcNg3VkcII3D4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39031/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21363/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14092/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39031/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.103.168/tcp/21364/p2p/16Uiu2HAmSyga42trnEskhn4VDUSb8r43GzqkhsGZbcmrNupsnf3h","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21363/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.139.95/tcp/39032/p2p/16Uiu2HAmCTjviLptsEMrZ1UGurtZkHVR2mxxYUEDbK9tRmzRgY4o","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.101.137/tcp/14093/p2p/16Uiu2HAmHiMQVH2WdoYa2LPw8gHne9qrZoTKAXuq1fLSyFbYUQAq","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14092/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.103.168/tcp/21364/p2p/16Uiu2HAmSyga42trnEskhn4VDUSb8r43GzqkhsGZbcmrNupsnf3h","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39031/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14092/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1739073766969064704,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4c84e318e18b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 299bd8d4d229
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4c84e318e18b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 6916d1d7f3e4
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 299bd8d4d229. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.