2025-02-09 04:04:37.533 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:04:37.533 DEBUG [tests.conftest] Running test: test_single_content_topic[/statusim/1/community/cbor] with id: 2025-02-09_04-04-37__5c01d69c-819c-4d11-b389-b7e72215d8e4
2025-02-09 04:04:37.533 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:04:37.534 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-09 04:04:37.534 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-09 04:04:37.542 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:04:37.542 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-09_04-04-37__5c01d69c-819c-4d11-b389-b7e72215d8e4__wakuorg_nwaku:latest.log
2025-02-09 04:04:37.542 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:04:37.543 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:04:37.544 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:04:37.544 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.208.21
2025-02-09 04:04:37.544 DEBUG [src.node.docker_mananger] Generated ports ['38604', '38605', '38606', '38607', '38608']
2025-02-09 04:04:37.545 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:04:37.545 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:04:37.545 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:04:37.545 DEBUG [src.node.docker_mananger] docker run -i -t -p 38604:38604 -p 38605:38605 -p 38606:38606 -p 38607:38607 -p 38608:38608 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38606 --rest-port=38604 --tcp-port=38605 --discv5-udp-port=38607 --rest-address=0.0.0.0 --nat=extip:172.18.208.21 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ddb3bfd7d3dcdf6fccf9c5c59e9211dbd1acfee98bcf83dd7bd8eacf8d1b50ab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38608 --metrics-logging=true --relay=true --filter=true --content-topic=/statusim/1/community/cbor
2025-02-09 04:04:37.800 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.208.21 waku d955a8121e1fcfc059ff8f5aafc9c78a0f420db8e4888003e10cc818bddb3ab7
2025-02-09 04:04:37.860 DEBUG [src.node.docker_mananger] Container started with ID d955a8121e1f. Setting up logs at ./log/docker/node1_2025-02-09_04-04-37__5c01d69c-819c-4d11-b389-b7e72215d8e4__wakuorg_nwaku:latest.log
2025-02-09 04:04:37.860 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38604
2025-02-09 04:04:37.862 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:04:38.327 ERROR [src.node.docker_mananger] Max retries reached for container cf0567e25862. Exiting log stream.
2025-02-09 04:04:38.863 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38604/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:38.867 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:04:38.867 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:04:38.867 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38604/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:38.870 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.208.21/tcp/38605/p2p/16Uiu2HAmAXfjrfXqd1nuVownwiPojDadqcLxMEgupUG4aAqvz6Py","/ip4/172.18.208.21/tcp/38606/ws/p2p/16Uiu2HAmAXfjrfXqd1nuVownwiPojDadqcLxMEgupUG4aAqvz6Py"],"enrUri":"enr:-L24QJHpY-j1p9WGI-6YyqIoDnKX-Tn_4smXHMDifBprP6mZOnKGzeiwMtmDidTKuaIgUXULKX4Y_5YCRXZjqL2zSNECgmlkgnY0gmlwhKwS0BWKbXVsdGlhZGRyc5YACASsEtAVBpbNAAoErBLQFQaWzt0DgnJzhQACAQAAiXNlY3AyNTZrMaEC4GiEXhh9bIdLpIXw8ZQenPH6rPw4xSPFOfZW-UMdu-CDdGNwgpbNg3VkcIKWz4V3YWt1MgU"}'
2025-02-09 04:04:38.870 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:04:38.877 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:04:38.877 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-09_04-04-37__5c01d69c-819c-4d11-b389-b7e72215d8e4__wakuorg_nwaku:latest.log
2025-02-09 04:04:38.877 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:04:38.877 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:04:38.879 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:04:38.879 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.234.255
2025-02-09 04:04:38.879 DEBUG [src.node.docker_mananger] Generated ports ['64083', '64084', '64085', '64086', '64087']
2025-02-09 04:04:38.880 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:04:38.880 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:04:38.880 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:04:38.880 DEBUG [src.node.docker_mananger] docker run -i -t -p 64083:64083 -p 64084:64084 -p 64085:64085 -p 64086:64086 -p 64087:64087 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64085 --rest-port=64083 --tcp-port=64084 --discv5-udp-port=64086 --rest-address=0.0.0.0 --nat=extip:172.18.234.255 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ae96cdce6b8df7ce504fd75cc303f8d74b548bfaef11578a38abc76caff6bd38 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64087 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QJHpY-j1p9WGI-6YyqIoDnKX-Tn_4smXHMDifBprP6mZOnKGzeiwMtmDidTKuaIgUXULKX4Y_5YCRXZjqL2zSNECgmlkgnY0gmlwhKwS0BWKbXVsdGlhZGRyc5YACASsEtAVBpbNAAoErBLQFQaWzt0DgnJzhQACAQAAiXNlY3AyNTZrMaEC4GiEXhh9bIdLpIXw8ZQenPH6rPw4xSPFOfZW-UMdu-CDdGNwgpbNg3VkcIKWz4V3YWt1MgU --content-topic=/statusim/1/community/cbor
2025-02-09 04:04:39.122 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.234.255 waku 75c6e50a3aad7234c49d7525c800d6e8cf7a59b387ac470f762b2b331c7fd443
2025-02-09 04:04:39.172 DEBUG [src.node.docker_mananger] Container started with ID 75c6e50a3aad. Setting up logs at ./log/docker/node2_2025-02-09_04-04-37__5c01d69c-819c-4d11-b389-b7e72215d8e4__wakuorg_nwaku:latest.log
2025-02-09 04:04:39.172 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 64083
2025-02-09 04:04:39.173 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:04:40.173 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64083/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:40.187 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:04:40.190 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:04:40.191 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64083/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:40.195 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.234.255/tcp/64084/p2p/16Uiu2HAm1ZEvoZ7KXokjRDmpmgEXrkpsmYibDGTm15r5qUUZ46MQ","/ip4/172.18.234.255/tcp/64085/ws/p2p/16Uiu2HAm1ZEvoZ7KXokjRDmpmgEXrkpsmYibDGTm15r5qUUZ46MQ"],"enrUri":"enr:-L24QM-IidNl9c83jITIIOVHLskAdUREQmstaTlVBaL0C25cT3iTthX2e9Vt8f_GCBqhBu3dWvArKsyNTGjvHxGlnHwCgmlkgnY0gmlwhKwS6v-KbXVsdGlhZGRyc5YACASsEur_BvpUAAoErBLq_wb6Vd0DgnJzhQACAQAAiXNlY3AyNTZrMaECWxZxMLujmTu_8YZZ8pqIHWai0AVy6FiYE4tHsOYwrWuDdGNwgvpUg3VkcIL6VoV3YWt1MgE"}'
2025-02-09 04:04:40.196 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:04:40.196 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64083/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.208.21/tcp/38605/p2p/16Uiu2HAmAXfjrfXqd1nuVownwiPojDadqcLxMEgupUG4aAqvz6Py"]'
2025-02-09 04:04:40.199 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:40.200 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38604/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/statusim/1/community/cbor"]'
2025-02-09 04:04:40.202 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:40.202 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64083/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/statusim/1/community/cbor"]'
2025-02-09 04:04:40.204 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:40.205 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38604/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:40.211 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:40.211 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-09 04:04:40.311 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-09 04:04:40.312 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38604/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:40.314 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/statusim/1/community/cbor","version":0,"timestamp":1739073880205329664,"ephemeral":false}]'
2025-02-09 04:04:40.316 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-09 04:04:40.316 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64083/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:40.318 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/statusim/1/community/cbor","version":0,"timestamp":1739073880205329664,"ephemeral":false}]'
2025-02-09 04:04:40.321 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:04:40.322 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:04:40.322 DEBUG [src.node.waku_node] Stopping container with id d955a8121e1f
2025-02-09 04:04:41.362 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:04:41.362 DEBUG [src.node.waku_node] Stopping container with id 75c6e50a3aad
2025-02-09 04:04:42.175 ERROR [src.node.docker_mananger] Max retries reached for container d955a8121e1f. Exiting log stream.
2025-02-09 04:04:42.901 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:04:42.902 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:04:42.907 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:04:42.912 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
