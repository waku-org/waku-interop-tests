2025-02-09 04:07:47.669 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:07:47.670 DEBUG [tests.conftest] Running test: test_store_node_paused_and_unpaused with id: 2025-02-09_04-07-47__45afa07f-4349-4a04-90bb-ac690ebe987f
2025-02-09 04:07:47.670 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:07:47.670 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-09 04:07:47.671 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-09 04:07:47.678 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:07:47.678 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-09_04-07-47__45afa07f-4349-4a04-90bb-ac690ebe987f__wakuorg_nwaku:latest.log
2025-02-09 04:07:47.678 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:07:47.678 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:07:47.680 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:07:47.680 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.181.133
2025-02-09 04:07:47.680 DEBUG [src.node.docker_mananger] Generated ports ['42709', '42710', '42711', '42712', '42713']
2025-02-09 04:07:47.680 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:07:47.680 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:07:47.681 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:07:47.681 DEBUG [src.node.docker_mananger] docker run -i -t -p 42709:42709 -p 42710:42710 -p 42711:42711 -p 42712:42712 -p 42713:42713 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42711 --rest-port=42709 --tcp-port=42710 --discv5-udp-port=42712 --rest-address=0.0.0.0 --nat=extip:172.18.181.133 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a9759f1a39bcc81ae6bd9fa42d58d6df2dc83f544eec3953d1cdc8b78318a19d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42713 --metrics-logging=true --store=true --relay=true
2025-02-09 04:07:47.915 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.181.133 waku 9de3d6251ee210c60d219999abeca1f20e340e76494cb9581f7d6e3830ef88ad
2025-02-09 04:07:47.966 DEBUG [src.node.docker_mananger] Container started with ID 9de3d6251ee2. Setting up logs at ./log/docker/publishing_node1_2025-02-09_04-07-47__45afa07f-4349-4a04-90bb-ac690ebe987f__wakuorg_nwaku:latest.log
2025-02-09 04:07:47.968 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42709
2025-02-09 04:07:47.968 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:07:48.462 ERROR [src.node.docker_mananger] Max retries reached for container e77f5be1ad1e. Exiting log stream.
2025-02-09 04:07:48.968 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42709/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:48.971 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:07:48.971 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:07:48.972 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42709/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:48.974 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.181.133/tcp/42710/p2p/16Uiu2HAmSMib9V1r4zsHeKuALuVgoZ7kMgc5JL9XcU5xjT9cPBbj","/ip4/172.18.181.133/tcp/42711/ws/p2p/16Uiu2HAmSMib9V1r4zsHeKuALuVgoZ7kMgc5JL9XcU5xjT9cPBbj"],"enrUri":"enr:-L24QIYY_8yxDdfHdeEGnzFcel2R43-T-_8QKZMBqmRr0iZXJlyRQrtvdGUsO28jK8yJ-XjqB1SlfqidK-pmyyDpgr8CgmlkgnY0gmlwhKwStYWKbXVsdGlhZGRyc5YACASsErWFBqbWAAoErBK1hQam190DgnJzhQADAQAAiXNlY3AyNTZrMaEDy5bsDtjmOzyrF2mjJX8CrjKtY5NonCOXQT6mZ3mCn2aDdGNwgqbWg3VkcIKm2IV3YWt1MgM"}'
2025-02-09 04:07:48.974 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:07:48.981 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:07:48.981 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-09_04-07-47__45afa07f-4349-4a04-90bb-ac690ebe987f__wakuorg_nwaku:latest.log
2025-02-09 04:07:48.981 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:07:48.981 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:07:48.982 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:07:48.982 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.241.130
2025-02-09 04:07:48.983 DEBUG [src.node.docker_mananger] Generated ports ['56350', '56351', '56352', '56353', '56354']
2025-02-09 04:07:48.983 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:07:48.983 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:07:48.983 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:07:48.983 DEBUG [src.node.docker_mananger] docker run -i -t -p 56350:56350 -p 56351:56351 -p 56352:56352 -p 56353:56353 -p 56354:56354 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56352 --rest-port=56350 --tcp-port=56351 --discv5-udp-port=56353 --rest-address=0.0.0.0 --nat=extip:172.18.241.130 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e938ba3fb80c4aeb2fabfb00b645d7f4b1a64b2d4ea4aafdf9a5dfbfbdbffc2f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56354 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QIYY_8yxDdfHdeEGnzFcel2R43-T-_8QKZMBqmRr0iZXJlyRQrtvdGUsO28jK8yJ-XjqB1SlfqidK-pmyyDpgr8CgmlkgnY0gmlwhKwStYWKbXVsdGlhZGRyc5YACASsErWFBqbWAAoErBK1hQam190DgnJzhQADAQAAiXNlY3AyNTZrMaEDy5bsDtjmOzyrF2mjJX8CrjKtY5NonCOXQT6mZ3mCn2aDdGNwgqbWg3VkcIKm2IV3YWt1MgM --storenode=/ip4/172.18.181.133/tcp/42710/p2p/16Uiu2HAmSMib9V1r4zsHeKuALuVgoZ7kMgc5JL9XcU5xjT9cPBbj --store=true --relay=true
2025-02-09 04:07:49.217 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.241.130 waku 71f19a408f00a523598a21de954de03a1fbaf86c3bb32dc667aa9668a122ef92
2025-02-09 04:07:49.271 DEBUG [src.node.docker_mananger] Container started with ID 71f19a408f00. Setting up logs at ./log/docker/store_node1_2025-02-09_04-07-47__45afa07f-4349-4a04-90bb-ac690ebe987f__wakuorg_nwaku:latest.log
2025-02-09 04:07:49.272 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56350
2025-02-09 04:07:49.274 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:07:50.274 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56350/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:50.277 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:07:50.277 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:07:50.277 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56350/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:50.279 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.241.130/tcp/56351/p2p/16Uiu2HAm2w4txDKzM91kfhqacUSau8bmvmoKWmL3z7vAGgUxuq9L","/ip4/172.18.241.130/tcp/56352/ws/p2p/16Uiu2HAm2w4txDKzM91kfhqacUSau8bmvmoKWmL3z7vAGgUxuq9L"],"enrUri":"enr:-L24QNrIWfyKXIvF37sNQu5nT_u170E24E5uU_klrBnkr0macjrZYgoaOahlznLeg95ttucrIcuN7z68sFjCl3VqjRUCgmlkgnY0gmlwhKwS8YKKbXVsdGlhZGRyc5YACASsEvGCBtwfAAoErBLxggbcIN0DgnJzhQADAQAAiXNlY3AyNTZrMaECb4mQUpsVJ5c0IWaWXzdRsYo7rDB_R2MOfiS3ORHIG1ODdGNwgtwfg3VkcILcIYV3YWt1MgM"}'
2025-02-09 04:07:50.280 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:07:50.280 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56350/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.181.133/tcp/42710/p2p/16Uiu2HAmSMib9V1r4zsHeKuALuVgoZ7kMgc5JL9XcU5xjT9cPBbj"]'
2025-02-09 04:07:50.282 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:50.283 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42709/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:07:50.285 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:50.285 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56350/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:07:50.287 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:50.288 DEBUG [src.steps.store] Relaying message
2025-02-09 04:07:50.288 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42709/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:07:50.294 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:50.294 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:07:50.495 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-09 04:07:50.495 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42709/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:50.499 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x84188d9867dd75653ff6742f2f8954ca93eb95b7df747554b667bb3e015c6ec7"}]}'
2025-02-09 04:07:50.499 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-09 04:07:50.499 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56350/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:50.502 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x84188d9867dd75653ff6742f2f8954ca93eb95b7df747554b667bb3e015c6ec7"}]}'
2025-02-09 04:07:50.503 DEBUG [src.node.waku_node] Pausing container with id 71f19a408f00
2025-02-09 04:07:50.512 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:07:51.512 DEBUG [src.node.waku_node] Unpause container with id 71f19a408f00
2025-02-09 04:07:51.522 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56350/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:51.524 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:07:51.524 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:07:51.524 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56350/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:51.527 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.241.130/tcp/56351/p2p/16Uiu2HAm2w4txDKzM91kfhqacUSau8bmvmoKWmL3z7vAGgUxuq9L","/ip4/172.18.241.130/tcp/56352/ws/p2p/16Uiu2HAm2w4txDKzM91kfhqacUSau8bmvmoKWmL3z7vAGgUxuq9L"],"enrUri":"enr:-L24QNrIWfyKXIvF37sNQu5nT_u170E24E5uU_klrBnkr0macjrZYgoaOahlznLeg95ttucrIcuN7z68sFjCl3VqjRUCgmlkgnY0gmlwhKwS8YKKbXVsdGlhZGRyc5YACASsEvGCBtwfAAoErBLxggbcIN0DgnJzhQADAQAAiXNlY3AyNTZrMaECb4mQUpsVJ5c0IWaWXzdRsYo7rDB_R2MOfiS3ORHIG1ODdGNwgtwfg3VkcILcIYV3YWt1MgM"}'
2025-02-09 04:07:51.527 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:07:51.527 DEBUG [src.steps.store] Relaying message
2025-02-09 04:07:51.527 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42709/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:07:51.533 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:51.534 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:07:51.734 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-09 04:07:51.735 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42709/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:51.738 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x84188d9867dd75653ff6742f2f8954ca93eb95b7df747554b667bb3e015c6ec7"},{"messageHash":"0xa1334e2c522f0ade3a6b4ccb4932353f6554839440b827e9f64ba1284bb4f483"}]}'
2025-02-09 04:07:51.738 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-09 04:07:51.739 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56350/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:51.741 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x84188d9867dd75653ff6742f2f8954ca93eb95b7df747554b667bb3e015c6ec7"},{"messageHash":"0xa1334e2c522f0ade3a6b4ccb4932353f6554839440b827e9f64ba1284bb4f483"}]}'
2025-02-09 04:07:51.742 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42709/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:51.745 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x84188d9867dd75653ff6742f2f8954ca93eb95b7df747554b667bb3e015c6ec7"},{"messageHash":"0xa1334e2c522f0ade3a6b4ccb4932353f6554839440b827e9f64ba1284bb4f483"}]}'
2025-02-09 04:07:51.745 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56350/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:51.748 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x84188d9867dd75653ff6742f2f8954ca93eb95b7df747554b667bb3e015c6ec7"},{"messageHash":"0xa1334e2c522f0ade3a6b4ccb4932353f6554839440b827e9f64ba1284bb4f483"}]}'
2025-02-09 04:07:51.749 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:07:51.750 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:07:51.751 DEBUG [src.node.waku_node] Stopping container with id 9de3d6251ee2
2025-02-09 04:07:52.503 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:07:52.503 DEBUG [src.node.waku_node] Stopping container with id 71f19a408f00
2025-02-09 04:07:53.265 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:07:53.266 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:07:53.277 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:07:53.282 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
