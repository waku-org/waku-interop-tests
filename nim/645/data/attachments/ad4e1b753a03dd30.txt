2025-02-09 04:04:26.663 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:04:26.663 DEBUG [tests.conftest] Running test: test_store_with_wrong_encoding_pubsubtopic with id: 2025-02-09_04-04-26__9ff6dc49-d2c0-4d26-94c8-4d1679378f34
2025-02-09 04:04:26.663 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:04:26.663 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-09 04:04:26.664 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-09 04:04:26.670 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:04:26.670 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-09_04-04-26__9ff6dc49-d2c0-4d26-94c8-4d1679378f34__wakuorg_nwaku:latest.log
2025-02-09 04:04:26.670 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:04:26.670 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:04:26.672 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:04:26.672 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.14.157
2025-02-09 04:04:26.672 DEBUG [src.node.docker_mananger] Generated ports ['24345', '24346', '24347', '24348', '24349']
2025-02-09 04:04:26.672 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:04:26.672 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:04:26.673 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:04:26.673 DEBUG [src.node.docker_mananger] docker run -i -t -p 24345:24345 -p 24346:24346 -p 24347:24347 -p 24348:24348 -p 24349:24349 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24347 --rest-port=24345 --tcp-port=24346 --discv5-udp-port=24348 --rest-address=0.0.0.0 --nat=extip:172.18.14.157 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=39eabf59d68ba42feb8bf46aa4db137e1d34a3e2cf2c197aefcef0ecdb8b29b1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24349 --metrics-logging=true --store=true --relay=true
2025-02-09 04:04:26.896 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.14.157 waku d55343deeae5e1c08cc318620cf35a50df04f13b93da9d5fa38f45b3bcf4cd26
2025-02-09 04:04:26.944 DEBUG [src.node.docker_mananger] Container started with ID d55343deeae5. Setting up logs at ./log/docker/publishing_node1_2025-02-09_04-04-26__9ff6dc49-d2c0-4d26-94c8-4d1679378f34__wakuorg_nwaku:latest.log
2025-02-09 04:04:26.946 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 24345
2025-02-09 04:04:26.946 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:04:27.469 ERROR [src.node.docker_mananger] Max retries reached for container 81625a2dd6eb. Exiting log stream.
2025-02-09 04:04:27.946 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24345/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:27.949 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:04:27.950 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:04:27.950 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24345/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:27.952 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.14.157/tcp/24346/p2p/16Uiu2HAmMKSB7LZJQdjEoa1V8NGv7tKqaAutUv4NsicAeZEWuSDN","/ip4/172.18.14.157/tcp/24347/ws/p2p/16Uiu2HAmMKSB7LZJQdjEoa1V8NGv7tKqaAutUv4NsicAeZEWuSDN"],"enrUri":"enr:-L24QNCZ9iAsTSncCjYVp7TArXwpS8v7cAR6V5bSMq8YZxawebOzmfoJRFf9YDL1WoTUsHYuGBRit-xzNsYvaohA6zoCgmlkgnY0gmlwhKwSDp2KbXVsdGlhZGRyc5YACASsEg6dBl8aAAoErBIOnQZfG90DgnJzhQADAQAAiXNlY3AyNTZrMaEDgLbEGEWV91vmplT2JBNeiR2PgW4vYrbRtkdC9YDhNuGDdGNwgl8ag3VkcIJfHIV3YWt1MgM"}'
2025-02-09 04:04:27.952 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:04:27.959 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:04:27.959 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-09_04-04-26__9ff6dc49-d2c0-4d26-94c8-4d1679378f34__wakuorg_nwaku:latest.log
2025-02-09 04:04:27.959 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:04:27.959 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:04:27.960 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:04:27.961 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.236.221
2025-02-09 04:04:27.961 DEBUG [src.node.docker_mananger] Generated ports ['42227', '42228', '42229', '42230', '42231']
2025-02-09 04:04:27.961 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:04:27.961 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:04:27.961 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:04:27.961 DEBUG [src.node.docker_mananger] docker run -i -t -p 42227:42227 -p 42228:42228 -p 42229:42229 -p 42230:42230 -p 42231:42231 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42229 --rest-port=42227 --tcp-port=42228 --discv5-udp-port=42230 --rest-address=0.0.0.0 --nat=extip:172.18.236.221 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4f160fa83f921bce1ec0b37a1d5da9322eeb2e6f072a5f7ab4cf335be3b19c0e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42231 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QNCZ9iAsTSncCjYVp7TArXwpS8v7cAR6V5bSMq8YZxawebOzmfoJRFf9YDL1WoTUsHYuGBRit-xzNsYvaohA6zoCgmlkgnY0gmlwhKwSDp2KbXVsdGlhZGRyc5YACASsEg6dBl8aAAoErBIOnQZfG90DgnJzhQADAQAAiXNlY3AyNTZrMaEDgLbEGEWV91vmplT2JBNeiR2PgW4vYrbRtkdC9YDhNuGDdGNwgl8ag3VkcIJfHIV3YWt1MgM --storenode=/ip4/172.18.14.157/tcp/24346/p2p/16Uiu2HAmMKSB7LZJQdjEoa1V8NGv7tKqaAutUv4NsicAeZEWuSDN --store=true --relay=true
2025-02-09 04:04:28.193 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.236.221 waku 0b420e582e6bac08df2223f7f82bbeae588f06b04e6b28432262749aeb80a76f
2025-02-09 04:04:28.244 DEBUG [src.node.docker_mananger] Container started with ID 0b420e582e6b. Setting up logs at ./log/docker/store_node1_2025-02-09_04-04-26__9ff6dc49-d2c0-4d26-94c8-4d1679378f34__wakuorg_nwaku:latest.log
2025-02-09 04:04:28.245 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42227
2025-02-09 04:04:28.245 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:04:29.246 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42227/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:29.249 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:04:29.249 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:04:29.249 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42227/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:29.251 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.236.221/tcp/42228/p2p/16Uiu2HAmU2FNMdex8us9D1ckGnz57HLdFLK2kdvMEBbSFuN1G3GQ","/ip4/172.18.236.221/tcp/42229/ws/p2p/16Uiu2HAmU2FNMdex8us9D1ckGnz57HLdFLK2kdvMEBbSFuN1G3GQ"],"enrUri":"enr:-L24QKY6drcmTtBWQLscpSGyidvXOSjinp5VmJvb0EW7qlJAFDqBMJdChKBnbvAGlR245tuJF79THKiJSy1L8KTf8UQCgmlkgnY0gmlwhKwS7N2KbXVsdGlhZGRyc5YACASsEuzdBqT0AAoErBLs3Qak9d0DgnJzhQADAQAAiXNlY3AyNTZrMaED5FF7c7cwVmrgQj-0EIQPXK3urT_1hMqd2WSW75tpgT2DdGNwgqT0g3VkcIKk9oV3YWt1MgM"}'
2025-02-09 04:04:29.252 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:04:29.252 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42227/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.14.157/tcp/24346/p2p/16Uiu2HAmMKSB7LZJQdjEoa1V8NGv7tKqaAutUv4NsicAeZEWuSDN"]'
2025-02-09 04:04:29.255 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:29.255 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24345/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:04:29.257 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:29.258 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42227/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:04:29.259 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:29.260 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:29.260 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24345/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:29.266 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:29.266 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:29.467 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:29.467 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24345/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:29.473 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:29.473 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:29.674 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:29.675 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24345/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:29.681 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:29.681 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:29.882 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:29.882 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24345/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:29.888 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:29.888 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:30.089 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:30.089 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24345/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:30.095 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:30.095 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:30.296 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:30.296 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24345/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:30.302 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:30.304 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:30.505 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:30.505 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24345/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:30.512 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:30.512 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:30.713 DEBUG [src.steps.store] Relaying message
2025-02-09 04:04:30.713 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24345/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:04:30.720 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:30.721 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:04:30.922 DEBUG [tests.store.test_topics] trying get message with  wrong encoded pubsub topic %23waku%2F2%2Frs%2F3%2F0
2025-02-09 04:04:30.922 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24345/store/v3/messages?includeData=true&pubsubTopic=%23waku%2F2%2Frs%2F3%2F0&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:30.925 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-09 04:04:30.926 DEBUG [tests.store.test_topics] response for getting message with wrong encoded pubsub topic {'requestId': '', 'statusCode': 200, 'statusDesc': 'OK', 'messages': []}
2025-02-09 04:04:30.928 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:04:30.929 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:04:30.930 DEBUG [src.node.waku_node] Stopping container with id d55343deeae5
2025-02-09 04:04:31.491 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:04:31.492 DEBUG [src.node.waku_node] Stopping container with id 0b420e582e6b
2025-02-09 04:04:32.304 ERROR [src.node.docker_mananger] Max retries reached for container d55343deeae5. Exiting log stream.
2025-02-09 04:04:32.988 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:04:32.988 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:04:32.995 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:04:33.001 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
