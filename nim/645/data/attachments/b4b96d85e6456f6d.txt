2025-02-09 04:04:54.169 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:04:54.169 DEBUG [tests.conftest] Running test: test_light_push_with_missing_pubsub_topics with id: 2025-02-09_04-04-54__40892db7-0e32-44e8-a7cb-9936224b42e7
2025-02-09 04:04:54.169 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:04:54.170 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-09 04:04:54.176 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:04:54.176 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-09_04-04-54__40892db7-0e32-44e8-a7cb-9936224b42e7__wakuorg_nwaku:latest.log
2025-02-09 04:04:54.177 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:04:54.177 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:04:54.178 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:04:54.178 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.181.252
2025-02-09 04:04:54.178 DEBUG [src.node.docker_mananger] Generated ports ['13027', '13028', '13029', '13030', '13031']
2025-02-09 04:04:54.179 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:04:54.179 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:04:54.179 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:04:54.179 DEBUG [src.node.docker_mananger] docker run -i -t -p 13027:13027 -p 13028:13028 -p 13029:13029 -p 13030:13030 -p 13031:13031 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13029 --rest-port=13027 --tcp-port=13028 --discv5-udp-port=13030 --rest-address=0.0.0.0 --nat=extip:172.18.181.252 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fcfb97fceeed97591d00dbecac58fbef72edbdffedc4dcb730bb0c28fc796357 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13031 --metrics-logging=true --lightpush=true --relay=true
2025-02-09 04:04:54.410 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.181.252 waku db1168c48798ded57c4d891a6ffa88c728c36e107b0ef804445ce06d044bcd61
2025-02-09 04:04:54.454 DEBUG [src.node.docker_mananger] Container started with ID db1168c48798. Setting up logs at ./log/docker/receiving_node1_2025-02-09_04-04-54__40892db7-0e32-44e8-a7cb-9936224b42e7__wakuorg_nwaku:latest.log
2025-02-09 04:04:54.455 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 13027
2025-02-09 04:04:54.455 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:04:54.842 ERROR [src.node.docker_mananger] Max retries reached for container 6b0f6706734b. Exiting log stream.
2025-02-09 04:04:55.457 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13027/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:55.460 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:04:55.460 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:04:55.460 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13027/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:55.463 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.181.252/tcp/13028/p2p/16Uiu2HAmGzV19ybSUrwBMTUsPzc36EfjiBUFrcwGPFP8CHXSLvyP","/ip4/172.18.181.252/tcp/13029/ws/p2p/16Uiu2HAmGzV19ybSUrwBMTUsPzc36EfjiBUFrcwGPFP8CHXSLvyP"],"enrUri":"enr:-L24QB70CRysy_UdYy0t0fzk40IVPCDmiek0C3n_DkHh2pYsK6tpvoPTjHa-isXDdEAETHTi759ctWVBM_vCQqNd5nACgmlkgnY0gmlwhKwStfyKbXVsdGlhZGRyc5YACASsErX8BjLkAAoErBK1_AYy5d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDQG0uU87oCDNnc7zQP4V-Y3S1oZmXY8eLlACSz9rqeAKDdGNwgjLkg3VkcIIy5oV3YWt1Mgk"}'
2025-02-09 04:04:55.463 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:04:55.469 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:04:55.469 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-09_04-04-54__40892db7-0e32-44e8-a7cb-9936224b42e7__wakuorg_nwaku:latest.log
2025-02-09 04:04:55.470 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:04:55.470 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:04:55.471 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:04:55.471 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.187.175
2025-02-09 04:04:55.471 DEBUG [src.node.docker_mananger] Generated ports ['55207', '55208', '55209', '55210', '55211']
2025-02-09 04:04:55.471 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:04:55.472 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:04:55.472 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:04:55.472 DEBUG [src.node.docker_mananger] docker run -i -t -p 55207:55207 -p 55208:55208 -p 55209:55209 -p 55210:55210 -p 55211:55211 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55209 --rest-port=55207 --tcp-port=55208 --discv5-udp-port=55210 --rest-address=0.0.0.0 --nat=extip:172.18.187.175 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=beec6e69e5ae15629cc00ee53f5d5bb2da2afbe8ae67d41afa0adafbd4feef68 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55211 --metrics-logging=true --lightpush=false --relay=true
2025-02-09 04:04:55.694 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.187.175 waku 9368a138d106067b52337349f1d7d9dd46b51fa3b1c2fa485de0c4cf91b56272
2025-02-09 04:04:55.746 DEBUG [src.node.docker_mananger] Container started with ID 9368a138d106. Setting up logs at ./log/docker/receiving_node2_2025-02-09_04-04-54__40892db7-0e32-44e8-a7cb-9936224b42e7__wakuorg_nwaku:latest.log
2025-02-09 04:04:55.747 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 55207
2025-02-09 04:04:55.748 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:04:56.748 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55207/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:56.751 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:04:56.751 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:04:56.751 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55207/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:56.753 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.187.175/tcp/55208/p2p/16Uiu2HAm86yQNqb8Q6gcpJnEZuHU8eH2d1VMSHDj6PZiWKXxSzSH","/ip4/172.18.187.175/tcp/55209/ws/p2p/16Uiu2HAm86yQNqb8Q6gcpJnEZuHU8eH2d1VMSHDj6PZiWKXxSzSH"],"enrUri":"enr:-L24QJcHLs_SQGgnihbsfthN_foBP36j_v01fQHFK9SBobS7Vua7OpxBpGTEQL1W3w_BKQcaWUEJLIvSHKKQdtja0TwCgmlkgnY0gmlwhKwSu6-KbXVsdGlhZGRyc5YACASsEruvBteoAAoErBK7rwbXqd0DgnJzhQADAQAAiXNlY3AyNTZrMaECvF2YjEGVYxUTccx8A6UYCiCRQVejggjEM9_mzbTOYdaDdGNwgteog3VkcILXqoV3YWt1MgE"}'
2025-02-09 04:04:56.754 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:04:56.754 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55207/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.181.252/tcp/13028/p2p/16Uiu2HAmGzV19ybSUrwBMTUsPzc36EfjiBUFrcwGPFP8CHXSLvyP"]'
2025-02-09 04:04:56.795 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:56.817 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:04:56.818 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-09_04-04-54__40892db7-0e32-44e8-a7cb-9936224b42e7__wakuorg_nwaku:latest.log
2025-02-09 04:04:56.818 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:04:56.818 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:04:56.819 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:04:56.819 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.149.220
2025-02-09 04:04:56.820 DEBUG [src.node.docker_mananger] Generated ports ['17860', '17861', '17862', '17863', '17864']
2025-02-09 04:04:56.820 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:04:56.820 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:04:56.820 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:04:56.820 DEBUG [src.node.docker_mananger] docker run -i -t -p 17860:17860 -p 17861:17861 -p 17862:17862 -p 17863:17863 -p 17864:17864 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17862 --rest-port=17860 --tcp-port=17861 --discv5-udp-port=17863 --rest-address=0.0.0.0 --nat=extip:172.18.149.220 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fbaf5eaabf6cd755ada86f2ffbfa6baca295f5adbf42c3f9de9c6afdee6efdc9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17864 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QB70CRysy_UdYy0t0fzk40IVPCDmiek0C3n_DkHh2pYsK6tpvoPTjHa-isXDdEAETHTi759ctWVBM_vCQqNd5nACgmlkgnY0gmlwhKwStfyKbXVsdGlhZGRyc5YACASsErX8BjLkAAoErBK1_AYy5d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDQG0uU87oCDNnc7zQP4V-Y3S1oZmXY8eLlACSz9rqeAKDdGNwgjLkg3VkcIIy5oV3YWt1Mgk --lightpushnode=/ip4/172.18.181.252/tcp/13028/p2p/16Uiu2HAmGzV19ybSUrwBMTUsPzc36EfjiBUFrcwGPFP8CHXSLvyP --lightpush=true --relay=false
2025-02-09 04:04:57.055 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.149.220 waku b04b9ee8829faa2639f88961d7d093740cb189a3e0d64da88eb8875f6ac4faac
2025-02-09 04:04:57.105 DEBUG [src.node.docker_mananger] Container started with ID b04b9ee8829f. Setting up logs at ./log/docker/lightpush_node1_2025-02-09_04-04-54__40892db7-0e32-44e8-a7cb-9936224b42e7__wakuorg_nwaku:latest.log
2025-02-09 04:04:57.106 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17860
2025-02-09 04:04:57.106 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:04:58.106 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17860/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:58.109 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:04:58.110 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:04:58.110 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17860/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:58.112 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.149.220/tcp/17861/p2p/16Uiu2HAmPB7HJt87qyoG77e9wKFs5j2qqePn16qr63Bb7y4cNDoq","/ip4/172.18.149.220/tcp/17862/ws/p2p/16Uiu2HAmPB7HJt87qyoG77e9wKFs5j2qqePn16qr63Bb7y4cNDoq"],"enrUri":"enr:-L24QMfK9Go32uG2u8TDwv331PkbXCpsGALZJpS2vDAVj2nlFoOz0_dqqsa7YwJz51Xkd4_XebRLMN8GQ04Ok50zOgQCgmlkgnY0gmlwhKwSldyKbXVsdGlhZGRyc5YACASsEpXcBkXFAAoErBKV3AZFxt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDnEwhf9CMs-wIIgCFwDTjyMlsGkc25F-J4wzD6eZ2WqSDdGNwgkXFg3VkcIJFx4V3YWt1Mgg"}'
2025-02-09 04:04:58.112 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:04:58.113 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17860/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.181.252/tcp/13028/p2p/16Uiu2HAmGzV19ybSUrwBMTUsPzc36EfjiBUFrcwGPFP8CHXSLvyP"]'
2025-02-09 04:04:58.148 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:58.149 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17860/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.187.175/tcp/55208/p2p/16Uiu2HAm86yQNqb8Q6gcpJnEZuHU8eH2d1VMSHDj6PZiWKXxSzSH"]'
2025-02-09 04:04:58.176 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:58.177 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13027/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:04:58.183 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:58.184 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55207/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:04:58.195 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:58.197 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17860/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739073898197646080}}'
2025-02-09 04:04:58.206 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17860/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
2025-02-09 04:04:58.209 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:04:58.211 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:04:58.211 DEBUG [src.node.waku_node] Stopping container with id db1168c48798
2025-02-09 04:04:58.955 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:04:58.955 DEBUG [src.node.waku_node] Stopping container with id 9368a138d106
2025-02-09 04:04:59.767 ERROR [src.node.docker_mananger] Max retries reached for container db1168c48798. Exiting log stream.
2025-02-09 04:05:00.471 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:05:00.471 DEBUG [src.node.waku_node] Stopping container with id b04b9ee8829f
2025-02-09 04:05:01.283 ERROR [src.node.docker_mananger] Max retries reached for container 9368a138d106. Exiting log stream.
2025-02-09 04:05:01.975 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:05:01.975 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:05:01.982 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:05:01.988 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:05:01.994 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
