2025-02-09 04:03:24.287 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:03:24.287 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2025-02-09_04-03-24__02864c27-8935-4329-8ce0-71ac1cf592ce
2025-02-09 04:03:24.288 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:03:24.288 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-09 04:03:24.288 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-09 04:03:24.297 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:03:24.297 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-09_04-03-24__02864c27-8935-4329-8ce0-71ac1cf592ce__wakuorg_nwaku:latest.log
2025-02-09 04:03:24.303 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:03:24.303 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-09_04-03-24__02864c27-8935-4329-8ce0-71ac1cf592ce__wakuorg_nwaku:latest.log
2025-02-09 04:03:24.308 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:03:24.308 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-09_04-03-24__02864c27-8935-4329-8ce0-71ac1cf592ce__wakuorg_nwaku:latest.log
2025-02-09 04:03:24.309 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-09 04:03:24.309 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-09 04:03:24.310 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:03:24.310 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:03:24.377 DEBUG [src.node.docker_mananger] Network waku created
2025-02-09 04:03:24.378 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.59.58
2025-02-09 04:03:24.378 DEBUG [src.node.docker_mananger] Generated ports ['27816', '27817', '27818', '27819', '27820']
2025-02-09 04:03:24.378 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:03:24.378 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:03:24.378 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:03:24.378 DEBUG [src.node.docker_mananger] docker run -i -t -p 27816:27816 -p 27817:27817 -p 27818:27818 -p 27819:27819 -p 27820:27820 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27818 --rest-port=27816 --tcp-port=27817 --discv5-udp-port=27819 --rest-address=0.0.0.0 --nat=extip:172.18.59.58 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cb2f0e43fe97a8eada99eae0c3abc1f0f2e6c7eaf0adbf14629dfe14fc8be718 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27820 --metrics-logging=true --lightpush=true
2025-02-09 04:03:26.473 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.59.58 waku 5e39823fd8f8556c19eb1bc46b5723e022de21058e53d85fe575d54cd6f8b686
2025-02-09 04:03:26.521 DEBUG [src.node.docker_mananger] Container started with ID 5e39823fd8f8. Setting up logs at ./log/docker/node1_2025-02-09_04-03-24__02864c27-8935-4329-8ce0-71ac1cf592ce__wakuorg_nwaku:latest.log
2025-02-09 04:03:26.522 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27816
2025-02-09 04:03:26.522 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:03:27.522 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27816/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:27.525 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:03:27.526 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:03:27.526 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27816/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:27.528 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.59.58/tcp/27817/p2p/16Uiu2HAmV5Ua8fAG46HuwXSm3YWvDCDtBQDPKrH7J9U76rRNPEUW","/ip4/172.18.59.58/tcp/27818/ws/p2p/16Uiu2HAmV5Ua8fAG46HuwXSm3YWvDCDtBQDPKrH7J9U76rRNPEUW"],"enrUri":"enr:-L24QHVphMVYKOcsN8SS-D8rSPV_he89Xk8HP--gq9SdtmWbQLPAA057uYdA-iGbm7J5eW6BjYDrprm2bOQy0sNGzpICgmlkgnY0gmlwhKwSOzqKbXVsdGlhZGRyc5YACASsEjs6BmypAAoErBI7OgZsqt0DgnJzhQADAQAAiXNlY3AyNTZrMaED9ADXHrwYMGonnftNQfUpA7k-EAwyBmLsZckdc2_PHI-DdGNwgmypg3VkcIJsq4V3YWt1Mgk"}'
2025-02-09 04:03:27.528 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:03:27.529 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:03:27.529 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:03:27.530 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:03:27.530 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.119.169
2025-02-09 04:03:27.531 DEBUG [src.node.docker_mananger] Generated ports ['16160', '16161', '16162', '16163', '16164']
2025-02-09 04:03:27.531 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:03:27.531 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:03:27.531 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:03:27.531 DEBUG [src.node.docker_mananger] docker run -i -t -p 16160:16160 -p 16161:16161 -p 16162:16162 -p 16163:16163 -p 16164:16164 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16162 --rest-port=16160 --tcp-port=16161 --discv5-udp-port=16163 --rest-address=0.0.0.0 --nat=extip:172.18.119.169 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=de65fd79c6be8ccfbcac1d2abb20eedd4ed5ecf3dde7dd87ae87deafde76fc97 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16164 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QHVphMVYKOcsN8SS-D8rSPV_he89Xk8HP--gq9SdtmWbQLPAA057uYdA-iGbm7J5eW6BjYDrprm2bOQy0sNGzpICgmlkgnY0gmlwhKwSOzqKbXVsdGlhZGRyc5YACASsEjs6BmypAAoErBI7OgZsqt0DgnJzhQADAQAAiXNlY3AyNTZrMaED9ADXHrwYMGonnftNQfUpA7k-EAwyBmLsZckdc2_PHI-DdGNwgmypg3VkcIJsq4V3YWt1Mgk --lightpushnode=/ip4/172.18.59.58/tcp/27817/p2p/16Uiu2HAmV5Ua8fAG46HuwXSm3YWvDCDtBQDPKrH7J9U76rRNPEUW
2025-02-09 04:03:27.752 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.119.169 waku 04b16176a1682254cd2bd67e49fdd7ca3115917616d585670f318fdf2f9406dd
2025-02-09 04:03:27.802 DEBUG [src.node.docker_mananger] Container started with ID 04b16176a168. Setting up logs at ./log/docker/node2_2025-02-09_04-03-24__02864c27-8935-4329-8ce0-71ac1cf592ce__wakuorg_nwaku:latest.log
2025-02-09 04:03:27.802 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 16160
2025-02-09 04:03:27.802 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:03:28.804 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16160/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:28.807 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:03:28.807 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:03:28.808 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16160/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:28.810 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.119.169/tcp/16161/p2p/16Uiu2HAm2DzZ8BMuWSzM5cCimuh8tj75yBS8BHTZmuF5jDUA9dk6","/ip4/172.18.119.169/tcp/16162/ws/p2p/16Uiu2HAm2DzZ8BMuWSzM5cCimuh8tj75yBS8BHTZmuF5jDUA9dk6"],"enrUri":"enr:-L24QPFDZMPtWp08Vea9l9SwEVQY1J4dO1rtmja0lqYl4wbcFGoBUmE8JA4K7UsjgmQhK-DKZgEmaITAMZXOdDS8oycCgmlkgnY0gmlwhKwSd6mKbXVsdGlhZGRyc5YACASsEnepBj8hAAoErBJ3qQY_It0DgnJzhQADAQAAiXNlY3AyNTZrMaECZQPXWpWvzgspnJ0gZCt5VZwMYRJJ88rRxH4OyrvP1YODdGNwgj8hg3VkcII_I4V3YWt1Mgs"}'
2025-02-09 04:03:28.810 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:03:28.810 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:03:28.810 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:03:28.811 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:03:28.812 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.160.135
2025-02-09 04:03:28.812 DEBUG [src.node.docker_mananger] Generated ports ['6834', '6835', '6836', '6837', '6838']
2025-02-09 04:03:28.812 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:03:28.812 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:03:28.812 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:03:28.812 DEBUG [src.node.docker_mananger] docker run -i -t -p 6834:6834 -p 6835:6835 -p 6836:6836 -p 6837:6837 -p 6838:6838 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6836 --rest-port=6834 --tcp-port=6835 --discv5-udp-port=6837 --rest-address=0.0.0.0 --nat=extip:172.18.160.135 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=442dbff7fc40fecc79a917f900afd21d1430815cbd8f5f9fd61987aff4436aba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6838 --metrics-logging=true --relay=false --storenode=/ip4/172.18.119.169/tcp/16161/p2p/16Uiu2HAm2DzZ8BMuWSzM5cCimuh8tj75yBS8BHTZmuF5jDUA9dk6 --discv5-bootstrap-node=enr:-L24QPFDZMPtWp08Vea9l9SwEVQY1J4dO1rtmja0lqYl4wbcFGoBUmE8JA4K7UsjgmQhK-DKZgEmaITAMZXOdDS8oycCgmlkgnY0gmlwhKwSd6mKbXVsdGlhZGRyc5YACASsEnepBj8hAAoErBJ3qQY_It0DgnJzhQADAQAAiXNlY3AyNTZrMaECZQPXWpWvzgspnJ0gZCt5VZwMYRJJ88rRxH4OyrvP1YODdGNwgj8hg3VkcII_I4V3YWt1Mgs
2025-02-09 04:03:29.043 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.160.135 waku fe9a961d66f46a4f6310f47e20101a751875e1497afb4e10a12c871db9be776a
2025-02-09 04:03:29.092 DEBUG [src.node.docker_mananger] Container started with ID fe9a961d66f4. Setting up logs at ./log/docker/node3_2025-02-09_04-03-24__02864c27-8935-4329-8ce0-71ac1cf592ce__wakuorg_nwaku:latest.log
2025-02-09 04:03:29.092 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6834
2025-02-09 04:03:29.093 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:03:30.094 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6834/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:30.097 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:03:30.097 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:03:30.097 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6834/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:30.099 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.160.135/tcp/6835/p2p/16Uiu2HAm8FdSRMUzrks7Pt1jsdkB42f9iBsoVySRVGk1idpDuFGH","/ip4/172.18.160.135/tcp/6836/ws/p2p/16Uiu2HAm8FdSRMUzrks7Pt1jsdkB42f9iBsoVySRVGk1idpDuFGH"],"enrUri":"enr:-L24QHhDv2BqgbVLr1ExSuJqshYjF3RfVE58UiqpZ8mRQ2RRMw14oCI5COFkSfJFTOIqzLn-0janSK00CMCk9EZLKL0CgmlkgnY0gmlwhKwSoIeKbXVsdGlhZGRyc5YACASsEqCHBhqzAAoErBKghwYatN0DgnJzhQADAQAAiXNlY3AyNTZrMaECvpU_ujPqcYCxz1xecVw5qs-90Ga-YCYzGSMAUPOuyi6DdGNwghqzg3VkcIIatYV3YWt1MgA"}'
2025-02-09 04:03:30.099 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:03:30.100 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27816/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-09 04:03:30.103 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:30.104 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16160/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-09 04:03:30.110 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:30.111 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27816/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:30.115 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.119.169/tcp/16161/p2p/16Uiu2HAm2DzZ8BMuWSzM5cCimuh8tj75yBS8BHTZmuF5jDUA9dk6","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-09 04:03:30.115 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16160/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:30.118 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.59.58/tcp/27817/p2p/16Uiu2HAmV5Ua8fAG46HuwXSm3YWvDCDtBQDPKrH7J9U76rRNPEUW","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
2025-02-09 04:03:30.118 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-09 04:04:00.119 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27816/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1739073840118993152}}'
2025-02-09 04:04:00.131 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:04:00.132 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:04:01.132 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-09 04:04:01.133 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6834/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:04:01.175 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"4b84bcf7d72af4bd5a7a","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x9f355ff7b9ae3ebcf294e40f6eda7cf3ce1fd0739f5fba3e32f56fa5cf8e3c8c"}]}'
2025-02-09 04:04:01.182 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:04:01.183 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:04:01.183 DEBUG [src.node.waku_node] Stopping container with id 5e39823fd8f8
2025-02-09 04:04:02.361 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:04:02.362 DEBUG [src.node.waku_node] Stopping container with id 04b16176a168
2025-02-09 04:04:03.174 ERROR [src.node.docker_mananger] Max retries reached for container 5e39823fd8f8. Exiting log stream.
2025-02-09 04:04:03.561 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:04:03.561 DEBUG [src.node.waku_node] Stopping container with id fe9a961d66f4
2025-02-09 04:04:04.374 ERROR [src.node.docker_mananger] Max retries reached for container 04b16176a168. Exiting log stream.
2025-02-09 04:04:04.996 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:04:04.997 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:04:05.006 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:04:05.018 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:04:05.022 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
