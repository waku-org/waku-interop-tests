2025-02-09 04:07:32.736 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:07:32.737 DEBUG [tests.conftest] Running test: test_publish_on_multiple_content_topics_and_only_after_fetch_them[content_topic_list1] with id: 2025-02-09_04-07-32__79b19f9d-706a-41e2-bb7e-7526ee824895
2025-02-09 04:07:32.737 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:07:32.737 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-09 04:07:32.737 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-09 04:07:32.744 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:07:32.744 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-09_04-07-32__79b19f9d-706a-41e2-bb7e-7526ee824895__wakuorg_nwaku:latest.log
2025-02-09 04:07:32.744 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:07:32.744 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:07:32.746 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:07:32.746 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.16.32
2025-02-09 04:07:32.746 DEBUG [src.node.docker_mananger] Generated ports ['22154', '22155', '22156', '22157', '22158']
2025-02-09 04:07:32.746 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:07:32.746 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:07:32.746 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:07:32.746 DEBUG [src.node.docker_mananger] docker run -i -t -p 22154:22154 -p 22155:22155 -p 22156:22156 -p 22157:22157 -p 22158:22158 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22156 --rest-port=22154 --tcp-port=22155 --discv5-udp-port=22157 --rest-address=0.0.0.0 --nat=extip:172.18.16.32 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=f4bde5d1f8883b1d3e6e2315ec5f1fbe7647a9f6ca0028921ce6fd4a39437b90 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22158 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2025-02-09 04:07:32.970 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.16.32 waku 8623a126a49ff6f68702d29b74edde5c93ef190b382985f15a8df4132722f500
2025-02-09 04:07:33.022 DEBUG [src.node.docker_mananger] Container started with ID 8623a126a49f. Setting up logs at ./log/docker/node1_2025-02-09_04-07-32__79b19f9d-706a-41e2-bb7e-7526ee824895__wakuorg_nwaku:latest.log
2025-02-09 04:07:33.024 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22154
2025-02-09 04:07:33.024 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:07:33.539 ERROR [src.node.docker_mananger] Max retries reached for container e90f87b25163. Exiting log stream.
2025-02-09 04:07:34.025 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22154/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:34.027 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:07:34.028 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:07:34.028 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22154/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:34.030 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.16.32/tcp/22155/p2p/16Uiu2HAm68jryNzzbXsW8EQfS3Z8KrUyVCNhapRyd8TkwWnuh6ZN","/ip4/172.18.16.32/tcp/22156/ws/p2p/16Uiu2HAm68jryNzzbXsW8EQfS3Z8KrUyVCNhapRyd8TkwWnuh6ZN"],"enrUri":"enr:-L24QE4qEW71pNNpZfWS0YZRQ_kzFF3ZRAUF8UUQjWwhAQlxJQEG4XKW9giiNnebQmTV_dhJ385NrOv0PkcKx-Ap2soCgmlkgnY0gmlwhKwSECCKbXVsdGlhZGRyc5YACASsEhAgBlaLAAoErBIQIAZWjN0DgnJzhQACAQAAiXNlY3AyNTZrMaECnxoSgRgsucv11VeuJb0fqhEVXcdX6jJiWLbhCBu2iumDdGNwglaLg3VkcIJWjYV3YWt1MgU"}'
2025-02-09 04:07:34.030 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:07:34.037 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:07:34.037 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-09_04-07-32__79b19f9d-706a-41e2-bb7e-7526ee824895__wakuorg_nwaku:latest.log
2025-02-09 04:07:34.037 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:07:34.037 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:07:34.039 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:07:34.039 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.124.83
2025-02-09 04:07:34.039 DEBUG [src.node.docker_mananger] Generated ports ['46677', '46678', '46679', '46680', '46681']
2025-02-09 04:07:34.039 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:07:34.039 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:07:34.039 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:07:34.039 DEBUG [src.node.docker_mananger] docker run -i -t -p 46677:46677 -p 46678:46678 -p 46679:46679 -p 46680:46680 -p 46681:46681 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46679 --rest-port=46677 --tcp-port=46678 --discv5-udp-port=46680 --rest-address=0.0.0.0 --nat=extip:172.18.124.83 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=0ceaeac65db4c5b49dcc33dffe4cee51cb9e23ccd11e3eafc9f9d928cf75be43 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46681 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QE4qEW71pNNpZfWS0YZRQ_kzFF3ZRAUF8UUQjWwhAQlxJQEG4XKW9giiNnebQmTV_dhJ385NrOv0PkcKx-Ap2soCgmlkgnY0gmlwhKwSECCKbXVsdGlhZGRyc5YACASsEhAgBlaLAAoErBIQIAZWjN0DgnJzhQACAQAAiXNlY3AyNTZrMaECnxoSgRgsucv11VeuJb0fqhEVXcdX6jJiWLbhCBu2iumDdGNwglaLg3VkcIJWjYV3YWt1MgU --content-topic=/myapp/1/latest/proto
2025-02-09 04:07:34.269 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.124.83 waku 4486a52dadf861090cd159d23c34220ff81e9391ee3aa0f7bad92d74fdf796be
2025-02-09 04:07:34.317 DEBUG [src.node.docker_mananger] Container started with ID 4486a52dadf8. Setting up logs at ./log/docker/node2_2025-02-09_04-07-32__79b19f9d-706a-41e2-bb7e-7526ee824895__wakuorg_nwaku:latest.log
2025-02-09 04:07:34.317 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46677
2025-02-09 04:07:34.317 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:07:35.319 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46677/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:35.325 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:07:35.326 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:07:35.327 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46677/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:35.332 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.124.83/tcp/46678/p2p/16Uiu2HAkxCTRYDsb8tXCKUzpEKte88hP5vnFvTL9BkvVD5B6BYGs","/ip4/172.18.124.83/tcp/46679/ws/p2p/16Uiu2HAkxCTRYDsb8tXCKUzpEKte88hP5vnFvTL9BkvVD5B6BYGs"],"enrUri":"enr:-L24QN0syON6MSNipQgfHXepD-GbQJ--0WTswXI1HGVMLge2X47wFAwUruhqajDlozBTrzZ6SxsnYViaqW9jTLN7g_QCgmlkgnY0gmlwhKwSfFOKbXVsdGlhZGRyc5YACASsEnxTBrZWAAoErBJ8Uwa2V90DgnJzhQACAQAAiXNlY3AyNTZrMaECKTBQIjYNsfG1pz-JOnbAcfYZrp6frqREV1QNkDlgyxSDdGNwgrZWg3VkcIK2WIV3YWt1MgE"}'
2025-02-09 04:07:35.334 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:07:35.335 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46677/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.16.32/tcp/22155/p2p/16Uiu2HAm68jryNzzbXsW8EQfS3Z8KrUyVCNhapRyd8TkwWnuh6ZN"]'
2025-02-09 04:07:35.339 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:35.340 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22154/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-09 04:07:35.351 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:35.351 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46677/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-09 04:07:35.371 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:35.372 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22154/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L215YXBwLzEvbGF0ZXN0L3Byb3Rv", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:07:35.381 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:35.381 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22154/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9jb250ZW50L3Rlc3QuanM=", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:07:35.388 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:35.388 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22154/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yMi9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:07:35.394 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:35.395 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22154/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L3RveWNoYXQvMi9odWlsb25nL3Byb3Rv", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:07:35.399 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:35.400 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22154/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L3N0YXR1c2ltLzEvY29tbXVuaXR5L2Nib3I=", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:07:35.405 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:35.406 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22154/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yNy9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:07:35.411 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:35.412 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22154/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yOS9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:07:35.417 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:35.418 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22154/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yMC9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:07:35.423 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:07:35.423 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-09 04:07:35.524 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46677/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:35.526 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L215YXBwLzEvbGF0ZXN0L3Byb3Rv","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739074055371881728,"ephemeral":false}]'
2025-02-09 04:07:35.527 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46677/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:35.529 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9jb250ZW50L3Rlc3QuanM=","contentTopic":"/waku/2/content/test.js","version":0,"timestamp":1739074055381759488,"ephemeral":false}]'
2025-02-09 04:07:35.529 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46677/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:35.531 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yMi9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/22/sometopic/someencoding","version":0,"timestamp":1739074055388821248,"ephemeral":false}]'
2025-02-09 04:07:35.532 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46677/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:35.534 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3RveWNoYXQvMi9odWlsb25nL3Byb3Rv","contentTopic":"/toychat/2/huilong/proto","version":0,"timestamp":1739074055394921984,"ephemeral":false}]'
2025-02-09 04:07:35.534 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46677/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:35.536 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3N0YXR1c2ltLzEvY29tbXVuaXR5L2Nib3I=","contentTopic":"/statusim/1/community/cbor","version":0,"timestamp":1739074055400557312,"ephemeral":false}]'
2025-02-09 04:07:35.537 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46677/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:35.539 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yNy9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/27/sometopic/someencoding","version":0,"timestamp":1739074055406118656,"ephemeral":false}]'
2025-02-09 04:07:35.539 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46677/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:35.541 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yOS9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/29/sometopic/someencoding","version":0,"timestamp":1739074055411967232,"ephemeral":false}]'
2025-02-09 04:07:35.542 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46677/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:07:35.544 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yMC9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/20/sometopic/someencoding","version":0,"timestamp":1739074055418237952,"ephemeral":false}]'
2025-02-09 04:07:35.545 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:07:35.547 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:07:35.547 DEBUG [src.node.waku_node] Stopping container with id 8623a126a49f
2025-02-09 04:07:36.612 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:07:36.612 DEBUG [src.node.waku_node] Stopping container with id 4486a52dadf8
2025-02-09 04:07:37.424 ERROR [src.node.docker_mananger] Max retries reached for container 8623a126a49f. Exiting log stream.
2025-02-09 04:07:38.114 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:07:38.115 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:07:38.125 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:07:38.134 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
