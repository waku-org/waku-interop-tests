2025-02-09 04:03:30.885 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:03:30.885 DEBUG [tests.conftest] Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2025-02-09_04-03-30__3904e26c-4d6b-47b6-b327-474329ad2406
2025-02-09 04:03:30.885 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:03:30.886 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-09 04:03:30.892 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:03:30.892 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-09_04-03-30__3904e26c-4d6b-47b6-b327-474329ad2406__wakuorg_nwaku:latest.log
2025-02-09 04:03:30.892 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:03:30.892 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:03:30.894 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:03:30.894 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.85.241
2025-02-09 04:03:30.894 DEBUG [src.node.docker_mananger] Generated ports ['8605', '8606', '8607', '8608', '8609']
2025-02-09 04:03:30.894 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:03:30.894 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:03:30.894 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:03:30.894 DEBUG [src.node.docker_mananger] docker run -i -t -p 8605:8605 -p 8606:8606 -p 8607:8607 -p 8608:8608 -p 8609:8609 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8607 --rest-port=8605 --tcp-port=8606 --discv5-udp-port=8608 --rest-address=0.0.0.0 --nat=extip:172.18.85.241 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fa1cff8b5faaceb01bc3df181c23b69fb28ef1e98199e86d0b4ec3930db6f7be --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8609 --metrics-logging=true --lightpush=true --relay=true
2025-02-09 04:03:31.122 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.85.241 waku 4bebe4b74e70fd52bd6095b439e154429fd57b55a4d051d3c8379cf3e8dab55b
2025-02-09 04:03:31.171 DEBUG [src.node.docker_mananger] Container started with ID 4bebe4b74e70. Setting up logs at ./log/docker/receiving_node1_2025-02-09_04-03-30__3904e26c-4d6b-47b6-b327-474329ad2406__wakuorg_nwaku:latest.log
2025-02-09 04:03:31.173 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 8605
2025-02-09 04:03:31.173 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:03:31.686 ERROR [src.node.docker_mananger] Max retries reached for container 54c52f49e631. Exiting log stream.
2025-02-09 04:03:32.173 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8605/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:32.176 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:03:32.177 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:03:32.177 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8605/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:32.179 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.85.241/tcp/8606/p2p/16Uiu2HAmA632W1vkCconZjv5hfbTJb51P8GnabxrqBfut2aEyfoB","/ip4/172.18.85.241/tcp/8607/ws/p2p/16Uiu2HAmA632W1vkCconZjv5hfbTJb51P8GnabxrqBfut2aEyfoB"],"enrUri":"enr:-L24QHnUMMwTWBzPurrr6cQMiEvhsauSF1fV2-5zPkPxnT1dPz2x3_kgbLRwVo4Ot_VSuUjoIUzBPyUqz1gXSbjbtYYCgmlkgnY0gmlwhKwSVfGKbXVsdGlhZGRyc5YACASsElXxBiGeAAoErBJV8QYhn90DgnJzhQADAQAAiXNlY3AyNTZrMaEC2dd8Ot_ui966R-QSnuLd-S6cLxbnGRCuywd2tdNrr76DdGNwgiGeg3VkcIIhoIV3YWt1Mgk"}'
2025-02-09 04:03:32.179 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:03:32.186 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:03:32.186 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-09_04-03-30__3904e26c-4d6b-47b6-b327-474329ad2406__wakuorg_nwaku:latest.log
2025-02-09 04:03:32.186 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:03:32.186 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:03:32.187 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:03:32.188 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.229.124
2025-02-09 04:03:32.188 DEBUG [src.node.docker_mananger] Generated ports ['15238', '15239', '15240', '15241', '15242']
2025-02-09 04:03:32.188 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:03:32.188 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:03:32.188 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:03:32.188 DEBUG [src.node.docker_mananger] docker run -i -t -p 15238:15238 -p 15239:15239 -p 15240:15240 -p 15241:15241 -p 15242:15242 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15240 --rest-port=15238 --tcp-port=15239 --discv5-udp-port=15241 --rest-address=0.0.0.0 --nat=extip:172.18.229.124 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aea6f1861d632c13f53440abcc879f006de07aebde614cb9bbafcb9fdbb1c9a5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15242 --metrics-logging=true --lightpush=false --relay=true
2025-02-09 04:03:32.414 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.229.124 waku bc24979ad7829b5ef6a874e25af626798f754b9da490b99c207942627a0e0651
2025-02-09 04:03:32.466 DEBUG [src.node.docker_mananger] Container started with ID bc24979ad782. Setting up logs at ./log/docker/receiving_node2_2025-02-09_04-03-30__3904e26c-4d6b-47b6-b327-474329ad2406__wakuorg_nwaku:latest.log
2025-02-09 04:03:32.467 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15238
2025-02-09 04:03:32.467 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:03:33.467 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15238/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:33.470 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:03:33.470 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:03:33.470 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15238/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:33.473 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.229.124/tcp/15239/p2p/16Uiu2HAmVNXt1GtnnYE2Bz6JsDmchfX8cd8n89DA9kaVTh4Yk2BK","/ip4/172.18.229.124/tcp/15240/ws/p2p/16Uiu2HAmVNXt1GtnnYE2Bz6JsDmchfX8cd8n89DA9kaVTh4Yk2BK"],"enrUri":"enr:-L24QKl7YQp3-4ttMyxGiVRk8c3ygU3JwWTyus7zNJrAYeYhMBeQ0X1LS0KE8kV7hZgZIaUo1UuC4-MROSE4v6_GdaYCgmlkgnY0gmlwhKwS5XyKbXVsdGlhZGRyc5YACASsEuV8BjuHAAoErBLlfAY7iN0DgnJzhQADAQAAiXNlY3AyNTZrMaED-F90YOzTElAb7ILiAsz-L3j5VJv7IVtDxHO5z-NmpwKDdGNwgjuHg3VkcII7iYV3YWt1MgE"}'
2025-02-09 04:03:33.473 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:03:33.473 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15238/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.85.241/tcp/8606/p2p/16Uiu2HAmA632W1vkCconZjv5hfbTJb51P8GnabxrqBfut2aEyfoB"]'
2025-02-09 04:03:33.514 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:33.523 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:03:33.523 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-09_04-03-30__3904e26c-4d6b-47b6-b327-474329ad2406__wakuorg_nwaku:latest.log
2025-02-09 04:03:33.524 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:03:33.524 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:03:33.525 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:03:33.525 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.44.187
2025-02-09 04:03:33.526 DEBUG [src.node.docker_mananger] Generated ports ['15095', '15096', '15097', '15098', '15099']
2025-02-09 04:03:33.526 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:03:33.526 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:03:33.526 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:03:33.526 DEBUG [src.node.docker_mananger] docker run -i -t -p 15095:15095 -p 15096:15096 -p 15097:15097 -p 15098:15098 -p 15099:15099 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15097 --rest-port=15095 --tcp-port=15096 --discv5-udp-port=15098 --rest-address=0.0.0.0 --nat=extip:172.18.44.187 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=77d1ca8dcf1a3d9cff00ec96efbbfeacbbceda1142dbbb9bcb3d11edbe4dafb2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15099 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QHnUMMwTWBzPurrr6cQMiEvhsauSF1fV2-5zPkPxnT1dPz2x3_kgbLRwVo4Ot_VSuUjoIUzBPyUqz1gXSbjbtYYCgmlkgnY0gmlwhKwSVfGKbXVsdGlhZGRyc5YACASsElXxBiGeAAoErBJV8QYhn90DgnJzhQADAQAAiXNlY3AyNTZrMaEC2dd8Ot_ui966R-QSnuLd-S6cLxbnGRCuywd2tdNrr76DdGNwgiGeg3VkcIIhoIV3YWt1Mgk --lightpushnode=/ip4/172.18.85.241/tcp/8606/p2p/16Uiu2HAmA632W1vkCconZjv5hfbTJb51P8GnabxrqBfut2aEyfoB --lightpush=true --relay=false
2025-02-09 04:03:33.764 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.44.187 waku b8eaf89d4347188f8943e75a45449e4ee8a64dc75b21c5a948db18134b48a42e
2025-02-09 04:03:33.813 DEBUG [src.node.docker_mananger] Container started with ID b8eaf89d4347. Setting up logs at ./log/docker/lightpush_node1_2025-02-09_04-03-30__3904e26c-4d6b-47b6-b327-474329ad2406__wakuorg_nwaku:latest.log
2025-02-09 04:03:33.814 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15095
2025-02-09 04:03:33.814 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:03:34.814 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15095/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:34.817 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:03:34.817 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:03:34.818 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15095/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:34.820 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.44.187/tcp/15096/p2p/16Uiu2HAmAAcWkcKmkUcVs8G5TfdHVTGoByYR3xuNvFYSJbzrTVL7","/ip4/172.18.44.187/tcp/15097/ws/p2p/16Uiu2HAmAAcWkcKmkUcVs8G5TfdHVTGoByYR3xuNvFYSJbzrTVL7"],"enrUri":"enr:-L24QF4ItvMTZZbkwnzGyl0Q0ymEXGc2gnNn9fYuGuDk5d7BSqamDdJDmwWhO0LR5uLoIrqbQuPzZEeSr9KCt73U_RcCgmlkgnY0gmlwhKwSLLuKbXVsdGlhZGRyc5YACASsEiy7Bjr4AAoErBIsuwY6-d0DgnJzhQADAQAAiXNlY3AyNTZrMaEC2wOsKFbNUn3RbVgN3xjJrNfJr52TBG_QCCrzdvZRowSDdGNwgjr4g3VkcII6-oV3YWt1Mgg"}'
2025-02-09 04:03:34.820 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:03:34.820 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15095/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.85.241/tcp/8606/p2p/16Uiu2HAmA632W1vkCconZjv5hfbTJb51P8GnabxrqBfut2aEyfoB"]'
2025-02-09 04:03:34.857 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:34.860 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15095/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.229.124/tcp/15239/p2p/16Uiu2HAmVNXt1GtnnYE2Bz6JsDmchfX8cd8n89DA9kaVTh4Yk2BK"]'
2025-02-09 04:03:34.888 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:34.889 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8605/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:03:34.896 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:34.897 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15238/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:03:34.904 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:34.908 DEBUG [src.steps.light_push] Lightpushing message
2025-02-09 04:03:34.908 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15095/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739073814908097792}}'
2025-02-09 04:03:34.917 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:15095/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
2025-02-09 04:03:34.919 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:03:34.920 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:03:34.920 DEBUG [src.node.waku_node] Stopping container with id 4bebe4b74e70
2025-02-09 04:03:35.664 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:03:35.664 DEBUG [src.node.waku_node] Stopping container with id bc24979ad782
2025-02-09 04:03:36.476 ERROR [src.node.docker_mananger] Max retries reached for container 4bebe4b74e70. Exiting log stream.
2025-02-09 04:03:37.159 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:03:37.160 DEBUG [src.node.waku_node] Stopping container with id b8eaf89d4347
2025-02-09 04:03:37.972 ERROR [src.node.docker_mananger] Max retries reached for container bc24979ad782. Exiting log stream.
2025-02-09 04:03:38.635 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:03:38.637 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:03:38.644 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:03:38.650 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:03:38.656 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
