2025-02-09 04:03:39.014 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:03:39.014 DEBUG [tests.conftest] Running test: test_get_store_messages_with_wrong_typo_content_topic with id: 2025-02-09_04-03-39__2793d8cf-a16d-4171-9838-8c4e325b50eb
2025-02-09 04:03:39.014 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:03:39.015 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-09 04:03:39.015 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-09 04:03:39.021 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:03:39.021 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-09_04-03-39__2793d8cf-a16d-4171-9838-8c4e325b50eb__wakuorg_nwaku:latest.log
2025-02-09 04:03:39.021 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:03:39.021 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:03:39.022 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:03:39.022 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.201.214
2025-02-09 04:03:39.022 DEBUG [src.node.docker_mananger] Generated ports ['38099', '38100', '38101', '38102', '38103']
2025-02-09 04:03:39.022 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:03:39.023 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:03:39.023 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:03:39.023 DEBUG [src.node.docker_mananger] docker run -i -t -p 38099:38099 -p 38100:38100 -p 38101:38101 -p 38102:38102 -p 38103:38103 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38101 --rest-port=38099 --tcp-port=38100 --discv5-udp-port=38102 --rest-address=0.0.0.0 --nat=extip:172.18.201.214 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=afae6b75edb3bb6d108c20e29ef2b5dabad5387b06daab8a019b9ce2a1d6b6f7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38103 --metrics-logging=true --store=true --relay=true
2025-02-09 04:03:39.243 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.201.214 waku 9319456be2b112efffddf09f0ba090342d7c06333c8a2c6081eed0f6a53c3b00
2025-02-09 04:03:39.289 DEBUG [src.node.docker_mananger] Container started with ID 9319456be2b1. Setting up logs at ./log/docker/publishing_node1_2025-02-09_04-03-39__2793d8cf-a16d-4171-9838-8c4e325b50eb__wakuorg_nwaku:latest.log
2025-02-09 04:03:39.291 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38099
2025-02-09 04:03:39.291 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:03:39.811 ERROR [src.node.docker_mananger] Max retries reached for container 601ecf6ff539. Exiting log stream.
2025-02-09 04:03:40.291 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38099/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:40.294 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:03:40.294 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:03:40.294 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38099/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:40.296 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.201.214/tcp/38100/p2p/16Uiu2HAmAKwiELyJrdaxrDaf77CR9nhCBJSJZ8ULFufDXAsqBP4m","/ip4/172.18.201.214/tcp/38101/ws/p2p/16Uiu2HAmAKwiELyJrdaxrDaf77CR9nhCBJSJZ8ULFufDXAsqBP4m"],"enrUri":"enr:-L24QKiSWQFZjuaoChDURKp46cQjdJ7PoGo5ndKSGDNVIR-DLCJs7E2DBBZwOXsSFCTzw3CKDmGuwk3MFCSMM2Niau8CgmlkgnY0gmlwhKwSydaKbXVsdGlhZGRyc5YACASsEsnWBpTUAAoErBLJ1gaU1d0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3WebXj8DjGsyUZsUO-kpH343jdrP874b8DOJGiH_HwKDdGNwgpTUg3VkcIKU1oV3YWt1MgM"}'
2025-02-09 04:03:40.296 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:03:40.302 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:03:40.302 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-09_04-03-39__2793d8cf-a16d-4171-9838-8c4e325b50eb__wakuorg_nwaku:latest.log
2025-02-09 04:03:40.302 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:03:40.303 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:03:40.304 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:03:40.304 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.100.40
2025-02-09 04:03:40.304 DEBUG [src.node.docker_mananger] Generated ports ['13378', '13379', '13380', '13381', '13382']
2025-02-09 04:03:40.304 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:03:40.304 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:03:40.305 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:03:40.305 DEBUG [src.node.docker_mananger] docker run -i -t -p 13378:13378 -p 13379:13379 -p 13380:13380 -p 13381:13381 -p 13382:13382 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13380 --rest-port=13378 --tcp-port=13379 --discv5-udp-port=13381 --rest-address=0.0.0.0 --nat=extip:172.18.100.40 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3de4a58aaa96a96ba15ecefa3fef302da2ab7ec722e46ca06cd77cecce1731ad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13382 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QKiSWQFZjuaoChDURKp46cQjdJ7PoGo5ndKSGDNVIR-DLCJs7E2DBBZwOXsSFCTzw3CKDmGuwk3MFCSMM2Niau8CgmlkgnY0gmlwhKwSydaKbXVsdGlhZGRyc5YACASsEsnWBpTUAAoErBLJ1gaU1d0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3WebXj8DjGsyUZsUO-kpH343jdrP874b8DOJGiH_HwKDdGNwgpTUg3VkcIKU1oV3YWt1MgM --storenode=/ip4/172.18.201.214/tcp/38100/p2p/16Uiu2HAmAKwiELyJrdaxrDaf77CR9nhCBJSJZ8ULFufDXAsqBP4m --store=true --relay=true
2025-02-09 04:03:40.517 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.100.40 waku 131676d04cc72f9cd67ff7e95090847c8e545442407a7b090f6b25fa6b19cecf
2025-02-09 04:03:40.560 DEBUG [src.node.docker_mananger] Container started with ID 131676d04cc7. Setting up logs at ./log/docker/store_node1_2025-02-09_04-03-39__2793d8cf-a16d-4171-9838-8c4e325b50eb__wakuorg_nwaku:latest.log
2025-02-09 04:03:40.560 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 13378
2025-02-09 04:03:40.561 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:03:41.562 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13378/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:41.565 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:03:41.565 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:03:41.565 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13378/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:41.567 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.100.40/tcp/13379/p2p/16Uiu2HAmRBCApNPUN3sNQ3hfoZBAeJCNDyVsavNjurbvLXmPMKfn","/ip4/172.18.100.40/tcp/13380/ws/p2p/16Uiu2HAmRBCApNPUN3sNQ3hfoZBAeJCNDyVsavNjurbvLXmPMKfn"],"enrUri":"enr:-L24QH4wkHMkwfwl2b4_I3UHRa80kGnlOPdRRKhQdj-7VsDqAHu9LFhpPD5adfYYN4gpVducJKnUoib8EIeKtkPhYL4CgmlkgnY0gmlwhKwSZCiKbXVsdGlhZGRyc5YACASsEmQoBjRDAAoErBJkKAY0RN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDugkIG85ouhHIAC306C0C3HNhWE4qTb1iOmJrXj3iR1GDdGNwgjRDg3VkcII0RYV3YWt1MgM"}'
2025-02-09 04:03:41.568 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:03:41.568 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13378/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.201.214/tcp/38100/p2p/16Uiu2HAmAKwiELyJrdaxrDaf77CR9nhCBJSJZ8ULFufDXAsqBP4m"]'
2025-02-09 04:03:41.570 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:41.571 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38099/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:03:41.573 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:41.573 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13378/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:03:41.575 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:41.576 DEBUG [tests.store.test_api_flags] Trying to publish msg with content topic /myapp/1/latest/protoo
2025-02-09 04:03:41.576 DEBUG [src.steps.store] Relaying message
2025-02-09 04:03:41.576 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38099/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/protoo", "timestamp": '$(date +%s%N)'}'
2025-02-09 04:03:41.582 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:41.583 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 04:03:41.783 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13378/store/v3/messages?includeData=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fprotoo&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:41.786 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x007c11173851bea1bcb9b42bc461f36efec86d78f099b19ab89dc9cc3df3752b","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/protoo","version":0,"timestamp":1739073821576503296,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
2025-02-09 04:03:41.786 DEBUG [tests.store.test_api_flags] stored content topic is /myapp/1/latest/protoo
2025-02-09 04:03:41.788 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:03:41.788 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:03:41.789 DEBUG [src.node.waku_node] Stopping container with id 9319456be2b1
2025-02-09 04:03:42.431 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:03:42.431 DEBUG [src.node.waku_node] Stopping container with id 131676d04cc7
2025-02-09 04:03:43.242 ERROR [src.node.docker_mananger] Max retries reached for container 9319456be2b1. Exiting log stream.
2025-02-09 04:03:43.592 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:03:43.594 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:03:43.599 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:03:43.604 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
