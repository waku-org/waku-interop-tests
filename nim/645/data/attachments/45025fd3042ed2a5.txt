2025-02-09 04:03:00.693 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 04:03:00.694 DEBUG [tests.conftest] Running test: test_light_push_with_missing_payload with id: 2025-02-09_04-03-00__6ded0422-02ee-4546-8faa-59a4ff416c6f
2025-02-09 04:03:00.694 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 04:03:00.694 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-09 04:03:00.700 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:03:00.701 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-09_04-03-00__6ded0422-02ee-4546-8faa-59a4ff416c6f__wakuorg_nwaku:latest.log
2025-02-09 04:03:00.701 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:03:00.701 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:03:00.702 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:03:00.702 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.141.109
2025-02-09 04:03:00.702 DEBUG [src.node.docker_mananger] Generated ports ['7539', '7540', '7541', '7542', '7543']
2025-02-09 04:03:00.703 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:03:00.703 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:03:00.703 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:03:00.703 DEBUG [src.node.docker_mananger] docker run -i -t -p 7539:7539 -p 7540:7540 -p 7541:7541 -p 7542:7542 -p 7543:7543 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7541 --rest-port=7539 --tcp-port=7540 --discv5-udp-port=7542 --rest-address=0.0.0.0 --nat=extip:172.18.141.109 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cedccadbbfcfd14ff4c04ffaa384ccfbb4fce0eeaf7f2adb9ee5b9a61b578c8e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7543 --metrics-logging=true --lightpush=true --relay=true
2025-02-09 04:03:00.932 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.141.109 waku 46185dc782713edb784e76ee8288b03f1a4f67ba6112b60184577c62e0c44f05
2025-02-09 04:03:00.978 DEBUG [src.node.docker_mananger] Container started with ID 46185dc78271. Setting up logs at ./log/docker/receiving_node1_2025-02-09_04-03-00__6ded0422-02ee-4546-8faa-59a4ff416c6f__wakuorg_nwaku:latest.log
2025-02-09 04:03:00.979 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7539
2025-02-09 04:03:00.979 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:03:01.471 ERROR [src.node.docker_mananger] Max retries reached for container 05eff9025999. Exiting log stream.
2025-02-09 04:03:01.979 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7539/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:01.982 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:03:01.983 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:03:01.983 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7539/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:01.985 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.141.109/tcp/7540/p2p/16Uiu2HAmCRdnjGzPHUpt6dM9jRvnj7ZjZD18MJQGc3HmomHsdbZb","/ip4/172.18.141.109/tcp/7541/ws/p2p/16Uiu2HAmCRdnjGzPHUpt6dM9jRvnj7ZjZD18MJQGc3HmomHsdbZb"],"enrUri":"enr:-L24QLJh7ieFr-INESefXtANj6DxqzrTe4rgBzx2dMufJMaaJ3a1nsrBYoiJ-cL4IPltDkAiD1xEeu-268vtdjbz2K8CgmlkgnY0gmlwhKwSjW2KbXVsdGlhZGRyc5YACASsEo1tBh10AAoErBKNbQYddd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_JQzXf9EXwpATIn05LXWkBcF9uL0p88RU5iUfq3S7OqDdGNwgh10g3VkcIIddoV3YWt1Mgk"}'
2025-02-09 04:03:01.985 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:03:01.992 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:03:01.992 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-09_04-03-00__6ded0422-02ee-4546-8faa-59a4ff416c6f__wakuorg_nwaku:latest.log
2025-02-09 04:03:01.992 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:03:01.992 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:03:01.993 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:03:01.994 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.252.104
2025-02-09 04:03:01.994 DEBUG [src.node.docker_mananger] Generated ports ['61408', '61409', '61410', '61411', '61412']
2025-02-09 04:03:01.994 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:03:01.994 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:03:01.994 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:03:01.994 DEBUG [src.node.docker_mananger] docker run -i -t -p 61408:61408 -p 61409:61409 -p 61410:61410 -p 61411:61411 -p 61412:61412 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61410 --rest-port=61408 --tcp-port=61409 --discv5-udp-port=61411 --rest-address=0.0.0.0 --nat=extip:172.18.252.104 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=279dde25ddff3f1bec8ef90f02e90e39a221ccb7982f1fe2feb4630ccab8ef6c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61412 --metrics-logging=true --lightpush=false --relay=true
2025-02-09 04:03:02.225 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.252.104 waku e0587e43f89122faccaa995b07340e527a3467eddbd31232368783becfaac7d5
2025-02-09 04:03:02.276 DEBUG [src.node.docker_mananger] Container started with ID e0587e43f891. Setting up logs at ./log/docker/receiving_node2_2025-02-09_04-03-00__6ded0422-02ee-4546-8faa-59a4ff416c6f__wakuorg_nwaku:latest.log
2025-02-09 04:03:02.276 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61408
2025-02-09 04:03:02.276 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:03:03.277 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61408/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:03.280 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:03:03.280 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:03:03.281 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61408/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:03.283 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.252.104/tcp/61409/p2p/16Uiu2HAmDrawR9WW826tGYVegvWRipEdy1XUTrRkjQnJxDQoRoWT","/ip4/172.18.252.104/tcp/61410/ws/p2p/16Uiu2HAmDrawR9WW826tGYVegvWRipEdy1XUTrRkjQnJxDQoRoWT"],"enrUri":"enr:-L24QLYGJvQDU8dE_s7kZ6XJn3kmSKdl2Idusyv_5jJQ0F_KC2Wb6hEKo_JfQyFXzb6j4h_pbHa0iFxzZ6C9k2Ot-HYCgmlkgnY0gmlwhKwS_GiKbXVsdGlhZGRyc5YACASsEvxoBu_hAAoErBL8aAbv4t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDEdQvX9Ph-sI9pgpEcH2-RiL7g4L1IVw2Wt1RqVAIjKSDdGNwgu_hg3VkcILv44V3YWt1MgE"}'
2025-02-09 04:03:03.283 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:03:03.283 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61408/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.141.109/tcp/7540/p2p/16Uiu2HAmCRdnjGzPHUpt6dM9jRvnj7ZjZD18MJQGc3HmomHsdbZb"]'
2025-02-09 04:03:03.323 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:03.330 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 04:03:03.331 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-09_04-03-00__6ded0422-02ee-4546-8faa-59a4ff416c6f__wakuorg_nwaku:latest.log
2025-02-09 04:03:03.331 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 04:03:03.331 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 04:03:03.332 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 04:03:03.333 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.103.46
2025-02-09 04:03:03.333 DEBUG [src.node.docker_mananger] Generated ports ['7240', '7241', '7242', '7243', '7244']
2025-02-09 04:03:03.333 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 04:03:03.333 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 04:03:03.333 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 04:03:03.333 DEBUG [src.node.docker_mananger] docker run -i -t -p 7240:7240 -p 7241:7241 -p 7242:7242 -p 7243:7243 -p 7244:7244 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7242 --rest-port=7240 --tcp-port=7241 --discv5-udp-port=7243 --rest-address=0.0.0.0 --nat=extip:172.18.103.46 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2483d1f8ddb61ffc4bbeba4edfe33b45d9dff5e336abfdeb04bfab3b72cf7634 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7244 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLJh7ieFr-INESefXtANj6DxqzrTe4rgBzx2dMufJMaaJ3a1nsrBYoiJ-cL4IPltDkAiD1xEeu-268vtdjbz2K8CgmlkgnY0gmlwhKwSjW2KbXVsdGlhZGRyc5YACASsEo1tBh10AAoErBKNbQYddd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_JQzXf9EXwpATIn05LXWkBcF9uL0p88RU5iUfq3S7OqDdGNwgh10g3VkcIIddoV3YWt1Mgk --lightpushnode=/ip4/172.18.141.109/tcp/7540/p2p/16Uiu2HAmCRdnjGzPHUpt6dM9jRvnj7ZjZD18MJQGc3HmomHsdbZb --lightpush=true --relay=false
2025-02-09 04:03:03.563 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.103.46 waku 20b744f7f5be3e8cafa61aead4729f1dc753e9c9968c3a2f47d6629b24dafcdb
2025-02-09 04:03:03.612 DEBUG [src.node.docker_mananger] Container started with ID 20b744f7f5be. Setting up logs at ./log/docker/lightpush_node1_2025-02-09_04-03-00__6ded0422-02ee-4546-8faa-59a4ff416c6f__wakuorg_nwaku:latest.log
2025-02-09 04:03:03.612 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7240
2025-02-09 04:03:03.612 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 04:03:04.613 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7240/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:04.616 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 04:03:04.617 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 04:03:04.617 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7240/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 04:03:04.619 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.103.46/tcp/7241/p2p/16Uiu2HAmPrxNKD5TVciVyLbUmZrZnP7ova53pVvoRpnPUpKeqY1G","/ip4/172.18.103.46/tcp/7242/ws/p2p/16Uiu2HAmPrxNKD5TVciVyLbUmZrZnP7ova53pVvoRpnPUpKeqY1G"],"enrUri":"enr:-L24QM2oxJN1Yji83ISRcXC8tFzg-uSnFIKDz_iVP6kqzzZiUPV1mC_2EoS-dgXwyEaH21x2QwxA9dKOm-HBK1IOLwYCgmlkgnY0gmlwhKwSZy6KbXVsdGlhZGRyc5YACASsEmcuBhxJAAoErBJnLgYcSt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDpoFI0x4QA-DOR6B82_U_phb4-WaVK95zoP49lszN7LuDdGNwghxJg3VkcIIcS4V3YWt1Mgg"}'
2025-02-09 04:03:04.619 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 04:03:04.620 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7240/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.141.109/tcp/7540/p2p/16Uiu2HAmCRdnjGzPHUpt6dM9jRvnj7ZjZD18MJQGc3HmomHsdbZb"]'
2025-02-09 04:03:04.657 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:04.658 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7240/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.252.104/tcp/61409/p2p/16Uiu2HAmDrawR9WW826tGYVegvWRipEdy1XUTrRkjQnJxDQoRoWT"]'
2025-02-09 04:03:04.693 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:04.696 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7539/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:03:04.701 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:04.702 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61408/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 04:03:04.706 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 04:03:04.710 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7240/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1739073784710193152}}'
2025-02-09 04:03:04.712 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:7240/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-09 04:03:04.714 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 04:03:04.715 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 04:03:04.715 DEBUG [src.node.waku_node] Stopping container with id 46185dc78271
2025-02-09 04:03:05.504 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:03:05.505 DEBUG [src.node.waku_node] Stopping container with id e0587e43f891
2025-02-09 04:03:06.316 ERROR [src.node.docker_mananger] Max retries reached for container 46185dc78271. Exiting log stream.
2025-02-09 04:03:07.013 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:03:07.013 DEBUG [src.node.waku_node] Stopping container with id 20b744f7f5be
2025-02-09 04:03:07.826 ERROR [src.node.docker_mananger] Max retries reached for container e0587e43f891. Exiting log stream.
2025-02-09 04:03:08.535 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 04:03:08.536 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 04:03:08.543 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:03:08.549 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 04:03:08.554 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
