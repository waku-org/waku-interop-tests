2025-02-04 17:10:30.985 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:10:30.985 DEBUG [tests.conftest] Running test: test_unsubscribe_from_non_subscribed_content_topics with id: 2025-02-04_17-10-30__5f525f1e-fc00-4712-b256-d95e63135786
2025-02-04 17:10:30.985 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:10:30.985 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-04 17:10:30.986 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-04 17:10:30.993 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:10:30.993 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-04_17-10-30__5f525f1e-fc00-4712-b256-d95e63135786__wakuorg_nwaku:latest.log
2025-02-04 17:10:30.993 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:10:30.993 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:10:30.996 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:10:30.996 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.44.136
2025-02-04 17:10:30.996 DEBUG [src.node.docker_mananger] Generated ports ['3688', '3689', '3690', '3691', '3692']
2025-02-04 17:10:30.997 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:10:30.997 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:10:30.997 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:10:30.997 DEBUG [src.node.docker_mananger] docker run -i -t -p 3688:3688 -p 3689:3689 -p 3690:3690 -p 3691:3691 -p 3692:3692 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3690 --rest-port=3688 --tcp-port=3689 --discv5-udp-port=3691 --rest-address=0.0.0.0 --nat=extip:172.18.44.136 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=aa8a5de2c55c8daaaabaed7fdefa9fbec478698de29ae21e2b2cccc3cee0bdac --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3692 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2025-02-04 17:10:31.229 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.44.136 waku 118bed327e5f46c31fd3c5e2eb655493b70f4c16d60f857764d4886e266fe114
2025-02-04 17:10:31.280 DEBUG [src.node.docker_mananger] Container started with ID 118bed327e5f. Setting up logs at ./log/docker/node1_2025-02-04_17-10-30__5f525f1e-fc00-4712-b256-d95e63135786__wakuorg_nwaku:latest.log
2025-02-04 17:10:31.280 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 3688
2025-02-04 17:10:31.282 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:10:31.792 ERROR [src.node.docker_mananger] Max retries reached for container 6d9adda43fa1. Exiting log stream.
2025-02-04 17:10:32.282 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3688/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:32.285 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:10:32.285 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:10:32.285 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3688/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:32.288 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.44.136/tcp/3689/p2p/16Uiu2HAm1Xqpx28NZHwZNHduts4jHTzuiec3u5xsdDgsrPiGc7A6","/ip4/172.18.44.136/tcp/3690/ws/p2p/16Uiu2HAm1Xqpx28NZHwZNHduts4jHTzuiec3u5xsdDgsrPiGc7A6"],"enrUri":"enr:-L24QKEmNCJKTw96xpo7uklct0lFC76-vQgO8ftemw7tecJxcp_GQoWmG7RZEklvLetB38u56_O_vkpjL3B51fW56ocCgmlkgnY0gmlwhKwSLIiKbXVsdGlhZGRyc5YACASsEiyIBg5pAAoErBIsiAYOat0DgnJzhQACAQAAiXNlY3AyNTZrMaECWrq9tGh0eHLRI3QByCPwSHwi4G9kXCt3m9lGjhRXAu-DdGNwgg5pg3VkcIIOa4V3YWt1MgU"}'
2025-02-04 17:10:32.288 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:10:32.295 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:10:32.295 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-04_17-10-30__5f525f1e-fc00-4712-b256-d95e63135786__wakuorg_nwaku:latest.log
2025-02-04 17:10:32.295 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:10:32.295 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:10:32.297 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:10:32.297 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.22.178
2025-02-04 17:10:32.297 DEBUG [src.node.docker_mananger] Generated ports ['62991', '62992', '62993', '62994', '62995']
2025-02-04 17:10:32.297 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:10:32.297 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:10:32.297 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:10:32.298 DEBUG [src.node.docker_mananger] docker run -i -t -p 62991:62991 -p 62992:62992 -p 62993:62993 -p 62994:62994 -p 62995:62995 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62993 --rest-port=62991 --tcp-port=62992 --discv5-udp-port=62994 --rest-address=0.0.0.0 --nat=extip:172.18.22.178 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ddfcbcbf551caccf34f63b1efc49fad60794a0c2beff7c547fdffc9a5eb7fb73 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62995 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QKEmNCJKTw96xpo7uklct0lFC76-vQgO8ftemw7tecJxcp_GQoWmG7RZEklvLetB38u56_O_vkpjL3B51fW56ocCgmlkgnY0gmlwhKwSLIiKbXVsdGlhZGRyc5YACASsEiyIBg5pAAoErBIsiAYOat0DgnJzhQACAQAAiXNlY3AyNTZrMaECWrq9tGh0eHLRI3QByCPwSHwi4G9kXCt3m9lGjhRXAu-DdGNwgg5pg3VkcIIOa4V3YWt1MgU --content-topic=/myapp/1/latest/proto
2025-02-04 17:10:32.537 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.22.178 waku d84d0a486f1a0d9cdba67d08007c173ec412c95c203f56bc8e2f66de2c90205b
2025-02-04 17:10:32.589 DEBUG [src.node.docker_mananger] Container started with ID d84d0a486f1a. Setting up logs at ./log/docker/node2_2025-02-04_17-10-30__5f525f1e-fc00-4712-b256-d95e63135786__wakuorg_nwaku:latest.log
2025-02-04 17:10:32.589 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 62991
2025-02-04 17:10:32.589 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:10:33.590 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62991/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:33.602 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:10:33.605 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:10:33.606 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62991/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:33.609 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.22.178/tcp/62992/p2p/16Uiu2HAmBuSkGErXeEabqnPVTYqQoGFp1DCj93fxXEnDZUVHxNw8","/ip4/172.18.22.178/tcp/62993/ws/p2p/16Uiu2HAmBuSkGErXeEabqnPVTYqQoGFp1DCj93fxXEnDZUVHxNw8"],"enrUri":"enr:-L24QNRqGV31yoUk7b-sUcLkm7xmHzJRgpotNp1KrxI8BJpRfVVC0gZtY3879mnMLAFC29bsixlrlvAFSp_5qbegHMICgmlkgnY0gmlwhKwSFrKKbXVsdGlhZGRyc5YACASsEhayBvYQAAoErBIWsgb2Ed0DgnJzhQACAQAAiXNlY3AyNTZrMaEC9NhKYmMVEO1Ipl_6BWBoofZOalE3N9YgmAl9Wn-OmA-DdGNwgvYQg3VkcIL2EoV3YWt1MgE"}'
2025-02-04 17:10:33.609 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:10:33.609 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62991/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.44.136/tcp/3689/p2p/16Uiu2HAm1Xqpx28NZHwZNHduts4jHTzuiec3u5xsdDgsrPiGc7A6"]'
2025-02-04 17:10:33.612 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:33.613 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:3688/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-04 17:10:33.618 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:33.619 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:62991/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-04 17:10:33.624 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:33.625 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3688/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:10:33.628 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:33.628 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:10:33.729 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-04 17:10:33.729 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3688/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:33.732 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:3688/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto. Response content: b'/myapp/1/latest/proto'
2025-02-04 17:10:33.734 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3688/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:10:33.737 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:33.737 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:10:33.837 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-04 17:10:33.838 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3688/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:33.841 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:3688/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js. Response content: b'/waku/2/content/test.js'
2025-02-04 17:10:33.842 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3688/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:10:33.845 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:33.845 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:10:33.946 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-04 17:10:33.946 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3688/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:33.949 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:3688/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding. Response content: b'/app/22/sometopic/someencoding'
2025-02-04 17:10:33.951 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3688/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:10:33.953 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:33.954 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:10:34.054 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-04 17:10:34.054 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3688/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:34.057 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:3688/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto. Response content: b'/toychat/2/huilong/proto'
2025-02-04 17:10:34.059 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3688/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:10:34.062 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:34.062 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:10:34.162 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-04 17:10:34.163 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3688/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:34.166 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:3688/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor. Response content: b'/statusim/1/community/cbor'
2025-02-04 17:10:34.168 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3688/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:10:34.171 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:34.171 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:10:34.271 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-04 17:10:34.272 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3688/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:34.275 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:3688/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding. Response content: b'/app/27/sometopic/someencoding'
2025-02-04 17:10:34.276 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3688/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:10:34.279 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:34.279 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:10:34.380 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-04 17:10:34.380 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3688/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:34.383 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:3688/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding. Response content: b'/app/29/sometopic/someencoding'
2025-02-04 17:10:34.385 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3688/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:10:34.388 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:34.388 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:10:34.488 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-04 17:10:34.489 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3688/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:34.492 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:3688/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding. Response content: b'/app/20/sometopic/someencoding'
2025-02-04 17:10:34.494 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:10:34.495 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:10:34.496 DEBUG [src.node.waku_node] Stopping container with id 118bed327e5f
2025-02-04 17:10:35.778 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:10:35.778 DEBUG [src.node.waku_node] Stopping container with id d84d0a486f1a
2025-02-04 17:10:36.591 ERROR [src.node.docker_mananger] Max retries reached for container 118bed327e5f. Exiting log stream.
2025-02-04 17:10:37.304 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:10:37.305 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:10:37.311 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:10:37.316 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
