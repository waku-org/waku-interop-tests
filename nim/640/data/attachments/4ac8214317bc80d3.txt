2025-02-04 17:11:30.702 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:11:30.702 DEBUG [tests.conftest] Running test: test_light_push_while_peer_is_paused with id: 2025-02-04_17-11-30__ddf54c32-26d7-4115-8b62-0b0fc32488d6
2025-02-04 17:11:30.702 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:11:30.703 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-04 17:11:30.708 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:11:30.708 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-04_17-11-30__ddf54c32-26d7-4115-8b62-0b0fc32488d6__wakuorg_nwaku:latest.log
2025-02-04 17:11:30.709 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:11:30.709 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:11:30.710 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:11:30.710 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.116.169
2025-02-04 17:11:30.710 DEBUG [src.node.docker_mananger] Generated ports ['27991', '27992', '27993', '27994', '27995']
2025-02-04 17:11:30.710 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:11:30.710 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:11:30.711 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:11:30.711 DEBUG [src.node.docker_mananger] docker run -i -t -p 27991:27991 -p 27992:27992 -p 27993:27993 -p 27994:27994 -p 27995:27995 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27993 --rest-port=27991 --tcp-port=27992 --discv5-udp-port=27994 --rest-address=0.0.0.0 --nat=extip:172.18.116.169 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8ab42cec3a375801e12af5844aee8d55fdc2fc3bfe5df6ab710c71c6fdddfc1e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27995 --metrics-logging=true --lightpush=true --relay=true
2025-02-04 17:11:30.931 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.116.169 waku 17889796720aa866194f1793823fd93cf10e969395115286831ba838b3890a25
2025-02-04 17:11:30.980 DEBUG [src.node.docker_mananger] Container started with ID 17889796720a. Setting up logs at ./log/docker/receiving_node1_2025-02-04_17-11-30__ddf54c32-26d7-4115-8b62-0b0fc32488d6__wakuorg_nwaku:latest.log
2025-02-04 17:11:30.981 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27991
2025-02-04 17:11:30.981 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:11:31.509 ERROR [src.node.docker_mananger] Max retries reached for container 4a9f7117487b. Exiting log stream.
2025-02-04 17:11:31.982 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27991/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:11:31.984 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:11:31.985 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:11:31.985 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27991/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:11:31.987 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.116.169/tcp/27992/p2p/16Uiu2HAkz2oY9DmVsPNqyRhuEaRoKBUEeLk8Dsrk2agsyYU5jarV","/ip4/172.18.116.169/tcp/27993/ws/p2p/16Uiu2HAkz2oY9DmVsPNqyRhuEaRoKBUEeLk8Dsrk2agsyYU5jarV"],"enrUri":"enr:-L24QNFRtvGbo-_Ykjhma8srI-XeDNlmP-wT2C7VaHMBzqSIIzwrAzAMyPKwQ-PJ_NQlC-pD-en88DbFYHQ-CSa8NSsCgmlkgnY0gmlwhKwSdKmKbXVsdGlhZGRyc5YACASsEnSpBm1YAAoErBJ0qQZtWd0DgnJzhQADAQAAiXNlY3AyNTZrMaECRG6fIHQzKTGdWnTjY8RGpPdkSa462A9xjndjAZA8NUqDdGNwgm1Yg3VkcIJtWoV3YWt1Mgk"}'
2025-02-04 17:11:31.987 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:11:31.993 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:11:31.994 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-04_17-11-30__ddf54c32-26d7-4115-8b62-0b0fc32488d6__wakuorg_nwaku:latest.log
2025-02-04 17:11:31.994 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:11:31.994 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:11:31.995 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:11:31.995 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.134.79
2025-02-04 17:11:31.995 DEBUG [src.node.docker_mananger] Generated ports ['22033', '22034', '22035', '22036', '22037']
2025-02-04 17:11:31.996 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:11:31.996 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:11:31.996 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:11:31.996 DEBUG [src.node.docker_mananger] docker run -i -t -p 22033:22033 -p 22034:22034 -p 22035:22035 -p 22036:22036 -p 22037:22037 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22035 --rest-port=22033 --tcp-port=22034 --discv5-udp-port=22036 --rest-address=0.0.0.0 --nat=extip:172.18.134.79 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f0cd1afd6cfaa71caa7b48ac73c381a51cbf3b2fcbf3ecbdcd8bc3beb6ad3f08 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22037 --metrics-logging=true --lightpush=false --relay=true
2025-02-04 17:11:32.218 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.134.79 waku 1a207cde5be6b6842ef543aadfb68f94a177096438913100ee380dcaff223f05
2025-02-04 17:11:32.264 DEBUG [src.node.docker_mananger] Container started with ID 1a207cde5be6. Setting up logs at ./log/docker/receiving_node2_2025-02-04_17-11-30__ddf54c32-26d7-4115-8b62-0b0fc32488d6__wakuorg_nwaku:latest.log
2025-02-04 17:11:32.264 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22033
2025-02-04 17:11:32.264 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:11:33.265 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22033/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:11:33.268 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:11:33.268 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:11:33.268 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22033/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:11:33.270 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.134.79/tcp/22034/p2p/16Uiu2HAm1CX6WvKRqKNZHDuhZmZQXU98KWHVd5xxKCBTWjpzxcd7","/ip4/172.18.134.79/tcp/22035/ws/p2p/16Uiu2HAm1CX6WvKRqKNZHDuhZmZQXU98KWHVd5xxKCBTWjpzxcd7"],"enrUri":"enr:-L24QFdtV1cJqJZz39mv3z8fv3GwCSXL8PbzgPIMsBaDwTvPJ7J5SRpkZX3aOyDAJ4JtoPKuYhn24fgak0iXCHzYO6sCgmlkgnY0gmlwhKwShk-KbXVsdGlhZGRyc5YACASsEoZPBlYSAAoErBKGTwZWE90DgnJzhQADAQAAiXNlY3AyNTZrMaECVceGmSxqJt6q90HVOkN2zTz_Zq_5gIx68In9gJ2PVKKDdGNwglYSg3VkcIJWFIV3YWt1MgE"}'
2025-02-04 17:11:33.270 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:11:33.271 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22033/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.116.169/tcp/27992/p2p/16Uiu2HAkz2oY9DmVsPNqyRhuEaRoKBUEeLk8Dsrk2agsyYU5jarV"]'
2025-02-04 17:11:33.309 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:11:33.317 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:11:33.317 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-04_17-11-30__ddf54c32-26d7-4115-8b62-0b0fc32488d6__wakuorg_nwaku:latest.log
2025-02-04 17:11:33.317 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:11:33.318 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:11:33.319 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:11:33.319 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.254.165
2025-02-04 17:11:33.319 DEBUG [src.node.docker_mananger] Generated ports ['21436', '21437', '21438', '21439', '21440']
2025-02-04 17:11:33.320 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:11:33.320 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:11:33.320 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:11:33.320 DEBUG [src.node.docker_mananger] docker run -i -t -p 21436:21436 -p 21437:21437 -p 21438:21438 -p 21439:21439 -p 21440:21440 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21438 --rest-port=21436 --tcp-port=21437 --discv5-udp-port=21439 --rest-address=0.0.0.0 --nat=extip:172.18.254.165 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9bb7df44fddacc706adadac6d46f99351aedc027da0e3d05d9ca87d9c150cb41 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21440 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QNFRtvGbo-_Ykjhma8srI-XeDNlmP-wT2C7VaHMBzqSIIzwrAzAMyPKwQ-PJ_NQlC-pD-en88DbFYHQ-CSa8NSsCgmlkgnY0gmlwhKwSdKmKbXVsdGlhZGRyc5YACASsEnSpBm1YAAoErBJ0qQZtWd0DgnJzhQADAQAAiXNlY3AyNTZrMaECRG6fIHQzKTGdWnTjY8RGpPdkSa462A9xjndjAZA8NUqDdGNwgm1Yg3VkcIJtWoV3YWt1Mgk --lightpushnode=/ip4/172.18.116.169/tcp/27992/p2p/16Uiu2HAkz2oY9DmVsPNqyRhuEaRoKBUEeLk8Dsrk2agsyYU5jarV --lightpush=true --relay=false
2025-02-04 17:11:33.553 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.254.165 waku 32f7a19c7449a7d0738b8a964d0cd2499006f84d89f8e278a22647aa65cdc7ed
2025-02-04 17:11:33.597 DEBUG [src.node.docker_mananger] Container started with ID 32f7a19c7449. Setting up logs at ./log/docker/lightpush_node1_2025-02-04_17-11-30__ddf54c32-26d7-4115-8b62-0b0fc32488d6__wakuorg_nwaku:latest.log
2025-02-04 17:11:33.597 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 21436
2025-02-04 17:11:33.598 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:11:34.598 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21436/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:11:34.601 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:11:34.601 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:11:34.601 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21436/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:11:34.603 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.254.165/tcp/21437/p2p/16Uiu2HAm5UdTGjanzty6kcZP3RXLp6bhrhCVuANGcKA5zhpgzAxu","/ip4/172.18.254.165/tcp/21438/ws/p2p/16Uiu2HAm5UdTGjanzty6kcZP3RXLp6bhrhCVuANGcKA5zhpgzAxu"],"enrUri":"enr:-L24QL1bR7g7XvmOOBVY2xlNCnN-zSVA8c3mfWN3nD9PxJbxD5T3bE_yWx3Pr-uT4Vg9bfDdqw1_QUTQ9TCu1dqoNF0CgmlkgnY0gmlwhKwS_qWKbXVsdGlhZGRyc5YACASsEv6lBlO9AAoErBL-pQZTvt0DgnJzhQADAQAAiXNlY3AyNTZrMaEClVbBWX34XWJxZKzlhDZgeiGbcETeZXOb3I6gqoWyeiaDdGNwglO9g3VkcIJTv4V3YWt1Mgg"}'
2025-02-04 17:11:34.603 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:11:34.604 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21436/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.116.169/tcp/27992/p2p/16Uiu2HAkz2oY9DmVsPNqyRhuEaRoKBUEeLk8Dsrk2agsyYU5jarV"]'
2025-02-04 17:11:34.639 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:11:34.641 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21436/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.134.79/tcp/22034/p2p/16Uiu2HAm1CX6WvKRqKNZHDuhZmZQXU98KWHVd5xxKCBTWjpzxcd7"]'
2025-02-04 17:11:34.675 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:11:34.676 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27991/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:11:34.680 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:11:34.682 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22033/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:11:34.686 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:11:34.689 DEBUG [src.node.waku_node] Stopping container with id 17889796720a
2025-02-04 17:11:35.452 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:11:35.453 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21436/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738689094689230080}}'
2025-02-04 17:11:36.265 ERROR [src.node.docker_mananger] Max retries reached for container 17889796720a. Exiting log stream.
2025-02-04 17:11:40.461 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:21436/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2025-02-04 17:11:40.463 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:11:40.464 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:11:40.464 DEBUG [src.node.waku_node] Stopping container with id 1a207cde5be6
2025-02-04 17:11:41.958 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:11:41.959 DEBUG [src.node.waku_node] Stopping container with id 32f7a19c7449
2025-02-04 17:11:42.770 ERROR [src.node.docker_mananger] Max retries reached for container 1a207cde5be6. Exiting log stream.
2025-02-04 17:11:43.442 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:11:43.443 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:11:43.449 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:11:43.456 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:11:43.462 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
