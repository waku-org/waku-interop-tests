2025-02-04 17:10:40.287 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:10:40.287 DEBUG [tests.conftest] Running test: test_light_push_with_missing_pubsub_topics with id: 2025-02-04_17-10-40__cfb359a9-cedf-483e-bea9-f95f2e90a187
2025-02-04 17:10:40.288 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:10:40.288 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-04 17:10:40.295 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:10:40.295 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-04_17-10-40__cfb359a9-cedf-483e-bea9-f95f2e90a187__wakuorg_nwaku:latest.log
2025-02-04 17:10:40.295 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:10:40.295 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:10:40.296 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:10:40.297 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.84.98
2025-02-04 17:10:40.297 DEBUG [src.node.docker_mananger] Generated ports ['37704', '37705', '37706', '37707', '37708']
2025-02-04 17:10:40.297 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:10:40.297 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:10:40.297 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:10:40.297 DEBUG [src.node.docker_mananger] docker run -i -t -p 37704:37704 -p 37705:37705 -p 37706:37706 -p 37707:37707 -p 37708:37708 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37706 --rest-port=37704 --tcp-port=37705 --discv5-udp-port=37707 --rest-address=0.0.0.0 --nat=extip:172.18.84.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6025ca2f355aff3b24ef15ccf6fe35d0e610e0b2a401ba32cd9b3f322ab4b4f3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37708 --metrics-logging=true --lightpush=true --relay=true
2025-02-04 17:10:40.533 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.84.98 waku 10ed51f9f24c65801f9e860476943cbeb19217e488bd52918105d578f9bd707c
2025-02-04 17:10:40.584 DEBUG [src.node.docker_mananger] Container started with ID 10ed51f9f24c. Setting up logs at ./log/docker/receiving_node1_2025-02-04_17-10-40__cfb359a9-cedf-483e-bea9-f95f2e90a187__wakuorg_nwaku:latest.log
2025-02-04 17:10:40.586 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37704
2025-02-04 17:10:40.586 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:10:40.969 ERROR [src.node.docker_mananger] Max retries reached for container 54f9cbcd4216. Exiting log stream.
2025-02-04 17:10:41.586 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37704/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:41.589 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:10:41.589 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:10:41.590 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37704/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:41.592 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.98/tcp/37705/p2p/16Uiu2HAmNpwUbqDwHL6wotyTaPCkvpBbgcmhyaHGaSgno7JekQp9","/ip4/172.18.84.98/tcp/37706/ws/p2p/16Uiu2HAmNpwUbqDwHL6wotyTaPCkvpBbgcmhyaHGaSgno7JekQp9"],"enrUri":"enr:-L24QCF3VhBKLnaYYTZdH1RahhmbqLRRYvBc1c0R6SRa4C1Je9du63gKedSTvUItH32pPIiSB7qzLboiu8DYem-AhNsCgmlkgnY0gmlwhKwSVGKKbXVsdGlhZGRyc5YACASsElRiBpNJAAoErBJUYgaTSt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDlyFtgv15jw-dvvDfeNsnY_NAQ54RG3459fHrWUt2mBKDdGNwgpNJg3VkcIKTS4V3YWt1Mgk"}'
2025-02-04 17:10:41.592 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:10:41.598 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:10:41.599 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-04_17-10-40__cfb359a9-cedf-483e-bea9-f95f2e90a187__wakuorg_nwaku:latest.log
2025-02-04 17:10:41.599 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:10:41.599 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:10:41.600 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:10:41.600 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.51.239
2025-02-04 17:10:41.600 DEBUG [src.node.docker_mananger] Generated ports ['27755', '27756', '27757', '27758', '27759']
2025-02-04 17:10:41.600 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:10:41.601 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:10:41.601 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:10:41.601 DEBUG [src.node.docker_mananger] docker run -i -t -p 27755:27755 -p 27756:27756 -p 27757:27757 -p 27758:27758 -p 27759:27759 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27757 --rest-port=27755 --tcp-port=27756 --discv5-udp-port=27758 --rest-address=0.0.0.0 --nat=extip:172.18.51.239 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=26f42fbefd355ccbaf753eebaac5e22fd8da19b35fecbbcf33da7f4958fb9116 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27759 --metrics-logging=true --lightpush=false --relay=true
2025-02-04 17:10:41.826 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.51.239 waku b988005206a0d651edb021886e060073f98ef319366e60e609ebd0619228f31d
2025-02-04 17:10:41.875 DEBUG [src.node.docker_mananger] Container started with ID b988005206a0. Setting up logs at ./log/docker/receiving_node2_2025-02-04_17-10-40__cfb359a9-cedf-483e-bea9-f95f2e90a187__wakuorg_nwaku:latest.log
2025-02-04 17:10:41.875 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27755
2025-02-04 17:10:41.875 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:10:42.876 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27755/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:42.879 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:10:42.879 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:10:42.879 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27755/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:42.881 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.51.239/tcp/27756/p2p/16Uiu2HAm8LzbSqgGLE5ss5yhqufMeVG83N1ZkezoYKBK997Bu4X3","/ip4/172.18.51.239/tcp/27757/ws/p2p/16Uiu2HAm8LzbSqgGLE5ss5yhqufMeVG83N1ZkezoYKBK997Bu4X3"],"enrUri":"enr:-L24QPI66TIt_efxQA1n9WAfwJ1f5BcU6QarzeL41IXnLMYRbtbZ28gse1Vg69OAEX4ulU7TpJxd7bHlMSvrXA0kL2ECgmlkgnY0gmlwhKwSM--KbXVsdGlhZGRyc5YACASsEjPvBmxsAAoErBIz7wZsbd0DgnJzhQADAQAAiXNlY3AyNTZrMaECv_US3qFiLCa1jzAyt_wpP4hoE2v7ko7STwIEsN97PrqDdGNwgmxsg3VkcIJsboV3YWt1MgE"}'
2025-02-04 17:10:42.881 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:10:42.882 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27755/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.84.98/tcp/37705/p2p/16Uiu2HAmNpwUbqDwHL6wotyTaPCkvpBbgcmhyaHGaSgno7JekQp9"]'
2025-02-04 17:10:42.922 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:42.946 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:10:42.946 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-04_17-10-40__cfb359a9-cedf-483e-bea9-f95f2e90a187__wakuorg_nwaku:latest.log
2025-02-04 17:10:42.946 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:10:42.946 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:10:42.948 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:10:42.948 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.69.215
2025-02-04 17:10:42.948 DEBUG [src.node.docker_mananger] Generated ports ['1888', '1889', '1890', '1891', '1892']
2025-02-04 17:10:42.948 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:10:42.948 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:10:42.949 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:10:42.949 DEBUG [src.node.docker_mananger] docker run -i -t -p 1888:1888 -p 1889:1889 -p 1890:1890 -p 1891:1891 -p 1892:1892 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1890 --rest-port=1888 --tcp-port=1889 --discv5-udp-port=1891 --rest-address=0.0.0.0 --nat=extip:172.18.69.215 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c69fde5645bbca5ea0ce8df2f691b08fa6477d241e73fef6c36bdeb2cdbbbdda --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1892 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QCF3VhBKLnaYYTZdH1RahhmbqLRRYvBc1c0R6SRa4C1Je9du63gKedSTvUItH32pPIiSB7qzLboiu8DYem-AhNsCgmlkgnY0gmlwhKwSVGKKbXVsdGlhZGRyc5YACASsElRiBpNJAAoErBJUYgaTSt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDlyFtgv15jw-dvvDfeNsnY_NAQ54RG3459fHrWUt2mBKDdGNwgpNJg3VkcIKTS4V3YWt1Mgk --lightpushnode=/ip4/172.18.84.98/tcp/37705/p2p/16Uiu2HAmNpwUbqDwHL6wotyTaPCkvpBbgcmhyaHGaSgno7JekQp9 --lightpush=true --relay=false
2025-02-04 17:10:43.187 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.69.215 waku e117f90275cd7143ac844f681df1e6576c125a39000ec1a18df722cc169d681f
2025-02-04 17:10:43.234 DEBUG [src.node.docker_mananger] Container started with ID e117f90275cd. Setting up logs at ./log/docker/lightpush_node1_2025-02-04_17-10-40__cfb359a9-cedf-483e-bea9-f95f2e90a187__wakuorg_nwaku:latest.log
2025-02-04 17:10:43.234 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 1888
2025-02-04 17:10:43.235 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:10:44.235 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1888/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:44.238 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:10:44.238 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:10:44.238 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1888/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:44.240 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.69.215/tcp/1889/p2p/16Uiu2HAmQHx7GiMKhEdSyoDNaYCygBQSHbReNSJPSV7127dqRxo9","/ip4/172.18.69.215/tcp/1890/ws/p2p/16Uiu2HAmQHx7GiMKhEdSyoDNaYCygBQSHbReNSJPSV7127dqRxo9"],"enrUri":"enr:-L24QE5ecT5qlCCA2Dso7lwMp-6zT7RzI3_o9zEftN-BAbR7LxbGYcVr54-O6IbZ2gggmRpm5hMlG_RLO4h-T24eJzECgmlkgnY0gmlwhKwSRdeKbXVsdGlhZGRyc5YACASsEkXXBgdhAAoErBJF1wYHYt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDrOiC7XvXogjW_EqnM2LqFxJXBzlKCjdER4vHGHQcUnCDdGNwggdhg3VkcIIHY4V3YWt1Mgg"}'
2025-02-04 17:10:44.241 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:10:44.241 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1888/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.84.98/tcp/37705/p2p/16Uiu2HAmNpwUbqDwHL6wotyTaPCkvpBbgcmhyaHGaSgno7JekQp9"]'
2025-02-04 17:10:44.282 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:44.283 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1888/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.51.239/tcp/27756/p2p/16Uiu2HAm8LzbSqgGLE5ss5yhqufMeVG83N1ZkezoYKBK997Bu4X3"]'
2025-02-04 17:10:44.309 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:44.310 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37704/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:10:44.318 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:44.320 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27755/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:10:44.328 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:44.329 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1888/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738689044329760000}}'
2025-02-04 17:10:44.337 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:1888/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
2025-02-04 17:10:44.338 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:10:44.339 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:10:44.340 DEBUG [src.node.waku_node] Stopping container with id 10ed51f9f24c
2025-02-04 17:10:45.058 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:10:45.058 DEBUG [src.node.waku_node] Stopping container with id b988005206a0
2025-02-04 17:10:45.870 ERROR [src.node.docker_mananger] Max retries reached for container 10ed51f9f24c. Exiting log stream.
2025-02-04 17:10:46.550 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:10:46.551 DEBUG [src.node.waku_node] Stopping container with id e117f90275cd
2025-02-04 17:10:47.363 ERROR [src.node.docker_mananger] Max retries reached for container b988005206a0. Exiting log stream.
2025-02-04 17:10:48.040 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:10:48.043 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:10:48.049 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:10:48.055 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:10:48.060 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
