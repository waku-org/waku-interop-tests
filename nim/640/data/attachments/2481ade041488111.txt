2025-02-04 17:12:05.015 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:12:05.015 DEBUG [tests.conftest] Running test: test_store_with_unknown_content_topic with id: 2025-02-04_17-12-05__bec678c9-e34c-41b3-8249-88d08dacbdfe
2025-02-04 17:12:05.015 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:12:05.016 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-04 17:12:05.016 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-04 17:12:05.022 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:12:05.022 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-04_17-12-05__bec678c9-e34c-41b3-8249-88d08dacbdfe__wakuorg_nwaku:latest.log
2025-02-04 17:12:05.023 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:12:05.023 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:12:05.024 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:12:05.024 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.189.80
2025-02-04 17:12:05.024 DEBUG [src.node.docker_mananger] Generated ports ['7796', '7797', '7798', '7799', '7800']
2025-02-04 17:12:05.024 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:12:05.025 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:12:05.025 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:12:05.025 DEBUG [src.node.docker_mananger] docker run -i -t -p 7796:7796 -p 7797:7797 -p 7798:7798 -p 7799:7799 -p 7800:7800 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7798 --rest-port=7796 --tcp-port=7797 --discv5-udp-port=7799 --rest-address=0.0.0.0 --nat=extip:172.18.189.80 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6cf8fdf2a34edff7ce4b9080537c0cfe5fddd20d7bae0d49ab4046b1c833c9cc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7800 --metrics-logging=true --store=true --relay=true
2025-02-04 17:12:05.265 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.189.80 waku 817523f901ad8bdc0b985c255f266dc5f330be22755132bc4ae3c8b2d0f887f2
2025-02-04 17:12:05.315 DEBUG [src.node.docker_mananger] Container started with ID 817523f901ad. Setting up logs at ./log/docker/publishing_node1_2025-02-04_17-12-05__bec678c9-e34c-41b3-8249-88d08dacbdfe__wakuorg_nwaku:latest.log
2025-02-04 17:12:05.315 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7796
2025-02-04 17:12:05.315 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:12:05.811 ERROR [src.node.docker_mananger] Max retries reached for container 68c2fa4783ee. Exiting log stream.
2025-02-04 17:12:06.316 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7796/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:12:06.319 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:12:06.319 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:12:06.319 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7796/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:12:06.321 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.189.80/tcp/7797/p2p/16Uiu2HAmBXZAongcstvTGfFBG7bvQF4rqPBL66misbgrGLxR86TN","/ip4/172.18.189.80/tcp/7798/ws/p2p/16Uiu2HAmBXZAongcstvTGfFBG7bvQF4rqPBL66misbgrGLxR86TN"],"enrUri":"enr:-L24QHVTpwbMwLECHukTneEVlwUULGi8-bsiDj5hR_x4NAGiFSEOlEsDbYEa8Z9R0ubHvsiaqgB6FWGfIY8MArvuraoCgmlkgnY0gmlwhKwSvVCKbXVsdGlhZGRyc5YACASsEr1QBh51AAoErBK9UAYedt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC7zzGhQVPgbR0raNuX10f-tUl0UKkQxHpM2NMzMbtgOWDdGNwgh51g3VkcIIed4V3YWt1MgM"}'
2025-02-04 17:12:06.321 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:12:06.329 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:12:06.329 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-04_17-12-05__bec678c9-e34c-41b3-8249-88d08dacbdfe__wakuorg_nwaku:latest.log
2025-02-04 17:12:06.329 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:12:06.329 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:12:06.330 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:12:06.331 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.13.136
2025-02-04 17:12:06.331 DEBUG [src.node.docker_mananger] Generated ports ['62880', '62881', '62882', '62883', '62884']
2025-02-04 17:12:06.331 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:12:06.331 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:12:06.331 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:12:06.331 DEBUG [src.node.docker_mananger] docker run -i -t -p 62880:62880 -p 62881:62881 -p 62882:62882 -p 62883:62883 -p 62884:62884 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62882 --rest-port=62880 --tcp-port=62881 --discv5-udp-port=62883 --rest-address=0.0.0.0 --nat=extip:172.18.13.136 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=794b36b8d9b9cd3cd41cc66069e5e48d4aaa655c3d6fdaff34ca5bba45fc94fb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62884 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QHVTpwbMwLECHukTneEVlwUULGi8-bsiDj5hR_x4NAGiFSEOlEsDbYEa8Z9R0ubHvsiaqgB6FWGfIY8MArvuraoCgmlkgnY0gmlwhKwSvVCKbXVsdGlhZGRyc5YACASsEr1QBh51AAoErBK9UAYedt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC7zzGhQVPgbR0raNuX10f-tUl0UKkQxHpM2NMzMbtgOWDdGNwgh51g3VkcIIed4V3YWt1MgM --storenode=/ip4/172.18.189.80/tcp/7797/p2p/16Uiu2HAmBXZAongcstvTGfFBG7bvQF4rqPBL66misbgrGLxR86TN --store=true --relay=true
2025-02-04 17:12:06.560 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.13.136 waku 9702ba7250561a58451b9bdf66d02247410439f0262ea62d0d02a1dec7e16448
2025-02-04 17:12:06.611 DEBUG [src.node.docker_mananger] Container started with ID 9702ba725056. Setting up logs at ./log/docker/store_node1_2025-02-04_17-12-05__bec678c9-e34c-41b3-8249-88d08dacbdfe__wakuorg_nwaku:latest.log
2025-02-04 17:12:06.612 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 62880
2025-02-04 17:12:06.612 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:12:07.613 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62880/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:12:07.616 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:12:07.616 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:12:07.617 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62880/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:12:07.619 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.13.136/tcp/62881/p2p/16Uiu2HAkuaB8sxMk4enfYn3vaDDgRkU25rQhYDyhUSUBK3VekaAT","/ip4/172.18.13.136/tcp/62882/ws/p2p/16Uiu2HAkuaB8sxMk4enfYn3vaDDgRkU25rQhYDyhUSUBK3VekaAT"],"enrUri":"enr:-L24QHGiUgjS9Ht4M3ej92xBN50Millc8buJu9P0aFu5xSuuSE3xCSde_CsFrZGBiTI_xVbl7No2EQMOZi5K3C3ke7UCgmlkgnY0gmlwhKwSDYiKbXVsdGlhZGRyc5YACASsEg2IBvWhAAoErBINiAb1ot0DgnJzhQADAQAAiXNlY3AyNTZrMaECAi2dL2Jru3AwxRPUwkExVqajnNmx1Z2XU_WT6eWIRtCDdGNwgvWhg3VkcIL1o4V3YWt1MgM"}'
2025-02-04 17:12:07.619 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:12:07.619 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62880/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.189.80/tcp/7797/p2p/16Uiu2HAmBXZAongcstvTGfFBG7bvQF4rqPBL66misbgrGLxR86TN"]'
2025-02-04 17:12:07.622 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:12:07.622 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7796/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:12:07.625 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:12:07.625 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62880/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:12:07.627 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:12:07.628 DEBUG [src.steps.store] Relaying message
2025-02-04 17:12:07.628 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7796/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:12:07.634 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:12:07.634 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:12:07.835 DEBUG [src.steps.store] Relaying message
2025-02-04 17:12:07.835 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7796/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:12:07.841 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:12:07.841 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:12:08.043 DEBUG [src.steps.store] Relaying message
2025-02-04 17:12:08.043 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7796/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:12:08.049 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:12:08.050 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:12:08.250 DEBUG [src.steps.store] Relaying message
2025-02-04 17:12:08.251 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7796/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:12:08.257 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:12:08.257 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:12:08.458 DEBUG [src.steps.store] Relaying message
2025-02-04 17:12:08.458 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7796/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:12:08.465 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:12:08.466 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:12:08.667 DEBUG [src.steps.store] Relaying message
2025-02-04 17:12:08.667 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7796/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:12:08.678 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:12:08.679 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:12:08.880 DEBUG [src.steps.store] Relaying message
2025-02-04 17:12:08.880 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7796/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:12:08.886 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:12:08.886 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:12:09.088 DEBUG [src.steps.store] Relaying message
2025-02-04 17:12:09.088 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7796/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:12:09.094 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:12:09.095 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:12:09.297 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7796/store/v3/messages?contentTopics=test&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:12:09.300 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-04 17:12:09.300 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62880/store/v3/messages?contentTopics=test&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:12:09.303 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-04 17:12:09.306 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:12:09.307 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:12:09.307 DEBUG [src.node.waku_node] Stopping container with id 817523f901ad
2025-02-04 17:12:09.832 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:12:09.834 DEBUG [src.node.waku_node] Stopping container with id 9702ba725056
2025-02-04 17:12:10.646 ERROR [src.node.docker_mananger] Max retries reached for container 817523f901ad. Exiting log stream.
2025-02-04 17:12:11.379 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:12:11.381 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:12:11.387 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:12:11.394 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
