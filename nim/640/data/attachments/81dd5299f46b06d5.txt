2025-02-04 17:11:23.796 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:11:23.797 DEBUG [tests.conftest] Running test: test_main_node_only_lightpush__peer_only_filter with id: 2025-02-04_17-11-23__18bf300a-3f25-4ed1-8bcb-71959367bd58
2025-02-04 17:11:23.797 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:11:23.797 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-04 17:11:23.804 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:11:23.804 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-04_17-11-23__18bf300a-3f25-4ed1-8bcb-71959367bd58__wakuorg_nwaku:latest.log
2025-02-04 17:11:23.804 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:11:23.804 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:11:23.806 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:11:23.806 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.49.113
2025-02-04 17:11:23.806 DEBUG [src.node.docker_mananger] Generated ports ['13718', '13719', '13720', '13721', '13722']
2025-02-04 17:11:23.806 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:11:23.806 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:11:23.806 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:11:23.807 DEBUG [src.node.docker_mananger] docker run -i -t -p 13718:13718 -p 13719:13719 -p 13720:13720 -p 13721:13721 -p 13722:13722 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13720 --rest-port=13718 --tcp-port=13719 --discv5-udp-port=13721 --rest-address=0.0.0.0 --nat=extip:172.18.49.113 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6d0cb64d7d81b6bb845c56dc5edaeccbc990796ba6b8b387021835dbfb63dbeb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13722 --metrics-logging=true --lightpush=false --relay=false --filter=true
2025-02-04 17:11:24.042 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.49.113 waku a4a40a14e70c1b76e1d695be6e9070861f486267867ce25ab5efb8fc6131285b
2025-02-04 17:11:24.093 DEBUG [src.node.docker_mananger] Container started with ID a4a40a14e70c. Setting up logs at ./log/docker/receiving_node1_2025-02-04_17-11-23__18bf300a-3f25-4ed1-8bcb-71959367bd58__wakuorg_nwaku:latest.log
2025-02-04 17:11:24.093 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 13718
2025-02-04 17:11:24.094 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:11:24.598 ERROR [src.node.docker_mananger] Max retries reached for container adcc45c1a98f. Exiting log stream.
2025-02-04 17:11:25.094 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13718/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:11:25.097 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:11:25.097 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:11:25.098 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13718/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:11:25.100 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.49.113/tcp/13719/p2p/16Uiu2HAmRhY9gWRLDYeNoqDmE3YKWhKucz3DxrjqzYt7vN8kWRbm","/ip4/172.18.49.113/tcp/13720/ws/p2p/16Uiu2HAmRhY9gWRLDYeNoqDmE3YKWhKucz3DxrjqzYt7vN8kWRbm"],"enrUri":"enr:-L24QOgw2Hqo1QN1VU7OJeZPL0oA9oN4WG_GiXe9IUkzQ-LwIGbI5Rd7AUqEnc20hRgI64loqgYgBUeCKV1hDDP3igwCgmlkgnY0gmlwhKwSMXGKbXVsdGlhZGRyc5YACASsEjFxBjWXAAoErBIxcQY1mN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDwc8MQfOjey7n8O_HuiX0Hx8CNpisKRPW8JQS6Az7apiDdGNwgjWXg3VkcII1mYV3YWt1MgQ"}'
2025-02-04 17:11:25.100 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:11:25.107 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:11:25.107 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-04_17-11-23__18bf300a-3f25-4ed1-8bcb-71959367bd58__wakuorg_nwaku:latest.log
2025-02-04 17:11:25.107 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:11:25.107 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:11:25.108 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:11:25.109 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.197.139
2025-02-04 17:11:25.109 DEBUG [src.node.docker_mananger] Generated ports ['24105', '24106', '24107', '24108', '24109']
2025-02-04 17:11:25.109 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:11:25.109 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:11:25.109 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:11:25.109 DEBUG [src.node.docker_mananger] docker run -i -t -p 24105:24105 -p 24106:24106 -p 24107:24107 -p 24108:24108 -p 24109:24109 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24107 --rest-port=24105 --tcp-port=24106 --discv5-udp-port=24108 --rest-address=0.0.0.0 --nat=extip:172.18.197.139 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eabb1a0f619c28da0ffd3f4f35f6f2d2e6abd4dfccd20f93c517b9de6ddcb12d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24109 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QOgw2Hqo1QN1VU7OJeZPL0oA9oN4WG_GiXe9IUkzQ-LwIGbI5Rd7AUqEnc20hRgI64loqgYgBUeCKV1hDDP3igwCgmlkgnY0gmlwhKwSMXGKbXVsdGlhZGRyc5YACASsEjFxBjWXAAoErBIxcQY1mN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDwc8MQfOjey7n8O_HuiX0Hx8CNpisKRPW8JQS6Az7apiDdGNwgjWXg3VkcII1mYV3YWt1MgQ --lightpushnode=/ip4/172.18.49.113/tcp/13719/p2p/16Uiu2HAmRhY9gWRLDYeNoqDmE3YKWhKucz3DxrjqzYt7vN8kWRbm --lightpush=true --relay=false
2025-02-04 17:11:25.354 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.197.139 waku 2bed8c63d186c713583f90b3a4c758be25e84f5ecd02462b469221336064eecd
2025-02-04 17:11:25.401 DEBUG [src.node.docker_mananger] Container started with ID 2bed8c63d186. Setting up logs at ./log/docker/lightpush_node1_2025-02-04_17-11-23__18bf300a-3f25-4ed1-8bcb-71959367bd58__wakuorg_nwaku:latest.log
2025-02-04 17:11:25.402 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 24105
2025-02-04 17:11:25.402 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:11:26.402 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24105/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:11:26.406 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:11:26.406 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:11:26.406 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24105/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:11:26.408 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.197.139/tcp/24106/p2p/16Uiu2HAmJZD3W6hAn7FW23hyJY5VmPFA35dm9VKQXmpteoi81Mp2","/ip4/172.18.197.139/tcp/24107/ws/p2p/16Uiu2HAmJZD3W6hAn7FW23hyJY5VmPFA35dm9VKQXmpteoi81Mp2"],"enrUri":"enr:-L24QHwXfYuz1TqC9Qxik7Pcm_otto-z6zAy4-w5KkwDn7adGcO9aDsZS_HBiT9PHHkg41UnAZFmWrRuIOvL5RD3insCgmlkgnY0gmlwhKwSxYuKbXVsdGlhZGRyc5YACASsEsWLBl4qAAoErBLFiwZeK90DgnJzhQADAQAAiXNlY3AyNTZrMaEDV6r9NNr4aLGS5Jqabw9A7BpuaRvWSY0qwcB-4enG8IeDdGNwgl4qg3VkcIJeLIV3YWt1Mgg"}'
2025-02-04 17:11:26.408 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:11:26.409 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24105/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.49.113/tcp/13719/p2p/16Uiu2HAmRhY9gWRLDYeNoqDmE3YKWhKucz3DxrjqzYt7vN8kWRbm"]'
2025-02-04 17:11:26.441 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:11:26.443 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24105/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738689086443429120}}'
2025-02-04 17:11:26.466 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:24105/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2025-02-04 17:11:26.468 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:11:26.469 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:11:26.469 DEBUG [src.node.waku_node] Stopping container with id a4a40a14e70c
2025-02-04 17:11:27.232 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:11:27.233 DEBUG [src.node.waku_node] Stopping container with id 2bed8c63d186
2025-02-04 17:11:28.058 ERROR [src.node.docker_mananger] Max retries reached for container a4a40a14e70c. Exiting log stream.
2025-02-04 17:11:28.390 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:11:28.391 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:11:28.397 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:11:28.401 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
