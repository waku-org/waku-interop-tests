2025-02-04 17:13:27.776 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:13:27.776 DEBUG [tests.conftest] Running test: test_store_with_invalid_hash with id: 2025-02-04_17-13-27__c4d908fa-72bc-4225-a49b-140115ffcacf
2025-02-04 17:13:27.776 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:13:27.776 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-04 17:13:27.777 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-04 17:13:27.783 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:13:27.783 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-04_17-13-27__c4d908fa-72bc-4225-a49b-140115ffcacf__wakuorg_nwaku:latest.log
2025-02-04 17:13:27.783 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:13:27.783 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:13:27.785 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:13:27.785 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.229.88
2025-02-04 17:13:27.785 DEBUG [src.node.docker_mananger] Generated ports ['6279', '6280', '6281', '6282', '6283']
2025-02-04 17:13:27.785 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:13:27.785 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:13:27.785 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:13:27.786 DEBUG [src.node.docker_mananger] docker run -i -t -p 6279:6279 -p 6280:6280 -p 6281:6281 -p 6282:6282 -p 6283:6283 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6281 --rest-port=6279 --tcp-port=6280 --discv5-udp-port=6282 --rest-address=0.0.0.0 --nat=extip:172.18.229.88 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c2db2335ad60991f91ff70aa4ce7c2217c3ade11b34faff46dd4a665a89bdfed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6283 --metrics-logging=true --store=true --relay=true
2025-02-04 17:13:28.008 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.229.88 waku bc33f7fb533b56e466f11e83930f34972d592da5fda3150c6a2d2879e3db3271
2025-02-04 17:13:28.061 DEBUG [src.node.docker_mananger] Container started with ID bc33f7fb533b. Setting up logs at ./log/docker/publishing_node1_2025-02-04_17-13-27__c4d908fa-72bc-4225-a49b-140115ffcacf__wakuorg_nwaku:latest.log
2025-02-04 17:13:28.063 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6279
2025-02-04 17:13:28.063 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:13:28.581 ERROR [src.node.docker_mananger] Max retries reached for container 404b8a137899. Exiting log stream.
2025-02-04 17:13:29.064 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6279/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:29.066 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:13:29.067 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:13:29.067 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6279/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:29.069 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.229.88/tcp/6280/p2p/16Uiu2HAmRmXhKKw3xPRtZR8FW57fwxTGygPDsy6cPmouWQzkDRTL","/ip4/172.18.229.88/tcp/6281/ws/p2p/16Uiu2HAmRmXhKKw3xPRtZR8FW57fwxTGygPDsy6cPmouWQzkDRTL"],"enrUri":"enr:-L24QChW-GeCW_uL-FUbJqJeeslYpnHfn9ZCL1uJkPGPnxJ4DxSwEjQq3S_XLTirNMpmc14fghMojB-LLpUC4E3piSoCgmlkgnY0gmlwhKwS5ViKbXVsdGlhZGRyc5YACASsEuVYBhiIAAoErBLlWAYYid0DgnJzhQADAQAAiXNlY3AyNTZrMaEDwtTbbPPt5U1kJdbbYNP8ScI4NYKTIE8jiyrIvicUTceDdGNwghiIg3VkcIIYioV3YWt1MgM"}'
2025-02-04 17:13:29.069 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:13:29.076 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:13:29.076 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-04_17-13-27__c4d908fa-72bc-4225-a49b-140115ffcacf__wakuorg_nwaku:latest.log
2025-02-04 17:13:29.076 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:13:29.076 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:13:29.077 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:13:29.077 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.70.11
2025-02-04 17:13:29.077 DEBUG [src.node.docker_mananger] Generated ports ['25452', '25453', '25454', '25455', '25456']
2025-02-04 17:13:29.078 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:13:29.078 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:13:29.078 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:13:29.078 DEBUG [src.node.docker_mananger] docker run -i -t -p 25452:25452 -p 25453:25453 -p 25454:25454 -p 25455:25455 -p 25456:25456 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25454 --rest-port=25452 --tcp-port=25453 --discv5-udp-port=25455 --rest-address=0.0.0.0 --nat=extip:172.18.70.11 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9aa883433cff98e130e1a9fca10023b22bdbe8ebac888fbc1ea1d4adff54f9dd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25456 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QChW-GeCW_uL-FUbJqJeeslYpnHfn9ZCL1uJkPGPnxJ4DxSwEjQq3S_XLTirNMpmc14fghMojB-LLpUC4E3piSoCgmlkgnY0gmlwhKwS5ViKbXVsdGlhZGRyc5YACASsEuVYBhiIAAoErBLlWAYYid0DgnJzhQADAQAAiXNlY3AyNTZrMaEDwtTbbPPt5U1kJdbbYNP8ScI4NYKTIE8jiyrIvicUTceDdGNwghiIg3VkcIIYioV3YWt1MgM --storenode=/ip4/172.18.229.88/tcp/6280/p2p/16Uiu2HAmRmXhKKw3xPRtZR8FW57fwxTGygPDsy6cPmouWQzkDRTL --store=true --relay=true
2025-02-04 17:13:29.306 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.70.11 waku 75f841f440830491599edc37974e504f0b5ee035fa0c5fffaffb7ce6ec150e9a
2025-02-04 17:13:29.351 DEBUG [src.node.docker_mananger] Container started with ID 75f841f44083. Setting up logs at ./log/docker/store_node1_2025-02-04_17-13-27__c4d908fa-72bc-4225-a49b-140115ffcacf__wakuorg_nwaku:latest.log
2025-02-04 17:13:29.352 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 25452
2025-02-04 17:13:29.352 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:13:30.353 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25452/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:30.356 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:13:30.356 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:13:30.356 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25452/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:30.359 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.70.11/tcp/25453/p2p/16Uiu2HAmKLGuAcJvjM5fpDnPn3HfQPGvYRSuaMPA2i9MhzvPKpML","/ip4/172.18.70.11/tcp/25454/ws/p2p/16Uiu2HAmKLGuAcJvjM5fpDnPn3HfQPGvYRSuaMPA2i9MhzvPKpML"],"enrUri":"enr:-L24QNIe-zhVH2t0Q6M23vbMgp0QBb4Ug-Pl_nDpxwHEYS3OMMpn5JU3TbXYtfZpubvjZ515DnnoxNjW4L9AApw6VLoCgmlkgnY0gmlwhKwSRguKbXVsdGlhZGRyc5YACASsEkYLBmNtAAoErBJGCwZjbt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDYzZ8XW8o204yVnHV83e8n-BsCUqHJ555I7zkMm6TxseDdGNwgmNtg3VkcIJjb4V3YWt1MgM"}'
2025-02-04 17:13:30.359 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:13:30.360 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25452/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.229.88/tcp/6280/p2p/16Uiu2HAmRmXhKKw3xPRtZR8FW57fwxTGygPDsy6cPmouWQzkDRTL"]'
2025-02-04 17:13:30.362 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:30.363 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6279/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:13:30.365 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:30.365 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25452/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:13:30.367 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:30.368 DEBUG [src.steps.store] Relaying message
2025-02-04 17:13:30.368 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6279/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:13:30.374 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:30.375 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:13:30.576 DEBUG [src.steps.store] Relaying message
2025-02-04 17:13:30.576 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6279/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:13:30.582 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:30.582 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:13:30.783 DEBUG [src.steps.store] Relaying message
2025-02-04 17:13:30.783 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6279/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:13:30.790 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:30.790 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:13:30.991 DEBUG [src.steps.store] Relaying message
2025-02-04 17:13:30.991 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6279/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:13:30.997 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:30.998 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:13:31.198 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6279/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:31.201 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:6279/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true. Response content: b'waku message hash parsing error: invalid hash length: 4'
2025-02-04 17:13:31.203 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25452/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:31.205 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:25452/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true. Response content: b'waku message hash parsing error: invalid hash length: 4'
2025-02-04 17:13:31.207 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:13:31.208 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:13:31.208 DEBUG [src.node.waku_node] Stopping container with id bc33f7fb533b
2025-02-04 17:13:31.888 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:13:31.888 DEBUG [src.node.waku_node] Stopping container with id 75f841f44083
2025-02-04 17:13:32.700 ERROR [src.node.docker_mananger] Max retries reached for container bc33f7fb533b. Exiting log stream.
2025-02-04 17:13:33.380 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:13:33.381 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:13:33.386 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:13:33.392 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
