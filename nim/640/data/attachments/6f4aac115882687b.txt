2025-02-04 17:10:54.658 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:10:54.659 DEBUG [tests.conftest] Running test: test_single_content_topic[/statusim/1/community/cbor] with id: 2025-02-04_17-10-54__3d5d6261-2b52-4bb3-9570-054cdeb119d6
2025-02-04 17:10:54.659 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:10:54.659 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-04 17:10:54.659 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-04 17:10:54.666 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:10:54.666 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-04_17-10-54__3d5d6261-2b52-4bb3-9570-054cdeb119d6__wakuorg_nwaku:latest.log
2025-02-04 17:10:54.667 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:10:54.667 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:10:54.668 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:10:54.668 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.17.50
2025-02-04 17:10:54.668 DEBUG [src.node.docker_mananger] Generated ports ['3545', '3546', '3547', '3548', '3549']
2025-02-04 17:10:54.668 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:10:54.669 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:10:54.669 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:10:54.669 DEBUG [src.node.docker_mananger] docker run -i -t -p 3545:3545 -p 3546:3546 -p 3547:3547 -p 3548:3548 -p 3549:3549 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3547 --rest-port=3545 --tcp-port=3546 --discv5-udp-port=3548 --rest-address=0.0.0.0 --nat=extip:172.18.17.50 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=d0a52e9e8c769bd9c4fbda59ff17dedffcc19a71dfab7eaaabfb198fa78407ac --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3549 --metrics-logging=true --relay=true --filter=true --content-topic=/statusim/1/community/cbor
2025-02-04 17:10:54.898 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.17.50 waku 04462f3ef34772688ffb0d8b1939aeeb3968e3f170282a774c2a1eadea383dca
2025-02-04 17:10:54.947 DEBUG [src.node.docker_mananger] Container started with ID 04462f3ef347. Setting up logs at ./log/docker/node1_2025-02-04_17-10-54__3d5d6261-2b52-4bb3-9570-054cdeb119d6__wakuorg_nwaku:latest.log
2025-02-04 17:10:54.947 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 3545
2025-02-04 17:10:54.948 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:10:55.463 ERROR [src.node.docker_mananger] Max retries reached for container 02c2730ce68a. Exiting log stream.
2025-02-04 17:10:55.948 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3545/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:55.951 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:10:55.952 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:10:55.952 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3545/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:55.954 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.17.50/tcp/3546/p2p/16Uiu2HAmUFaKdWTiFCPzfikGDFWqGH9XTbeJbUv9EsdhoDuH2xB2","/ip4/172.18.17.50/tcp/3547/ws/p2p/16Uiu2HAmUFaKdWTiFCPzfikGDFWqGH9XTbeJbUv9EsdhoDuH2xB2"],"enrUri":"enr:-L24QLoUHMdq5Pmo7tQNdWPkCvfxHgXzu2gRR6-nZnc5KFZqEWkafTnVYQThGJU6Ztr_lY4xwdv9_-70I_WZpMI1wk4CgmlkgnY0gmlwhKwSETKKbXVsdGlhZGRyc5YACASsEhEyBg3aAAoErBIRMgYN290DgnJzhQACAQAAiXNlY3AyNTZrMaED57t2hVyWfyaPV0f-EcFOJXprzPvj6SfvyftFBYkosqmDdGNwgg3ag3VkcIIN3IV3YWt1MgU"}'
2025-02-04 17:10:55.954 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:10:55.961 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:10:55.961 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-04_17-10-54__3d5d6261-2b52-4bb3-9570-054cdeb119d6__wakuorg_nwaku:latest.log
2025-02-04 17:10:55.961 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:10:55.961 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:10:55.963 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:10:55.963 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.29.119
2025-02-04 17:10:55.963 DEBUG [src.node.docker_mananger] Generated ports ['7753', '7754', '7755', '7756', '7757']
2025-02-04 17:10:55.963 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:10:55.963 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:10:55.964 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:10:55.964 DEBUG [src.node.docker_mananger] docker run -i -t -p 7753:7753 -p 7754:7754 -p 7755:7755 -p 7756:7756 -p 7757:7757 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7755 --rest-port=7753 --tcp-port=7754 --discv5-udp-port=7756 --rest-address=0.0.0.0 --nat=extip:172.18.29.119 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=01e1e6f2b2b746d18b1d4b6500fb00d5a0d1cd1dfcc4d6efeab27ca02bcbc544 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7757 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QLoUHMdq5Pmo7tQNdWPkCvfxHgXzu2gRR6-nZnc5KFZqEWkafTnVYQThGJU6Ztr_lY4xwdv9_-70I_WZpMI1wk4CgmlkgnY0gmlwhKwSETKKbXVsdGlhZGRyc5YACASsEhEyBg3aAAoErBIRMgYN290DgnJzhQACAQAAiXNlY3AyNTZrMaED57t2hVyWfyaPV0f-EcFOJXprzPvj6SfvyftFBYkosqmDdGNwgg3ag3VkcIIN3IV3YWt1MgU --content-topic=/statusim/1/community/cbor
2025-02-04 17:10:56.198 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.29.119 waku 74ab4e8bd6aec93d5f3b0fb570fc279a6a8b012b62a680ff033540a63175db75
2025-02-04 17:10:56.252 DEBUG [src.node.docker_mananger] Container started with ID 74ab4e8bd6ae. Setting up logs at ./log/docker/node2_2025-02-04_17-10-54__3d5d6261-2b52-4bb3-9570-054cdeb119d6__wakuorg_nwaku:latest.log
2025-02-04 17:10:56.252 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7753
2025-02-04 17:10:56.252 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:10:57.254 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7753/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:57.260 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:10:57.261 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:10:57.262 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7753/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:57.266 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.29.119/tcp/7754/p2p/16Uiu2HAm9w5wWj54KKK4YhVDZd23k38Zca6ht72HLL61CbbvsM5x","/ip4/172.18.29.119/tcp/7755/ws/p2p/16Uiu2HAm9w5wWj54KKK4YhVDZd23k38Zca6ht72HLL61CbbvsM5x"],"enrUri":"enr:-L24QOxzZu6-c9yAeqQXOU0qyZ6BaTfYWhsu43cAvCFcNHRyeBvbGN9qG8A1GY2DIQKaPGUwBgA1rKp_T-HwZtV2rp0CgmlkgnY0gmlwhKwSHXeKbXVsdGlhZGRyc5YACASsEh13Bh5KAAoErBIddwYeS90DgnJzhQACAQAAiXNlY3AyNTZrMaEC14yNiKhWpUZQ-68m7AIPN-_zopFBeh4xif_P3wWoZU-DdGNwgh5Kg3VkcIIeTIV3YWt1MgE"}'
2025-02-04 17:10:57.267 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:10:57.268 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7753/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.17.50/tcp/3546/p2p/16Uiu2HAmUFaKdWTiFCPzfikGDFWqGH9XTbeJbUv9EsdhoDuH2xB2"]'
2025-02-04 17:10:57.271 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:57.271 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3545/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/statusim/1/community/cbor"]'
2025-02-04 17:10:57.274 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:57.274 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7753/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/statusim/1/community/cbor"]'
2025-02-04 17:10:57.276 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:57.277 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3545/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:10:57.281 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:57.282 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:10:57.382 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-04 17:10:57.383 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3545/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:57.385 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/statusim/1/community/cbor","version":0,"timestamp":1738689057276984064,"ephemeral":false}]'
2025-02-04 17:10:57.387 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-04 17:10:57.387 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7753/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:57.390 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/statusim/1/community/cbor","version":0,"timestamp":1738689057276984064,"ephemeral":false}]'
2025-02-04 17:10:57.393 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:10:57.394 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:10:57.394 DEBUG [src.node.waku_node] Stopping container with id 04462f3ef347
2025-02-04 17:10:58.450 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:10:58.450 DEBUG [src.node.waku_node] Stopping container with id 74ab4e8bd6ae
2025-02-04 17:10:59.265 ERROR [src.node.docker_mananger] Max retries reached for container 04462f3ef347. Exiting log stream.
2025-02-04 17:10:59.957 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:10:59.959 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:10:59.964 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:10:59.969 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
