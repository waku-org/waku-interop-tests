2025-02-04 17:13:46.173 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:13:46.173 DEBUG [tests.conftest] Running test: test_store_with_non_hex_characters_in_hash with id: 2025-02-04_17-13-46__25769e49-2483-48de-ac05-3072f8e9b325
2025-02-04 17:13:46.173 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:13:46.174 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-04 17:13:46.174 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-04 17:13:46.180 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:13:46.180 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-04_17-13-46__25769e49-2483-48de-ac05-3072f8e9b325__wakuorg_nwaku:latest.log
2025-02-04 17:13:46.180 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:13:46.180 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:13:46.182 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:13:46.182 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.38.247
2025-02-04 17:13:46.182 DEBUG [src.node.docker_mananger] Generated ports ['46893', '46894', '46895', '46896', '46897']
2025-02-04 17:13:46.182 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:13:46.182 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:13:46.182 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:13:46.183 DEBUG [src.node.docker_mananger] docker run -i -t -p 46893:46893 -p 46894:46894 -p 46895:46895 -p 46896:46896 -p 46897:46897 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46895 --rest-port=46893 --tcp-port=46894 --discv5-udp-port=46896 --rest-address=0.0.0.0 --nat=extip:172.18.38.247 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bbda26ab61da2e9cbb011b9a4a2d42fba94f8c1f7f9da18890c36ccf6c4bbd35 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46897 --metrics-logging=true --store=true --relay=true
2025-02-04 17:13:46.417 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.38.247 waku fe3a9e2edbe354bbefddc9cf790bc0a7a976e3c1874892aa724c1330ba8ca1aa
2025-02-04 17:13:46.465 DEBUG [src.node.docker_mananger] Container started with ID fe3a9e2edbe3. Setting up logs at ./log/docker/publishing_node1_2025-02-04_17-13-46__25769e49-2483-48de-ac05-3072f8e9b325__wakuorg_nwaku:latest.log
2025-02-04 17:13:46.465 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46893
2025-02-04 17:13:46.465 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:13:46.987 ERROR [src.node.docker_mananger] Max retries reached for container 2612c8dfccdc. Exiting log stream.
2025-02-04 17:13:47.466 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46893/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:47.468 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:13:47.469 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:13:47.469 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46893/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:47.471 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.38.247/tcp/46894/p2p/16Uiu2HAkyUkt3qg6gcqmbVbyy8DVx2n4qoPibx6jUNzfufWW6NjC","/ip4/172.18.38.247/tcp/46895/ws/p2p/16Uiu2HAkyUkt3qg6gcqmbVbyy8DVx2n4qoPibx6jUNzfufWW6NjC"],"enrUri":"enr:-L24QFCpVG9w9TYT6w7Cwz-yd57CBbNmMw5XqCsJBpRWpu0RMO6_fek1wLdhXhyqAjdx3MbpGQo7s_wnXryhsI2LW-ECgmlkgnY0gmlwhKwSJveKbXVsdGlhZGRyc5YACASsEib3BrcuAAoErBIm9wa3L90DgnJzhQADAQAAiXNlY3AyNTZrMaECPDkIG_pbNTC1NEmU6Nu-ziVofBMTvWdOGOebaevoObuDdGNwgrcug3VkcIK3MIV3YWt1MgM"}'
2025-02-04 17:13:47.471 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:13:47.478 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:13:47.478 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-04_17-13-46__25769e49-2483-48de-ac05-3072f8e9b325__wakuorg_nwaku:latest.log
2025-02-04 17:13:47.478 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:13:47.478 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:13:47.480 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:13:47.480 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.80.15
2025-02-04 17:13:47.480 DEBUG [src.node.docker_mananger] Generated ports ['28259', '28260', '28261', '28262', '28263']
2025-02-04 17:13:47.480 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:13:47.480 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:13:47.480 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:13:47.480 DEBUG [src.node.docker_mananger] docker run -i -t -p 28259:28259 -p 28260:28260 -p 28261:28261 -p 28262:28262 -p 28263:28263 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28261 --rest-port=28259 --tcp-port=28260 --discv5-udp-port=28262 --rest-address=0.0.0.0 --nat=extip:172.18.80.15 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d0d9fbd809bbd0a680a884e1f8bc9e5ffb182eb8f70772f191c8fa7a2d7abae4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28263 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFCpVG9w9TYT6w7Cwz-yd57CBbNmMw5XqCsJBpRWpu0RMO6_fek1wLdhXhyqAjdx3MbpGQo7s_wnXryhsI2LW-ECgmlkgnY0gmlwhKwSJveKbXVsdGlhZGRyc5YACASsEib3BrcuAAoErBIm9wa3L90DgnJzhQADAQAAiXNlY3AyNTZrMaECPDkIG_pbNTC1NEmU6Nu-ziVofBMTvWdOGOebaevoObuDdGNwgrcug3VkcIK3MIV3YWt1MgM --storenode=/ip4/172.18.38.247/tcp/46894/p2p/16Uiu2HAkyUkt3qg6gcqmbVbyy8DVx2n4qoPibx6jUNzfufWW6NjC --store=true --relay=true
2025-02-04 17:13:47.706 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.80.15 waku 2265cd864dfa1587655fe0386739152d23af9190095aa71cc696bfe7eaffb6a9
2025-02-04 17:13:47.756 DEBUG [src.node.docker_mananger] Container started with ID 2265cd864dfa. Setting up logs at ./log/docker/store_node1_2025-02-04_17-13-46__25769e49-2483-48de-ac05-3072f8e9b325__wakuorg_nwaku:latest.log
2025-02-04 17:13:47.757 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28259
2025-02-04 17:13:47.757 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:13:48.758 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28259/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:48.761 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:13:48.761 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:13:48.761 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28259/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:48.763 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.80.15/tcp/28260/p2p/16Uiu2HAkzMacW6VLmNXY1LHQse2FpMXAJyEbrCFogULwCtSZf6nY","/ip4/172.18.80.15/tcp/28261/ws/p2p/16Uiu2HAkzMacW6VLmNXY1LHQse2FpMXAJyEbrCFogULwCtSZf6nY"],"enrUri":"enr:-L24QJA52SpENrvay1xHHlorB9FNXySG7nd6z1Udg8HZgvagMkSax3WbuAXOeuNW47ZRfNGE1LakOXB2xMSIHT6gVE8CgmlkgnY0gmlwhKwSUA-KbXVsdGlhZGRyc5YACASsElAPBm5kAAoErBJQDwZuZd0DgnJzhQADAQAAiXNlY3AyNTZrMaECST4K9Z88cyS8hbKOtmQOjBfm10-z5VUsYa9J5zoHhtWDdGNwgm5kg3VkcIJuZoV3YWt1MgM"}'
2025-02-04 17:13:48.764 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:13:48.764 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28259/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.38.247/tcp/46894/p2p/16Uiu2HAkyUkt3qg6gcqmbVbyy8DVx2n4qoPibx6jUNzfufWW6NjC"]'
2025-02-04 17:13:48.766 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:48.767 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46893/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:13:48.769 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:48.769 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28259/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:13:48.772 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:48.773 DEBUG [src.steps.store] Relaying message
2025-02-04 17:13:48.773 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46893/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:13:48.778 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:48.778 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:13:48.979 DEBUG [src.steps.store] Relaying message
2025-02-04 17:13:48.979 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46893/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:13:48.985 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:48.985 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:13:49.186 DEBUG [src.steps.store] Relaying message
2025-02-04 17:13:49.186 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46893/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:13:49.192 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:49.192 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:13:49.394 DEBUG [src.steps.store] Relaying message
2025-02-04 17:13:49.394 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46893/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:13:49.400 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:49.400 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:13:49.601 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46893/store/v3/messages?hashes=%23%23%23%20INVALID%20HASH%20%23%23%23&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:49.604 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:46893/store/v3/messages?hashes=%23%23%23%20INVALID%20HASH%20%23%23%23&pageSize=50&ascending=true. Response content: b'Exception converting hex string to bytes: # is not a hexadecimal character'
2025-02-04 17:13:49.604 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28259/store/v3/messages?hashes=%23%23%23%20INVALID%20HASH%20%23%23%23&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:49.607 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28259/store/v3/messages?hashes=%23%23%23%20INVALID%20HASH%20%23%23%23&pageSize=50&ascending=true. Response content: b'Exception converting hex string to bytes: # is not a hexadecimal character'
2025-02-04 17:13:49.609 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:13:49.610 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:13:49.610 DEBUG [src.node.waku_node] Stopping container with id fe3a9e2edbe3
2025-02-04 17:13:50.261 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:13:50.261 DEBUG [src.node.waku_node] Stopping container with id 2265cd864dfa
2025-02-04 17:13:51.073 ERROR [src.node.docker_mananger] Max retries reached for container fe3a9e2edbe3. Exiting log stream.
2025-02-04 17:13:51.735 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:13:51.737 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:13:51.743 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:13:51.748 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
