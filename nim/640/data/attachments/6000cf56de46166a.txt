2025-02-04 17:10:51.507 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:10:51.507 DEBUG [tests.conftest] Running test: test_get_store_messages_with_wrong_typo_content_topic with id: 2025-02-04_17-10-51__1efc680b-fb9e-4629-b684-dc9371877a11
2025-02-04 17:10:51.508 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:10:51.508 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-04 17:10:51.508 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-04 17:10:51.514 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:10:51.515 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-04_17-10-51__1efc680b-fb9e-4629-b684-dc9371877a11__wakuorg_nwaku:latest.log
2025-02-04 17:10:51.515 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:10:51.515 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:10:51.516 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:10:51.516 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.158.219
2025-02-04 17:10:51.516 DEBUG [src.node.docker_mananger] Generated ports ['9522', '9523', '9524', '9525', '9526']
2025-02-04 17:10:51.517 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:10:51.517 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:10:51.517 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:10:51.517 DEBUG [src.node.docker_mananger] docker run -i -t -p 9522:9522 -p 9523:9523 -p 9524:9524 -p 9525:9525 -p 9526:9526 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9524 --rest-port=9522 --tcp-port=9523 --discv5-udp-port=9525 --rest-address=0.0.0.0 --nat=extip:172.18.158.219 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5626c7f92aaac2a2b533166ba4cfad40bb9e4b3071db28ebafcaa3a9959cdabe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9526 --metrics-logging=true --store=true --relay=true
2025-02-04 17:10:51.746 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.158.219 waku 34e74dcea57427d6d71efe0097aea4daf6ff3ee9b59eb3269347a1826a0a31e6
2025-02-04 17:10:51.795 DEBUG [src.node.docker_mananger] Container started with ID 34e74dcea574. Setting up logs at ./log/docker/publishing_node1_2025-02-04_17-10-51__1efc680b-fb9e-4629-b684-dc9371877a11__wakuorg_nwaku:latest.log
2025-02-04 17:10:51.797 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9522
2025-02-04 17:10:51.797 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:10:52.305 ERROR [src.node.docker_mananger] Max retries reached for container eb978b41c789. Exiting log stream.
2025-02-04 17:10:52.797 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9522/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:52.800 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:10:52.801 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:10:52.801 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9522/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:52.803 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.158.219/tcp/9523/p2p/16Uiu2HAmTzRpMxQssoFJPJhW3wDCcXwCK2VDtu62HNa7JBPhaQJJ","/ip4/172.18.158.219/tcp/9524/ws/p2p/16Uiu2HAmTzRpMxQssoFJPJhW3wDCcXwCK2VDtu62HNa7JBPhaQJJ"],"enrUri":"enr:-L24QAJAOMiOGYcgo3qfP6AKzKahQWkaSZvUjCvDw5nAhMB7AQxGClOTE8UqybQXhxX5OJsEbQj3xQvCaqA1xTSrJ9UCgmlkgnY0gmlwhKwSntuKbXVsdGlhZGRyc5YACASsEp7bBiUzAAoErBKe2wYlNN0DgnJzhQADAQAAiXNlY3AyNTZrMaED49oidv3ASi6ZUKjrwDANkKMMko7wrJ0uZVeIWC6kDI-DdGNwgiUzg3VkcIIlNYV3YWt1MgM"}'
2025-02-04 17:10:52.803 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:10:52.809 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:10:52.810 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-04_17-10-51__1efc680b-fb9e-4629-b684-dc9371877a11__wakuorg_nwaku:latest.log
2025-02-04 17:10:52.810 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:10:52.810 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:10:52.811 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:10:52.811 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.239.72
2025-02-04 17:10:52.812 DEBUG [src.node.docker_mananger] Generated ports ['65113', '65114', '65115', '65116', '65117']
2025-02-04 17:10:52.812 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:10:52.812 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:10:52.812 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:10:52.812 DEBUG [src.node.docker_mananger] docker run -i -t -p 65113:65113 -p 65114:65114 -p 65115:65115 -p 65116:65116 -p 65117:65117 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65115 --rest-port=65113 --tcp-port=65114 --discv5-udp-port=65116 --rest-address=0.0.0.0 --nat=extip:172.18.239.72 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a16dd4781a9bb3e30a8f2be4a9f9cbc28ee81baac0dabccf212ee53a1e9ad94a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65117 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QAJAOMiOGYcgo3qfP6AKzKahQWkaSZvUjCvDw5nAhMB7AQxGClOTE8UqybQXhxX5OJsEbQj3xQvCaqA1xTSrJ9UCgmlkgnY0gmlwhKwSntuKbXVsdGlhZGRyc5YACASsEp7bBiUzAAoErBKe2wYlNN0DgnJzhQADAQAAiXNlY3AyNTZrMaED49oidv3ASi6ZUKjrwDANkKMMko7wrJ0uZVeIWC6kDI-DdGNwgiUzg3VkcIIlNYV3YWt1MgM --storenode=/ip4/172.18.158.219/tcp/9523/p2p/16Uiu2HAmTzRpMxQssoFJPJhW3wDCcXwCK2VDtu62HNa7JBPhaQJJ --store=true --relay=true
2025-02-04 17:10:53.040 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.239.72 waku 323f8d571317b84d6562784bf82684e77e625c952ef24ff356196a6229d557de
2025-02-04 17:10:53.087 DEBUG [src.node.docker_mananger] Container started with ID 323f8d571317. Setting up logs at ./log/docker/store_node1_2025-02-04_17-10-51__1efc680b-fb9e-4629-b684-dc9371877a11__wakuorg_nwaku:latest.log
2025-02-04 17:10:53.087 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 65113
2025-02-04 17:10:53.087 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:10:54.088 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65113/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:54.091 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:10:54.091 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:10:54.092 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65113/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:54.094 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.239.72/tcp/65114/p2p/16Uiu2HAmBNRkaUMmRA6rRuJyrmyq8urpZhBeUei3NR8GbQNXq4Xd","/ip4/172.18.239.72/tcp/65115/ws/p2p/16Uiu2HAmBNRkaUMmRA6rRuJyrmyq8urpZhBeUei3NR8GbQNXq4Xd"],"enrUri":"enr:-L24QDgM8knzTccgYIgFJ7GgTWV7PG4sgR0uqoqdONjv_SQ5Q8jyv5yWlQT5ngh-czEqZnsLlLMBuwacwFJCIGzWUpACgmlkgnY0gmlwhKwS70iKbXVsdGlhZGRyc5YACASsEu9IBv5aAAoErBLvSAb-W90DgnJzhQADAQAAiXNlY3AyNTZrMaEC7OYpMTdlffey0QQFwd4Q1eOxmwODkGTrVTzShi_fxZyDdGNwgv5ag3VkcIL-XIV3YWt1MgM"}'
2025-02-04 17:10:54.094 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:10:54.094 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65113/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.158.219/tcp/9523/p2p/16Uiu2HAmTzRpMxQssoFJPJhW3wDCcXwCK2VDtu62HNa7JBPhaQJJ"]'
2025-02-04 17:10:54.097 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:54.097 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9522/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:10:54.100 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:54.100 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65113/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:10:54.102 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:54.103 DEBUG [tests.store.test_api_flags] Trying to publish msg with content topic /myapp/1/latest/protoo
2025-02-04 17:10:54.103 DEBUG [src.steps.store] Relaying message
2025-02-04 17:10:54.104 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9522/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/protoo", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:10:54.110 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:54.111 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:10:54.312 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65113/store/v3/messages?includeData=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fprotoo&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:54.315 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x501988e6de434db64e8eff457c98a77ced314db83e6b9c2ee67e9fb5dcf735b3","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/protoo","version":0,"timestamp":1738689054103797760,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
2025-02-04 17:10:54.316 DEBUG [tests.store.test_api_flags] stored content topic is /myapp/1/latest/protoo
2025-02-04 17:10:54.317 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:10:54.318 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:10:54.318 DEBUG [src.node.waku_node] Stopping container with id 34e74dcea574
2025-02-04 17:10:55.202 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:10:55.202 DEBUG [src.node.waku_node] Stopping container with id 323f8d571317
2025-02-04 17:10:56.015 ERROR [src.node.docker_mananger] Max retries reached for container 34e74dcea574. Exiting log stream.
2025-02-04 17:10:56.725 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:10:56.726 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:10:56.732 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:10:56.736 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
