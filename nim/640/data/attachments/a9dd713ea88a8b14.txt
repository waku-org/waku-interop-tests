2025-02-04 17:10:08.043 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:10:08.043 DEBUG [tests.conftest] Running test: test_lightpush with id: 2025-02-04_17-10-08__a91f6a1b-6671-417e-a1eb-835ffa0c75c9
2025-02-04 17:10:08.043 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:10:08.044 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-04 17:10:08.044 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-04 17:10:08.044 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-04 17:10:08.044 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-04 17:10:08.051 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:10:08.051 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-04_17-10-08__a91f6a1b-6671-417e-a1eb-835ffa0c75c9__wakuorg_nwaku:latest.log
2025-02-04 17:10:08.052 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:10:08.052 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:10:08.053 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:10:08.053 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.146.160
2025-02-04 17:10:08.054 DEBUG [src.node.docker_mananger] Generated ports ['61062', '61063', '61064', '61065', '61066']
2025-02-04 17:10:08.054 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:10:08.054 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:10:08.054 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:10:08.054 DEBUG [src.node.docker_mananger] docker run -i -t -p 61062:61062 -p 61063:61063 -p 61064:61064 -p 61065:61065 -p 61066:61066 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61064 --rest-port=61062 --tcp-port=61063 --discv5-udp-port=61065 --rest-address=0.0.0.0 --nat=extip:172.18.146.160 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=318fdbebda1b8aab9010cc0edd9f456c682a57fcb91d9a9f9a29b0be5a083c1a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61066 --metrics-logging=true --lightpush=true --relay=true
2025-02-04 17:10:08.291 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.146.160 waku 7e344c9918951f97e1574351a6024bb9bc705be4e8f8b3b6b0bf9df1ad4d8ccf
2025-02-04 17:10:08.345 DEBUG [src.node.docker_mananger] Container started with ID 7e344c991895. Setting up logs at ./log/docker/node1_2025-02-04_17-10-08__a91f6a1b-6671-417e-a1eb-835ffa0c75c9__wakuorg_nwaku:latest.log
2025-02-04 17:10:08.346 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61062
2025-02-04 17:10:08.346 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:10:08.850 ERROR [src.node.docker_mananger] Max retries reached for container 17ac9fdca65d. Exiting log stream.
2025-02-04 17:10:09.346 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61062/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:09.350 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:10:09.350 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:10:09.350 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61062/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:09.353 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.146.160/tcp/61063/p2p/16Uiu2HAm8umWCXShKFQ1ffrKbNJGJid1KBeLqExx9aygidt7qH83","/ip4/172.18.146.160/tcp/61064/ws/p2p/16Uiu2HAm8umWCXShKFQ1ffrKbNJGJid1KBeLqExx9aygidt7qH83"],"enrUri":"enr:-L24QHP-Mys3HccYkICO3bztIZQNuiSIj-aouNHxVsyOT9x8dj1K_OKfshFJ12cDZdyXfEYnMKWACeXAeAFAgv91tCkCgmlkgnY0gmlwhKwSkqCKbXVsdGlhZGRyc5YACASsEpKgBu6HAAoErBKSoAbuiN0DgnJzhQADAQAAiXNlY3AyNTZrMaECyFpwYMH2f06INWDtOAqyrOmjw4t6xj0TY4zSaHc60xiDdGNwgu6Hg3VkcILuiYV3YWt1Mgk"}'
2025-02-04 17:10:09.353 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:10:09.359 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:10:09.359 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-04_17-10-08__a91f6a1b-6671-417e-a1eb-835ffa0c75c9__wakuorg_nwaku:latest.log
2025-02-04 17:10:09.360 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:10:09.360 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:10:09.361 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:10:09.361 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.174.42
2025-02-04 17:10:09.361 DEBUG [src.node.docker_mananger] Generated ports ['47603', '47604', '47605', '47606', '47607']
2025-02-04 17:10:09.362 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:10:09.362 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:10:09.362 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:10:09.362 DEBUG [src.node.docker_mananger] docker run -i -t -p 47603:47603 -p 47604:47604 -p 47605:47605 -p 47606:47606 -p 47607:47607 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47605 --rest-port=47603 --tcp-port=47604 --discv5-udp-port=47606 --rest-address=0.0.0.0 --nat=extip:172.18.174.42 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3cd0ebf6f74af67f006a15c714b8abe7eedc84cac4970bbfecc57ea8ca7c4cae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47607 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QHP-Mys3HccYkICO3bztIZQNuiSIj-aouNHxVsyOT9x8dj1K_OKfshFJ12cDZdyXfEYnMKWACeXAeAFAgv91tCkCgmlkgnY0gmlwhKwSkqCKbXVsdGlhZGRyc5YACASsEpKgBu6HAAoErBKSoAbuiN0DgnJzhQADAQAAiXNlY3AyNTZrMaECyFpwYMH2f06INWDtOAqyrOmjw4t6xj0TY4zSaHc60xiDdGNwgu6Hg3VkcILuiYV3YWt1Mgk
2025-02-04 17:10:09.594 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.174.42 waku 4436091128a8461c4085d08f343d7a02982294e4395e9d91c85fce063e5551f8
2025-02-04 17:10:09.652 DEBUG [src.node.docker_mananger] Container started with ID 4436091128a8. Setting up logs at ./log/docker/node1_2025-02-04_17-10-08__a91f6a1b-6671-417e-a1eb-835ffa0c75c9__wakuorg_nwaku:latest.log
2025-02-04 17:10:09.653 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 47603
2025-02-04 17:10:09.653 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:10:10.657 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47603/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:10.661 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:10:10.661 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:10:10.661 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47603/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:10.664 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.174.42/tcp/47604/p2p/16Uiu2HAkwYheDHrLCXGdeQbTqsj99aJS9YXm77Cn2Rn5GKkTk6Fu","/ip4/172.18.174.42/tcp/47605/ws/p2p/16Uiu2HAkwYheDHrLCXGdeQbTqsj99aJS9YXm77Cn2Rn5GKkTk6Fu"],"enrUri":"enr:-L24QPqEMrhocwoJz3n2LNh26O5Qsvo7UALEKTfhDGWZVETFMTJMOqm8B01R0G44A-45Sz-X7_8TdkOUirub7iOyyPMCgmlkgnY0gmlwhKwSriqKbXVsdGlhZGRyc5YACASsEq4qBrn0AAoErBKuKga59d0DgnJzhQADAQAAiXNlY3AyNTZrMaECH4RRtvXLLuxaX-88xdWuhNPplXilQdy1DTHeEQz3O0yDdGNwgrn0g3VkcIK59oV3YWt1MgE"}'
2025-02-04 17:10:10.664 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:10:10.670 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:10:10.671 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-04_17-10-08__a91f6a1b-6671-417e-a1eb-835ffa0c75c9__wakuorg_nwaku:latest.log
2025-02-04 17:10:10.671 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:10:10.671 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:10:10.672 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:10:10.673 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.29.130
2025-02-04 17:10:10.673 DEBUG [src.node.docker_mananger] Generated ports ['51355', '51356', '51357', '51358', '51359']
2025-02-04 17:10:10.673 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:10:10.673 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:10:10.673 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:10:10.673 DEBUG [src.node.docker_mananger] docker run -i -t -p 51355:51355 -p 51356:51356 -p 51357:51357 -p 51358:51358 -p 51359:51359 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51357 --rest-port=51355 --tcp-port=51356 --discv5-udp-port=51358 --rest-address=0.0.0.0 --nat=extip:172.18.29.130 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bfdedf8c8db7c16be3e0953aa57bcff93f85ace4a51243fdbf5d3fc3507e88bd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51359 --metrics-logging=true --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QHP-Mys3HccYkICO3bztIZQNuiSIj-aouNHxVsyOT9x8dj1K_OKfshFJ12cDZdyXfEYnMKWACeXAeAFAgv91tCkCgmlkgnY0gmlwhKwSkqCKbXVsdGlhZGRyc5YACASsEpKgBu6HAAoErBKSoAbuiN0DgnJzhQADAQAAiXNlY3AyNTZrMaECyFpwYMH2f06INWDtOAqyrOmjw4t6xj0TY4zSaHc60xiDdGNwgu6Hg3VkcILuiYV3YWt1Mgk --lightpushnode=/ip4/172.18.146.160/tcp/61063/p2p/16Uiu2HAm8umWCXShKFQ1ffrKbNJGJid1KBeLqExx9aygidt7qH83
2025-02-04 17:10:10.919 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.29.130 waku 98eed6845428ec172e6a087edabe1ef42ae64b5b17a17aa41ee1ee652b5c3e6d
2025-02-04 17:10:10.967 DEBUG [src.node.docker_mananger] Container started with ID 98eed6845428. Setting up logs at ./log/docker/node1_2025-02-04_17-10-08__a91f6a1b-6671-417e-a1eb-835ffa0c75c9__wakuorg_nwaku:latest.log
2025-02-04 17:10:10.968 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 51355
2025-02-04 17:10:10.968 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:10:11.968 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51355/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:11.971 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:10:11.972 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:10:11.972 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51355/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:11.974 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.29.130/tcp/51356/p2p/16Uiu2HAmKhrufbtmDGmA5zZ4JKPUjMG3vA12P4tbTH74rF2i19gp","/ip4/172.18.29.130/tcp/51357/ws/p2p/16Uiu2HAmKhrufbtmDGmA5zZ4JKPUjMG3vA12P4tbTH74rF2i19gp"],"enrUri":"enr:-L24QPAjlb0kwKoF_sgROYnXuw4lduXE71aLezFyHJu5GKAyGJ3IaR_xiVQ-NPItfqUt9NboWOcGbOY8Gf41rHymPnICgmlkgnY0gmlwhKwSHYKKbXVsdGlhZGRyc5YACASsEh2CBsicAAoErBIdggbInd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDaL4i7vfHcCURA7jjuKwR6V-_tPfBAcCbCuruaEh26FWDdGNwgsicg3VkcILInoV3YWt1Mgg"}'
2025-02-04 17:10:11.974 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:10:11.974 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61062/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:10:11.978 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:11.979 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47603/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:10:11.985 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:11.987 DEBUG [src.steps.light_push] Lightpushing message
2025-02-04 17:10:11.988 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51355/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1738689011987410176}}'
2025-02-04 17:10:12.038 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:12.040 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:10:12.147 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:10:12.147 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61062/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:12.150 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738689011987410176,"ephemeral":false}]'
2025-02-04 17:10:12.152 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:10:12.152 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47603/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:12.155 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738689011987410176,"ephemeral":false}]'
2025-02-04 17:10:12.158 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:10:12.159 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:10:12.159 DEBUG [src.node.waku_node] Stopping container with id 7e344c991895
2025-02-04 17:10:12.862 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:10:12.862 DEBUG [src.node.waku_node] Stopping container with id 4436091128a8
2025-02-04 17:10:13.675 ERROR [src.node.docker_mananger] Max retries reached for container 7e344c991895. Exiting log stream.
2025-02-04 17:10:14.357 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:10:14.358 DEBUG [src.node.waku_node] Stopping container with id 98eed6845428
2025-02-04 17:10:15.171 ERROR [src.node.docker_mananger] Max retries reached for container 4436091128a8. Exiting log stream.
2025-02-04 17:10:15.898 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:10:15.899 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:10:15.906 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:10:15.914 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:10:15.920 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
