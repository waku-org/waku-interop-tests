2025-02-04 17:15:20.824 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:15:20.824 DEBUG [tests.conftest] Running test: test_store_with_multiple_content_topics with id: 2025-02-04_17-15-20__a85bcce3-a922-47cf-8dc7-6df8c3ca949c
2025-02-04 17:15:20.825 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:15:20.825 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-04 17:15:20.825 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-04 17:15:20.833 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:15:20.833 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-04_17-15-20__a85bcce3-a922-47cf-8dc7-6df8c3ca949c__wakuorg_nwaku:latest.log
2025-02-04 17:15:20.834 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:15:20.834 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:15:20.835 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:15:20.835 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.251.189
2025-02-04 17:15:20.835 DEBUG [src.node.docker_mananger] Generated ports ['43299', '43300', '43301', '43302', '43303']
2025-02-04 17:15:20.836 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:15:20.836 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:15:20.836 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:15:20.836 DEBUG [src.node.docker_mananger] docker run -i -t -p 43299:43299 -p 43300:43300 -p 43301:43301 -p 43302:43302 -p 43303:43303 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43301 --rest-port=43299 --tcp-port=43300 --discv5-udp-port=43302 --rest-address=0.0.0.0 --nat=extip:172.18.251.189 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b72519da4d2fff115ecdee93927e2c89e4f97c06a0db8fabd5bebcd156ceeae5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43303 --metrics-logging=true --store=true --relay=true
2025-02-04 17:15:21.089 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.251.189 waku 30414bf134b4eda1fb8ba0985c135b8135376f99442f7a26939793bb468ffe26
2025-02-04 17:15:21.145 DEBUG [src.node.docker_mananger] Container started with ID 30414bf134b4. Setting up logs at ./log/docker/publishing_node1_2025-02-04_17-15-20__a85bcce3-a922-47cf-8dc7-6df8c3ca949c__wakuorg_nwaku:latest.log
2025-02-04 17:15:21.146 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 43299
2025-02-04 17:15:21.147 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:15:21.627 ERROR [src.node.docker_mananger] Max retries reached for container b6157a71486a. Exiting log stream.
2025-02-04 17:15:22.148 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43299/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:15:22.151 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:15:22.152 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:15:22.152 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43299/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:15:22.154 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.251.189/tcp/43300/p2p/16Uiu2HAmB4oJQF9vwSJn1vJAPHqj27EXpeJ2WgJgdDjEGGviKZmL","/ip4/172.18.251.189/tcp/43301/ws/p2p/16Uiu2HAmB4oJQF9vwSJn1vJAPHqj27EXpeJ2WgJgdDjEGGviKZmL"],"enrUri":"enr:-L24QMGO_AYjZAJZ8Mfx_oTgqidxxutuHLLQesyU4YMV610VcF43K9Rbc6LO2cUSbuzicBlMXLR-mmtWhBg_FjZylBACgmlkgnY0gmlwhKwS-72KbXVsdGlhZGRyc5YACASsEvu9BqkkAAoErBL7vQapJd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC6GISTwa7HPj0Jl1k_PnuRRzpZCeQjh02g_N2jNYdI0uDdGNwgqkkg3VkcIKpJoV3YWt1MgM"}'
2025-02-04 17:15:22.154 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:15:22.161 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:15:22.161 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-04_17-15-20__a85bcce3-a922-47cf-8dc7-6df8c3ca949c__wakuorg_nwaku:latest.log
2025-02-04 17:15:22.162 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:15:22.162 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:15:22.163 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:15:22.163 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.63.118
2025-02-04 17:15:22.164 DEBUG [src.node.docker_mananger] Generated ports ['65134', '65135', '65136', '65137', '65138']
2025-02-04 17:15:22.164 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:15:22.164 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:15:22.164 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:15:22.164 DEBUG [src.node.docker_mananger] docker run -i -t -p 65134:65134 -p 65135:65135 -p 65136:65136 -p 65137:65137 -p 65138:65138 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65136 --rest-port=65134 --tcp-port=65135 --discv5-udp-port=65137 --rest-address=0.0.0.0 --nat=extip:172.18.63.118 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=08caa9b00712c18bcd278de20118f3cd135c2bfda4a7eabdd20a474b22cfffbb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65138 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMGO_AYjZAJZ8Mfx_oTgqidxxutuHLLQesyU4YMV610VcF43K9Rbc6LO2cUSbuzicBlMXLR-mmtWhBg_FjZylBACgmlkgnY0gmlwhKwS-72KbXVsdGlhZGRyc5YACASsEvu9BqkkAAoErBL7vQapJd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC6GISTwa7HPj0Jl1k_PnuRRzpZCeQjh02g_N2jNYdI0uDdGNwgqkkg3VkcIKpJoV3YWt1MgM --storenode=/ip4/172.18.251.189/tcp/43300/p2p/16Uiu2HAmB4oJQF9vwSJn1vJAPHqj27EXpeJ2WgJgdDjEGGviKZmL --store=true --relay=true
2025-02-04 17:15:22.400 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.63.118 waku e0140bc60bfc8e88a9aaf7ded79bc33bf07df728bf89e9d8f87350be3f8ff6c7
2025-02-04 17:15:22.449 DEBUG [src.node.docker_mananger] Container started with ID e0140bc60bfc. Setting up logs at ./log/docker/store_node1_2025-02-04_17-15-20__a85bcce3-a922-47cf-8dc7-6df8c3ca949c__wakuorg_nwaku:latest.log
2025-02-04 17:15:22.450 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 65134
2025-02-04 17:15:22.450 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:15:23.451 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65134/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:15:23.454 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:15:23.454 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:15:23.455 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65134/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:15:23.457 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.63.118/tcp/65135/p2p/16Uiu2HAm2KuKJGQwnyww8kLHyMiDNU9gAu3DBQWtMDwf8Vvtj6NN","/ip4/172.18.63.118/tcp/65136/ws/p2p/16Uiu2HAm2KuKJGQwnyww8kLHyMiDNU9gAu3DBQWtMDwf8Vvtj6NN"],"enrUri":"enr:-L24QHEcEIGx7PmOjZpUw_fISUYnFul495vKn4q0_jVl5P-6T_bV7QedjkCiXQI0TWXyqhMV13nBINwymi4Cs8LYpvECgmlkgnY0gmlwhKwSP3aKbXVsdGlhZGRyc5YACASsEj92Bv5vAAoErBI_dgb-cN0DgnJzhQADAQAAiXNlY3AyNTZrMaECZodnLJtsA7JhSX_cdg6hNtZxsoygwDjZUg9GzTdnP-uDdGNwgv5vg3VkcIL-cYV3YWt1MgM"}'
2025-02-04 17:15:23.457 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:15:23.458 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65134/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.251.189/tcp/43300/p2p/16Uiu2HAmB4oJQF9vwSJn1vJAPHqj27EXpeJ2WgJgdDjEGGviKZmL"]'
2025-02-04 17:15:23.460 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:15:23.461 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43299/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:15:23.463 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:15:23.463 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65134/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:15:23.466 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:15:23.466 DEBUG [src.steps.store] Relaying message
2025-02-04 17:15:23.466 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43299/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:15:23.473 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:15:23.473 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:15:23.674 DEBUG [src.steps.store] Relaying message
2025-02-04 17:15:23.674 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43299/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:15:23.680 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:15:23.680 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:15:23.882 DEBUG [src.steps.store] Relaying message
2025-02-04 17:15:23.882 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43299/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:15:23.888 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:15:23.889 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:15:24.090 DEBUG [src.steps.store] Relaying message
2025-02-04 17:15:24.090 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43299/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:15:24.096 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:15:24.097 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:15:24.298 DEBUG [src.steps.store] Relaying message
2025-02-04 17:15:24.298 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43299/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:15:24.304 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:15:24.305 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:15:24.506 DEBUG [src.steps.store] Relaying message
2025-02-04 17:15:24.506 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43299/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:15:24.513 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:15:24.513 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:15:24.714 DEBUG [src.steps.store] Relaying message
2025-02-04 17:15:24.714 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43299/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:15:24.720 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:15:24.721 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:15:24.922 DEBUG [src.steps.store] Relaying message
2025-02-04 17:15:24.922 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43299/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:15:24.929 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:15:24.929 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:15:25.131 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43299/store/v3/messages?contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto%2C%2Fstatusim%2F1%2Fcommunity%2Fcbor&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:15:25.134 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x429b0cbffb78f95857f8b8257a7b5b41544302e75358c53c050f446e2f7e6094"},{"messageHash":"0xbc38eb42520116749b92682b2bfa79fe81c0e8bed0a8e293249544e5610ba7d0"}]}'
2025-02-04 17:15:25.134 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65134/store/v3/messages?contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto%2C%2Fstatusim%2F1%2Fcommunity%2Fcbor&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:15:25.137 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x429b0cbffb78f95857f8b8257a7b5b41544302e75358c53c050f446e2f7e6094"},{"messageHash":"0xbc38eb42520116749b92682b2bfa79fe81c0e8bed0a8e293249544e5610ba7d0"}]}'
2025-02-04 17:15:25.140 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:15:25.142 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:15:25.142 DEBUG [src.node.waku_node] Stopping container with id 30414bf134b4
2025-02-04 17:15:25.687 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:15:25.688 DEBUG [src.node.waku_node] Stopping container with id e0140bc60bfc
2025-02-04 17:15:26.519 ERROR [src.node.docker_mananger] Max retries reached for container 30414bf134b4. Exiting log stream.
2025-02-04 17:15:27.223 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:15:27.224 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:15:27.237 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:15:27.244 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
