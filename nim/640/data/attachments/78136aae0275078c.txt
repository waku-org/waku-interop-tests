2025-02-04 17:09:42.390 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:09:42.390 DEBUG [tests.conftest] Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2025-02-04_17-09-42__0802d1d4-6a42-415b-ad92-a5a7797a91d4
2025-02-04 17:09:42.390 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:09:42.391 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-04 17:09:42.397 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:09:42.397 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-04_17-09-42__0802d1d4-6a42-415b-ad92-a5a7797a91d4__wakuorg_nwaku:latest.log
2025-02-04 17:09:42.397 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:09:42.397 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:09:42.399 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:09:42.399 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.214.107
2025-02-04 17:09:42.399 DEBUG [src.node.docker_mananger] Generated ports ['25353', '25354', '25355', '25356', '25357']
2025-02-04 17:09:42.399 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:09:42.399 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:09:42.399 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:09:42.400 DEBUG [src.node.docker_mananger] docker run -i -t -p 25353:25353 -p 25354:25354 -p 25355:25355 -p 25356:25356 -p 25357:25357 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25355 --rest-port=25353 --tcp-port=25354 --discv5-udp-port=25356 --rest-address=0.0.0.0 --nat=extip:172.18.214.107 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=601a2edaa612cded2bc5aebdffc9e812dadc26a1dc4db43ab77cefcc9c95f03e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25357 --metrics-logging=true --lightpush=true --relay=true
2025-02-04 17:09:42.651 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.214.107 waku 8f9f7575c73c0bf9babb1c3143841a0413fde87062120be3c7cc71eaedf1de44
2025-02-04 17:09:42.699 DEBUG [src.node.docker_mananger] Container started with ID 8f9f7575c73c. Setting up logs at ./log/docker/receiving_node1_2025-02-04_17-09-42__0802d1d4-6a42-415b-ad92-a5a7797a91d4__wakuorg_nwaku:latest.log
2025-02-04 17:09:42.700 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 25353
2025-02-04 17:09:42.701 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:09:43.187 ERROR [src.node.docker_mananger] Max retries reached for container 4ada56db2862. Exiting log stream.
2025-02-04 17:09:43.702 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25353/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:09:43.705 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:09:43.705 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:09:43.705 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25353/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:09:43.708 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.214.107/tcp/25354/p2p/16Uiu2HAmSZRpSNrg2J1T8haKYCtda9WX7wJgMthmtkobMrqSUCoh","/ip4/172.18.214.107/tcp/25355/ws/p2p/16Uiu2HAmSZRpSNrg2J1T8haKYCtda9WX7wJgMthmtkobMrqSUCoh"],"enrUri":"enr:-L24QIasti2BSoDpIfGTNOviHMgNk26jb0x9-jlSNBUHxi1KEmzvt2PcSpMqb8uIMe_FtDO7x3qJYKiVh24IKDQ1p-UCgmlkgnY0gmlwhKwS1muKbXVsdGlhZGRyc5YACASsEtZrBmMKAAoErBLWawZjC90DgnJzhQADAQAAiXNlY3AyNTZrMaEDzpbt0GSFaovybp1VgxHLwo0iDmRSo_2FcFyND3zU6CiDdGNwgmMKg3VkcIJjDIV3YWt1Mgk"}'
2025-02-04 17:09:43.708 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:09:43.715 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:09:43.715 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-04_17-09-42__0802d1d4-6a42-415b-ad92-a5a7797a91d4__wakuorg_nwaku:latest.log
2025-02-04 17:09:43.715 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:09:43.715 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:09:43.716 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:09:43.716 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.98.104
2025-02-04 17:09:43.717 DEBUG [src.node.docker_mananger] Generated ports ['56793', '56794', '56795', '56796', '56797']
2025-02-04 17:09:43.717 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:09:43.717 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:09:43.717 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:09:43.717 DEBUG [src.node.docker_mananger] docker run -i -t -p 56793:56793 -p 56794:56794 -p 56795:56795 -p 56796:56796 -p 56797:56797 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56795 --rest-port=56793 --tcp-port=56794 --discv5-udp-port=56796 --rest-address=0.0.0.0 --nat=extip:172.18.98.104 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3f8c79ee3febd2b091e90bc22dee47a5cfbd8b4b3bb38d91c2c762fdb4e0af39 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56797 --metrics-logging=true --lightpush=false --relay=true
2025-02-04 17:09:43.952 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.98.104 waku 3c57a5880a2e87e5215051ed315078697c1177c51fe65f64b93442c236108a58
2025-02-04 17:09:44.004 DEBUG [src.node.docker_mananger] Container started with ID 3c57a5880a2e. Setting up logs at ./log/docker/receiving_node2_2025-02-04_17-09-42__0802d1d4-6a42-415b-ad92-a5a7797a91d4__wakuorg_nwaku:latest.log
2025-02-04 17:09:44.004 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56793
2025-02-04 17:09:44.004 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:09:45.006 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56793/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:09:45.009 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:09:45.009 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:09:45.009 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56793/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:09:45.011 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.98.104/tcp/56794/p2p/16Uiu2HAmMurP41wkQpEvFsEKkd2X2jCreLoqFh81EDdshiHi9jdY","/ip4/172.18.98.104/tcp/56795/ws/p2p/16Uiu2HAmMurP41wkQpEvFsEKkd2X2jCreLoqFh81EDdshiHi9jdY"],"enrUri":"enr:-L24QOEaBcWFh7phuoSsJr9F18CYavXMfJ-deAjyOU_JlKfnZUtzGT9dBX5Wfcvl0HUk7UCyw40ZtvHbn7uHa1Zl-h8CgmlkgnY0gmlwhKwSYmiKbXVsdGlhZGRyc5YACASsEmJoBt3aAAoErBJiaAbd290DgnJzhQADAQAAiXNlY3AyNTZrMaEDiYfiGj1AI5Drm5Qg4EblVgGqvHcFg3bXAR3kRpFZiT-DdGNwgt3ag3VkcILd3IV3YWt1MgE"}'
2025-02-04 17:09:45.011 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:09:45.012 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56793/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.214.107/tcp/25354/p2p/16Uiu2HAmSZRpSNrg2J1T8haKYCtda9WX7wJgMthmtkobMrqSUCoh"]'
2025-02-04 17:09:45.052 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:09:45.062 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:09:45.062 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-04_17-09-42__0802d1d4-6a42-415b-ad92-a5a7797a91d4__wakuorg_nwaku:latest.log
2025-02-04 17:09:45.062 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:09:45.062 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:09:45.064 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:09:45.064 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.80.212
2025-02-04 17:09:45.064 DEBUG [src.node.docker_mananger] Generated ports ['28669', '28670', '28671', '28672', '28673']
2025-02-04 17:09:45.064 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:09:45.065 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:09:45.065 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:09:45.065 DEBUG [src.node.docker_mananger] docker run -i -t -p 28669:28669 -p 28670:28670 -p 28671:28671 -p 28672:28672 -p 28673:28673 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28671 --rest-port=28669 --tcp-port=28670 --discv5-udp-port=28672 --rest-address=0.0.0.0 --nat=extip:172.18.80.212 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0976d6edebbd579ecafafd6fdbdcb48c05bf8c2d1276bef85ba2afdaa4881c8f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28673 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QIasti2BSoDpIfGTNOviHMgNk26jb0x9-jlSNBUHxi1KEmzvt2PcSpMqb8uIMe_FtDO7x3qJYKiVh24IKDQ1p-UCgmlkgnY0gmlwhKwS1muKbXVsdGlhZGRyc5YACASsEtZrBmMKAAoErBLWawZjC90DgnJzhQADAQAAiXNlY3AyNTZrMaEDzpbt0GSFaovybp1VgxHLwo0iDmRSo_2FcFyND3zU6CiDdGNwgmMKg3VkcIJjDIV3YWt1Mgk --lightpushnode=/ip4/172.18.214.107/tcp/25354/p2p/16Uiu2HAmSZRpSNrg2J1T8haKYCtda9WX7wJgMthmtkobMrqSUCoh --lightpush=true --relay=false
2025-02-04 17:09:45.320 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.80.212 waku 55358afcd2c18cebc41c7a3e4cb0190c1993271eea6da10a1876bc2529f72e3f
2025-02-04 17:09:45.374 DEBUG [src.node.docker_mananger] Container started with ID 55358afcd2c1. Setting up logs at ./log/docker/lightpush_node1_2025-02-04_17-09-42__0802d1d4-6a42-415b-ad92-a5a7797a91d4__wakuorg_nwaku:latest.log
2025-02-04 17:09:45.374 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28669
2025-02-04 17:09:45.374 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:09:46.375 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28669/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:09:46.378 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:09:46.378 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:09:46.379 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28669/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:09:46.381 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.80.212/tcp/28670/p2p/16Uiu2HAkviSZ7JgKwne78pUmLrtcAaJ2dgxBhcAPGxxapqBxvWbS","/ip4/172.18.80.212/tcp/28671/ws/p2p/16Uiu2HAkviSZ7JgKwne78pUmLrtcAaJ2dgxBhcAPGxxapqBxvWbS"],"enrUri":"enr:-L24QIr7kmsUdUgKmBTwxbNqP3WAP_b61BEWhqUzml-NpzHaPIZyO0X0px44bS229JfzqB_vDxCvZ6TuwHhPATYtmscCgmlkgnY0gmlwhKwSUNSKbXVsdGlhZGRyc5YACASsElDUBm_-AAoErBJQ1AZv_90DgnJzhQADAQAAiXNlY3AyNTZrMaECEydhXMew1eu5HM3pnTH6ZXaWAne7rTARRGm0Fvi8WlmDdGNwgm_-g3VkcIJwAIV3YWt1Mgg"}'
2025-02-04 17:09:46.381 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:09:46.381 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28669/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.214.107/tcp/25354/p2p/16Uiu2HAmSZRpSNrg2J1T8haKYCtda9WX7wJgMthmtkobMrqSUCoh"]'
2025-02-04 17:09:46.420 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:09:46.420 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28669/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.98.104/tcp/56794/p2p/16Uiu2HAmMurP41wkQpEvFsEKkd2X2jCreLoqFh81EDdshiHi9jdY"]'
2025-02-04 17:09:46.447 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:09:46.447 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25353/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:09:46.454 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:09:46.455 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56793/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:09:46.462 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:09:46.465 DEBUG [src.steps.light_push] Lightpushing message
2025-02-04 17:09:46.468 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28669/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738688986465618176}}'
2025-02-04 17:09:46.479 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:28669/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
2025-02-04 17:09:46.482 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:09:46.483 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:09:46.483 DEBUG [src.node.waku_node] Stopping container with id 8f9f7575c73c
2025-02-04 17:09:47.211 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:09:47.212 DEBUG [src.node.waku_node] Stopping container with id 3c57a5880a2e
2025-02-04 17:09:48.024 ERROR [src.node.docker_mananger] Max retries reached for container 8f9f7575c73c. Exiting log stream.
2025-02-04 17:09:48.688 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:09:48.688 DEBUG [src.node.waku_node] Stopping container with id 55358afcd2c1
2025-02-04 17:09:49.501 ERROR [src.node.docker_mananger] Max retries reached for container 3c57a5880a2e. Exiting log stream.
2025-02-04 17:09:50.178 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:09:50.179 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:09:50.185 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:09:50.192 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:09:50.197 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
