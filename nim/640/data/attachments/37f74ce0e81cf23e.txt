2025-02-04 17:14:33.403 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:14:33.403 DEBUG [tests.conftest] Running test: test_store_lightpushed_message with id: 2025-02-04_17-14-33__5c722d09-3b0f-430c-9425-f4dfd2af0435
2025-02-04 17:14:33.404 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:14:33.404 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-04 17:14:33.411 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:14:33.411 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-04_17-14-33__5c722d09-3b0f-430c-9425-f4dfd2af0435__wakuorg_nwaku:latest.log
2025-02-04 17:14:33.411 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:14:33.411 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:14:33.412 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:14:33.413 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.19.50
2025-02-04 17:14:33.413 DEBUG [src.node.docker_mananger] Generated ports ['25953', '25954', '25955', '25956', '25957']
2025-02-04 17:14:33.413 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:14:33.413 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:14:33.413 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:14:33.413 DEBUG [src.node.docker_mananger] docker run -i -t -p 25953:25953 -p 25954:25954 -p 25955:25955 -p 25956:25956 -p 25957:25957 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25955 --rest-port=25953 --tcp-port=25954 --discv5-udp-port=25956 --rest-address=0.0.0.0 --nat=extip:172.18.19.50 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c4fdbc4dbd41f77ab518d38ea9addfecbd516eb0f42544fecf7f65c8da4cd4ca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25957 --metrics-logging=true --store=true --relay=true --lightpush=true
2025-02-04 17:14:33.636 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.19.50 waku df75f7f3b88ce7525ce05dd221fafe754bb116ba5ca77a0b9feacb61082799e4
2025-02-04 17:14:33.688 DEBUG [src.node.docker_mananger] Container started with ID df75f7f3b88c. Setting up logs at ./log/docker/publishing_node1_2025-02-04_17-14-33__5c722d09-3b0f-430c-9425-f4dfd2af0435__wakuorg_nwaku:latest.log
2025-02-04 17:14:33.690 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 25953
2025-02-04 17:14:33.691 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:14:34.209 ERROR [src.node.docker_mananger] Max retries reached for container 2a53fc2a5201. Exiting log stream.
2025-02-04 17:14:34.691 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25953/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:14:34.694 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:14:34.694 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:14:34.694 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25953/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:14:34.696 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.19.50/tcp/25954/p2p/16Uiu2HAmECouNZ729fsMMHh1zEoG5n58Vmk5iX5cbahBvZ165Rex","/ip4/172.18.19.50/tcp/25955/ws/p2p/16Uiu2HAmECouNZ729fsMMHh1zEoG5n58Vmk5iX5cbahBvZ165Rex"],"enrUri":"enr:-L24QP9dQKpGGIF_2UspvaXbeMn_58EQr4osVBu2cjRKj9Yye8yQmfHob25Lrv2LgsJHSjs3x1lBA7Jn7V5dA2Whnm8CgmlkgnY0gmlwhKwSEzKKbXVsdGlhZGRyc5YACASsEhMyBmViAAoErBITMgZlY90DgnJzhQADAQAAiXNlY3AyNTZrMaEDFwJ15NSjfJFhwUmoZX5OZ4EX--e2GwB83qLDP237IGmDdGNwgmVig3VkcIJlZIV3YWt1Mgs"}'
2025-02-04 17:14:34.696 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:14:34.703 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:14:34.703 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node2_2025-02-04_17-14-33__5c722d09-3b0f-430c-9425-f4dfd2af0435__wakuorg_nwaku:latest.log
2025-02-04 17:14:34.703 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:14:34.703 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:14:34.704 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:14:34.705 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.225.231
2025-02-04 17:14:34.705 DEBUG [src.node.docker_mananger] Generated ports ['6220', '6221', '6222', '6223', '6224']
2025-02-04 17:14:34.705 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:14:34.705 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:14:34.705 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:14:34.705 DEBUG [src.node.docker_mananger] docker run -i -t -p 6220:6220 -p 6221:6221 -p 6222:6222 -p 6223:6223 -p 6224:6224 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6222 --rest-port=6220 --tcp-port=6221 --discv5-udp-port=6223 --rest-address=0.0.0.0 --nat=extip:172.18.225.231 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dbe24fdc8f05dc35bfdd07a63fb28490d8ee23debbfe6b300faedf02e3847cdc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6224 --metrics-logging=true --store=false --relay=true
2025-02-04 17:14:34.933 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.225.231 waku 1af812e2465c2846702f776d0171930dba94dfc4982845c9d2fe4ccac077e6ce
2025-02-04 17:14:34.978 DEBUG [src.node.docker_mananger] Container started with ID 1af812e2465c. Setting up logs at ./log/docker/publishing_node2_2025-02-04_17-14-33__5c722d09-3b0f-430c-9425-f4dfd2af0435__wakuorg_nwaku:latest.log
2025-02-04 17:14:34.978 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6220
2025-02-04 17:14:34.979 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:14:35.979 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6220/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:14:35.982 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:14:35.982 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:14:35.982 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6220/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:14:35.984 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.225.231/tcp/6221/p2p/16Uiu2HAm9ag5kmr1wbvMQxYmUq6QuTdMrzpUSQEZs2w6pZTzrVN4","/ip4/172.18.225.231/tcp/6222/ws/p2p/16Uiu2HAm9ag5kmr1wbvMQxYmUq6QuTdMrzpUSQEZs2w6pZTzrVN4"],"enrUri":"enr:-L24QFy8hPHfuEbI1z40yLOhbH7f_wX_untE1I-auU8Q6zpQZdSD7zh4sYRq3SVDhXVQHOMrStOmfzu7X0tOx9F9NV0CgmlkgnY0gmlwhKwS4eeKbXVsdGlhZGRyc5YACASsEuHnBhhNAAoErBLh5wYYTt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC0lH14fklfI0E-kRisKCBx2VuPwIgU-m6STveOv6AG62DdGNwghhNg3VkcIIYT4V3YWt1MgE"}'
2025-02-04 17:14:35.984 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:14:35.985 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6220/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.19.50/tcp/25954/p2p/16Uiu2HAmECouNZ729fsMMHh1zEoG5n58Vmk5iX5cbahBvZ165Rex"]'
2025-02-04 17:14:36.023 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:14:36.032 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:14:36.032 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-04_17-14-33__5c722d09-3b0f-430c-9425-f4dfd2af0435__wakuorg_nwaku:latest.log
2025-02-04 17:14:36.032 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:14:36.032 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:14:36.034 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:14:36.034 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.25.188
2025-02-04 17:14:36.034 DEBUG [src.node.docker_mananger] Generated ports ['29269', '29270', '29271', '29272', '29273']
2025-02-04 17:14:36.034 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:14:36.034 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:14:36.034 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:14:36.035 DEBUG [src.node.docker_mananger] docker run -i -t -p 29269:29269 -p 29270:29270 -p 29271:29271 -p 29272:29272 -p 29273:29273 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29271 --rest-port=29269 --tcp-port=29270 --discv5-udp-port=29272 --rest-address=0.0.0.0 --nat=extip:172.18.25.188 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=65a63a2ac21e02ca7caab2a53534d89d6a51efd2ed31c3e25d4fb8cc75259eae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29273 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QP9dQKpGGIF_2UspvaXbeMn_58EQr4osVBu2cjRKj9Yye8yQmfHob25Lrv2LgsJHSjs3x1lBA7Jn7V5dA2Whnm8CgmlkgnY0gmlwhKwSEzKKbXVsdGlhZGRyc5YACASsEhMyBmViAAoErBITMgZlY90DgnJzhQADAQAAiXNlY3AyNTZrMaEDFwJ15NSjfJFhwUmoZX5OZ4EX--e2GwB83qLDP237IGmDdGNwgmVig3VkcIJlZIV3YWt1Mgs --storenode=/ip4/172.18.19.50/tcp/25954/p2p/16Uiu2HAmECouNZ729fsMMHh1zEoG5n58Vmk5iX5cbahBvZ165Rex --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.19.50/tcp/25954/p2p/16Uiu2HAmECouNZ729fsMMHh1zEoG5n58Vmk5iX5cbahBvZ165Rex
2025-02-04 17:14:36.266 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.25.188 waku 300f2b93c79397eb9723f0c1b75f8b09936b1900eb8243aae7656e275f5060ae
2025-02-04 17:14:36.309 DEBUG [src.node.docker_mananger] Container started with ID 300f2b93c793. Setting up logs at ./log/docker/store_node1_2025-02-04_17-14-33__5c722d09-3b0f-430c-9425-f4dfd2af0435__wakuorg_nwaku:latest.log
2025-02-04 17:14:36.310 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29269
2025-02-04 17:14:36.311 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:14:37.311 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29269/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:14:37.314 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:14:37.314 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:14:37.314 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29269/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:14:37.316 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.25.188/tcp/29270/p2p/16Uiu2HAmDWhDAyJ1y4rGeufppkUQbFoVS39xZWNEfn4xYHymK3xd","/ip4/172.18.25.188/tcp/29271/ws/p2p/16Uiu2HAmDWhDAyJ1y4rGeufppkUQbFoVS39xZWNEfn4xYHymK3xd"],"enrUri":"enr:-L24QEG0R7n3XNsY6ssasWk7fHhPEYK_dEutH8IbXSjOc0y5XfU5CJYvekUxP9I5tGyCw3T0VyWpuGMJAhIaAGphfF8CgmlkgnY0gmlwhKwSGbyKbXVsdGlhZGRyc5YACASsEhm8BnJWAAoErBIZvAZyV90DgnJzhQADAQAAiXNlY3AyNTZrMaEDDLupBhvlo19oOFhfKb0Rt4uteQoDNnldLun2gxf2OfKDdGNwgnJWg3VkcIJyWIV3YWt1Mgg"}'
2025-02-04 17:14:37.316 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:14:37.317 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29269/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.19.50/tcp/25954/p2p/16Uiu2HAmECouNZ729fsMMHh1zEoG5n58Vmk5iX5cbahBvZ165Rex"]'
2025-02-04 17:14:37.350 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:14:37.351 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29269/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.225.231/tcp/6221/p2p/16Uiu2HAm9ag5kmr1wbvMQxYmUq6QuTdMrzpUSQEZs2w6pZTzrVN4"]'
2025-02-04 17:14:37.380 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:14:37.382 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25953/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:14:37.390 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:14:37.391 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6220/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:14:37.396 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:14:37.397 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29269/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738689277397360896}}'
2025-02-04 17:14:37.409 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:14:37.409 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:14:37.609 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-04 17:14:37.610 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25953/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:14:37.613 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xc265e18756726e63e7f6a3e0f8523769c77763e820fa3fb9be16bc8b3fd3e7ea"}]}'
2025-02-04 17:14:37.613 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-04 17:14:37.613 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29269/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:14:37.621 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"6a10a6e43ffb7c52a567","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xc265e18756726e63e7f6a3e0f8523769c77763e820fa3fb9be16bc8b3fd3e7ea"}]}'
2025-02-04 17:14:37.622 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:14:37.624 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:14:37.624 DEBUG [src.node.waku_node] Stopping container with id df75f7f3b88c
2025-02-04 17:14:38.207 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:14:38.208 DEBUG [src.node.waku_node] Stopping container with id 1af812e2465c
2025-02-04 17:14:39.020 ERROR [src.node.docker_mananger] Max retries reached for container df75f7f3b88c. Exiting log stream.
2025-02-04 17:14:39.647 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:14:39.648 DEBUG [src.node.waku_node] Stopping container with id 300f2b93c793
2025-02-04 17:14:40.460 ERROR [src.node.docker_mananger] Max retries reached for container 1af812e2465c. Exiting log stream.
2025-02-04 17:14:40.652 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:14:40.653 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:14:40.661 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:14:40.667 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:14:40.673 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
