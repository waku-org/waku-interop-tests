[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2025-02-04_17-10-11__6cb5f4e4-4952-41eb-bd19-84d537a3d026
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-04_17-10-11__6cb5f4e4-4952-41eb-bd19-84d537a3d026__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.138.233
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['56004', '56005', '56006', '56007', '56008']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 56004:56004 -p 56005:56005 -p 56006:56006 -p 56007:56007 -p 56008:56008 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56006 --rest-port=56004 --tcp-port=56005 --discv5-udp-port=56007 --rest-address=0.0.0.0 --nat=extip:172.18.138.233 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=86dd01ef0dcefdeef1a9e867d7abceae81dce2a8ef51e61a85d65ce9baeabbe5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56008 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.138.233 waku 0c5ecd2c7539008438267bcc778213500f0ad25e389c2be5503193519a6c49e0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0c5ecd2c7539. Setting up logs at ./log/docker/receiving_node1_2025-02-04_17-10-11__6cb5f4e4-4952-41eb-bd19-84d537a3d026__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 56004
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 8b72583ee6fe. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56004/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56004/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.138.233/tcp/56005/p2p/16Uiu2HAmQgJNaAcpopHUyAyfuFRuikzo4oTGrgDsX6XBPQAkkkng","/ip4/172.18.138.233/tcp/56006/ws/p2p/16Uiu2HAmQgJNaAcpopHUyAyfuFRuikzo4oTGrgDsX6XBPQAkkkng"],"enrUri":"enr:-L24QECACuBGfmXVN79DzAfKq5HsMG-NKViUImifI1csg_HMRM9lpiSJs70dqTH7M8a7lhWUBctIsBCO1DvI30SvQucCgmlkgnY0gmlwhKwSiumKbXVsdGlhZGRyc5YACASsEorpBtrFAAoErBKK6Qbaxt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDsqIzm-WeTp1dmDAWv1oxbmK0ez-jwoXYZcnADaVTqS2DdGNwgtrFg3VkcILax4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-04_17-10-11__6cb5f4e4-4952-41eb-bd19-84d537a3d026__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.58.181
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['35576', '35577', '35578', '35579', '35580']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 35576:35576 -p 35577:35577 -p 35578:35578 -p 35579:35579 -p 35580:35580 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35578 --rest-port=35576 --tcp-port=35577 --discv5-udp-port=35579 --rest-address=0.0.0.0 --nat=extip:172.18.58.181 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b30f9920eb75556fabf144c3abda72efbebfaa7eed2da513c6dd2bcc70f3359c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35580 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.58.181 waku 129accc9ff1ee86a7c5632339586f250a530dc6c8d9a85faac304d6721bbd89a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 129accc9ff1e. Setting up logs at ./log/docker/receiving_node2_2025-02-04_17-10-11__6cb5f4e4-4952-41eb-bd19-84d537a3d026__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 35576
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35576/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35576/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.58.181/tcp/35577/p2p/16Uiu2HAm52yJ2q51H4BDTdbH9N5wjXnBue6rKBsZGPgxUTQ6wzoZ","/ip4/172.18.58.181/tcp/35578/ws/p2p/16Uiu2HAm52yJ2q51H4BDTdbH9N5wjXnBue6rKBsZGPgxUTQ6wzoZ"],"enrUri":"enr:-L24QObn9SEatu-GFI5DXcSuWetE2j9wGMoPRYECH3wnN62bHjCYLvh8VL3uRcEGOAaS6WbLE_GY9HzyA5iQwkG62h8CgmlkgnY0gmlwhKwSOrWKbXVsdGlhZGRyc5YACASsEjq1Bor5AAoErBI6tQaK-t0DgnJzhQADAQAAiXNlY3AyNTZrMaECjsQWkvfil0Moe6RDTRahq4g3VOoeNS2FrbGUMTyLKbCDdGNwgor5g3VkcIKK-4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35576/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.138.233/tcp/56005/p2p/16Uiu2HAmQgJNaAcpopHUyAyfuFRuikzo4oTGrgDsX6XBPQAkkkng"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-04_17-10-11__6cb5f4e4-4952-41eb-bd19-84d537a3d026__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.76.109
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['30397', '30398', '30399', '30400', '30401']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 30397:30397 -p 30398:30398 -p 30399:30399 -p 30400:30400 -p 30401:30401 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30399 --rest-port=30397 --tcp-port=30398 --discv5-udp-port=30400 --rest-address=0.0.0.0 --nat=extip:172.18.76.109 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fbe848aa6eab6db5c41d73ab4a92bf8dd186ec33f6dbdbe5eedcfd8836a6cfc0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30401 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QECACuBGfmXVN79DzAfKq5HsMG-NKViUImifI1csg_HMRM9lpiSJs70dqTH7M8a7lhWUBctIsBCO1DvI30SvQucCgmlkgnY0gmlwhKwSiumKbXVsdGlhZGRyc5YACASsEorpBtrFAAoErBKK6Qbaxt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDsqIzm-WeTp1dmDAWv1oxbmK0ez-jwoXYZcnADaVTqS2DdGNwgtrFg3VkcILax4V3YWt1Mgk --lightpushnode=/ip4/172.18.138.233/tcp/56005/p2p/16Uiu2HAmQgJNaAcpopHUyAyfuFRuikzo4oTGrgDsX6XBPQAkkkng --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.76.109 waku 7b8f24690a1ee687d57869c67f190d56e4887b40d1d234a98826255d00d458a7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7b8f24690a1e. Setting up logs at ./log/docker/lightpush_node1_2025-02-04_17-10-11__6cb5f4e4-4952-41eb-bd19-84d537a3d026__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 30397
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30397/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30397/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.76.109/tcp/30398/p2p/16Uiu2HAmDhgG9BxL42MjR6Zwtbh3JipkRDcWkd3XaoF2ez6B6AVQ","/ip4/172.18.76.109/tcp/30399/ws/p2p/16Uiu2HAmDhgG9BxL42MjR6Zwtbh3JipkRDcWkd3XaoF2ez6B6AVQ"],"enrUri":"enr:-L24QFpDwOWplL8jbtrVS8NzBrxZt3q0eHfVh3rOWhvawi_sPfn-AMHMQnNBfke3EbIg5rIeDZUrud6FBhiRaPty8YwCgmlkgnY0gmlwhKwSTG2KbXVsdGlhZGRyc5YACASsEkxtBna-AAoErBJMbQZ2v90DgnJzhQADAQAAiXNlY3AyNTZrMaEDD4v58NxBlOs65HPMXSSPoTV9eHdDlwz4OzTUuVKk4_uDdGNwgna-g3VkcIJ2wIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30397/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.138.233/tcp/56005/p2p/16Uiu2HAmQgJNaAcpopHUyAyfuFRuikzo4oTGrgDsX6XBPQAkkkng"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30397/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.58.181/tcp/35577/p2p/16Uiu2HAm52yJ2q51H4BDTdbH9N5wjXnBue6rKBsZGPgxUTQ6wzoZ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56004/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35576/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30397/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738689015094096896, "extraField": "extraValue"}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:30397/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0c5ecd2c7539
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 129accc9ff1e
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0c5ecd2c7539. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 7b8f24690a1e
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 129accc9ff1e. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.