2025-02-04 17:10:31.520 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:10:31.521 DEBUG [tests.conftest] Running test: test_light_push_with_payload_of_1_MB with id: 2025-02-04_17-10-31__020d0e2e-7ea2-46f9-ba8e-616512f021b8
2025-02-04 17:10:31.521 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:10:31.521 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-04 17:10:31.528 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:10:31.528 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-04_17-10-31__020d0e2e-7ea2-46f9-ba8e-616512f021b8__wakuorg_nwaku:latest.log
2025-02-04 17:10:31.528 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:10:31.528 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:10:31.530 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:10:31.530 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.106.172
2025-02-04 17:10:31.530 DEBUG [src.node.docker_mananger] Generated ports ['27004', '27005', '27006', '27007', '27008']
2025-02-04 17:10:31.530 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:10:31.530 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:10:31.530 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:10:31.531 DEBUG [src.node.docker_mananger] docker run -i -t -p 27004:27004 -p 27005:27005 -p 27006:27006 -p 27007:27007 -p 27008:27008 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27006 --rest-port=27004 --tcp-port=27005 --discv5-udp-port=27007 --rest-address=0.0.0.0 --nat=extip:172.18.106.172 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f8adbb63ea74ac5a7bb9c40b01dd1f7b3bddbe54dabe7b2c1d448eacaee7cfcc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27008 --metrics-logging=true --lightpush=true --relay=true
2025-02-04 17:10:31.760 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.106.172 waku d46257f8eca2b5a5d5f2408430274d37948f476f9ffb8a9f3fe7644cace4b93f
2025-02-04 17:10:31.808 DEBUG [src.node.docker_mananger] Container started with ID d46257f8eca2. Setting up logs at ./log/docker/receiving_node1_2025-02-04_17-10-31__020d0e2e-7ea2-46f9-ba8e-616512f021b8__wakuorg_nwaku:latest.log
2025-02-04 17:10:31.809 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27004
2025-02-04 17:10:31.809 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:10:32.265 ERROR [src.node.docker_mananger] Max retries reached for container e1000cec1021. Exiting log stream.
2025-02-04 17:10:32.809 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27004/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:32.812 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:10:32.812 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:10:32.813 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27004/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:32.815 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.106.172/tcp/27005/p2p/16Uiu2HAm3knKhMDin6wAeyMXtcsuKWY1Qk9SV5YmycWw7NsEkkzX","/ip4/172.18.106.172/tcp/27006/ws/p2p/16Uiu2HAm3knKhMDin6wAeyMXtcsuKWY1Qk9SV5YmycWw7NsEkkzX"],"enrUri":"enr:-L24QMf51PIZa8Nxa-12gblS9-Pg5jNq0Dy3RUbjOgwludLcERpAPffUnj5A_3TjQJ_fK1RcpxNy6L7XHQC1x3AQfa0CgmlkgnY0gmlwhKwSaqyKbXVsdGlhZGRyc5YACASsEmqsBml9AAoErBJqrAZpft0DgnJzhQADAQAAiXNlY3AyNTZrMaECe8Kz-IcZOAV6-EY13TexSTIEKT97Tmtjn3rHmoqRwByDdGNwgml9g3VkcIJpf4V3YWt1Mgk"}'
2025-02-04 17:10:32.815 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:10:32.821 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:10:32.822 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-04_17-10-31__020d0e2e-7ea2-46f9-ba8e-616512f021b8__wakuorg_nwaku:latest.log
2025-02-04 17:10:32.822 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:10:32.822 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:10:32.823 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:10:32.823 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.44.61
2025-02-04 17:10:32.823 DEBUG [src.node.docker_mananger] Generated ports ['44110', '44111', '44112', '44113', '44114']
2025-02-04 17:10:32.824 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:10:32.824 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:10:32.824 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:10:32.824 DEBUG [src.node.docker_mananger] docker run -i -t -p 44110:44110 -p 44111:44111 -p 44112:44112 -p 44113:44113 -p 44114:44114 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44112 --rest-port=44110 --tcp-port=44111 --discv5-udp-port=44113 --rest-address=0.0.0.0 --nat=extip:172.18.44.61 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=db812a4e41f37e6128be9dbfdfdecda0fd6605fae7fa8473c215ea5c02fece7c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44114 --metrics-logging=true --lightpush=false --relay=true
2025-02-04 17:10:33.048 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.44.61 waku 74d59a0def1001ddd6686cfa2f27dd38bd5d6c6523005670b5c46af6374e6c3b
2025-02-04 17:10:33.100 DEBUG [src.node.docker_mananger] Container started with ID 74d59a0def10. Setting up logs at ./log/docker/receiving_node2_2025-02-04_17-10-31__020d0e2e-7ea2-46f9-ba8e-616512f021b8__wakuorg_nwaku:latest.log
2025-02-04 17:10:33.100 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44110
2025-02-04 17:10:33.101 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:10:34.101 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44110/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:34.104 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:10:34.104 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:10:34.104 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44110/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:34.107 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.44.61/tcp/44111/p2p/16Uiu2HAkugjLuQQxGfNJFf1nHPeGFkbtRGPHs6wr3omEz3TtBXap","/ip4/172.18.44.61/tcp/44112/ws/p2p/16Uiu2HAkugjLuQQxGfNJFf1nHPeGFkbtRGPHs6wr3omEz3TtBXap"],"enrUri":"enr:-L24QC3TNgjq57twIYI2QH-30S1T8kA3PutHsmmxLw2Mu0wKJPdantnQVOBmkLIV78HNg9XwI2nQxNMWlmdWUklnxLMCgmlkgnY0gmlwhKwSLD2KbXVsdGlhZGRyc5YACASsEiw9BqxPAAoErBIsPQasUN0DgnJzhQADAQAAiXNlY3AyNTZrMaECA9uEC3XchOunn9wE8kljBvDjOPHkzyL_9w0OINA2g-GDdGNwgqxPg3VkcIKsUYV3YWt1MgE"}'
2025-02-04 17:10:34.107 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:10:34.107 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44110/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.106.172/tcp/27005/p2p/16Uiu2HAm3knKhMDin6wAeyMXtcsuKWY1Qk9SV5YmycWw7NsEkkzX"]'
2025-02-04 17:10:34.148 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:34.157 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:10:34.157 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-04_17-10-31__020d0e2e-7ea2-46f9-ba8e-616512f021b8__wakuorg_nwaku:latest.log
2025-02-04 17:10:34.157 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:10:34.157 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:10:34.159 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:10:34.159 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.161.25
2025-02-04 17:10:34.159 DEBUG [src.node.docker_mananger] Generated ports ['40527', '40528', '40529', '40530', '40531']
2025-02-04 17:10:34.159 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:10:34.160 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:10:34.160 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:10:34.160 DEBUG [src.node.docker_mananger] docker run -i -t -p 40527:40527 -p 40528:40528 -p 40529:40529 -p 40530:40530 -p 40531:40531 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40529 --rest-port=40527 --tcp-port=40528 --discv5-udp-port=40530 --rest-address=0.0.0.0 --nat=extip:172.18.161.25 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5c4b4d75a9e4db19bf1d3d556c900d207fce6ceb2c03bb4cdf3f9c9ef313ee55 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40531 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMf51PIZa8Nxa-12gblS9-Pg5jNq0Dy3RUbjOgwludLcERpAPffUnj5A_3TjQJ_fK1RcpxNy6L7XHQC1x3AQfa0CgmlkgnY0gmlwhKwSaqyKbXVsdGlhZGRyc5YACASsEmqsBml9AAoErBJqrAZpft0DgnJzhQADAQAAiXNlY3AyNTZrMaECe8Kz-IcZOAV6-EY13TexSTIEKT97Tmtjn3rHmoqRwByDdGNwgml9g3VkcIJpf4V3YWt1Mgk --lightpushnode=/ip4/172.18.106.172/tcp/27005/p2p/16Uiu2HAm3knKhMDin6wAeyMXtcsuKWY1Qk9SV5YmycWw7NsEkkzX --lightpush=true --relay=false
2025-02-04 17:10:34.389 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.161.25 waku 54f9cbcd42166dd5bcb6d3835cb3538506cff99a3a78fb247b2b5e5bea8877ac
2025-02-04 17:10:34.436 DEBUG [src.node.docker_mananger] Container started with ID 54f9cbcd4216. Setting up logs at ./log/docker/lightpush_node1_2025-02-04_17-10-31__020d0e2e-7ea2-46f9-ba8e-616512f021b8__wakuorg_nwaku:latest.log
2025-02-04 17:10:34.437 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40527
2025-02-04 17:10:34.438 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:10:35.438 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40527/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:35.441 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:10:35.441 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:10:35.442 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40527/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:35.444 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.161.25/tcp/40528/p2p/16Uiu2HAmF6ut62oYEWoooU9BixFitXHaTeCPZvjMjedssAXeNagK","/ip4/172.18.161.25/tcp/40529/ws/p2p/16Uiu2HAmF6ut62oYEWoooU9BixFitXHaTeCPZvjMjedssAXeNagK"],"enrUri":"enr:-L24QGojuBV7bSDoRSmnJ_YVgWr9q6baFp_UCwCrJF-3xje3ccD3UTzdyl16J870Hpkx_ZzXgvTDuL9YoqJ43A9fsoECgmlkgnY0gmlwhKwSoRmKbXVsdGlhZGRyc5YACASsEqEZBp5QAAoErBKhGQaeUd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJFtr-P32-8AodM5qt1FbsN8-pOg8PoM629-NsLN2zySDdGNwgp5Qg3VkcIKeUoV3YWt1Mgg"}'
2025-02-04 17:10:35.444 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:10:35.444 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40527/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.106.172/tcp/27005/p2p/16Uiu2HAm3knKhMDin6wAeyMXtcsuKWY1Qk9SV5YmycWw7NsEkkzX"]'
2025-02-04 17:10:35.481 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:35.483 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40527/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.44.61/tcp/44111/p2p/16Uiu2HAkugjLuQQxGfNJFf1nHPeGFkbtRGPHs6wr3omEz3TtBXap"]'
2025-02-04 17:10:35.517 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:35.517 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27004/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:10:35.524 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:35.524 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44110/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:10:35.530 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:35.531 DEBUG [tests.light_push.test_publish] Running test with payload length of 1048576 bytes
2025-02-04 17:10:35.543 DEBUG [src.steps.light_push] Lightpushing message
2025-02-04 17:10:35.552 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-04 17:10:36.510 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:40527/lightpush/v1/message. Response content: b'Failed to request a message push: Message size exceeded maximum of 153600 bytes'
2025-02-04 17:10:36.513 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:10:36.514 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:10:36.514 DEBUG [src.node.waku_node] Stopping container with id d46257f8eca2
2025-02-04 17:10:37.326 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:10:37.327 DEBUG [src.node.waku_node] Stopping container with id 74d59a0def10
2025-02-04 17:10:38.140 ERROR [src.node.docker_mananger] Max retries reached for container d46257f8eca2. Exiting log stream.
2025-02-04 17:10:38.865 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:10:38.865 DEBUG [src.node.waku_node] Stopping container with id 54f9cbcd4216
2025-02-04 17:10:39.677 ERROR [src.node.docker_mananger] Max retries reached for container 74d59a0def10. Exiting log stream.
2025-02-04 17:10:40.144 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:10:40.145 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:10:40.156 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:10:40.166 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:10:40.268 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
