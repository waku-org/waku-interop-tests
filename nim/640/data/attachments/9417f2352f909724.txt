2025-02-04 17:13:16.155 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:13:16.156 DEBUG [tests.conftest] Running test: test_light_push_with_valid_timestamps with id: 2025-02-04_17-13-16__2985496c-7ee5-4515-8dc9-070569fdd8c4
2025-02-04 17:13:16.156 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:13:16.156 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-04 17:13:16.163 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:13:16.163 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-04_17-13-16__2985496c-7ee5-4515-8dc9-070569fdd8c4__wakuorg_nwaku:latest.log
2025-02-04 17:13:16.163 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:13:16.163 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:13:16.164 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:13:16.164 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.153.62
2025-02-04 17:13:16.165 DEBUG [src.node.docker_mananger] Generated ports ['17889', '17890', '17891', '17892', '17893']
2025-02-04 17:13:16.165 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:13:16.165 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:13:16.165 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:13:16.165 DEBUG [src.node.docker_mananger] docker run -i -t -p 17889:17889 -p 17890:17890 -p 17891:17891 -p 17892:17892 -p 17893:17893 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17891 --rest-port=17889 --tcp-port=17890 --discv5-udp-port=17892 --rest-address=0.0.0.0 --nat=extip:172.18.153.62 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d01c92169f43bbeffc4caaf1b5d827b2fe5adf4f49c2d04ace0120c6a3dc2929 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17893 --metrics-logging=true --lightpush=true --relay=true
2025-02-04 17:13:16.389 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.153.62 waku efd4c55e56413d545fe6a587fdff50646ade0a46c8b7a77bdc23c3b7c776f644
2025-02-04 17:13:16.439 DEBUG [src.node.docker_mananger] Container started with ID efd4c55e5641. Setting up logs at ./log/docker/receiving_node1_2025-02-04_17-13-16__2985496c-7ee5-4515-8dc9-070569fdd8c4__wakuorg_nwaku:latest.log
2025-02-04 17:13:16.440 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17889
2025-02-04 17:13:16.440 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:13:16.936 ERROR [src.node.docker_mananger] Max retries reached for container dbaabeb689ca. Exiting log stream.
2025-02-04 17:13:17.440 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17889/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:17.443 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:13:17.443 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:13:17.443 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17889/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:17.446 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.153.62/tcp/17890/p2p/16Uiu2HAkyAWnUPZe2H35PSoZDgaWRkcMQPa9MDcCBxn6QgjYyiZx","/ip4/172.18.153.62/tcp/17891/ws/p2p/16Uiu2HAkyAWnUPZe2H35PSoZDgaWRkcMQPa9MDcCBxn6QgjYyiZx"],"enrUri":"enr:-L24QOi3ig4uM3LpuO3WgTkhCDi2CaNfIepb5BADjNSvmCcAKYTt8H9rUUTMNsa2uFuUZI_P7Icsw4EEMo7r7tzh6aoCgmlkgnY0gmlwhKwSmT6KbXVsdGlhZGRyc5YACASsEpk-BkXiAAoErBKZPgZF490DgnJzhQADAQAAiXNlY3AyNTZrMaECN4yjd7YtV5h8NY16HX3WjNqPA4U5bBXJMjd6gHsDtGuDdGNwgkXig3VkcIJF5IV3YWt1Mgk"}'
2025-02-04 17:13:17.446 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:13:17.452 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:13:17.452 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-04_17-13-16__2985496c-7ee5-4515-8dc9-070569fdd8c4__wakuorg_nwaku:latest.log
2025-02-04 17:13:17.452 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:13:17.453 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:13:17.454 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:13:17.454 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.146.20
2025-02-04 17:13:17.454 DEBUG [src.node.docker_mananger] Generated ports ['63488', '63489', '63490', '63491', '63492']
2025-02-04 17:13:17.454 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:13:17.454 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:13:17.455 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:13:17.455 DEBUG [src.node.docker_mananger] docker run -i -t -p 63488:63488 -p 63489:63489 -p 63490:63490 -p 63491:63491 -p 63492:63492 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63490 --rest-port=63488 --tcp-port=63489 --discv5-udp-port=63491 --rest-address=0.0.0.0 --nat=extip:172.18.146.20 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eab45beef83f80acd94d8e46a8d0d3ee6f5ea2f4e7f54abd030ddb4dccb5fcce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63492 --metrics-logging=true --lightpush=false --relay=true
2025-02-04 17:13:17.687 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.146.20 waku ef78124563ed6833841b6abb90aca0c2d63f867b5005e943f0ee7d40144c70fb
2025-02-04 17:13:17.737 DEBUG [src.node.docker_mananger] Container started with ID ef78124563ed. Setting up logs at ./log/docker/receiving_node2_2025-02-04_17-13-16__2985496c-7ee5-4515-8dc9-070569fdd8c4__wakuorg_nwaku:latest.log
2025-02-04 17:13:17.737 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63488
2025-02-04 17:13:17.737 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:13:18.738 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63488/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:18.740 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:13:18.741 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:13:18.741 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63488/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:18.743 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.146.20/tcp/63489/p2p/16Uiu2HAkxsVtNWwih2T4MRJ6xN3Uei1GYPY21DifbMEBkY2GyFaD","/ip4/172.18.146.20/tcp/63490/ws/p2p/16Uiu2HAkxsVtNWwih2T4MRJ6xN3Uei1GYPY21DifbMEBkY2GyFaD"],"enrUri":"enr:-L24QJwMsIzsJNKdKreXrEyuzxVIlqh04myqoNQJ61tKikXDIg2-h6MJCClSaGbObidVCieltQ0h2_j-MezC2vKR0P4CgmlkgnY0gmlwhKwSkhSKbXVsdGlhZGRyc5YACASsEpIUBvgBAAoErBKSFAb4At0DgnJzhQADAQAAiXNlY3AyNTZrMaECMzC_w-X8DNWWfoEZpIgY1X7r8w6N_rn0jz0m9zedsw6DdGNwgvgBg3VkcIL4A4V3YWt1MgE"}'
2025-02-04 17:13:18.743 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:13:18.743 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63488/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.153.62/tcp/17890/p2p/16Uiu2HAkyAWnUPZe2H35PSoZDgaWRkcMQPa9MDcCBxn6QgjYyiZx"]'
2025-02-04 17:13:18.782 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:18.792 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:13:18.792 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-04_17-13-16__2985496c-7ee5-4515-8dc9-070569fdd8c4__wakuorg_nwaku:latest.log
2025-02-04 17:13:18.792 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:13:18.793 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:13:18.794 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:13:18.794 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.63.193
2025-02-04 17:13:18.794 DEBUG [src.node.docker_mananger] Generated ports ['21648', '21649', '21650', '21651', '21652']
2025-02-04 17:13:18.794 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:13:18.795 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:13:18.795 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:13:18.795 DEBUG [src.node.docker_mananger] docker run -i -t -p 21648:21648 -p 21649:21649 -p 21650:21650 -p 21651:21651 -p 21652:21652 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21650 --rest-port=21648 --tcp-port=21649 --discv5-udp-port=21651 --rest-address=0.0.0.0 --nat=extip:172.18.63.193 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6a3d1caa2ec01b1bd0c67c4e12c11fd7b57d6e9ad9fc70ec104a5febeec6f71d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21652 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QOi3ig4uM3LpuO3WgTkhCDi2CaNfIepb5BADjNSvmCcAKYTt8H9rUUTMNsa2uFuUZI_P7Icsw4EEMo7r7tzh6aoCgmlkgnY0gmlwhKwSmT6KbXVsdGlhZGRyc5YACASsEpk-BkXiAAoErBKZPgZF490DgnJzhQADAQAAiXNlY3AyNTZrMaECN4yjd7YtV5h8NY16HX3WjNqPA4U5bBXJMjd6gHsDtGuDdGNwgkXig3VkcIJF5IV3YWt1Mgk --lightpushnode=/ip4/172.18.153.62/tcp/17890/p2p/16Uiu2HAkyAWnUPZe2H35PSoZDgaWRkcMQPa9MDcCBxn6QgjYyiZx --lightpush=true --relay=false
2025-02-04 17:13:19.031 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.63.193 waku 42e1460edf7adb94b953b702669c8d319646d9401f28c4565c4ba686e4f7da80
2025-02-04 17:13:19.080 DEBUG [src.node.docker_mananger] Container started with ID 42e1460edf7a. Setting up logs at ./log/docker/lightpush_node1_2025-02-04_17-13-16__2985496c-7ee5-4515-8dc9-070569fdd8c4__wakuorg_nwaku:latest.log
2025-02-04 17:13:19.080 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 21648
2025-02-04 17:13:19.081 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:13:20.082 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21648/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:20.084 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:13:20.085 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:13:20.085 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21648/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:20.087 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.63.193/tcp/21649/p2p/16Uiu2HAm8HVK77QS4sWH8jXygwG5jRnBDWqPeW3viB7WzfMrehk1","/ip4/172.18.63.193/tcp/21650/ws/p2p/16Uiu2HAm8HVK77QS4sWH8jXygwG5jRnBDWqPeW3viB7WzfMrehk1"],"enrUri":"enr:-L24QMXtymBzX3yNy46mWHNMpj9gNfHTckREuLhFMExbvI-BeWieTEgt1jB6pXasqTJgwjUg791EQ6psn7XxZvL1jRMCgmlkgnY0gmlwhKwSP8GKbXVsdGlhZGRyc5YACASsEj_BBlSRAAoErBI_wQZUkt0DgnJzhQADAQAAiXNlY3AyNTZrMaECvw846oKHHp_s_jtspkjCPaD65PbGI-Fa4RLnzYpnbLaDdGNwglSRg3VkcIJUk4V3YWt1Mgg"}'
2025-02-04 17:13:20.087 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:13:20.087 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21648/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.153.62/tcp/17890/p2p/16Uiu2HAkyAWnUPZe2H35PSoZDgaWRkcMQPa9MDcCBxn6QgjYyiZx"]'
2025-02-04 17:13:20.125 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:20.127 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21648/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.146.20/tcp/63489/p2p/16Uiu2HAkxsVtNWwih2T4MRJ6xN3Uei1GYPY21DifbMEBkY2GyFaD"]'
2025-02-04 17:13:20.153 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:20.156 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17889/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:13:20.163 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:20.164 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63488/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:13:20.169 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:20.173 DEBUG [tests.light_push.test_publish] Running test with timestamp Now
2025-02-04 17:13:20.173 DEBUG [src.steps.light_push] Lightpushing message
2025-02-04 17:13:20.174 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21648/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738688896564411648}}'
2025-02-04 17:13:20.183 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:20.183 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:13:20.284 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:13:20.284 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17889/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:20.286 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738688896564411648,"ephemeral":false}]'
2025-02-04 17:13:20.288 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:13:20.288 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63488/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:20.290 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738688896564411648,"ephemeral":false}]'
2025-02-04 17:13:20.291 DEBUG [tests.light_push.test_publish] Running test with timestamp Far future
2025-02-04 17:13:20.292 DEBUG [src.steps.light_push] Lightpushing message
2025-02-04 17:13:20.292 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21648/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 2054048896564378112}}'
2025-02-04 17:13:20.301 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:20.301 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:13:20.402 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:13:20.402 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17889/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:20.405 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":2054048896564378112,"ephemeral":false}]'
2025-02-04 17:13:20.406 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:13:20.407 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63488/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:20.409 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":2054048896564378112,"ephemeral":false}]'
2025-02-04 17:13:20.410 DEBUG [tests.light_push.test_publish] Running test with timestamp Recent past
2025-02-04 17:13:20.410 DEBUG [src.steps.light_push] Lightpushing message
2025-02-04 17:13:20.410 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21648/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738685296564378112}}'
2025-02-04 17:13:20.420 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:20.420 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:13:20.520 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:13:20.521 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17889/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:20.523 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738685296564378112,"ephemeral":false}]'
2025-02-04 17:13:20.524 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:13:20.524 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63488/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:20.527 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738685296564378112,"ephemeral":false}]'
2025-02-04 17:13:20.528 DEBUG [tests.light_push.test_publish] Running test with timestamp Near future
2025-02-04 17:13:20.528 DEBUG [src.steps.light_push] Lightpushing message
2025-02-04 17:13:20.528 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21648/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738692496564378112}}'
2025-02-04 17:13:20.538 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:20.538 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:13:20.639 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:13:20.639 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17889/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:20.641 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738692496564378112,"ephemeral":false}]'
2025-02-04 17:13:20.642 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:13:20.643 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63488/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:20.644 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738692496564378112,"ephemeral":false}]'
2025-02-04 17:13:20.646 DEBUG [tests.light_push.test_publish] Running test with timestamp Positive number
2025-02-04 17:13:20.646 DEBUG [src.steps.light_push] Lightpushing message
2025-02-04 17:13:20.646 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21648/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1}}'
2025-02-04 17:13:20.656 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:20.657 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:13:20.757 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:13:20.757 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17889/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:20.760 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1,"ephemeral":false}]'
2025-02-04 17:13:20.761 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:13:20.761 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63488/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:20.763 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1,"ephemeral":false}]'
2025-02-04 17:13:20.765 DEBUG [tests.light_push.test_publish] Running test with timestamp Negative number
2025-02-04 17:13:20.765 DEBUG [src.steps.light_push] Lightpushing message
2025-02-04 17:13:20.765 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21648/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": -1}}'
2025-02-04 17:13:20.774 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:20.774 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:13:20.875 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:13:20.875 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17889/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:20.877 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":-1,"ephemeral":false}]'
2025-02-04 17:13:20.878 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:13:20.878 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63488/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:20.880 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":-1,"ephemeral":false}]'
2025-02-04 17:13:20.882 DEBUG [tests.light_push.test_publish] Running test with timestamp DST change
2025-02-04 17:13:20.882 DEBUG [src.steps.light_push] Lightpushing message
2025-02-04 17:13:20.882 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21648/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1583632800000000000}}'
2025-02-04 17:13:20.892 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:13:20.892 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:13:20.993 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:13:20.993 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17889/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:20.995 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1583632800000000000,"ephemeral":false}]'
2025-02-04 17:13:20.997 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:13:20.997 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63488/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:13:20.999 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1583632800000000000,"ephemeral":false}]'
2025-02-04 17:13:21.002 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:13:21.003 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:13:21.003 DEBUG [src.node.waku_node] Stopping container with id efd4c55e5641
2025-02-04 17:13:21.943 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:13:21.944 DEBUG [src.node.waku_node] Stopping container with id ef78124563ed
2025-02-04 17:13:22.755 ERROR [src.node.docker_mananger] Max retries reached for container efd4c55e5641. Exiting log stream.
2025-02-04 17:13:23.450 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:13:23.450 DEBUG [src.node.waku_node] Stopping container with id 42e1460edf7a
2025-02-04 17:13:24.262 ERROR [src.node.docker_mananger] Max retries reached for container ef78124563ed. Exiting log stream.
2025-02-04 17:13:24.957 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:13:24.958 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:13:24.967 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:13:24.976 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:13:24.983 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
