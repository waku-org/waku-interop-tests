2025-02-04 17:09:34.554 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:09:34.554 DEBUG [tests.conftest] Running test: test_light_push_with_missing_content_topic with id: 2025-02-04_17-09-34__ba9c883a-9ebe-4fd5-8890-94ebb991f32d
2025-02-04 17:09:34.554 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:09:34.554 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-04 17:09:34.561 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:09:34.561 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-04_17-09-34__ba9c883a-9ebe-4fd5-8890-94ebb991f32d__wakuorg_nwaku:latest.log
2025-02-04 17:09:34.562 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:09:34.562 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:09:34.563 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:09:34.563 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.109.150
2025-02-04 17:09:34.563 DEBUG [src.node.docker_mananger] Generated ports ['56497', '56498', '56499', '56500', '56501']
2025-02-04 17:09:34.563 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:09:34.564 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:09:34.564 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:09:34.564 DEBUG [src.node.docker_mananger] docker run -i -t -p 56497:56497 -p 56498:56498 -p 56499:56499 -p 56500:56500 -p 56501:56501 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56499 --rest-port=56497 --tcp-port=56498 --discv5-udp-port=56500 --rest-address=0.0.0.0 --nat=extip:172.18.109.150 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=618ce0eb521ee1a3f3d05bba8fa56c8aa3fee6d9c7fc5bcba6b239b81e4bb57d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56501 --metrics-logging=true --lightpush=true --relay=true
2025-02-04 17:09:34.803 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.109.150 waku 8ea9184ceaccfb80fb49f6f3cd5853f12a0a9db862ef43b837e6d0b3dab2b7ce
2025-02-04 17:09:34.850 DEBUG [src.node.docker_mananger] Container started with ID 8ea9184ceacc. Setting up logs at ./log/docker/receiving_node1_2025-02-04_17-09-34__ba9c883a-9ebe-4fd5-8890-94ebb991f32d__wakuorg_nwaku:latest.log
2025-02-04 17:09:34.850 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56497
2025-02-04 17:09:34.851 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:09:35.339 ERROR [src.node.docker_mananger] Max retries reached for container bfc3b6e05064. Exiting log stream.
2025-02-04 17:09:35.852 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56497/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:09:35.855 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:09:35.855 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:09:35.856 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56497/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:09:35.858 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.109.150/tcp/56498/p2p/16Uiu2HAm1k8StkY1EZBqZrLK4v1hkSWG3ReVgpLG1Xbsi2tvXhCQ","/ip4/172.18.109.150/tcp/56499/ws/p2p/16Uiu2HAm1k8StkY1EZBqZrLK4v1hkSWG3ReVgpLG1Xbsi2tvXhCQ"],"enrUri":"enr:-L24QHQDn0peThRqubrnHNkMBcDOzhGqaDHTow8OmCaHJl3xCnhkOeKAESBrtELHEhf2nOp4yf8BXVssauQ-W_-NhusCgmlkgnY0gmlwhKwSbZaKbXVsdGlhZGRyc5YACASsEm2WBtyyAAoErBJtlgbcs90DgnJzhQADAQAAiXNlY3AyNTZrMaECXeCAsh-XLt5pK3kW-4gbaWq8_taCPHNHdX2iLHvrRtWDdGNwgtyyg3VkcILctIV3YWt1Mgk"}'
2025-02-04 17:09:35.858 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:09:35.865 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:09:35.865 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-04_17-09-34__ba9c883a-9ebe-4fd5-8890-94ebb991f32d__wakuorg_nwaku:latest.log
2025-02-04 17:09:35.865 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:09:35.865 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:09:35.866 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:09:35.866 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.176.197
2025-02-04 17:09:35.867 DEBUG [src.node.docker_mananger] Generated ports ['40379', '40380', '40381', '40382', '40383']
2025-02-04 17:09:35.867 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:09:35.867 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:09:35.867 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:09:35.867 DEBUG [src.node.docker_mananger] docker run -i -t -p 40379:40379 -p 40380:40380 -p 40381:40381 -p 40382:40382 -p 40383:40383 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40381 --rest-port=40379 --tcp-port=40380 --discv5-udp-port=40382 --rest-address=0.0.0.0 --nat=extip:172.18.176.197 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b9ccb86c199ae44e5816ecc9fdda22ffc6a249f587bb76ada11eea2fa567c5eb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40383 --metrics-logging=true --lightpush=false --relay=true
2025-02-04 17:09:36.096 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.176.197 waku 7792f36ab2429a79adaeceaf9e2a1d56b4f136d8afde68d931360fd4e166ff7d
2025-02-04 17:09:36.147 DEBUG [src.node.docker_mananger] Container started with ID 7792f36ab242. Setting up logs at ./log/docker/receiving_node2_2025-02-04_17-09-34__ba9c883a-9ebe-4fd5-8890-94ebb991f32d__wakuorg_nwaku:latest.log
2025-02-04 17:09:36.147 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40379
2025-02-04 17:09:36.147 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:09:37.148 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40379/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:09:37.151 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:09:37.151 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:09:37.151 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40379/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:09:37.154 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.176.197/tcp/40380/p2p/16Uiu2HAmLYPr9vgqFSocgPjRHRqDHkbvjqQ99E3k1MXyie1HtzmT","/ip4/172.18.176.197/tcp/40381/ws/p2p/16Uiu2HAmLYPr9vgqFSocgPjRHRqDHkbvjqQ99E3k1MXyie1HtzmT"],"enrUri":"enr:-L24QFJktHPND1QcqHhT2T3TgOosAnCjooVS0V7eFvRenWTef-9UAbA17zWqm1oIcrhmIFwuLrvHoyYezj6AbrMn42oCgmlkgnY0gmlwhKwSsMWKbXVsdGlhZGRyc5YACASsErDFBp28AAoErBKwxQadvd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDdSz_p1KfoCGp5Cf7gP_wrLw0X8AdqB9CUcom7pfE986DdGNwgp28g3VkcIKdvoV3YWt1MgE"}'
2025-02-04 17:09:37.154 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:09:37.154 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40379/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.109.150/tcp/56498/p2p/16Uiu2HAm1k8StkY1EZBqZrLK4v1hkSWG3ReVgpLG1Xbsi2tvXhCQ"]'
2025-02-04 17:09:37.191 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:09:37.201 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:09:37.202 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-04_17-09-34__ba9c883a-9ebe-4fd5-8890-94ebb991f32d__wakuorg_nwaku:latest.log
2025-02-04 17:09:37.202 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:09:37.202 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:09:37.203 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:09:37.204 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.121.171
2025-02-04 17:09:37.204 DEBUG [src.node.docker_mananger] Generated ports ['10749', '10750', '10751', '10752', '10753']
2025-02-04 17:09:37.204 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:09:37.204 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:09:37.204 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:09:37.204 DEBUG [src.node.docker_mananger] docker run -i -t -p 10749:10749 -p 10750:10750 -p 10751:10751 -p 10752:10752 -p 10753:10753 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10751 --rest-port=10749 --tcp-port=10750 --discv5-udp-port=10752 --rest-address=0.0.0.0 --nat=extip:172.18.121.171 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cf2cd5aeba176bd34fbb0d5c83c2d2a9d46db9aacc55de1625fab0f0c63e5ea0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10753 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QHQDn0peThRqubrnHNkMBcDOzhGqaDHTow8OmCaHJl3xCnhkOeKAESBrtELHEhf2nOp4yf8BXVssauQ-W_-NhusCgmlkgnY0gmlwhKwSbZaKbXVsdGlhZGRyc5YACASsEm2WBtyyAAoErBJtlgbcs90DgnJzhQADAQAAiXNlY3AyNTZrMaECXeCAsh-XLt5pK3kW-4gbaWq8_taCPHNHdX2iLHvrRtWDdGNwgtyyg3VkcILctIV3YWt1Mgk --lightpushnode=/ip4/172.18.109.150/tcp/56498/p2p/16Uiu2HAm1k8StkY1EZBqZrLK4v1hkSWG3ReVgpLG1Xbsi2tvXhCQ --lightpush=true --relay=false
2025-02-04 17:09:37.439 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.121.171 waku 4ada56db28628db12a5a406a7b35abdab0ecea4def99a36e5f35e6a613a4ab45
2025-02-04 17:09:37.486 DEBUG [src.node.docker_mananger] Container started with ID 4ada56db2862. Setting up logs at ./log/docker/lightpush_node1_2025-02-04_17-09-34__ba9c883a-9ebe-4fd5-8890-94ebb991f32d__wakuorg_nwaku:latest.log
2025-02-04 17:09:37.487 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 10749
2025-02-04 17:09:37.487 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:09:38.487 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10749/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:09:38.490 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:09:38.491 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:09:38.491 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10749/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:09:38.493 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.121.171/tcp/10750/p2p/16Uiu2HAmA4CCrXmk3n83abt8Zh1ebT6wcvhQFihXzSouooVmc6EA","/ip4/172.18.121.171/tcp/10751/ws/p2p/16Uiu2HAmA4CCrXmk3n83abt8Zh1ebT6wcvhQFihXzSouooVmc6EA"],"enrUri":"enr:-L24QFilm0oZrFm0xGx5Aj_fY2Lkxa66fCg81oXTCtJzIePGZ9prVdkKBFZljQE1ZZL--UdMJAOYHUsijpC8vye8NLUCgmlkgnY0gmlwhKwSeauKbXVsdGlhZGRyc5YACASsEnmrBin-AAoErBJ5qwYp_90DgnJzhQADAQAAiXNlY3AyNTZrMaEC2V6zq0EC7-fWk5RbR67dN8MrjNld_m_fLA_WOe7iQueDdGNwgin-g3VkcIIqAIV3YWt1Mgg"}'
2025-02-04 17:09:38.493 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:09:38.493 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10749/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.109.150/tcp/56498/p2p/16Uiu2HAm1k8StkY1EZBqZrLK4v1hkSWG3ReVgpLG1Xbsi2tvXhCQ"]'
2025-02-04 17:09:38.529 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:09:38.529 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10749/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.176.197/tcp/40380/p2p/16Uiu2HAmLYPr9vgqFSocgPjRHRqDHkbvjqQ99E3k1MXyie1HtzmT"]'
2025-02-04 17:09:38.557 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:09:38.560 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56497/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:09:38.564 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:09:38.566 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40379/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:09:38.570 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:09:38.574 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10749/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "timestamp": 1738688978574738944}}'
2025-02-04 17:09:38.581 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10749/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-04 17:09:38.583 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:09:38.584 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:09:38.585 DEBUG [src.node.waku_node] Stopping container with id 8ea9184ceacc
2025-02-04 17:09:39.345 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:09:39.346 DEBUG [src.node.waku_node] Stopping container with id 7792f36ab242
2025-02-04 17:09:40.159 ERROR [src.node.docker_mananger] Max retries reached for container 8ea9184ceacc. Exiting log stream.
2025-02-04 17:09:40.859 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:09:40.859 DEBUG [src.node.waku_node] Stopping container with id 4ada56db2862
2025-02-04 17:09:41.672 ERROR [src.node.docker_mananger] Max retries reached for container 7792f36ab242. Exiting log stream.
2025-02-04 17:09:42.368 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:09:42.369 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:09:42.376 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:09:42.382 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:09:42.387 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
