2025-02-04 17:09:41.416 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:09:41.416 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2025-02-04_17-09-41__2f8a4ced-de87-4d25-b061-3c06a504e6f1
2025-02-04 17:09:41.416 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:09:41.417 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-04 17:09:41.417 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-04 17:09:41.425 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:09:41.425 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-04_17-09-41__2f8a4ced-de87-4d25-b061-3c06a504e6f1__wakuorg_nwaku:latest.log
2025-02-04 17:09:41.431 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:09:41.432 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-04_17-09-41__2f8a4ced-de87-4d25-b061-3c06a504e6f1__wakuorg_nwaku:latest.log
2025-02-04 17:09:41.438 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:09:41.438 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-04_17-09-41__2f8a4ced-de87-4d25-b061-3c06a504e6f1__wakuorg_nwaku:latest.log
2025-02-04 17:09:41.438 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-04 17:09:41.438 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-04 17:09:41.439 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:09:41.439 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:09:41.512 DEBUG [src.node.docker_mananger] Network waku created
2025-02-04 17:09:41.513 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.251.175
2025-02-04 17:09:41.513 DEBUG [src.node.docker_mananger] Generated ports ['19913', '19914', '19915', '19916', '19917']
2025-02-04 17:09:41.513 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:09:41.513 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:09:41.513 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:09:41.513 DEBUG [src.node.docker_mananger] docker run -i -t -p 19913:19913 -p 19914:19914 -p 19915:19915 -p 19916:19916 -p 19917:19917 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19915 --rest-port=19913 --tcp-port=19914 --discv5-udp-port=19916 --rest-address=0.0.0.0 --nat=extip:172.18.251.175 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=02c44dbc694201f3b2f0fffc90221a58bccdf7512fdd6090aebbe96db1aab6a7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19917 --metrics-logging=true --relay=true
2025-02-04 17:09:43.800 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.251.175 waku 02bcea3232d871a3856df072ae080461fa2bfd76ea4a584d6660ef0f2a7160f4
2025-02-04 17:09:43.851 DEBUG [src.node.docker_mananger] Container started with ID 02bcea3232d8. Setting up logs at ./log/docker/node1_2025-02-04_17-09-41__2f8a4ced-de87-4d25-b061-3c06a504e6f1__wakuorg_nwaku:latest.log
2025-02-04 17:09:43.852 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 19913
2025-02-04 17:09:43.853 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:09:44.853 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19913/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:09:44.856 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:09:44.856 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:09:44.857 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19913/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:09:44.859 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.251.175/tcp/19914/p2p/16Uiu2HAkvcb9cb9ed42g4YBfX1M8NQqXXxNeRBaqbgN2X1BJLQmP","/ip4/172.18.251.175/tcp/19915/ws/p2p/16Uiu2HAkvcb9cb9ed42g4YBfX1M8NQqXXxNeRBaqbgN2X1BJLQmP"],"enrUri":"enr:-L24QHUjNNCKng6H6N-fCk4FtnYc8IPt6l68wO7YIBP1KnZnJkVQTUbNTC7fHAkQBe9ylYcY1vjiXX2wd9nVoC2tRg8CgmlkgnY0gmlwhKwS-6-KbXVsdGlhZGRyc5YACASsEvuvBk3KAAoErBL7rwZNy90DgnJzhQADAQAAiXNlY3AyNTZrMaECEaedH7xRPA0HH6YrWhoTtGFSbnxb3yYUIYO9Yi49aZKDdGNwgk3Kg3VkcIJNzIV3YWt1MgE"}'
2025-02-04 17:09:44.859 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:09:44.859 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:09:44.859 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:09:44.861 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:09:44.861 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.43.27
2025-02-04 17:09:44.861 DEBUG [src.node.docker_mananger] Generated ports ['15236', '15237', '15238', '15239', '15240']
2025-02-04 17:09:44.861 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:09:44.861 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:09:44.862 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:09:44.862 DEBUG [src.node.docker_mananger] docker run -i -t -p 15236:15236 -p 15237:15237 -p 15238:15238 -p 15239:15239 -p 15240:15240 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15238 --rest-port=15236 --tcp-port=15237 --discv5-udp-port=15239 --rest-address=0.0.0.0 --nat=extip:172.18.43.27 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0ca0b4fa4abcabb3d574d2bd6383b4086a8d368d4ea11cd6b06f9dcfb662769c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15240 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QHUjNNCKng6H6N-fCk4FtnYc8IPt6l68wO7YIBP1KnZnJkVQTUbNTC7fHAkQBe9ylYcY1vjiXX2wd9nVoC2tRg8CgmlkgnY0gmlwhKwS-6-KbXVsdGlhZGRyc5YACASsEvuvBk3KAAoErBL7rwZNy90DgnJzhQADAQAAiXNlY3AyNTZrMaECEaedH7xRPA0HH6YrWhoTtGFSbnxb3yYUIYO9Yi49aZKDdGNwgk3Kg3VkcIJNzIV3YWt1MgE
2025-02-04 17:09:45.087 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.43.27 waku aca840f51f5e5cf7241ac0229da2051959c51078891938f7eeceecb5f53a16c1
2025-02-04 17:09:45.136 DEBUG [src.node.docker_mananger] Container started with ID aca840f51f5e. Setting up logs at ./log/docker/node2_2025-02-04_17-09-41__2f8a4ced-de87-4d25-b061-3c06a504e6f1__wakuorg_nwaku:latest.log
2025-02-04 17:09:45.137 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15236
2025-02-04 17:09:45.138 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:09:46.140 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15236/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:09:46.144 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:09:46.144 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:09:46.144 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15236/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:09:46.153 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.43.27/tcp/15237/p2p/16Uiu2HAm1LXMyfQhCKiEb26UqVqQRPsumnMM7UKNuWxMb3f3iRKy","/ip4/172.18.43.27/tcp/15238/ws/p2p/16Uiu2HAm1LXMyfQhCKiEb26UqVqQRPsumnMM7UKNuWxMb3f3iRKy"],"enrUri":"enr:-L24QKxA6wOvCp-gw2eG0XVM-Jsvu27vv_c7Q5E7GP5jU5S1NFPrxkDf6ej6GSRGv6YgrCaVnSc14ZXkRyXgFk9Yvh4CgmlkgnY0gmlwhKwSKxuKbXVsdGlhZGRyc5YACASsEisbBjuFAAoErBIrGwY7ht0DgnJzhQADAQAAiXNlY3AyNTZrMaECV9R5Qb-mSWNdHk_buW29MZfYUeq3LU0WGw0iw8UfX3SDdGNwgjuFg3VkcII7h4V3YWt1MgM"}'
2025-02-04 17:09:46.156 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:09:46.158 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:09:46.158 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:09:46.161 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:09:46.164 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.117.192
2025-02-04 17:09:46.164 DEBUG [src.node.docker_mananger] Generated ports ['39759', '39760', '39761', '39762', '39763']
2025-02-04 17:09:46.164 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:09:46.164 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:09:46.165 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:09:46.165 DEBUG [src.node.docker_mananger] docker run -i -t -p 39759:39759 -p 39760:39760 -p 39761:39761 -p 39762:39762 -p 39763:39763 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39761 --rest-port=39759 --tcp-port=39760 --discv5-udp-port=39762 --rest-address=0.0.0.0 --nat=extip:172.18.117.192 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fa716bbf3d76ed2bf0e15db9a9e8fe0dd3fddeed7ba4afffaeef0bb1967b645e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39763 --metrics-logging=true --relay=false --storenode=/ip4/172.18.43.27/tcp/15237/p2p/16Uiu2HAm1LXMyfQhCKiEb26UqVqQRPsumnMM7UKNuWxMb3f3iRKy --discv5-bootstrap-node=enr:-L24QKxA6wOvCp-gw2eG0XVM-Jsvu27vv_c7Q5E7GP5jU5S1NFPrxkDf6ej6GSRGv6YgrCaVnSc14ZXkRyXgFk9Yvh4CgmlkgnY0gmlwhKwSKxuKbXVsdGlhZGRyc5YACASsEisbBjuFAAoErBIrGwY7ht0DgnJzhQADAQAAiXNlY3AyNTZrMaECV9R5Qb-mSWNdHk_buW29MZfYUeq3LU0WGw0iw8UfX3SDdGNwgjuFg3VkcII7h4V3YWt1MgM
2025-02-04 17:09:46.412 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.117.192 waku 28caf1673cf8943fef31f59b5e3bd5859f418b3ad7f01bff751ae147c64f755e
2025-02-04 17:09:46.457 DEBUG [src.node.docker_mananger] Container started with ID 28caf1673cf8. Setting up logs at ./log/docker/node3_2025-02-04_17-09-41__2f8a4ced-de87-4d25-b061-3c06a504e6f1__wakuorg_nwaku:latest.log
2025-02-04 17:09:46.458 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 39759
2025-02-04 17:09:46.458 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:09:47.458 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39759/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:09:47.461 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:09:47.461 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:09:47.462 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39759/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:09:47.464 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.117.192/tcp/39760/p2p/16Uiu2HAmLudAtCyTS7BTN28sasganTMiJjngQAeKHCHKuuncdVzP","/ip4/172.18.117.192/tcp/39761/ws/p2p/16Uiu2HAmLudAtCyTS7BTN28sasganTMiJjngQAeKHCHKuuncdVzP"],"enrUri":"enr:-L24QMO6bZY-h0I5-NjFzr9CRQS8g-gT_Ui6caI9h9B_AGKxeLhAwU59dEzHarP4eL6Ka7fTlqu1K7otk0nKx6j4sGsCgmlkgnY0gmlwhKwSdcCKbXVsdGlhZGRyc5YACASsEnXABptQAAoErBJ1wAabUd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDep1CiQzQM0FHSzmTmNv6z5nRXbfyhuYyV8PRjT7mpeCDdGNwgptQg3VkcIKbUoV3YWt1MgA"}'
2025-02-04 17:09:47.464 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:09:47.464 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19913/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:09:47.468 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:09:47.469 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15236/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:09:47.474 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:09:47.475 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19913/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:09:47.478 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.43.27/tcp/15237/p2p/16Uiu2HAm1LXMyfQhCKiEb26UqVqQRPsumnMM7UKNuWxMb3f3iRKy","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-04 17:09:47.479 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15236/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:09:47.481 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.251.175/tcp/19914/p2p/16Uiu2HAkvcb9cb9ed42g4YBfX1M8NQqXXxNeRBaqbgN2X1BJLQmP","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
2025-02-04 17:09:47.481 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-04 17:10:17.482 DEBUG [src.steps.store] Relaying message
2025-02-04 17:10:17.482 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19913/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:10:17.488 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:17.489 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:10:17.689 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-04 17:10:17.690 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39759/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:17.735 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"50f47a4e62cea2e3a6bb","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x39b08dc0f65d8825aca8276b8fdaf3edcecf9790b5e242f2303b7876f4df8dbd"}]}'
2025-02-04 17:10:17.743 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:10:17.744 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:10:17.744 DEBUG [src.node.waku_node] Stopping container with id 02bcea3232d8
2025-02-04 17:10:18.621 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:10:18.622 DEBUG [src.node.waku_node] Stopping container with id aca840f51f5e
2025-02-04 17:10:19.435 ERROR [src.node.docker_mananger] Max retries reached for container 02bcea3232d8. Exiting log stream.
2025-02-04 17:10:20.100 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:10:20.100 DEBUG [src.node.waku_node] Stopping container with id 28caf1673cf8
2025-02-04 17:10:20.913 ERROR [src.node.docker_mananger] Max retries reached for container aca840f51f5e. Exiting log stream.
2025-02-04 17:10:21.183 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:10:21.184 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:10:21.193 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:10:21.204 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:10:21.208 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
