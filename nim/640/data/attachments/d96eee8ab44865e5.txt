2025-02-04 17:10:11.065 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:10:11.065 DEBUG [tests.conftest] Running test: test_light_push_with_extra_field with id: 2025-02-04_17-10-11__6cb5f4e4-4952-41eb-bd19-84d537a3d026
2025-02-04 17:10:11.066 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:10:11.066 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-04 17:10:11.072 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:10:11.073 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-04_17-10-11__6cb5f4e4-4952-41eb-bd19-84d537a3d026__wakuorg_nwaku:latest.log
2025-02-04 17:10:11.073 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:10:11.073 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:10:11.074 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:10:11.074 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.138.233
2025-02-04 17:10:11.074 DEBUG [src.node.docker_mananger] Generated ports ['56004', '56005', '56006', '56007', '56008']
2025-02-04 17:10:11.075 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:10:11.075 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:10:11.075 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:10:11.075 DEBUG [src.node.docker_mananger] docker run -i -t -p 56004:56004 -p 56005:56005 -p 56006:56006 -p 56007:56007 -p 56008:56008 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56006 --rest-port=56004 --tcp-port=56005 --discv5-udp-port=56007 --rest-address=0.0.0.0 --nat=extip:172.18.138.233 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=86dd01ef0dcefdeef1a9e867d7abceae81dce2a8ef51e61a85d65ce9baeabbe5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56008 --metrics-logging=true --lightpush=true --relay=true
2025-02-04 17:10:11.301 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.138.233 waku 0c5ecd2c7539008438267bcc778213500f0ad25e389c2be5503193519a6c49e0
2025-02-04 17:10:11.357 DEBUG [src.node.docker_mananger] Container started with ID 0c5ecd2c7539. Setting up logs at ./log/docker/receiving_node1_2025-02-04_17-10-11__6cb5f4e4-4952-41eb-bd19-84d537a3d026__wakuorg_nwaku:latest.log
2025-02-04 17:10:11.358 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56004
2025-02-04 17:10:11.358 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:10:11.856 ERROR [src.node.docker_mananger] Max retries reached for container 8b72583ee6fe. Exiting log stream.
2025-02-04 17:10:12.358 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56004/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:12.361 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:10:12.362 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:10:12.362 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56004/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:12.364 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.138.233/tcp/56005/p2p/16Uiu2HAmQgJNaAcpopHUyAyfuFRuikzo4oTGrgDsX6XBPQAkkkng","/ip4/172.18.138.233/tcp/56006/ws/p2p/16Uiu2HAmQgJNaAcpopHUyAyfuFRuikzo4oTGrgDsX6XBPQAkkkng"],"enrUri":"enr:-L24QECACuBGfmXVN79DzAfKq5HsMG-NKViUImifI1csg_HMRM9lpiSJs70dqTH7M8a7lhWUBctIsBCO1DvI30SvQucCgmlkgnY0gmlwhKwSiumKbXVsdGlhZGRyc5YACASsEorpBtrFAAoErBKK6Qbaxt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDsqIzm-WeTp1dmDAWv1oxbmK0ez-jwoXYZcnADaVTqS2DdGNwgtrFg3VkcILax4V3YWt1Mgk"}'
2025-02-04 17:10:12.364 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:10:12.371 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:10:12.371 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-04_17-10-11__6cb5f4e4-4952-41eb-bd19-84d537a3d026__wakuorg_nwaku:latest.log
2025-02-04 17:10:12.371 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:10:12.371 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:10:12.373 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:10:12.373 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.58.181
2025-02-04 17:10:12.373 DEBUG [src.node.docker_mananger] Generated ports ['35576', '35577', '35578', '35579', '35580']
2025-02-04 17:10:12.373 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:10:12.373 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:10:12.373 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:10:12.373 DEBUG [src.node.docker_mananger] docker run -i -t -p 35576:35576 -p 35577:35577 -p 35578:35578 -p 35579:35579 -p 35580:35580 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35578 --rest-port=35576 --tcp-port=35577 --discv5-udp-port=35579 --rest-address=0.0.0.0 --nat=extip:172.18.58.181 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b30f9920eb75556fabf144c3abda72efbebfaa7eed2da513c6dd2bcc70f3359c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35580 --metrics-logging=true --lightpush=false --relay=true
2025-02-04 17:10:12.602 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.58.181 waku 129accc9ff1ee86a7c5632339586f250a530dc6c8d9a85faac304d6721bbd89a
2025-02-04 17:10:12.649 DEBUG [src.node.docker_mananger] Container started with ID 129accc9ff1e. Setting up logs at ./log/docker/receiving_node2_2025-02-04_17-10-11__6cb5f4e4-4952-41eb-bd19-84d537a3d026__wakuorg_nwaku:latest.log
2025-02-04 17:10:12.650 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 35576
2025-02-04 17:10:12.650 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:10:13.650 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35576/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:13.653 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:10:13.653 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:10:13.654 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35576/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:13.656 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.58.181/tcp/35577/p2p/16Uiu2HAm52yJ2q51H4BDTdbH9N5wjXnBue6rKBsZGPgxUTQ6wzoZ","/ip4/172.18.58.181/tcp/35578/ws/p2p/16Uiu2HAm52yJ2q51H4BDTdbH9N5wjXnBue6rKBsZGPgxUTQ6wzoZ"],"enrUri":"enr:-L24QObn9SEatu-GFI5DXcSuWetE2j9wGMoPRYECH3wnN62bHjCYLvh8VL3uRcEGOAaS6WbLE_GY9HzyA5iQwkG62h8CgmlkgnY0gmlwhKwSOrWKbXVsdGlhZGRyc5YACASsEjq1Bor5AAoErBI6tQaK-t0DgnJzhQADAQAAiXNlY3AyNTZrMaECjsQWkvfil0Moe6RDTRahq4g3VOoeNS2FrbGUMTyLKbCDdGNwgor5g3VkcIKK-4V3YWt1MgE"}'
2025-02-04 17:10:13.656 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:10:13.656 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35576/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.138.233/tcp/56005/p2p/16Uiu2HAmQgJNaAcpopHUyAyfuFRuikzo4oTGrgDsX6XBPQAkkkng"]'
2025-02-04 17:10:13.695 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:13.704 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:10:13.704 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-04_17-10-11__6cb5f4e4-4952-41eb-bd19-84d537a3d026__wakuorg_nwaku:latest.log
2025-02-04 17:10:13.705 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:10:13.705 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:10:13.706 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:10:13.706 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.76.109
2025-02-04 17:10:13.706 DEBUG [src.node.docker_mananger] Generated ports ['30397', '30398', '30399', '30400', '30401']
2025-02-04 17:10:13.707 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:10:13.707 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:10:13.707 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:10:13.707 DEBUG [src.node.docker_mananger] docker run -i -t -p 30397:30397 -p 30398:30398 -p 30399:30399 -p 30400:30400 -p 30401:30401 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30399 --rest-port=30397 --tcp-port=30398 --discv5-udp-port=30400 --rest-address=0.0.0.0 --nat=extip:172.18.76.109 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fbe848aa6eab6db5c41d73ab4a92bf8dd186ec33f6dbdbe5eedcfd8836a6cfc0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30401 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QECACuBGfmXVN79DzAfKq5HsMG-NKViUImifI1csg_HMRM9lpiSJs70dqTH7M8a7lhWUBctIsBCO1DvI30SvQucCgmlkgnY0gmlwhKwSiumKbXVsdGlhZGRyc5YACASsEorpBtrFAAoErBKK6Qbaxt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDsqIzm-WeTp1dmDAWv1oxbmK0ez-jwoXYZcnADaVTqS2DdGNwgtrFg3VkcILax4V3YWt1Mgk --lightpushnode=/ip4/172.18.138.233/tcp/56005/p2p/16Uiu2HAmQgJNaAcpopHUyAyfuFRuikzo4oTGrgDsX6XBPQAkkkng --lightpush=true --relay=false
2025-02-04 17:10:13.939 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.76.109 waku 7b8f24690a1ee687d57869c67f190d56e4887b40d1d234a98826255d00d458a7
2025-02-04 17:10:13.994 DEBUG [src.node.docker_mananger] Container started with ID 7b8f24690a1e. Setting up logs at ./log/docker/lightpush_node1_2025-02-04_17-10-11__6cb5f4e4-4952-41eb-bd19-84d537a3d026__wakuorg_nwaku:latest.log
2025-02-04 17:10:13.995 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 30397
2025-02-04 17:10:13.995 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:10:14.995 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30397/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:14.998 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:10:14.999 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:10:14.999 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30397/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:15.001 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.76.109/tcp/30398/p2p/16Uiu2HAmDhgG9BxL42MjR6Zwtbh3JipkRDcWkd3XaoF2ez6B6AVQ","/ip4/172.18.76.109/tcp/30399/ws/p2p/16Uiu2HAmDhgG9BxL42MjR6Zwtbh3JipkRDcWkd3XaoF2ez6B6AVQ"],"enrUri":"enr:-L24QFpDwOWplL8jbtrVS8NzBrxZt3q0eHfVh3rOWhvawi_sPfn-AMHMQnNBfke3EbIg5rIeDZUrud6FBhiRaPty8YwCgmlkgnY0gmlwhKwSTG2KbXVsdGlhZGRyc5YACASsEkxtBna-AAoErBJMbQZ2v90DgnJzhQADAQAAiXNlY3AyNTZrMaEDD4v58NxBlOs65HPMXSSPoTV9eHdDlwz4OzTUuVKk4_uDdGNwgna-g3VkcIJ2wIV3YWt1Mgg"}'
2025-02-04 17:10:15.001 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:10:15.001 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30397/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.138.233/tcp/56005/p2p/16Uiu2HAmQgJNaAcpopHUyAyfuFRuikzo4oTGrgDsX6XBPQAkkkng"]'
2025-02-04 17:10:15.040 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:15.043 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30397/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.58.181/tcp/35577/p2p/16Uiu2HAm52yJ2q51H4BDTdbH9N5wjXnBue6rKBsZGPgxUTQ6wzoZ"]'
2025-02-04 17:10:15.073 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:15.077 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56004/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:10:15.083 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:15.083 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35576/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:10:15.091 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:15.094 DEBUG [src.steps.light_push] Lightpushing message
2025-02-04 17:10:15.095 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30397/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738689015094096896, "extraField": "extraValue"}}'
2025-02-04 17:10:15.097 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:30397/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-04 17:10:15.100 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:10:15.101 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:10:15.101 DEBUG [src.node.waku_node] Stopping container with id 0c5ecd2c7539
2025-02-04 17:10:15.822 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:10:15.823 DEBUG [src.node.waku_node] Stopping container with id 129accc9ff1e
2025-02-04 17:10:16.636 ERROR [src.node.docker_mananger] Max retries reached for container 0c5ecd2c7539. Exiting log stream.
2025-02-04 17:10:17.347 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:10:17.348 DEBUG [src.node.waku_node] Stopping container with id 7b8f24690a1e
2025-02-04 17:10:18.161 ERROR [src.node.docker_mananger] Max retries reached for container 129accc9ff1e. Exiting log stream.
2025-02-04 17:10:18.775 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:10:18.777 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:10:18.783 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:10:18.789 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:10:18.795 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
