2025-02-04 17:10:07.452 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:10:07.453 DEBUG [tests.conftest] Running test: test_filter_ping_on_subscribed_peer with id: 2025-02-04_17-10-07__186de20d-6e85-490b-ad8d-92877bb32727
2025-02-04 17:10:07.453 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:10:07.453 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-04 17:10:07.453 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-04 17:10:07.460 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:10:07.460 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-04_17-10-07__186de20d-6e85-490b-ad8d-92877bb32727__wakuorg_nwaku:latest.log
2025-02-04 17:10:07.460 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:10:07.460 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:10:07.462 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:10:07.462 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.65.27
2025-02-04 17:10:07.462 DEBUG [src.node.docker_mananger] Generated ports ['46663', '46664', '46665', '46666', '46667']
2025-02-04 17:10:07.462 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:10:07.462 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:10:07.462 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:10:07.462 DEBUG [src.node.docker_mananger] docker run -i -t -p 46663:46663 -p 46664:46664 -p 46665:46665 -p 46666:46666 -p 46667:46667 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46665 --rest-port=46663 --tcp-port=46664 --discv5-udp-port=46666 --rest-address=0.0.0.0 --nat=extip:172.18.65.27 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=71aa7cf4a86c53f3dca64a4b6c3dbbbfd40ecdfebab14e2acaceacb3edfbdbbc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46667 --metrics-logging=true --relay=true --filter=true
2025-02-04 17:10:07.689 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.65.27 waku c0f0dc7aabbb4dba3dfa7043f274903d857eeeac626d416d0058a172a1b61ffa
2025-02-04 17:10:07.740 DEBUG [src.node.docker_mananger] Container started with ID c0f0dc7aabbb. Setting up logs at ./log/docker/node1_2025-02-04_17-10-07__186de20d-6e85-490b-ad8d-92877bb32727__wakuorg_nwaku:latest.log
2025-02-04 17:10:07.740 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46663
2025-02-04 17:10:07.741 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:10:08.248 ERROR [src.node.docker_mananger] Max retries reached for container 80646a50812a. Exiting log stream.
2025-02-04 17:10:08.742 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46663/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:08.745 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:10:08.746 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:10:08.746 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46663/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:08.748 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.65.27/tcp/46664/p2p/16Uiu2HAkudT6BwU79FeQ4LBcQVZ1NsWs9BT8HvLuCKzDm3a5yhda","/ip4/172.18.65.27/tcp/46665/ws/p2p/16Uiu2HAkudT6BwU79FeQ4LBcQVZ1NsWs9BT8HvLuCKzDm3a5yhda"],"enrUri":"enr:-L24QKxuJOmLnjKxLyNVfRS3FY57q5WmJchFn33onjPRYZhKGtkrHjz3wqoOH54lt9YwrkIq9Ir0zrjbBx4LrLaR4hYCgmlkgnY0gmlwhKwSQRuKbXVsdGlhZGRyc5YACASsEkEbBrZIAAoErBJBGwa2Sd0DgnJzhQADAQAAiXNlY3AyNTZrMaECAwRlLxIRlku4_rTfxPHiVvtxgqFbydwARMwhllZmXQmDdGNwgrZIg3VkcIK2SoV3YWt1MgU"}'
2025-02-04 17:10:08.749 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:10:08.749 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-04 17:10:08.755 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:10:08.756 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-04_17-10-07__186de20d-6e85-490b-ad8d-92877bb32727__wakuorg_nwaku:latest.log
2025-02-04 17:10:08.756 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:10:08.756 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:10:08.758 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:10:08.758 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.53.135
2025-02-04 17:10:08.758 DEBUG [src.node.docker_mananger] Generated ports ['49542', '49543', '49544', '49545', '49546']
2025-02-04 17:10:08.758 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:10:08.758 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:10:08.758 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:10:08.759 DEBUG [src.node.docker_mananger] docker run -i -t -p 49542:49542 -p 49543:49543 -p 49544:49544 -p 49545:49545 -p 49546:49546 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49544 --rest-port=49542 --tcp-port=49543 --discv5-udp-port=49545 --rest-address=0.0.0.0 --nat=extip:172.18.53.135 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=51a002ebf9c466efb3ccc15aeee7ca762fcbf102d5d194ab766dbbcb240fd98d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49546 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QKxuJOmLnjKxLyNVfRS3FY57q5WmJchFn33onjPRYZhKGtkrHjz3wqoOH54lt9YwrkIq9Ir0zrjbBx4LrLaR4hYCgmlkgnY0gmlwhKwSQRuKbXVsdGlhZGRyc5YACASsEkEbBrZIAAoErBJBGwa2Sd0DgnJzhQADAQAAiXNlY3AyNTZrMaECAwRlLxIRlku4_rTfxPHiVvtxgqFbydwARMwhllZmXQmDdGNwgrZIg3VkcIK2SoV3YWt1MgU --filternode=/ip4/172.18.65.27/tcp/46664/p2p/16Uiu2HAkudT6BwU79FeQ4LBcQVZ1NsWs9BT8HvLuCKzDm3a5yhda
2025-02-04 17:10:08.991 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.53.135 waku 2b56f31f4b1797877c817accb605bc12380a9d29028f26c76398d318929aa325
2025-02-04 17:10:09.042 DEBUG [src.node.docker_mananger] Container started with ID 2b56f31f4b17. Setting up logs at ./log/docker/node2_2025-02-04_17-10-07__186de20d-6e85-490b-ad8d-92877bb32727__wakuorg_nwaku:latest.log
2025-02-04 17:10:09.043 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49542
2025-02-04 17:10:09.043 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:10:10.043 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49542/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:10.046 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:10:10.047 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:10:10.047 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49542/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:10.049 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.53.135/tcp/49543/p2p/16Uiu2HAkw2JQcvBnRMAxZZe6EjSrhxCmFEhrfkKYxShjnjL1Apeg","/ip4/172.18.53.135/tcp/49544/ws/p2p/16Uiu2HAkw2JQcvBnRMAxZZe6EjSrhxCmFEhrfkKYxShjnjL1Apeg"],"enrUri":"enr:-L24QF4q0oVDnt4-Td4w7VhbbIPApY3s58tLk8-GE7fPQRjiYg9FazmCi9qtW-obj6l6KKT2Kpyp4Fl5x-yab6ar0JsCgmlkgnY0gmlwhKwSNYeKbXVsdGlhZGRyc5YACASsEjWHBsGHAAoErBI1hwbBiN0DgnJzhQADAQAAiXNlY3AyNTZrMaECF7qfrnPaHhwE1MlwgiKM9WwDnyqTRVDaqMNZMQc9fW2DdGNwgsGHg3VkcILBiYV3YWt1MgA"}'
2025-02-04 17:10:10.049 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:10:10.050 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49542/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.65.27/tcp/46664/p2p/16Uiu2HAkudT6BwU79FeQ4LBcQVZ1NsWs9BT8HvLuCKzDm3a5yhda"]'
2025-02-04 17:10:10.086 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:10.087 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-04 17:10:10.087 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46663/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:10:10.109 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:10:10.110 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49542/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "ae9de0c7-affa-4433-910f-75f99ec9c331", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-04 17:10:10.124 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"ae9de0c7-affa-4433-910f-75f99ec9c331","statusDesc":"OK"}'
2025-02-04 17:10:10.125 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49542/filter/v2/subscriptions/251d394f-8105-48f9-ac6b-c667d02a03d4" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:10:10.134 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"251d394f-8105-48f9-ac6b-c667d02a03d4","statusDesc":"OK"}'
2025-02-04 17:10:10.136 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:10:10.137 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:10:10.137 DEBUG [src.node.waku_node] Stopping container with id c0f0dc7aabbb
2025-02-04 17:10:11.257 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:10:11.257 DEBUG [src.node.waku_node] Stopping container with id 2b56f31f4b17
2025-02-04 17:10:12.070 ERROR [src.node.docker_mananger] Max retries reached for container c0f0dc7aabbb. Exiting log stream.
2025-02-04 17:10:12.770 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:10:12.771 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:10:12.776 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:10:12.781 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
