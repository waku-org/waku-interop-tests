2025-02-04 17:15:27.247 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:15:27.248 DEBUG [tests.conftest] Running test: test_store_with_unknown_pubsub_topic_but_known_content_topic with id: 2025-02-04_17-15-27__4d14ad4f-6a8a-487c-a3f4-64f350dacdee
2025-02-04 17:15:27.248 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:15:27.248 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-04 17:15:27.248 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-04 17:15:27.255 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:15:27.256 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-04_17-15-27__4d14ad4f-6a8a-487c-a3f4-64f350dacdee__wakuorg_nwaku:latest.log
2025-02-04 17:15:27.256 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:15:27.256 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:15:27.257 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:15:27.257 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.12.98
2025-02-04 17:15:27.258 DEBUG [src.node.docker_mananger] Generated ports ['28089', '28090', '28091', '28092', '28093']
2025-02-04 17:15:27.258 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:15:27.258 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:15:27.258 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:15:27.258 DEBUG [src.node.docker_mananger] docker run -i -t -p 28089:28089 -p 28090:28090 -p 28091:28091 -p 28092:28092 -p 28093:28093 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28091 --rest-port=28089 --tcp-port=28090 --discv5-udp-port=28092 --rest-address=0.0.0.0 --nat=extip:172.18.12.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=22ca205e34dfbdce1c48c3a63afbec95a213454a4dcb5cd3caabf16c032c2feb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28093 --metrics-logging=true --store=true --relay=true
2025-02-04 17:15:27.495 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.12.98 waku 2cedf37444f3c1ab1e1bf8e19dbd3e32683901b7f44da78d41bb68b1da49e21c
2025-02-04 17:15:27.544 DEBUG [src.node.docker_mananger] Container started with ID 2cedf37444f3. Setting up logs at ./log/docker/publishing_node1_2025-02-04_17-15-27__4d14ad4f-6a8a-487c-a3f4-64f350dacdee__wakuorg_nwaku:latest.log
2025-02-04 17:15:27.546 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28089
2025-02-04 17:15:27.547 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:15:28.050 ERROR [src.node.docker_mananger] Max retries reached for container e0140bc60bfc. Exiting log stream.
2025-02-04 17:15:28.547 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28089/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:15:28.550 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:15:28.551 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:15:28.551 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28089/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:15:28.554 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.12.98/tcp/28090/p2p/16Uiu2HAmBycuQv3SE57c8EAbonJuYaNTVkK7VzHXTfxb7K7i1uDp","/ip4/172.18.12.98/tcp/28091/ws/p2p/16Uiu2HAmBycuQv3SE57c8EAbonJuYaNTVkK7VzHXTfxb7K7i1uDp"],"enrUri":"enr:-L24QKZ-msopTtKlcwj8MeO1jz_A-7iuEL6HJ63tSaMGzo_yK0gUltcin_3lBv-lqUCxLRmu-bns13L4PhqsW1PQPYYCgmlkgnY0gmlwhKwSDGKKbXVsdGlhZGRyc5YACASsEgxiBm26AAoErBIMYgZtu90DgnJzhQADAQAAiXNlY3AyNTZrMaEC9eoZZZNlyYqr4lC3Bl_98M-baDqJoPrTHdKc9UdmdweDdGNwgm26g3VkcIJtvIV3YWt1MgM"}'
2025-02-04 17:15:28.554 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:15:28.561 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:15:28.561 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-04_17-15-27__4d14ad4f-6a8a-487c-a3f4-64f350dacdee__wakuorg_nwaku:latest.log
2025-02-04 17:15:28.562 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:15:28.562 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:15:28.563 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:15:28.563 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.127.248
2025-02-04 17:15:28.564 DEBUG [src.node.docker_mananger] Generated ports ['28528', '28529', '28530', '28531', '28532']
2025-02-04 17:15:28.564 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:15:28.564 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:15:28.564 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:15:28.564 DEBUG [src.node.docker_mananger] docker run -i -t -p 28528:28528 -p 28529:28529 -p 28530:28530 -p 28531:28531 -p 28532:28532 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28530 --rest-port=28528 --tcp-port=28529 --discv5-udp-port=28531 --rest-address=0.0.0.0 --nat=extip:172.18.127.248 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4eaa38b8ab6136ddd77b3302b195a7c7f30f6137e85ee4eaae6ddbf21b87c9cb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28532 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QKZ-msopTtKlcwj8MeO1jz_A-7iuEL6HJ63tSaMGzo_yK0gUltcin_3lBv-lqUCxLRmu-bns13L4PhqsW1PQPYYCgmlkgnY0gmlwhKwSDGKKbXVsdGlhZGRyc5YACASsEgxiBm26AAoErBIMYgZtu90DgnJzhQADAQAAiXNlY3AyNTZrMaEC9eoZZZNlyYqr4lC3Bl_98M-baDqJoPrTHdKc9UdmdweDdGNwgm26g3VkcIJtvIV3YWt1MgM --storenode=/ip4/172.18.12.98/tcp/28090/p2p/16Uiu2HAmBycuQv3SE57c8EAbonJuYaNTVkK7VzHXTfxb7K7i1uDp --store=true --relay=true
2025-02-04 17:15:28.805 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.127.248 waku 555dc1eef50206768a5bb1d61b7cd861b2422c1c511cc9230de7f1937cfeaff1
2025-02-04 17:15:28.862 DEBUG [src.node.docker_mananger] Container started with ID 555dc1eef502. Setting up logs at ./log/docker/store_node1_2025-02-04_17-15-27__4d14ad4f-6a8a-487c-a3f4-64f350dacdee__wakuorg_nwaku:latest.log
2025-02-04 17:15:28.864 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28528
2025-02-04 17:15:28.864 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:15:29.865 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28528/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:15:29.868 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:15:29.868 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:15:29.868 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28528/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:15:29.871 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.127.248/tcp/28529/p2p/16Uiu2HAm4QyE6Z4B7J7b34k5Sni9bzQhd68rVuuwF5bDgSEFajVN","/ip4/172.18.127.248/tcp/28530/ws/p2p/16Uiu2HAm4QyE6Z4B7J7b34k5Sni9bzQhd68rVuuwF5bDgSEFajVN"],"enrUri":"enr:-L24QNHTS1bZFgbq8Nr2P5_baEXCdX1U6idFQZNj1sl8pqrlVhhvbPnIX03HcbAFCGcXqQ9mmsn_b3XNNo0nC-32vasCgmlkgnY0gmlwhKwSf_iKbXVsdGlhZGRyc5YACASsEn_4Bm9xAAoErBJ_-AZvct0DgnJzhQADAQAAiXNlY3AyNTZrMaEChYsaMgB5CyCq4UCFcVYnAK4F6r_P5C4k5u7ltxehsz2DdGNwgm9xg3VkcIJvc4V3YWt1MgM"}'
2025-02-04 17:15:29.871 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:15:29.871 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28528/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.12.98/tcp/28090/p2p/16Uiu2HAmBycuQv3SE57c8EAbonJuYaNTVkK7VzHXTfxb7K7i1uDp"]'
2025-02-04 17:15:29.874 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:15:29.874 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28089/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:15:29.877 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:15:29.877 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28528/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:15:29.879 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:15:29.880 DEBUG [src.steps.store] Relaying message
2025-02-04 17:15:29.880 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28089/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:15:29.886 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:15:29.887 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:15:30.088 DEBUG [src.steps.store] Relaying message
2025-02-04 17:15:30.088 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28089/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:15:30.094 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:15:30.094 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:15:30.295 DEBUG [src.steps.store] Relaying message
2025-02-04 17:15:30.296 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28089/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:15:30.302 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:15:30.302 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:15:30.503 DEBUG [src.steps.store] Relaying message
2025-02-04 17:15:30.503 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28089/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:15:30.510 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:15:30.511 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:15:30.712 DEBUG [src.steps.store] Relaying message
2025-02-04 17:15:30.712 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28089/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:15:30.719 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:15:30.719 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:15:30.920 DEBUG [src.steps.store] Relaying message
2025-02-04 17:15:30.920 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28089/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:15:30.927 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:15:30.927 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:15:31.128 DEBUG [src.steps.store] Relaying message
2025-02-04 17:15:31.128 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28089/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:15:31.135 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:15:31.136 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:15:31.337 DEBUG [src.steps.store] Relaying message
2025-02-04 17:15:31.337 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28089/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:15:31.344 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:15:31.345 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:15:31.546 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28089/store/v3/messages?pubsubTopic=test&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:15:31.549 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-04 17:15:31.550 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28528/store/v3/messages?pubsubTopic=test&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:15:31.553 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-04 17:15:31.556 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:15:31.558 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:15:31.558 DEBUG [src.node.waku_node] Stopping container with id 2cedf37444f3
2025-02-04 17:15:33.098 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:15:33.098 DEBUG [src.node.waku_node] Stopping container with id 555dc1eef502
2025-02-04 17:15:33.912 ERROR [src.node.docker_mananger] Max retries reached for container 2cedf37444f3. Exiting log stream.
2025-02-04 17:15:34.231 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:15:34.233 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:15:34.239 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:15:34.245 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
