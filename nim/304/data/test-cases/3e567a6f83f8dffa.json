{"uid":"3e567a6f83f8dffa","name":"test_light_push_and_retrieve_100_messages","fullName":"tests.light_push.test_publish.TestLightPushPublish#test_light_push_and_retrieve_100_messages","historyId":"5c0b6e9b2ea6543640c209e9335b5286","time":{"start":1723014063087,"stop":1723014063094,"duration":7},"status":"broken","statusMessage":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41696/lightpush/v1/message with response: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x54293097a066b368115d1433f5b4466a562922417fbd0325806315fdecaacfe2'","statusTrace":"src/node/api_clients/base_client.py:14: in make_request\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41696/lightpush/v1/message\n\nDuring handling of the above exception, another exception occurred:\ntests/light_push/test_publish.py:275: in test_light_push_and_retrieve_100_messages\n    self.light_push_node1.send_light_push_message(self.create_payload(message=message))\nsrc/node/waku_node.py:346: in send_light_push_message\n    return self._api.send_light_push_message(payload)\nsrc/node/api_clients/rest.py:57: in send_light_push_message\n    return self.rest_call(\"post\", \"lightpush/v1/message\", json.dumps(payload))\nsrc/node/api_clients/rest.py:16: in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\nsrc/node/api_clients/base_client.py:17: in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\nE   Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41696/lightpush/v1/message with response: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x54293097a066b368115d1433f5b4466a562922417fbd0325806315fdecaacfe2'","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1723013580384,"stop":1723013580385,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"light_push_setup","time":{"start":1723014060051,"stop":1723014060052,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1723014060051,"stop":1723014060051,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1723014060051,"stop":1723014060051,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1723014060051,"stop":1723014060051,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1723014060051,"stop":1723014060051,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1723014060051,"stop":1723014060051,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"light_push_publish_setup","time":{"start":1723014060052,"stop":1723014063086,"duration":3034},"status":"passed","steps":[{"name":"setup_first_receiving_node","time":{"start":1723014060052,"stop":1723014061513,"duration":1461},"status":"passed","steps":[{"name":"start_receiving_node","time":{"start":1723014060052,"stop":1723014061512,"duration":1460},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1723014061512,"stop":1723014061512,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.light_push.test_publish.TestLightPushPublish object at 0x7fd99f8148f0>, <src.node.waku_node.WakuNode object at 0x7fd99f168170>, [])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"image","value":"'wakuorg/nwaku:latest'"},{"name":"node_index","value":"1"},{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'true'"},{"name":"nodekey","value":"'30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'true'"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"setup_first_lightpush_node","time":{"start":1723014061513,"stop":1723014063073,"duration":1560},"status":"passed","steps":[{"name":"setup_lightpush_node","time":{"start":1723014061513,"stop":1723014063073,"duration":1560},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1723014063027,"stop":1723014063073,"duration":46},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.light_push.test_publish.TestLightPushPublish object at 0x7fd99f8148f0>, <src.node.waku_node.WakuNode object at 0x7fd99f185340>, ['/ip4/172.18.85.63/tcp/37326/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"image","value":"'wakuorg/nwaku:latest'"},{"name":"node_index","value":"1"},{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'false'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'false'"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_to_pubsub_topics_via_relay","time":{"start":1723014063073,"stop":1723014063086,"duration":13},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"None"},{"name":"pubsub_topics","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":7,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41696/lightpush/v1/message with response: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x54293097a066b368115d1433f5b4466a562922417fbd0325806315fdecaacfe2'","statusTrace":"src/node/api_clients/base_client.py:14: in make_request\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41696/lightpush/v1/message\n\nDuring handling of the above exception, another exception occurred:\ntests/light_push/test_publish.py:275: in test_light_push_and_retrieve_100_messages\n    self.light_push_node1.send_light_push_message(self.create_payload(message=message))\nsrc/node/waku_node.py:346: in send_light_push_message\n    return self._api.send_light_push_message(payload)\nsrc/node/api_clients/rest.py:57: in send_light_push_message\n    return self.rest_call(\"post\", \"lightpush/v1/message\", json.dumps(payload))\nsrc/node/api_clients/rest.py:16: in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\nsrc/node/api_clients/base_client.py:17: in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\nE   Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41696/lightpush/v1/message with response: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x54293097a066b368115d1433f5b4466a562922417fbd0325806315fdecaacfe2'","steps":[{"name":"create_message","time":{"start":1723014063087,"stop":1723014063087,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"payload","value":"'TV8w'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"create_payload","time":{"start":1723014063087,"stop":1723014063087,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"pubsub_topic","value":"None"},{"name":"message","value":"{'payload': 'TV8w', 'contentTopic': '/myapp/1/latest/proto', 'timestamp': 1723014063087160320}"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"f31a41ac10a789bd","name":"log","source":"f31a41ac10a789bd.txt","type":"text/plain","size":31599}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1723014063130,"stop":1723014063133,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1723014063133,"stop":1723014066569,"duration":3436},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1723014066570,"stop":1723014066572,"duration":2},"status":"passed","steps":[],"attachments":[{"uid":"66b3b62ec1f46a88","name":"receiving_node1_2024-08-07_07-01-00__3a9d2e36-13c8-4a7a-9969-b614ed1f7b64__wakuorg_nwaku:latest.log","source":"66b3b62ec1f46a88.txt","type":"text/plain","size":96796},{"uid":"2a2df9a1879e7ac1","name":"lightpush_node1_2024-08-07_07-01-00__3a9d2e36-13c8-4a7a-9969-b614ed1f7b64__wakuorg_nwaku:latest.log","source":"2a2df9a1879e7ac1.txt","type":"text/plain","size":93366}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1723015147059,"stop":1723015147059,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests.light_push"},{"name":"suite","value":"test_publish"},{"name":"subSuite","value":"TestLightPushPublish"},{"name":"host","value":"fv-az654-953"},{"name":"thread","value":"2108-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.light_push.test_publish"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"95d19d140a548308","status":"broken","statusDetails":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:36081/lightpush/v1/message with response: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0xb655948834f5804160e1e8b0644fdf1b60a68cd775f76cf4be0cbdb87b5f4200'","time":{"start":1723014054707,"stop":1723014054714,"duration":7}},{"uid":"672fb941a2b248d5","status":"broken","statusDetails":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:3959/lightpush/v1/message with response: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0xdeb58700056596521931782a7b5239b886c6a0887e1c2c1c991555b919deb88f'","time":{"start":1723014046895,"stop":1723014046903,"duration":8}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":4,"skipped":0,"passed":58,"unknown":0,"total":62},"items":[{"uid":"b66836eca8bcc0af","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/303//#testresult/b66836eca8bcc0af","status":"passed","time":{"start":1723004278338,"stop":1723004280184,"duration":1846}},{"uid":"1b56a9e9cd4f63a8","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/302//#testresult/1b56a9e9cd4f63a8","status":"passed","time":{"start":1722917861518,"stop":1722917863349,"duration":1831}},{"uid":"8fb00c2fd1dfe3f8","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/301//#testresult/8fb00c2fd1dfe3f8","status":"passed","time":{"start":1722857464410,"stop":1722857466157,"duration":1747}},{"uid":"aa921fe699693700","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/300//#testresult/aa921fe699693700","status":"passed","time":{"start":1722854703823,"stop":1722854705485,"duration":1662}},{"uid":"e025084bd37d8ff3","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/299//#testresult/e025084bd37d8ff3","status":"broken","statusDetails":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:34391/lightpush/v1/message with response: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0xce86ac1a12231b6abd270e1bad786e469089fa7a9aa28fc2b2f0ceba7488c869'","time":{"start":1722831505873,"stop":1722831505884,"duration":11}},{"uid":"358c13510ac61e02","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/298//#testresult/358c13510ac61e02","status":"broken","statusDetails":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:56323/lightpush/v1/message with response: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x085d99ceb0c22f48f18bdfb9d08e86331ece8bf37148e32967551fd9e70cdafc'","time":{"start":1722745135370,"stop":1722745135379,"duration":9}},{"uid":"6a1ada358f1d07eb","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/297//#testresult/6a1ada358f1d07eb","status":"broken","statusDetails":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:43770/lightpush/v1/message with response: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x6735d94ce6081f58ac6e771c15a0061a32839f07e4896eb259295235d822e0cd'","time":{"start":1722658647396,"stop":1722658647403,"duration":7}},{"uid":"c232c39f8b1fcecd","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/296//#testresult/c232c39f8b1fcecd","status":"passed","time":{"start":1722572171333,"stop":1722572172992,"duration":1659}},{"uid":"21d86d96061db0ce","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/295//#testresult/21d86d96061db0ce","status":"passed","time":{"start":1722485787939,"stop":1722485789603,"duration":1664}},{"uid":"e68c69b7d0fcbc59","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/294//#testresult/e68c69b7d0fcbc59","status":"passed","time":{"start":1722399247549,"stop":1722399249226,"duration":1677}},{"uid":"b5d0203c0d5f6567","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/293//#testresult/b5d0203c0d5f6567","status":"passed","time":{"start":1722312971064,"stop":1722312972674,"duration":1610}},{"uid":"ee8caf35ede62833","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/292//#testresult/ee8caf35ede62833","status":"passed","time":{"start":1722235805401,"stop":1722235807024,"duration":1623}},{"uid":"5ac80639ea72c7cd","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/290//#testresult/5ac80639ea72c7cd","status":"passed","time":{"start":1722140136475,"stop":1722140138091,"duration":1616}},{"uid":"917d6435cc746e46","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/289//#testresult/917d6435cc746e46","status":"passed","time":{"start":1722053741105,"stop":1722053742773,"duration":1668}},{"uid":"ddcb831b7bdb3d83","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/288//#testresult/ddcb831b7bdb3d83","status":"passed","time":{"start":1721967410459,"stop":1721967412068,"duration":1609}},{"uid":"bc5cb9bf02e96cee","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/287//#testresult/bc5cb9bf02e96cee","status":"passed","time":{"start":1721880973004,"stop":1721880974651,"duration":1647}},{"uid":"9f47cb13454d4e0c","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/286//#testresult/9f47cb13454d4e0c","status":"passed","time":{"start":1721794545327,"stop":1721794546963,"duration":1636}},{"uid":"25b8d4e700c04f1e","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/285//#testresult/25b8d4e700c04f1e","status":"passed","time":{"start":1721708184237,"stop":1721708185806,"duration":1569}},{"uid":"991b731346614182","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/284//#testresult/991b731346614182","status":"passed","time":{"start":1721621799573,"stop":1721621801198,"duration":1625}},{"uid":"9061bc9f742c0f0e","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/283//#testresult/9061bc9f742c0f0e","status":"passed","time":{"start":1721535367700,"stop":1721535369325,"duration":1625}}]},"tags":[]},"source":"3e567a6f83f8dffa.json","parameterValues":[]}