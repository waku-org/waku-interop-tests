[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2024-10-04_04-19-56__02c9be68-7db9-4749-8691-bd91a0a0702d
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-04_04-19-56__02c9be68-7db9-4749-8691-bd91a0a0702d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.192.224
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['22617', '22618', '22619', '22620', '22621']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 22617:22617 -p 22618:22618 -p 22619:22619 -p 22620:22620 -p 22621:22621 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22619 --rest-port=22617 --tcp-port=22618 --discv5-udp-port=22620 --rest-address=0.0.0.0 --nat=extip:172.18.192.224 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7d36d6dbf9dc80f0812ffe9bb4aba18481f1dec62c96db71c6eedbd63954bfeb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22621 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.192.224 waku 9541f9b9a9ce3fd7240db572182697493607e954d881e778a837bda9319cac96
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 9541f9b9a9ce. Setting up logs at ./log/docker/receiving_node1_2024-10-04_04-19-56__02c9be68-7db9-4749-8691-bd91a0a0702d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 22617
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22617/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22617/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.192.224/tcp/22618/p2p/16Uiu2HAmEmqLQzBuNxmjzLZk5cMAWHbgMkkCtWEfWtKd5CaDLN2N","/ip4/172.18.192.224/tcp/22619/ws/p2p/16Uiu2HAmEmqLQzBuNxmjzLZk5cMAWHbgMkkCtWEfWtKd5CaDLN2N"],"enrUri":"enr:-LO4QOk_rTdSRDtFTO1rpyFWt1g-vzOo9fEpLDxveZeRPuuAMi3-SS7rzpEDuKJPGtUTUarRjM-yLTAT7zZU8SWpD_gBgmlkgnY0gmlwhKwSwOCKbXVsdGlhZGRyc4wACgSsEsDgBlhb3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMfeD8BcuSnSE6P8nRM1bal8o7e0JzFJlsmBUFpc8mmW4N0Y3CCWFqDdWRwglhchXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-04_04-19-56__02c9be68-7db9-4749-8691-bd91a0a0702d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.23.45
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['59346', '59347', '59348', '59349', '59350']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 59346:59346 -p 59347:59347 -p 59348:59348 -p 59349:59349 -p 59350:59350 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59348 --rest-port=59346 --tcp-port=59347 --discv5-udp-port=59349 --rest-address=0.0.0.0 --nat=extip:172.18.23.45 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a5eda25c5dd8dba161d95ebf9ed97fbfc1e09678faeadaaff7e5ceeecff7facf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59350 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.23.45 waku 1010114a03b935038ae0baadf3d6be6c1de99800c9eb04790446d0436c37f319
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 1010114a03b9. Setting up logs at ./log/docker/receiving_node2_2024-10-04_04-19-56__02c9be68-7db9-4749-8691-bd91a0a0702d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 59346
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59346/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59346/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.23.45/tcp/59347/p2p/16Uiu2HAmLbzxfSCctcrLZZjiZUEZRhDpUiTA8vw3FjPwtzQhSXn9","/ip4/172.18.23.45/tcp/59348/ws/p2p/16Uiu2HAmLbzxfSCctcrLZZjiZUEZRhDpUiTA8vw3FjPwtzQhSXn9"],"enrUri":"enr:-LO4QMrgEljSwhIBmtHqvYpmg73_E9vRVmOJuh32sVV7lAjufuHSj16hZ_OJmEjvIG5Vk7plbRGesRlHZ-nC1uyXmZ4BgmlkgnY0gmlwhKwSFy2KbXVsdGlhZGRyc4wACgSsEhctBufU3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN2GXFNdDHXr8TcTz3_whhfGurNb0wIBr6pDx9cKeaD-oN0Y3CC59ODdWRwgufVhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59346/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.192.224/tcp/22618/p2p/16Uiu2HAmEmqLQzBuNxmjzLZk5cMAWHbgMkkCtWEfWtKd5CaDLN2N"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-04_04-19-56__02c9be68-7db9-4749-8691-bd91a0a0702d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.197.2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['8635', '8636', '8637', '8638', '8639']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 8635:8635 -p 8636:8636 -p 8637:8637 -p 8638:8638 -p 8639:8639 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8637 --rest-port=8635 --tcp-port=8636 --discv5-udp-port=8638 --rest-address=0.0.0.0 --nat=extip:172.18.197.2 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2c5af3c8cde8e1ad7f4702ee7eb76e78ed383d6d00aebdbbc2ee7a7e07ebb4dc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8639 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QOk_rTdSRDtFTO1rpyFWt1g-vzOo9fEpLDxveZeRPuuAMi3-SS7rzpEDuKJPGtUTUarRjM-yLTAT7zZU8SWpD_gBgmlkgnY0gmlwhKwSwOCKbXVsdGlhZGRyc4wACgSsEsDgBlhb3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMfeD8BcuSnSE6P8nRM1bal8o7e0JzFJlsmBUFpc8mmW4N0Y3CCWFqDdWRwglhchXdha3UyCQ --lightpushnode=/ip4/172.18.192.224/tcp/22618/p2p/16Uiu2HAmEmqLQzBuNxmjzLZk5cMAWHbgMkkCtWEfWtKd5CaDLN2N --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.197.2 waku 77d85976a617906995ed8bcd76fc8701b24e5874ce755076df5798a7785d6d0b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 77d85976a617. Setting up logs at ./log/docker/lightpush_node1_2024-10-04_04-19-56__02c9be68-7db9-4749-8691-bd91a0a0702d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 8635
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8635/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8635/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.197.2/tcp/8636/p2p/16Uiu2HAmTW1uWZ7nnb6Dmw9YwygSMe93RwLKm5uNPq2wDv6dhRjd","/ip4/172.18.197.2/tcp/8637/ws/p2p/16Uiu2HAmTW1uWZ7nnb6Dmw9YwygSMe93RwLKm5uNPq2wDv6dhRjd"],"enrUri":"enr:-LO4QDxgTTH4gMfzzIk27eCJXg0JYxuXBbq99fV1nNLbY4sDCGBt55b1vabye6XA7fwZiIhQZuqZWUySn-k2Wq6ZBLoBgmlkgnY0gmlwhKwSxQKKbXVsdGlhZGRyc4wACgSsEsUCBiG93QOCcnOFAAMBAACJc2VjcDI1NmsxoQPcktXgL9ET0fCMJNeuQNR7qu4CEIKgiN0U3KmPOGkW6IN0Y3CCIbyDdWRwgiG-hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8635/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.192.224/tcp/22618/p2p/16Uiu2HAmEmqLQzBuNxmjzLZk5cMAWHbgMkkCtWEfWtKd5CaDLN2N"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8635/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.23.45/tcp/59347/p2p/16Uiu2HAmLbzxfSCctcrLZZjiZUEZRhDpUiTA8vw3FjPwtzQhSXn9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22617/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59346/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8635/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728015601447444992, "extraField": "extraValue"}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:8635/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9541f9b9a9ce
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1010114a03b9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 77d85976a617
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.