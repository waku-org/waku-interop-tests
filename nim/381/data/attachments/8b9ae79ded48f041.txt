[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_ping_on_unsubscribed_peer with id: 2024-10-04_04-16-04__89bcbfb7-de5b-47c8-8db9-1e3a6bd4d40e
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-04_04-16-04__89bcbfb7-de5b-47c8-8db9-1e3a6bd4d40e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.205.246
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['35899', '35900', '35901', '35902', '35903']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 35899:35899 -p 35900:35900 -p 35901:35901 -p 35902:35902 -p 35903:35903 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35901 --rest-port=35899 --tcp-port=35900 --discv5-udp-port=35902 --rest-address=0.0.0.0 --nat=extip:172.18.205.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bd6cf44a6a1d8da80ac1bcb1acd59dd641a48dddf9c270c8d2f4485ad04efab2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35903 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.205.246 waku 6a45ddc8f1c65fff745fab5b64aebde95bcc399757e03e1a8181b81e0840f1b7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 6a45ddc8f1c6. Setting up logs at ./log/docker/node1_2024-10-04_04-16-04__89bcbfb7-de5b-47c8-8db9-1e3a6bd4d40e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 35899
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35899/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35899/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.205.246/tcp/35900/p2p/16Uiu2HAmD5UMNdicdKWLxBGpphPd1DRUhoZa4AzhezkJUQhnUP7A","/ip4/172.18.205.246/tcp/35901/ws/p2p/16Uiu2HAmD5UMNdicdKWLxBGpphPd1DRUhoZa4AzhezkJUQhnUP7A"],"enrUri":"enr:-LO4QP4u8FnkFOO2GP4P-dXEXGNZiIdykQLC7FeQXLTxEJclaTwteFVG_HbOT3ZichW_HyVQf8_wNeR49uza7N40bWYBgmlkgnY0gmlwhKwSzfaKbXVsdGlhZGRyc4wACgSsEs32Bow93QOCcnOFAAMBAACJc2VjcDI1NmsxoQMGRZnLEXoWwsVCRxyA-dJlWykDq5Xnp4EuR5GPrSUXxYN0Y3CCjDyDdWRwgow-hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-04_04-16-04__89bcbfb7-de5b-47c8-8db9-1e3a6bd4d40e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.82.17
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['40264', '40265', '40266', '40267', '40268']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 40264:40264 -p 40265:40265 -p 40266:40266 -p 40267:40267 -p 40268:40268 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40266 --rest-port=40264 --tcp-port=40265 --discv5-udp-port=40267 --rest-address=0.0.0.0 --nat=extip:172.18.82.17 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dea5fed7dbcb7d50fecae68ea0b566a2ec3bd7e0a8d85eaa6f0c006ba0bc000c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40268 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QP4u8FnkFOO2GP4P-dXEXGNZiIdykQLC7FeQXLTxEJclaTwteFVG_HbOT3ZichW_HyVQf8_wNeR49uza7N40bWYBgmlkgnY0gmlwhKwSzfaKbXVsdGlhZGRyc4wACgSsEs32Bow93QOCcnOFAAMBAACJc2VjcDI1NmsxoQMGRZnLEXoWwsVCRxyA-dJlWykDq5Xnp4EuR5GPrSUXxYN0Y3CCjDyDdWRwgow-hXdha3UyBQ --filternode=/ip4/172.18.205.246/tcp/35900/p2p/16Uiu2HAmD5UMNdicdKWLxBGpphPd1DRUhoZa4AzhezkJUQhnUP7A
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.82.17 waku 54692968a17f8f033497878391873e3c2ef6b0f5b30107d801df6f864b714779
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 54692968a17f. Setting up logs at ./log/docker/node2_2024-10-04_04-16-04__89bcbfb7-de5b-47c8-8db9-1e3a6bd4d40e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 40264
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40264/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40264/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.82.17/tcp/40265/p2p/16Uiu2HAmKMigPsbChvdSYhwoMYiskGjxk8wiKTsvPZ8zrD4Ezh32","/ip4/172.18.82.17/tcp/40266/ws/p2p/16Uiu2HAmKMigPsbChvdSYhwoMYiskGjxk8wiKTsvPZ8zrD4Ezh32"],"enrUri":"enr:-LO4QIiiWGKyMockWoshauL_zXpl7ByZMAJmiP6KaPyP5Qp-QgwyZdavGmGcPIfUnsTI-dUf7Bi81B7kOuwZ8FQnGFUBgmlkgnY0gmlwhKwSUhGKbXVsdGlhZGRyc4wACgSsElIRBp1K3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNjlTdHDxLQqAeyy7jX_E2KIbFUJWw8moom2EzVjmPILYN0Y3CCnUmDdWRwgp1LhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40264/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.205.246/tcp/35900/p2p/16Uiu2HAmD5UMNdicdKWLxBGpphPd1DRUhoZa4AzhezkJUQhnUP7A"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35899/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40264/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "41e14540-d9fa-4a5e-85ff-3dc64b3a5b87", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"41e14540-d9fa-4a5e-85ff-3dc64b3a5b87","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40264/filter/v2/subscriptions/c8347280-ffd4-44b9-be1f-aa95065d99a7" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"c8347280-ffd4-44b9-be1f-aa95065d99a7","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:40264/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"12345","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40264/filter/v2/subscriptions/ce02dcf8-d007-4663-963b-e20f3c4819db" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:40264/filter/v2/subscriptions/ce02dcf8-d007-4663-963b-e20f3c4819db. Response content: b'{"requestId":"ce02dcf8-d007-4663-963b-e20f3c4819db","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 6a45ddc8f1c6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 54692968a17f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.