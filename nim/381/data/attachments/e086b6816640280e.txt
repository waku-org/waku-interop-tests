[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-10-04_04-20-31__c6f045e1-1758-42d0-b9b2-cdabb0513e2d
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-04_04-20-31__c6f045e1-1758-42d0-b9b2-cdabb0513e2d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.60.210
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['15924', '15925', '15926', '15927', '15928']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 15924:15924 -p 15925:15925 -p 15926:15926 -p 15927:15927 -p 15928:15928 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15926 --rest-port=15924 --tcp-port=15925 --discv5-udp-port=15927 --rest-address=0.0.0.0 --nat=extip:172.18.60.210 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9a5fdded8ffef75db24e2fcb53d0e74f04c4f5d3c16fe963bde9b20d51fde2ca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15928 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.60.210 waku cea59ded7c1f73af264a6383dd32a013fc97ba2a184fe58376dfe81f8de996b2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID cea59ded7c1f. Setting up logs at ./log/docker/receiving_node1_2024-10-04_04-20-31__c6f045e1-1758-42d0-b9b2-cdabb0513e2d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 15924
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15924/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15924/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.60.210/tcp/15925/p2p/16Uiu2HAmE21XMY6S4cKUN8ZTy2GmegHDKaudrHXonfoa6NzBNgzQ","/ip4/172.18.60.210/tcp/15926/ws/p2p/16Uiu2HAmE21XMY6S4cKUN8ZTy2GmegHDKaudrHXonfoa6NzBNgzQ"],"enrUri":"enr:-LO4QPbsyEMGaJ_AgnHIwBIpx6xzrTF_bhx7AwcPDhTWofPoASnTMLgbowXbKJI_06-entlWWQuoEBLcgw5eWiOFEmgBgmlkgnY0gmlwhKwSPNKKbXVsdGlhZGRyc4wACgSsEjzSBj423QOCcnOFAAMBAACJc2VjcDI1NmsxoQMUPjX5Zr991WC7e6x8ypTdxlypyJ3WIGOEuGNwE4vqxYN0Y3CCPjWDdWRwgj43hXdha3UyDQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-04_04-20-31__c6f045e1-1758-42d0-b9b2-cdabb0513e2d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.230.58
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['45004', '45005', '45006', '45007', '45008']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 45004:45004 -p 45005:45005 -p 45006:45006 -p 45007:45007 -p 45008:45008 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45006 --rest-port=45004 --tcp-port=45005 --discv5-udp-port=45007 --rest-address=0.0.0.0 --nat=extip:172.18.230.58 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1afdb98c8176a106badff42aa21caba5f8b0beea9cace01ffc58fea2cea31fe6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45008 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.230.58 waku 00bcd07dafe9432a74457b03d1bf9c000c8f8922623b7659e8aa7c6d55609af6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 00bcd07dafe9. Setting up logs at ./log/docker/receiving_node2_2024-10-04_04-20-31__c6f045e1-1758-42d0-b9b2-cdabb0513e2d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 45004
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45004/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45004/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.230.58/tcp/45005/p2p/16Uiu2HAm3Qi3CSFDCgnEjeWt4DzmmGRRdvapCMht2Uaiy9nNeHCd","/ip4/172.18.230.58/tcp/45006/ws/p2p/16Uiu2HAm3Qi3CSFDCgnEjeWt4DzmmGRRdvapCMht2Uaiy9nNeHCd"],"enrUri":"enr:-LO4QJ7_YiEFjfbWdcl3_kz3uu8mWnExFeWzEsPvz8XB68bvZhLndsJVSVPnxh4gYFfdXlFFFESkUq9hc7T1JWFy_5wBgmlkgnY0gmlwhKwS5jqKbXVsdGlhZGRyc4wACgSsEuY6Bq_O3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ2nj4MhI4mpokbXUW-g-cdwVJf_R6wfhOKgn6yztfBGoN0Y3CCr82DdWRwgq_PhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45004/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.60.210/tcp/15925/p2p/16Uiu2HAmE21XMY6S4cKUN8ZTy2GmegHDKaudrHXonfoa6NzBNgzQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-04_04-20-31__c6f045e1-1758-42d0-b9b2-cdabb0513e2d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.245.58
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['41186', '41187', '41188', '41189', '41190']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 41186:41186 -p 41187:41187 -p 41188:41188 -p 41189:41189 -p 41190:41190 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41188 --rest-port=41186 --tcp-port=41187 --discv5-udp-port=41189 --rest-address=0.0.0.0 --nat=extip:172.18.245.58 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=45a53cec2a8ec4ccab7f7dcc50afb720dd2b60c97e4cacdecbafe8beb1228864 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41190 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QPbsyEMGaJ_AgnHIwBIpx6xzrTF_bhx7AwcPDhTWofPoASnTMLgbowXbKJI_06-entlWWQuoEBLcgw5eWiOFEmgBgmlkgnY0gmlwhKwSPNKKbXVsdGlhZGRyc4wACgSsEjzSBj423QOCcnOFAAMBAACJc2VjcDI1NmsxoQMUPjX5Zr991WC7e6x8ypTdxlypyJ3WIGOEuGNwE4vqxYN0Y3CCPjWDdWRwgj43hXdha3UyDQ --lightpushnode=/ip4/172.18.60.210/tcp/15925/p2p/16Uiu2HAmE21XMY6S4cKUN8ZTy2GmegHDKaudrHXonfoa6NzBNgzQ --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.245.58 waku 3c67a14e879e9c6197b1db2ea93e5cb4c9273e959a4451c98690d833b92533ba
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3c67a14e879e. Setting up logs at ./log/docker/lightpush_node1_2024-10-04_04-20-31__c6f045e1-1758-42d0-b9b2-cdabb0513e2d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 41186
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41186/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41186/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.245.58/tcp/41187/p2p/16Uiu2HAm9SG99E5bWv561VvhyJEszfQbkXHU2tzAdnyLmBZFN9jG","/ip4/172.18.245.58/tcp/41188/ws/p2p/16Uiu2HAm9SG99E5bWv561VvhyJEszfQbkXHU2tzAdnyLmBZFN9jG"],"enrUri":"enr:-LO4QAwAsi1b2gLCtPYDf_ljquW6abRi7YOWS_CAkoDZ7PQdPx5_3NmWpQN1nPIrv_ClhYqE1LLHUzCpORI-6FnkLiIBgmlkgnY0gmlwhKwS9TqKbXVsdGlhZGRyc4wACgSsEvU6BqDk3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLQKj4_LbAqPE3_6apxvQRJ1CFk2XnGMac8bEiAguh2W4N0Y3CCoOODdWRwgqDlhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41186/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.60.210/tcp/15925/p2p/16Uiu2HAmE21XMY6S4cKUN8ZTy2GmegHDKaudrHXonfoa6NzBNgzQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41186/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.230.58/tcp/45005/p2p/16Uiu2HAm3Qi3CSFDCgnEjeWt4DzmmGRRdvapCMht2Uaiy9nNeHCd"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15924/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45004/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41186/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728015636550787840}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15924/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728015636550787840,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45004/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728015636550787840,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id cea59ded7c1f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 00bcd07dafe9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3c67a14e879e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.