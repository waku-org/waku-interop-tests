[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_pubsub_topics with id: 2024-10-04_04-19-22__205d7f54-7726-4a9c-9cdb-f69142f8801c
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-04_04-19-22__205d7f54-7726-4a9c-9cdb-f69142f8801c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.84.98
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['21129', '21130', '21131', '21132', '21133']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 21129:21129 -p 21130:21130 -p 21131:21131 -p 21132:21132 -p 21133:21133 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21131 --rest-port=21129 --tcp-port=21130 --discv5-udp-port=21132 --rest-address=0.0.0.0 --nat=extip:172.18.84.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=71145bb3bda0bcab3f7378aabec8ed8e58f6376ca1d42db01dc251fb741aaf2d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21133 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.84.98 waku 73d9b07a134ad53d2f16887b90db6825c052d7c5c582eb52acba99e088c7e31e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 73d9b07a134a. Setting up logs at ./log/docker/receiving_node1_2024-10-04_04-19-22__205d7f54-7726-4a9c-9cdb-f69142f8801c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 21129
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21129/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21129/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.98/tcp/21130/p2p/16Uiu2HAmSVCrzzLexSaiHcdNC7RwQWJynGzWN1Nc2etxHSQSoHB8","/ip4/172.18.84.98/tcp/21131/ws/p2p/16Uiu2HAmSVCrzzLexSaiHcdNC7RwQWJynGzWN1Nc2etxHSQSoHB8"],"enrUri":"enr:-LO4QLbx1Kh9mWpO2xMFDwTInef8JidOwUcDjEZPPO03_21EHyAYBeFXX9zuG6OJ7tUyNc_RwoOnAZaSkITvHA_t2J0BgmlkgnY0gmlwhKwSVGKKbXVsdGlhZGRyc4wACgSsElRiBlKL3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPNgfTfF5E0HlZwP9N2a0kvLd6hcVCGkupFFrXSDhx064N0Y3CCUoqDdWRwglKMhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-04_04-19-22__205d7f54-7726-4a9c-9cdb-f69142f8801c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.24.21
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['18972', '18973', '18974', '18975', '18976']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 18972:18972 -p 18973:18973 -p 18974:18974 -p 18975:18975 -p 18976:18976 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18974 --rest-port=18972 --tcp-port=18973 --discv5-udp-port=18975 --rest-address=0.0.0.0 --nat=extip:172.18.24.21 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4eaf2b8bda2499d6b6a457dbe0af72a5f094d1938eec9dce7cf992c7cebb2cd8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18976 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.24.21 waku cd7b1a7e5b76e2072f4580c3445e7c8d40a860a4bf6a071993e6c7e28c521175
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID cd7b1a7e5b76. Setting up logs at ./log/docker/receiving_node2_2024-10-04_04-19-22__205d7f54-7726-4a9c-9cdb-f69142f8801c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 18972
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18972/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18972/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.24.21/tcp/18973/p2p/16Uiu2HAmTgBVLty6kfaDEjydWkYyvBgQuezmRagpLZU4E4rT9G2C","/ip4/172.18.24.21/tcp/18974/ws/p2p/16Uiu2HAmTgBVLty6kfaDEjydWkYyvBgQuezmRagpLZU4E4rT9G2C"],"enrUri":"enr:-LO4QPa9G_xMITR-8L8WzdesrXE87EE_7O2cFSiUQ1FXy1n4INQHee0GG14ln5L88MKPHQSxaW4nBxauPxsNk8W0pUcBgmlkgnY0gmlwhKwSGBWKbXVsdGlhZGRyc4wACgSsEhgVBkoe3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPfLXq9liJoX-WNU0tkSyiNAtDwGF7fHZ_AwqJ5Ir9SIYN0Y3CCSh2DdWRwgkofhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18972/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.84.98/tcp/21130/p2p/16Uiu2HAmSVCrzzLexSaiHcdNC7RwQWJynGzWN1Nc2etxHSQSoHB8"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-04_04-19-22__205d7f54-7726-4a9c-9cdb-f69142f8801c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.43.197
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['46741', '46742', '46743', '46744', '46745']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 46741:46741 -p 46742:46742 -p 46743:46743 -p 46744:46744 -p 46745:46745 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46743 --rest-port=46741 --tcp-port=46742 --discv5-udp-port=46744 --rest-address=0.0.0.0 --nat=extip:172.18.43.197 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bb6c5cafdab0cefe65baed7f1b4bdd1427b9a456636837c6dc71d0bdeabeaeef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46745 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QLbx1Kh9mWpO2xMFDwTInef8JidOwUcDjEZPPO03_21EHyAYBeFXX9zuG6OJ7tUyNc_RwoOnAZaSkITvHA_t2J0BgmlkgnY0gmlwhKwSVGKKbXVsdGlhZGRyc4wACgSsElRiBlKL3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPNgfTfF5E0HlZwP9N2a0kvLd6hcVCGkupFFrXSDhx064N0Y3CCUoqDdWRwglKMhXdha3UyCQ --lightpushnode=/ip4/172.18.84.98/tcp/21130/p2p/16Uiu2HAmSVCrzzLexSaiHcdNC7RwQWJynGzWN1Nc2etxHSQSoHB8 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.43.197 waku 36fff94a2ca7b1976ebe694f717db76e5d7b46d0ba4185840c4b3aec185a8469
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 36fff94a2ca7. Setting up logs at ./log/docker/lightpush_node1_2024-10-04_04-19-22__205d7f54-7726-4a9c-9cdb-f69142f8801c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 46741
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46741/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46741/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.43.197/tcp/46742/p2p/16Uiu2HAkzNm683hME6J8hcRbsDJpPoXUuWLdfebxSsgg5F6Tqe1d","/ip4/172.18.43.197/tcp/46743/ws/p2p/16Uiu2HAkzNm683hME6J8hcRbsDJpPoXUuWLdfebxSsgg5F6Tqe1d"],"enrUri":"enr:-LO4QFxtUTHX5S3F15XjDOzoX_cY7da5BYYg2zNZ7vidkgj3XVALEohXnCu-LKVWJW-OqGVoG-ZKKIssQCG0Z7uCnVABgmlkgnY0gmlwhKwSK8WKbXVsdGlhZGRyc4wACgSsEivFBraX3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJJi3gXC2H_zOA4MwgcJneHPjPfrNE_qs2RAVBTg5ksGIN0Y3CCtpaDdWRwgraYhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46741/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.84.98/tcp/21130/p2p/16Uiu2HAmSVCrzzLexSaiHcdNC7RwQWJynGzWN1Nc2etxHSQSoHB8"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46741/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.24.21/tcp/18973/p2p/16Uiu2HAmTgBVLty6kfaDEjydWkYyvBgQuezmRagpLZU4E4rT9G2C"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21129/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18972/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46741/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728015567391224832}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:46741/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 73d9b07a134a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id cd7b1a7e5b76
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 36fff94a2ca7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.