[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_no_content_topic with id: 2024-10-04_04-17-06__8e009853-3c50-4b5e-9f3b-76807e1b4441
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-04_04-17-06__8e009853-3c50-4b5e-9f3b-76807e1b4441__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.178.95
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['43610', '43611', '43612', '43613', '43614']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 43610:43610 -p 43611:43611 -p 43612:43612 -p 43613:43613 -p 43614:43614 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43612 --rest-port=43610 --tcp-port=43611 --discv5-udp-port=43613 --rest-address=0.0.0.0 --nat=extip:172.18.178.95 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3d856b6defcebced5c6f45114fcbdcc2fbc35a7e3addcfbdf0f40c502ca8b6af --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43614 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.178.95 waku 04df912cf26e51a908ad205a017abd01f20e8863ef75dd6540ebdb2e1aa4d641
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 04df912cf26e. Setting up logs at ./log/docker/node1_2024-10-04_04-17-06__8e009853-3c50-4b5e-9f3b-76807e1b4441__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 43610
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43610/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43610/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.178.95/tcp/43611/p2p/16Uiu2HAmBuTSxjjJscYWAPs6mPqBSHor5HMrreyg24jWnvMAspew","/ip4/172.18.178.95/tcp/43612/ws/p2p/16Uiu2HAmBuTSxjjJscYWAPs6mPqBSHor5HMrreyg24jWnvMAspew"],"enrUri":"enr:-LO4QNnLZinxcNBg6od4hlW9BXTChLuYTZVFmGqeBs64HwjaY5d-9CtFrn0xq8iow-0-f_30cpal2hRtK8f4klBuvccBgmlkgnY0gmlwhKwSsl-KbXVsdGlhZGRyc4wACgSsErJfBqpc3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL02RV_JxbGJA-q4CWWJCrRdwiP1FeVhom-qw9YRpD81IN0Y3CCqluDdWRwgqpdhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-04_04-17-06__8e009853-3c50-4b5e-9f3b-76807e1b4441__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.200.84
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['59457', '59458', '59459', '59460', '59461']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 59457:59457 -p 59458:59458 -p 59459:59459 -p 59460:59460 -p 59461:59461 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59459 --rest-port=59457 --tcp-port=59458 --discv5-udp-port=59460 --rest-address=0.0.0.0 --nat=extip:172.18.200.84 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aa7bf287ee3ff2490c68f6efd17d3ff1caabeabcb2ceccfd1a2bce8ed6d0e217 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59461 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QNnLZinxcNBg6od4hlW9BXTChLuYTZVFmGqeBs64HwjaY5d-9CtFrn0xq8iow-0-f_30cpal2hRtK8f4klBuvccBgmlkgnY0gmlwhKwSsl-KbXVsdGlhZGRyc4wACgSsErJfBqpc3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL02RV_JxbGJA-q4CWWJCrRdwiP1FeVhom-qw9YRpD81IN0Y3CCqluDdWRwgqpdhXdha3UyBQ --filternode=/ip4/172.18.178.95/tcp/43611/p2p/16Uiu2HAmBuTSxjjJscYWAPs6mPqBSHor5HMrreyg24jWnvMAspew
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.200.84 waku 502706334d20d5d2fad6c86e07dcadeae7d7faaf5f1e55ce3115d8025c03ca9c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 502706334d20. Setting up logs at ./log/docker/node2_2024-10-04_04-17-06__8e009853-3c50-4b5e-9f3b-76807e1b4441__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 59457
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59457/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59457/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.200.84/tcp/59458/p2p/16Uiu2HAmCXBg9CKvZYa4kT82Hfb38Fx1PvDo28JRAuG4nPjSZEAF","/ip4/172.18.200.84/tcp/59459/ws/p2p/16Uiu2HAmCXBg9CKvZYa4kT82Hfb38Fx1PvDo28JRAuG4nPjSZEAF"],"enrUri":"enr:-LO4QDsFvJDNejEbiisULPyQkc7ciKQ2M5RTFpTDe9BKV2o3Gx4aM7hcyLHIwooLER2CJ7r4OWT7SaMUpuHY-7dbshQBgmlkgnY0gmlwhKwSyFSKbXVsdGlhZGRyc4wACgSsEshUBuhD3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL-ACima169UBZkmEVCz2iVao-JF--xZbuxGkvDmgcHvIN0Y3CC6EKDdWRwguhEhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59457/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.178.95/tcp/43611/p2p/16Uiu2HAmBuTSxjjJscYWAPs6mPqBSHor5HMrreyg24jWnvMAspew"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43610/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59457/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "aebb0580-29b5-41b4-9c96-45934784eac8", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"aebb0580-29b5-41b4-9c96-45934784eac8","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:59457/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:59457/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 04df912cf26e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 502706334d20
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.