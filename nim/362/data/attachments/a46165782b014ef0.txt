[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_with_very_large_request_id with id: 2024-09-16_04-18-33__694e1d46-84a2-4082-acf2-8913b1e44da6
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-16_04-18-33__694e1d46-84a2-4082-acf2-8913b1e44da6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.48.40
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['14430', '14431', '14432', '14433', '14434']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 14430:14430 -p 14431:14431 -p 14432:14432 -p 14433:14433 -p 14434:14434 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14432 --rest-port=14430 --tcp-port=14431 --discv5-udp-port=14433 --rest-address=0.0.0.0 --nat=extip:172.18.48.40 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=80ae5a34b126f0f9ac245cf2859a2b2cacdd8ed6a8b4d12cf2ee257a81ea08a0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14434 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.48.40 waku af156a2ad08525d9408a648fbcf28ed962808eb398b715b882a6b0bdaf13afdb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID af156a2ad085. Setting up logs at ./log/docker/node1_2024-09-16_04-18-33__694e1d46-84a2-4082-acf2-8913b1e44da6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 14430
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14430/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14430/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.48.40/tcp/14431/p2p/16Uiu2HAmCfdXKkhfcUQc3UNHCV4w3sHdyaEu8VUeGAefhrZkTV3v","/ip4/172.18.48.40/tcp/14432/ws/p2p/16Uiu2HAmCfdXKkhfcUQc3UNHCV4w3sHdyaEu8VUeGAefhrZkTV3v"],"enrUri":"enr:-LO4QJRg9nQVGGUEiF1CixZKP2zKKJyYeNbrdVT544IhB_gtOUe2gOUHoMktiWpRLuAPwEI5VnTXyzaIg3yeixiIeBoBgmlkgnY0gmlwhKwSMCiKbXVsdGlhZGRyc4wACgSsEjAoBjhg3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMAKggaPu_zCP_WW9ttykt1JAjw_sYdWmm8LhRIcrvomYN0Y3CCOF-DdWRwgjhhhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-16_04-18-33__694e1d46-84a2-4082-acf2-8913b1e44da6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.179.125
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['46263', '46264', '46265', '46266', '46267']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 46263:46263 -p 46264:46264 -p 46265:46265 -p 46266:46266 -p 46267:46267 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46265 --rest-port=46263 --tcp-port=46264 --discv5-udp-port=46266 --rest-address=0.0.0.0 --nat=extip:172.18.179.125 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dbc63cb82837e5afb1b1dfdad1a2e0a61aecd166e930f60ed0b83c8ea17d0fcb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46267 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QJRg9nQVGGUEiF1CixZKP2zKKJyYeNbrdVT544IhB_gtOUe2gOUHoMktiWpRLuAPwEI5VnTXyzaIg3yeixiIeBoBgmlkgnY0gmlwhKwSMCiKbXVsdGlhZGRyc4wACgSsEjAoBjhg3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMAKggaPu_zCP_WW9ttykt1JAjw_sYdWmm8LhRIcrvomYN0Y3CCOF-DdWRwgjhhhXdha3UyBQ --filternode=/ip4/172.18.48.40/tcp/14431/p2p/16Uiu2HAmCfdXKkhfcUQc3UNHCV4w3sHdyaEu8VUeGAefhrZkTV3v
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.179.125 waku 611f20286e38627ec90259c599d3d157f86423613bd61f330bce155b8ec8abcc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 611f20286e38. Setting up logs at ./log/docker/node2_2024-09-16_04-18-33__694e1d46-84a2-4082-acf2-8913b1e44da6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 46263
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46263/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46263/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.179.125/tcp/46264/p2p/16Uiu2HAkvVMnMDBSJT5eEaJK1u3tNwxK4jq3eY48txQ5ciSpQwNt","/ip4/172.18.179.125/tcp/46265/ws/p2p/16Uiu2HAkvVMnMDBSJT5eEaJK1u3tNwxK4jq3eY48txQ5ciSpQwNt"],"enrUri":"enr:-LO4QADeGH5XUtvKUe6z8iIDq-BD5nLrQWoPjrrSM2l5l505Q5yN3FHcY30lJ076WyvRNmXPdaCQu3ufue99EwO_6AEBgmlkgnY0gmlwhKwSs32KbXVsdGlhZGRyc4wACgSsErN9BrS53QOCcnOFAAMBAACJc2VjcDI1NmsxoQIPzW80ZrYEpVSWt8LacK4fNT6tZN5fegeEx-3JHb_0dYN0Y3CCtLiDdWRwgrS6hXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46263/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.48.40/tcp/14431/p2p/16Uiu2HAmCfdXKkhfcUQc3UNHCV4w3sHdyaEu8VUeGAefhrZkTV3v"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14430/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46263/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "f545ece0-a0e3-46a5-a7cb-5f4c6b65f976", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"f545ece0-a0e3-46a5-a7cb-5f4c6b65f976","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14430/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46263/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1726460317301593600,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:46263/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345678901234567890123456789012345678901234567890", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"12345678901234567890123456789012345678901234567890","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14430/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46263/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:46263/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto. Response content: b'Not subscribed to topic: /test/1/waku-filter/proto'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id af156a2ad085
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 611f20286e38
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.