{"uid":"39ec18b68bc94c43","name":"test_publish_after_node1_restarts","fullName":"tests.relay.test_publish.TestRelayPublish#test_publish_after_node1_restarts","historyId":"ac4c595ebfa5f8d963dda5d51f886384","time":{"start":1726460747086,"stop":1726460752154,"duration":5068},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1726459961650,"stop":1726459961650,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors","time":{"start":1726460742212,"stop":1726460742213,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1726460742212,"stop":1726460742212,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1726460742213,"stop":1726460742214,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1726460742213,"stop":1726460742213,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1726460742213,"stop":1726460742213,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1726460742213,"stop":1726460742213,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"relay_setup","time":{"start":1726460742214,"stop":1726460742214,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_relay_nodes","time":{"start":1726460742214,"stop":1726460746920,"duration":4706},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1726460746860,"stop":1726460746920,"duration":60},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.relay.test_publish.TestRelayPublish object at 0x7f5c485e85c0>, <src.node.waku_node.WakuNode object at 0x7f5c485e8890>, ['/ip4/172.18.25.1/tcp/7844/p2p/16Uiu2HAmR7noEkVfWZLzQz3nD6xt8DCwbPRSwMwBhtpw9YGmdWw4'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_main_relay_nodes","time":{"start":1726460746920,"stop":1726460746959,"duration":39},"status":"passed","steps":[{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1726460746921,"stop":1726460746959,"duration":38},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7f5c436a8e90>, <src.node.waku_node.WakuNode object at 0x7f5c485e8890>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"relay_warm_up","time":{"start":1726460746959,"stop":1726460747085,"duration":126},"status":"passed","steps":[{"name":"wait_for_published_message_to_reach_relay_peer","time":{"start":1726460746959,"stop":1726460747085,"duration":126},"status":"passed","steps":[{"name":"check_published_message_reaches_relay_peer","time":{"start":1726460746960,"stop":1726460747085,"duration":125},"status":"passed","steps":[{"name":"assert_received_message","time":{"start":1726460747076,"stop":1726460747076,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1726460746959506944}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1726460747085,"stop":1726460747085,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1726460746959506944}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1726460746959506944}"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"timeout_duration","value":"120"},{"name":"time_between_retries","value":"1"},{"name":"pubsub_topic","value":"None"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"status":"passed","steps":[{"name":"check_published_message_reaches_relay_peer","time":{"start":1726460747086,"stop":1726460747203,"duration":117},"status":"passed","steps":[{"name":"create_message","time":{"start":1726460747086,"stop":1726460747086,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1726460747198,"stop":1726460747198,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1726460747086200576}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1726460747203,"stop":1726460747203,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1726460747086200576}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"None"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_and_publish_with_retry","time":{"start":1726460750828,"stop":1726460752153,"duration":1325},"status":"passed","steps":[{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1726460750828,"stop":1726460750899,"duration":71},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7f5c436a8e90>, <src.node.waku_node.WakuNode object at 0x7f5c485e8890>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_published_message_reaches_relay_peer","time":{"start":1726460750899,"stop":1726460751024,"duration":125},"status":"failed","statusMessage":"AssertionError: Peer NODE_2:wakuorg/nwaku:latest couldn't find any messages\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.5/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/relay.py\", line 125, in check_published_message_reaches_relay_peer\n    assert get_messages_response, f\"Peer NODE_{index + 1}:{peer.image} couldn't find any messages\"\n           ^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"create_message","time":{"start":1726460750899,"stop":1726460750900,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1726460751020,"stop":1726460751020,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1726460750899499264}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"None"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1726460752025,"stop":1726460752031,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7f5c436a8e90>, <src.node.waku_node.WakuNode object at 0x7f5c485e8890>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_published_message_reaches_relay_peer","time":{"start":1726460752031,"stop":1726460752153,"duration":122},"status":"passed","steps":[{"name":"create_message","time":{"start":1726460752032,"stop":1726460752032,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1726460752144,"stop":1726460752144,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1726460752031535872}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1726460752153,"stop":1726460752153,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1726460752031535872}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"None"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<tests.relay.test_publish.TestRelayPublish object at 0x7f5c485e85c0>, [<src.node.waku_node.WakuNode object at 0x7f5c436a8e90>, <src.node.waku_node.WakuNode object at 0x7f5c485e8890>], ['/waku/2/rs/3/1'])"}],"shouldDisplayMessage":false,"stepsCount":9,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"9ce59e0af101dcb6","name":"log","source":"9ce59e0af101dcb6.txt","type":"text/plain","size":19399}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":14,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1726460752156,"stop":1726460752160,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1726460752161,"stop":1726460757393,"duration":5232},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors::0","time":{"start":1726460757394,"stop":1726460757433,"duration":39},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1726460757434,"stop":1726460757434,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1726461960889,"stop":1726461960890,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"flaky(reruns=5)"},{"name":"tag","value":"@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')"},{"name":"parentSuite","value":"tests.relay"},{"name":"suite","value":"test_publish"},{"name":"subSuite","value":"TestRelayPublish"},{"name":"host","value":"fv-az740-747"},{"name":"thread","value":"2155-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.relay.test_publish"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":0,"passed":55,"unknown":0,"total":55},"items":[{"uid":"ce5b2462e2c38bec","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/361//#testresult/ce5b2462e2c38bec","status":"passed","time":{"start":1726374324017,"stop":1726374328989,"duration":4972}},{"uid":"62d2e87188870ed3","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/360//#testresult/62d2e87188870ed3","status":"passed","time":{"start":1726287919131,"stop":1726287925139,"duration":6008}},{"uid":"8b21a67dde4cadcf","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/359//#testresult/8b21a67dde4cadcf","status":"passed","time":{"start":1726201507548,"stop":1726201537121,"duration":29573}},{"uid":"d39438a0ca8faf3f","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/358//#testresult/d39438a0ca8faf3f","status":"passed","time":{"start":1726121565057,"stop":1726121594653,"duration":29596}},{"uid":"74b2720df6d64652","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/357//#testresult/74b2720df6d64652","status":"passed","time":{"start":1726115210998,"stop":1726115240799,"duration":29801}},{"uid":"5eb5fbbf8a71344f","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/356//#testresult/5eb5fbbf8a71344f","status":"passed","time":{"start":1726047466417,"stop":1726047495556,"duration":29139}},{"uid":"7cc268eeba7065e6","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/355//#testresult/7cc268eeba7065e6","status":"passed","time":{"start":1726028857585,"stop":1726028886959,"duration":29374}},{"uid":"bb97bec95ad2b9f8","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/354//#testresult/bb97bec95ad2b9f8","status":"passed","time":{"start":1725981440669,"stop":1725981469675,"duration":29006}},{"uid":"85d77227798ca571","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/353//#testresult/85d77227798ca571","status":"passed","time":{"start":1725976103076,"stop":1725976132782,"duration":29706}},{"uid":"b7254bdaa816c81c","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/352//#testresult/b7254bdaa816c81c","status":"passed","time":{"start":1725942332446,"stop":1725942361475,"duration":29029}},{"uid":"f2b0ddc2573cbbab","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/351//#testresult/f2b0ddc2573cbbab","status":"passed","time":{"start":1725855935969,"stop":1725855964847,"duration":28878}},{"uid":"304d5c262e263274","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/350//#testresult/304d5c262e263274","status":"passed","time":{"start":1725769508340,"stop":1725769537568,"duration":29228}},{"uid":"951f7dc15f7b4661","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/349//#testresult/951f7dc15f7b4661","status":"passed","time":{"start":1725683147830,"stop":1725683177011,"duration":29181}},{"uid":"87b4316a94187cec","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/348//#testresult/87b4316a94187cec","status":"passed","time":{"start":1725623921441,"stop":1725623950303,"duration":28862}},{"uid":"95dde84ba507a055","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/347//#testresult/95dde84ba507a055","status":"passed","time":{"start":1725615832082,"stop":1725615861336,"duration":29254}},{"uid":"90af5d961a1acf37","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/346//#testresult/90af5d961a1acf37","status":"passed","time":{"start":1725596711663,"stop":1725596741277,"duration":29614}},{"uid":"3aa4da5cf9baa9ee","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/345//#testresult/3aa4da5cf9baa9ee","status":"passed","time":{"start":1725510312227,"stop":1725510342101,"duration":29874}},{"uid":"677c13fc87bc7809","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/344//#testresult/677c13fc87bc7809","status":"passed","time":{"start":1725423948182,"stop":1725423977498,"duration":29316}},{"uid":"7c32489994e99c92","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/343//#testresult/7c32489994e99c92","status":"passed","time":{"start":1725337520848,"stop":1725337550620,"duration":29772}},{"uid":"e83b309c9c5d5278","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/342//#testresult/e83b309c9c5d5278","status":"passed","time":{"start":1725251121091,"stop":1725251150411,"duration":29320}}]},"tags":["@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')","flaky(reruns=5)"]},"source":"39ec18b68bc94c43.json","parameterValues":[]}