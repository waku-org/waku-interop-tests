{"uid":"d6236178d97a9954","name":"test_all_nodes_subscribed_to_the_topic","fullName":"tests.filter.test_multiple_nodes.TestFilterMultipleNodes#test_all_nodes_subscribed_to_the_topic","historyId":"1922f713c7d866af3814ecf60dd1d269","time":{"start":1706587764782,"stop":1706587774865,"duration":10083},"status":"broken","statusMessage":"docker.errors.APIError: 500 Server Error for http+docker://localhost/v1.43/containers/a26eb1beb5d008abfb8eea72438ccb5d4262a5c47de01da4d227df0aab5bb85e/start: Internal Server Error (\"driver failed programming external connectivity on endpoint optimistic_varahamihira (be632280bb97b12051e0438c93b8bcbe7aadf43958fb4899b0bea212b29d57cd): Error starting userland proxy: listen tcp4 0.0.0.0:39540: bind: address already in use\")","statusTrace":"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/docker/api/client.py:265: in _raise_for_status\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http+docker://localhost/v1.43/containers/a26eb1beb5d008abfb8eea72438ccb5d4262a5c47de01da4d227df0aab5bb85e/start\n\nThe above exception was the direct cause of the following exception:\ntests/filter/test_multiple_nodes.py:13: in test_all_nodes_subscribed_to_the_topic\n    self.setup_optional_filter_nodes()\nsrc/steps/filter.py:75: in setup_optional_filter_nodes\n    node.start(relay=\"false\", filter=\"true\", discv5_bootstrap_node=self.enr_uri, filternode=self.multiaddr_with_id)\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/tenacity/__init__.py:289: in wrapped_f\n    return self(f, *args, **kw)\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/tenacity/__init__.py:379: in __call__\n    do = self.iter(retry_state=retry_state)\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/tenacity/__init__.py:325: in iter\n    raise retry_exc.reraise()\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/tenacity/__init__.py:158: in reraise\n    raise self.last_attempt.result()\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/concurrent/futures/_base.py:449: in result\n    return self.__get_result()\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result\n    raise self._exception\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/tenacity/__init__.py:382: in __call__\n    result = fn(*args, **kwargs)\nsrc/node/waku_node.py:77: in start\n    self._container = self._docker_manager.start_container(self._docker_manager.image, self._ports, default_args, self._log_path, self._ext_ip)\nsrc/node/docker_mananger.py:44: in start_container\n    container = self._client.containers.run(image_name, command=cli_args, ports=port_bindings, detach=True, remove=True, auto_remove=True)\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/docker/models/containers.py:880: in run\n    container.start()\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/docker/models/containers.py:417: in start\n    return self.client.api.start(self.id, **kwargs)\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/docker/utils/decorators.py:19: in wrapped\n    return f(self, resource_id, *args, **kwargs)\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/docker/api/container.py:1135: in start\n    self._raise_for_status(res)\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/docker/api/client.py:267: in _raise_for_status\n    raise create_api_error_from_http_exception(e) from e\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/docker/errors.py:39: in create_api_error_from_http_exception\n    raise cls(e, response=response, explanation=explanation) from e\nE   docker.errors.APIError: 500 Server Error for http+docker://localhost/v1.43/containers/a26eb1beb5d008abfb8eea72438ccb5d4262a5c47de01da4d227df0aab5bb85e/start: Internal Server Error (\"driver failed programming external connectivity on endpoint optimistic_varahamihira (be632280bb97b12051e0438c93b8bcbe7aadf43958fb4899b0bea212b29d57cd): Error starting userland proxy: listen tcp4 0.0.0.0:39540: bind: address already in use\")","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1706587752243,"stop":1706587752243,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1706587752243,"stop":1706587752243,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1706587752243,"stop":1706587752243,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1706587752243,"stop":1706587752243,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"filter_setup","time":{"start":1706587752244,"stop":1706587752244,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_relay_node","time":{"start":1706587752244,"stop":1706587762943,"duration":10699},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1706587752244,"stop":1706587752244,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_filter_node","time":{"start":1706587762943,"stop":1706587764782,"duration":1839},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"docker.errors.APIError: 500 Server Error for http+docker://localhost/v1.43/containers/a26eb1beb5d008abfb8eea72438ccb5d4262a5c47de01da4d227df0aab5bb85e/start: Internal Server Error (\"driver failed programming external connectivity on endpoint optimistic_varahamihira (be632280bb97b12051e0438c93b8bcbe7aadf43958fb4899b0bea212b29d57cd): Error starting userland proxy: listen tcp4 0.0.0.0:39540: bind: address already in use\")","statusTrace":"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/docker/api/client.py:265: in _raise_for_status\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http+docker://localhost/v1.43/containers/a26eb1beb5d008abfb8eea72438ccb5d4262a5c47de01da4d227df0aab5bb85e/start\n\nThe above exception was the direct cause of the following exception:\ntests/filter/test_multiple_nodes.py:13: in test_all_nodes_subscribed_to_the_topic\n    self.setup_optional_filter_nodes()\nsrc/steps/filter.py:75: in setup_optional_filter_nodes\n    node.start(relay=\"false\", filter=\"true\", discv5_bootstrap_node=self.enr_uri, filternode=self.multiaddr_with_id)\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/tenacity/__init__.py:289: in wrapped_f\n    return self(f, *args, **kw)\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/tenacity/__init__.py:379: in __call__\n    do = self.iter(retry_state=retry_state)\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/tenacity/__init__.py:325: in iter\n    raise retry_exc.reraise()\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/tenacity/__init__.py:158: in reraise\n    raise self.last_attempt.result()\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/concurrent/futures/_base.py:449: in result\n    return self.__get_result()\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result\n    raise self._exception\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/tenacity/__init__.py:382: in __call__\n    result = fn(*args, **kwargs)\nsrc/node/waku_node.py:77: in start\n    self._container = self._docker_manager.start_container(self._docker_manager.image, self._ports, default_args, self._log_path, self._ext_ip)\nsrc/node/docker_mananger.py:44: in start_container\n    container = self._client.containers.run(image_name, command=cli_args, ports=port_bindings, detach=True, remove=True, auto_remove=True)\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/docker/models/containers.py:880: in run\n    container.start()\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/docker/models/containers.py:417: in start\n    return self.client.api.start(self.id, **kwargs)\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/docker/utils/decorators.py:19: in wrapped\n    return f(self, resource_id, *args, **kwargs)\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/docker/api/container.py:1135: in start\n    self._raise_for_status(res)\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/docker/api/client.py:267: in _raise_for_status\n    raise create_api_error_from_http_exception(e) from e\n/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/docker/errors.py:39: in create_api_error_from_http_exception\n    raise cls(e, response=response, explanation=explanation) from e\nE   docker.errors.APIError: 500 Server Error for http+docker://localhost/v1.43/containers/a26eb1beb5d008abfb8eea72438ccb5d4262a5c47de01da4d227df0aab5bb85e/start: Internal Server Error (\"driver failed programming external connectivity on endpoint optimistic_varahamihira (be632280bb97b12051e0438c93b8bcbe7aadf43958fb4899b0bea212b29d57cd): Error starting userland proxy: listen tcp4 0.0.0.0:39540: bind: address already in use\")","steps":[],"attachments":[{"uid":"99cd724ea4f85ad9","name":"log","source":"99cd724ea4f85ad9.txt","type":"text/plain","size":13384}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1706587775026,"stop":1706587775027,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1706587775028,"stop":1706587781108,"duration":6080},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1706587781109,"stop":1706587781111,"duration":2},"status":"passed","steps":[],"attachments":[{"uid":"6b49383a2371eba0","name":"node2_2024-01-30_04-09-12__67422bbf-10e0-41a2-a871-e0ca4844b8ff__harbor.status.im_wakuorg_nwaku:latest.log","source":"6b49383a2371eba0.txt","type":"text/plain","size":18624},{"uid":"2b2159c1c7244b43","name":"additional_node1_2024-01-30_04-09-12__67422bbf-10e0-41a2-a871-e0ca4844b8ff__harbor.status.im_wakuorg_nwaku:latest.log","source":"2b2159c1c7244b43.txt","type":"text/plain","size":18632},{"uid":"76139423e83a51b7","name":"node1_2024-01-30_04-09-12__67422bbf-10e0-41a2-a871-e0ca4844b8ff__harbor.status.im_wakuorg_nwaku:latest.log","source":"76139423e83a51b7.txt","type":"text/plain","size":38202}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":3,"hasContent":true,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1706588206559,"stop":1706588206559,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"@pytest.mark.usefixtures('setup_main_relay_node', 'setup_main_filter_node')"},{"name":"parentSuite","value":"tests.filter"},{"name":"suite","value":"test_multiple_nodes"},{"name":"subSuite","value":"TestFilterMultipleNodes"},{"name":"host","value":"fv-az847-190"},{"name":"thread","value":"2098-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.filter.test_multiple_nodes"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["@pytest.mark.usefixtures('setup_main_relay_node', 'setup_main_filter_node')"]},"source":"d6236178d97a9954.json","parameterValues":[]}