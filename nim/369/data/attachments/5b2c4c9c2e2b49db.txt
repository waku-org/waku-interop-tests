[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_version with id: 2024-09-23_04-19-19__395e27ad-40f1-4bba-8f47-c23e125a1ff3
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-23_04-19-19__395e27ad-40f1-4bba-8f47-c23e125a1ff3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.74.99
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['4767', '4768', '4769', '4770', '4771']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 4767:4767 -p 4768:4768 -p 4769:4769 -p 4770:4770 -p 4771:4771 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4769 --rest-port=4767 --tcp-port=4768 --discv5-udp-port=4770 --rest-address=0.0.0.0 --nat=extip:172.18.74.99 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e1a3fbfcaef401eb52b6329bbed29316fadbe4ed2999317b3bdf22d2f02b3dfb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4771 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.74.99 waku 239cf1ac4b4c24e3e3a58ab893a3a329ce1ce9be36cfdf4237a95b577d812ccb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 239cf1ac4b4c. Setting up logs at ./log/docker/receiving_node1_2024-09-23_04-19-19__395e27ad-40f1-4bba-8f47-c23e125a1ff3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 4767
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4767/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4767/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.74.99/tcp/4768/p2p/16Uiu2HAm7K4ST5AMbmNYkw4adm1Az9GgKqSPSvWkVmQ72NTAuA6p","/ip4/172.18.74.99/tcp/4769/ws/p2p/16Uiu2HAm7K4ST5AMbmNYkw4adm1Az9GgKqSPSvWkVmQ72NTAuA6p"],"enrUri":"enr:-LO4QKz3lbc8T5sWsak8n0FAik-9mWyIe0qLtKpkWS3qxmVfN2_96g-rm11qZ75huVL1wIUTRrj8MGVXa_0-kbAOtVIBgmlkgnY0gmlwhKwSSmOKbXVsdGlhZGRyc4wACgSsEkpjBhKh3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKwmpKWJqoutUA1UOOY1sdJQmP6mfjGexHq2czrPy55RYN0Y3CCEqCDdWRwghKihXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-23_04-19-19__395e27ad-40f1-4bba-8f47-c23e125a1ff3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.199.188
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['52542', '52543', '52544', '52545', '52546']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 52542:52542 -p 52543:52543 -p 52544:52544 -p 52545:52545 -p 52546:52546 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52544 --rest-port=52542 --tcp-port=52543 --discv5-udp-port=52545 --rest-address=0.0.0.0 --nat=extip:172.18.199.188 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a8dfd2098d15df6ea73fbb5c7649d735eab19ebd0a41a64e5f977aa571f39bea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52546 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.199.188 waku b2704a59ded68a6966e1fadadfa1156c417a27a13d9ae64077fd83768ee75667
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b2704a59ded6. Setting up logs at ./log/docker/receiving_node2_2024-09-23_04-19-19__395e27ad-40f1-4bba-8f47-c23e125a1ff3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 52542
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52542/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52542/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.199.188/tcp/52543/p2p/16Uiu2HAmLTbDct3xYbGXKGAZ5Jgw3Rd8MUhAZBoguL1NECDqZkpC","/ip4/172.18.199.188/tcp/52544/ws/p2p/16Uiu2HAmLTbDct3xYbGXKGAZ5Jgw3Rd8MUhAZBoguL1NECDqZkpC"],"enrUri":"enr:-LO4QGa_BSsPQn3NXhT74xQvT5FJGpJLdGTPRkQhGU2PwCi4ffgH0LlZ_kwQ-fOUxsaJ1ATEcQjrf9EQSiQi44hV3TQBgmlkgnY0gmlwhKwSx7yKbXVsdGlhZGRyc4wACgSsEse8Bs1A3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNz8fNnOLqzUE9UZdQD34cYSPcOLlOd_A_9eRRR6Pr5fYN0Y3CCzT-DdWRwgs1BhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52542/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.74.99/tcp/4768/p2p/16Uiu2HAm7K4ST5AMbmNYkw4adm1Az9GgKqSPSvWkVmQ72NTAuA6p"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-23_04-19-19__395e27ad-40f1-4bba-8f47-c23e125a1ff3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.179.182
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['30345', '30346', '30347', '30348', '30349']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 30345:30345 -p 30346:30346 -p 30347:30347 -p 30348:30348 -p 30349:30349 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30347 --rest-port=30345 --tcp-port=30346 --discv5-udp-port=30348 --rest-address=0.0.0.0 --nat=extip:172.18.179.182 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e1c25e6ba12beb85059fcddfee0c98cbe4ceff1f7e1976859b6eb23ebbbfa9b9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30349 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QKz3lbc8T5sWsak8n0FAik-9mWyIe0qLtKpkWS3qxmVfN2_96g-rm11qZ75huVL1wIUTRrj8MGVXa_0-kbAOtVIBgmlkgnY0gmlwhKwSSmOKbXVsdGlhZGRyc4wACgSsEkpjBhKh3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKwmpKWJqoutUA1UOOY1sdJQmP6mfjGexHq2czrPy55RYN0Y3CCEqCDdWRwghKihXdha3UyCQ --lightpushnode=/ip4/172.18.74.99/tcp/4768/p2p/16Uiu2HAm7K4ST5AMbmNYkw4adm1Az9GgKqSPSvWkVmQ72NTAuA6p --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.179.182 waku b05554554c7157c5b004e1121cde2f9eff6ab293f95362f08586ca72614ea677
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b05554554c71. Setting up logs at ./log/docker/lightpush_node1_2024-09-23_04-19-19__395e27ad-40f1-4bba-8f47-c23e125a1ff3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 30345
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30345/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30345/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.179.182/tcp/30346/p2p/16Uiu2HAkxhik6HwHEEJmuD1vAXpyJTzVV3p33e8rort3toEZVzpW","/ip4/172.18.179.182/tcp/30347/ws/p2p/16Uiu2HAkxhik6HwHEEJmuD1vAXpyJTzVV3p33e8rort3toEZVzpW"],"enrUri":"enr:-LO4QJ8TavOn3fVnTP4_AdC5UcjPivWSv16y6yNoC9Rx7oaiMCCwKA5ZejGoBUEG48O-u2isXfDlhdCy8frnur7tE2QBgmlkgnY0gmlwhKwSs7aKbXVsdGlhZGRyc4wACgSsErO2BnaL3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIwr3qN1CRbfc-pH_twSuKuBHgAj7FZdyIpLtYBXW1aR4N0Y3CCdoqDdWRwgnaMhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30345/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.74.99/tcp/4768/p2p/16Uiu2HAm7K4ST5AMbmNYkw4adm1Az9GgKqSPSvWkVmQ72NTAuA6p"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30345/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.199.188/tcp/52543/p2p/16Uiu2HAmLTbDct3xYbGXKGAZ5Jgw3Rd8MUhAZBoguL1NECDqZkpC"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4767/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52542/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30345/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727065164592387328, "version": 10}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4767/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1727065164592387328,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52542/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1727065164592387328,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 239cf1ac4b4c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b2704a59ded6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b05554554c71
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.