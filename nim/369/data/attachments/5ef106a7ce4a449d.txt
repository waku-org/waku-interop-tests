[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2024-09-23_04-35-44__1a40d170-e05c-49c0-b0e3-9d7ed48277c7
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-09-23_04-35-44__1a40d170-e05c-49c0-b0e3-9d7ed48277c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.137.88
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['18836', '18837', '18838', '18839', '18840']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 18836:18836 -p 18837:18837 -p 18838:18838 -p 18839:18839 -p 18840:18840 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18838 --rest-port=18836 --tcp-port=18837 --discv5-udp-port=18839 --rest-address=0.0.0.0 --nat=extip:172.18.137.88 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fe5694bcf70b0c6a7b5d9fd1baec0b23fd71082578efcba951fddfbfeb8eaaeb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18840 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.137.88 waku e22af94c2d8a281315a8a845541f92aa62d1d82d4fe5b2b98ce7091942245faf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e22af94c2d8a. Setting up logs at ./log/docker/publishing_node1_2024-09-23_04-35-44__1a40d170-e05c-49c0-b0e3-9d7ed48277c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 18836
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18836/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18836/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.137.88/tcp/18837/p2p/16Uiu2HAm3Gqn3JMdQyzb9HU7W1kUMNQu8QZqQ6bh1WCdLuWspqt1","/ip4/172.18.137.88/tcp/18838/ws/p2p/16Uiu2HAm3Gqn3JMdQyzb9HU7W1kUMNQu8QZqQ6bh1WCdLuWspqt1"],"enrUri":"enr:-LO4QHL01PSufrtQkhAr9V4QWvVp36aULMv3LHJOnj8FimAyeCIJpCyiMtHZI3yvkZdg2sAwT__e9d2OfG61eIfc4a4BgmlkgnY0gmlwhKwSiViKbXVsdGlhZGRyc4wACgSsEolYBkmW3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ0mliWHgoGlAlS0Lx1YhDTvSMgxgD4H7QlKduO2_WyZoN0Y3CCSZWDdWRwgkmXhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node2_2024-09-23_04-35-44__1a40d170-e05c-49c0-b0e3-9d7ed48277c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.143.30
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['51863', '51864', '51865', '51866', '51867']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 51863:51863 -p 51864:51864 -p 51865:51865 -p 51866:51866 -p 51867:51867 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51865 --rest-port=51863 --tcp-port=51864 --discv5-udp-port=51866 --rest-address=0.0.0.0 --nat=extip:172.18.143.30 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=52183c0d126b18aad76fad6d7d2cadccffcb3ed2e6beafeb55606db5ed1ca9ab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51867 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.143.30 waku 3b07afc20960a7c78c79076aa77a498d4d265655983e52f5f000c9b8a9d9966c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3b07afc20960. Setting up logs at ./log/docker/publishing_node2_2024-09-23_04-35-44__1a40d170-e05c-49c0-b0e3-9d7ed48277c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 51863
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51863/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51863/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.143.30/tcp/51864/p2p/16Uiu2HAmGj9tsbRbTbjQ2TbWUcsqCXX6p9YV8LJbNzfz7Hf6d9aq","/ip4/172.18.143.30/tcp/51865/ws/p2p/16Uiu2HAmGj9tsbRbTbjQ2TbWUcsqCXX6p9YV8LJbNzfz7Hf6d9aq"],"enrUri":"enr:-LO4QC7jHi5SaExGFMzxMUrXNO9mYnpZ98OEMkriAGaT5piiJvJ2TiNeWv9TFXJfsFn3NB-xsGUI4klgx2CcMnR8z00BgmlkgnY0gmlwhKwSjx6KbXVsdGlhZGRyc4wACgSsEo8eBsqZ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM8f9zspjJABG6Jjtxcoz0xQjcB17ODVHx9bIkdyJ8ZeoN0Y3CCypiDdWRwgsqahXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51863/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.137.88/tcp/18837/p2p/16Uiu2HAm3Gqn3JMdQyzb9HU7W1kUMNQu8QZqQ6bh1WCdLuWspqt1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-09-23_04-35-44__1a40d170-e05c-49c0-b0e3-9d7ed48277c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.165.178
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['31082', '31083', '31084', '31085', '31086']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 31082:31082 -p 31083:31083 -p 31084:31084 -p 31085:31085 -p 31086:31086 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31084 --rest-port=31082 --tcp-port=31083 --discv5-udp-port=31085 --rest-address=0.0.0.0 --nat=extip:172.18.165.178 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=572b9bad7eb4cfc3dac187eadbcd2bbdabbb15eb24aba8f1b73298fed9c6eec3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31086 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QHL01PSufrtQkhAr9V4QWvVp36aULMv3LHJOnj8FimAyeCIJpCyiMtHZI3yvkZdg2sAwT__e9d2OfG61eIfc4a4BgmlkgnY0gmlwhKwSiViKbXVsdGlhZGRyc4wACgSsEolYBkmW3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ0mliWHgoGlAlS0Lx1YhDTvSMgxgD4H7QlKduO2_WyZoN0Y3CCSZWDdWRwgkmXhXdha3UyCw --storenode=/ip4/172.18.137.88/tcp/18837/p2p/16Uiu2HAm3Gqn3JMdQyzb9HU7W1kUMNQu8QZqQ6bh1WCdLuWspqt1 --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.137.88/tcp/18837/p2p/16Uiu2HAm3Gqn3JMdQyzb9HU7W1kUMNQu8QZqQ6bh1WCdLuWspqt1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.165.178 waku f0214a4ca27f8a2fbf066600ebbd808fa08113620bd76dc2452b66075455b25d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f0214a4ca27f. Setting up logs at ./log/docker/store_node1_2024-09-23_04-35-44__1a40d170-e05c-49c0-b0e3-9d7ed48277c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 31082
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31082/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31082/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.165.178/tcp/31083/p2p/16Uiu2HAmBGveDBAYR2LrbDLxP8Zn6eMmRShjLnvp8PmBX1XhBdTD","/ip4/172.18.165.178/tcp/31084/ws/p2p/16Uiu2HAmBGveDBAYR2LrbDLxP8Zn6eMmRShjLnvp8PmBX1XhBdTD"],"enrUri":"enr:-LO4QCxl86XtuUoyiKU1CukR1tuePWTAJ8rxszzC1li-NIXob9LY4yi3xy3gjBXD5A1kvtmLrbArt_rDESBcE5TtwrMBgmlkgnY0gmlwhKwSpbKKbXVsdGlhZGRyc4wACgSsEqWyBnls3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLrfVei7cyxYNUggSZyBHyRCmwPcjzBUr7AzoZtGT000IN0Y3CCeWuDdWRwgnlthXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31082/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.137.88/tcp/18837/p2p/16Uiu2HAm3Gqn3JMdQyzb9HU7W1kUMNQu8QZqQ6bh1WCdLuWspqt1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31082/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.143.30/tcp/51864/p2p/16Uiu2HAmGj9tsbRbTbjQ2TbWUcsqCXX6p9YV8LJbNzfz7Hf6d9aq"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18836/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51863/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31082/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727066149322236672}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18836/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"RmyZ6ZkVThVa9y2Q/4DAqVd6lals1tyQxzmhEqkzyJo="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31082/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"4b002d0e516759f6b2d6","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"RmyZ6ZkVThVa9y2Q/4DAqVd6lals1tyQxzmhEqkzyJo="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e22af94c2d8a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3b07afc20960
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f0214a4ca27f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.