[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_no_timestamp with id: 2024-09-23_04-19-15__f7186e69-2883-42da-a61e-998c5e6092d8
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-23_04-19-15__f7186e69-2883-42da-a61e-998c5e6092d8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.238.120
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['36776', '36777', '36778', '36779', '36780']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 36776:36776 -p 36777:36777 -p 36778:36778 -p 36779:36779 -p 36780:36780 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36778 --rest-port=36776 --tcp-port=36777 --discv5-udp-port=36779 --rest-address=0.0.0.0 --nat=extip:172.18.238.120 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5afbff7da02dcb25c1c26c5be80a64dcd94cd501fd0ab99fb2dae3ff4b044dab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36780 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.238.120 waku e79b0447dc26fc250409fa6f90d189c0f85f3894e712a122d810a4c1fdc48615
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e79b0447dc26. Setting up logs at ./log/docker/receiving_node1_2024-09-23_04-19-15__f7186e69-2883-42da-a61e-998c5e6092d8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 36776
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36776/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36776/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.238.120/tcp/36777/p2p/16Uiu2HAmEyZkTijELEPpSxHwRcoHoZ1teGcH2EfbjSF1GyDENtpp","/ip4/172.18.238.120/tcp/36778/ws/p2p/16Uiu2HAmEyZkTijELEPpSxHwRcoHoZ1teGcH2EfbjSF1GyDENtpp"],"enrUri":"enr:-LO4QPqp30hKjcNXkCOIB8lOcilUNIQhhVoyj8LgoEAs3yWPChpcMf-r0VisO60AI_fV3hHXD9TwDgqOZ97pDtpSFwgBgmlkgnY0gmlwhKwS7niKbXVsdGlhZGRyc4wACgSsEu54Bo-q3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMieZfmpo95dcDIm2AvssM6V_cI1ZhuID7qvL_fbUS3GYN0Y3CCj6mDdWRwgo-rhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-23_04-19-15__f7186e69-2883-42da-a61e-998c5e6092d8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.164.79
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['35174', '35175', '35176', '35177', '35178']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 35174:35174 -p 35175:35175 -p 35176:35176 -p 35177:35177 -p 35178:35178 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35176 --rest-port=35174 --tcp-port=35175 --discv5-udp-port=35177 --rest-address=0.0.0.0 --nat=extip:172.18.164.79 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3fadabb5901bea0a4a187ccda58b65402d0bcc2bbbaf3b76dff20a6af8e12c11 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35178 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.164.79 waku f428390a115dd8d1374274420b887e83c60e3c6731ee1fcc22efdc516a201c92
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f428390a115d. Setting up logs at ./log/docker/receiving_node2_2024-09-23_04-19-15__f7186e69-2883-42da-a61e-998c5e6092d8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 35174
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35174/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35174/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.164.79/tcp/35175/p2p/16Uiu2HAmEEtxDvZzyi8TmmJMz7zM16oqdsVHfXFSM7to4LQ1aYaA","/ip4/172.18.164.79/tcp/35176/ws/p2p/16Uiu2HAmEEtxDvZzyi8TmmJMz7zM16oqdsVHfXFSM7to4LQ1aYaA"],"enrUri":"enr:-LO4QEDIQyFELg_O8ugVoRjkmQG1R4eMcByRtdefR2NbcHMRJVQHICLwMaV2l2Vvj2RTGseCrNi2GiQkCx2nEjSsYJwBgmlkgnY0gmlwhKwSpE-KbXVsdGlhZGRyc4wACgSsEqRPBolo3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMXi1TMWPg1faR0Iv3W2wE-pV7rn-N17af78gr_3OCJp4N0Y3CCiWeDdWRwgolphXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35174/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.238.120/tcp/36777/p2p/16Uiu2HAmEyZkTijELEPpSxHwRcoHoZ1teGcH2EfbjSF1GyDENtpp"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-23_04-19-15__f7186e69-2883-42da-a61e-998c5e6092d8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.248.116
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['47308', '47309', '47310', '47311', '47312']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 47308:47308 -p 47309:47309 -p 47310:47310 -p 47311:47311 -p 47312:47312 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47310 --rest-port=47308 --tcp-port=47309 --discv5-udp-port=47311 --rest-address=0.0.0.0 --nat=extip:172.18.248.116 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=86543e14d0f7a1ef35d997badc8b8facd490d737fdd236cfa723ed1f4f6ceecd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47312 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QPqp30hKjcNXkCOIB8lOcilUNIQhhVoyj8LgoEAs3yWPChpcMf-r0VisO60AI_fV3hHXD9TwDgqOZ97pDtpSFwgBgmlkgnY0gmlwhKwS7niKbXVsdGlhZGRyc4wACgSsEu54Bo-q3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMieZfmpo95dcDIm2AvssM6V_cI1ZhuID7qvL_fbUS3GYN0Y3CCj6mDdWRwgo-rhXdha3UyCQ --lightpushnode=/ip4/172.18.238.120/tcp/36777/p2p/16Uiu2HAmEyZkTijELEPpSxHwRcoHoZ1teGcH2EfbjSF1GyDENtpp --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.248.116 waku 032aba81c101548b7ed2479c57368d687939ff30f734ed0dfdedea25fa7114d3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 032aba81c101. Setting up logs at ./log/docker/lightpush_node1_2024-09-23_04-19-15__f7186e69-2883-42da-a61e-998c5e6092d8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 47308
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47308/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47308/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.248.116/tcp/47309/p2p/16Uiu2HAky6v1nDJNH7UeszUvtRFK3c7oZAQj2arX75MHg8xNsFUA","/ip4/172.18.248.116/tcp/47310/ws/p2p/16Uiu2HAky6v1nDJNH7UeszUvtRFK3c7oZAQj2arX75MHg8xNsFUA"],"enrUri":"enr:-LO4QFPxayiqseDAWEIRamzs1A_jywv_kn5XKmn0y5GTKr78VFoTELjHCiLGXOPLKi7AOzgwaM0kpOYIxiXLL8lq-mcBgmlkgnY0gmlwhKwS-HSKbXVsdGlhZGRyc4wACgSsEvh0BrjO3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI2oJS27T_ue4ufqn35Du3Bpmf2CcEnMJh4IZ8rPVau34N0Y3CCuM2DdWRwgrjPhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47308/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.238.120/tcp/36777/p2p/16Uiu2HAmEyZkTijELEPpSxHwRcoHoZ1teGcH2EfbjSF1GyDENtpp"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47308/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.164.79/tcp/35175/p2p/16Uiu2HAmEEtxDvZzyi8TmmJMz7zM16oqdsVHfXFSM7to4LQ1aYaA"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36776/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35174/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47308/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36776/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1727065160338931456,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35174/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1727065160338931456,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e79b0447dc26
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f428390a115d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 032aba81c101
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.