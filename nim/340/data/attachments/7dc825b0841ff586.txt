[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_receiving_nodes__relay_node1_forwards_lightpushed_message_to_relay_node2 with id: 2024-08-31_04-18-35__6413e5fb-4608-4f2f-a9d5-366b57eb381a
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-31_04-18-35__6413e5fb-4608-4f2f-a9d5-366b57eb381a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.84.142
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['49264', '49265', '49266', '49267', '49268']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 49264:49264 -p 49265:49265 -p 49266:49266 -p 49267:49267 -p 49268:49268 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49266 --rest-port=49264 --tcp-port=49265 --discv5-udp-port=49267 --rest-address=0.0.0.0 --nat=extip:172.18.84.142 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aa1c7df8a65f9ccfaaf2cacddb1cd69a36b7c955bfcbed34ddd5ba1deb17cdd4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49268 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.84.142 waku af063f44ada757adeb5628cb3532f1fd9adf1d37df3c9a61579e1acd442b8d28
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID af063f44ada7. Setting up logs at ./log/docker/receiving_node1_2024-08-31_04-18-35__6413e5fb-4608-4f2f-a9d5-366b57eb381a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 49264
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49264/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49264/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.142/tcp/49265/p2p/16Uiu2HAkyY7dukwhCDj1Mguigb2BQKc8fjyBLHRT4hbfUUTeorLe","/ip4/172.18.84.142/tcp/49266/ws/p2p/16Uiu2HAkyY7dukwhCDj1Mguigb2BQKc8fjyBLHRT4hbfUUTeorLe"],"enrUri":"enr:-LO4QMFrUDjwpLDyRmWE_cfNTNRHF0hneB-y1aiDGPwd7LquGXu3ifr50uLd4V9kWTyM26xZjdUkFKuIIs5JU1QYlo8BgmlkgnY0gmlwhKwSVI6KbXVsdGlhZGRyc4wACgSsElSOBsBy3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI9FT5Epk4lnl6TL4i5COK-Qfoz7rRkNNQkc1DD989HV4N0Y3CCwHGDdWRwgsBzhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-31_04-18-35__6413e5fb-4608-4f2f-a9d5-366b57eb381a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.17.191
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['7803', '7804', '7805', '7806', '7807']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 7803:7803 -p 7804:7804 -p 7805:7805 -p 7806:7806 -p 7807:7807 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7805 --rest-port=7803 --tcp-port=7804 --discv5-udp-port=7806 --rest-address=0.0.0.0 --nat=extip:172.18.17.191 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bc43cda0f25f7f17a8bfe47d9c7bb714c7f6aa1ffd264d8b1ccaf4debf53b27c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7807 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.17.191 waku 90dde7e09225a82460645a9b95923b8ff6df456486e4b0c13e5e77510e293e52
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 90dde7e09225. Setting up logs at ./log/docker/receiving_node2_2024-08-31_04-18-35__6413e5fb-4608-4f2f-a9d5-366b57eb381a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 7803
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7803/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7803/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.17.191/tcp/7804/p2p/16Uiu2HAmFASgb5LCcnu5yr6Zsgj6ZXRuwHMuNUfhhuYJPxSabfXG","/ip4/172.18.17.191/tcp/7805/ws/p2p/16Uiu2HAmFASgb5LCcnu5yr6Zsgj6ZXRuwHMuNUfhhuYJPxSabfXG"],"enrUri":"enr:-LO4QM-wXdOFOcoIaZmlM1wx4DRmuMjzw1xweqw84n_i-_73YYOtM_MEYaPQYuasDhk5D98uClng8Umvf87gMeDIyREBgmlkgnY0gmlwhKwSEb-KbXVsdGlhZGRyc4wACgSsEhG_Bh593QOCcnOFAAMBAACJc2VjcDI1NmsxoQMlQv3omeIz9DAWcUV73d0yiT_M5rkoIYypyJS2UBck84N0Y3CCHnyDdWRwgh5-hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7803/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.84.142/tcp/49265/p2p/16Uiu2HAkyY7dukwhCDj1Mguigb2BQKc8fjyBLHRT4hbfUUTeorLe"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-31_04-18-35__6413e5fb-4608-4f2f-a9d5-366b57eb381a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.216.98
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['32971', '32972', '32973', '32974', '32975']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 32971:32971 -p 32972:32972 -p 32973:32973 -p 32974:32974 -p 32975:32975 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32973 --rest-port=32971 --tcp-port=32972 --discv5-udp-port=32974 --rest-address=0.0.0.0 --nat=extip:172.18.216.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1d9af97a1bbd17096eeaeacdedffb5d5ffcfcbf9d67de1c579531c3df97e1eea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32975 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QMFrUDjwpLDyRmWE_cfNTNRHF0hneB-y1aiDGPwd7LquGXu3ifr50uLd4V9kWTyM26xZjdUkFKuIIs5JU1QYlo8BgmlkgnY0gmlwhKwSVI6KbXVsdGlhZGRyc4wACgSsElSOBsBy3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI9FT5Epk4lnl6TL4i5COK-Qfoz7rRkNNQkc1DD989HV4N0Y3CCwHGDdWRwgsBzhXdha3UyCQ --lightpushnode=/ip4/172.18.84.142/tcp/49265/p2p/16Uiu2HAkyY7dukwhCDj1Mguigb2BQKc8fjyBLHRT4hbfUUTeorLe --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.216.98 waku 5ae7faa0554bf167c4be61944efb0e86b27146889a72856b52b05979b79e8102
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5ae7faa0554b. Setting up logs at ./log/docker/lightpush_node1_2024-08-31_04-18-35__6413e5fb-4608-4f2f-a9d5-366b57eb381a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 32971
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32971/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32971/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.216.98/tcp/32972/p2p/16Uiu2HAmJeHQaSsNmqEdJ6X6agJ4NS329oA4oomPR6qVHXVCJAhX","/ip4/172.18.216.98/tcp/32973/ws/p2p/16Uiu2HAmJeHQaSsNmqEdJ6X6agJ4NS329oA4oomPR6qVHXVCJAhX"],"enrUri":"enr:-LO4QDVRZTvtfzDyrIUl7cH4HDWp-s-gwEThjm8l7btwILVXQoqp79KrKgw8B9qy-4JG3R9WrcAViKJmk2u-e-6lnXEBgmlkgnY0gmlwhKwS2GKKbXVsdGlhZGRyc4wACgSsEthiBoDN3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNY99OpRaATn7xBAUse91N_Ag7iqYAjvnFTEm5hRuRcyoN0Y3CCgMyDdWRwgoDOhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32971/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.84.142/tcp/49265/p2p/16Uiu2HAkyY7dukwhCDj1Mguigb2BQKc8fjyBLHRT4hbfUUTeorLe"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32971/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.17.191/tcp/7804/p2p/16Uiu2HAmFASgb5LCcnu5yr6Zsgj6ZXRuwHMuNUfhhuYJPxSabfXG"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49264/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7803/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32971/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725077920725234688}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49264/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725077920725234688,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7803/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725077920725234688,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id af063f44ada7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 90dde7e09225
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5ae7faa0554b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'oom': ['TRC 2024-08-31 04:18:40.657+00:00 Remote peer id                             topics="libp2p noise" tid=1 file=noise.nim:586 pid=16Uiu2HAmJeHQaSsNmqEdJ6X6agJ4NS329oA4oomPR6qVHXVCJAhX', 'TRC 2024-08-31 04:18:41.077+00:00 peer not from discv5                       topics="waku peer_exchange" tid=1 file=protocol.nim:134 peer=16Uiu2HAmJeHQaSsNmqEdJ6X6agJ4NS329oA4oomPR6qVHXVCJAhX origin=UnknownOrigin']
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_receiving_nodes__relay_node1_forwards_lightpushed_message_to_relay_node2 with id: 2024-08-31_04-18-47__60cf5289-8d56-412c-b663-0fa1356d69b5
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-31_04-18-47__60cf5289-8d56-412c-b663-0fa1356d69b5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.208.38
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['7923', '7924', '7925', '7926', '7927']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 7923:7923 -p 7924:7924 -p 7925:7925 -p 7926:7926 -p 7927:7927 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7925 --rest-port=7923 --tcp-port=7924 --discv5-udp-port=7926 --rest-address=0.0.0.0 --nat=extip:172.18.208.38 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c7133dbcb5ab8573a4ea03fdf50d46a29aa891a49a26aae6cc4e72d3969ad9ad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7927 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.208.38 waku 5356f144c932ba78877d4e331bdecc40554bf6c47319bf6de52c9082f6767366
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5356f144c932. Setting up logs at ./log/docker/receiving_node1_2024-08-31_04-18-47__60cf5289-8d56-412c-b663-0fa1356d69b5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 7923
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7923/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7923/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.208.38/tcp/7924/p2p/16Uiu2HAmBow2GLoBP9eJQ4TtKfEkwiTqV32NkBJiHaU9TxCVQAsr","/ip4/172.18.208.38/tcp/7925/ws/p2p/16Uiu2HAmBow2GLoBP9eJQ4TtKfEkwiTqV32NkBJiHaU9TxCVQAsr"],"enrUri":"enr:-LO4QIQRAWSergiT71uISNEpGCpXVPY4r_BHvL6Rw-rQsZq3KmZH9xsaVvHXb-U7DVRpTrnUs08ZVwaxo-WB8sDRdXEBgmlkgnY0gmlwhKwS0CaKbXVsdGlhZGRyc4wACgSsEtAmBh713QOCcnOFAAMBAACJc2VjcDI1NmsxoQLzbscBQaW2zSMMyBOBEG5QmKmXOE3M1yBg2dSkcoF5wYN0Y3CCHvSDdWRwgh72hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-31_04-18-47__60cf5289-8d56-412c-b663-0fa1356d69b5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.53.43
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['14238', '14239', '14240', '14241', '14242']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 14238:14238 -p 14239:14239 -p 14240:14240 -p 14241:14241 -p 14242:14242 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14240 --rest-port=14238 --tcp-port=14239 --discv5-udp-port=14241 --rest-address=0.0.0.0 --nat=extip:172.18.53.43 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3d8a98edd305d21f3afbbcb721361dfa6fd5ab4cb68fcde5771bf77bc20c2bd4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14242 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.53.43 waku f4c5ad2e0e8954a2724f84716d2671a4d3363c89ccaa59641eaa2e302929b791
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f4c5ad2e0e89. Setting up logs at ./log/docker/receiving_node2_2024-08-31_04-18-47__60cf5289-8d56-412c-b663-0fa1356d69b5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 14238
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14238/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14238/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.53.43/tcp/14239/p2p/16Uiu2HAm3ut3krNMnBt2XsuJeXcWswk1AABeEjcKkB79rbbkx5as","/ip4/172.18.53.43/tcp/14240/ws/p2p/16Uiu2HAm3ut3krNMnBt2XsuJeXcWswk1AABeEjcKkB79rbbkx5as"],"enrUri":"enr:-LO4QGxQSs062ljcNx6EDX991jVKD5P28JbuXEJqnbkkLLP3HV5Qiywfb__1o5eZV7Wru96PneA-1kQ3LBTTvVGuCzcBgmlkgnY0gmlwhKwSNSuKbXVsdGlhZGRyc4wACgSsEjUrBjeg3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ-F2ddsFtEYkTIZNyc6Jif2uP-SGgrSZHxw5-35afmxIN0Y3CCN5-DdWRwgjehhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14238/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.208.38/tcp/7924/p2p/16Uiu2HAmBow2GLoBP9eJQ4TtKfEkwiTqV32NkBJiHaU9TxCVQAsr"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-31_04-18-47__60cf5289-8d56-412c-b663-0fa1356d69b5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.163.40
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['43881', '43882', '43883', '43884', '43885']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 43881:43881 -p 43882:43882 -p 43883:43883 -p 43884:43884 -p 43885:43885 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43883 --rest-port=43881 --tcp-port=43882 --discv5-udp-port=43884 --rest-address=0.0.0.0 --nat=extip:172.18.163.40 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a2eedcb12cba0a9dcdab3905cc4e6ed9a5d46bf44fdfd2d9adc85040ffc22eba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43885 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QIQRAWSergiT71uISNEpGCpXVPY4r_BHvL6Rw-rQsZq3KmZH9xsaVvHXb-U7DVRpTrnUs08ZVwaxo-WB8sDRdXEBgmlkgnY0gmlwhKwS0CaKbXVsdGlhZGRyc4wACgSsEtAmBh713QOCcnOFAAMBAACJc2VjcDI1NmsxoQLzbscBQaW2zSMMyBOBEG5QmKmXOE3M1yBg2dSkcoF5wYN0Y3CCHvSDdWRwgh72hXdha3UyCQ --lightpushnode=/ip4/172.18.208.38/tcp/7924/p2p/16Uiu2HAmBow2GLoBP9eJQ4TtKfEkwiTqV32NkBJiHaU9TxCVQAsr --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.163.40 waku daafbb93efafddc4d7d38812cfd139b1a780ee4dc5e4e8d0a6053b53eab1c74a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID daafbb93efaf. Setting up logs at ./log/docker/lightpush_node1_2024-08-31_04-18-47__60cf5289-8d56-412c-b663-0fa1356d69b5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 43881
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43881/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43881/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.163.40/tcp/43882/p2p/16Uiu2HAkzkHYjj881K8Cu1CSV9MzSUp31mdXWnn2kJa3X93kU53N","/ip4/172.18.163.40/tcp/43883/ws/p2p/16Uiu2HAkzkHYjj881K8Cu1CSV9MzSUp31mdXWnn2kJa3X93kU53N"],"enrUri":"enr:-LO4QFO28i-bAtZ_17SogzQtOrYkB6XL9nmkR22uyeXlKFlADkKdkrXMv1KOa7bVfYWrviLxFuNCbkhqT0LxOXSexxgBgmlkgnY0gmlwhKwSoyiKbXVsdGlhZGRyc4wACgSsEqMoBqtr3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJPDxsmwaKf3WNBTk1VHH56gLrPKHrVAjZmo-MTROfJQYN0Y3CCq2qDdWRwgqtshXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43881/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.208.38/tcp/7924/p2p/16Uiu2HAmBow2GLoBP9eJQ4TtKfEkwiTqV32NkBJiHaU9TxCVQAsr"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43881/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.53.43/tcp/14239/p2p/16Uiu2HAm3ut3krNMnBt2XsuJeXcWswk1AABeEjcKkB79rbbkx5as"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7923/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14238/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43881/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725077932443692544}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7923/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725077932443692544,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14238/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725077932443692544,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5356f144c932
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f4c5ad2e0e89
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id daafbb93efaf
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.