[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_meta with id: 2024-08-31_04-20-38__90a4d6e8-85ca-441f-aef6-9a3120630453
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-31_04-20-38__90a4d6e8-85ca-441f-aef6-9a3120630453__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.68.123
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['28760', '28761', '28762', '28763', '28764']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 28760:28760 -p 28761:28761 -p 28762:28762 -p 28763:28763 -p 28764:28764 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28762 --rest-port=28760 --tcp-port=28761 --discv5-udp-port=28763 --rest-address=0.0.0.0 --nat=extip:172.18.68.123 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=93c3c31babba5d7bd6dd8c9dffdfce3279c87af0dde10aa6cfbcaded3a961dfa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28764 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.68.123 waku 4772989e45175e276f066b9a7feaea3acafc7de1c2dfe1716ed0b7555e5cd58f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4772989e4517. Setting up logs at ./log/docker/receiving_node1_2024-08-31_04-20-38__90a4d6e8-85ca-441f-aef6-9a3120630453__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 28760
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28760/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28760/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.68.123/tcp/28761/p2p/16Uiu2HAm9WMPcLYp4Wt7WMg8cdCfise8WK1GMDABhF7GYfEAR3qd","/ip4/172.18.68.123/tcp/28762/ws/p2p/16Uiu2HAm9WMPcLYp4Wt7WMg8cdCfise8WK1GMDABhF7GYfEAR3qd"],"enrUri":"enr:-LO4QAWcx8TIQmYN-Pw_t-Bca9KCktDrvKF7AvR9SZLS9151X14VhDVn-qapnBEb9d-1RG_3GQv0-k1CaRCycWwCwVkBgmlkgnY0gmlwhKwSRHuKbXVsdGlhZGRyc4wACgSsEkR7BnBa3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLRNoB_mVFvgQOIf5YL99bGRMoqJ2YKbFwWTaBwUwJ9vIN0Y3CCcFmDdWRwgnBbhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-31_04-20-38__90a4d6e8-85ca-441f-aef6-9a3120630453__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.152.124
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['26169', '26170', '26171', '26172', '26173']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 26169:26169 -p 26170:26170 -p 26171:26171 -p 26172:26172 -p 26173:26173 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26171 --rest-port=26169 --tcp-port=26170 --discv5-udp-port=26172 --rest-address=0.0.0.0 --nat=extip:172.18.152.124 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7c687baeb4a5bb1a3f9fa22bb221dcc9cdc3322a3b5e56ff91fcb0ecbe822e2a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26173 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.152.124 waku 3b3acf0551c5650a15143849c98677bc0b8e55c34f131e264eb19e624ba7d1c7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3b3acf0551c5. Setting up logs at ./log/docker/receiving_node2_2024-08-31_04-20-38__90a4d6e8-85ca-441f-aef6-9a3120630453__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 26169
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26169/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26169/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.152.124/tcp/26170/p2p/16Uiu2HAmPPL1tGwz6o3KSrnj73Kaoof9LMTqpVLXPXLk5WPYEskM","/ip4/172.18.152.124/tcp/26171/ws/p2p/16Uiu2HAmPPL1tGwz6o3KSrnj73Kaoof9LMTqpVLXPXLk5WPYEskM"],"enrUri":"enr:-LO4QEgDek11HG2wAP0ESttnPVMfaAxYHVCHXmFX_Yf1EtqLS-MSnD94aQYmFzh1vtRG43slFfQKjVNmxVCKKute1v8BgmlkgnY0gmlwhKwSmHyKbXVsdGlhZGRyc4wACgSsEph8BmY73QOCcnOFAAMBAACJc2VjcDI1NmsxoQOfbX-_qUnVzHDcaKgcSzVkJk7VxObIFg1BbjTKK8Xf0oN0Y3CCZjqDdWRwgmY8hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26169/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.68.123/tcp/28761/p2p/16Uiu2HAm9WMPcLYp4Wt7WMg8cdCfise8WK1GMDABhF7GYfEAR3qd"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-31_04-20-38__90a4d6e8-85ca-441f-aef6-9a3120630453__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.172.86
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['9310', '9311', '9312', '9313', '9314']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 9310:9310 -p 9311:9311 -p 9312:9312 -p 9313:9313 -p 9314:9314 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9312 --rest-port=9310 --tcp-port=9311 --discv5-udp-port=9313 --rest-address=0.0.0.0 --nat=extip:172.18.172.86 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=328ecfc8f85ef27ad049b623f2af3b74fb2bb27de57ba0a1edc924dc47ebe946 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9314 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QAWcx8TIQmYN-Pw_t-Bca9KCktDrvKF7AvR9SZLS9151X14VhDVn-qapnBEb9d-1RG_3GQv0-k1CaRCycWwCwVkBgmlkgnY0gmlwhKwSRHuKbXVsdGlhZGRyc4wACgSsEkR7BnBa3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLRNoB_mVFvgQOIf5YL99bGRMoqJ2YKbFwWTaBwUwJ9vIN0Y3CCcFmDdWRwgnBbhXdha3UyCQ --lightpushnode=/ip4/172.18.68.123/tcp/28761/p2p/16Uiu2HAm9WMPcLYp4Wt7WMg8cdCfise8WK1GMDABhF7GYfEAR3qd --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.172.86 waku b2e09af65f361ac4f5fd60ad0a098b05f22198aaaad2500cf73890239d0bbdcc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b2e09af65f36. Setting up logs at ./log/docker/lightpush_node1_2024-08-31_04-20-38__90a4d6e8-85ca-441f-aef6-9a3120630453__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 9310
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9310/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9310/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.172.86/tcp/9311/p2p/16Uiu2HAm2SLLYDJ7KnF9qhqYWgZRPM7qnYyhsQffpRtVB4pxeB8W","/ip4/172.18.172.86/tcp/9312/ws/p2p/16Uiu2HAm2SLLYDJ7KnF9qhqYWgZRPM7qnYyhsQffpRtVB4pxeB8W"],"enrUri":"enr:-LO4QF34oiFn6prpOUERH4E7HrLIJCIBEh9eJd5sEUpXF4oxVQv1adreB3JUtKAIDStLdubMUFH9lYRdrgdz3s4O0VwBgmlkgnY0gmlwhKwSrFaKbXVsdGlhZGRyc4wACgSsEqxWBiRg3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJoLS39oz5fZr2aXtBmklyDUlt7R0mqUuFdGVPIxjBRc4N0Y3CCJF-DdWRwgiRhhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9310/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.68.123/tcp/28761/p2p/16Uiu2HAm9WMPcLYp4Wt7WMg8cdCfise8WK1GMDABhF7GYfEAR3qd"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9310/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.152.124/tcp/26170/p2p/16Uiu2HAmPPL1tGwz6o3KSrnj73Kaoof9LMTqpVLXPXLk5WPYEskM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28760/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26169/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9310/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725078043365760512, "meta": "TGlnaHQgcHVzaCB3b3JrcyEh"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28760/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725078043365760512,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26169/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725078043365760512,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4772989e4517
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3b3acf0551c5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b2e09af65f36
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.