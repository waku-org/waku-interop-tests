[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-09-28_04-18-33__581ba9fb-584c-4854-9a74-c7e6aca7c390
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-28_04-18-33__581ba9fb-584c-4854-9a74-c7e6aca7c390__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.34.61
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['33859', '33860', '33861', '33862', '33863']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 33859:33859 -p 33860:33860 -p 33861:33861 -p 33862:33862 -p 33863:33863 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33861 --rest-port=33859 --tcp-port=33860 --discv5-udp-port=33862 --rest-address=0.0.0.0 --nat=extip:172.18.34.61 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e193c8cab003c1edc1aac3f1838cdc11aeecdf4fee34d07a2c6deac396bb22cb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33863 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.34.61 waku ded403ed82946b1aa16ea87646d069f61f0850f36967f1ef735310f7fd8f3977
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ded403ed8294. Setting up logs at ./log/docker/receiving_node1_2024-09-28_04-18-33__581ba9fb-584c-4854-9a74-c7e6aca7c390__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 33859
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33859/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33859/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.34.61/tcp/33860/p2p/16Uiu2HAmGxTFsoXz9xKu3XhPYZChG4qs7vhm4uaomAMTNxHqPpbN","/ip4/172.18.34.61/tcp/33861/ws/p2p/16Uiu2HAmGxTFsoXz9xKu3XhPYZChG4qs7vhm4uaomAMTNxHqPpbN"],"enrUri":"enr:-LO4QKK5dsX7r5nTxiaF4UE68umofhPTC0W22y_zVgC0weyETiQ7EzKl1CCibONSN8Cdgpa8jP5KmyHwaowBoR04i4UBgmlkgnY0gmlwhKwSIj2KbXVsdGlhZGRyc4wACgSsEiI9BoRF3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM_6AuAaHXf06qj9pAwT-RwqEB7irhw8bu3pxkwVgh4FYN0Y3CChESDdWRwgoRGhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-28_04-18-33__581ba9fb-584c-4854-9a74-c7e6aca7c390__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.30.119
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['50657', '50658', '50659', '50660', '50661']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 50657:50657 -p 50658:50658 -p 50659:50659 -p 50660:50660 -p 50661:50661 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50659 --rest-port=50657 --tcp-port=50658 --discv5-udp-port=50660 --rest-address=0.0.0.0 --nat=extip:172.18.30.119 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=acafa024e6aeedadc8aa0c6ce1c024be17fdd289b47c1c4ecdc1bcb2aa137c1c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50661 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.30.119 waku 4529e8fb846f2a53457c2f45b4a36550d9a1d03d066e019c05cd0a6d1a64d5ee
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4529e8fb846f. Setting up logs at ./log/docker/receiving_node2_2024-09-28_04-18-33__581ba9fb-584c-4854-9a74-c7e6aca7c390__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 50657
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50657/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50657/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.30.119/tcp/50658/p2p/16Uiu2HAmMUcQVta2eteP8apqcBWq6HYt3Dh14nVQx3NYBU2iCdpx","/ip4/172.18.30.119/tcp/50659/ws/p2p/16Uiu2HAmMUcQVta2eteP8apqcBWq6HYt3Dh14nVQx3NYBU2iCdpx"],"enrUri":"enr:-LO4QNqAU8cqiwoKG_RAXbaHBeECE5Rne1TaRSnpbxJkVcZEGt6iuBMRai1TqeEAt-B3Buy39GfZFFb9rxumz4uEndgBgmlkgnY0gmlwhKwSHneKbXVsdGlhZGRyc4wACgSsEh53BsXj3QOCcnOFAAMBAACJc2VjcDI1NmsxoQODEI-zHJ3S5f2bw-zhL7K7sFBG_v4upVbyVdVZmPdTlYN0Y3CCxeKDdWRwgsXkhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50657/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.34.61/tcp/33860/p2p/16Uiu2HAmGxTFsoXz9xKu3XhPYZChG4qs7vhm4uaomAMTNxHqPpbN"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-28_04-18-33__581ba9fb-584c-4854-9a74-c7e6aca7c390__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.58.224
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['65412', '65413', '65414', '65415', '65416']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 65412:65412 -p 65413:65413 -p 65414:65414 -p 65415:65415 -p 65416:65416 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65414 --rest-port=65412 --tcp-port=65413 --discv5-udp-port=65415 --rest-address=0.0.0.0 --nat=extip:172.18.58.224 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=09cad6aebdbf2160b0093dbc55b3e8c3c14b5f06bb6c6b8f9ccb659e1f7312fd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65416 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QKK5dsX7r5nTxiaF4UE68umofhPTC0W22y_zVgC0weyETiQ7EzKl1CCibONSN8Cdgpa8jP5KmyHwaowBoR04i4UBgmlkgnY0gmlwhKwSIj2KbXVsdGlhZGRyc4wACgSsEiI9BoRF3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM_6AuAaHXf06qj9pAwT-RwqEB7irhw8bu3pxkwVgh4FYN0Y3CChESDdWRwgoRGhXdha3UyCQ --lightpushnode=/ip4/172.18.34.61/tcp/33860/p2p/16Uiu2HAmGxTFsoXz9xKu3XhPYZChG4qs7vhm4uaomAMTNxHqPpbN --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.58.224 waku 8cca1d25c60ecbaacd3a60334966621b9e0a1f391d78fca47df9b68a44ec6eab
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 8cca1d25c60e. Setting up logs at ./log/docker/lightpush_node1_2024-09-28_04-18-33__581ba9fb-584c-4854-9a74-c7e6aca7c390__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 65412
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65412/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65412/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.58.224/tcp/65413/p2p/16Uiu2HAmAMtRPsfs1JFTdkMijdDJEyaNeKrKNh8KjPMqLyBNHFhF","/ip4/172.18.58.224/tcp/65414/ws/p2p/16Uiu2HAmAMtRPsfs1JFTdkMijdDJEyaNeKrKNh8KjPMqLyBNHFhF"],"enrUri":"enr:-LO4QMCt5fxw8OXS-Xo_4r3E3N8GIPhyG4Rt2tx8uobfHAB5bk8vTdOH8UNDSN4EtYp2lKSUvUM1QPtAZpyiw9szk1QBgmlkgnY0gmlwhKwSOuCKbXVsdGlhZGRyc4wACgSsEjrgBv-G3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLd5wxXGTlH-xA2m-ZpaO6zTNsBhx7cShezPYKyX30TpoN0Y3CC_4WDdWRwgv-HhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65412/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.34.61/tcp/33860/p2p/16Uiu2HAmGxTFsoXz9xKu3XhPYZChG4qs7vhm4uaomAMTNxHqPpbN"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65412/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.30.119/tcp/50658/p2p/16Uiu2HAmMUcQVta2eteP8apqcBWq6HYt3Dh14nVQx3NYBU2iCdpx"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33859/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50657/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65412/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727497117964623616, "version": 2.1}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:65412/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ded403ed8294
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4529e8fb846f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 8cca1d25c60e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.