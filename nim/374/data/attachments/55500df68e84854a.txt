[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_with_version with id: 2024-09-28_04-14-36__ed8129e9-e3c7-4c59-a90b-b0de2cc6e37f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-28_04-14-36__ed8129e9-e3c7-4c59-a90b-b0de2cc6e37f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.29.44
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['29190', '29191', '29192', '29193', '29194']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 29190:29190 -p 29191:29191 -p 29192:29192 -p 29193:29193 -p 29194:29194 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29192 --rest-port=29190 --tcp-port=29191 --discv5-udp-port=29193 --rest-address=0.0.0.0 --nat=extip:172.18.29.44 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dd34f40ec03dbc446bfa0faa5f811ad821b95aa9fbdb7d4cf07c467a778e60cf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29194 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.29.44 waku 66c70943665709aa22ad94d3e2399ec09b39fa31c0cf9ea28159f37c9d00e1fd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 66c709436657. Setting up logs at ./log/docker/node1_2024-09-28_04-14-36__ed8129e9-e3c7-4c59-a90b-b0de2cc6e37f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 29190
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29190/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29190/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.29.44/tcp/29191/p2p/16Uiu2HAmDjtYZ1MNfkPMK92eukfSgh4xGor6Z98GXD1VqgmwXXLH","/ip4/172.18.29.44/tcp/29192/ws/p2p/16Uiu2HAmDjtYZ1MNfkPMK92eukfSgh4xGor6Z98GXD1VqgmwXXLH"],"enrUri":"enr:-LO4QMdW8nAEG9FBhdBnzCtFBCs5a_yU2JDZMmhjCD3ZGIwQVLGlZ9L-dFUdH9MGlVTiqKnRT-dxBsidbOaaU6nqaBkBgmlkgnY0gmlwhKwSHSyKbXVsdGlhZGRyc4wACgSsEh0sBnII3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMQHQa8rjr9oTDRbLKTlRdG59AP2I990SY_H0qSSpqv5oN0Y3CCcgeDdWRwgnIJhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-28_04-14-36__ed8129e9-e3c7-4c59-a90b-b0de2cc6e37f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.194.228
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['28848', '28849', '28850', '28851', '28852']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 28848:28848 -p 28849:28849 -p 28850:28850 -p 28851:28851 -p 28852:28852 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28850 --rest-port=28848 --tcp-port=28849 --discv5-udp-port=28851 --rest-address=0.0.0.0 --nat=extip:172.18.194.228 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3bf1b5aa2f37ced847adb7dcd5590c5fa3ddfe765fa11f4ef461ec362ab5bd0b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28852 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QMdW8nAEG9FBhdBnzCtFBCs5a_yU2JDZMmhjCD3ZGIwQVLGlZ9L-dFUdH9MGlVTiqKnRT-dxBsidbOaaU6nqaBkBgmlkgnY0gmlwhKwSHSyKbXVsdGlhZGRyc4wACgSsEh0sBnII3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMQHQa8rjr9oTDRbLKTlRdG59AP2I990SY_H0qSSpqv5oN0Y3CCcgeDdWRwgnIJhXdha3UyBQ --filternode=/ip4/172.18.29.44/tcp/29191/p2p/16Uiu2HAmDjtYZ1MNfkPMK92eukfSgh4xGor6Z98GXD1VqgmwXXLH
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.194.228 waku 529eb1b9e79a6570899e2cb0aeb18b0d5b67637bb32e8f40cfaa597dbb7801d9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 529eb1b9e79a. Setting up logs at ./log/docker/node2_2024-09-28_04-14-36__ed8129e9-e3c7-4c59-a90b-b0de2cc6e37f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 28848
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28848/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28848/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.194.228/tcp/28849/p2p/16Uiu2HAmRqX3pQaS71ccn7S6mj9hfKrNdBJvkzzbfwJ6XBU8X2qn","/ip4/172.18.194.228/tcp/28850/ws/p2p/16Uiu2HAmRqX3pQaS71ccn7S6mj9hfKrNdBJvkzzbfwJ6XBU8X2qn"],"enrUri":"enr:-LO4QGfBIXNRwBAKnRZ__ZrjtLXAeVb-Sh_K9U9mvAFmoQ0TOO0Em-E7niVdzQHh2Wc4mQfA9nsu0_9rtNezmeepOLcBgmlkgnY0gmlwhKwSwuSKbXVsdGlhZGRyc4wACgSsEsLkBnCy3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPD2nMHsKAshrfqgA_rNwBX6QbuE955J2idk66wFVeMsYN0Y3CCcLGDdWRwgnCzhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28848/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.29.44/tcp/29191/p2p/16Uiu2HAmDjtYZ1MNfkPMK92eukfSgh4xGor6Z98GXD1VqgmwXXLH"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29190/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28848/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1703cd84-1b92-40a9-8c2a-0db02715b281", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1703cd84-1b92-40a9-8c2a-0db02715b281","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29190/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "version": 10}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28848/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":10,"timestamp":1727496880446828032,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 66c709436657
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 529eb1b9e79a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.