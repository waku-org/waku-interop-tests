[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_relaying_node with id: 2024-11-25_04-04-13__1122b405-a757-4f11-bd29-3d0bdc56273c
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-25_04-04-13__1122b405-a757-4f11-bd29-3d0bdc56273c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-25_04-04-13__1122b405-a757-4f11-bd29-3d0bdc56273c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-25_04-04-13__1122b405-a757-4f11-bd29-3d0bdc56273c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.14.14
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['30527', '30528', '30529', '30530', '30531']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 30527:30527 -p 30528:30528 -p 30529:30529 -p 30530:30530 -p 30531:30531 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30529 --rest-port=30527 --tcp-port=30528 --discv5-udp-port=30530 --rest-address=0.0.0.0 --nat=extip:172.18.14.14 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f0598f7acccc1dcb4b49ff88970f6b6d9d50ea6c8f1eeebb4676d0addbb600e6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30531 --metrics-logging=true --filter=true --relay=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 699950220fa5. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.14.14 waku 4f8c6ab6851787925084e395fa146e206d1f40bcf374a77df2c2d7c5dd1e2079
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4f8c6ab68517. Setting up logs at ./log/docker/node1_2024-11-25_04-04-13__1122b405-a757-4f11-bd29-3d0bdc56273c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 30527
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30527/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30527/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.14.14/tcp/30528/p2p/16Uiu2HAmQqejU1gK4DhJcQ61QJiqKKrF92sDuHWM6cycs4vCdgH2","/ip4/172.18.14.14/tcp/30529/ws/p2p/16Uiu2HAmQqejU1gK4DhJcQ61QJiqKKrF92sDuHWM6cycs4vCdgH2"],"enrUri":"enr:-L24QAzPdhBiqnv3c41_pZCATgmHey7caY0dpNIvpZJSPWNpJdaFjoq_DmaYtcVEq4Rl0PVpRU5NEoqL3Y4E3sxpyScCgmlkgnY0gmlwhKwSDg6KbXVsdGlhZGRyc5YACASsEg4OBndAAAoErBIODgZ3Qd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDtQdzRUEIFp72Bupi5HJ-b2Q1uOdFRC4Gw8E89_kewk2DdGNwgndAg3VkcIJ3QoV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.126.195
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['35807', '35808', '35809', '35810', '35811']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 35807:35807 -p 35808:35808 -p 35809:35809 -p 35810:35810 -p 35811:35811 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35809 --rest-port=35807 --tcp-port=35808 --discv5-udp-port=35810 --rest-address=0.0.0.0 --nat=extip:172.18.126.195 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bbddb6883bb03bfe7c01bf1ba8ab961ec552d6cfe74e0fa1faba58a9eb3cbcad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35811 --metrics-logging=true --filter=true --relay=true --discv5-bootstrap-node=enr:-L24QAzPdhBiqnv3c41_pZCATgmHey7caY0dpNIvpZJSPWNpJdaFjoq_DmaYtcVEq4Rl0PVpRU5NEoqL3Y4E3sxpyScCgmlkgnY0gmlwhKwSDg6KbXVsdGlhZGRyc5YACASsEg4OBndAAAoErBIODgZ3Qd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDtQdzRUEIFp72Bupi5HJ-b2Q1uOdFRC4Gw8E89_kewk2DdGNwgndAg3VkcIJ3QoV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.126.195 waku 4ec0b6ae5485bac038418193371e6e5744a326842a05282f1b86545ade4e8cf3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4ec0b6ae5485. Setting up logs at ./log/docker/node2_2024-11-25_04-04-13__1122b405-a757-4f11-bd29-3d0bdc56273c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 35807
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35807/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35807/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.126.195/tcp/35808/p2p/16Uiu2HAmSffe1yDmYvERuAmrSgw1UVfBzCKVwkEdbTPkWSx9JgXk","/ip4/172.18.126.195/tcp/35809/ws/p2p/16Uiu2HAmSffe1yDmYvERuAmrSgw1UVfBzCKVwkEdbTPkWSx9JgXk"],"enrUri":"enr:-L24QIwXEHbyiR8ba5bagkFEFRCh7DIrI0i8I0lGjd0vFmibLV8DOjKT5lsOuF87VcyX4fn9xOoHM4zut9Vp2XWFAU0CgmlkgnY0gmlwhKwSfsOKbXVsdGlhZGRyc5YACASsEn7DBovgAAoErBJ-wwaL4d0DgnJzhQADAQAAiXNlY3AyNTZrMaED0DAKXxO_4E0zjQewF9j1QrSXVSc2XEcqVXhsH1VoPbuDdGNwgovgg3VkcIKL4oV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.103.178
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['54732', '54733', '54734', '54735', '54736']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 54732:54732 -p 54733:54733 -p 54734:54734 -p 54735:54735 -p 54736:54736 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54734 --rest-port=54732 --tcp-port=54733 --discv5-udp-port=54735 --rest-address=0.0.0.0 --nat=extip:172.18.103.178 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9a2c134efefd03b086edfdeaac271fbffefa2b5d0aef1eed1be0652bfcdbfeda --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54736 --metrics-logging=true --relay=false --filternode=/ip4/172.18.126.195/tcp/35808/p2p/16Uiu2HAmSffe1yDmYvERuAmrSgw1UVfBzCKVwkEdbTPkWSx9JgXk --discv5-bootstrap-node=enr:-L24QIwXEHbyiR8ba5bagkFEFRCh7DIrI0i8I0lGjd0vFmibLV8DOjKT5lsOuF87VcyX4fn9xOoHM4zut9Vp2XWFAU0CgmlkgnY0gmlwhKwSfsOKbXVsdGlhZGRyc5YACASsEn7DBovgAAoErBJ-wwaL4d0DgnJzhQADAQAAiXNlY3AyNTZrMaED0DAKXxO_4E0zjQewF9j1QrSXVSc2XEcqVXhsH1VoPbuDdGNwgovgg3VkcIKL4oV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.103.178 waku d30639e0902571a9ceae65b5adb60e2249bf4f6fee2b857514c79f00c54d294c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d30639e09025. Setting up logs at ./log/docker/node3_2024-11-25_04-04-13__1122b405-a757-4f11-bd29-3d0bdc56273c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 54732
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54732/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54732/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.103.178/tcp/54733/p2p/16Uiu2HAmKQN6CYVekN1zNAU15KCH4HHqKLxitEzekcpG3YX6gANX","/ip4/172.18.103.178/tcp/54734/ws/p2p/16Uiu2HAmKQN6CYVekN1zNAU15KCH4HHqKLxitEzekcpG3YX6gANX"],"enrUri":"enr:-L24QEtIDWHrzZlacHgFCyKzgchRJict2nztNeOKxoZ9H3a4RaE4rGMr8VyYhUn41DBRD4L5xZDAs91SqklGWIiGQSYCgmlkgnY0gmlwhKwSZ7KKbXVsdGlhZGRyc5YACASsEmeyBtXNAAoErBJnsgbVzt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDZEKtemaDTOKd-iTg2JZNBJyLwfjpXw2MPOuURZVu4QyDdGNwgtXNg3VkcILVz4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30527/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35807/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54732/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30527/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.126.195/tcp/35808/p2p/16Uiu2HAmSffe1yDmYvERuAmrSgw1UVfBzCKVwkEdbTPkWSx9JgXk","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35807/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.14.14/tcp/30528/p2p/16Uiu2HAmQqejU1gK4DhJcQ61QJiqKKrF92sDuHWM6cycs4vCdgH2","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.103.178/tcp/54733/p2p/16Uiu2HAmKQN6CYVekN1zNAU15KCH4HHqKLxitEzekcpG3YX6gANX","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54732/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.126.195/tcp/35808/p2p/16Uiu2HAmSffe1yDmYvERuAmrSgw1UVfBzCKVwkEdbTPkWSx9JgXk","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30527/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54732/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1732507489016437760,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 4f8c6ab68517
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 4ec0b6ae5485
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4f8c6ab68517. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id d30639e09025
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4ec0b6ae5485. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.