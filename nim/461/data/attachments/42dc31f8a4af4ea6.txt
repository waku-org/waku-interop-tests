[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-11-25_04-17-46__664e32ab-53e1-4c89-b1a5-df513b070acf
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-25_04-17-46__664e32ab-53e1-4c89-b1a5-df513b070acf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.90.156
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['58797', '58798', '58799', '58800', '58801']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 58797:58797 -p 58798:58798 -p 58799:58799 -p 58800:58800 -p 58801:58801 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58799 --rest-port=58797 --tcp-port=58798 --discv5-udp-port=58800 --rest-address=0.0.0.0 --nat=extip:172.18.90.156 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=65d6fa0cd7841129fedfa400a461dd4f6cbfeacfdaca1cf0ebd7467dfc574630 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58801 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.90.156 waku 84d9cf4e4c7c6aa3f47a023a17c419d54e86082dda40b13696d733b615d6b4f7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 84d9cf4e4c7c. Setting up logs at ./log/docker/receiving_node1_2024-11-25_04-17-46__664e32ab-53e1-4c89-b1a5-df513b070acf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 58797
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 501f0e7f258d. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58797/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58797/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.90.156/tcp/58798/p2p/16Uiu2HAmEVGqPQYrMSWDzVpjS8XJVg9obM1AW1VrjeiunNgw5oKa","/ip4/172.18.90.156/tcp/58799/ws/p2p/16Uiu2HAmEVGqPQYrMSWDzVpjS8XJVg9obM1AW1VrjeiunNgw5oKa"],"enrUri":"enr:-L24QBvAL-SnMhjvNMBeQf6PYCOZCqchgUGPSynBc463e-J9IFo4TQ_1CKQihHSjSI2uyiVopPKmDsmYvLPSA327sakCgmlkgnY0gmlwhKwSWpyKbXVsdGlhZGRyc5YACASsElqcBuWuAAoErBJanAblr90DgnJzhQADAQAAiXNlY3AyNTZrMaEDGzo0a_d6ZG1kRujqN2GcO7O6VhqADRxUl4j0rhqjo82DdGNwguWug3VkcILlsIV3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-25_04-17-46__664e32ab-53e1-4c89-b1a5-df513b070acf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.100.37
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['50164', '50165', '50166', '50167', '50168']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 50164:50164 -p 50165:50165 -p 50166:50166 -p 50167:50167 -p 50168:50168 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50166 --rest-port=50164 --tcp-port=50165 --discv5-udp-port=50167 --rest-address=0.0.0.0 --nat=extip:172.18.100.37 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f7aea0fb8ddd84796d85bc0374c49239a20d7ff79ae854f5af00f0e5a738d627 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50168 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.100.37 waku 83c9ca5237243d3acefcff2a5ce49f38c34425fc20e9afd386a09d94127c8ae6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 83c9ca523724. Setting up logs at ./log/docker/receiving_node2_2024-11-25_04-17-46__664e32ab-53e1-4c89-b1a5-df513b070acf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 50164
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50164/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50164/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.100.37/tcp/50165/p2p/16Uiu2HAm9G5ctRkqaCdjfhNN2cqTfZZGt1drFncCQzSTEoAvGS8Y","/ip4/172.18.100.37/tcp/50166/ws/p2p/16Uiu2HAm9G5ctRkqaCdjfhNN2cqTfZZGt1drFncCQzSTEoAvGS8Y"],"enrUri":"enr:-L24QO5C72qHeezT5btsMzUiIl8stfdXTTuxaQybGyNUcshzc3AQkuBfMHBf56_zT77kJ24IMMpzeSBtDL2M1wOAwqgCgmlkgnY0gmlwhKwSZCWKbXVsdGlhZGRyc5YACASsEmQlBsP1AAoErBJkJQbD9t0DgnJzhQADAQAAiXNlY3AyNTZrMaECzY6Jx7t29--_Z7dsuKCh0jVPUyQWH6isr6mhjFZaYYGDdGNwgsP1g3VkcILD94V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50164/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.90.156/tcp/58798/p2p/16Uiu2HAmEVGqPQYrMSWDzVpjS8XJVg9obM1AW1VrjeiunNgw5oKa"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-25_04-17-46__664e32ab-53e1-4c89-b1a5-df513b070acf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.31.160
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['2137', '2138', '2139', '2140', '2141']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 2137:2137 -p 2138:2138 -p 2139:2139 -p 2140:2140 -p 2141:2141 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2139 --rest-port=2137 --tcp-port=2138 --discv5-udp-port=2140 --rest-address=0.0.0.0 --nat=extip:172.18.31.160 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bee02dc75d107f400be4f0839e91a743e78b3bf3dfa47d23ed7e5f4efc5b7e5e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2141 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QBvAL-SnMhjvNMBeQf6PYCOZCqchgUGPSynBc463e-J9IFo4TQ_1CKQihHSjSI2uyiVopPKmDsmYvLPSA327sakCgmlkgnY0gmlwhKwSWpyKbXVsdGlhZGRyc5YACASsElqcBuWuAAoErBJanAblr90DgnJzhQADAQAAiXNlY3AyNTZrMaEDGzo0a_d6ZG1kRujqN2GcO7O6VhqADRxUl4j0rhqjo82DdGNwguWug3VkcILlsIV3YWt1Mg0 --lightpushnode=/ip4/172.18.90.156/tcp/58798/p2p/16Uiu2HAmEVGqPQYrMSWDzVpjS8XJVg9obM1AW1VrjeiunNgw5oKa --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.31.160 waku b94be90c9a03d4a208e0383271424579f5facffbdb560cb95d8892fcc729f8ae
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b94be90c9a03. Setting up logs at ./log/docker/lightpush_node1_2024-11-25_04-17-46__664e32ab-53e1-4c89-b1a5-df513b070acf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 2137
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2137/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2137/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.31.160/tcp/2138/p2p/16Uiu2HAmUxu7h8PBNNnUfhW2fWiywd2MroUTz6Y5Q3rXMN7DSivp","/ip4/172.18.31.160/tcp/2139/ws/p2p/16Uiu2HAmUxu7h8PBNNnUfhW2fWiywd2MroUTz6Y5Q3rXMN7DSivp"],"enrUri":"enr:-L24QLRZAtshXmsg0OARoy8f3u11J_BQTPn8g-8vYO6JkDFiZB_5NBp5O7PwxvmLODITbK4HavqHqEnjFR89OtSsB7wCgmlkgnY0gmlwhKwSH6CKbXVsdGlhZGRyc5YACASsEh-gBghaAAoErBIfoAYIW90DgnJzhQADAQAAiXNlY3AyNTZrMaED8lGG28P8jraBuRVtC4XCQpNSmKWELrhepcp_T3BU4J2DdGNwgghag3VkcIIIXIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2137/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.90.156/tcp/58798/p2p/16Uiu2HAmEVGqPQYrMSWDzVpjS8XJVg9obM1AW1VrjeiunNgw5oKa"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2137/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.100.37/tcp/50165/p2p/16Uiu2HAm9G5ctRkqaCdjfhNN2cqTfZZGt1drFncCQzSTEoAvGS8Y"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58797/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50164/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2137/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1732508271421966848}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58797/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732508271421966848,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50164/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732508271421966848,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 84d9cf4e4c7c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 83c9ca523724
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 84d9cf4e4c7c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id b94be90c9a03
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 83c9ca523724. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.