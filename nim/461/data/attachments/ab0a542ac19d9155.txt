[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_extra_field with id: 2024-11-25_04-13-40__24be82f0-20fa-4824-8859-ddc25d83cb9e
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-25_04-13-40__24be82f0-20fa-4824-8859-ddc25d83cb9e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.224.112
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['24470', '24471', '24472', '24473', '24474']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 24470:24470 -p 24471:24471 -p 24472:24472 -p 24473:24473 -p 24474:24474 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24472 --rest-port=24470 --tcp-port=24471 --discv5-udp-port=24473 --rest-address=0.0.0.0 --nat=extip:172.18.224.112 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ba681df5ea0d5ba2bd6ed4dcab35b8dce4a8ed57b2f43efbf58d8ba4af6a9e03 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24474 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.224.112 waku a8fb327f14acd90d3a9870ef8c32e2f216c7bbea55cd2b5b709a2a1f0c41f5bc
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 34dbc18d6e93. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a8fb327f14ac. Setting up logs at ./log/docker/node1_2024-11-25_04-13-40__24be82f0-20fa-4824-8859-ddc25d83cb9e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 24470
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24470/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24470/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.224.112/tcp/24471/p2p/16Uiu2HAkzuedzYZpp1e42u53UsTpXs4Q3kwdVozwXGXiSgTE5BMN","/ip4/172.18.224.112/tcp/24472/ws/p2p/16Uiu2HAkzuedzYZpp1e42u53UsTpXs4Q3kwdVozwXGXiSgTE5BMN"],"enrUri":"enr:-L24QI1GPy6khPDZEKjZ-3z11bDR4lHL622zFEgJuTIiVg7_Re7eciqpVORfsvqfnyVI79vU-hI7k5MKKNYRsyDa5vYCgmlkgnY0gmlwhKwS4HCKbXVsdGlhZGRyc5YACASsEuBwBl-XAAoErBLgcAZfmN0DgnJzhQADAQAAiXNlY3AyNTZrMaECUXUuOgC3wHPqiKUJPlxh5kCRxBYB5d0Z80hg4XbUB_WDdGNwgl-Xg3VkcIJfmYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-25_04-13-40__24be82f0-20fa-4824-8859-ddc25d83cb9e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.171.136
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['57924', '57925', '57926', '57927', '57928']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 57924:57924 -p 57925:57925 -p 57926:57926 -p 57927:57927 -p 57928:57928 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57926 --rest-port=57924 --tcp-port=57925 --discv5-udp-port=57927 --rest-address=0.0.0.0 --nat=extip:172.18.171.136 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c22962870dc92690fddf3ab4fdf3d34fada4bb20d39e619da767ecf8bbe29da4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57928 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QI1GPy6khPDZEKjZ-3z11bDR4lHL622zFEgJuTIiVg7_Re7eciqpVORfsvqfnyVI79vU-hI7k5MKKNYRsyDa5vYCgmlkgnY0gmlwhKwS4HCKbXVsdGlhZGRyc5YACASsEuBwBl-XAAoErBLgcAZfmN0DgnJzhQADAQAAiXNlY3AyNTZrMaECUXUuOgC3wHPqiKUJPlxh5kCRxBYB5d0Z80hg4XbUB_WDdGNwgl-Xg3VkcIJfmYV3YWt1MgU --filternode=/ip4/172.18.224.112/tcp/24471/p2p/16Uiu2HAkzuedzYZpp1e42u53UsTpXs4Q3kwdVozwXGXiSgTE5BMN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.171.136 waku 384bb6ce7e7f244b671da6ebbab0bdfbdaa276ae705a3f9568e6e0d2f52f3570
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 384bb6ce7e7f. Setting up logs at ./log/docker/node2_2024-11-25_04-13-40__24be82f0-20fa-4824-8859-ddc25d83cb9e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 57924
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57924/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57924/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.171.136/tcp/57925/p2p/16Uiu2HAmB2c21s14fRmrQiQkCBPsYBfH8hVA26TFLKjSJpqeq8Tb","/ip4/172.18.171.136/tcp/57926/ws/p2p/16Uiu2HAmB2c21s14fRmrQiQkCBPsYBfH8hVA26TFLKjSJpqeq8Tb"],"enrUri":"enr:-L24QMR2XGjxl1_knBZezYFyZYRc0w7rf2rSn9FtWP6SjZDHekDlBCfYLVwjC8S9jgWHETiz5IU3EOvBxu-pwjqSc9YCgmlkgnY0gmlwhKwSq4iKbXVsdGlhZGRyc5YACASsEquIBuJFAAoErBKriAbiRt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC59InGJzu1ZXMx2nQPVtSPrZC4v-Q140MAcAV5BtR0BKDdGNwguJFg3VkcILiR4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57924/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.224.112/tcp/24471/p2p/16Uiu2HAkzuedzYZpp1e42u53UsTpXs4Q3kwdVozwXGXiSgTE5BMN"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24470/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57924/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "9083c45b-4a82-4246-a376-b20eadca1dcb", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"9083c45b-4a82-4246-a376-b20eadca1dcb","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:57924/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1", "extraField": "extraValue"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:57924/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id a8fb327f14ac
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 384bb6ce7e7f
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a8fb327f14ac. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.