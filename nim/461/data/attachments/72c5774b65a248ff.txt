[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_no_timestamp with id: 2024-11-25_04-16-32__ccad9e0f-311d-4d17-a304-3f11e0693322
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-25_04-16-32__ccad9e0f-311d-4d17-a304-3f11e0693322__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.140.149
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['57013', '57014', '57015', '57016', '57017']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 57013:57013 -p 57014:57014 -p 57015:57015 -p 57016:57016 -p 57017:57017 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57015 --rest-port=57013 --tcp-port=57014 --discv5-udp-port=57016 --rest-address=0.0.0.0 --nat=extip:172.18.140.149 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aaddfb21b981dbcfddcdf15d593213ce84f5487cefc4b378dabb312abdf02ab6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57017 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.140.149 waku 99c65c75f1f002c7dceba72a984f83ef77d65541e384f800d337f2d319845e14
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 99c65c75f1f0. Setting up logs at ./log/docker/receiving_node1_2024-11-25_04-16-32__ccad9e0f-311d-4d17-a304-3f11e0693322__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 57013
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0f35a9b7b963. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57013/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57013/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.140.149/tcp/57014/p2p/16Uiu2HAmEErXXQp3QwTAVodMBsH1J9w4Skqf49SUSPv4oF2v1Je9","/ip4/172.18.140.149/tcp/57015/ws/p2p/16Uiu2HAmEErXXQp3QwTAVodMBsH1J9w4Skqf49SUSPv4oF2v1Je9"],"enrUri":"enr:-L24QBJQoeh8tV-dEOyafGeSm4sQZpNPF-YmWgPbldQcjHSJVOnCNZ2s4x2d8wJo5uP7tGNOtipNZtFxKloAVmJLmkUCgmlkgnY0gmlwhKwSjJWKbXVsdGlhZGRyc5YACASsEoyVBt62AAoErBKMlQbet90DgnJzhQADAQAAiXNlY3AyNTZrMaEDF4iWnYmSFy2pXAQFM2lXQozObaca8vnrwAU2MqUzoT6DdGNwgt62g3VkcILeuIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-25_04-16-32__ccad9e0f-311d-4d17-a304-3f11e0693322__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.136.158
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['63056', '63057', '63058', '63059', '63060']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 63056:63056 -p 63057:63057 -p 63058:63058 -p 63059:63059 -p 63060:63060 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63058 --rest-port=63056 --tcp-port=63057 --discv5-udp-port=63059 --rest-address=0.0.0.0 --nat=extip:172.18.136.158 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=97015dc8ee8deabb9dafdfcb21c4c096accc409ec4cf2e93b5ade6fc9f8aadda --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63060 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.136.158 waku a27db227275ab6a2e57447d1cd14f7cb8cd8a4d29d3c6aaf9926c8757e8f0ea3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a27db227275a. Setting up logs at ./log/docker/receiving_node2_2024-11-25_04-16-32__ccad9e0f-311d-4d17-a304-3f11e0693322__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 63056
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63056/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63056/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.158/tcp/63057/p2p/16Uiu2HAm8vsZ4iYnB6iaejMPdaKNzjXwzYksiAGhiz1i1AGBjBSK","/ip4/172.18.136.158/tcp/63058/ws/p2p/16Uiu2HAm8vsZ4iYnB6iaejMPdaKNzjXwzYksiAGhiz1i1AGBjBSK"],"enrUri":"enr:-L24QEGLz-gKHI-O_rIDN0i1ykNt7YDjNtX1NcilhJPhU46HL-QgPNWookftQ5-xJw8iTkjtypIAaFY7KJ9TY90JP-MCgmlkgnY0gmlwhKwSiJ6KbXVsdGlhZGRyc5YACASsEoieBvZRAAoErBKIngb2Ut0DgnJzhQADAQAAiXNlY3AyNTZrMaECyKLcIEFwnCS0tYLVI2djiVMReZWthqTrYkrI1_HyJ_SDdGNwgvZRg3VkcIL2U4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63056/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.140.149/tcp/57014/p2p/16Uiu2HAmEErXXQp3QwTAVodMBsH1J9w4Skqf49SUSPv4oF2v1Je9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-25_04-16-32__ccad9e0f-311d-4d17-a304-3f11e0693322__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.144.186
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['32211', '32212', '32213', '32214', '32215']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 32211:32211 -p 32212:32212 -p 32213:32213 -p 32214:32214 -p 32215:32215 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32213 --rest-port=32211 --tcp-port=32212 --discv5-udp-port=32214 --rest-address=0.0.0.0 --nat=extip:172.18.144.186 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cfc6bc5762cdaac5821faf27f3c25ee3047e86adb5bf1984afade751adedfbd2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32215 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QBJQoeh8tV-dEOyafGeSm4sQZpNPF-YmWgPbldQcjHSJVOnCNZ2s4x2d8wJo5uP7tGNOtipNZtFxKloAVmJLmkUCgmlkgnY0gmlwhKwSjJWKbXVsdGlhZGRyc5YACASsEoyVBt62AAoErBKMlQbet90DgnJzhQADAQAAiXNlY3AyNTZrMaEDF4iWnYmSFy2pXAQFM2lXQozObaca8vnrwAU2MqUzoT6DdGNwgt62g3VkcILeuIV3YWt1Mgk --lightpushnode=/ip4/172.18.140.149/tcp/57014/p2p/16Uiu2HAmEErXXQp3QwTAVodMBsH1J9w4Skqf49SUSPv4oF2v1Je9 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.144.186 waku d8f4b47daf048688e42ab61fcf1270477891283e60ee3e924457f2e4e670c7a2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d8f4b47daf04. Setting up logs at ./log/docker/lightpush_node1_2024-11-25_04-16-32__ccad9e0f-311d-4d17-a304-3f11e0693322__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 32211
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32211/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32211/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.144.186/tcp/32212/p2p/16Uiu2HAmJFPsJpGZg9yWs4DyN25srACtqun8eEokPuDMboEGSpGK","/ip4/172.18.144.186/tcp/32213/ws/p2p/16Uiu2HAmJFPsJpGZg9yWs4DyN25srACtqun8eEokPuDMboEGSpGK"],"enrUri":"enr:-L24QFp0mHYS8z1yA4WQqlePwKEhAtZ_1dMiALNHOLHgzqQRLYf_4vvh6i8OQ3BDrz29cFrcV59ecgJXu9jtWH3DoCcCgmlkgnY0gmlwhKwSkLqKbXVsdGlhZGRyc5YACASsEpC6Bn3UAAoErBKQugZ91d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDUxrGBZUAldpmruzJDpSaBDrwkfN0Nq5BzYf35ogAeIyDdGNwgn3Ug3VkcIJ91oV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32211/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.140.149/tcp/57014/p2p/16Uiu2HAmEErXXQp3QwTAVodMBsH1J9w4Skqf49SUSPv4oF2v1Je9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32211/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.136.158/tcp/63057/p2p/16Uiu2HAm8vsZ4iYnB6iaejMPdaKNzjXwzYksiAGhiz1i1AGBjBSK"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57013/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63056/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32211/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57013/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732508198335377664,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63056/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732508198335377664,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 99c65c75f1f0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id a27db227275a
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 99c65c75f1f0. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id d8f4b47daf04
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a27db227275a. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.