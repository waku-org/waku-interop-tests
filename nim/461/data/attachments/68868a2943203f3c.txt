[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_content_topics with id: 2024-11-25_04-15-55__8fab05ac-a4ff-42c9-b061-4a6f9ba10a30
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-25_04-15-55__8fab05ac-a4ff-42c9-b061-4a6f9ba10a30__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.70.185
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10076', '10077', '10078', '10079', '10080']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10076:10076 -p 10077:10077 -p 10078:10078 -p 10079:10079 -p 10080:10080 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10078 --rest-port=10076 --tcp-port=10077 --discv5-udp-port=10079 --rest-address=0.0.0.0 --nat=extip:172.18.70.185 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f79ea6ad88274933689f509d52ac6fad24dfbc492bceb746ce7addb85ef38ef3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10080 --metrics-logging=true --lightpush=true --relay=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2ec2124cc0f7. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.70.185 waku d0c492fb4fbd214cfd92e6a7a4530435b56e4a82a31d033e8d6dd2b8d811e8cf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d0c492fb4fbd. Setting up logs at ./log/docker/receiving_node1_2024-11-25_04-15-55__8fab05ac-a4ff-42c9-b061-4a6f9ba10a30__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 10076
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10076/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10076/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.70.185/tcp/10077/p2p/16Uiu2HAm3RQbpQ4MUyCWDeKQawkeZm3z9WBPnnt5Y2YZ6j9LyDfw","/ip4/172.18.70.185/tcp/10078/ws/p2p/16Uiu2HAm3RQbpQ4MUyCWDeKQawkeZm3z9WBPnnt5Y2YZ6j9LyDfw"],"enrUri":"enr:-L24QDmhBKzTpPcDq71K2lG9IWuRf6-3Bl92glJUVNiNxEqiGecTzb-IPSijxP-Af_jGxRS7rceoQHp26_yym9E08xgCgmlkgnY0gmlwhKwSRrmKbXVsdGlhZGRyc5YACASsEka5BiddAAoErBJGuQYnXt0DgnJzhQADAQAAiXNlY3AyNTZrMaECdswbQBhvQIZENOUbKVBllX37DDx6kFy25n2Sv3jqwXKDdGNwgiddg3VkcIInX4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-25_04-15-55__8fab05ac-a4ff-42c9-b061-4a6f9ba10a30__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.179.21
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['1139', '1140', '1141', '1142', '1143']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 1139:1139 -p 1140:1140 -p 1141:1141 -p 1142:1142 -p 1143:1143 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1141 --rest-port=1139 --tcp-port=1140 --discv5-udp-port=1142 --rest-address=0.0.0.0 --nat=extip:172.18.179.21 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c81c2fd86fd5acb412c1ff72ec7b1aaa360a0011ee3b6dded8195fbe4ecedaab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1143 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.179.21 waku d56c82c093cf1ec932fcb0b8c6a347de17e7cd8a94fd1c67409c036b6e67dc22
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d56c82c093cf. Setting up logs at ./log/docker/receiving_node2_2024-11-25_04-15-55__8fab05ac-a4ff-42c9-b061-4a6f9ba10a30__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 1139
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1139/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1139/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.179.21/tcp/1140/p2p/16Uiu2HAkwLpHsFJxYL5oVN1CuEdTUboY6EfwQAeZdhyqqzDaRF43","/ip4/172.18.179.21/tcp/1141/ws/p2p/16Uiu2HAkwLpHsFJxYL5oVN1CuEdTUboY6EfwQAeZdhyqqzDaRF43"],"enrUri":"enr:-L24QFv_8aGrZAA_JpcocEMVvnxNkAHUqsdT0xs4VnwZoiihDPUQeoqpjM8wJ7nCMddOXKdU6CoErll-mzjmtVRaZ60CgmlkgnY0gmlwhKwSsxWKbXVsdGlhZGRyc5YACASsErMVBgR0AAoErBKzFQYEdd0DgnJzhQADAQAAiXNlY3AyNTZrMaECHHjeJssPBdBFjiIszBbLcIQzCD7MXkF_R2q7PpzdeziDdGNwggR0g3VkcIIEdoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1139/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.70.185/tcp/10077/p2p/16Uiu2HAm3RQbpQ4MUyCWDeKQawkeZm3z9WBPnnt5Y2YZ6j9LyDfw"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-25_04-15-55__8fab05ac-a4ff-42c9-b061-4a6f9ba10a30__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.141.213
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['23343', '23344', '23345', '23346', '23347']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 23343:23343 -p 23344:23344 -p 23345:23345 -p 23346:23346 -p 23347:23347 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23345 --rest-port=23343 --tcp-port=23344 --discv5-udp-port=23346 --rest-address=0.0.0.0 --nat=extip:172.18.141.213 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1a47c9caef03f6acb30eaffbb0c306f158cb20320ae4181ff89b258dfe140e6a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23347 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QDmhBKzTpPcDq71K2lG9IWuRf6-3Bl92glJUVNiNxEqiGecTzb-IPSijxP-Af_jGxRS7rceoQHp26_yym9E08xgCgmlkgnY0gmlwhKwSRrmKbXVsdGlhZGRyc5YACASsEka5BiddAAoErBJGuQYnXt0DgnJzhQADAQAAiXNlY3AyNTZrMaECdswbQBhvQIZENOUbKVBllX37DDx6kFy25n2Sv3jqwXKDdGNwgiddg3VkcIInX4V3YWt1Mgk --lightpushnode=/ip4/172.18.70.185/tcp/10077/p2p/16Uiu2HAm3RQbpQ4MUyCWDeKQawkeZm3z9WBPnnt5Y2YZ6j9LyDfw --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.141.213 waku 5ea651ee906eb500f6c6be721b460b7b021e78f45d8a53f1ab59c9b75f85c10a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5ea651ee906e. Setting up logs at ./log/docker/lightpush_node1_2024-11-25_04-15-55__8fab05ac-a4ff-42c9-b061-4a6f9ba10a30__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 23343
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23343/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23343/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.141.213/tcp/23344/p2p/16Uiu2HAmCp1TBPtkz6atorURdATQrtRtP3b5VuY45tGNiDmDBG2p","/ip4/172.18.141.213/tcp/23345/ws/p2p/16Uiu2HAmCp1TBPtkz6atorURdATQrtRtP3b5VuY45tGNiDmDBG2p"],"enrUri":"enr:-L24QM6JPBmmqKOJwirihlqkp9C7sGUTjg2jda9hNQySe-RoQFrnFWk46b4OJeCu_gUUkMZc-ZfqzQQa2xkhYUiFHtQCgmlkgnY0gmlwhKwSjdWKbXVsdGlhZGRyc5YACASsEo3VBlswAAoErBKN1QZbMd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDAk95CkqeASdAFIRArXKqNxJnWboaMHPnunGyjGL4L9WDdGNwglswg3VkcIJbMoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23343/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.70.185/tcp/10077/p2p/16Uiu2HAm3RQbpQ4MUyCWDeKQawkeZm3z9WBPnnt5Y2YZ6j9LyDfw"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23343/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.179.21/tcp/1140/p2p/16Uiu2HAkwLpHsFJxYL5oVN1CuEdTUboY6EfwQAeZdhyqqzDaRF43"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10076/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1139/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic Empty string
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23343/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "", "timestamp": 1732508160574381824}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:23343/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A dictionary
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23343/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": {"key": "YWFh"}, "timestamp": 1732508160581167616}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:23343/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic An integer
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23343/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": 1234567890, "timestamp": 1732508160587522304}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:23343/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A list
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23343/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": ["YWFh"], "timestamp": 1732508160595562752}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:23343/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A bool
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23343/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": true, "timestamp": 1732508160601475072}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:23343/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id d0c492fb4fbd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id d56c82c093cf
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d0c492fb4fbd. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 5ea651ee906e
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d56c82c093cf. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.