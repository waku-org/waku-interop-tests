[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2024-09-09_04-40-02__45f90366-a162-4e7d-9a61-69439be6c8a2
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-09-09_04-40-02__45f90366-a162-4e7d-9a61-69439be6c8a2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.116.165
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['34309', '34310', '34311', '34312', '34313']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 34309:34309 -p 34310:34310 -p 34311:34311 -p 34312:34312 -p 34313:34313 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34311 --rest-port=34309 --tcp-port=34310 --discv5-udp-port=34312 --rest-address=0.0.0.0 --nat=extip:172.18.116.165 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=156fff179baa9c74b783e6d324fd0dee4e435fc02eff7ebec9da4d2f4fdaa1dc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34313 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.116.165 waku 1be2ecb6febdd43841e58c25a3fea4b4d3f4a59d247ef0b62ea6649bdfcdf26c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 1be2ecb6febd. Setting up logs at ./log/docker/publishing_node1_2024-09-09_04-40-02__45f90366-a162-4e7d-9a61-69439be6c8a2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 34309
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34309/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34309/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.116.165/tcp/34310/p2p/16Uiu2HAm1g55vgJ6v4tt8zaSBhoDnTcLASsmGbYRLmBtifv4TiuL","/ip4/172.18.116.165/tcp/34311/ws/p2p/16Uiu2HAm1g55vgJ6v4tt8zaSBhoDnTcLASsmGbYRLmBtifv4TiuL"],"enrUri":"enr:-LO4QArU5FGskl8caaHhnXxjXVPKkhhyaHnuTu6XQrEixjFvSkCnKyF-t-B8if4jouO9v4YrUZnh2ixnSktkfxf3HxoBgmlkgnY0gmlwhKwSdKWKbXVsdGlhZGRyc4wACgSsEnSlBoYH3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJc1mDtnxsd0dQqHh4MpLxmhJg-GFVjsv157FQ63WGK_4N0Y3CChgaDdWRwgoYIhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node2_2024-09-09_04-40-02__45f90366-a162-4e7d-9a61-69439be6c8a2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.157.161
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['15651', '15652', '15653', '15654', '15655']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 15651:15651 -p 15652:15652 -p 15653:15653 -p 15654:15654 -p 15655:15655 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15653 --rest-port=15651 --tcp-port=15652 --discv5-udp-port=15654 --rest-address=0.0.0.0 --nat=extip:172.18.157.161 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7f6acdbff0a65f1bb053a8a4e3b5158eb2ab0b74dc89dbca5e6ced1b3fe20bfa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15655 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.157.161 waku 4135c4c5b0ac3e61d59d6b626622fb6df77ad3e64c5af381a1dd9f8bf16b2728
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4135c4c5b0ac. Setting up logs at ./log/docker/publishing_node2_2024-09-09_04-40-02__45f90366-a162-4e7d-9a61-69439be6c8a2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 15651
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15651/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15651/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.157.161/tcp/15652/p2p/16Uiu2HAkwxNtneNiAhCtpZCTQaFsTuDGG8HCgztiNaqD4fKKRTe5","/ip4/172.18.157.161/tcp/15653/ws/p2p/16Uiu2HAkwxNtneNiAhCtpZCTQaFsTuDGG8HCgztiNaqD4fKKRTe5"],"enrUri":"enr:-LO4QDr_o1suml83lJBjhHLbI62rA_n8t6SPG1gXX5kL_8BvLu3krU34REjh7z0rjFGxR_lsoxVfa_Ewo2HptX3ZDZQBgmlkgnY0gmlwhKwSnaGKbXVsdGlhZGRyc4wACgSsEp2hBj0l3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIllQ8z9j73zNzzZPv5RVVYYP8wBI9fDpB-zpg8UbB3LoN0Y3CCPSSDdWRwgj0mhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15651/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.116.165/tcp/34310/p2p/16Uiu2HAm1g55vgJ6v4tt8zaSBhoDnTcLASsmGbYRLmBtifv4TiuL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-09-09_04-40-02__45f90366-a162-4e7d-9a61-69439be6c8a2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.124.100
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['49062', '49063', '49064', '49065', '49066']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 49062:49062 -p 49063:49063 -p 49064:49064 -p 49065:49065 -p 49066:49066 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49064 --rest-port=49062 --tcp-port=49063 --discv5-udp-port=49065 --rest-address=0.0.0.0 --nat=extip:172.18.124.100 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3de7e2f93ad6dfa148cbf9ee050448b7c9bc0bee88de63bbfa9ff4c41e8ed3c5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49066 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QArU5FGskl8caaHhnXxjXVPKkhhyaHnuTu6XQrEixjFvSkCnKyF-t-B8if4jouO9v4YrUZnh2ixnSktkfxf3HxoBgmlkgnY0gmlwhKwSdKWKbXVsdGlhZGRyc4wACgSsEnSlBoYH3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJc1mDtnxsd0dQqHh4MpLxmhJg-GFVjsv157FQ63WGK_4N0Y3CChgaDdWRwgoYIhXdha3UyCw --storenode=/ip4/172.18.116.165/tcp/34310/p2p/16Uiu2HAm1g55vgJ6v4tt8zaSBhoDnTcLASsmGbYRLmBtifv4TiuL --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.116.165/tcp/34310/p2p/16Uiu2HAm1g55vgJ6v4tt8zaSBhoDnTcLASsmGbYRLmBtifv4TiuL
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.124.100 waku f1cb2e65e5fc5728e2fb1154b7667cc5d0b47f6836064752786679eaa4423598
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f1cb2e65e5fc. Setting up logs at ./log/docker/store_node1_2024-09-09_04-40-02__45f90366-a162-4e7d-9a61-69439be6c8a2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 49062
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49062/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49062/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.124.100/tcp/49063/p2p/16Uiu2HAm2XjFYJEd5vSYU1RDMDTcwuss557dFEtvV7X9uycsbdUG","/ip4/172.18.124.100/tcp/49064/ws/p2p/16Uiu2HAm2XjFYJEd5vSYU1RDMDTcwuss557dFEtvV7X9uycsbdUG"],"enrUri":"enr:-LO4QIzx6MxIJbU6VH_24LtyhuI2u0MOlHrxyRSrtG6XVZsFKcRKyarlSiWTiPym6Z4Iox3ve2mxyo2-wGrQ9SBSyoYBgmlkgnY0gmlwhKwSfGSKbXVsdGlhZGRyc4wACgSsEnxkBr-o3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJpjv4QJi-Asr-6CSzKBaejk9a5QbO3M5-XB_Dq2K82jYN0Y3CCv6eDdWRwgr-phXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49062/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.116.165/tcp/34310/p2p/16Uiu2HAm1g55vgJ6v4tt8zaSBhoDnTcLASsmGbYRLmBtifv4TiuL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49062/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.157.161/tcp/15652/p2p/16Uiu2HAkwxNtneNiAhCtpZCTQaFsTuDGG8HCgztiNaqD4fKKRTe5"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34309/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15651/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49062/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725856807679081728}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:217 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34309/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"1al/m5p4xOepg1G69UEMDoyx/maW1E8moQqi09DAVwY="}]}'
[35mDEBUG   [0m src.steps.store:store.py:217 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49062/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"e3408e2fcba4105ba39a","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"1al/m5p4xOepg1G69UEMDoyx/maW1E8moQqi09DAVwY="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1be2ecb6febd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4135c4c5b0ac
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f1cb2e65e5fc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.