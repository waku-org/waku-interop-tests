[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-09-09_04-22-29__a860351f-e60e-48b5-a39f-08cda1df797f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-09_04-22-29__a860351f-e60e-48b5-a39f-08cda1df797f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.46.145
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['29526', '29527', '29528', '29529', '29530']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 29526:29526 -p 29527:29527 -p 29528:29528 -p 29529:29529 -p 29530:29530 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29528 --rest-port=29526 --tcp-port=29527 --discv5-udp-port=29529 --rest-address=0.0.0.0 --nat=extip:172.18.46.145 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fac1ee2684638f6cd7dcd48a10eaffd6d18cd78ae743dd512d3c683c67db7bde --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29530 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.46.145 waku 6506d9d7e9ac146b1408588338d4f64d1e9dd0929f9747a040e278de28b95531
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 6506d9d7e9ac. Setting up logs at ./log/docker/receiving_node1_2024-09-09_04-22-29__a860351f-e60e-48b5-a39f-08cda1df797f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 29526
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29526/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29526/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.46.145/tcp/29527/p2p/16Uiu2HAmSxa5axSrZQuRX8WS7HKtNwWmHekmYN389xANQZsJHHxh","/ip4/172.18.46.145/tcp/29528/ws/p2p/16Uiu2HAmSxa5axSrZQuRX8WS7HKtNwWmHekmYN389xANQZsJHHxh"],"enrUri":"enr:-LO4QJJ35pw-noKvRvKa3pj-QI9tSC43ggzOddG6bRNW03m2ZYTis0DndCPBJTRL6XSD1W54hZrLTMtxBsWA4n-ko40BgmlkgnY0gmlwhKwSLpGKbXVsdGlhZGRyc4wACgSsEi6RBnNY3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPUhKDlvfXNnOYhK42zbYPnhIkPuu45E7UPIB9Xmwz9LoN0Y3CCc1eDdWRwgnNZhXdha3UyDQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-09_04-22-29__a860351f-e60e-48b5-a39f-08cda1df797f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.20.155
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['2513', '2514', '2515', '2516', '2517']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 2513:2513 -p 2514:2514 -p 2515:2515 -p 2516:2516 -p 2517:2517 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2515 --rest-port=2513 --tcp-port=2514 --discv5-udp-port=2516 --rest-address=0.0.0.0 --nat=extip:172.18.20.155 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d0abb3dd3f4d1cb5cce1acdbcbd74c0bcd6deb49c3d4c27fed0a2dc03158dcdf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2517 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.20.155 waku 18068f771185cf99253bffff6b90165ae9239e96741ad66b3b87c149c94061b3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 18068f771185. Setting up logs at ./log/docker/receiving_node2_2024-09-09_04-22-29__a860351f-e60e-48b5-a39f-08cda1df797f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 2513
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2513/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2513/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.20.155/tcp/2514/p2p/16Uiu2HAkyWwS8jNAmQjH3BMnh26ngUZL4D4WxN9zT1doBvtYAFn7","/ip4/172.18.20.155/tcp/2515/ws/p2p/16Uiu2HAkyWwS8jNAmQjH3BMnh26ngUZL4D4WxN9zT1doBvtYAFn7"],"enrUri":"enr:-LO4QCg-Ei0AisHns4CuoZgxLOEMSE3dbHFTPoi8JDFVs-WnUHcXsDdLEKtsF4kEWvtBFJrb6wzOuKzz19i4FXgdsVABgmlkgnY0gmlwhKwSFJuKbXVsdGlhZGRyc4wACgSsEhSbBgnT3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI8yCA1MI_xxwVE45mib-cf92y1wnxvExRoX8zyj_A7qIN0Y3CCCdKDdWRwggnUhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2513/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.46.145/tcp/29527/p2p/16Uiu2HAmSxa5axSrZQuRX8WS7HKtNwWmHekmYN389xANQZsJHHxh"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-09_04-22-29__a860351f-e60e-48b5-a39f-08cda1df797f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.30.230
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['57628', '57629', '57630', '57631', '57632']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 57628:57628 -p 57629:57629 -p 57630:57630 -p 57631:57631 -p 57632:57632 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57630 --rest-port=57628 --tcp-port=57629 --discv5-udp-port=57631 --rest-address=0.0.0.0 --nat=extip:172.18.30.230 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6b9ae6eabab7057c86764dcffff0840975be4de6b1bc01f084d1043db93e7fc5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57632 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QJJ35pw-noKvRvKa3pj-QI9tSC43ggzOddG6bRNW03m2ZYTis0DndCPBJTRL6XSD1W54hZrLTMtxBsWA4n-ko40BgmlkgnY0gmlwhKwSLpGKbXVsdGlhZGRyc4wACgSsEi6RBnNY3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPUhKDlvfXNnOYhK42zbYPnhIkPuu45E7UPIB9Xmwz9LoN0Y3CCc1eDdWRwgnNZhXdha3UyDQ --lightpushnode=/ip4/172.18.46.145/tcp/29527/p2p/16Uiu2HAmSxa5axSrZQuRX8WS7HKtNwWmHekmYN389xANQZsJHHxh --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.30.230 waku 970fefd330cadb0d75697776bfc170480de009885b75fadd4fb18c4c4f59ba63
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 970fefd330ca. Setting up logs at ./log/docker/lightpush_node1_2024-09-09_04-22-29__a860351f-e60e-48b5-a39f-08cda1df797f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 57628
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57628/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57628/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.30.230/tcp/57629/p2p/16Uiu2HAmF93NzPGaFp58kbT8NJey16Z7U5kiJp3KYGft5YWp4fCt","/ip4/172.18.30.230/tcp/57630/ws/p2p/16Uiu2HAmF93NzPGaFp58kbT8NJey16Z7U5kiJp3KYGft5YWp4fCt"],"enrUri":"enr:-LO4QGWmgAbiVKjfKUFCSizJXLtsNiB0KHiu66hE4uiVRqlFUOxcpT2mm-3nABWf3sHdKIV-jCtcSilcBlhgNFccrrMBgmlkgnY0gmlwhKwSHuaKbXVsdGlhZGRyc4wACgSsEh7mBuEe3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMk5w_P1yr6xRktvPuyO8n4Vzv5pQoqX8PJH64i8FtMUYN0Y3CC4R2DdWRwguEfhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57628/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.46.145/tcp/29527/p2p/16Uiu2HAmSxa5axSrZQuRX8WS7HKtNwWmHekmYN389xANQZsJHHxh"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57628/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.20.155/tcp/2514/p2p/16Uiu2HAkyWwS8jNAmQjH3BMnh26ngUZL4D4WxN9zT1doBvtYAFn7"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29526/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2513/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57628/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725855754695650816}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29526/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725855754695650816,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2513/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725855754695650816,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 6506d9d7e9ac
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 18068f771185
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 970fefd330ca
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.