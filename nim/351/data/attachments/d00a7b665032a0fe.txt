[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_to_single_topics with id: 2024-09-09_04-16-53__2a508b66-69a9-41d4-82e1-76e8a909d1a9
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-09_04-16-53__2a508b66-69a9-41d4-82e1-76e8a909d1a9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.0.32
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['22995', '22996', '22997', '22998', '22999']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 22995:22995 -p 22996:22996 -p 22997:22997 -p 22998:22998 -p 22999:22999 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22997 --rest-port=22995 --tcp-port=22996 --discv5-udp-port=22998 --rest-address=0.0.0.0 --nat=extip:172.18.0.32 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=decbcd8e75a88c43a6cfed820b46f7fb0d2b9bbfbce6a9ad45ab9cea00d49858 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22999 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.0.32 waku febc5610f653de141efa08dad1c28b8d9a99cceb38c40a714db7110b369955a8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID febc5610f653. Setting up logs at ./log/docker/node1_2024-09-09_04-16-53__2a508b66-69a9-41d4-82e1-76e8a909d1a9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 22995
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22995/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22995/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.0.32/tcp/22996/p2p/16Uiu2HAm7X6rY7NK82jYqRuz1JvK25UmoYWBXxGmiuVMhBVy3kqC","/ip4/172.18.0.32/tcp/22997/ws/p2p/16Uiu2HAm7X6rY7NK82jYqRuz1JvK25UmoYWBXxGmiuVMhBVy3kqC"],"enrUri":"enr:-LO4QKGqNvr0p-o8NvLdmP-Bs_LznOOom3NpQpMETGTVBgetdC5izZy9Oo6Chr1pA1jXgsN7e8lOAuFafC8VqNfd_3wBgmlkgnY0gmlwhKwSACCKbXVsdGlhZGRyc4wACgSsEgAgBlnV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKzsEX2XSwKU2iiAFUJrfVat5GWH2mKSI57NR7sg4KTx4N0Y3CCWdSDdWRwglnWhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-09_04-16-53__2a508b66-69a9-41d4-82e1-76e8a909d1a9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.70.39
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['3163', '3164', '3165', '3166', '3167']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 3163:3163 -p 3164:3164 -p 3165:3165 -p 3166:3166 -p 3167:3167 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3165 --rest-port=3163 --tcp-port=3164 --discv5-udp-port=3166 --rest-address=0.0.0.0 --nat=extip:172.18.70.39 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bb182bd5d3bd0aa2dcf176c2bfbad3dfea1f6d77cfd55ec63a6db6ac5eddc6f2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3167 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QKGqNvr0p-o8NvLdmP-Bs_LznOOom3NpQpMETGTVBgetdC5izZy9Oo6Chr1pA1jXgsN7e8lOAuFafC8VqNfd_3wBgmlkgnY0gmlwhKwSACCKbXVsdGlhZGRyc4wACgSsEgAgBlnV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKzsEX2XSwKU2iiAFUJrfVat5GWH2mKSI57NR7sg4KTx4N0Y3CCWdSDdWRwglnWhXdha3UyBQ --filternode=/ip4/172.18.0.32/tcp/22996/p2p/16Uiu2HAm7X6rY7NK82jYqRuz1JvK25UmoYWBXxGmiuVMhBVy3kqC
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.70.39 waku a1092c1d11ad2a8fe6bcc9cf1dc21dc497d7112ebe65c5e21e8c5337c0849fe6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a1092c1d11ad. Setting up logs at ./log/docker/node2_2024-09-09_04-16-53__2a508b66-69a9-41d4-82e1-76e8a909d1a9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 3163
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3163/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3163/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.70.39/tcp/3164/p2p/16Uiu2HAmEXcH7gpWJyrR59rzwSBDVqrtAw157H9TejjgLfxVssKR","/ip4/172.18.70.39/tcp/3165/ws/p2p/16Uiu2HAmEXcH7gpWJyrR59rzwSBDVqrtAw157H9TejjgLfxVssKR"],"enrUri":"enr:-LO4QGMGE6i7eB06RFcUn58rQGcyd9-b7OWfpGAlrpwuw7A2Tx_aRoJlV0Sq_v3ZnaFFGqIwsh_wJgl0BEb_qUbI9W8BgmlkgnY0gmlwhKwSRieKbXVsdGlhZGRyc4wACgSsEkYnBgxd3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMb01nxlrMW4mZUvU5MnPCCzivxaaNbqdEA3IhnB3kUJIN0Y3CCDFyDdWRwggxehXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3163/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.0.32/tcp/22996/p2p/16Uiu2HAm7X6rY7NK82jYqRuz1JvK25UmoYWBXxGmiuVMhBVy3kqC"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22995/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3163/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "8e8d7ba8-98f8-4d3a-a02b-632062d3bd91", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"8e8d7ba8-98f8-4d3a-a02b-632062d3bd91","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22995/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3163/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1725855417022566400,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id febc5610f653
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a1092c1d11ad
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'oom': ['INF 2024-09-09 04:16:53.912+00:00 DNS: discoverable ENR                      topics="waku node" tid=1 file=waku_node.nim:1304 enr=enr:-LO4QKGqNvr0p-o8NvLdmP-Bs_LznOOom3NpQpMETGTVBgetdC5izZy9Oo6Chr1pA1jXgsN7e8lOAuFafC8VqNfd_3wBgmlkgnY0gmlwhKwSACCKbXVsdGlhZGRyc4wACgSsEgAgBlnV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKzsEX2XSwKU2iiAFUJrfVat5GWH2mKSI57NR7sg4KTx4N0Y3CCWdSDdWRwglnWhXdha3UyBQ', 'INF 2024-09-09 04:16:53.913+00:00 Discv5: discoverable ENR                   topics="waku discv5" tid=1 file=waku_discv5.nim:317 enr=enr:-LO4QKGqNvr0p-o8NvLdmP-Bs_LznOOom3NpQpMETGTVBgetdC5izZy9Oo6Chr1pA1jXgsN7e8lOAuFafC8VqNfd_3wBgmlkgnY0gmlwhKwSACCKbXVsdGlhZGRyc4wACgSsEgAgBlnV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKzsEX2XSwKU2iiAFUJrfVat5GWH2mKSI57NR7sg4KTx4N0Y3CCWdSDdWRwglnWhXdha3UyBQ']