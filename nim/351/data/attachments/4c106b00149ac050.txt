[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_with_peerAddr with id: 2024-09-09_04-30-27__e2f98057-9959-4225-8493-7a4606037940
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:36 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-09-09_04-30-27__e2f98057-9959-4225-8493-7a4606037940__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.160.244
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['26708', '26709', '26710', '26711', '26712']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 26708:26708 -p 26709:26709 -p 26710:26710 -p 26711:26711 -p 26712:26712 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26710 --rest-port=26708 --tcp-port=26709 --discv5-udp-port=26711 --rest-address=0.0.0.0 --nat=extip:172.18.160.244 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=306cca8bbfcef3abda4ad53bff7a98953dc3dfeea4a45ec82c34c8dad1ceb7a7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26712 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.160.244 waku 81b3b7436e8f7744d63ff47ff981d9cdafd2007154d4b207fc2d1757178a70d5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 81b3b7436e8f. Setting up logs at ./log/docker/publishing_node1_2024-09-09_04-30-27__e2f98057-9959-4225-8493-7a4606037940__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 26708
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26708/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26708/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.160.244/tcp/26709/p2p/16Uiu2HAmHmujbvopWfhyJoadKD4zuG2BQoNcsUgCSfFGDvLxtm9K","/ip4/172.18.160.244/tcp/26710/ws/p2p/16Uiu2HAmHmujbvopWfhyJoadKD4zuG2BQoNcsUgCSfFGDvLxtm9K"],"enrUri":"enr:-LO4QGsXM26BOMwDYcc_BFzj9KlWXho-D1bUW-mei_9cZySmf5bV_s9ClkUtl1-dAr0j47LpbN9r7e64vHX9O6TzEvIBgmlkgnY0gmlwhKwSoPSKbXVsdGlhZGRyc4wACgSsEqD0BmhW3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNMEEgiC_WoVlKW0oI-iMci_XBgLA-FrnmPqEvpSeFXmoN0Y3CCaFWDdWRwgmhXhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-09-09_04-30-27__e2f98057-9959-4225-8493-7a4606037940__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.59.1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['56767', '56768', '56769', '56770', '56771']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 56767:56767 -p 56768:56768 -p 56769:56769 -p 56770:56770 -p 56771:56771 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56769 --rest-port=56767 --tcp-port=56768 --discv5-udp-port=56770 --rest-address=0.0.0.0 --nat=extip:172.18.59.1 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=988b26c4f66e483914815acaffac2afdfd824b83ae8f6ffea55ed0404328da8c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56771 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QGsXM26BOMwDYcc_BFzj9KlWXho-D1bUW-mei_9cZySmf5bV_s9ClkUtl1-dAr0j47LpbN9r7e64vHX9O6TzEvIBgmlkgnY0gmlwhKwSoPSKbXVsdGlhZGRyc4wACgSsEqD0BmhW3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNMEEgiC_WoVlKW0oI-iMci_XBgLA-FrnmPqEvpSeFXmoN0Y3CCaFWDdWRwgmhXhXdha3UyAw --storenode=/ip4/172.18.160.244/tcp/26709/p2p/16Uiu2HAmHmujbvopWfhyJoadKD4zuG2BQoNcsUgCSfFGDvLxtm9K --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.59.1 waku c406af64988d16db9334e4269abfe94b5855c7c6edb47dc766e8ba48a5791fb9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c406af64988d. Setting up logs at ./log/docker/store_node1_2024-09-09_04-30-27__e2f98057-9959-4225-8493-7a4606037940__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 56767
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56767/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56767/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.59.1/tcp/56768/p2p/16Uiu2HAm6anV4YfabMyT4TvehfvE7GjAmHsrbkULzhfVfm2xs973","/ip4/172.18.59.1/tcp/56769/ws/p2p/16Uiu2HAm6anV4YfabMyT4TvehfvE7GjAmHsrbkULzhfVfm2xs973"],"enrUri":"enr:-LO4QKdOooYz52IanRMNv87BiF2erg6-BwPLz9jsvvvWIUP-ShB_jgzsmDz0sH1ateod7D16yaGXTpOmkuh7el7TuSsBgmlkgnY0gmlwhKwSOwGKbXVsdGlhZGRyc4wACgSsEjsBBt3B3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKlxiNmMemMuXmdROWmWPR-Tsugh5slch6b0pzlNcecXoN0Y3CC3cCDdWRwgt3ChXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56767/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.160.244/tcp/26709/p2p/16Uiu2HAmHmujbvopWfhyJoadKD4zuG2BQoNcsUgCSfFGDvLxtm9K"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26708/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56767/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:129 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26708/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:217 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56767/store/v3/messages?peerAddr=%2Fip4%2F172.18.160.244%2Ftcp%2F26709%2Fp2p%2F16Uiu2HAmHmujbvopWfhyJoadKD4zuG2BQoNcsUgCSfFGDvLxtm9K&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"643064f25097c33683a5","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"HzZmMvjTsWQ7QocC6Jc42b5MupN3JhS0QN638naVFwE="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 81b3b7436e8f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c406af64988d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.