[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_content_topics with id: 2024-09-09_04-20-41__61289146-ad01-4ec8-9183-58fe9eeac0d1
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-09_04-20-41__61289146-ad01-4ec8-9183-58fe9eeac0d1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.131.16
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['24944', '24945', '24946', '24947', '24948']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 24944:24944 -p 24945:24945 -p 24946:24946 -p 24947:24947 -p 24948:24948 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24946 --rest-port=24944 --tcp-port=24945 --discv5-udp-port=24947 --rest-address=0.0.0.0 --nat=extip:172.18.131.16 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=af0bca90dd8beee47281d9cae0dd7740cd5f23917bb03ef32ccb50d3bbebceec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24948 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.131.16 waku 7427033ac1dcdb03adcc451d308597dcc60323d38fbb123b3ae0f0f954c4b6f5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7427033ac1dc. Setting up logs at ./log/docker/receiving_node1_2024-09-09_04-20-41__61289146-ad01-4ec8-9183-58fe9eeac0d1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 24944
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24944/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24944/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.131.16/tcp/24945/p2p/16Uiu2HAmBLXRkbr4KYcakoxcCPTaBooNTFUq4L9DCueF5pjSoqc6","/ip4/172.18.131.16/tcp/24946/ws/p2p/16Uiu2HAmBLXRkbr4KYcakoxcCPTaBooNTFUq4L9DCueF5pjSoqc6"],"enrUri":"enr:-LO4QBO2TcfLViGENtnbPQsid-Jo1ChuFT8xWx0jz67BPXj3Qqj1Zb_8_ydwKEfHUN9R-ImjGA2Kck-nStFAgqAa_akBgmlkgnY0gmlwhKwSgxCKbXVsdGlhZGRyc4wACgSsEoMQBmFy3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLsaWqgjkcDhrExD_ou1u5o-aIHIN0pzDWLTURwyQNMc4N0Y3CCYXGDdWRwgmFzhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-09_04-20-41__61289146-ad01-4ec8-9183-58fe9eeac0d1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.57.171
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['40318', '40319', '40320', '40321', '40322']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 40318:40318 -p 40319:40319 -p 40320:40320 -p 40321:40321 -p 40322:40322 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40320 --rest-port=40318 --tcp-port=40319 --discv5-udp-port=40321 --rest-address=0.0.0.0 --nat=extip:172.18.57.171 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b5e0b8e3e763922abc421a0a2a40b7e856adec7d0b889d7db0ff0c64dba2c542 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40322 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.57.171 waku dae6e09b8072e7e6e5e5458a3e24fc724a0c63a046c7796103a796edbb60c2d0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID dae6e09b8072. Setting up logs at ./log/docker/receiving_node2_2024-09-09_04-20-41__61289146-ad01-4ec8-9183-58fe9eeac0d1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 40318
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40318/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40318/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.57.171/tcp/40319/p2p/16Uiu2HAm6DirnVz1zpFMDEZZkmUtt9qj1emZse2DdjAEfs6hcqtV","/ip4/172.18.57.171/tcp/40320/ws/p2p/16Uiu2HAm6DirnVz1zpFMDEZZkmUtt9qj1emZse2DdjAEfs6hcqtV"],"enrUri":"enr:-LO4QIYSf21XHON-jUmCVKbbUq0ga5fmS7xg1QfFAEOGK0cpOJwTHA1qX9w-cQK27I3lolqVcvDm1AERkgsrZO_SR4EBgmlkgnY0gmlwhKwSOauKbXVsdGlhZGRyc4wACgSsEjmrBp2A3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKgYNeLKolhTWjzWA6YXvvK9LXZtBegTanr7l2vLqIzAoN0Y3CCnX-DdWRwgp2BhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40318/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.131.16/tcp/24945/p2p/16Uiu2HAmBLXRkbr4KYcakoxcCPTaBooNTFUq4L9DCueF5pjSoqc6"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-09_04-20-41__61289146-ad01-4ec8-9183-58fe9eeac0d1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.202.190
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['28892', '28893', '28894', '28895', '28896']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 28892:28892 -p 28893:28893 -p 28894:28894 -p 28895:28895 -p 28896:28896 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28894 --rest-port=28892 --tcp-port=28893 --discv5-udp-port=28895 --rest-address=0.0.0.0 --nat=extip:172.18.202.190 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1eddac9da71a4501cbedfe1b47e8a7d06edcdcbfcd0b15613cc0eeeb17dabb02 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28896 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QBO2TcfLViGENtnbPQsid-Jo1ChuFT8xWx0jz67BPXj3Qqj1Zb_8_ydwKEfHUN9R-ImjGA2Kck-nStFAgqAa_akBgmlkgnY0gmlwhKwSgxCKbXVsdGlhZGRyc4wACgSsEoMQBmFy3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLsaWqgjkcDhrExD_ou1u5o-aIHIN0pzDWLTURwyQNMc4N0Y3CCYXGDdWRwgmFzhXdha3UyCQ --lightpushnode=/ip4/172.18.131.16/tcp/24945/p2p/16Uiu2HAmBLXRkbr4KYcakoxcCPTaBooNTFUq4L9DCueF5pjSoqc6 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.202.190 waku a2e0f277ccb760ef9d6bd6baa1f46db8d102839bc192edd62333024cba6318ae
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a2e0f277ccb7. Setting up logs at ./log/docker/lightpush_node1_2024-09-09_04-20-41__61289146-ad01-4ec8-9183-58fe9eeac0d1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 28892
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28892/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28892/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.202.190/tcp/28893/p2p/16Uiu2HAmKteS8GSPRbuKAZ3adY9Q9bMQSwnyxnhzfe2RaEhtxmbu","/ip4/172.18.202.190/tcp/28894/ws/p2p/16Uiu2HAmKteS8GSPRbuKAZ3adY9Q9bMQSwnyxnhzfe2RaEhtxmbu"],"enrUri":"enr:-LO4QP6aNd2PT9QHCYtA-uWSTM41o3rRXIgrquweuWriN_gsBrdgNkNKYyJ8TVUbss4kioGMz9A6AIeL3hBOI3aS1zoBgmlkgnY0gmlwhKwSyr6KbXVsdGlhZGRyc4wACgSsEsq-BnDe3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNrgWuGfrcRhtfvIK3NpJIb3a2dtl7fxRQEkKjK_yFVoIN0Y3CCcN2DdWRwgnDfhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28892/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.131.16/tcp/24945/p2p/16Uiu2HAmBLXRkbr4KYcakoxcCPTaBooNTFUq4L9DCueF5pjSoqc6"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28892/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.57.171/tcp/40319/p2p/16Uiu2HAm6DirnVz1zpFMDEZZkmUtt9qj1emZse2DdjAEfs6hcqtV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24944/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40318/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic Empty string
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28892/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "", "timestamp": 1725855646971940096}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28892/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A dictionary
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28892/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": {"key": "YWFh"}, "timestamp": 1725855646980514048}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28892/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic An integer
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28892/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": 1234567890, "timestamp": 1725855646984998144}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28892/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A list
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28892/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": ["YWFh"], "timestamp": 1725855646989267456}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28892/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A bool
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28892/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": true, "timestamp": 1725855646996039168}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28892/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7427033ac1dc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id dae6e09b8072
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a2e0f277ccb7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.