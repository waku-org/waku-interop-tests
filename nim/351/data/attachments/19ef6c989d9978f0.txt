[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-09-09_04-21-31__8ec95212-9a4d-4d24-b223-a2da73a5ce6e
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-09_04-21-31__8ec95212-9a4d-4d24-b223-a2da73a5ce6e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.102.9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['7729', '7730', '7731', '7732', '7733']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 7729:7729 -p 7730:7730 -p 7731:7731 -p 7732:7732 -p 7733:7733 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7731 --rest-port=7729 --tcp-port=7730 --discv5-udp-port=7732 --rest-address=0.0.0.0 --nat=extip:172.18.102.9 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f0bcb47c6b688dcc4fbd1a850ee0aaea2cc29ffdeebbc4fdae9e33cfdbb5ea6a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7733 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.102.9 waku 207eaa866b08a473e1f3b92c69d188d0363723f3c682dc59b7c4f2062efe785d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 207eaa866b08. Setting up logs at ./log/docker/receiving_node1_2024-09-09_04-21-31__8ec95212-9a4d-4d24-b223-a2da73a5ce6e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 7729
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7729/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7729/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.102.9/tcp/7730/p2p/16Uiu2HAmJFL7SLhKZnju7RXRChWoiAMRD4gchpoDZ5jEWUvncerF","/ip4/172.18.102.9/tcp/7731/ws/p2p/16Uiu2HAmJFL7SLhKZnju7RXRChWoiAMRD4gchpoDZ5jEWUvncerF"],"enrUri":"enr:-LO4QCJGZCL2nGe-WN9guEopqVsLGlkRVw2eXOZS1nDy0GwreLdbd0UpJCNij9oXCJQsgBoYTUq7ECOggg4-KR-aH-oBgmlkgnY0gmlwhKwSZgmKbXVsdGlhZGRyc4wACgSsEmYJBh4z3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNTFoayzn1Vbd8bmi-Bpu6zuBwroNx_8nOc7LpGVBAFBIN0Y3CCHjKDdWRwgh40hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-09_04-21-31__8ec95212-9a4d-4d24-b223-a2da73a5ce6e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.75.229
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['34447', '34448', '34449', '34450', '34451']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 34447:34447 -p 34448:34448 -p 34449:34449 -p 34450:34450 -p 34451:34451 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34449 --rest-port=34447 --tcp-port=34448 --discv5-udp-port=34450 --rest-address=0.0.0.0 --nat=extip:172.18.75.229 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9ca786dee4e0c0b452f6ae5fe3ec10bc7e8ac8d93071feb66cf414dad498b2f5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34451 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.75.229 waku e90658b9d854d89659f62e3ff79f697fc21f9e090edd3c07e1361772dc9b06fa
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e90658b9d854. Setting up logs at ./log/docker/receiving_node2_2024-09-09_04-21-31__8ec95212-9a4d-4d24-b223-a2da73a5ce6e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 34447
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34447/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34447/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.75.229/tcp/34448/p2p/16Uiu2HAmLrHcMHPVkupiD1bQj4JTnfiK7G3Th5gris3MuY884gbk","/ip4/172.18.75.229/tcp/34449/ws/p2p/16Uiu2HAmLrHcMHPVkupiD1bQj4JTnfiK7G3Th5gris3MuY884gbk"],"enrUri":"enr:-LO4QDFRjVrGfoKOvKyr4W_1tm6HvlVmo0Y5ALGw59c85J6ndVD0mulOavjy-Bej7sQ1TwpYYvk6f6KAjRNJD8DkFUUBgmlkgnY0gmlwhKwSS-WKbXVsdGlhZGRyc4wACgSsEkvlBoaR3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN5wmZeXglau3x7t6Rt-ORPLVFJRMZ6nPaJa_2rTFjVY4N0Y3CChpCDdWRwgoaShXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34447/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.102.9/tcp/7730/p2p/16Uiu2HAmJFL7SLhKZnju7RXRChWoiAMRD4gchpoDZ5jEWUvncerF"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-09_04-21-31__8ec95212-9a4d-4d24-b223-a2da73a5ce6e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.13.128
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['55813', '55814', '55815', '55816', '55817']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 55813:55813 -p 55814:55814 -p 55815:55815 -p 55816:55816 -p 55817:55817 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55815 --rest-port=55813 --tcp-port=55814 --discv5-udp-port=55816 --rest-address=0.0.0.0 --nat=extip:172.18.13.128 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7db5d8ffbc99dd232bdc889f840df0ddcee1aa80a0eb842cbd0f44e24efde3de --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55817 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QCJGZCL2nGe-WN9guEopqVsLGlkRVw2eXOZS1nDy0GwreLdbd0UpJCNij9oXCJQsgBoYTUq7ECOggg4-KR-aH-oBgmlkgnY0gmlwhKwSZgmKbXVsdGlhZGRyc4wACgSsEmYJBh4z3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNTFoayzn1Vbd8bmi-Bpu6zuBwroNx_8nOc7LpGVBAFBIN0Y3CCHjKDdWRwgh40hXdha3UyCQ --lightpushnode=/ip4/172.18.102.9/tcp/7730/p2p/16Uiu2HAmJFL7SLhKZnju7RXRChWoiAMRD4gchpoDZ5jEWUvncerF --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.13.128 waku c4faff62bef8fc4f2fc0176d0ac10827f08d99833905862cb72a30877f259593
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c4faff62bef8. Setting up logs at ./log/docker/lightpush_node1_2024-09-09_04-21-31__8ec95212-9a4d-4d24-b223-a2da73a5ce6e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 55813
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55813/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55813/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.13.128/tcp/55814/p2p/16Uiu2HAmMeQM1xYz3FiKbc8FJiWnACgiKj2mamLoPwj6dLyus5zt","/ip4/172.18.13.128/tcp/55815/ws/p2p/16Uiu2HAmMeQM1xYz3FiKbc8FJiWnACgiKj2mamLoPwj6dLyus5zt"],"enrUri":"enr:-LO4QIeObA5cI0BJKQ5auAKvKoFOLWTRlZaKQFV9KXLaKLZDLSBUYqCCOxfApLwFp7tXKTXUrMXBPnM-OCMxY9RfLXUBgmlkgnY0gmlwhKwSDYCKbXVsdGlhZGRyc4wACgSsEg2ABtoH3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOFkrush8EntQjIEhr5c1Ox4XD79MjzLJ9v34nSVltBfYN0Y3CC2gaDdWRwgtoIhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55813/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.102.9/tcp/7730/p2p/16Uiu2HAmJFL7SLhKZnju7RXRChWoiAMRD4gchpoDZ5jEWUvncerF"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55813/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.75.229/tcp/34448/p2p/16Uiu2HAmLrHcMHPVkupiD1bQj4JTnfiK7G3Th5gris3MuY884gbk"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7729/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34447/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55813/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725855696573064960, "version": 2.1}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:55813/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 207eaa866b08
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e90658b9d854
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c4faff62bef8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.