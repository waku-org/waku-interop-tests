[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_receiving_nodes__relay_node1_forwards_lightpushed_message_to_relay_node2 with id: 2024-09-09_04-19-29__cd73f272-3d91-4215-bff7-2b74b53acf85
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-09_04-19-29__cd73f272-3d91-4215-bff7-2b74b53acf85__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.120.161
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['29680', '29681', '29682', '29683', '29684']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 29680:29680 -p 29681:29681 -p 29682:29682 -p 29683:29683 -p 29684:29684 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29682 --rest-port=29680 --tcp-port=29681 --discv5-udp-port=29683 --rest-address=0.0.0.0 --nat=extip:172.18.120.161 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bab2cace59d68567418b4e2aafe83c21c2bd47c807e28e92b3c921a700568abd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29684 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.120.161 waku 6b1d031170911121ff8b22d08842280917468f7990ac11eafc490220039ac65f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 6b1d03117091. Setting up logs at ./log/docker/receiving_node1_2024-09-09_04-19-29__cd73f272-3d91-4215-bff7-2b74b53acf85__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 29680
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29680/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29680/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.120.161/tcp/29681/p2p/16Uiu2HAmT56rXnGRcQHhXEFsfzPSY3wJciFWtUtqYEzzSsz25tbS","/ip4/172.18.120.161/tcp/29682/ws/p2p/16Uiu2HAmT56rXnGRcQHhXEFsfzPSY3wJciFWtUtqYEzzSsz25tbS"],"enrUri":"enr:-LO4QDoIiEbAG5IHzrkRZbWnlExeQOtWypeDLswgwCUgQ5wKV3N5YEeybItxn5pBeCbEsTcT54vft_A8XVsmOIdtepMBgmlkgnY0gmlwhKwSeKGKbXVsdGlhZGRyc4wACgSsEnihBnPy3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPWMOkhudI_S2MlnNl_hX80QMtqpR0txsbt24jQCXeaSYN0Y3CCc_GDdWRwgnPzhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-09_04-19-29__cd73f272-3d91-4215-bff7-2b74b53acf85__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.45.43
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['63684', '63685', '63686', '63687', '63688']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 63684:63684 -p 63685:63685 -p 63686:63686 -p 63687:63687 -p 63688:63688 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63686 --rest-port=63684 --tcp-port=63685 --discv5-udp-port=63687 --rest-address=0.0.0.0 --nat=extip:172.18.45.43 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c60d6fcadce3da65f38eadd1adafe8cfff0c4cfb7f3a3a6b5deb065e8dfee3fb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63688 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.45.43 waku 53f7fa7da56c47b83977f641f465559fb3ba29d6d24f5380b7dbd2f760d1b1f3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 53f7fa7da56c. Setting up logs at ./log/docker/receiving_node2_2024-09-09_04-19-29__cd73f272-3d91-4215-bff7-2b74b53acf85__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 63684
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63684/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63684/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.43/tcp/63685/p2p/16Uiu2HAm2nTfBvsmLRDa1Pm9ZhT8N5Bq7D8v7qFp6fb86wz6thjd","/ip4/172.18.45.43/tcp/63686/ws/p2p/16Uiu2HAm2nTfBvsmLRDa1Pm9ZhT8N5Bq7D8v7qFp6fb86wz6thjd"],"enrUri":"enr:-LO4QCCPBw4axsoEFC4Rn5C8mN5LzyO2x8HUadxJSftKLOQgREsnY6tqu_ao4ERsrz4r9xn_CG9wMRrJOawEZOyB2CEBgmlkgnY0gmlwhKwSLSuKbXVsdGlhZGRyc4wACgSsEi0rBvjG3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJtVRMILf_m0kTKicSAyEPoTwD2mthdNZ26B8g8C9kQMIN0Y3CC-MWDdWRwgvjHhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63684/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.120.161/tcp/29681/p2p/16Uiu2HAmT56rXnGRcQHhXEFsfzPSY3wJciFWtUtqYEzzSsz25tbS"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-09_04-19-29__cd73f272-3d91-4215-bff7-2b74b53acf85__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.110.188
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['40261', '40262', '40263', '40264', '40265']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 40261:40261 -p 40262:40262 -p 40263:40263 -p 40264:40264 -p 40265:40265 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40263 --rest-port=40261 --tcp-port=40262 --discv5-udp-port=40264 --rest-address=0.0.0.0 --nat=extip:172.18.110.188 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eded2df0e0a4f9a91fca3bdefe6debb8c88fce3bff3c8cea66b8b11d4b5c6ebf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40265 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QDoIiEbAG5IHzrkRZbWnlExeQOtWypeDLswgwCUgQ5wKV3N5YEeybItxn5pBeCbEsTcT54vft_A8XVsmOIdtepMBgmlkgnY0gmlwhKwSeKGKbXVsdGlhZGRyc4wACgSsEnihBnPy3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPWMOkhudI_S2MlnNl_hX80QMtqpR0txsbt24jQCXeaSYN0Y3CCc_GDdWRwgnPzhXdha3UyCQ --lightpushnode=/ip4/172.18.120.161/tcp/29681/p2p/16Uiu2HAmT56rXnGRcQHhXEFsfzPSY3wJciFWtUtqYEzzSsz25tbS --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.110.188 waku 71a6d16c1825f6ff02c803fa91e8a6ff5c667371672f28cecc2c7f33fb8fcdc7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 71a6d16c1825. Setting up logs at ./log/docker/lightpush_node1_2024-09-09_04-19-29__cd73f272-3d91-4215-bff7-2b74b53acf85__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 40261
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40261/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40261/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.110.188/tcp/40262/p2p/16Uiu2HAkyu5JQLeTyvsw7GaKLDq8meHCJ5T8TfsdpFzLi135qgxd","/ip4/172.18.110.188/tcp/40263/ws/p2p/16Uiu2HAkyu5JQLeTyvsw7GaKLDq8meHCJ5T8TfsdpFzLi135qgxd"],"enrUri":"enr:-LO4QITmbtk62dwVw733pnKgAYvsHaXaJKK2OOJYxhNi0yEPFNmIdadHf8rKxOggncOWrCldjyC9K3M8ROmjp-53k_YBgmlkgnY0gmlwhKwSbryKbXVsdGlhZGRyc4wACgSsEm68Bp1H3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJCc8xsR65klBgmLLgzKLVYCLyGBrLIaxMODl6gUYLPloN0Y3CCnUaDdWRwgp1IhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40261/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.120.161/tcp/29681/p2p/16Uiu2HAmT56rXnGRcQHhXEFsfzPSY3wJciFWtUtqYEzzSsz25tbS"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40261/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.45.43/tcp/63685/p2p/16Uiu2HAm2nTfBvsmLRDa1Pm9ZhT8N5Bq7D8v7qFp6fb86wz6thjd"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29680/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63684/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40261/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725855575203070464}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29680/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725855575203070464,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63684/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725855575203070464,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 6b1d03117091
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 53f7fa7da56c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 71a6d16c1825
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.