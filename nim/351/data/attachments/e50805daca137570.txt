[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_from_single_content_topic with id: 2024-09-09_04-18-23__b5c39401-e76b-4861-97f0-ba89b0be1fad
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-09_04-18-23__b5c39401-e76b-4861-97f0-ba89b0be1fad__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.245.198
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['3102', '3103', '3104', '3105', '3106']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 3102:3102 -p 3103:3103 -p 3104:3104 -p 3105:3105 -p 3106:3106 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3104 --rest-port=3102 --tcp-port=3103 --discv5-udp-port=3105 --rest-address=0.0.0.0 --nat=extip:172.18.245.198 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3cb45fb4ca5ad4a5e130c8a67d203f86defdcbde0f01d59aeecddec0d51c9802 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3106 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.245.198 waku 5ce1b91c8075ea3278b032e7ec0053cde290cbc59cb0065daadfbd230e58fd54
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5ce1b91c8075. Setting up logs at ./log/docker/node1_2024-09-09_04-18-23__b5c39401-e76b-4861-97f0-ba89b0be1fad__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 3102
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3102/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3102/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.245.198/tcp/3103/p2p/16Uiu2HAmRr6X89vYEfRf1CcnfGRuEFB84Vhu4ooebPHb1vmx3a6o","/ip4/172.18.245.198/tcp/3104/ws/p2p/16Uiu2HAmRr6X89vYEfRf1CcnfGRuEFB84Vhu4ooebPHb1vmx3a6o"],"enrUri":"enr:-LO4QGxobnz-CZg-Xj7BPCuHL8kSmP9jvPZcNm9SiJZ5mId0Nxhl7lcpMy9dmZjoeSEEd-Yfw1jodrnHMBW8EUYt61QBgmlkgnY0gmlwhKwS9caKbXVsdGlhZGRyc4wACgSsEvXGBgwg3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPEAEt9Z9j9gHSxBlZlEp7e2oV7Pw20PQFBlh7qOg9ydIN0Y3CCDB-DdWRwggwhhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-09_04-18-23__b5c39401-e76b-4861-97f0-ba89b0be1fad__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.109.59
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['29187', '29188', '29189', '29190', '29191']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 29187:29187 -p 29188:29188 -p 29189:29189 -p 29190:29190 -p 29191:29191 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29189 --rest-port=29187 --tcp-port=29188 --discv5-udp-port=29190 --rest-address=0.0.0.0 --nat=extip:172.18.109.59 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=43eb4ea4ba53efab9d4e6aae445db45a2efc78cdaad95e432f5bebbe735fa0de --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29191 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QGxobnz-CZg-Xj7BPCuHL8kSmP9jvPZcNm9SiJZ5mId0Nxhl7lcpMy9dmZjoeSEEd-Yfw1jodrnHMBW8EUYt61QBgmlkgnY0gmlwhKwS9caKbXVsdGlhZGRyc4wACgSsEvXGBgwg3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPEAEt9Z9j9gHSxBlZlEp7e2oV7Pw20PQFBlh7qOg9ydIN0Y3CCDB-DdWRwggwhhXdha3UyBQ --filternode=/ip4/172.18.245.198/tcp/3103/p2p/16Uiu2HAmRr6X89vYEfRf1CcnfGRuEFB84Vhu4ooebPHb1vmx3a6o
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.109.59 waku 1a92c03489589c8589255d68af88572ef6f6c7b65079f0a217f1221a777f7b82
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 1a92c0348958. Setting up logs at ./log/docker/node2_2024-09-09_04-18-23__b5c39401-e76b-4861-97f0-ba89b0be1fad__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 29187
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29187/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29187/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.109.59/tcp/29188/p2p/16Uiu2HAkwipUDfxAH3ghytNVtAMrotUborR71SxzXeBwHSTnoMCF","/ip4/172.18.109.59/tcp/29189/ws/p2p/16Uiu2HAkwipUDfxAH3ghytNVtAMrotUborR71SxzXeBwHSTnoMCF"],"enrUri":"enr:-LO4QC_BO6HTRnb7Fi4AJZoooCexH3c2zU-N7kU_8wRgVrlfUq88QfiMyi2e4u1KhccB5qd8Le-QGGJJXicw-b4T97EBgmlkgnY0gmlwhKwSbTuKbXVsdGlhZGRyc4wACgSsEm07BnIF3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIiG9juwh3EwzDf37V4Z2utpIAVB7kTtavd1UzoKoqM3IN0Y3CCcgSDdWRwgnIGhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29187/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.245.198/tcp/3103/p2p/16Uiu2HAmRr6X89vYEfRf1CcnfGRuEFB84Vhu4ooebPHb1vmx3a6o"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3102/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29187/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0167bf00-aff8-419b-8b21-9026d12c5cba", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"0167bf00-aff8-419b-8b21-9026d12c5cba","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3102/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29187/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1725855506492567040,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:29187/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3102/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29187/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:29187/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto. Response content: b'Not subscribed to topic: /test/1/waku-filter/proto'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5ce1b91c8075
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1a92c0348958
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.