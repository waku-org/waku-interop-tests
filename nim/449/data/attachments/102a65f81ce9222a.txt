[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_pubsub_topics with id: 2024-11-14_04-15-39__7c83c899-cb2e-49c9-9ae6-f0f4118208b7
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-14_04-15-39__7c83c899-cb2e-49c9-9ae6-f0f4118208b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.145.77
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['25977', '25978', '25979', '25980', '25981']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 25977:25977 -p 25978:25978 -p 25979:25979 -p 25980:25980 -p 25981:25981 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25979 --rest-port=25977 --tcp-port=25978 --discv5-udp-port=25980 --rest-address=0.0.0.0 --nat=extip:172.18.145.77 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=db09cb948cbd8a8d343cfde31cdc8ebdcce5198bc3daebfefeacfa539f79bb91 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25981 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.145.77 waku 2427735c36d3be79bc95521ca8cde316fffcdba0a2052adcdb435e4ab13d6da4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2427735c36d3. Setting up logs at ./log/docker/receiving_node1_2024-11-14_04-15-39__7c83c899-cb2e-49c9-9ae6-f0f4118208b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 25977
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 91edc459cc15. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25977/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25977/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.145.77/tcp/25978/p2p/16Uiu2HAm2M2mmTDvZ6G8qURfmLagXm1GNtZ7gR5Uegsj2X4z3x4J","/ip4/172.18.145.77/tcp/25979/ws/p2p/16Uiu2HAm2M2mmTDvZ6G8qURfmLagXm1GNtZ7gR5Uegsj2X4z3x4J"],"enrUri":"enr:-L24QPq7nJRemW8CpUFgbbY4dlt4TKalyLJ69vSCaQZqo0hyEJkgwZwmYGi6SVjG1hpXdJ2Y-OdaBBEULV-dLMUX3MkCgmlkgnY0gmlwhKwSkU2KbXVsdGlhZGRyc5YACASsEpFNBmV6AAoErBKRTQZle90DgnJzhQADAQAAiXNlY3AyNTZrMaECZtFqLfQYaoRsViMUPl4Y2j1bz20q7wVq2XaPlV29yTuDdGNwgmV6g3VkcIJlfIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-14_04-15-39__7c83c899-cb2e-49c9-9ae6-f0f4118208b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.253.222
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['61418', '61419', '61420', '61421', '61422']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 61418:61418 -p 61419:61419 -p 61420:61420 -p 61421:61421 -p 61422:61422 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61420 --rest-port=61418 --tcp-port=61419 --discv5-udp-port=61421 --rest-address=0.0.0.0 --nat=extip:172.18.253.222 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=efb951d74f5fcceddabbf51ddaaba3de8cf3ceb22b260a70acb6c85b6d6a1fcd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61422 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.253.222 waku 7bd60bcffacc4c36625e933711c42f138f763a35e8d24733ced4246c09b50e4f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7bd60bcffacc. Setting up logs at ./log/docker/receiving_node2_2024-11-14_04-15-39__7c83c899-cb2e-49c9-9ae6-f0f4118208b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 61418
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61418/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61418/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.253.222/tcp/61419/p2p/16Uiu2HAm3b4CYAUKntDqNJPiZ3MirBCuvFwNxBxjUtERTpL9Hw7i","/ip4/172.18.253.222/tcp/61420/ws/p2p/16Uiu2HAm3b4CYAUKntDqNJPiZ3MirBCuvFwNxBxjUtERTpL9Hw7i"],"enrUri":"enr:-L24QPoFq4u978IWAAiSs97AJPxes7j5eyZZSvG8FLydBM9UBiL-JF8xHv-3a2II03cMkOuLr2vRbgqSUmaHN2UtbGwCgmlkgnY0gmlwhKwS_d6KbXVsdGlhZGRyc5YACASsEv3eBu_rAAoErBL93gbv7N0DgnJzhQADAQAAiXNlY3AyNTZrMaECeUTYvICwrhYn4ElkB0FU5_gB21x_ctRdpuoUu4euUb2DdGNwgu_rg3VkcILv7YV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61418/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.145.77/tcp/25978/p2p/16Uiu2HAm2M2mmTDvZ6G8qURfmLagXm1GNtZ7gR5Uegsj2X4z3x4J"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-14_04-15-39__7c83c899-cb2e-49c9-9ae6-f0f4118208b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.114.82
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['20836', '20837', '20838', '20839', '20840']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 20836:20836 -p 20837:20837 -p 20838:20838 -p 20839:20839 -p 20840:20840 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20838 --rest-port=20836 --tcp-port=20837 --discv5-udp-port=20839 --rest-address=0.0.0.0 --nat=extip:172.18.114.82 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ab0e28a665cf6cae82969fad8adfba7d2c64dd51bbe5e9eff3bdacee26b9eba4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20840 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QPq7nJRemW8CpUFgbbY4dlt4TKalyLJ69vSCaQZqo0hyEJkgwZwmYGi6SVjG1hpXdJ2Y-OdaBBEULV-dLMUX3MkCgmlkgnY0gmlwhKwSkU2KbXVsdGlhZGRyc5YACASsEpFNBmV6AAoErBKRTQZle90DgnJzhQADAQAAiXNlY3AyNTZrMaECZtFqLfQYaoRsViMUPl4Y2j1bz20q7wVq2XaPlV29yTuDdGNwgmV6g3VkcIJlfIV3YWt1Mgk --lightpushnode=/ip4/172.18.145.77/tcp/25978/p2p/16Uiu2HAm2M2mmTDvZ6G8qURfmLagXm1GNtZ7gR5Uegsj2X4z3x4J --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.114.82 waku 4056a656cb6b5e0157b6859d6c80492c2b2559f05fc2bb3e1864d556c2f25a18
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4056a656cb6b. Setting up logs at ./log/docker/lightpush_node1_2024-11-14_04-15-39__7c83c899-cb2e-49c9-9ae6-f0f4118208b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 20836
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20836/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20836/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.114.82/tcp/20837/p2p/16Uiu2HAmHG2hLZfgr9fwyN8sNtZ37uRK6bHfrM1qeeHi4bbpWdEf","/ip4/172.18.114.82/tcp/20838/ws/p2p/16Uiu2HAmHG2hLZfgr9fwyN8sNtZ37uRK6bHfrM1qeeHi4bbpWdEf"],"enrUri":"enr:-L24QCaify3HQxJFXpWFp_bKK87u4NZ0d_632zFUrejl2pSge4Cds1kAqJe451VqdVSRCNfl4EBt-uccpmb3lg2o4ToCgmlkgnY0gmlwhKwSclKKbXVsdGlhZGRyc5YACASsEnJSBlFlAAoErBJyUgZRZt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDRGi6b8ydlG3TNlx4Sy03ipJvZeEEopXEB_eMSgirkOCDdGNwglFlg3VkcIJRZ4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20836/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.145.77/tcp/25978/p2p/16Uiu2HAm2M2mmTDvZ6G8qURfmLagXm1GNtZ7gR5Uegsj2X4z3x4J"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20836/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.253.222/tcp/61419/p2p/16Uiu2HAm3b4CYAUKntDqNJPiZ3MirBCuvFwNxBxjUtERTpL9Hw7i"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25977/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61418/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20836/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1731557744645740800}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:20836/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 2427735c36d3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 7bd60bcffacc
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2427735c36d3. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 4056a656cb6b
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7bd60bcffacc. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.