[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_time_filter_small_timestamp with id: 2024-11-14_04-40-13__161ea4bc-ea40-47bf-abf2-d19fdbac0603
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-11-14_04-40-13__161ea4bc-ea40-47bf-abf2-d19fdbac0603__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.141.51
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['26011', '26012', '26013', '26014', '26015']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 26011:26011 -p 26012:26012 -p 26013:26013 -p 26014:26014 -p 26015:26015 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26013 --rest-port=26011 --tcp-port=26012 --discv5-udp-port=26014 --rest-address=0.0.0.0 --nat=extip:172.18.141.51 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0d70f695bbc1bd7ae219b5ca5bb6bb18ff72eb7c6a2e18de0bedf0dddb66ec3f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26015 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.141.51 waku ce6fc429c22b6b39ea00dfe1b12ae90163ba666af9d931823c681088e9e876ed
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ce6fc429c22b. Setting up logs at ./log/docker/publishing_node1_2024-11-14_04-40-13__161ea4bc-ea40-47bf-abf2-d19fdbac0603__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 26011
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 18cab5eda3f7. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26011/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26011/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.141.51/tcp/26012/p2p/16Uiu2HAm1UMcFDov2Nnrkh8UCz2PAzAj4CEbSpkpnaKjfFUzbhip","/ip4/172.18.141.51/tcp/26013/ws/p2p/16Uiu2HAm1UMcFDov2Nnrkh8UCz2PAzAj4CEbSpkpnaKjfFUzbhip"],"enrUri":"enr:-L24QLEVp9fBoCCjgEesRblU0jklB2cvXJjUmRMdkGN3gGYIdqVVsad5LxI0imGaKf6d1vpomh7162qBr35STdikTLQCgmlkgnY0gmlwhKwSjTOKbXVsdGlhZGRyc5YACASsEo0zBmWcAAoErBKNMwZlnd0DgnJzhQADAQAAiXNlY3AyNTZrMaECWdYXXGzq1JLJpKdOyG6zlnRz0tu4e61z6WLV8uiHIVmDdGNwgmWcg3VkcIJlnoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-11-14_04-40-13__161ea4bc-ea40-47bf-abf2-d19fdbac0603__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.98.236
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['17463', '17464', '17465', '17466', '17467']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 17463:17463 -p 17464:17464 -p 17465:17465 -p 17466:17466 -p 17467:17467 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17465 --rest-port=17463 --tcp-port=17464 --discv5-udp-port=17466 --rest-address=0.0.0.0 --nat=extip:172.18.98.236 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fd0bdedf1bb3e3bcc1debdf80a1cea0a8cfe6a15acb2b0f01e5bcdea29ecbc6c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17467 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLEVp9fBoCCjgEesRblU0jklB2cvXJjUmRMdkGN3gGYIdqVVsad5LxI0imGaKf6d1vpomh7162qBr35STdikTLQCgmlkgnY0gmlwhKwSjTOKbXVsdGlhZGRyc5YACASsEo0zBmWcAAoErBKNMwZlnd0DgnJzhQADAQAAiXNlY3AyNTZrMaECWdYXXGzq1JLJpKdOyG6zlnRz0tu4e61z6WLV8uiHIVmDdGNwgmWcg3VkcIJlnoV3YWt1MgM --storenode=/ip4/172.18.141.51/tcp/26012/p2p/16Uiu2HAm1UMcFDov2Nnrkh8UCz2PAzAj4CEbSpkpnaKjfFUzbhip --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.98.236 waku f89db22aba19dc7de98487fd4fd4580486f960236f31bb3f4f6dada9202e2cfa
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f89db22aba19. Setting up logs at ./log/docker/store_node1_2024-11-14_04-40-13__161ea4bc-ea40-47bf-abf2-d19fdbac0603__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 17463
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17463/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17463/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.98.236/tcp/17464/p2p/16Uiu2HAm7MyeqDTHrtduWrGhhkp1w2xNmSbC9ov6sSSaXKAD1QTf","/ip4/172.18.98.236/tcp/17465/ws/p2p/16Uiu2HAm7MyeqDTHrtduWrGhhkp1w2xNmSbC9ov6sSSaXKAD1QTf"],"enrUri":"enr:-L24QJkwCspIp-8eDlhd_mnkt4t3rO1EJi2H5U6D8K8cMJmOdvGUzu8Fls2FxbzPLT1tusyKSWZ8AJW-NglUX9Rk9w0CgmlkgnY0gmlwhKwSYuyKbXVsdGlhZGRyc5YACASsEmLsBkQ4AAoErBJi7AZEOd0DgnJzhQADAQAAiXNlY3AyNTZrMaECsVnnJBJ678rbwav37JbxjziyW_SOtRXHaV6Yd6eMTiaDdGNwgkQ4g3VkcIJEOoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17463/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.141.51/tcp/26012/p2p/16Uiu2HAm1UMcFDov2Nnrkh8UCz2PAzAj4CEbSpkpnaKjfFUzbhip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26011/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17463/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26011/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26011/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26011/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26011/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26011/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26011/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:218 inquering stored messages with start time 1731559222071439104 after end time 1731559235071453185
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26011/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1731559222071439104&endTime=1731559235071453185&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"OmkWr5wZ25xoF2u+4irgsCZ8zhyK4fsHzdfRMzZdRg4=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1731559222071439104,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"eFNczCtmXrerJRn7PPvcevxS6xcbzzoINngbuqOvIMY=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1731559224071444992,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"ymaKpgz5yn6Srnq+wMp+sOdeHi21hXNrjshIf7bWghI=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1731559224971447040,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"nx8vbRYzgtZGyIIcce2IrqlnXHmuz5k9js0PP5O/5cc=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1731559225171449856,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"tZEilEBCZ46fwRtgQu/14iQ6u38rVA5QFsAWnzrLx3o=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1731559227071450880,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"rO89lbfYOJLH40TiBkR2iSC3PZBYQyfzJsBz7V3gd60=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1731559235071453184,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:221 number of messages stored for start time 1731559222071439104 and end time = 1731559235071453185 is  6
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17463/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1731559222071439104&endTime=1731559235071453185&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"OmkWr5wZ25xoF2u+4irgsCZ8zhyK4fsHzdfRMzZdRg4=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1731559222071439104,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"eFNczCtmXrerJRn7PPvcevxS6xcbzzoINngbuqOvIMY=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1731559224071444992,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"ymaKpgz5yn6Srnq+wMp+sOdeHi21hXNrjshIf7bWghI=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1731559224971447040,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"nx8vbRYzgtZGyIIcce2IrqlnXHmuz5k9js0PP5O/5cc=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1731559225171449856,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"tZEilEBCZ46fwRtgQu/14iQ6u38rVA5QFsAWnzrLx3o=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1731559227071450880,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"rO89lbfYOJLH40TiBkR2iSC3PZBYQyfzJsBz7V3gd60=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1731559235071453184,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:221 number of messages stored for start time 1731559222071439104 and end time = 1731559235071453185 is  6
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id ce6fc429c22b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id f89db22aba19
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ce6fc429c22b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.