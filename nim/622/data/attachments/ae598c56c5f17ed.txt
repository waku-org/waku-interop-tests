[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publishing_node_restarts with id: 2025-01-20_04-11-53__3f76fe32-0114-4fec-8732-048852eb3ddc
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-20_04-11-53__3f76fe32-0114-4fec-8732-048852eb3ddc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.104.215
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['25250', '25251', '25252', '25253', '25254']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 25250:25250 -p 25251:25251 -p 25252:25252 -p 25253:25253 -p 25254:25254 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25252 --rest-port=25250 --tcp-port=25251 --discv5-udp-port=25253 --rest-address=0.0.0.0 --nat=extip:172.18.104.215 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ba0ebebed9d0df6f91154c9deecba2250ad9fead937fcf09e4eec0eb162beff4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25254 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.104.215 waku b58adc11e7d15e16e34da4e48980b9aaf955eabe071248a1f12e0cdb0eb0129c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b58adc11e7d1. Setting up logs at ./log/docker/publishing_node1_2025-01-20_04-11-53__3f76fe32-0114-4fec-8732-048852eb3ddc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 25250
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 40a0fd82b931. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25250/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25250/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.215/tcp/25251/p2p/16Uiu2HAmMtbt1qNiEati2tVog2MbJfNt1fByF7g1UZHxMJi4tu2f","/ip4/172.18.104.215/tcp/25252/ws/p2p/16Uiu2HAmMtbt1qNiEati2tVog2MbJfNt1fByF7g1UZHxMJi4tu2f"],"enrUri":"enr:-L24QLWsYSWl730z2jpmSFvYVu9qrgXWjXFL8zkAV0W2r4rXIdZQnaLE0z17nFhORwDp_hcmaAbZTX2mnEikZtoWsb8CgmlkgnY0gmlwhKwSaNeKbXVsdGlhZGRyc5YACASsEmjXBmKjAAoErBJo1wZipN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDiTXoDkoyEbQBl-Eb_QAfy89hd0dn2k0fCthm56dLyriDdGNwgmKjg3VkcIJipYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-20_04-11-53__3f76fe32-0114-4fec-8732-048852eb3ddc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.128.5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['17432', '17433', '17434', '17435', '17436']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 17432:17432 -p 17433:17433 -p 17434:17434 -p 17435:17435 -p 17436:17436 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17434 --rest-port=17432 --tcp-port=17433 --discv5-udp-port=17435 --rest-address=0.0.0.0 --nat=extip:172.18.128.5 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=378c6dad73cdfebcc85d6827cca80a1f0c8ee296c16ae6dbb50ce5e92d6ff4cd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17436 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLWsYSWl730z2jpmSFvYVu9qrgXWjXFL8zkAV0W2r4rXIdZQnaLE0z17nFhORwDp_hcmaAbZTX2mnEikZtoWsb8CgmlkgnY0gmlwhKwSaNeKbXVsdGlhZGRyc5YACASsEmjXBmKjAAoErBJo1wZipN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDiTXoDkoyEbQBl-Eb_QAfy89hd0dn2k0fCthm56dLyriDdGNwgmKjg3VkcIJipYV3YWt1MgM --storenode=/ip4/172.18.104.215/tcp/25251/p2p/16Uiu2HAmMtbt1qNiEati2tVog2MbJfNt1fByF7g1UZHxMJi4tu2f --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.128.5 waku 37102ef42dbb4d864c36cc76eddafea6b673af430db07ef8b9c41cc0bbeebdc5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 37102ef42dbb. Setting up logs at ./log/docker/store_node1_2025-01-20_04-11-53__3f76fe32-0114-4fec-8732-048852eb3ddc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 17432
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17432/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17432/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.128.5/tcp/17433/p2p/16Uiu2HAmUhxBEYKq9MekZfQZHovS7Ga2rfqMxu8j7ytY7cZw9nxu","/ip4/172.18.128.5/tcp/17434/ws/p2p/16Uiu2HAmUhxBEYKq9MekZfQZHovS7Ga2rfqMxu8j7ytY7cZw9nxu"],"enrUri":"enr:-L24QIvkffextPwYDggo9leqTTEIypBQJorVWwU13YWlwegHerI25qzM58bmJkeyHRK5iXmJavTjlKljYBRbCsTR4n8CgmlkgnY0gmlwhKwSgAWKbXVsdGlhZGRyc5YACASsEoAFBkQZAAoErBKABQZEGt0DgnJzhQADAQAAiXNlY3AyNTZrMaED7n1Gm2U5yZ1yeeE5Z0-sSTQUznC6ZCNFOJY2rM9nuV6DdGNwgkQZg3VkcIJEG4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17432/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.104.215/tcp/25251/p2p/16Uiu2HAmMtbt1qNiEati2tVog2MbJfNt1fByF7g1UZHxMJi4tu2f"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25250/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17432/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25250/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25250/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b58adc11e7d1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 37102ef42dbb
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b58adc11e7d1. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-20_04-11-53__3f76fe32-0114-4fec-8732-048852eb3ddc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-20_04-11-53__3f76fe32-0114-4fec-8732-048852eb3ddc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publishing_node_restarts with id: 2025-01-20_04-11-58__5f31a2f6-163c-4224-97af-65bafb971230
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-20_04-11-58__5f31a2f6-163c-4224-97af-65bafb971230__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.131.251
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8503', '8504', '8505', '8506', '8507']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8503:8503 -p 8504:8504 -p 8505:8505 -p 8506:8506 -p 8507:8507 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8505 --rest-port=8503 --tcp-port=8504 --discv5-udp-port=8506 --rest-address=0.0.0.0 --nat=extip:172.18.131.251 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0a7cb1c24dcf181f0691f161b8ddd3d26ed87064e2f07bdf136c43eb2ea01cc8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8507 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.131.251 waku c76a72b6e62b16b1c6368835788774c0bc47a3a3ad5e2a8ad9db812078bc7e14
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c76a72b6e62b. Setting up logs at ./log/docker/publishing_node1_2025-01-20_04-11-58__5f31a2f6-163c-4224-97af-65bafb971230__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 8503
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 37102ef42dbb. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8503/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8503/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.131.251/tcp/8504/p2p/16Uiu2HAmU2xets4fBrEZo5fNU3P1exFNXivYegJsYpeS8BdpGKGS","/ip4/172.18.131.251/tcp/8505/ws/p2p/16Uiu2HAmU2xets4fBrEZo5fNU3P1exFNXivYegJsYpeS8BdpGKGS"],"enrUri":"enr:-L24QFgow-F7im3MSFGYzjsOwnrHGZ_kAkbkZrUbm8140GiTbleSCIykC-l1RbBqMiIs2PyIvwhyupIlH5x01fai-gsCgmlkgnY0gmlwhKwSg_uKbXVsdGlhZGRyc5YACASsEoP7BiE4AAoErBKD-wYhOd0DgnJzhQADAQAAiXNlY3AyNTZrMaED5IAp2v62cVp0EXDcYJQscj_o4P1dADAkXSx16N1RX8-DdGNwgiE4g3VkcIIhOoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-20_04-11-58__5f31a2f6-163c-4224-97af-65bafb971230__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.185.158
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['36924', '36925', '36926', '36927', '36928']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 36924:36924 -p 36925:36925 -p 36926:36926 -p 36927:36927 -p 36928:36928 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36926 --rest-port=36924 --tcp-port=36925 --discv5-udp-port=36927 --rest-address=0.0.0.0 --nat=extip:172.18.185.158 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e8aaadc31ebf03522e64cdc7aaa9c7d6eba7f468faaa8ebbff38d28800fc0e4b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36928 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFgow-F7im3MSFGYzjsOwnrHGZ_kAkbkZrUbm8140GiTbleSCIykC-l1RbBqMiIs2PyIvwhyupIlH5x01fai-gsCgmlkgnY0gmlwhKwSg_uKbXVsdGlhZGRyc5YACASsEoP7BiE4AAoErBKD-wYhOd0DgnJzhQADAQAAiXNlY3AyNTZrMaED5IAp2v62cVp0EXDcYJQscj_o4P1dADAkXSx16N1RX8-DdGNwgiE4g3VkcIIhOoV3YWt1MgM --storenode=/ip4/172.18.131.251/tcp/8504/p2p/16Uiu2HAmU2xets4fBrEZo5fNU3P1exFNXivYegJsYpeS8BdpGKGS --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.185.158 waku 33a071d9f6985be714c36135a80de869f1e750bb4f8f026340ffd68db5d0055d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 33a071d9f698. Setting up logs at ./log/docker/store_node1_2025-01-20_04-11-58__5f31a2f6-163c-4224-97af-65bafb971230__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 36924
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36924/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36924/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.185.158/tcp/36925/p2p/16Uiu2HAmBaYtAUe97pEc9jUwidHuwR2wGcgHuk59jrLWmJGLTUT1","/ip4/172.18.185.158/tcp/36926/ws/p2p/16Uiu2HAmBaYtAUe97pEc9jUwidHuwR2wGcgHuk59jrLWmJGLTUT1"],"enrUri":"enr:-L24QG2_roBJkUZq2JgMP81VJwipA6gYxfS0rLzCJJ9VbY7xTAw9IWdT4lFxpNho7fhMXprRu8BthHi3NCmaqeNQbfsCgmlkgnY0gmlwhKwSuZ6KbXVsdGlhZGRyc5YACASsErmeBpA9AAoErBK5ngaQPt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC8AExhPlLVVUWUAkVqW0C-Zgv0yYq54P0lQsV0u5FpJCDdGNwgpA9g3VkcIKQP4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36924/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.131.251/tcp/8504/p2p/16Uiu2HAmU2xets4fBrEZo5fNU3P1exFNXivYegJsYpeS8BdpGKGS"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8503/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36924/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8503/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8503/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c76a72b6e62b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 33a071d9f698
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c76a72b6e62b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-20_04-11-58__5f31a2f6-163c-4224-97af-65bafb971230__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-20_04-11-58__5f31a2f6-163c-4224-97af-65bafb971230__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publishing_node_restarts with id: 2025-01-20_04-12-03__38b7eb91-c416-46e6-80a1-d5b59bd8e266
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-20_04-12-03__38b7eb91-c416-46e6-80a1-d5b59bd8e266__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.117.12
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5426', '5427', '5428', '5429', '5430']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5426:5426 -p 5427:5427 -p 5428:5428 -p 5429:5429 -p 5430:5430 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5428 --rest-port=5426 --tcp-port=5427 --discv5-udp-port=5429 --rest-address=0.0.0.0 --nat=extip:172.18.117.12 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e6826fcbafdc0d85b2193f28d2aab064c86007efdbaba90320d8a3e1dd0b3fe7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5430 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.117.12 waku 751fa04e85accb3cf94d971adf1fa9d87fa8bb5cafdfd33417d027c87f034f85
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 751fa04e85ac. Setting up logs at ./log/docker/publishing_node1_2025-01-20_04-12-03__38b7eb91-c416-46e6-80a1-d5b59bd8e266__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 5426
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 33a071d9f698. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5426/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5426/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.117.12/tcp/5427/p2p/16Uiu2HAkx91xUCtQKLi6UHkkEE7uTuLzoAvntx7Z7z9vNBdwoD6H","/ip4/172.18.117.12/tcp/5428/ws/p2p/16Uiu2HAkx91xUCtQKLi6UHkkEE7uTuLzoAvntx7Z7z9vNBdwoD6H"],"enrUri":"enr:-L24QKN34Xj17_XjRHhvdeFGdb7ZdX9yEW0dufMGrX0usKa5MJDslPqrskhDFv5S1WDzQh4PO93eX9r_5nHkV6jh1zkCgmlkgnY0gmlwhKwSdQyKbXVsdGlhZGRyc5YACASsEnUMBhUzAAoErBJ1DAYVNN0DgnJzhQADAQAAiXNlY3AyNTZrMaECKE7GeZEmTAAaT3eLSxjERiEAwMWZi6GEiAGlR3kEsfKDdGNwghUzg3VkcIIVNYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-20_04-12-03__38b7eb91-c416-46e6-80a1-d5b59bd8e266__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.6.71
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['60854', '60855', '60856', '60857', '60858']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 60854:60854 -p 60855:60855 -p 60856:60856 -p 60857:60857 -p 60858:60858 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60856 --rest-port=60854 --tcp-port=60855 --discv5-udp-port=60857 --rest-address=0.0.0.0 --nat=extip:172.18.6.71 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ce8e63edb48bf9a7c8ec87b9adb8b14a6a019f81afdcbf111d33136eaa350fca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60858 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QKN34Xj17_XjRHhvdeFGdb7ZdX9yEW0dufMGrX0usKa5MJDslPqrskhDFv5S1WDzQh4PO93eX9r_5nHkV6jh1zkCgmlkgnY0gmlwhKwSdQyKbXVsdGlhZGRyc5YACASsEnUMBhUzAAoErBJ1DAYVNN0DgnJzhQADAQAAiXNlY3AyNTZrMaECKE7GeZEmTAAaT3eLSxjERiEAwMWZi6GEiAGlR3kEsfKDdGNwghUzg3VkcIIVNYV3YWt1MgM --storenode=/ip4/172.18.117.12/tcp/5427/p2p/16Uiu2HAkx91xUCtQKLi6UHkkEE7uTuLzoAvntx7Z7z9vNBdwoD6H --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.6.71 waku 4105b80b7143970f8409d11c21e0c7cc42c7d142ca53c4cbb1520a7fcf23e5d7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4105b80b7143. Setting up logs at ./log/docker/store_node1_2025-01-20_04-12-03__38b7eb91-c416-46e6-80a1-d5b59bd8e266__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 60854
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60854/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60854/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.6.71/tcp/60855/p2p/16Uiu2HAmEaZb5ovPqjWFciMSmpsS2x5hyTh57pQ5qEGxDAD5KyY1","/ip4/172.18.6.71/tcp/60856/ws/p2p/16Uiu2HAmEaZb5ovPqjWFciMSmpsS2x5hyTh57pQ5qEGxDAD5KyY1"],"enrUri":"enr:-L24QM8XyEvsxJ_uYO4Df08y9wEdj3O28MwochUTt_s56XnRZ8mMNiJkIid-sP_nzZhX455d585XB6Pem8XuGBUZJ30CgmlkgnY0gmlwhKwSBkeKbXVsdGlhZGRyc5YACASsEgZHBu23AAoErBIGRwbtuN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDHJUNS6yLD5NMlw1mWQdG-nFQRwuE_Wslc2OZY1VJ_LaDdGNwgu23g3VkcILtuYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60854/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.117.12/tcp/5427/p2p/16Uiu2HAkx91xUCtQKLi6UHkkEE7uTuLzoAvntx7Z7z9vNBdwoD6H"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5426/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60854/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5426/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5426/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 751fa04e85ac
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4105b80b7143
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 751fa04e85ac. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-20_04-12-03__38b7eb91-c416-46e6-80a1-d5b59bd8e266__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-20_04-12-03__38b7eb91-c416-46e6-80a1-d5b59bd8e266__wakuorg_nwaku:latest.log