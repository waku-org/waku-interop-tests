[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_get_store_message_with_version with id: 2025-01-20_04-07-49__fe69b717-df1a-463f-99de-a7f4abe797a1
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-20_04-07-49__fe69b717-df1a-463f-99de-a7f4abe797a1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.86.53
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['63364', '63365', '63366', '63367', '63368']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 63364:63364 -p 63365:63365 -p 63366:63366 -p 63367:63367 -p 63368:63368 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63366 --rest-port=63364 --tcp-port=63365 --discv5-udp-port=63367 --rest-address=0.0.0.0 --nat=extip:172.18.86.53 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9a0b1eeed3125db9fe2cc14a49d02ea80826e64997b5eb7c5b1a35ebb4b47c0c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63368 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.86.53 waku ebe7c8a3849aa6b725c6f44121ef978588fe85e6739c1d4c61bb605ba71808aa
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ebe7c8a3849a. Setting up logs at ./log/docker/publishing_node1_2025-01-20_04-07-49__fe69b717-df1a-463f-99de-a7f4abe797a1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 63364
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 463e304f5529. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63364/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63364/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.86.53/tcp/63365/p2p/16Uiu2HAmELEKjSqMKzWdgqhPttwyHWtp3GiVG2H6joGrXWm5qHTb","/ip4/172.18.86.53/tcp/63366/ws/p2p/16Uiu2HAmELEKjSqMKzWdgqhPttwyHWtp3GiVG2H6joGrXWm5qHTb"],"enrUri":"enr:-L24QLNHP9MFz3H1JG0U4Zj9819GW7AfG9c4P-oXDkweCpGzewuw4Xb9oV8-bokv9sRUvRDONpsDLimCHSYQ1ZObvL8CgmlkgnY0gmlwhKwSVjWKbXVsdGlhZGRyc5YACASsElY1BveFAAoErBJWNQb3ht0DgnJzhQADAQAAiXNlY3AyNTZrMaEDGOkjUioU5vlNn8zrRDcFZRrtK-DqRFNN2roTy4jlCsaDdGNwgveFg3VkcIL3h4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-20_04-07-49__fe69b717-df1a-463f-99de-a7f4abe797a1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.165.18
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['63859', '63860', '63861', '63862', '63863']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 63859:63859 -p 63860:63860 -p 63861:63861 -p 63862:63862 -p 63863:63863 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63861 --rest-port=63859 --tcp-port=63860 --discv5-udp-port=63862 --rest-address=0.0.0.0 --nat=extip:172.18.165.18 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=de1e2dcf5b2f3f4f92d68e1468dbd73144ee34caa3c0c34c3b700bb4b1289b16 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63863 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLNHP9MFz3H1JG0U4Zj9819GW7AfG9c4P-oXDkweCpGzewuw4Xb9oV8-bokv9sRUvRDONpsDLimCHSYQ1ZObvL8CgmlkgnY0gmlwhKwSVjWKbXVsdGlhZGRyc5YACASsElY1BveFAAoErBJWNQb3ht0DgnJzhQADAQAAiXNlY3AyNTZrMaEDGOkjUioU5vlNn8zrRDcFZRrtK-DqRFNN2roTy4jlCsaDdGNwgveFg3VkcIL3h4V3YWt1MgM --storenode=/ip4/172.18.86.53/tcp/63365/p2p/16Uiu2HAmELEKjSqMKzWdgqhPttwyHWtp3GiVG2H6joGrXWm5qHTb --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.165.18 waku a1e6cfc67dabe4de572c6630ef6daa2cf627b84959bd16542b628be2cc09ec9c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a1e6cfc67dab. Setting up logs at ./log/docker/store_node1_2025-01-20_04-07-49__fe69b717-df1a-463f-99de-a7f4abe797a1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 63859
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63859/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63859/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.165.18/tcp/63860/p2p/16Uiu2HAmCdKs2GyJ7n39zD7j41SKZLUwCh9EfyLeYhVriGkgo4rh","/ip4/172.18.165.18/tcp/63861/ws/p2p/16Uiu2HAmCdKs2GyJ7n39zD7j41SKZLUwCh9EfyLeYhVriGkgo4rh"],"enrUri":"enr:-L24QGJ8pOPqvSEDeJybPkypiHRm29DOVSCpXVXVvCpEjhncNEaK26CPWGnvmo2nkmqR4U1iSWeho-OyPFl0EY9OKBcCgmlkgnY0gmlwhKwSpRKKbXVsdGlhZGRyc5YACASsEqUSBvl0AAoErBKlEgb5dd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_5LmwYdoG3fANUwJOfLNH7xsZhb2x1NL6v9IPEu44m6DdGNwgvl0g3VkcIL5doV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63859/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.86.53/tcp/63365/p2p/16Uiu2HAmELEKjSqMKzWdgqhPttwyHWtp3GiVG2H6joGrXWm5qHTb"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63364/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63859/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63364/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)', "version": 10}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63364/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ebe7c8a3849a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a1e6cfc67dab
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ebe7c8a3849a. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-20_04-07-49__fe69b717-df1a-463f-99de-a7f4abe797a1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-20_04-07-49__fe69b717-df1a-463f-99de-a7f4abe797a1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_get_store_message_with_version with id: 2025-01-20_04-07-53__88b6dbdb-f6eb-42ea-a888-b7efb259d2bb
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-20_04-07-53__88b6dbdb-f6eb-42ea-a888-b7efb259d2bb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.118.210
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['54469', '54470', '54471', '54472', '54473']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 54469:54469 -p 54470:54470 -p 54471:54471 -p 54472:54472 -p 54473:54473 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54471 --rest-port=54469 --tcp-port=54470 --discv5-udp-port=54472 --rest-address=0.0.0.0 --nat=extip:172.18.118.210 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=da7fcee9d5dccabdb85aa7fcabeac8591b8a1fab5a7980facfeea1ceedadeeee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54473 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.118.210 waku 682ce0997e415d12a46cb0bad1143d5c2301dedbcccb28a1f97df9a38ec576a1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 682ce0997e41. Setting up logs at ./log/docker/publishing_node1_2025-01-20_04-07-53__88b6dbdb-f6eb-42ea-a888-b7efb259d2bb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 54469
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a1e6cfc67dab. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54469/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54469/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.118.210/tcp/54470/p2p/16Uiu2HAmUJvrDznbrNzxT9xeqHT1my67WwMSyGd3h96wpebk7YyM","/ip4/172.18.118.210/tcp/54471/ws/p2p/16Uiu2HAmUJvrDznbrNzxT9xeqHT1my67WwMSyGd3h96wpebk7YyM"],"enrUri":"enr:-L24QPo1-t0tlYoYPeram1wrGOCozo_1zcEk9Zv1KEyUlPJkQZX38aWfE05WcajzWCzXpsMJakaVuGCSg__-gnQpiSkCgmlkgnY0gmlwhKwSdtKKbXVsdGlhZGRyc5YACASsEnbSBtTGAAoErBJ20gbUx90DgnJzhQADAQAAiXNlY3AyNTZrMaED6JdqeR6lcsGmlTRb783B3atwNn-E9QMHWKg2sJvLnsCDdGNwgtTGg3VkcILUyIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-20_04-07-53__88b6dbdb-f6eb-42ea-a888-b7efb259d2bb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.181.1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['55473', '55474', '55475', '55476', '55477']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 55473:55473 -p 55474:55474 -p 55475:55475 -p 55476:55476 -p 55477:55477 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55475 --rest-port=55473 --tcp-port=55474 --discv5-udp-port=55476 --rest-address=0.0.0.0 --nat=extip:172.18.181.1 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e7a0dae96f9befc36316b861a5f2d0cf2c2e8fad4e5bee36b74bd82736dea9ee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55477 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QPo1-t0tlYoYPeram1wrGOCozo_1zcEk9Zv1KEyUlPJkQZX38aWfE05WcajzWCzXpsMJakaVuGCSg__-gnQpiSkCgmlkgnY0gmlwhKwSdtKKbXVsdGlhZGRyc5YACASsEnbSBtTGAAoErBJ20gbUx90DgnJzhQADAQAAiXNlY3AyNTZrMaED6JdqeR6lcsGmlTRb783B3atwNn-E9QMHWKg2sJvLnsCDdGNwgtTGg3VkcILUyIV3YWt1MgM --storenode=/ip4/172.18.118.210/tcp/54470/p2p/16Uiu2HAmUJvrDznbrNzxT9xeqHT1my67WwMSyGd3h96wpebk7YyM --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.181.1 waku c915f5253195217d328d9ba78ee96ab39aac925dbe1aff1f0827c07773129154
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c915f5253195. Setting up logs at ./log/docker/store_node1_2025-01-20_04-07-53__88b6dbdb-f6eb-42ea-a888-b7efb259d2bb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 55473
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55473/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55473/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.181.1/tcp/55474/p2p/16Uiu2HAkxJxuAYWYQUz2EzQTi1ss3NQCD2FLqYjJ3133K5q7osRc","/ip4/172.18.181.1/tcp/55475/ws/p2p/16Uiu2HAkxJxuAYWYQUz2EzQTi1ss3NQCD2FLqYjJ3133K5q7osRc"],"enrUri":"enr:-L24QJswjxc4QmDsPStg6jh0CzPqedmFbMMbY0jdMfQqbhR1QoQPerT2-MxasDXYl1jR-s1_KEiaLfjLJCLi0xnwuPgCgmlkgnY0gmlwhKwStQGKbXVsdGlhZGRyc5YACASsErUBBtiyAAoErBK1AQbYs90DgnJzhQADAQAAiXNlY3AyNTZrMaECKtsgeVPfSEZziaXElmhreA2N7fDjnH1nB0VJBsHD0iuDdGNwgtiyg3VkcILYtIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55473/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.118.210/tcp/54470/p2p/16Uiu2HAmUJvrDznbrNzxT9xeqHT1my67WwMSyGd3h96wpebk7YyM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54469/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55473/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54469/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)', "version": 10}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54469/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 682ce0997e41
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c915f5253195
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 682ce0997e41. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-20_04-07-53__88b6dbdb-f6eb-42ea-a888-b7efb259d2bb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-20_04-07-53__88b6dbdb-f6eb-42ea-a888-b7efb259d2bb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_get_store_message_with_version with id: 2025-01-20_04-07-59__98a6ac3d-f7c2-43f9-92fb-798d8878f083
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-20_04-07-59__98a6ac3d-f7c2-43f9-92fb-798d8878f083__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.2.231
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['1987', '1988', '1989', '1990', '1991']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 1987:1987 -p 1988:1988 -p 1989:1989 -p 1990:1990 -p 1991:1991 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1989 --rest-port=1987 --tcp-port=1988 --discv5-udp-port=1990 --rest-address=0.0.0.0 --nat=extip:172.18.2.231 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c836d1b0330eb85fb055fafa1aa98769894ff2fb08fbd7fcfa11dab7f49273bc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1991 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.2.231 waku b2df4c25ee23db3b7dc5b227b1fe3d46d70f26ca3656e27c7f29ef96c12cc022
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b2df4c25ee23. Setting up logs at ./log/docker/publishing_node1_2025-01-20_04-07-59__98a6ac3d-f7c2-43f9-92fb-798d8878f083__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 1987
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c915f5253195. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1987/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1987/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.2.231/tcp/1988/p2p/16Uiu2HAkuoG1eNYPoBZ8H9cfpKSYkmXVkWDVKezRNSiHMPv8kdTy","/ip4/172.18.2.231/tcp/1989/ws/p2p/16Uiu2HAkuoG1eNYPoBZ8H9cfpKSYkmXVkWDVKezRNSiHMPv8kdTy"],"enrUri":"enr:-L24QGvqEzOCy_82KyRlcEeJqUnNuNNgpQ4q8kclW1Fqwps8BDDrnrBI5A39t0xpL8Ka-_8fMuOSuuWN5YISlxx2CUsCgmlkgnY0gmlwhKwSAueKbXVsdGlhZGRyc5YACASsEgLnBgfEAAoErBIC5wYHxd0DgnJzhQADAQAAiXNlY3AyNTZrMaECBYetUI_8CyiT2pFopE7QAM5zMNln8nhULznFlnkKmvSDdGNwggfEg3VkcIIHxoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-20_04-07-59__98a6ac3d-f7c2-43f9-92fb-798d8878f083__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.86.131
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['30237', '30238', '30239', '30240', '30241']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 30237:30237 -p 30238:30238 -p 30239:30239 -p 30240:30240 -p 30241:30241 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30239 --rest-port=30237 --tcp-port=30238 --discv5-udp-port=30240 --rest-address=0.0.0.0 --nat=extip:172.18.86.131 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5b08e59b47aed4c16d8b80fdabdea1aa188f01eb3a6009ff17e7e83edab4a0ce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30241 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QGvqEzOCy_82KyRlcEeJqUnNuNNgpQ4q8kclW1Fqwps8BDDrnrBI5A39t0xpL8Ka-_8fMuOSuuWN5YISlxx2CUsCgmlkgnY0gmlwhKwSAueKbXVsdGlhZGRyc5YACASsEgLnBgfEAAoErBIC5wYHxd0DgnJzhQADAQAAiXNlY3AyNTZrMaECBYetUI_8CyiT2pFopE7QAM5zMNln8nhULznFlnkKmvSDdGNwggfEg3VkcIIHxoV3YWt1MgM --storenode=/ip4/172.18.2.231/tcp/1988/p2p/16Uiu2HAkuoG1eNYPoBZ8H9cfpKSYkmXVkWDVKezRNSiHMPv8kdTy --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.86.131 waku cdd0413acc0473c8361976a5130b3e21b44b4de4a2a33cdffa849f0a7eab68f7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID cdd0413acc04. Setting up logs at ./log/docker/store_node1_2025-01-20_04-07-59__98a6ac3d-f7c2-43f9-92fb-798d8878f083__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 30237
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30237/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30237/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.86.131/tcp/30238/p2p/16Uiu2HAmPFxUMC97SUwhz3dCK2xSqw9Jx8QmYscHcpuFqz4NQhs2","/ip4/172.18.86.131/tcp/30239/ws/p2p/16Uiu2HAmPFxUMC97SUwhz3dCK2xSqw9Jx8QmYscHcpuFqz4NQhs2"],"enrUri":"enr:-L24QFlRr4qnJwyYD-Zo6C0uDm9uM-HVolxZej78ZUa3ffK7NdtyqP8qLz-WYNBzY2jBQUIXUNwJZfq-qAJ9OVGFb2QCgmlkgnY0gmlwhKwSVoOKbXVsdGlhZGRyc5YACASsElaDBnYeAAoErBJWgwZ2H90DgnJzhQADAQAAiXNlY3AyNTZrMaEDnYoS4-VbiE8AAVyq3McljzW1xgYNO8EpGerCTcKV6_2DdGNwgnYeg3VkcIJ2IIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30237/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.2.231/tcp/1988/p2p/16Uiu2HAkuoG1eNYPoBZ8H9cfpKSYkmXVkWDVKezRNSiHMPv8kdTy"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1987/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30237/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1987/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)', "version": 10}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1987/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b2df4c25ee23
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id cdd0413acc04
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b2df4c25ee23. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-20_04-07-59__98a6ac3d-f7c2-43f9-92fb-798d8878f083__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-20_04-07-59__98a6ac3d-f7c2-43f9-92fb-798d8878f083__wakuorg_nwaku:latest.log