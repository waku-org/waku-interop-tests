[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_with_peerAddr with id: 2025-01-20_04-06-01__2dc3a188-1377-404a-8ae8-82eb7b1fc709
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-20_04-06-01__2dc3a188-1377-404a-8ae8-82eb7b1fc709__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.111.47
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['21448', '21449', '21450', '21451', '21452']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 21448:21448 -p 21449:21449 -p 21450:21450 -p 21451:21451 -p 21452:21452 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21450 --rest-port=21448 --tcp-port=21449 --discv5-udp-port=21451 --rest-address=0.0.0.0 --nat=extip:172.18.111.47 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eb6a124bdcb3acee1f546614b2ecd8c7de5caebeeece975835e6fab3dfcb17ad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21452 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.111.47 waku a9f814be12c929e12bcea03a6e57d8f2678a562c23b68a966270c9500e1411fc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a9f814be12c9. Setting up logs at ./log/docker/publishing_node1_2025-01-20_04-06-01__2dc3a188-1377-404a-8ae8-82eb7b1fc709__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 21448
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container dea1a4b4df07. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21448/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21448/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.111.47/tcp/21449/p2p/16Uiu2HAm52pzqDCUkLLG2ykcBNXnh9TDKBrfv1BNB9Hz5QRf5FGL","/ip4/172.18.111.47/tcp/21450/ws/p2p/16Uiu2HAm52pzqDCUkLLG2ykcBNXnh9TDKBrfv1BNB9Hz5QRf5FGL"],"enrUri":"enr:-L24QH24qZ8lBCuDTuRYU0GEuDuCOcU80zXtam-URJnY9mUKAyPda7s9CpMCbrJJCdZWtPyrZtCEcwcCVpCKPSONZ6YCgmlkgnY0gmlwhKwSby-KbXVsdGlhZGRyc5YACASsEm8vBlPJAAoErBJvLwZTyt0DgnJzhQADAQAAiXNlY3AyNTZrMaECjrq1DTdIwBkCOec7NqrpxH_aUTrPxf0r6sQVp8A-rjGDdGNwglPJg3VkcIJTy4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-20_04-06-01__2dc3a188-1377-404a-8ae8-82eb7b1fc709__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.237.216
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['51892', '51893', '51894', '51895', '51896']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 51892:51892 -p 51893:51893 -p 51894:51894 -p 51895:51895 -p 51896:51896 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51894 --rest-port=51892 --tcp-port=51893 --discv5-udp-port=51895 --rest-address=0.0.0.0 --nat=extip:172.18.237.216 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=beb32edaa6dce835baaf6d51f27af8f70d3599aeb6e67cc5b96ae5bbbcbaeafa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51896 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QH24qZ8lBCuDTuRYU0GEuDuCOcU80zXtam-URJnY9mUKAyPda7s9CpMCbrJJCdZWtPyrZtCEcwcCVpCKPSONZ6YCgmlkgnY0gmlwhKwSby-KbXVsdGlhZGRyc5YACASsEm8vBlPJAAoErBJvLwZTyt0DgnJzhQADAQAAiXNlY3AyNTZrMaECjrq1DTdIwBkCOec7NqrpxH_aUTrPxf0r6sQVp8A-rjGDdGNwglPJg3VkcIJTy4V3YWt1MgM --storenode=/ip4/172.18.111.47/tcp/21449/p2p/16Uiu2HAm52pzqDCUkLLG2ykcBNXnh9TDKBrfv1BNB9Hz5QRf5FGL --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.237.216 waku 5c490dabb0c131df70b3626f4a6cf2d6113a440486565d2b780cb28c0aa07bc2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5c490dabb0c1. Setting up logs at ./log/docker/store_node1_2025-01-20_04-06-01__2dc3a188-1377-404a-8ae8-82eb7b1fc709__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 51892
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51892/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51892/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.237.216/tcp/51893/p2p/16Uiu2HAkx9R82R8MbAiFJfiGaSqA5FPJYEb2w2R3TC4nyg2fHjAf","/ip4/172.18.237.216/tcp/51894/ws/p2p/16Uiu2HAkx9R82R8MbAiFJfiGaSqA5FPJYEb2w2R3TC4nyg2fHjAf"],"enrUri":"enr:-L24QJF0TM1jZ-Ay6wnCSTPOC0aUtakeYNSuMPvyxUVenpJZQSoB2g4XctI_YW-P9EQmVS84BdFLLzzUQLhVHidR4vMCgmlkgnY0gmlwhKwS7diKbXVsdGlhZGRyc5YACASsEu3YBsq1AAoErBLt2AbKtt0DgnJzhQADAQAAiXNlY3AyNTZrMaECKGj3vt1xZlHvnpJU7a2iKsEBR1w0WBITmFoFV8cdCViDdGNwgsq1g3VkcILKt4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51892/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.111.47/tcp/21449/p2p/16Uiu2HAm52pzqDCUkLLG2ykcBNXnh9TDKBrfv1BNB9Hz5QRf5FGL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21448/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51892/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21448/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51892/store/v3/messages?peerAddr=%2Fip4%2F172.18.111.47%2Ftcp%2F21449%2Fp2p%2F16Uiu2HAm52pzqDCUkLLG2ykcBNXnh9TDKBrfv1BNB9Hz5QRf5FGL&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"0e6feff271e57b4f1e35","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a9f814be12c9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5c490dabb0c1
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a9f814be12c9. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-20_04-06-01__2dc3a188-1377-404a-8ae8-82eb7b1fc709__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-20_04-06-01__2dc3a188-1377-404a-8ae8-82eb7b1fc709__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_with_peerAddr with id: 2025-01-20_04-06-07__7273e845-4ef0-4010-8f26-3aed12c38010
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-20_04-06-07__7273e845-4ef0-4010-8f26-3aed12c38010__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.148.191
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['1049', '1050', '1051', '1052', '1053']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 1049:1049 -p 1050:1050 -p 1051:1051 -p 1052:1052 -p 1053:1053 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1051 --rest-port=1049 --tcp-port=1050 --discv5-udp-port=1052 --rest-address=0.0.0.0 --nat=extip:172.18.148.191 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=49bb5c616ad00e5ddbb3c0ede8f8bdefbd3c1ee6be5f48b25bb8c0ab6cafcd2d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1053 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.148.191 waku 97b6e584527c4c2bb72610b61f6d012aa2575962f43049819126ecf97b239dc4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 97b6e584527c. Setting up logs at ./log/docker/publishing_node1_2025-01-20_04-06-07__7273e845-4ef0-4010-8f26-3aed12c38010__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 1049
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5c490dabb0c1. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1049/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1049/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.148.191/tcp/1050/p2p/16Uiu2HAmMNGfWLtKqNH4pVRf6c35a1cBkW9MyTHsVbDa1cXA2a1r","/ip4/172.18.148.191/tcp/1051/ws/p2p/16Uiu2HAmMNGfWLtKqNH4pVRf6c35a1cBkW9MyTHsVbDa1cXA2a1r"],"enrUri":"enr:-L24QJ-ZOOs5W84Gv80kr2xKyNz3qQWhvUjUHJP9MvGG6NKNdfw-P0Rk_4jErck-kOJGe_uv-MeicHiMZRn3dtQukg8CgmlkgnY0gmlwhKwSlL-KbXVsdGlhZGRyc5YACASsEpS_BgQaAAoErBKUvwYEG90DgnJzhQADAQAAiXNlY3AyNTZrMaEDgXDBRhzNGHidTZuij2ywvxlI5Q0xSkfLgkMxLAXghg2DdGNwggQag3VkcIIEHIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-20_04-06-07__7273e845-4ef0-4010-8f26-3aed12c38010__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.117.57
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['27745', '27746', '27747', '27748', '27749']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 27745:27745 -p 27746:27746 -p 27747:27747 -p 27748:27748 -p 27749:27749 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27747 --rest-port=27745 --tcp-port=27746 --discv5-udp-port=27748 --rest-address=0.0.0.0 --nat=extip:172.18.117.57 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=46cb559ab0e9dcaf85a4bf13f47b621beeae77aceafaac8c77eda0b19ea3015a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27749 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJ-ZOOs5W84Gv80kr2xKyNz3qQWhvUjUHJP9MvGG6NKNdfw-P0Rk_4jErck-kOJGe_uv-MeicHiMZRn3dtQukg8CgmlkgnY0gmlwhKwSlL-KbXVsdGlhZGRyc5YACASsEpS_BgQaAAoErBKUvwYEG90DgnJzhQADAQAAiXNlY3AyNTZrMaEDgXDBRhzNGHidTZuij2ywvxlI5Q0xSkfLgkMxLAXghg2DdGNwggQag3VkcIIEHIV3YWt1MgM --storenode=/ip4/172.18.148.191/tcp/1050/p2p/16Uiu2HAmMNGfWLtKqNH4pVRf6c35a1cBkW9MyTHsVbDa1cXA2a1r --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.117.57 waku 2219255d62eac1c95353f48643fccffc49e37709b7ad59bf263339e099a50c29
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2219255d62ea. Setting up logs at ./log/docker/store_node1_2025-01-20_04-06-07__7273e845-4ef0-4010-8f26-3aed12c38010__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 27745
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27745/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27745/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.117.57/tcp/27746/p2p/16Uiu2HAmP6D5abnuG6dgQe8vcjsZHr7fftFkxfqeRdUXwG5PTXRv","/ip4/172.18.117.57/tcp/27747/ws/p2p/16Uiu2HAmP6D5abnuG6dgQe8vcjsZHr7fftFkxfqeRdUXwG5PTXRv"],"enrUri":"enr:-L24QASdJmA3rbfmsNcI2AJjhsQymLdBsCRks3VBkD-zfKoOC2IFKVy5Mk8tzCc07sBdwJZYTcDKQaGml0hS-jXffBUCgmlkgnY0gmlwhKwSdTmKbXVsdGlhZGRyc5YACASsEnU5BmxiAAoErBJ1OQZsY90DgnJzhQADAQAAiXNlY3AyNTZrMaEDmwrISeJRkmUTDLNkj0KzdeiEYG5bIRVC4rEyXcdmvo2DdGNwgmxig3VkcIJsZIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27745/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.148.191/tcp/1050/p2p/16Uiu2HAmMNGfWLtKqNH4pVRf6c35a1cBkW9MyTHsVbDa1cXA2a1r"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1049/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27745/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1049/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27745/store/v3/messages?peerAddr=%2Fip4%2F172.18.148.191%2Ftcp%2F1050%2Fp2p%2F16Uiu2HAmMNGfWLtKqNH4pVRf6c35a1cBkW9MyTHsVbDa1cXA2a1r&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"b5f42af647edf4e31356","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 97b6e584527c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2219255d62ea
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 97b6e584527c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-20_04-06-07__7273e845-4ef0-4010-8f26-3aed12c38010__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-20_04-06-07__7273e845-4ef0-4010-8f26-3aed12c38010__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_with_peerAddr with id: 2025-01-20_04-06-21__66095f86-62b0-401a-a097-2c30b75ef7fd
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-20_04-06-21__66095f86-62b0-401a-a097-2c30b75ef7fd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.195.163
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['42135', '42136', '42137', '42138', '42139']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 42135:42135 -p 42136:42136 -p 42137:42137 -p 42138:42138 -p 42139:42139 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42137 --rest-port=42135 --tcp-port=42136 --discv5-udp-port=42138 --rest-address=0.0.0.0 --nat=extip:172.18.195.163 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fd1727c6f1ca9bbeba66e4a90beaacea7f07bc121f574acceabe823314138f40 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42139 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.195.163 waku 0fb066d7e0a1ae4b5865e856b0c97acaf7e76ce15f849ede3fb17e6e12ac3808
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0fb066d7e0a1. Setting up logs at ./log/docker/publishing_node1_2025-01-20_04-06-21__66095f86-62b0-401a-a097-2c30b75ef7fd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 42135
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2219255d62ea. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42135/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42135/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.195.163/tcp/42136/p2p/16Uiu2HAmKoB7pYXGSo3KsR1y6Mzv6VjgW4E7UZZrFUMhizBCMGn8","/ip4/172.18.195.163/tcp/42137/ws/p2p/16Uiu2HAmKoB7pYXGSo3KsR1y6Mzv6VjgW4E7UZZrFUMhizBCMGn8"],"enrUri":"enr:-L24QBpTL1U9EbPZYBkyGLinGzolw_JKrL9xV8kz8UG0McYpbH6_bRQdX2adoz1MHc8oIP0C6XsPV1v6u1VyPpYeuJQCgmlkgnY0gmlwhKwSw6OKbXVsdGlhZGRyc5YACASsEsOjBqSYAAoErBLDowakmd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDahqhTxuBjtg2BC7SaJ4grgoGZBx5z0Bw_nQijiwYcSWDdGNwgqSYg3VkcIKkmoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-20_04-06-21__66095f86-62b0-401a-a097-2c30b75ef7fd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.102.103
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['51141', '51142', '51143', '51144', '51145']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 51141:51141 -p 51142:51142 -p 51143:51143 -p 51144:51144 -p 51145:51145 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51143 --rest-port=51141 --tcp-port=51142 --discv5-udp-port=51144 --rest-address=0.0.0.0 --nat=extip:172.18.102.103 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0c16db6bfd425afa3c5ae3edfb2c6f27c2e82abb6bf6fb0d2f3d4af7fffe1b7e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51145 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QBpTL1U9EbPZYBkyGLinGzolw_JKrL9xV8kz8UG0McYpbH6_bRQdX2adoz1MHc8oIP0C6XsPV1v6u1VyPpYeuJQCgmlkgnY0gmlwhKwSw6OKbXVsdGlhZGRyc5YACASsEsOjBqSYAAoErBLDowakmd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDahqhTxuBjtg2BC7SaJ4grgoGZBx5z0Bw_nQijiwYcSWDdGNwgqSYg3VkcIKkmoV3YWt1MgM --storenode=/ip4/172.18.195.163/tcp/42136/p2p/16Uiu2HAmKoB7pYXGSo3KsR1y6Mzv6VjgW4E7UZZrFUMhizBCMGn8 --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.102.103 waku b69c3af703f199c18fbdd8844824e906a1ae58fa3e7810d2b7fbe1719a39b984
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b69c3af703f1. Setting up logs at ./log/docker/store_node1_2025-01-20_04-06-21__66095f86-62b0-401a-a097-2c30b75ef7fd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 51141
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51141/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51141/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.102.103/tcp/51142/p2p/16Uiu2HAmB4kcnDLJurdYUAasL3747usABiUUy9xw437hZ1DDKurS","/ip4/172.18.102.103/tcp/51143/ws/p2p/16Uiu2HAmB4kcnDLJurdYUAasL3747usABiUUy9xw437hZ1DDKurS"],"enrUri":"enr:-L24QLRRB2wrFm1GfctbTmwKSx4jIU5CdhEXgJERs4hjBl7EWCQGWGSXvK5JLkuRbzthQU_ss2UJJ7TqwVVLFzD7RgsCgmlkgnY0gmlwhKwSZmeKbXVsdGlhZGRyc5YACASsEmZnBsfGAAoErBJmZwbHx90DgnJzhQADAQAAiXNlY3AyNTZrMaEC6F8Jpq5xjCSq8wMdFC0Im5muckWR12vECLSgi_PiwZODdGNwgsfGg3VkcILHyIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51141/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.195.163/tcp/42136/p2p/16Uiu2HAmKoB7pYXGSo3KsR1y6Mzv6VjgW4E7UZZrFUMhizBCMGn8"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42135/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51141/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42135/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51141/store/v3/messages?peerAddr=%2Fip4%2F172.18.195.163%2Ftcp%2F42136%2Fp2p%2F16Uiu2HAmKoB7pYXGSo3KsR1y6Mzv6VjgW4E7UZZrFUMhizBCMGn8&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"165a1bdf64322c4d1cd1","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0fb066d7e0a1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b69c3af703f1
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0fb066d7e0a1. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-20_04-06-21__66095f86-62b0-401a-a097-2c30b75ef7fd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-20_04-06-21__66095f86-62b0-401a-a097-2c30b75ef7fd__wakuorg_nwaku:latest.log