[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_stored_when_ephemeral_false with id: 2025-01-20_04-05-05__939c6720-1e94-422c-a95f-ebdac67d42a0
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-20_04-05-05__939c6720-1e94-422c-a95f-ebdac67d42a0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-20_04-05-05__939c6720-1e94-422c-a95f-ebdac67d42a0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-20_04-05-05__939c6720-1e94-422c-a95f-ebdac67d42a0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:414 Start 3 nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.224.221
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['15467', '15468', '15469', '15470', '15471']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 15467:15467 -p 15468:15468 -p 15469:15469 -p 15470:15470 -p 15471:15471 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15469 --rest-port=15467 --tcp-port=15468 --discv5-udp-port=15470 --rest-address=0.0.0.0 --nat=extip:172.18.224.221 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=67c199e2f629e3c381d6a8ce24ada26fad14c6e9aed0f209d7c2307d53a43da4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15471 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.224.221 waku d41df1ffb2fd72672ed798699c08f73791bd6ed8aec42a21b8f398dd44b18c33
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d41df1ffb2fd. Setting up logs at ./log/docker/node1_2025-01-20_04-05-05__939c6720-1e94-422c-a95f-ebdac67d42a0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 15467
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b74bb7e680c7. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15467/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15467/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.224.221/tcp/15468/p2p/16Uiu2HAmQnJHd4bWb5HwPgWXNe3MiuMv69tCu1erm5QvivkPTffQ","/ip4/172.18.224.221/tcp/15469/ws/p2p/16Uiu2HAmQnJHd4bWb5HwPgWXNe3MiuMv69tCu1erm5QvivkPTffQ"],"enrUri":"enr:-L24QJD1vyaa3MM7knlWp_velTkHxfIbJaKy_31xTTg-toTbEbXD0mCxTGsGjl1Au5ihaC9_6QK1kxfnWjOVtxPKBvUCgmlkgnY0gmlwhKwS4N2KbXVsdGlhZGRyc5YACASsEuDdBjxsAAoErBLg3QY8bd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDtCuXBwdt43Ykqp2dVU5lprZs2_XpkWToXtdUIenaahuDdGNwgjxsg3VkcII8boV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.174.193
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['54069', '54070', '54071', '54072', '54073']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 54069:54069 -p 54070:54070 -p 54071:54071 -p 54072:54072 -p 54073:54073 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54071 --rest-port=54069 --tcp-port=54070 --discv5-udp-port=54072 --rest-address=0.0.0.0 --nat=extip:172.18.174.193 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a1fccc7ebe206c5dce6cabcae762636da72b21abd5ddcdc61bea187ec6a72f62 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54073 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QJD1vyaa3MM7knlWp_velTkHxfIbJaKy_31xTTg-toTbEbXD0mCxTGsGjl1Au5ihaC9_6QK1kxfnWjOVtxPKBvUCgmlkgnY0gmlwhKwS4N2KbXVsdGlhZGRyc5YACASsEuDdBjxsAAoErBLg3QY8bd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDtCuXBwdt43Ykqp2dVU5lprZs2_XpkWToXtdUIenaahuDdGNwgjxsg3VkcII8boV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.174.193 waku f37f293339cc71b0c7181c5fb7e0d94169ec9a201d44eecea740befb9e5452d7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f37f293339cc. Setting up logs at ./log/docker/node2_2025-01-20_04-05-05__939c6720-1e94-422c-a95f-ebdac67d42a0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 54069
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54069/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54069/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.174.193/tcp/54070/p2p/16Uiu2HAmUr4wsCcSHoe8kWEhEtjaFcb2x92wtmGe5srxrJ3atpfK","/ip4/172.18.174.193/tcp/54071/ws/p2p/16Uiu2HAmUr4wsCcSHoe8kWEhEtjaFcb2x92wtmGe5srxrJ3atpfK"],"enrUri":"enr:-L24QOE9W7Po92CVBXmueErqrxGEqdh1mCdL9rUz8cIQJOxMBDFsBPjG0B_ySDcoPpfV_eG9pk2kHiCF8p-UxHMssGsCgmlkgnY0gmlwhKwSrsGKbXVsdGlhZGRyc5YACASsEq7BBtM2AAoErBKuwQbTN90DgnJzhQADAQAAiXNlY3AyNTZrMaED8JGTnBGr3VO8QTMN6BE-iyZqPWGHW4wwEjOtdnbi-FKDdGNwgtM2g3VkcILTOIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.176.157
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['30201', '30202', '30203', '30204', '30205']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 30201:30201 -p 30202:30202 -p 30203:30203 -p 30204:30204 -p 30205:30205 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30203 --rest-port=30201 --tcp-port=30202 --discv5-udp-port=30204 --rest-address=0.0.0.0 --nat=extip:172.18.176.157 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5ee6a20e57ef478c5a3714b813e4e9d11bacb52ff5ddd2bd1d12da341bbb1eba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30205 --metrics-logging=true --relay=false --storenode=/ip4/172.18.174.193/tcp/54070/p2p/16Uiu2HAmUr4wsCcSHoe8kWEhEtjaFcb2x92wtmGe5srxrJ3atpfK --discv5-bootstrap-node=enr:-L24QOE9W7Po92CVBXmueErqrxGEqdh1mCdL9rUz8cIQJOxMBDFsBPjG0B_ySDcoPpfV_eG9pk2kHiCF8p-UxHMssGsCgmlkgnY0gmlwhKwSrsGKbXVsdGlhZGRyc5YACASsEq7BBtM2AAoErBKuwQbTN90DgnJzhQADAQAAiXNlY3AyNTZrMaED8JGTnBGr3VO8QTMN6BE-iyZqPWGHW4wwEjOtdnbi-FKDdGNwgtM2g3VkcILTOIV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.176.157 waku d18e31815f898bb4ed778755e1df0b223365fea6b38b039f7d7347abccf6e86a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d18e31815f89. Setting up logs at ./log/docker/node3_2025-01-20_04-05-05__939c6720-1e94-422c-a95f-ebdac67d42a0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 30201
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30201/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30201/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.176.157/tcp/30202/p2p/16Uiu2HAmEW5SWCqZ8JLssvfg2QevQaGHbzyV7WLLicWcgj3szR9N","/ip4/172.18.176.157/tcp/30203/ws/p2p/16Uiu2HAmEW5SWCqZ8JLssvfg2QevQaGHbzyV7WLLicWcgj3szR9N"],"enrUri":"enr:-L24QKpsMImrasYD-FuTOt5Uc2OgLT3QvA4GcYxiAYOBKmYSMfyD0U8JsJ_8_FIKOFCkOTN0K-ATcL40vpB_j5YIOk8CgmlkgnY0gmlwhKwSsJ2KbXVsdGlhZGRyc5YACASsErCdBnX6AAoErBKwnQZ1-90DgnJzhQADAQAAiXNlY3AyNTZrMaEDG27m2LfibUVqx-xozIVcEFX6fqlxCZn-SCv1iv-LYY2DdGNwgnX6g3VkcIJ1_IV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:419 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15467/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54069/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15467/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.174.193/tcp/54070/p2p/16Uiu2HAmUr4wsCcSHoe8kWEhEtjaFcb2x92wtmGe5srxrJ3atpfK","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54069/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.224.221/tcp/15468/p2p/16Uiu2HAmQnJHd4bWb5HwPgWXNe3MiuMv69tCu1erm5QvivkPTffQ","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:424 Node1 publish message with ephemeral = false
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15467/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:428 Check if message is stored 
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30201/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"df57113a271fea54abe1","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d41df1ffb2fd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f37f293339cc
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d41df1ffb2fd. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d18e31815f89
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f37f293339cc. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2025-01-20_04-05-05__939c6720-1e94-422c-a95f-ebdac67d42a0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node3_2025-01-20_04-05-05__939c6720-1e94-422c-a95f-ebdac67d42a0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2025-01-20_04-05-05__939c6720-1e94-422c-a95f-ebdac67d42a0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_stored_when_ephemeral_false with id: 2025-01-20_04-05-46__df61b3bd-c993-4dd8-9a24-28ad70a42d0a
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-20_04-05-46__df61b3bd-c993-4dd8-9a24-28ad70a42d0a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-20_04-05-46__df61b3bd-c993-4dd8-9a24-28ad70a42d0a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-20_04-05-46__df61b3bd-c993-4dd8-9a24-28ad70a42d0a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:414 Start 3 nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.72.45
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['21529', '21530', '21531', '21532', '21533']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 21529:21529 -p 21530:21530 -p 21531:21531 -p 21532:21532 -p 21533:21533 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21531 --rest-port=21529 --tcp-port=21530 --discv5-udp-port=21532 --rest-address=0.0.0.0 --nat=extip:172.18.72.45 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3cae4568afe6b1c4bcbfc543d7d5df4ce9c1c6342dd7fcb0b5cee2f6fc39fcd4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21533 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.72.45 waku 9425f631b91ad6f6d03154cc5ff708541fa5f3573f0f13ba37a4a0589d3c2ffd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9425f631b91a. Setting up logs at ./log/docker/node1_2025-01-20_04-05-46__df61b3bd-c993-4dd8-9a24-28ad70a42d0a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 21529
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d18e31815f89. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21529/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21529/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.72.45/tcp/21530/p2p/16Uiu2HAmNf1D7iebwfdApVYv5KQgGog1FADcYksDCmoz3jy2GJUV","/ip4/172.18.72.45/tcp/21531/ws/p2p/16Uiu2HAmNf1D7iebwfdApVYv5KQgGog1FADcYksDCmoz3jy2GJUV"],"enrUri":"enr:-L24QPjVQ3gj5OySMS0H0HYEztWEDJcXQwo6gdBPcwyOh3fyS5QvcmKDepxnWtVW9UXSAmsXTnh9XxRXPAr4bayNsYECgmlkgnY0gmlwhKwSSC2KbXVsdGlhZGRyc5YACASsEkgtBlQaAAoErBJILQZUG90DgnJzhQADAQAAiXNlY3AyNTZrMaEDlJXXM5YdiDMPV8H8j8zXe7zLo4jM4Dt3lvS6WuDrfoaDdGNwglQag3VkcIJUHIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.125.135
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['24564', '24565', '24566', '24567', '24568']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 24564:24564 -p 24565:24565 -p 24566:24566 -p 24567:24567 -p 24568:24568 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24566 --rest-port=24564 --tcp-port=24565 --discv5-udp-port=24567 --rest-address=0.0.0.0 --nat=extip:172.18.125.135 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d2ffe49097ec29b9bab8f5cdf8ea319256bc3efebbf47ceb60c79aac8bbffcce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24568 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QPjVQ3gj5OySMS0H0HYEztWEDJcXQwo6gdBPcwyOh3fyS5QvcmKDepxnWtVW9UXSAmsXTnh9XxRXPAr4bayNsYECgmlkgnY0gmlwhKwSSC2KbXVsdGlhZGRyc5YACASsEkgtBlQaAAoErBJILQZUG90DgnJzhQADAQAAiXNlY3AyNTZrMaEDlJXXM5YdiDMPV8H8j8zXe7zLo4jM4Dt3lvS6WuDrfoaDdGNwglQag3VkcIJUHIV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.125.135 waku fbe50b76366c8a8c7963112285b88b856d930cc3b88381cf8b0be30310dc6b0d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fbe50b76366c. Setting up logs at ./log/docker/node2_2025-01-20_04-05-46__df61b3bd-c993-4dd8-9a24-28ad70a42d0a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 24564
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24564/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24564/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.125.135/tcp/24565/p2p/16Uiu2HAm99FFSsLj7xUpHGJrKc4n6KStRCkj8CoVGLytWxGbnR5z","/ip4/172.18.125.135/tcp/24566/ws/p2p/16Uiu2HAm99FFSsLj7xUpHGJrKc4n6KStRCkj8CoVGLytWxGbnR5z"],"enrUri":"enr:-L24QGqf8G7Zz26slCz1KK8Afbl5U_VYMCljIjrULMZBQvOzPiclzlgx45JtPbx_6NXMlNHkU1yLWFf3v5rcEo3YWLQCgmlkgnY0gmlwhKwSfYeKbXVsdGlhZGRyc5YACASsEn2HBl_1AAoErBJ9hwZf9t0DgnJzhQADAQAAiXNlY3AyNTZrMaECy85ckVrN7J6_Uv8axkaIpt-ESmDe3XSKntMPy3O75UmDdGNwgl_1g3VkcIJf94V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.243.74
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['60770', '60771', '60772', '60773', '60774']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 60770:60770 -p 60771:60771 -p 60772:60772 -p 60773:60773 -p 60774:60774 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60772 --rest-port=60770 --tcp-port=60771 --discv5-udp-port=60773 --rest-address=0.0.0.0 --nat=extip:172.18.243.74 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3c558caa65ae719ed3868f8a29445c9cefecfaa97dada99195bfbffce8cf9549 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60774 --metrics-logging=true --relay=false --storenode=/ip4/172.18.125.135/tcp/24565/p2p/16Uiu2HAm99FFSsLj7xUpHGJrKc4n6KStRCkj8CoVGLytWxGbnR5z --discv5-bootstrap-node=enr:-L24QGqf8G7Zz26slCz1KK8Afbl5U_VYMCljIjrULMZBQvOzPiclzlgx45JtPbx_6NXMlNHkU1yLWFf3v5rcEo3YWLQCgmlkgnY0gmlwhKwSfYeKbXVsdGlhZGRyc5YACASsEn2HBl_1AAoErBJ9hwZf9t0DgnJzhQADAQAAiXNlY3AyNTZrMaECy85ckVrN7J6_Uv8axkaIpt-ESmDe3XSKntMPy3O75UmDdGNwgl_1g3VkcIJf94V3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.243.74 waku 1320e4c9bce9f39513d0ca239900e1538cbe8e977e088e18c74f440c7154eb60
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1320e4c9bce9. Setting up logs at ./log/docker/node3_2025-01-20_04-05-46__df61b3bd-c993-4dd8-9a24-28ad70a42d0a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 60770
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60770/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60770/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.243.74/tcp/60771/p2p/16Uiu2HAmRbaCDmRnWeSb2hUVZVt6DwjfEPhsTUQNckYSS6sxAA8v","/ip4/172.18.243.74/tcp/60772/ws/p2p/16Uiu2HAmRbaCDmRnWeSb2hUVZVt6DwjfEPhsTUQNckYSS6sxAA8v"],"enrUri":"enr:-L24QD6odzbI00ag14soRJr-2ocgFO_i76gVTGEZaFfY04V3JCKj5iYB8ZjGMMSwlktFPs_tpvRcoYOE04KXRE7RgEACgmlkgnY0gmlwhKwS80qKbXVsdGlhZGRyc5YACASsEvNKBu1jAAoErBLzSgbtZN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDwEffueljbvOu096r3UYZWCYLm3ovzevUNvmOCb7JQ-eDdGNwgu1jg3VkcILtZYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:419 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21529/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24564/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21529/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.125.135/tcp/24565/p2p/16Uiu2HAm99FFSsLj7xUpHGJrKc4n6KStRCkj8CoVGLytWxGbnR5z","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24564/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.72.45/tcp/21530/p2p/16Uiu2HAmNf1D7iebwfdApVYv5KQgGog1FADcYksDCmoz3jy2GJUV","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:424 Node1 publish message with ephemeral = false
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21529/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:428 Check if message is stored 
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60770/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"e754499c9d90812703dc","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 9425f631b91a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id fbe50b76366c
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9425f631b91a. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1320e4c9bce9
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fbe50b76366c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2025-01-20_04-05-46__df61b3bd-c993-4dd8-9a24-28ad70a42d0a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2025-01-20_04-05-46__df61b3bd-c993-4dd8-9a24-28ad70a42d0a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node3_2025-01-20_04-05-46__df61b3bd-c993-4dd8-9a24-28ad70a42d0a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_stored_when_ephemeral_false with id: 2025-01-20_04-06-27__b73c5187-91cc-4e2a-b60e-fff6f83758eb
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-20_04-06-27__b73c5187-91cc-4e2a-b60e-fff6f83758eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-20_04-06-27__b73c5187-91cc-4e2a-b60e-fff6f83758eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-20_04-06-27__b73c5187-91cc-4e2a-b60e-fff6f83758eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:414 Start 3 nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.71.66
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['17148', '17149', '17150', '17151', '17152']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 17148:17148 -p 17149:17149 -p 17150:17150 -p 17151:17151 -p 17152:17152 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17150 --rest-port=17148 --tcp-port=17149 --discv5-udp-port=17151 --rest-address=0.0.0.0 --nat=extip:172.18.71.66 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dfdfb95cd42aa544f1d24116ddec94f4cdce95df04ffdb98e48b0f0562eb6cdc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17152 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.71.66 waku ad7e8d584ff160ce8ab187a38fabfdb89a4ae1c224b38d21a31f3a1ad5bf9f78
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ad7e8d584ff1. Setting up logs at ./log/docker/node1_2025-01-20_04-06-27__b73c5187-91cc-4e2a-b60e-fff6f83758eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 17148
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1320e4c9bce9. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17148/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17148/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.71.66/tcp/17149/p2p/16Uiu2HAm7EXEnBiw8GxM4ykAqaeBzcenhUYtBMxBK8iJNDe9PAEF","/ip4/172.18.71.66/tcp/17150/ws/p2p/16Uiu2HAm7EXEnBiw8GxM4ykAqaeBzcenhUYtBMxBK8iJNDe9PAEF"],"enrUri":"enr:-L24QN2lGGe4AUZRN7P4HdOlFxMCkWS4aHg6wMdY1G91jl5oSTVlonxkWSssbEPlvoooP4_22_lqyfFkjEcbRR5Fp0YCgmlkgnY0gmlwhKwSR0KKbXVsdGlhZGRyc5YACASsEkdCBkL9AAoErBJHQgZC_t0DgnJzhQADAQAAiXNlY3AyNTZrMaECr3D4VJ5wHpj3UtTxM0ecbtKzNwtowOwne3ZdL_yHb9SDdGNwgkL9g3VkcIJC_4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.118.246
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['65332', '65333', '65334', '65335', '65336']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 65332:65332 -p 65333:65333 -p 65334:65334 -p 65335:65335 -p 65336:65336 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65334 --rest-port=65332 --tcp-port=65333 --discv5-udp-port=65335 --rest-address=0.0.0.0 --nat=extip:172.18.118.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7410ef91c54f189e139abfe8fafbfb1a78a608163dccc0843ccad669e825b5b8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65336 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QN2lGGe4AUZRN7P4HdOlFxMCkWS4aHg6wMdY1G91jl5oSTVlonxkWSssbEPlvoooP4_22_lqyfFkjEcbRR5Fp0YCgmlkgnY0gmlwhKwSR0KKbXVsdGlhZGRyc5YACASsEkdCBkL9AAoErBJHQgZC_t0DgnJzhQADAQAAiXNlY3AyNTZrMaECr3D4VJ5wHpj3UtTxM0ecbtKzNwtowOwne3ZdL_yHb9SDdGNwgkL9g3VkcIJC_4V3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.118.246 waku e5ce5ed09a13f2482ecd46db6f63f0618f618bdc8326191ceb6e4471d8bd3d26
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e5ce5ed09a13. Setting up logs at ./log/docker/node2_2025-01-20_04-06-27__b73c5187-91cc-4e2a-b60e-fff6f83758eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 65332
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65332/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65332/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.118.246/tcp/65333/p2p/16Uiu2HAm9K36SPE1s5aRksZBZnLLv9jy8PL8566eX2H9FHP7XcHc","/ip4/172.18.118.246/tcp/65334/ws/p2p/16Uiu2HAm9K36SPE1s5aRksZBZnLLv9jy8PL8566eX2H9FHP7XcHc"],"enrUri":"enr:-L24QON3S_9wr6UyJNlFRWw8npUhIFQuJeVzPFpqPqqfqN-QG3vgMmrXuJbYFn0o0SISVWXH7SJ9ZMJcdztYN6bgANMCgmlkgnY0gmlwhKwSdvaKbXVsdGlhZGRyc5YACASsEnb2Bv81AAoErBJ29gb_Nt0DgnJzhQADAQAAiXNlY3AyNTZrMaECzlBs9akwqm8jISj9XdcYB3g1AvkFmwzWGFmFEW-sLX-DdGNwgv81g3VkcIL_N4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.228.91
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['29435', '29436', '29437', '29438', '29439']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 29435:29435 -p 29436:29436 -p 29437:29437 -p 29438:29438 -p 29439:29439 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29437 --rest-port=29435 --tcp-port=29436 --discv5-udp-port=29438 --rest-address=0.0.0.0 --nat=extip:172.18.228.91 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f7be1352f4c97ef8b5c1ec80bc5faf9438a8efe75e8df1e1d4bcefebb3aad3ac --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29439 --metrics-logging=true --relay=false --storenode=/ip4/172.18.118.246/tcp/65333/p2p/16Uiu2HAm9K36SPE1s5aRksZBZnLLv9jy8PL8566eX2H9FHP7XcHc --discv5-bootstrap-node=enr:-L24QON3S_9wr6UyJNlFRWw8npUhIFQuJeVzPFpqPqqfqN-QG3vgMmrXuJbYFn0o0SISVWXH7SJ9ZMJcdztYN6bgANMCgmlkgnY0gmlwhKwSdvaKbXVsdGlhZGRyc5YACASsEnb2Bv81AAoErBJ29gb_Nt0DgnJzhQADAQAAiXNlY3AyNTZrMaECzlBs9akwqm8jISj9XdcYB3g1AvkFmwzWGFmFEW-sLX-DdGNwgv81g3VkcIL_N4V3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.228.91 waku 69027128701ef045f1f827a55b92e6a4f7ce8fb1796e416d80112677ca80818f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 69027128701e. Setting up logs at ./log/docker/node3_2025-01-20_04-06-27__b73c5187-91cc-4e2a-b60e-fff6f83758eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 29435
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29435/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29435/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.228.91/tcp/29436/p2p/16Uiu2HAmR498EaN1YY2oe8gvbduvybwZV1pXT2awXk6ec8syDjT2","/ip4/172.18.228.91/tcp/29437/ws/p2p/16Uiu2HAmR498EaN1YY2oe8gvbduvybwZV1pXT2awXk6ec8syDjT2"],"enrUri":"enr:-L24QGOyaLoQc6vPqUm7E1HPPpExP5qgyILPWMDyqZM_7MnhKKwqGtYUb9v2XzcCuubA3WeL-cymqzAZf8z0XFl2nksCgmlkgnY0gmlwhKwS5FuKbXVsdGlhZGRyc5YACASsEuRbBnL8AAoErBLkWwZy_d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDuDqGB3kTKhEnn6lUXIoy7zIpu1HveQYrsXsvBH7_uq2DdGNwgnL8g3VkcIJy_oV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:419 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17148/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65332/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17148/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.118.246/tcp/65333/p2p/16Uiu2HAm9K36SPE1s5aRksZBZnLLv9jy8PL8566eX2H9FHP7XcHc","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65332/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.71.66/tcp/17149/p2p/16Uiu2HAm7EXEnBiw8GxM4ykAqaeBzcenhUYtBMxBK8iJNDe9PAEF","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:424 Node1 publish message with ephemeral = false
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17148/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:428 Check if message is stored 
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29435/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"38635d6a82bdde170a5e","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ad7e8d584ff1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e5ce5ed09a13
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ad7e8d584ff1. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 69027128701e
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e5ce5ed09a13. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node3_2025-01-20_04-06-27__b73c5187-91cc-4e2a-b60e-fff6f83758eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2025-01-20_04-06-27__b73c5187-91cc-4e2a-b60e-fff6f83758eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2025-01-20_04-06-27__b73c5187-91cc-4e2a-b60e-fff6f83758eb__wakuorg_nwaku:latest.log