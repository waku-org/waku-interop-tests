2025-02-12 04:10:23.420 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:10:23.420 DEBUG [tests.conftest] Running test: test_time_filter_start_time_after_end_time with id: 2025-02-12_04-10-23__da1c8a59-6b51-45a2-8ca3-fd2acd90cb94
2025-02-12 04:10:23.421 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:10:23.421 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-12 04:10:23.421 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-12 04:10:23.431 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:10:23.431 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-12_04-10-23__da1c8a59-6b51-45a2-8ca3-fd2acd90cb94__wakuorg_nwaku:latest.log
2025-02-12 04:10:23.432 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:10:23.432 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:10:23.434 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:10:23.436 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.157.62
2025-02-12 04:10:23.436 DEBUG [src.node.docker_mananger] Generated ports ['60455', '60456', '60457', '60458', '60459']
2025-02-12 04:10:23.437 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:10:23.438 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:10:23.438 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:10:23.438 DEBUG [src.node.docker_mananger] docker run -i -t -p 60455:60455 -p 60456:60456 -p 60457:60457 -p 60458:60458 -p 60459:60459 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60457 --rest-port=60455 --tcp-port=60456 --discv5-udp-port=60458 --rest-address=0.0.0.0 --nat=extip:172.18.157.62 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bcdcead7bedd5aaca3448e2046cca91c10c6ec379c6cccaf36acfd8ca8c8fa8a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60459 --metrics-logging=true --store=true --relay=true
2025-02-12 04:10:23.693 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.157.62 waku b084825f4f1f02e08d7045d597e4d38e1754e6b697b3c815e1e2544a7527f5aa
2025-02-12 04:10:23.748 DEBUG [src.node.docker_mananger] Container started with ID b084825f4f1f. Setting up logs at ./log/docker/publishing_node1_2025-02-12_04-10-23__da1c8a59-6b51-45a2-8ca3-fd2acd90cb94__wakuorg_nwaku:latest.log
2025-02-12 04:10:23.754 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 60455
2025-02-12 04:10:23.754 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:10:24.266 ERROR [src.node.docker_mananger] Max retries reached for container f7a567166435. Exiting log stream.
2025-02-12 04:10:24.754 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60455/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:10:24.757 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:10:24.757 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:10:24.758 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60455/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:10:24.760 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.157.62/tcp/60456/p2p/16Uiu2HAmTiykJ9u8CbHvFQdbk5okn2PTypw575HqhfEFA3K5EtR3","/ip4/172.18.157.62/tcp/60457/ws/p2p/16Uiu2HAmTiykJ9u8CbHvFQdbk5okn2PTypw575HqhfEFA3K5EtR3"],"enrUri":"enr:-L24QCcrQo7-04EyqvDYCFTvzQqDHPCX_9LDWJZ79So7W3PmV_pGO2LFTxs1DlDxa-Yq8YrE9ZFbUDGLzDSJm177Cu0CgmlkgnY0gmlwhKwSnT6KbXVsdGlhZGRyc5YACASsEp0-BuwoAAoErBKdPgbsKd0DgnJzhQADAQAAiXNlY3AyNTZrMaED3-Tx56S2KCgLKkLBdJT8OZaYEz0NO33R01gOZUwwtCaDdGNwguwog3VkcILsKoV3YWt1MgM"}'
2025-02-12 04:10:24.760 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:10:24.767 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:10:24.767 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-12_04-10-23__da1c8a59-6b51-45a2-8ca3-fd2acd90cb94__wakuorg_nwaku:latest.log
2025-02-12 04:10:24.768 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:10:24.768 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:10:24.769 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:10:24.769 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.170.140
2025-02-12 04:10:24.769 DEBUG [src.node.docker_mananger] Generated ports ['11386', '11387', '11388', '11389', '11390']
2025-02-12 04:10:24.770 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:10:24.770 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:10:24.770 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:10:24.770 DEBUG [src.node.docker_mananger] docker run -i -t -p 11386:11386 -p 11387:11387 -p 11388:11388 -p 11389:11389 -p 11390:11390 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11388 --rest-port=11386 --tcp-port=11387 --discv5-udp-port=11389 --rest-address=0.0.0.0 --nat=extip:172.18.170.140 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f27b7042a81dfbd1ed4a393d7ae2d3def8bfdbbd4e4dd8f3bbb85bbb8e0b0bce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11390 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QCcrQo7-04EyqvDYCFTvzQqDHPCX_9LDWJZ79So7W3PmV_pGO2LFTxs1DlDxa-Yq8YrE9ZFbUDGLzDSJm177Cu0CgmlkgnY0gmlwhKwSnT6KbXVsdGlhZGRyc5YACASsEp0-BuwoAAoErBKdPgbsKd0DgnJzhQADAQAAiXNlY3AyNTZrMaED3-Tx56S2KCgLKkLBdJT8OZaYEz0NO33R01gOZUwwtCaDdGNwguwog3VkcILsKoV3YWt1MgM --storenode=/ip4/172.18.157.62/tcp/60456/p2p/16Uiu2HAmTiykJ9u8CbHvFQdbk5okn2PTypw575HqhfEFA3K5EtR3 --store=true --relay=true
2025-02-12 04:10:25.006 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.170.140 waku 4db297fdf0a37716e66206ac9a759ac61a2914185d851a7de5990260a7732393
2025-02-12 04:10:25.061 DEBUG [src.node.docker_mananger] Container started with ID 4db297fdf0a3. Setting up logs at ./log/docker/store_node1_2025-02-12_04-10-23__da1c8a59-6b51-45a2-8ca3-fd2acd90cb94__wakuorg_nwaku:latest.log
2025-02-12 04:10:25.062 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11386
2025-02-12 04:10:25.063 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:10:26.065 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11386/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:10:26.068 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:10:26.069 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:10:26.069 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11386/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:10:26.071 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.170.140/tcp/11387/p2p/16Uiu2HAm9KznADPN9W63X3MQGRq2UocChzWFFCBsRHqVbvfjuqKt","/ip4/172.18.170.140/tcp/11388/ws/p2p/16Uiu2HAm9KznADPN9W63X3MQGRq2UocChzWFFCBsRHqVbvfjuqKt"],"enrUri":"enr:-L24QBTBK6-PX7auwsymVx7Y8UHoY5Y08U1xCEKB76Hx_4BgCjufchUQj3WR4T8EdbOV_BGiGr4Hkm2CnDFCr1h0sZ4CgmlkgnY0gmlwhKwSqoyKbXVsdGlhZGRyc5YACASsEqqMBix7AAoErBKqjAYsfN0DgnJzhQADAQAAiXNlY3AyNTZrMaECzo9jgLDrObdnT97lCJsFNPUaBrdketU7PU3Ma_1f0ceDdGNwgix7g3VkcIIsfYV3YWt1MgM"}'
2025-02-12 04:10:26.072 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:10:26.072 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11386/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.157.62/tcp/60456/p2p/16Uiu2HAmTiykJ9u8CbHvFQdbk5okn2PTypw575HqhfEFA3K5EtR3"]'
2025-02-12 04:10:26.075 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:10:26.075 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60455/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:10:26.078 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:10:26.078 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11386/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:10:26.080 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:10:26.081 DEBUG [src.steps.store] Relaying message
2025-02-12 04:10:26.082 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60455/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:10:26.088 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:10:26.088 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:10:26.289 DEBUG [src.steps.store] Relaying message
2025-02-12 04:10:26.289 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60455/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:10:26.296 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:10:26.297 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:10:26.498 DEBUG [src.steps.store] Relaying message
2025-02-12 04:10:26.498 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60455/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:10:26.504 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:10:26.504 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:10:26.705 DEBUG [src.steps.store] Relaying message
2025-02-12 04:10:26.705 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60455/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:10:26.712 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:10:26.713 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:10:26.914 DEBUG [src.steps.store] Relaying message
2025-02-12 04:10:26.914 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60455/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:10:26.921 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:10:26.921 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:10:27.122 DEBUG [src.steps.store] Relaying message
2025-02-12 04:10:27.122 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60455/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:10:27.129 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:10:27.129 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:10:27.330 DEBUG [tests.store.test_time_filter] inquering stored messages with start time 1739333428081625856 after end time 1739333423081613056
2025-02-12 04:10:27.331 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60455/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739333428081625856&endTime=1739333423081613056&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:10:27.334 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-12 04:10:27.334 DEBUG [tests.store.test_time_filter] response for wrong time message is {'requestId': '', 'statusCode': 200, 'statusDesc': 'OK', 'messages': []}
2025-02-12 04:10:27.335 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11386/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739333428081625856&endTime=1739333423081613056&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:10:27.338 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-12 04:10:27.338 DEBUG [tests.store.test_time_filter] response for wrong time message is {'requestId': '', 'statusCode': 200, 'statusDesc': 'OK', 'messages': []}
2025-02-12 04:10:27.340 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:10:27.341 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:10:27.341 DEBUG [src.node.waku_node] Stopping container with id b084825f4f1f
2025-02-12 04:10:28.116 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:10:28.116 DEBUG [src.node.waku_node] Stopping container with id 4db297fdf0a3
2025-02-12 04:10:28.930 ERROR [src.node.docker_mananger] Max retries reached for container b084825f4f1f. Exiting log stream.
2025-02-12 04:10:29.648 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:10:29.650 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:10:29.656 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:10:29.662 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
