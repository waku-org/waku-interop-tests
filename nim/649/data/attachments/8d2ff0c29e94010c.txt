2025-02-12 04:03:23.970 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:03:23.971 DEBUG [tests.conftest] Running test: test_filter_ping_on_subscribed_peer with id: 2025-02-12_04-03-23__c10692eb-3d6a-4ad8-91fd-3b46dcc95659
2025-02-12 04:03:23.971 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:03:23.971 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-12 04:03:23.971 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-12 04:03:23.977 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:03:23.977 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-12_04-03-23__c10692eb-3d6a-4ad8-91fd-3b46dcc95659__wakuorg_nwaku:latest.log
2025-02-12 04:03:23.977 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:03:23.977 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:03:23.979 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:03:23.979 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.80.193
2025-02-12 04:03:23.979 DEBUG [src.node.docker_mananger] Generated ports ['4971', '4972', '4973', '4974', '4975']
2025-02-12 04:03:23.979 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:03:23.979 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:03:23.979 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:03:23.980 DEBUG [src.node.docker_mananger] docker run -i -t -p 4971:4971 -p 4972:4972 -p 4973:4973 -p 4974:4974 -p 4975:4975 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4973 --rest-port=4971 --tcp-port=4972 --discv5-udp-port=4974 --rest-address=0.0.0.0 --nat=extip:172.18.80.193 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f6fbc4bb8425c2ed52c0afc6caf745aa7cc10cb19f75b69cec38d8784bf4d0f5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4975 --metrics-logging=true --relay=true --filter=true
2025-02-12 04:03:24.207 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.80.193 waku d5e3b3579b64c278748dd22af3f48ddfb40356f36dd1a2d9720c7373203cc026
2025-02-12 04:03:24.254 DEBUG [src.node.docker_mananger] Container started with ID d5e3b3579b64. Setting up logs at ./log/docker/node1_2025-02-12_04-03-23__c10692eb-3d6a-4ad8-91fd-3b46dcc95659__wakuorg_nwaku:latest.log
2025-02-12 04:03:24.255 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 4971
2025-02-12 04:03:24.255 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:03:24.768 ERROR [src.node.docker_mananger] Max retries reached for container 3ea9df9a338b. Exiting log stream.
2025-02-12 04:03:25.256 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4971/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:25.259 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:03:25.259 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:03:25.259 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4971/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:25.262 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.80.193/tcp/4972/p2p/16Uiu2HAmMBDQabTNVivrWCr8fH3fjWR8SCPgax9yvFDeGRTcj6yU","/ip4/172.18.80.193/tcp/4973/ws/p2p/16Uiu2HAmMBDQabTNVivrWCr8fH3fjWR8SCPgax9yvFDeGRTcj6yU"],"enrUri":"enr:-L24QM0W_Dfl0y_AOJSXZHG4euNHlaBUIWeQpXpgeMadEr4vNiQdlE9sb0N67TYjgQbBt6AA8Y6V72pnQKPqljaTOP4CgmlkgnY0gmlwhKwSUMGKbXVsdGlhZGRyc5YACASsElDBBhNsAAoErBJQwQYTbd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDfpuu1zAT08e7TVgWR51FgnzdE5Wa2afmPxD744SdBP-DdGNwghNsg3VkcIITboV3YWt1MgU"}'
2025-02-12 04:03:25.262 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:03:25.262 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-12 04:03:25.268 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:03:25.268 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-12_04-03-23__c10692eb-3d6a-4ad8-91fd-3b46dcc95659__wakuorg_nwaku:latest.log
2025-02-12 04:03:25.268 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:03:25.268 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:03:25.270 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:03:25.270 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.35.173
2025-02-12 04:03:25.270 DEBUG [src.node.docker_mananger] Generated ports ['26514', '26515', '26516', '26517', '26518']
2025-02-12 04:03:25.270 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:03:25.270 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:03:25.270 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:03:25.271 DEBUG [src.node.docker_mananger] docker run -i -t -p 26514:26514 -p 26515:26515 -p 26516:26516 -p 26517:26517 -p 26518:26518 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26516 --rest-port=26514 --tcp-port=26515 --discv5-udp-port=26517 --rest-address=0.0.0.0 --nat=extip:172.18.35.173 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=814aac25f4f4cded331e8c1bada2bba2bc0f58ed602f2b43fe6a5fdfbe9acad4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26518 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QM0W_Dfl0y_AOJSXZHG4euNHlaBUIWeQpXpgeMadEr4vNiQdlE9sb0N67TYjgQbBt6AA8Y6V72pnQKPqljaTOP4CgmlkgnY0gmlwhKwSUMGKbXVsdGlhZGRyc5YACASsElDBBhNsAAoErBJQwQYTbd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDfpuu1zAT08e7TVgWR51FgnzdE5Wa2afmPxD744SdBP-DdGNwghNsg3VkcIITboV3YWt1MgU --filternode=/ip4/172.18.80.193/tcp/4972/p2p/16Uiu2HAmMBDQabTNVivrWCr8fH3fjWR8SCPgax9yvFDeGRTcj6yU
2025-02-12 04:03:25.498 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.35.173 waku 1aa33bd349836c8fde51e9ff19b843a98a142fe20952ed261e3a48e5b3414e4a
2025-02-12 04:03:25.542 DEBUG [src.node.docker_mananger] Container started with ID 1aa33bd34983. Setting up logs at ./log/docker/node2_2025-02-12_04-03-23__c10692eb-3d6a-4ad8-91fd-3b46dcc95659__wakuorg_nwaku:latest.log
2025-02-12 04:03:25.542 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26514
2025-02-12 04:03:25.543 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:03:26.544 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26514/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:26.547 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:03:26.547 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:03:26.547 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26514/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:26.549 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.35.173/tcp/26515/p2p/16Uiu2HAmE2Qx279wsLpKJokGUCR1jS6YCpJu3ZqqzVk8pRGJR5MK","/ip4/172.18.35.173/tcp/26516/ws/p2p/16Uiu2HAmE2Qx279wsLpKJokGUCR1jS6YCpJu3ZqqzVk8pRGJR5MK"],"enrUri":"enr:-L24QIPAzIq0BwbPm2Ch3S2A7kAwqAfG031XEeJ4vPkos-Q7OAxuIuqoWb9c0vgusVWLe8ahnyj55NkYSgySzBaGvPwCgmlkgnY0gmlwhKwSI62KbXVsdGlhZGRyc5YACASsEiOtBmeTAAoErBIjrQZnlN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDFFiypwfDnYkLZsYKTZ4sBJ-4wFpXEHw0ZWmibptu79qDdGNwgmeTg3VkcIJnlYV3YWt1MgA"}'
2025-02-12 04:03:26.550 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:03:26.550 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26514/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.80.193/tcp/4972/p2p/16Uiu2HAmMBDQabTNVivrWCr8fH3fjWR8SCPgax9yvFDeGRTcj6yU"]'
2025-02-12 04:03:26.585 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:26.585 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-12 04:03:26.589 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4971/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 04:03:26.611 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:26.612 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26514/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "c4ffb003-0a32-495a-b4ec-d56026b7620e", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-12 04:03:26.623 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"c4ffb003-0a32-495a-b4ec-d56026b7620e","statusDesc":"OK"}'
2025-02-12 04:03:26.625 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26514/filter/v2/subscriptions/e5dd2d92-6fd2-45ec-9b85-edfef6a56648" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:26.632 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"e5dd2d92-6fd2-45ec-9b85-edfef6a56648","statusDesc":"OK"}'
2025-02-12 04:03:26.634 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:03:26.635 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:03:26.635 DEBUG [src.node.waku_node] Stopping container with id d5e3b3579b64
2025-02-12 04:03:27.755 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:03:27.755 DEBUG [src.node.waku_node] Stopping container with id 1aa33bd34983
2025-02-12 04:03:28.568 ERROR [src.node.docker_mananger] Max retries reached for container d5e3b3579b64. Exiting log stream.
2025-02-12 04:03:28.957 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:03:28.958 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:03:28.963 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:03:28.967 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
