2025-02-12 04:04:28.755 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:04:28.755 DEBUG [tests.conftest] Running test: test_time_filter_small_timestamp with id: 2025-02-12_04-04-28__e2b3643e-137b-43d6-80b8-9872513867af
2025-02-12 04:04:28.755 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:04:28.755 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-12 04:04:28.756 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-12 04:04:28.762 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:04:28.762 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-12_04-04-28__e2b3643e-137b-43d6-80b8-9872513867af__wakuorg_nwaku:latest.log
2025-02-12 04:04:28.762 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:04:28.762 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:04:28.763 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:04:28.764 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.27.127
2025-02-12 04:04:28.764 DEBUG [src.node.docker_mananger] Generated ports ['50200', '50201', '50202', '50203', '50204']
2025-02-12 04:04:28.764 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:04:28.764 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:04:28.764 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:04:28.764 DEBUG [src.node.docker_mananger] docker run -i -t -p 50200:50200 -p 50201:50201 -p 50202:50202 -p 50203:50203 -p 50204:50204 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50202 --rest-port=50200 --tcp-port=50201 --discv5-udp-port=50203 --rest-address=0.0.0.0 --nat=extip:172.18.27.127 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b5d3a9e43019977e9b7a1bff2be08e1bda92efbc8d09d304cdea88b01cca1ffe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50204 --metrics-logging=true --store=true --relay=true
2025-02-12 04:04:28.983 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.27.127 waku 06c0a4acd6018ffecfdf03eee536c24003db96fd14730945eca1ba4f8fd179f9
2025-02-12 04:04:29.028 DEBUG [src.node.docker_mananger] Container started with ID 06c0a4acd601. Setting up logs at ./log/docker/publishing_node1_2025-02-12_04-04-28__e2b3643e-137b-43d6-80b8-9872513867af__wakuorg_nwaku:latest.log
2025-02-12 04:04:29.030 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 50200
2025-02-12 04:04:29.030 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:04:29.557 ERROR [src.node.docker_mananger] Max retries reached for container 940b20439fc2. Exiting log stream.
2025-02-12 04:04:30.031 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50200/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:30.033 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:04:30.034 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:04:30.034 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50200/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:30.036 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.27.127/tcp/50201/p2p/16Uiu2HAkvBtm4h9dnou8Q9Nsxq837kRpDMTkUJxKC45289ZBzVcc","/ip4/172.18.27.127/tcp/50202/ws/p2p/16Uiu2HAkvBtm4h9dnou8Q9Nsxq837kRpDMTkUJxKC45289ZBzVcc"],"enrUri":"enr:-L24QICCC-Ih5F6U6AdHoio08vSk3k8VLsxC-5pJzhzg-jX1Zi4PufTnN_QBzWbe-IayCMjQJ4L6UKxWijXcv8iDyJkCgmlkgnY0gmlwhKwSG3-KbXVsdGlhZGRyc5YACASsEht_BsQZAAoErBIbfwbEGt0DgnJzhQADAQAAiXNlY3AyNTZrMaECC1QBsDQRlff1gYryKv7XgwKK7tafa6SRLKIH2dPN6gmDdGNwgsQZg3VkcILEG4V3YWt1MgM"}'
2025-02-12 04:04:30.036 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:04:30.043 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:04:30.043 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-12_04-04-28__e2b3643e-137b-43d6-80b8-9872513867af__wakuorg_nwaku:latest.log
2025-02-12 04:04:30.043 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:04:30.043 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:04:30.045 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:04:30.045 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.127.52
2025-02-12 04:04:30.045 DEBUG [src.node.docker_mananger] Generated ports ['32240', '32241', '32242', '32243', '32244']
2025-02-12 04:04:30.045 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:04:30.045 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:04:30.045 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:04:30.046 DEBUG [src.node.docker_mananger] docker run -i -t -p 32240:32240 -p 32241:32241 -p 32242:32242 -p 32243:32243 -p 32244:32244 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32242 --rest-port=32240 --tcp-port=32241 --discv5-udp-port=32243 --rest-address=0.0.0.0 --nat=extip:172.18.127.52 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=477ddbc330af0facbaf0afcebf8ba4eaa936df4561e7a0b764be8420e5c8ec19 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32244 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QICCC-Ih5F6U6AdHoio08vSk3k8VLsxC-5pJzhzg-jX1Zi4PufTnN_QBzWbe-IayCMjQJ4L6UKxWijXcv8iDyJkCgmlkgnY0gmlwhKwSG3-KbXVsdGlhZGRyc5YACASsEht_BsQZAAoErBIbfwbEGt0DgnJzhQADAQAAiXNlY3AyNTZrMaECC1QBsDQRlff1gYryKv7XgwKK7tafa6SRLKIH2dPN6gmDdGNwgsQZg3VkcILEG4V3YWt1MgM --storenode=/ip4/172.18.27.127/tcp/50201/p2p/16Uiu2HAkvBtm4h9dnou8Q9Nsxq837kRpDMTkUJxKC45289ZBzVcc --store=true --relay=true
2025-02-12 04:04:30.277 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.127.52 waku 0866d5dec48328078127392c0459e1301bfa3f4dce47e6c1fec67c6ab6f8c4a9
2025-02-12 04:04:30.328 DEBUG [src.node.docker_mananger] Container started with ID 0866d5dec483. Setting up logs at ./log/docker/store_node1_2025-02-12_04-04-28__e2b3643e-137b-43d6-80b8-9872513867af__wakuorg_nwaku:latest.log
2025-02-12 04:04:30.329 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32240
2025-02-12 04:04:30.330 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:04:31.330 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32240/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:31.333 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:04:31.333 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:04:31.333 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32240/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:31.335 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.127.52/tcp/32241/p2p/16Uiu2HAmFCQJBtiHgCSz2WZet7WKYVGrdCKgDHX3Moma1PWZVUdr","/ip4/172.18.127.52/tcp/32242/ws/p2p/16Uiu2HAmFCQJBtiHgCSz2WZet7WKYVGrdCKgDHX3Moma1PWZVUdr"],"enrUri":"enr:-L24QOG8d9I31I1kQxZKBEQsO8LHuMJUF9ZgZGfnku6H_SgactAQzWJ8-RQ_FZ-2Q9xaBxk5WvUkUDV7TFgL5CUG-J4CgmlkgnY0gmlwhKwSfzSKbXVsdGlhZGRyc5YACASsEn80Bn3xAAoErBJ_NAZ98t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJcN0kpMtkx1F_1FDgAuAePtw96SENAOj03XQziGI9yWDdGNwgn3xg3VkcIJ984V3YWt1MgM"}'
2025-02-12 04:04:31.336 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:04:31.336 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32240/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.27.127/tcp/50201/p2p/16Uiu2HAkvBtm4h9dnou8Q9Nsxq837kRpDMTkUJxKC45289ZBzVcc"]'
2025-02-12 04:04:31.338 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:31.339 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50200/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:04:31.341 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:31.341 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32240/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:04:31.344 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:31.345 DEBUG [src.steps.store] Relaying message
2025-02-12 04:04:31.345 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50200/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:04:31.350 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:31.351 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:04:31.552 DEBUG [src.steps.store] Relaying message
2025-02-12 04:04:31.552 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50200/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:04:31.557 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:31.558 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:04:31.759 DEBUG [src.steps.store] Relaying message
2025-02-12 04:04:31.759 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50200/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:04:31.763 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:31.764 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:04:31.964 DEBUG [src.steps.store] Relaying message
2025-02-12 04:04:31.965 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50200/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:04:31.972 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:31.972 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:04:32.173 DEBUG [src.steps.store] Relaying message
2025-02-12 04:04:32.173 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50200/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:04:32.178 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:32.178 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:04:32.379 DEBUG [src.steps.store] Relaying message
2025-02-12 04:04:32.379 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50200/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:04:32.384 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:32.384 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:04:32.585 DEBUG [tests.store.test_time_filter] inquering stored messages with start time 1739333068344968960 after end time 1739333081344983041
2025-02-12 04:04:32.585 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50200/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739333068344968960&endTime=1739333081344983041&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:32.589 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xcde2ab05ec17daf1e6065c63a4cba6d5e16ec2e25409c1794b45e53679b9c082","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739333068344968960,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x51d64f601fce00ac8df8727282986460dcaf6772338abc70af130694d1d39cfa","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739333070344975872,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x861c68fb934f12cf227c85677e30aae383b0694b51986a68422c09488dcd0395","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739333071244977920,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x5f948ca06449ab6e8e99b3c6984f514947d97a19e144cdf424424ebee3d8bc93","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739333071444979968,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x228267f6f7ac4ebee2443081bf9d9e4bd9be0bbcd9af569394a269b6794d68a2","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739333073344982016,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x3bf4146ab485eced452c8bfe285d8aee79e34e258b53d87dd3268388b946ec5e","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739333081344983040,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
2025-02-12 04:04:32.589 DEBUG [tests.store.test_time_filter] number of messages stored for start time 1739333068344968960 and end time = 1739333081344983041 is  6
2025-02-12 04:04:32.589 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32240/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739333068344968960&endTime=1739333081344983041&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:32.592 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xcde2ab05ec17daf1e6065c63a4cba6d5e16ec2e25409c1794b45e53679b9c082","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739333068344968960,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x51d64f601fce00ac8df8727282986460dcaf6772338abc70af130694d1d39cfa","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739333070344975872,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x861c68fb934f12cf227c85677e30aae383b0694b51986a68422c09488dcd0395","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739333071244977920,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x5f948ca06449ab6e8e99b3c6984f514947d97a19e144cdf424424ebee3d8bc93","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739333071444979968,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x228267f6f7ac4ebee2443081bf9d9e4bd9be0bbcd9af569394a269b6794d68a2","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739333073344982016,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x3bf4146ab485eced452c8bfe285d8aee79e34e258b53d87dd3268388b946ec5e","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739333081344983040,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
2025-02-12 04:04:32.593 DEBUG [tests.store.test_time_filter] number of messages stored for start time 1739333068344968960 and end time = 1739333081344983041 is  6
2025-02-12 04:04:32.595 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:04:32.596 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:04:32.596 DEBUG [src.node.waku_node] Stopping container with id 06c0a4acd601
2025-02-12 04:04:33.526 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:33.526 DEBUG [src.node.waku_node] Stopping container with id 0866d5dec483
2025-02-12 04:04:34.339 ERROR [src.node.docker_mananger] Max retries reached for container 06c0a4acd601. Exiting log stream.
2025-02-12 04:04:35.023 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:35.024 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:04:35.031 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:04:35.037 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
