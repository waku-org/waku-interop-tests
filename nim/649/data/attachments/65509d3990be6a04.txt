2025-02-12 04:07:56.932 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:07:56.933 DEBUG [tests.conftest] Running test: test_store_lightpushed_message with id: 2025-02-12_04-07-56__67ff9693-6ec9-4586-ad5a-36d0b39c1f73
2025-02-12 04:07:56.933 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:07:56.933 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-12 04:07:56.940 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:07:56.940 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-12_04-07-56__67ff9693-6ec9-4586-ad5a-36d0b39c1f73__wakuorg_nwaku:latest.log
2025-02-12 04:07:56.940 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:07:56.940 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:07:56.942 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:07:56.942 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.199.40
2025-02-12 04:07:56.942 DEBUG [src.node.docker_mananger] Generated ports ['18858', '18859', '18860', '18861', '18862']
2025-02-12 04:07:56.942 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:07:56.942 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:07:56.942 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:07:56.942 DEBUG [src.node.docker_mananger] docker run -i -t -p 18858:18858 -p 18859:18859 -p 18860:18860 -p 18861:18861 -p 18862:18862 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18860 --rest-port=18858 --tcp-port=18859 --discv5-udp-port=18861 --rest-address=0.0.0.0 --nat=extip:172.18.199.40 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0c806efe1a8b0a6c9ecb5c0cfea563ac9a9cfbcacd19e300bca9455efd6cfbda --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18862 --metrics-logging=true --store=true --relay=true --lightpush=true
2025-02-12 04:07:57.166 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.199.40 waku 0df7776b81bf319886f5ca16a0abc9de62f2c988318e5fc8c30eec514f163ccd
2025-02-12 04:07:57.216 DEBUG [src.node.docker_mananger] Container started with ID 0df7776b81bf. Setting up logs at ./log/docker/publishing_node1_2025-02-12_04-07-56__67ff9693-6ec9-4586-ad5a-36d0b39c1f73__wakuorg_nwaku:latest.log
2025-02-12 04:07:57.218 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18858
2025-02-12 04:07:57.219 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:07:57.738 ERROR [src.node.docker_mananger] Max retries reached for container cfbe3facf564. Exiting log stream.
2025-02-12 04:07:58.220 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18858/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:58.223 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:07:58.223 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:07:58.223 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18858/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:58.225 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.199.40/tcp/18859/p2p/16Uiu2HAm4vkj1XbiHhHcGSMLuiYAqkm13QEBFE9YaehbqJBLLsHF","/ip4/172.18.199.40/tcp/18860/ws/p2p/16Uiu2HAm4vkj1XbiHhHcGSMLuiYAqkm13QEBFE9YaehbqJBLLsHF"],"enrUri":"enr:-L24QJukHYvFCKYNJvisJgpffC9tAYpThWc7PRfF396tGlOaJrapcgYwT9d9xL5jvvt3zD9WAd7WoDj40afuMWtOKG0CgmlkgnY0gmlwhKwSxyiKbXVsdGlhZGRyc5YACASsEscoBkmrAAoErBLHKAZJrN0DgnJzhQADAQAAiXNlY3AyNTZrMaECjSxkIAXKro_qtp1NB2p6PVtjwkOxcSooYXmno2kwFl6DdGNwgkmrg3VkcIJJrYV3YWt1Mgs"}'
2025-02-12 04:07:58.225 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:07:58.232 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:07:58.232 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node2_2025-02-12_04-07-56__67ff9693-6ec9-4586-ad5a-36d0b39c1f73__wakuorg_nwaku:latest.log
2025-02-12 04:07:58.232 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:07:58.232 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:07:58.233 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:07:58.233 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.253.82
2025-02-12 04:07:58.234 DEBUG [src.node.docker_mananger] Generated ports ['58379', '58380', '58381', '58382', '58383']
2025-02-12 04:07:58.234 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:07:58.234 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:07:58.234 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:07:58.234 DEBUG [src.node.docker_mananger] docker run -i -t -p 58379:58379 -p 58380:58380 -p 58381:58381 -p 58382:58382 -p 58383:58383 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58381 --rest-port=58379 --tcp-port=58380 --discv5-udp-port=58382 --rest-address=0.0.0.0 --nat=extip:172.18.253.82 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a1fb06fa8fe65a4068ea622ceec222479eb0637d8ce5c8e670d1b445c6d403cd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58383 --metrics-logging=true --store=false --relay=true
2025-02-12 04:07:58.458 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.253.82 waku 09e2aa2ec13f78e200abd974b34d9a14c3d42941beafcebd4a69662cc4fc172c
2025-02-12 04:07:58.505 DEBUG [src.node.docker_mananger] Container started with ID 09e2aa2ec13f. Setting up logs at ./log/docker/publishing_node2_2025-02-12_04-07-56__67ff9693-6ec9-4586-ad5a-36d0b39c1f73__wakuorg_nwaku:latest.log
2025-02-12 04:07:58.505 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58379
2025-02-12 04:07:58.505 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:07:59.506 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58379/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:59.508 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:07:59.509 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:07:59.509 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58379/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:59.511 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.253.82/tcp/58380/p2p/16Uiu2HAmJT5GejJbRtskKiv6SKXFWYqUHwxTZskxqBrp44RNAXXa","/ip4/172.18.253.82/tcp/58381/ws/p2p/16Uiu2HAmJT5GejJbRtskKiv6SKXFWYqUHwxTZskxqBrp44RNAXXa"],"enrUri":"enr:-L24QJcOJA15t604QyLj20CfPLszn6MPXOEyw6tuI4i9VbU-L_7OcDnaLmxMXUYguRmKU6b1QoEk2gF0BOYd6xdShVQCgmlkgnY0gmlwhKwS_VKKbXVsdGlhZGRyc5YACASsEv1SBuQMAAoErBL9UgbkDd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVhi3BkCWHeiaEFJcg8PHxDX9CjZMovND9YPK9FGlqR2DdGNwguQMg3VkcILkDoV3YWt1MgE"}'
2025-02-12 04:07:59.511 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:07:59.511 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58379/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.199.40/tcp/18859/p2p/16Uiu2HAm4vkj1XbiHhHcGSMLuiYAqkm13QEBFE9YaehbqJBLLsHF"]'
2025-02-12 04:07:59.551 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:07:59.559 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:07:59.560 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-12_04-07-56__67ff9693-6ec9-4586-ad5a-36d0b39c1f73__wakuorg_nwaku:latest.log
2025-02-12 04:07:59.560 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:07:59.560 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:07:59.561 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:07:59.561 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.80.37
2025-02-12 04:07:59.562 DEBUG [src.node.docker_mananger] Generated ports ['1620', '1621', '1622', '1623', '1624']
2025-02-12 04:07:59.562 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:07:59.562 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:07:59.562 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:07:59.562 DEBUG [src.node.docker_mananger] docker run -i -t -p 1620:1620 -p 1621:1621 -p 1622:1622 -p 1623:1623 -p 1624:1624 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1622 --rest-port=1620 --tcp-port=1621 --discv5-udp-port=1623 --rest-address=0.0.0.0 --nat=extip:172.18.80.37 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6cc22dab7be5642f6fdf11f8a70dd027f590511f99b9ae371bf815d18f9511be --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1624 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJukHYvFCKYNJvisJgpffC9tAYpThWc7PRfF396tGlOaJrapcgYwT9d9xL5jvvt3zD9WAd7WoDj40afuMWtOKG0CgmlkgnY0gmlwhKwSxyiKbXVsdGlhZGRyc5YACASsEscoBkmrAAoErBLHKAZJrN0DgnJzhQADAQAAiXNlY3AyNTZrMaECjSxkIAXKro_qtp1NB2p6PVtjwkOxcSooYXmno2kwFl6DdGNwgkmrg3VkcIJJrYV3YWt1Mgs --storenode=/ip4/172.18.199.40/tcp/18859/p2p/16Uiu2HAm4vkj1XbiHhHcGSMLuiYAqkm13QEBFE9YaehbqJBLLsHF --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.199.40/tcp/18859/p2p/16Uiu2HAm4vkj1XbiHhHcGSMLuiYAqkm13QEBFE9YaehbqJBLLsHF
2025-02-12 04:07:59.797 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.80.37 waku e1599abd588da73688f53808fedf62408ccca415bf67da41c52ddf6d815406ac
2025-02-12 04:07:59.845 DEBUG [src.node.docker_mananger] Container started with ID e1599abd588d. Setting up logs at ./log/docker/store_node1_2025-02-12_04-07-56__67ff9693-6ec9-4586-ad5a-36d0b39c1f73__wakuorg_nwaku:latest.log
2025-02-12 04:07:59.846 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 1620
2025-02-12 04:07:59.846 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:08:00.846 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1620/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:08:00.849 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:08:00.849 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:08:00.849 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1620/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:08:00.851 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.80.37/tcp/1621/p2p/16Uiu2HAkzke9LoJNVLAiVnNZ5BpotH217BgnZYQP8PiZ1jdWrdtD","/ip4/172.18.80.37/tcp/1622/ws/p2p/16Uiu2HAkzke9LoJNVLAiVnNZ5BpotH217BgnZYQP8PiZ1jdWrdtD"],"enrUri":"enr:-L24QA-gyDRSVg8UkcQSFOFdyGbBOINfgdz0U_yh5NPieSb4RHV2LeeLN7E9F-LTcBU5zKBys-3O2WVTdmOnneb3oPACgmlkgnY0gmlwhKwSUCWKbXVsdGlhZGRyc5YACASsElAlBgZVAAoErBJQJQYGVt0DgnJzhQADAQAAiXNlY3AyNTZrMaECTyZlDiDlNULX9BriWsesJzal9hq-Cwqvmy4bvGu8jCKDdGNwggZVg3VkcIIGV4V3YWt1Mgg"}'
2025-02-12 04:08:00.851 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:08:00.852 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1620/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.199.40/tcp/18859/p2p/16Uiu2HAm4vkj1XbiHhHcGSMLuiYAqkm13QEBFE9YaehbqJBLLsHF"]'
2025-02-12 04:08:00.888 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:08:00.889 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1620/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.253.82/tcp/58380/p2p/16Uiu2HAmJT5GejJbRtskKiv6SKXFWYqUHwxTZskxqBrp44RNAXXa"]'
2025-02-12 04:08:00.916 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:08:00.916 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18858/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:08:00.921 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:08:00.923 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58379/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:08:00.929 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:08:00.931 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1620/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739333280931046400}}'
2025-02-12 04:08:00.942 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:08:00.943 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:08:01.144 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-12 04:08:01.144 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18858/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:08:01.147 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xd954fc9f7cf172c7e292d19d1044dd9ec36992ab473bf72e0d5b77be0186603a"}]}'
2025-02-12 04:08:01.147 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-12 04:08:01.148 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1620/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:08:01.155 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"7fa8e94240a86b47b629","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xd954fc9f7cf172c7e292d19d1044dd9ec36992ab473bf72e0d5b77be0186603a"}]}'
2025-02-12 04:08:01.156 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:08:01.157 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:08:01.158 DEBUG [src.node.waku_node] Stopping container with id 0df7776b81bf
2025-02-12 04:08:01.744 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:08:01.745 DEBUG [src.node.waku_node] Stopping container with id 09e2aa2ec13f
2025-02-12 04:08:02.579 ERROR [src.node.docker_mananger] Max retries reached for container 0df7776b81bf. Exiting log stream.
2025-02-12 04:08:03.262 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:08:03.263 DEBUG [src.node.waku_node] Stopping container with id e1599abd588d
2025-02-12 04:08:04.074 ERROR [src.node.docker_mananger] Max retries reached for container 09e2aa2ec13f. Exiting log stream.
2025-02-12 04:08:04.764 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:08:04.765 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:08:04.798 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:08:04.805 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:08:04.811 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
