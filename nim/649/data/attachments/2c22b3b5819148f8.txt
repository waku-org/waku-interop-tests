2025-02-12 04:04:27.281 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:04:27.282 DEBUG [tests.conftest] Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2025-02-12_04-04-27__a53793e9-738f-4a3b-9b24-4c2f0abbdb1f
2025-02-12 04:04:27.282 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:04:27.282 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-12 04:04:27.289 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:04:27.289 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-12_04-04-27__a53793e9-738f-4a3b-9b24-4c2f0abbdb1f__wakuorg_nwaku:latest.log
2025-02-12 04:04:27.289 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:04:27.289 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:04:27.291 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:04:27.291 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.197.56
2025-02-12 04:04:27.291 DEBUG [src.node.docker_mananger] Generated ports ['44022', '44023', '44024', '44025', '44026']
2025-02-12 04:04:27.291 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:04:27.291 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:04:27.291 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:04:27.291 DEBUG [src.node.docker_mananger] docker run -i -t -p 44022:44022 -p 44023:44023 -p 44024:44024 -p 44025:44025 -p 44026:44026 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44024 --rest-port=44022 --tcp-port=44023 --discv5-udp-port=44025 --rest-address=0.0.0.0 --nat=extip:172.18.197.56 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c4f8352da4f2dee4bd3152bb2310e28eaa21bfda0a6a7d56cdd812cb53b9c10c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44026 --metrics-logging=true --lightpush=true --relay=true
2025-02-12 04:04:27.528 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.197.56 waku b423742c5faaf8319c23e9e0fbff5179edec7a2617c579ecdac6d08b47475e9b
2025-02-12 04:04:27.575 DEBUG [src.node.docker_mananger] Container started with ID b423742c5faa. Setting up logs at ./log/docker/receiving_node1_2025-02-12_04-04-27__a53793e9-738f-4a3b-9b24-4c2f0abbdb1f__wakuorg_nwaku:latest.log
2025-02-12 04:04:27.576 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44022
2025-02-12 04:04:27.577 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:04:28.084 ERROR [src.node.docker_mananger] Max retries reached for container f6c73c5e4a80. Exiting log stream.
2025-02-12 04:04:28.577 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44022/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:28.580 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:04:28.580 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:04:28.580 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44022/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:28.583 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.197.56/tcp/44023/p2p/16Uiu2HAmMtihXbJGG6bhQgDSHXckNpHgfP2FjfnMiB4LBNcKw2Ec","/ip4/172.18.197.56/tcp/44024/ws/p2p/16Uiu2HAmMtihXbJGG6bhQgDSHXckNpHgfP2FjfnMiB4LBNcKw2Ec"],"enrUri":"enr:-L24QFj91pGFVxeM5Soj84X6hrJ4rl5zf2P-q_h9kKmkOtyfFpRTcCXp4GKvBGS8C2wMC_c-SwqRA857bILnEtzS25UCgmlkgnY0gmlwhKwSxTiKbXVsdGlhZGRyc5YACASsEsU4Bqv3AAoErBLFOAar-N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDiT2d8Ig4Ec2tqMNJH1D5zKP7CFL9OveyHCqVohnXMemDdGNwgqv3g3VkcIKr-YV3YWt1Mgk"}'
2025-02-12 04:04:28.583 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:04:28.593 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:04:28.593 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-12_04-04-27__a53793e9-738f-4a3b-9b24-4c2f0abbdb1f__wakuorg_nwaku:latest.log
2025-02-12 04:04:28.593 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:04:28.593 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:04:28.594 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:04:28.595 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.19.129
2025-02-12 04:04:28.595 DEBUG [src.node.docker_mananger] Generated ports ['16778', '16779', '16780', '16781', '16782']
2025-02-12 04:04:28.595 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:04:28.595 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:04:28.595 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:04:28.595 DEBUG [src.node.docker_mananger] docker run -i -t -p 16778:16778 -p 16779:16779 -p 16780:16780 -p 16781:16781 -p 16782:16782 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16780 --rest-port=16778 --tcp-port=16779 --discv5-udp-port=16781 --rest-address=0.0.0.0 --nat=extip:172.18.19.129 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=47a4cc5511f5e9c3ee3f3e6b2ea2bdfb85a5fdccd501f45f95fd4d7a4d713d9c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16782 --metrics-logging=true --lightpush=false --relay=true
2025-02-12 04:04:28.823 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.19.129 waku 43955c679613a22f608b4a0b27713615ecf9b037916e5802d7b6db17c8ab6e3f
2025-02-12 04:04:28.870 DEBUG [src.node.docker_mananger] Container started with ID 43955c679613. Setting up logs at ./log/docker/receiving_node2_2025-02-12_04-04-27__a53793e9-738f-4a3b-9b24-4c2f0abbdb1f__wakuorg_nwaku:latest.log
2025-02-12 04:04:28.870 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 16778
2025-02-12 04:04:28.870 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:04:29.870 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16778/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:29.873 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:04:29.873 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:04:29.874 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16778/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:29.876 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.19.129/tcp/16779/p2p/16Uiu2HAmGB33dLKNQb4n35CKKH8Y9zRomtJwBFYAZoyrF5fg9Heb","/ip4/172.18.19.129/tcp/16780/ws/p2p/16Uiu2HAmGB33dLKNQb4n35CKKH8Y9zRomtJwBFYAZoyrF5fg9Heb"],"enrUri":"enr:-L24QAvEQVli-X1xLmuVnfdJLQ6Ggsbc0l9PwG11p7eXeMfVMO7t4g3yFkwQL49SV2WVcef21hBZAAxNqOD6ewDde6wCgmlkgnY0gmlwhKwSE4GKbXVsdGlhZGRyc5YACASsEhOBBkGLAAoErBITgQZBjN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDNEWIZ58lZ1d9BFe46yxRL53zCFIgedkEfIjtPqbNVDSDdGNwgkGLg3VkcIJBjYV3YWt1MgE"}'
2025-02-12 04:04:29.876 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:04:29.876 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16778/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.197.56/tcp/44023/p2p/16Uiu2HAmMtihXbJGG6bhQgDSHXckNpHgfP2FjfnMiB4LBNcKw2Ec"]'
2025-02-12 04:04:29.915 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:29.927 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:04:29.927 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-12_04-04-27__a53793e9-738f-4a3b-9b24-4c2f0abbdb1f__wakuorg_nwaku:latest.log
2025-02-12 04:04:29.928 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:04:29.928 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:04:29.930 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:04:29.930 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.7.219
2025-02-12 04:04:29.930 DEBUG [src.node.docker_mananger] Generated ports ['35758', '35759', '35760', '35761', '35762']
2025-02-12 04:04:29.931 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:04:29.931 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:04:29.931 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:04:29.931 DEBUG [src.node.docker_mananger] docker run -i -t -p 35758:35758 -p 35759:35759 -p 35760:35760 -p 35761:35761 -p 35762:35762 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35760 --rest-port=35758 --tcp-port=35759 --discv5-udp-port=35761 --rest-address=0.0.0.0 --nat=extip:172.18.7.219 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=785e70c55fe7b6e4e439d1dfa47afd6c4bca089b9dfd8ffe1ef5791cd51eed0e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35762 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFj91pGFVxeM5Soj84X6hrJ4rl5zf2P-q_h9kKmkOtyfFpRTcCXp4GKvBGS8C2wMC_c-SwqRA857bILnEtzS25UCgmlkgnY0gmlwhKwSxTiKbXVsdGlhZGRyc5YACASsEsU4Bqv3AAoErBLFOAar-N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDiT2d8Ig4Ec2tqMNJH1D5zKP7CFL9OveyHCqVohnXMemDdGNwgqv3g3VkcIKr-YV3YWt1Mgk --lightpushnode=/ip4/172.18.197.56/tcp/44023/p2p/16Uiu2HAmMtihXbJGG6bhQgDSHXckNpHgfP2FjfnMiB4LBNcKw2Ec --lightpush=true --relay=false
2025-02-12 04:04:30.163 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.7.219 waku efea327ec8ff7a7d854f857f043843ba55085facf605fd06981e20553690d679
2025-02-12 04:04:30.214 DEBUG [src.node.docker_mananger] Container started with ID efea327ec8ff. Setting up logs at ./log/docker/lightpush_node1_2025-02-12_04-04-27__a53793e9-738f-4a3b-9b24-4c2f0abbdb1f__wakuorg_nwaku:latest.log
2025-02-12 04:04:30.215 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 35758
2025-02-12 04:04:30.215 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:04:31.215 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35758/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:31.219 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:04:31.219 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:04:31.219 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35758/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:31.221 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.7.219/tcp/35759/p2p/16Uiu2HAmS7zTVhZzvqiccphKqPrS6ZyFZa1xwgSuD73GXobnRZ4Y","/ip4/172.18.7.219/tcp/35760/ws/p2p/16Uiu2HAmS7zTVhZzvqiccphKqPrS6ZyFZa1xwgSuD73GXobnRZ4Y"],"enrUri":"enr:-L24QGVUvc-mzwdxJyD2Pv9OyoMKnscLJjsapr29kFn_Or47OzFb67y8V_pJ2eV5xjefLr_7KseNNEi8j1nPaATaLdMCgmlkgnY0gmlwhKwSB9uKbXVsdGlhZGRyc5YACASsEgfbBouvAAoErBIH2waLsN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDyBK7nT_nVHCeZt3h7saOpcG6TQkH3ocJnD8WcCVNOZ2DdGNwgouvg3VkcIKLsYV3YWt1Mgg"}'
2025-02-12 04:04:31.221 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:04:31.221 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35758/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.197.56/tcp/44023/p2p/16Uiu2HAmMtihXbJGG6bhQgDSHXckNpHgfP2FjfnMiB4LBNcKw2Ec"]'
2025-02-12 04:04:31.259 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:31.259 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35758/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.19.129/tcp/16779/p2p/16Uiu2HAmGB33dLKNQb4n35CKKH8Y9zRomtJwBFYAZoyrF5fg9Heb"]'
2025-02-12 04:04:31.290 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:31.294 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44022/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:04:31.303 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:31.303 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16778/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:04:31.306 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:31.307 DEBUG [src.steps.light_push] Lightpushing message
2025-02-12 04:04:31.307 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35758/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739333071307191552}}'
2025-02-12 04:04:31.315 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:35758/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
2025-02-12 04:04:31.317 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:04:31.318 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:04:31.318 DEBUG [src.node.waku_node] Stopping container with id b423742c5faa
2025-02-12 04:04:32.086 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:32.087 DEBUG [src.node.waku_node] Stopping container with id 43955c679613
2025-02-12 04:04:32.899 ERROR [src.node.docker_mananger] Max retries reached for container b423742c5faa. Exiting log stream.
2025-02-12 04:04:33.610 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:33.611 DEBUG [src.node.waku_node] Stopping container with id efea327ec8ff
2025-02-12 04:04:34.423 ERROR [src.node.docker_mananger] Max retries reached for container 43955c679613. Exiting log stream.
2025-02-12 04:04:35.129 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:35.131 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:04:35.138 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:04:35.145 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:04:35.152 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
