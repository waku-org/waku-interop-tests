2025-02-12 04:06:28.166 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:06:28.167 DEBUG [tests.conftest] Running test: test_time_filter_invalid_start_time with id: 2025-02-12_04-06-28__a5c12b91-f1c7-4b1e-ba5d-9fe825962785
2025-02-12 04:06:28.167 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:06:28.167 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-12 04:06:28.167 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-12 04:06:28.174 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:06:28.174 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-12_04-06-28__a5c12b91-f1c7-4b1e-ba5d-9fe825962785__wakuorg_nwaku:latest.log
2025-02-12 04:06:28.174 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:06:28.174 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:06:28.176 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:06:28.176 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.100.16
2025-02-12 04:06:28.176 DEBUG [src.node.docker_mananger] Generated ports ['16553', '16554', '16555', '16556', '16557']
2025-02-12 04:06:28.176 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:06:28.176 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:06:28.177 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:06:28.177 DEBUG [src.node.docker_mananger] docker run -i -t -p 16553:16553 -p 16554:16554 -p 16555:16555 -p 16556:16556 -p 16557:16557 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16555 --rest-port=16553 --tcp-port=16554 --discv5-udp-port=16556 --rest-address=0.0.0.0 --nat=extip:172.18.100.16 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5e03f5f0dbfac5cef3f5a48dd2f86cdc9ee93e812ec79ad6dec413aca0bacccf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16557 --metrics-logging=true --store=true --relay=true
2025-02-12 04:06:28.426 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.100.16 waku b9f22bcdbfff3c512968f7da47eefeff3bef44f24a1a14e82b1a8405a3453717
2025-02-12 04:06:28.475 DEBUG [src.node.docker_mananger] Container started with ID b9f22bcdbfff. Setting up logs at ./log/docker/publishing_node1_2025-02-12_04-06-28__a5c12b91-f1c7-4b1e-ba5d-9fe825962785__wakuorg_nwaku:latest.log
2025-02-12 04:06:28.477 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 16553
2025-02-12 04:06:28.477 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:06:28.962 ERROR [src.node.docker_mananger] Max retries reached for container 7b1ae996db83. Exiting log stream.
2025-02-12 04:06:29.479 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16553/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:06:29.482 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:06:29.482 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:06:29.482 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16553/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:06:29.485 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.100.16/tcp/16554/p2p/16Uiu2HAm5oJm6Lfyr1bxFU3eLEkPZKKUUDJSX5eyAEjHVkwzrRTg","/ip4/172.18.100.16/tcp/16555/ws/p2p/16Uiu2HAm5oJm6Lfyr1bxFU3eLEkPZKKUUDJSX5eyAEjHVkwzrRTg"],"enrUri":"enr:-L24QIB5yBUCxx7q3O0xhBYNMGk42tFyYDa_hWURSbKgowZGBVthfX4OJ7EGAk4o8vjbXCeEcnT27mhg3kdTAorouRwCgmlkgnY0gmlwhKwSZBCKbXVsdGlhZGRyc5YACASsEmQQBkCqAAoErBJkEAZAq90DgnJzhQADAQAAiXNlY3AyNTZrMaECmh-nmb_pDGsrC15lRkwstMq3fSQ3jtitW2Vs_hxKfiODdGNwgkCqg3VkcIJArIV3YWt1MgM"}'
2025-02-12 04:06:29.485 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:06:29.493 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:06:29.493 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-12_04-06-28__a5c12b91-f1c7-4b1e-ba5d-9fe825962785__wakuorg_nwaku:latest.log
2025-02-12 04:06:29.493 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:06:29.493 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:06:29.495 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:06:29.495 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.80.122
2025-02-12 04:06:29.495 DEBUG [src.node.docker_mananger] Generated ports ['62986', '62987', '62988', '62989', '62990']
2025-02-12 04:06:29.496 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:06:29.496 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:06:29.496 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:06:29.496 DEBUG [src.node.docker_mananger] docker run -i -t -p 62986:62986 -p 62987:62987 -p 62988:62988 -p 62989:62989 -p 62990:62990 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62988 --rest-port=62986 --tcp-port=62987 --discv5-udp-port=62989 --rest-address=0.0.0.0 --nat=extip:172.18.80.122 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c608fcac819c8135f81fde89e49561bcfe90caac48d0dbfdd74ced2fc2eb31ab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62990 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QIB5yBUCxx7q3O0xhBYNMGk42tFyYDa_hWURSbKgowZGBVthfX4OJ7EGAk4o8vjbXCeEcnT27mhg3kdTAorouRwCgmlkgnY0gmlwhKwSZBCKbXVsdGlhZGRyc5YACASsEmQQBkCqAAoErBJkEAZAq90DgnJzhQADAQAAiXNlY3AyNTZrMaECmh-nmb_pDGsrC15lRkwstMq3fSQ3jtitW2Vs_hxKfiODdGNwgkCqg3VkcIJArIV3YWt1MgM --storenode=/ip4/172.18.100.16/tcp/16554/p2p/16Uiu2HAm5oJm6Lfyr1bxFU3eLEkPZKKUUDJSX5eyAEjHVkwzrRTg --store=true --relay=true
2025-02-12 04:06:29.737 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.80.122 waku 838df9ad7b18bddd71550e7fa8aa7ff1fcac0e15e27b6960da5b82367c8e623f
2025-02-12 04:06:29.789 DEBUG [src.node.docker_mananger] Container started with ID 838df9ad7b18. Setting up logs at ./log/docker/store_node1_2025-02-12_04-06-28__a5c12b91-f1c7-4b1e-ba5d-9fe825962785__wakuorg_nwaku:latest.log
2025-02-12 04:06:29.790 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 62986
2025-02-12 04:06:29.791 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:06:30.791 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62986/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:06:30.795 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:06:30.795 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:06:30.795 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62986/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:06:30.797 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.80.122/tcp/62987/p2p/16Uiu2HAmS7bYbQuTCcK6ifhA2JhzFWNJ1jcxrVLHTsV7s7u25bi5","/ip4/172.18.80.122/tcp/62988/ws/p2p/16Uiu2HAmS7bYbQuTCcK6ifhA2JhzFWNJ1jcxrVLHTsV7s7u25bi5"],"enrUri":"enr:-L24QIZ74HPt8rpmPkS4027YEDeNRhw3JVXCESm7XOglHRGJHcnLBJ2PRE-UNFt8KwgFIYY1pWqm0G9yjf61p1OeYQQCgmlkgnY0gmlwhKwSUHqKbXVsdGlhZGRyc5YACASsElB6BvYLAAoErBJQegb2DN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDx_jTefhd2Eqg7znkAW7B9XZ9DsCUDasVlexVcpTLCsaDdGNwgvYLg3VkcIL2DYV3YWt1MgM"}'
2025-02-12 04:06:30.798 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:06:30.798 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62986/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.100.16/tcp/16554/p2p/16Uiu2HAm5oJm6Lfyr1bxFU3eLEkPZKKUUDJSX5eyAEjHVkwzrRTg"]'
2025-02-12 04:06:30.801 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:06:30.801 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16553/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:06:30.804 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:06:30.804 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62986/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:06:30.806 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:06:30.807 DEBUG [src.steps.store] Relaying message
2025-02-12 04:06:30.807 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16553/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:06:30.813 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:06:30.814 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:06:31.015 DEBUG [src.steps.store] Relaying message
2025-02-12 04:06:31.015 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16553/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:06:31.022 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:06:31.022 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:06:31.223 DEBUG [src.steps.store] Relaying message
2025-02-12 04:06:31.223 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16553/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:06:31.230 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:06:31.230 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:06:31.431 DEBUG [src.steps.store] Relaying message
2025-02-12 04:06:31.431 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16553/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:06:31.437 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:06:31.438 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:06:31.639 DEBUG [src.steps.store] Relaying message
2025-02-12 04:06:31.639 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16553/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:06:31.645 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:06:31.646 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:06:31.846 DEBUG [src.steps.store] Relaying message
2025-02-12 04:06:31.847 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16553/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:06:31.853 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:06:31.854 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:06:32.055 DEBUG [tests.store.test_time_filter] inquering stored messages with start time abc
2025-02-12 04:06:32.055 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16553/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:06:32.059 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:16553/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true. Response content: b'time parsing error: invalid integer: abc'
2025-02-12 04:06:32.060 DEBUG [tests.store.test_time_filter] invalid start_time cause error Error: 400 Client Error: Bad Request for url: http://127.0.0.1:16553/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true with response: b'time parsing error: invalid integer: abc'
2025-02-12 04:06:32.061 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:06:32.063 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:06:32.063 DEBUG [src.node.waku_node] Stopping container with id b9f22bcdbfff
2025-02-12 04:06:33.009 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:06:33.009 DEBUG [src.node.waku_node] Stopping container with id 838df9ad7b18
2025-02-12 04:06:33.822 ERROR [src.node.docker_mananger] Max retries reached for container b9f22bcdbfff. Exiting log stream.
2025-02-12 04:06:34.537 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:06:34.537 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:06:34.544 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:06:34.550 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
