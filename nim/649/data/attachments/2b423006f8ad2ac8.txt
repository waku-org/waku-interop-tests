2025-02-12 04:03:55.790 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:03:55.790 DEBUG [tests.conftest] Running test: test_get_store_messages_with_wrong_typo_content_topic with id: 2025-02-12_04-03-55__c69e226e-cfda-4a9e-9a61-83d948aad902
2025-02-12 04:03:55.790 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:03:55.791 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-12 04:03:55.791 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-12 04:03:55.797 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:03:55.797 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-12_04-03-55__c69e226e-cfda-4a9e-9a61-83d948aad902__wakuorg_nwaku:latest.log
2025-02-12 04:03:55.797 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:03:55.797 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:03:55.799 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:03:55.799 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.138.249
2025-02-12 04:03:55.799 DEBUG [src.node.docker_mananger] Generated ports ['19970', '19971', '19972', '19973', '19974']
2025-02-12 04:03:55.799 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:03:55.799 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:03:55.799 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:03:55.800 DEBUG [src.node.docker_mananger] docker run -i -t -p 19970:19970 -p 19971:19971 -p 19972:19972 -p 19973:19973 -p 19974:19974 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19972 --rest-port=19970 --tcp-port=19971 --discv5-udp-port=19973 --rest-address=0.0.0.0 --nat=extip:172.18.138.249 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b5a237335c3fbfeff91cfb396b58f34a39311fda0f35869bbec3ae47d9bcdfcc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19974 --metrics-logging=true --store=true --relay=true
2025-02-12 04:03:56.040 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.138.249 waku c4794aee97f532684e488cab1a97478a9ca614b669cac460dc610b0d79a4e3dc
2025-02-12 04:03:56.096 DEBUG [src.node.docker_mananger] Container started with ID c4794aee97f5. Setting up logs at ./log/docker/publishing_node1_2025-02-12_04-03-55__c69e226e-cfda-4a9e-9a61-83d948aad902__wakuorg_nwaku:latest.log
2025-02-12 04:03:56.098 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 19970
2025-02-12 04:03:56.098 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:03:56.587 ERROR [src.node.docker_mananger] Max retries reached for container d5f7df617ee4. Exiting log stream.
2025-02-12 04:03:57.098 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19970/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:57.101 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:03:57.101 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:03:57.101 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19970/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:57.103 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.138.249/tcp/19971/p2p/16Uiu2HAkwvt1GFNEK9dGj2X44j3iqHPrBcapLpc3jCyDyLSRY3Pk","/ip4/172.18.138.249/tcp/19972/ws/p2p/16Uiu2HAkwvt1GFNEK9dGj2X44j3iqHPrBcapLpc3jCyDyLSRY3Pk"],"enrUri":"enr:-L24QLc7N4_jP7IeBGKnaf7Ab0FOdj6uPj3xA0xIozeFV2w5VLSoLwzIY74BlDptPlCWuI3TMAWhMKTxRXgDLVqHW74CgmlkgnY0gmlwhKwSivmKbXVsdGlhZGRyc5YACASsEor5Bk4DAAoErBKK-QZOBN0DgnJzhQADAQAAiXNlY3AyNTZrMaECJTLQfdn6SplmyhBuo1f5Lp3mtZ-ljq1ENCNGgFjPGyeDdGNwgk4Dg3VkcIJOBYV3YWt1MgM"}'
2025-02-12 04:03:57.104 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:03:57.110 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:03:57.110 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-12_04-03-55__c69e226e-cfda-4a9e-9a61-83d948aad902__wakuorg_nwaku:latest.log
2025-02-12 04:03:57.111 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:03:57.111 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:03:57.112 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:03:57.112 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.112.159
2025-02-12 04:03:57.112 DEBUG [src.node.docker_mananger] Generated ports ['65152', '65153', '65154', '65155', '65156']
2025-02-12 04:03:57.113 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:03:57.113 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:03:57.113 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:03:57.113 DEBUG [src.node.docker_mananger] docker run -i -t -p 65152:65152 -p 65153:65153 -p 65154:65154 -p 65155:65155 -p 65156:65156 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65154 --rest-port=65152 --tcp-port=65153 --discv5-udp-port=65155 --rest-address=0.0.0.0 --nat=extip:172.18.112.159 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c3d2b56bd8b2dd0b4ac92cba0efcf1feb9e0edbb5cc628aabf2ae0f52cb8f48f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65156 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLc7N4_jP7IeBGKnaf7Ab0FOdj6uPj3xA0xIozeFV2w5VLSoLwzIY74BlDptPlCWuI3TMAWhMKTxRXgDLVqHW74CgmlkgnY0gmlwhKwSivmKbXVsdGlhZGRyc5YACASsEor5Bk4DAAoErBKK-QZOBN0DgnJzhQADAQAAiXNlY3AyNTZrMaECJTLQfdn6SplmyhBuo1f5Lp3mtZ-ljq1ENCNGgFjPGyeDdGNwgk4Dg3VkcIJOBYV3YWt1MgM --storenode=/ip4/172.18.138.249/tcp/19971/p2p/16Uiu2HAkwvt1GFNEK9dGj2X44j3iqHPrBcapLpc3jCyDyLSRY3Pk --store=true --relay=true
2025-02-12 04:03:57.343 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.112.159 waku af385e3b5f984b4eddb642533db05a237b248f35fa5c21a966ea74546aa377cc
2025-02-12 04:03:57.391 DEBUG [src.node.docker_mananger] Container started with ID af385e3b5f98. Setting up logs at ./log/docker/store_node1_2025-02-12_04-03-55__c69e226e-cfda-4a9e-9a61-83d948aad902__wakuorg_nwaku:latest.log
2025-02-12 04:03:57.393 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 65152
2025-02-12 04:03:57.393 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:03:58.397 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65152/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:58.400 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:03:58.401 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:03:58.401 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65152/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:58.403 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.112.159/tcp/65153/p2p/16Uiu2HAmPUro7yJ4JybmDgk5MQMPJvrMqGYe8Q7yb9DuEnuxjFyJ","/ip4/172.18.112.159/tcp/65154/ws/p2p/16Uiu2HAmPUro7yJ4JybmDgk5MQMPJvrMqGYe8Q7yb9DuEnuxjFyJ"],"enrUri":"enr:-L24QNMaKbG6crI6fcMf4PF9ZUpsI5cdzV9MTwH1KZa16lg_XpTB4fhRlu1BKq0-58ij_MrIvWju4_3HsbDKWzDqezUCgmlkgnY0gmlwhKwScJ-KbXVsdGlhZGRyc5YACASsEnCfBv6BAAoErBJwnwb-gt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDoNg0v2CAN2MVB61kQZuqq4tmKMaq7K5xbKxtfFFHn_mDdGNwgv6Bg3VkcIL-g4V3YWt1MgM"}'
2025-02-12 04:03:58.403 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:03:58.403 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65152/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.138.249/tcp/19971/p2p/16Uiu2HAkwvt1GFNEK9dGj2X44j3iqHPrBcapLpc3jCyDyLSRY3Pk"]'
2025-02-12 04:03:58.406 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:58.406 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19970/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:03:58.408 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:58.409 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65152/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:03:58.411 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:58.412 DEBUG [tests.store.test_api_flags] Trying to publish msg with content topic /myapp/1/latest/protoo
2025-02-12 04:03:58.412 DEBUG [src.steps.store] Relaying message
2025-02-12 04:03:58.412 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19970/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/protoo", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:03:58.418 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:58.419 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:03:58.619 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65152/store/v3/messages?includeData=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fprotoo&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:58.622 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x3e333f18de7763a141b42e7cf2876be5b0f0ee39c646b35b44ae362f1d149d64","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/protoo","version":0,"timestamp":1739333038412475648,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
2025-02-12 04:03:58.622 DEBUG [tests.store.test_api_flags] stored content topic is /myapp/1/latest/protoo
2025-02-12 04:03:58.624 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:03:58.625 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:03:58.625 DEBUG [src.node.waku_node] Stopping container with id c4794aee97f5
2025-02-12 04:03:59.797 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:03:59.799 DEBUG [src.node.waku_node] Stopping container with id af385e3b5f98
2025-02-12 04:04:00.627 ERROR [src.node.docker_mananger] Max retries reached for container c4794aee97f5. Exiting log stream.
2025-02-12 04:04:01.268 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:01.269 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:04:01.278 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:04:01.283 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
