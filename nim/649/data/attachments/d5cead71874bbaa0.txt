2025-02-12 04:07:36.873 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:07:36.873 DEBUG [tests.conftest] Running test: test_light_push_with_valid_timestamps with id: 2025-02-12_04-07-36__8efcb6d5-b1b9-445b-94e6-a5b2ffc9e115
2025-02-12 04:07:36.874 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:07:36.874 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-12 04:07:36.881 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:07:36.881 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-12_04-07-36__8efcb6d5-b1b9-445b-94e6-a5b2ffc9e115__wakuorg_nwaku:latest.log
2025-02-12 04:07:36.881 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:07:36.881 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:07:36.883 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:07:36.883 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.85.111
2025-02-12 04:07:36.883 DEBUG [src.node.docker_mananger] Generated ports ['40615', '40616', '40617', '40618', '40619']
2025-02-12 04:07:36.883 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:07:36.883 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:07:36.883 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:07:36.884 DEBUG [src.node.docker_mananger] docker run -i -t -p 40615:40615 -p 40616:40616 -p 40617:40617 -p 40618:40618 -p 40619:40619 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40617 --rest-port=40615 --tcp-port=40616 --discv5-udp-port=40618 --rest-address=0.0.0.0 --nat=extip:172.18.85.111 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2c73e4e6cf7d1d2a99df1b8bb8afd5ecefd090258e59e04ddcbe2cfefcd312dc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40619 --metrics-logging=true --lightpush=true --relay=true
2025-02-12 04:07:37.129 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.85.111 waku 0d4fed3cd5a93704fda14c9880318e7f18d4afc8a5d52e673365e836373c01ac
2025-02-12 04:07:37.177 DEBUG [src.node.docker_mananger] Container started with ID 0d4fed3cd5a9. Setting up logs at ./log/docker/receiving_node1_2025-02-12_04-07-36__8efcb6d5-b1b9-445b-94e6-a5b2ffc9e115__wakuorg_nwaku:latest.log
2025-02-12 04:07:37.178 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40615
2025-02-12 04:07:37.178 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:07:37.681 ERROR [src.node.docker_mananger] Max retries reached for container c84ce8f93cf8. Exiting log stream.
2025-02-12 04:07:38.178 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40615/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:38.181 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:07:38.182 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:07:38.182 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40615/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:38.184 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.85.111/tcp/40616/p2p/16Uiu2HAm6o2emrw21CtNBphT3ngQXcZkSstQmoo7EtSdN3r3wQwN","/ip4/172.18.85.111/tcp/40617/ws/p2p/16Uiu2HAm6o2emrw21CtNBphT3ngQXcZkSstQmoo7EtSdN3r3wQwN"],"enrUri":"enr:-L24QHZCFbT38yvbd13yOGSIZI96CSnmLsqqURpFNE2qQmvmL59BXkmKQwxKechzj3kYQetOovGCPRqCqONpTXzbxF4CgmlkgnY0gmlwhKwSVW-KbXVsdGlhZGRyc5YACASsElVvBp6oAAoErBJVbwaeqd0DgnJzhQADAQAAiXNlY3AyNTZrMaECqOkgjsB-doHRcAyKBPlH4h9fN8Fo2jpUKNFinrHPx72DdGNwgp6og3VkcIKeqoV3YWt1Mgk"}'
2025-02-12 04:07:38.184 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:07:38.191 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:07:38.192 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-12_04-07-36__8efcb6d5-b1b9-445b-94e6-a5b2ffc9e115__wakuorg_nwaku:latest.log
2025-02-12 04:07:38.192 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:07:38.192 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:07:38.193 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:07:38.193 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.183.208
2025-02-12 04:07:38.194 DEBUG [src.node.docker_mananger] Generated ports ['44764', '44765', '44766', '44767', '44768']
2025-02-12 04:07:38.194 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:07:38.194 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:07:38.194 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:07:38.194 DEBUG [src.node.docker_mananger] docker run -i -t -p 44764:44764 -p 44765:44765 -p 44766:44766 -p 44767:44767 -p 44768:44768 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44766 --rest-port=44764 --tcp-port=44765 --discv5-udp-port=44767 --rest-address=0.0.0.0 --nat=extip:172.18.183.208 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ab8ac3458acebe1bb4c81ca8d6488ec01f91a8baea1ef9a1fde9e2dd0beaec7b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44768 --metrics-logging=true --lightpush=false --relay=true
2025-02-12 04:07:38.432 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.183.208 waku 0b86fa5458ecb48c3bf7ab03736f49ba7e3f8cae8caf06fcc2533a25058242d1
2025-02-12 04:07:38.480 DEBUG [src.node.docker_mananger] Container started with ID 0b86fa5458ec. Setting up logs at ./log/docker/receiving_node2_2025-02-12_04-07-36__8efcb6d5-b1b9-445b-94e6-a5b2ffc9e115__wakuorg_nwaku:latest.log
2025-02-12 04:07:38.481 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44764
2025-02-12 04:07:38.481 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:07:39.482 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44764/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:39.485 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:07:39.485 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:07:39.485 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44764/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:39.488 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.183.208/tcp/44765/p2p/16Uiu2HAkv4Xc8BRvaPopwHovKeR6B66feXYqvY4qsXErhW2snejy","/ip4/172.18.183.208/tcp/44766/ws/p2p/16Uiu2HAkv4Xc8BRvaPopwHovKeR6B66feXYqvY4qsXErhW2snejy"],"enrUri":"enr:-L24QL0S3OrswVOCqhpPdS-lgQFzG24fPI-ihHpMOuar-90THErFaCy2BXhOq2aj_Ey4w7pHsPAjay4lQuknJuzjsJECgmlkgnY0gmlwhKwSt9CKbXVsdGlhZGRyc5YACASsErfQBq7dAAoErBK30Aau3t0DgnJzhQADAQAAiXNlY3AyNTZrMaECCXEFmYdqRLPuaAFSAzs-lkSJyPIRIZ_4ZoegTqHED_iDdGNwgq7dg3VkcIKu34V3YWt1MgE"}'
2025-02-12 04:07:39.488 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:07:39.488 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44764/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.85.111/tcp/40616/p2p/16Uiu2HAm6o2emrw21CtNBphT3ngQXcZkSstQmoo7EtSdN3r3wQwN"]'
2025-02-12 04:07:39.530 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:07:39.542 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:07:39.542 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-12_04-07-36__8efcb6d5-b1b9-445b-94e6-a5b2ffc9e115__wakuorg_nwaku:latest.log
2025-02-12 04:07:39.542 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:07:39.542 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:07:39.544 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:07:39.544 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.126.109
2025-02-12 04:07:39.544 DEBUG [src.node.docker_mananger] Generated ports ['48621', '48622', '48623', '48624', '48625']
2025-02-12 04:07:39.544 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:07:39.544 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:07:39.545 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:07:39.545 DEBUG [src.node.docker_mananger] docker run -i -t -p 48621:48621 -p 48622:48622 -p 48623:48623 -p 48624:48624 -p 48625:48625 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48623 --rest-port=48621 --tcp-port=48622 --discv5-udp-port=48624 --rest-address=0.0.0.0 --nat=extip:172.18.126.109 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9ad0bc18c11eac63fefbaab126c79919694ae3afc6d1f53190db0ced98f5c54f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48625 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QHZCFbT38yvbd13yOGSIZI96CSnmLsqqURpFNE2qQmvmL59BXkmKQwxKechzj3kYQetOovGCPRqCqONpTXzbxF4CgmlkgnY0gmlwhKwSVW-KbXVsdGlhZGRyc5YACASsElVvBp6oAAoErBJVbwaeqd0DgnJzhQADAQAAiXNlY3AyNTZrMaECqOkgjsB-doHRcAyKBPlH4h9fN8Fo2jpUKNFinrHPx72DdGNwgp6og3VkcIKeqoV3YWt1Mgk --lightpushnode=/ip4/172.18.85.111/tcp/40616/p2p/16Uiu2HAm6o2emrw21CtNBphT3ngQXcZkSstQmoo7EtSdN3r3wQwN --lightpush=true --relay=false
2025-02-12 04:07:39.782 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.126.109 waku e65e5daab632097ac8ba11d9777a2ddc21f6a9a0afce4de266756c9c02b53f66
2025-02-12 04:07:39.831 DEBUG [src.node.docker_mananger] Container started with ID e65e5daab632. Setting up logs at ./log/docker/lightpush_node1_2025-02-12_04-07-36__8efcb6d5-b1b9-445b-94e6-a5b2ffc9e115__wakuorg_nwaku:latest.log
2025-02-12 04:07:39.831 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 48621
2025-02-12 04:07:39.831 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:07:40.832 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48621/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:40.835 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:07:40.835 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:07:40.836 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48621/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:40.838 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.126.109/tcp/48622/p2p/16Uiu2HAmTx5uN1gKg1DkVAK53K8JZJjuqYJTaTccHNasDMiiLC3Q","/ip4/172.18.126.109/tcp/48623/ws/p2p/16Uiu2HAmTx5uN1gKg1DkVAK53K8JZJjuqYJTaTccHNasDMiiLC3Q"],"enrUri":"enr:-L24QIYwbiuRuCDAvtL5OOWKbXK8AIXITGkaeT4gv_UJle4NGVHacd-qpm4DYxIBl8Z-y97WaK87ZORfi03cyonpbWUCgmlkgnY0gmlwhKwSfm2KbXVsdGlhZGRyc5YACASsEn5tBr3uAAoErBJ-bQa9790DgnJzhQADAQAAiXNlY3AyNTZrMaED40B02K5ptGJNx9XWYz8LSeI1wl0FyZF2D-jTXhIqmz-DdGNwgr3ug3VkcIK98IV3YWt1Mgg"}'
2025-02-12 04:07:40.838 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:07:40.838 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48621/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.85.111/tcp/40616/p2p/16Uiu2HAm6o2emrw21CtNBphT3ngQXcZkSstQmoo7EtSdN3r3wQwN"]'
2025-02-12 04:07:40.874 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:07:40.874 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48621/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.183.208/tcp/44765/p2p/16Uiu2HAkv4Xc8BRvaPopwHovKeR6B66feXYqvY4qsXErhW2snejy"]'
2025-02-12 04:07:40.904 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:07:40.904 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40615/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:07:40.909 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:07:40.910 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44764/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:07:40.921 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:07:40.926 DEBUG [tests.light_push.test_publish] Running test with timestamp Now
2025-02-12 04:07:40.927 DEBUG [src.steps.light_push] Lightpushing message
2025-02-12 04:07:40.927 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48621/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739332942048065280}}'
2025-02-12 04:07:40.938 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:07:40.939 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-12 04:07:41.039 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-12 04:07:41.039 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40615/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:41.042 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739332942048065280,"ephemeral":false}]'
2025-02-12 04:07:41.044 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-12 04:07:41.044 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44764/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:41.046 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739332942048065280,"ephemeral":false}]'
2025-02-12 04:07:41.048 DEBUG [tests.light_push.test_publish] Running test with timestamp Far future
2025-02-12 04:07:41.048 DEBUG [src.steps.light_push] Lightpushing message
2025-02-12 04:07:41.048 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48621/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 2054692942048051200}}'
2025-02-12 04:07:41.059 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:07:41.061 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-12 04:07:41.161 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-12 04:07:41.161 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40615/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:41.164 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":2054692942048051200,"ephemeral":false}]'
2025-02-12 04:07:41.166 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-12 04:07:41.166 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44764/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:41.168 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":2054692942048051200,"ephemeral":false}]'
2025-02-12 04:07:41.170 DEBUG [tests.light_push.test_publish] Running test with timestamp Recent past
2025-02-12 04:07:41.170 DEBUG [src.steps.light_push] Lightpushing message
2025-02-12 04:07:41.170 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48621/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739329342048051200}}'
2025-02-12 04:07:41.181 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:07:41.181 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-12 04:07:41.282 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-12 04:07:41.282 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40615/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:41.285 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739329342048051200,"ephemeral":false}]'
2025-02-12 04:07:41.287 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-12 04:07:41.287 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44764/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:41.289 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739329342048051200,"ephemeral":false}]'
2025-02-12 04:07:41.291 DEBUG [tests.light_push.test_publish] Running test with timestamp Near future
2025-02-12 04:07:41.291 DEBUG [src.steps.light_push] Lightpushing message
2025-02-12 04:07:41.291 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48621/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739336542048051200}}'
2025-02-12 04:07:41.300 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:07:41.301 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-12 04:07:41.401 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-12 04:07:41.402 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40615/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:41.404 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739336542048051200,"ephemeral":false}]'
2025-02-12 04:07:41.406 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-12 04:07:41.406 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44764/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:41.408 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739336542048051200,"ephemeral":false}]'
2025-02-12 04:07:41.410 DEBUG [tests.light_push.test_publish] Running test with timestamp Positive number
2025-02-12 04:07:41.410 DEBUG [src.steps.light_push] Lightpushing message
2025-02-12 04:07:41.410 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48621/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1}}'
2025-02-12 04:07:41.420 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:07:41.421 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-12 04:07:41.521 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-12 04:07:41.521 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40615/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:41.524 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1,"ephemeral":false}]'
2025-02-12 04:07:41.526 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-12 04:07:41.526 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44764/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:41.528 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1,"ephemeral":false}]'
2025-02-12 04:07:41.530 DEBUG [tests.light_push.test_publish] Running test with timestamp Negative number
2025-02-12 04:07:41.530 DEBUG [src.steps.light_push] Lightpushing message
2025-02-12 04:07:41.530 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48621/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": -1}}'
2025-02-12 04:07:41.541 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:07:41.541 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-12 04:07:41.642 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-12 04:07:41.642 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40615/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:41.645 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":-1,"ephemeral":false}]'
2025-02-12 04:07:41.647 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-12 04:07:41.647 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44764/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:41.649 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":-1,"ephemeral":false}]'
2025-02-12 04:07:41.651 DEBUG [tests.light_push.test_publish] Running test with timestamp DST change
2025-02-12 04:07:41.651 DEBUG [src.steps.light_push] Lightpushing message
2025-02-12 04:07:41.651 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48621/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1583632800000000000}}'
2025-02-12 04:07:41.661 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:07:41.661 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-12 04:07:41.762 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-12 04:07:41.762 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40615/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:41.765 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1583632800000000000,"ephemeral":false}]'
2025-02-12 04:07:41.767 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-12 04:07:41.767 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44764/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:07:41.769 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1583632800000000000,"ephemeral":false}]'
2025-02-12 04:07:41.772 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:07:41.773 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:07:41.773 DEBUG [src.node.waku_node] Stopping container with id 0d4fed3cd5a9
2025-02-12 04:07:42.725 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:07:42.726 DEBUG [src.node.waku_node] Stopping container with id 0b86fa5458ec
2025-02-12 04:07:43.539 ERROR [src.node.docker_mananger] Max retries reached for container 0d4fed3cd5a9. Exiting log stream.
2025-02-12 04:07:44.266 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:07:44.267 DEBUG [src.node.waku_node] Stopping container with id e65e5daab632
2025-02-12 04:07:45.080 ERROR [src.node.docker_mananger] Max retries reached for container 0b86fa5458ec. Exiting log stream.
2025-02-12 04:07:45.788 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:07:45.789 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:07:45.798 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:07:45.807 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:07:45.815 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
