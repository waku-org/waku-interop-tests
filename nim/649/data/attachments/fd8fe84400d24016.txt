2025-02-12 04:05:48.784 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:05:48.785 DEBUG [tests.conftest] Running test: test_passing_cursor_of_non_existing_message_from_the_store with id: 2025-02-12_04-05-48__a8cf4b53-c0b7-4ceb-9c16-aa2f3757622a
2025-02-12 04:05:48.785 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:05:48.786 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-12 04:05:48.786 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-12 04:05:48.795 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:05:48.796 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-12_04-05-48__a8cf4b53-c0b7-4ceb-9c16-aa2f3757622a__wakuorg_nwaku:latest.log
2025-02-12 04:05:48.796 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:05:48.796 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:05:48.799 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:05:48.799 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.150.127
2025-02-12 04:05:48.799 DEBUG [src.node.docker_mananger] Generated ports ['14836', '14837', '14838', '14839', '14840']
2025-02-12 04:05:48.800 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:05:48.800 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:05:48.800 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:05:48.800 DEBUG [src.node.docker_mananger] docker run -i -t -p 14836:14836 -p 14837:14837 -p 14838:14838 -p 14839:14839 -p 14840:14840 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14838 --rest-port=14836 --tcp-port=14837 --discv5-udp-port=14839 --rest-address=0.0.0.0 --nat=extip:172.18.150.127 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=68c952f6e76cfce2cd5477e54dadcb85d0fe0f6ae5aedabcef2747aea75aad8e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14840 --metrics-logging=true --store=true --relay=true
2025-02-12 04:05:49.042 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.150.127 waku 81fd8fb7bf9566573ac4cf47d7b28cbe83dde07a0b47bc03698f56af0bba468b
2025-02-12 04:05:49.093 DEBUG [src.node.docker_mananger] Container started with ID 81fd8fb7bf95. Setting up logs at ./log/docker/publishing_node1_2025-02-12_04-05-48__a8cf4b53-c0b7-4ceb-9c16-aa2f3757622a__wakuorg_nwaku:latest.log
2025-02-12 04:05:49.095 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14836
2025-02-12 04:05:49.096 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:05:49.636 ERROR [src.node.docker_mananger] Max retries reached for container 6b74681bb710. Exiting log stream.
2025-02-12 04:05:50.097 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14836/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:50.100 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:05:50.100 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:05:50.100 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14836/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:50.103 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.150.127/tcp/14837/p2p/16Uiu2HAm56ARmC12FbAgrYQHtmgGZC4mtXDAnaYyCrWYxitUWzHF","/ip4/172.18.150.127/tcp/14838/ws/p2p/16Uiu2HAm56ARmC12FbAgrYQHtmgGZC4mtXDAnaYyCrWYxitUWzHF"],"enrUri":"enr:-L24QCD3pe-kEbnL-m2jEYDtAhnm8-QBkJGfVc-1Fb9jMGLXVcFo-cdv6sZycQ7hpFSosQtngIuuwnWBhwvzsh8D_WwCgmlkgnY0gmlwhKwSln-KbXVsdGlhZGRyc5YACASsEpZ_Bjn1AAoErBKWfwY59t0DgnJzhQADAQAAiXNlY3AyNTZrMaECj5VrRtMwVOQB11MoWpgsSnRlEmoG53Z5zsGBuhJuBYqDdGNwgjn1g3VkcII594V3YWt1MgM"}'
2025-02-12 04:05:50.103 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:05:50.110 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:05:50.110 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-12_04-05-48__a8cf4b53-c0b7-4ceb-9c16-aa2f3757622a__wakuorg_nwaku:latest.log
2025-02-12 04:05:50.110 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:05:50.110 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:05:50.112 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:05:50.112 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.7.213
2025-02-12 04:05:50.112 DEBUG [src.node.docker_mananger] Generated ports ['9286', '9287', '9288', '9289', '9290']
2025-02-12 04:05:50.112 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:05:50.113 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:05:50.113 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:05:50.113 DEBUG [src.node.docker_mananger] docker run -i -t -p 9286:9286 -p 9287:9287 -p 9288:9288 -p 9289:9289 -p 9290:9290 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9288 --rest-port=9286 --tcp-port=9287 --discv5-udp-port=9289 --rest-address=0.0.0.0 --nat=extip:172.18.7.213 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9ab7279d02fd91dbb17d2d5ec2bcf709bbc49f8bccbc93ad5774104e8edabc9f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9290 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QCD3pe-kEbnL-m2jEYDtAhnm8-QBkJGfVc-1Fb9jMGLXVcFo-cdv6sZycQ7hpFSosQtngIuuwnWBhwvzsh8D_WwCgmlkgnY0gmlwhKwSln-KbXVsdGlhZGRyc5YACASsEpZ_Bjn1AAoErBKWfwY59t0DgnJzhQADAQAAiXNlY3AyNTZrMaECj5VrRtMwVOQB11MoWpgsSnRlEmoG53Z5zsGBuhJuBYqDdGNwgjn1g3VkcII594V3YWt1MgM --storenode=/ip4/172.18.150.127/tcp/14837/p2p/16Uiu2HAm56ARmC12FbAgrYQHtmgGZC4mtXDAnaYyCrWYxitUWzHF --store=true --relay=true
2025-02-12 04:05:50.361 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.7.213 waku b7ebc0dee49e79b6949c7e1582162e567030b1641dcc39a0234d2509608472af
2025-02-12 04:05:50.412 DEBUG [src.node.docker_mananger] Container started with ID b7ebc0dee49e. Setting up logs at ./log/docker/store_node1_2025-02-12_04-05-48__a8cf4b53-c0b7-4ceb-9c16-aa2f3757622a__wakuorg_nwaku:latest.log
2025-02-12 04:05:50.414 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9286
2025-02-12 04:05:50.414 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:05:51.414 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9286/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:51.417 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:05:51.417 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:05:51.418 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9286/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:51.420 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.7.213/tcp/9287/p2p/16Uiu2HAmHb9bExLJZhH1TWzofgJBvAE4tR2j635nwoEgPFh3UVVG","/ip4/172.18.7.213/tcp/9288/ws/p2p/16Uiu2HAmHb9bExLJZhH1TWzofgJBvAE4tR2j635nwoEgPFh3UVVG"],"enrUri":"enr:-L24QI-aP4c0ZCScImFh1BsDPuYWz4SZslsg3husqZjt8zQjPmTjWtR7do9Jk7v16WuRSo7wKwYGvtwZBb0BtKbntmoCgmlkgnY0gmlwhKwSB9WKbXVsdGlhZGRyc5YACASsEgfVBiRHAAoErBIH1QYkSN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDSU6PST69JPVrDOt9MGTwaxMnccB__OlGzAcCitBEQy-DdGNwgiRHg3VkcIIkSYV3YWt1MgM"}'
2025-02-12 04:05:51.420 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:05:51.421 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9286/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.150.127/tcp/14837/p2p/16Uiu2HAm56ARmC12FbAgrYQHtmgGZC4mtXDAnaYyCrWYxitUWzHF"]'
2025-02-12 04:05:51.423 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:51.424 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14836/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:05:51.426 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:51.426 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9286/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:05:51.428 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:51.429 DEBUG [src.steps.store] Relaying message
2025-02-12 04:05:51.429 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14836/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:05:51.435 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:51.436 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:05:51.637 DEBUG [src.steps.store] Relaying message
2025-02-12 04:05:51.638 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14836/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:05:51.645 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:51.645 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:05:51.846 DEBUG [src.steps.store] Relaying message
2025-02-12 04:05:51.846 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14836/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:05:51.853 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:51.853 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:05:52.054 DEBUG [src.steps.store] Relaying message
2025-02-12 04:05:52.054 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14836/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:05:52.061 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:52.061 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:05:52.262 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14836/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0x6a4b32c91e62995aa80bc2f5db044383c5fc1b2c43640398cd029b8e4780f285&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:52.265 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:14836/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0x6a4b32c91e62995aa80bc2f5db044383c5fc1b2c43640398cd029b8e4780f285&pageSize=100&ascending=true. Response content: b'error in handleSelfStoreRequest: BAD_RESPONSE: archive error: DIRVER_ERROR: cursor not found'
2025-02-12 04:05:52.266 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9286/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0x6a4b32c91e62995aa80bc2f5db044383c5fc1b2c43640398cd029b8e4780f285&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:52.269 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:9286/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0x6a4b32c91e62995aa80bc2f5db044383c5fc1b2c43640398cd029b8e4780f285&pageSize=100&ascending=true. Response content: b'error in handleSelfStoreRequest: BAD_RESPONSE: archive error: DIRVER_ERROR: cursor not found'
2025-02-12 04:05:52.271 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:05:52.273 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:05:52.273 DEBUG [src.node.waku_node] Stopping container with id 81fd8fb7bf95
2025-02-12 04:05:52.961 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:05:52.961 DEBUG [src.node.waku_node] Stopping container with id b7ebc0dee49e
2025-02-12 04:05:53.775 ERROR [src.node.docker_mananger] Max retries reached for container 81fd8fb7bf95. Exiting log stream.
2025-02-12 04:05:54.473 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:05:54.474 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:05:54.479 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:05:54.486 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
