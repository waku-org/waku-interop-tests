2025-02-12 04:05:35.744 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:05:35.745 DEBUG [tests.conftest] Running test: test_content_topic_not_in_docker_flags with id: 2025-02-12_04-05-35__24dcc7d2-1dca-4640-8cc4-36a09d7a9c0f
2025-02-12 04:05:35.745 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:05:35.745 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-12 04:05:35.745 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-12 04:05:35.752 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:05:35.752 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-12_04-05-35__24dcc7d2-1dca-4640-8cc4-36a09d7a9c0f__wakuorg_nwaku:latest.log
2025-02-12 04:05:35.752 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:05:35.752 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:05:35.754 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:05:35.754 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.41.212
2025-02-12 04:05:35.754 DEBUG [src.node.docker_mananger] Generated ports ['45282', '45283', '45284', '45285', '45286']
2025-02-12 04:05:35.754 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:05:35.754 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:05:35.754 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:05:35.754 DEBUG [src.node.docker_mananger] docker run -i -t -p 45282:45282 -p 45283:45283 -p 45284:45284 -p 45285:45285 -p 45286:45286 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45284 --rest-port=45282 --tcp-port=45283 --discv5-udp-port=45285 --rest-address=0.0.0.0 --nat=extip:172.18.41.212 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=dba240e7e29b7e0a18c55c9ae98d7a38cf671ed523eefc1dbb34afd1cde6547e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45286 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
2025-02-12 04:05:35.981 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.41.212 waku c181fffce47a133652b32e147264529aceb7bf42f5712b92ef338f7c91d93116
2025-02-12 04:05:36.029 DEBUG [src.node.docker_mananger] Container started with ID c181fffce47a. Setting up logs at ./log/docker/node1_2025-02-12_04-05-35__24dcc7d2-1dca-4640-8cc4-36a09d7a9c0f__wakuorg_nwaku:latest.log
2025-02-12 04:05:36.031 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45282
2025-02-12 04:05:36.031 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:05:36.550 ERROR [src.node.docker_mananger] Max retries reached for container 3c79ec7ad47a. Exiting log stream.
2025-02-12 04:05:37.031 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45282/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:37.034 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:05:37.034 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:05:37.034 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45282/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:37.037 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.41.212/tcp/45283/p2p/16Uiu2HAmQMyHkUVTsfeSwJ1nivWjqdQrQ2xPs45qxm1Q8dSyNmqd","/ip4/172.18.41.212/tcp/45284/ws/p2p/16Uiu2HAmQMyHkUVTsfeSwJ1nivWjqdQrQ2xPs45qxm1Q8dSyNmqd"],"enrUri":"enr:-L24QJiB6XuS0DUsf9WNDLc12ZCuUwMbUFkyTkEo4-KTFp4nfeIc5w_c5y8LpeEb294-hlNJdJDMT9N_hz57tcLKBFgCgmlkgnY0gmlwhKwSKdSKbXVsdGlhZGRyc5YACASsEinUBrDjAAoErBIp1Aaw5N0DgnJzhQACAQAAiXNlY3AyNTZrMaEDrfArbpPDr8ozC4AjBpa5hmQrInRZ0RosrdNR48fAdByDdGNwgrDjg3VkcIKw5YV3YWt1MgU"}'
2025-02-12 04:05:37.037 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:05:37.042 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:05:37.043 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-12_04-05-35__24dcc7d2-1dca-4640-8cc4-36a09d7a9c0f__wakuorg_nwaku:latest.log
2025-02-12 04:05:37.043 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:05:37.043 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:05:37.044 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:05:37.044 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.119.239
2025-02-12 04:05:37.044 DEBUG [src.node.docker_mananger] Generated ports ['17666', '17667', '17668', '17669', '17670']
2025-02-12 04:05:37.044 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:05:37.045 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:05:37.045 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:05:37.045 DEBUG [src.node.docker_mananger] docker run -i -t -p 17666:17666 -p 17667:17667 -p 17668:17668 -p 17669:17669 -p 17670:17670 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17668 --rest-port=17666 --tcp-port=17667 --discv5-udp-port=17669 --rest-address=0.0.0.0 --nat=extip:172.18.119.239 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=34d589d92b0cafaf0ffdf48ed0dfc305db9a3a557dba3fa687f7bbe51f2ae32f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17670 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QJiB6XuS0DUsf9WNDLc12ZCuUwMbUFkyTkEo4-KTFp4nfeIc5w_c5y8LpeEb294-hlNJdJDMT9N_hz57tcLKBFgCgmlkgnY0gmlwhKwSKdSKbXVsdGlhZGRyc5YACASsEinUBrDjAAoErBIp1Aaw5N0DgnJzhQACAQAAiXNlY3AyNTZrMaEDrfArbpPDr8ozC4AjBpa5hmQrInRZ0RosrdNR48fAdByDdGNwgrDjg3VkcIKw5YV3YWt1MgU --pubsub-topic=/waku/2/rs/2/0
2025-02-12 04:05:37.278 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.119.239 waku ee76f51fa39dc4aa137343f20a4141ef55288a75dc93e85fe73e81ad47585b8b
2025-02-12 04:05:37.326 DEBUG [src.node.docker_mananger] Container started with ID ee76f51fa39d. Setting up logs at ./log/docker/node2_2025-02-12_04-05-35__24dcc7d2-1dca-4640-8cc4-36a09d7a9c0f__wakuorg_nwaku:latest.log
2025-02-12 04:05:37.326 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17666
2025-02-12 04:05:37.327 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:05:38.327 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17666/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:38.337 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:05:38.338 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:05:38.338 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17666/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:38.343 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.119.239/tcp/17667/p2p/16Uiu2HAm58xzEkd7Eca7QrK3F2g2cp4y5HzGyKXY9zGmsCVNMywM","/ip4/172.18.119.239/tcp/17668/ws/p2p/16Uiu2HAm58xzEkd7Eca7QrK3F2g2cp4y5HzGyKXY9zGmsCVNMywM"],"enrUri":"enr:-L24QBfRV5hM05dXEi8GtbNWV_72YNlWt0HquI6OH0sA4ZsjM1axTeueN2r9zYCmOlBtAxTr42mfKRiC1PunJB_7U9cCgmlkgnY0gmlwhKwSd--KbXVsdGlhZGRyc5YACASsEnfvBkUDAAoErBJ37wZFBN0DgnJzhQACAQAAiXNlY3AyNTZrMaECkE054-19QrcLs1tCXHT0RVQU1SSFq45HECjys69gPuCDdGNwgkUDg3VkcIJFBYV3YWt1MgE"}'
2025-02-12 04:05:38.344 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:05:38.344 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17666/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.41.212/tcp/45283/p2p/16Uiu2HAmQMyHkUVTsfeSwJ1nivWjqdQrQ2xPs45qxm1Q8dSyNmqd"]'
2025-02-12 04:05:38.347 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:38.348 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45282/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2025-02-12 04:05:38.351 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:38.352 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17666/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2025-02-12 04:05:38.358 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:38.359 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45282/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:05:38.364 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:38.365 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-12 04:05:38.465 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-12 04:05:38.466 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45282/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:38.468 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739333138359107584,"ephemeral":false}]'
2025-02-12 04:05:38.469 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-12 04:05:38.470 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17666/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:38.472 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739333138359107584,"ephemeral":false}]'
2025-02-12 04:05:38.474 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:05:38.475 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:05:38.476 DEBUG [src.node.waku_node] Stopping container with id c181fffce47a
2025-02-12 04:05:39.517 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:05:39.518 DEBUG [src.node.waku_node] Stopping container with id ee76f51fa39d
2025-02-12 04:05:40.329 ERROR [src.node.docker_mananger] Max retries reached for container c181fffce47a. Exiting log stream.
2025-02-12 04:05:41.027 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:05:41.027 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:05:41.033 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:05:41.039 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
