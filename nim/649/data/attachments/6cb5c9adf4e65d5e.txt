2025-02-12 04:10:08.576 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:10:08.576 DEBUG [tests.conftest] Running test: test_store_with_not_valid_content_topic with id: 2025-02-12_04-10-08__5676e793-11d8-44d8-be1a-106eba0c1691
2025-02-12 04:10:08.576 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:10:08.577 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-12 04:10:08.577 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-12 04:10:08.585 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:10:08.585 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-12_04-10-08__5676e793-11d8-44d8-be1a-106eba0c1691__wakuorg_nwaku:latest.log
2025-02-12 04:10:08.585 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:10:08.585 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:10:08.587 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:10:08.587 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.157.51
2025-02-12 04:10:08.587 DEBUG [src.node.docker_mananger] Generated ports ['8390', '8391', '8392', '8393', '8394']
2025-02-12 04:10:08.587 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:10:08.587 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:10:08.587 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:10:08.587 DEBUG [src.node.docker_mananger] docker run -i -t -p 8390:8390 -p 8391:8391 -p 8392:8392 -p 8393:8393 -p 8394:8394 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8392 --rest-port=8390 --tcp-port=8391 --discv5-udp-port=8393 --rest-address=0.0.0.0 --nat=extip:172.18.157.51 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a6302fbdd1ef5a5a0d3cfade5a661bbc1de0faf84f33e8d01564c6d69bbaa99b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8394 --metrics-logging=true --store=true --relay=true
2025-02-12 04:10:08.837 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.157.51 waku 07b99dfe0f3242de31c93e9eb727c57b9773e5a7b233f80940f754460bd37c77
2025-02-12 04:10:08.891 DEBUG [src.node.docker_mananger] Container started with ID 07b99dfe0f32. Setting up logs at ./log/docker/publishing_node1_2025-02-12_04-10-08__5676e793-11d8-44d8-be1a-106eba0c1691__wakuorg_nwaku:latest.log
2025-02-12 04:10:08.893 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 8390
2025-02-12 04:10:08.893 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:10:09.376 ERROR [src.node.docker_mananger] Max retries reached for container 316e654ea225. Exiting log stream.
2025-02-12 04:10:09.895 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8390/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:10:09.898 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:10:09.899 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:10:09.899 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8390/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:10:09.901 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.157.51/tcp/8391/p2p/16Uiu2HAmT94P4VrRL7sC3uZ8rKgZhWpxz2tdD6cWx9TXVR7L8eEf","/ip4/172.18.157.51/tcp/8392/ws/p2p/16Uiu2HAmT94P4VrRL7sC3uZ8rKgZhWpxz2tdD6cWx9TXVR7L8eEf"],"enrUri":"enr:-L24QNihrUCbTPEAnC5uaievNr_76nqpBZiodbU2Oc0YdcMHb7TXK-P97z8w6CUqXoiW_D5ZVbFwEoKcJzo9KNTFsQUCgmlkgnY0gmlwhKwSnTOKbXVsdGlhZGRyc5YACASsEp0zBiDHAAoErBKdMwYgyN0DgnJzhQADAQAAiXNlY3AyNTZrMaED1zRv3RvmxmiD00grNE_a5uY66d8BPH5AxFj7lKb4AFSDdGNwgiDHg3VkcIIgyYV3YWt1MgM"}'
2025-02-12 04:10:09.902 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:10:09.909 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:10:09.909 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-12_04-10-08__5676e793-11d8-44d8-be1a-106eba0c1691__wakuorg_nwaku:latest.log
2025-02-12 04:10:09.909 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:10:09.909 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:10:09.911 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:10:09.911 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.243.173
2025-02-12 04:10:09.911 DEBUG [src.node.docker_mananger] Generated ports ['9003', '9004', '9005', '9006', '9007']
2025-02-12 04:10:09.911 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:10:09.911 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:10:09.911 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:10:09.911 DEBUG [src.node.docker_mananger] docker run -i -t -p 9003:9003 -p 9004:9004 -p 9005:9005 -p 9006:9006 -p 9007:9007 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9005 --rest-port=9003 --tcp-port=9004 --discv5-udp-port=9006 --rest-address=0.0.0.0 --nat=extip:172.18.243.173 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3594cabffddadebf48045dcb191f3ba62a871405b33da08e94cac5f882f777df --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9007 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QNihrUCbTPEAnC5uaievNr_76nqpBZiodbU2Oc0YdcMHb7TXK-P97z8w6CUqXoiW_D5ZVbFwEoKcJzo9KNTFsQUCgmlkgnY0gmlwhKwSnTOKbXVsdGlhZGRyc5YACASsEp0zBiDHAAoErBKdMwYgyN0DgnJzhQADAQAAiXNlY3AyNTZrMaED1zRv3RvmxmiD00grNE_a5uY66d8BPH5AxFj7lKb4AFSDdGNwgiDHg3VkcIIgyYV3YWt1MgM --storenode=/ip4/172.18.157.51/tcp/8391/p2p/16Uiu2HAmT94P4VrRL7sC3uZ8rKgZhWpxz2tdD6cWx9TXVR7L8eEf --store=true --relay=true
2025-02-12 04:10:10.157 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.243.173 waku 016b6023f88db73b08153508c002ee9c14441fb4892a6524ed16e4f524a46402
2025-02-12 04:10:10.211 DEBUG [src.node.docker_mananger] Container started with ID 016b6023f88d. Setting up logs at ./log/docker/store_node1_2025-02-12_04-10-08__5676e793-11d8-44d8-be1a-106eba0c1691__wakuorg_nwaku:latest.log
2025-02-12 04:10:10.212 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9003
2025-02-12 04:10:10.213 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:10:11.216 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9003/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:10:11.219 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:10:11.219 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:10:11.219 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9003/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:10:11.222 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.243.173/tcp/9004/p2p/16Uiu2HAky3Ubv3zaVKnpL89RpjGRGRv7GBAXPCAchJj9jAtrUaUq","/ip4/172.18.243.173/tcp/9005/ws/p2p/16Uiu2HAky3Ubv3zaVKnpL89RpjGRGRv7GBAXPCAchJj9jAtrUaUq"],"enrUri":"enr:-L24QAT5xXHQ6BuhOE7u0eEvDg0YXSj54PaNlWfDF6zGtkyifd96LcjUcE4EjPz_FzL4JSZn5P-xZdkRLQTTrI-hHJ0CgmlkgnY0gmlwhKwS862KbXVsdGlhZGRyc5YACASsEvOtBiMsAAoErBLzrQYjLd0DgnJzhQADAQAAiXNlY3AyNTZrMaECNb8bDE7tdUvpvofxBEzCbYD97fQFFOr8tp4Vb8Bk-lqDdGNwgiMsg3VkcIIjLoV3YWt1MgM"}'
2025-02-12 04:10:11.222 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:10:11.222 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9003/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.157.51/tcp/8391/p2p/16Uiu2HAmT94P4VrRL7sC3uZ8rKgZhWpxz2tdD6cWx9TXVR7L8eEf"]'
2025-02-12 04:10:11.225 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:10:11.225 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8390/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:10:11.228 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:10:11.228 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9003/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:10:11.230 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:10:11.231 DEBUG [src.steps.store] Relaying message
2025-02-12 04:10:11.231 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8390/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:10:11.237 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:10:11.237 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:10:11.438 DEBUG [src.steps.store] Relaying message
2025-02-12 04:10:11.438 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8390/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:10:11.445 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:10:11.445 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:10:11.646 DEBUG [src.steps.store] Relaying message
2025-02-12 04:10:11.646 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8390/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:10:11.653 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:10:11.654 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:10:11.855 DEBUG [src.steps.store] Relaying message
2025-02-12 04:10:11.856 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8390/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:10:11.863 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:10:11.863 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:10:12.065 DEBUG [src.steps.store] Relaying message
2025-02-12 04:10:12.065 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8390/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:10:12.072 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:10:12.072 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:10:12.273 DEBUG [src.steps.store] Relaying message
2025-02-12 04:10:12.273 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8390/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:10:12.279 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:10:12.280 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:10:12.481 DEBUG [src.steps.store] Relaying message
2025-02-12 04:10:12.482 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8390/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:10:12.488 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:10:12.488 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:10:12.690 DEBUG [src.steps.store] Relaying message
2025-02-12 04:10:12.690 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8390/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:10:12.696 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:10:12.696 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:10:12.897 DEBUG [tests.store.test_topics] trying to find stored messages with wrong content_topic =##
2025-02-12 04:10:12.898 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8390/store/v3/messages?includeData=true&contentTopics=%23%23&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:10:12.901 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-12 04:10:12.901 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9003/store/v3/messages?includeData=true&contentTopics=%23%23&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:10:12.904 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-12 04:10:12.904 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8390/store/v3/messages?includeData=true&contentTopics=%20&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:10:12.907 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-12 04:10:12.907 DEBUG [tests.store.test_topics]  response for invalid content_topic {'requestId': '', 'statusCode': 200, 'statusDesc': 'OK', 'messages': []}
2025-02-12 04:10:12.910 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:10:12.911 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:10:12.911 DEBUG [src.node.waku_node] Stopping container with id 07b99dfe0f32
2025-02-12 04:10:13.606 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:10:13.607 DEBUG [src.node.waku_node] Stopping container with id 016b6023f88d
2025-02-12 04:10:14.420 ERROR [src.node.docker_mananger] Max retries reached for container 07b99dfe0f32. Exiting log stream.
2025-02-12 04:10:15.155 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:10:15.158 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:10:15.165 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:10:15.173 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
