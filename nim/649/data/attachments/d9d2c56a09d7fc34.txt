2025-02-12 04:02:22.620 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:02:22.621 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2025-02-12_04-02-22__ddd7f8ad-d308-42f5-9f01-0dee3bb383fe
2025-02-12 04:02:22.621 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:02:22.621 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-12 04:02:22.622 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-12 04:02:22.631 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:02:22.631 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-12_04-02-22__ddd7f8ad-d308-42f5-9f01-0dee3bb383fe__wakuorg_nwaku:latest.log
2025-02-12 04:02:22.637 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:02:22.637 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-12_04-02-22__ddd7f8ad-d308-42f5-9f01-0dee3bb383fe__wakuorg_nwaku:latest.log
2025-02-12 04:02:22.642 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:02:22.642 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-12_04-02-22__ddd7f8ad-d308-42f5-9f01-0dee3bb383fe__wakuorg_nwaku:latest.log
2025-02-12 04:02:22.643 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-12 04:02:22.643 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-12 04:02:22.644 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:02:22.644 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:02:22.708 DEBUG [src.node.docker_mananger] Network waku created
2025-02-12 04:02:22.708 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.189.169
2025-02-12 04:02:22.708 DEBUG [src.node.docker_mananger] Generated ports ['12279', '12280', '12281', '12282', '12283']
2025-02-12 04:02:22.708 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:02:22.709 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:02:22.709 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:02:22.709 DEBUG [src.node.docker_mananger] docker run -i -t -p 12279:12279 -p 12280:12280 -p 12281:12281 -p 12282:12282 -p 12283:12283 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12281 --rest-port=12279 --tcp-port=12280 --discv5-udp-port=12282 --rest-address=0.0.0.0 --nat=extip:172.18.189.169 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f8eed7beb76daebad4705f3eca7f0945efafac1a3eadca70fcddc2dedef9df1b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12283 --metrics-logging=true --relay=true
2025-02-12 04:02:24.893 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.189.169 waku da27e17a1c33754d2d66eebf685db511a694c615222989179b6f10313eed262b
2025-02-12 04:02:24.948 DEBUG [src.node.docker_mananger] Container started with ID da27e17a1c33. Setting up logs at ./log/docker/node1_2025-02-12_04-02-22__ddd7f8ad-d308-42f5-9f01-0dee3bb383fe__wakuorg_nwaku:latest.log
2025-02-12 04:02:24.948 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 12279
2025-02-12 04:02:24.949 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:02:25.949 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12279/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:02:25.952 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:02:25.952 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:02:25.953 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12279/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:02:25.955 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.189.169/tcp/12280/p2p/16Uiu2HAmGtxXpxJHYEGjGmJYtcmDbTHY5iPBcNkTpGcKMc7WJgYg","/ip4/172.18.189.169/tcp/12281/ws/p2p/16Uiu2HAmGtxXpxJHYEGjGmJYtcmDbTHY5iPBcNkTpGcKMc7WJgYg"],"enrUri":"enr:-L24QDGroeLjVhWEoePLgDT2ejbSt4b_Ovpt0Ot36OGAMX30QOYOV7H9BlKis6Hin4PqFz-ij8PChojcx4_LKv7CNxcCgmlkgnY0gmlwhKwSvamKbXVsdGlhZGRyc5YACASsEr2pBi_4AAoErBK9qQYv-d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDPwLSs90pwfqi_NTA0HNGAr923xANlGM9egvPJQydQaGDdGNwgi_4g3VkcIIv-oV3YWt1MgE"}'
2025-02-12 04:02:25.955 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:02:25.955 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:02:25.955 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:02:25.956 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:02:25.957 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.31.194
2025-02-12 04:02:25.957 DEBUG [src.node.docker_mananger] Generated ports ['47425', '47426', '47427', '47428', '47429']
2025-02-12 04:02:25.957 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:02:25.957 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:02:25.957 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:02:25.957 DEBUG [src.node.docker_mananger] docker run -i -t -p 47425:47425 -p 47426:47426 -p 47427:47427 -p 47428:47428 -p 47429:47429 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47427 --rest-port=47425 --tcp-port=47426 --discv5-udp-port=47428 --rest-address=0.0.0.0 --nat=extip:172.18.31.194 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=193fc05aee43bf0aee4a7a7db9f7cf165eada6c9eed16a032c1a7303a58fde2a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47429 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QDGroeLjVhWEoePLgDT2ejbSt4b_Ovpt0Ot36OGAMX30QOYOV7H9BlKis6Hin4PqFz-ij8PChojcx4_LKv7CNxcCgmlkgnY0gmlwhKwSvamKbXVsdGlhZGRyc5YACASsEr2pBi_4AAoErBK9qQYv-d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDPwLSs90pwfqi_NTA0HNGAr923xANlGM9egvPJQydQaGDdGNwgi_4g3VkcIIv-oV3YWt1MgE
2025-02-12 04:02:26.180 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.31.194 waku 91003391b105098156dda3592e66f54c0fbe65f2a124de635e8a8de9bc5a1da9
2025-02-12 04:02:26.227 DEBUG [src.node.docker_mananger] Container started with ID 91003391b105. Setting up logs at ./log/docker/node2_2025-02-12_04-02-22__ddd7f8ad-d308-42f5-9f01-0dee3bb383fe__wakuorg_nwaku:latest.log
2025-02-12 04:02:26.228 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 47425
2025-02-12 04:02:26.229 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:02:27.229 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47425/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:02:27.235 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:02:27.236 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:02:27.236 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47425/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:02:27.239 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.31.194/tcp/47426/p2p/16Uiu2HAm2U3H5CtFHFTibd9XmYgQARtSBxh5M4DuXnHj7mdiCYR9","/ip4/172.18.31.194/tcp/47427/ws/p2p/16Uiu2HAm2U3H5CtFHFTibd9XmYgQARtSBxh5M4DuXnHj7mdiCYR9"],"enrUri":"enr:-L24QNEcQ7txs6r-sTriBk5MzirJHx41awzvovZJN8nLIT5AMsRYMD16oScuNbj5PuR1AbfuIInVErmY3PpM-mVB6DICgmlkgnY0gmlwhKwSH8KKbXVsdGlhZGRyc5YACASsEh_CBrlCAAoErBIfwga5Q90DgnJzhQADAQAAiXNlY3AyNTZrMaECaJ0NPzrdqIp7F5aCCYCvYN7hZCPelpcwRDykKxnQPpyDdGNwgrlCg3VkcIK5RIV3YWt1MgM"}'
2025-02-12 04:02:27.240 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:02:27.240 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:02:27.241 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:02:27.244 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:02:27.245 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.213.2
2025-02-12 04:02:27.247 DEBUG [src.node.docker_mananger] Generated ports ['32234', '32235', '32236', '32237', '32238']
2025-02-12 04:02:27.249 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:02:27.251 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:02:27.252 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:02:27.252 DEBUG [src.node.docker_mananger] docker run -i -t -p 32234:32234 -p 32235:32235 -p 32236:32236 -p 32237:32237 -p 32238:32238 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32236 --rest-port=32234 --tcp-port=32235 --discv5-udp-port=32237 --rest-address=0.0.0.0 --nat=extip:172.18.213.2 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cccd5adbaa1eb8aaefcc2d43fdde8ebedf6e83ae91eb271c2aebabfccea6e2ce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32238 --metrics-logging=true --relay=false --storenode=/ip4/172.18.31.194/tcp/47426/p2p/16Uiu2HAm2U3H5CtFHFTibd9XmYgQARtSBxh5M4DuXnHj7mdiCYR9 --discv5-bootstrap-node=enr:-L24QNEcQ7txs6r-sTriBk5MzirJHx41awzvovZJN8nLIT5AMsRYMD16oScuNbj5PuR1AbfuIInVErmY3PpM-mVB6DICgmlkgnY0gmlwhKwSH8KKbXVsdGlhZGRyc5YACASsEh_CBrlCAAoErBIfwga5Q90DgnJzhQADAQAAiXNlY3AyNTZrMaECaJ0NPzrdqIp7F5aCCYCvYN7hZCPelpcwRDykKxnQPpyDdGNwgrlCg3VkcIK5RIV3YWt1MgM
2025-02-12 04:02:27.495 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.213.2 waku ad8a6fa3748ae49b0d14e64f8c17699c6ac05d911cbb8cf5453f62f799959f52
2025-02-12 04:02:27.547 DEBUG [src.node.docker_mananger] Container started with ID ad8a6fa3748a. Setting up logs at ./log/docker/node3_2025-02-12_04-02-22__ddd7f8ad-d308-42f5-9f01-0dee3bb383fe__wakuorg_nwaku:latest.log
2025-02-12 04:02:27.548 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32234
2025-02-12 04:02:27.548 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:02:28.548 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32234/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:02:28.551 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:02:28.551 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:02:28.551 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32234/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:02:28.553 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.213.2/tcp/32235/p2p/16Uiu2HAm8ZR6YDtWX2uMpRc8xdbCELrepNbEqYWEweorGFzfwtjf","/ip4/172.18.213.2/tcp/32236/ws/p2p/16Uiu2HAm8ZR6YDtWX2uMpRc8xdbCELrepNbEqYWEweorGFzfwtjf"],"enrUri":"enr:-L24QOSJhIE73YLkLoo2Lk3AecUPBkezhPzhld53qq2QgaonKMdkGBr7x2L45bVR3AsBTFlS4QY8mg2EfW9BHjx2GQ0CgmlkgnY0gmlwhKwS1QKKbXVsdGlhZGRyc5YACASsEtUCBn3rAAoErBLVAgZ97N0DgnJzhQADAQAAiXNlY3AyNTZrMaECwyO_WfAswaBcC4hAWBwTtD1RH71q6Gxl28ndPMahs0aDdGNwgn3rg3VkcIJ97YV3YWt1MgA"}'
2025-02-12 04:02:28.553 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:02:28.554 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12279/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 04:02:28.557 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:02:28.558 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47425/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 04:02:28.564 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:02:28.565 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12279/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:02:28.568 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.31.194/tcp/47426/p2p/16Uiu2HAm2U3H5CtFHFTibd9XmYgQARtSBxh5M4DuXnHj7mdiCYR9","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-12 04:02:28.568 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47425/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:02:28.570 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.189.169/tcp/12280/p2p/16Uiu2HAmGtxXpxJHYEGjGmJYtcmDbTHY5iPBcNkTpGcKMc7WJgYg","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
2025-02-12 04:02:28.570 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-12 04:02:58.571 DEBUG [src.steps.store] Relaying message
2025-02-12 04:02:58.571 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12279/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:02:58.576 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:02:58.577 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:02:58.777 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-12 04:02:58.778 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32234/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:02:58.822 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"47860287b27d1c3856ce","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xf6eb90c4a92aa529f336749c8523fce220255ff90a744816fa3ff06d50df33e7"}]}'
2025-02-12 04:02:58.830 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:02:58.831 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:02:58.831 DEBUG [src.node.waku_node] Stopping container with id da27e17a1c33
2025-02-12 04:02:59.611 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:02:59.612 DEBUG [src.node.waku_node] Stopping container with id 91003391b105
2025-02-12 04:03:00.422 ERROR [src.node.docker_mananger] Max retries reached for container da27e17a1c33. Exiting log stream.
2025-02-12 04:03:01.029 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:03:01.029 DEBUG [src.node.waku_node] Stopping container with id ad8a6fa3748a
2025-02-12 04:03:01.841 ERROR [src.node.docker_mananger] Max retries reached for container 91003391b105. Exiting log stream.
2025-02-12 04:03:02.274 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:03:02.276 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:03:02.285 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:03:02.299 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:03:02.304 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
