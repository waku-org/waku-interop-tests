2025-02-12 04:04:44.241 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:04:44.242 DEBUG [tests.conftest] Running test: test_main_node_only_lightpush__peer_only_filter with id: 2025-02-12_04-04-44__dc781cb1-ae5f-461c-8df4-e37fc9ec6f19
2025-02-12 04:04:44.242 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:04:44.242 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-12 04:04:44.249 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:04:44.249 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-12_04-04-44__dc781cb1-ae5f-461c-8df4-e37fc9ec6f19__wakuorg_nwaku:latest.log
2025-02-12 04:04:44.249 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:04:44.249 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:04:44.250 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:04:44.250 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.86.171
2025-02-12 04:04:44.251 DEBUG [src.node.docker_mananger] Generated ports ['58040', '58041', '58042', '58043', '58044']
2025-02-12 04:04:44.251 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:04:44.251 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:04:44.251 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:04:44.251 DEBUG [src.node.docker_mananger] docker run -i -t -p 58040:58040 -p 58041:58041 -p 58042:58042 -p 58043:58043 -p 58044:58044 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58042 --rest-port=58040 --tcp-port=58041 --discv5-udp-port=58043 --rest-address=0.0.0.0 --nat=extip:172.18.86.171 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f4c3fcdccfcf862ea6bccfcd6fd1257dfe91ee7a4d5439ce6ba6edbada0dcc7c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58044 --metrics-logging=true --lightpush=false --relay=false --filter=true
2025-02-12 04:04:44.483 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.86.171 waku 8d46905b22bcad884dfd83f3db3cf0e908e06b940c0308e0352a78f0de5b1b89
2025-02-12 04:04:44.528 DEBUG [src.node.docker_mananger] Container started with ID 8d46905b22bc. Setting up logs at ./log/docker/receiving_node1_2025-02-12_04-04-44__dc781cb1-ae5f-461c-8df4-e37fc9ec6f19__wakuorg_nwaku:latest.log
2025-02-12 04:04:44.529 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58040
2025-02-12 04:04:44.530 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:04:45.047 ERROR [src.node.docker_mananger] Max retries reached for container 19bfc03eefda. Exiting log stream.
2025-02-12 04:04:45.530 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58040/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:45.533 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:04:45.533 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:04:45.534 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58040/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:45.536 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.86.171/tcp/58041/p2p/16Uiu2HAm1D8PFQkRUK8boDUmWL2H7mXo1kEYCWqDrgtKtWU8koai","/ip4/172.18.86.171/tcp/58042/ws/p2p/16Uiu2HAm1D8PFQkRUK8boDUmWL2H7mXo1kEYCWqDrgtKtWU8koai"],"enrUri":"enr:-L24QG3hGFouZkiFMUSFJrMizf2bTJphYXJRmdgPY-XdSdsuEp29fJrpzqNkDOcu-Sxxl27nsAHbRKGVG4bsT-4GCdQCgmlkgnY0gmlwhKwSVquKbXVsdGlhZGRyc5YACASsElarBuK5AAoErBJWqwbiut0DgnJzhQADAQAAiXNlY3AyNTZrMaECVe9tNbdaJXZO0SJniZQ3ncHkE1VfEKK5kV_2hX5K3OODdGNwguK5g3VkcILiu4V3YWt1MgQ"}'
2025-02-12 04:04:45.536 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:04:45.542 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:04:45.543 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-12_04-04-44__dc781cb1-ae5f-461c-8df4-e37fc9ec6f19__wakuorg_nwaku:latest.log
2025-02-12 04:04:45.543 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:04:45.543 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:04:45.544 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:04:45.544 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.235.62
2025-02-12 04:04:45.544 DEBUG [src.node.docker_mananger] Generated ports ['33307', '33308', '33309', '33310', '33311']
2025-02-12 04:04:45.545 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:04:45.545 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:04:45.545 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:04:45.545 DEBUG [src.node.docker_mananger] docker run -i -t -p 33307:33307 -p 33308:33308 -p 33309:33309 -p 33310:33310 -p 33311:33311 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33309 --rest-port=33307 --tcp-port=33308 --discv5-udp-port=33310 --rest-address=0.0.0.0 --nat=extip:172.18.235.62 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8e2fbdfb275cea8ba0900dbab3cb2c9bf5e34c7add7f4afa807add1cbe2ff0db --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33311 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QG3hGFouZkiFMUSFJrMizf2bTJphYXJRmdgPY-XdSdsuEp29fJrpzqNkDOcu-Sxxl27nsAHbRKGVG4bsT-4GCdQCgmlkgnY0gmlwhKwSVquKbXVsdGlhZGRyc5YACASsElarBuK5AAoErBJWqwbiut0DgnJzhQADAQAAiXNlY3AyNTZrMaECVe9tNbdaJXZO0SJniZQ3ncHkE1VfEKK5kV_2hX5K3OODdGNwguK5g3VkcILiu4V3YWt1MgQ --lightpushnode=/ip4/172.18.86.171/tcp/58041/p2p/16Uiu2HAm1D8PFQkRUK8boDUmWL2H7mXo1kEYCWqDrgtKtWU8koai --lightpush=true --relay=false
2025-02-12 04:04:45.776 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.235.62 waku acfae4685c7c005d809313ddcc4cf1a2f8d9e8816fcf0dd4f598f5a28bd93298
2025-02-12 04:04:45.825 DEBUG [src.node.docker_mananger] Container started with ID acfae4685c7c. Setting up logs at ./log/docker/lightpush_node1_2025-02-12_04-04-44__dc781cb1-ae5f-461c-8df4-e37fc9ec6f19__wakuorg_nwaku:latest.log
2025-02-12 04:04:45.826 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 33307
2025-02-12 04:04:45.826 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:04:46.826 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33307/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:46.829 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:04:46.829 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:04:46.830 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33307/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:46.832 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.235.62/tcp/33308/p2p/16Uiu2HAm5vbhp7KVUSHppvNruAma4t952Y5LJuGfGBjspeaFVDoF","/ip4/172.18.235.62/tcp/33309/ws/p2p/16Uiu2HAm5vbhp7KVUSHppvNruAma4t952Y5LJuGfGBjspeaFVDoF"],"enrUri":"enr:-L24QJl6h5xyQb8qlovkNAdy1JKA5f_zNJL-pOHGJ-SUj3nbeWCzwpcpDx-1DhXi0DDJy1nd29IQjdUxbTLUdix8fTUCgmlkgnY0gmlwhKwS6z6KbXVsdGlhZGRyc5YACASsEus-BoIcAAoErBLrPgaCHd0DgnJzhQADAQAAiXNlY3AyNTZrMaECm_3g3Sj8keLS77mNUnHJtFLfN9w2j79ZCbHVpqg0r8qDdGNwgoIcg3VkcIKCHoV3YWt1Mgg"}'
2025-02-12 04:04:46.832 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:04:46.832 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33307/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.86.171/tcp/58041/p2p/16Uiu2HAm1D8PFQkRUK8boDUmWL2H7mXo1kEYCWqDrgtKtWU8koai"]'
2025-02-12 04:04:46.869 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:46.870 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33307/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739333086870064384}}'
2025-02-12 04:04:46.892 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:33307/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2025-02-12 04:04:46.893 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:04:46.894 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:04:46.894 DEBUG [src.node.waku_node] Stopping container with id 8d46905b22bc
2025-02-12 04:04:47.823 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:47.823 DEBUG [src.node.waku_node] Stopping container with id acfae4685c7c
2025-02-12 04:04:48.640 ERROR [src.node.docker_mananger] Max retries reached for container 8d46905b22bc. Exiting log stream.
2025-02-12 04:04:49.324 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:49.325 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:04:49.328 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:04:49.332 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
