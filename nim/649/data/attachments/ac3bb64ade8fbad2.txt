2025-02-12 04:04:49.154 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:04:49.155 DEBUG [tests.conftest] Running test: test_single_content_topic[/waku/2/content/test.js] with id: 2025-02-12_04-04-49__b0d3908b-a25e-47e4-8618-02039d3907b6
2025-02-12 04:04:49.155 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:04:49.155 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-12 04:04:49.155 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-12 04:04:49.162 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:04:49.162 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-12_04-04-49__b0d3908b-a25e-47e4-8618-02039d3907b6__wakuorg_nwaku:latest.log
2025-02-12 04:04:49.162 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:04:49.162 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:04:49.164 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:04:49.164 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.151.253
2025-02-12 04:04:49.164 DEBUG [src.node.docker_mananger] Generated ports ['49017', '49018', '49019', '49020', '49021']
2025-02-12 04:04:49.164 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:04:49.164 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:04:49.164 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:04:49.164 DEBUG [src.node.docker_mananger] docker run -i -t -p 49017:49017 -p 49018:49018 -p 49019:49019 -p 49020:49020 -p 49021:49021 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49019 --rest-port=49017 --tcp-port=49018 --discv5-udp-port=49020 --rest-address=0.0.0.0 --nat=extip:172.18.151.253 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=aaa476ff27c4cad63b0860108fb2af4cf55cb60bc12eb5ac0f3ebedb4b0de52b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49021 --metrics-logging=true --relay=true --filter=true --content-topic=/waku/2/content/test.js
2025-02-12 04:04:49.392 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.151.253 waku 0b4825e31e33a3082b1d7ab9d20efdfedd337c25c32a1c34473ac6eccae89524
2025-02-12 04:04:49.442 DEBUG [src.node.docker_mananger] Container started with ID 0b4825e31e33. Setting up logs at ./log/docker/node1_2025-02-12_04-04-49__b0d3908b-a25e-47e4-8618-02039d3907b6__wakuorg_nwaku:latest.log
2025-02-12 04:04:49.443 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49017
2025-02-12 04:04:49.443 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:04:49.955 ERROR [src.node.docker_mananger] Max retries reached for container da3a34d4723b. Exiting log stream.
2025-02-12 04:04:50.444 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49017/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:50.447 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:04:50.447 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:04:50.447 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49017/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:50.449 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.151.253/tcp/49018/p2p/16Uiu2HAkwUm4LNgEzDpH6rU6irPHh2JgL8nX2Uv3mSnGcjJtXaWV","/ip4/172.18.151.253/tcp/49019/ws/p2p/16Uiu2HAkwUm4LNgEzDpH6rU6irPHh2JgL8nX2Uv3mSnGcjJtXaWV"],"enrUri":"enr:-L24QLClFb6a6tPa9MWfibtvjilqZPSbM3--nkyLGHUo3GthPbn6dCw5Nc78XrvT-BROO9jvQkFSvv48jTHhDt081EQCgmlkgnY0gmlwhKwSl_2KbXVsdGlhZGRyc5YACASsEpf9Br96AAoErBKX_Qa_e90DgnJzhQACAQAAiXNlY3AyNTZrMaECHoHbu47_pzThuqjjI2vM7f2-dJUmbaC5V9hdioaz7dKDdGNwgr96g3VkcIK_fIV3YWt1MgU"}'
2025-02-12 04:04:50.450 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:04:50.456 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:04:50.456 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-12_04-04-49__b0d3908b-a25e-47e4-8618-02039d3907b6__wakuorg_nwaku:latest.log
2025-02-12 04:04:50.456 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:04:50.456 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:04:50.458 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:04:50.458 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.121.128
2025-02-12 04:04:50.458 DEBUG [src.node.docker_mananger] Generated ports ['26940', '26941', '26942', '26943', '26944']
2025-02-12 04:04:50.458 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:04:50.458 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:04:50.459 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:04:50.459 DEBUG [src.node.docker_mananger] docker run -i -t -p 26940:26940 -p 26941:26941 -p 26942:26942 -p 26943:26943 -p 26944:26944 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26942 --rest-port=26940 --tcp-port=26941 --discv5-udp-port=26943 --rest-address=0.0.0.0 --nat=extip:172.18.121.128 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=aa545eb56df8aadb450db7bbef01eb67ae3a7cfb06eb81f7092cc9c52dc1f32d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26944 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QLClFb6a6tPa9MWfibtvjilqZPSbM3--nkyLGHUo3GthPbn6dCw5Nc78XrvT-BROO9jvQkFSvv48jTHhDt081EQCgmlkgnY0gmlwhKwSl_2KbXVsdGlhZGRyc5YACASsEpf9Br96AAoErBKX_Qa_e90DgnJzhQACAQAAiXNlY3AyNTZrMaECHoHbu47_pzThuqjjI2vM7f2-dJUmbaC5V9hdioaz7dKDdGNwgr96g3VkcIK_fIV3YWt1MgU --content-topic=/waku/2/content/test.js
2025-02-12 04:04:50.686 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.121.128 waku 9d21b93f90fe26385a83cf644bf5351d25d72c32f4795a1fb91dba37ad79e7d7
2025-02-12 04:04:50.737 DEBUG [src.node.docker_mananger] Container started with ID 9d21b93f90fe. Setting up logs at ./log/docker/node2_2025-02-12_04-04-49__b0d3908b-a25e-47e4-8618-02039d3907b6__wakuorg_nwaku:latest.log
2025-02-12 04:04:50.738 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26940
2025-02-12 04:04:50.738 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:04:51.738 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26940/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:51.748 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:04:51.749 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:04:51.749 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26940/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:51.752 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.121.128/tcp/26941/p2p/16Uiu2HAkxi4vwLQubj3tLUiRXJD84V3jcxkLV3xvq4fHXJLdcqeS","/ip4/172.18.121.128/tcp/26942/ws/p2p/16Uiu2HAkxi4vwLQubj3tLUiRXJD84V3jcxkLV3xvq4fHXJLdcqeS"],"enrUri":"enr:-L24QB83d629umIkR-fHq1xA9MmA4j5_ZoSg1bixBmQRC2DBcW4JlRm0kkziNoW53vlJ-YhTmJICtmc00MnzRPMyVuYCgmlkgnY0gmlwhKwSeYCKbXVsdGlhZGRyc5YACASsEnmABmk9AAoErBJ5gAZpPt0DgnJzhQACAQAAiXNlY3AyNTZrMaECMMZN4iKUfnusus8HksPKXn5rdk4g-RksFd-MwPpqURODdGNwgmk9g3VkcIJpP4V3YWt1MgE"}'
2025-02-12 04:04:51.752 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:04:51.753 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26940/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.151.253/tcp/49018/p2p/16Uiu2HAkwUm4LNgEzDpH6rU6irPHh2JgL8nX2Uv3mSnGcjJtXaWV"]'
2025-02-12 04:04:51.755 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:51.755 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49017/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/content/test.js"]'
2025-02-12 04:04:51.758 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:51.758 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26940/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/content/test.js"]'
2025-02-12 04:04:51.760 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:51.761 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49017/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:04:51.766 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:51.766 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-12 04:04:51.867 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-12 04:04:51.867 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49017/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:51.869 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/waku/2/content/test.js","version":0,"timestamp":1739333091761276416,"ephemeral":false}]'
2025-02-12 04:04:51.871 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-12 04:04:51.871 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26940/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:51.873 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/waku/2/content/test.js","version":0,"timestamp":1739333091761276416,"ephemeral":false}]'
2025-02-12 04:04:51.876 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:04:51.877 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:04:51.877 DEBUG [src.node.waku_node] Stopping container with id 0b4825e31e33
2025-02-12 04:04:52.918 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:52.919 DEBUG [src.node.waku_node] Stopping container with id 9d21b93f90fe
2025-02-12 04:04:53.749 ERROR [src.node.docker_mananger] Max retries reached for container 0b4825e31e33. Exiting log stream.
2025-02-12 04:04:53.938 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:53.940 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:04:53.949 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:04:53.953 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
