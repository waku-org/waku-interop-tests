2025-02-12 04:03:47.978 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:03:47.978 DEBUG [tests.conftest] Running test: test_publish_on_not_subscribed_content_topic_works with id: 2025-02-12_04-03-47__9c820f66-3beb-473e-ae90-3bdaa819d63d
2025-02-12 04:03:47.979 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:03:47.979 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-12 04:03:47.979 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-12 04:03:47.986 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:03:47.986 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-12_04-03-47__9c820f66-3beb-473e-ae90-3bdaa819d63d__wakuorg_nwaku:latest.log
2025-02-12 04:03:47.986 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:03:47.986 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:03:47.987 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:03:47.988 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.183.53
2025-02-12 04:03:47.988 DEBUG [src.node.docker_mananger] Generated ports ['22904', '22905', '22906', '22907', '22908']
2025-02-12 04:03:47.988 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:03:47.988 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:03:47.988 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:03:47.988 DEBUG [src.node.docker_mananger] docker run -i -t -p 22904:22904 -p 22905:22905 -p 22906:22906 -p 22907:22907 -p 22908:22908 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22906 --rest-port=22904 --tcp-port=22905 --discv5-udp-port=22907 --rest-address=0.0.0.0 --nat=extip:172.18.183.53 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=f8b5de9eb560ecaaef0c807cdf4562bdf757ff5da6162e081defe4bd44a23def --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22908 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2025-02-12 04:03:48.779 ERROR [src.node.docker_mananger] Max retries reached for container bf2a99cfab71. Exiting log stream.
2025-02-12 04:03:49.927 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.183.53 waku 356a263af9b2760526201da9c88d77beb859c1bdebdf087e6b285e0ad92ba779
2025-02-12 04:03:49.974 DEBUG [src.node.docker_mananger] Container started with ID 356a263af9b2. Setting up logs at ./log/docker/node1_2025-02-12_04-03-47__9c820f66-3beb-473e-ae90-3bdaa819d63d__wakuorg_nwaku:latest.log
2025-02-12 04:03:49.974 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22904
2025-02-12 04:03:49.975 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:03:50.975 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22904/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:50.979 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:03:50.979 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:03:50.979 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22904/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:50.982 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.183.53/tcp/22905/p2p/16Uiu2HAmR4BYJhV9d1QsY8pGuZRNS4sVWx6mELgjYG8oALs4fLKq","/ip4/172.18.183.53/tcp/22906/ws/p2p/16Uiu2HAmR4BYJhV9d1QsY8pGuZRNS4sVWx6mELgjYG8oALs4fLKq"],"enrUri":"enr:-L24QJrEOdbtcMpxKhVormVzUc5yh6bh-CbXa-tF38gDd8hyF3Ad94sPqpaUXF75QXuCvsuyp7u24M-OlFqKXu_fxJECgmlkgnY0gmlwhKwStzWKbXVsdGlhZGRyc5YACASsErc1Bll5AAoErBK3NQZZet0DgnJzhQACAQAAiXNlY3AyNTZrMaEDuD1BFK7R6DjHjsennPWJy8VWZYEKRg_Tqpcn4VsJbZCDdGNwgll5g3VkcIJZe4V3YWt1MgU"}'
2025-02-12 04:03:50.982 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:03:50.988 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:03:50.988 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-12_04-03-47__9c820f66-3beb-473e-ae90-3bdaa819d63d__wakuorg_nwaku:latest.log
2025-02-12 04:03:50.989 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:03:50.989 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:03:50.990 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:03:50.990 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.228.2
2025-02-12 04:03:50.990 DEBUG [src.node.docker_mananger] Generated ports ['20544', '20545', '20546', '20547', '20548']
2025-02-12 04:03:50.990 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:03:50.991 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:03:50.991 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:03:50.991 DEBUG [src.node.docker_mananger] docker run -i -t -p 20544:20544 -p 20545:20545 -p 20546:20546 -p 20547:20547 -p 20548:20548 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20546 --rest-port=20544 --tcp-port=20545 --discv5-udp-port=20547 --rest-address=0.0.0.0 --nat=extip:172.18.228.2 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=dd5a82132340f7119cce1a7ed4e147498c2deaea0cd809207bb6ba3a1eea55e5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20548 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QJrEOdbtcMpxKhVormVzUc5yh6bh-CbXa-tF38gDd8hyF3Ad94sPqpaUXF75QXuCvsuyp7u24M-OlFqKXu_fxJECgmlkgnY0gmlwhKwStzWKbXVsdGlhZGRyc5YACASsErc1Bll5AAoErBK3NQZZet0DgnJzhQACAQAAiXNlY3AyNTZrMaEDuD1BFK7R6DjHjsennPWJy8VWZYEKRg_Tqpcn4VsJbZCDdGNwgll5g3VkcIJZe4V3YWt1MgU --content-topic=/myapp/1/latest/proto
2025-02-12 04:03:51.224 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.228.2 waku 9a89c0d584082570d35e21046d2355a984e3d5824231c06e4ad247587bb227bd
2025-02-12 04:03:51.272 DEBUG [src.node.docker_mananger] Container started with ID 9a89c0d58408. Setting up logs at ./log/docker/node2_2025-02-12_04-03-47__9c820f66-3beb-473e-ae90-3bdaa819d63d__wakuorg_nwaku:latest.log
2025-02-12 04:03:51.272 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20544
2025-02-12 04:03:51.272 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:03:52.274 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20544/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:52.282 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:03:52.283 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:03:52.283 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20544/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:52.286 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.228.2/tcp/20545/p2p/16Uiu2HAkv17scU56svyCRQLyAARmKnx72RJBSyMXJBezhX8Qwqp1","/ip4/172.18.228.2/tcp/20546/ws/p2p/16Uiu2HAkv17scU56svyCRQLyAARmKnx72RJBSyMXJBezhX8Qwqp1"],"enrUri":"enr:-L24QOVonxPXMi2yO0BWd_yV-VB2Iy7LUR12aj5LHSPJ_xNeIs-OcJnrob4M_OT5rUMV-6szSsvfACjlgbTy07E5Lv8CgmlkgnY0gmlwhKwS5AKKbXVsdGlhZGRyc5YACASsEuQCBlBBAAoErBLkAgZQQt0DgnJzhQACAQAAiXNlY3AyNTZrMaECCJFxyi5SV-8Ayz5wD0ZhusF6bmLcdp1lqFRy5E2O1CaDdGNwglBBg3VkcIJQQ4V3YWt1MgE"}'
2025-02-12 04:03:52.287 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:03:52.290 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20544/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.183.53/tcp/22905/p2p/16Uiu2HAmR4BYJhV9d1QsY8pGuZRNS4sVWx6mELgjYG8oALs4fLKq"]'
2025-02-12 04:03:52.293 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:52.293 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22904/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2025-02-12 04:03:52.296 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:52.296 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20544/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2025-02-12 04:03:52.298 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:52.299 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22904/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:03:52.301 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:52.302 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20544/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:03:52.304 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:52.306 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:03:52.307 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:03:52.307 DEBUG [src.node.waku_node] Stopping container with id 356a263af9b2
2025-02-12 04:03:53.029 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:03:53.029 DEBUG [src.node.waku_node] Stopping container with id 9a89c0d58408
2025-02-12 04:03:53.841 ERROR [src.node.docker_mananger] Max retries reached for container 356a263af9b2. Exiting log stream.
2025-02-12 04:03:54.297 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:03:54.298 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:03:54.303 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:03:54.307 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
