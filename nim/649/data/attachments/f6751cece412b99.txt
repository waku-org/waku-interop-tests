2025-02-12 04:03:34.220 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:03:34.220 DEBUG [tests.conftest] Running test: test_message_light_pushed_on_different_pubsub_topic_is_not_retrieved with id: 2025-02-12_04-03-34__5d4f46f3-472a-411c-a1f2-ac5f49619ece
2025-02-12 04:03:34.221 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:03:34.221 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-12 04:03:34.227 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:03:34.227 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-12_04-03-34__5d4f46f3-472a-411c-a1f2-ac5f49619ece__wakuorg_nwaku:latest.log
2025-02-12 04:03:34.228 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:03:34.228 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:03:34.229 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:03:34.229 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.22.217
2025-02-12 04:03:34.229 DEBUG [src.node.docker_mananger] Generated ports ['21701', '21702', '21703', '21704', '21705']
2025-02-12 04:03:34.229 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:03:34.230 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:03:34.230 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:03:34.230 DEBUG [src.node.docker_mananger] docker run -i -t -p 21701:21701 -p 21702:21702 -p 21703:21703 -p 21704:21704 -p 21705:21705 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21703 --rest-port=21701 --tcp-port=21702 --discv5-udp-port=21704 --rest-address=0.0.0.0 --nat=extip:172.18.22.217 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7ec2ed94e771dfb8adadbf3e298ac9daecbe0f76f28dbc14a67a0ae9bdff9171 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21705 --metrics-logging=true --lightpush=true --relay=true
2025-02-12 04:03:34.458 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.22.217 waku d566497c4d717912864cffc43923b1dd7a0719d99df69845f08cf2b4337f436e
2025-02-12 04:03:34.507 DEBUG [src.node.docker_mananger] Container started with ID d566497c4d71. Setting up logs at ./log/docker/receiving_node1_2025-02-12_04-03-34__5d4f46f3-472a-411c-a1f2-ac5f49619ece__wakuorg_nwaku:latest.log
2025-02-12 04:03:34.508 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 21701
2025-02-12 04:03:34.509 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:03:35.024 ERROR [src.node.docker_mananger] Max retries reached for container 11d8330824cc. Exiting log stream.
2025-02-12 04:03:35.509 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21701/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:35.512 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:03:35.513 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:03:35.513 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21701/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:35.515 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.22.217/tcp/21702/p2p/16Uiu2HAm77fEBgu3MvLpQKiAx9LGNK5NyBU34RD1JwoDzWdaNCyV","/ip4/172.18.22.217/tcp/21703/ws/p2p/16Uiu2HAm77fEBgu3MvLpQKiAx9LGNK5NyBU34RD1JwoDzWdaNCyV"],"enrUri":"enr:-L24QNFCVUbWARa0hGPfHcPyQU-pXo_cU8T641oImVdo4h-_JALlrGbKdKX0C9glBKMln99YRNR3mGdYo_lZh0Q_GTwCgmlkgnY0gmlwhKwSFtmKbXVsdGlhZGRyc5YACASsEhbZBlTGAAoErBIW2QZUx90DgnJzhQADAQAAiXNlY3AyNTZrMaECra7wO7rcH09UMGrr76RuERTpAElcime0o4k_0LMV__CDdGNwglTGg3VkcIJUyIV3YWt1Mgk"}'
2025-02-12 04:03:35.515 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:03:35.522 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:03:35.522 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-12_04-03-34__5d4f46f3-472a-411c-a1f2-ac5f49619ece__wakuorg_nwaku:latest.log
2025-02-12 04:03:35.522 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:03:35.522 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:03:35.524 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:03:35.524 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.56.221
2025-02-12 04:03:35.524 DEBUG [src.node.docker_mananger] Generated ports ['48945', '48946', '48947', '48948', '48949']
2025-02-12 04:03:35.524 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:03:35.524 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:03:35.525 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:03:35.525 DEBUG [src.node.docker_mananger] docker run -i -t -p 48945:48945 -p 48946:48946 -p 48947:48947 -p 48948:48948 -p 48949:48949 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48947 --rest-port=48945 --tcp-port=48946 --discv5-udp-port=48948 --rest-address=0.0.0.0 --nat=extip:172.18.56.221 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=80aadf2c5e52debdfcfa2f13c95bd955f906fca2bdac7ebda9d569a9d1b52aaf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48949 --metrics-logging=true --lightpush=false --relay=true
2025-02-12 04:03:35.754 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.56.221 waku 16b1de687eb5314484a07e46bfccfb34883990c667368ae9d715141596485863
2025-02-12 04:03:35.803 DEBUG [src.node.docker_mananger] Container started with ID 16b1de687eb5. Setting up logs at ./log/docker/receiving_node2_2025-02-12_04-03-34__5d4f46f3-472a-411c-a1f2-ac5f49619ece__wakuorg_nwaku:latest.log
2025-02-12 04:03:35.804 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 48945
2025-02-12 04:03:35.804 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:03:36.805 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48945/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:36.808 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:03:36.808 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:03:36.808 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48945/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:36.810 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.56.221/tcp/48946/p2p/16Uiu2HAmHJKeVKefcbCcN1WEU6LUSTJpZXy9eA2RoCsWCLT9MGsF","/ip4/172.18.56.221/tcp/48947/ws/p2p/16Uiu2HAmHJKeVKefcbCcN1WEU6LUSTJpZXy9eA2RoCsWCLT9MGsF"],"enrUri":"enr:-L24QCvrjrfeXv-rEVZ3zNvfDQxbdO4fqOJfQ_kXvlYFJ43faYk18GAO4QHvqPy-1EmYyyt4XzBx9UOh5rzi0Arp63kCgmlkgnY0gmlwhKwSON2KbXVsdGlhZGRyc5YACASsEjjdBr8yAAoErBI43Qa_M90DgnJzhQADAQAAiXNlY3AyNTZrMaEDRP8OaiMBCAyytT80XXiAtY-HmUQoalOit64EpUIqjZ6DdGNwgr8yg3VkcIK_NIV3YWt1MgE"}'
2025-02-12 04:03:36.811 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:03:36.811 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48945/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.22.217/tcp/21702/p2p/16Uiu2HAm77fEBgu3MvLpQKiAx9LGNK5NyBU34RD1JwoDzWdaNCyV"]'
2025-02-12 04:03:36.853 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:36.862 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:03:36.863 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-12_04-03-34__5d4f46f3-472a-411c-a1f2-ac5f49619ece__wakuorg_nwaku:latest.log
2025-02-12 04:03:36.863 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:03:36.863 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:03:36.864 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:03:36.864 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.199.160
2025-02-12 04:03:36.865 DEBUG [src.node.docker_mananger] Generated ports ['54765', '54766', '54767', '54768', '54769']
2025-02-12 04:03:36.865 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:03:36.865 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:03:36.865 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:03:36.865 DEBUG [src.node.docker_mananger] docker run -i -t -p 54765:54765 -p 54766:54766 -p 54767:54767 -p 54768:54768 -p 54769:54769 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54767 --rest-port=54765 --tcp-port=54766 --discv5-udp-port=54768 --rest-address=0.0.0.0 --nat=extip:172.18.199.160 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d12f0ffddc0a98ab8659ae0e932b34da9feefa51076da26fd10dd321dc9b07e5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54769 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QNFCVUbWARa0hGPfHcPyQU-pXo_cU8T641oImVdo4h-_JALlrGbKdKX0C9glBKMln99YRNR3mGdYo_lZh0Q_GTwCgmlkgnY0gmlwhKwSFtmKbXVsdGlhZGRyc5YACASsEhbZBlTGAAoErBIW2QZUx90DgnJzhQADAQAAiXNlY3AyNTZrMaECra7wO7rcH09UMGrr76RuERTpAElcime0o4k_0LMV__CDdGNwglTGg3VkcIJUyIV3YWt1Mgk --lightpushnode=/ip4/172.18.22.217/tcp/21702/p2p/16Uiu2HAm77fEBgu3MvLpQKiAx9LGNK5NyBU34RD1JwoDzWdaNCyV --lightpush=true --relay=false
2025-02-12 04:03:37.096 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.199.160 waku 96c4b1086fb441f32a9bfdaf2c97a829820e30acd7c6637efd0618c65d4dcab0
2025-02-12 04:03:37.144 DEBUG [src.node.docker_mananger] Container started with ID 96c4b1086fb4. Setting up logs at ./log/docker/lightpush_node1_2025-02-12_04-03-34__5d4f46f3-472a-411c-a1f2-ac5f49619ece__wakuorg_nwaku:latest.log
2025-02-12 04:03:37.145 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 54765
2025-02-12 04:03:37.145 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:03:38.145 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54765/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:38.148 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:03:38.148 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:03:38.149 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54765/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:38.151 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.199.160/tcp/54766/p2p/16Uiu2HAmS9ti3qREJj8JuqdJCi23RUj1W8uLaqBmr1bWrZHzh1WX","/ip4/172.18.199.160/tcp/54767/ws/p2p/16Uiu2HAmS9ti3qREJj8JuqdJCi23RUj1W8uLaqBmr1bWrZHzh1WX"],"enrUri":"enr:-L24QI4HQRaIn0oTgktOmTmXmp0_dvn3K18z0U8oEb4rTYPjZQNN34e5ef8TvG2QqaH06YhBaIPMuDX_6lF4A2ChvOQCgmlkgnY0gmlwhKwSx6CKbXVsdGlhZGRyc5YACASsEsegBtXuAAoErBLHoAbV790DgnJzhQADAQAAiXNlY3AyNTZrMaEDyI9k3NIKjc7ZKfNcstf-_huCrxZ81CfuJg_WQWaOAwCDdGNwgtXug3VkcILV8IV3YWt1Mgg"}'
2025-02-12 04:03:38.151 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:03:38.151 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54765/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.22.217/tcp/21702/p2p/16Uiu2HAm77fEBgu3MvLpQKiAx9LGNK5NyBU34RD1JwoDzWdaNCyV"]'
2025-02-12 04:03:38.187 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:38.188 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54765/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.56.221/tcp/48946/p2p/16Uiu2HAmHJKeVKefcbCcN1WEU6LUSTJpZXy9eA2RoCsWCLT9MGsF"]'
2025-02-12 04:03:38.218 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:38.219 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21701/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:03:38.223 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:38.223 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48945/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:03:38.229 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:38.235 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21701/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
2025-02-12 04:03:38.245 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:38.246 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48945/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
2025-02-12 04:03:38.260 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:38.263 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54765/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739333018263064064}}'
2025-02-12 04:03:38.276 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:38.276 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-12 04:03:38.377 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21701/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:38.379 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-12 04:03:38.381 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:03:38.382 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:03:38.382 DEBUG [src.node.waku_node] Stopping container with id d566497c4d71
2025-02-12 04:03:39.015 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:03:39.016 DEBUG [src.node.waku_node] Stopping container with id 16b1de687eb5
2025-02-12 04:03:39.828 ERROR [src.node.docker_mananger] Max retries reached for container d566497c4d71. Exiting log stream.
2025-02-12 04:03:40.514 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:03:40.515 DEBUG [src.node.waku_node] Stopping container with id 96c4b1086fb4
2025-02-12 04:03:41.328 ERROR [src.node.docker_mananger] Max retries reached for container 16b1de687eb5. Exiting log stream.
2025-02-12 04:03:42.002 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:03:42.003 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:03:42.012 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:03:42.019 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:03:42.024 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
