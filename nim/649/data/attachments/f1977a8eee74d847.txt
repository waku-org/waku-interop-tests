2025-02-12 04:04:16.380 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:04:16.380 DEBUG [tests.conftest] Running test: test_filter_ping_on_unsubscribed_peer with id: 2025-02-12_04-04-16__d6e266bf-efdc-4a49-b628-fd2a522f7d88
2025-02-12 04:04:16.381 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:04:16.381 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-12 04:04:16.381 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-12 04:04:16.387 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:04:16.388 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-12_04-04-16__d6e266bf-efdc-4a49-b628-fd2a522f7d88__wakuorg_nwaku:latest.log
2025-02-12 04:04:16.388 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:04:16.388 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:04:16.389 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:04:16.390 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.255.202
2025-02-12 04:04:16.390 DEBUG [src.node.docker_mananger] Generated ports ['59238', '59239', '59240', '59241', '59242']
2025-02-12 04:04:16.390 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:04:16.390 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:04:16.390 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:04:16.390 DEBUG [src.node.docker_mananger] docker run -i -t -p 59238:59238 -p 59239:59239 -p 59240:59240 -p 59241:59241 -p 59242:59242 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59240 --rest-port=59238 --tcp-port=59239 --discv5-udp-port=59241 --rest-address=0.0.0.0 --nat=extip:172.18.255.202 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dd89bfdeb2524ee6bdb04be82128b44d85ecbceaafdbadefb74e0a5df3bbfe4d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59242 --metrics-logging=true --relay=true --filter=true
2025-02-12 04:04:16.624 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.255.202 waku e9157d3668d99f77fc66dfccebafbaa7c752331c6c857ad60ce9f6d73f73f845
2025-02-12 04:04:16.671 DEBUG [src.node.docker_mananger] Container started with ID e9157d3668d9. Setting up logs at ./log/docker/node1_2025-02-12_04-04-16__d6e266bf-efdc-4a49-b628-fd2a522f7d88__wakuorg_nwaku:latest.log
2025-02-12 04:04:16.672 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 59238
2025-02-12 04:04:16.672 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:04:17.187 ERROR [src.node.docker_mananger] Max retries reached for container b921026f098b. Exiting log stream.
2025-02-12 04:04:17.673 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59238/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:17.676 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:04:17.676 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:04:17.677 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59238/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:17.679 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.255.202/tcp/59239/p2p/16Uiu2HAm5ct41BQW9w7jxYKZcmteFaonAWzeBT6EG6xoZu8xR5PW","/ip4/172.18.255.202/tcp/59240/ws/p2p/16Uiu2HAm5ct41BQW9w7jxYKZcmteFaonAWzeBT6EG6xoZu8xR5PW"],"enrUri":"enr:-L24QKF3L32fRuz8OZl9Y2VBBC-c0RlTD9tkBA31V1Y31QqOB0Ln9fqCQ6JVW8tizOKj0nF0Ux1fgK1-wwm1b0QtFYsCgmlkgnY0gmlwhKwS_8qKbXVsdGlhZGRyc5YACASsEv_KBudnAAoErBL_ygbnaN0DgnJzhQADAQAAiXNlY3AyNTZrMaECl3Pon8KLryVEhgYk31Zb6oF1y4NG_sWT9idUhi_HiDmDdGNwgudng3VkcILnaYV3YWt1MgU"}'
2025-02-12 04:04:17.679 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:04:17.680 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-12 04:04:17.686 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:04:17.686 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-12_04-04-16__d6e266bf-efdc-4a49-b628-fd2a522f7d88__wakuorg_nwaku:latest.log
2025-02-12 04:04:17.686 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:04:17.686 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:04:17.687 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:04:17.688 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.127.255
2025-02-12 04:04:17.688 DEBUG [src.node.docker_mananger] Generated ports ['56013', '56014', '56015', '56016', '56017']
2025-02-12 04:04:17.688 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:04:17.688 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:04:17.688 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:04:17.688 DEBUG [src.node.docker_mananger] docker run -i -t -p 56013:56013 -p 56014:56014 -p 56015:56015 -p 56016:56016 -p 56017:56017 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56015 --rest-port=56013 --tcp-port=56014 --discv5-udp-port=56016 --rest-address=0.0.0.0 --nat=extip:172.18.127.255 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=34f3ffdcb006eb6abfb9c3a66cf9adbc8a9be12d6a7ec317f5f6dbcfadd8aeac --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56017 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QKF3L32fRuz8OZl9Y2VBBC-c0RlTD9tkBA31V1Y31QqOB0Ln9fqCQ6JVW8tizOKj0nF0Ux1fgK1-wwm1b0QtFYsCgmlkgnY0gmlwhKwS_8qKbXVsdGlhZGRyc5YACASsEv_KBudnAAoErBL_ygbnaN0DgnJzhQADAQAAiXNlY3AyNTZrMaECl3Pon8KLryVEhgYk31Zb6oF1y4NG_sWT9idUhi_HiDmDdGNwgudng3VkcILnaYV3YWt1MgU --filternode=/ip4/172.18.255.202/tcp/59239/p2p/16Uiu2HAm5ct41BQW9w7jxYKZcmteFaonAWzeBT6EG6xoZu8xR5PW
2025-02-12 04:04:17.913 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.127.255 waku 4ac789b237abbc21cd3d2be684cbb5d6eb2ebbfc6058ae298c326f86b2fb1ade
2025-02-12 04:04:17.964 DEBUG [src.node.docker_mananger] Container started with ID 4ac789b237ab. Setting up logs at ./log/docker/node2_2025-02-12_04-04-16__d6e266bf-efdc-4a49-b628-fd2a522f7d88__wakuorg_nwaku:latest.log
2025-02-12 04:04:17.965 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56013
2025-02-12 04:04:17.965 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:04:18.965 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56013/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:18.968 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:04:18.968 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:04:18.969 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56013/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:18.971 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.127.255/tcp/56014/p2p/16Uiu2HAmKtfusuiAmmoXow4rfKDgeuTPuB4gQbWAgGMwiSiZWZBR","/ip4/172.18.127.255/tcp/56015/ws/p2p/16Uiu2HAmKtfusuiAmmoXow4rfKDgeuTPuB4gQbWAgGMwiSiZWZBR"],"enrUri":"enr:-L24QKOtVosMTuRIJif53URdXcbn873nbv2F2BLV8REr7_vMEN-unIGYIeBghBGNJGYWTBLze9cUxZGkTsCcNgKSWpECgmlkgnY0gmlwhKwSf_-KbXVsdGlhZGRyc5YACASsEn__BtrOAAoErBJ__wbaz90DgnJzhQADAQAAiXNlY3AyNTZrMaEDa4MXfU1s-s-dbuZpVrszjNWcratrPYL2pZqYnK8dIsSDdGNwgtrOg3VkcILa0IV3YWt1MgA"}'
2025-02-12 04:04:18.971 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:04:18.971 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56013/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.255.202/tcp/59239/p2p/16Uiu2HAm5ct41BQW9w7jxYKZcmteFaonAWzeBT6EG6xoZu8xR5PW"]'
2025-02-12 04:04:19.009 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:19.009 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-12 04:04:19.010 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59238/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 04:04:19.027 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:19.027 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56013/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1a4fa924-c628-4714-9106-7115bffc2685", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-12 04:04:19.039 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1a4fa924-c628-4714-9106-7115bffc2685","statusDesc":"OK"}'
2025-02-12 04:04:19.040 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56013/filter/v2/subscriptions/b2b11cb8-4cda-4b1c-a395-fd6f433d7d25" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:19.047 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"b2b11cb8-4cda-4b1c-a395-fd6f433d7d25","statusDesc":"OK"}'
2025-02-12 04:04:19.048 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:56013/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-12 04:04:19.055 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"12345","statusDesc":"OK"}'
2025-02-12 04:04:19.056 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56013/filter/v2/subscriptions/43df0a25-466b-4927-b25a-616fb61b6808" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:19.063 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:56013/filter/v2/subscriptions/43df0a25-466b-4927-b25a-616fb61b6808. Response content: b'{"requestId":"43df0a25-466b-4927-b25a-616fb61b6808","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
2025-02-12 04:04:19.066 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:04:19.067 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:04:19.067 DEBUG [src.node.waku_node] Stopping container with id e9157d3668d9
2025-02-12 04:04:20.169 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:20.169 DEBUG [src.node.waku_node] Stopping container with id 4ac789b237ab
2025-02-12 04:04:20.982 ERROR [src.node.docker_mananger] Max retries reached for container e9157d3668d9. Exiting log stream.
2025-02-12 04:04:21.706 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:21.707 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:04:21.712 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:04:21.717 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
