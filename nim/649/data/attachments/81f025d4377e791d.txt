2025-02-12 04:08:19.032 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:08:19.032 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_version with id: 2025-02-12_04-08-19__c105bd1a-7230-4595-8b00-d9ae2f9b3cf1
2025-02-12 04:08:19.032 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:08:19.033 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-12 04:08:19.039 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:08:19.039 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-12_04-08-19__c105bd1a-7230-4595-8b00-d9ae2f9b3cf1__wakuorg_nwaku:latest.log
2025-02-12 04:08:19.039 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:08:19.039 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:08:19.040 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:08:19.040 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.221.109
2025-02-12 04:08:19.040 DEBUG [src.node.docker_mananger] Generated ports ['5928', '5929', '5930', '5931', '5932']
2025-02-12 04:08:19.041 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:08:19.041 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:08:19.041 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:08:19.041 DEBUG [src.node.docker_mananger] docker run -i -t -p 5928:5928 -p 5929:5929 -p 5930:5930 -p 5931:5931 -p 5932:5932 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5930 --rest-port=5928 --tcp-port=5929 --discv5-udp-port=5931 --rest-address=0.0.0.0 --nat=extip:172.18.221.109 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=97add1cbfeadebcb69eee4d2a7bfd2cc6c74947da6e01a83ea9eeccf5c5d83f9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5932 --metrics-logging=true --lightpush=true --relay=true
2025-02-12 04:08:19.257 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.221.109 waku bcc97ad795483e1496615815a93c7d8bdd7cc453d644debf10b2e19a652a5d8c
2025-02-12 04:08:19.301 DEBUG [src.node.docker_mananger] Container started with ID bcc97ad79548. Setting up logs at ./log/docker/receiving_node1_2025-02-12_04-08-19__c105bd1a-7230-4595-8b00-d9ae2f9b3cf1__wakuorg_nwaku:latest.log
2025-02-12 04:08:19.301 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 5928
2025-02-12 04:08:19.301 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:08:19.826 ERROR [src.node.docker_mananger] Max retries reached for container c42e9475287c. Exiting log stream.
2025-02-12 04:08:20.302 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5928/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:08:20.305 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:08:20.305 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:08:20.305 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5928/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:08:20.307 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.221.109/tcp/5929/p2p/16Uiu2HAmQU4EMSqAgHgZNFQtgAQzdKdx3TLUV2P3mGZrnet4Li11","/ip4/172.18.221.109/tcp/5930/ws/p2p/16Uiu2HAmQU4EMSqAgHgZNFQtgAQzdKdx3TLUV2P3mGZrnet4Li11"],"enrUri":"enr:-L24QACWak3kZ0hTqEyeyj2iHIK8KUM_5FlQc0-bCRQlLcEPKk5LOOXz1mJ1oNz5-D7IvuAaQD4AC2ehwVU7G2CPIXQCgmlkgnY0gmlwhKwS3W2KbXVsdGlhZGRyc5YACASsEt1tBhcpAAoErBLdbQYXKt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDr3895tUiQ0Ce2LSmQWPri4E26VGUV13DKpIDwlSejoyDdGNwghcpg3VkcIIXK4V3YWt1Mgk"}'
2025-02-12 04:08:20.307 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:08:20.314 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:08:20.314 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-12_04-08-19__c105bd1a-7230-4595-8b00-d9ae2f9b3cf1__wakuorg_nwaku:latest.log
2025-02-12 04:08:20.314 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:08:20.314 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:08:20.316 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:08:20.316 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.9.170
2025-02-12 04:08:20.316 DEBUG [src.node.docker_mananger] Generated ports ['61935', '61936', '61937', '61938', '61939']
2025-02-12 04:08:20.316 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:08:20.316 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:08:20.316 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:08:20.316 DEBUG [src.node.docker_mananger] docker run -i -t -p 61935:61935 -p 61936:61936 -p 61937:61937 -p 61938:61938 -p 61939:61939 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61937 --rest-port=61935 --tcp-port=61936 --discv5-udp-port=61938 --rest-address=0.0.0.0 --nat=extip:172.18.9.170 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a9bdbea900950d5ddba87af4e28af20715a2c46e01b5afd6d80bc49ba5ed5bcb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61939 --metrics-logging=true --lightpush=false --relay=true
2025-02-12 04:08:20.536 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.9.170 waku b1b4ff8a6b850af66a1257d55a45c006372455aa92008d3a404f65c8af0afb31
2025-02-12 04:08:20.583 DEBUG [src.node.docker_mananger] Container started with ID b1b4ff8a6b85. Setting up logs at ./log/docker/receiving_node2_2025-02-12_04-08-19__c105bd1a-7230-4595-8b00-d9ae2f9b3cf1__wakuorg_nwaku:latest.log
2025-02-12 04:08:20.584 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61935
2025-02-12 04:08:20.584 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:08:21.584 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61935/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:08:21.587 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:08:21.587 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:08:21.587 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61935/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:08:21.589 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.170/tcp/61936/p2p/16Uiu2HAmBoU7NzYnrGexkUxZEW6dPw2ZeDnQEGKzJK8Jw3QoAuz3","/ip4/172.18.9.170/tcp/61937/ws/p2p/16Uiu2HAmBoU7NzYnrGexkUxZEW6dPw2ZeDnQEGKzJK8Jw3QoAuz3"],"enrUri":"enr:-L24QPPRJ1QIe0hTN61KIAOhPZcRzHD3m8u2rthwtsdTtClzZKukXS4OP9BeuhXm8UiZowFrYo4he0EpztO1jPJc7AoCgmlkgnY0gmlwhKwSCaqKbXVsdGlhZGRyc5YACASsEgmqBvHwAAoErBIJqgbx8d0DgnJzhQADAQAAiXNlY3AyNTZrMaEC81BZG3pnfD5PBRT3I--Rz_TmTMt6WTjhq33KYPoE-GSDdGNwgvHwg3VkcILx8oV3YWt1MgE"}'
2025-02-12 04:08:21.590 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:08:21.590 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61935/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.221.109/tcp/5929/p2p/16Uiu2HAmQU4EMSqAgHgZNFQtgAQzdKdx3TLUV2P3mGZrnet4Li11"]'
2025-02-12 04:08:21.632 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:08:21.639 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:08:21.640 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-12_04-08-19__c105bd1a-7230-4595-8b00-d9ae2f9b3cf1__wakuorg_nwaku:latest.log
2025-02-12 04:08:21.640 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:08:21.640 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:08:21.641 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:08:21.641 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.89.220
2025-02-12 04:08:21.642 DEBUG [src.node.docker_mananger] Generated ports ['29576', '29577', '29578', '29579', '29580']
2025-02-12 04:08:21.642 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:08:21.642 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:08:21.642 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:08:21.642 DEBUG [src.node.docker_mananger] docker run -i -t -p 29576:29576 -p 29577:29577 -p 29578:29578 -p 29579:29579 -p 29580:29580 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29578 --rest-port=29576 --tcp-port=29577 --discv5-udp-port=29579 --rest-address=0.0.0.0 --nat=extip:172.18.89.220 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ac8cac1eddaf1bff01b421b0d8ede3ffc5adc8aa4a656ecbcecf59fdb9a2caf0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29580 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QACWak3kZ0hTqEyeyj2iHIK8KUM_5FlQc0-bCRQlLcEPKk5LOOXz1mJ1oNz5-D7IvuAaQD4AC2ehwVU7G2CPIXQCgmlkgnY0gmlwhKwS3W2KbXVsdGlhZGRyc5YACASsEt1tBhcpAAoErBLdbQYXKt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDr3895tUiQ0Ce2LSmQWPri4E26VGUV13DKpIDwlSejoyDdGNwghcpg3VkcIIXK4V3YWt1Mgk --lightpushnode=/ip4/172.18.221.109/tcp/5929/p2p/16Uiu2HAmQU4EMSqAgHgZNFQtgAQzdKdx3TLUV2P3mGZrnet4Li11 --lightpush=true --relay=false
2025-02-12 04:08:21.871 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.89.220 waku 7a576944b18f551a93a91defe85df092c72205e930163a0910c8ba9331165583
2025-02-12 04:08:21.918 DEBUG [src.node.docker_mananger] Container started with ID 7a576944b18f. Setting up logs at ./log/docker/lightpush_node1_2025-02-12_04-08-19__c105bd1a-7230-4595-8b00-d9ae2f9b3cf1__wakuorg_nwaku:latest.log
2025-02-12 04:08:21.919 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29576
2025-02-12 04:08:21.919 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:08:22.919 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29576/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:08:22.922 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:08:22.922 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:08:22.922 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29576/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:08:22.924 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.89.220/tcp/29577/p2p/16Uiu2HAm3SoCspY1ujF1aPsZM7KQKsYh3sYaS431D6FF5yxBrw6z","/ip4/172.18.89.220/tcp/29578/ws/p2p/16Uiu2HAm3SoCspY1ujF1aPsZM7KQKsYh3sYaS431D6FF5yxBrw6z"],"enrUri":"enr:-L24QB33P98DmV35C9jNtfCMJQoC3dfrbmoyi32DHcE96bgPXt2QZF4Bi5t_JOeqHm6PUnqZXGdD27vW5tN6ejb8RLMCgmlkgnY0gmlwhKwSWdyKbXVsdGlhZGRyc5YACASsElncBnOJAAoErBJZ3AZzit0DgnJzhQADAQAAiXNlY3AyNTZrMaECdyc_B2ODkilMMVivregz90zZgJTei4XD2aXp7HwKBpuDdGNwgnOJg3VkcIJzi4V3YWt1Mgg"}'
2025-02-12 04:08:22.924 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:08:22.925 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29576/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.221.109/tcp/5929/p2p/16Uiu2HAmQU4EMSqAgHgZNFQtgAQzdKdx3TLUV2P3mGZrnet4Li11"]'
2025-02-12 04:08:22.960 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:08:22.960 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29576/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.9.170/tcp/61936/p2p/16Uiu2HAmBoU7NzYnrGexkUxZEW6dPw2ZeDnQEGKzJK8Jw3QoAuz3"]'
2025-02-12 04:08:22.990 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:08:22.993 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5928/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:08:22.998 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:08:23.002 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61935/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:08:23.006 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:08:23.009 DEBUG [src.steps.light_push] Lightpushing message
2025-02-12 04:08:23.010 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29576/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739333303009478656, "version": 2.1}}'
2025-02-12 04:08:23.013 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:29576/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-12 04:08:23.015 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:08:23.016 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:08:23.016 DEBUG [src.node.waku_node] Stopping container with id bcc97ad79548
2025-02-12 04:08:23.798 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:08:23.798 DEBUG [src.node.waku_node] Stopping container with id b1b4ff8a6b85
2025-02-12 04:08:24.629 ERROR [src.node.docker_mananger] Max retries reached for container bcc97ad79548. Exiting log stream.
2025-02-12 04:08:25.169 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:08:25.169 DEBUG [src.node.waku_node] Stopping container with id 7a576944b18f
2025-02-12 04:08:25.982 ERROR [src.node.docker_mananger] Max retries reached for container b1b4ff8a6b85. Exiting log stream.
2025-02-12 04:08:26.652 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:08:26.653 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:08:26.667 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:08:26.673 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:08:26.678 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
