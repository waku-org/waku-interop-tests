2025-02-12 04:04:20.046 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:04:20.046 DEBUG [tests.conftest] Running test: test_light_push_with_missing_content_topic with id: 2025-02-12_04-04-20__4c0a2c2c-63d2-4021-80e9-cabc730b36d2
2025-02-12 04:04:20.047 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:04:20.047 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-12 04:04:20.053 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:04:20.053 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-12_04-04-20__4c0a2c2c-63d2-4021-80e9-cabc730b36d2__wakuorg_nwaku:latest.log
2025-02-12 04:04:20.054 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:04:20.054 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:04:20.055 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:04:20.055 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.50.181
2025-02-12 04:04:20.055 DEBUG [src.node.docker_mananger] Generated ports ['22081', '22082', '22083', '22084', '22085']
2025-02-12 04:04:20.056 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:04:20.056 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:04:20.056 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:04:20.056 DEBUG [src.node.docker_mananger] docker run -i -t -p 22081:22081 -p 22082:22082 -p 22083:22083 -p 22084:22084 -p 22085:22085 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22083 --rest-port=22081 --tcp-port=22082 --discv5-udp-port=22084 --rest-address=0.0.0.0 --nat=extip:172.18.50.181 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0b6fccc7b0dffce2eb44c9c5c73f76ccbeafa97defb62a8663cf0718cadbb47e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22085 --metrics-logging=true --lightpush=true --relay=true
2025-02-12 04:04:20.290 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.50.181 waku f31b6ea2ebf0ad12b8109b9361bf94948f2c5636e6776b65c958b92cbeec555d
2025-02-12 04:04:20.337 DEBUG [src.node.docker_mananger] Container started with ID f31b6ea2ebf0. Setting up logs at ./log/docker/receiving_node1_2025-02-12_04-04-20__4c0a2c2c-63d2-4021-80e9-cabc730b36d2__wakuorg_nwaku:latest.log
2025-02-12 04:04:20.338 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22081
2025-02-12 04:04:20.338 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:04:20.789 ERROR [src.node.docker_mananger] Max retries reached for container fc329396f8cf. Exiting log stream.
2025-02-12 04:04:21.339 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22081/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:21.342 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:04:21.342 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:04:21.342 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22081/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:21.344 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.50.181/tcp/22082/p2p/16Uiu2HAm3rKhe7amtGtzcV2ghucZiPTLuCWrUiJR2FLcGR8ufUMx","/ip4/172.18.50.181/tcp/22083/ws/p2p/16Uiu2HAm3rKhe7amtGtzcV2ghucZiPTLuCWrUiJR2FLcGR8ufUMx"],"enrUri":"enr:-L24QFKNDkyhJX9NAP1-YWevb7WT1XJDfZQ46ypdwpRKXpnjWoYRPySZnpssrGc0x0G1rhUnVcg_CeWGf4RNfrSiBgMCgmlkgnY0gmlwhKwSMrWKbXVsdGlhZGRyc5YACASsEjK1BlZCAAoErBIytQZWQ90DgnJzhQADAQAAiXNlY3AyNTZrMaECfS4WL-SvHXJ44Vv7HID-23PRIs1KVMgjMEG0eOLAzJuDdGNwglZCg3VkcIJWRIV3YWt1Mgk"}'
2025-02-12 04:04:21.345 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:04:21.351 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:04:21.351 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-12_04-04-20__4c0a2c2c-63d2-4021-80e9-cabc730b36d2__wakuorg_nwaku:latest.log
2025-02-12 04:04:21.351 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:04:21.352 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:04:21.353 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:04:21.353 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.44.122
2025-02-12 04:04:21.353 DEBUG [src.node.docker_mananger] Generated ports ['35691', '35692', '35693', '35694', '35695']
2025-02-12 04:04:21.353 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:04:21.354 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:04:21.354 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:04:21.354 DEBUG [src.node.docker_mananger] docker run -i -t -p 35691:35691 -p 35692:35692 -p 35693:35693 -p 35694:35694 -p 35695:35695 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35693 --rest-port=35691 --tcp-port=35692 --discv5-udp-port=35694 --rest-address=0.0.0.0 --nat=extip:172.18.44.122 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6e65de3c0d115cfd1d5a6c0ece60d8eb1ec342e0ea451ad9db5df01f81fcbfc7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35695 --metrics-logging=true --lightpush=false --relay=true
2025-02-12 04:04:21.594 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.44.122 waku a30e990b1147613f4371781c23f04954796b33c9e9ecd1d54aa75176506d68b4
2025-02-12 04:04:21.649 DEBUG [src.node.docker_mananger] Container started with ID a30e990b1147. Setting up logs at ./log/docker/receiving_node2_2025-02-12_04-04-20__4c0a2c2c-63d2-4021-80e9-cabc730b36d2__wakuorg_nwaku:latest.log
2025-02-12 04:04:21.649 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 35691
2025-02-12 04:04:21.650 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:04:22.650 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35691/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:22.653 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:04:22.653 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:04:22.653 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35691/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:22.655 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.44.122/tcp/35692/p2p/16Uiu2HAmJKd4Y2omFPm43fgLN8uScWVfoq7FhSPgTQjhNKMGPuYX","/ip4/172.18.44.122/tcp/35693/ws/p2p/16Uiu2HAmJKd4Y2omFPm43fgLN8uScWVfoq7FhSPgTQjhNKMGPuYX"],"enrUri":"enr:-L24QN006h0gJYnKRIJrYJgiZOYZuf79pDHqwlYu_AvIkkWgOOzZ5CH6pxv5Qcr4htvyRC79QkU-HVOh5kOJYAmbfYYCgmlkgnY0gmlwhKwSLHqKbXVsdGlhZGRyc5YACASsEix6BotsAAoErBIsegaLbd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVDADyWWvYvh7Jsnd6Kg36jd-Hs-m3ywOHl8O7Hj3m1SDdGNwgotsg3VkcIKLboV3YWt1MgE"}'
2025-02-12 04:04:22.655 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:04:22.656 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35691/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.50.181/tcp/22082/p2p/16Uiu2HAm3rKhe7amtGtzcV2ghucZiPTLuCWrUiJR2FLcGR8ufUMx"]'
2025-02-12 04:04:22.694 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:22.703 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:04:22.704 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-12_04-04-20__4c0a2c2c-63d2-4021-80e9-cabc730b36d2__wakuorg_nwaku:latest.log
2025-02-12 04:04:22.704 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:04:22.704 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:04:22.705 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:04:22.705 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.45.141
2025-02-12 04:04:22.706 DEBUG [src.node.docker_mananger] Generated ports ['57182', '57183', '57184', '57185', '57186']
2025-02-12 04:04:22.706 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:04:22.706 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:04:22.706 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:04:22.706 DEBUG [src.node.docker_mananger] docker run -i -t -p 57182:57182 -p 57183:57183 -p 57184:57184 -p 57185:57185 -p 57186:57186 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57184 --rest-port=57182 --tcp-port=57183 --discv5-udp-port=57185 --rest-address=0.0.0.0 --nat=extip:172.18.45.141 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ced8a47a63b7ac4fd4838515abc21ce87dc4c8aedbf1abd908efc50c53902e5d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57186 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFKNDkyhJX9NAP1-YWevb7WT1XJDfZQ46ypdwpRKXpnjWoYRPySZnpssrGc0x0G1rhUnVcg_CeWGf4RNfrSiBgMCgmlkgnY0gmlwhKwSMrWKbXVsdGlhZGRyc5YACASsEjK1BlZCAAoErBIytQZWQ90DgnJzhQADAQAAiXNlY3AyNTZrMaECfS4WL-SvHXJ44Vv7HID-23PRIs1KVMgjMEG0eOLAzJuDdGNwglZCg3VkcIJWRIV3YWt1Mgk --lightpushnode=/ip4/172.18.50.181/tcp/22082/p2p/16Uiu2HAm3rKhe7amtGtzcV2ghucZiPTLuCWrUiJR2FLcGR8ufUMx --lightpush=true --relay=false
2025-02-12 04:04:22.944 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.45.141 waku f6c73c5e4a80c7642c7caf9fe648db2a2f7cb9c031828cdb223295c8796835d0
2025-02-12 04:04:22.994 DEBUG [src.node.docker_mananger] Container started with ID f6c73c5e4a80. Setting up logs at ./log/docker/lightpush_node1_2025-02-12_04-04-20__4c0a2c2c-63d2-4021-80e9-cabc730b36d2__wakuorg_nwaku:latest.log
2025-02-12 04:04:22.994 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57182
2025-02-12 04:04:22.994 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:04:23.995 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57182/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:23.998 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:04:23.998 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:04:23.998 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57182/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:24.000 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.141/tcp/57183/p2p/16Uiu2HAmGdd3aZQonqN8cxVbmnCDASFgVbksDvHn9LnVaWoYoFGr","/ip4/172.18.45.141/tcp/57184/ws/p2p/16Uiu2HAmGdd3aZQonqN8cxVbmnCDASFgVbksDvHn9LnVaWoYoFGr"],"enrUri":"enr:-L24QEsHtT13rwEiZufOa_NN01fLKUCkU7aC87pDCez8rY4wFQHtsu79Ha8OewAdpaZiP9zsYfWjbmk5yYuIaPD4ydcCgmlkgnY0gmlwhKwSLY2KbXVsdGlhZGRyc5YACASsEi2NBt9fAAoErBItjQbfYN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDOxUTrOl3GX6Fum4vVu2hfM0UyXmh8_J02sNgDJl1IC-DdGNwgt9fg3VkcILfYYV3YWt1Mgg"}'
2025-02-12 04:04:24.000 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:04:24.001 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57182/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.50.181/tcp/22082/p2p/16Uiu2HAm3rKhe7amtGtzcV2ghucZiPTLuCWrUiJR2FLcGR8ufUMx"]'
2025-02-12 04:04:24.039 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:24.040 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57182/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.44.122/tcp/35692/p2p/16Uiu2HAmJKd4Y2omFPm43fgLN8uScWVfoq7FhSPgTQjhNKMGPuYX"]'
2025-02-12 04:04:24.068 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:24.069 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22081/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:04:24.074 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:24.076 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35691/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:04:24.083 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:24.085 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57182/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "timestamp": 1739333064084954624}}'
2025-02-12 04:04:24.087 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:57182/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-12 04:04:24.089 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:04:24.090 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:04:24.090 DEBUG [src.node.waku_node] Stopping container with id f31b6ea2ebf0
2025-02-12 04:04:24.846 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:24.846 DEBUG [src.node.waku_node] Stopping container with id a30e990b1147
2025-02-12 04:04:25.658 ERROR [src.node.docker_mananger] Max retries reached for container f31b6ea2ebf0. Exiting log stream.
2025-02-12 04:04:26.112 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:26.113 DEBUG [src.node.waku_node] Stopping container with id f6c73c5e4a80
2025-02-12 04:04:26.925 ERROR [src.node.docker_mananger] Max retries reached for container a30e990b1147. Exiting log stream.
2025-02-12 04:04:27.260 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:27.261 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:04:27.268 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:04:27.274 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:04:27.279 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
