2025-02-12 04:05:52.590 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:05:52.590 DEBUG [tests.conftest] Running test: test_publish_without_subscribing_via_api_works with id: 2025-02-12_04-05-52__738673b2-6fab-4dbd-83d0-0e94d62c23dd
2025-02-12 04:05:52.591 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:05:52.591 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-12 04:05:52.591 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-12 04:05:52.598 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:05:52.599 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-12_04-05-52__738673b2-6fab-4dbd-83d0-0e94d62c23dd__wakuorg_nwaku:latest.log
2025-02-12 04:05:52.599 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:05:52.599 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:05:52.600 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:05:52.600 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.2.193
2025-02-12 04:05:52.600 DEBUG [src.node.docker_mananger] Generated ports ['16766', '16767', '16768', '16769', '16770']
2025-02-12 04:05:52.601 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:05:52.601 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:05:52.601 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:05:52.601 DEBUG [src.node.docker_mananger] docker run -i -t -p 16766:16766 -p 16767:16767 -p 16768:16768 -p 16769:16769 -p 16770:16770 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16768 --rest-port=16766 --tcp-port=16767 --discv5-udp-port=16769 --rest-address=0.0.0.0 --nat=extip:172.18.2.193 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=81bc5de076b6f597bfbe8b4e14e3daa0b6beb076ec41bc4be4c2abbbecc8fdde --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16770 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2025-02-12 04:05:52.835 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.2.193 waku 8037f8e9b84ce1a9b8b1283c0f50d4252dd5287b39859d9a4dc2f49c10c2ce5c
2025-02-12 04:05:52.883 DEBUG [src.node.docker_mananger] Container started with ID 8037f8e9b84c. Setting up logs at ./log/docker/node1_2025-02-12_04-05-52__738673b2-6fab-4dbd-83d0-0e94d62c23dd__wakuorg_nwaku:latest.log
2025-02-12 04:05:52.885 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 16766
2025-02-12 04:05:52.885 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:05:53.266 ERROR [src.node.docker_mananger] Max retries reached for container 30b42def8a50. Exiting log stream.
2025-02-12 04:05:53.885 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16766/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:53.888 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:05:53.888 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:05:53.889 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16766/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:53.891 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.2.193/tcp/16767/p2p/16Uiu2HAmSfZw9bw7TLaWKABypzEZGhh5huwFrqSk9vh74ja7xuzQ","/ip4/172.18.2.193/tcp/16768/ws/p2p/16Uiu2HAmSfZw9bw7TLaWKABypzEZGhh5huwFrqSk9vh74ja7xuzQ"],"enrUri":"enr:-L24QNYI7bGLm4vikk0dhF-2PAlElNUjGsvGE_cGXX_6vkTPI520y7k5JtUmJcf-ji6-kCYv14lXDHVupc5uFd9gr_oCgmlkgnY0gmlwhKwSAsGKbXVsdGlhZGRyc5YACASsEgLBBkF_AAoErBICwQZBgN0DgnJzhQACAQAAiXNlY3AyNTZrMaED0CmXG_UcUE2hBHn4lACjfSm5Ogj11Eikf3qpjxtejumDdGNwgkF_g3VkcIJBgYV3YWt1MgU"}'
2025-02-12 04:05:53.891 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:05:53.898 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:05:53.898 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-12_04-05-52__738673b2-6fab-4dbd-83d0-0e94d62c23dd__wakuorg_nwaku:latest.log
2025-02-12 04:05:53.898 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:05:53.898 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:05:53.899 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:05:53.900 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.141.134
2025-02-12 04:05:53.900 DEBUG [src.node.docker_mananger] Generated ports ['36626', '36627', '36628', '36629', '36630']
2025-02-12 04:05:53.900 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:05:53.900 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:05:53.900 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:05:53.900 DEBUG [src.node.docker_mananger] docker run -i -t -p 36626:36626 -p 36627:36627 -p 36628:36628 -p 36629:36629 -p 36630:36630 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36628 --rest-port=36626 --tcp-port=36627 --discv5-udp-port=36629 --rest-address=0.0.0.0 --nat=extip:172.18.141.134 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=d43fb5ba2a40eb98b880a99dbb9aead4a9ecc3bc4b5e237fa05fa13694b436ff --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36630 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QNYI7bGLm4vikk0dhF-2PAlElNUjGsvGE_cGXX_6vkTPI520y7k5JtUmJcf-ji6-kCYv14lXDHVupc5uFd9gr_oCgmlkgnY0gmlwhKwSAsGKbXVsdGlhZGRyc5YACASsEgLBBkF_AAoErBICwQZBgN0DgnJzhQACAQAAiXNlY3AyNTZrMaED0CmXG_UcUE2hBHn4lACjfSm5Ogj11Eikf3qpjxtejumDdGNwgkF_g3VkcIJBgYV3YWt1MgU --content-topic=/myapp/1/latest/proto
2025-02-12 04:05:54.135 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.141.134 waku 6540d8a159182ab15575817952f693a61c2c14a3a1e8996039e2d808de030ca4
2025-02-12 04:05:54.185 DEBUG [src.node.docker_mananger] Container started with ID 6540d8a15918. Setting up logs at ./log/docker/node2_2025-02-12_04-05-52__738673b2-6fab-4dbd-83d0-0e94d62c23dd__wakuorg_nwaku:latest.log
2025-02-12 04:05:54.186 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36626
2025-02-12 04:05:54.186 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:05:55.187 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36626/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:55.199 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:05:55.202 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:05:55.202 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36626/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:55.207 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.141.134/tcp/36627/p2p/16Uiu2HAm7m6md4TRUyhGysMvSmBtBF9CSmSKEi5RcL3uzT2geTR7","/ip4/172.18.141.134/tcp/36628/ws/p2p/16Uiu2HAm7m6md4TRUyhGysMvSmBtBF9CSmSKEi5RcL3uzT2geTR7"],"enrUri":"enr:-L24QDNbgkj7DZn9wyxwJDQ8Ek0XXvxgpnX9Q8glLt1MsgBYCtZmW5jau2ZL3wcJjH2-ug6vFkxY2a4uEK3bXMgczyICgmlkgnY0gmlwhKwSjYaKbXVsdGlhZGRyc5YACASsEo2GBo8TAAoErBKNhgaPFN0DgnJzhQACAQAAiXNlY3AyNTZrMaECt0ZPDfYo2uxjOOWwYuKTY9WVH-09lik-nFjRASEg-vaDdGNwgo8Tg3VkcIKPFYV3YWt1MgE"}'
2025-02-12 04:05:55.207 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:05:55.208 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36626/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.2.193/tcp/16767/p2p/16Uiu2HAmSfZw9bw7TLaWKABypzEZGhh5huwFrqSk9vh74ja7xuzQ"]'
2025-02-12 04:05:55.213 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:55.213 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16766/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:05:55.218 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:55.218 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36626/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:05:55.223 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:55.225 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:05:55.226 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:05:55.227 DEBUG [src.node.waku_node] Stopping container with id 8037f8e9b84c
2025-02-12 04:05:56.340 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:05:56.340 DEBUG [src.node.waku_node] Stopping container with id 6540d8a15918
2025-02-12 04:05:57.153 ERROR [src.node.docker_mananger] Max retries reached for container 8037f8e9b84c. Exiting log stream.
2025-02-12 04:05:57.831 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:05:57.834 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:05:57.838 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:05:57.843 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
