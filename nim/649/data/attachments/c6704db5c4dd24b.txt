2025-02-12 04:05:27.102 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:05:27.102 DEBUG [tests.conftest] Running test: test_empty_cursor with id: 2025-02-12_04-05-27__1f964ee1-2083-4e60-bc81-ccca3830d698
2025-02-12 04:05:27.103 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:05:27.103 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-12 04:05:27.103 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-12 04:05:27.110 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:05:27.110 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-12_04-05-27__1f964ee1-2083-4e60-bc81-ccca3830d698__wakuorg_nwaku:latest.log
2025-02-12 04:05:27.110 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:05:27.110 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:05:27.111 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:05:27.112 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.215.18
2025-02-12 04:05:27.112 DEBUG [src.node.docker_mananger] Generated ports ['36915', '36916', '36917', '36918', '36919']
2025-02-12 04:05:27.112 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:05:27.112 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:05:27.112 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:05:27.112 DEBUG [src.node.docker_mananger] docker run -i -t -p 36915:36915 -p 36916:36916 -p 36917:36917 -p 36918:36918 -p 36919:36919 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36917 --rest-port=36915 --tcp-port=36916 --discv5-udp-port=36918 --rest-address=0.0.0.0 --nat=extip:172.18.215.18 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0ecee5bfdbdd7aecf117ea3bb4db452babc21f780a4e7bc21f5066dd8b5fc1b8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36919 --metrics-logging=true --store=true --relay=true
2025-02-12 04:05:27.360 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.215.18 waku 6833bdc9622106d20831c903ebb312b23dccbeca4d1466b3f6653aff37b42e71
2025-02-12 04:05:27.413 DEBUG [src.node.docker_mananger] Container started with ID 6833bdc96221. Setting up logs at ./log/docker/publishing_node1_2025-02-12_04-05-27__1f964ee1-2083-4e60-bc81-ccca3830d698__wakuorg_nwaku:latest.log
2025-02-12 04:05:27.415 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36915
2025-02-12 04:05:27.415 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:05:27.909 ERROR [src.node.docker_mananger] Max retries reached for container 4203f6a01322. Exiting log stream.
2025-02-12 04:05:28.416 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36915/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:28.419 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:05:28.419 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:05:28.419 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36915/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:28.421 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.215.18/tcp/36916/p2p/16Uiu2HAmPpDYJWopzwXMsFpW61DC6nAymuqtHLPyKKB8fAA1UNCR","/ip4/172.18.215.18/tcp/36917/ws/p2p/16Uiu2HAmPpDYJWopzwXMsFpW61DC6nAymuqtHLPyKKB8fAA1UNCR"],"enrUri":"enr:-L24QDStZwUDrQ9BFOv73qW2gXbfFPu5_WNAhUrulG13R860aHCX57I4lSs887rfH3eqvX2W2XXNyHC45CP9SC0Q0D8CgmlkgnY0gmlwhKwS1xKKbXVsdGlhZGRyc5YACASsEtcSBpA0AAoErBLXEgaQNd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDpc2ygyfGDp_VnzL71h2k0u7E96CaRb_vxI8AJdIthaKDdGNwgpA0g3VkcIKQNoV3YWt1MgM"}'
2025-02-12 04:05:28.422 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:05:28.428 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:05:28.428 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-12_04-05-27__1f964ee1-2083-4e60-bc81-ccca3830d698__wakuorg_nwaku:latest.log
2025-02-12 04:05:28.429 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:05:28.429 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:05:28.430 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:05:28.430 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.221.53
2025-02-12 04:05:28.430 DEBUG [src.node.docker_mananger] Generated ports ['28652', '28653', '28654', '28655', '28656']
2025-02-12 04:05:28.430 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:05:28.431 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:05:28.431 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:05:28.431 DEBUG [src.node.docker_mananger] docker run -i -t -p 28652:28652 -p 28653:28653 -p 28654:28654 -p 28655:28655 -p 28656:28656 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28654 --rest-port=28652 --tcp-port=28653 --discv5-udp-port=28655 --rest-address=0.0.0.0 --nat=extip:172.18.221.53 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fcbcbafd8bd3262be2afef15fbad4599fb412be2ca4c3bd33baa70ca12ffb1c6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28656 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QDStZwUDrQ9BFOv73qW2gXbfFPu5_WNAhUrulG13R860aHCX57I4lSs887rfH3eqvX2W2XXNyHC45CP9SC0Q0D8CgmlkgnY0gmlwhKwS1xKKbXVsdGlhZGRyc5YACASsEtcSBpA0AAoErBLXEgaQNd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDpc2ygyfGDp_VnzL71h2k0u7E96CaRb_vxI8AJdIthaKDdGNwgpA0g3VkcIKQNoV3YWt1MgM --storenode=/ip4/172.18.215.18/tcp/36916/p2p/16Uiu2HAmPpDYJWopzwXMsFpW61DC6nAymuqtHLPyKKB8fAA1UNCR --store=true --relay=true
2025-02-12 04:05:28.664 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.221.53 waku cc3e596ee9012523be4358b1008903c50d9b8fb9068d649284f04773764463f7
2025-02-12 04:05:28.720 DEBUG [src.node.docker_mananger] Container started with ID cc3e596ee901. Setting up logs at ./log/docker/store_node1_2025-02-12_04-05-27__1f964ee1-2083-4e60-bc81-ccca3830d698__wakuorg_nwaku:latest.log
2025-02-12 04:05:28.720 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28652
2025-02-12 04:05:28.720 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:05:29.721 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28652/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:29.724 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:05:29.724 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:05:29.724 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28652/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:29.726 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.221.53/tcp/28653/p2p/16Uiu2HAmCx7H3j3nM9ezrpjKr3PbtTqQ8ApxaXSCWKpJyTcNfZxj","/ip4/172.18.221.53/tcp/28654/ws/p2p/16Uiu2HAmCx7H3j3nM9ezrpjKr3PbtTqQ8ApxaXSCWKpJyTcNfZxj"],"enrUri":"enr:-L24QJ-3tqS8bQzXxCOc9EJUsaZ2imMUR638lgI1Auxr-LxWSFlL4h6PdjTBkTqtK87tFJHAtcAYCamdLZM6-pJW8YYCgmlkgnY0gmlwhKwS3TWKbXVsdGlhZGRyc5YACASsEt01Bm_tAAoErBLdNQZv7t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDBGK0uyZLBskstURxo7slpBr8AbodMpJ-CBO7RgC3_8CDdGNwgm_tg3VkcIJv74V3YWt1MgM"}'
2025-02-12 04:05:29.726 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:05:29.727 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28652/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.215.18/tcp/36916/p2p/16Uiu2HAmPpDYJWopzwXMsFpW61DC6nAymuqtHLPyKKB8fAA1UNCR"]'
2025-02-12 04:05:29.729 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:29.730 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36915/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:05:29.732 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:29.732 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28652/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:05:29.734 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:29.735 DEBUG [src.steps.store] Relaying message
2025-02-12 04:05:29.736 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36915/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:05:29.741 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:29.741 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:05:29.942 DEBUG [src.steps.store] Relaying message
2025-02-12 04:05:29.942 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36915/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:05:29.950 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:29.950 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:05:30.151 DEBUG [src.steps.store] Relaying message
2025-02-12 04:05:30.151 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36915/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:05:30.157 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:30.157 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:05:30.358 DEBUG [src.steps.store] Relaying message
2025-02-12 04:05:30.358 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36915/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:05:30.364 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:30.365 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:05:30.565 DEBUG [src.steps.store] Relaying message
2025-02-12 04:05:30.566 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36915/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV80", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:05:30.572 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:30.573 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:05:30.774 DEBUG [src.steps.store] Relaying message
2025-02-12 04:05:30.774 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36915/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV81", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:05:30.780 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:30.781 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:05:30.981 DEBUG [src.steps.store] Relaying message
2025-02-12 04:05:30.982 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36915/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV82", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:05:30.988 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:30.988 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:05:31.189 DEBUG [src.steps.store] Relaying message
2025-02-12 04:05:31.189 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36915/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV83", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:05:31.195 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:31.195 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:05:31.396 DEBUG [src.steps.store] Relaying message
2025-02-12 04:05:31.396 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36915/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV84", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:05:31.403 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:31.403 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:05:31.604 DEBUG [src.steps.store] Relaying message
2025-02-12 04:05:31.604 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36915/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV85", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:05:31.611 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:31.612 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:05:31.813 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36915/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:31.816 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x464a843e0f056f3b912199ea52cfb64724826d4f5deb1bfe40f9d873ea671b53"},{"messageHash":"0xeb045fae431a5b638f8cd7d84e37e9a19a0b25a28267be756cc16fe28134e915"},{"messageHash":"0xcf180c67c482f8d826ed8b64ff993b34db96a4268b2bc7b4c6252011dea4ef1d"},{"messageHash":"0x2976c4614f739b01872137059592b2f874ec6ef6e02b79aec90d3591736d18b9"},{"messageHash":"0xb359e21176b00b99b7f4c6ad2af4dc3009eb151d66c8cf61f6bd1ff9ab974556"}],"paginationCursor":"0xb359e21176b00b99b7f4c6ad2af4dc3009eb151d66c8cf61f6bd1ff9ab974556"}'
2025-02-12 04:05:31.817 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28652/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:31.819 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x464a843e0f056f3b912199ea52cfb64724826d4f5deb1bfe40f9d873ea671b53"},{"messageHash":"0xeb045fae431a5b638f8cd7d84e37e9a19a0b25a28267be756cc16fe28134e915"},{"messageHash":"0xcf180c67c482f8d826ed8b64ff993b34db96a4268b2bc7b4c6252011dea4ef1d"},{"messageHash":"0x2976c4614f739b01872137059592b2f874ec6ef6e02b79aec90d3591736d18b9"},{"messageHash":"0xb359e21176b00b99b7f4c6ad2af4dc3009eb151d66c8cf61f6bd1ff9ab974556"}],"paginationCursor":"0xb359e21176b00b99b7f4c6ad2af4dc3009eb151d66c8cf61f6bd1ff9ab974556"}'
2025-02-12 04:05:31.821 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:05:31.822 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:05:31.822 DEBUG [src.node.waku_node] Stopping container with id 6833bdc96221
2025-02-12 04:05:32.968 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:05:32.969 DEBUG [src.node.waku_node] Stopping container with id cc3e596ee901
2025-02-12 04:05:33.782 ERROR [src.node.docker_mananger] Max retries reached for container 6833bdc96221. Exiting log stream.
2025-02-12 04:05:34.493 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:05:34.494 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:05:34.501 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:05:34.508 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
