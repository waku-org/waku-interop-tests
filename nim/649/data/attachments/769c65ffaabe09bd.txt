2025-02-12 04:04:14.251 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:04:14.252 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_meta with id: 2025-02-12_04-04-14__fe9d02ca-54fc-47fa-8d59-0e84fc583fa9
2025-02-12 04:04:14.252 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:04:14.252 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-12 04:04:14.258 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:04:14.258 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-12_04-04-14__fe9d02ca-54fc-47fa-8d59-0e84fc583fa9__wakuorg_nwaku:latest.log
2025-02-12 04:04:14.258 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:04:14.259 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:04:14.260 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:04:14.260 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.112.167
2025-02-12 04:04:14.260 DEBUG [src.node.docker_mananger] Generated ports ['4106', '4107', '4108', '4109', '4110']
2025-02-12 04:04:14.260 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:04:14.260 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:04:14.261 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:04:14.261 DEBUG [src.node.docker_mananger] docker run -i -t -p 4106:4106 -p 4107:4107 -p 4108:4108 -p 4109:4109 -p 4110:4110 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4108 --rest-port=4106 --tcp-port=4107 --discv5-udp-port=4109 --rest-address=0.0.0.0 --nat=extip:172.18.112.167 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ddafc1e4f94b2bfdb85b7fcf9855b9ccf32cd1dbb1afe29fc58e3c4409cea5df --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4110 --metrics-logging=true --lightpush=true --relay=true
2025-02-12 04:04:14.485 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.112.167 waku ac1dbde84ab2800ee95c9b66a0fc10d902a95f53a0628f0c21eae690f8968461
2025-02-12 04:04:14.531 DEBUG [src.node.docker_mananger] Container started with ID ac1dbde84ab2. Setting up logs at ./log/docker/receiving_node1_2025-02-12_04-04-14__fe9d02ca-54fc-47fa-8d59-0e84fc583fa9__wakuorg_nwaku:latest.log
2025-02-12 04:04:14.531 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 4106
2025-02-12 04:04:14.531 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:04:15.057 ERROR [src.node.docker_mananger] Max retries reached for container e563c43a7d68. Exiting log stream.
2025-02-12 04:04:15.532 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4106/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:15.535 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:04:15.535 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:04:15.535 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4106/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:15.537 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.112.167/tcp/4107/p2p/16Uiu2HAm2zmYAz5pdvJwxdzpuHtVXvPiomENxXrqPioLuWWT5VsL","/ip4/172.18.112.167/tcp/4108/ws/p2p/16Uiu2HAm2zmYAz5pdvJwxdzpuHtVXvPiomENxXrqPioLuWWT5VsL"],"enrUri":"enr:-L24QKiZFwBhQa2Tz_xOFWRFFEVuW6qKig3or4tMXV5-zH6HCEs2IVTELhmCyZeXORpFxs8fg64tb6wAON1RPfkPcNYCgmlkgnY0gmlwhKwScKeKbXVsdGlhZGRyc5YACASsEnCnBhALAAoErBJwpwYQDN0DgnJzhQADAQAAiXNlY3AyNTZrMaECcHxCiyOPCF0igAYGIkP3yPC3uUtfR7GSqPMpmro-NPeDdGNwghALg3VkcIIQDYV3YWt1Mgk"}'
2025-02-12 04:04:15.538 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:04:15.544 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:04:15.544 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-12_04-04-14__fe9d02ca-54fc-47fa-8d59-0e84fc583fa9__wakuorg_nwaku:latest.log
2025-02-12 04:04:15.544 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:04:15.545 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:04:15.546 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:04:15.546 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.99.244
2025-02-12 04:04:15.546 DEBUG [src.node.docker_mananger] Generated ports ['64455', '64456', '64457', '64458', '64459']
2025-02-12 04:04:15.546 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:04:15.547 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:04:15.547 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:04:15.547 DEBUG [src.node.docker_mananger] docker run -i -t -p 64455:64455 -p 64456:64456 -p 64457:64457 -p 64458:64458 -p 64459:64459 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64457 --rest-port=64455 --tcp-port=64456 --discv5-udp-port=64458 --rest-address=0.0.0.0 --nat=extip:172.18.99.244 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fcabc1a247fedd44fbec10bbbfd980059290dc2c6daaaecfea03717c484b02cc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64459 --metrics-logging=true --lightpush=false --relay=true
2025-02-12 04:04:15.763 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.99.244 waku 5308ef3925e131ffa009c0d380827bb966519ecc3c0699cbd07defcf2348ca05
2025-02-12 04:04:15.815 DEBUG [src.node.docker_mananger] Container started with ID 5308ef3925e1. Setting up logs at ./log/docker/receiving_node2_2025-02-12_04-04-14__fe9d02ca-54fc-47fa-8d59-0e84fc583fa9__wakuorg_nwaku:latest.log
2025-02-12 04:04:15.816 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 64455
2025-02-12 04:04:15.816 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:04:16.816 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64455/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:16.819 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:04:16.819 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:04:16.819 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64455/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:16.822 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.99.244/tcp/64456/p2p/16Uiu2HAkvfw5EKdfBVXu8qrDKnLfSNnSizRo3vUKL8TAssPTf84R","/ip4/172.18.99.244/tcp/64457/ws/p2p/16Uiu2HAkvfw5EKdfBVXu8qrDKnLfSNnSizRo3vUKL8TAssPTf84R"],"enrUri":"enr:-L24QMKBRiCDTCmCnsXWtlzSS7xHN6YVG5RRcPEbaVor50E2G7TFxHmVJ8X67d9yWlXYB5C79v9wg3vQg8NGJ7K13r0CgmlkgnY0gmlwhKwSY_SKbXVsdGlhZGRyc5YACASsEmP0BvvIAAoErBJj9Ab7yd0DgnJzhQADAQAAiXNlY3AyNTZrMaECEoLigkzPzn5cyd9GTTWd58QI1m1TjBK4gkVaravhNJKDdGNwgvvIg3VkcIL7yoV3YWt1MgE"}'
2025-02-12 04:04:16.822 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:04:16.822 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64455/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.112.167/tcp/4107/p2p/16Uiu2HAm2zmYAz5pdvJwxdzpuHtVXvPiomENxXrqPioLuWWT5VsL"]'
2025-02-12 04:04:16.859 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:16.868 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:04:16.868 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-12_04-04-14__fe9d02ca-54fc-47fa-8d59-0e84fc583fa9__wakuorg_nwaku:latest.log
2025-02-12 04:04:16.868 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:04:16.868 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:04:16.870 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:04:16.870 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.66.59
2025-02-12 04:04:16.870 DEBUG [src.node.docker_mananger] Generated ports ['47771', '47772', '47773', '47774', '47775']
2025-02-12 04:04:16.870 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:04:16.870 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:04:16.870 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:04:16.870 DEBUG [src.node.docker_mananger] docker run -i -t -p 47771:47771 -p 47772:47772 -p 47773:47773 -p 47774:47774 -p 47775:47775 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47773 --rest-port=47771 --tcp-port=47772 --discv5-udp-port=47774 --rest-address=0.0.0.0 --nat=extip:172.18.66.59 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e73a7837906e2c1f70bbd6d32cf58fd9034e4aa3d67abf2aae00abae1e8bc988 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47775 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QKiZFwBhQa2Tz_xOFWRFFEVuW6qKig3or4tMXV5-zH6HCEs2IVTELhmCyZeXORpFxs8fg64tb6wAON1RPfkPcNYCgmlkgnY0gmlwhKwScKeKbXVsdGlhZGRyc5YACASsEnCnBhALAAoErBJwpwYQDN0DgnJzhQADAQAAiXNlY3AyNTZrMaECcHxCiyOPCF0igAYGIkP3yPC3uUtfR7GSqPMpmro-NPeDdGNwghALg3VkcIIQDYV3YWt1Mgk --lightpushnode=/ip4/172.18.112.167/tcp/4107/p2p/16Uiu2HAm2zmYAz5pdvJwxdzpuHtVXvPiomENxXrqPioLuWWT5VsL --lightpush=true --relay=false
2025-02-12 04:04:17.109 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.66.59 waku 0574b1de3f52f88dba25c6fad3fd2cd6f3a24dcc8fc4e125ead560a281b5999d
2025-02-12 04:04:17.159 DEBUG [src.node.docker_mananger] Container started with ID 0574b1de3f52. Setting up logs at ./log/docker/lightpush_node1_2025-02-12_04-04-14__fe9d02ca-54fc-47fa-8d59-0e84fc583fa9__wakuorg_nwaku:latest.log
2025-02-12 04:04:17.159 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 47771
2025-02-12 04:04:17.159 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:04:18.160 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47771/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:18.163 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:04:18.163 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:04:18.163 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47771/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:18.165 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.66.59/tcp/47772/p2p/16Uiu2HAmGSvtzQFBqXSBnQQPek6TRsUSuSRMewjgvc28FmZ4zn44","/ip4/172.18.66.59/tcp/47773/ws/p2p/16Uiu2HAmGSvtzQFBqXSBnQQPek6TRsUSuSRMewjgvc28FmZ4zn44"],"enrUri":"enr:-L24QB4JwLXIZdF48hR57LJVLrzOxo3xrh6QO1-RrQOplc7RA70nIWqIp9BHDC_OcV7l-gkn_lygxJQtsPBSkfrN8G0CgmlkgnY0gmlwhKwSQjuKbXVsdGlhZGRyc5YACASsEkI7BrqcAAoErBJCOwa6nd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDOFffiNpmd61fez9RMPWSffO0ZBjb7mt0Uybe7Ynj6R2DdGNwgrqcg3VkcIK6noV3YWt1Mgg"}'
2025-02-12 04:04:18.165 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:04:18.166 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47771/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.112.167/tcp/4107/p2p/16Uiu2HAm2zmYAz5pdvJwxdzpuHtVXvPiomENxXrqPioLuWWT5VsL"]'
2025-02-12 04:04:18.201 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:18.201 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47771/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.99.244/tcp/64456/p2p/16Uiu2HAkvfw5EKdfBVXu8qrDKnLfSNnSizRo3vUKL8TAssPTf84R"]'
2025-02-12 04:04:18.230 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:18.232 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4106/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:04:18.238 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:18.239 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64455/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:04:18.244 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:18.247 DEBUG [src.steps.light_push] Lightpushing message
2025-02-12 04:04:18.247 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47771/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739333058247046656, "meta": "Light push works!!"}}'
2025-02-12 04:04:18.252 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:47771/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
2025-02-12 04:04:18.254 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:04:18.255 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:04:18.255 DEBUG [src.node.waku_node] Stopping container with id ac1dbde84ab2
2025-02-12 04:04:19.027 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:19.027 DEBUG [src.node.waku_node] Stopping container with id 5308ef3925e1
2025-02-12 04:04:19.860 ERROR [src.node.docker_mananger] Max retries reached for container ac1dbde84ab2. Exiting log stream.
2025-02-12 04:04:20.529 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:20.530 DEBUG [src.node.waku_node] Stopping container with id 0574b1de3f52
2025-02-12 04:04:21.341 ERROR [src.node.docker_mananger] Max retries reached for container 5308ef3925e1. Exiting log stream.
2025-02-12 04:04:22.058 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:22.059 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:04:22.072 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:04:22.077 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:04:22.082 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
