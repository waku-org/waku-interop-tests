2025-02-12 04:05:20.030 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:05:20.031 DEBUG [tests.conftest] Running test: test_time_filter_matches_one_message with id: 2025-02-12_04-05-20__3dcd41e9-444e-4c48-b950-c024eac64efd
2025-02-12 04:05:20.031 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:05:20.031 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-12 04:05:20.031 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-12 04:05:20.037 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:05:20.038 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-12_04-05-20__3dcd41e9-444e-4c48-b950-c024eac64efd__wakuorg_nwaku:latest.log
2025-02-12 04:05:20.038 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:05:20.038 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:05:20.039 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:05:20.039 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.117.117
2025-02-12 04:05:20.039 DEBUG [src.node.docker_mananger] Generated ports ['14203', '14204', '14205', '14206', '14207']
2025-02-12 04:05:20.040 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:05:20.040 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:05:20.040 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:05:20.040 DEBUG [src.node.docker_mananger] docker run -i -t -p 14203:14203 -p 14204:14204 -p 14205:14205 -p 14206:14206 -p 14207:14207 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14205 --rest-port=14203 --tcp-port=14204 --discv5-udp-port=14206 --rest-address=0.0.0.0 --nat=extip:172.18.117.117 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e55127b9c5da87bf4faf1dfbb8ca5ddf0711d36a0ac3e9ae9ebf3cac5da6cdef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14207 --metrics-logging=true --store=true --relay=true
2025-02-12 04:05:20.275 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.117.117 waku 9a7faed37c2147a2127ea22607818735fc4f6c572dd3cbd5d41860a168bff6df
2025-02-12 04:05:20.339 DEBUG [src.node.docker_mananger] Container started with ID 9a7faed37c21. Setting up logs at ./log/docker/publishing_node1_2025-02-12_04-05-20__3dcd41e9-444e-4c48-b950-c024eac64efd__wakuorg_nwaku:latest.log
2025-02-12 04:05:20.339 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14203
2025-02-12 04:05:20.340 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:05:20.837 ERROR [src.node.docker_mananger] Max retries reached for container 2a081246e379. Exiting log stream.
2025-02-12 04:05:21.341 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14203/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:21.344 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:05:21.344 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:05:21.344 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14203/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:21.347 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.117.117/tcp/14204/p2p/16Uiu2HAm42QZH3dCF5GP23coEYVgfgCicmaLFcZhUy9R1LiyxFy4","/ip4/172.18.117.117/tcp/14205/ws/p2p/16Uiu2HAm42QZH3dCF5GP23coEYVgfgCicmaLFcZhUy9R1LiyxFy4"],"enrUri":"enr:-L24QGJak0HPM6b8szmR8hjDt5CKxRIGg1OQlDXiJU0VmsbLF3PLWH2Ml2rzs5p38AA_6WXM7G_zRURqwcmDGFj-HzACgmlkgnY0gmlwhKwSdXWKbXVsdGlhZGRyc5YACASsEnV1Bjd8AAoErBJ1dQY3fd0DgnJzhQADAQAAiXNlY3AyNTZrMaECf8Nintw_5bcAQsUvkn3vAfA1gfiZLtE5dyO55ZSgDCODdGNwgjd8g3VkcII3foV3YWt1MgM"}'
2025-02-12 04:05:21.347 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:05:21.354 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:05:21.354 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-12_04-05-20__3dcd41e9-444e-4c48-b950-c024eac64efd__wakuorg_nwaku:latest.log
2025-02-12 04:05:21.354 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:05:21.354 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:05:21.356 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:05:21.356 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.121.122
2025-02-12 04:05:21.356 DEBUG [src.node.docker_mananger] Generated ports ['43452', '43453', '43454', '43455', '43456']
2025-02-12 04:05:21.356 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:05:21.356 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:05:21.356 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:05:21.356 DEBUG [src.node.docker_mananger] docker run -i -t -p 43452:43452 -p 43453:43453 -p 43454:43454 -p 43455:43455 -p 43456:43456 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43454 --rest-port=43452 --tcp-port=43453 --discv5-udp-port=43455 --rest-address=0.0.0.0 --nat=extip:172.18.121.122 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bbff04cd6aea2efffcc08f486af56bbaecae15e0dde9dfafbf8fffc110d4e080 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43456 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QGJak0HPM6b8szmR8hjDt5CKxRIGg1OQlDXiJU0VmsbLF3PLWH2Ml2rzs5p38AA_6WXM7G_zRURqwcmDGFj-HzACgmlkgnY0gmlwhKwSdXWKbXVsdGlhZGRyc5YACASsEnV1Bjd8AAoErBJ1dQY3fd0DgnJzhQADAQAAiXNlY3AyNTZrMaECf8Nintw_5bcAQsUvkn3vAfA1gfiZLtE5dyO55ZSgDCODdGNwgjd8g3VkcII3foV3YWt1MgM --storenode=/ip4/172.18.117.117/tcp/14204/p2p/16Uiu2HAm42QZH3dCF5GP23coEYVgfgCicmaLFcZhUy9R1LiyxFy4 --store=true --relay=true
2025-02-12 04:05:21.587 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.121.122 waku 7798abe4a509f436da57c5f04f5266f886fc6c886ad7a11a36cdb9c7f23527c8
2025-02-12 04:05:21.635 DEBUG [src.node.docker_mananger] Container started with ID 7798abe4a509. Setting up logs at ./log/docker/store_node1_2025-02-12_04-05-20__3dcd41e9-444e-4c48-b950-c024eac64efd__wakuorg_nwaku:latest.log
2025-02-12 04:05:21.637 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 43452
2025-02-12 04:05:21.637 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:05:22.638 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43452/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:22.641 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:05:22.641 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:05:22.641 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43452/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:22.643 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.121.122/tcp/43453/p2p/16Uiu2HAmP1nBUcpo5uyhDd1C5GV15D9G97F4XExCjsw2RESBMDH2","/ip4/172.18.121.122/tcp/43454/ws/p2p/16Uiu2HAmP1nBUcpo5uyhDd1C5GV15D9G97F4XExCjsw2RESBMDH2"],"enrUri":"enr:-L24QAQe4lt9oCLkxF06khB45NdIc6C9CtehH8KioeifOBTTFs9VK9HJgyx9chkhY-pxaTjrc5_6NukH5WjHiUooNLoCgmlkgnY0gmlwhKwSeXqKbXVsdGlhZGRyc5YACASsEnl6Bqm9AAoErBJ5egapvt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDmehOd2lOElBNAAyPEU6VEaYnZcH4RcZ3403IS98QXfGDdGNwgqm9g3VkcIKpv4V3YWt1MgM"}'
2025-02-12 04:05:22.644 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:05:22.644 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43452/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.117.117/tcp/14204/p2p/16Uiu2HAm42QZH3dCF5GP23coEYVgfgCicmaLFcZhUy9R1LiyxFy4"]'
2025-02-12 04:05:22.646 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:22.647 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14203/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:05:22.649 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:22.649 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43452/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:05:22.651 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:22.652 DEBUG [src.steps.store] Relaying message
2025-02-12 04:05:22.652 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14203/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:05:22.658 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:22.659 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:05:22.860 DEBUG [src.steps.store] Relaying message
2025-02-12 04:05:22.860 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14203/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:05:22.867 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:22.867 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:05:23.068 DEBUG [src.steps.store] Relaying message
2025-02-12 04:05:23.068 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14203/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:05:23.074 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:23.074 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:05:23.275 DEBUG [src.steps.store] Relaying message
2025-02-12 04:05:23.276 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14203/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:05:23.281 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:23.282 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:05:23.483 DEBUG [src.steps.store] Relaying message
2025-02-12 04:05:23.484 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14203/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:05:23.490 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:23.490 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:05:23.691 DEBUG [src.steps.store] Relaying message
2025-02-12 04:05:23.691 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14203/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:05:23.697 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:05:23.697 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:05:23.898 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14203/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739333119652400992&endTime=1739333119652600992&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:23.901 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x13e3dbc7b556825d97d4147c36932a0dd956a1a6efbc670303a4be5ed8eed7a3"}]}'
2025-02-12 04:05:23.902 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43452/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739333119652400992&endTime=1739333119652600992&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:05:23.905 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x13e3dbc7b556825d97d4147c36932a0dd956a1a6efbc670303a4be5ed8eed7a3"}]}'
2025-02-12 04:05:23.906 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:05:23.907 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:05:23.907 DEBUG [src.node.waku_node] Stopping container with id 9a7faed37c21
2025-02-12 04:05:24.870 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:05:24.870 DEBUG [src.node.waku_node] Stopping container with id 7798abe4a509
2025-02-12 04:05:25.683 ERROR [src.node.docker_mananger] Max retries reached for container 9a7faed37c21. Exiting log stream.
2025-02-12 04:05:26.378 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:05:26.379 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:05:26.386 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:05:26.392 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
