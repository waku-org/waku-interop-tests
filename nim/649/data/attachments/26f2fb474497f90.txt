2025-02-12 04:04:18.267 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:04:18.268 DEBUG [tests.conftest] Running test: test_light_push_while_peer_is_paused with id: 2025-02-12_04-04-18__a1d74f51-5a57-4075-befc-568bb89de2bd
2025-02-12 04:04:18.268 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:04:18.268 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-12 04:04:18.274 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:04:18.274 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-12_04-04-18__a1d74f51-5a57-4075-befc-568bb89de2bd__wakuorg_nwaku:latest.log
2025-02-12 04:04:18.274 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:04:18.275 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:04:18.276 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:04:18.276 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.163.228
2025-02-12 04:04:18.276 DEBUG [src.node.docker_mananger] Generated ports ['62715', '62716', '62717', '62718', '62719']
2025-02-12 04:04:18.276 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:04:18.276 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:04:18.276 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:04:18.277 DEBUG [src.node.docker_mananger] docker run -i -t -p 62715:62715 -p 62716:62716 -p 62717:62717 -p 62718:62718 -p 62719:62719 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62717 --rest-port=62715 --tcp-port=62716 --discv5-udp-port=62718 --rest-address=0.0.0.0 --nat=extip:172.18.163.228 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=afb21c16fc9c61e6460bea5cc91f7bf238db46040fdbe123bf2df9e059cd6fb7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62719 --metrics-logging=true --lightpush=true --relay=true
2025-02-12 04:04:18.350 ERROR [src.node.docker_mananger] Max retries reached for container 83b0cc244d02. Exiting log stream.
2025-02-12 04:04:18.511 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.163.228 waku be9a2cc411c4cd9870840d72142d73589c1c5b6c986af72bd1f9577239d23ad4
2025-02-12 04:04:18.567 DEBUG [src.node.docker_mananger] Container started with ID be9a2cc411c4. Setting up logs at ./log/docker/receiving_node1_2025-02-12_04-04-18__a1d74f51-5a57-4075-befc-568bb89de2bd__wakuorg_nwaku:latest.log
2025-02-12 04:04:18.568 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 62715
2025-02-12 04:04:18.568 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:04:19.073 ERROR [src.node.docker_mananger] Max retries reached for container e8046f49066e. Exiting log stream.
2025-02-12 04:04:19.569 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62715/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:19.572 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:04:19.572 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:04:19.572 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62715/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:19.574 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.163.228/tcp/62716/p2p/16Uiu2HAmRsAuU7vQrTaMJvSmPzoZxCgFdS47yxE8QwLFGUoj3nkG","/ip4/172.18.163.228/tcp/62717/ws/p2p/16Uiu2HAmRsAuU7vQrTaMJvSmPzoZxCgFdS47yxE8QwLFGUoj3nkG"],"enrUri":"enr:-L24QHV5A2eipni7jxU4smeOf-_3xUqKrAAolgpmPToGtO-WX8bNf7TP-uEn1YX-gAM73CGYsMybHrt0-bnyNWqRZ7UCgmlkgnY0gmlwhKwSo-SKbXVsdGlhZGRyc5YACASsEqPkBvT8AAoErBKj5Ab0_d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDxEbVh9klQLaysedNHy4BLco45JejlIb0F9U_kiLVtxGDdGNwgvT8g3VkcIL0_oV3YWt1Mgk"}'
2025-02-12 04:04:19.575 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:04:19.581 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:04:19.581 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-12_04-04-18__a1d74f51-5a57-4075-befc-568bb89de2bd__wakuorg_nwaku:latest.log
2025-02-12 04:04:19.581 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:04:19.581 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:04:19.582 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:04:19.583 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.215.255
2025-02-12 04:04:19.583 DEBUG [src.node.docker_mananger] Generated ports ['17850', '17851', '17852', '17853', '17854']
2025-02-12 04:04:19.583 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:04:19.583 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:04:19.583 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:04:19.583 DEBUG [src.node.docker_mananger] docker run -i -t -p 17850:17850 -p 17851:17851 -p 17852:17852 -p 17853:17853 -p 17854:17854 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17852 --rest-port=17850 --tcp-port=17851 --discv5-udp-port=17853 --rest-address=0.0.0.0 --nat=extip:172.18.215.255 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ca4b2572eb2ee98aaa5d8b89efa5ede9cb7d8c1c8172ebf1f97add8f52dbd93d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17854 --metrics-logging=true --lightpush=false --relay=true
2025-02-12 04:04:19.816 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.215.255 waku 78cb3934e6f6c371317fe9d8bc0da375fab5f24f357f65f23a3b94b923445383
2025-02-12 04:04:19.864 DEBUG [src.node.docker_mananger] Container started with ID 78cb3934e6f6. Setting up logs at ./log/docker/receiving_node2_2025-02-12_04-04-18__a1d74f51-5a57-4075-befc-568bb89de2bd__wakuorg_nwaku:latest.log
2025-02-12 04:04:19.864 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17850
2025-02-12 04:04:19.865 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:04:20.865 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17850/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:20.867 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:04:20.868 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:04:20.868 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17850/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:20.870 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.215.255/tcp/17851/p2p/16Uiu2HAm8gKQYPa1WmCydQzHH4hhmAWkXH2dwRJLTKykyNJLAZkf","/ip4/172.18.215.255/tcp/17852/ws/p2p/16Uiu2HAm8gKQYPa1WmCydQzHH4hhmAWkXH2dwRJLTKykyNJLAZkf"],"enrUri":"enr:-L24QFhH27noixXY66IWmLShL-yTqg-gEcIkclP7otVFOSM-IDSDtlmG3eFj-Mwjyj_ege4NlxnMa24de2UJWTFvH0ICgmlkgnY0gmlwhKwS1_-KbXVsdGlhZGRyc5YACASsEtf_BkW7AAoErBLX_wZFvN0DgnJzhQADAQAAiXNlY3AyNTZrMaECxOhhP0x9oY-VgY77CTnHaimQNQ_F_xY4FdjVk4jac9yDdGNwgkW7g3VkcIJFvYV3YWt1MgE"}'
2025-02-12 04:04:20.870 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:04:20.870 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17850/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.163.228/tcp/62716/p2p/16Uiu2HAmRsAuU7vQrTaMJvSmPzoZxCgFdS47yxE8QwLFGUoj3nkG"]'
2025-02-12 04:04:20.907 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:20.916 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:04:20.917 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-12_04-04-18__a1d74f51-5a57-4075-befc-568bb89de2bd__wakuorg_nwaku:latest.log
2025-02-12 04:04:20.917 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:04:20.917 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:04:20.918 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:04:20.918 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.180.210
2025-02-12 04:04:20.918 DEBUG [src.node.docker_mananger] Generated ports ['11240', '11241', '11242', '11243', '11244']
2025-02-12 04:04:20.919 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:04:20.919 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:04:20.919 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:04:20.919 DEBUG [src.node.docker_mananger] docker run -i -t -p 11240:11240 -p 11241:11241 -p 11242:11242 -p 11243:11243 -p 11244:11244 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11242 --rest-port=11240 --tcp-port=11241 --discv5-udp-port=11243 --rest-address=0.0.0.0 --nat=extip:172.18.180.210 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bc9c3cb170c866e0d885d7635bc5bc6a8bdafc314caed0121930d2499c311f06 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11244 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QHV5A2eipni7jxU4smeOf-_3xUqKrAAolgpmPToGtO-WX8bNf7TP-uEn1YX-gAM73CGYsMybHrt0-bnyNWqRZ7UCgmlkgnY0gmlwhKwSo-SKbXVsdGlhZGRyc5YACASsEqPkBvT8AAoErBKj5Ab0_d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDxEbVh9klQLaysedNHy4BLco45JejlIb0F9U_kiLVtxGDdGNwgvT8g3VkcIL0_oV3YWt1Mgk --lightpushnode=/ip4/172.18.163.228/tcp/62716/p2p/16Uiu2HAmRsAuU7vQrTaMJvSmPzoZxCgFdS47yxE8QwLFGUoj3nkG --lightpush=true --relay=false
2025-02-12 04:04:21.146 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.180.210 waku 38a23e006b86976254106ba45ca0a01a054f4ff692e2e149b82bd28da5031ca8
2025-02-12 04:04:21.195 DEBUG [src.node.docker_mananger] Container started with ID 38a23e006b86. Setting up logs at ./log/docker/lightpush_node1_2025-02-12_04-04-18__a1d74f51-5a57-4075-befc-568bb89de2bd__wakuorg_nwaku:latest.log
2025-02-12 04:04:21.195 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11240
2025-02-12 04:04:21.195 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:04:22.196 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11240/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:22.199 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:04:22.199 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:04:22.199 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11240/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:22.201 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.180.210/tcp/11241/p2p/16Uiu2HAmKfZGcXSj2EyrAE3ZEHGqgCdBniAYFVwbqKnHmq2cDW5T","/ip4/172.18.180.210/tcp/11242/ws/p2p/16Uiu2HAmKfZGcXSj2EyrAE3ZEHGqgCdBniAYFVwbqKnHmq2cDW5T"],"enrUri":"enr:-L24QK_bp0tYVyADyg63vjsTJvYE9-4jlRbS5yRUPZl6n-BsRfHPGGisTezF41-fA7mfie6xsYrv8YeulmXzu49HWasCgmlkgnY0gmlwhKwStNKKbXVsdGlhZGRyc5YACASsErTSBivpAAoErBK00gYr6t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDaCcH0Rm9CeEukoB3_1UzbrCqZq44qVwRq-lYXWa7-saDdGNwgivpg3VkcIIr64V3YWt1Mgg"}'
2025-02-12 04:04:22.201 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:04:22.202 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11240/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.163.228/tcp/62716/p2p/16Uiu2HAmRsAuU7vQrTaMJvSmPzoZxCgFdS47yxE8QwLFGUoj3nkG"]'
2025-02-12 04:04:22.237 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:22.238 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11240/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.215.255/tcp/17851/p2p/16Uiu2HAm8gKQYPa1WmCydQzHH4hhmAWkXH2dwRJLTKykyNJLAZkf"]'
2025-02-12 04:04:22.267 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:22.267 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62715/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:04:22.275 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:22.275 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17850/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:04:22.281 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:22.283 DEBUG [src.node.waku_node] Stopping container with id be9a2cc411c4
2025-02-12 04:04:23.047 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:23.048 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11240/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739333062283781120}}'
2025-02-12 04:04:23.859 ERROR [src.node.docker_mananger] Max retries reached for container be9a2cc411c4. Exiting log stream.
2025-02-12 04:04:28.055 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:11240/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2025-02-12 04:04:28.057 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:04:28.058 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:04:28.058 DEBUG [src.node.waku_node] Stopping container with id 78cb3934e6f6
2025-02-12 04:04:29.572 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:29.572 DEBUG [src.node.waku_node] Stopping container with id 38a23e006b86
2025-02-12 04:04:30.383 ERROR [src.node.docker_mananger] Max retries reached for container 78cb3934e6f6. Exiting log stream.
2025-02-12 04:04:31.080 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:31.082 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:04:31.089 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:04:31.097 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:04:31.104 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
