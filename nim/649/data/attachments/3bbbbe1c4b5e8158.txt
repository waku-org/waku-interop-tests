2025-02-12 04:09:13.089 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:09:13.090 DEBUG [tests.conftest] Running test: test_passing_non_base64_cursor with id: 2025-02-12_04-09-13__de2d470e-ba17-42e3-88c7-b0a405c0c645
2025-02-12 04:09:13.090 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:09:13.090 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-12 04:09:13.090 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-12 04:09:13.097 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:09:13.097 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-12_04-09-13__de2d470e-ba17-42e3-88c7-b0a405c0c645__wakuorg_nwaku:latest.log
2025-02-12 04:09:13.097 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:09:13.097 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:09:13.098 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:09:13.099 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.15.216
2025-02-12 04:09:13.099 DEBUG [src.node.docker_mananger] Generated ports ['26534', '26535', '26536', '26537', '26538']
2025-02-12 04:09:13.099 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:09:13.099 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:09:13.099 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:09:13.099 DEBUG [src.node.docker_mananger] docker run -i -t -p 26534:26534 -p 26535:26535 -p 26536:26536 -p 26537:26537 -p 26538:26538 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26536 --rest-port=26534 --tcp-port=26535 --discv5-udp-port=26537 --rest-address=0.0.0.0 --nat=extip:172.18.15.216 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=69ebf013fa73653bfd500cfe18ea496b9d548be873cd6c85dbf5b3ea0eb0a0b6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26538 --metrics-logging=true --store=true --relay=true
2025-02-12 04:09:13.322 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.15.216 waku 2c3851b804681cc4282e71cfa0ca9b44ac3a8fb61869d9823e0feff48e69d858
2025-02-12 04:09:13.372 DEBUG [src.node.docker_mananger] Container started with ID 2c3851b80468. Setting up logs at ./log/docker/publishing_node1_2025-02-12_04-09-13__de2d470e-ba17-42e3-88c7-b0a405c0c645__wakuorg_nwaku:latest.log
2025-02-12 04:09:13.374 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26534
2025-02-12 04:09:13.374 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:09:13.883 ERROR [src.node.docker_mananger] Max retries reached for container 79142744ef6a. Exiting log stream.
2025-02-12 04:09:14.375 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26534/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:09:14.377 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:09:14.378 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:09:14.378 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26534/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:09:14.380 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.15.216/tcp/26535/p2p/16Uiu2HAmV9wNdvQhncrkxa1bA57tT7LXCKo3ajVBUzD8VNVdLkox","/ip4/172.18.15.216/tcp/26536/ws/p2p/16Uiu2HAmV9wNdvQhncrkxa1bA57tT7LXCKo3ajVBUzD8VNVdLkox"],"enrUri":"enr:-L24QCYvf6_x-WrNr_jtf2icTd5FTRwiN5Clxzh7zV-pM__If1UiDfSArBdllGYX19sHxZcdDndivSGEFj2yL0lZ1h0CgmlkgnY0gmlwhKwSD9iKbXVsdGlhZGRyc5YACASsEg_YBmenAAoErBIP2AZnqN0DgnJzhQADAQAAiXNlY3AyNTZrMaED9SV36-mkmV0v1FhI-pf0qmnIkXCwzR7_GMkyqHNoyKeDdGNwgmeng3VkcIJnqYV3YWt1MgM"}'
2025-02-12 04:09:14.380 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:09:14.387 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:09:14.387 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-12_04-09-13__de2d470e-ba17-42e3-88c7-b0a405c0c645__wakuorg_nwaku:latest.log
2025-02-12 04:09:14.387 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:09:14.387 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:09:14.389 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:09:14.389 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.132.81
2025-02-12 04:09:14.389 DEBUG [src.node.docker_mananger] Generated ports ['16037', '16038', '16039', '16040', '16041']
2025-02-12 04:09:14.389 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:09:14.389 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:09:14.389 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:09:14.390 DEBUG [src.node.docker_mananger] docker run -i -t -p 16037:16037 -p 16038:16038 -p 16039:16039 -p 16040:16040 -p 16041:16041 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16039 --rest-port=16037 --tcp-port=16038 --discv5-udp-port=16040 --rest-address=0.0.0.0 --nat=extip:172.18.132.81 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1a0cee66ec2e682aeef9d5cac35473fa26d258f6cc13b908d9b03e4c1445e68c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16041 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QCYvf6_x-WrNr_jtf2icTd5FTRwiN5Clxzh7zV-pM__If1UiDfSArBdllGYX19sHxZcdDndivSGEFj2yL0lZ1h0CgmlkgnY0gmlwhKwSD9iKbXVsdGlhZGRyc5YACASsEg_YBmenAAoErBIP2AZnqN0DgnJzhQADAQAAiXNlY3AyNTZrMaED9SV36-mkmV0v1FhI-pf0qmnIkXCwzR7_GMkyqHNoyKeDdGNwgmeng3VkcIJnqYV3YWt1MgM --storenode=/ip4/172.18.15.216/tcp/26535/p2p/16Uiu2HAmV9wNdvQhncrkxa1bA57tT7LXCKo3ajVBUzD8VNVdLkox --store=true --relay=true
2025-02-12 04:09:14.609 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.132.81 waku 28e7e2f5eec1d638c790e78808a4a91688032fd53e51d68b61e2057f5d869f31
2025-02-12 04:09:14.659 DEBUG [src.node.docker_mananger] Container started with ID 28e7e2f5eec1. Setting up logs at ./log/docker/store_node1_2025-02-12_04-09-13__de2d470e-ba17-42e3-88c7-b0a405c0c645__wakuorg_nwaku:latest.log
2025-02-12 04:09:14.660 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 16037
2025-02-12 04:09:14.660 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:09:15.661 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16037/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:09:15.664 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:09:15.665 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:09:15.665 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16037/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:09:15.667 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.132.81/tcp/16038/p2p/16Uiu2HAm3TeR54pVViqmaH3tud4bF5cgcV3hVgfgFyS1fJtnqfXj","/ip4/172.18.132.81/tcp/16039/ws/p2p/16Uiu2HAm3TeR54pVViqmaH3tud4bF5cgcV3hVgfgFyS1fJtnqfXj"],"enrUri":"enr:-L24QMqauBRM1P-x4ms5vdnOmjl5yQBTum0vjLPNIeGhBXG2f5ueOeFtA25U6oGVS_VLmdmhsOMHXPPrMZqEM0TYimkCgmlkgnY0gmlwhKwShFGKbXVsdGlhZGRyc5YACASsEoRRBj6mAAoErBKEUQY-p90DgnJzhQADAQAAiXNlY3AyNTZrMaECd17jbk5bPdDWn0Wd7YbAn9Svmi8m6VYr3z-p4YNjv76DdGNwgj6mg3VkcII-qIV3YWt1MgM"}'
2025-02-12 04:09:15.667 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:09:15.667 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16037/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.15.216/tcp/26535/p2p/16Uiu2HAmV9wNdvQhncrkxa1bA57tT7LXCKo3ajVBUzD8VNVdLkox"]'
2025-02-12 04:09:15.670 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:09:15.670 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26534/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:09:15.672 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:09:15.673 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16037/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:09:15.675 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:09:15.676 DEBUG [src.steps.store] Relaying message
2025-02-12 04:09:15.676 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26534/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:09:15.682 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:09:15.682 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:09:15.883 DEBUG [src.steps.store] Relaying message
2025-02-12 04:09:15.884 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26534/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:09:15.889 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:09:15.890 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:09:16.091 DEBUG [src.steps.store] Relaying message
2025-02-12 04:09:16.091 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26534/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:09:16.097 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:09:16.097 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:09:16.299 DEBUG [src.steps.store] Relaying message
2025-02-12 04:09:16.299 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26534/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:09:16.305 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:09:16.306 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:09:16.506 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26534/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=test&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:09:16.509 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:26534/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=test&pageSize=100&ascending=true. Response content: b'Exception converting hex string to bytes: t is not a hexadecimal character'
2025-02-12 04:09:16.510 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16037/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=test&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:09:16.513 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:16037/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=test&pageSize=100&ascending=true. Response content: b'Exception converting hex string to bytes: t is not a hexadecimal character'
2025-02-12 04:09:16.515 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:09:16.516 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:09:16.516 DEBUG [src.node.waku_node] Stopping container with id 2c3851b80468
2025-02-12 04:09:17.168 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:09:17.169 DEBUG [src.node.waku_node] Stopping container with id 28e7e2f5eec1
2025-02-12 04:09:17.981 ERROR [src.node.docker_mananger] Max retries reached for container 2c3851b80468. Exiting log stream.
2025-02-12 04:09:18.617 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:09:18.618 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:09:18.625 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:09:18.630 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
