2025-02-12 04:03:55.233 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:03:55.234 DEBUG [tests.conftest] Running test: test_store_with_non_hex_hash with id: 2025-02-12_04-03-55__4338754b-34c5-4fd2-8177-f9730f1492b4
2025-02-12 04:03:55.234 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:03:55.234 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-12 04:03:55.234 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-12 04:03:55.241 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:03:55.241 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-12_04-03-55__4338754b-34c5-4fd2-8177-f9730f1492b4__wakuorg_nwaku:latest.log
2025-02-12 04:03:55.241 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:03:55.241 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:03:55.247 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:03:55.247 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.212.45
2025-02-12 04:03:55.247 DEBUG [src.node.docker_mananger] Generated ports ['61808', '61809', '61810', '61811', '61812']
2025-02-12 04:03:55.247 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:03:55.247 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:03:55.248 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:03:55.248 DEBUG [src.node.docker_mananger] docker run -i -t -p 61808:61808 -p 61809:61809 -p 61810:61810 -p 61811:61811 -p 61812:61812 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61810 --rest-port=61808 --tcp-port=61809 --discv5-udp-port=61811 --rest-address=0.0.0.0 --nat=extip:172.18.212.45 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e9baab4898fcef050cdf5abbd5ec1de9fae637e6e5ea2aaec24d3cf00cd9a11f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61812 --metrics-logging=true --store=true --relay=true
2025-02-12 04:03:55.475 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.212.45 waku 9aec85e2db186326254c14ba1a82b532ba75db484a100a4ef01929e6dabcbc6e
2025-02-12 04:03:55.528 DEBUG [src.node.docker_mananger] Container started with ID 9aec85e2db18. Setting up logs at ./log/docker/publishing_node1_2025-02-12_04-03-55__4338754b-34c5-4fd2-8177-f9730f1492b4__wakuorg_nwaku:latest.log
2025-02-12 04:03:55.529 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61808
2025-02-12 04:03:55.530 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:03:56.040 ERROR [src.node.docker_mananger] Max retries reached for container 34c3c6856a63. Exiting log stream.
2025-02-12 04:03:56.530 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61808/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:56.533 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:03:56.533 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:03:56.534 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61808/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:56.536 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.212.45/tcp/61809/p2p/16Uiu2HAm2USGdnnGJJ2jRSe6mwVJ9EAEqg9euqk3pN12AgrY1eH6","/ip4/172.18.212.45/tcp/61810/ws/p2p/16Uiu2HAm2USGdnnGJJ2jRSe6mwVJ9EAEqg9euqk3pN12AgrY1eH6"],"enrUri":"enr:-L24QIBjuwAeyDpN3gVJ5uNPiabyDst_sjqE0-HCltDx60smRyM86DIWWwqQKr12zU4erTrHuX6AWaFhY5RIZP40fCcCgmlkgnY0gmlwhKwS1C2KbXVsdGlhZGRyc5YACASsEtQtBvFxAAoErBLULQbxct0DgnJzhQADAQAAiXNlY3AyNTZrMaECaLcMpJT20qYHmbYS4Z8wPOv1PsG3hcG_qCqhiN-sYamDdGNwgvFxg3VkcILxc4V3YWt1MgM"}'
2025-02-12 04:03:56.536 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:03:56.542 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:03:56.543 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-12_04-03-55__4338754b-34c5-4fd2-8177-f9730f1492b4__wakuorg_nwaku:latest.log
2025-02-12 04:03:56.543 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:03:56.543 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:03:56.544 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:03:56.544 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.212.195
2025-02-12 04:03:56.545 DEBUG [src.node.docker_mananger] Generated ports ['25078', '25079', '25080', '25081', '25082']
2025-02-12 04:03:56.545 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:03:56.545 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:03:56.545 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:03:56.545 DEBUG [src.node.docker_mananger] docker run -i -t -p 25078:25078 -p 25079:25079 -p 25080:25080 -p 25081:25081 -p 25082:25082 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25080 --rest-port=25078 --tcp-port=25079 --discv5-udp-port=25081 --rest-address=0.0.0.0 --nat=extip:172.18.212.195 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e5e7e5ae2dc2972fcaf29f424eab38a1ba91e3f4aca1ed84bfe599abba381f08 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25082 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QIBjuwAeyDpN3gVJ5uNPiabyDst_sjqE0-HCltDx60smRyM86DIWWwqQKr12zU4erTrHuX6AWaFhY5RIZP40fCcCgmlkgnY0gmlwhKwS1C2KbXVsdGlhZGRyc5YACASsEtQtBvFxAAoErBLULQbxct0DgnJzhQADAQAAiXNlY3AyNTZrMaECaLcMpJT20qYHmbYS4Z8wPOv1PsG3hcG_qCqhiN-sYamDdGNwgvFxg3VkcILxc4V3YWt1MgM --storenode=/ip4/172.18.212.45/tcp/61809/p2p/16Uiu2HAm2USGdnnGJJ2jRSe6mwVJ9EAEqg9euqk3pN12AgrY1eH6 --store=true --relay=true
2025-02-12 04:03:56.771 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.212.195 waku 5f9df77b58018d8db38b2c5378bdab4a45f2ab08f86c075209fa2b88b0de7170
2025-02-12 04:03:56.822 DEBUG [src.node.docker_mananger] Container started with ID 5f9df77b5801. Setting up logs at ./log/docker/store_node1_2025-02-12_04-03-55__4338754b-34c5-4fd2-8177-f9730f1492b4__wakuorg_nwaku:latest.log
2025-02-12 04:03:56.822 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 25078
2025-02-12 04:03:56.823 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:03:57.823 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25078/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:57.826 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:03:57.826 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:03:57.826 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25078/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:57.828 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.212.195/tcp/25079/p2p/16Uiu2HAmL4uxtkPn25wcvhCuDtNFGMWhkRdSaajMcGH32JgeQ4JB","/ip4/172.18.212.195/tcp/25080/ws/p2p/16Uiu2HAmL4uxtkPn25wcvhCuDtNFGMWhkRdSaajMcGH32JgeQ4JB"],"enrUri":"enr:-L24QBszPfZIi-qHb-KcN3jkifQ7cS16C0SI-tatDq1B9L8BQefNU_plGObd5hZeFvnmJQXZn92CwuQHfP3gViI_Ns4CgmlkgnY0gmlwhKwS1MOKbXVsdGlhZGRyc5YACASsEtTDBmH3AAoErBLUwwZh-N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDbiLJ2MI1-pqlVoWPWhvNv8rbORpaJgG44AcZMlFZPliDdGNwgmH3g3VkcIJh-YV3YWt1MgM"}'
2025-02-12 04:03:57.829 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:03:57.829 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25078/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.212.45/tcp/61809/p2p/16Uiu2HAm2USGdnnGJJ2jRSe6mwVJ9EAEqg9euqk3pN12AgrY1eH6"]'
2025-02-12 04:03:57.831 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:57.832 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61808/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:03:57.834 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:57.834 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25078/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:03:57.836 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:57.837 DEBUG [src.steps.store] Relaying message
2025-02-12 04:03:57.838 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61808/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:03:57.843 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:57.843 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:03:58.044 DEBUG [src.steps.store] Relaying message
2025-02-12 04:03:58.044 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61808/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:03:58.050 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:58.051 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:03:58.252 DEBUG [src.steps.store] Relaying message
2025-02-12 04:03:58.252 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61808/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:03:58.259 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:58.259 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:03:58.460 DEBUG [src.steps.store] Relaying message
2025-02-12 04:03:58.460 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61808/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:03:58.466 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:03:58.467 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:03:58.667 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61808/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=test&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:58.670 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:61808/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=test&pageSize=50&ascending=true. Response content: b'Exception converting hex string to bytes: t is not a hexadecimal character'
2025-02-12 04:03:58.671 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25078/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=test&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:03:58.674 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:25078/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=test&pageSize=50&ascending=true. Response content: b'Exception converting hex string to bytes: t is not a hexadecimal character'
2025-02-12 04:03:58.676 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:03:58.677 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:03:58.677 DEBUG [src.node.waku_node] Stopping container with id 9aec85e2db18
2025-02-12 04:03:59.313 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:03:59.313 DEBUG [src.node.waku_node] Stopping container with id 5f9df77b5801
2025-02-12 04:04:00.126 ERROR [src.node.docker_mananger] Max retries reached for container 9aec85e2db18. Exiting log stream.
2025-02-12 04:04:00.783 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:00.785 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:04:00.790 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:04:00.796 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
