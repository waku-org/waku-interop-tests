2025-02-12 04:04:15.329 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:04:15.329 DEBUG [tests.conftest] Running test: test_publish_after_node1_restarts with id: 2025-02-12_04-04-15__ce4616b7-905c-4b86-91f0-e430810ef48d
2025-02-12 04:04:15.330 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:04:15.330 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-12 04:04:15.330 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-12 04:04:15.336 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:04:15.337 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-12_04-04-15__ce4616b7-905c-4b86-91f0-e430810ef48d__wakuorg_nwaku:latest.log
2025-02-12 04:04:15.337 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:04:15.337 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:04:15.338 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:04:15.338 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.201.38
2025-02-12 04:04:15.338 DEBUG [src.node.docker_mananger] Generated ports ['6942', '6943', '6944', '6945', '6946']
2025-02-12 04:04:15.339 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:04:15.339 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:04:15.339 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:04:15.339 DEBUG [src.node.docker_mananger] docker run -i -t -p 6942:6942 -p 6943:6943 -p 6944:6944 -p 6945:6945 -p 6946:6946 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6944 --rest-port=6942 --tcp-port=6943 --discv5-udp-port=6945 --rest-address=0.0.0.0 --nat=extip:172.18.201.38 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ce3de4e6983e2204cf57b1b4e7f2ad5d79d32e6d27f8b27ffef5412df8dff57b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6946 --metrics-logging=true --relay=true
2025-02-12 04:04:15.575 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.201.38 waku 8b1fed50bef266b0d35313d558d19db76267dad0d690270f628452c5ff7cf25c
2025-02-12 04:04:15.627 DEBUG [src.node.docker_mananger] Container started with ID 8b1fed50bef2. Setting up logs at ./log/docker/node1_2025-02-12_04-04-15__ce4616b7-905c-4b86-91f0-e430810ef48d__wakuorg_nwaku:latest.log
2025-02-12 04:04:15.629 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6942
2025-02-12 04:04:15.629 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:04:16.136 ERROR [src.node.docker_mananger] Max retries reached for container 2db532fc1bb8. Exiting log stream.
2025-02-12 04:04:16.629 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6942/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:16.632 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:04:16.632 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:04:16.632 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6942/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:16.634 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.201.38/tcp/6943/p2p/16Uiu2HAmT8mvmyV1SitJn8vfxmmWgrgQgAy9WqrPDn86s7yqFAWr","/ip4/172.18.201.38/tcp/6944/ws/p2p/16Uiu2HAmT8mvmyV1SitJn8vfxmmWgrgQgAy9WqrPDn86s7yqFAWr"],"enrUri":"enr:-L24QGoM7nqSQmkgLm7vsDJ67AfqEk1cYGm1ab7Iihzxq1_7U62yjA70sace3uwYqluVoRdMmT4-MG-FQwu3amH_QuICgmlkgnY0gmlwhKwSySaKbXVsdGlhZGRyc5YACASsEskmBhsfAAoErBLJJgYbIN0DgnJzhQADAQAAiXNlY3AyNTZrMaED1yHVUmvlkOVf92yOgikVhUHVQT-Du_b0qb0gTJQGOreDdGNwghsfg3VkcIIbIYV3YWt1MgE"}'
2025-02-12 04:04:16.635 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:04:16.641 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:04:16.641 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-12_04-04-15__ce4616b7-905c-4b86-91f0-e430810ef48d__wakuorg_nwaku:latest.log
2025-02-12 04:04:16.641 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:04:16.642 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:04:16.643 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:04:16.643 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.167.51
2025-02-12 04:04:16.643 DEBUG [src.node.docker_mananger] Generated ports ['63507', '63508', '63509', '63510', '63511']
2025-02-12 04:04:16.643 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:04:16.644 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:04:16.644 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:04:16.644 DEBUG [src.node.docker_mananger] docker run -i -t -p 63507:63507 -p 63508:63508 -p 63509:63509 -p 63510:63510 -p 63511:63511 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63509 --rest-port=63507 --tcp-port=63508 --discv5-udp-port=63510 --rest-address=0.0.0.0 --nat=extip:172.18.167.51 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a360b16723cfc9a348d7cffec7afc82dc32a7b1e6deac27c239be61a454d01ba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63511 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QGoM7nqSQmkgLm7vsDJ67AfqEk1cYGm1ab7Iihzxq1_7U62yjA70sace3uwYqluVoRdMmT4-MG-FQwu3amH_QuICgmlkgnY0gmlwhKwSySaKbXVsdGlhZGRyc5YACASsEskmBhsfAAoErBLJJgYbIN0DgnJzhQADAQAAiXNlY3AyNTZrMaED1yHVUmvlkOVf92yOgikVhUHVQT-Du_b0qb0gTJQGOreDdGNwghsfg3VkcIIbIYV3YWt1MgE
2025-02-12 04:04:16.871 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.167.51 waku 77a5c794815abf10f31f7dff96f3da86c080cf5a06475c81ffdf4f506584d6b0
2025-02-12 04:04:16.924 DEBUG [src.node.docker_mananger] Container started with ID 77a5c794815a. Setting up logs at ./log/docker/node2_2025-02-12_04-04-15__ce4616b7-905c-4b86-91f0-e430810ef48d__wakuorg_nwaku:latest.log
2025-02-12 04:04:16.925 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63507
2025-02-12 04:04:16.925 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:04:17.926 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63507/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:17.933 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:04:17.934 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:04:17.934 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63507/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:17.936 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.167.51/tcp/63508/p2p/16Uiu2HAmPz5XQ1gK3RbDb5zi8EW9eEwFKANqLCagsg8aKXQYvQPq","/ip4/172.18.167.51/tcp/63509/ws/p2p/16Uiu2HAmPz5XQ1gK3RbDb5zi8EW9eEwFKANqLCagsg8aKXQYvQPq"],"enrUri":"enr:-L24QOmVG2XcJ7MGSyDpS4wPu_HrtIxXtsq9ajOPohfYNW_ZG-8gxbum_Mw_53ViALgzKxm02elgFfX7_cr5W_SKb98CgmlkgnY0gmlwhKwSpzOKbXVsdGlhZGRyc5YACASsEqczBvgUAAoErBKnMwb4Fd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDqFRxL1imuYOy0W9xOQ5EKSNrEVSu_oAaCd68HRp_b4CDdGNwgvgUg3VkcIL4FoV3YWt1MgE"}'
2025-02-12 04:04:17.936 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:04:17.936 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63507/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.201.38/tcp/6943/p2p/16Uiu2HAmT8mvmyV1SitJn8vfxmmWgrgQgAy9WqrPDn86s7yqFAWr"]'
2025-02-12 04:04:17.939 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:17.939 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2025-02-12 04:04:17.939 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6942/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 04:04:17.943 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:17.944 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63507/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 04:04:17.949 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:17.950 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:04:17.956 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:17.956 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-12 04:04:18.056 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-12 04:04:18.057 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:18.059 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739333057950285568,"ephemeral":false}]'
2025-02-12 04:04:18.061 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-12 04:04:18.061 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63507/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:18.063 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739333057950285568,"ephemeral":false}]'
2025-02-12 04:04:18.064 INFO [src.steps.relay] WARM UP successful!!
2025-02-12 04:04:18.065 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:04:18.070 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:18.070 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-12 04:04:18.170 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-12 04:04:18.171 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:18.173 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739333058065619712,"ephemeral":false}]'
2025-02-12 04:04:18.174 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-12 04:04:18.174 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63507/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:18.177 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739333058065619712,"ephemeral":false}]'
2025-02-12 04:04:18.178 DEBUG [src.node.waku_node] Restarting container with id 8b1fed50bef2
2025-02-12 04:04:19.341 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6942/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:19.444 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6942/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:19.447 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:04:19.447 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:04:19.448 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6942/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:19.450 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.201.38/tcp/6943/p2p/16Uiu2HAmT8mvmyV1SitJn8vfxmmWgrgQgAy9WqrPDn86s7yqFAWr","/ip4/172.18.201.38/tcp/6944/ws/p2p/16Uiu2HAmT8mvmyV1SitJn8vfxmmWgrgQgAy9WqrPDn86s7yqFAWr"],"enrUri":"enr:-L24QGoM7nqSQmkgLm7vsDJ67AfqEk1cYGm1ab7Iihzxq1_7U62yjA70sace3uwYqluVoRdMmT4-MG-FQwu3amH_QuICgmlkgnY0gmlwhKwSySaKbXVsdGlhZGRyc5YACASsEskmBhsfAAoErBLJJgYbIN0DgnJzhQADAQAAiXNlY3AyNTZrMaED1yHVUmvlkOVf92yOgikVhUHVQT-Du_b0qb0gTJQGOreDdGNwghsfg3VkcIIbIYV3YWt1MgE"}'
2025-02-12 04:04:19.450 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:04:19.450 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6942/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 04:04:19.468 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:19.469 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63507/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 04:04:19.471 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:19.472 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:04:19.474 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:19.475 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-12 04:04:19.575 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-12 04:04:19.575 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:19.577 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739333059472207616,"ephemeral":false}]'
2025-02-12 04:04:19.579 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-12 04:04:19.579 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63507/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:19.581 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-12 04:04:20.582 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6942/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 04:04:20.585 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:20.585 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63507/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 04:04:20.588 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:20.588 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:04:20.591 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:20.591 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-12 04:04:20.692 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-12 04:04:20.692 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:20.694 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739333060588791040,"ephemeral":false}]'
2025-02-12 04:04:20.696 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-12 04:04:20.696 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63507/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:20.698 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-12 04:04:21.699 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6942/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 04:04:21.702 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:21.702 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63507/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 04:04:21.704 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:21.705 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:04:21.707 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:21.708 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-12 04:04:21.808 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-12 04:04:21.808 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:21.810 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739333061704996096,"ephemeral":false}]'
2025-02-12 04:04:21.812 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-12 04:04:21.812 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63507/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:21.814 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-12 04:04:22.815 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6942/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 04:04:22.818 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:22.818 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63507/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 04:04:22.820 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:22.821 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:04:22.823 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:22.824 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-12 04:04:22.924 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-12 04:04:22.924 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:22.927 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739333062821233408,"ephemeral":false}]'
2025-02-12 04:04:22.928 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-12 04:04:22.928 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63507/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:22.931 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-12 04:04:23.932 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6942/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 04:04:23.945 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:23.947 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63507/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 04:04:23.954 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:23.955 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:04:23.964 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:04:23.964 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-12 04:04:24.065 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-12 04:04:24.065 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:24.067 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739333063955268864,"ephemeral":false}]'
2025-02-12 04:04:24.069 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-12 04:04:24.069 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63507/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:04:24.071 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739333063955268864,"ephemeral":false}]'
2025-02-12 04:04:24.074 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:04:24.075 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:04:24.075 DEBUG [src.node.waku_node] Stopping container with id 8b1fed50bef2
2025-02-12 04:04:24.650 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:24.651 DEBUG [src.node.waku_node] Stopping container with id 77a5c794815a
2025-02-12 04:04:25.462 ERROR [src.node.docker_mananger] Max retries reached for container 8b1fed50bef2. Exiting log stream.
2025-02-12 04:04:25.870 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:04:25.870 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:04:25.889 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:04:25.897 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
