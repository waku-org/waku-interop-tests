2025-02-12 04:06:08.207 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 04:06:08.207 DEBUG [tests.conftest] Running test: test_store_sort_ascending[true] with id: 2025-02-12_04-06-08__1ccfac19-8f9e-497b-8cd8-e30f02e68d59
2025-02-12 04:06:08.208 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 04:06:08.208 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-12 04:06:08.208 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-12 04:06:08.214 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:06:08.214 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-12_04-06-08__1ccfac19-8f9e-497b-8cd8-e30f02e68d59__wakuorg_nwaku:latest.log
2025-02-12 04:06:08.215 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:06:08.215 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:06:08.216 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:06:08.216 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.61.93
2025-02-12 04:06:08.216 DEBUG [src.node.docker_mananger] Generated ports ['24942', '24943', '24944', '24945', '24946']
2025-02-12 04:06:08.217 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:06:08.217 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:06:08.217 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:06:08.217 DEBUG [src.node.docker_mananger] docker run -i -t -p 24942:24942 -p 24943:24943 -p 24944:24944 -p 24945:24945 -p 24946:24946 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24944 --rest-port=24942 --tcp-port=24943 --discv5-udp-port=24945 --rest-address=0.0.0.0 --nat=extip:172.18.61.93 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=af8424cd8b6dbbad0e120feda68ca1dcbddd3b0eb9e073eca9c87bd4dee99e7c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24946 --metrics-logging=true --store=true --relay=true
2025-02-12 04:06:08.436 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.61.93 waku 00387c6320f94740e3fe17dddcc4ec68e6f8f425d5236b3f4d651dc7d25eeac9
2025-02-12 04:06:08.486 DEBUG [src.node.docker_mananger] Container started with ID 00387c6320f9. Setting up logs at ./log/docker/publishing_node1_2025-02-12_04-06-08__1ccfac19-8f9e-497b-8cd8-e30f02e68d59__wakuorg_nwaku:latest.log
2025-02-12 04:06:08.488 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 24942
2025-02-12 04:06:08.488 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:06:09.008 ERROR [src.node.docker_mananger] Max retries reached for container 6f2477032a17. Exiting log stream.
2025-02-12 04:06:09.489 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24942/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:06:09.491 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:06:09.491 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:06:09.492 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24942/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:06:09.494 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.61.93/tcp/24943/p2p/16Uiu2HAm9CRQtvsWZBS6fPGnC7ihkdr5gf8LBgVNhgemaogpLXEW","/ip4/172.18.61.93/tcp/24944/ws/p2p/16Uiu2HAm9CRQtvsWZBS6fPGnC7ihkdr5gf8LBgVNhgemaogpLXEW"],"enrUri":"enr:-L24QCtHXeFF8jsckTiO8QuFjnCYRVl0DdxoINiwc7ETCfcCTaPUeoLYNPpnsrVBg5fLG65eYz2jAzDrGvrDB2TsaUwCgmlkgnY0gmlwhKwSPV2KbXVsdGlhZGRyc5YACASsEj1dBmFvAAoErBI9XQZhcN0DgnJzhQADAQAAiXNlY3AyNTZrMaECzJ6YY5l0KU2o_jaJb7pB0FDj9Z_-kFW3R6PzY-O9A4-DdGNwgmFvg3VkcIJhcYV3YWt1MgM"}'
2025-02-12 04:06:09.494 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:06:09.501 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 04:06:09.501 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-12_04-06-08__1ccfac19-8f9e-497b-8cd8-e30f02e68d59__wakuorg_nwaku:latest.log
2025-02-12 04:06:09.501 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 04:06:09.501 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 04:06:09.502 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 04:06:09.502 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.98.29
2025-02-12 04:06:09.503 DEBUG [src.node.docker_mananger] Generated ports ['36733', '36734', '36735', '36736', '36737']
2025-02-12 04:06:09.503 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 04:06:09.503 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 04:06:09.503 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 04:06:09.503 DEBUG [src.node.docker_mananger] docker run -i -t -p 36733:36733 -p 36734:36734 -p 36735:36735 -p 36736:36736 -p 36737:36737 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36735 --rest-port=36733 --tcp-port=36734 --discv5-udp-port=36736 --rest-address=0.0.0.0 --nat=extip:172.18.98.29 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b5ed3afdeaa372eadbaa776effdba5858d3f9eb4e7ac6c79d5fdea0cbac9af1c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36737 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QCtHXeFF8jsckTiO8QuFjnCYRVl0DdxoINiwc7ETCfcCTaPUeoLYNPpnsrVBg5fLG65eYz2jAzDrGvrDB2TsaUwCgmlkgnY0gmlwhKwSPV2KbXVsdGlhZGRyc5YACASsEj1dBmFvAAoErBI9XQZhcN0DgnJzhQADAQAAiXNlY3AyNTZrMaECzJ6YY5l0KU2o_jaJb7pB0FDj9Z_-kFW3R6PzY-O9A4-DdGNwgmFvg3VkcIJhcYV3YWt1MgM --storenode=/ip4/172.18.61.93/tcp/24943/p2p/16Uiu2HAm9CRQtvsWZBS6fPGnC7ihkdr5gf8LBgVNhgemaogpLXEW --store=true --relay=true
2025-02-12 04:06:09.737 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.98.29 waku 365c2c58c4ec57aeb48712adb7a29fc4c0d60d462cd6c1c7ba1d87434c422927
2025-02-12 04:06:09.790 DEBUG [src.node.docker_mananger] Container started with ID 365c2c58c4ec. Setting up logs at ./log/docker/store_node1_2025-02-12_04-06-08__1ccfac19-8f9e-497b-8cd8-e30f02e68d59__wakuorg_nwaku:latest.log
2025-02-12 04:06:09.791 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36733
2025-02-12 04:06:09.791 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 04:06:10.792 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36733/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:06:10.795 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 04:06:10.795 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 04:06:10.795 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36733/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:06:10.797 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.98.29/tcp/36734/p2p/16Uiu2HAm3ezysYjttfDxHaJUwaG75gLcsTc2HaxC8V7478Z7MAYm","/ip4/172.18.98.29/tcp/36735/ws/p2p/16Uiu2HAm3ezysYjttfDxHaJUwaG75gLcsTc2HaxC8V7478Z7MAYm"],"enrUri":"enr:-L24QOO6w8RRYtU6GLQFoqJWjqE0B_LkYDwm9iKXbAlqE05lJhyp9APV8W1uC3kzjvqRky32yMX5VWBfUokkl7EEINICgmlkgnY0gmlwhKwSYh2KbXVsdGlhZGRyc5YACASsEmIdBo9-AAoErBJiHQaPf90DgnJzhQADAQAAiXNlY3AyNTZrMaECekeH5LUZokJYHIFqAMaQN-nZofMuMs6H-56h6eaI7LaDdGNwgo9-g3VkcIKPgIV3YWt1MgM"}'
2025-02-12 04:06:10.797 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 04:06:10.798 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36733/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.61.93/tcp/24943/p2p/16Uiu2HAm9CRQtvsWZBS6fPGnC7ihkdr5gf8LBgVNhgemaogpLXEW"]'
2025-02-12 04:06:10.800 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:06:10.801 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24942/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:06:10.803 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:06:10.803 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36733/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 04:06:10.805 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:06:10.807 DEBUG [src.steps.store] Relaying message
2025-02-12 04:06:10.807 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:06:10.812 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:06:10.812 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:06:11.013 DEBUG [src.steps.store] Relaying message
2025-02-12 04:06:11.013 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:06:11.020 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:06:11.021 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:06:11.222 DEBUG [src.steps.store] Relaying message
2025-02-12 04:06:11.222 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:06:11.227 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:06:11.227 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:06:11.428 DEBUG [src.steps.store] Relaying message
2025-02-12 04:06:11.428 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:06:11.434 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:06:11.435 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:06:11.636 DEBUG [src.steps.store] Relaying message
2025-02-12 04:06:11.636 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV80", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:06:11.641 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:06:11.642 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:06:11.842 DEBUG [src.steps.store] Relaying message
2025-02-12 04:06:11.842 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV81", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:06:11.848 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:06:11.848 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:06:12.049 DEBUG [src.steps.store] Relaying message
2025-02-12 04:06:12.049 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV82", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:06:12.054 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:06:12.055 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:06:12.255 DEBUG [src.steps.store] Relaying message
2025-02-12 04:06:12.256 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV83", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:06:12.261 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:06:12.262 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:06:12.462 DEBUG [src.steps.store] Relaying message
2025-02-12 04:06:12.463 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV84", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:06:12.468 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:06:12.468 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:06:12.669 DEBUG [src.steps.store] Relaying message
2025-02-12 04:06:12.669 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV85", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 04:06:12.675 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 04:06:12.675 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 04:06:12.876 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24942/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:06:12.879 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x0d7505aeb77af636e2c49b118e60efe419867da9a1e664247f106d470007a818"},{"messageHash":"0x0c7a86da0a253adb41062c158ca2145f96118ccc7b9117460cd79ae930b30194"},{"messageHash":"0x509b660786916cd78603e2aa049f0e74e83dcf1061f77f6b50d3d089a3c9ecc7"},{"messageHash":"0xfd6a646a087530405db01b814f4a8f4ec436b324adcc1cbbd0dfba48c7d7835d"},{"messageHash":"0x91986d5ad9d475814c81715083113650775ef504472cbcaed08e6498a0a58ea4"}],"paginationCursor":"0x91986d5ad9d475814c81715083113650775ef504472cbcaed08e6498a0a58ea4"}'
2025-02-12 04:06:12.880 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36733/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 04:06:12.883 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x0d7505aeb77af636e2c49b118e60efe419867da9a1e664247f106d470007a818"},{"messageHash":"0x0c7a86da0a253adb41062c158ca2145f96118ccc7b9117460cd79ae930b30194"},{"messageHash":"0x509b660786916cd78603e2aa049f0e74e83dcf1061f77f6b50d3d089a3c9ecc7"},{"messageHash":"0xfd6a646a087530405db01b814f4a8f4ec436b324adcc1cbbd0dfba48c7d7835d"},{"messageHash":"0x91986d5ad9d475814c81715083113650775ef504472cbcaed08e6498a0a58ea4"}],"paginationCursor":"0x91986d5ad9d475814c81715083113650775ef504472cbcaed08e6498a0a58ea4"}'
2025-02-12 04:06:12.885 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 04:06:12.886 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 04:06:12.886 DEBUG [src.node.waku_node] Stopping container with id 00387c6320f9
2025-02-12 04:06:13.989 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:06:13.989 DEBUG [src.node.waku_node] Stopping container with id 365c2c58c4ec
2025-02-12 04:06:14.800 ERROR [src.node.docker_mananger] Max retries reached for container 00387c6320f9. Exiting log stream.
2025-02-12 04:06:15.475 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 04:06:15.476 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 04:06:15.483 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 04:06:15.491 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
