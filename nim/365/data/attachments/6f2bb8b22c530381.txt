[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_only_filter with id: 2024-09-19_04-19-43__d9adbcc7-430c-4676-a083-73c6c544cae8
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-19_04-19-43__d9adbcc7-430c-4676-a083-73c6c544cae8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.3.3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['26064', '26065', '26066', '26067', '26068']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 26064:26064 -p 26065:26065 -p 26066:26066 -p 26067:26067 -p 26068:26068 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26066 --rest-port=26064 --tcp-port=26065 --discv5-udp-port=26067 --rest-address=0.0.0.0 --nat=extip:172.18.3.3 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=baceae9ac650b2464e284efbb14bbbaedce87bacff82dbc1ed1ed40c36aae904 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26068 --metrics-logging=true --lightpush=false --relay=false --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.3.3 waku 598fd7f98a8c2f0a9660073a341c4a7fa0eb950f6f182037b52eef31e14d1186
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 598fd7f98a8c. Setting up logs at ./log/docker/receiving_node1_2024-09-19_04-19-43__d9adbcc7-430c-4676-a083-73c6c544cae8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 26064
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26064/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26064/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.3.3/tcp/26065/p2p/16Uiu2HAm3tqkDMi7maJxLhRR75GJVpx4fXB8YQwZ8ergCkXLC3A1","/ip4/172.18.3.3/tcp/26066/ws/p2p/16Uiu2HAm3tqkDMi7maJxLhRR75GJVpx4fXB8YQwZ8ergCkXLC3A1"],"enrUri":"enr:-LO4QGTqndl-14AksBcVYt_hhLN-Jgbq3FurxnzbNtYs2MHWazbHyTnMN1Y1xR1O4u_xJ_cK7L7mhGAcvppyLdTVhHMBgmlkgnY0gmlwhKwSAwOKbXVsdGlhZGRyc4wACgSsEgMDBmXS3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ90zg09oedm_9grPv7-CNmp_v-DML4aLnJeg8NyFJqOoN0Y3CCZdGDdWRwgmXThXdha3UyBA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-19_04-19-43__d9adbcc7-430c-4676-a083-73c6c544cae8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.223.152
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['22084', '22085', '22086', '22087', '22088']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 22084:22084 -p 22085:22085 -p 22086:22086 -p 22087:22087 -p 22088:22088 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22086 --rest-port=22084 --tcp-port=22085 --discv5-udp-port=22087 --rest-address=0.0.0.0 --nat=extip:172.18.223.152 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=24a2f0dc1e7c9da5b87adac0fee9dfbf4d29eff0cc5204af4acc6ba7b1faebfe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22088 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QGTqndl-14AksBcVYt_hhLN-Jgbq3FurxnzbNtYs2MHWazbHyTnMN1Y1xR1O4u_xJ_cK7L7mhGAcvppyLdTVhHMBgmlkgnY0gmlwhKwSAwOKbXVsdGlhZGRyc4wACgSsEgMDBmXS3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ90zg09oedm_9grPv7-CNmp_v-DML4aLnJeg8NyFJqOoN0Y3CCZdGDdWRwgmXThXdha3UyBA --lightpushnode=/ip4/172.18.3.3/tcp/26065/p2p/16Uiu2HAm3tqkDMi7maJxLhRR75GJVpx4fXB8YQwZ8ergCkXLC3A1 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.223.152 waku b1cfeddcc2499532c81ab5c6a65b0c523f937aed2016548a5fccc80a189e1959
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b1cfeddcc249. Setting up logs at ./log/docker/lightpush_node1_2024-09-19_04-19-43__d9adbcc7-430c-4676-a083-73c6c544cae8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 22084
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22084/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22084/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.223.152/tcp/22085/p2p/16Uiu2HAm5ScXR8VHkDxFHhUxfhDvkaE7WifpM31MBhmKdrCH51MN","/ip4/172.18.223.152/tcp/22086/ws/p2p/16Uiu2HAm5ScXR8VHkDxFHhUxfhDvkaE7WifpM31MBhmKdrCH51MN"],"enrUri":"enr:-LO4QLBRvB2hqjrfJLApjTytPpCjejslskZtprF1dY4rGgUwLO5a5oBxvRuILDi5XcplBcbb7byHY6Yasfr0U3Qa0gkBgmlkgnY0gmlwhKwS35iKbXVsdGlhZGRyc4wACgSsEt-YBlZG3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKU0oszSLwdUa03sKEOO6pjd1kEIoSFWEwY_5e0QW-SXYN0Y3CCVkWDdWRwglZHhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22084/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.3.3/tcp/26065/p2p/16Uiu2HAm3tqkDMi7maJxLhRR75GJVpx4fXB8YQwZ8ergCkXLC3A1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22084/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726719586964334848}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:22084/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 598fd7f98a8c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b1cfeddcc249
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.