[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_pubsub_topic_list_instead_of_string with id: 2024-09-19_04-16-23__7358ce52-35c7-42f5-9b89-95c45df745ef
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-19_04-16-23__7358ce52-35c7-42f5-9b89-95c45df745ef__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.128.16
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['26665', '26666', '26667', '26668', '26669']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 26665:26665 -p 26666:26666 -p 26667:26667 -p 26668:26668 -p 26669:26669 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26667 --rest-port=26665 --tcp-port=26666 --discv5-udp-port=26668 --rest-address=0.0.0.0 --nat=extip:172.18.128.16 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4117785e78cb2ba80e380edc0cde8fcbac6b5ffb1c936ceb7a5eb5eeffd02c7c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26669 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.128.16 waku f744d7a6f7653b248a5a4f2b93e4b5a68ae6cf3b042fab451f61d2a24e296b16
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f744d7a6f765. Setting up logs at ./log/docker/node1_2024-09-19_04-16-23__7358ce52-35c7-42f5-9b89-95c45df745ef__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 26665
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26665/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26665/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.128.16/tcp/26666/p2p/16Uiu2HAmDNQaBd5XT8VY8szdGetweinJ2YrGTbaVXda7nxzAJyUU","/ip4/172.18.128.16/tcp/26667/ws/p2p/16Uiu2HAmDNQaBd5XT8VY8szdGetweinJ2YrGTbaVXda7nxzAJyUU"],"enrUri":"enr:-LO4QPd2ixqW7tFjqQ0GyZOUTVSNi7pYDI2mghkS0XfTo-D0cSg8OhLje0bwNoYBJ8jF509C3GeqWXjJS9wkjRPkOE8BgmlkgnY0gmlwhKwSgBCKbXVsdGlhZGRyc4wACgSsEoAQBmgr3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMKnDOQvEIhdOYCJJzKSyce9QwVOuK0UjnfpCOIzgnZMYN0Y3CCaCqDdWRwgmgshXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-19_04-16-23__7358ce52-35c7-42f5-9b89-95c45df745ef__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.237.215
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['12396', '12397', '12398', '12399', '12400']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 12396:12396 -p 12397:12397 -p 12398:12398 -p 12399:12399 -p 12400:12400 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12398 --rest-port=12396 --tcp-port=12397 --discv5-udp-port=12399 --rest-address=0.0.0.0 --nat=extip:172.18.237.215 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fff1519aa55faceac6dc30d6b08f4b6f5ebcce8dfe35d58dfbabeebeac10cd3e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12400 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QPd2ixqW7tFjqQ0GyZOUTVSNi7pYDI2mghkS0XfTo-D0cSg8OhLje0bwNoYBJ8jF509C3GeqWXjJS9wkjRPkOE8BgmlkgnY0gmlwhKwSgBCKbXVsdGlhZGRyc4wACgSsEoAQBmgr3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMKnDOQvEIhdOYCJJzKSyce9QwVOuK0UjnfpCOIzgnZMYN0Y3CCaCqDdWRwgmgshXdha3UyBQ --filternode=/ip4/172.18.128.16/tcp/26666/p2p/16Uiu2HAmDNQaBd5XT8VY8szdGetweinJ2YrGTbaVXda7nxzAJyUU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.237.215 waku db3f8e965fbf52118a253ddc47eda1b578e1ad63260a521503eee5c6b579db93
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID db3f8e965fbf. Setting up logs at ./log/docker/node2_2024-09-19_04-16-23__7358ce52-35c7-42f5-9b89-95c45df745ef__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 12396
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12396/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12396/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.237.215/tcp/12397/p2p/16Uiu2HAmTz7X9uYXkcvPMbnB2pdr8XeaNeDfn86QcuqQbWi5fTdY","/ip4/172.18.237.215/tcp/12398/ws/p2p/16Uiu2HAmTz7X9uYXkcvPMbnB2pdr8XeaNeDfn86QcuqQbWi5fTdY"],"enrUri":"enr:-LO4QP1EMbfy_YVQz14LBJiwCQE57lqhKoEohrTPO_KR5H32csHb764Li8TWmfACszl9B-xoLhahCk4pNHkl_tO7_mEBgmlkgnY0gmlwhKwS7deKbXVsdGlhZGRyc4wACgSsEu3XBjBu3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPjxXJN1LNrTO19r30YCiLxn83BQdLkBOq2PdBGLg2z_4N0Y3CCMG2DdWRwgjBvhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12396/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.128.16/tcp/26666/p2p/16Uiu2HAmDNQaBd5XT8VY8szdGetweinJ2YrGTbaVXda7nxzAJyUU"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26665/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12396/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "9aa9dce1-84f4-4d4c-83de-f4b3f4026586", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"9aa9dce1-84f4-4d4c-83de-f4b3f4026586","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:12396/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": ["/waku/2/rs/3/1"]}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:12396/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f744d7a6f765
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id db3f8e965fbf
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.