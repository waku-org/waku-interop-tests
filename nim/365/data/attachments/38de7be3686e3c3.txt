[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_version with id: 2024-09-19_04-18-52__0670e86f-0527-4990-b4ce-a64e551035a8
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-19_04-18-52__0670e86f-0527-4990-b4ce-a64e551035a8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.133.36
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['30685', '30686', '30687', '30688', '30689']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 30685:30685 -p 30686:30686 -p 30687:30687 -p 30688:30688 -p 30689:30689 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30687 --rest-port=30685 --tcp-port=30686 --discv5-udp-port=30688 --rest-address=0.0.0.0 --nat=extip:172.18.133.36 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=87c3c5fba3bda79cd2fcd2aeead606ea0afd18f91474edfdd45e00f4eed7e5d6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30689 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.133.36 waku 5d8e3f92976898a4a3f67ab2d2bca684dd54d0c9f775165aef96782dd30193a0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5d8e3f929768. Setting up logs at ./log/docker/receiving_node1_2024-09-19_04-18-52__0670e86f-0527-4990-b4ce-a64e551035a8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 30685
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30685/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30685/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.133.36/tcp/30686/p2p/16Uiu2HAmUDM9kHZsAs6Usm2JnfiDau22wZjVNh2XMv4HAGko43KV","/ip4/172.18.133.36/tcp/30687/ws/p2p/16Uiu2HAmUDM9kHZsAs6Usm2JnfiDau22wZjVNh2XMv4HAGko43KV"],"enrUri":"enr:-LO4QDbXrxadrjnSp7LR1ox_E91tAI-IIlbV1zk08hC9MKcncL-Z_21J-JbQNhdYeAAA8qdB9WJsu2TL26izdDRVfXUBgmlkgnY0gmlwhKwShSSKbXVsdGlhZGRyc4wACgSsEoUkBnff3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPnKWjXZKJ10yExTy7ZmyNjaL-KNvZLuWpXdraaUGf18IN0Y3CCd96DdWRwgnfghXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-19_04-18-52__0670e86f-0527-4990-b4ce-a64e551035a8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.171.125
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['61873', '61874', '61875', '61876', '61877']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 61873:61873 -p 61874:61874 -p 61875:61875 -p 61876:61876 -p 61877:61877 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61875 --rest-port=61873 --tcp-port=61874 --discv5-udp-port=61876 --rest-address=0.0.0.0 --nat=extip:172.18.171.125 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=96eb2f6123d6ed525d6432ce4debd088dbd5317f8becc3b2c7cfb073650c779e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61877 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.171.125 waku 4f341fd10ac00d5173001dffd7e0a751e07107cd8287accac30c28cb2ca724b2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4f341fd10ac0. Setting up logs at ./log/docker/receiving_node2_2024-09-19_04-18-52__0670e86f-0527-4990-b4ce-a64e551035a8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 61873
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61873/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61873/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.171.125/tcp/61874/p2p/16Uiu2HAmHr9hkMbPmzqCQKhMa2SJUwc1tZPFTNDbcsp7rF8WYP8h","/ip4/172.18.171.125/tcp/61875/ws/p2p/16Uiu2HAmHr9hkMbPmzqCQKhMa2SJUwc1tZPFTNDbcsp7rF8WYP8h"],"enrUri":"enr:-LO4QI9Tbng21qzFLadfplhtYfj96uB22zBuEBibZgsSlZEwZ7M8ZmvY9KXD6md3nvAViRJnsnCCYY0S3xAfpuTGWEMBgmlkgnY0gmlwhKwSq32KbXVsdGlhZGRyc4wACgSsEqt9BvGz3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNNJmYRJLBbl8bnMfet5bxotdjeTVRD8UliR8eFw7bF3oN0Y3CC8bKDdWRwgvG0hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61873/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.133.36/tcp/30686/p2p/16Uiu2HAmUDM9kHZsAs6Usm2JnfiDau22wZjVNh2XMv4HAGko43KV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-19_04-18-52__0670e86f-0527-4990-b4ce-a64e551035a8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.239.127
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['21011', '21012', '21013', '21014', '21015']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 21011:21011 -p 21012:21012 -p 21013:21013 -p 21014:21014 -p 21015:21015 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21013 --rest-port=21011 --tcp-port=21012 --discv5-udp-port=21014 --rest-address=0.0.0.0 --nat=extip:172.18.239.127 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=59798bbbcd8f1bdf1f8decc1d13c760e7e41a784fff7bce11ffec13f4302a3da --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21015 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QDbXrxadrjnSp7LR1ox_E91tAI-IIlbV1zk08hC9MKcncL-Z_21J-JbQNhdYeAAA8qdB9WJsu2TL26izdDRVfXUBgmlkgnY0gmlwhKwShSSKbXVsdGlhZGRyc4wACgSsEoUkBnff3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPnKWjXZKJ10yExTy7ZmyNjaL-KNvZLuWpXdraaUGf18IN0Y3CCd96DdWRwgnfghXdha3UyCQ --lightpushnode=/ip4/172.18.133.36/tcp/30686/p2p/16Uiu2HAmUDM9kHZsAs6Usm2JnfiDau22wZjVNh2XMv4HAGko43KV --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.239.127 waku 7314df2a018186dfba2aa600f08fc1ed315e220623a8d9ea1078c43f5df4b440
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7314df2a0181. Setting up logs at ./log/docker/lightpush_node1_2024-09-19_04-18-52__0670e86f-0527-4990-b4ce-a64e551035a8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 21011
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21011/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21011/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.239.127/tcp/21012/p2p/16Uiu2HAmQVBsaDhPxJU7bgnYkYYDUi3V2d4kdR6aYtBb9ZHGGhYF","/ip4/172.18.239.127/tcp/21013/ws/p2p/16Uiu2HAmQVBsaDhPxJU7bgnYkYYDUi3V2d4kdR6aYtBb9ZHGGhYF"],"enrUri":"enr:-LO4QDu26pOwaYKD2UGDN_1khc8_3d54abuAQ-6AJUPkd7n0XuHvz6DJ4_wbdkbXdKlc5Gagj8yBNLCSZgXYUXR6WT8BgmlkgnY0gmlwhKwS73-KbXVsdGlhZGRyc4wACgSsEu9_BlIV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOvyXaQe6FlSDHD_njzIT773cV7FFdrd_W0vgMmhj4w_IN0Y3CCUhSDdWRwglIWhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21011/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.133.36/tcp/30686/p2p/16Uiu2HAmUDM9kHZsAs6Usm2JnfiDau22wZjVNh2XMv4HAGko43KV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21011/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.171.125/tcp/61874/p2p/16Uiu2HAmHr9hkMbPmzqCQKhMa2SJUwc1tZPFTNDbcsp7rF8WYP8h"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30685/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61873/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21011/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726719537538880000, "version": 10}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30685/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1726719537538880000,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61873/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1726719537538880000,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5d8e3f929768
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4f341fd10ac0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7314df2a0181
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.