[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_ping_on_unsubscribed_peer with id: 2024-09-19_04-15-29__7d6b57b7-23b7-4e21-bb12-9ab19017e072
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-19_04-15-29__7d6b57b7-23b7-4e21-bb12-9ab19017e072__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.225.155
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['28495', '28496', '28497', '28498', '28499']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 28495:28495 -p 28496:28496 -p 28497:28497 -p 28498:28498 -p 28499:28499 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28497 --rest-port=28495 --tcp-port=28496 --discv5-udp-port=28498 --rest-address=0.0.0.0 --nat=extip:172.18.225.155 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9cf3f8e033ef3e607e5eb3bdbb8dbaaa17e6b2dec3fb1bebed05a73884cb2dc8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28499 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.225.155 waku 6d0add088e2390446c34a051bef8d47a7a91643c5bdec269bbcc0ceb93eeade9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 6d0add088e23. Setting up logs at ./log/docker/node1_2024-09-19_04-15-29__7d6b57b7-23b7-4e21-bb12-9ab19017e072__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 28495
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28495/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28495/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.225.155/tcp/28496/p2p/16Uiu2HAm6iDcLmB9vGAsd96R5CKjMMiv3eqbvwHH9TnZmjnaPMj4","/ip4/172.18.225.155/tcp/28497/ws/p2p/16Uiu2HAm6iDcLmB9vGAsd96R5CKjMMiv3eqbvwHH9TnZmjnaPMj4"],"enrUri":"enr:-LO4QJ2AfFwIXS-Ld0Alm4btjg5br3msWkdWVaq0K40ex2_wGN5bPozKBUYh50DziNB9x9yprs5jukB17Jz9Vyq4odgBgmlkgnY0gmlwhKwS4ZuKbXVsdGlhZGRyc4wACgSsEuGbBm9R3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKnrZ0K0prNDHFn5-zIr8eS0hsbSdI4yXpb_DSwcYlad4N0Y3CCb1CDdWRwgm9ShXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-19_04-15-29__7d6b57b7-23b7-4e21-bb12-9ab19017e072__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.63.163
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['61553', '61554', '61555', '61556', '61557']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 61553:61553 -p 61554:61554 -p 61555:61555 -p 61556:61556 -p 61557:61557 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61555 --rest-port=61553 --tcp-port=61554 --discv5-udp-port=61556 --rest-address=0.0.0.0 --nat=extip:172.18.63.163 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0fd6b0ff8aee8cba3bc6dfdfcfaf0ea5dbc309ca66cd12b6e30e80e63ddd5850 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61557 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QJ2AfFwIXS-Ld0Alm4btjg5br3msWkdWVaq0K40ex2_wGN5bPozKBUYh50DziNB9x9yprs5jukB17Jz9Vyq4odgBgmlkgnY0gmlwhKwS4ZuKbXVsdGlhZGRyc4wACgSsEuGbBm9R3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKnrZ0K0prNDHFn5-zIr8eS0hsbSdI4yXpb_DSwcYlad4N0Y3CCb1CDdWRwgm9ShXdha3UyBQ --filternode=/ip4/172.18.225.155/tcp/28496/p2p/16Uiu2HAm6iDcLmB9vGAsd96R5CKjMMiv3eqbvwHH9TnZmjnaPMj4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.63.163 waku b0eb290c5d38850573ddee178aa4e3fa556c6d3445761cd57cc55e468b7b845e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b0eb290c5d38. Setting up logs at ./log/docker/node2_2024-09-19_04-15-29__7d6b57b7-23b7-4e21-bb12-9ab19017e072__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 61553
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61553/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61553/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.63.163/tcp/61554/p2p/16Uiu2HAmGwJJdEaPjMmyMiNm1LMLMyZwdGeLDJV9eJ5CsdNWbcBq","/ip4/172.18.63.163/tcp/61555/ws/p2p/16Uiu2HAmGwJJdEaPjMmyMiNm1LMLMyZwdGeLDJV9eJ5CsdNWbcBq"],"enrUri":"enr:-LO4QH1zeE3A7ariESTke-AzYGs3X5sLqbFuPQap1F90eBwlJRx7Wji2zvpoTrJ8NPg8_i1R9FxpGFem9NYTp-SeJLYBgmlkgnY0gmlwhKwSP6OKbXVsdGlhZGRyc4wACgSsEj-jBvBz3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM_nFdkUzy0POoAajiXPf4HiYhUu1fCMXVXL0d6gBF1oIN0Y3CC8HKDdWRwgvB0hXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61553/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.225.155/tcp/28496/p2p/16Uiu2HAm6iDcLmB9vGAsd96R5CKjMMiv3eqbvwHH9TnZmjnaPMj4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28495/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61553/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "4c662ec9-c172-4f12-9c5b-467996f6a8d2", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"4c662ec9-c172-4f12-9c5b-467996f6a8d2","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61553/filter/v2/subscriptions/76eb6671-c624-4a7e-8361-e4ee527a61ff" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"76eb6671-c624-4a7e-8361-e4ee527a61ff","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:61553/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"12345","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61553/filter/v2/subscriptions/46890856-b346-4f12-9ce3-2e939f4ab4c4" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:61553/filter/v2/subscriptions/46890856-b346-4f12-9ce3-2e939f4ab4c4. Response content: b'{"requestId":"46890856-b346-4f12-9ce3-2e939f4ab4c4","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 6d0add088e23
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b0eb290c5d38
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.