[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_content_topic[/app/22/sometopic/someencoding] with id: 2024-09-19_04-25-24__d55d73b0-f13a-4605-a376-0c297432bc56
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-19_04-25-24__d55d73b0-f13a-4605-a376-0c297432bc56__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.192.99
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['35173', '35174', '35175', '35176', '35177']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 35173:35173 -p 35174:35174 -p 35175:35175 -p 35176:35176 -p 35177:35177 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35175 --rest-port=35173 --tcp-port=35174 --discv5-udp-port=35176 --rest-address=0.0.0.0 --nat=extip:172.18.192.99 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=7615003c2b89cddc94c804dcae1ded9ffac9812efdf309febe4a93ee3e025dcb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35177 --metrics-logging=true --relay=true --filter=true --content-topic=/app/22/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.192.99 waku d115d30a6e66ab19cc659e21af0af9f019904074ca36379289e6857efe247efa
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d115d30a6e66. Setting up logs at ./log/docker/node1_2024-09-19_04-25-24__d55d73b0-f13a-4605-a376-0c297432bc56__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 35173
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35173/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35173/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.192.99/tcp/35174/p2p/16Uiu2HAmLFxPfhUVHPscD6qanGVHtHprsUuAnLz8tT5YdxtVEtn4","/ip4/172.18.192.99/tcp/35175/ws/p2p/16Uiu2HAmLFxPfhUVHPscD6qanGVHtHprsUuAnLz8tT5YdxtVEtn4"],"enrUri":"enr:-LO4QCLd9x0ztSssvFww_H5lA07-WWurbR3whcfohFv84RNzfXP3XM1brrtCH6TOClqqllXepCIrMP9xmk_JfQ4102cBgmlkgnY0gmlwhKwSwGOKbXVsdGlhZGRyc4wACgSsEsBjBoln3QOCcnOFAAIBAACJc2VjcDI1NmsxoQNw9uv4PKIbRhZDOgCpuWly-AIjePoTuEW8U3lr0gOByYN0Y3CCiWaDdWRwgolohXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-19_04-25-24__d55d73b0-f13a-4605-a376-0c297432bc56__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.154.145
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['57054', '57055', '57056', '57057', '57058']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 57054:57054 -p 57055:57055 -p 57056:57056 -p 57057:57057 -p 57058:57058 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57056 --rest-port=57054 --tcp-port=57055 --discv5-udp-port=57057 --rest-address=0.0.0.0 --nat=extip:172.18.154.145 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=a42d5cca472468bc81bffa1912e9769cb65c0ea6eccd8c6f3c5efadfbaebca9e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57058 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QCLd9x0ztSssvFww_H5lA07-WWurbR3whcfohFv84RNzfXP3XM1brrtCH6TOClqqllXepCIrMP9xmk_JfQ4102cBgmlkgnY0gmlwhKwSwGOKbXVsdGlhZGRyc4wACgSsEsBjBoln3QOCcnOFAAIBAACJc2VjcDI1NmsxoQNw9uv4PKIbRhZDOgCpuWly-AIjePoTuEW8U3lr0gOByYN0Y3CCiWaDdWRwgolohXdha3UyBQ --content-topic=/app/22/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.154.145 waku 87c6384a6de011514623c66075a1133501a77f5a576ba3791db9b69f2728c528
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 87c6384a6de0. Setting up logs at ./log/docker/node2_2024-09-19_04-25-24__d55d73b0-f13a-4605-a376-0c297432bc56__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 57054
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57054/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57054/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.154.145/tcp/57055/p2p/16Uiu2HAmQ5pe5bdQ1ZoBcMez2thz2ReAN69Vh8295f64GVVAcHkx","/ip4/172.18.154.145/tcp/57056/ws/p2p/16Uiu2HAmQ5pe5bdQ1ZoBcMez2thz2ReAN69Vh8295f64GVVAcHkx"],"enrUri":"enr:-LO4QJpDlXK5Tb0mlvgLxzXCn5TxZ9T4KnkcThs_7goA_paPQegAZe-KYM7LIbdE4M6I0Ce09KrgNXqr5mvFu4ID2hwBgmlkgnY0gmlwhKwSmpGKbXVsdGlhZGRyc4wACgSsEpqRBt7g3QOCcnOFAAIBAACJc2VjcDI1NmsxoQOpzRjBlGVPTx12C-gpfiPod_FsLjo_L97m4nkS-zZMPYN0Y3CC3t-DdWRwgt7hhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57054/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.192.99/tcp/35174/p2p/16Uiu2HAmLFxPfhUVHPscD6qanGVHtHprsUuAnLz8tT5YdxtVEtn4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35173/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/22/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57054/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/22/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35173/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35173/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/22/sometopic/someencoding","version":0,"timestamp":1726719929108052480,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57054/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/22/sometopic/someencoding","version":0,"timestamp":1726719929108052480,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d115d30a6e66
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 87c6384a6de0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.