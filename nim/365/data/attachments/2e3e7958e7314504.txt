[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_no_timestamp with id: 2024-09-19_04-18-49__cbdc8dc0-55c4-45c9-831c-11eb840da73f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-19_04-18-49__cbdc8dc0-55c4-45c9-831c-11eb840da73f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.174.144
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['11683', '11684', '11685', '11686', '11687']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 11683:11683 -p 11684:11684 -p 11685:11685 -p 11686:11686 -p 11687:11687 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11685 --rest-port=11683 --tcp-port=11684 --discv5-udp-port=11686 --rest-address=0.0.0.0 --nat=extip:172.18.174.144 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9cfeff9d117c47cbbbc3df46abc7d3cacd48d32f48bd0cc35a98bb0fcaf9d6c8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11687 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.174.144 waku 333f4c03902ba12a74692c94c76666097d3615113be0afe07d7c3a8705a7c1a3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 333f4c03902b. Setting up logs at ./log/docker/receiving_node1_2024-09-19_04-18-49__cbdc8dc0-55c4-45c9-831c-11eb840da73f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 11683
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11683/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11683/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.174.144/tcp/11684/p2p/16Uiu2HAkxA61GBSxdcJbmf7qGqKkZTZcWJghzQwzMQ89ATQSrzAR","/ip4/172.18.174.144/tcp/11685/ws/p2p/16Uiu2HAkxA61GBSxdcJbmf7qGqKkZTZcWJghzQwzMQ89ATQSrzAR"],"enrUri":"enr:-LO4QBvGOlJG5Syh9LcfE5RhI2aUkaFmaNKmZi_JexRXaLE7YDRrkaO4LGDjs1W9hgXGQ2LfvneRpqW3MX43xLY5nAkBgmlkgnY0gmlwhKwSrpCKbXVsdGlhZGRyc4wACgSsEq6QBi2l3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIolO7wm0rRaZR4XU8Lbu1LsucEhZQ_QqrMj-FwgA8zvoN0Y3CCLaSDdWRwgi2mhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-19_04-18-49__cbdc8dc0-55c4-45c9-831c-11eb840da73f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.30.6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['18955', '18956', '18957', '18958', '18959']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 18955:18955 -p 18956:18956 -p 18957:18957 -p 18958:18958 -p 18959:18959 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18957 --rest-port=18955 --tcp-port=18956 --discv5-udp-port=18958 --rest-address=0.0.0.0 --nat=extip:172.18.30.6 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aa5cdb899cbcf66f8fd9f312ceccde2dbcafbcf0a914a3f9b399afefdc61dd9e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18959 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.30.6 waku 5e941784fdd84917414315bd0e1d73728d6bf8add74e003088a808472b6de213
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5e941784fdd8. Setting up logs at ./log/docker/receiving_node2_2024-09-19_04-18-49__cbdc8dc0-55c4-45c9-831c-11eb840da73f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 18955
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18955/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18955/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.30.6/tcp/18956/p2p/16Uiu2HAm4Br1TSBHJD7Tzki7jfvf4wQaNh1mKPaqMKNz4K7o4vRU","/ip4/172.18.30.6/tcp/18957/ws/p2p/16Uiu2HAm4Br1TSBHJD7Tzki7jfvf4wQaNh1mKPaqMKNz4K7o4vRU"],"enrUri":"enr:-LO4QHUKMVKnz3tvyaqRRr6FHIttJaiDGCYVTZGG6OBRTm2IefFMquKmki5LXe-k-0W-hxigPGFuSAbF-MDXh_74ldMBgmlkgnY0gmlwhKwSHgaKbXVsdGlhZGRyc4wACgSsEh4GBkoN3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKCLmP1qsBiZyqx5EjKu5rg6uXfhaDV4AlIUhJCQuJaF4N0Y3CCSgyDdWRwgkoOhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18955/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.174.144/tcp/11684/p2p/16Uiu2HAkxA61GBSxdcJbmf7qGqKkZTZcWJghzQwzMQ89ATQSrzAR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-19_04-18-49__cbdc8dc0-55c4-45c9-831c-11eb840da73f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.19.49
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['17363', '17364', '17365', '17366', '17367']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 17363:17363 -p 17364:17364 -p 17365:17365 -p 17366:17366 -p 17367:17367 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17365 --rest-port=17363 --tcp-port=17364 --discv5-udp-port=17366 --rest-address=0.0.0.0 --nat=extip:172.18.19.49 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d6aacbfaeca29beaf7d43dbe439eadb0e5b6bce665dacf251f51b6ec6bfb3f5b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17367 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QBvGOlJG5Syh9LcfE5RhI2aUkaFmaNKmZi_JexRXaLE7YDRrkaO4LGDjs1W9hgXGQ2LfvneRpqW3MX43xLY5nAkBgmlkgnY0gmlwhKwSrpCKbXVsdGlhZGRyc4wACgSsEq6QBi2l3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIolO7wm0rRaZR4XU8Lbu1LsucEhZQ_QqrMj-FwgA8zvoN0Y3CCLaSDdWRwgi2mhXdha3UyCQ --lightpushnode=/ip4/172.18.174.144/tcp/11684/p2p/16Uiu2HAkxA61GBSxdcJbmf7qGqKkZTZcWJghzQwzMQ89ATQSrzAR --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.19.49 waku 25bc8d8fe49ae24f3e9ad6b01b0945f424615f2f29d420247be9a1fb895ad0f6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 25bc8d8fe49a. Setting up logs at ./log/docker/lightpush_node1_2024-09-19_04-18-49__cbdc8dc0-55c4-45c9-831c-11eb840da73f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 17363
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17363/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17363/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.19.49/tcp/17364/p2p/16Uiu2HAmMNnCdjvz6a7WxwWi46RBjnznZryd97hL2HRmG3iMX8ss","/ip4/172.18.19.49/tcp/17365/ws/p2p/16Uiu2HAmMNnCdjvz6a7WxwWi46RBjnznZryd97hL2HRmG3iMX8ss"],"enrUri":"enr:-LO4QL-CqeIJPPzcSWBXwU6p5peF19pBvBFtSGsq5HTxQSR1dbz4R1XZy_seqhcdzDPRdQGS3j6zGH5zg2kDl6PwW58BgmlkgnY0gmlwhKwSEzGKbXVsdGlhZGRyc4wACgSsEhMxBkPV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOBkib3JFd7l_njJhVXD6depDt-K_NOIas7AIwgHt5SEoN0Y3CCQ9SDdWRwgkPWhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17363/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.174.144/tcp/11684/p2p/16Uiu2HAkxA61GBSxdcJbmf7qGqKkZTZcWJghzQwzMQ89ATQSrzAR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17363/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.30.6/tcp/18956/p2p/16Uiu2HAm4Br1TSBHJD7Tzki7jfvf4wQaNh1mKPaqMKNz4K7o4vRU"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11683/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18955/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17363/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11683/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726719535037088768,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18955/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726719535037088768,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 333f4c03902b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5e941784fdd8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 25bc8d8fe49a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.