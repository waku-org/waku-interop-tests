[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2024-09-19_04-18-37__e28a7f10-134d-478b-b702-9b55efc1584b
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-19_04-18-37__e28a7f10-134d-478b-b702-9b55efc1584b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.85.32
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['41892', '41893', '41894', '41895', '41896']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 41892:41892 -p 41893:41893 -p 41894:41894 -p 41895:41895 -p 41896:41896 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41894 --rest-port=41892 --tcp-port=41893 --discv5-udp-port=41895 --rest-address=0.0.0.0 --nat=extip:172.18.85.32 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5b1bfcceb4a82ad3ead1c455013a9ecbc7abeda9db29f1aa6d0eb00c987eb992 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41896 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.85.32 waku 3fc82bff28e51bf6e9c21b594bdd1d0535598700b70498573d6a771ae2c8f0b1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3fc82bff28e5. Setting up logs at ./log/docker/receiving_node1_2024-09-19_04-18-37__e28a7f10-134d-478b-b702-9b55efc1584b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 41892
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41892/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41892/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.85.32/tcp/41893/p2p/16Uiu2HAmUnZoRfi9Mozeg3EgZP76sBUCGqZoCEMJvyqaribLQkn9","/ip4/172.18.85.32/tcp/41894/ws/p2p/16Uiu2HAmUnZoRfi9Mozeg3EgZP76sBUCGqZoCEMJvyqaribLQkn9"],"enrUri":"enr:-LO4QNE1OemX2fNrK6yppXVax1s4zS9GzpM-hMboz63HZF-VFQ26-zNaCHPzxfGAS3pcm2Xz3-iJ4WhPejGRkRMJbUYBgmlkgnY0gmlwhKwSVSCKbXVsdGlhZGRyc4wACgSsElUgBqOm3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPvq-EVCWYJQOMUMFxZEEJ9nSpuBRxsKu58A3a8ZzmMDoN0Y3CCo6WDdWRwgqOnhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-19_04-18-37__e28a7f10-134d-478b-b702-9b55efc1584b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.151.27
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['24368', '24369', '24370', '24371', '24372']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 24368:24368 -p 24369:24369 -p 24370:24370 -p 24371:24371 -p 24372:24372 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24370 --rest-port=24368 --tcp-port=24369 --discv5-udp-port=24371 --rest-address=0.0.0.0 --nat=extip:172.18.151.27 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6b462ed661d2fddbb4dafefcc67849dc3e8ec4dedb1c7bb4cd88b4fa179a870f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24372 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.151.27 waku f0c1dade6ee9b5c4bafd3d6b12860b90b4cd440f1f8379e6987adccf8aa682bc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f0c1dade6ee9. Setting up logs at ./log/docker/receiving_node2_2024-09-19_04-18-37__e28a7f10-134d-478b-b702-9b55efc1584b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 24368
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24368/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24368/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.151.27/tcp/24369/p2p/16Uiu2HAmFX2bpADiNnhfTA16aWvozHcnHoRpHLUBk8ohJbxAUDPN","/ip4/172.18.151.27/tcp/24370/ws/p2p/16Uiu2HAmFX2bpADiNnhfTA16aWvozHcnHoRpHLUBk8ohJbxAUDPN"],"enrUri":"enr:-LO4QKHw5eKuYXWsjboRHRszkxsOwccvUXvr6P_keI-upEMCDjDIaI-cgqSxPVI5V82Ef5ODF0-o3gdm8CCtqC7vuYcBgmlkgnY0gmlwhKwSlxuKbXVsdGlhZGRyc4wACgSsEpcbBl8y3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMqiPV3tuGTe5hmMSpgbzQU9K36ogqp8Z2l9WEiZAiO6YN0Y3CCXzGDdWRwgl8zhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24368/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.85.32/tcp/41893/p2p/16Uiu2HAmUnZoRfi9Mozeg3EgZP76sBUCGqZoCEMJvyqaribLQkn9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-19_04-18-37__e28a7f10-134d-478b-b702-9b55efc1584b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.76.218
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['16252', '16253', '16254', '16255', '16256']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 16252:16252 -p 16253:16253 -p 16254:16254 -p 16255:16255 -p 16256:16256 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16254 --rest-port=16252 --tcp-port=16253 --discv5-udp-port=16255 --rest-address=0.0.0.0 --nat=extip:172.18.76.218 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=84ea21fdb4b44af6dbb3f2add5d8aaefaab9d3399e462523b554fa3cdadb02cd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16256 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QNE1OemX2fNrK6yppXVax1s4zS9GzpM-hMboz63HZF-VFQ26-zNaCHPzxfGAS3pcm2Xz3-iJ4WhPejGRkRMJbUYBgmlkgnY0gmlwhKwSVSCKbXVsdGlhZGRyc4wACgSsElUgBqOm3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPvq-EVCWYJQOMUMFxZEEJ9nSpuBRxsKu58A3a8ZzmMDoN0Y3CCo6WDdWRwgqOnhXdha3UyCQ --lightpushnode=/ip4/172.18.85.32/tcp/41893/p2p/16Uiu2HAmUnZoRfi9Mozeg3EgZP76sBUCGqZoCEMJvyqaribLQkn9 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.76.218 waku 6967db6a5ec51571540ce6ddddacb9f473269e0d662d610e6244983f617cd76d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 6967db6a5ec5. Setting up logs at ./log/docker/lightpush_node1_2024-09-19_04-18-37__e28a7f10-134d-478b-b702-9b55efc1584b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 16252
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16252/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16252/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.76.218/tcp/16253/p2p/16Uiu2HAmLmT55PKDSdxb4Tx9h6Dmcgbzcc1PKNeh8JSpWUztXccy","/ip4/172.18.76.218/tcp/16254/ws/p2p/16Uiu2HAmLmT55PKDSdxb4Tx9h6Dmcgbzcc1PKNeh8JSpWUztXccy"],"enrUri":"enr:-LO4QAop3eHpQ1jrINyeU465zN9495kv-r5w7sLGZWVPwD-fEvHIjA2_jqMOu1HXKEvvN2upzD_0hpHHFp5iZaf_AtwBgmlkgnY0gmlwhKwSTNqKbXVsdGlhZGRyc4wACgSsEkzaBj9-3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN4hTF0cFDcK8hHxSmGKrOoQxNQn280aGXFlwcgzSY90oN0Y3CCP32DdWRwgj9_hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16252/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.85.32/tcp/41893/p2p/16Uiu2HAmUnZoRfi9Mozeg3EgZP76sBUCGqZoCEMJvyqaribLQkn9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16252/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.151.27/tcp/24369/p2p/16Uiu2HAmFX2bpADiNnhfTA16aWvozHcnHoRpHLUBk8ohJbxAUDPN"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41892/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24368/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16252/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726719522743731200}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:16252/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16252/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726719522749983232}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:16252/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16252/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726719522755446784}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:16252/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16252/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726719522760676608}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:16252/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3fc82bff28e5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f0c1dade6ee9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 6967db6a5ec5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.