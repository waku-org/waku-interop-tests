[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_lightpushing_node with id: 2024-09-19_04-12-41__4041027c-1e03-4dde-8a4e-3f1179adcf6e
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-19_04-12-41__4041027c-1e03-4dde-8a4e-3f1179adcf6e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-19_04-12-41__4041027c-1e03-4dde-8a4e-3f1179adcf6e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-09-19_04-12-41__4041027c-1e03-4dde-8a4e-3f1179adcf6e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.200.42
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['18531', '18532', '18533', '18534', '18535']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 18531:18531 -p 18532:18532 -p 18533:18533 -p 18534:18534 -p 18535:18535 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18533 --rest-port=18531 --tcp-port=18532 --discv5-udp-port=18534 --rest-address=0.0.0.0 --nat=extip:172.18.200.42 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3d338b4c4efbacf58eafaace3bfb269b2aa8e89b6315ab21e1f555190b2f7ac4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18535 --metrics-logging=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.200.42 waku 50221f50cc0325f57192fdab922721c86d5de10a0cbd3244713d2da123991eff
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 50221f50cc03. Setting up logs at ./log/docker/node1_2024-09-19_04-12-41__4041027c-1e03-4dde-8a4e-3f1179adcf6e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 18531
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18531/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18531/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.200.42/tcp/18532/p2p/16Uiu2HAkz64cxxvHFMqhAT7BYayB7LbLPQZPK24xjs4QPD8svEMi","/ip4/172.18.200.42/tcp/18533/ws/p2p/16Uiu2HAkz64cxxvHFMqhAT7BYayB7LbLPQZPK24xjs4QPD8svEMi"],"enrUri":"enr:-LO4QIpPr8I9qm6-zqtDvdQl043cWiISAUxshHR8GDLXCGy0KMOABQwMBCltqEaqRuKcpbnZwIkWSI0CGNBqUpOMSV4BgmlkgnY0gmlwhKwSyCqKbXVsdGlhZGRyc4wACgSsEsgqBkhl3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJFRGspNBSV_nGfseLS7J0ZMyd5TfA1ABjjANckZr49TYN0Y3CCSGSDdWRwgkhmhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.170.162
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['25838', '25839', '25840', '25841', '25842']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 25838:25838 -p 25839:25839 -p 25840:25840 -p 25841:25841 -p 25842:25842 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25840 --rest-port=25838 --tcp-port=25839 --discv5-udp-port=25841 --rest-address=0.0.0.0 --nat=extip:172.18.170.162 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f69f71f63b3477415a95e0b8c792f117e76fbd6a9aeaeac4fcf6a44bd6edfd4f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25842 --metrics-logging=true --lightpush=true --filter=true --relay=true --discv5-bootstrap-node=enr:-LO4QIpPr8I9qm6-zqtDvdQl043cWiISAUxshHR8GDLXCGy0KMOABQwMBCltqEaqRuKcpbnZwIkWSI0CGNBqUpOMSV4BgmlkgnY0gmlwhKwSyCqKbXVsdGlhZGRyc4wACgSsEsgqBkhl3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJFRGspNBSV_nGfseLS7J0ZMyd5TfA1ABjjANckZr49TYN0Y3CCSGSDdWRwgkhmhXdha3UyCQ --lightpushnode=/ip4/172.18.200.42/tcp/18532/p2p/16Uiu2HAkz64cxxvHFMqhAT7BYayB7LbLPQZPK24xjs4QPD8svEMi
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.170.162 waku facbfbee7219fd7c617727f9fd9a2cbb4e6eca8e4e2c7537ba2272fae21e6fa4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID facbfbee7219. Setting up logs at ./log/docker/node2_2024-09-19_04-12-41__4041027c-1e03-4dde-8a4e-3f1179adcf6e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 25838
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25838/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25838/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.170.162/tcp/25839/p2p/16Uiu2HAm5aM3YpdGJn5SHcCFf322obSZmSJr44WnnU85ShBNKHpH","/ip4/172.18.170.162/tcp/25840/ws/p2p/16Uiu2HAm5aM3YpdGJn5SHcCFf322obSZmSJr44WnnU85ShBNKHpH"],"enrUri":"enr:-LO4QAqlFot0eyYaCioT-_1OgVRZDxcTHVk3xS3pEPBBzGSSSwgwRTmXobauwlitFW1xwwu53y3eeywBADXG_bmDcsEBgmlkgnY0gmlwhKwSqqKKbXVsdGlhZGRyc4wACgSsEqqiBmTw3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKWza-3zR8Dhed0gZzNjmjl6wCnuKsBo2nv4bYPRr-81oN0Y3CCZO-DdWRwgmTxhXdha3UyDQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.252.125
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['65427', '65428', '65429', '65430', '65431']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 65427:65427 -p 65428:65428 -p 65429:65429 -p 65430:65430 -p 65431:65431 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65429 --rest-port=65427 --tcp-port=65428 --discv5-udp-port=65430 --rest-address=0.0.0.0 --nat=extip:172.18.252.125 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bcfeac29aaf2ff4b0b6ee27cea65238c9187ef1cbb1c9f7da34ec3b6b79d2b3c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65431 --metrics-logging=true --relay=false --filternode=/ip4/172.18.170.162/tcp/25839/p2p/16Uiu2HAm5aM3YpdGJn5SHcCFf322obSZmSJr44WnnU85ShBNKHpH --discv5-bootstrap-node=enr:-LO4QAqlFot0eyYaCioT-_1OgVRZDxcTHVk3xS3pEPBBzGSSSwgwRTmXobauwlitFW1xwwu53y3eeywBADXG_bmDcsEBgmlkgnY0gmlwhKwSqqKKbXVsdGlhZGRyc4wACgSsEqqiBmTw3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKWza-3zR8Dhed0gZzNjmjl6wCnuKsBo2nv4bYPRr-81oN0Y3CCZO-DdWRwgmTxhXdha3UyDQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.252.125 waku 63b07f5d8d98e559d126032dbce1f99b2cc4223a8866cd2c3b823f5b384511a6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 63b07f5d8d98. Setting up logs at ./log/docker/node3_2024-09-19_04-12-41__4041027c-1e03-4dde-8a4e-3f1179adcf6e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 65427
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65427/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65427/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.252.125/tcp/65428/p2p/16Uiu2HAmHuGY2GrWVPeQnDJC9ZRGLzQattzeou4kBXBmgSr5WXFG","/ip4/172.18.252.125/tcp/65429/ws/p2p/16Uiu2HAmHuGY2GrWVPeQnDJC9ZRGLzQattzeou4kBXBmgSr5WXFG"],"enrUri":"enr:-LO4QLXQel8rD6pwNlxgCLEcssl414W-lbAmGdPqzX6q2IRuK-efG87vvj_jWYYsiZ1NH_pl05qIV60H45BGRxdBP-kBgmlkgnY0gmlwhKwS_H2KbXVsdGlhZGRyc4wACgSsEvx9Bv-V3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNN8t3P3oRDfT_oCu7g5becJZ-Frks9gjta076iACRZm4N0Y3CC_5SDdWRwgv-WhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18531/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25838/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65427/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18531/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18531/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18531/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.170.162/tcp/25839/p2p/16Uiu2HAm5aM3YpdGJn5SHcCFf322obSZmSJr44WnnU85ShBNKHpH","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25838/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.200.42/tcp/18532/p2p/16Uiu2HAkz64cxxvHFMqhAT7BYayB7LbLPQZPK24xjs4QPD8svEMi","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.252.125/tcp/65428/p2p/16Uiu2HAmHuGY2GrWVPeQnDJC9ZRGLzQattzeou4kBXBmgSr5WXFG","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65427/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.170.162/tcp/25839/p2p/16Uiu2HAm5aM3YpdGJn5SHcCFf322obSZmSJr44WnnU85ShBNKHpH","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18531/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1726719197678404096}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65427/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1726719197678404096,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 50221f50cc03
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id facbfbee7219
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 63b07f5d8d98
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.