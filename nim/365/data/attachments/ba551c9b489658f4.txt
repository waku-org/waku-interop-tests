[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_content_topics with id: 2024-09-19_04-18-22__46f00d08-a387-477e-8a3f-faffa4e17ac3
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-19_04-18-22__46f00d08-a387-477e-8a3f-faffa4e17ac3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.228.6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['55994', '55995', '55996', '55997', '55998']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 55994:55994 -p 55995:55995 -p 55996:55996 -p 55997:55997 -p 55998:55998 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55996 --rest-port=55994 --tcp-port=55995 --discv5-udp-port=55997 --rest-address=0.0.0.0 --nat=extip:172.18.228.6 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5c1cdabadad8b5963dff7d2cefa516f29be96eca7c0fcfc8c0d5cafe2dbfcded --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55998 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.228.6 waku 0a6c93f4aca06a0b3e6d6cfdc2f19484239cf6f516152a79c03220cabb2e7055
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 0a6c93f4aca0. Setting up logs at ./log/docker/receiving_node1_2024-09-19_04-18-22__46f00d08-a387-477e-8a3f-faffa4e17ac3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 55994
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55994/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55994/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.228.6/tcp/55995/p2p/16Uiu2HAmT2MkEQffxDo97AHkFQj9sZXxQqcmHw5np8qDgfUVYTKf","/ip4/172.18.228.6/tcp/55996/ws/p2p/16Uiu2HAmT2MkEQffxDo97AHkFQj9sZXxQqcmHw5np8qDgfUVYTKf"],"enrUri":"enr:-LO4QDNf9oaCfAjHCurUGIMmNOgcCyHjrScut8x0oVrqOsKCAEJQ_ZMIyfjfa4PRjP_IdiRzTwKC-7Ca5KIX54cE14kBgmlkgnY0gmlwhKwS5AaKbXVsdGlhZGRyc4wACgSsEuQGBtq83QOCcnOFAAMBAACJc2VjcDI1NmsxoQPVfQGIgdMu8f-MkqfNii44pJD5peiPcWOT00woVfbxWoN0Y3CC2ruDdWRwgtq9hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-19_04-18-22__46f00d08-a387-477e-8a3f-faffa4e17ac3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.0.124
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['43815', '43816', '43817', '43818', '43819']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 43815:43815 -p 43816:43816 -p 43817:43817 -p 43818:43818 -p 43819:43819 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43817 --rest-port=43815 --tcp-port=43816 --discv5-udp-port=43818 --rest-address=0.0.0.0 --nat=extip:172.18.0.124 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2b2f8f5b869e01ceccffc6cc25db2db7d5cbac3bd66e03b47a80dccb5e2ab9bd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43819 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.0.124 waku dc67b83b190cd8cf52dcdf174c4fb1f4d56cabb8752eabfd37860c8b50119675
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID dc67b83b190c. Setting up logs at ./log/docker/receiving_node2_2024-09-19_04-18-22__46f00d08-a387-477e-8a3f-faffa4e17ac3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 43815
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43815/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43815/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.0.124/tcp/43816/p2p/16Uiu2HAmAhaNzFrDNRfp9wXNyxR24SvjbmUCNfzjv3h6SE3rJ9hQ","/ip4/172.18.0.124/tcp/43817/ws/p2p/16Uiu2HAmAhaNzFrDNRfp9wXNyxR24SvjbmUCNfzjv3h6SE3rJ9hQ"],"enrUri":"enr:-LO4QERiSKh-gcNqkEcw6VRT8TVewN651TmL0pMh90KoOrOLL9zGmEdXFNC0fuUcSaroEjEQSfKQbxQWEfuKAtxQS7MBgmlkgnY0gmlwhKwSAHyKbXVsdGlhZGRyc4wACgSsEgB8Bqsp3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLi8kPJcXvD4XwzZj-P9JpEyWJZBsU3ERbGACwNZlI2_4N0Y3CCqyiDdWRwgqsqhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43815/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.228.6/tcp/55995/p2p/16Uiu2HAmT2MkEQffxDo97AHkFQj9sZXxQqcmHw5np8qDgfUVYTKf"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-19_04-18-22__46f00d08-a387-477e-8a3f-faffa4e17ac3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.28.86
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['24154', '24155', '24156', '24157', '24158']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 24154:24154 -p 24155:24155 -p 24156:24156 -p 24157:24157 -p 24158:24158 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24156 --rest-port=24154 --tcp-port=24155 --discv5-udp-port=24157 --rest-address=0.0.0.0 --nat=extip:172.18.28.86 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3ee35deac620e3ad561fdbf86e1c0089b2fe3a24dc7cd75df76bcff6acbba2af --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24158 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QDNf9oaCfAjHCurUGIMmNOgcCyHjrScut8x0oVrqOsKCAEJQ_ZMIyfjfa4PRjP_IdiRzTwKC-7Ca5KIX54cE14kBgmlkgnY0gmlwhKwS5AaKbXVsdGlhZGRyc4wACgSsEuQGBtq83QOCcnOFAAMBAACJc2VjcDI1NmsxoQPVfQGIgdMu8f-MkqfNii44pJD5peiPcWOT00woVfbxWoN0Y3CC2ruDdWRwgtq9hXdha3UyCQ --lightpushnode=/ip4/172.18.228.6/tcp/55995/p2p/16Uiu2HAmT2MkEQffxDo97AHkFQj9sZXxQqcmHw5np8qDgfUVYTKf --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.28.86 waku cb11b5fc71878965ce23a01aef2eb0db19bab0e298540966f815aa231ff939cf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID cb11b5fc7187. Setting up logs at ./log/docker/lightpush_node1_2024-09-19_04-18-22__46f00d08-a387-477e-8a3f-faffa4e17ac3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 24154
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24154/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24154/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.28.86/tcp/24155/p2p/16Uiu2HAm67Uo96HtXfEnMv6YnGX168MtjfDnVwWfYLQcgheW2DNV","/ip4/172.18.28.86/tcp/24156/ws/p2p/16Uiu2HAm67Uo96HtXfEnMv6YnGX168MtjfDnVwWfYLQcgheW2DNV"],"enrUri":"enr:-LO4QOJHRlbBQYj14RQXPfppIKX9TIg9yz_Ej2Yv7e33zetpGtBT2S9Xxqrw_GEQO9isy7x-pv-7NubBf_zHFlcSV6sBgmlkgnY0gmlwhKwSHFaKbXVsdGlhZGRyc4wACgSsEhxWBl5c3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKex3TJyK3zSdzqUEtkPxhyumU6m8IV0accO42aVNvoJoN0Y3CCXluDdWRwgl5dhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24154/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.228.6/tcp/55995/p2p/16Uiu2HAmT2MkEQffxDo97AHkFQj9sZXxQqcmHw5np8qDgfUVYTKf"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24154/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.0.124/tcp/43816/p2p/16Uiu2HAmAhaNzFrDNRfp9wXNyxR24SvjbmUCNfzjv3h6SE3rJ9hQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55994/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43815/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic Empty string
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24154/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "", "timestamp": 1726719506766286848}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:24154/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A dictionary
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24154/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": {"key": "YWFh"}, "timestamp": 1726719506772319232}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:24154/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic An integer
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24154/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": 1234567890, "timestamp": 1726719506777292800}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:24154/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A list
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24154/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": ["YWFh"], "timestamp": 1726719506782801920}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:24154/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A bool
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24154/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": true, "timestamp": 1726719506787738624}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:24154/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0a6c93f4aca0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id dc67b83b190c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id cb11b5fc7187
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.