[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_with_meta with id: 2024-09-19_04-14-08__5e93d0df-8b51-435e-9182-71a308334920
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-19_04-14-08__5e93d0df-8b51-435e-9182-71a308334920__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.216.9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['23584', '23585', '23586', '23587', '23588']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 23584:23584 -p 23585:23585 -p 23586:23586 -p 23587:23587 -p 23588:23588 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23586 --rest-port=23584 --tcp-port=23585 --discv5-udp-port=23587 --rest-address=0.0.0.0 --nat=extip:172.18.216.9 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=edc237d5dbd91b9eca6ba7faace667dcd30f324a26ff197eeaa7a64dee5efd8e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23588 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.216.9 waku 41c791fc5cfcdc8655dda6b24822eac3c1a9ae8a0ac50dbc0f43697cbd4e07e4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 41c791fc5cfc. Setting up logs at ./log/docker/node1_2024-09-19_04-14-08__5e93d0df-8b51-435e-9182-71a308334920__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 23584
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23584/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23584/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.216.9/tcp/23585/p2p/16Uiu2HAmPNb2VKyPiXNMnuFtcuZh1xUgLUcFvmqePwirKztWGDU1","/ip4/172.18.216.9/tcp/23586/ws/p2p/16Uiu2HAmPNb2VKyPiXNMnuFtcuZh1xUgLUcFvmqePwirKztWGDU1"],"enrUri":"enr:-LO4QBOg3eUBJ0i34x-8mdKVAHgmwZnjp9H9SLiMVaIxTPIoOidswmhUS5IPkM4sSdnSHLupsg2mbdXq992x-JCXF-8BgmlkgnY0gmlwhKwS2AmKbXVsdGlhZGRyc4wACgSsEtgJBlwi3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOfPOP6wPbZVj50ifJ4Fx2tqoZ_yhr97MP1HpY5PIBKFoN0Y3CCXCGDdWRwglwjhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-19_04-14-08__5e93d0df-8b51-435e-9182-71a308334920__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.47.31
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['20006', '20007', '20008', '20009', '20010']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 20006:20006 -p 20007:20007 -p 20008:20008 -p 20009:20009 -p 20010:20010 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20008 --rest-port=20006 --tcp-port=20007 --discv5-udp-port=20009 --rest-address=0.0.0.0 --nat=extip:172.18.47.31 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9bf47dda9dbdbca8854b10d91f459fcdaf4a2eafe5a317c6143eee9b05473fa0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20010 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QBOg3eUBJ0i34x-8mdKVAHgmwZnjp9H9SLiMVaIxTPIoOidswmhUS5IPkM4sSdnSHLupsg2mbdXq992x-JCXF-8BgmlkgnY0gmlwhKwS2AmKbXVsdGlhZGRyc4wACgSsEtgJBlwi3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOfPOP6wPbZVj50ifJ4Fx2tqoZ_yhr97MP1HpY5PIBKFoN0Y3CCXCGDdWRwglwjhXdha3UyBQ --filternode=/ip4/172.18.216.9/tcp/23585/p2p/16Uiu2HAmPNb2VKyPiXNMnuFtcuZh1xUgLUcFvmqePwirKztWGDU1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.47.31 waku 45067ef6df7014881e97eb91a83185193265979f7fab6aa7ccfb4dfa63a3165e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 45067ef6df70. Setting up logs at ./log/docker/node2_2024-09-19_04-14-08__5e93d0df-8b51-435e-9182-71a308334920__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 20006
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20006/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20006/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.47.31/tcp/20007/p2p/16Uiu2HAmChKx7TsPEQus79RySbxmQzSWyExKouPQ3UhmLfKFumax","/ip4/172.18.47.31/tcp/20008/ws/p2p/16Uiu2HAmChKx7TsPEQus79RySbxmQzSWyExKouPQ3UhmLfKFumax"],"enrUri":"enr:-LO4QINsy3oieIUuEpt_0_62814TFUfcCe7pq1uyq0FG5A24IzUYNLFw6eEPoAu8Ga-sUlnUH7yx8tMNhgfBt5lJy10BgmlkgnY0gmlwhKwSLx-KbXVsdGlhZGRyc4wACgSsEi8fBk4o3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMAmVLngchfsZSsw6gv4KW_askDQwvvTeVIq3sEhpQzIYN0Y3CCTieDdWRwgk4phXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20006/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.216.9/tcp/23585/p2p/16Uiu2HAmPNb2VKyPiXNMnuFtcuZh1xUgLUcFvmqePwirKztWGDU1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23584/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20006/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e671e358-c485-471e-ae60-918469d0c9af", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"e671e358-c485-471e-ae60-918469d0c9af","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23584/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "meta": "RmlsdGVyIHdvcmtzISE="}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20006/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1726719252263099392,"meta":"RmlsdGVyIHdvcmtzISE=","ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 41c791fc5cfc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 45067ef6df70
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.