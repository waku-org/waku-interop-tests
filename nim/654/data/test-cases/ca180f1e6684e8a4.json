{"uid":"ca180f1e6684e8a4","name":"test_2_nodes_different_content_topic_same_shard","fullName":"tests.sharding.test_running_nodes_auto_sharding.TestRunningNodesAutosharding#test_2_nodes_different_content_topic_same_shard","historyId":"baedb42784fa6ea557030bb0cb6461b3","time":{"start":1739765177313,"stop":1739765180032,"duration":2719},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1739765012611,"stop":1739765012611,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1739765177311,"stop":1739765177311,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors","time":{"start":1739765177311,"stop":1739765177311,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1739765177311,"stop":1739765177311,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1739765177311,"stop":1739765177311,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1739765177311,"stop":1739765177311,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"relay_setup","time":{"start":1739765177312,"stop":1739765177312,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1739765177312,"stop":1739765177312,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"sharding_setup","time":{"start":1739765177312,"stop":1739765177312,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"passed","steps":[{"name":"setup_first_relay_node_with_filter","time":{"start":1739765177313,"stop":1739765178608,"duration":1295},"status":"passed","steps":[{"name":"setup_first_relay_node","time":{"start":1739765177313,"stop":1739765178608,"duration":1295},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"filter","value":"'true'"},{"name":"cluster_id","value":"2"},{"name":"content_topic","value":"'/newsService/1.0/weekly/protobuf'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"cluster_id","value":"2"},{"name":"content_topic","value":"'/newsService/1.0/weekly/protobuf'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"setup_second_relay_node","time":{"start":1739765178609,"stop":1739765179911,"duration":1302},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1739765179908,"stop":1739765179911,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.sharding.test_running_nodes_auto_sharding.TestRunningNodesAutosharding object at 0x7f737bfe5010>, <src.node.waku_node.WakuNode object at 0x7f737ba70a70>, ['/ip4/172.18.166.171/tcp/2608/p2p/16Uiu2HAmBC5fRAKcNxL5PQt8DPjD8AJwwAAvFJsPzqHdoCzXYfzH'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"cluster_id","value":"2"},{"name":"content_topic","value":"'/newsService/1.0/alerts/xml'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_first_relay_node","time":{"start":1739765179911,"stop":1739765179914,"duration":3},"status":"passed","steps":[{"name":"subscribe_relay_node","time":{"start":1739765179912,"stop":1739765179914,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f737ba70410>"},{"name":"content_topics","value":"['/newsService/1.0/weekly/protobuf']"},{"name":"pubsub_topics","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"content_topics","value":"['/newsService/1.0/weekly/protobuf']"},{"name":"pubsub_topics","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_second_relay_node","time":{"start":1739765179914,"stop":1739765179917,"duration":3},"status":"passed","steps":[{"name":"subscribe_relay_node","time":{"start":1739765179914,"stop":1739765179917,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f737ba70a70>"},{"name":"content_topics","value":"['/newsService/1.0/alerts/xml']"},{"name":"pubsub_topics","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"content_topics","value":"['/newsService/1.0/alerts/xml']"},{"name":"pubsub_topics","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_published_message_reaches_relay_peer","time":{"start":1739765179917,"stop":1739765180031,"duration":114},"status":"broken","statusMessage":"Exception: Error: 404 Client Error: Not Found for url: http://127.0.0.1:42383/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf with response: b'/newsService/1.0/weekly/protobuf'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.9/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/sharding.py\", line 158, in check_published_message_reaches_relay_peer\n    get_messages_response = self.retrieve_relay_message(peer, content_topic, pubsub_topic)\n                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.9/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/sharding.py\", line 140, in retrieve_relay_message\n    return node.get_relay_auto_messages(content_topic)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 355, in get_relay_auto_messages\n    return self._api.get_relay_auto_messages(content_topic)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 64, in get_relay_auto_messages\n    get_messages_response = self.rest_call(\"get\", f\"relay/v1/auto/messages/{quote(content_topic, safe='')}\")\n                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[{"name":"create_message","time":{"start":1739765179917,"stop":1739765179917,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"contentTopic","value":"'/newsService/1.0/weekly/protobuf'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"relay_message","time":{"start":1739765179917,"stop":1739765179923,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f737ba70410>"},{"name":"message","value":"{'payload': 'U2hhcmRpbmcgd29ya3MhIQ==', 'contentTopic': '/newsService/1.0/weekly/protobuf', 'timestamp': 1739765179916969216}"},{"name":"pubsub_topic","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"retrieve_relay_message","time":{"start":1739765180023,"stop":1739765180027,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f737ba70410>"},{"name":"content_topic","value":"'/newsService/1.0/weekly/protobuf'"},{"name":"pubsub_topic","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1739765180028,"stop":1739765180028,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'U2hhcmRpbmcgd29ya3MhIQ==', 'contentTopic': '/newsService/1.0/weekly/protobuf', 'timestamp': 1739765179916969216}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"retrieve_relay_message","time":{"start":1739765180028,"stop":1739765180031,"duration":3},"status":"broken","statusMessage":"Exception: Error: 404 Client Error: Not Found for url: http://127.0.0.1:42383/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf with response: b'/newsService/1.0/weekly/protobuf'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.9/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/sharding.py\", line 140, in retrieve_relay_message\n    return node.get_relay_auto_messages(content_topic)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 355, in get_relay_auto_messages\n    return self._api.get_relay_auto_messages(content_topic)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 64, in get_relay_auto_messages\n    get_messages_response = self.rest_call(\"get\", f\"relay/v1/auto/messages/{quote(content_topic, safe='')}\")\n                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f737ba70a70>"},{"name":"content_topic","value":"'/newsService/1.0/weekly/protobuf'"},{"name":"pubsub_topic","value":"None"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"content_topic","value":"'/newsService/1.0/weekly/protobuf'"},{"name":"pubsub_topic","value":"None"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"3533ffd4918dc849","name":"log","source":"3533ffd4918dc849.txt","type":"text/plain","size":12076},{"uid":"58d41259505123f","name":"stderr","source":"58d41259505123f.txt","type":"text/plain","size":11734}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":14,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1739765180033,"stop":1739765180034,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1739765180034,"stop":1739765182511,"duration":2477},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors::0","time":{"start":1739765182512,"stop":1739765182523,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1739765182524,"stop":1739765182524,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1739765252222,"stop":1739765252222,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"@pytest.mark.skipif(False, reason='Autosharding tests work only on nwaku because of https://github.com/waku-org/go-waku/issues/1061')"},{"name":"parentSuite","value":"tests.sharding"},{"name":"suite","value":"test_running_nodes_auto_sharding"},{"name":"subSuite","value":"TestRunningNodesAutosharding"},{"name":"host","value":"fv-az1947-39"},{"name":"thread","value":"1939-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.sharding.test_running_nodes_auto_sharding"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":0,"passed":19,"unknown":0,"total":19},"items":[{"uid":"b276f4facf561e71","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/653//#testresult/b276f4facf561e71","status":"passed","time":{"start":1739678795840,"stop":1739678798549,"duration":2709}},{"uid":"5dd5df86aecbea7b","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/652//#testresult/5dd5df86aecbea7b","status":"passed","time":{"start":1739592311300,"stop":1739592314024,"duration":2724}},{"uid":"c2bc2171d7f9eb3f","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/651//#testresult/c2bc2171d7f9eb3f","status":"passed","time":{"start":1739505904804,"stop":1739505907542,"duration":2738}},{"uid":"a15d7cb214001a17","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/650//#testresult/a15d7cb214001a17","status":"passed","time":{"start":1739419504585,"stop":1739419507313,"duration":2728}},{"uid":"33ddd6da3b72551c","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/649//#testresult/33ddd6da3b72551c","status":"passed","time":{"start":1739333109220,"stop":1739333111937,"duration":2717}},{"uid":"c874db1badb38b0a","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/648//#testresult/c874db1badb38b0a","status":"passed","time":{"start":1739286306589,"stop":1739286309310,"duration":2721}},{"uid":"797cd98d0eff056e","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/647//#testresult/797cd98d0eff056e","status":"passed","time":{"start":1739246696149,"stop":1739246698873,"duration":2724}},{"uid":"68d0dea0eb354935","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/646//#testresult/68d0dea0eb354935","status":"passed","time":{"start":1739160362724,"stop":1739160365468,"duration":2744}},{"uid":"6986c2fe14a037b4","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/645//#testresult/6986c2fe14a037b4","status":"passed","time":{"start":1739073897935,"stop":1739073900678,"duration":2743}},{"uid":"125400b17d094c3b","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/644//#testresult/125400b17d094c3b","status":"passed","time":{"start":1738987494557,"stop":1738987497267,"duration":2710}},{"uid":"e55a799c3e85606f","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/643//#testresult/e55a799c3e85606f","status":"passed","time":{"start":1738901105910,"stop":1738901108654,"duration":2744}},{"uid":"26e41167fc08b253","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/642//#testresult/26e41167fc08b253","status":"passed","time":{"start":1738814772445,"stop":1738814775147,"duration":2702}},{"uid":"d94bad8f9a71af7e","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/641//#testresult/d94bad8f9a71af7e","status":"passed","time":{"start":1738728295913,"stop":1738728298619,"duration":2706}},{"uid":"dd7bda77fc426638","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/640//#testresult/dd7bda77fc426638","status":"passed","time":{"start":1738689169940,"stop":1738689172662,"duration":2722}},{"uid":"e43c62b05e46524d","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/639//#testresult/e43c62b05e46524d","status":"passed","time":{"start":1738641903017,"stop":1738641905742,"duration":2725}},{"uid":"cb665fe838a603","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/638//#testresult/cb665fe838a603","status":"passed","time":{"start":1738555510113,"stop":1738555512838,"duration":2725}},{"uid":"2f3622a074f1341b","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/637//#testresult/2f3622a074f1341b","status":"passed","time":{"start":1738469165137,"stop":1738469167897,"duration":2760}},{"uid":"d2fc0bc663e0cadc","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/636//#testresult/d2fc0bc663e0cadc","status":"passed","time":{"start":1738382699734,"stop":1738382702456,"duration":2722}}]},"tags":["@pytest.mark.skipif(False, reason='Autosharding tests work only on nwaku because of https://github.com/waku-org/go-waku/issues/1061')"]},"source":"ca180f1e6684e8a4.json","parameterValues":[]}