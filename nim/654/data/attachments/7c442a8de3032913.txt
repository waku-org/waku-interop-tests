2025-02-17 04:04:12.405 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:04:12.406 DEBUG [tests.conftest] Running test: test_filter_ping_on_subscribed_peer with id: 2025-02-17_04-04-12__6b09d4c1-72ef-460c-b33a-9af9e5767f15
2025-02-17 04:04:12.406 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:04:12.406 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-17 04:04:12.407 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-17 04:04:12.413 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:04:12.413 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_04-04-12__6b09d4c1-72ef-460c-b33a-9af9e5767f15__wakuorg_nwaku:latest.log
2025-02-17 04:04:12.413 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:04:12.413 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:04:12.414 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:04:12.414 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.68.94
2025-02-17 04:04:12.415 DEBUG [src.node.docker_mananger] Generated ports ['57785', '57786', '57787', '57788', '57789']
2025-02-17 04:04:12.415 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:04:12.415 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:04:12.415 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:04:12.415 DEBUG [src.node.docker_mananger] docker run -i -t -p 57785:57785 -p 57786:57786 -p 57787:57787 -p 57788:57788 -p 57789:57789 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57787 --rest-port=57785 --tcp-port=57786 --discv5-udp-port=57788 --rest-address=0.0.0.0 --nat=extip:172.18.68.94 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=17edb2e98a23e4e7ceb3675bedcafb17bc7e5c3cfdacaa0a4efe2dac749f6be6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57789 --metrics-logging=true --relay=true --filter=true
2025-02-17 04:04:12.644 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.68.94 waku e0cc3da4adbf6c26d23991e396d9180e71887f4a65aedac8912ccee0e2f6fe7c
2025-02-17 04:04:12.693 DEBUG [src.node.docker_mananger] Container started with ID e0cc3da4adbf. Setting up logs at ./log/docker/node1_2025-02-17_04-04-12__6b09d4c1-72ef-460c-b33a-9af9e5767f15__wakuorg_nwaku:latest.log
2025-02-17 04:04:12.694 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57785
2025-02-17 04:04:12.695 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:04:13.197 ERROR [src.node.docker_mananger] Max retries reached for container be02763005d3. Exiting log stream.
2025-02-17 04:04:13.695 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57785/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:13.699 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:04:13.699 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:04:13.699 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57785/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:13.701 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.68.94/tcp/57786/p2p/16Uiu2HAmUBUuNxKaSwMGPKooEfdHeG8TbdiKAth7PfQW97aRxmyh","/ip4/172.18.68.94/tcp/57787/ws/p2p/16Uiu2HAmUBUuNxKaSwMGPKooEfdHeG8TbdiKAth7PfQW97aRxmyh"],"enrUri":"enr:-L24QPWEtNCI15D_Thr_yy2oU26rkloaIaEMnIa3p1J6VlReWcvRmeP6LmbJ3-3g5Xca07Ct5OK-v_7_LfXCUJVD00MCgmlkgnY0gmlwhKwSRF6KbXVsdGlhZGRyc5YACASsEkReBuG6AAoErBJEXgbhu90DgnJzhQADAQAAiXNlY3AyNTZrMaED5q8DcWIVY5u5zyXMdWPL9HyjFySiCkmnd89fMcOuBUCDdGNwguG6g3VkcILhvIV3YWt1MgU"}'
2025-02-17 04:04:13.701 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:04:13.702 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-17 04:04:13.708 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:04:13.708 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-17_04-04-12__6b09d4c1-72ef-460c-b33a-9af9e5767f15__wakuorg_nwaku:latest.log
2025-02-17 04:04:13.708 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:04:13.708 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:04:13.710 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:04:13.710 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.167.6
2025-02-17 04:04:13.710 DEBUG [src.node.docker_mananger] Generated ports ['43023', '43024', '43025', '43026', '43027']
2025-02-17 04:04:13.710 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:04:13.710 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:04:13.710 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:04:13.710 DEBUG [src.node.docker_mananger] docker run -i -t -p 43023:43023 -p 43024:43024 -p 43025:43025 -p 43026:43026 -p 43027:43027 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43025 --rest-port=43023 --tcp-port=43024 --discv5-udp-port=43026 --rest-address=0.0.0.0 --nat=extip:172.18.167.6 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b508b1ab506cfb34b5eda20cf76767a4afbc8c3ee5debcaecaa9e39a6aede086 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43027 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QPWEtNCI15D_Thr_yy2oU26rkloaIaEMnIa3p1J6VlReWcvRmeP6LmbJ3-3g5Xca07Ct5OK-v_7_LfXCUJVD00MCgmlkgnY0gmlwhKwSRF6KbXVsdGlhZGRyc5YACASsEkReBuG6AAoErBJEXgbhu90DgnJzhQADAQAAiXNlY3AyNTZrMaED5q8DcWIVY5u5zyXMdWPL9HyjFySiCkmnd89fMcOuBUCDdGNwguG6g3VkcILhvIV3YWt1MgU --filternode=/ip4/172.18.68.94/tcp/57786/p2p/16Uiu2HAmUBUuNxKaSwMGPKooEfdHeG8TbdiKAth7PfQW97aRxmyh
2025-02-17 04:04:13.950 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.167.6 waku 5ec7882df78c11d59eba1a95b3354baa579a9d7d00001f8855da83f4cf0da459
2025-02-17 04:04:13.999 DEBUG [src.node.docker_mananger] Container started with ID 5ec7882df78c. Setting up logs at ./log/docker/node2_2025-02-17_04-04-12__6b09d4c1-72ef-460c-b33a-9af9e5767f15__wakuorg_nwaku:latest.log
2025-02-17 04:04:13.999 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 43023
2025-02-17 04:04:14.000 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:04:15.000 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43023/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:15.003 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:04:15.003 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:04:15.004 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43023/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:15.006 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.167.6/tcp/43024/p2p/16Uiu2HAkvUMyax8iZQyXhusaYhQj18qtwgk159hWYb1e6wYcVwPj","/ip4/172.18.167.6/tcp/43025/ws/p2p/16Uiu2HAkvUMyax8iZQyXhusaYhQj18qtwgk159hWYb1e6wYcVwPj"],"enrUri":"enr:-L24QFATjh56XZuSGnhB2Jny4YkyzLGl8NyeDJJaguFaFOoFanC3WaDNQ1qChC59uX5vGY-gqHjn03PRTX_IcVQ811ECgmlkgnY0gmlwhKwSpwaKbXVsdGlhZGRyc5YACASsEqcGBqgQAAoErBKnBgaoEd0DgnJzhQADAQAAiXNlY3AyNTZrMaECD4wSmPYb5VkQ5U2b8Yx7PKgxYUzjwVHm_uw9pKBraa6DdGNwgqgQg3VkcIKoEoV3YWt1MgA"}'
2025-02-17 04:04:15.006 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:04:15.006 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43023/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.68.94/tcp/57786/p2p/16Uiu2HAmUBUuNxKaSwMGPKooEfdHeG8TbdiKAth7PfQW97aRxmyh"]'
2025-02-17 04:04:15.041 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:15.045 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-17 04:04:15.049 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57785/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:04:15.064 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:15.064 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43023/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "752b1bd7-686c-4c2c-9df6-415a9857764b", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-17 04:04:15.076 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"752b1bd7-686c-4c2c-9df6-415a9857764b","statusDesc":"OK"}'
2025-02-17 04:04:15.077 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43023/filter/v2/subscriptions/337c7826-badb-429a-b92d-be5d3f91aa18" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:15.084 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"337c7826-badb-429a-b92d-be5d3f91aa18","statusDesc":"OK"}'
2025-02-17 04:04:15.086 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:04:15.087 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:04:15.087 DEBUG [src.node.waku_node] Stopping container with id e0cc3da4adbf
2025-02-17 04:04:16.141 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:16.142 DEBUG [src.node.waku_node] Stopping container with id 5ec7882df78c
2025-02-17 04:04:16.953 ERROR [src.node.docker_mananger] Max retries reached for container e0cc3da4adbf. Exiting log stream.
2025-02-17 04:04:17.627 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:17.628 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:04:17.633 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:04:17.638 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
