2025-02-17 04:07:07.043 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:07:07.043 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_version with id: 2025-02-17_04-07-07__dbf66520-e920-4b09-a349-e181545447a4
2025-02-17 04:07:07.043 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:07:07.044 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-17 04:07:07.051 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:07:07.051 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-17_04-07-07__dbf66520-e920-4b09-a349-e181545447a4__wakuorg_nwaku:latest.log
2025-02-17 04:07:07.051 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:07:07.051 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:07:07.052 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:07:07.053 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.155.157
2025-02-17 04:07:07.053 DEBUG [src.node.docker_mananger] Generated ports ['55323', '55324', '55325', '55326', '55327']
2025-02-17 04:07:07.053 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:07:07.053 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:07:07.053 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:07:07.053 DEBUG [src.node.docker_mananger] docker run -i -t -p 55323:55323 -p 55324:55324 -p 55325:55325 -p 55326:55326 -p 55327:55327 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55325 --rest-port=55323 --tcp-port=55324 --discv5-udp-port=55326 --rest-address=0.0.0.0 --nat=extip:172.18.155.157 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8608205ad1eaf3aabfbb88e6ecedbbbfac0af31dc3ccec57a626ac6036fee5ea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55327 --metrics-logging=true --lightpush=true --relay=true
2025-02-17 04:07:07.299 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.155.157 waku 5f4f3a7244c6ba840bb903e5894b227f060a1dcf1ed57ffa231af1bbe8e60e85
2025-02-17 04:07:07.350 DEBUG [src.node.docker_mananger] Container started with ID 5f4f3a7244c6. Setting up logs at ./log/docker/receiving_node1_2025-02-17_04-07-07__dbf66520-e920-4b09-a349-e181545447a4__wakuorg_nwaku:latest.log
2025-02-17 04:07:07.350 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 55323
2025-02-17 04:07:07.351 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:07:07.844 ERROR [src.node.docker_mananger] Max retries reached for container 3057b562bf18. Exiting log stream.
2025-02-17 04:07:08.352 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55323/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:08.355 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:07:08.355 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:07:08.356 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55323/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:08.358 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.155.157/tcp/55324/p2p/16Uiu2HAm7PLKmFJW7UAFru6xPKqXJFu3HHsaSXGLb6pA74GDqgGG","/ip4/172.18.155.157/tcp/55325/ws/p2p/16Uiu2HAm7PLKmFJW7UAFru6xPKqXJFu3HHsaSXGLb6pA74GDqgGG"],"enrUri":"enr:-L24QGF6pFUe4KOyPxfxIuUqwPeRcEzUzUUJl9MLS-nohMVcQYRLhZ1FNfQKAt_T3Tn7spGQcro0mjsfYm9lyQzEUakCgmlkgnY0gmlwhKwSm52KbXVsdGlhZGRyc5YACASsEpudBtgcAAoErBKbnQbYHd0DgnJzhQADAQAAiXNlY3AyNTZrMaECsbLbU3YyQxQuopFT_y8_c_wMwnLHVw3VZCNegWW8wVGDdGNwgtgcg3VkcILYHoV3YWt1Mgk"}'
2025-02-17 04:07:08.358 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:07:08.365 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:07:08.365 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-17_04-07-07__dbf66520-e920-4b09-a349-e181545447a4__wakuorg_nwaku:latest.log
2025-02-17 04:07:08.365 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:07:08.365 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:07:08.367 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:07:08.367 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.31.203
2025-02-17 04:07:08.367 DEBUG [src.node.docker_mananger] Generated ports ['41408', '41409', '41410', '41411', '41412']
2025-02-17 04:07:08.367 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:07:08.367 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:07:08.368 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:07:08.368 DEBUG [src.node.docker_mananger] docker run -i -t -p 41408:41408 -p 41409:41409 -p 41410:41410 -p 41411:41411 -p 41412:41412 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41410 --rest-port=41408 --tcp-port=41409 --discv5-udp-port=41411 --rest-address=0.0.0.0 --nat=extip:172.18.31.203 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bedc4ac5f9ee5ea9b24aefeb3becc84ee5ea4868e4be9d9cdab5bc57ff92520a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41412 --metrics-logging=true --lightpush=false --relay=true
2025-02-17 04:07:08.615 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.31.203 waku 1588eeda64e8efc4b279908f844066e8a31845d736a57ac7134eaa5c5fba04fd
2025-02-17 04:07:08.665 DEBUG [src.node.docker_mananger] Container started with ID 1588eeda64e8. Setting up logs at ./log/docker/receiving_node2_2025-02-17_04-07-07__dbf66520-e920-4b09-a349-e181545447a4__wakuorg_nwaku:latest.log
2025-02-17 04:07:08.666 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 41408
2025-02-17 04:07:08.667 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:07:09.667 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41408/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:09.670 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:07:09.671 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:07:09.671 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41408/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:09.673 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.31.203/tcp/41409/p2p/16Uiu2HAmMF3eWE3QYCxD1kcz8hsQmZvyq93JKKpWyREdTkXCbQVk","/ip4/172.18.31.203/tcp/41410/ws/p2p/16Uiu2HAmMF3eWE3QYCxD1kcz8hsQmZvyq93JKKpWyREdTkXCbQVk"],"enrUri":"enr:-L24QJ1ntYHBEhIMIHGfaQx5Xwh6pUUL_YACneF_hDZi2NLNJk1vq1TnAH85lFyCQKVKfo_uYJlbImpvCxWR-6vjX6wCgmlkgnY0gmlwhKwSH8uKbXVsdGlhZGRyc5YACASsEh_LBqHBAAoErBIfywahwt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDf5b4e0hm2uKejwYiFeMsLavTxMSusthdwwiki5-wij-DdGNwgqHBg3VkcIKhw4V3YWt1MgE"}'
2025-02-17 04:07:09.673 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:07:09.673 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41408/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.155.157/tcp/55324/p2p/16Uiu2HAm7PLKmFJW7UAFru6xPKqXJFu3HHsaSXGLb6pA74GDqgGG"]'
2025-02-17 04:07:09.714 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:07:09.723 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:07:09.723 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-17_04-07-07__dbf66520-e920-4b09-a349-e181545447a4__wakuorg_nwaku:latest.log
2025-02-17 04:07:09.723 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:07:09.723 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:07:09.725 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:07:09.725 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.162.30
2025-02-17 04:07:09.725 DEBUG [src.node.docker_mananger] Generated ports ['2954', '2955', '2956', '2957', '2958']
2025-02-17 04:07:09.725 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:07:09.726 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:07:09.726 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:07:09.726 DEBUG [src.node.docker_mananger] docker run -i -t -p 2954:2954 -p 2955:2955 -p 2956:2956 -p 2957:2957 -p 2958:2958 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2956 --rest-port=2954 --tcp-port=2955 --discv5-udp-port=2957 --rest-address=0.0.0.0 --nat=extip:172.18.162.30 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=980ab862a6ea19ec9ecf0cdf4b64992bd536ee0d82a43defecefcf29618a7e19 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2958 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QGF6pFUe4KOyPxfxIuUqwPeRcEzUzUUJl9MLS-nohMVcQYRLhZ1FNfQKAt_T3Tn7spGQcro0mjsfYm9lyQzEUakCgmlkgnY0gmlwhKwSm52KbXVsdGlhZGRyc5YACASsEpudBtgcAAoErBKbnQbYHd0DgnJzhQADAQAAiXNlY3AyNTZrMaECsbLbU3YyQxQuopFT_y8_c_wMwnLHVw3VZCNegWW8wVGDdGNwgtgcg3VkcILYHoV3YWt1Mgk --lightpushnode=/ip4/172.18.155.157/tcp/55324/p2p/16Uiu2HAm7PLKmFJW7UAFru6xPKqXJFu3HHsaSXGLb6pA74GDqgGG --lightpush=true --relay=false
2025-02-17 04:07:09.966 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.162.30 waku 064c7c833ec9d03471905308ece0d941734ee81d7ce8c60109cb4f45451a4ba2
2025-02-17 04:07:10.017 DEBUG [src.node.docker_mananger] Container started with ID 064c7c833ec9. Setting up logs at ./log/docker/lightpush_node1_2025-02-17_04-07-07__dbf66520-e920-4b09-a349-e181545447a4__wakuorg_nwaku:latest.log
2025-02-17 04:07:10.017 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2954
2025-02-17 04:07:10.017 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:07:11.018 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2954/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:11.021 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:07:11.021 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:07:11.021 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2954/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:11.024 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.162.30/tcp/2955/p2p/16Uiu2HAmBpEndBxKN4Tq6s2LCAxD3EFqRVQPxzsNKkD5fu6Ks2wx","/ip4/172.18.162.30/tcp/2956/ws/p2p/16Uiu2HAmBpEndBxKN4Tq6s2LCAxD3EFqRVQPxzsNKkD5fu6Ks2wx"],"enrUri":"enr:-L24QG-Y8bzv50mS4qhgkV6zd38CYUmSajh4K9HH2pGmfmH0QDnWyiy7aIxhJDdzEsqk0trA-ZRmoZLf9rD5-DkSdsoCgmlkgnY0gmlwhKwSoh6KbXVsdGlhZGRyc5YACASsEqIeBguLAAoErBKiHgYLjN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC84LdNhcbc6gdRVLN9i6nTRDUIz2cJBQSL_fsGpADKKeDdGNwgguLg3VkcIILjYV3YWt1Mgg"}'
2025-02-17 04:07:11.024 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:07:11.024 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2954/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.155.157/tcp/55324/p2p/16Uiu2HAm7PLKmFJW7UAFru6xPKqXJFu3HHsaSXGLb6pA74GDqgGG"]'
2025-02-17 04:07:11.059 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:07:11.061 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2954/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.31.203/tcp/41409/p2p/16Uiu2HAmMF3eWE3QYCxD1kcz8hsQmZvyq93JKKpWyREdTkXCbQVk"]'
2025-02-17 04:07:11.090 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:07:11.091 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55323/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:07:11.100 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:07:11.101 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41408/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:07:11.105 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:07:11.108 DEBUG [src.steps.light_push] Lightpushing message
2025-02-17 04:07:11.108 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2954/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739765231108008704, "version": 2.1}}'
2025-02-17 04:07:11.112 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:2954/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data: '
2025-02-17 04:07:11.114 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:07:11.115 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:07:11.116 DEBUG [src.node.waku_node] Stopping container with id 5f4f3a7244c6
2025-02-17 04:07:11.886 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:07:11.887 DEBUG [src.node.waku_node] Stopping container with id 1588eeda64e8
2025-02-17 04:07:12.701 ERROR [src.node.docker_mananger] Max retries reached for container 5f4f3a7244c6. Exiting log stream.
2025-02-17 04:07:13.448 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:07:13.449 DEBUG [src.node.waku_node] Stopping container with id 064c7c833ec9
2025-02-17 04:07:14.262 ERROR [src.node.docker_mananger] Max retries reached for container 1588eeda64e8. Exiting log stream.
2025-02-17 04:07:14.979 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:07:14.980 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:07:14.990 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:07:14.997 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:07:15.003 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
