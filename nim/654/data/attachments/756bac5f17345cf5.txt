2025-02-17 04:06:44.801 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:06:44.801 DEBUG [tests.conftest] Running test: test_store_with_unknown_pubsub_topic with id: 2025-02-17_04-06-44__f3f22e88-96fc-4d1e-b820-10b9574c21ab
2025-02-17 04:06:44.802 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:06:44.802 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-17 04:06:44.802 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-17 04:06:44.809 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:06:44.809 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-17_04-06-44__f3f22e88-96fc-4d1e-b820-10b9574c21ab__wakuorg_nwaku:latest.log
2025-02-17 04:06:44.809 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:06:44.809 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:06:44.810 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:06:44.810 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.139.36
2025-02-17 04:06:44.811 DEBUG [src.node.docker_mananger] Generated ports ['40530', '40531', '40532', '40533', '40534']
2025-02-17 04:06:44.811 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:06:44.811 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:06:44.811 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:06:44.811 DEBUG [src.node.docker_mananger] docker run -i -t -p 40530:40530 -p 40531:40531 -p 40532:40532 -p 40533:40533 -p 40534:40534 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40532 --rest-port=40530 --tcp-port=40531 --discv5-udp-port=40533 --rest-address=0.0.0.0 --nat=extip:172.18.139.36 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b03e0cd5d8346bef209b0433ddd8cda4eacb5c3f473bedcc8ef7b83bb23cfcf7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40534 --metrics-logging=true --store=true --relay=true
2025-02-17 04:06:45.046 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.139.36 waku ae455ad913840a9d90ad3083cd35b73e4bd0087cd394fea95c529907016b32ed
2025-02-17 04:06:45.093 DEBUG [src.node.docker_mananger] Container started with ID ae455ad91384. Setting up logs at ./log/docker/publishing_node1_2025-02-17_04-06-44__f3f22e88-96fc-4d1e-b820-10b9574c21ab__wakuorg_nwaku:latest.log
2025-02-17 04:06:45.094 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40530
2025-02-17 04:06:45.094 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:06:45.606 ERROR [src.node.docker_mananger] Max retries reached for container 9c984f29a707. Exiting log stream.
2025-02-17 04:06:46.096 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40530/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:46.099 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:06:46.099 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:06:46.100 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40530/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:46.102 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.139.36/tcp/40531/p2p/16Uiu2HAm6TE8v39uRqKtBYPNkQHtJEVF9Wpmtx1XhwLfenJwzYtz","/ip4/172.18.139.36/tcp/40532/ws/p2p/16Uiu2HAm6TE8v39uRqKtBYPNkQHtJEVF9Wpmtx1XhwLfenJwzYtz"],"enrUri":"enr:-L24QAQB_81SXvUaOjEf7JWQAWkvE0BrsX3t0p3jdDEZuKdcMUXtpF3dRPwZICXP3W0oZiK0-n0dpWVwH_epORpIx8ACgmlkgnY0gmlwhKwSiySKbXVsdGlhZGRyc5YACASsEoskBp5TAAoErBKLJAaeVN0DgnJzhQADAQAAiXNlY3AyNTZrMaECo9Z_UcVZ8W2jubuFPuOVBgdOKvDLhttE0CPuYfRosMuDdGNwgp5Tg3VkcIKeVYV3YWt1MgM"}'
2025-02-17 04:06:46.102 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:06:46.109 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:06:46.109 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-17_04-06-44__f3f22e88-96fc-4d1e-b820-10b9574c21ab__wakuorg_nwaku:latest.log
2025-02-17 04:06:46.109 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:06:46.109 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:06:46.110 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:06:46.111 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.119.12
2025-02-17 04:06:46.111 DEBUG [src.node.docker_mananger] Generated ports ['9986', '9987', '9988', '9989', '9990']
2025-02-17 04:06:46.111 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:06:46.111 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:06:46.111 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:06:46.111 DEBUG [src.node.docker_mananger] docker run -i -t -p 9986:9986 -p 9987:9987 -p 9988:9988 -p 9989:9989 -p 9990:9990 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9988 --rest-port=9986 --tcp-port=9987 --discv5-udp-port=9989 --rest-address=0.0.0.0 --nat=extip:172.18.119.12 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f94cecfb22a2b9e2ed969a1452e0c324da8353f85de01b138e9e9bcdc97bb403 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9990 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QAQB_81SXvUaOjEf7JWQAWkvE0BrsX3t0p3jdDEZuKdcMUXtpF3dRPwZICXP3W0oZiK0-n0dpWVwH_epORpIx8ACgmlkgnY0gmlwhKwSiySKbXVsdGlhZGRyc5YACASsEoskBp5TAAoErBKLJAaeVN0DgnJzhQADAQAAiXNlY3AyNTZrMaECo9Z_UcVZ8W2jubuFPuOVBgdOKvDLhttE0CPuYfRosMuDdGNwgp5Tg3VkcIKeVYV3YWt1MgM --storenode=/ip4/172.18.139.36/tcp/40531/p2p/16Uiu2HAm6TE8v39uRqKtBYPNkQHtJEVF9Wpmtx1XhwLfenJwzYtz --store=true --relay=true
2025-02-17 04:06:46.347 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.119.12 waku 1ced137240906104276cc4a19b7072f12f1aeff56a572c7e619fb578f429874e
2025-02-17 04:06:46.394 DEBUG [src.node.docker_mananger] Container started with ID 1ced13724090. Setting up logs at ./log/docker/store_node1_2025-02-17_04-06-44__f3f22e88-96fc-4d1e-b820-10b9574c21ab__wakuorg_nwaku:latest.log
2025-02-17 04:06:46.396 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9986
2025-02-17 04:06:46.396 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:06:47.398 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9986/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:47.401 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:06:47.401 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:06:47.402 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9986/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:47.404 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.119.12/tcp/9987/p2p/16Uiu2HAmEY4ZDLV7FpUbj9JEArwCtcq92rETH4SQJ2Dbg8M2oYLT","/ip4/172.18.119.12/tcp/9988/ws/p2p/16Uiu2HAmEY4ZDLV7FpUbj9JEArwCtcq92rETH4SQJ2Dbg8M2oYLT"],"enrUri":"enr:-L24QO26y_kbKv9v65ERZvYAhaWWmvGA3NMyfvFIfF7oRfl7LZkKHE8TVPytl2J-OiFv1fB-KlHP1vlQSHAUTZy7sWwCgmlkgnY0gmlwhKwSdwyKbXVsdGlhZGRyc5YACASsEncMBicDAAoErBJ3DAYnBN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDG_EQPnvr5P53GMfpqFPoM9riIOXgNzsPT0L0qphKp8SDdGNwgicDg3VkcIInBYV3YWt1MgM"}'
2025-02-17 04:06:47.404 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:06:47.404 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9986/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.139.36/tcp/40531/p2p/16Uiu2HAm6TE8v39uRqKtBYPNkQHtJEVF9Wpmtx1XhwLfenJwzYtz"]'
2025-02-17 04:06:47.407 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:47.407 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40530/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:06:47.409 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:47.410 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9986/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:06:47.412 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:47.412 DEBUG [src.steps.store] Relaying message
2025-02-17 04:06:47.413 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40530/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:47.418 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:47.419 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:06:47.620 DEBUG [src.steps.store] Relaying message
2025-02-17 04:06:47.620 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40530/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:47.626 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:47.626 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:06:47.827 DEBUG [src.steps.store] Relaying message
2025-02-17 04:06:47.827 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40530/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:47.833 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:47.834 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:06:48.035 DEBUG [src.steps.store] Relaying message
2025-02-17 04:06:48.035 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40530/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:48.041 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:48.041 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:06:48.242 DEBUG [src.steps.store] Relaying message
2025-02-17 04:06:48.242 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40530/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:48.248 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:48.248 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:06:48.449 DEBUG [src.steps.store] Relaying message
2025-02-17 04:06:48.450 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40530/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:48.456 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:48.456 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:06:48.657 DEBUG [src.steps.store] Relaying message
2025-02-17 04:06:48.657 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40530/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:48.665 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:48.665 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:06:48.866 DEBUG [src.steps.store] Relaying message
2025-02-17 04:06:48.866 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40530/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:48.872 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:48.872 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:06:49.074 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40530/store/v3/messages?pubsubTopic=test&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:49.077 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-17 04:06:49.077 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9986/store/v3/messages?pubsubTopic=test&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:49.079 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-17 04:06:49.082 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:06:49.083 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:06:49.083 DEBUG [src.node.waku_node] Stopping container with id ae455ad91384
2025-02-17 04:06:49.639 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:06:49.639 DEBUG [src.node.waku_node] Stopping container with id 1ced13724090
2025-02-17 04:06:50.470 ERROR [src.node.docker_mananger] Max retries reached for container ae455ad91384. Exiting log stream.
2025-02-17 04:06:51.151 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:06:51.152 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:06:51.166 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:06:51.173 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
