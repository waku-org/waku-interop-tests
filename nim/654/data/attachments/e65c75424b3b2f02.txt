2025-02-17 04:04:28.078 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:04:28.078 DEBUG [tests.conftest] Running test: test_relay_unsubscribe_with_invalid_pubsub_topic_format with id: 2025-02-17_04-04-28__19d5bddc-7b07-4629-9c17-6e3cbf8aac93
2025-02-17 04:04:28.079 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:04:28.079 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-17 04:04:28.079 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-17 04:04:28.085 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:04:28.085 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_04-04-28__19d5bddc-7b07-4629-9c17-6e3cbf8aac93__wakuorg_nwaku:latest.log
2025-02-17 04:04:28.085 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:04:28.086 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:04:28.087 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:04:28.087 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.16.131
2025-02-17 04:04:28.087 DEBUG [src.node.docker_mananger] Generated ports ['51332', '51333', '51334', '51335', '51336']
2025-02-17 04:04:28.087 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:04:28.087 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:04:28.087 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:04:28.088 DEBUG [src.node.docker_mananger] docker run -i -t -p 51332:51332 -p 51333:51333 -p 51334:51334 -p 51335:51335 -p 51336:51336 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51334 --rest-port=51332 --tcp-port=51333 --discv5-udp-port=51335 --rest-address=0.0.0.0 --nat=extip:172.18.16.131 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=55cd0c5fc54c7ef9170f1e91e9e48a6065903efddbcff599af6becc8bf98dddf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51336 --metrics-logging=true --relay=true
2025-02-17 04:04:28.314 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.16.131 waku 25c890e28a24f81ba48cd9b7345a960523040cfd2b44cd333bb5518f88fb5289
2025-02-17 04:04:28.360 DEBUG [src.node.docker_mananger] Container started with ID 25c890e28a24. Setting up logs at ./log/docker/node1_2025-02-17_04-04-28__19d5bddc-7b07-4629-9c17-6e3cbf8aac93__wakuorg_nwaku:latest.log
2025-02-17 04:04:28.361 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 51332
2025-02-17 04:04:28.362 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:04:28.876 ERROR [src.node.docker_mananger] Max retries reached for container 32e1b4b15b5c. Exiting log stream.
2025-02-17 04:04:29.362 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51332/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:29.365 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:04:29.365 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:04:29.365 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51332/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:29.367 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.16.131/tcp/51333/p2p/16Uiu2HAm4gni4W7p3RsXKQg5e3GyvBXuXMuAN5WYS6yHs1WV6cc9","/ip4/172.18.16.131/tcp/51334/ws/p2p/16Uiu2HAm4gni4W7p3RsXKQg5e3GyvBXuXMuAN5WYS6yHs1WV6cc9"],"enrUri":"enr:-L24QNK3yNV7bFioadFP_COCi035Ryv776mtN7iIs-rKKAo0dITwkEBPtBdpVfovbktC3MPq7VPTMazDDJQ1tooUAYMCgmlkgnY0gmlwhKwSEIOKbXVsdGlhZGRyc5YACASsEhCDBsiFAAoErBIQgwbIht0DgnJzhQADAQAAiXNlY3AyNTZrMaECiZiAsNwnjD3xwuMca7fK94pobewicdjOpoROPpZccIqDdGNwgsiFg3VkcILIh4V3YWt1MgE"}'
2025-02-17 04:04:29.368 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:04:29.374 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:04:29.374 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-17_04-04-28__19d5bddc-7b07-4629-9c17-6e3cbf8aac93__wakuorg_nwaku:latest.log
2025-02-17 04:04:29.374 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:04:29.374 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:04:29.375 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:04:29.376 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.142.0
2025-02-17 04:04:29.376 DEBUG [src.node.docker_mananger] Generated ports ['48249', '48250', '48251', '48252', '48253']
2025-02-17 04:04:29.376 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:04:29.376 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:04:29.376 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:04:29.376 DEBUG [src.node.docker_mananger] docker run -i -t -p 48249:48249 -p 48250:48250 -p 48251:48251 -p 48252:48252 -p 48253:48253 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48251 --rest-port=48249 --tcp-port=48250 --discv5-udp-port=48252 --rest-address=0.0.0.0 --nat=extip:172.18.142.0 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c196db9ef75eeefa97fb50a916409f5daeaeb7e0020451c16a0aa9aa2cdcd7df --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48253 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QNK3yNV7bFioadFP_COCi035Ryv776mtN7iIs-rKKAo0dITwkEBPtBdpVfovbktC3MPq7VPTMazDDJQ1tooUAYMCgmlkgnY0gmlwhKwSEIOKbXVsdGlhZGRyc5YACASsEhCDBsiFAAoErBIQgwbIht0DgnJzhQADAQAAiXNlY3AyNTZrMaECiZiAsNwnjD3xwuMca7fK94pobewicdjOpoROPpZccIqDdGNwgsiFg3VkcILIh4V3YWt1MgE
2025-02-17 04:04:29.600 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.142.0 waku 14c9bef66b23b8b57fa29c42092cd9c9ee99b170ae0fe8da84d69793128007ab
2025-02-17 04:04:29.646 DEBUG [src.node.docker_mananger] Container started with ID 14c9bef66b23. Setting up logs at ./log/docker/node2_2025-02-17_04-04-28__19d5bddc-7b07-4629-9c17-6e3cbf8aac93__wakuorg_nwaku:latest.log
2025-02-17 04:04:29.647 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 48249
2025-02-17 04:04:29.647 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:04:30.647 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48249/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:30.658 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:04:30.658 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:04:30.658 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48249/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:30.665 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.142.0/tcp/48250/p2p/16Uiu2HAmAiF1xVFSaFLuwnuPNPJ1JRSCpRL1KWaFdJYuwdM3T3kf","/ip4/172.18.142.0/tcp/48251/ws/p2p/16Uiu2HAmAiF1xVFSaFLuwnuPNPJ1JRSCpRL1KWaFdJYuwdM3T3kf"],"enrUri":"enr:-L24QJmO-xEvG-a_p8pQBqwHfyaldzOY3JWKWV41X2decNtVJHk6Uunhw7ODMDgBcyl46fFmMgjKTqN6X7N47AjW4DMCgmlkgnY0gmlwhKwSjgCKbXVsdGlhZGRyc5YACASsEo4ABrx6AAoErBKOAAa8e90DgnJzhQADAQAAiXNlY3AyNTZrMaEC4x3zxmJVnvOb4TcV4IPfzx_vvwMjVQvxpj3BNLcwLNyDdGNwgrx6g3VkcIK8fIV3YWt1MgE"}'
2025-02-17 04:04:30.666 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:04:30.667 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48249/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.16.131/tcp/51333/p2p/16Uiu2HAm4gni4W7p3RsXKQg5e3GyvBXuXMuAN5WYS6yHs1WV6cc9"]'
2025-02-17 04:04:30.672 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:30.672 DEBUG [tests.relay.test_subscribe] Running test with payload /test/2/rs/0/1
2025-02-17 04:04:30.673 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:51332/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/test/2/rs/0/1"'
2025-02-17 04:04:30.675 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:51332/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data: '
2025-02-17 04:04:30.676 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/3/rs/0/1
2025-02-17 04:04:30.676 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:51332/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/3/rs/0/1"'
2025-02-17 04:04:30.678 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:51332/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data: '
2025-02-17 04:04:30.679 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/test/0/1
2025-02-17 04:04:30.679 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:51332/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/test/0/1"'
2025-02-17 04:04:30.681 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:51332/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data: '
2025-02-17 04:04:30.682 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/rs/3/b
2025-02-17 04:04:30.682 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:51332/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/rs/3/b"'
2025-02-17 04:04:30.684 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:51332/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data: '
2025-02-17 04:04:30.685 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/rs/0
2025-02-17 04:04:30.685 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:51332/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/rs/0"'
2025-02-17 04:04:30.687 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:51332/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data: '
2025-02-17 04:04:30.689 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:04:30.690 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:04:30.690 DEBUG [src.node.waku_node] Stopping container with id 25c890e28a24
2025-02-17 04:04:31.852 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:31.853 DEBUG [src.node.waku_node] Stopping container with id 14c9bef66b23
2025-02-17 04:04:32.664 ERROR [src.node.docker_mananger] Max retries reached for container 25c890e28a24. Exiting log stream.
2025-02-17 04:04:33.343 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:33.344 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:04:33.348 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:04:33.353 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
