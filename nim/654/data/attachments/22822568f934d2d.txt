2025-02-17 04:04:14.147 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:04:14.148 DEBUG [tests.conftest] Running test: test_filter_ping_on_unsubscribed_peer with id: 2025-02-17_04-04-14__3822d187-b5e2-4711-b701-158e261b91a7
2025-02-17 04:04:14.148 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:04:14.149 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-17 04:04:14.150 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-17 04:04:14.158 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:04:14.159 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_04-04-14__3822d187-b5e2-4711-b701-158e261b91a7__wakuorg_nwaku:latest.log
2025-02-17 04:04:14.159 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:04:14.159 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:04:14.161 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:04:14.161 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.173.243
2025-02-17 04:04:14.161 DEBUG [src.node.docker_mananger] Generated ports ['64776', '64777', '64778', '64779', '64780']
2025-02-17 04:04:14.161 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:04:14.162 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:04:14.162 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:04:14.162 DEBUG [src.node.docker_mananger] docker run -i -t -p 64776:64776 -p 64777:64777 -p 64778:64778 -p 64779:64779 -p 64780:64780 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64778 --rest-port=64776 --tcp-port=64777 --discv5-udp-port=64779 --rest-address=0.0.0.0 --nat=extip:172.18.173.243 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=db077f9e27f67f6d0aaa9c7b85bdf7a228a8308bc6be5efbda7c665fcebfa23e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64780 --metrics-logging=true --relay=true --filter=true
2025-02-17 04:04:14.397 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.173.243 waku a9119b218d92e720682e84ffb08449770983f45798bce76c88a1059f08422f83
2025-02-17 04:04:14.444 DEBUG [src.node.docker_mananger] Container started with ID a9119b218d92. Setting up logs at ./log/docker/node1_2025-02-17_04-04-14__3822d187-b5e2-4711-b701-158e261b91a7__wakuorg_nwaku:latest.log
2025-02-17 04:04:14.447 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 64776
2025-02-17 04:04:14.447 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:04:14.993 ERROR [src.node.docker_mananger] Max retries reached for container d92266ea15b0. Exiting log stream.
2025-02-17 04:04:15.447 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64776/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:15.450 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:04:15.450 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:04:15.450 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64776/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:15.452 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.173.243/tcp/64777/p2p/16Uiu2HAkwahnjMsUfdvpyzCybZQ82srBAKpcW1WUEjhtutjb38kN","/ip4/172.18.173.243/tcp/64778/ws/p2p/16Uiu2HAkwahnjMsUfdvpyzCybZQ82srBAKpcW1WUEjhtutjb38kN"],"enrUri":"enr:-L24QHe0xKy6BBuHaVpzJXiaGaL4xZ3lBzMhGhZ38d0tYHsaA6CdkamwzBp76bMBg4fpK9mPJdufusE00xiq_PW6ajMCgmlkgnY0gmlwhKwSrfOKbXVsdGlhZGRyc5YACASsEq3zBv0JAAoErBKt8wb9Ct0DgnJzhQADAQAAiXNlY3AyNTZrMaECIAelmhEq921U77ou7eqY9sfLLdhrDBtmkaeMSGyyxj-DdGNwgv0Jg3VkcIL9C4V3YWt1MgU"}'
2025-02-17 04:04:15.453 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:04:15.453 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-17 04:04:15.459 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:04:15.459 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-17_04-04-14__3822d187-b5e2-4711-b701-158e261b91a7__wakuorg_nwaku:latest.log
2025-02-17 04:04:15.459 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:04:15.459 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:04:15.461 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:04:15.461 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.71.198
2025-02-17 04:04:15.461 DEBUG [src.node.docker_mananger] Generated ports ['65313', '65314', '65315', '65316', '65317']
2025-02-17 04:04:15.461 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:04:15.461 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:04:15.461 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:04:15.462 DEBUG [src.node.docker_mananger] docker run -i -t -p 65313:65313 -p 65314:65314 -p 65315:65315 -p 65316:65316 -p 65317:65317 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65315 --rest-port=65313 --tcp-port=65314 --discv5-udp-port=65316 --rest-address=0.0.0.0 --nat=extip:172.18.71.198 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3363ddea39babd16a3d7e4efdaadfbb7defcd1cba4528aa2af8a6fdcdb718cdd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65317 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QHe0xKy6BBuHaVpzJXiaGaL4xZ3lBzMhGhZ38d0tYHsaA6CdkamwzBp76bMBg4fpK9mPJdufusE00xiq_PW6ajMCgmlkgnY0gmlwhKwSrfOKbXVsdGlhZGRyc5YACASsEq3zBv0JAAoErBKt8wb9Ct0DgnJzhQADAQAAiXNlY3AyNTZrMaECIAelmhEq921U77ou7eqY9sfLLdhrDBtmkaeMSGyyxj-DdGNwgv0Jg3VkcIL9C4V3YWt1MgU --filternode=/ip4/172.18.173.243/tcp/64777/p2p/16Uiu2HAkwahnjMsUfdvpyzCybZQ82srBAKpcW1WUEjhtutjb38kN
2025-02-17 04:04:15.690 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.71.198 waku c02952e4add42471ca816cc1d90288fe4fd865b6824c333d7696238e633c1d1c
2025-02-17 04:04:15.742 DEBUG [src.node.docker_mananger] Container started with ID c02952e4add4. Setting up logs at ./log/docker/node2_2025-02-17_04-04-14__3822d187-b5e2-4711-b701-158e261b91a7__wakuorg_nwaku:latest.log
2025-02-17 04:04:15.742 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 65313
2025-02-17 04:04:15.743 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:04:16.743 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65313/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:16.746 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:04:16.746 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:04:16.746 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65313/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:16.748 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.71.198/tcp/65314/p2p/16Uiu2HAkyfov2eXUeQ4mVbc2hMiK2kDzEKQJiqCgWpLQ4vkQs4cC","/ip4/172.18.71.198/tcp/65315/ws/p2p/16Uiu2HAkyfov2eXUeQ4mVbc2hMiK2kDzEKQJiqCgWpLQ4vkQs4cC"],"enrUri":"enr:-L24QGjHCaNOh0mXlmFfsMrDbLXIrnCQn6Dqp4bxnwrVzWZPJ-EiDMg1b8VSAbsx1ThZCazkB3zkFQvxWWVNmPjdZhMCgmlkgnY0gmlwhKwSR8aKbXVsdGlhZGRyc5YACASsEkfGBv8iAAoErBJHxgb_I90DgnJzhQADAQAAiXNlY3AyNTZrMaECPw3Z7UNtXeK8c3VYN7e5sg1ZnCwr3hGj6iyHn3iFfUWDdGNwgv8ig3VkcIL_JIV3YWt1MgA"}'
2025-02-17 04:04:16.748 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:04:16.749 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65313/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.173.243/tcp/64777/p2p/16Uiu2HAkwahnjMsUfdvpyzCybZQ82srBAKpcW1WUEjhtutjb38kN"]'
2025-02-17 04:04:16.785 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:16.786 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-17 04:04:16.786 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64776/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:04:16.802 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:16.803 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65313/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "9fd1499b-ea7e-4a00-8d6e-f8fa1f32129c", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-17 04:04:16.815 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"9fd1499b-ea7e-4a00-8d6e-f8fa1f32129c","statusDesc":"OK"}'
2025-02-17 04:04:16.816 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65313/filter/v2/subscriptions/8ef06fb1-7b83-45b5-a99d-92cf3944fd37" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:16.823 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"8ef06fb1-7b83-45b5-a99d-92cf3944fd37","statusDesc":"OK"}'
2025-02-17 04:04:16.823 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:65313/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-17 04:04:16.831 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"12345","statusDesc":"OK"}'
2025-02-17 04:04:16.831 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65313/filter/v2/subscriptions/cd58967d-ac73-4e11-b89f-77615613bdd9" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:16.838 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:65313/filter/v2/subscriptions/cd58967d-ac73-4e11-b89f-77615613bdd9. Response content: b'{"requestId":"cd58967d-ac73-4e11-b89f-77615613bdd9","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
2025-02-17 04:04:16.841 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:04:16.842 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:04:16.842 DEBUG [src.node.waku_node] Stopping container with id a9119b218d92
2025-02-17 04:04:17.929 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:17.930 DEBUG [src.node.waku_node] Stopping container with id c02952e4add4
2025-02-17 04:04:18.741 ERROR [src.node.docker_mananger] Max retries reached for container a9119b218d92. Exiting log stream.
2025-02-17 04:04:19.428 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:19.431 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:04:19.436 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:04:19.442 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
