2025-02-17 04:04:52.315 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:04:52.315 DEBUG [tests.conftest] Running test: test_single_content_topic[/statusim/1/community/cbor] with id: 2025-02-17_04-04-52__7ab34b90-9658-4396-aaf6-2f29cde2658b
2025-02-17 04:04:52.315 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:04:52.315 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-17 04:04:52.316 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-17 04:04:52.322 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:04:52.323 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_04-04-52__7ab34b90-9658-4396-aaf6-2f29cde2658b__wakuorg_nwaku:latest.log
2025-02-17 04:04:52.323 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:04:52.323 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:04:52.324 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:04:52.324 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.123.101
2025-02-17 04:04:52.325 DEBUG [src.node.docker_mananger] Generated ports ['26730', '26731', '26732', '26733', '26734']
2025-02-17 04:04:52.325 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:04:52.325 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:04:52.325 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:04:52.325 DEBUG [src.node.docker_mananger] docker run -i -t -p 26730:26730 -p 26731:26731 -p 26732:26732 -p 26733:26733 -p 26734:26734 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26732 --rest-port=26730 --tcp-port=26731 --discv5-udp-port=26733 --rest-address=0.0.0.0 --nat=extip:172.18.123.101 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=afcfab6bbbc1feabae6c0fd6beb3aeded6fad0c822bdac96a3eaea0e2caefa14 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26734 --metrics-logging=true --relay=true --filter=true --content-topic=/statusim/1/community/cbor
2025-02-17 04:04:52.564 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.123.101 waku b4a564719f5fef52e5e372bf1db119b30a4e21c4c4c932bc265d89c01fe9c0fa
2025-02-17 04:04:52.616 DEBUG [src.node.docker_mananger] Container started with ID b4a564719f5f. Setting up logs at ./log/docker/node1_2025-02-17_04-04-52__7ab34b90-9658-4396-aaf6-2f29cde2658b__wakuorg_nwaku:latest.log
2025-02-17 04:04:52.616 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26730
2025-02-17 04:04:52.616 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:04:53.118 ERROR [src.node.docker_mananger] Max retries reached for container 37583d367d3d. Exiting log stream.
2025-02-17 04:04:53.617 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26730/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:53.620 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:04:53.620 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:04:53.620 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26730/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:53.622 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.123.101/tcp/26731/p2p/16Uiu2HAmL3sAe4Eo2BpH84DsqmSL9G5BBN3rgU26RBn2c5sV9A8d","/ip4/172.18.123.101/tcp/26732/ws/p2p/16Uiu2HAmL3sAe4Eo2BpH84DsqmSL9G5BBN3rgU26RBn2c5sV9A8d"],"enrUri":"enr:-L24QNDQ50bm40P05yQNMN7pj9e0BOvwmu4bvwwAZQIzNNRBTONZ2P00DJevEDhim_0rmjmoW-4cPCSaB4GDj8MKGbECgmlkgnY0gmlwhKwSe2WKbXVsdGlhZGRyc5YACASsEntlBmhrAAoErBJ7ZQZobN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDbd4LZz6_HjEWqEgnp7ZKtQkYE0AL3k3T6_Ku5GQsA76DdGNwgmhrg3VkcIJobYV3YWt1MgU"}'
2025-02-17 04:04:53.622 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:04:53.629 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:04:53.629 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-17_04-04-52__7ab34b90-9658-4396-aaf6-2f29cde2658b__wakuorg_nwaku:latest.log
2025-02-17 04:04:53.629 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:04:53.629 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:04:53.631 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:04:53.631 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.199.181
2025-02-17 04:04:53.631 DEBUG [src.node.docker_mananger] Generated ports ['19026', '19027', '19028', '19029', '19030']
2025-02-17 04:04:53.631 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:04:53.631 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:04:53.632 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:04:53.632 DEBUG [src.node.docker_mananger] docker run -i -t -p 19026:19026 -p 19027:19027 -p 19028:19028 -p 19029:19029 -p 19030:19030 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19028 --rest-port=19026 --tcp-port=19027 --discv5-udp-port=19029 --rest-address=0.0.0.0 --nat=extip:172.18.199.181 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=0239bfc8956aaf9a1c91d14bd42687b3bf8a7fab55376d5eaaa2d2d2239cdaf2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19030 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QNDQ50bm40P05yQNMN7pj9e0BOvwmu4bvwwAZQIzNNRBTONZ2P00DJevEDhim_0rmjmoW-4cPCSaB4GDj8MKGbECgmlkgnY0gmlwhKwSe2WKbXVsdGlhZGRyc5YACASsEntlBmhrAAoErBJ7ZQZobN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDbd4LZz6_HjEWqEgnp7ZKtQkYE0AL3k3T6_Ku5GQsA76DdGNwgmhrg3VkcIJobYV3YWt1MgU --content-topic=/statusim/1/community/cbor
2025-02-17 04:04:53.855 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.199.181 waku 5208848cb422edf965ed92f8608056be62a4cf569213a0bf57ea20ab0714d81e
2025-02-17 04:04:53.905 DEBUG [src.node.docker_mananger] Container started with ID 5208848cb422. Setting up logs at ./log/docker/node2_2025-02-17_04-04-52__7ab34b90-9658-4396-aaf6-2f29cde2658b__wakuorg_nwaku:latest.log
2025-02-17 04:04:53.905 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 19026
2025-02-17 04:04:53.906 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:04:54.906 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19026/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:54.921 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:04:54.921 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:04:54.921 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19026/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:54.925 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.199.181/tcp/19027/p2p/16Uiu2HAmLSUo5p396dKkK1zNdeUuEJo9WerMjdznyy6MCB2zaG2y","/ip4/172.18.199.181/tcp/19028/ws/p2p/16Uiu2HAmLSUo5p396dKkK1zNdeUuEJo9WerMjdznyy6MCB2zaG2y"],"enrUri":"enr:-L24QE-IslLxaNUsB6eqaImYBNga6kTZXuH9uxoKH2zFuW8QNh-CXn2D7TfbzRVMTSVARj17KOq2fKV8gZyeUuTvHBECgmlkgnY0gmlwhKwSx7WKbXVsdGlhZGRyc5YACASsEse1BkpTAAoErBLHtQZKVN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDc6kbgV7OMU6CN6NDvEicklJ-Nqpb8fWPWYkpnl0_muaDdGNwgkpTg3VkcIJKVYV3YWt1MgE"}'
2025-02-17 04:04:54.926 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:04:54.927 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19026/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.123.101/tcp/26731/p2p/16Uiu2HAmL3sAe4Eo2BpH84DsqmSL9G5BBN3rgU26RBn2c5sV9A8d"]'
2025-02-17 04:04:54.931 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:54.932 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26730/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/statusim/1/community/cbor"]'
2025-02-17 04:04:54.935 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:54.935 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19026/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/statusim/1/community/cbor"]'
2025-02-17 04:04:54.937 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:54.938 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26730/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:04:54.943 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:54.943 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 04:04:55.044 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-17 04:04:55.044 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26730/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:55.047 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/statusim/1/community/cbor","version":0,"timestamp":1739765094938024960,"ephemeral":false,"proof":""}]'
2025-02-17 04:04:55.048 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-17 04:04:55.049 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19026/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:55.051 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/statusim/1/community/cbor","version":0,"timestamp":1739765094938024960,"ephemeral":false,"proof":""}]'
2025-02-17 04:04:55.054 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:04:55.055 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:04:55.055 DEBUG [src.node.waku_node] Stopping container with id b4a564719f5f
2025-02-17 04:04:56.090 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:56.091 DEBUG [src.node.waku_node] Stopping container with id 5208848cb422
2025-02-17 04:04:56.903 ERROR [src.node.docker_mananger] Max retries reached for container b4a564719f5f. Exiting log stream.
2025-02-17 04:04:57.580 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:57.581 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:04:57.586 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:04:57.592 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
