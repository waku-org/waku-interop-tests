2025-02-17 04:09:27.293 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:09:27.293 DEBUG [tests.conftest] Running test: test_store_with_unknown_pubsub_topic_but_known_content_topic with id: 2025-02-17_04-09-27__134da3d9-1503-4ef2-97e7-c1c8c4fbbf62
2025-02-17 04:09:27.293 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:09:27.293 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-17 04:09:27.294 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-17 04:09:27.300 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:09:27.300 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-17_04-09-27__134da3d9-1503-4ef2-97e7-c1c8c4fbbf62__wakuorg_nwaku:latest.log
2025-02-17 04:09:27.300 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:09:27.300 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:09:27.302 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:09:27.302 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.69.16
2025-02-17 04:09:27.302 DEBUG [src.node.docker_mananger] Generated ports ['23045', '23046', '23047', '23048', '23049']
2025-02-17 04:09:27.302 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:09:27.302 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:09:27.302 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:09:27.302 DEBUG [src.node.docker_mananger] docker run -i -t -p 23045:23045 -p 23046:23046 -p 23047:23047 -p 23048:23048 -p 23049:23049 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23047 --rest-port=23045 --tcp-port=23046 --discv5-udp-port=23048 --rest-address=0.0.0.0 --nat=extip:172.18.69.16 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7d254b47ccbb2bbe2481cfdee7bef79b7cdcb0c270cef3a8f4bae1ae9a3c45bf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23049 --metrics-logging=true --store=true --relay=true
2025-02-17 04:09:27.540 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.69.16 waku 2baffd271dd50ca2c37bdd5c00386d2ac5a3f5add70b58ec59eb7c04a53bf8d6
2025-02-17 04:09:27.591 DEBUG [src.node.docker_mananger] Container started with ID 2baffd271dd5. Setting up logs at ./log/docker/publishing_node1_2025-02-17_04-09-27__134da3d9-1503-4ef2-97e7-c1c8c4fbbf62__wakuorg_nwaku:latest.log
2025-02-17 04:09:27.593 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23045
2025-02-17 04:09:27.593 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:09:28.094 ERROR [src.node.docker_mananger] Max retries reached for container f39bfbc1ddd4. Exiting log stream.
2025-02-17 04:09:28.596 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23045/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:09:28.599 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:09:28.599 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:09:28.599 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23045/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:09:28.602 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.69.16/tcp/23046/p2p/16Uiu2HAmJdxsorPeaXerfUZi4Rpw3Zp4Zd4FRKRieVkGwn7qi8YY","/ip4/172.18.69.16/tcp/23047/ws/p2p/16Uiu2HAmJdxsorPeaXerfUZi4Rpw3Zp4Zd4FRKRieVkGwn7qi8YY"],"enrUri":"enr:-L24QBybnc1PdE4S-duYgy3oVQTBKMjzuzx8Qgla-CSc8teqB8tMN7offCv-6OecyxUtUSeKi7XjioRDS-P9khBMd9MCgmlkgnY0gmlwhKwSRRCKbXVsdGlhZGRyc5YACASsEkUQBloGAAoErBJFEAZaB90DgnJzhQADAQAAiXNlY3AyNTZrMaEDWOLf0jEny8eslyf9MERhP7IxCtfsZTpAGBJ3TiJujYmDdGNwgloGg3VkcIJaCIV3YWt1MgM"}'
2025-02-17 04:09:28.602 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:09:28.609 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:09:28.609 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-17_04-09-27__134da3d9-1503-4ef2-97e7-c1c8c4fbbf62__wakuorg_nwaku:latest.log
2025-02-17 04:09:28.610 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:09:28.610 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:09:28.611 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:09:28.611 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.48.173
2025-02-17 04:09:28.611 DEBUG [src.node.docker_mananger] Generated ports ['64061', '64062', '64063', '64064', '64065']
2025-02-17 04:09:28.612 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:09:28.612 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:09:28.612 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:09:28.612 DEBUG [src.node.docker_mananger] docker run -i -t -p 64061:64061 -p 64062:64062 -p 64063:64063 -p 64064:64064 -p 64065:64065 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64063 --rest-port=64061 --tcp-port=64062 --discv5-udp-port=64064 --rest-address=0.0.0.0 --nat=extip:172.18.48.173 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ea5bad23eed28e821f8a25daaddea7cb37df4fef2b4d719beaefad4cb1a3ecc1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64065 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QBybnc1PdE4S-duYgy3oVQTBKMjzuzx8Qgla-CSc8teqB8tMN7offCv-6OecyxUtUSeKi7XjioRDS-P9khBMd9MCgmlkgnY0gmlwhKwSRRCKbXVsdGlhZGRyc5YACASsEkUQBloGAAoErBJFEAZaB90DgnJzhQADAQAAiXNlY3AyNTZrMaEDWOLf0jEny8eslyf9MERhP7IxCtfsZTpAGBJ3TiJujYmDdGNwgloGg3VkcIJaCIV3YWt1MgM --storenode=/ip4/172.18.69.16/tcp/23046/p2p/16Uiu2HAmJdxsorPeaXerfUZi4Rpw3Zp4Zd4FRKRieVkGwn7qi8YY --store=true --relay=true
2025-02-17 04:09:28.852 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.48.173 waku 1078d3abddab7627eaa158885fbfc931ca92948ebd300af73d03c85afe190169
2025-02-17 04:09:28.903 DEBUG [src.node.docker_mananger] Container started with ID 1078d3abddab. Setting up logs at ./log/docker/store_node1_2025-02-17_04-09-27__134da3d9-1503-4ef2-97e7-c1c8c4fbbf62__wakuorg_nwaku:latest.log
2025-02-17 04:09:28.905 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 64061
2025-02-17 04:09:28.905 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:09:29.905 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64061/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:09:29.908 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:09:29.909 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:09:29.909 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64061/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:09:29.911 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.48.173/tcp/64062/p2p/16Uiu2HAmE49H3yvbYWDMs94ZQxJ4GsrbpMApgjeo5yLp5kGzVcdY","/ip4/172.18.48.173/tcp/64063/ws/p2p/16Uiu2HAmE49H3yvbYWDMs94ZQxJ4GsrbpMApgjeo5yLp5kGzVcdY"],"enrUri":"enr:-L24QMI72PCgJf7ia-3oqjcWC_iD71h0UB4rnQ9jnb8FXm9GFiH93YuvHp6W_IKLIVSC65xVKIML08N391yEPQF1y6gCgmlkgnY0gmlwhKwSMK2KbXVsdGlhZGRyc5YACASsEjCtBvo-AAoErBIwrQb6P90DgnJzhQADAQAAiXNlY3AyNTZrMaEDFMojpjV97mZSm9umWIb8vvUCQw_u9KqyzekBkz-mEUODdGNwgvo-g3VkcIL6QIV3YWt1MgM"}'
2025-02-17 04:09:29.911 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:09:29.911 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64061/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.69.16/tcp/23046/p2p/16Uiu2HAmJdxsorPeaXerfUZi4Rpw3Zp4Zd4FRKRieVkGwn7qi8YY"]'
2025-02-17 04:09:29.914 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:09:29.915 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23045/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:09:29.917 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:09:29.917 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64061/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:09:29.919 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:09:29.920 DEBUG [src.steps.store] Relaying message
2025-02-17 04:09:29.920 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23045/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:09:29.925 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:09:29.926 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:09:30.127 DEBUG [src.steps.store] Relaying message
2025-02-17 04:09:30.127 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23045/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:09:30.133 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:09:30.134 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:09:30.336 DEBUG [src.steps.store] Relaying message
2025-02-17 04:09:30.336 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23045/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:09:30.342 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:09:30.342 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:09:30.543 DEBUG [src.steps.store] Relaying message
2025-02-17 04:09:30.544 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23045/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:09:30.550 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:09:30.550 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:09:30.751 DEBUG [src.steps.store] Relaying message
2025-02-17 04:09:30.752 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23045/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:09:30.758 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:09:30.758 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:09:30.959 DEBUG [src.steps.store] Relaying message
2025-02-17 04:09:30.959 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23045/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:09:30.965 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:09:30.965 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:09:31.167 DEBUG [src.steps.store] Relaying message
2025-02-17 04:09:31.167 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23045/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:09:31.173 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:09:31.173 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:09:31.374 DEBUG [src.steps.store] Relaying message
2025-02-17 04:09:31.374 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23045/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:09:31.380 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:09:31.381 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:09:31.582 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23045/store/v3/messages?pubsubTopic=test&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:09:31.586 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-17 04:09:31.586 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64061/store/v3/messages?pubsubTopic=test&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:09:31.589 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-17 04:09:31.592 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:09:31.593 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:09:31.593 DEBUG [src.node.waku_node] Stopping container with id 2baffd271dd5
2025-02-17 04:09:33.123 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:09:33.123 DEBUG [src.node.waku_node] Stopping container with id 1078d3abddab
2025-02-17 04:09:33.954 ERROR [src.node.docker_mananger] Max retries reached for container 2baffd271dd5. Exiting log stream.
2025-02-17 04:09:34.652 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:09:34.654 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:09:34.667 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:09:34.673 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
