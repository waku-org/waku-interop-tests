2025-02-17 04:06:54.798 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:06:54.799 DEBUG [tests.conftest] Running test: test_store_with_invalid_hash with id: 2025-02-17_04-06-54__bdd9b474-12f7-405d-8217-8cd4c9a24b9a
2025-02-17 04:06:54.799 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:06:54.800 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-17 04:06:54.800 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-17 04:06:54.809 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:06:54.810 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-17_04-06-54__bdd9b474-12f7-405d-8217-8cd4c9a24b9a__wakuorg_nwaku:latest.log
2025-02-17 04:06:54.810 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:06:54.810 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:06:54.812 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:06:54.812 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.170.24
2025-02-17 04:06:54.812 DEBUG [src.node.docker_mananger] Generated ports ['17467', '17468', '17469', '17470', '17471']
2025-02-17 04:06:54.812 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:06:54.813 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:06:54.813 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:06:54.813 DEBUG [src.node.docker_mananger] docker run -i -t -p 17467:17467 -p 17468:17468 -p 17469:17469 -p 17470:17470 -p 17471:17471 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17469 --rest-port=17467 --tcp-port=17468 --discv5-udp-port=17470 --rest-address=0.0.0.0 --nat=extip:172.18.170.24 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6072f348c9b8d349290c9dfef0f58a83225ddbb89aebb11da8b3e1a7c4498eaf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17471 --metrics-logging=true --store=true --relay=true
2025-02-17 04:06:55.040 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.170.24 waku 7cbfdec930ccece8bd792a911b3377ee4d262aae9e67ead18401be7af6cfdf97
2025-02-17 04:06:55.092 DEBUG [src.node.docker_mananger] Container started with ID 7cbfdec930cc. Setting up logs at ./log/docker/publishing_node1_2025-02-17_04-06-54__bdd9b474-12f7-405d-8217-8cd4c9a24b9a__wakuorg_nwaku:latest.log
2025-02-17 04:06:55.094 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17467
2025-02-17 04:06:55.094 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:06:55.635 ERROR [src.node.docker_mananger] Max retries reached for container 82ea851af40d. Exiting log stream.
2025-02-17 04:06:56.095 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17467/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:56.099 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:06:56.099 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:06:56.099 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17467/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:56.102 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.170.24/tcp/17468/p2p/16Uiu2HAkx46WNJhq8fj7GyZQWHcdqWoyryUygzjrh3W3VT3YrLhY","/ip4/172.18.170.24/tcp/17469/ws/p2p/16Uiu2HAkx46WNJhq8fj7GyZQWHcdqWoyryUygzjrh3W3VT3YrLhY"],"enrUri":"enr:-L24QA5mAnAmW7rw2c8Q8NrrdSyXDB0XYu6v9QpJJUja1PDqQfr0sBa0TvHD3VcJZWT8RbOj9x4ZxvN5floEI4VaSGUCgmlkgnY0gmlwhKwSqhiKbXVsdGlhZGRyc5YACASsEqoYBkQ8AAoErBKqGAZEPd0DgnJzhQADAQAAiXNlY3AyNTZrMaECJwwEEwEYUoi4BloLc41UUot4Wnjgpb9bTsyeFNGXeTODdGNwgkQ8g3VkcIJEPoV3YWt1MgM"}'
2025-02-17 04:06:56.102 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:06:56.109 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:06:56.109 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-17_04-06-54__bdd9b474-12f7-405d-8217-8cd4c9a24b9a__wakuorg_nwaku:latest.log
2025-02-17 04:06:56.109 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:06:56.109 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:06:56.110 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:06:56.111 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.25.164
2025-02-17 04:06:56.111 DEBUG [src.node.docker_mananger] Generated ports ['46584', '46585', '46586', '46587', '46588']
2025-02-17 04:06:56.111 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:06:56.111 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:06:56.111 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:06:56.111 DEBUG [src.node.docker_mananger] docker run -i -t -p 46584:46584 -p 46585:46585 -p 46586:46586 -p 46587:46587 -p 46588:46588 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46586 --rest-port=46584 --tcp-port=46585 --discv5-udp-port=46587 --rest-address=0.0.0.0 --nat=extip:172.18.25.164 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c02eb15cb5951d5e6d15eb25e3e6ac6fcb31903b7ed0d79f60241efb690e3048 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46588 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QA5mAnAmW7rw2c8Q8NrrdSyXDB0XYu6v9QpJJUja1PDqQfr0sBa0TvHD3VcJZWT8RbOj9x4ZxvN5floEI4VaSGUCgmlkgnY0gmlwhKwSqhiKbXVsdGlhZGRyc5YACASsEqoYBkQ8AAoErBKqGAZEPd0DgnJzhQADAQAAiXNlY3AyNTZrMaECJwwEEwEYUoi4BloLc41UUot4Wnjgpb9bTsyeFNGXeTODdGNwgkQ8g3VkcIJEPoV3YWt1MgM --storenode=/ip4/172.18.170.24/tcp/17468/p2p/16Uiu2HAkx46WNJhq8fj7GyZQWHcdqWoyryUygzjrh3W3VT3YrLhY --store=true --relay=true
2025-02-17 04:06:56.360 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.25.164 waku 45ccde0288ccbb13395cfe563983db973bd2bbe85286e2c165aff35e566dbfa6
2025-02-17 04:06:56.411 DEBUG [src.node.docker_mananger] Container started with ID 45ccde0288cc. Setting up logs at ./log/docker/store_node1_2025-02-17_04-06-54__bdd9b474-12f7-405d-8217-8cd4c9a24b9a__wakuorg_nwaku:latest.log
2025-02-17 04:06:56.413 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46584
2025-02-17 04:06:56.413 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:06:57.414 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46584/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:57.416 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:06:57.416 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:06:57.417 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46584/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:57.419 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.25.164/tcp/46585/p2p/16Uiu2HAm6F3zmVSFmo23QGp4PheSHkZqk6jeSytfhwH7ANTpeiDh","/ip4/172.18.25.164/tcp/46586/ws/p2p/16Uiu2HAm6F3zmVSFmo23QGp4PheSHkZqk6jeSytfhwH7ANTpeiDh"],"enrUri":"enr:-L24QJRMN0wRrCj-qsxyhaFgwmh3WDE6FcszxL2Vg-DBfF9xQKqq9cC3HiFyuVuV5E1MOdFlmVhFCsqaFzfmx0NBns4CgmlkgnY0gmlwhKwSGaSKbXVsdGlhZGRyc5YACASsEhmkBrX5AAoErBIZpAa1-t0DgnJzhQADAQAAiXNlY3AyNTZrMaECoLgPz87V-6eDW_6zxj53_dA7rYQOZfcNUmCLWoqxnVyDdGNwgrX5g3VkcIK1-4V3YWt1MgM"}'
2025-02-17 04:06:57.419 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:06:57.419 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46584/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.170.24/tcp/17468/p2p/16Uiu2HAkx46WNJhq8fj7GyZQWHcdqWoyryUygzjrh3W3VT3YrLhY"]'
2025-02-17 04:06:57.422 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:57.422 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17467/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:06:57.425 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:57.425 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46584/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:06:57.427 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:57.428 DEBUG [src.steps.store] Relaying message
2025-02-17 04:06:57.428 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17467/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:57.434 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:57.434 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:06:57.635 DEBUG [src.steps.store] Relaying message
2025-02-17 04:06:57.635 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17467/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:57.642 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:57.643 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:06:57.843 DEBUG [src.steps.store] Relaying message
2025-02-17 04:06:57.844 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17467/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:57.850 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:57.851 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:06:58.051 DEBUG [src.steps.store] Relaying message
2025-02-17 04:06:58.052 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17467/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:58.057 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:58.058 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:06:58.259 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17467/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:58.262 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:17467/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true. Response content: b'waku message hash parsing error: invalid hash length: 4'
2025-02-17 04:06:58.263 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46584/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:58.266 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:46584/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true. Response content: b'waku message hash parsing error: invalid hash length: 4'
2025-02-17 04:06:58.268 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:06:58.269 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:06:58.269 DEBUG [src.node.waku_node] Stopping container with id 7cbfdec930cc
2025-02-17 04:06:58.954 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:06:58.954 DEBUG [src.node.waku_node] Stopping container with id 45ccde0288cc
2025-02-17 04:06:59.766 ERROR [src.node.docker_mananger] Max retries reached for container 7cbfdec930cc. Exiting log stream.
2025-02-17 04:07:00.445 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:07:00.447 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:07:00.453 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:07:00.459 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
