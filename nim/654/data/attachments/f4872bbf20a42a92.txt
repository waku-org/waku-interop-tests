2025-02-17 04:04:20.024 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:04:20.025 DEBUG [tests.conftest] Running test: test_light_push_while_peer_is_paused with id: 2025-02-17_04-04-20__917e2774-27a9-4a2b-8b2f-20cb7327cadc
2025-02-17 04:04:20.025 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:04:20.025 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-17 04:04:20.032 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:04:20.032 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-17_04-04-20__917e2774-27a9-4a2b-8b2f-20cb7327cadc__wakuorg_nwaku:latest.log
2025-02-17 04:04:20.032 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:04:20.032 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:04:20.033 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:04:20.033 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.19.154
2025-02-17 04:04:20.034 DEBUG [src.node.docker_mananger] Generated ports ['17939', '17940', '17941', '17942', '17943']
2025-02-17 04:04:20.034 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:04:20.034 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:04:20.034 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:04:20.034 DEBUG [src.node.docker_mananger] docker run -i -t -p 17939:17939 -p 17940:17940 -p 17941:17941 -p 17942:17942 -p 17943:17943 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17941 --rest-port=17939 --tcp-port=17940 --discv5-udp-port=17942 --rest-address=0.0.0.0 --nat=extip:172.18.19.154 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ef2a3da0c6a5013fa78ccd7dcabff6acfe74fea7a091b3eab12f6d32bb9a6aec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17943 --metrics-logging=true --lightpush=true --relay=true
2025-02-17 04:04:20.259 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.19.154 waku 0cf1cb02bf282cf64a3ef1f92c67c5956290a2bf5c20ee0fbe479219e8b6cfa3
2025-02-17 04:04:20.307 DEBUG [src.node.docker_mananger] Container started with ID 0cf1cb02bf28. Setting up logs at ./log/docker/receiving_node1_2025-02-17_04-04-20__917e2774-27a9-4a2b-8b2f-20cb7327cadc__wakuorg_nwaku:latest.log
2025-02-17 04:04:20.307 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17939
2025-02-17 04:04:20.308 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:04:20.831 ERROR [src.node.docker_mananger] Max retries reached for container d300fa16fa2c. Exiting log stream.
2025-02-17 04:04:21.308 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17939/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:21.311 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:04:21.311 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:04:21.311 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17939/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:21.314 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.19.154/tcp/17940/p2p/16Uiu2HAmFdt3wqr5z1TtuKpbNeeCgFxnPAfWqXG6BsPB3j7Ai7GA","/ip4/172.18.19.154/tcp/17941/ws/p2p/16Uiu2HAmFdt3wqr5z1TtuKpbNeeCgFxnPAfWqXG6BsPB3j7Ai7GA"],"enrUri":"enr:-L24QBA9kamIrW9p4BF8i6D6RsNUpu_tZ7a1Jw4HJZv4awZOF6rexJ-PJ6FP1lM0LOYR8POZGMlR1G1HX1uEq8HsIrACgmlkgnY0gmlwhKwSE5qKbXVsdGlhZGRyc5YACASsEhOaBkYUAAoErBITmgZGFd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDLEpbjjSxwgf8X5hiSI7jDNLy_9zvXF4C2dbIDTMR43-DdGNwgkYUg3VkcIJGFoV3YWt1Mgk"}'
2025-02-17 04:04:21.314 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:04:21.320 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:04:21.321 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-17_04-04-20__917e2774-27a9-4a2b-8b2f-20cb7327cadc__wakuorg_nwaku:latest.log
2025-02-17 04:04:21.321 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:04:21.321 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:04:21.322 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:04:21.322 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.144.229
2025-02-17 04:04:21.322 DEBUG [src.node.docker_mananger] Generated ports ['53316', '53317', '53318', '53319', '53320']
2025-02-17 04:04:21.322 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:04:21.323 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:04:21.323 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:04:21.323 DEBUG [src.node.docker_mananger] docker run -i -t -p 53316:53316 -p 53317:53317 -p 53318:53318 -p 53319:53319 -p 53320:53320 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53318 --rest-port=53316 --tcp-port=53317 --discv5-udp-port=53319 --rest-address=0.0.0.0 --nat=extip:172.18.144.229 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ae4a0eacda203bcf6d011523b1687cdce4ebdfeb6063ed118c8b7d5fef86bc37 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53320 --metrics-logging=true --lightpush=false --relay=true
2025-02-17 04:04:21.547 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.144.229 waku b4d526b593ad4856b7a96e782154620a0bbfea464f138aee0666a6430cbb3559
2025-02-17 04:04:21.596 DEBUG [src.node.docker_mananger] Container started with ID b4d526b593ad. Setting up logs at ./log/docker/receiving_node2_2025-02-17_04-04-20__917e2774-27a9-4a2b-8b2f-20cb7327cadc__wakuorg_nwaku:latest.log
2025-02-17 04:04:21.596 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53316
2025-02-17 04:04:21.596 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:04:22.598 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53316/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:22.600 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:04:22.601 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:04:22.601 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53316/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:22.603 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.144.229/tcp/53317/p2p/16Uiu2HAm5mZiVT5MZ3P8dbYchAhCrjrJQs6bQJ9X5Zi8xgj7Goj8","/ip4/172.18.144.229/tcp/53318/ws/p2p/16Uiu2HAm5mZiVT5MZ3P8dbYchAhCrjrJQs6bQJ9X5Zi8xgj7Goj8"],"enrUri":"enr:-L24QEbOEbJ7sw109O4e5JDs7Sih01Vji728It09csQTLjlLFR-vryTCnyDqxn9fu1mks1V2lfno2nksbuvODawYAfQCgmlkgnY0gmlwhKwSkOWKbXVsdGlhZGRyc5YACASsEpDlBtBFAAoErBKQ5QbQRt0DgnJzhQADAQAAiXNlY3AyNTZrMaECma1nJQk0YGGO5L-r75renIPKOH5KvdiBoAkqyyQKDzuDdGNwgtBFg3VkcILQR4V3YWt1MgE"}'
2025-02-17 04:04:22.603 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:04:22.604 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53316/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.19.154/tcp/17940/p2p/16Uiu2HAmFdt3wqr5z1TtuKpbNeeCgFxnPAfWqXG6BsPB3j7Ai7GA"]'
2025-02-17 04:04:22.639 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:22.651 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:04:22.652 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-17_04-04-20__917e2774-27a9-4a2b-8b2f-20cb7327cadc__wakuorg_nwaku:latest.log
2025-02-17 04:04:22.652 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:04:22.652 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:04:22.653 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:04:22.653 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.8.56
2025-02-17 04:04:22.654 DEBUG [src.node.docker_mananger] Generated ports ['22288', '22289', '22290', '22291', '22292']
2025-02-17 04:04:22.654 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:04:22.654 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:04:22.654 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:04:22.654 DEBUG [src.node.docker_mananger] docker run -i -t -p 22288:22288 -p 22289:22289 -p 22290:22290 -p 22291:22291 -p 22292:22292 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22290 --rest-port=22288 --tcp-port=22289 --discv5-udp-port=22291 --rest-address=0.0.0.0 --nat=extip:172.18.8.56 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b4e9bf28ddc1ae8aec6f68e2cfdfdd741cebfaca5a4ea5a9f0a70408e7600f02 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22292 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QBA9kamIrW9p4BF8i6D6RsNUpu_tZ7a1Jw4HJZv4awZOF6rexJ-PJ6FP1lM0LOYR8POZGMlR1G1HX1uEq8HsIrACgmlkgnY0gmlwhKwSE5qKbXVsdGlhZGRyc5YACASsEhOaBkYUAAoErBITmgZGFd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDLEpbjjSxwgf8X5hiSI7jDNLy_9zvXF4C2dbIDTMR43-DdGNwgkYUg3VkcIJGFoV3YWt1Mgk --lightpushnode=/ip4/172.18.19.154/tcp/17940/p2p/16Uiu2HAmFdt3wqr5z1TtuKpbNeeCgFxnPAfWqXG6BsPB3j7Ai7GA --lightpush=true --relay=false
2025-02-17 04:04:22.906 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.8.56 waku 65b4e26193816db16acd6f7f66414acc3b2997064deebe86282248533c9ef104
2025-02-17 04:04:22.955 DEBUG [src.node.docker_mananger] Container started with ID 65b4e2619381. Setting up logs at ./log/docker/lightpush_node1_2025-02-17_04-04-20__917e2774-27a9-4a2b-8b2f-20cb7327cadc__wakuorg_nwaku:latest.log
2025-02-17 04:04:22.955 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22288
2025-02-17 04:04:22.955 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:04:23.956 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22288/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:23.959 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:04:23.959 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:04:23.959 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22288/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:23.961 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.8.56/tcp/22289/p2p/16Uiu2HAmDLdJVEhD9zgbx7z66mnbu1L4XRSNnjpjjtRDfKPZF3iG","/ip4/172.18.8.56/tcp/22290/ws/p2p/16Uiu2HAmDLdJVEhD9zgbx7z66mnbu1L4XRSNnjpjjtRDfKPZF3iG"],"enrUri":"enr:-L24QNYl7u8P7gapsI7V2Teg2SQxWtVG7HBWJF3Rd4EVf334cYSb9xW8tt058CWlXECjqcq-06Pzksp-zOfDuBj62LMCgmlkgnY0gmlwhKwSCDiKbXVsdGlhZGRyc5YACASsEgg4BlcRAAoErBIIOAZXEt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDCidu1lgGzXazFItR-RwTd5nnXDsAnx-heFtGfnOyRxGDdGNwglcRg3VkcIJXE4V3YWt1Mgg"}'
2025-02-17 04:04:23.961 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:04:23.962 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22288/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.19.154/tcp/17940/p2p/16Uiu2HAmFdt3wqr5z1TtuKpbNeeCgFxnPAfWqXG6BsPB3j7Ai7GA"]'
2025-02-17 04:04:23.997 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:23.998 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22288/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.144.229/tcp/53317/p2p/16Uiu2HAm5mZiVT5MZ3P8dbYchAhCrjrJQs6bQJ9X5Zi8xgj7Goj8"]'
2025-02-17 04:04:24.028 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:24.029 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17939/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:04:24.038 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:24.039 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53316/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:04:24.046 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:24.047 DEBUG [src.node.waku_node] Stopping container with id 0cf1cb02bf28
2025-02-17 04:04:24.823 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:24.824 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22288/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739765064047489792}}'
2025-02-17 04:04:25.657 ERROR [src.node.docker_mananger] Max retries reached for container 0cf1cb02bf28. Exiting log stream.
2025-02-17 04:04:29.834 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:22288/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2025-02-17 04:04:29.835 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:04:29.836 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:04:29.836 DEBUG [src.node.waku_node] Stopping container with id b4d526b593ad
2025-02-17 04:04:31.338 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:31.338 DEBUG [src.node.waku_node] Stopping container with id 65b4e2619381
2025-02-17 04:04:32.151 ERROR [src.node.docker_mananger] Max retries reached for container b4d526b593ad. Exiting log stream.
2025-02-17 04:04:32.833 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:32.834 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:04:32.848 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:04:32.855 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:04:32.861 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
