2025-02-17 04:03:59.915 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:03:59.915 DEBUG [tests.conftest] Running test: test_get_store_messages_with_wrong_typo_content_topic with id: 2025-02-17_04-03-59__3378da20-0e88-4ffd-806d-935a68711ddd
2025-02-17 04:03:59.915 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:03:59.916 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-17 04:03:59.916 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-17 04:03:59.922 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:03:59.922 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-17_04-03-59__3378da20-0e88-4ffd-806d-935a68711ddd__wakuorg_nwaku:latest.log
2025-02-17 04:03:59.922 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:03:59.922 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:03:59.924 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:03:59.924 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.48.217
2025-02-17 04:03:59.924 DEBUG [src.node.docker_mananger] Generated ports ['10627', '10628', '10629', '10630', '10631']
2025-02-17 04:03:59.924 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:03:59.924 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:03:59.924 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:03:59.924 DEBUG [src.node.docker_mananger] docker run -i -t -p 10627:10627 -p 10628:10628 -p 10629:10629 -p 10630:10630 -p 10631:10631 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10629 --rest-port=10627 --tcp-port=10628 --discv5-udp-port=10630 --rest-address=0.0.0.0 --nat=extip:172.18.48.217 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=27d9e6dfeed86dd0ddecad6c49fbb5d74ce85dbd6809dccbbf654b16e0ca2a8d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10631 --metrics-logging=true --store=true --relay=true
2025-02-17 04:04:00.166 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.48.217 waku 32351cdfbecf382ff1cca4e9008ba49e76aa7af202081b061c5bb4488e2d41ac
2025-02-17 04:04:00.212 DEBUG [src.node.docker_mananger] Container started with ID 32351cdfbecf. Setting up logs at ./log/docker/publishing_node1_2025-02-17_04-03-59__3378da20-0e88-4ffd-806d-935a68711ddd__wakuorg_nwaku:latest.log
2025-02-17 04:04:00.214 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 10627
2025-02-17 04:04:00.215 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:04:00.711 ERROR [src.node.docker_mananger] Max retries reached for container db8adf5d8ebf. Exiting log stream.
2025-02-17 04:04:01.215 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10627/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:01.218 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:04:01.218 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:04:01.218 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10627/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:01.220 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.48.217/tcp/10628/p2p/16Uiu2HAm8uMj2UXd8RpKE42ah9JzjfxLsuJCJsC4AfUGpMgcmFPL","/ip4/172.18.48.217/tcp/10629/ws/p2p/16Uiu2HAm8uMj2UXd8RpKE42ah9JzjfxLsuJCJsC4AfUGpMgcmFPL"],"enrUri":"enr:-L24QD6IN1L1EW5LJCsR96Yv_2EocC1tPJZUwBfoXPVBpZRqENSuNqsomHGZcEnv_MAFs_BnStxknzEzrtkSY6rBWfgCgmlkgnY0gmlwhKwSMNmKbXVsdGlhZGRyc5YACASsEjDZBimEAAoErBIw2QYphd0DgnJzhQADAQAAiXNlY3AyNTZrMaECyD-NWWY_TH7-0dNDkGSs5yS060GnWuK5Im_XP9ls9_eDdGNwgimEg3VkcIIphoV3YWt1MgM"}'
2025-02-17 04:04:01.220 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:04:01.227 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:04:01.227 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-17_04-03-59__3378da20-0e88-4ffd-806d-935a68711ddd__wakuorg_nwaku:latest.log
2025-02-17 04:04:01.227 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:04:01.227 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:04:01.229 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:04:01.229 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.31.214
2025-02-17 04:04:01.229 DEBUG [src.node.docker_mananger] Generated ports ['61770', '61771', '61772', '61773', '61774']
2025-02-17 04:04:01.229 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:04:01.229 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:04:01.229 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:04:01.229 DEBUG [src.node.docker_mananger] docker run -i -t -p 61770:61770 -p 61771:61771 -p 61772:61772 -p 61773:61773 -p 61774:61774 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61772 --rest-port=61770 --tcp-port=61771 --discv5-udp-port=61773 --rest-address=0.0.0.0 --nat=extip:172.18.31.214 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=62db2041abda82c0cda32f5ed7ef2b4b9d25b946139307ac04ae489bbd0383ce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61774 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QD6IN1L1EW5LJCsR96Yv_2EocC1tPJZUwBfoXPVBpZRqENSuNqsomHGZcEnv_MAFs_BnStxknzEzrtkSY6rBWfgCgmlkgnY0gmlwhKwSMNmKbXVsdGlhZGRyc5YACASsEjDZBimEAAoErBIw2QYphd0DgnJzhQADAQAAiXNlY3AyNTZrMaECyD-NWWY_TH7-0dNDkGSs5yS060GnWuK5Im_XP9ls9_eDdGNwgimEg3VkcIIphoV3YWt1MgM --storenode=/ip4/172.18.48.217/tcp/10628/p2p/16Uiu2HAm8uMj2UXd8RpKE42ah9JzjfxLsuJCJsC4AfUGpMgcmFPL --store=true --relay=true
2025-02-17 04:04:01.451 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.31.214 waku 709d367310ce3ed07046c660e44372f2c86cc4afe495fdc208d9f06aa1a8fbf4
2025-02-17 04:04:01.502 DEBUG [src.node.docker_mananger] Container started with ID 709d367310ce. Setting up logs at ./log/docker/store_node1_2025-02-17_04-03-59__3378da20-0e88-4ffd-806d-935a68711ddd__wakuorg_nwaku:latest.log
2025-02-17 04:04:01.503 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61770
2025-02-17 04:04:01.503 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:04:02.503 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61770/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:02.506 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:04:02.506 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:04:02.506 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61770/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:02.508 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.31.214/tcp/61771/p2p/16Uiu2HAmJ6GEtuoHyVZpX26ayXLPo2PbrHDQjf61gHzaeYSYub8L","/ip4/172.18.31.214/tcp/61772/ws/p2p/16Uiu2HAmJ6GEtuoHyVZpX26ayXLPo2PbrHDQjf61gHzaeYSYub8L"],"enrUri":"enr:-L24QCTXMfwUOCB1hriv0Bkb7C1IPfUOPUPU6sMfKnBF3NBTfeIBjgr3Ud0MmXeM0dNbUynnjcAuJGqJhFbLu3aPFMoCgmlkgnY0gmlwhKwSH9aKbXVsdGlhZGRyc5YACASsEh_WBvFLAAoErBIf1gbxTN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDUMPr5SAwOribClWmri7BpVH0Z1UBnyUVxJLDyn5p62GDdGNwgvFLg3VkcILxTYV3YWt1MgM"}'
2025-02-17 04:04:02.509 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:04:02.509 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61770/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.48.217/tcp/10628/p2p/16Uiu2HAm8uMj2UXd8RpKE42ah9JzjfxLsuJCJsC4AfUGpMgcmFPL"]'
2025-02-17 04:04:02.512 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:02.512 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10627/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:04:02.514 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:02.515 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61770/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:04:02.517 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:02.517 DEBUG [tests.store.test_api_flags] Trying to publish msg with content topic /myapp/1/latest/protoo
2025-02-17 04:04:02.518 DEBUG [src.steps.store] Relaying message
2025-02-17 04:04:02.518 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10627/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/protoo", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:04:02.524 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:02.524 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:04:02.725 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61770/store/v3/messages?includeData=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fprotoo&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:02.728 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x4e29f5ea7dde1fbc7d51dff9a2d09ee442565fb6a2e1929ff45e2b565f03f639","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/protoo","version":0,"timestamp":1739765042518221824,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
2025-02-17 04:04:02.728 DEBUG [tests.store.test_api_flags] stored content topic is /myapp/1/latest/protoo
2025-02-17 04:04:02.730 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:04:02.731 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:04:02.731 DEBUG [src.node.waku_node] Stopping container with id 32351cdfbecf
2025-02-17 04:04:03.919 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:03.920 DEBUG [src.node.waku_node] Stopping container with id 709d367310ce
2025-02-17 04:04:04.749 ERROR [src.node.docker_mananger] Max retries reached for container 32351cdfbecf. Exiting log stream.
2025-02-17 04:04:05.411 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:05.413 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:04:05.423 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:04:05.428 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
