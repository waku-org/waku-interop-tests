2025-02-17 04:06:55.968 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:06:55.968 DEBUG [tests.conftest] Running test: test_store_with_wrong_url_content_topic with id: 2025-02-17_04-06-55__a0940597-7b7b-4b49-91bf-b570b808bb85
2025-02-17 04:06:55.969 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:06:55.969 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-17 04:06:55.969 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-17 04:06:55.975 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:06:55.976 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-17_04-06-55__a0940597-7b7b-4b49-91bf-b570b808bb85__wakuorg_nwaku:latest.log
2025-02-17 04:06:55.976 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:06:55.976 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:06:55.977 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:06:55.977 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.142.233
2025-02-17 04:06:55.978 DEBUG [src.node.docker_mananger] Generated ports ['16950', '16951', '16952', '16953', '16954']
2025-02-17 04:06:55.978 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:06:55.978 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:06:55.978 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:06:55.978 DEBUG [src.node.docker_mananger] docker run -i -t -p 16950:16950 -p 16951:16951 -p 16952:16952 -p 16953:16953 -p 16954:16954 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16952 --rest-port=16950 --tcp-port=16951 --discv5-udp-port=16953 --rest-address=0.0.0.0 --nat=extip:172.18.142.233 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2735eada80cbc5df66fb87e434965b65d2ac7335681c9f6be3eadcd6e5febbaa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16954 --metrics-logging=true --store=true --relay=true
2025-02-17 04:06:56.218 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.142.233 waku 8f901a6fa6f4a038619127a6370e2d7fbbd9fd61a5fbee7b6aa4b7cea243a12f
2025-02-17 04:06:56.270 DEBUG [src.node.docker_mananger] Container started with ID 8f901a6fa6f4. Setting up logs at ./log/docker/publishing_node1_2025-02-17_04-06-55__a0940597-7b7b-4b49-91bf-b570b808bb85__wakuorg_nwaku:latest.log
2025-02-17 04:06:56.272 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 16950
2025-02-17 04:06:56.273 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:06:56.766 ERROR [src.node.docker_mananger] Max retries reached for container 61515c4cf9bd. Exiting log stream.
2025-02-17 04:06:57.274 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16950/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:57.277 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:06:57.277 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:06:57.278 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16950/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:57.280 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.142.233/tcp/16951/p2p/16Uiu2HAmSphD7WvYtuaTu2hJDjFD59GfJZmzVU3W9daK9oTc7S7C","/ip4/172.18.142.233/tcp/16952/ws/p2p/16Uiu2HAmSphD7WvYtuaTu2hJDjFD59GfJZmzVU3W9daK9oTc7S7C"],"enrUri":"enr:-L24QPRG1JgBcJwH0sgFPE7z_HnIqvFyGJvrUcgsQKaCD5-cWOgsT2jd26yF3h-zY-sVJCbHqCGKEjava9voPIPcXG0CgmlkgnY0gmlwhKwSjumKbXVsdGlhZGRyc5YACASsEo7pBkI3AAoErBKO6QZCON0DgnJzhQADAQAAiXNlY3AyNTZrMaED0oALL4tmXPTXRgeKEqaawfwvwGQxEgFNt-E3CluVocuDdGNwgkI3g3VkcIJCOYV3YWt1MgM"}'
2025-02-17 04:06:57.280 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:06:57.287 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:06:57.287 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-17_04-06-55__a0940597-7b7b-4b49-91bf-b570b808bb85__wakuorg_nwaku:latest.log
2025-02-17 04:06:57.287 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:06:57.287 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:06:57.288 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:06:57.288 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.148.104
2025-02-17 04:06:57.288 DEBUG [src.node.docker_mananger] Generated ports ['15843', '15844', '15845', '15846', '15847']
2025-02-17 04:06:57.289 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:06:57.289 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:06:57.289 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:06:57.289 DEBUG [src.node.docker_mananger] docker run -i -t -p 15843:15843 -p 15844:15844 -p 15845:15845 -p 15846:15846 -p 15847:15847 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15845 --rest-port=15843 --tcp-port=15844 --discv5-udp-port=15846 --rest-address=0.0.0.0 --nat=extip:172.18.148.104 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=de1a1a3de9d29e9cb496d964e1a65b48eb1f09cfdf7bfd6dc7eeff6b5f7b52db --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15847 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QPRG1JgBcJwH0sgFPE7z_HnIqvFyGJvrUcgsQKaCD5-cWOgsT2jd26yF3h-zY-sVJCbHqCGKEjava9voPIPcXG0CgmlkgnY0gmlwhKwSjumKbXVsdGlhZGRyc5YACASsEo7pBkI3AAoErBKO6QZCON0DgnJzhQADAQAAiXNlY3AyNTZrMaED0oALL4tmXPTXRgeKEqaawfwvwGQxEgFNt-E3CluVocuDdGNwgkI3g3VkcIJCOYV3YWt1MgM --storenode=/ip4/172.18.142.233/tcp/16951/p2p/16Uiu2HAmSphD7WvYtuaTu2hJDjFD59GfJZmzVU3W9daK9oTc7S7C --store=true --relay=true
2025-02-17 04:06:57.525 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.148.104 waku 3e0224f8fb65ffd32ff9acb45feda5ef976c94fc74ab449a8cae446486a4ac4f
2025-02-17 04:06:57.572 DEBUG [src.node.docker_mananger] Container started with ID 3e0224f8fb65. Setting up logs at ./log/docker/store_node1_2025-02-17_04-06-55__a0940597-7b7b-4b49-91bf-b570b808bb85__wakuorg_nwaku:latest.log
2025-02-17 04:06:57.573 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15843
2025-02-17 04:06:57.574 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:06:58.574 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15843/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:58.577 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:06:58.577 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:06:58.577 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15843/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:58.579 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.148.104/tcp/15844/p2p/16Uiu2HAmCNrEJ6qXobrETqSAro8msDnjVmTcq6acWhf8N1txnPeL","/ip4/172.18.148.104/tcp/15845/ws/p2p/16Uiu2HAmCNrEJ6qXobrETqSAro8msDnjVmTcq6acWhf8N1txnPeL"],"enrUri":"enr:-L24QJj0j5lm3ysQ-2LbXJ6VBWTsOkSIXKPC7S6FUof4J2CbJjv5ihos2IvfecHf_vY3mnqN0tFRRsOvEGLEr74hh_oCgmlkgnY0gmlwhKwSlGiKbXVsdGlhZGRyc5YACASsEpRoBj3kAAoErBKUaAY95d0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-92Ga0Z8Af5-hOaikYjml5I1vlYA7hlMSLcf_osSt2WDdGNwgj3kg3VkcII95oV3YWt1MgM"}'
2025-02-17 04:06:58.580 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:06:58.580 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15843/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.142.233/tcp/16951/p2p/16Uiu2HAmSphD7WvYtuaTu2hJDjFD59GfJZmzVU3W9daK9oTc7S7C"]'
2025-02-17 04:06:58.582 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:58.583 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16950/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:06:58.585 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:58.585 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15843/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:06:58.587 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:58.588 DEBUG [src.steps.store] Relaying message
2025-02-17 04:06:58.588 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16950/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:58.595 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:58.595 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:06:58.796 DEBUG [src.steps.store] Relaying message
2025-02-17 04:06:58.796 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16950/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:58.802 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:58.803 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:06:59.003 DEBUG [src.steps.store] Relaying message
2025-02-17 04:06:59.003 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16950/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:59.009 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:59.010 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:06:59.210 DEBUG [src.steps.store] Relaying message
2025-02-17 04:06:59.210 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16950/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:59.215 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:59.216 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:06:59.417 DEBUG [src.steps.store] Relaying message
2025-02-17 04:06:59.417 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16950/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:59.422 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:59.422 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:06:59.623 DEBUG [src.steps.store] Relaying message
2025-02-17 04:06:59.623 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16950/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:59.629 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:59.630 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:06:59.831 DEBUG [src.steps.store] Relaying message
2025-02-17 04:06:59.831 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16950/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:59.836 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:59.837 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:07:00.038 DEBUG [src.steps.store] Relaying message
2025-02-17 04:07:00.038 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16950/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:07:00.044 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:07:00.044 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:07:00.245 DEBUG [tests.store.test_topics] trying to find stored messages with wrong content_topic =myapp/1/latest/proto
2025-02-17 04:07:00.246 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16950/store/v3/messages?includeData=true&contentTopics=myapp%2F1%2Flatest%2Fproto&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:00.249 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-17 04:07:00.249 DEBUG [tests.store.test_topics]  response for wrong url content topic is {'requestId': '', 'statusCode': 200, 'statusDesc': 'OK', 'messages': []}
2025-02-17 04:07:00.251 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:07:00.253 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:07:00.253 DEBUG [src.node.waku_node] Stopping container with id 8f901a6fa6f4
2025-02-17 04:07:00.788 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:07:00.788 DEBUG [src.node.waku_node] Stopping container with id 3e0224f8fb65
2025-02-17 04:07:01.599 ERROR [src.node.docker_mananger] Max retries reached for container 8f901a6fa6f4. Exiting log stream.
2025-02-17 04:07:02.310 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:07:02.312 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:07:02.322 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:07:02.329 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
