2025-02-17 04:07:15.006 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:07:15.007 DEBUG [tests.conftest] Running test: test_main_node_only_lightpush__peer_only_lightpush with id: 2025-02-17_04-07-15__3ef29e47-8589-4d0d-ae30-fd689d421527
2025-02-17 04:07:15.007 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:07:15.007 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-17 04:07:15.014 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:07:15.015 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-17_04-07-15__3ef29e47-8589-4d0d-ae30-fd689d421527__wakuorg_nwaku:latest.log
2025-02-17 04:07:15.015 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:07:15.015 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:07:15.016 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:07:15.017 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.144.25
2025-02-17 04:07:15.017 DEBUG [src.node.docker_mananger] Generated ports ['37224', '37225', '37226', '37227', '37228']
2025-02-17 04:07:15.017 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:07:15.017 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:07:15.017 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:07:15.017 DEBUG [src.node.docker_mananger] docker run -i -t -p 37224:37224 -p 37225:37225 -p 37226:37226 -p 37227:37227 -p 37228:37228 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37226 --rest-port=37224 --tcp-port=37225 --discv5-udp-port=37227 --rest-address=0.0.0.0 --nat=extip:172.18.144.25 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1a4c13dfc85216bf1a9b9f21cfa0dca95f11cb37a6fab9fe8927ae1aff5181af --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37228 --metrics-logging=true --lightpush=true --relay=false
2025-02-17 04:07:15.256 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.144.25 waku 1d0730d27a4f76c9f69d13fd551f87a0da4cb805727ca4dbfaec9f32360292bf
2025-02-17 04:07:15.312 DEBUG [src.node.docker_mananger] Container started with ID 1d0730d27a4f. Setting up logs at ./log/docker/receiving_node1_2025-02-17_04-07-15__3ef29e47-8589-4d0d-ae30-fd689d421527__wakuorg_nwaku:latest.log
2025-02-17 04:07:15.313 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37224
2025-02-17 04:07:15.313 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:07:15.808 ERROR [src.node.docker_mananger] Max retries reached for container 064c7c833ec9. Exiting log stream.
2025-02-17 04:07:16.314 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37224/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:16.317 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:07:16.317 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:07:16.317 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37224/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:16.319 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.144.25/tcp/37225/p2p/16Uiu2HAm72mCKreR3PV81db2pKHEck2YyMZhQEoDqzucdd2QVf3f","/ip4/172.18.144.25/tcp/37226/ws/p2p/16Uiu2HAm72mCKreR3PV81db2pKHEck2YyMZhQEoDqzucdd2QVf3f"],"enrUri":"enr:-L24QDeVWtCZQKC0Knbf0Xl7x8ELulsuIgWbdFTFlfjrg3v3Lo2DKLq9vtpZjaw726JzFQFnTWE3VtVaz3iMA2z11x8CgmlkgnY0gmlwhKwSkBmKbXVsdGlhZGRyc5YACASsEpAZBpFpAAoErBKQGQaRat0DgnJzhQADAQAAiXNlY3AyNTZrMaECrG3IR6bfqfYYG4t47UqkmCaXLGMGS3E-33pBTlEHfGKDdGNwgpFpg3VkcIKRa4V3YWt1Mgg"}'
2025-02-17 04:07:16.320 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:07:16.326 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:07:16.326 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-17_04-07-15__3ef29e47-8589-4d0d-ae30-fd689d421527__wakuorg_nwaku:latest.log
2025-02-17 04:07:16.327 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:07:16.327 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:07:16.328 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:07:16.328 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.133.56
2025-02-17 04:07:16.329 DEBUG [src.node.docker_mananger] Generated ports ['17704', '17705', '17706', '17707', '17708']
2025-02-17 04:07:16.329 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:07:16.329 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:07:16.329 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:07:16.329 DEBUG [src.node.docker_mananger] docker run -i -t -p 17704:17704 -p 17705:17705 -p 17706:17706 -p 17707:17707 -p 17708:17708 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17706 --rest-port=17704 --tcp-port=17705 --discv5-udp-port=17707 --rest-address=0.0.0.0 --nat=extip:172.18.133.56 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b35fcda41dad99ecb6d7d0d35ecfdfdacebdd7c198b03537ca3cbccbdca5f5ff --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17708 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QDeVWtCZQKC0Knbf0Xl7x8ELulsuIgWbdFTFlfjrg3v3Lo2DKLq9vtpZjaw726JzFQFnTWE3VtVaz3iMA2z11x8CgmlkgnY0gmlwhKwSkBmKbXVsdGlhZGRyc5YACASsEpAZBpFpAAoErBKQGQaRat0DgnJzhQADAQAAiXNlY3AyNTZrMaECrG3IR6bfqfYYG4t47UqkmCaXLGMGS3E-33pBTlEHfGKDdGNwgpFpg3VkcIKRa4V3YWt1Mgg --lightpushnode=/ip4/172.18.144.25/tcp/37225/p2p/16Uiu2HAm72mCKreR3PV81db2pKHEck2YyMZhQEoDqzucdd2QVf3f --lightpush=true --relay=false
2025-02-17 04:07:16.560 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.133.56 waku 284f6dcfba3ae26a44e3c11632e2f2b7aefb64b8a784478feb4a64e15ca942fb
2025-02-17 04:07:16.610 DEBUG [src.node.docker_mananger] Container started with ID 284f6dcfba3a. Setting up logs at ./log/docker/lightpush_node1_2025-02-17_04-07-15__3ef29e47-8589-4d0d-ae30-fd689d421527__wakuorg_nwaku:latest.log
2025-02-17 04:07:16.611 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17704
2025-02-17 04:07:16.611 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:07:17.611 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17704/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:17.614 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:07:17.615 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:07:17.615 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17704/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:17.617 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.133.56/tcp/17705/p2p/16Uiu2HAm6zjqNyEvaXvEKECZEf5TQAH1691giEaB1iCg4WeZtaJe","/ip4/172.18.133.56/tcp/17706/ws/p2p/16Uiu2HAm6zjqNyEvaXvEKECZEf5TQAH1691giEaB1iCg4WeZtaJe"],"enrUri":"enr:-L24QGThcNbCPRZMbyWHeFnDJPUhFeacivy-N3mizIwKvPH_dpsVXZKdcl9onToPNHaBpZx16J-4zNIw6ureY0XJKDgCgmlkgnY0gmlwhKwShTiKbXVsdGlhZGRyc5YACASsEoU4BkUpAAoErBKFOAZFKt0DgnJzhQADAQAAiXNlY3AyNTZrMaECq-kU6K7GfvJeSBW1S2ipAMtexx3aufKw_IiIR4M-S3uDdGNwgkUpg3VkcIJFK4V3YWt1Mgg"}'
2025-02-17 04:07:17.617 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:07:17.617 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17704/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.144.25/tcp/37225/p2p/16Uiu2HAm72mCKreR3PV81db2pKHEck2YyMZhQEoDqzucdd2QVf3f"]'
2025-02-17 04:07:17.653 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:07:17.654 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17704/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739765237654345216}}'
2025-02-17 04:07:17.678 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17704/lightpush/v1/message. Response content: b'Failed to request a message push: no waku relay found'
2025-02-17 04:07:17.679 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:07:17.680 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:07:17.680 DEBUG [src.node.waku_node] Stopping container with id 1d0730d27a4f
2025-02-17 04:07:18.573 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:07:18.574 DEBUG [src.node.waku_node] Stopping container with id 284f6dcfba3a
2025-02-17 04:07:19.387 ERROR [src.node.docker_mananger] Max retries reached for container 1d0730d27a4f. Exiting log stream.
2025-02-17 04:07:20.109 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:07:20.112 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:07:20.115 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:07:20.118 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
