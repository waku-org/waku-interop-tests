2025-02-17 04:02:22.574 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:02:22.575 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2025-02-17_04-02-22__ed3d115c-9a2d-4987-8ac8-30472e5407e9
2025-02-17 04:02:22.575 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:02:22.575 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-17 04:02:22.576 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-17 04:02:22.584 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:02:22.584 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_04-02-22__ed3d115c-9a2d-4987-8ac8-30472e5407e9__wakuorg_nwaku:latest.log
2025-02-17 04:02:22.590 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:02:22.590 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-17_04-02-22__ed3d115c-9a2d-4987-8ac8-30472e5407e9__wakuorg_nwaku:latest.log
2025-02-17 04:02:22.595 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:02:22.596 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-17_04-02-22__ed3d115c-9a2d-4987-8ac8-30472e5407e9__wakuorg_nwaku:latest.log
2025-02-17 04:02:22.596 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-17 04:02:22.596 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-17 04:02:22.597 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:02:22.597 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:02:22.666 DEBUG [src.node.docker_mananger] Network waku created
2025-02-17 04:02:22.666 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.53.142
2025-02-17 04:02:22.666 DEBUG [src.node.docker_mananger] Generated ports ['58711', '58712', '58713', '58714', '58715']
2025-02-17 04:02:22.667 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:02:22.667 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:02:22.667 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:02:22.667 DEBUG [src.node.docker_mananger] docker run -i -t -p 58711:58711 -p 58712:58712 -p 58713:58713 -p 58714:58714 -p 58715:58715 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58713 --rest-port=58711 --tcp-port=58712 --discv5-udp-port=58714 --rest-address=0.0.0.0 --nat=extip:172.18.53.142 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1a21d86bff8f6ea17ce20a39a65c5dab5766bccb8a0e91c7f7fbc4c1b78dc039 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58715 --metrics-logging=true --lightpush=true
2025-02-17 04:02:24.772 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.53.142 waku 33b4795d304d4cd83bd43bb0e5e1906a931501b672c85684f4f00fce8c422625
2025-02-17 04:02:24.828 DEBUG [src.node.docker_mananger] Container started with ID 33b4795d304d. Setting up logs at ./log/docker/node1_2025-02-17_04-02-22__ed3d115c-9a2d-4987-8ac8-30472e5407e9__wakuorg_nwaku:latest.log
2025-02-17 04:02:24.829 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58711
2025-02-17 04:02:24.829 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:02:25.830 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58711/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:02:25.833 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:02:25.833 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:02:25.833 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58711/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:02:25.835 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.53.142/tcp/58712/p2p/16Uiu2HAmDz2fnVV1XhcF9pV9LvmFVwdmJAP2xHx6YSPU8RNMFjHU","/ip4/172.18.53.142/tcp/58713/ws/p2p/16Uiu2HAmDz2fnVV1XhcF9pV9LvmFVwdmJAP2xHx6YSPU8RNMFjHU"],"enrUri":"enr:-L24QKDFhUXj_CRlaUcCbsYVleERM5SufHkA2M6zRkmubuIxYwllbuMkLOYK43uLC_Nqcq2Vc8k_3x3HXZqY-TcKtycCgmlkgnY0gmlwhKwSNY6KbXVsdGlhZGRyc5YACASsEjWOBuVYAAoErBI1jgblWd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDE7xYIgcn9oBcSI-q9l5kbiTsW9Gbqw5Rl7JaI3NCh7ODdGNwguVYg3VkcILlWoV3YWt1Mgk"}'
2025-02-17 04:02:25.836 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:02:25.836 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:02:25.836 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:02:25.837 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:02:25.838 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.114.19
2025-02-17 04:02:25.838 DEBUG [src.node.docker_mananger] Generated ports ['6956', '6957', '6958', '6959', '6960']
2025-02-17 04:02:25.838 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:02:25.838 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:02:25.838 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:02:25.838 DEBUG [src.node.docker_mananger] docker run -i -t -p 6956:6956 -p 6957:6957 -p 6958:6958 -p 6959:6959 -p 6960:6960 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6958 --rest-port=6956 --tcp-port=6957 --discv5-udp-port=6959 --rest-address=0.0.0.0 --nat=extip:172.18.114.19 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=acd253eddff72ed4fcc989f208e5dea5c2e5dd0815eded5ef8c47a74a50cb15e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6960 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QKDFhUXj_CRlaUcCbsYVleERM5SufHkA2M6zRkmubuIxYwllbuMkLOYK43uLC_Nqcq2Vc8k_3x3HXZqY-TcKtycCgmlkgnY0gmlwhKwSNY6KbXVsdGlhZGRyc5YACASsEjWOBuVYAAoErBI1jgblWd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDE7xYIgcn9oBcSI-q9l5kbiTsW9Gbqw5Rl7JaI3NCh7ODdGNwguVYg3VkcILlWoV3YWt1Mgk --lightpushnode=/ip4/172.18.53.142/tcp/58712/p2p/16Uiu2HAmDz2fnVV1XhcF9pV9LvmFVwdmJAP2xHx6YSPU8RNMFjHU
2025-02-17 04:02:26.070 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.114.19 waku 60023080cec7bb9354ebf13ba5424eec825a740408e9672da4a1dff4a15d5b6f
2025-02-17 04:02:26.122 DEBUG [src.node.docker_mananger] Container started with ID 60023080cec7. Setting up logs at ./log/docker/node2_2025-02-17_04-02-22__ed3d115c-9a2d-4987-8ac8-30472e5407e9__wakuorg_nwaku:latest.log
2025-02-17 04:02:26.123 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6956
2025-02-17 04:02:26.124 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:02:27.124 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6956/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:02:27.127 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:02:27.127 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:02:27.128 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6956/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:02:27.130 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.114.19/tcp/6957/p2p/16Uiu2HAm1qiuG5CpxnLhtBsb3kVxzFFABkyuxxpEw9sG7AHUNeCX","/ip4/172.18.114.19/tcp/6958/ws/p2p/16Uiu2HAm1qiuG5CpxnLhtBsb3kVxzFFABkyuxxpEw9sG7AHUNeCX"],"enrUri":"enr:-L24QEoP0pj_ndMY6z3Feknbg1i1CocipnBR32HcnhV-zCtHNB57HhMpBYgmSs5LD4oWnsiUrQTE3qr2wfpQKzCnSSUCgmlkgnY0gmlwhKwSchOKbXVsdGlhZGRyc5YACASsEnITBhstAAoErBJyEwYbLt0DgnJzhQADAQAAiXNlY3AyNTZrMaECX09dXkU9_MJ9f1JzOZeOy8XgjnKP6i1ZPPQLO6a1owiDdGNwghstg3VkcIIbL4V3YWt1Mgs"}'
2025-02-17 04:02:27.130 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:02:27.130 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:02:27.130 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:02:27.132 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:02:27.132 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.253.20
2025-02-17 04:02:27.132 DEBUG [src.node.docker_mananger] Generated ports ['4494', '4495', '4496', '4497', '4498']
2025-02-17 04:02:27.133 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:02:27.133 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:02:27.133 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:02:27.133 DEBUG [src.node.docker_mananger] docker run -i -t -p 4494:4494 -p 4495:4495 -p 4496:4496 -p 4497:4497 -p 4498:4498 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4496 --rest-port=4494 --tcp-port=4495 --discv5-udp-port=4497 --rest-address=0.0.0.0 --nat=extip:172.18.253.20 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eb08f8ffeacac2d6d0ae5ceebc15bd6fdcbf5c16ba0b7613e5101b259cd1e6ac --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4498 --metrics-logging=true --relay=false --storenode=/ip4/172.18.114.19/tcp/6957/p2p/16Uiu2HAm1qiuG5CpxnLhtBsb3kVxzFFABkyuxxpEw9sG7AHUNeCX --discv5-bootstrap-node=enr:-L24QEoP0pj_ndMY6z3Feknbg1i1CocipnBR32HcnhV-zCtHNB57HhMpBYgmSs5LD4oWnsiUrQTE3qr2wfpQKzCnSSUCgmlkgnY0gmlwhKwSchOKbXVsdGlhZGRyc5YACASsEnITBhstAAoErBJyEwYbLt0DgnJzhQADAQAAiXNlY3AyNTZrMaECX09dXkU9_MJ9f1JzOZeOy8XgjnKP6i1ZPPQLO6a1owiDdGNwghstg3VkcIIbL4V3YWt1Mgs
2025-02-17 04:02:27.358 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.253.20 waku 20fa1ac967717685c26d97bccb3650aa60cb1ec48e5448b52ef6f1ae2596d2ba
2025-02-17 04:02:27.411 DEBUG [src.node.docker_mananger] Container started with ID 20fa1ac96771. Setting up logs at ./log/docker/node3_2025-02-17_04-02-22__ed3d115c-9a2d-4987-8ac8-30472e5407e9__wakuorg_nwaku:latest.log
2025-02-17 04:02:27.411 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 4494
2025-02-17 04:02:27.412 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:02:28.413 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4494/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:02:28.416 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:02:28.416 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:02:28.416 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4494/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:02:28.418 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.253.20/tcp/4495/p2p/16Uiu2HAmSKnMiBw7CMdxoXnJfxh5JLmR4B7WpUVGUZaLmy9mz89y","/ip4/172.18.253.20/tcp/4496/ws/p2p/16Uiu2HAmSKnMiBw7CMdxoXnJfxh5JLmR4B7WpUVGUZaLmy9mz89y"],"enrUri":"enr:-L24QBZzcvNai_TrQKtLRDxNqI-lSyh71GCPJTjWHuHrqJX6NZEPpX80SN_bQiNcjqQuqXsIi9hjm33Ex6lbdSxXAv0CgmlkgnY0gmlwhKwS_RSKbXVsdGlhZGRyc5YACASsEv0UBhGPAAoErBL9FAYRkN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDyxgFd__MuJMbd-c6HuPiqL1Od3eHv-b5iJrN5ZzFPayDdGNwghGPg3VkcIIRkYV3YWt1MgA"}'
2025-02-17 04:02:28.418 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:02:28.418 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58711/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:02:28.422 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:02:28.423 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6956/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:02:28.428 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:02:28.430 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58711/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:02:28.433 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.114.19/tcp/6957/p2p/16Uiu2HAm1qiuG5CpxnLhtBsb3kVxzFFABkyuxxpEw9sG7AHUNeCX","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-17 04:02:28.434 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6956/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:02:28.436 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.53.142/tcp/58712/p2p/16Uiu2HAmDz2fnVV1XhcF9pV9LvmFVwdmJAP2xHx6YSPU8RNMFjHU","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
2025-02-17 04:02:28.436 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-17 04:02:58.437 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58711/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1739764978437290496}}'
2025-02-17 04:02:58.449 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:02:58.449 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:02:59.450 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-17 04:02:59.450 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4494/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:02:59.494 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"3b03edac7baaf5740e33","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x617a79cff4a0c3a7838fd5e1f20d08baa32964f2cddfec90b94e8a1896ec5261"}]}'
2025-02-17 04:02:59.504 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:02:59.505 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:02:59.505 DEBUG [src.node.waku_node] Stopping container with id 33b4795d304d
2025-02-17 04:03:00.409 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:03:00.409 DEBUG [src.node.waku_node] Stopping container with id 60023080cec7
2025-02-17 04:03:01.223 ERROR [src.node.docker_mananger] Max retries reached for container 33b4795d304d. Exiting log stream.
2025-02-17 04:03:01.703 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:03:01.703 DEBUG [src.node.waku_node] Stopping container with id 20fa1ac96771
2025-02-17 04:03:02.516 ERROR [src.node.docker_mananger] Max retries reached for container 60023080cec7. Exiting log stream.
2025-02-17 04:03:03.185 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:03:03.186 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:03:03.196 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:03:03.209 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:03:03.213 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
