2025-02-17 04:04:22.897 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:04:22.897 DEBUG [tests.conftest] Running test: test_message_light_pushed_on_different_pubsub_topic_is_not_retrieved with id: 2025-02-17_04-04-22__7ca7bf64-6b20-4de7-aa51-23343b9dbd4f
2025-02-17 04:04:22.898 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:04:22.898 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-17 04:04:22.904 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:04:22.904 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-17_04-04-22__7ca7bf64-6b20-4de7-aa51-23343b9dbd4f__wakuorg_nwaku:latest.log
2025-02-17 04:04:22.904 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:04:22.904 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:04:22.906 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:04:22.906 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.6.139
2025-02-17 04:04:22.906 DEBUG [src.node.docker_mananger] Generated ports ['9508', '9509', '9510', '9511', '9512']
2025-02-17 04:04:22.906 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:04:22.906 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:04:22.906 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:04:22.906 DEBUG [src.node.docker_mananger] docker run -i -t -p 9508:9508 -p 9509:9509 -p 9510:9510 -p 9511:9511 -p 9512:9512 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9510 --rest-port=9508 --tcp-port=9509 --discv5-udp-port=9511 --rest-address=0.0.0.0 --nat=extip:172.18.6.139 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=847c013aa26aaed8ae2c6a68bf35dc2bcfc6ffb4551d1366381feb2ced1df0e9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9512 --metrics-logging=true --lightpush=true --relay=true
2025-02-17 04:04:23.139 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.6.139 waku 70437f99cb01259bf9f3ed42081a4923a1512fc39dd23ccb68e657a957a8b795
2025-02-17 04:04:23.195 DEBUG [src.node.docker_mananger] Container started with ID 70437f99cb01. Setting up logs at ./log/docker/receiving_node1_2025-02-17_04-04-22__7ca7bf64-6b20-4de7-aa51-23343b9dbd4f__wakuorg_nwaku:latest.log
2025-02-17 04:04:23.196 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9508
2025-02-17 04:04:23.196 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:04:23.704 ERROR [src.node.docker_mananger] Max retries reached for container c3a7226bde4e. Exiting log stream.
2025-02-17 04:04:24.197 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9508/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:24.200 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:04:24.200 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:04:24.200 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9508/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:24.202 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.6.139/tcp/9509/p2p/16Uiu2HAmSFJG7FR4WunHR2We6nrkbb42bjeKA6rMxU1h2Xj6fBDa","/ip4/172.18.6.139/tcp/9510/ws/p2p/16Uiu2HAmSFJG7FR4WunHR2We6nrkbb42bjeKA6rMxU1h2Xj6fBDa"],"enrUri":"enr:-L24QPRP9em46rRk4Cg3BFDl0SM5V1w_Pq4etq7wspmMUgJsFn7EHuZoLJpLqWgZ_jtLlNrTbPZkFKfFZ1WQd-x1I8YCgmlkgnY0gmlwhKwSBouKbXVsdGlhZGRyc5YACASsEgaLBiUlAAoErBIGiwYlJt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDyfHt4Hxfvrlg8chjY7htOflAFXexhl9JvpnOnbG0p8GDdGNwgiUlg3VkcIIlJ4V3YWt1Mgk"}'
2025-02-17 04:04:24.203 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:04:24.209 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:04:24.209 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-17_04-04-22__7ca7bf64-6b20-4de7-aa51-23343b9dbd4f__wakuorg_nwaku:latest.log
2025-02-17 04:04:24.209 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:04:24.209 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:04:24.211 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:04:24.211 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.232.138
2025-02-17 04:04:24.211 DEBUG [src.node.docker_mananger] Generated ports ['37449', '37450', '37451', '37452', '37453']
2025-02-17 04:04:24.211 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:04:24.211 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:04:24.211 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:04:24.211 DEBUG [src.node.docker_mananger] docker run -i -t -p 37449:37449 -p 37450:37450 -p 37451:37451 -p 37452:37452 -p 37453:37453 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37451 --rest-port=37449 --tcp-port=37450 --discv5-udp-port=37452 --rest-address=0.0.0.0 --nat=extip:172.18.232.138 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ea65f53da2ad2ee6b4571e8fc4bc025baad0e080dfae1fafb5bb61102c7974b4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37453 --metrics-logging=true --lightpush=false --relay=true
2025-02-17 04:04:24.435 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.232.138 waku b659a7c9f3c2bb2f4cc5ad4d4fb66d81e61fecdfbd49f6093d0d659bec51d8f8
2025-02-17 04:04:24.491 DEBUG [src.node.docker_mananger] Container started with ID b659a7c9f3c2. Setting up logs at ./log/docker/receiving_node2_2025-02-17_04-04-22__7ca7bf64-6b20-4de7-aa51-23343b9dbd4f__wakuorg_nwaku:latest.log
2025-02-17 04:04:24.491 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37449
2025-02-17 04:04:24.491 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:04:25.492 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37449/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:25.494 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:04:25.495 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:04:25.495 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37449/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:25.497 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.232.138/tcp/37450/p2p/16Uiu2HAkxa8XyaMQe6DRUD8qa3edEnNvgZbjv2Z78Vt9w16cfg6A","/ip4/172.18.232.138/tcp/37451/ws/p2p/16Uiu2HAkxa8XyaMQe6DRUD8qa3edEnNvgZbjv2Z78Vt9w16cfg6A"],"enrUri":"enr:-L24QCpa4yPmYNXEJXh4nevRT8CVRrXe1DIRF31k4nja1HpMDlwiqFXuoj8ixbMGn_X0Bd_k8VAWuIeGDHUGpqIKszQCgmlkgnY0gmlwhKwS6IqKbXVsdGlhZGRyc5YACASsEuiKBpJKAAoErBLoigaSS90DgnJzhQADAQAAiXNlY3AyNTZrMaECLr27ojqxclXpSIxfFUZ2ALKMcNHndujyiQ6BPvq_TeeDdGNwgpJKg3VkcIKSTIV3YWt1MgE"}'
2025-02-17 04:04:25.497 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:04:25.497 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37449/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.6.139/tcp/9509/p2p/16Uiu2HAmSFJG7FR4WunHR2We6nrkbb42bjeKA6rMxU1h2Xj6fBDa"]'
2025-02-17 04:04:25.536 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:25.544 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:04:25.545 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-17_04-04-22__7ca7bf64-6b20-4de7-aa51-23343b9dbd4f__wakuorg_nwaku:latest.log
2025-02-17 04:04:25.545 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:04:25.545 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:04:25.546 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:04:25.546 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.80.67
2025-02-17 04:04:25.547 DEBUG [src.node.docker_mananger] Generated ports ['51017', '51018', '51019', '51020', '51021']
2025-02-17 04:04:25.547 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:04:25.547 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:04:25.547 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:04:25.547 DEBUG [src.node.docker_mananger] docker run -i -t -p 51017:51017 -p 51018:51018 -p 51019:51019 -p 51020:51020 -p 51021:51021 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51019 --rest-port=51017 --tcp-port=51018 --discv5-udp-port=51020 --rest-address=0.0.0.0 --nat=extip:172.18.80.67 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dae32f7fa0dbed1db9b2d3cdd5e8ea851082deedcfacb040ce1f8e22b26c77fb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51021 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QPRP9em46rRk4Cg3BFDl0SM5V1w_Pq4etq7wspmMUgJsFn7EHuZoLJpLqWgZ_jtLlNrTbPZkFKfFZ1WQd-x1I8YCgmlkgnY0gmlwhKwSBouKbXVsdGlhZGRyc5YACASsEgaLBiUlAAoErBIGiwYlJt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDyfHt4Hxfvrlg8chjY7htOflAFXexhl9JvpnOnbG0p8GDdGNwgiUlg3VkcIIlJ4V3YWt1Mgk --lightpushnode=/ip4/172.18.6.139/tcp/9509/p2p/16Uiu2HAmSFJG7FR4WunHR2We6nrkbb42bjeKA6rMxU1h2Xj6fBDa --lightpush=true --relay=false
2025-02-17 04:04:25.782 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.80.67 waku cb754475181c6655211c2b91c868dad9ac40da6e268c137e05f40d0c2ee30ac2
2025-02-17 04:04:25.831 DEBUG [src.node.docker_mananger] Container started with ID cb754475181c. Setting up logs at ./log/docker/lightpush_node1_2025-02-17_04-04-22__7ca7bf64-6b20-4de7-aa51-23343b9dbd4f__wakuorg_nwaku:latest.log
2025-02-17 04:04:25.832 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 51017
2025-02-17 04:04:25.832 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:04:26.833 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51017/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:26.836 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:04:26.836 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:04:26.836 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51017/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:26.838 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.80.67/tcp/51018/p2p/16Uiu2HAmNJbqGR3UhUa5Mjn67m37R97urXVuBy8sjpxZBczrjUjj","/ip4/172.18.80.67/tcp/51019/ws/p2p/16Uiu2HAmNJbqGR3UhUa5Mjn67m37R97urXVuBy8sjpxZBczrjUjj"],"enrUri":"enr:-L24QNYhckZa2kwRNBdIgySnmBGib3zmjQ-l9yVDLbAqFRUvHzpsvwr7WUXARimGnxw7bcGnr_m5eGYkmQQ9fd4De4ICgmlkgnY0gmlwhKwSUEOKbXVsdGlhZGRyc5YACASsElBDBsdKAAoErBJQQwbHS90DgnJzhQADAQAAiXNlY3AyNTZrMaEDj1vK1E0DnqfO-9sCUi1dy6lF4OTEV4Gk11Jry3917XqDdGNwgsdKg3VkcILHTIV3YWt1Mgg"}'
2025-02-17 04:04:26.838 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:04:26.839 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51017/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.6.139/tcp/9509/p2p/16Uiu2HAmSFJG7FR4WunHR2We6nrkbb42bjeKA6rMxU1h2Xj6fBDa"]'
2025-02-17 04:04:26.871 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:26.873 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51017/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.232.138/tcp/37450/p2p/16Uiu2HAkxa8XyaMQe6DRUD8qa3edEnNvgZbjv2Z78Vt9w16cfg6A"]'
2025-02-17 04:04:26.900 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:26.902 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9508/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:04:26.911 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:26.915 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37449/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:04:26.918 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:26.919 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9508/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
2025-02-17 04:04:26.926 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:26.927 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37449/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
2025-02-17 04:04:26.940 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:26.941 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51017/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739765066941868544}}'
2025-02-17 04:04:26.952 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:26.952 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 04:04:27.053 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9508/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:27.056 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-17 04:04:27.057 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:04:27.058 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:04:27.058 DEBUG [src.node.waku_node] Stopping container with id 70437f99cb01
2025-02-17 04:04:27.674 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:27.675 DEBUG [src.node.waku_node] Stopping container with id b659a7c9f3c2
2025-02-17 04:04:28.486 ERROR [src.node.docker_mananger] Max retries reached for container 70437f99cb01. Exiting log stream.
2025-02-17 04:04:29.195 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:29.196 DEBUG [src.node.waku_node] Stopping container with id cb754475181c
2025-02-17 04:04:30.007 ERROR [src.node.docker_mananger] Max retries reached for container b659a7c9f3c2. Exiting log stream.
2025-02-17 04:04:30.676 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:30.677 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:04:30.686 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:04:30.696 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:04:30.702 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
