2025-02-17 04:03:17.605 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:03:17.605 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2025-02-17_04-03-17__2fc8b551-a89c-4abe-9f83-0595fe142665
2025-02-17 04:03:17.606 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:03:17.606 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-17 04:03:17.606 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-17 04:03:17.615 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:03:17.615 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_04-03-17__2fc8b551-a89c-4abe-9f83-0595fe142665__wakuorg_nwaku:latest.log
2025-02-17 04:03:17.620 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:03:17.620 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-17_04-03-17__2fc8b551-a89c-4abe-9f83-0595fe142665__wakuorg_nwaku:latest.log
2025-02-17 04:03:17.626 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:03:17.626 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-17_04-03-17__2fc8b551-a89c-4abe-9f83-0595fe142665__wakuorg_nwaku:latest.log
2025-02-17 04:03:17.626 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-17 04:03:17.626 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-17 04:03:17.627 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:03:17.627 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:03:17.699 DEBUG [src.node.docker_mananger] Network waku created
2025-02-17 04:03:17.699 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.88.247
2025-02-17 04:03:17.699 DEBUG [src.node.docker_mananger] Generated ports ['22859', '22860', '22861', '22862', '22863']
2025-02-17 04:03:17.700 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:03:17.700 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:03:17.700 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:03:17.700 DEBUG [src.node.docker_mananger] docker run -i -t -p 22859:22859 -p 22860:22860 -p 22861:22861 -p 22862:22862 -p 22863:22863 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22861 --rest-port=22859 --tcp-port=22860 --discv5-udp-port=22862 --rest-address=0.0.0.0 --nat=extip:172.18.88.247 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1aec08ffb6c1a7bff6bf8c6f9b83ce5a6dc09ab8c6dec8c1a40daa9aebe17bc7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22863 --metrics-logging=true --relay=true
2025-02-17 04:03:19.806 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.88.247 waku 8038ae6237f2035ed22644824748935c0ec74d38084e7d88be3aae4589319eed
2025-02-17 04:03:19.852 DEBUG [src.node.docker_mananger] Container started with ID 8038ae6237f2. Setting up logs at ./log/docker/node1_2025-02-17_04-03-17__2fc8b551-a89c-4abe-9f83-0595fe142665__wakuorg_nwaku:latest.log
2025-02-17 04:03:19.853 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22859
2025-02-17 04:03:19.853 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:03:20.854 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22859/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:20.857 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:03:20.857 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:03:20.857 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22859/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:20.860 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.88.247/tcp/22860/p2p/16Uiu2HAmBcvgqqTyiUH9x4oUBgfjWQJScRceCUaswoF2vafiHax8","/ip4/172.18.88.247/tcp/22861/ws/p2p/16Uiu2HAmBcvgqqTyiUH9x4oUBgfjWQJScRceCUaswoF2vafiHax8"],"enrUri":"enr:-L24QIy0HqApl2YyS9_oVTyaFhUFqNWLBsA9MvX2mMJmlE-rCpe8Pl0X6zs9DFW55QoXq747hYKJsbYehk_Qrp6l_IUCgmlkgnY0gmlwhKwSWPeKbXVsdGlhZGRyc5YACASsElj3BllMAAoErBJY9wZZTd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC8J0Cg8isNbQbpHbm7iNeJ_58YrxzOvSNuGmfzC_WfbGDdGNwgllMg3VkcIJZToV3YWt1MgE"}'
2025-02-17 04:03:20.860 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:03:20.860 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:03:20.860 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:03:20.862 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:03:20.862 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.3.253
2025-02-17 04:03:20.862 DEBUG [src.node.docker_mananger] Generated ports ['1039', '1040', '1041', '1042', '1043']
2025-02-17 04:03:20.862 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:03:20.862 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:03:20.862 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:03:20.863 DEBUG [src.node.docker_mananger] docker run -i -t -p 1039:1039 -p 1040:1040 -p 1041:1041 -p 1042:1042 -p 1043:1043 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1041 --rest-port=1039 --tcp-port=1040 --discv5-udp-port=1042 --rest-address=0.0.0.0 --nat=extip:172.18.3.253 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=de7117bfcc93ba531ae8ef14ae5dbd1b3aa63becb1ff113167eb5afe9efe2afc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1043 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QIy0HqApl2YyS9_oVTyaFhUFqNWLBsA9MvX2mMJmlE-rCpe8Pl0X6zs9DFW55QoXq747hYKJsbYehk_Qrp6l_IUCgmlkgnY0gmlwhKwSWPeKbXVsdGlhZGRyc5YACASsElj3BllMAAoErBJY9wZZTd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC8J0Cg8isNbQbpHbm7iNeJ_58YrxzOvSNuGmfzC_WfbGDdGNwgllMg3VkcIJZToV3YWt1MgE
2025-02-17 04:03:21.094 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.3.253 waku 4c9e6e316f098d4ca8ded1af60b554ee049ab43bdc057904f5ddd7c206492fac
2025-02-17 04:03:21.142 DEBUG [src.node.docker_mananger] Container started with ID 4c9e6e316f09. Setting up logs at ./log/docker/node2_2025-02-17_04-03-17__2fc8b551-a89c-4abe-9f83-0595fe142665__wakuorg_nwaku:latest.log
2025-02-17 04:03:21.143 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 1039
2025-02-17 04:03:21.143 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:03:22.144 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1039/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:22.146 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:03:22.147 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:03:22.147 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1039/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:22.149 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.3.253/tcp/1040/p2p/16Uiu2HAmAZ9C86bpH3zWQ6S8Dr9t7L8mhxD8msTnzSVFmk8YrQ9Z","/ip4/172.18.3.253/tcp/1041/ws/p2p/16Uiu2HAmAZ9C86bpH3zWQ6S8Dr9t7L8mhxD8msTnzSVFmk8YrQ9Z"],"enrUri":"enr:-L24QGm47-bybQC3R_QT9-mSsQPfsvpDg065j7fde2xABtKRY_LL9lcKXumYjE7ecTUdXx-BLQpIH3o3Pz5-AgBDKLwCgmlkgnY0gmlwhKwSA_2KbXVsdGlhZGRyc5YACASsEgP9BgQQAAoErBID_QYEEd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC4MkjkFoAM8Zm95htKVAYWVMmnxUkGuwN0ODoqECK2uSDdGNwggQQg3VkcIIEEoV3YWt1MgM"}'
2025-02-17 04:03:22.149 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:03:22.149 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:03:22.149 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:03:22.151 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:03:22.151 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.170.8
2025-02-17 04:03:22.151 DEBUG [src.node.docker_mananger] Generated ports ['60663', '60664', '60665', '60666', '60667']
2025-02-17 04:03:22.151 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:03:22.152 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:03:22.152 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:03:22.152 DEBUG [src.node.docker_mananger] docker run -i -t -p 60663:60663 -p 60664:60664 -p 60665:60665 -p 60666:60666 -p 60667:60667 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60665 --rest-port=60663 --tcp-port=60664 --discv5-udp-port=60666 --rest-address=0.0.0.0 --nat=extip:172.18.170.8 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a457995b9ceddf144619df1adbae1f6b03eee5c8a305e2dca9c2460ab4e9ef92 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60667 --metrics-logging=true --relay=false --storenode=/ip4/172.18.3.253/tcp/1040/p2p/16Uiu2HAmAZ9C86bpH3zWQ6S8Dr9t7L8mhxD8msTnzSVFmk8YrQ9Z --discv5-bootstrap-node=enr:-L24QGm47-bybQC3R_QT9-mSsQPfsvpDg065j7fde2xABtKRY_LL9lcKXumYjE7ecTUdXx-BLQpIH3o3Pz5-AgBDKLwCgmlkgnY0gmlwhKwSA_2KbXVsdGlhZGRyc5YACASsEgP9BgQQAAoErBID_QYEEd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC4MkjkFoAM8Zm95htKVAYWVMmnxUkGuwN0ODoqECK2uSDdGNwggQQg3VkcIIEEoV3YWt1MgM
2025-02-17 04:03:22.413 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.170.8 waku 3fa5524877b25676b5b05fa441c3da6566a306c564b5ff9019fa5aa367e6cca5
2025-02-17 04:03:22.462 DEBUG [src.node.docker_mananger] Container started with ID 3fa5524877b2. Setting up logs at ./log/docker/node3_2025-02-17_04-03-17__2fc8b551-a89c-4abe-9f83-0595fe142665__wakuorg_nwaku:latest.log
2025-02-17 04:03:22.463 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 60663
2025-02-17 04:03:22.463 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:03:23.463 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60663/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:23.466 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:03:23.466 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:03:23.467 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60663/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:23.469 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.170.8/tcp/60664/p2p/16Uiu2HAm6mRvxMnR1a6HEq6cH4o3e8NYcSxfpDHxd8W1MpSGLt8g","/ip4/172.18.170.8/tcp/60665/ws/p2p/16Uiu2HAm6mRvxMnR1a6HEq6cH4o3e8NYcSxfpDHxd8W1MpSGLt8g"],"enrUri":"enr:-L24QL_rsUJiJDb2QXmpMSiklCA2HpjXjacQgOmnZWbeqX5xDlzvczHloHgJCY-ZoC3fViEug58FN8Tg2gt_3bpT0-ACgmlkgnY0gmlwhKwSqgiKbXVsdGlhZGRyc5YACASsEqoIBuz4AAoErBKqCAbs-d0DgnJzhQADAQAAiXNlY3AyNTZrMaECqIBJhUIFCirLkI3hAxkLdbydo9G7s0mseWUyhcmHxzGDdGNwguz4g3VkcILs-oV3YWt1MgA"}'
2025-02-17 04:03:23.469 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:03:23.469 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22859/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:03:23.473 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:03:23.474 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1039/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:03:23.479 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:03:23.480 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22859/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:23.484 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.3.253/tcp/1040/p2p/16Uiu2HAmAZ9C86bpH3zWQ6S8Dr9t7L8mhxD8msTnzSVFmk8YrQ9Z","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-17 04:03:23.484 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1039/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:23.486 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.88.247/tcp/22860/p2p/16Uiu2HAmBcvgqqTyiUH9x4oUBgfjWQJScRceCUaswoF2vafiHax8","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
2025-02-17 04:03:23.487 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-17 04:03:53.487 DEBUG [src.steps.store] Relaying message
2025-02-17 04:03:53.488 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22859/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:03:53.493 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:03:53.493 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:03:53.694 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-17 04:03:53.694 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60663/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:53.736 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"05d54e9f3a3d3d9d2fc3","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x3e1a0a9969d42295f01890ac3cd5e78c98591f2544acc900fe7264648793835a"}]}'
2025-02-17 04:03:53.743 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:03:53.743 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:03:53.744 DEBUG [src.node.waku_node] Stopping container with id 8038ae6237f2
2025-02-17 04:03:54.430 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:03:54.431 DEBUG [src.node.waku_node] Stopping container with id 4c9e6e316f09
2025-02-17 04:03:55.273 ERROR [src.node.docker_mananger] Max retries reached for container 8038ae6237f2. Exiting log stream.
2025-02-17 04:03:55.345 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:03:55.346 DEBUG [src.node.waku_node] Stopping container with id 3fa5524877b2
2025-02-17 04:03:55.954 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:03:55.955 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:03:55.973 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:03:55.988 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:03:55.992 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
