2025-02-17 04:03:38.831 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:03:38.831 DEBUG [tests.conftest] Running test: test_light_push_with_missing_content_topic with id: 2025-02-17_04-03-38__606f0db9-1ed1-4866-ad26-cf797a8afd9f
2025-02-17 04:03:38.831 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:03:38.832 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-17 04:03:38.838 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:03:38.839 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-17_04-03-38__606f0db9-1ed1-4866-ad26-cf797a8afd9f__wakuorg_nwaku:latest.log
2025-02-17 04:03:38.839 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:03:38.839 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:03:38.840 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:03:38.840 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.156.217
2025-02-17 04:03:38.841 DEBUG [src.node.docker_mananger] Generated ports ['7066', '7067', '7068', '7069', '7070']
2025-02-17 04:03:38.841 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:03:38.841 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:03:38.841 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:03:38.841 DEBUG [src.node.docker_mananger] docker run -i -t -p 7066:7066 -p 7067:7067 -p 7068:7068 -p 7069:7069 -p 7070:7070 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7068 --rest-port=7066 --tcp-port=7067 --discv5-udp-port=7069 --rest-address=0.0.0.0 --nat=extip:172.18.156.217 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=df02e70d7833bc5eede4554fa2dad53fc64a334feb127d8ae0083caff4b3d02b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7070 --metrics-logging=true --lightpush=true --relay=true
2025-02-17 04:03:39.072 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.156.217 waku 84c177343f051178d828238a4771e99388afdabe55dc7a227a162719d7ec5904
2025-02-17 04:03:39.123 DEBUG [src.node.docker_mananger] Container started with ID 84c177343f05. Setting up logs at ./log/docker/receiving_node1_2025-02-17_04-03-38__606f0db9-1ed1-4866-ad26-cf797a8afd9f__wakuorg_nwaku:latest.log
2025-02-17 04:03:39.123 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7066
2025-02-17 04:03:39.124 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:03:39.601 ERROR [src.node.docker_mananger] Max retries reached for container 42020f7c710d. Exiting log stream.
2025-02-17 04:03:40.125 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7066/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:40.128 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:03:40.128 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:03:40.128 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7066/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:40.131 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.156.217/tcp/7067/p2p/16Uiu2HAkyXt6D5eo1szxeTUYUZe2V5ZbVRKTyDovCEhFXkiaqRHJ","/ip4/172.18.156.217/tcp/7068/ws/p2p/16Uiu2HAkyXt6D5eo1szxeTUYUZe2V5ZbVRKTyDovCEhFXkiaqRHJ"],"enrUri":"enr:-L24QEF2VymhhseNq_fqaJPazMjrsCgxzw436E6iaWL4aFzmfLGumf6cwS8JZjUka2QDQlyeXW-7h49ehumpJbH4DZICgmlkgnY0gmlwhKwSnNmKbXVsdGlhZGRyc5YACASsEpzZBhubAAoErBKc2QYbnN0DgnJzhQADAQAAiXNlY3AyNTZrMaECPQXtEzF4uX73Fw0zryxQrdRmR0_cDs9rTefE8qZqbgGDdGNwghubg3VkcIIbnYV3YWt1Mgk"}'
2025-02-17 04:03:40.131 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:03:40.137 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:03:40.138 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-17_04-03-38__606f0db9-1ed1-4866-ad26-cf797a8afd9f__wakuorg_nwaku:latest.log
2025-02-17 04:03:40.138 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:03:40.138 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:03:40.139 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:03:40.139 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.113.15
2025-02-17 04:03:40.139 DEBUG [src.node.docker_mananger] Generated ports ['31379', '31380', '31381', '31382', '31383']
2025-02-17 04:03:40.140 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:03:40.140 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:03:40.140 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:03:40.140 DEBUG [src.node.docker_mananger] docker run -i -t -p 31379:31379 -p 31380:31380 -p 31381:31381 -p 31382:31382 -p 31383:31383 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31381 --rest-port=31379 --tcp-port=31380 --discv5-udp-port=31382 --rest-address=0.0.0.0 --nat=extip:172.18.113.15 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1be376250be229ecb1caf5dedc5bbd3a503c7345c5d794ed88d03249b91aeb72 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31383 --metrics-logging=true --lightpush=false --relay=true
2025-02-17 04:03:40.380 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.113.15 waku 8617cc1ee69eb468941f230ddad0b1713be2ab182d307e9f5a9bc6c7a6cbecbc
2025-02-17 04:03:40.426 DEBUG [src.node.docker_mananger] Container started with ID 8617cc1ee69e. Setting up logs at ./log/docker/receiving_node2_2025-02-17_04-03-38__606f0db9-1ed1-4866-ad26-cf797a8afd9f__wakuorg_nwaku:latest.log
2025-02-17 04:03:40.426 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 31379
2025-02-17 04:03:40.426 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:03:41.427 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31379/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:41.429 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:03:41.430 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:03:41.430 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31379/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:41.432 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.113.15/tcp/31380/p2p/16Uiu2HAmAq6jPTFW5WrYMSNEVbMwP2kwMDoAJ3NHddXkcx9852Ss","/ip4/172.18.113.15/tcp/31381/ws/p2p/16Uiu2HAmAq6jPTFW5WrYMSNEVbMwP2kwMDoAJ3NHddXkcx9852Ss"],"enrUri":"enr:-L24QAIJB39ifxEr4j6ICtpvQm3S4L-cs-BQ8Z3vTf0cADQLdCMTKhlKyQdLqdYnPRp2uL46xFodyw1Sm54qYJLssJ0CgmlkgnY0gmlwhKwScQ-KbXVsdGlhZGRyc5YACASsEnEPBnqUAAoErBJxDwZ6ld0DgnJzhQADAQAAiXNlY3AyNTZrMaEC5N-mNdMbCYuslC2-SmnFGt8DbuR73SuCCWUn8f3HElCDdGNwgnqUg3VkcIJ6loV3YWt1MgE"}'
2025-02-17 04:03:41.432 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:03:41.432 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31379/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.156.217/tcp/7067/p2p/16Uiu2HAkyXt6D5eo1szxeTUYUZe2V5ZbVRKTyDovCEhFXkiaqRHJ"]'
2025-02-17 04:03:41.469 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:03:41.479 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:03:41.479 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-17_04-03-38__606f0db9-1ed1-4866-ad26-cf797a8afd9f__wakuorg_nwaku:latest.log
2025-02-17 04:03:41.479 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:03:41.479 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:03:41.481 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:03:41.481 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.206.14
2025-02-17 04:03:41.481 DEBUG [src.node.docker_mananger] Generated ports ['38274', '38275', '38276', '38277', '38278']
2025-02-17 04:03:41.482 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:03:41.482 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:03:41.482 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:03:41.482 DEBUG [src.node.docker_mananger] docker run -i -t -p 38274:38274 -p 38275:38275 -p 38276:38276 -p 38277:38277 -p 38278:38278 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38276 --rest-port=38274 --tcp-port=38275 --discv5-udp-port=38277 --rest-address=0.0.0.0 --nat=extip:172.18.206.14 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f2a80cb74c41d703fe3ced857b1c701ad4dfb776aee3cff9da1aa1a5d26898fd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38278 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QEF2VymhhseNq_fqaJPazMjrsCgxzw436E6iaWL4aFzmfLGumf6cwS8JZjUka2QDQlyeXW-7h49ehumpJbH4DZICgmlkgnY0gmlwhKwSnNmKbXVsdGlhZGRyc5YACASsEpzZBhubAAoErBKc2QYbnN0DgnJzhQADAQAAiXNlY3AyNTZrMaECPQXtEzF4uX73Fw0zryxQrdRmR0_cDs9rTefE8qZqbgGDdGNwghubg3VkcIIbnYV3YWt1Mgk --lightpushnode=/ip4/172.18.156.217/tcp/7067/p2p/16Uiu2HAkyXt6D5eo1szxeTUYUZe2V5ZbVRKTyDovCEhFXkiaqRHJ --lightpush=true --relay=false
2025-02-17 04:03:41.725 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.206.14 waku 9b1304c5c62281bb648f63301dd730fea43633235fb0cd69b3f4c770de2fc83f
2025-02-17 04:03:41.773 DEBUG [src.node.docker_mananger] Container started with ID 9b1304c5c622. Setting up logs at ./log/docker/lightpush_node1_2025-02-17_04-03-38__606f0db9-1ed1-4866-ad26-cf797a8afd9f__wakuorg_nwaku:latest.log
2025-02-17 04:03:41.773 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38274
2025-02-17 04:03:41.774 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:03:42.775 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38274/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:42.778 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:03:42.778 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:03:42.778 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38274/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:42.780 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.206.14/tcp/38275/p2p/16Uiu2HAmUzhP77akvr7N2k44f73Rm7Dtfv2oZ2H4UHBPSp2bRWDD","/ip4/172.18.206.14/tcp/38276/ws/p2p/16Uiu2HAmUzhP77akvr7N2k44f73Rm7Dtfv2oZ2H4UHBPSp2bRWDD"],"enrUri":"enr:-L24QGmHORZoDpqC5CJlLM0Md6CB7WZtBC7AJyjf9_koFkvqdK9v6wJ9V9lCED0gA6kFtSQw2GZOJAS8F4_nd_R7i8UCgmlkgnY0gmlwhKwSzg6KbXVsdGlhZGRyc5YACASsEs4OBpWDAAoErBLODgaVhN0DgnJzhQADAQAAiXNlY3AyNTZrMaED8sdrorJrMRg_R3GeKQPeZw9rQsnPpJ6AOjsYemvoU5iDdGNwgpWDg3VkcIKVhYV3YWt1Mgg"}'
2025-02-17 04:03:42.780 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:03:42.781 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38274/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.156.217/tcp/7067/p2p/16Uiu2HAkyXt6D5eo1szxeTUYUZe2V5ZbVRKTyDovCEhFXkiaqRHJ"]'
2025-02-17 04:03:42.815 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:03:42.815 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38274/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.113.15/tcp/31380/p2p/16Uiu2HAmAq6jPTFW5WrYMSNEVbMwP2kwMDoAJ3NHddXkcx9852Ss"]'
2025-02-17 04:03:42.845 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:03:42.848 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7066/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:03:42.855 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:03:42.857 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31379/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:03:42.861 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:03:42.864 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38274/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "timestamp": 1739765022864383488}}'
2025-02-17 04:03:42.868 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:38274/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data: '
2025-02-17 04:03:42.870 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:03:42.871 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:03:42.871 DEBUG [src.node.waku_node] Stopping container with id 84c177343f05
2025-02-17 04:03:43.651 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:03:43.651 DEBUG [src.node.waku_node] Stopping container with id 8617cc1ee69e
2025-02-17 04:03:44.464 ERROR [src.node.docker_mananger] Max retries reached for container 84c177343f05. Exiting log stream.
2025-02-17 04:03:45.165 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:03:45.166 DEBUG [src.node.waku_node] Stopping container with id 9b1304c5c622
2025-02-17 04:03:45.978 ERROR [src.node.docker_mananger] Max retries reached for container 8617cc1ee69e. Exiting log stream.
2025-02-17 04:03:46.671 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:03:46.672 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:03:46.679 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:03:46.686 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:03:46.692 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
