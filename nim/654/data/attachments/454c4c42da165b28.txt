2025-02-17 04:03:41.134 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:03:41.134 DEBUG [tests.conftest] Running test: test_filter_subscribe_to_101_content_topics with id: 2025-02-17_04-03-41__00e16ed0-72b6-4aff-ae04-13ba3f70ac7d
2025-02-17 04:03:41.134 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:03:41.134 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-17 04:03:41.135 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-17 04:03:41.140 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:03:41.140 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_04-03-41__00e16ed0-72b6-4aff-ae04-13ba3f70ac7d__wakuorg_nwaku:latest.log
2025-02-17 04:03:41.141 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:03:41.141 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:03:41.142 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:03:41.142 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.252.24
2025-02-17 04:03:41.142 DEBUG [src.node.docker_mananger] Generated ports ['43667', '43668', '43669', '43670', '43671']
2025-02-17 04:03:41.142 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:03:41.142 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:03:41.143 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:03:41.143 DEBUG [src.node.docker_mananger] docker run -i -t -p 43667:43667 -p 43668:43668 -p 43669:43669 -p 43670:43670 -p 43671:43671 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43669 --rest-port=43667 --tcp-port=43668 --discv5-udp-port=43670 --rest-address=0.0.0.0 --nat=extip:172.18.252.24 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5bf51d65f2b1c7dacc886a81cba8c7e965d07aa2bdbecfba6f6b1f6f1fb5a5cc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43671 --metrics-logging=true --relay=true --filter=true
2025-02-17 04:03:41.366 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.252.24 waku d2877579d37e8c8fd8ddbfc3da090cf28b9b45a6fb274bf97a94aa4409282279
2025-02-17 04:03:41.413 DEBUG [src.node.docker_mananger] Container started with ID d2877579d37e. Setting up logs at ./log/docker/node1_2025-02-17_04-03-41__00e16ed0-72b6-4aff-ae04-13ba3f70ac7d__wakuorg_nwaku:latest.log
2025-02-17 04:03:41.413 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 43667
2025-02-17 04:03:41.413 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:03:41.940 ERROR [src.node.docker_mananger] Max retries reached for container 9a7d03af7c52. Exiting log stream.
2025-02-17 04:03:42.414 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43667/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:42.416 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:03:42.416 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:03:42.417 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43667/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:42.419 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.252.24/tcp/43668/p2p/16Uiu2HAmC7yDtbpzeaBxCAExG19mrR1ekVAdMWjAMh9FjQnYz4Fy","/ip4/172.18.252.24/tcp/43669/ws/p2p/16Uiu2HAmC7yDtbpzeaBxCAExG19mrR1ekVAdMWjAMh9FjQnYz4Fy"],"enrUri":"enr:-L24QEvrShvSqRGHyaeygRo0gzwilDhlNHwD1m-qFEZXu8n4JFXP9rgvm56iDCgMLON3H06zdQMU6mDDdILnagJPXTUCgmlkgnY0gmlwhKwS_BiKbXVsdGlhZGRyc5YACASsEvwYBqqUAAoErBL8GAaqld0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-A24T5qDOdotjZ7NUcovH_QYv3NdK63GMoTUM9WfFoiDdGNwgqqUg3VkcIKqloV3YWt1MgU"}'
2025-02-17 04:03:42.419 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:03:42.419 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-17 04:03:42.426 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:03:42.426 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-17_04-03-41__00e16ed0-72b6-4aff-ae04-13ba3f70ac7d__wakuorg_nwaku:latest.log
2025-02-17 04:03:42.426 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:03:42.426 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:03:42.428 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:03:42.428 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.229.95
2025-02-17 04:03:42.428 DEBUG [src.node.docker_mananger] Generated ports ['52433', '52434', '52435', '52436', '52437']
2025-02-17 04:03:42.428 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:03:42.428 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:03:42.428 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:03:42.428 DEBUG [src.node.docker_mananger] docker run -i -t -p 52433:52433 -p 52434:52434 -p 52435:52435 -p 52436:52436 -p 52437:52437 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52435 --rest-port=52433 --tcp-port=52434 --discv5-udp-port=52436 --rest-address=0.0.0.0 --nat=extip:172.18.229.95 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cecbe9aeec4d45aabf9f4ddf715f7aa926facdc3fda0fff36c2aceab84f63a2a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52437 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QEvrShvSqRGHyaeygRo0gzwilDhlNHwD1m-qFEZXu8n4JFXP9rgvm56iDCgMLON3H06zdQMU6mDDdILnagJPXTUCgmlkgnY0gmlwhKwS_BiKbXVsdGlhZGRyc5YACASsEvwYBqqUAAoErBL8GAaqld0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-A24T5qDOdotjZ7NUcovH_QYv3NdK63GMoTUM9WfFoiDdGNwgqqUg3VkcIKqloV3YWt1MgU --filternode=/ip4/172.18.252.24/tcp/43668/p2p/16Uiu2HAmC7yDtbpzeaBxCAExG19mrR1ekVAdMWjAMh9FjQnYz4Fy
2025-02-17 04:03:42.654 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.229.95 waku 55ba8491097e69535a2894175ee02c7c39c78868aaf1eaae1b8617a0f05d1990
2025-02-17 04:03:42.698 DEBUG [src.node.docker_mananger] Container started with ID 55ba8491097e. Setting up logs at ./log/docker/node2_2025-02-17_04-03-41__00e16ed0-72b6-4aff-ae04-13ba3f70ac7d__wakuorg_nwaku:latest.log
2025-02-17 04:03:42.698 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 52433
2025-02-17 04:03:42.698 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:03:43.699 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52433/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:43.702 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:03:43.702 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:03:43.702 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52433/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:43.704 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.229.95/tcp/52434/p2p/16Uiu2HAmD35Gigwu6tdnwVMkrm67T7b7caeZcwksvp3z5aSLvwBC","/ip4/172.18.229.95/tcp/52435/ws/p2p/16Uiu2HAmD35Gigwu6tdnwVMkrm67T7b7caeZcwksvp3z5aSLvwBC"],"enrUri":"enr:-L24QKsHTdD733vxyavJujHlXu8YWC4ANOvYEO6zqzDqneWnI_9OFRCwgk4t-qmJhmSJzxsget-x26n5R6rTUAfUy30CgmlkgnY0gmlwhKwS5V-KbXVsdGlhZGRyc5YACASsEuVfBszSAAoErBLlXwbM090DgnJzhQADAQAAiXNlY3AyNTZrMaEDBahXm8GuP3qUuEQAzavY8vmVBOZ25SEjArGQWz4icD-DdGNwgszSg3VkcILM1IV3YWt1MgA"}'
2025-02-17 04:03:43.705 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:03:43.705 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52433/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.252.24/tcp/43668/p2p/16Uiu2HAmC7yDtbpzeaBxCAExG19mrR1ekVAdMWjAMh9FjQnYz4Fy"]'
2025-02-17 04:03:43.741 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:03:43.742 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-17 04:03:43.742 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43667/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:03:43.763 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:03:43.764 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52433/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "071d1a78-61ce-4a90-a8f7-0d48f0441527", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-17 04:03:43.776 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"071d1a78-61ce-4a90-a8f7-0d48f0441527","statusDesc":"OK"}'
2025-02-17 04:03:43.777 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52433/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32", "33", "34", "35", "36", "37", "38", "39", "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "50", "51", "52", "53", "54", "55", "56", "57", "58", "59", "60", "61", "62", "63", "64", "65", "66", "67", "68", "69", "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", "80", "81", "82", "83", "84", "85", "86", "87", "88", "89", "90", "91", "92", "93", "94", "95", "96", "97", "98", "99", "100"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-17 04:03:43.785 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:52433/filter/v2/subscriptions. Response content: b'{"requestId":"1","statusDesc":"BAD_REQUEST: exceeds maximum content topics: 100"}'
2025-02-17 04:03:43.788 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:03:43.788 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:03:43.789 DEBUG [src.node.waku_node] Stopping container with id d2877579d37e
2025-02-17 04:03:44.885 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:03:44.886 DEBUG [src.node.waku_node] Stopping container with id 55ba8491097e
2025-02-17 04:03:45.697 ERROR [src.node.docker_mananger] Max retries reached for container d2877579d37e. Exiting log stream.
2025-02-17 04:03:46.375 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:03:46.376 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:03:46.382 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:03:46.386 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
