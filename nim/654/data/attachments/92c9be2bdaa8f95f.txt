2025-02-17 04:03:56.606 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:03:56.606 DEBUG [tests.conftest] Running test: test_light_push_with_with_large_meta with id: 2025-02-17_04-03-56__32c72349-4250-49a5-8197-3e955a660883
2025-02-17 04:03:56.606 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:03:56.607 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-17 04:03:56.614 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:03:56.614 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-17_04-03-56__32c72349-4250-49a5-8197-3e955a660883__wakuorg_nwaku:latest.log
2025-02-17 04:03:56.614 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:03:56.614 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:03:56.616 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:03:56.616 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.42.72
2025-02-17 04:03:56.616 DEBUG [src.node.docker_mananger] Generated ports ['28976', '28977', '28978', '28979', '28980']
2025-02-17 04:03:56.616 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:03:56.616 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:03:56.617 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:03:56.617 DEBUG [src.node.docker_mananger] docker run -i -t -p 28976:28976 -p 28977:28977 -p 28978:28978 -p 28979:28979 -p 28980:28980 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28978 --rest-port=28976 --tcp-port=28977 --discv5-udp-port=28979 --rest-address=0.0.0.0 --nat=extip:172.18.42.72 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=db243635cf5774acd24fd9e5c64b9c1b26b57a40bcd720bc0556a5a5791ec136 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28980 --metrics-logging=true --lightpush=true --relay=true
2025-02-17 04:03:56.845 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.42.72 waku 31efa196f95eb54b7fef021f7c0f61558471700425c6684402b299ae583e36c8
2025-02-17 04:03:56.893 DEBUG [src.node.docker_mananger] Container started with ID 31efa196f95e. Setting up logs at ./log/docker/receiving_node1_2025-02-17_04-03-56__32c72349-4250-49a5-8197-3e955a660883__wakuorg_nwaku:latest.log
2025-02-17 04:03:56.894 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28976
2025-02-17 04:03:56.895 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:03:57.350 ERROR [src.node.docker_mananger] Max retries reached for container 8775df9047d0. Exiting log stream.
2025-02-17 04:03:57.895 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28976/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:57.898 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:03:57.898 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:03:57.899 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28976/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:57.901 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.42.72/tcp/28977/p2p/16Uiu2HAm62vnyqEQxS92NZTFGsa5kYNMMnceoRUotaWyJaWn1aYt","/ip4/172.18.42.72/tcp/28978/ws/p2p/16Uiu2HAm62vnyqEQxS92NZTFGsa5kYNMMnceoRUotaWyJaWn1aYt"],"enrUri":"enr:-L24QB5K9eOp_mkNgpj7MH25eH8AXMH4sINB9xDQeBEhskDbMHEumDD9ptu6PKoam3qX8QUo3ULFyOCDrPcXa-OictgCgmlkgnY0gmlwhKwSKkiKbXVsdGlhZGRyc5YACASsEipIBnExAAoErBIqSAZxMt0DgnJzhQADAQAAiXNlY3AyNTZrMaECnZzyhN-DCgv1tFLh4zq3GdDT8b9IdevxLKe4d-9eXo2DdGNwgnExg3VkcIJxM4V3YWt1Mgk"}'
2025-02-17 04:03:57.901 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:03:57.908 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:03:57.908 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-17_04-03-56__32c72349-4250-49a5-8197-3e955a660883__wakuorg_nwaku:latest.log
2025-02-17 04:03:57.908 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:03:57.908 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:03:57.910 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:03:57.910 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.137.84
2025-02-17 04:03:57.910 DEBUG [src.node.docker_mananger] Generated ports ['50802', '50803', '50804', '50805', '50806']
2025-02-17 04:03:57.910 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:03:57.910 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:03:57.910 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:03:57.911 DEBUG [src.node.docker_mananger] docker run -i -t -p 50802:50802 -p 50803:50803 -p 50804:50804 -p 50805:50805 -p 50806:50806 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50804 --rest-port=50802 --tcp-port=50803 --discv5-udp-port=50805 --rest-address=0.0.0.0 --nat=extip:172.18.137.84 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dbacb30430e4190b08c92cde9adc60e89cdafb62868ade50de784bed7ef7b2ca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50806 --metrics-logging=true --lightpush=false --relay=true
2025-02-17 04:03:58.140 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.137.84 waku 177b103d48b6141fb27e778cb23cc34ab08ffc291a00909559511e439c307ee0
2025-02-17 04:03:58.204 DEBUG [src.node.docker_mananger] Container started with ID 177b103d48b6. Setting up logs at ./log/docker/receiving_node2_2025-02-17_04-03-56__32c72349-4250-49a5-8197-3e955a660883__wakuorg_nwaku:latest.log
2025-02-17 04:03:58.204 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 50802
2025-02-17 04:03:58.205 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:03:59.205 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50802/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:59.208 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:03:59.208 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:03:59.208 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50802/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:59.210 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.137.84/tcp/50803/p2p/16Uiu2HAmFiPZmwgtPCjTzhNTFBabCg9caoimj2ep2fdewMM6U3B6","/ip4/172.18.137.84/tcp/50804/ws/p2p/16Uiu2HAmFiPZmwgtPCjTzhNTFBabCg9caoimj2ep2fdewMM6U3B6"],"enrUri":"enr:-L24QBw83Oy5NvHs8K3tHL1tOhh4CY9_PeL6E8feaD4OumGfZ1WEtsNHEl-wVknOicIJzL2eMsShF_jFdK4jvKRyquQCgmlkgnY0gmlwhKwSiVSKbXVsdGlhZGRyc5YACASsEolUBsZzAAoErBKJVAbGdN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDLXINhDlqr2vjicI7YI3ErDF5xWs6-PyGBNuFPRRwQZmDdGNwgsZzg3VkcILGdYV3YWt1MgE"}'
2025-02-17 04:03:59.210 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:03:59.211 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50802/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.42.72/tcp/28977/p2p/16Uiu2HAm62vnyqEQxS92NZTFGsa5kYNMMnceoRUotaWyJaWn1aYt"]'
2025-02-17 04:03:59.249 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:03:59.261 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:03:59.261 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-17_04-03-56__32c72349-4250-49a5-8197-3e955a660883__wakuorg_nwaku:latest.log
2025-02-17 04:03:59.262 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:03:59.262 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:03:59.263 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:03:59.263 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.66.35
2025-02-17 04:03:59.263 DEBUG [src.node.docker_mananger] Generated ports ['24983', '24984', '24985', '24986', '24987']
2025-02-17 04:03:59.264 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:03:59.264 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:03:59.264 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:03:59.264 DEBUG [src.node.docker_mananger] docker run -i -t -p 24983:24983 -p 24984:24984 -p 24985:24985 -p 24986:24986 -p 24987:24987 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24985 --rest-port=24983 --tcp-port=24984 --discv5-udp-port=24986 --rest-address=0.0.0.0 --nat=extip:172.18.66.35 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8e79c71ea8ac8b47be542c7d7d77117eaeee4dcd9dd377fae5ee989deb19bfe6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24987 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QB5K9eOp_mkNgpj7MH25eH8AXMH4sINB9xDQeBEhskDbMHEumDD9ptu6PKoam3qX8QUo3ULFyOCDrPcXa-OictgCgmlkgnY0gmlwhKwSKkiKbXVsdGlhZGRyc5YACASsEipIBnExAAoErBIqSAZxMt0DgnJzhQADAQAAiXNlY3AyNTZrMaECnZzyhN-DCgv1tFLh4zq3GdDT8b9IdevxLKe4d-9eXo2DdGNwgnExg3VkcIJxM4V3YWt1Mgk --lightpushnode=/ip4/172.18.42.72/tcp/28977/p2p/16Uiu2HAm62vnyqEQxS92NZTFGsa5kYNMMnceoRUotaWyJaWn1aYt --lightpush=true --relay=false
2025-02-17 04:03:59.501 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.66.35 waku 8c8232975a6667497882f520be5f90da5c87c1e0e900148194e7f0b0be0924d5
2025-02-17 04:03:59.553 DEBUG [src.node.docker_mananger] Container started with ID 8c8232975a66. Setting up logs at ./log/docker/lightpush_node1_2025-02-17_04-03-56__32c72349-4250-49a5-8197-3e955a660883__wakuorg_nwaku:latest.log
2025-02-17 04:03:59.554 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 24983
2025-02-17 04:03:59.554 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:04:00.554 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24983/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:00.558 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:04:00.558 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:04:00.558 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24983/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:00.560 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.66.35/tcp/24984/p2p/16Uiu2HAkvpn2vVSqsfpsMYnZRoJzKUnhP6Rz5jKitMhibB62qBfN","/ip4/172.18.66.35/tcp/24985/ws/p2p/16Uiu2HAkvpn2vVSqsfpsMYnZRoJzKUnhP6Rz5jKitMhibB62qBfN"],"enrUri":"enr:-L24QJO3Ttg5hBsRdWbQjc6f8WuPTfUzJoSt32KW-Q0dErVCAW4O8rKimNWKCoJ-k6PGh3P-heHwp22uiUxE206JMs8CgmlkgnY0gmlwhKwSQiOKbXVsdGlhZGRyc5YACASsEkIjBmGYAAoErBJCIwZhmd0DgnJzhQADAQAAiXNlY3AyNTZrMaECFMbkCUzNB6htbgdWe3LR4ryr0tBj4q96U3hHfBYNQUmDdGNwgmGYg3VkcIJhmoV3YWt1Mgg"}'
2025-02-17 04:04:00.560 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:04:00.561 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24983/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.42.72/tcp/28977/p2p/16Uiu2HAm62vnyqEQxS92NZTFGsa5kYNMMnceoRUotaWyJaWn1aYt"]'
2025-02-17 04:04:00.599 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:00.600 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24983/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.137.84/tcp/50803/p2p/16Uiu2HAmFiPZmwgtPCjTzhNTFBabCg9caoimj2ep2fdewMM6U3B6"]'
2025-02-17 04:04:00.632 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:00.633 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28976/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:04:00.639 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:00.639 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50802/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:04:00.645 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:00.648 DEBUG [src.steps.light_push] Lightpushing message
2025-02-17 04:04:00.648 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24983/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739765040648041728, "meta": "YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYQ=="}}'
2025-02-17 04:04:00.657 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:24983/lightpush/v1/message. Response content: b'Failed to request a message push: decode_rpc_failure: (kind: InvalidLengthField, field: "meta")'
2025-02-17 04:04:00.660 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:04:00.661 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:04:00.661 DEBUG [src.node.waku_node] Stopping container with id 31efa196f95e
2025-02-17 04:04:01.371 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:01.371 DEBUG [src.node.waku_node] Stopping container with id 177b103d48b6
2025-02-17 04:04:02.183 ERROR [src.node.docker_mananger] Max retries reached for container 31efa196f95e. Exiting log stream.
2025-02-17 04:04:02.853 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:02.853 DEBUG [src.node.waku_node] Stopping container with id 8c8232975a66
2025-02-17 04:04:03.666 ERROR [src.node.docker_mananger] Max retries reached for container 177b103d48b6. Exiting log stream.
2025-02-17 04:04:04.344 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:04.346 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:04:04.353 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:04:04.359 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:04:04.365 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
