2025-02-17 04:05:25.350 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:05:25.351 DEBUG [tests.conftest] Running test: test_unsubscribe_from_non_subscribed_pubsub_topics with id: 2025-02-17_04-05-25__c8fd77fe-59c3-4d05-bf00-b74fcf292979
2025-02-17 04:05:25.351 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:05:25.351 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-17 04:05:25.351 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-17 04:05:25.359 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:05:25.359 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_04-05-25__c8fd77fe-59c3-4d05-bf00-b74fcf292979__wakuorg_nwaku:latest.log
2025-02-17 04:05:25.359 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:05:25.359 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:05:25.361 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:05:25.361 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.131.62
2025-02-17 04:05:25.361 DEBUG [src.node.docker_mananger] Generated ports ['28136', '28137', '28138', '28139', '28140']
2025-02-17 04:05:25.361 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:05:25.361 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:05:25.361 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:05:25.361 DEBUG [src.node.docker_mananger] docker run -i -t -p 28136:28136 -p 28137:28137 -p 28138:28138 -p 28139:28139 -p 28140:28140 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28138 --rest-port=28136 --tcp-port=28137 --discv5-udp-port=28139 --rest-address=0.0.0.0 --nat=extip:172.18.131.62 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ffb6eaab03bed28924ef31c837ce42d0a9ad2af2ccf815f16862dd470ec9baba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28140 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
2025-02-17 04:05:25.596 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.131.62 waku bb28d5b138984fe042d2bf08916e0e3967b6da96ab40c229ea312342b5053dd7
2025-02-17 04:05:25.642 DEBUG [src.node.docker_mananger] Container started with ID bb28d5b13898. Setting up logs at ./log/docker/node1_2025-02-17_04-05-25__c8fd77fe-59c3-4d05-bf00-b74fcf292979__wakuorg_nwaku:latest.log
2025-02-17 04:05:25.642 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28136
2025-02-17 04:05:25.643 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:05:26.140 ERROR [src.node.docker_mananger] Max retries reached for container ae83bdf8d5ba. Exiting log stream.
2025-02-17 04:05:26.643 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28136/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:26.646 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:05:26.646 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:05:26.647 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28136/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:26.649 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.131.62/tcp/28137/p2p/16Uiu2HAmQ8xFNmUxkvNCVBc8VNGH84138d9rhb4grpG6d16FEGUg","/ip4/172.18.131.62/tcp/28138/ws/p2p/16Uiu2HAmQ8xFNmUxkvNCVBc8VNGH84138d9rhb4grpG6d16FEGUg"],"enrUri":"enr:-L24QP9CHdnRIFbg4aiEK7t7LqTSlmiQZCZqFNqFlu-aYmWkU4FEjSjZ6i9e_xC760ODf7S4MkSaq0n3E37FZSge6coCgmlkgnY0gmlwhKwSgz6KbXVsdGlhZGRyc5YACASsEoM-Bm3pAAoErBKDPgZt6t0DgnJzhQACAQAAiXNlY3AyNTZrMaEDqppxMKUzMsJKeO_dLLSkScoWf50lvKJt7ZbaTlD822mDdGNwgm3pg3VkcIJt64V3YWt1MgU"}'
2025-02-17 04:05:26.649 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:05:26.656 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:05:26.656 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-17_04-05-25__c8fd77fe-59c3-4d05-bf00-b74fcf292979__wakuorg_nwaku:latest.log
2025-02-17 04:05:26.656 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:05:26.656 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:05:26.657 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:05:26.658 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.210.147
2025-02-17 04:05:26.658 DEBUG [src.node.docker_mananger] Generated ports ['59161', '59162', '59163', '59164', '59165']
2025-02-17 04:05:26.658 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:05:26.658 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:05:26.658 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:05:26.658 DEBUG [src.node.docker_mananger] docker run -i -t -p 59161:59161 -p 59162:59162 -p 59163:59163 -p 59164:59164 -p 59165:59165 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59163 --rest-port=59161 --tcp-port=59162 --discv5-udp-port=59164 --rest-address=0.0.0.0 --nat=extip:172.18.210.147 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=fc6ecae52eb8abcfe569dbf7b65b6ebb633aadf412edfbdbee3f0f4581ae2ffb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59165 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QP9CHdnRIFbg4aiEK7t7LqTSlmiQZCZqFNqFlu-aYmWkU4FEjSjZ6i9e_xC760ODf7S4MkSaq0n3E37FZSge6coCgmlkgnY0gmlwhKwSgz6KbXVsdGlhZGRyc5YACASsEoM-Bm3pAAoErBKDPgZt6t0DgnJzhQACAQAAiXNlY3AyNTZrMaEDqppxMKUzMsJKeO_dLLSkScoWf50lvKJt7ZbaTlD822mDdGNwgm3pg3VkcIJt64V3YWt1MgU --pubsub-topic=/waku/2/rs/2/0
2025-02-17 04:05:26.883 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.210.147 waku 9bf9f7374a0a4c77f0a1ac26aa2544c309292e38aa44d1b4fa3d8a3b56e6eb64
2025-02-17 04:05:26.933 DEBUG [src.node.docker_mananger] Container started with ID 9bf9f7374a0a. Setting up logs at ./log/docker/node2_2025-02-17_04-05-25__c8fd77fe-59c3-4d05-bf00-b74fcf292979__wakuorg_nwaku:latest.log
2025-02-17 04:05:26.934 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 59161
2025-02-17 04:05:26.934 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:05:27.934 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59161/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:27.943 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:05:27.943 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:05:27.945 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59161/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:27.951 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.210.147/tcp/59162/p2p/16Uiu2HAmCqj5xyLbmmyD2RhmoP9ws5eSUCjft3rc1eAhKUgLC8Tq","/ip4/172.18.210.147/tcp/59163/ws/p2p/16Uiu2HAmCqj5xyLbmmyD2RhmoP9ws5eSUCjft3rc1eAhKUgLC8Tq"],"enrUri":"enr:-L24QOzEKPerGmzLHjwBtuecvz1loHupWToDH7IiZvXAxkltDRNYMLMA9BjAS4l3SmNdJarOW3Oem13g2CLsuYnMiSACgmlkgnY0gmlwhKwS0pOKbXVsdGlhZGRyc5YACASsEtKTBucaAAoErBLSkwbnG90DgnJzhQACAQAAiXNlY3AyNTZrMaEDAsAhLdD_7J18tT6L77Ka1A3jgibvSKEEJFIwh9OuIRiDdGNwgucag3VkcILnHIV3YWt1MgE"}'
2025-02-17 04:05:27.952 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:05:27.953 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59161/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.131.62/tcp/28137/p2p/16Uiu2HAmQ8xFNmUxkvNCVBc8VNGH84138d9rhb4grpG6d16FEGUg"]'
2025-02-17 04:05:27.957 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:27.958 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:28136/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0", "/waku/2/rs/2/1", "/waku/2/rs/2/2", "/waku/2/rs/2/3", "/waku/2/rs/2/4", "/waku/2/rs/2/5", "/waku/2/rs/2/6", "/waku/2/rs/2/7"]'
2025-02-17 04:05:27.963 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:27.964 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:59161/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0", "/waku/2/rs/2/1", "/waku/2/rs/2/2", "/waku/2/rs/2/3", "/waku/2/rs/2/4", "/waku/2/rs/2/5", "/waku/2/rs/2/6", "/waku/2/rs/2/7"]'
2025-02-17 04:05:27.969 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:27.970 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28136/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:05:27.972 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28136/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/0'
2025-02-17 04:05:27.974 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28136/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:05:27.976 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28136/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/1'
2025-02-17 04:05:27.978 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28136/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:05:27.980 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28136/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/2'
2025-02-17 04:05:27.981 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28136/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F3" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:05:27.984 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28136/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F3. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/3'
2025-02-17 04:05:27.985 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28136/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F4" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:05:27.987 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28136/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F4. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/4'
2025-02-17 04:05:27.989 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28136/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F5" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:05:27.991 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28136/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F5. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/5'
2025-02-17 04:05:27.993 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28136/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F6" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:05:27.995 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28136/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F6. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/6'
2025-02-17 04:05:27.996 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28136/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F7" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:05:27.999 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28136/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F7. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/7'
2025-02-17 04:05:28.001 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:05:28.002 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:05:28.002 DEBUG [src.node.waku_node] Stopping container with id bb28d5b13898
2025-02-17 04:05:29.124 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:05:29.125 DEBUG [src.node.waku_node] Stopping container with id 9bf9f7374a0a
2025-02-17 04:05:29.937 ERROR [src.node.docker_mananger] Max retries reached for container bb28d5b13898. Exiting log stream.
2025-02-17 04:05:30.633 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:05:30.634 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:05:30.639 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:05:30.645 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
