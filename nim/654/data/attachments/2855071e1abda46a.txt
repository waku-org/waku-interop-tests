2025-02-17 04:09:27.813 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:09:27.814 DEBUG [tests.conftest] Running test: test_light_push_with_valid_meta with id: 2025-02-17_04-09-27__4678214e-ca44-487c-be96-d31c29041757
2025-02-17 04:09:27.814 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:09:27.814 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-17 04:09:27.820 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:09:27.821 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-17_04-09-27__4678214e-ca44-487c-be96-d31c29041757__wakuorg_nwaku:latest.log
2025-02-17 04:09:27.821 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:09:27.821 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:09:27.822 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:09:27.822 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.129.178
2025-02-17 04:09:27.822 DEBUG [src.node.docker_mananger] Generated ports ['14544', '14545', '14546', '14547', '14548']
2025-02-17 04:09:27.822 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:09:27.823 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:09:27.823 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:09:27.823 DEBUG [src.node.docker_mananger] docker run -i -t -p 14544:14544 -p 14545:14545 -p 14546:14546 -p 14547:14547 -p 14548:14548 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14546 --rest-port=14544 --tcp-port=14545 --discv5-udp-port=14547 --rest-address=0.0.0.0 --nat=extip:172.18.129.178 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eca8d0fd3afaf7d6ad8e79c4dbbba8a9da314f6f2cdcf39e9329fe6baf38b1fc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14548 --metrics-logging=true --lightpush=true --relay=true
2025-02-17 04:09:28.047 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.129.178 waku 06e0fd52057c74cd8777dcc244559fe43720a32b5bb5e29a6d289ac6f007442e
2025-02-17 04:09:28.096 DEBUG [src.node.docker_mananger] Container started with ID 06e0fd52057c. Setting up logs at ./log/docker/receiving_node1_2025-02-17_04-09-27__4678214e-ca44-487c-be96-d31c29041757__wakuorg_nwaku:latest.log
2025-02-17 04:09:28.097 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14544
2025-02-17 04:09:28.097 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:09:28.593 ERROR [src.node.docker_mananger] Max retries reached for container 793a93d3ec02. Exiting log stream.
2025-02-17 04:09:29.097 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14544/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:09:29.100 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:09:29.100 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:09:29.101 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14544/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:09:29.103 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.129.178/tcp/14545/p2p/16Uiu2HAmPLYdcxbrhqJAU15NM6kr6jfZ3m6ytMsVMiQQo97pdL39","/ip4/172.18.129.178/tcp/14546/ws/p2p/16Uiu2HAmPLYdcxbrhqJAU15NM6kr6jfZ3m6ytMsVMiQQo97pdL39"],"enrUri":"enr:-L24QFow48RK8ZhQ3dpdtWxUqSZvXJYhKXj_WgOYFZOEffd1bPDD1vzxFIZmFjIW9UZhIHTpMSZgZX9YiFpdBoSJjG8CgmlkgnY0gmlwhKwSgbKKbXVsdGlhZGRyc5YACASsEoGyBjjRAAoErBKBsgY40t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDnrcFjkbt8tLPol4xwYZpHdCqpnrcaAAa_n3eX1YAVXiDdGNwgjjRg3VkcII404V3YWt1Mgk"}'
2025-02-17 04:09:29.103 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:09:29.109 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:09:29.110 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-17_04-09-27__4678214e-ca44-487c-be96-d31c29041757__wakuorg_nwaku:latest.log
2025-02-17 04:09:29.110 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:09:29.110 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:09:29.111 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:09:29.111 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.44.38
2025-02-17 04:09:29.111 DEBUG [src.node.docker_mananger] Generated ports ['44692', '44693', '44694', '44695', '44696']
2025-02-17 04:09:29.112 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:09:29.112 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:09:29.112 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:09:29.112 DEBUG [src.node.docker_mananger] docker run -i -t -p 44692:44692 -p 44693:44693 -p 44694:44694 -p 44695:44695 -p 44696:44696 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44694 --rest-port=44692 --tcp-port=44693 --discv5-udp-port=44695 --rest-address=0.0.0.0 --nat=extip:172.18.44.38 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2355786a6c382cb720fd8f43656d6d5efbbcc434c795c9de544e9202ce9fdba6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44696 --metrics-logging=true --lightpush=false --relay=true
2025-02-17 04:09:29.338 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.44.38 waku 901cc7641cb35be5f6b79723d1c3f2c1ec0fbc11b5dd2a7eb0d6f8a80b71ed86
2025-02-17 04:09:29.385 DEBUG [src.node.docker_mananger] Container started with ID 901cc7641cb3. Setting up logs at ./log/docker/receiving_node2_2025-02-17_04-09-27__4678214e-ca44-487c-be96-d31c29041757__wakuorg_nwaku:latest.log
2025-02-17 04:09:29.385 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44692
2025-02-17 04:09:29.385 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:09:30.386 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44692/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:09:30.388 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:09:30.389 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:09:30.389 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44692/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:09:30.391 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.44.38/tcp/44693/p2p/16Uiu2HAkvqjMc3uCisH6cS5GztkjpViQT8bLjt6hNvZedRZpSNht","/ip4/172.18.44.38/tcp/44694/ws/p2p/16Uiu2HAkvqjMc3uCisH6cS5GztkjpViQT8bLjt6hNvZedRZpSNht"],"enrUri":"enr:-L24QIg2208B28NstjKts68ljX-SdrSCFYNi6TxNs20HNApiMXNi08ksjtVtUsOGcQRVAlKJ4L4X_OEBrK-uohTJ2g4CgmlkgnY0gmlwhKwSLCaKbXVsdGlhZGRyc5YACASsEiwmBq6VAAoErBIsJgault0DgnJzhQADAQAAiXNlY3AyNTZrMaECFQVxlFml4K8fyPpACX3DrScqf9907d8vOxlorwpmtg-DdGNwgq6Vg3VkcIKul4V3YWt1MgE"}'
2025-02-17 04:09:30.391 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:09:30.391 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44692/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.129.178/tcp/14545/p2p/16Uiu2HAmPLYdcxbrhqJAU15NM6kr6jfZ3m6ytMsVMiQQo97pdL39"]'
2025-02-17 04:09:30.431 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:09:30.441 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:09:30.441 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-17_04-09-27__4678214e-ca44-487c-be96-d31c29041757__wakuorg_nwaku:latest.log
2025-02-17 04:09:30.441 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:09:30.441 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:09:30.443 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:09:30.443 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.134.70
2025-02-17 04:09:30.443 DEBUG [src.node.docker_mananger] Generated ports ['41652', '41653', '41654', '41655', '41656']
2025-02-17 04:09:30.443 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:09:30.443 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:09:30.443 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:09:30.443 DEBUG [src.node.docker_mananger] docker run -i -t -p 41652:41652 -p 41653:41653 -p 41654:41654 -p 41655:41655 -p 41656:41656 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41654 --rest-port=41652 --tcp-port=41653 --discv5-udp-port=41655 --rest-address=0.0.0.0 --nat=extip:172.18.134.70 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ce10d4e4530afbbfcdaa58a999287570ebbbeb60affcf1cc29973cdf4b5fbabf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41656 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFow48RK8ZhQ3dpdtWxUqSZvXJYhKXj_WgOYFZOEffd1bPDD1vzxFIZmFjIW9UZhIHTpMSZgZX9YiFpdBoSJjG8CgmlkgnY0gmlwhKwSgbKKbXVsdGlhZGRyc5YACASsEoGyBjjRAAoErBKBsgY40t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDnrcFjkbt8tLPol4xwYZpHdCqpnrcaAAa_n3eX1YAVXiDdGNwgjjRg3VkcII404V3YWt1Mgk --lightpushnode=/ip4/172.18.129.178/tcp/14545/p2p/16Uiu2HAmPLYdcxbrhqJAU15NM6kr6jfZ3m6ytMsVMiQQo97pdL39 --lightpush=true --relay=false
2025-02-17 04:09:30.685 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.134.70 waku df51a0217a77ea8d95053f8df88d39653d946386cda1e8d973888f992476417c
2025-02-17 04:09:30.735 DEBUG [src.node.docker_mananger] Container started with ID df51a0217a77. Setting up logs at ./log/docker/lightpush_node1_2025-02-17_04-09-27__4678214e-ca44-487c-be96-d31c29041757__wakuorg_nwaku:latest.log
2025-02-17 04:09:30.735 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 41652
2025-02-17 04:09:30.735 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:09:31.735 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41652/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:09:31.738 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:09:31.739 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:09:31.739 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41652/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:09:31.741 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.134.70/tcp/41653/p2p/16Uiu2HAkvp25aQwHSLBjitpwnMid28imosXJHZDNky69vsuSuDgp","/ip4/172.18.134.70/tcp/41654/ws/p2p/16Uiu2HAkvp25aQwHSLBjitpwnMid28imosXJHZDNky69vsuSuDgp"],"enrUri":"enr:-L24QIrGnTKqasYcbfJn4dShwLhPGROpE7UGIU2tzeVGc-V5ba5n35fODAINeHMge23bs4QyIFi-vGAfWyxqpFpPAtUCgmlkgnY0gmlwhKwShkaKbXVsdGlhZGRyc5YACASsEoZGBqK1AAoErBKGRgaitt0DgnJzhQADAQAAiXNlY3AyNTZrMaECFJUxCQ68xeIHMt19IkhGg-kjuLPcbFKVyZ3H-ZRh2OWDdGNwgqK1g3VkcIKit4V3YWt1Mgg"}'
2025-02-17 04:09:31.741 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:09:31.741 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41652/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.129.178/tcp/14545/p2p/16Uiu2HAmPLYdcxbrhqJAU15NM6kr6jfZ3m6ytMsVMiQQo97pdL39"]'
2025-02-17 04:09:31.780 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:09:31.781 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41652/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.44.38/tcp/44693/p2p/16Uiu2HAkvqjMc3uCisH6cS5GztkjpViQT8bLjt6hNvZedRZpSNht"]'
2025-02-17 04:09:31.811 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:09:31.814 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14544/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:09:31.821 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:09:31.823 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44692/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:09:31.830 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:09:31.832 DEBUG [src.steps.light_push] Lightpushing message
2025-02-17 04:09:31.832 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41652/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739765371832102912, "meta": "TGlnaHQgcHVzaCB3b3JrcyEh"}}'
2025-02-17 04:09:31.842 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:09:31.842 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 04:09:31.943 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-17 04:09:31.943 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14544/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:09:31.945 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739765371832102912,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false,"proof":""}]'
2025-02-17 04:09:31.947 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-17 04:09:31.947 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44692/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:09:31.949 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739765371832102912,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false,"proof":""}]'
2025-02-17 04:09:31.952 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:09:31.953 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:09:31.953 DEBUG [src.node.waku_node] Stopping container with id 06e0fd52057c
2025-02-17 04:09:32.582 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:09:32.582 DEBUG [src.node.waku_node] Stopping container with id 901cc7641cb3
2025-02-17 04:09:33.414 ERROR [src.node.docker_mananger] Max retries reached for container 06e0fd52057c. Exiting log stream.
2025-02-17 04:09:34.104 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:09:34.104 DEBUG [src.node.waku_node] Stopping container with id df51a0217a77
2025-02-17 04:09:34.915 ERROR [src.node.docker_mananger] Max retries reached for container 901cc7641cb3. Exiting log stream.
2025-02-17 04:09:35.609 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:09:35.609 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:09:35.624 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:09:35.631 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:09:35.637 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
