2025-02-17 04:04:41.865 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:04:41.865 DEBUG [tests.conftest] Running test: test_main_node_only_lightpush__peer_only_filter with id: 2025-02-17_04-04-41__dc006b8a-c118-48c6-ab49-13d24c754632
2025-02-17 04:04:41.866 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:04:41.866 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-17 04:04:41.872 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:04:41.872 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-17_04-04-41__dc006b8a-c118-48c6-ab49-13d24c754632__wakuorg_nwaku:latest.log
2025-02-17 04:04:41.872 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:04:41.873 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:04:41.874 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:04:41.874 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.124.14
2025-02-17 04:04:41.874 DEBUG [src.node.docker_mananger] Generated ports ['44811', '44812', '44813', '44814', '44815']
2025-02-17 04:04:41.874 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:04:41.875 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:04:41.875 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:04:41.875 DEBUG [src.node.docker_mananger] docker run -i -t -p 44811:44811 -p 44812:44812 -p 44813:44813 -p 44814:44814 -p 44815:44815 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44813 --rest-port=44811 --tcp-port=44812 --discv5-udp-port=44814 --rest-address=0.0.0.0 --nat=extip:172.18.124.14 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ab96ece71b4d7522862cfbc151ed0da0ddf0cbae5f8d10b1d6fbdf0af7e91ece --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44815 --metrics-logging=true --lightpush=false --relay=false --filter=true
2025-02-17 04:04:42.104 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.124.14 waku 28647fcd34c4c422ce7a448f6275e4b6838b83025a616a6c58cb7c459b33ba15
2025-02-17 04:04:42.153 DEBUG [src.node.docker_mananger] Container started with ID 28647fcd34c4. Setting up logs at ./log/docker/receiving_node1_2025-02-17_04-04-41__dc006b8a-c118-48c6-ab49-13d24c754632__wakuorg_nwaku:latest.log
2025-02-17 04:04:42.153 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44811
2025-02-17 04:04:42.153 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:04:42.665 ERROR [src.node.docker_mananger] Max retries reached for container 7d7376b8d05f. Exiting log stream.
2025-02-17 04:04:43.155 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44811/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:43.158 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:04:43.158 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:04:43.158 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44811/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:43.160 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.124.14/tcp/44812/p2p/16Uiu2HAm3NaJWoffF4DrevAfHtd66KunrAjjKWdP2QNbkkkE653c","/ip4/172.18.124.14/tcp/44813/ws/p2p/16Uiu2HAm3NaJWoffF4DrevAfHtd66KunrAjjKWdP2QNbkkkE653c"],"enrUri":"enr:-L24QNsoSfFZ3RNTdpLYHFttzr-SWD4o0D0AYyPOEPHYSMS6fTDrqVW-fby50Oy9J7sKAnq3cW4XultR8sjUkxBNEqcCgmlkgnY0gmlwhKwSfA6KbXVsdGlhZGRyc5YACASsEnwOBq8MAAoErBJ8DgavDd0DgnJzhQADAQAAiXNlY3AyNTZrMaECdhJVb0XtrT-dW6WFtoqJ-R_5FCxTjOeFLETwkpxTW9-DdGNwgq8Mg3VkcIKvDoV3YWt1MgQ"}'
2025-02-17 04:04:43.160 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:04:43.167 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:04:43.167 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-17_04-04-41__dc006b8a-c118-48c6-ab49-13d24c754632__wakuorg_nwaku:latest.log
2025-02-17 04:04:43.167 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:04:43.167 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:04:43.169 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:04:43.169 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.33.65
2025-02-17 04:04:43.169 DEBUG [src.node.docker_mananger] Generated ports ['14696', '14697', '14698', '14699', '14700']
2025-02-17 04:04:43.169 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:04:43.169 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:04:43.169 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:04:43.169 DEBUG [src.node.docker_mananger] docker run -i -t -p 14696:14696 -p 14697:14697 -p 14698:14698 -p 14699:14699 -p 14700:14700 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14698 --rest-port=14696 --tcp-port=14697 --discv5-udp-port=14699 --rest-address=0.0.0.0 --nat=extip:172.18.33.65 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a19f3dad3d6b24760754c37a16955d2e4cea3bcea8edf113e8ddc2ef3fbd59ac --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14700 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QNsoSfFZ3RNTdpLYHFttzr-SWD4o0D0AYyPOEPHYSMS6fTDrqVW-fby50Oy9J7sKAnq3cW4XultR8sjUkxBNEqcCgmlkgnY0gmlwhKwSfA6KbXVsdGlhZGRyc5YACASsEnwOBq8MAAoErBJ8DgavDd0DgnJzhQADAQAAiXNlY3AyNTZrMaECdhJVb0XtrT-dW6WFtoqJ-R_5FCxTjOeFLETwkpxTW9-DdGNwgq8Mg3VkcIKvDoV3YWt1MgQ --lightpushnode=/ip4/172.18.124.14/tcp/44812/p2p/16Uiu2HAm3NaJWoffF4DrevAfHtd66KunrAjjKWdP2QNbkkkE653c --lightpush=true --relay=false
2025-02-17 04:04:43.402 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.33.65 waku a0a00bdeab7e4beaf430ee49895c79d2c38d86a3481d36b383dd75e6ccb6dec8
2025-02-17 04:04:43.449 DEBUG [src.node.docker_mananger] Container started with ID a0a00bdeab7e. Setting up logs at ./log/docker/lightpush_node1_2025-02-17_04-04-41__dc006b8a-c118-48c6-ab49-13d24c754632__wakuorg_nwaku:latest.log
2025-02-17 04:04:43.450 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14696
2025-02-17 04:04:43.451 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:04:44.451 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14696/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:44.454 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:04:44.454 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:04:44.454 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14696/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:44.456 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.33.65/tcp/14697/p2p/16Uiu2HAmGZRG4RHej6Vhb1kyBt1Ly9ioHatyGeozsJM97M9e8v1e","/ip4/172.18.33.65/tcp/14698/ws/p2p/16Uiu2HAmGZRG4RHej6Vhb1kyBt1Ly9ioHatyGeozsJM97M9e8v1e"],"enrUri":"enr:-L24QIq8KOUs-_DExpKJbTRSbkjDxnlYZUTyl3X2zH162g8VPkR0HOxLuOVtzG0gXzMo7DpUnkHtHqVWZHJoeoVb5kUCgmlkgnY0gmlwhKwSIUGKbXVsdGlhZGRyc5YACASsEiFBBjlpAAoErBIhQQY5at0DgnJzhQADAQAAiXNlY3AyNTZrMaEDOgFtsOawF3fmPgG7kg2cYrYqsyskNWA9CcgXEQazkAGDdGNwgjlpg3VkcII5a4V3YWt1Mgg"}'
2025-02-17 04:04:44.456 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:04:44.456 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14696/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.124.14/tcp/44812/p2p/16Uiu2HAm3NaJWoffF4DrevAfHtd66KunrAjjKWdP2QNbkkkE653c"]'
2025-02-17 04:04:44.489 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:44.490 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14696/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739765084490332160}}'
2025-02-17 04:04:44.514 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:14696/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2025-02-17 04:04:44.516 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:04:44.517 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:04:44.517 DEBUG [src.node.waku_node] Stopping container with id 28647fcd34c4
2025-02-17 04:04:45.594 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:45.596 DEBUG [src.node.waku_node] Stopping container with id a0a00bdeab7e
2025-02-17 04:04:46.406 ERROR [src.node.docker_mananger] Max retries reached for container 28647fcd34c4. Exiting log stream.
2025-02-17 04:04:47.058 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:47.059 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:04:47.063 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:04:47.066 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
