2025-02-17 04:03:14.668 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:03:14.669 DEBUG [tests.conftest] Running test: test_filter_get_message_with_150_kb_payload with id: 2025-02-17_04-03-14__54f86e48-78ee-45d9-ad5f-ce42c7aa8cbc
2025-02-17 04:03:14.669 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:03:14.669 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-17 04:03:14.670 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-17 04:03:14.675 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:03:14.676 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_04-03-14__54f86e48-78ee-45d9-ad5f-ce42c7aa8cbc__wakuorg_nwaku:latest.log
2025-02-17 04:03:14.676 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:03:14.676 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:03:14.677 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:03:14.677 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.220.48
2025-02-17 04:03:14.678 DEBUG [src.node.docker_mananger] Generated ports ['7263', '7264', '7265', '7266', '7267']
2025-02-17 04:03:14.678 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:03:14.678 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:03:14.678 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:03:14.678 DEBUG [src.node.docker_mananger] docker run -i -t -p 7263:7263 -p 7264:7264 -p 7265:7265 -p 7266:7266 -p 7267:7267 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7265 --rest-port=7263 --tcp-port=7264 --discv5-udp-port=7266 --rest-address=0.0.0.0 --nat=extip:172.18.220.48 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fd2db3efe8a86ff8a81afd0857f4cd89510e970cfaaef8d01eda9d4d6cdc0fbe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7267 --metrics-logging=true --relay=true --filter=true
2025-02-17 04:03:14.901 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.220.48 waku 1ba2c7b5fa04a12fab2ff42df15b16172ee520abc450c560951d2b421ddf3c2b
2025-02-17 04:03:14.950 DEBUG [src.node.docker_mananger] Container started with ID 1ba2c7b5fa04. Setting up logs at ./log/docker/node1_2025-02-17_04-03-14__54f86e48-78ee-45d9-ad5f-ce42c7aa8cbc__wakuorg_nwaku:latest.log
2025-02-17 04:03:14.951 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7263
2025-02-17 04:03:14.951 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:03:15.463 ERROR [src.node.docker_mananger] Max retries reached for container 2e87038957e8. Exiting log stream.
2025-02-17 04:03:15.952 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7263/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:15.955 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:03:15.955 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:03:15.955 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7263/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:15.958 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.220.48/tcp/7264/p2p/16Uiu2HAkxWYWo9RYHwhAdPZdz2j7gxbU2AdYrtcLHhhdNpP3Bygu","/ip4/172.18.220.48/tcp/7265/ws/p2p/16Uiu2HAkxWYWo9RYHwhAdPZdz2j7gxbU2AdYrtcLHhhdNpP3Bygu"],"enrUri":"enr:-L24QKh7LchzRZpaK9_szkgcFUTNhgwajChuDW5PMV9A9ivmBfzAX0vG-S5T2hTuJ_3849vAmMFPOro8pdJL3szPf24CgmlkgnY0gmlwhKwS3DCKbXVsdGlhZGRyc5YACASsEtwwBhxgAAoErBLcMAYcYd0DgnJzhQADAQAAiXNlY3AyNTZrMaECLdKGCj79DS5r7VgZK1iP85FEMTa4wdTgTGr_40UgypqDdGNwghxgg3VkcIIcYoV3YWt1MgU"}'
2025-02-17 04:03:15.958 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:03:15.958 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-17 04:03:15.964 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:03:15.964 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-17_04-03-14__54f86e48-78ee-45d9-ad5f-ce42c7aa8cbc__wakuorg_nwaku:latest.log
2025-02-17 04:03:15.964 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:03:15.964 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:03:15.966 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:03:15.966 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.138.211
2025-02-17 04:03:15.966 DEBUG [src.node.docker_mananger] Generated ports ['18158', '18159', '18160', '18161', '18162']
2025-02-17 04:03:15.966 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:03:15.966 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:03:15.966 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:03:15.966 DEBUG [src.node.docker_mananger] docker run -i -t -p 18158:18158 -p 18159:18159 -p 18160:18160 -p 18161:18161 -p 18162:18162 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18160 --rest-port=18158 --tcp-port=18159 --discv5-udp-port=18161 --rest-address=0.0.0.0 --nat=extip:172.18.138.211 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e76ece923f0da7738f35e5d1dab90f91fbbe588b0e6dacabf3f28e8ec4c574a3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18162 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QKh7LchzRZpaK9_szkgcFUTNhgwajChuDW5PMV9A9ivmBfzAX0vG-S5T2hTuJ_3849vAmMFPOro8pdJL3szPf24CgmlkgnY0gmlwhKwS3DCKbXVsdGlhZGRyc5YACASsEtwwBhxgAAoErBLcMAYcYd0DgnJzhQADAQAAiXNlY3AyNTZrMaECLdKGCj79DS5r7VgZK1iP85FEMTa4wdTgTGr_40UgypqDdGNwghxgg3VkcIIcYoV3YWt1MgU --filternode=/ip4/172.18.220.48/tcp/7264/p2p/16Uiu2HAkxWYWo9RYHwhAdPZdz2j7gxbU2AdYrtcLHhhdNpP3Bygu
2025-02-17 04:03:16.188 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.138.211 waku 5515d8d9333e167494ea8505d7e5576f07a354feeb7b5fc76a1224ef65ea8e66
2025-02-17 04:03:16.234 DEBUG [src.node.docker_mananger] Container started with ID 5515d8d9333e. Setting up logs at ./log/docker/node2_2025-02-17_04-03-14__54f86e48-78ee-45d9-ad5f-ce42c7aa8cbc__wakuorg_nwaku:latest.log
2025-02-17 04:03:16.234 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18158
2025-02-17 04:03:16.235 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:03:17.235 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18158/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:17.238 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:03:17.238 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:03:17.238 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18158/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:17.241 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.138.211/tcp/18159/p2p/16Uiu2HAmPJLoZQG8fMSMS7cgWJgFcgxZhJ8dztyb2FNhkcqxgRgR","/ip4/172.18.138.211/tcp/18160/ws/p2p/16Uiu2HAmPJLoZQG8fMSMS7cgWJgFcgxZhJ8dztyb2FNhkcqxgRgR"],"enrUri":"enr:-L24QBMsb1p8i9TUIdpXEl83Lf2Pq0kneAExYxIoWSBim_73OLijvN71NbuLP9HnkQQBLrGAzp6sdDN0ErD1O6J3JlwCgmlkgnY0gmlwhKwSitOKbXVsdGlhZGRyc5YACASsEorTBkbvAAoErBKK0wZG8N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDniZ8QscLmSx5_HfTlW-yIzOwKNC6Pe9lGgz4I5WEJRaDdGNwgkbvg3VkcIJG8YV3YWt1MgA"}'
2025-02-17 04:03:17.241 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:03:17.241 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18158/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.220.48/tcp/7264/p2p/16Uiu2HAkxWYWo9RYHwhAdPZdz2j7gxbU2AdYrtcLHhhdNpP3Bygu"]'
2025-02-17 04:03:17.277 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:03:17.280 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-17 04:03:17.280 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7263/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:03:17.298 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:03:17.299 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18158/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "8cffaf5d-01a6-4e83-a92c-55c8e2bee7de", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-17 04:03:17.312 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"8cffaf5d-01a6-4e83-a92c-55c8e2bee7de","statusDesc":"OK"}'
2025-02-17 04:03:17.315 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-17 04:03:17.336 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:03:17.336 DEBUG [src.libs.common] Sleeping for 2 seconds
2025-02-17 04:03:19.336 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-17 04:03:19.337 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18158/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:19.341 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-17 04:03:19.345 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:03:19.346 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:03:19.346 DEBUG [src.node.waku_node] Stopping container with id 1ba2c7b5fa04
2025-02-17 04:03:20.703 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:03:20.704 DEBUG [src.node.waku_node] Stopping container with id 5515d8d9333e
2025-02-17 04:03:21.530 ERROR [src.node.docker_mananger] Max retries reached for container 1ba2c7b5fa04. Exiting log stream.
2025-02-17 04:03:22.188 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:03:22.190 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:03:22.199 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:03:22.204 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
