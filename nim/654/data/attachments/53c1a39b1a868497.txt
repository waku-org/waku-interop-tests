2025-02-17 04:05:23.313 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:05:23.313 DEBUG [tests.conftest] Running test: test_light_push_with_missing_pubsub_topics with id: 2025-02-17_04-05-23__d22ae823-5361-4883-800d-4a5a02f96970
2025-02-17 04:05:23.313 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:05:23.314 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-17 04:05:23.321 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:05:23.321 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-17_04-05-23__d22ae823-5361-4883-800d-4a5a02f96970__wakuorg_nwaku:latest.log
2025-02-17 04:05:23.321 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:05:23.321 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:05:23.323 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:05:23.323 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.76.40
2025-02-17 04:05:23.323 DEBUG [src.node.docker_mananger] Generated ports ['18984', '18985', '18986', '18987', '18988']
2025-02-17 04:05:23.323 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:05:23.323 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:05:23.323 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:05:23.323 DEBUG [src.node.docker_mananger] docker run -i -t -p 18984:18984 -p 18985:18985 -p 18986:18986 -p 18987:18987 -p 18988:18988 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18986 --rest-port=18984 --tcp-port=18985 --discv5-udp-port=18987 --rest-address=0.0.0.0 --nat=extip:172.18.76.40 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6eacfc20bddd3f4e60d85df1dccec66bdeb7bca51f6f9de15ef12cb42cf69ee2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18988 --metrics-logging=true --lightpush=true --relay=true
2025-02-17 04:05:23.562 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.76.40 waku 01f20b44e3882c3750334dd6d76c3bec30e92f06a00c0f900f03e891e3ae8fd4
2025-02-17 04:05:23.619 DEBUG [src.node.docker_mananger] Container started with ID 01f20b44e388. Setting up logs at ./log/docker/receiving_node1_2025-02-17_04-05-23__d22ae823-5361-4883-800d-4a5a02f96970__wakuorg_nwaku:latest.log
2025-02-17 04:05:23.620 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18984
2025-02-17 04:05:23.621 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:05:23.975 ERROR [src.node.docker_mananger] Max retries reached for container 1d35f8fbddea. Exiting log stream.
2025-02-17 04:05:24.621 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18984/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:24.624 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:05:24.625 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:05:24.625 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18984/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:24.627 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.76.40/tcp/18985/p2p/16Uiu2HAm86a3Zbu4JFWKp8fgR4hFWNfKBcPQ4vU2zTDkLj6yBeDC","/ip4/172.18.76.40/tcp/18986/ws/p2p/16Uiu2HAm86a3Zbu4JFWKp8fgR4hFWNfKBcPQ4vU2zTDkLj6yBeDC"],"enrUri":"enr:-L24QNla6UeHm1JxX5NipHRLRB_z9eRy3-YItsYDuyAgbEOcHr-lUn831rYi6sG-sKGAXazK36YsZe4tSup-4yC1WNgCgmlkgnY0gmlwhKwSTCiKbXVsdGlhZGRyc5YACASsEkwoBkopAAoErBJMKAZKKt0DgnJzhQADAQAAiXNlY3AyNTZrMaECvEMvFjN7rgAUbRLBEIImC6hZbOC3BURGCvBr5P0GhyeDdGNwgkopg3VkcIJKK4V3YWt1Mgk"}'
2025-02-17 04:05:24.627 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:05:24.634 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:05:24.634 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-17_04-05-23__d22ae823-5361-4883-800d-4a5a02f96970__wakuorg_nwaku:latest.log
2025-02-17 04:05:24.634 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:05:24.634 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:05:24.635 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:05:24.636 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.39.27
2025-02-17 04:05:24.636 DEBUG [src.node.docker_mananger] Generated ports ['42619', '42620', '42621', '42622', '42623']
2025-02-17 04:05:24.636 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:05:24.636 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:05:24.636 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:05:24.636 DEBUG [src.node.docker_mananger] docker run -i -t -p 42619:42619 -p 42620:42620 -p 42621:42621 -p 42622:42622 -p 42623:42623 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42621 --rest-port=42619 --tcp-port=42620 --discv5-udp-port=42622 --rest-address=0.0.0.0 --nat=extip:172.18.39.27 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5c52f66bdaa50bf6b686fdba75c4ddeaebedc4ccb2fbfcc64bdf3b24f4be3ef0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42623 --metrics-logging=true --lightpush=false --relay=true
2025-02-17 04:05:24.869 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.39.27 waku 7f39e0898125d43a8b6a0d62fb3ec9375dccacf357c1df6c16b262dbcbbe5423
2025-02-17 04:05:24.921 DEBUG [src.node.docker_mananger] Container started with ID 7f39e0898125. Setting up logs at ./log/docker/receiving_node2_2025-02-17_04-05-23__d22ae823-5361-4883-800d-4a5a02f96970__wakuorg_nwaku:latest.log
2025-02-17 04:05:24.922 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42619
2025-02-17 04:05:24.922 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:05:25.922 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42619/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:25.925 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:05:25.925 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:05:25.926 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42619/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:25.928 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.39.27/tcp/42620/p2p/16Uiu2HAkx3jrmM7isRDjGcvpGf3fC2ZemuTZFXwPCtB6xba9Mptf","/ip4/172.18.39.27/tcp/42621/ws/p2p/16Uiu2HAkx3jrmM7isRDjGcvpGf3fC2ZemuTZFXwPCtB6xba9Mptf"],"enrUri":"enr:-L24QEGAZYGiypnX9W1MRCjRPDzQYJ_sCPEMVJWduGTBSyPCMnJNwyAave0tuiGmbt2ue2lVqQlcN9YG9VXcw8hj-oICgmlkgnY0gmlwhKwSJxuKbXVsdGlhZGRyc5YACASsEicbBqZ8AAoErBInGwamfd0DgnJzhQADAQAAiXNlY3AyNTZrMaECJvSrNUh_lJ9-rUWTOT_N-WbE7A432wZQK_xGN15i9ZCDdGNwgqZ8g3VkcIKmfoV3YWt1MgE"}'
2025-02-17 04:05:25.928 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:05:25.928 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42619/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.76.40/tcp/18985/p2p/16Uiu2HAm86a3Zbu4JFWKp8fgR4hFWNfKBcPQ4vU2zTDkLj6yBeDC"]'
2025-02-17 04:05:25.970 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:25.985 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:05:25.987 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-17_04-05-23__d22ae823-5361-4883-800d-4a5a02f96970__wakuorg_nwaku:latest.log
2025-02-17 04:05:25.987 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:05:25.987 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:05:25.990 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:05:25.991 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.140.203
2025-02-17 04:05:25.991 DEBUG [src.node.docker_mananger] Generated ports ['27625', '27626', '27627', '27628', '27629']
2025-02-17 04:05:25.992 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:05:25.992 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:05:25.992 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:05:25.992 DEBUG [src.node.docker_mananger] docker run -i -t -p 27625:27625 -p 27626:27626 -p 27627:27627 -p 27628:27628 -p 27629:27629 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27627 --rest-port=27625 --tcp-port=27626 --discv5-udp-port=27628 --rest-address=0.0.0.0 --nat=extip:172.18.140.203 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0823db555ca4c343ddd2389fb2cc8ef4ec46afa8edf77cf4ba57ff97c47c13ba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27629 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QNla6UeHm1JxX5NipHRLRB_z9eRy3-YItsYDuyAgbEOcHr-lUn831rYi6sG-sKGAXazK36YsZe4tSup-4yC1WNgCgmlkgnY0gmlwhKwSTCiKbXVsdGlhZGRyc5YACASsEkwoBkopAAoErBJMKAZKKt0DgnJzhQADAQAAiXNlY3AyNTZrMaECvEMvFjN7rgAUbRLBEIImC6hZbOC3BURGCvBr5P0GhyeDdGNwgkopg3VkcIJKK4V3YWt1Mgk --lightpushnode=/ip4/172.18.76.40/tcp/18985/p2p/16Uiu2HAm86a3Zbu4JFWKp8fgR4hFWNfKBcPQ4vU2zTDkLj6yBeDC --lightpush=true --relay=false
2025-02-17 04:05:26.233 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.140.203 waku d2727b648de4c0bb1c25df4b796ff56c55b012adc2d6f9f1aced2f253cbbc256
2025-02-17 04:05:26.282 DEBUG [src.node.docker_mananger] Container started with ID d2727b648de4. Setting up logs at ./log/docker/lightpush_node1_2025-02-17_04-05-23__d22ae823-5361-4883-800d-4a5a02f96970__wakuorg_nwaku:latest.log
2025-02-17 04:05:26.282 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27625
2025-02-17 04:05:26.282 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:05:27.283 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27625/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:27.286 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:05:27.286 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:05:27.286 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27625/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:27.289 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.140.203/tcp/27626/p2p/16Uiu2HAmUKk61NWvN2XXtpk2MvoFr1NwXaxmsXNauc6c7CokRvp8","/ip4/172.18.140.203/tcp/27627/ws/p2p/16Uiu2HAmUKk61NWvN2XXtpk2MvoFr1NwXaxmsXNauc6c7CokRvp8"],"enrUri":"enr:-L24QLNE-zWCi4EcvAgZ0oWQOd0lFEfdSTIOgwgY2UUOFtQtFuRQjstxDl5IaO-ytuFp2U3Yq_2n-47bk9GOMCY4YsUCgmlkgnY0gmlwhKwSjMuKbXVsdGlhZGRyc5YACASsEozLBmvqAAoErBKMywZr690DgnJzhQADAQAAiXNlY3AyNTZrMaED6MzT4djUmJ8j5O6W8Xkv8FIyYChOqgJJcXBtVzlKMBGDdGNwgmvqg3VkcIJr7IV3YWt1Mgg"}'
2025-02-17 04:05:27.289 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:05:27.289 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27625/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.76.40/tcp/18985/p2p/16Uiu2HAm86a3Zbu4JFWKp8fgR4hFWNfKBcPQ4vU2zTDkLj6yBeDC"]'
2025-02-17 04:05:27.324 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:27.325 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27625/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.39.27/tcp/42620/p2p/16Uiu2HAkx3jrmM7isRDjGcvpGf3fC2ZemuTZFXwPCtB6xba9Mptf"]'
2025-02-17 04:05:27.352 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:27.353 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18984/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:05:27.360 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:27.361 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42619/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:05:27.367 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:27.372 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27625/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739765127372245760}}'
2025-02-17 04:05:27.381 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:27625/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
2025-02-17 04:05:27.384 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:05:27.384 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:05:27.385 DEBUG [src.node.waku_node] Stopping container with id 01f20b44e388
2025-02-17 04:05:28.124 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:05:28.125 DEBUG [src.node.waku_node] Stopping container with id 7f39e0898125
2025-02-17 04:05:28.938 ERROR [src.node.docker_mananger] Max retries reached for container 01f20b44e388. Exiting log stream.
2025-02-17 04:05:29.645 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:05:29.645 DEBUG [src.node.waku_node] Stopping container with id d2727b648de4
2025-02-17 04:05:30.458 ERROR [src.node.docker_mananger] Max retries reached for container 7f39e0898125. Exiting log stream.
2025-02-17 04:05:31.153 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:05:31.154 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:05:31.161 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:05:31.168 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:05:31.175 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
