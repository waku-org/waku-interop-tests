2025-02-17 04:03:51.766 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:03:51.767 DEBUG [tests.conftest] Running test: test_light_push_with_payload_less_than_150_kb with id: 2025-02-17_04-03-51__5f4a0cdc-15c7-4fb9-b585-468f333b5dbb
2025-02-17 04:03:51.768 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:03:51.769 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-17 04:03:51.778 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:03:51.779 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-17_04-03-51__5f4a0cdc-15c7-4fb9-b585-468f333b5dbb__wakuorg_nwaku:latest.log
2025-02-17 04:03:51.779 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:03:51.779 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:03:51.782 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:03:51.782 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.117.93
2025-02-17 04:03:51.782 DEBUG [src.node.docker_mananger] Generated ports ['2123', '2124', '2125', '2126', '2127']
2025-02-17 04:03:51.783 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:03:51.783 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:03:51.783 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:03:51.783 DEBUG [src.node.docker_mananger] docker run -i -t -p 2123:2123 -p 2124:2124 -p 2125:2125 -p 2126:2126 -p 2127:2127 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2125 --rest-port=2123 --tcp-port=2124 --discv5-udp-port=2126 --rest-address=0.0.0.0 --nat=extip:172.18.117.93 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bc9b6084b9fbca27e8d2a697765c37f1f7f8c027fc107fe5695bc408beb2af7f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2127 --metrics-logging=true --lightpush=true --relay=true
2025-02-17 04:03:52.002 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.117.93 waku 0cb0f7ec6b8919902563355a3389bb00a81f509cb88e0594758351e7e2ef862e
2025-02-17 04:03:52.052 DEBUG [src.node.docker_mananger] Container started with ID 0cb0f7ec6b89. Setting up logs at ./log/docker/receiving_node1_2025-02-17_04-03-51__5f4a0cdc-15c7-4fb9-b585-468f333b5dbb__wakuorg_nwaku:latest.log
2025-02-17 04:03:52.052 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2123
2025-02-17 04:03:52.053 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:03:52.592 ERROR [src.node.docker_mananger] Max retries reached for container c8640384bc53. Exiting log stream.
2025-02-17 04:03:53.053 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2123/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:53.056 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:03:53.056 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:03:53.056 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2123/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:53.058 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.117.93/tcp/2124/p2p/16Uiu2HAmPDeH5yCycZiBfbTaMDL3JvnBtnc5wnBSaxCySs6s8aVp","/ip4/172.18.117.93/tcp/2125/ws/p2p/16Uiu2HAmPDeH5yCycZiBfbTaMDL3JvnBtnc5wnBSaxCySs6s8aVp"],"enrUri":"enr:-L24QKsq9ICYNsSky_s6NGLgeY8phVH3syJtC9Q2sl6-rMy6Z9oOTyKnKzEAL00ayQyhYioEvHRfW2n_3mFjMJEI7hMCgmlkgnY0gmlwhKwSdV2KbXVsdGlhZGRyc5YACASsEnVdBghMAAoErBJ1XQYITd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDnPJXBrmFvMNdiE9IknYrkNkPGZgbCY5bCGB1sQa8cYODdGNwgghMg3VkcIIIToV3YWt1Mgk"}'
2025-02-17 04:03:53.059 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:03:53.065 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:03:53.065 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-17_04-03-51__5f4a0cdc-15c7-4fb9-b585-468f333b5dbb__wakuorg_nwaku:latest.log
2025-02-17 04:03:53.065 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:03:53.066 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:03:53.067 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:03:53.067 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.154.239
2025-02-17 04:03:53.067 DEBUG [src.node.docker_mananger] Generated ports ['64692', '64693', '64694', '64695', '64696']
2025-02-17 04:03:53.067 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:03:53.067 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:03:53.068 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:03:53.068 DEBUG [src.node.docker_mananger] docker run -i -t -p 64692:64692 -p 64693:64693 -p 64694:64694 -p 64695:64695 -p 64696:64696 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64694 --rest-port=64692 --tcp-port=64693 --discv5-udp-port=64695 --rest-address=0.0.0.0 --nat=extip:172.18.154.239 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6bfe60d7a8ed078bbeff0c1d8ca3b238ea1c81ae7da84c443a5d8ed316b6b365 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64696 --metrics-logging=true --lightpush=false --relay=true
2025-02-17 04:03:53.295 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.154.239 waku 98193b7132ab76241bf029b020b392f42032ebae453ebd372a994cbe697e54bb
2025-02-17 04:03:53.339 DEBUG [src.node.docker_mananger] Container started with ID 98193b7132ab. Setting up logs at ./log/docker/receiving_node2_2025-02-17_04-03-51__5f4a0cdc-15c7-4fb9-b585-468f333b5dbb__wakuorg_nwaku:latest.log
2025-02-17 04:03:53.339 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 64692
2025-02-17 04:03:53.340 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:03:54.340 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64692/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:54.343 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:03:54.343 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:03:54.343 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64692/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:54.345 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.154.239/tcp/64693/p2p/16Uiu2HAkwLwGYrpG3eY5gXzjgyQQNvUfNpUa29LJBZVL9a9bpBNQ","/ip4/172.18.154.239/tcp/64694/ws/p2p/16Uiu2HAkwLwGYrpG3eY5gXzjgyQQNvUfNpUa29LJBZVL9a9bpBNQ"],"enrUri":"enr:-L24QIQTOkhMz0A3JLHTMSgsREVjJCaVtXfJMMUMi0oQE6R3HZ9Yne9pYnkkWrJLTDBO4_mtM4sczrWd4pUGQEm7QrsCgmlkgnY0gmlwhKwSmu-KbXVsdGlhZGRyc5YACASsEprvBvy1AAoErBKa7wb8tt0DgnJzhQADAQAAiXNlY3AyNTZrMaECHIDBzKvHK1w6l-I6pyVQ1UgYTwsVi8Z2TxWWORe3K_mDdGNwgvy1g3VkcIL8t4V3YWt1MgE"}'
2025-02-17 04:03:54.345 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:03:54.346 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64692/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.117.93/tcp/2124/p2p/16Uiu2HAmPDeH5yCycZiBfbTaMDL3JvnBtnc5wnBSaxCySs6s8aVp"]'
2025-02-17 04:03:54.382 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:03:54.391 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:03:54.391 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-17_04-03-51__5f4a0cdc-15c7-4fb9-b585-468f333b5dbb__wakuorg_nwaku:latest.log
2025-02-17 04:03:54.391 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:03:54.391 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:03:54.393 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:03:54.393 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.11.251
2025-02-17 04:03:54.393 DEBUG [src.node.docker_mananger] Generated ports ['64578', '64579', '64580', '64581', '64582']
2025-02-17 04:03:54.393 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:03:54.393 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:03:54.394 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:03:54.394 DEBUG [src.node.docker_mananger] docker run -i -t -p 64578:64578 -p 64579:64579 -p 64580:64580 -p 64581:64581 -p 64582:64582 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64580 --rest-port=64578 --tcp-port=64579 --discv5-udp-port=64581 --rest-address=0.0.0.0 --nat=extip:172.18.11.251 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1d574cae7aeede628aa9bf4ff9a90b0f2222c6c57eafee7bbf1ddbdfa0d6bdeb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64582 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QKsq9ICYNsSky_s6NGLgeY8phVH3syJtC9Q2sl6-rMy6Z9oOTyKnKzEAL00ayQyhYioEvHRfW2n_3mFjMJEI7hMCgmlkgnY0gmlwhKwSdV2KbXVsdGlhZGRyc5YACASsEnVdBghMAAoErBJ1XQYITd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDnPJXBrmFvMNdiE9IknYrkNkPGZgbCY5bCGB1sQa8cYODdGNwgghMg3VkcIIIToV3YWt1Mgk --lightpushnode=/ip4/172.18.117.93/tcp/2124/p2p/16Uiu2HAmPDeH5yCycZiBfbTaMDL3JvnBtnc5wnBSaxCySs6s8aVp --lightpush=true --relay=false
2025-02-17 04:03:54.633 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.11.251 waku 1791b0d89a280a52d2d5a730b5643f9f54ce205971143204ce387f3ea257912e
2025-02-17 04:03:54.681 DEBUG [src.node.docker_mananger] Container started with ID 1791b0d89a28. Setting up logs at ./log/docker/lightpush_node1_2025-02-17_04-03-51__5f4a0cdc-15c7-4fb9-b585-468f333b5dbb__wakuorg_nwaku:latest.log
2025-02-17 04:03:54.682 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 64578
2025-02-17 04:03:54.682 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:03:55.683 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64578/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:55.686 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:03:55.686 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:03:55.686 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64578/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:55.689 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.11.251/tcp/64579/p2p/16Uiu2HAmF2hUHWpiUydG9VEo5BxPwkGqVk6xj6RMWbUZs2PgJxmF","/ip4/172.18.11.251/tcp/64580/ws/p2p/16Uiu2HAmF2hUHWpiUydG9VEo5BxPwkGqVk6xj6RMWbUZs2PgJxmF"],"enrUri":"enr:-L24QC2dFggE4d5uHoCFH_KKWuaAJ2Xg71ijaMOcuW5gatHlGMr2LI1vJTAqT38nDN3wTKZUPTQh5Le5oQHJOg2JQJkCgmlkgnY0gmlwhKwSC_uKbXVsdGlhZGRyc5YACASsEgv7BvxDAAoErBIL-wb8RN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDI0cQ6gTWE2Rqwiy4Ft-SlmOmYywyA6jGl1iLghZPs9qDdGNwgvxDg3VkcIL8RYV3YWt1Mgg"}'
2025-02-17 04:03:55.689 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:03:55.689 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64578/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.117.93/tcp/2124/p2p/16Uiu2HAmPDeH5yCycZiBfbTaMDL3JvnBtnc5wnBSaxCySs6s8aVp"]'
2025-02-17 04:03:55.726 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:03:55.727 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64578/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.154.239/tcp/64693/p2p/16Uiu2HAkwLwGYrpG3eY5gXzjgyQQNvUfNpUa29LJBZVL9a9bpBNQ"]'
2025-02-17 04:03:55.755 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:03:55.756 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2123/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:03:55.766 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:03:55.768 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64692/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:03:55.774 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:03:55.776 DEBUG [tests.light_push.test_publish] Running test with payload length of 143360 bytes
2025-02-17 04:03:55.778 DEBUG [src.steps.light_push] Lightpushing message
2025-02-17 04:03:55.780 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-17 04:03:55.935 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:03:55.936 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 04:03:56.036 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-17 04:03:56.037 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2123/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:56.042 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-17 04:03:56.044 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-17 04:03:56.044 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64692/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:56.049 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-17 04:03:56.053 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:03:56.054 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:03:56.054 DEBUG [src.node.waku_node] Stopping container with id 0cb0f7ec6b89
2025-02-17 04:03:57.060 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:03:57.060 DEBUG [src.node.waku_node] Stopping container with id 98193b7132ab
2025-02-17 04:03:57.873 ERROR [src.node.docker_mananger] Max retries reached for container 0cb0f7ec6b89. Exiting log stream.
2025-02-17 04:03:58.325 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:03:58.327 DEBUG [src.node.waku_node] Stopping container with id 1791b0d89a28
2025-02-17 04:03:59.138 ERROR [src.node.docker_mananger] Max retries reached for container 98193b7132ab. Exiting log stream.
2025-02-17 04:03:59.628 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:03:59.629 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:03:59.636 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:03:59.644 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:03:59.669 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
