2025-02-17 04:05:04.444 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:05:04.445 DEBUG [tests.conftest] Running test: test_publish_after_node1_restarts with id: 2025-02-17_04-05-04__a3a0c822-ce0f-44c0-8232-9acced72ddc3
2025-02-17 04:05:04.445 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:05:04.445 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-17 04:05:04.445 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-17 04:05:04.451 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:05:04.451 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_04-05-04__a3a0c822-ce0f-44c0-8232-9acced72ddc3__wakuorg_nwaku:latest.log
2025-02-17 04:05:04.452 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:05:04.452 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:05:04.453 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:05:04.453 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.19.174
2025-02-17 04:05:04.453 DEBUG [src.node.docker_mananger] Generated ports ['53393', '53394', '53395', '53396', '53397']
2025-02-17 04:05:04.453 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:05:04.453 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:05:04.454 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:05:04.454 DEBUG [src.node.docker_mananger] docker run -i -t -p 53393:53393 -p 53394:53394 -p 53395:53395 -p 53396:53396 -p 53397:53397 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53395 --rest-port=53393 --tcp-port=53394 --discv5-udp-port=53396 --rest-address=0.0.0.0 --nat=extip:172.18.19.174 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=56cef6db8fb124c26eb82cc0c8ddeec390fdf6fc5abfb20eaff4e66ddb8c5baa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53397 --metrics-logging=true --relay=true
2025-02-17 04:05:04.690 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.19.174 waku a3737e31c2bda0e249a465f0f7dba579c33dbe4d26da83642c1b30dd701db73b
2025-02-17 04:05:04.739 DEBUG [src.node.docker_mananger] Container started with ID a3737e31c2bd. Setting up logs at ./log/docker/node1_2025-02-17_04-05-04__a3a0c822-ce0f-44c0-8232-9acced72ddc3__wakuorg_nwaku:latest.log
2025-02-17 04:05:04.739 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53393
2025-02-17 04:05:04.740 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:05:05.252 ERROR [src.node.docker_mananger] Max retries reached for container 1478d79289b4. Exiting log stream.
2025-02-17 04:05:05.740 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53393/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:05.743 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:05:05.743 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:05:05.743 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53393/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:05.745 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.19.174/tcp/53394/p2p/16Uiu2HAmDFLYhHFG6CoGQ2gBcX8zZtsVLWgsGj2ghADQnNyCdpAG","/ip4/172.18.19.174/tcp/53395/ws/p2p/16Uiu2HAmDFLYhHFG6CoGQ2gBcX8zZtsVLWgsGj2ghADQnNyCdpAG"],"enrUri":"enr:-L24QPLaI8cdhrPm6LtZVcwk0wWf3gpSw3_QuoHKmTcj1CkxF5jtrx7TmYMURUSzAYxP1tJGiKnrRjhbfWz0UgBtdqQCgmlkgnY0gmlwhKwSE66KbXVsdGlhZGRyc5YACASsEhOuBtCSAAoErBITrgbQk90DgnJzhQADAQAAiXNlY3AyNTZrMaEDCMyVfFCjjSBVcnJTkr4lLaBqFcoi4UELdiEOMgkmIsWDdGNwgtCSg3VkcILQlIV3YWt1MgE"}'
2025-02-17 04:05:05.746 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:05:05.752 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:05:05.752 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-17_04-05-04__a3a0c822-ce0f-44c0-8232-9acced72ddc3__wakuorg_nwaku:latest.log
2025-02-17 04:05:05.752 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:05:05.752 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:05:05.754 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:05:05.754 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.209.163
2025-02-17 04:05:05.754 DEBUG [src.node.docker_mananger] Generated ports ['63002', '63003', '63004', '63005', '63006']
2025-02-17 04:05:05.754 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:05:05.754 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:05:05.754 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:05:05.755 DEBUG [src.node.docker_mananger] docker run -i -t -p 63002:63002 -p 63003:63003 -p 63004:63004 -p 63005:63005 -p 63006:63006 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63004 --rest-port=63002 --tcp-port=63003 --discv5-udp-port=63005 --rest-address=0.0.0.0 --nat=extip:172.18.209.163 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e16f93d5ba5ecf7cda1af3cc369a0ffcea30abfb956cf9ebccae513bd35b3bf5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63006 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QPLaI8cdhrPm6LtZVcwk0wWf3gpSw3_QuoHKmTcj1CkxF5jtrx7TmYMURUSzAYxP1tJGiKnrRjhbfWz0UgBtdqQCgmlkgnY0gmlwhKwSE66KbXVsdGlhZGRyc5YACASsEhOuBtCSAAoErBITrgbQk90DgnJzhQADAQAAiXNlY3AyNTZrMaEDCMyVfFCjjSBVcnJTkr4lLaBqFcoi4UELdiEOMgkmIsWDdGNwgtCSg3VkcILQlIV3YWt1MgE
2025-02-17 04:05:05.984 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.209.163 waku f3b76d90f8bc2ca5fffcf58afb3b45198abf55609c7fa2cd65bc775614d37be5
2025-02-17 04:05:06.027 DEBUG [src.node.docker_mananger] Container started with ID f3b76d90f8bc. Setting up logs at ./log/docker/node2_2025-02-17_04-05-04__a3a0c822-ce0f-44c0-8232-9acced72ddc3__wakuorg_nwaku:latest.log
2025-02-17 04:05:06.028 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63002
2025-02-17 04:05:06.028 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:05:07.028 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63002/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:07.038 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:05:07.041 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:05:07.043 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63002/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:07.048 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.209.163/tcp/63003/p2p/16Uiu2HAmRshkwsyioJmJonCVFLBu13oeDFGcs2hKwnYmfV1VojDQ","/ip4/172.18.209.163/tcp/63004/ws/p2p/16Uiu2HAmRshkwsyioJmJonCVFLBu13oeDFGcs2hKwnYmfV1VojDQ"],"enrUri":"enr:-L24QH7Gm4YmTlhys8zguu66i5NgSkrUwA1_C3_g_1xSHme-JbjPXUOOiEBOE1Pnta_KQnO9hoU7mw3s_eu5X_B5UeUCgmlkgnY0gmlwhKwS0aOKbXVsdGlhZGRyc5YACASsEtGjBvYbAAoErBLRowb2HN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDxGm4RFB1j946NGNlX4pavEHYE9m1QnpzNLb4MljAn6eDdGNwgvYbg3VkcIL2HYV3YWt1MgE"}'
2025-02-17 04:05:07.048 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:05:07.048 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63002/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.19.174/tcp/53394/p2p/16Uiu2HAmDFLYhHFG6CoGQ2gBcX8zZtsVLWgsGj2ghADQnNyCdpAG"]'
2025-02-17 04:05:07.051 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:07.051 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2025-02-17 04:05:07.051 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53393/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:05:07.055 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:07.056 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63002/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:05:07.061 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:07.063 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53393/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:05:07.068 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:07.068 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 04:05:07.168 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-17 04:05:07.169 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53393/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:07.172 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739765107063293952,"ephemeral":false,"proof":""}]'
2025-02-17 04:05:07.173 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-17 04:05:07.173 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63002/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:07.175 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739765107063293952,"ephemeral":false,"proof":""}]'
2025-02-17 04:05:07.177 INFO [src.steps.relay] WARM UP successful!!
2025-02-17 04:05:07.178 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53393/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:05:07.182 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:07.182 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 04:05:07.283 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-17 04:05:07.283 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53393/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:07.286 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739765107178077184,"ephemeral":false,"proof":""}]'
2025-02-17 04:05:07.287 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-17 04:05:07.287 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63002/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:07.290 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739765107178077184,"ephemeral":false,"proof":""}]'
2025-02-17 04:05:07.291 DEBUG [src.node.waku_node] Restarting container with id a3737e31c2bd
2025-02-17 04:05:08.483 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53393/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:08.587 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53393/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:08.589 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:05:08.589 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:05:08.590 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53393/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:08.592 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.19.174/tcp/53394/p2p/16Uiu2HAmDFLYhHFG6CoGQ2gBcX8zZtsVLWgsGj2ghADQnNyCdpAG","/ip4/172.18.19.174/tcp/53395/ws/p2p/16Uiu2HAmDFLYhHFG6CoGQ2gBcX8zZtsVLWgsGj2ghADQnNyCdpAG"],"enrUri":"enr:-L24QPLaI8cdhrPm6LtZVcwk0wWf3gpSw3_QuoHKmTcj1CkxF5jtrx7TmYMURUSzAYxP1tJGiKnrRjhbfWz0UgBtdqQCgmlkgnY0gmlwhKwSE66KbXVsdGlhZGRyc5YACASsEhOuBtCSAAoErBITrgbQk90DgnJzhQADAQAAiXNlY3AyNTZrMaEDCMyVfFCjjSBVcnJTkr4lLaBqFcoi4UELdiEOMgkmIsWDdGNwgtCSg3VkcILQlIV3YWt1MgE"}'
2025-02-17 04:05:08.592 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:05:08.592 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53393/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:05:08.610 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:08.610 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63002/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:05:08.613 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:08.613 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53393/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:05:08.616 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:08.616 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 04:05:08.716 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-17 04:05:08.717 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53393/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:08.719 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739765108613762304,"ephemeral":false,"proof":""}]'
2025-02-17 04:05:08.721 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-17 04:05:08.722 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63002/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:08.724 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-17 04:05:09.725 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53393/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:05:09.728 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:09.728 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63002/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:05:09.731 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:09.731 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53393/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:05:09.733 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:09.734 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 04:05:09.834 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-17 04:05:09.834 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53393/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:09.836 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739765109731500800,"ephemeral":false,"proof":""}]'
2025-02-17 04:05:09.838 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-17 04:05:09.838 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63002/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:09.840 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-17 04:05:10.841 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53393/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:05:10.844 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:10.844 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63002/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:05:10.846 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:10.847 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53393/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:05:10.850 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:10.850 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 04:05:10.950 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-17 04:05:10.950 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53393/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:10.953 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739765110847192576,"ephemeral":false,"proof":""}]'
2025-02-17 04:05:10.954 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-17 04:05:10.954 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63002/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:10.956 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-17 04:05:11.957 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53393/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:05:11.960 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:11.960 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63002/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:05:11.963 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:11.963 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53393/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:05:11.966 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:11.966 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 04:05:12.066 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-17 04:05:12.067 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53393/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:12.069 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739765111963512320,"ephemeral":false,"proof":""}]'
2025-02-17 04:05:12.071 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-17 04:05:12.071 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63002/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:12.073 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-17 04:05:13.074 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53393/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:05:13.077 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:13.077 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63002/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:05:13.079 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:13.079 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53393/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:05:13.084 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:13.084 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 04:05:13.185 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-17 04:05:13.185 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53393/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:13.187 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739765113079927296,"ephemeral":false,"proof":""}]'
2025-02-17 04:05:13.189 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-17 04:05:13.189 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63002/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:13.191 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739765113079927296,"ephemeral":false,"proof":""}]'
2025-02-17 04:05:13.194 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:05:13.195 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:05:13.195 DEBUG [src.node.waku_node] Stopping container with id a3737e31c2bd
2025-02-17 04:05:14.006 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:05:14.007 DEBUG [src.node.waku_node] Stopping container with id f3b76d90f8bc
2025-02-17 04:05:14.854 ERROR [src.node.docker_mananger] Max retries reached for container a3737e31c2bd. Exiting log stream.
2025-02-17 04:05:15.494 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:05:15.497 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:05:15.531 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:05:15.541 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
