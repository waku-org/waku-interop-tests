2025-02-17 04:04:19.450 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:04:19.451 DEBUG [tests.conftest] Running test: test_filter_subscribe_with_multiple_overlapping_content_topics with id: 2025-02-17_04-04-19__9fb46729-1a80-4bbe-833e-947f3bc336ae
2025-02-17 04:04:19.452 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:04:19.452 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-17 04:04:19.452 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-17 04:04:19.460 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:04:19.460 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_04-04-19__9fb46729-1a80-4bbe-833e-947f3bc336ae__wakuorg_nwaku:latest.log
2025-02-17 04:04:19.461 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:04:19.461 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:04:19.463 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:04:19.463 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.91.51
2025-02-17 04:04:19.463 DEBUG [src.node.docker_mananger] Generated ports ['40750', '40751', '40752', '40753', '40754']
2025-02-17 04:04:19.463 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:04:19.463 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:04:19.464 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:04:19.464 DEBUG [src.node.docker_mananger] docker run -i -t -p 40750:40750 -p 40751:40751 -p 40752:40752 -p 40753:40753 -p 40754:40754 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40752 --rest-port=40750 --tcp-port=40751 --discv5-udp-port=40753 --rest-address=0.0.0.0 --nat=extip:172.18.91.51 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fcf75fe5ffb44cf1af8fcca9cc0a8c735cb81fe5ba832afaea1aecc6cdcefafd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40754 --metrics-logging=true --relay=true --filter=true
2025-02-17 04:04:19.694 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.91.51 waku 0a6b57240eca0190e5ce6ede3350fa2901c186454dfb64c6afdbb49291b21846
2025-02-17 04:04:19.745 DEBUG [src.node.docker_mananger] Container started with ID 0a6b57240eca. Setting up logs at ./log/docker/node1_2025-02-17_04-04-19__9fb46729-1a80-4bbe-833e-947f3bc336ae__wakuorg_nwaku:latest.log
2025-02-17 04:04:19.746 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40750
2025-02-17 04:04:19.746 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:04:20.277 ERROR [src.node.docker_mananger] Max retries reached for container c02952e4add4. Exiting log stream.
2025-02-17 04:04:20.746 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40750/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:20.749 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:04:20.749 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:04:20.749 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40750/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:20.751 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.91.51/tcp/40751/p2p/16Uiu2HAkz97sAm46LSmXMMqzUtt8hnr68uPudYe4brWz32ehfr4z","/ip4/172.18.91.51/tcp/40752/ws/p2p/16Uiu2HAkz97sAm46LSmXMMqzUtt8hnr68uPudYe4brWz32ehfr4z"],"enrUri":"enr:-L24QBwmYB4ysmdBNgig6cMLJ3C-mn9L4uw_5mW_8zpKlQlxchWSuEpcpoahsR9WCMlSn49u6PE5D0GXT4GXJhgLE8cCgmlkgnY0gmlwhKwSWzOKbXVsdGlhZGRyc5YACASsElszBp8vAAoErBJbMwafMN0DgnJzhQADAQAAiXNlY3AyNTZrMaECRgzUfMGEqxPdWi4aOClqIqOqATF5Gad65qkm7HP3W5uDdGNwgp8vg3VkcIKfMYV3YWt1MgU"}'
2025-02-17 04:04:20.752 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:04:20.752 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-17 04:04:20.758 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:04:20.758 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-17_04-04-19__9fb46729-1a80-4bbe-833e-947f3bc336ae__wakuorg_nwaku:latest.log
2025-02-17 04:04:20.758 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:04:20.758 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:04:20.759 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:04:20.759 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.227.183
2025-02-17 04:04:20.760 DEBUG [src.node.docker_mananger] Generated ports ['18138', '18139', '18140', '18141', '18142']
2025-02-17 04:04:20.760 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:04:20.760 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:04:20.760 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:04:20.760 DEBUG [src.node.docker_mananger] docker run -i -t -p 18138:18138 -p 18139:18139 -p 18140:18140 -p 18141:18141 -p 18142:18142 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18140 --rest-port=18138 --tcp-port=18139 --discv5-udp-port=18141 --rest-address=0.0.0.0 --nat=extip:172.18.227.183 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=83af4c4ac5f4ff1aaaaf979d14a6daaced6df5a2fee8f7ad8b1eb86ec4a1f7b2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18142 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QBwmYB4ysmdBNgig6cMLJ3C-mn9L4uw_5mW_8zpKlQlxchWSuEpcpoahsR9WCMlSn49u6PE5D0GXT4GXJhgLE8cCgmlkgnY0gmlwhKwSWzOKbXVsdGlhZGRyc5YACASsElszBp8vAAoErBJbMwafMN0DgnJzhQADAQAAiXNlY3AyNTZrMaECRgzUfMGEqxPdWi4aOClqIqOqATF5Gad65qkm7HP3W5uDdGNwgp8vg3VkcIKfMYV3YWt1MgU --filternode=/ip4/172.18.91.51/tcp/40751/p2p/16Uiu2HAkz97sAm46LSmXMMqzUtt8hnr68uPudYe4brWz32ehfr4z
2025-02-17 04:04:20.985 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.227.183 waku 8d7d4d668d7319a3d3326bb6844298f8c4db75871c2ce5f302e2751f7c893395
2025-02-17 04:04:21.044 DEBUG [src.node.docker_mananger] Container started with ID 8d7d4d668d73. Setting up logs at ./log/docker/node2_2025-02-17_04-04-19__9fb46729-1a80-4bbe-833e-947f3bc336ae__wakuorg_nwaku:latest.log
2025-02-17 04:04:21.044 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18138
2025-02-17 04:04:21.044 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:04:22.045 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18138/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:22.047 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:04:22.048 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:04:22.048 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18138/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:22.050 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.227.183/tcp/18139/p2p/16Uiu2HAmFHDY8KncDnnM5AJAdW4zhwXqdQJ7icCykdZoNiYqKPi4","/ip4/172.18.227.183/tcp/18140/ws/p2p/16Uiu2HAmFHDY8KncDnnM5AJAdW4zhwXqdQJ7icCykdZoNiYqKPi4"],"enrUri":"enr:-L24QP81Y4NJCqhaT9_jghDcj1VIvyNIZgVKnkOfp54u9cazLmEIksGh5Kf1ZE8iyfP7LlxTrJv0qgK8rafkz-ZU5-YCgmlkgnY0gmlwhKwS47eKbXVsdGlhZGRyc5YACASsEuO3BkbbAAoErBLjtwZG3N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJv8xgnAIm4MDPAow6KgHOvs3VIquXikIc7JiI2RuZVWDdGNwgkbbg3VkcIJG3YV3YWt1MgA"}'
2025-02-17 04:04:22.050 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:04:22.051 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18138/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.91.51/tcp/40751/p2p/16Uiu2HAkz97sAm46LSmXMMqzUtt8hnr68uPudYe4brWz32ehfr4z"]'
2025-02-17 04:04:22.086 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:22.089 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40750/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:04:22.107 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:22.108 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18138/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1aa36dcc-02b0-4262-a37b-57f3d85a4526", "contentFilters": ["Hello World!", "1234567890", "{\"key\": \"value\"}"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-17 04:04:22.120 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1aa36dcc-02b0-4262-a37b-57f3d85a4526","statusDesc":"OK"}'
2025-02-17 04:04:22.120 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40750/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:04:22.123 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:22.123 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18138/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "9811f03b-f040-42c2-9da5-4129e26dccc0", "contentFilters": ["1234567890", "{\"key\": \"value\"}", "\u8fd9\u662f\u4e00\u4e9b\u4e2d\u6587"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-17 04:04:22.131 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"9811f03b-f040-42c2-9da5-4129e26dccc0","statusDesc":"OK"}'
2025-02-17 04:04:22.132 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40750/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "Hello World!", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:04:22.140 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:22.140 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 04:04:22.240 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-17 04:04:22.240 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18138/filter/v2/messages/Hello%20World%21" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:22.243 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"Hello World!","version":0,"timestamp":1739765062131966976,"ephemeral":false}]'
2025-02-17 04:04:22.244 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40750/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:04:22.249 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:22.249 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 04:04:22.349 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-17 04:04:22.350 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18138/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:22.352 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1739765062244853504,"ephemeral":false}]'
2025-02-17 04:04:22.354 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40750/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "{\"key\": \"value\"}", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:04:22.359 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:22.359 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 04:04:22.459 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-17 04:04:22.460 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18138/filter/v2/messages/%7B%22key%22%3A%20%22value%22%7D" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:22.462 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"{\\"key\\": \\"value\\"}","version":0,"timestamp":1739765062354011648,"ephemeral":false}]'
2025-02-17 04:04:22.463 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40750/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "\u8fd9\u662f\u4e00\u4e9b\u4e2d\u6587", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:04:22.468 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:22.468 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 04:04:22.568 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-17 04:04:22.569 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18138/filter/v2/messages/%E8%BF%99%E6%98%AF%E4%B8%80%E4%BA%9B%E4%B8%AD%E6%96%87" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:22.571 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"\xe8\xbf\x99\xe6\x98\xaf\xe4\xb8\x80\xe4\xba\x9b\xe4\xb8\xad\xe6\x96\x87","version":0,"timestamp":1739765062463868160,"ephemeral":false}]'
2025-02-17 04:04:22.574 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:04:22.575 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:04:22.575 DEBUG [src.node.waku_node] Stopping container with id 0a6b57240eca
2025-02-17 04:04:23.334 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:23.335 DEBUG [src.node.waku_node] Stopping container with id 8d7d4d668d73
2025-02-17 04:04:24.146 ERROR [src.node.docker_mananger] Max retries reached for container 0a6b57240eca. Exiting log stream.
2025-02-17 04:04:24.816 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:24.817 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:04:24.823 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:04:24.829 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
