2025-02-17 04:03:03.529 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:03:03.530 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_all_with_invalid_request_id with id: 2025-02-17_04-03-03__eeba4153-b31b-4392-a95c-b0e73b8ca43f
2025-02-17 04:03:03.530 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:03:03.530 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-17 04:03:03.530 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-17 04:03:03.537 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:03:03.537 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_04-03-03__eeba4153-b31b-4392-a95c-b0e73b8ca43f__wakuorg_nwaku:latest.log
2025-02-17 04:03:03.537 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:03:03.537 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:03:03.539 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:03:03.539 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.13.3
2025-02-17 04:03:03.539 DEBUG [src.node.docker_mananger] Generated ports ['36323', '36324', '36325', '36326', '36327']
2025-02-17 04:03:03.539 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:03:03.539 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:03:03.539 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:03:03.539 DEBUG [src.node.docker_mananger] docker run -i -t -p 36323:36323 -p 36324:36324 -p 36325:36325 -p 36326:36326 -p 36327:36327 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36325 --rest-port=36323 --tcp-port=36324 --discv5-udp-port=36326 --rest-address=0.0.0.0 --nat=extip:172.18.13.3 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=af1a9dfaeeccaccd9a0eff851c99a12a67da1bcaf975af6fd8d8fa16e574ce4e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36327 --metrics-logging=true --relay=true --filter=true
2025-02-17 04:03:03.766 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.13.3 waku 12b4ca43970e395905615b90a8d999e1fab4e339e009e73f3d439e3342f6babe
2025-02-17 04:03:03.816 DEBUG [src.node.docker_mananger] Container started with ID 12b4ca43970e. Setting up logs at ./log/docker/node1_2025-02-17_04-03-03__eeba4153-b31b-4392-a95c-b0e73b8ca43f__wakuorg_nwaku:latest.log
2025-02-17 04:03:03.816 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36323
2025-02-17 04:03:03.817 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:03:04.333 ERROR [src.node.docker_mananger] Max retries reached for container b98f7d2729e7. Exiting log stream.
2025-02-17 04:03:04.817 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36323/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:04.820 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:03:04.821 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:03:04.821 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36323/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:04.823 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.13.3/tcp/36324/p2p/16Uiu2HAmAQNe7JcT3GhkjM2Foi2d8zaPmFEwzLyo6kuHTnEr3QRw","/ip4/172.18.13.3/tcp/36325/ws/p2p/16Uiu2HAmAQNe7JcT3GhkjM2Foi2d8zaPmFEwzLyo6kuHTnEr3QRw"],"enrUri":"enr:-L24QBvD1GtnGKT50Sowc_G9RUh_xBTBpTC31l1dL-me-lnhe9RLnz7xTtrzPFTHW52JRUUes6gpd5A_09hrPYtGuxYCgmlkgnY0gmlwhKwSDQOKbXVsdGlhZGRyc5YACASsEg0DBo3kAAoErBINAwaN5d0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3ooeDRYsXOAjwESu9Y2OlFEleBhwTicONeAKwsGwV6KDdGNwgo3kg3VkcIKN5oV3YWt1MgU"}'
2025-02-17 04:03:04.823 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:03:04.824 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-17 04:03:04.830 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:03:04.830 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-17_04-03-03__eeba4153-b31b-4392-a95c-b0e73b8ca43f__wakuorg_nwaku:latest.log
2025-02-17 04:03:04.830 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:03:04.830 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:03:04.832 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:03:04.832 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.238.135
2025-02-17 04:03:04.832 DEBUG [src.node.docker_mananger] Generated ports ['18005', '18006', '18007', '18008', '18009']
2025-02-17 04:03:04.832 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:03:04.832 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:03:04.833 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:03:04.833 DEBUG [src.node.docker_mananger] docker run -i -t -p 18005:18005 -p 18006:18006 -p 18007:18007 -p 18008:18008 -p 18009:18009 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18007 --rest-port=18005 --tcp-port=18006 --discv5-udp-port=18008 --rest-address=0.0.0.0 --nat=extip:172.18.238.135 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=35d35629a0d19adc3f80c8ddfc767ddb794bef33c057ddff7209564ccf16977b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18009 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QBvD1GtnGKT50Sowc_G9RUh_xBTBpTC31l1dL-me-lnhe9RLnz7xTtrzPFTHW52JRUUes6gpd5A_09hrPYtGuxYCgmlkgnY0gmlwhKwSDQOKbXVsdGlhZGRyc5YACASsEg0DBo3kAAoErBINAwaN5d0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3ooeDRYsXOAjwESu9Y2OlFEleBhwTicONeAKwsGwV6KDdGNwgo3kg3VkcIKN5oV3YWt1MgU --filternode=/ip4/172.18.13.3/tcp/36324/p2p/16Uiu2HAmAQNe7JcT3GhkjM2Foi2d8zaPmFEwzLyo6kuHTnEr3QRw
2025-02-17 04:03:05.070 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.238.135 waku 0cb832cc5b0c8b93d947cb0f47ed0b68779310b2d7b1fd08b2b485ea907f14c7
2025-02-17 04:03:05.116 DEBUG [src.node.docker_mananger] Container started with ID 0cb832cc5b0c. Setting up logs at ./log/docker/node2_2025-02-17_04-03-03__eeba4153-b31b-4392-a95c-b0e73b8ca43f__wakuorg_nwaku:latest.log
2025-02-17 04:03:05.117 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18005
2025-02-17 04:03:05.117 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:03:06.118 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18005/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:06.121 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:03:06.121 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:03:06.121 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18005/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:03:06.124 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.238.135/tcp/18006/p2p/16Uiu2HAmTG6et6CB7rLVKdCTaDAsJx2PvTQCjxCMWBJ9X8DguDDm","/ip4/172.18.238.135/tcp/18007/ws/p2p/16Uiu2HAmTG6et6CB7rLVKdCTaDAsJx2PvTQCjxCMWBJ9X8DguDDm"],"enrUri":"enr:-L24QEUHj0EN7EljxJ13Uaq9hVTwqFbxVZIjClMAq5uY0aDTSsIRZo3tjFMWpj_WvaQ5pKK31iqWN2nhpXLQE6OCaYcCgmlkgnY0gmlwhKwS7oeKbXVsdGlhZGRyc5YACASsEu6HBkZWAAoErBLuhwZGV90DgnJzhQADAQAAiXNlY3AyNTZrMaED2QISjKAvuzZ84HwCDeKPATqV8qiVdIzEOl-Ea8V5SmSDdGNwgkZWg3VkcIJGWIV3YWt1MgA"}'
2025-02-17 04:03:06.124 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:03:06.124 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18005/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.13.3/tcp/36324/p2p/16Uiu2HAmAQNe7JcT3GhkjM2Foi2d8zaPmFEwzLyo6kuHTnEr3QRw"]'
2025-02-17 04:03:06.163 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:03:06.163 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-17 04:03:06.164 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36323/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:03:06.181 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:03:06.182 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18005/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "8233c53d-684b-4f47-abb3-a742d7b94412", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-17 04:03:06.193 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"8233c53d-684b-4f47-abb3-a742d7b94412","statusDesc":"OK"}'
2025-02-17 04:03:06.195 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:18005/filter/v2/subscriptions/all" -H "Content-Type: application/json" -d '{"requestId": 1}'
2025-02-17 04:03:06.197 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:18005/filter/v2/subscriptions/all. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2025-02-17 04:03:06.200 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:03:06.201 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:03:06.201 DEBUG [src.node.waku_node] Stopping container with id 12b4ca43970e
2025-02-17 04:03:07.306 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:03:07.307 DEBUG [src.node.waku_node] Stopping container with id 0cb832cc5b0c
2025-02-17 04:03:08.120 ERROR [src.node.docker_mananger] Max retries reached for container 12b4ca43970e. Exiting log stream.
2025-02-17 04:03:08.822 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:03:08.823 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:03:08.828 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:03:08.832 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
