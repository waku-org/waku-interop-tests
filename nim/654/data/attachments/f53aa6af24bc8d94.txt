2025-02-17 04:07:20.121 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:07:20.121 DEBUG [tests.conftest] Running test: test_main_node_only_lightpush__peer_only_relay with id: 2025-02-17_04-07-20__dc9093e2-b39e-472b-ac55-2882deccf4a9
2025-02-17 04:07:20.121 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:07:20.121 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-17 04:07:20.128 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:07:20.129 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-17_04-07-20__dc9093e2-b39e-472b-ac55-2882deccf4a9__wakuorg_nwaku:latest.log
2025-02-17 04:07:20.129 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:07:20.129 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:07:20.130 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:07:20.131 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.81.13
2025-02-17 04:07:20.131 DEBUG [src.node.docker_mananger] Generated ports ['17274', '17275', '17276', '17277', '17278']
2025-02-17 04:07:20.131 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:07:20.131 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:07:20.131 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:07:20.131 DEBUG [src.node.docker_mananger] docker run -i -t -p 17274:17274 -p 17275:17275 -p 17276:17276 -p 17277:17277 -p 17278:17278 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17276 --rest-port=17274 --tcp-port=17275 --discv5-udp-port=17277 --rest-address=0.0.0.0 --nat=extip:172.18.81.13 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fb45e99efb9e8f61a39a1dd90fb1680cdc4da6babab9e5dd771ec4d3909e918d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17278 --metrics-logging=true --lightpush=false --relay=true
2025-02-17 04:07:20.358 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.81.13 waku f13d61fa05e33495dc2ddf382ba43a187c3ff1c6b779c5ba4d0dad1e03d1a358
2025-02-17 04:07:20.410 DEBUG [src.node.docker_mananger] Container started with ID f13d61fa05e3. Setting up logs at ./log/docker/receiving_node1_2025-02-17_04-07-20__dc9093e2-b39e-472b-ac55-2882deccf4a9__wakuorg_nwaku:latest.log
2025-02-17 04:07:20.411 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17274
2025-02-17 04:07:20.412 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:07:20.921 ERROR [src.node.docker_mananger] Max retries reached for container 284f6dcfba3a. Exiting log stream.
2025-02-17 04:07:21.412 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17274/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:21.415 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:07:21.415 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:07:21.415 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17274/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:21.418 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.81.13/tcp/17275/p2p/16Uiu2HAkwozmw5UZK9itgkxgWfMgdnfNPvYZECoc5BR3JoaC2UAp","/ip4/172.18.81.13/tcp/17276/ws/p2p/16Uiu2HAkwozmw5UZK9itgkxgWfMgdnfNPvYZECoc5BR3JoaC2UAp"],"enrUri":"enr:-L24QG_9REF8T-a2U0OIvW5w_rsneXEl4ARFXmpdAHeN7TfrJDkxbmg1n7xaxeGH-mlsKrBIw4DcVa24zsQMBYquMKgCgmlkgnY0gmlwhKwSUQ2KbXVsdGlhZGRyc5YACASsElENBkN7AAoErBJRDQZDfN0DgnJzhQADAQAAiXNlY3AyNTZrMaECI29nX8Ih_RhsTWvVmYNJXo8U3uYyrPqIgi0k4Ofa1H2DdGNwgkN7g3VkcIJDfYV3YWt1MgE"}'
2025-02-17 04:07:21.418 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:07:21.418 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17274/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:07:21.433 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:07:21.440 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:07:21.440 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-17_04-07-20__dc9093e2-b39e-472b-ac55-2882deccf4a9__wakuorg_nwaku:latest.log
2025-02-17 04:07:21.440 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:07:21.441 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:07:21.442 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:07:21.442 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.106.251
2025-02-17 04:07:21.442 DEBUG [src.node.docker_mananger] Generated ports ['62825', '62826', '62827', '62828', '62829']
2025-02-17 04:07:21.442 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:07:21.443 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:07:21.443 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:07:21.443 DEBUG [src.node.docker_mananger] docker run -i -t -p 62825:62825 -p 62826:62826 -p 62827:62827 -p 62828:62828 -p 62829:62829 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62827 --rest-port=62825 --tcp-port=62826 --discv5-udp-port=62828 --rest-address=0.0.0.0 --nat=extip:172.18.106.251 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3b0cbbf54d1abbceeb1ffeb2113e5f260a1beaf169bd03ad3a58d82e8a5e1fec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62829 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QG_9REF8T-a2U0OIvW5w_rsneXEl4ARFXmpdAHeN7TfrJDkxbmg1n7xaxeGH-mlsKrBIw4DcVa24zsQMBYquMKgCgmlkgnY0gmlwhKwSUQ2KbXVsdGlhZGRyc5YACASsElENBkN7AAoErBJRDQZDfN0DgnJzhQADAQAAiXNlY3AyNTZrMaECI29nX8Ih_RhsTWvVmYNJXo8U3uYyrPqIgi0k4Ofa1H2DdGNwgkN7g3VkcIJDfYV3YWt1MgE --lightpushnode=/ip4/172.18.81.13/tcp/17275/p2p/16Uiu2HAkwozmw5UZK9itgkxgWfMgdnfNPvYZECoc5BR3JoaC2UAp --lightpush=true --relay=false
2025-02-17 04:07:21.677 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.106.251 waku e19151f02821dbdebb1adc87595da438af11e0954fd29cde5955482f40e6aa8b
2025-02-17 04:07:21.727 DEBUG [src.node.docker_mananger] Container started with ID e19151f02821. Setting up logs at ./log/docker/lightpush_node1_2025-02-17_04-07-20__dc9093e2-b39e-472b-ac55-2882deccf4a9__wakuorg_nwaku:latest.log
2025-02-17 04:07:21.728 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 62825
2025-02-17 04:07:21.728 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:07:22.728 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62825/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:22.731 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:07:22.731 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:07:22.732 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62825/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:22.734 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.106.251/tcp/62826/p2p/16Uiu2HAmJym7Y2ju561wSTrjbskTwhgUNLppHGiQRRAuQYg1HsAX","/ip4/172.18.106.251/tcp/62827/ws/p2p/16Uiu2HAmJym7Y2ju561wSTrjbskTwhgUNLppHGiQRRAuQYg1HsAX"],"enrUri":"enr:-L24QFxQe_MLhJW6noFyXYS5Uie95Q6lXFqqtSoDicZmEEu1KeVBSMYK8nhKv_WOhwHyTpacnbzXxNKI2ePC2wKxar0CgmlkgnY0gmlwhKwSavuKbXVsdGlhZGRyc5YACASsEmr7BvVqAAoErBJq-wb1a90DgnJzhQADAQAAiXNlY3AyNTZrMaEDXfUwjOOox2zs1MSBNWIz4wBFq503D3rx515sS1eNQlCDdGNwgvVqg3VkcIL1bIV3YWt1Mgg"}'
2025-02-17 04:07:22.734 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:07:22.734 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62825/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.81.13/tcp/17275/p2p/16Uiu2HAkwozmw5UZK9itgkxgWfMgdnfNPvYZECoc5BR3JoaC2UAp"]'
2025-02-17 04:07:22.771 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:07:22.773 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62825/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739765242773430272}}'
2025-02-17 04:07:22.794 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:62825/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2025-02-17 04:07:22.797 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:07:22.798 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:07:22.798 DEBUG [src.node.waku_node] Stopping container with id f13d61fa05e3
2025-02-17 04:07:23.900 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:07:23.901 DEBUG [src.node.waku_node] Stopping container with id e19151f02821
2025-02-17 04:07:24.713 ERROR [src.node.docker_mananger] Max retries reached for container f13d61fa05e3. Exiting log stream.
2025-02-17 04:07:25.390 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:07:25.391 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:07:25.396 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:07:25.401 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
