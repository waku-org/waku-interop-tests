2025-02-17 04:06:52.690 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:06:52.690 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_all_from_90_content_topics with id: 2025-02-17_04-06-52__b6eec4f1-35c1-4f7e-bce9-59843a815240
2025-02-17 04:06:52.690 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:06:52.690 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-17 04:06:52.691 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-17 04:06:52.697 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:06:52.697 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_04-06-52__b6eec4f1-35c1-4f7e-bce9-59843a815240__wakuorg_nwaku:latest.log
2025-02-17 04:06:52.697 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:06:52.697 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:06:52.699 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:06:52.699 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.71.84
2025-02-17 04:06:52.699 DEBUG [src.node.docker_mananger] Generated ports ['33397', '33398', '33399', '33400', '33401']
2025-02-17 04:06:52.699 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:06:52.699 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:06:52.700 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:06:52.700 DEBUG [src.node.docker_mananger] docker run -i -t -p 33397:33397 -p 33398:33398 -p 33399:33399 -p 33400:33400 -p 33401:33401 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33399 --rest-port=33397 --tcp-port=33398 --discv5-udp-port=33400 --rest-address=0.0.0.0 --nat=extip:172.18.71.84 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=496f36b257c04157e7b5cbd6ce8a770fca23ed30fb4de7d124f661712adfbcf7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33401 --metrics-logging=true --relay=true --filter=true
2025-02-17 04:06:52.940 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.71.84 waku 278dce3c8ae7b391f2ac3aa8e78755707ba66029238f9ba3e2ea61b2f9845eb4
2025-02-17 04:06:52.991 DEBUG [src.node.docker_mananger] Container started with ID 278dce3c8ae7. Setting up logs at ./log/docker/node1_2025-02-17_04-06-52__b6eec4f1-35c1-4f7e-bce9-59843a815240__wakuorg_nwaku:latest.log
2025-02-17 04:06:52.992 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 33397
2025-02-17 04:06:52.992 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:06:53.498 ERROR [src.node.docker_mananger] Max retries reached for container c26caefd64e5. Exiting log stream.
2025-02-17 04:06:53.992 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33397/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:53.996 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:06:53.996 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:06:53.996 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33397/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:53.998 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.71.84/tcp/33398/p2p/16Uiu2HAmNK49dTrUM2ttF6JBtcdoQXpR8PjnNLMfUa8Zm3VHTo9b","/ip4/172.18.71.84/tcp/33399/ws/p2p/16Uiu2HAmNK49dTrUM2ttF6JBtcdoQXpR8PjnNLMfUa8Zm3VHTo9b"],"enrUri":"enr:-L24QJozzhoI-87Sk5uDYcuHHMGaqSZ2HBLe3Z3msY9lDKewTdw32DkgASRCkzYObljEYIT0OAkrCmX3LsohzH0mk1ACgmlkgnY0gmlwhKwSR1SKbXVsdGlhZGRyc5YACASsEkdUBoJ2AAoErBJHVAaCd90DgnJzhQADAQAAiXNlY3AyNTZrMaEDj3mMb6OG96CLJgcoW5t1vkZtzM6DkM0_op8PJwQMAXqDdGNwgoJ2g3VkcIKCeIV3YWt1MgU"}'
2025-02-17 04:06:53.999 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:06:53.999 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-17 04:06:54.005 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:06:54.006 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-17_04-06-52__b6eec4f1-35c1-4f7e-bce9-59843a815240__wakuorg_nwaku:latest.log
2025-02-17 04:06:54.006 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:06:54.006 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:06:54.007 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:06:54.007 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.106.149
2025-02-17 04:06:54.008 DEBUG [src.node.docker_mananger] Generated ports ['65444', '65445', '65446', '65447', '65448']
2025-02-17 04:06:54.008 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:06:54.008 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:06:54.008 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:06:54.008 DEBUG [src.node.docker_mananger] docker run -i -t -p 65444:65444 -p 65445:65445 -p 65446:65446 -p 65447:65447 -p 65448:65448 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65446 --rest-port=65444 --tcp-port=65445 --discv5-udp-port=65447 --rest-address=0.0.0.0 --nat=extip:172.18.106.149 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5dbe9c8f5cf04cd66e6a37fbfbdc3fb13b9c67f456d7dea6d04edc12a32edec0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65448 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QJozzhoI-87Sk5uDYcuHHMGaqSZ2HBLe3Z3msY9lDKewTdw32DkgASRCkzYObljEYIT0OAkrCmX3LsohzH0mk1ACgmlkgnY0gmlwhKwSR1SKbXVsdGlhZGRyc5YACASsEkdUBoJ2AAoErBJHVAaCd90DgnJzhQADAQAAiXNlY3AyNTZrMaEDj3mMb6OG96CLJgcoW5t1vkZtzM6DkM0_op8PJwQMAXqDdGNwgoJ2g3VkcIKCeIV3YWt1MgU --filternode=/ip4/172.18.71.84/tcp/33398/p2p/16Uiu2HAmNK49dTrUM2ttF6JBtcdoQXpR8PjnNLMfUa8Zm3VHTo9b
2025-02-17 04:06:54.242 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.106.149 waku 9ddb0115fa0d3df2d9ac41a82a9b933d45dc80586314a6623c7470ef33145db1
2025-02-17 04:06:54.289 DEBUG [src.node.docker_mananger] Container started with ID 9ddb0115fa0d. Setting up logs at ./log/docker/node2_2025-02-17_04-06-52__b6eec4f1-35c1-4f7e-bce9-59843a815240__wakuorg_nwaku:latest.log
2025-02-17 04:06:54.290 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 65444
2025-02-17 04:06:54.290 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:06:55.291 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65444/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:55.294 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:06:55.294 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:06:55.294 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65444/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:55.297 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.106.149/tcp/65445/p2p/16Uiu2HAmFADtEcjXa3kV1q3sLFmiEEdHQ35g8iePKuJULvendtnA","/ip4/172.18.106.149/tcp/65446/ws/p2p/16Uiu2HAmFADtEcjXa3kV1q3sLFmiEEdHQ35g8iePKuJULvendtnA"],"enrUri":"enr:-L24QKgZDPGPIkhw41JKuXxHFJ7aV7zEtk7qz-OZM7fp0shZOl6BQthYHmWB5fwRC-gXz_KU2j_nmIDMyk2OLKquLm0CgmlkgnY0gmlwhKwSapWKbXVsdGlhZGRyc5YACASsEmqVBv-lAAoErBJqlQb_pt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJTSFDg7rUOe3mXvFz6OiycD7ughiRgEJ688Koss3CbeDdGNwgv-lg3VkcIL_p4V3YWt1MgA"}'
2025-02-17 04:06:55.297 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:06:55.297 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65444/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.71.84/tcp/33398/p2p/16Uiu2HAmNK49dTrUM2ttF6JBtcdoQXpR8PjnNLMfUa8Zm3VHTo9b"]'
2025-02-17 04:06:55.335 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:55.341 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33397/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:06:55.353 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:55.356 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65444/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "ff1ff2ca-0dee-49b2-be55-4358937f9af4", "contentFilters": ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-17 04:06:55.372 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"ff1ff2ca-0dee-49b2-be55-4358937f9af4","statusDesc":"OK"}'
2025-02-17 04:06:55.372 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33397/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:06:55.375 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:55.375 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65444/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "d2d176e5-eba7-46dc-a9ba-07b30570b745", "contentFilters": ["31", "32", "33", "34", "35", "36", "37", "38", "39", "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "50", "51", "52", "53", "54", "55", "56", "57", "58", "59", "60"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-17 04:06:55.392 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"d2d176e5-eba7-46dc-a9ba-07b30570b745","statusDesc":"OK"}'
2025-02-17 04:06:55.393 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33397/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:06:55.395 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:55.396 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65444/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "5835f0ec-c3ff-4328-87f8-d040f9a04190", "contentFilters": ["61", "62", "63", "64", "65", "66", "67", "68", "69", "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", "80", "81", "82", "83", "84", "85", "86", "87", "88", "89", "90"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-17 04:06:55.417 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"5835f0ec-c3ff-4328-87f8-d040f9a04190","statusDesc":"OK"}'
2025-02-17 04:06:55.417 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33397/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "2", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:55.442 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:55.442 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 04:06:55.543 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-17 04:06:55.543 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65444/filter/v2/messages/2" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:55.546 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"2","version":0,"timestamp":1739765215417691648,"ephemeral":false}]'
2025-02-17 04:06:55.548 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33397/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "52", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:55.570 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:55.570 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 04:06:55.671 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-17 04:06:55.671 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65444/filter/v2/messages/52" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:55.674 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"52","version":0,"timestamp":1739765215548077056,"ephemeral":false}]'
2025-02-17 04:06:55.676 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33397/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "68", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:55.698 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:55.698 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 04:06:55.798 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-17 04:06:55.799 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65444/filter/v2/messages/68" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:55.801 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"68","version":0,"timestamp":1739765215675986688,"ephemeral":false}]'
2025-02-17 04:06:55.803 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:65444/filter/v2/subscriptions/all" -H "Content-Type: application/json" -d '{"requestId": "1"}'
2025-02-17 04:06:55.813 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
2025-02-17 04:06:55.814 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33397/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "13", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:55.818 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:55.818 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 04:06:55.918 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-17 04:06:55.919 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65444/filter/v2/messages/13" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:55.921 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:65444/filter/v2/messages/13. Response content: b'Not subscribed to topic: 13'
2025-02-17 04:06:55.923 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33397/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "39", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:55.927 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:55.927 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 04:06:56.027 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-17 04:06:56.028 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65444/filter/v2/messages/39" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:56.031 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:65444/filter/v2/messages/39. Response content: b'Not subscribed to topic: 39'
2025-02-17 04:06:56.032 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33397/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "63", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:06:56.036 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:06:56.036 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 04:06:56.137 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-17 04:06:56.137 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65444/filter/v2/messages/63" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:06:56.140 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:65444/filter/v2/messages/63. Response content: b'Not subscribed to topic: 63'
2025-02-17 04:06:56.143 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:06:56.144 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:06:56.144 DEBUG [src.node.waku_node] Stopping container with id 278dce3c8ae7
2025-02-17 04:06:57.596 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:06:57.596 DEBUG [src.node.waku_node] Stopping container with id 9ddb0115fa0d
2025-02-17 04:06:58.409 ERROR [src.node.docker_mananger] Max retries reached for container 278dce3c8ae7. Exiting log stream.
2025-02-17 04:06:59.140 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:06:59.142 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:06:59.150 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:06:59.156 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
