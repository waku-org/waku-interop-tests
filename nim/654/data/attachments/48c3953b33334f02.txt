2025-02-17 04:05:15.550 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:05:15.551 DEBUG [tests.conftest] Running test: test_relay_unsubscribe_from_non_existing_pubsub_topic with id: 2025-02-17_04-05-15__3896f183-6270-4c07-9503-e365e8fccec9
2025-02-17 04:05:15.552 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:05:15.553 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-17 04:05:15.553 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-17 04:05:15.562 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:05:15.562 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_04-05-15__3896f183-6270-4c07-9503-e365e8fccec9__wakuorg_nwaku:latest.log
2025-02-17 04:05:15.562 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:05:15.562 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:05:15.565 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:05:15.566 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.65.126
2025-02-17 04:05:15.566 DEBUG [src.node.docker_mananger] Generated ports ['5535', '5536', '5537', '5538', '5539']
2025-02-17 04:05:15.566 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:05:15.566 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:05:15.566 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:05:15.566 DEBUG [src.node.docker_mananger] docker run -i -t -p 5535:5535 -p 5536:5536 -p 5537:5537 -p 5538:5538 -p 5539:5539 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5537 --rest-port=5535 --tcp-port=5536 --discv5-udp-port=5538 --rest-address=0.0.0.0 --nat=extip:172.18.65.126 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fdeddaa077cfbc666a6f3522cae0fc15dfab31bfdcfd6d5b903ff04dd6eae790 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5539 --metrics-logging=true --relay=true
2025-02-17 04:05:15.803 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.65.126 waku 46171a68ed7c001a926b60346ff4114def6430108d19cd8e4a59c7192760c587
2025-02-17 04:05:15.850 DEBUG [src.node.docker_mananger] Container started with ID 46171a68ed7c. Setting up logs at ./log/docker/node1_2025-02-17_04-05-15__3896f183-6270-4c07-9503-e365e8fccec9__wakuorg_nwaku:latest.log
2025-02-17 04:05:15.851 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 5535
2025-02-17 04:05:15.851 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:05:16.397 ERROR [src.node.docker_mananger] Max retries reached for container f3b76d90f8bc. Exiting log stream.
2025-02-17 04:05:16.852 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5535/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:16.854 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:05:16.854 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:05:16.854 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5535/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:16.857 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.65.126/tcp/5536/p2p/16Uiu2HAmFvvZASLyurFaH5cApyiQS1tqF9zkFmhoqwQhXdeUinTX","/ip4/172.18.65.126/tcp/5537/ws/p2p/16Uiu2HAmFvvZASLyurFaH5cApyiQS1tqF9zkFmhoqwQhXdeUinTX"],"enrUri":"enr:-L24QFePJ8ntgUmqcrE33yTowjZc2GghnGSRkSMRBW86eLnTJC3liktSGdOeVg30YmyoYmgJIMnoOqHwZSXLbMX7AyoCgmlkgnY0gmlwhKwSQX6KbXVsdGlhZGRyc5YACASsEkF-BhWgAAoErBJBfgYVod0DgnJzhQADAQAAiXNlY3AyNTZrMaEDMKgP-Hs4QwsB_kLTiMZqa4amauoXp6LHdXgpaxr_2I6DdGNwghWgg3VkcIIVooV3YWt1MgE"}'
2025-02-17 04:05:16.857 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:05:16.863 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:05:16.863 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-17_04-05-15__3896f183-6270-4c07-9503-e365e8fccec9__wakuorg_nwaku:latest.log
2025-02-17 04:05:16.863 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:05:16.863 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:05:16.864 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:05:16.865 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.107.211
2025-02-17 04:05:16.865 DEBUG [src.node.docker_mananger] Generated ports ['30484', '30485', '30486', '30487', '30488']
2025-02-17 04:05:16.865 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:05:16.865 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:05:16.865 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:05:16.865 DEBUG [src.node.docker_mananger] docker run -i -t -p 30484:30484 -p 30485:30485 -p 30486:30486 -p 30487:30487 -p 30488:30488 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30486 --rest-port=30484 --tcp-port=30485 --discv5-udp-port=30487 --rest-address=0.0.0.0 --nat=extip:172.18.107.211 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a77affe3a1e3afbb3eaffdfb29fff53978fa215b99ba967c04a7aeefdab0ad09 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30488 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QFePJ8ntgUmqcrE33yTowjZc2GghnGSRkSMRBW86eLnTJC3liktSGdOeVg30YmyoYmgJIMnoOqHwZSXLbMX7AyoCgmlkgnY0gmlwhKwSQX6KbXVsdGlhZGRyc5YACASsEkF-BhWgAAoErBJBfgYVod0DgnJzhQADAQAAiXNlY3AyNTZrMaEDMKgP-Hs4QwsB_kLTiMZqa4amauoXp6LHdXgpaxr_2I6DdGNwghWgg3VkcIIVooV3YWt1MgE
2025-02-17 04:05:17.096 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.107.211 waku f6822577837b118cc4718f5e3cd5b844edc6c936fbc37c9947261350632c1f85
2025-02-17 04:05:17.143 DEBUG [src.node.docker_mananger] Container started with ID f6822577837b. Setting up logs at ./log/docker/node2_2025-02-17_04-05-15__3896f183-6270-4c07-9503-e365e8fccec9__wakuorg_nwaku:latest.log
2025-02-17 04:05:17.143 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 30484
2025-02-17 04:05:17.143 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:05:18.144 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30484/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:18.157 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:05:18.160 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:05:18.160 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30484/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:18.163 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.107.211/tcp/30485/p2p/16Uiu2HAmUpNDAcAKw1aa29isxP28Uqc9H1pafeEJWdx1tehr9adF","/ip4/172.18.107.211/tcp/30486/ws/p2p/16Uiu2HAmUpNDAcAKw1aa29isxP28Uqc9H1pafeEJWdx1tehr9adF"],"enrUri":"enr:-L24QAHLz3Tq52xqwrvRM4Uo8LhGd601kjMs-yz4aMvr_VHxbT_bjFIqiVda1EioylJQ8lI8t98ckvx8c4yJRaJ8VAwCgmlkgnY0gmlwhKwSa9OKbXVsdGlhZGRyc5YACASsEmvTBncVAAoErBJr0wZ3Ft0DgnJzhQADAQAAiXNlY3AyNTZrMaED8CHvamQNdB-ZuVltxjJiv0T7sgoxBTSX5gmxWGl_yOqDdGNwgncVg3VkcIJ3F4V3YWt1MgE"}'
2025-02-17 04:05:18.164 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:05:18.165 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30484/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.65.126/tcp/5536/p2p/16Uiu2HAmFvvZASLyurFaH5cApyiQS1tqF9zkFmhoqwQhXdeUinTX"]'
2025-02-17 04:05:18.168 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:18.169 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5535/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:05:18.173 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:18.174 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30484/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 04:05:18.179 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:18.180 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5535/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:05:18.185 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:18.185 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 04:05:18.285 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-17 04:05:18.286 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5535/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:18.288 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739765118180347648,"ephemeral":false,"proof":""}]'
2025-02-17 04:05:18.290 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-17 04:05:18.290 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30484/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:18.293 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739765118180347648,"ephemeral":false,"proof":""}]'
2025-02-17 04:05:18.294 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:5535/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1000"]'
2025-02-17 04:05:18.297 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:18.297 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:30484/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1000"]'
2025-02-17 04:05:18.299 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:18.300 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5535/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:05:18.304 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:05:18.304 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 04:05:18.404 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-17 04:05:18.405 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5535/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:18.407 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739765118300004096,"ephemeral":false,"proof":""}]'
2025-02-17 04:05:18.409 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-17 04:05:18.409 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30484/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:05:18.412 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739765118300004096,"ephemeral":false,"proof":""}]'
2025-02-17 04:05:18.414 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:05:18.415 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:05:18.416 DEBUG [src.node.waku_node] Stopping container with id 46171a68ed7c
2025-02-17 04:05:19.340 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:05:19.341 DEBUG [src.node.waku_node] Stopping container with id f6822577837b
2025-02-17 04:05:20.152 ERROR [src.node.docker_mananger] Max retries reached for container 46171a68ed7c. Exiting log stream.
2025-02-17 04:05:20.830 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:05:20.832 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:05:20.840 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:05:20.848 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
