2025-02-17 04:04:35.071 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:04:35.072 DEBUG [tests.conftest] Running test: test_publish_without_subscribing_via_api_works with id: 2025-02-17_04-04-35__ad045901-d3d0-43db-9e2a-8010f85211d1
2025-02-17 04:04:35.072 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:04:35.072 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-17 04:04:35.072 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-17 04:04:35.080 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:04:35.080 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_04-04-35__ad045901-d3d0-43db-9e2a-8010f85211d1__wakuorg_nwaku:latest.log
2025-02-17 04:04:35.081 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:04:35.081 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:04:35.082 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:04:35.082 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.137.51
2025-02-17 04:04:35.082 DEBUG [src.node.docker_mananger] Generated ports ['44717', '44718', '44719', '44720', '44721']
2025-02-17 04:04:35.083 DEBUG [src.node.waku_node] Cluster id was resolved to: 2
2025-02-17 04:04:35.083 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:04:35.083 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:04:35.083 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:04:35.083 DEBUG [src.node.docker_mananger] docker run -i -t -p 44717:44717 -p 44718:44718 -p 44719:44719 -p 44720:44720 -p 44721:44721 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44719 --rest-port=44717 --tcp-port=44718 --discv5-udp-port=44720 --rest-address=0.0.0.0 --nat=extip:172.18.137.51 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=92bd4e12ecfc3d44ba86f7fedff1799ed836ef0efc70dfd585987f60dc8fdc78 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44721 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
2025-02-17 04:04:35.311 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.137.51 waku ed2abff2c99f0af78ad2a231da65a0817511bf0785580ea42e786f3b181e225a
2025-02-17 04:04:35.361 DEBUG [src.node.docker_mananger] Container started with ID ed2abff2c99f. Setting up logs at ./log/docker/node1_2025-02-17_04-04-35__ad045901-d3d0-43db-9e2a-8010f85211d1__wakuorg_nwaku:latest.log
2025-02-17 04:04:35.362 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44717
2025-02-17 04:04:35.362 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:04:35.873 ERROR [src.node.docker_mananger] Max retries reached for container c1d7c1a094c5. Exiting log stream.
2025-02-17 04:04:36.363 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44717/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:36.366 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:04:36.366 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:04:36.366 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44717/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:36.368 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.137.51/tcp/44718/p2p/16Uiu2HAmQhLMQJAK3mX9QeM9z8eX7vEtZiQ1r46FtFY2YGSCxQhh","/ip4/172.18.137.51/tcp/44719/ws/p2p/16Uiu2HAmQhLMQJAK3mX9QeM9z8eX7vEtZiQ1r46FtFY2YGSCxQhh"],"enrUri":"enr:-L24QJgXDzyoSf0sZB8sk8626k0ys2xnlf5xqK38wv1Kpw22ar1HUPgLPirrtV9NT2NMQpphLTYKOnNDRkQyzN8z0F8CgmlkgnY0gmlwhKwSiTOKbXVsdGlhZGRyc5YACASsEokzBq6uAAoErBKJMwaur90DgnJzhQACAQAAiXNlY3AyNTZrMaEDsuYFYFoouDNzjtMLmZOk6FY18XP-DQwxhE91m1MxHJyDdGNwgq6ug3VkcIKusIV3YWt1MgU"}'
2025-02-17 04:04:36.368 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:04:36.375 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:04:36.375 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-17_04-04-35__ad045901-d3d0-43db-9e2a-8010f85211d1__wakuorg_nwaku:latest.log
2025-02-17 04:04:36.375 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:04:36.375 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:04:36.376 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:04:36.376 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.106.96
2025-02-17 04:04:36.377 DEBUG [src.node.docker_mananger] Generated ports ['49936', '49937', '49938', '49939', '49940']
2025-02-17 04:04:36.377 DEBUG [src.node.waku_node] Cluster id was resolved to: 2
2025-02-17 04:04:36.377 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:04:36.377 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:04:36.377 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:04:36.377 DEBUG [src.node.docker_mananger] docker run -i -t -p 49936:49936 -p 49937:49937 -p 49938:49938 -p 49939:49939 -p 49940:49940 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49938 --rest-port=49936 --tcp-port=49937 --discv5-udp-port=49939 --rest-address=0.0.0.0 --nat=extip:172.18.106.96 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=631fb35b8abbdf50dc49c43234ebeacacef4eb0cd653c9fbddcfcac9fc9f0ead --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49940 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QJgXDzyoSf0sZB8sk8626k0ys2xnlf5xqK38wv1Kpw22ar1HUPgLPirrtV9NT2NMQpphLTYKOnNDRkQyzN8z0F8CgmlkgnY0gmlwhKwSiTOKbXVsdGlhZGRyc5YACASsEokzBq6uAAoErBKJMwaur90DgnJzhQACAQAAiXNlY3AyNTZrMaEDsuYFYFoouDNzjtMLmZOk6FY18XP-DQwxhE91m1MxHJyDdGNwgq6ug3VkcIKusIV3YWt1MgU --pubsub-topic=/waku/2/rs/2/0
2025-02-17 04:04:36.599 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.106.96 waku f3bf98c2bfcd8ebe8504828a8d6b0bbb5962302334c068c8e47948ec5656e9f6
2025-02-17 04:04:36.655 DEBUG [src.node.docker_mananger] Container started with ID f3bf98c2bfcd. Setting up logs at ./log/docker/node2_2025-02-17_04-04-35__ad045901-d3d0-43db-9e2a-8010f85211d1__wakuorg_nwaku:latest.log
2025-02-17 04:04:36.655 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49936
2025-02-17 04:04:36.655 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:04:37.656 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49936/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:37.664 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:04:37.664 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:04:37.664 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49936/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:04:37.667 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.106.96/tcp/49937/p2p/16Uiu2HAkv1R2Gshj4dVMB4DNNWJrW4WNS4KXE57D8wv78EfttHKz","/ip4/172.18.106.96/tcp/49938/ws/p2p/16Uiu2HAkv1R2Gshj4dVMB4DNNWJrW4WNS4KXE57D8wv78EfttHKz"],"enrUri":"enr:-L24QCVadHRszV0VVvFzewUDdFUxqFMTdFmRYavSBOZdSKOFcqkheSzbKQ0ru4fnmNKbf8SsNALwqw_Y4-yoNoNKmx8CgmlkgnY0gmlwhKwSamCKbXVsdGlhZGRyc5YACASsEmpgBsMRAAoErBJqYAbDEt0DgnJzhQACAQAAiXNlY3AyNTZrMaECCKTV15tOk6Dawp69wzLBbpAdgEvmlDoO6chBC5NXbzWDdGNwgsMRg3VkcILDE4V3YWt1MgE"}'
2025-02-17 04:04:37.669 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:04:37.669 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49936/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.137.51/tcp/44718/p2p/16Uiu2HAmQhLMQJAK3mX9QeM9z8eX7vEtZiQ1r46FtFY2YGSCxQhh"]'
2025-02-17 04:04:37.673 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:37.673 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44717/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:04:37.679 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:37.679 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49936/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:04:37.684 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:04:37.686 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:04:37.687 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:04:37.687 DEBUG [src.node.waku_node] Stopping container with id ed2abff2c99f
2025-02-17 04:04:38.840 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:38.840 DEBUG [src.node.waku_node] Stopping container with id f3bf98c2bfcd
2025-02-17 04:04:39.666 ERROR [src.node.docker_mananger] Max retries reached for container ed2abff2c99f. Exiting log stream.
2025-02-17 04:04:40.315 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:04:40.317 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:04:40.327 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:04:40.332 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
