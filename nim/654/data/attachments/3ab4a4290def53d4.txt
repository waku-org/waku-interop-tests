2025-02-17 04:07:17.813 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 04:07:17.813 DEBUG [tests.conftest] Running test: test_store_node_paused_and_unpaused with id: 2025-02-17_04-07-17__233e0aec-2cc0-453a-a345-e0fe756ff007
2025-02-17 04:07:17.814 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 04:07:17.814 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-17 04:07:17.814 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-17 04:07:17.820 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:07:17.820 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-17_04-07-17__233e0aec-2cc0-453a-a345-e0fe756ff007__wakuorg_nwaku:latest.log
2025-02-17 04:07:17.821 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:07:17.821 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:07:17.822 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:07:17.822 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.95.183
2025-02-17 04:07:17.822 DEBUG [src.node.docker_mananger] Generated ports ['42303', '42304', '42305', '42306', '42307']
2025-02-17 04:07:17.822 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:07:17.822 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:07:17.823 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:07:17.823 DEBUG [src.node.docker_mananger] docker run -i -t -p 42303:42303 -p 42304:42304 -p 42305:42305 -p 42306:42306 -p 42307:42307 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42305 --rest-port=42303 --tcp-port=42304 --discv5-udp-port=42306 --rest-address=0.0.0.0 --nat=extip:172.18.95.183 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=feafd06b75fafc3cc9d21007f2d1ffe785ba4be27497835cfe131dc0ab4a3ddc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42307 --metrics-logging=true --store=true --relay=true
2025-02-17 04:07:18.054 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.95.183 waku e082408838c8e93d62530f40a3b6f7a843a23bc7d24e0e6ac4a09549762c0257
2025-02-17 04:07:18.107 DEBUG [src.node.docker_mananger] Container started with ID e082408838c8. Setting up logs at ./log/docker/publishing_node1_2025-02-17_04-07-17__233e0aec-2cc0-453a-a345-e0fe756ff007__wakuorg_nwaku:latest.log
2025-02-17 04:07:18.109 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42303
2025-02-17 04:07:18.109 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:07:18.608 ERROR [src.node.docker_mananger] Max retries reached for container 3cf26149d62d. Exiting log stream.
2025-02-17 04:07:19.109 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42303/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:19.112 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:07:19.112 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:07:19.113 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42303/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:19.115 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.95.183/tcp/42304/p2p/16Uiu2HAmBi39QsYHkrwrt9JL7pMzNTSKw9AaGCqeNmUAtNpvmtig","/ip4/172.18.95.183/tcp/42305/ws/p2p/16Uiu2HAmBi39QsYHkrwrt9JL7pMzNTSKw9AaGCqeNmUAtNpvmtig"],"enrUri":"enr:-L24QAsFViADd18KrgKnOFxX_jXAuapE3cpBWRYgtjm7Vql8K2rCwKl3vM0f5rjc6atFkJJgPVme8BtztMDk5xc4pPQCgmlkgnY0gmlwhKwSX7eKbXVsdGlhZGRyc5YACASsEl-3BqVAAAoErBJftwalQd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC8ew3T81z7lUGhaUkuVy6QyqOhF-pjE68HGb8Z_PO_O2DdGNwgqVAg3VkcIKlQoV3YWt1MgM"}'
2025-02-17 04:07:19.115 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:07:19.122 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 04:07:19.122 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-17_04-07-17__233e0aec-2cc0-453a-a345-e0fe756ff007__wakuorg_nwaku:latest.log
2025-02-17 04:07:19.122 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 04:07:19.122 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 04:07:19.123 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 04:07:19.124 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.15.17
2025-02-17 04:07:19.124 DEBUG [src.node.docker_mananger] Generated ports ['42979', '42980', '42981', '42982', '42983']
2025-02-17 04:07:19.124 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 04:07:19.124 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 04:07:19.124 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 04:07:19.124 DEBUG [src.node.docker_mananger] docker run -i -t -p 42979:42979 -p 42980:42980 -p 42981:42981 -p 42982:42982 -p 42983:42983 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42981 --rest-port=42979 --tcp-port=42980 --discv5-udp-port=42982 --rest-address=0.0.0.0 --nat=extip:172.18.15.17 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=35c52cb1ebd859fcdc35b5ca598bf1ee4666ad36f7d5c0a1deddecd944f0c91c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42983 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QAsFViADd18KrgKnOFxX_jXAuapE3cpBWRYgtjm7Vql8K2rCwKl3vM0f5rjc6atFkJJgPVme8BtztMDk5xc4pPQCgmlkgnY0gmlwhKwSX7eKbXVsdGlhZGRyc5YACASsEl-3BqVAAAoErBJftwalQd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC8ew3T81z7lUGhaUkuVy6QyqOhF-pjE68HGb8Z_PO_O2DdGNwgqVAg3VkcIKlQoV3YWt1MgM --storenode=/ip4/172.18.95.183/tcp/42304/p2p/16Uiu2HAmBi39QsYHkrwrt9JL7pMzNTSKw9AaGCqeNmUAtNpvmtig --store=true --relay=true
2025-02-17 04:07:19.359 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.15.17 waku 1d9d6a2907e3c2a6f5d18df483905a3081bc940c7178dbda316770ecb2ed23f8
2025-02-17 04:07:19.409 DEBUG [src.node.docker_mananger] Container started with ID 1d9d6a2907e3. Setting up logs at ./log/docker/store_node1_2025-02-17_04-07-17__233e0aec-2cc0-453a-a345-e0fe756ff007__wakuorg_nwaku:latest.log
2025-02-17 04:07:19.409 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42979
2025-02-17 04:07:19.411 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:07:20.411 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42979/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:20.415 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:07:20.415 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:07:20.415 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42979/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:20.417 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.15.17/tcp/42980/p2p/16Uiu2HAmUYVPU68wMMNu8zisDAPyVnw2w2hAV5rqTPZopNv4fRoF","/ip4/172.18.15.17/tcp/42981/ws/p2p/16Uiu2HAmUYVPU68wMMNu8zisDAPyVnw2w2hAV5rqTPZopNv4fRoF"],"enrUri":"enr:-L24QNQIgFIXm-RznA38TSMGfTVPESdL8KJ9AiHReFnFvzQAVFeSz15e2ExGyIUfC9HtodvfOMGuBI-7mpYDNCYj0tsCgmlkgnY0gmlwhKwSDxGKbXVsdGlhZGRyc5YACASsEg8RBqfkAAoErBIPEQan5d0DgnJzhQADAQAAiXNlY3AyNTZrMaED7BDCDb6Ec3PDgeHnRx618Mfu9hq6ydxM7t7V--qn79qDdGNwgqfkg3VkcIKn5oV3YWt1MgM"}'
2025-02-17 04:07:20.417 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:07:20.418 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42979/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.95.183/tcp/42304/p2p/16Uiu2HAmBi39QsYHkrwrt9JL7pMzNTSKw9AaGCqeNmUAtNpvmtig"]'
2025-02-17 04:07:20.420 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:07:20.421 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42303/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:07:20.423 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:07:20.423 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42979/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 04:07:20.426 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:07:20.427 DEBUG [src.steps.store] Relaying message
2025-02-17 04:07:20.427 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42303/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:07:20.432 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:07:20.432 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:07:20.633 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-17 04:07:20.633 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42303/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:20.636 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x6fbcfd30c1a069337b275e4cbe0b375db027c574ab529d8c49ee9a6ffef38b88"}]}'
2025-02-17 04:07:20.637 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-17 04:07:20.637 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42979/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:20.640 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x6fbcfd30c1a069337b275e4cbe0b375db027c574ab529d8c49ee9a6ffef38b88"}]}'
2025-02-17 04:07:20.640 DEBUG [src.node.waku_node] Pausing container with id 1d9d6a2907e3
2025-02-17 04:07:20.649 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 04:07:21.649 DEBUG [src.node.waku_node] Unpause container with id 1d9d6a2907e3
2025-02-17 04:07:21.659 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42979/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:21.662 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 04:07:21.662 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 04:07:21.662 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42979/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:21.664 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.15.17/tcp/42980/p2p/16Uiu2HAmUYVPU68wMMNu8zisDAPyVnw2w2hAV5rqTPZopNv4fRoF","/ip4/172.18.15.17/tcp/42981/ws/p2p/16Uiu2HAmUYVPU68wMMNu8zisDAPyVnw2w2hAV5rqTPZopNv4fRoF"],"enrUri":"enr:-L24QNQIgFIXm-RznA38TSMGfTVPESdL8KJ9AiHReFnFvzQAVFeSz15e2ExGyIUfC9HtodvfOMGuBI-7mpYDNCYj0tsCgmlkgnY0gmlwhKwSDxGKbXVsdGlhZGRyc5YACASsEg8RBqfkAAoErBIPEQan5d0DgnJzhQADAQAAiXNlY3AyNTZrMaED7BDCDb6Ec3PDgeHnRx618Mfu9hq6ydxM7t7V--qn79qDdGNwgqfkg3VkcIKn5oV3YWt1MgM"}'
2025-02-17 04:07:21.664 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 04:07:21.665 DEBUG [src.steps.store] Relaying message
2025-02-17 04:07:21.665 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42303/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 04:07:21.671 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 04:07:21.671 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 04:07:21.872 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-17 04:07:21.873 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42303/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:21.876 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x6fbcfd30c1a069337b275e4cbe0b375db027c574ab529d8c49ee9a6ffef38b88"},{"messageHash":"0x22a7bc7e5acb0b84062b7568614c83e4bc445b81651203ef1dadd8f79a5200dc"}]}'
2025-02-17 04:07:21.876 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-17 04:07:21.877 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42979/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:21.879 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x6fbcfd30c1a069337b275e4cbe0b375db027c574ab529d8c49ee9a6ffef38b88"},{"messageHash":"0x22a7bc7e5acb0b84062b7568614c83e4bc445b81651203ef1dadd8f79a5200dc"}]}'
2025-02-17 04:07:21.880 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42303/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:21.882 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x6fbcfd30c1a069337b275e4cbe0b375db027c574ab529d8c49ee9a6ffef38b88"},{"messageHash":"0x22a7bc7e5acb0b84062b7568614c83e4bc445b81651203ef1dadd8f79a5200dc"}]}'
2025-02-17 04:07:21.883 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42979/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-17 04:07:21.886 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x6fbcfd30c1a069337b275e4cbe0b375db027c574ab529d8c49ee9a6ffef38b88"},{"messageHash":"0x22a7bc7e5acb0b84062b7568614c83e4bc445b81651203ef1dadd8f79a5200dc"}]}'
2025-02-17 04:07:21.887 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 04:07:21.888 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 04:07:21.888 DEBUG [src.node.waku_node] Stopping container with id e082408838c8
2025-02-17 04:07:22.639 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:07:22.639 DEBUG [src.node.waku_node] Stopping container with id 1d9d6a2907e3
2025-02-17 04:07:23.398 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 04:07:23.399 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 04:07:23.405 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 04:07:23.411 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
