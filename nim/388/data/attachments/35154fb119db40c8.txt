[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_content_topic_and_pubsub_topic_not_in_docker_flags with id: 2024-10-11_04-30-02__a05cb82b-0dba-42e9-a803-9a5e7fc6b97f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-11_04-30-02__a05cb82b-0dba-42e9-a803-9a5e7fc6b97f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.128.240
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['63744', '63745', '63746', '63747', '63748']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 63744:63744 -p 63745:63745 -p 63746:63746 -p 63747:63747 -p 63748:63748 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63746 --rest-port=63744 --tcp-port=63745 --discv5-udp-port=63747 --rest-address=0.0.0.0 --nat=extip:172.18.128.240 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ac3a5c7ded8aed7dfb73aef1b6fc27f7fb137eb46226dccadc8cc184fa9dfdd5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63748 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.128.240 waku bad78487840293daebcb51f4277bb6ec6611f528cd9f90f89832209d99ad1920
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID bad784878402. Setting up logs at ./log/docker/node1_2024-10-11_04-30-02__a05cb82b-0dba-42e9-a803-9a5e7fc6b97f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 63744
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63744/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63744/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.128.240/tcp/63745/p2p/16Uiu2HAmSS7mDdxGEur1ac3Z19gU1tBRM3a2p4Ryo253ev7sMDML","/ip4/172.18.128.240/tcp/63746/ws/p2p/16Uiu2HAmSS7mDdxGEur1ac3Z19gU1tBRM3a2p4Ryo253ev7sMDML"],"enrUri":"enr:-LO4QCEKOhdOvp5M3BfRmxL-rZ6jyEkHsk0f_76WEwu0C_V0PvM8zTrafQxBJAuGG_Wpp4v-72EaQptFDWbrU028loQBgmlkgnY0gmlwhKwSgPCKbXVsdGlhZGRyc4wACgSsEoDwBvkC3QOCcnOFAAIBAACJc2VjcDI1NmsxoQPMt3KnV3ghnBh8NB1TihlAXK3xS70LMw8ftb3lXOGKC4N0Y3CC-QGDdWRwgvkDhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-11_04-30-02__a05cb82b-0dba-42e9-a803-9a5e7fc6b97f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.106.253
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['15585', '15586', '15587', '15588', '15589']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 15585:15585 -p 15586:15586 -p 15587:15587 -p 15588:15588 -p 15589:15589 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15587 --rest-port=15585 --tcp-port=15586 --discv5-udp-port=15588 --rest-address=0.0.0.0 --nat=extip:172.18.106.253 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=7bee6bd016a68c95afc28edbd0d11d94dcb03dfa43dafb14ebb0d0a8bce42b06 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15589 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QCEKOhdOvp5M3BfRmxL-rZ6jyEkHsk0f_76WEwu0C_V0PvM8zTrafQxBJAuGG_Wpp4v-72EaQptFDWbrU028loQBgmlkgnY0gmlwhKwSgPCKbXVsdGlhZGRyc4wACgSsEoDwBvkC3QOCcnOFAAIBAACJc2VjcDI1NmsxoQPMt3KnV3ghnBh8NB1TihlAXK3xS70LMw8ftb3lXOGKC4N0Y3CC-QGDdWRwgvkDhXdha3UyBQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.106.253 waku 76c10f0ca780b7e22e87264d266c7fb1fa200c004e66fe71d85242ce00303abb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 76c10f0ca780. Setting up logs at ./log/docker/node2_2024-10-11_04-30-02__a05cb82b-0dba-42e9-a803-9a5e7fc6b97f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 15585
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15585/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15585/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.106.253/tcp/15586/p2p/16Uiu2HAmFgCo6Z2LnrcQuwtiN21BRx8vSiXtcuRv7yNkcD6qqeoz","/ip4/172.18.106.253/tcp/15587/ws/p2p/16Uiu2HAmFgCo6Z2LnrcQuwtiN21BRx8vSiXtcuRv7yNkcD6qqeoz"],"enrUri":"enr:-LO4QJZJam5BqMXSxHXW7AG_cKYGD2r0eLXP5wTsJmWurJLpV2qDqeu_cImfqrNW0zzWMalTlrmcRY6vb75mTWLlyNEBgmlkgnY0gmlwhKwSav2KbXVsdGlhZGRyc4wACgSsEmr9Bjzj3QOCcnOFAAIBAACJc2VjcDI1NmsxoQMs4raPp8_RP_XV8XdWZIdUqpzdbIGpJndH7YqsRz0e-YN0Y3CCPOKDdWRwgjzkhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15585/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.128.240/tcp/63745/p2p/16Uiu2HAmSS7mDdxGEur1ac3Z19gU1tBRM3a2p4Ryo253ev7sMDML"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63744/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15585/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63744/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63744/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728621006871809024,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15585/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728621006871809024,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id bad784878402
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 76c10f0ca780
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.