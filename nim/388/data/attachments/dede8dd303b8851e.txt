[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_with_extra_field with id: 2024-10-11_04-18-35__56580e31-69d5-4124-9ba2-92627b7c9672
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-11_04-18-35__56580e31-69d5-4124-9ba2-92627b7c9672__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.147.131
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['9951', '9952', '9953', '9954', '9955']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 9951:9951 -p 9952:9952 -p 9953:9953 -p 9954:9954 -p 9955:9955 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9953 --rest-port=9951 --tcp-port=9952 --discv5-udp-port=9954 --rest-address=0.0.0.0 --nat=extip:172.18.147.131 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0a1ad7d153e5bf1bbff1ecf9bacba9ad9aee5bfb5daadffabcf9adcfe7aadcd9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9955 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.147.131 waku 70e2ad07ace868b9560dc8c311d147c8b95b1c0c4389b94df801afbb0e611c31
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 70e2ad07ace8. Setting up logs at ./log/docker/node1_2024-10-11_04-18-35__56580e31-69d5-4124-9ba2-92627b7c9672__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 9951
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9951/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9951/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.147.131/tcp/9952/p2p/16Uiu2HAmSKivFDoXiozXwPRUZGnm7ssHA3rQPGbrrX113Zc1oaKw","/ip4/172.18.147.131/tcp/9953/ws/p2p/16Uiu2HAmSKivFDoXiozXwPRUZGnm7ssHA3rQPGbrrX113Zc1oaKw"],"enrUri":"enr:-LO4QKhoJ0Y1iNvkjtjCAf1QSpvArqbX0y6IjccTY85U38yZRiCZPYfk6yzXmxxQrLhugPBB2StOiM_zEx3cUnu4-_4BgmlkgnY0gmlwhKwSk4OKbXVsdGlhZGRyc4wACgSsEpODBibh3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPLFCIAJ5yKIAXcqxEXPwhNJ-kuQeDIvR-s4vMpTNQK_oN0Y3CCJuCDdWRwgibihXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-11_04-18-35__56580e31-69d5-4124-9ba2-92627b7c9672__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.214.118
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['56583', '56584', '56585', '56586', '56587']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 56583:56583 -p 56584:56584 -p 56585:56585 -p 56586:56586 -p 56587:56587 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56585 --rest-port=56583 --tcp-port=56584 --discv5-udp-port=56586 --rest-address=0.0.0.0 --nat=extip:172.18.214.118 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e6c5a8b25256dae7bbe98ef6ee0b28afa8f28ad4eea27a010ac9af8f4fbdf347 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56587 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QKhoJ0Y1iNvkjtjCAf1QSpvArqbX0y6IjccTY85U38yZRiCZPYfk6yzXmxxQrLhugPBB2StOiM_zEx3cUnu4-_4BgmlkgnY0gmlwhKwSk4OKbXVsdGlhZGRyc4wACgSsEpODBibh3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPLFCIAJ5yKIAXcqxEXPwhNJ-kuQeDIvR-s4vMpTNQK_oN0Y3CCJuCDdWRwgibihXdha3UyBQ --filternode=/ip4/172.18.147.131/tcp/9952/p2p/16Uiu2HAmSKivFDoXiozXwPRUZGnm7ssHA3rQPGbrrX113Zc1oaKw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.214.118 waku ae0046756abbde059e52f1a6315554c41ca38f2e98c40ab96d27b648171d3ce7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ae0046756abb. Setting up logs at ./log/docker/node2_2024-10-11_04-18-35__56580e31-69d5-4124-9ba2-92627b7c9672__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 56583
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56583/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56583/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.214.118/tcp/56584/p2p/16Uiu2HAmV36XB34sMyrbim8ggAwvTQ1zhf5rELfYNn2GmcEfeRpP","/ip4/172.18.214.118/tcp/56585/ws/p2p/16Uiu2HAmV36XB34sMyrbim8ggAwvTQ1zhf5rELfYNn2GmcEfeRpP"],"enrUri":"enr:-LO4QMjfuZOJt23nBgt5SEBhSvADB4eCXbSxNtO_ZEYD0IbIGW6R9jpMQ2U_XS2X3aenvLIMHJBWejNsIKGwyiy78rgBgmlkgnY0gmlwhKwS1naKbXVsdGlhZGRyc4wACgSsEtZ2Bt0J3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPzZL7bCmGwwRc6BIrpuDg8Eq6hPa5clnuSaIpSxqpVJIN0Y3CC3QiDdWRwgt0KhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56583/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.147.131/tcp/9952/p2p/16Uiu2HAmSKivFDoXiozXwPRUZGnm7ssHA3rQPGbrrX113Zc1oaKw"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9951/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56583/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "31be910d-dd74-4968-ac3b-53900b88296f", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"31be910d-dd74-4968-ac3b-53900b88296f","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:56583/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1", "extraField": "extraValue"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:56583/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 70e2ad07ace8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ae0046756abb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.