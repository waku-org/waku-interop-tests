[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-10-11_04-13-44__73a19fbf-9bed-435a-b39c-034d089c06d0
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-11_04-13-44__73a19fbf-9bed-435a-b39c-034d089c06d0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-11_04-13-44__73a19fbf-9bed-435a-b39c-034d089c06d0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-10-11_04-13-44__73a19fbf-9bed-435a-b39c-034d089c06d0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.133.158
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['50951', '50952', '50953', '50954', '50955']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 50951:50951 -p 50952:50952 -p 50953:50953 -p 50954:50954 -p 50955:50955 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50953 --rest-port=50951 --tcp-port=50952 --discv5-udp-port=50954 --rest-address=0.0.0.0 --nat=extip:172.18.133.158 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bfa8ebac6daedf0f20497b6fdd17870d48d828af469aabda5674edaba42ade0b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50955 --metrics-logging=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.133.158 waku ef96c1e797671694b8b68199c647e7f9cd5e06d1fa52d9dc80f7db2eb9961698
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ef96c1e79767. Setting up logs at ./log/docker/node1_2024-10-11_04-13-44__73a19fbf-9bed-435a-b39c-034d089c06d0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 50951
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50951/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50951/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.133.158/tcp/50952/p2p/16Uiu2HAm9rzKnpu2NHovU47rKw3zpez3qwrjSJ6XcDGEc6kc1DUn","/ip4/172.18.133.158/tcp/50953/ws/p2p/16Uiu2HAm9rzKnpu2NHovU47rKw3zpez3qwrjSJ6XcDGEc6kc1DUn"],"enrUri":"enr:-LO4QO0WdntS8blOiMfR3WxO-_0EAkA25E5cmFKhceW_jqDmCe-hnEWJjyvLhWC8AoI9KiQwhUtjx-Zi1alZGnTDVt4BgmlkgnY0gmlwhKwShZ6KbXVsdGlhZGRyc4wACgSsEoWeBscJ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLWf-E0h6vW-O9lDK9Bb7jXkhvgUxxLrZ5s-O2zG_iYy4N0Y3CCxwiDdWRwgscKhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.112.85
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['45013', '45014', '45015', '45016', '45017']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 45013:45013 -p 45014:45014 -p 45015:45015 -p 45016:45016 -p 45017:45017 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45015 --rest-port=45013 --tcp-port=45014 --discv5-udp-port=45016 --rest-address=0.0.0.0 --nat=extip:172.18.112.85 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=df96c57f2e34de1bded47f112f9b3a89da1bed9c1b8ba8ddeba1fdafe5b50e7f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45017 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-LO4QO0WdntS8blOiMfR3WxO-_0EAkA25E5cmFKhceW_jqDmCe-hnEWJjyvLhWC8AoI9KiQwhUtjx-Zi1alZGnTDVt4BgmlkgnY0gmlwhKwShZ6KbXVsdGlhZGRyc4wACgSsEoWeBscJ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLWf-E0h6vW-O9lDK9Bb7jXkhvgUxxLrZ5s-O2zG_iYy4N0Y3CCxwiDdWRwgscKhXdha3UyCQ --lightpushnode=/ip4/172.18.133.158/tcp/50952/p2p/16Uiu2HAm9rzKnpu2NHovU47rKw3zpez3qwrjSJ6XcDGEc6kc1DUn
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.112.85 waku d681edd9c61008d4a5e3d8252842c3427deface0cc4569fc320e8679c5de7d52
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d681edd9c610. Setting up logs at ./log/docker/node2_2024-10-11_04-13-44__73a19fbf-9bed-435a-b39c-034d089c06d0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 45013
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45013/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45013/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.112.85/tcp/45014/p2p/16Uiu2HAmDDHbun44Va5vCrHv8Do3j4uaSmKzHBM226x65AHW3m1U","/ip4/172.18.112.85/tcp/45015/ws/p2p/16Uiu2HAmDDHbun44Va5vCrHv8Do3j4uaSmKzHBM226x65AHW3m1U"],"enrUri":"enr:-LO4QMz41Iq0605sixARVgv1hhHb8NfIH5WxbS868k4-FR6eKt2WBbUXTe5gkprylKJHg6VUcbT3wXkTHi1CysYkomkBgmlkgnY0gmlwhKwScFWKbXVsdGlhZGRyc4wACgSsEnBVBq_X3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMIRhfHQpJP-sHbJyI4Zyfc3q9plblmmGGzgCAAuFT0q4N0Y3CCr9aDdWRwgq_YhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.200.178
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['59817', '59818', '59819', '59820', '59821']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 59817:59817 -p 59818:59818 -p 59819:59819 -p 59820:59820 -p 59821:59821 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59819 --rest-port=59817 --tcp-port=59818 --discv5-udp-port=59820 --rest-address=0.0.0.0 --nat=extip:172.18.200.178 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f6cd7cddaa9a97639a3dae6a0bdc9a8b1073be5bd8be54f9d12d31aef4701d1b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59821 --metrics-logging=true --relay=false --storenode=/ip4/172.18.112.85/tcp/45014/p2p/16Uiu2HAmDDHbun44Va5vCrHv8Do3j4uaSmKzHBM226x65AHW3m1U --discv5-bootstrap-node=enr:-LO4QMz41Iq0605sixARVgv1hhHb8NfIH5WxbS868k4-FR6eKt2WBbUXTe5gkprylKJHg6VUcbT3wXkTHi1CysYkomkBgmlkgnY0gmlwhKwScFWKbXVsdGlhZGRyc4wACgSsEnBVBq_X3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMIRhfHQpJP-sHbJyI4Zyfc3q9plblmmGGzgCAAuFT0q4N0Y3CCr9aDdWRwgq_YhXdha3UyCw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.200.178 waku ea59dea9dba2ca2ec1921905efa68ca6e3eefc79d180d4f29c768c77282e2cff
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ea59dea9dba2. Setting up logs at ./log/docker/node3_2024-10-11_04-13-44__73a19fbf-9bed-435a-b39c-034d089c06d0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 59817
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59817/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59817/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.200.178/tcp/59818/p2p/16Uiu2HAmQR1eBFLX1uu7eBdtqtRveBKgst6sPM6qRixf3KWaZ4NP","/ip4/172.18.200.178/tcp/59819/ws/p2p/16Uiu2HAmQR1eBFLX1uu7eBdtqtRveBKgst6sPM6qRixf3KWaZ4NP"],"enrUri":"enr:-LO4QIq9kCHmBAe7yLu7PkqGSsQY8WQ9f7Ef6Q-rgbXzxqAkKYvMwxqrr681C9CutYa9MX8f62mCH6Dwecz1F-X5Ua8BgmlkgnY0gmlwhKwSyLKKbXVsdGlhZGRyc4wACgSsEsiyBumr3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOut5Jb6etoPAXg0J4kctvq9Y_KeT8otNlisFh5QNEY9IN0Y3CC6aqDdWRwgumshXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50951/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45013/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50951/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50951/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50951/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50951/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50951/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50951/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.112.85/tcp/45014/p2p/16Uiu2HAmDDHbun44Va5vCrHv8Do3j4uaSmKzHBM226x65AHW3m1U","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45013/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.133.158/tcp/50952/p2p/16Uiu2HAm9rzKnpu2NHovU47rKw3zpez3qwrjSJ6XcDGEc6kc1DUn","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50951/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1728620065459326464}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59817/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"9babc4e76dd27f4ac2c8","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"N/52Fg/FczKSgbsRW51FNxhb7h8Coav+BbtCGIqx1+s="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ef96c1e79767
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d681edd9c610
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ea59dea9dba2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.