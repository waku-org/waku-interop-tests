[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_pubsub_topic[/waku/2/rs/5/0] with id: 2024-10-11_04-30-26__99d2f849-bc4e-439d-86f2-8947b7e22bd3
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-11_04-30-26__99d2f849-bc4e-439d-86f2-8947b7e22bd3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.234.42
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['39824', '39825', '39826', '39827', '39828']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 39824:39824 -p 39825:39825 -p 39826:39826 -p 39827:39827 -p 39828:39828 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39826 --rest-port=39824 --tcp-port=39825 --discv5-udp-port=39827 --rest-address=0.0.0.0 --nat=extip:172.18.234.42 --peer-exchange=true --discv5-discovery=true --cluster-id=5 --nodekey=2b802b58c5ecfdcebd5dc94bcb9aaf71fc55bdbe9adeffcf3eca787b1d3faa6f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39828 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/5/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.234.42 waku b75b08700795c6781b612f3762c18b40bdcc9d0c57c58033ac97d5fde9715bae
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b75b08700795. Setting up logs at ./log/docker/node1_2024-10-11_04-30-26__99d2f849-bc4e-439d-86f2-8947b7e22bd3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 39824
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39824/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39824/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.234.42/tcp/39825/p2p/16Uiu2HAmJqwMjaHMqJ783MdqtssfTWLkkHTTbmPVLvnS5DoNZ8gc","/ip4/172.18.234.42/tcp/39826/ws/p2p/16Uiu2HAmJqwMjaHMqJ783MdqtssfTWLkkHTTbmPVLvnS5DoNZ8gc"],"enrUri":"enr:-LO4QGZWu15aw8f24ZK1sEV_05sywIc4PzDsOI12c2RzWfa0RSpSLk8Hw9CVC7vjIKwGIenyP3h_6M-5QQxCn48Zvz4BgmlkgnY0gmlwhKwS6iqKbXVsdGlhZGRyc4wACgSsEuoqBpuS3QOCcnOFAAUBAACJc2VjcDI1NmsxoQNb9CCEgDscWKR1B9fa65PCQliqHZIZ2ol22YrV8yGLBYN0Y3CCm5GDdWRwgpuThXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-11_04-30-26__99d2f849-bc4e-439d-86f2-8947b7e22bd3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.183.221
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['10423', '10424', '10425', '10426', '10427']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 10423:10423 -p 10424:10424 -p 10425:10425 -p 10426:10426 -p 10427:10427 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10425 --rest-port=10423 --tcp-port=10424 --discv5-udp-port=10426 --rest-address=0.0.0.0 --nat=extip:172.18.183.221 --peer-exchange=true --discv5-discovery=true --cluster-id=5 --nodekey=a7c7edb6a29b176fdbdb8ebbec8f3c9fd10bb597ccbfd0ef965edfc41d7f5d35 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10427 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QGZWu15aw8f24ZK1sEV_05sywIc4PzDsOI12c2RzWfa0RSpSLk8Hw9CVC7vjIKwGIenyP3h_6M-5QQxCn48Zvz4BgmlkgnY0gmlwhKwS6iqKbXVsdGlhZGRyc4wACgSsEuoqBpuS3QOCcnOFAAUBAACJc2VjcDI1NmsxoQNb9CCEgDscWKR1B9fa65PCQliqHZIZ2ol22YrV8yGLBYN0Y3CCm5GDdWRwgpuThXdha3UyBQ --pubsub-topic=/waku/2/rs/5/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.183.221 waku 4b1b4f9ce58b4a97c2c3a239f6b92929d38109136ec91e4874c9f49ee485d2ea
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4b1b4f9ce58b. Setting up logs at ./log/docker/node2_2024-10-11_04-30-26__99d2f849-bc4e-439d-86f2-8947b7e22bd3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 10423
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10423/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10423/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.183.221/tcp/10424/p2p/16Uiu2HAmEGAz6LYR5Xny5G4A12LfudSc29Tpv5tdqvAfmJjvSaws","/ip4/172.18.183.221/tcp/10425/ws/p2p/16Uiu2HAmEGAz6LYR5Xny5G4A12LfudSc29Tpv5tdqvAfmJjvSaws"],"enrUri":"enr:-LO4QHMSEOYHQNCDnHmtO5tUuosfh52jV9D8WdFbiVf04oz9W8SR53Z8_jklqQ34oKsZ644pMW0p5yW5Mh3a6WY977ABgmlkgnY0gmlwhKwSt92KbXVsdGlhZGRyc4wACgSsErfdBii53QOCcnOFAAUBAACJc2VjcDI1NmsxoQMX3wotB6Xo-RuZdWjF4TDU29YYFgECUh77pGpWjDboyoN0Y3CCKLiDdWRwgii6hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10423/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.234.42/tcp/39825/p2p/16Uiu2HAmJqwMjaHMqJ783MdqtssfTWLkkHTTbmPVLvnS5DoNZ8gc"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39824/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/5/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10423/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/5/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39824/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39824/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728621030234359296,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10423/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728621030234359296,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b75b08700795
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4b1b4f9ce58b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.