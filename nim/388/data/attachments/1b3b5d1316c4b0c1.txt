[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2024-10-11_04-20-43__b6a9a5f3-759c-454c-9c99-629d8bb8a9f0
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-11_04-20-43__b6a9a5f3-759c-454c-9c99-629d8bb8a9f0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.230.95
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['25614', '25615', '25616', '25617', '25618']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 25614:25614 -p 25615:25615 -p 25616:25616 -p 25617:25617 -p 25618:25618 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25616 --rest-port=25614 --tcp-port=25615 --discv5-udp-port=25617 --rest-address=0.0.0.0 --nat=extip:172.18.230.95 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ce5e48ba125caf23e4ee0bc9bbbee96ed01da99583e334e84caf66bbada6fbca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25618 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.230.95 waku 0f595f3a6539f402c5928d9400814890d14363be00b4fdae4429bb1a142221fe
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 0f595f3a6539. Setting up logs at ./log/docker/receiving_node1_2024-10-11_04-20-43__b6a9a5f3-759c-454c-9c99-629d8bb8a9f0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 25614
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25614/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25614/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.230.95/tcp/25615/p2p/16Uiu2HAmS7ACMwnnkpkB1uHQTHA2w8cUY9BdwzJr95tJwxjbxzAY","/ip4/172.18.230.95/tcp/25616/ws/p2p/16Uiu2HAmS7ACMwnnkpkB1uHQTHA2w8cUY9BdwzJr95tJwxjbxzAY"],"enrUri":"enr:-LO4QIP6Lp1Eo7C0KZKn_f3pEidc11Ofil4vyLseNZ7-JnqbWSxQUpnswbQvSP7Td0IBLpbrmMu1Rc7MjQ2W3ZMTnuABgmlkgnY0gmlwhKwS5l-KbXVsdGlhZGRyc4wACgSsEuZfBmQQ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPH3CoALo4u4UDwJgSn4AnFQ-geQlT3OxbMq-gfahBj5YN0Y3CCZA-DdWRwgmQRhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-11_04-20-43__b6a9a5f3-759c-454c-9c99-629d8bb8a9f0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.242.199
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['40094', '40095', '40096', '40097', '40098']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 40094:40094 -p 40095:40095 -p 40096:40096 -p 40097:40097 -p 40098:40098 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40096 --rest-port=40094 --tcp-port=40095 --discv5-udp-port=40097 --rest-address=0.0.0.0 --nat=extip:172.18.242.199 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9de26eb31cfb25ee84eb6cdfcdc7c0a0f64816dfc66d2ffe91e4c7afbfd2e6bc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40098 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.242.199 waku 7c4aab408e0c6e23f7ab25140358101d6e63af5b3537324b5935009f4c9651ef
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7c4aab408e0c. Setting up logs at ./log/docker/receiving_node2_2024-10-11_04-20-43__b6a9a5f3-759c-454c-9c99-629d8bb8a9f0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 40094
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40094/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40094/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.242.199/tcp/40095/p2p/16Uiu2HAmAJbX1ERvDJmz3jtSJNvUHov4EriA4SfWTj8y9d8tw7Dc","/ip4/172.18.242.199/tcp/40096/ws/p2p/16Uiu2HAmAJbX1ERvDJmz3jtSJNvUHov4EriA4SfWTj8y9d8tw7Dc"],"enrUri":"enr:-LO4QPVuv5D3aO-ElLHfi287IqFZ2XFzS2zJ7pzYlr0-JwEtXJLbSrsZwSXVpS5TBGgmC1LMMcz8atT4Ck12IqGmSLgBgmlkgnY0gmlwhKwS8seKbXVsdGlhZGRyc4wACgSsEvLHBpyg3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLdDzFz4Qd2XGSly3TuFpYggbqXnGZRkjE59kKqRKOSs4N0Y3CCnJ-DdWRwgpyhhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40094/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.230.95/tcp/25615/p2p/16Uiu2HAmS7ACMwnnkpkB1uHQTHA2w8cUY9BdwzJr95tJwxjbxzAY"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-11_04-20-43__b6a9a5f3-759c-454c-9c99-629d8bb8a9f0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.53.61
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['36065', '36066', '36067', '36068', '36069']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 36065:36065 -p 36066:36066 -p 36067:36067 -p 36068:36068 -p 36069:36069 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36067 --rest-port=36065 --tcp-port=36066 --discv5-udp-port=36068 --rest-address=0.0.0.0 --nat=extip:172.18.53.61 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cb3cca55910f2e8e7226af52ec7ff2be0ab0bc58956f1a0d26c2f019f505f9fc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36069 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QIP6Lp1Eo7C0KZKn_f3pEidc11Ofil4vyLseNZ7-JnqbWSxQUpnswbQvSP7Td0IBLpbrmMu1Rc7MjQ2W3ZMTnuABgmlkgnY0gmlwhKwS5l-KbXVsdGlhZGRyc4wACgSsEuZfBmQQ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPH3CoALo4u4UDwJgSn4AnFQ-geQlT3OxbMq-gfahBj5YN0Y3CCZA-DdWRwgmQRhXdha3UyCQ --lightpushnode=/ip4/172.18.230.95/tcp/25615/p2p/16Uiu2HAmS7ACMwnnkpkB1uHQTHA2w8cUY9BdwzJr95tJwxjbxzAY --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.53.61 waku 197ad8596d78b55175331d661e9f0af08e26955f4d4fd1be8a2317beba89c11e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 197ad8596d78. Setting up logs at ./log/docker/lightpush_node1_2024-10-11_04-20-43__b6a9a5f3-759c-454c-9c99-629d8bb8a9f0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 36065
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36065/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36065/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.53.61/tcp/36066/p2p/16Uiu2HAmVo6vvHMEJ43f9fxM2gthmXHk24uorLDcqZjmyGATZa8t","/ip4/172.18.53.61/tcp/36067/ws/p2p/16Uiu2HAmVo6vvHMEJ43f9fxM2gthmXHk24uorLDcqZjmyGATZa8t"],"enrUri":"enr:-LO4QLmQ2HUNH3iYgAcpA9U2wGxi6ZPQRv0bbB5HHdMr3DhAJ2Zo_VPqPv6NDxFvJzq9AL0giRcPSw_b2IkoOjw8d9IBgmlkgnY0gmlwhKwSNT2KbXVsdGlhZGRyc4wACgSsEjU9Bozj3QOCcnOFAAMBAACJc2VjcDI1NmsxoQP-qsOYnNYOBuCGd5uiTdwYO32be116BPQz267NN9KYbYN0Y3CCjOKDdWRwgozkhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36065/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.230.95/tcp/25615/p2p/16Uiu2HAmS7ACMwnnkpkB1uHQTHA2w8cUY9BdwzJr95tJwxjbxzAY"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36065/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.242.199/tcp/40095/p2p/16Uiu2HAmAJbX1ERvDJmz3jtSJNvUHov4EriA4SfWTj8y9d8tw7Dc"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25614/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40094/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36065/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728620448777783296}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:36065/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36065/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728620448782461184}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:36065/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36065/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728620448786916096}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:36065/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36065/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728620448791835904}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:36065/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0f595f3a6539
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7c4aab408e0c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 197ad8596d78
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.