[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-10-11_04-21-09__012dd73a-1a6d-4b84-8e39-208ad081befd
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-11_04-21-09__012dd73a-1a6d-4b84-8e39-208ad081befd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.222.39
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['8371', '8372', '8373', '8374', '8375']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 8371:8371 -p 8372:8372 -p 8373:8373 -p 8374:8374 -p 8375:8375 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8373 --rest-port=8371 --tcp-port=8372 --discv5-udp-port=8374 --rest-address=0.0.0.0 --nat=extip:172.18.222.39 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bcd548dc1ecc0d7a89405dbb3b11ddd44b7e2bfff686cba0f8ceb5279dbdb56a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8375 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.222.39 waku d1954e88c3ef7832788d46692df6598f71b707d1dc611da101681099314e54fe
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d1954e88c3ef. Setting up logs at ./log/docker/receiving_node1_2024-10-11_04-21-09__012dd73a-1a6d-4b84-8e39-208ad081befd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 8371
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8371/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8371/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.222.39/tcp/8372/p2p/16Uiu2HAm9qJTg1XwEsh9N5P65b28qqqzKXCwPuxUZB7MxTswaEQs","/ip4/172.18.222.39/tcp/8373/ws/p2p/16Uiu2HAm9qJTg1XwEsh9N5P65b28qqqzKXCwPuxUZB7MxTswaEQs"],"enrUri":"enr:-LO4QHdlyG1qck6g3qEwQdzDsV_GlAmaMth3MZSjKVyC2MZIMh79-53BBMAmHd1Y4Ke-Yb7WCyxbHQnX8nuMGfy81_sBgmlkgnY0gmlwhKwS3ieKbXVsdGlhZGRyc4wACgSsEt4nBiC13QOCcnOFAAMBAACJc2VjcDI1NmsxoQLWETlzwABQz8kmKWxNGoEmckLkRZ4UuhLK37P6LdFWBIN0Y3CCILSDdWRwgiC2hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-11_04-21-09__012dd73a-1a6d-4b84-8e39-208ad081befd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.143.195
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['53563', '53564', '53565', '53566', '53567']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 53563:53563 -p 53564:53564 -p 53565:53565 -p 53566:53566 -p 53567:53567 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53565 --rest-port=53563 --tcp-port=53564 --discv5-udp-port=53566 --rest-address=0.0.0.0 --nat=extip:172.18.143.195 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ccfedcfaeb1ebfae6dbc7468fbdbb8b1cdf77657f89ce8efbf20ca4cbb6ee884 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53567 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.143.195 waku c7d10a05503e9505fa65f966cbc9e10e7551faaa59039910c90aadea821b551c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c7d10a05503e. Setting up logs at ./log/docker/receiving_node2_2024-10-11_04-21-09__012dd73a-1a6d-4b84-8e39-208ad081befd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 53563
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53563/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53563/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.143.195/tcp/53564/p2p/16Uiu2HAm3g7fghuBEhLKD47FUDAqSC3qi27tDcnW928dQcKjGWDH","/ip4/172.18.143.195/tcp/53565/ws/p2p/16Uiu2HAm3g7fghuBEhLKD47FUDAqSC3qi27tDcnW928dQcKjGWDH"],"enrUri":"enr:-LO4QHOypz2nfSrvbJD3Oe5sgzK2S1ztneTtmqZXbDEauLzXNGSec6qmh7DcbXTla63RCkKKxB0r21ObY8YnrOrqdL0BgmlkgnY0gmlwhKwSj8OKbXVsdGlhZGRyc4wACgSsEo_DBtE93QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ6kKwJNy9ZhHAdiS7QY2xZ1ZhwqjbXFoJzNcnBLCNsVIN0Y3CC0TyDdWRwgtE-hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53563/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.222.39/tcp/8372/p2p/16Uiu2HAm9qJTg1XwEsh9N5P65b28qqqzKXCwPuxUZB7MxTswaEQs"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-11_04-21-09__012dd73a-1a6d-4b84-8e39-208ad081befd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.87.135
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['13835', '13836', '13837', '13838', '13839']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 13835:13835 -p 13836:13836 -p 13837:13837 -p 13838:13838 -p 13839:13839 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13837 --rest-port=13835 --tcp-port=13836 --discv5-udp-port=13838 --rest-address=0.0.0.0 --nat=extip:172.18.87.135 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=63813af3b1af8e193551ddd0d00fd28daafac64c72abed4a99efe7a99ee8734f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13839 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QHdlyG1qck6g3qEwQdzDsV_GlAmaMth3MZSjKVyC2MZIMh79-53BBMAmHd1Y4Ke-Yb7WCyxbHQnX8nuMGfy81_sBgmlkgnY0gmlwhKwS3ieKbXVsdGlhZGRyc4wACgSsEt4nBiC13QOCcnOFAAMBAACJc2VjcDI1NmsxoQLWETlzwABQz8kmKWxNGoEmckLkRZ4UuhLK37P6LdFWBIN0Y3CCILSDdWRwgiC2hXdha3UyCQ --lightpushnode=/ip4/172.18.222.39/tcp/8372/p2p/16Uiu2HAm9qJTg1XwEsh9N5P65b28qqqzKXCwPuxUZB7MxTswaEQs --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.87.135 waku 2d34fbe4d4219c9b6e6764a91b0fd55c7984bc36bd2452a33b1ac28bf151bc7c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2d34fbe4d421. Setting up logs at ./log/docker/lightpush_node1_2024-10-11_04-21-09__012dd73a-1a6d-4b84-8e39-208ad081befd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 13835
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13835/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13835/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.87.135/tcp/13836/p2p/16Uiu2HAkyddx1sQ8Vz4jQXqXzyYutpkKC5GWP65AZmEZufvq77CS","/ip4/172.18.87.135/tcp/13837/ws/p2p/16Uiu2HAkyddx1sQ8Vz4jQXqXzyYutpkKC5GWP65AZmEZufvq77CS"],"enrUri":"enr:-LO4QM7pQP9yEnGjPxKZgYkEJoAz2MDkw-5ixqki11SZY_IBCYs5kPRqmph1X86Dbp3hnKFb3AjHHItZN1wDmSfwhuQBgmlkgnY0gmlwhKwSV4eKbXVsdGlhZGRyc4wACgSsEleHBjYN3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI-f2vdoytHd968ENRHp2tNzzerEfuPLiZNCx4gGcvc_4N0Y3CCNgyDdWRwgjYOhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13835/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.222.39/tcp/8372/p2p/16Uiu2HAm9qJTg1XwEsh9N5P65b28qqqzKXCwPuxUZB7MxTswaEQs"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13835/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.143.195/tcp/53564/p2p/16Uiu2HAm3g7fghuBEhLKD47FUDAqSC3qi27tDcnW928dQcKjGWDH"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8371/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53563/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13835/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728620475805113856, "version": 2.1}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13835/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d1954e88c3ef
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c7d10a05503e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2d34fbe4d421
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.