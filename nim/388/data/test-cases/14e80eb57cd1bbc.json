{"uid":"14e80eb57cd1bbc","name":"test_publish_after_node1_restarts","fullName":"tests.relay.test_publish.TestRelayPublish#test_publish_after_node1_restarts","historyId":"ac4c595ebfa5f8d963dda5d51f886384","time":{"start":1728620744313,"stop":1728620749863,"duration":5550},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1728619955553,"stop":1728619955553,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1728620739696,"stop":1728620739696,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors","time":{"start":1728620739696,"stop":1728620739697,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1728620739697,"stop":1728620739697,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1728620739697,"stop":1728620739697,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1728620739697,"stop":1728620739698,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1728620739697,"stop":1728620739697,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_relay_nodes","time":{"start":1728620739698,"stop":1728620744141,"duration":4443},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1728620744066,"stop":1728620744141,"duration":75},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.relay.test_publish.TestRelayPublish object at 0x7f8ed844fd40>, <src.node.waku_node.WakuNode object at 0x7f8ed8460050>, ['/ip4/172.18.206.250/tcp/31976/p2p/16Uiu2HAkuwFyHdKLvoigr6Ke31aWhK3gPN18gdCWpJEgrReTSHNy'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"relay_setup","time":{"start":1728620739698,"stop":1728620739698,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"subscribe_main_relay_nodes","time":{"start":1728620744141,"stop":1728620744190,"duration":49},"status":"passed","steps":[{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1728620744142,"stop":1728620744190,"duration":48},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7f8ed3497800>, <src.node.waku_node.WakuNode object at 0x7f8ed8460050>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"relay_warm_up","time":{"start":1728620744190,"stop":1728620744312,"duration":122},"status":"passed","steps":[{"name":"wait_for_published_message_to_reach_relay_peer","time":{"start":1728620744191,"stop":1728620744312,"duration":121},"status":"passed","steps":[{"name":"check_published_message_reaches_relay_peer","time":{"start":1728620744191,"stop":1728620744312,"duration":121},"status":"passed","steps":[{"name":"assert_received_message","time":{"start":1728620744305,"stop":1728620744306,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728620744190742016}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728620744312,"stop":1728620744312,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728620744190742016}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728620744190742016}"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"timeout_duration","value":"120"},{"name":"time_between_retries","value":"1"},{"name":"pubsub_topic","value":"None"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"status":"passed","steps":[{"name":"check_published_message_reaches_relay_peer","time":{"start":1728620744313,"stop":1728620744430,"duration":117},"status":"passed","steps":[{"name":"create_message","time":{"start":1728620744313,"stop":1728620744313,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728620744425,"stop":1728620744425,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728620744313449472}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728620744430,"stop":1728620744430,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728620744313449472}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"None"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_and_publish_with_retry","time":{"start":1728620748605,"stop":1728620749863,"duration":1258},"status":"passed","steps":[{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1728620748605,"stop":1728620748631,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7f8ed3497800>, <src.node.waku_node.WakuNode object at 0x7f8ed8460050>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_published_message_reaches_relay_peer","time":{"start":1728620748631,"stop":1728620748742,"duration":111},"status":"failed","statusMessage":"AssertionError: Peer NODE_2:wakuorg/nwaku:latest couldn't find any messages\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/relay.py\", line 125, in check_published_message_reaches_relay_peer\n    assert get_messages_response, f\"Peer NODE_{index + 1}:{peer.image} couldn't find any messages\"\n           ^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"create_message","time":{"start":1728620748631,"stop":1728620748631,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728620748739,"stop":1728620748739,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728620748630958848}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"None"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1728620749743,"stop":1728620749749,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7f8ed3497800>, <src.node.waku_node.WakuNode object at 0x7f8ed8460050>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_published_message_reaches_relay_peer","time":{"start":1728620749749,"stop":1728620749863,"duration":114},"status":"passed","steps":[{"name":"create_message","time":{"start":1728620749749,"stop":1728620749749,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728620749858,"stop":1728620749858,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728620749749108480}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728620749863,"stop":1728620749863,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728620749749108480}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"None"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<tests.relay.test_publish.TestRelayPublish object at 0x7f8ed844fd40>, [<src.node.waku_node.WakuNode object at 0x7f8ed3497800>, <src.node.waku_node.WakuNode object at 0x7f8ed8460050>], ['/waku/2/rs/3/1'])"}],"shouldDisplayMessage":false,"stepsCount":9,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"89e9b9d2591aab72","name":"log","source":"89e9b9d2591aab72.txt","type":"text/plain","size":19297}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":14,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1728620749866,"stop":1728620749871,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1728620749872,"stop":1728620754588,"duration":4716},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors::0","time":{"start":1728620754588,"stop":1728620754611,"duration":23},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1728620754611,"stop":1728620754611,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1728622014200,"stop":1728622014200,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"flaky(reruns=5)"},{"name":"tag","value":"@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')"},{"name":"parentSuite","value":"tests.relay"},{"name":"suite","value":"test_publish"},{"name":"subSuite","value":"TestRelayPublish"},{"name":"host","value":"fv-az1149-82"},{"name":"thread","value":"2116-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.relay.test_publish"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":0,"passed":80,"unknown":0,"total":80},"items":[{"uid":"bb7ae19b8dffda4a","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/387//#testresult/bb7ae19b8dffda4a","status":"passed","time":{"start":1728534344782,"stop":1728534350223,"duration":5441}},{"uid":"5e905902de30f398","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/385//#testresult/5e905902de30f398","status":"passed","time":{"start":1728361549234,"stop":1728361554472,"duration":5238}},{"uid":"661ea87a894ef21d","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/384//#testresult/661ea87a894ef21d","status":"passed","time":{"start":1728275003563,"stop":1728275009677,"duration":6114}},{"uid":"218b509030101ba3","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/383//#testresult/218b509030101ba3","status":"passed","time":{"start":1728188536117,"stop":1728188542085,"duration":5968}},{"uid":"771a5ce8604b6860","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/382//#testresult/771a5ce8604b6860","status":"passed","time":{"start":1728102169211,"stop":1728102174479,"duration":5268}},{"uid":"5e77c76ecfc757e","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/381//#testresult/5e77c76ecfc757e","status":"passed","time":{"start":1728015789563,"stop":1728015794912,"duration":5349}},{"uid":"6037a3780a21a54f","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/380//#testresult/6037a3780a21a54f","status":"passed","time":{"start":1727941702927,"stop":1727941708288,"duration":5361}},{"uid":"904b0b3182ab7b8f","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/379//#testresult/904b0b3182ab7b8f","status":"passed","time":{"start":1727929420301,"stop":1727929426307,"duration":6006}},{"uid":"d86a46e1bbd56a5e","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/378//#testresult/d86a46e1bbd56a5e","status":"passed","time":{"start":1727842972365,"stop":1727842978181,"duration":5816}},{"uid":"85980149fd603bd8","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/377//#testresult/85980149fd603bd8","status":"passed","time":{"start":1727756598964,"stop":1727756604081,"duration":5117}},{"uid":"f6708c41f7542845","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/376//#testresult/f6708c41f7542845","status":"passed","time":{"start":1727670222826,"stop":1727670228835,"duration":6009}},{"uid":"2635006b6bb1a7ec","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/375//#testresult/2635006b6bb1a7ec","status":"passed","time":{"start":1727583745932,"stop":1727583751106,"duration":5174}},{"uid":"8437bb3736e55444","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/374//#testresult/8437bb3736e55444","status":"passed","time":{"start":1727497323670,"stop":1727497329223,"duration":5553}},{"uid":"39b58a0a51ee1ace","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/373//#testresult/39b58a0a51ee1ace","status":"passed","time":{"start":1727410977763,"stop":1727410983458,"duration":5695}},{"uid":"9e1c14643bd086e1","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/372//#testresult/9e1c14643bd086e1","status":"passed","time":{"start":1727324592668,"stop":1727324598680,"duration":6012}},{"uid":"37e95d49d40b1c7c","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/371//#testresult/37e95d49d40b1c7c","status":"passed","time":{"start":1727238187920,"stop":1727238193081,"duration":5161}},{"uid":"6b80887eb0f55281","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/370//#testresult/6b80887eb0f55281","status":"passed","time":{"start":1727151765457,"stop":1727151770707,"duration":5250}},{"uid":"ccda281e6de49644","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/369//#testresult/ccda281e6de49644","status":"passed","time":{"start":1727065373862,"stop":1727065379900,"duration":6038}},{"uid":"73eb53b26141174b","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/368//#testresult/73eb53b26141174b","status":"passed","time":{"start":1726979000940,"stop":1726979006252,"duration":5312}},{"uid":"a1635c66d5f59902","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/367//#testresult/a1635c66d5f59902","status":"passed","time":{"start":1726892530700,"stop":1726892536501,"duration":5801}}]},"tags":["@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')","flaky(reruns=5)"]},"source":"14e80eb57cd1bbc.json","parameterValues":[]}