[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2024-11-07_06-24-30__073be670-be30-41a1-a0cb-659863ed3a32
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-11-07_06-24-30__073be670-be30-41a1-a0cb-659863ed3a32__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.59.98
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['19652', '19653', '19654', '19655', '19656']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 19652:19652 -p 19653:19653 -p 19654:19654 -p 19655:19655 -p 19656:19656 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19654 --rest-port=19652 --tcp-port=19653 --discv5-udp-port=19655 --rest-address=0.0.0.0 --nat=extip:172.18.59.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f45a42c7f6fae4e7fd1c1aea61fbeef1d4d4e4c0272f0bdaeb6cce0b60a3da8e --max-connections=1000 --filter-subscription-timeout=600 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19656 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.59.98 waku 599ff0876c9088293709bdf9969d29d04311e7983c2f6c131c28a076a6b7d34a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 599ff0876c90. Setting up logs at ./log/docker/publishing_node1_2024-11-07_06-24-30__073be670-be30-41a1-a0cb-659863ed3a32__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 19652
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ae663534e594. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19652/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19652/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.59.98/tcp/19653/p2p/16Uiu2HAm47ZhSuDToutwpdfSqVNy3p9Bx4MHopy7abMH5SEdzJhr","/ip4/172.18.59.98/tcp/19654/ws/p2p/16Uiu2HAm47ZhSuDToutwpdfSqVNy3p9Bx4MHopy7abMH5SEdzJhr"],"enrUri":"enr:-L24QGN4qB1GaUGA70fMMRV16MPJa1dpyQj-R4RA6ibtBEE-MNinJ27F7B5ikRa3HNb445Mxd84LPJbqPL55bn9eGC8CgmlkgnY0gmlwhKwSO2KKbXVsdGlhZGRyc5YACASsEjtiBkzFAAoErBI7YgZMxt0DgnJzhQADAQAAiXNlY3AyNTZrMaECgRWf-IXZ7Y_b3MgJadlPo8gxFGiyO7i5HEOKVJHKuS2DdGNwgkzFg3VkcIJMx4V3YWt1Mgs"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node2_2024-11-07_06-24-30__073be670-be30-41a1-a0cb-659863ed3a32__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.106.31
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['55779', '55780', '55781', '55782', '55783']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 55779:55779 -p 55780:55780 -p 55781:55781 -p 55782:55782 -p 55783:55783 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55781 --rest-port=55779 --tcp-port=55780 --discv5-udp-port=55782 --rest-address=0.0.0.0 --nat=extip:172.18.106.31 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f61abc3605d9e97f4aaed38febbe5a15142ed7cbb2b5d1ec2b327fd2bd13dcfc --max-connections=1000 --filter-subscription-timeout=600 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55783 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.106.31 waku f5063698418b82a1829497ea6d63ea8e20e4f89794963d4e27f874930f43bb61
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f5063698418b. Setting up logs at ./log/docker/publishing_node2_2024-11-07_06-24-30__073be670-be30-41a1-a0cb-659863ed3a32__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 55779
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55779/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55779/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.106.31/tcp/55780/p2p/16Uiu2HAmHuUbYd52kQTDxnze4a38Tqkarrh63yTSNQ1URGdfiLSf","/ip4/172.18.106.31/tcp/55781/ws/p2p/16Uiu2HAmHuUbYd52kQTDxnze4a38Tqkarrh63yTSNQ1URGdfiLSf"],"enrUri":"enr:-L24QGNNJUEpzkdfhtKUXjniZn0JCBe0geSbAcrlmIu6dGV3KSGn2dsNWhgLjm5ACW4bu0rSPxN6Wu-s65OcXxqcg-YCgmlkgnY0gmlwhKwSah-KbXVsdGlhZGRyc5YACASsEmofBtnkAAoErBJqHwbZ5d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDTgCA6rtlRn7ofSpRiDadtFpmr4J00mtxeFzNxYIYU4SDdGNwgtnkg3VkcILZ5oV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55779/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.59.98/tcp/19653/p2p/16Uiu2HAm47ZhSuDToutwpdfSqVNy3p9Bx4MHopy7abMH5SEdzJhr"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-11-07_06-24-30__073be670-be30-41a1-a0cb-659863ed3a32__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.170.125
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['48828', '48829', '48830', '48831', '48832']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 48828:48828 -p 48829:48829 -p 48830:48830 -p 48831:48831 -p 48832:48832 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48830 --rest-port=48828 --tcp-port=48829 --discv5-udp-port=48831 --rest-address=0.0.0.0 --nat=extip:172.18.170.125 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eaf3d09afbfcf29713371fb71bd514ce6cda5568435b7ba4cdffeb74aea9d7ca --max-connections=1000 --filter-subscription-timeout=600 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48832 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QGN4qB1GaUGA70fMMRV16MPJa1dpyQj-R4RA6ibtBEE-MNinJ27F7B5ikRa3HNb445Mxd84LPJbqPL55bn9eGC8CgmlkgnY0gmlwhKwSO2KKbXVsdGlhZGRyc5YACASsEjtiBkzFAAoErBI7YgZMxt0DgnJzhQADAQAAiXNlY3AyNTZrMaECgRWf-IXZ7Y_b3MgJadlPo8gxFGiyO7i5HEOKVJHKuS2DdGNwgkzFg3VkcIJMx4V3YWt1Mgs --storenode=/ip4/172.18.59.98/tcp/19653/p2p/16Uiu2HAm47ZhSuDToutwpdfSqVNy3p9Bx4MHopy7abMH5SEdzJhr --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.59.98/tcp/19653/p2p/16Uiu2HAm47ZhSuDToutwpdfSqVNy3p9Bx4MHopy7abMH5SEdzJhr
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.170.125 waku 46570602c94b1525374ecb9351ff1add3fd4d988d20ec519c0dbf4ff479f3eba
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 46570602c94b. Setting up logs at ./log/docker/store_node1_2024-11-07_06-24-30__073be670-be30-41a1-a0cb-659863ed3a32__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 48828
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48828/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48828/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.170.125/tcp/48829/p2p/16Uiu2HAmS35xDLP2QyM22UqPDMTvr2fjjdmUV7BFKmkeAZAAWLfj","/ip4/172.18.170.125/tcp/48830/ws/p2p/16Uiu2HAmS35xDLP2QyM22UqPDMTvr2fjjdmUV7BFKmkeAZAAWLfj"],"enrUri":"enr:-L24QC2hKa2qudVP94d1Cy8P3HRAIiIG7RA8hzMbLyjei3hcP7GjUnm-JRTfrCVQ_dzWeUp0vfYYSLgGeuvLZ6oPoM4CgmlkgnY0gmlwhKwSqn2KbXVsdGlhZGRyc5YACASsEqp9Br69AAoErBKqfQa-vt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDxtEKzRddUNC2DCIgXRYR-9AN97BOO9gwaCH3-q1FeqqDdGNwgr69g3VkcIK-v4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48828/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.59.98/tcp/19653/p2p/16Uiu2HAm47ZhSuDToutwpdfSqVNy3p9Bx4MHopy7abMH5SEdzJhr"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48828/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.106.31/tcp/55780/p2p/16Uiu2HAmHuUbYd52kQTDxnze4a38Tqkarrh63yTSNQ1URGdfiLSf"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19652/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55779/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48828/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730960675066657280}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19652/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"5xGF34OwjpV9xkSJ1cPsC/vzAPdrWF4VIrZDi+UD/yc="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48828/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1146587ecc6926660a79","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"5xGF34OwjpV9xkSJ1cPsC/vzAPdrWF4VIrZDi+UD/yc="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 599ff0876c90
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id f5063698418b
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 599ff0876c90. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 46570602c94b
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f5063698418b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.