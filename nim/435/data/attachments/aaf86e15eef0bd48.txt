[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_payload with id: 2024-11-07_06-00-44__2d26e441-8bd1-4993-95ca-56b99db19313
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-07_06-00-44__2d26e441-8bd1-4993-95ca-56b99db19313__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.28.178
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['6157', '6158', '6159', '6160', '6161']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 6157:6157 -p 6158:6158 -p 6159:6159 -p 6160:6160 -p 6161:6161 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6159 --rest-port=6157 --tcp-port=6158 --discv5-udp-port=6160 --rest-address=0.0.0.0 --nat=extip:172.18.28.178 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=35be72779cfc7f2f5d4b5bca72ae9b9dd2b1afa86aa9ce9e86daa9d55df14ad0 --max-connections=1000 --filter-subscription-timeout=600 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6161 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.28.178 waku ed72fbdc62081b8b9b63f6ce389db63e3bdc13e959be56d834b9fc8d700619f9
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9db8943b41ab. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ed72fbdc6208. Setting up logs at ./log/docker/receiving_node1_2024-11-07_06-00-44__2d26e441-8bd1-4993-95ca-56b99db19313__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 6157
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6157/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6157/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.28.178/tcp/6158/p2p/16Uiu2HAmBSxVJm9xCrbB5QXBVezEfhAoK4bDSfXkiagP2gQ2cBtV","/ip4/172.18.28.178/tcp/6159/ws/p2p/16Uiu2HAmBSxVJm9xCrbB5QXBVezEfhAoK4bDSfXkiagP2gQ2cBtV"],"enrUri":"enr:-L24QL-cdSzLELGqCw3VxWkWL0fKsTt2y6fJ2m8pAiCydKQ7Ad_nDF9TtlnT4-ftIeIOKyYmlbwav8JXHh5DVrwrOTkCgmlkgnY0gmlwhKwSHLKKbXVsdGlhZGRyc5YACASsEhyyBhgOAAoErBIcsgYYD90DgnJzhQADAQAAiXNlY3AyNTZrMaEC7g88_gqzSFTPZMrqGOuCHqOz9HOHLEED3WPvMpnKJzqDdGNwghgOg3VkcIIYEIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-07_06-00-44__2d26e441-8bd1-4993-95ca-56b99db19313__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.119.86
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8529', '8530', '8531', '8532', '8533']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8529:8529 -p 8530:8530 -p 8531:8531 -p 8532:8532 -p 8533:8533 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8531 --rest-port=8529 --tcp-port=8530 --discv5-udp-port=8532 --rest-address=0.0.0.0 --nat=extip:172.18.119.86 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ebc39dadfad17dbcf1efee9f677d2ad1b7a3a5aeed103860dc50dfdee87e0657 --max-connections=1000 --filter-subscription-timeout=600 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8533 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.119.86 waku 6f749b31471cf28be9a55d97db76387986d389e4913b8a9d45b6f1e22d7b85a2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6f749b31471c. Setting up logs at ./log/docker/receiving_node2_2024-11-07_06-00-44__2d26e441-8bd1-4993-95ca-56b99db19313__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 8529
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8529/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8529/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.119.86/tcp/8530/p2p/16Uiu2HAm3FLqXeYy5CmDUT1HmaTtqpm9HU5BxnHsXKaKsChZTsDQ","/ip4/172.18.119.86/tcp/8531/ws/p2p/16Uiu2HAm3FLqXeYy5CmDUT1HmaTtqpm9HU5BxnHsXKaKsChZTsDQ"],"enrUri":"enr:-L24QFiG4MRDKji8ufmzkcJhlj1TtHyFjUAs1u04Bnq5SseTDDfEBzkMM_665Gv1VD9pD870qidVqgFrNQdI8xfarbsCgmlkgnY0gmlwhKwSd1aKbXVsdGlhZGRyc5YACASsEndWBiFSAAoErBJ3VgYhU90DgnJzhQADAQAAiXNlY3AyNTZrMaECdDgK95BlPiR62raJY6BBKwGTZNEpa64XPIinUgpKFKeDdGNwgiFSg3VkcIIhVIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8529/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.28.178/tcp/6158/p2p/16Uiu2HAmBSxVJm9xCrbB5QXBVezEfhAoK4bDSfXkiagP2gQ2cBtV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-07_06-00-44__2d26e441-8bd1-4993-95ca-56b99db19313__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.227.230
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['53447', '53448', '53449', '53450', '53451']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 53447:53447 -p 53448:53448 -p 53449:53449 -p 53450:53450 -p 53451:53451 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53449 --rest-port=53447 --tcp-port=53448 --discv5-udp-port=53450 --rest-address=0.0.0.0 --nat=extip:172.18.227.230 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a0e1e7b109b6b2939fbafcb4f8dfe2acc1961466fb7bd69cc0add7a12cd7b2cd --max-connections=1000 --filter-subscription-timeout=600 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53451 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QL-cdSzLELGqCw3VxWkWL0fKsTt2y6fJ2m8pAiCydKQ7Ad_nDF9TtlnT4-ftIeIOKyYmlbwav8JXHh5DVrwrOTkCgmlkgnY0gmlwhKwSHLKKbXVsdGlhZGRyc5YACASsEhyyBhgOAAoErBIcsgYYD90DgnJzhQADAQAAiXNlY3AyNTZrMaEC7g88_gqzSFTPZMrqGOuCHqOz9HOHLEED3WPvMpnKJzqDdGNwghgOg3VkcIIYEIV3YWt1Mgk --lightpushnode=/ip4/172.18.28.178/tcp/6158/p2p/16Uiu2HAmBSxVJm9xCrbB5QXBVezEfhAoK4bDSfXkiagP2gQ2cBtV --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.227.230 waku e02ded9b02388fe726cb1f1feeb61851fb9f4d851e69cf66b3259dfc1a3e93ac
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e02ded9b0238. Setting up logs at ./log/docker/lightpush_node1_2024-11-07_06-00-44__2d26e441-8bd1-4993-95ca-56b99db19313__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 53447
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53447/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53447/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.227.230/tcp/53448/p2p/16Uiu2HAm6TiNAXjzKS1cZYvnofP3p4bF9h7dM5oFoE5bACCZ7atA","/ip4/172.18.227.230/tcp/53449/ws/p2p/16Uiu2HAm6TiNAXjzKS1cZYvnofP3p4bF9h7dM5oFoE5bACCZ7atA"],"enrUri":"enr:-L24QBz0ZHU8VwzVdL84pkyxp2EOARSq_MryeYgct_CQsBveaUaPUZgsXNXDnZ4IVISdoUKr-Ww4-pl36cIM1vGC-gECgmlkgnY0gmlwhKwS4-aKbXVsdGlhZGRyc5YACASsEuPmBtDIAAoErBLj5gbQyd0DgnJzhQADAQAAiXNlY3AyNTZrMaECo_ZqVDN84BYyH5oGGOfcRYyS3KRGIE-Jn5hl8BYem0uDdGNwgtDIg3VkcILQyoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53447/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.28.178/tcp/6158/p2p/16Uiu2HAmBSxVJm9xCrbB5QXBVezEfhAoK4bDSfXkiagP2gQ2cBtV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53447/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.119.86/tcp/8530/p2p/16Uiu2HAm3FLqXeYy5CmDUT1HmaTtqpm9HU5BxnHsXKaKsChZTsDQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6157/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8529/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53447/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1730959249587992320}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:53447/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id ed72fbdc6208
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 6f749b31471c
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ed72fbdc6208. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id e02ded9b0238
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6f749b31471c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.