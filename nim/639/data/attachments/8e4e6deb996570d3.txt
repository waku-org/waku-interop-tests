[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_after_node2_restarts with id: 2025-02-04_04-03-54__f30723b5-140d-4b09-a150-e1522c13db3e
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-02-04_04-03-54__f30723b5-140d-4b09-a150-e1522c13db3e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.252.106
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['32001', '32002', '32003', '32004', '32005']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 32001:32001 -p 32002:32002 -p 32003:32003 -p 32004:32004 -p 32005:32005 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32003 --rest-port=32001 --tcp-port=32002 --discv5-udp-port=32004 --rest-address=0.0.0.0 --nat=extip:172.18.252.106 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e7bef3377bfcfcc79aaab3fc9fe8ada66f272d8a52bdce51f328fdcf8aee7dba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32005 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.252.106 waku 9a97fbf06c24b6945c8782897831c04c61fa0f2c9289c08d6cc93c11603fe151
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9a97fbf06c24. Setting up logs at ./log/docker/node1_2025-02-04_04-03-54__f30723b5-140d-4b09-a150-e1522c13db3e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 32001
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6979c4627ecc. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32001/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32001/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.252.106/tcp/32002/p2p/16Uiu2HAmUkKQeNfSuMYKv7RTPuVbJjCZKRLC9cfK1XZAzXj2EN7v","/ip4/172.18.252.106/tcp/32003/ws/p2p/16Uiu2HAmUkKQeNfSuMYKv7RTPuVbJjCZKRLC9cfK1XZAzXj2EN7v"],"enrUri":"enr:-L24QFSL43ng4-8m1t-g0rVwZ_vAtms5HV54E1nKGRlGlHUVFZr4AnJJyGkJ4SHRTxf985u_GCdBYvoUQMeyD0pvRjkCgmlkgnY0gmlwhKwS_GqKbXVsdGlhZGRyc5YACASsEvxqBn0CAAoErBL8agZ9A90DgnJzhQADAQAAiXNlY3AyNTZrMaED7xhxktg6za1-n_l6jsjE-IgE7XEWjTap0MxDqf5Sdd2DdGNwgn0Cg3VkcIJ9BIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-02-04_04-03-54__f30723b5-140d-4b09-a150-e1522c13db3e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.79.241
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['43488', '43489', '43490', '43491', '43492']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 43488:43488 -p 43489:43489 -p 43490:43490 -p 43491:43491 -p 43492:43492 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43490 --rest-port=43488 --tcp-port=43489 --discv5-udp-port=43491 --rest-address=0.0.0.0 --nat=extip:172.18.79.241 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f738553ae0e3a7295b598faad636ed14fdf6bcdf8127ed6a5e934b04f64ebcd4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43492 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QFSL43ng4-8m1t-g0rVwZ_vAtms5HV54E1nKGRlGlHUVFZr4AnJJyGkJ4SHRTxf985u_GCdBYvoUQMeyD0pvRjkCgmlkgnY0gmlwhKwS_GqKbXVsdGlhZGRyc5YACASsEvxqBn0CAAoErBL8agZ9A90DgnJzhQADAQAAiXNlY3AyNTZrMaED7xhxktg6za1-n_l6jsjE-IgE7XEWjTap0MxDqf5Sdd2DdGNwgn0Cg3VkcIJ9BIV3YWt1MgU --filternode=/ip4/172.18.252.106/tcp/32002/p2p/16Uiu2HAmUkKQeNfSuMYKv7RTPuVbJjCZKRLC9cfK1XZAzXj2EN7v
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.79.241 waku 2ad0330e936b407e84bf62ad7a070a376c12f7b428def67a8f994894c095529c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2ad0330e936b. Setting up logs at ./log/docker/node2_2025-02-04_04-03-54__f30723b5-140d-4b09-a150-e1522c13db3e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 43488
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43488/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43488/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.79.241/tcp/43489/p2p/16Uiu2HAmRSeDSXMJTmKALcnM1LXr3UrPxWc6XmXC3EqBHvnXN5BQ","/ip4/172.18.79.241/tcp/43490/ws/p2p/16Uiu2HAmRSeDSXMJTmKALcnM1LXr3UrPxWc6XmXC3EqBHvnXN5BQ"],"enrUri":"enr:-L24QIvCmCUANZ7V2MqGLH0FEl1z4Cak3r8DK1guw_KcIPeSHPeW6vGwrodwGuOiJPzV29bNhceMDZDoAbbx7rBzRVsCgmlkgnY0gmlwhKwST_GKbXVsdGlhZGRyc5YACASsEk_xBqnhAAoErBJP8Qap4t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDvf4xeJQjtlMYpKFTDndgs96RDj3dgpXhnqccKKTmQnODdGNwgqnhg3VkcIKp44V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43488/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.252.106/tcp/32002/p2p/16Uiu2HAmUkKQeNfSuMYKv7RTPuVbJjCZKRLC9cfK1XZAzXj2EN7v"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32001/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43488/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "3fa4d0d0-2775-416a-a989-03546ed62d06", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"3fa4d0d0-2775-416a-a989-03546ed62d06","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32001/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43488/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1738641837269248256,"ephemeral":false}]'
[35mDEBUG   [0m src.node.waku_node:waku_node.py:249 Restarting container with id 2ad0330e936b
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43488/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43488/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43488/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.79.241/tcp/43489/p2p/16Uiu2HAmRSeDSXMJTmKALcnM1LXr3UrPxWc6XmXC3EqBHvnXN5BQ","/ip4/172.18.79.241/tcp/43490/ws/p2p/16Uiu2HAmRSeDSXMJTmKALcnM1LXr3UrPxWc6XmXC3EqBHvnXN5BQ"],"enrUri":"enr:-L24QIvCmCUANZ7V2MqGLH0FEl1z4Cak3r8DK1guw_KcIPeSHPeW6vGwrodwGuOiJPzV29bNhceMDZDoAbbx7rBzRVsCgmlkgnY0gmlwhKwST_GKbXVsdGlhZGRyc5YACASsEk_xBqnhAAoErBJP8Qap4t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDvf4xeJQjtlMYpKFTDndgs96RDj3dgpXhnqccKKTmQnODdGNwgqnhg3VkcIKp44V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 2 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32001/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43488/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "6b1768c1-edd3-4aee-b553-e295da2d5e48", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"6b1768c1-edd3-4aee-b553-e295da2d5e48","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32001/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43488/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1738641841048974848,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 9a97fbf06c24
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2ad0330e936b
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9a97fbf06c24. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.