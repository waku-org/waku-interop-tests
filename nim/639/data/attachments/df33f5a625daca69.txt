[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_payloads with id: 2025-02-04_04-03-01__25f8de13-1abf-44fc-be74-275f8dbf001a
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-04_04-03-01__25f8de13-1abf-44fc-be74-275f8dbf001a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.159.195
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['6346', '6347', '6348', '6349', '6350']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 6346:6346 -p 6347:6347 -p 6348:6348 -p 6349:6349 -p 6350:6350 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6348 --rest-port=6346 --tcp-port=6347 --discv5-udp-port=6349 --rest-address=0.0.0.0 --nat=extip:172.18.159.195 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d182ba8d9c041cadf8c21d3cbe8f01847fb465c2a6ae655adbdadabf4db0ebe0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6350 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.159.195 waku 2379189f83a309ac654f8d8c5f94b1b992b2c2db1dd2a312f3d4baa9846eb53e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2379189f83a3. Setting up logs at ./log/docker/receiving_node1_2025-02-04_04-03-01__25f8de13-1abf-44fc-be74-275f8dbf001a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 6346
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 140d3d6d1c13. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6346/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6346/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.159.195/tcp/6347/p2p/16Uiu2HAkvzjJWxUbUwjJ12zCYhBFuHq1LAqEFwaEmb5mvkLuUJTs","/ip4/172.18.159.195/tcp/6348/ws/p2p/16Uiu2HAkvzjJWxUbUwjJ12zCYhBFuHq1LAqEFwaEmb5mvkLuUJTs"],"enrUri":"enr:-L24QO_NpnKWhiXiTNIiU6TrD3LXBqP1HPkbz0XZEqVsi1MsFa3XHdK_jHyIkNwLCul7lxhoyuTpedw5ZTnKX3koHZ4CgmlkgnY0gmlwhKwSn8OKbXVsdGlhZGRyc5YACASsEp_DBhjLAAoErBKfwwYYzN0DgnJzhQADAQAAiXNlY3AyNTZrMaECF1OcWm5o_dJROM7KEbkEo94x0fF_ETT_nS-Qw0_ETxKDdGNwghjLg3VkcIIYzYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-04_04-03-01__25f8de13-1abf-44fc-be74-275f8dbf001a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.101.227
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['55108', '55109', '55110', '55111', '55112']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 55108:55108 -p 55109:55109 -p 55110:55110 -p 55111:55111 -p 55112:55112 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55110 --rest-port=55108 --tcp-port=55109 --discv5-udp-port=55111 --rest-address=0.0.0.0 --nat=extip:172.18.101.227 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ea5cae651c033bb2ed304a4cfdfdffa34b1dfd705ca7e687b36d777bd0d3aecd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55112 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.101.227 waku 87ae4e1d92632a4345cd919273538046d1218dd38408fb32c0f32ecbdfa88356
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 87ae4e1d9263. Setting up logs at ./log/docker/receiving_node2_2025-02-04_04-03-01__25f8de13-1abf-44fc-be74-275f8dbf001a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 55108
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55108/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55108/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.101.227/tcp/55109/p2p/16Uiu2HAmDkWgYkc8rbXbvECYDCvons33iCXTh4hGUyYANxDfVBZn","/ip4/172.18.101.227/tcp/55110/ws/p2p/16Uiu2HAmDkWgYkc8rbXbvECYDCvons33iCXTh4hGUyYANxDfVBZn"],"enrUri":"enr:-L24QHE0nFA3-eFX3aimqhIe8AfgWq15JJow_RXvLQKWGn8rCru3H9JHDnKghuIvUb6NpMEKyXFyOBfv-awm3ZLsyGMCgmlkgnY0gmlwhKwSZeOKbXVsdGlhZGRyc5YACASsEmXjBtdFAAoErBJl4wbXRt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDEEXjNIJNDRkRdJTZIWUnb9B5fCp6YBlBhAImS3MjhlWDdGNwgtdFg3VkcILXR4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55108/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.159.195/tcp/6347/p2p/16Uiu2HAkvzjJWxUbUwjJ12zCYhBFuHq1LAqEFwaEmb5mvkLuUJTs"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-04_04-03-01__25f8de13-1abf-44fc-be74-275f8dbf001a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.228.189
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['26277', '26278', '26279', '26280', '26281']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 26277:26277 -p 26278:26278 -p 26279:26279 -p 26280:26280 -p 26281:26281 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26279 --rest-port=26277 --tcp-port=26278 --discv5-udp-port=26280 --rest-address=0.0.0.0 --nat=extip:172.18.228.189 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4023bd84aa349ade3463d9d92756d08e27aa7f8f391a41bbf9474cf2f468cc2f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26281 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QO_NpnKWhiXiTNIiU6TrD3LXBqP1HPkbz0XZEqVsi1MsFa3XHdK_jHyIkNwLCul7lxhoyuTpedw5ZTnKX3koHZ4CgmlkgnY0gmlwhKwSn8OKbXVsdGlhZGRyc5YACASsEp_DBhjLAAoErBKfwwYYzN0DgnJzhQADAQAAiXNlY3AyNTZrMaECF1OcWm5o_dJROM7KEbkEo94x0fF_ETT_nS-Qw0_ETxKDdGNwghjLg3VkcIIYzYV3YWt1Mgk --lightpushnode=/ip4/172.18.159.195/tcp/6347/p2p/16Uiu2HAkvzjJWxUbUwjJ12zCYhBFuHq1LAqEFwaEmb5mvkLuUJTs --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.228.189 waku 92cf957b807e8de1671a44db6f9f300f6b53f3a3bdd853fb73f31614850949f7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 92cf957b807e. Setting up logs at ./log/docker/lightpush_node1_2025-02-04_04-03-01__25f8de13-1abf-44fc-be74-275f8dbf001a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 26277
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26277/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26277/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.228.189/tcp/26278/p2p/16Uiu2HAm3H5CSxZsRpjuUW1EeS8kvcvAErcYfEvCmgpj9eKikEJ4","/ip4/172.18.228.189/tcp/26279/ws/p2p/16Uiu2HAm3H5CSxZsRpjuUW1EeS8kvcvAErcYfEvCmgpj9eKikEJ4"],"enrUri":"enr:-L24QE0B8Y_9wGiYQvJr0Rn4DH_6ClgFYXnN5pZO6nzA4g3sM8ccP-YrnazTirg1zO5OVNL7IOe3u7Iw85IJk5lcMfYCgmlkgnY0gmlwhKwS5L2KbXVsdGlhZGRyc5YACASsEuS9BmamAAoErBLkvQZmp90DgnJzhQADAQAAiXNlY3AyNTZrMaECdKmFYV6rDJmYVzKkwT2vTPXJFohcEWuzR6jPKd4Jx3mDdGNwgmamg3VkcIJmqIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26277/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.159.195/tcp/6347/p2p/16Uiu2HAkvzjJWxUbUwjJ12zCYhBFuHq1LAqEFwaEmb5mvkLuUJTs"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26277/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.101.227/tcp/55109/p2p/16Uiu2HAmDkWgYkc8rbXbvECYDCvons33iCXTh4hGUyYANxDfVBZn"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6346/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55108/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload Empty string
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26277/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738641785436363264}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:26277/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload Unecoded text
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26277/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "Hello World!", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738641785439556096}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:26277/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A dictionary
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26277/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": {"key": "YWFh"}, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738641785442899968}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:26277/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload An integer
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26277/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": 1234567890, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738641785446056192}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:26277/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A list
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26277/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": ["YWFh"], "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738641785449102336}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:26277/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A bool
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26277/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": true, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738641785452183808}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:26277/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2379189f83a3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 87ae4e1d9263
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2379189f83a3. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 92cf957b807e
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 87ae4e1d9263. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.