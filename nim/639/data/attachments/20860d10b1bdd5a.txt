[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_pubsub_topic[/waku/2/rs/5/0] with id: 2025-02-04_04-04-37__d2c5aa09-4cab-4e4e-9d52-109afcacc6d3
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-02-04_04-04-37__d2c5aa09-4cab-4e4e-9d52-109afcacc6d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.176.219
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['63220', '63221', '63222', '63223', '63224']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 63220:63220 -p 63221:63221 -p 63222:63222 -p 63223:63223 -p 63224:63224 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63222 --rest-port=63220 --tcp-port=63221 --discv5-udp-port=63223 --rest-address=0.0.0.0 --nat=extip:172.18.176.219 --peer-exchange=true --discv5-discovery=true --cluster-id=5 --nodekey=09ef0e0c468bb82cee91b950c0efde976bd46a31a2c4d67e1597bce8ddd8d3bc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63224 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/5/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.176.219 waku 55f82c29cc08207087cc9bec8389fb49fbb6f8008a947f0f5d1054d07d18bdda
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 55f82c29cc08. Setting up logs at ./log/docker/node1_2025-02-04_04-04-37__d2c5aa09-4cab-4e4e-9d52-109afcacc6d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 63220
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 41804b92c73e. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63220/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63220/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.176.219/tcp/63221/p2p/16Uiu2HAmVDM6aFSsZfrj4wa2jSN1UzkzDV7LpkcMTmKppqDye19k","/ip4/172.18.176.219/tcp/63222/ws/p2p/16Uiu2HAmVDM6aFSsZfrj4wa2jSN1UzkzDV7LpkcMTmKppqDye19k"],"enrUri":"enr:-L24QBw96xdWhoZA9hMLQVmXhf3N2s-iHcQIMQpE1Qhfq9a0Oan4aqZm6SVXb4Dn7zmaMq3TT3pKThcRs4pFgvOm1OwCgmlkgnY0gmlwhKwSsNuKbXVsdGlhZGRyc5YACASsErDbBvb1AAoErBKw2wb29t0DgnJzhQAFAQAAiXNlY3AyNTZrMaED9gUI29zyBqNkvIB7hdQoP9FFKGYhpTIDHYXH0UFOxUODdGNwgvb1g3VkcIL294V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-02-04_04-04-37__d2c5aa09-4cab-4e4e-9d52-109afcacc6d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.48.208
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['13349', '13350', '13351', '13352', '13353']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 13349:13349 -p 13350:13350 -p 13351:13351 -p 13352:13352 -p 13353:13353 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13351 --rest-port=13349 --tcp-port=13350 --discv5-udp-port=13352 --rest-address=0.0.0.0 --nat=extip:172.18.48.208 --peer-exchange=true --discv5-discovery=true --cluster-id=5 --nodekey=d90c8f504e220ed3ceffb5cfeeb63adcc06577e3e5b8335c4eba0eefa6ca9ddf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13353 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QBw96xdWhoZA9hMLQVmXhf3N2s-iHcQIMQpE1Qhfq9a0Oan4aqZm6SVXb4Dn7zmaMq3TT3pKThcRs4pFgvOm1OwCgmlkgnY0gmlwhKwSsNuKbXVsdGlhZGRyc5YACASsErDbBvb1AAoErBKw2wb29t0DgnJzhQAFAQAAiXNlY3AyNTZrMaED9gUI29zyBqNkvIB7hdQoP9FFKGYhpTIDHYXH0UFOxUODdGNwgvb1g3VkcIL294V3YWt1MgU --pubsub-topic=/waku/2/rs/5/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.48.208 waku d714bde5de49ea61848b8e8ea1dbc4dad896c99cb5f84b140f6f36a25d82e4f7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d714bde5de49. Setting up logs at ./log/docker/node2_2025-02-04_04-04-37__d2c5aa09-4cab-4e4e-9d52-109afcacc6d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 13349
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13349/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13349/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.48.208/tcp/13350/p2p/16Uiu2HAmJSFXe9MtngEfyJbb8T2hkJPwQsQR7JQxhng7crhdPDMB","/ip4/172.18.48.208/tcp/13351/ws/p2p/16Uiu2HAmJSFXe9MtngEfyJbb8T2hkJPwQsQR7JQxhng7crhdPDMB"],"enrUri":"enr:-L24QNIgfcVIt_f2i49XDcCnjDwWRPEwzVDzmj9Cj0Mf6gXrB4HEfQ04p1JKQ2t8SbF_KPICYWb-V4DAwTUDrYYHOxYCgmlkgnY0gmlwhKwSMNCKbXVsdGlhZGRyc5YACASsEjDQBjQmAAoErBIw0AY0J90DgnJzhQAFAQAAiXNlY3AyNTZrMaEDVeK7v6DWKaE9IduB9vG9GiiG9jcG0B_nUEYQ8tbE-rKDdGNwgjQmg3VkcII0KIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13349/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.176.219/tcp/63221/p2p/16Uiu2HAmVDM6aFSsZfrj4wa2jSN1UzkzDV7LpkcMTmKppqDye19k"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63220/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/5/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13349/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/5/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63220/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63220/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738641879669372160,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13349/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738641879669372160,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 55f82c29cc08
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d714bde5de49
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 55f82c29cc08. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.