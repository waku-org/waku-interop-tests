[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_nodes_different_content_topic_different_shard with id: 2025-02-04_04-03-26__5b5e0034-8f10-4870-888e-b827ae07e98e
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-02-04_04-03-26__5b5e0034-8f10-4870-888e-b827ae07e98e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.233.41
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['62057', '62058', '62059', '62060', '62061']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 62057:62057 -p 62058:62058 -p 62059:62059 -p 62060:62060 -p 62061:62061 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62059 --rest-port=62057 --tcp-port=62058 --discv5-udp-port=62060 --rest-address=0.0.0.0 --nat=extip:172.18.233.41 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=fafbff4aad85eac568a1dc5d7dfbbb3bf564294cfcd0eb1a2b4ba6a3e852a71d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62061 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.233.41 waku 2d342f58378c9b7c54353a22c7941c0c82bcc3448e89fb919e0bb3da7bbb37b5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2d342f58378c. Setting up logs at ./log/docker/node1_2025-02-04_04-03-26__5b5e0034-8f10-4870-888e-b827ae07e98e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 62057
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fb8b3b1ce93d. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62057/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62057/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.233.41/tcp/62058/p2p/16Uiu2HAmEF5MXbeRrS8nXjnHzdMp44WDLjMcG18QPKobKt6mbkuQ","/ip4/172.18.233.41/tcp/62059/ws/p2p/16Uiu2HAmEF5MXbeRrS8nXjnHzdMp44WDLjMcG18QPKobKt6mbkuQ"],"enrUri":"enr:-L24QNs6ojTUFOdOMyyY4EIYvsFU-aBj0BjucWekgMVgh3lPAgIr46SxgeKar7NnhGYlGDwOQW2ujM3scLUYCUJbNrUCgmlkgnY0gmlwhKwS6SmKbXVsdGlhZGRyc5YACASsEukpBvJqAAoErBLpKQbya90DgnJzhQACAQAAiXNlY3AyNTZrMaEDF5cXtMUZ384ZKY3GvtrgNXYpYumdELNc1CpBwn9vdtuDdGNwgvJqg3VkcILybIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-02-04_04-03-26__5b5e0034-8f10-4870-888e-b827ae07e98e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.167.97
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8657', '8658', '8659', '8660', '8661']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8657:8657 -p 8658:8658 -p 8659:8659 -p 8660:8660 -p 8661:8661 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8659 --rest-port=8657 --tcp-port=8658 --discv5-udp-port=8660 --rest-address=0.0.0.0 --nat=extip:172.18.167.97 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=4ebcf92ab8ca32b110cdc0f8f0a0deb1ecdea8da9c320bb9ed93cf622ce181ce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8661 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QNs6ojTUFOdOMyyY4EIYvsFU-aBj0BjucWekgMVgh3lPAgIr46SxgeKar7NnhGYlGDwOQW2ujM3scLUYCUJbNrUCgmlkgnY0gmlwhKwS6SmKbXVsdGlhZGRyc5YACASsEukpBvJqAAoErBLpKQbya90DgnJzhQACAQAAiXNlY3AyNTZrMaEDF5cXtMUZ384ZKY3GvtrgNXYpYumdELNc1CpBwn9vdtuDdGNwgvJqg3VkcILybIV3YWt1MgU --content-topic=/waku/2/content/test.js
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.167.97 waku 1da49ee8cc49fc462534c79d7544b010f61528d860b5f4ea00a6b82206d9632d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1da49ee8cc49. Setting up logs at ./log/docker/node2_2025-02-04_04-03-26__5b5e0034-8f10-4870-888e-b827ae07e98e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 8657
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8657/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8657/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.167.97/tcp/8658/p2p/16Uiu2HAmHH26YKfrwMK6BSMN9LdVL7k1BKBf9uXg7CPoej4ufDcJ","/ip4/172.18.167.97/tcp/8659/ws/p2p/16Uiu2HAmHH26YKfrwMK6BSMN9LdVL7k1BKBf9uXg7CPoej4ufDcJ"],"enrUri":"enr:-L24QGvKWbeKQe7LbMWboxcjXCm96OvL4ah-U-eP_CcuCkUBHVi2opRld2TjgnlS02SGO1wqiZKIPcFbSmR1VGOVpswCgmlkgnY0gmlwhKwSp2GKbXVsdGlhZGRyc5YACASsEqdhBiHSAAoErBKnYQYh090DgnJzhQACAQAAiXNlY3AyNTZrMaEDRKmhdh-IU0hbydY5fpoZ_yXLNgvWbkw2OeiN8D6PEL-DdGNwgiHSg3VkcIIh1IV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8657/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.233.41/tcp/62058/p2p/16Uiu2HAmEF5MXbeRrS8nXjnHzdMp44WDLjMcG18QPKobKt6mbkuQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62057/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8657/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/content/test.js"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62057/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62057/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738641809477253120,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8657/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:8657/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto. Response content: b'/myapp/1/latest/proto'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2d342f58378c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1da49ee8cc49
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2d342f58378c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.