[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_works_with_static_sharding with id: 2025-02-04_04-03-16__8587ea83-5059-426c-8690-2e5e161ba8a7
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-02-04_04-03-16__8587ea83-5059-426c-8690-2e5e161ba8a7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.116.9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['43070', '43071', '43072', '43073', '43074']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 43070:43070 -p 43071:43071 -p 43072:43072 -p 43073:43073 -p 43074:43074 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43072 --rest-port=43070 --tcp-port=43071 --discv5-udp-port=43073 --rest-address=0.0.0.0 --nat=extip:172.18.116.9 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=3835eadaedc3b72fa05eb380afaccb5abeddf92d943abd355a20f59e5f519e5a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43074 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.116.9 waku bc99750a86e81fcd5e93376bf55bf1e1ce623bdd0e6de489e305ad607774c1ab
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID bc99750a86e8. Setting up logs at ./log/docker/node1_2025-02-04_04-03-16__8587ea83-5059-426c-8690-2e5e161ba8a7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 43070
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7f7828863278. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43070/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43070/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.116.9/tcp/43071/p2p/16Uiu2HAmPyHXdwKkySbjFYN4MctmMWqw27pz8ddwPVWg4H9oMiBx","/ip4/172.18.116.9/tcp/43072/ws/p2p/16Uiu2HAmPyHXdwKkySbjFYN4MctmMWqw27pz8ddwPVWg4H9oMiBx"],"enrUri":"enr:-L24QNfoVl4Kls7w43PB6qcil5o0xFU806hYmGl7zWspJPJWS7Zy-m5pcZZzK9gl0F7nouYBytZbM00lAFVLj4cQqSoCgmlkgnY0gmlwhKwSdAmKbXVsdGlhZGRyc5YACASsEnQJBqg_AAoErBJ0CQaoQN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDqCBvN603IeVbHdo00Jc_fcL2MHC1RXtUkt4to3Fb6r-DdGNwgqg_g3VkcIKoQYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-02-04_04-03-16__8587ea83-5059-426c-8690-2e5e161ba8a7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.227.243
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['59959', '59960', '59961', '59962', '59963']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 59959:59959 -p 59960:59960 -p 59961:59961 -p 59962:59962 -p 59963:59963 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59961 --rest-port=59959 --tcp-port=59960 --discv5-udp-port=59962 --rest-address=0.0.0.0 --nat=extip:172.18.227.243 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=7bb02fcae32c93a3745e52f81cbdbbfc1f05bbcc5cc8c87b4c2c4bcdb2ff4c1c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59963 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QNfoVl4Kls7w43PB6qcil5o0xFU806hYmGl7zWspJPJWS7Zy-m5pcZZzK9gl0F7nouYBytZbM00lAFVLj4cQqSoCgmlkgnY0gmlwhKwSdAmKbXVsdGlhZGRyc5YACASsEnQJBqg_AAoErBJ0CQaoQN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDqCBvN603IeVbHdo00Jc_fcL2MHC1RXtUkt4to3Fb6r-DdGNwgqg_g3VkcIKoQYV3YWt1MgU --filternode=/ip4/172.18.116.9/tcp/43071/p2p/16Uiu2HAmPyHXdwKkySbjFYN4MctmMWqw27pz8ddwPVWg4H9oMiBx --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.227.243 waku 5c7d8cb027a161044febb31525df5908f474c7893a9e471a2051df8e8649f1c8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5c7d8cb027a1. Setting up logs at ./log/docker/node2_2025-02-04_04-03-16__8587ea83-5059-426c-8690-2e5e161ba8a7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 59959
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59959/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59959/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.227.243/tcp/59960/p2p/16Uiu2HAmBfpoRJqQiCwEvhvbE3uPXXoTfRaX55DX6QyMEaQXSU5J","/ip4/172.18.227.243/tcp/59961/ws/p2p/16Uiu2HAmBfpoRJqQiCwEvhvbE3uPXXoTfRaX55DX6QyMEaQXSU5J"],"enrUri":"enr:-L24QEPsHI1qi4dnTD40B-UETAkd1uvCsmYdhCWvjSBRdmJaJvVMQOgxOT-KX0Xe2D-a_mIia0oxdG3ViC9oOltlRVYCgmlkgnY0gmlwhKwS4_OKbXVsdGlhZGRyc5YACASsEuPzBuo4AAoErBLj8wbqOd0DgnJzhQACAQAAiXNlY3AyNTZrMaEC8VsYo8NgHexr31ufBl30tJ9mOfQ5plBZJ5eQwhZeqa2DdGNwguo4g3VkcILqOoV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59959/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.116.9/tcp/43071/p2p/16Uiu2HAmPyHXdwKkySbjFYN4MctmMWqw27pz8ddwPVWg4H9oMiBx"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43070/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59959/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "7f19d89d-bd23-4a67-a59c-a944deb26890", "contentFilters": ["/myapp/1/latest/proto"], "pubsubTopic": "/waku/2/rs/2/0"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"7f19d89d-bd23-4a67-a59c-a944deb26890","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43070/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:186 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59959/filter/v2/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738641798933810432,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id bc99750a86e8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5c7d8cb027a1
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container bc99750a86e8. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.