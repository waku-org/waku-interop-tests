[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_pubsub_topic[/waku/2/rs/5/999] with id: 2025-02-04_04-03-32__63dd97ac-72b9-40fe-b7ee-60eb0bafcfa2
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-02-04_04-03-32__63dd97ac-72b9-40fe-b7ee-60eb0bafcfa2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.52.132
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['49646', '49647', '49648', '49649', '49650']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 49646:49646 -p 49647:49647 -p 49648:49648 -p 49649:49649 -p 49650:49650 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49648 --rest-port=49646 --tcp-port=49647 --discv5-udp-port=49649 --rest-address=0.0.0.0 --nat=extip:172.18.52.132 --peer-exchange=true --discv5-discovery=true --cluster-id=5 --nodekey=dc443bdde84c298fe005f934f3fd27c05d6708dd6acc3f0eb60e37d89ba8e1ac --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49650 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/5/999
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.52.132 waku 39879e832655104568551776236976a73bbe3e4b1b550738c38e67cc9fa594e5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 39879e832655. Setting up logs at ./log/docker/node1_2025-02-04_04-03-32__63dd97ac-72b9-40fe-b7ee-60eb0bafcfa2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 49646
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1da49ee8cc49. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49646/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49646/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.52.132/tcp/49647/p2p/16Uiu2HAmBXu2Aus7GbMus1HxJtJBrNQPApRWKZWoYmRX5dmKAJw6","/ip4/172.18.52.132/tcp/49648/ws/p2p/16Uiu2HAmBXu2Aus7GbMus1HxJtJBrNQPApRWKZWoYmRX5dmKAJw6"],"enrUri":"enr:-L24QOQGxVT8WKe80k5lEH0V7I9-Gkj_Zqu-5Il6csGiktfLFftO3wnlwWEnAm-aIVzRrScW4D7qelCiOozHzapsjjYCgmlkgnY0gmlwhKwSNISKbXVsdGlhZGRyc5YACASsEjSEBsHvAAoErBI0hAbB8N0DgnJzhQAFAQPniXNlY3AyNTZrMaEC71M4n5vCJRkzLR0kXKLxjJOh91_OClJ-T6jAyByDeq2DdGNwgsHvg3VkcILB8YV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-02-04_04-03-32__63dd97ac-72b9-40fe-b7ee-60eb0bafcfa2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.131.142
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['14890', '14891', '14892', '14893', '14894']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 14890:14890 -p 14891:14891 -p 14892:14892 -p 14893:14893 -p 14894:14894 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14892 --rest-port=14890 --tcp-port=14891 --discv5-udp-port=14893 --rest-address=0.0.0.0 --nat=extip:172.18.131.142 --peer-exchange=true --discv5-discovery=true --cluster-id=5 --nodekey=d6370be6e5e7edbb2adffafab263d3a19ca14a2cacf61f46f7ca6bdd281ade3f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14894 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QOQGxVT8WKe80k5lEH0V7I9-Gkj_Zqu-5Il6csGiktfLFftO3wnlwWEnAm-aIVzRrScW4D7qelCiOozHzapsjjYCgmlkgnY0gmlwhKwSNISKbXVsdGlhZGRyc5YACASsEjSEBsHvAAoErBI0hAbB8N0DgnJzhQAFAQPniXNlY3AyNTZrMaEC71M4n5vCJRkzLR0kXKLxjJOh91_OClJ-T6jAyByDeq2DdGNwgsHvg3VkcILB8YV3YWt1MgU --pubsub-topic=/waku/2/rs/5/999
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.131.142 waku a2551e613a6c32a4b29ca8815b2ccbe3f739a49a4582ac53e9813e14e8df88b2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a2551e613a6c. Setting up logs at ./log/docker/node2_2025-02-04_04-03-32__63dd97ac-72b9-40fe-b7ee-60eb0bafcfa2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 14890
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14890/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14890/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.131.142/tcp/14891/p2p/16Uiu2HAm43Sx2Upw5vdjSHZhTdMqtYt9r9GxjsBSwtXFAzaXS2zA","/ip4/172.18.131.142/tcp/14892/ws/p2p/16Uiu2HAm43Sx2Upw5vdjSHZhTdMqtYt9r9GxjsBSwtXFAzaXS2zA"],"enrUri":"enr:-L24QK03d5JxgVn5pABV8SXxjOnHmpw6hUVT4MdRJef6MwFie2vTNZ5OYZbn2HDeRFsqR8O20UfuiX87xahe-7Rx7VICgmlkgnY0gmlwhKwSg46KbXVsdGlhZGRyc5YACASsEoOOBjorAAoErBKDjgY6LN0DgnJzhQAFAQPniXNlY3AyNTZrMaECgAerwrF_8hJx-Dj5i013ffkKzTNkPnlMFcrUbLhHwj-DdGNwgjorg3VkcII6LYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14890/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.52.132/tcp/49647/p2p/16Uiu2HAmBXu2Aus7GbMus1HxJtJBrNQPApRWKZWoYmRX5dmKAJw6"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49646/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/5/999"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14890/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/5/999"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49646/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F999" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49646/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F999" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738641814776669440,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14890/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F999" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738641814776669440,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 39879e832655
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a2551e613a6c
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 39879e832655. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.