[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_pubsub_topic[/waku/2/rs/5/0] with id: 2024-12-17_04-17-16__90461b4f-9bba-464a-92e1-3e5e07d2f84f
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-17_04-17-16__90461b4f-9bba-464a-92e1-3e5e07d2f84f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.139.77
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['36575', '36576', '36577', '36578', '36579']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 36575:36575 -p 36576:36576 -p 36577:36577 -p 36578:36578 -p 36579:36579 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36577 --rest-port=36575 --tcp-port=36576 --discv5-udp-port=36578 --rest-address=0.0.0.0 --nat=extip:172.18.139.77 --peer-exchange=true --discv5-discovery=true --cluster-id=5 --nodekey=a5424c2bbfbebcee7a4eab42f38c5bb09dc72382d02fafdacfafd03adfd4a974 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36579 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/5/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.139.77 waku a3d3bdaab68dc54368d182885146d63b55a4c1b18583365dcf4a0b35bf43c4a2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a3d3bdaab68d. Setting up logs at ./log/docker/node1_2024-12-17_04-17-16__90461b4f-9bba-464a-92e1-3e5e07d2f84f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 36575
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 33a03caaaa50. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36575/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36575/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.139.77/tcp/36576/p2p/16Uiu2HAmLwX7rLodmyAwPqYBiTwVr4PxFkjBMsE2pEpcKiHxXz1c","/ip4/172.18.139.77/tcp/36577/ws/p2p/16Uiu2HAmLwX7rLodmyAwPqYBiTwVr4PxFkjBMsE2pEpcKiHxXz1c"],"enrUri":"enr:-L24QCWsKkwTvfMwdBsgIUxFyqmAl8dg8PWSFZdsYIOskSg3FSzA2P94SD_Jqk7KFKtOU0zH5gicfWukuaf6EARigCQCgmlkgnY0gmlwhKwSi02KbXVsdGlhZGRyc5YACASsEotNBo7gAAoErBKLTQaO4d0DgnJzhQAFAQAAiXNlY3AyNTZrMaEDexmUBCzrRbgHQzSwThTNe1H7wUnc0UL6yyXQBLtfqIeDdGNwgo7gg3VkcIKO4oV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-17_04-17-16__90461b4f-9bba-464a-92e1-3e5e07d2f84f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.106.230
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['18784', '18785', '18786', '18787', '18788']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 18784:18784 -p 18785:18785 -p 18786:18786 -p 18787:18787 -p 18788:18788 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18786 --rest-port=18784 --tcp-port=18785 --discv5-udp-port=18787 --rest-address=0.0.0.0 --nat=extip:172.18.106.230 --peer-exchange=true --discv5-discovery=true --cluster-id=5 --nodekey=deac1c2beea2f9ef4d345f731afcebcdb192adf413eb93e591ab03d71b6abde9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18788 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QCWsKkwTvfMwdBsgIUxFyqmAl8dg8PWSFZdsYIOskSg3FSzA2P94SD_Jqk7KFKtOU0zH5gicfWukuaf6EARigCQCgmlkgnY0gmlwhKwSi02KbXVsdGlhZGRyc5YACASsEotNBo7gAAoErBKLTQaO4d0DgnJzhQAFAQAAiXNlY3AyNTZrMaEDexmUBCzrRbgHQzSwThTNe1H7wUnc0UL6yyXQBLtfqIeDdGNwgo7gg3VkcIKO4oV3YWt1MgU --pubsub-topic=/waku/2/rs/5/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.106.230 waku 1ef157ed2f7df5626f3859888fa5c9f5dc87f1ad83d4f70b2913225e7dea5424
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1ef157ed2f7d. Setting up logs at ./log/docker/node2_2024-12-17_04-17-16__90461b4f-9bba-464a-92e1-3e5e07d2f84f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 18784
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18784/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18784/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.106.230/tcp/18785/p2p/16Uiu2HAmTJcMBZfp6jqPa9UUrwB7DB4N2qiFtp3g2zbbQUCSTRZW","/ip4/172.18.106.230/tcp/18786/ws/p2p/16Uiu2HAmTJcMBZfp6jqPa9UUrwB7DB4N2qiFtp3g2zbbQUCSTRZW"],"enrUri":"enr:-L24QDG0BklH7HqsZO9UMvBXdv0DFunJtKXZsQcs6ZtACl-CDTjSVv4Ki2U5Qh_FwPzo__KgxaDQ8doOb-LsLs_UbckCgmlkgnY0gmlwhKwSauaKbXVsdGlhZGRyc5YACASsEmrmBklhAAoErBJq5gZJYt0DgnJzhQAFAQAAiXNlY3AyNTZrMaED2abPZfpG2HQCLsoSFEgVSw6Kt5MEVYmdnpkEz77Ya32DdGNwgklhg3VkcIJJY4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18784/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.139.77/tcp/36576/p2p/16Uiu2HAmLwX7rLodmyAwPqYBiTwVr4PxFkjBMsE2pEpcKiHxXz1c"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36575/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/5/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18784/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/5/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36575/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36575/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1734409039219748352,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18784/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1734409039219748352,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a3d3bdaab68d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1ef157ed2f7d
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a3d3bdaab68d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.