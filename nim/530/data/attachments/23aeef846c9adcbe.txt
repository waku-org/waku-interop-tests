[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_stored_when_ephemeral_false with id: 2024-12-17_04-09-03__9c8e0628-92e7-4a3d-9cfb-9deeec5e13eb
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-17_04-09-03__9c8e0628-92e7-4a3d-9cfb-9deeec5e13eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-17_04-09-03__9c8e0628-92e7-4a3d-9cfb-9deeec5e13eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-17_04-09-03__9c8e0628-92e7-4a3d-9cfb-9deeec5e13eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:414 Start 3 nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.182.144
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['46618', '46619', '46620', '46621', '46622']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 46618:46618 -p 46619:46619 -p 46620:46620 -p 46621:46621 -p 46622:46622 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46620 --rest-port=46618 --tcp-port=46619 --discv5-udp-port=46621 --rest-address=0.0.0.0 --nat=extip:172.18.182.144 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3eb1dcd2ad5a7a48f8a76fd6b39c2f3cfea2c17df557edeeb7d82edde4c3cbe2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46622 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.182.144 waku a23e39622c6dd492d9eb91616908379c8a6b3b8c3dc21f83328bfa151f9e2447
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a23e39622c6d. Setting up logs at ./log/docker/node1_2024-12-17_04-09-03__9c8e0628-92e7-4a3d-9cfb-9deeec5e13eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 46618
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7d0623d33c1a. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46618/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46618/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.182.144/tcp/46619/p2p/16Uiu2HAmR36bLjXN9bMXaCASgA7qFbZjkTiZFMMkdhSSLRpCXRB7","/ip4/172.18.182.144/tcp/46620/ws/p2p/16Uiu2HAmR36bLjXN9bMXaCASgA7qFbZjkTiZFMMkdhSSLRpCXRB7"],"enrUri":"enr:-L24QGEQoAK-NAxEdMb23fRr8lPlj8uPah7HRiAWnEs7aFhESNKg5bDuVoKxXDKPeWoSV5HY38Px0FvfKldZW3sc-eMCgmlkgnY0gmlwhKwStpCKbXVsdGlhZGRyc5YACASsEraQBrYbAAoErBK2kAa2HN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDt_YUPYDXIHPc5-6vh3IYTWTC63vQbdmYqTRR1GysJuqDdGNwgrYbg3VkcIK2HYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.43.34
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['57676', '57677', '57678', '57679', '57680']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 57676:57676 -p 57677:57677 -p 57678:57678 -p 57679:57679 -p 57680:57680 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57678 --rest-port=57676 --tcp-port=57677 --discv5-udp-port=57679 --rest-address=0.0.0.0 --nat=extip:172.18.43.34 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=42eac5173ea9fbdeb5fe9b560b26cbb6eab7cc867a08db0bf0d48cc7efa9ff61 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57680 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QGEQoAK-NAxEdMb23fRr8lPlj8uPah7HRiAWnEs7aFhESNKg5bDuVoKxXDKPeWoSV5HY38Px0FvfKldZW3sc-eMCgmlkgnY0gmlwhKwStpCKbXVsdGlhZGRyc5YACASsEraQBrYbAAoErBK2kAa2HN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDt_YUPYDXIHPc5-6vh3IYTWTC63vQbdmYqTRR1GysJuqDdGNwgrYbg3VkcIK2HYV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.43.34 waku ebc991574b312aee528f4aa99180e535b531290167d647d527f0a180036c4ba4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ebc991574b31. Setting up logs at ./log/docker/node2_2024-12-17_04-09-03__9c8e0628-92e7-4a3d-9cfb-9deeec5e13eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 57676
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57676/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57676/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.43.34/tcp/57677/p2p/16Uiu2HAmGV3LE2ad2HsAg4eUuxKzmqYoFR8myPuM3ZFT4jPq5mc9","/ip4/172.18.43.34/tcp/57678/ws/p2p/16Uiu2HAmGV3LE2ad2HsAg4eUuxKzmqYoFR8myPuM3ZFT4jPq5mc9"],"enrUri":"enr:-L24QLgRPOnouKtljMXKt8huKUYy3hJ3xDFxPiYUJJkPsWk7Lo2luN96yfBshHgkpKIhwiY0-Xiq0970NVYf8cA9Re0CgmlkgnY0gmlwhKwSKyKKbXVsdGlhZGRyc5YACASsEisiBuFNAAoErBIrIgbhTt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDOOJPm_-WIxxtPftQw49xUzOkmgVILAF6h_Un-sKEnYaDdGNwguFNg3VkcILhT4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.184.33
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['36186', '36187', '36188', '36189', '36190']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 36186:36186 -p 36187:36187 -p 36188:36188 -p 36189:36189 -p 36190:36190 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36188 --rest-port=36186 --tcp-port=36187 --discv5-udp-port=36189 --rest-address=0.0.0.0 --nat=extip:172.18.184.33 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ea83caff1b1ffecb1fd4eabbceb4a29de6bcf3d3f802ec82daca92ef23cc6fde --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36190 --metrics-logging=true --relay=false --storenode=/ip4/172.18.43.34/tcp/57677/p2p/16Uiu2HAmGV3LE2ad2HsAg4eUuxKzmqYoFR8myPuM3ZFT4jPq5mc9 --discv5-bootstrap-node=enr:-L24QLgRPOnouKtljMXKt8huKUYy3hJ3xDFxPiYUJJkPsWk7Lo2luN96yfBshHgkpKIhwiY0-Xiq0970NVYf8cA9Re0CgmlkgnY0gmlwhKwSKyKKbXVsdGlhZGRyc5YACASsEisiBuFNAAoErBIrIgbhTt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDOOJPm_-WIxxtPftQw49xUzOkmgVILAF6h_Un-sKEnYaDdGNwguFNg3VkcILhT4V3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.184.33 waku 22f0317af824422f4c1e16dfa7183cb712fc0835b2dd4e9141bc641de7da24e0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 22f0317af824. Setting up logs at ./log/docker/node3_2024-12-17_04-09-03__9c8e0628-92e7-4a3d-9cfb-9deeec5e13eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 36186
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36186/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36186/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.184.33/tcp/36187/p2p/16Uiu2HAmRk7bEqutJGshqbRNJXioDjBjAkBvMriHHXNzzVTprLWq","/ip4/172.18.184.33/tcp/36188/ws/p2p/16Uiu2HAmRk7bEqutJGshqbRNJXioDjBjAkBvMriHHXNzzVTprLWq"],"enrUri":"enr:-L24QJisInzFXCzfoCXM-omo8dBtE5PdSLTDQqpdyQ_FGywgErtj_K0BgUQV-ftI1JhBJP_WVcf4CvhQ_K50emaswO4CgmlkgnY0gmlwhKwSuCGKbXVsdGlhZGRyc5YACASsErghBo1bAAoErBK4IQaNXN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDwngFXZlPHiZJVnQR0KhBDPXg-J1BL_OVfLVD0G1wssaDdGNwgo1bg3VkcIKNXYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:419 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46618/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57676/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46618/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.43.34/tcp/57677/p2p/16Uiu2HAmGV3LE2ad2HsAg4eUuxKzmqYoFR8myPuM3ZFT4jPq5mc9","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57676/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.182.144/tcp/46619/p2p/16Uiu2HAmR36bLjXN9bMXaCASgA7qFbZjkTiZFMMkdhSSLRpCXRB7","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:424 Node1 publish message with ephemeral = false
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46618/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:428 Check if message is stored 
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36186/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"8051e921374ca9ec6428","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"nzlP4whiMf8Cv/8gKEMnBN8wqwuIrBpRysR1IWgJ0U4="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a23e39622c6d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ebc991574b31
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a23e39622c6d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 22f0317af824
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ebc991574b31. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.