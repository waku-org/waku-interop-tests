[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-12-17_04-12-58__347b4a52-588d-4513-a3d3-314d00bcad60
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-17_04-12-58__347b4a52-588d-4513-a3d3-314d00bcad60__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.114.214
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['58172', '58173', '58174', '58175', '58176']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 58172:58172 -p 58173:58173 -p 58174:58174 -p 58175:58175 -p 58176:58176 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58174 --rest-port=58172 --tcp-port=58173 --discv5-udp-port=58175 --rest-address=0.0.0.0 --nat=extip:172.18.114.214 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4b4dd0ceb52a8afda8ee3f6a70e5b72e2459ad69dedf6cdfdfccec6a98f709bd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58176 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.114.214 waku 05bf55157a9d3a7128cdae643c3bd7430ef6841aef4cf4d2bc3c0471379a6440
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 05bf55157a9d. Setting up logs at ./log/docker/receiving_node1_2024-12-17_04-12-58__347b4a52-588d-4513-a3d3-314d00bcad60__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 58172
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 57cd2d151839. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58172/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58172/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.114.214/tcp/58173/p2p/16Uiu2HAmFxoj3Y5RtoDGipLUj8921uwbb5KCnmWyzvBN6L8cRcMg","/ip4/172.18.114.214/tcp/58174/ws/p2p/16Uiu2HAmFxoj3Y5RtoDGipLUj8921uwbb5KCnmWyzvBN6L8cRcMg"],"enrUri":"enr:-L24QHtqUFYSfcb3d0Vinstp_LpxLWukla-9LsECbG9opd5qJdBhJsQdzLCZ868lEVtFDxpQ0rH5ylvCFr07htzF2gUCgmlkgnY0gmlwhKwSctaKbXVsdGlhZGRyc5YACASsEnLWBuM9AAoErBJy1gbjPt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDMSOAb-aoj7rPNIuO4VjmXGbFjN9fe7-LjdWy1iDphSuDdGNwguM9g3VkcILjP4V3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-17_04-12-58__347b4a52-588d-4513-a3d3-314d00bcad60__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.45.82
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['53384', '53385', '53386', '53387', '53388']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 53384:53384 -p 53385:53385 -p 53386:53386 -p 53387:53387 -p 53388:53388 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53386 --rest-port=53384 --tcp-port=53385 --discv5-udp-port=53387 --rest-address=0.0.0.0 --nat=extip:172.18.45.82 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c6b56faf3f9c7d7aeec76dbab68cbae615c2d7b2dc34b8bb2ce534b27adf8d4f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53388 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.45.82 waku ebc01c788b7280666a295ccb788cf76f46a503e5a737aa397bf5f6acfadc3e33
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ebc01c788b72. Setting up logs at ./log/docker/receiving_node2_2024-12-17_04-12-58__347b4a52-588d-4513-a3d3-314d00bcad60__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 53384
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53384/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53384/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.82/tcp/53385/p2p/16Uiu2HAkyLnSjqivUMW8bwY3U46LJQ4qFW2kBDPZJBNFpfcZFjJn","/ip4/172.18.45.82/tcp/53386/ws/p2p/16Uiu2HAkyLnSjqivUMW8bwY3U46LJQ4qFW2kBDPZJBNFpfcZFjJn"],"enrUri":"enr:-L24QIt1XA9xgNZArkuVh8jCFV2IV8mC41ScIKOBFwK4YD3-EvjX9GPbIJM8FEj8p5X1QAqj26SGrg4igGkn2KGYNggCgmlkgnY0gmlwhKwSLVKKbXVsdGlhZGRyc5YACASsEi1SBtCJAAoErBItUgbQit0DgnJzhQADAQAAiXNlY3AyNTZrMaECOi4nN2v6aSx-5tloh4bx1trTnNWXQM_LzolDNV2-a_-DdGNwgtCJg3VkcILQi4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53384/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.114.214/tcp/58173/p2p/16Uiu2HAmFxoj3Y5RtoDGipLUj8921uwbb5KCnmWyzvBN6L8cRcMg"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-17_04-12-58__347b4a52-588d-4513-a3d3-314d00bcad60__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.140.89
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['60620', '60621', '60622', '60623', '60624']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 60620:60620 -p 60621:60621 -p 60622:60622 -p 60623:60623 -p 60624:60624 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60622 --rest-port=60620 --tcp-port=60621 --discv5-udp-port=60623 --rest-address=0.0.0.0 --nat=extip:172.18.140.89 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5a27a9ab3abb9afe42d2594fd44355e4f3cc7bcc5c0c2a7cae3d88fabc62aeec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60624 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QHtqUFYSfcb3d0Vinstp_LpxLWukla-9LsECbG9opd5qJdBhJsQdzLCZ868lEVtFDxpQ0rH5ylvCFr07htzF2gUCgmlkgnY0gmlwhKwSctaKbXVsdGlhZGRyc5YACASsEnLWBuM9AAoErBJy1gbjPt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDMSOAb-aoj7rPNIuO4VjmXGbFjN9fe7-LjdWy1iDphSuDdGNwguM9g3VkcILjP4V3YWt1Mg0 --lightpushnode=/ip4/172.18.114.214/tcp/58173/p2p/16Uiu2HAmFxoj3Y5RtoDGipLUj8921uwbb5KCnmWyzvBN6L8cRcMg --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.140.89 waku 829cf75c88428303d802518386ce73ccb5d6e3650acb3f694bdd8de38b40a40b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 829cf75c8842. Setting up logs at ./log/docker/lightpush_node1_2024-12-17_04-12-58__347b4a52-588d-4513-a3d3-314d00bcad60__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 60620
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60620/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60620/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.140.89/tcp/60621/p2p/16Uiu2HAmEUM1k4dSbCUUcEUW2VnD3oLvAJu3FVgbYpDJd2zJDemE","/ip4/172.18.140.89/tcp/60622/ws/p2p/16Uiu2HAmEUM1k4dSbCUUcEUW2VnD3oLvAJu3FVgbYpDJd2zJDemE"],"enrUri":"enr:-L24QFmKa8oRZHQfJUidj3ZLjkZn0z1gPHd4JIBEY6wTs4xMXmuoISb3wHDyUAQOc0IAWMMmEkh2SooK8cdE7frcmoMCgmlkgnY0gmlwhKwSjFmKbXVsdGlhZGRyc5YACASsEoxZBuzNAAoErBKMWQbszt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDGv1ZQmtrP2Z6JIeWfLBnXlLwppDQBwwYVNu_BAJNFgmDdGNwguzNg3VkcILsz4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60620/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.114.214/tcp/58173/p2p/16Uiu2HAmFxoj3Y5RtoDGipLUj8921uwbb5KCnmWyzvBN6L8cRcMg"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60620/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.45.82/tcp/53385/p2p/16Uiu2HAkyLnSjqivUMW8bwY3U46LJQ4qFW2kBDPZJBNFpfcZFjJn"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58172/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53384/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60620/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1734408782976933632}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58172/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1734408782976933632,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53384/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1734408782976933632,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 05bf55157a9d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ebc01c788b72
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 05bf55157a9d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 829cf75c8842
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ebc01c788b72. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.