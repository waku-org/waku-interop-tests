[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_payloads with id: 2024-12-17_04-11-27__974e1872-1d70-4dce-ac4a-c580bc6534a0
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-17_04-11-27__974e1872-1d70-4dce-ac4a-c580bc6534a0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.187.150
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['63877', '63878', '63879', '63880', '63881']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 63877:63877 -p 63878:63878 -p 63879:63879 -p 63880:63880 -p 63881:63881 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63879 --rest-port=63877 --tcp-port=63878 --discv5-udp-port=63880 --rest-address=0.0.0.0 --nat=extip:172.18.187.150 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f5d3ff4b7db41fe07218b1bc352df839aee254bf749d80bd9b4445edecfdcfe3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63881 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.187.150 waku 3f5dde23eb87e138eb2917f8a73db45ef118e289dc158f4803bd45b7c9ab8777
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3f5dde23eb87. Setting up logs at ./log/docker/receiving_node1_2024-12-17_04-11-27__974e1872-1d70-4dce-ac4a-c580bc6534a0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 63877
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e6bd207d69ae. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63877/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63877/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.187.150/tcp/63878/p2p/16Uiu2HAmLpAQgsCfPF6z8pmJngX8Ri6MuUFbNfGwX7Qi8X2cAtGQ","/ip4/172.18.187.150/tcp/63879/ws/p2p/16Uiu2HAmLpAQgsCfPF6z8pmJngX8Ri6MuUFbNfGwX7Qi8X2cAtGQ"],"enrUri":"enr:-L24QDXe1RzkXhhP8osotJCe4oQabdNGCYAk0745SN7H3WL8Aago8znxcQ-ovjENTf0Pn_5oNDu1uBI2nxOjvJTM7eUCgmlkgnY0gmlwhKwSu5aKbXVsdGlhZGRyc5YACASsEruWBvmGAAoErBK7lgb5h90DgnJzhQADAQAAiXNlY3AyNTZrMaEDeTcYkfyaRk8kc6PlteIOAgs2HDgIlpa03rOUWJQqd-GDdGNwgvmGg3VkcIL5iIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-17_04-11-27__974e1872-1d70-4dce-ac4a-c580bc6534a0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.60.2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['55070', '55071', '55072', '55073', '55074']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 55070:55070 -p 55071:55071 -p 55072:55072 -p 55073:55073 -p 55074:55074 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55072 --rest-port=55070 --tcp-port=55071 --discv5-udp-port=55073 --rest-address=0.0.0.0 --nat=extip:172.18.60.2 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0caf8ef0721abd6f2b70feae19f351f5ecfd9e6a78c6da5a055f6e54ccaa5cd8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55074 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.60.2 waku f0ebb4d15a396462d6b0a2b93b860510a29570efbce5a3a7452f5c7483d6d921
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f0ebb4d15a39. Setting up logs at ./log/docker/receiving_node2_2024-12-17_04-11-27__974e1872-1d70-4dce-ac4a-c580bc6534a0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 55070
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55070/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55070/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.60.2/tcp/55071/p2p/16Uiu2HAm4WELXYzcAo5DkoBZefmE3q6d7Vz4ABENLydSqdeUBf6X","/ip4/172.18.60.2/tcp/55072/ws/p2p/16Uiu2HAm4WELXYzcAo5DkoBZefmE3q6d7Vz4ABENLydSqdeUBf6X"],"enrUri":"enr:-L24QJsSgSxee1yXiotZNvWqxaDhFgHM_Ty_i9-WA9s4fTxbf7g9HgCq5tVTfBc7sFq6nQoyBJpyx4pP9NRz_ZM9woACgmlkgnY0gmlwhKwSPAKKbXVsdGlhZGRyc5YACASsEjwCBtcfAAoErBI8AgbXIN0DgnJzhQADAQAAiXNlY3AyNTZrMaEChuQXoMRzVTAlKAhqJLCu7tIvFrIfFHCLrd9veGN4PPiDdGNwgtcfg3VkcILXIYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55070/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.187.150/tcp/63878/p2p/16Uiu2HAmLpAQgsCfPF6z8pmJngX8Ri6MuUFbNfGwX7Qi8X2cAtGQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-17_04-11-27__974e1872-1d70-4dce-ac4a-c580bc6534a0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.243.188
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['25628', '25629', '25630', '25631', '25632']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 25628:25628 -p 25629:25629 -p 25630:25630 -p 25631:25631 -p 25632:25632 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25630 --rest-port=25628 --tcp-port=25629 --discv5-udp-port=25631 --rest-address=0.0.0.0 --nat=extip:172.18.243.188 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=103d4daa589810fd2cbbfde3bc8b3fc7a0ce1d4bcdd8b2896d052af6011b5ce3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25632 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QDXe1RzkXhhP8osotJCe4oQabdNGCYAk0745SN7H3WL8Aago8znxcQ-ovjENTf0Pn_5oNDu1uBI2nxOjvJTM7eUCgmlkgnY0gmlwhKwSu5aKbXVsdGlhZGRyc5YACASsEruWBvmGAAoErBK7lgb5h90DgnJzhQADAQAAiXNlY3AyNTZrMaEDeTcYkfyaRk8kc6PlteIOAgs2HDgIlpa03rOUWJQqd-GDdGNwgvmGg3VkcIL5iIV3YWt1Mgk --lightpushnode=/ip4/172.18.187.150/tcp/63878/p2p/16Uiu2HAmLpAQgsCfPF6z8pmJngX8Ri6MuUFbNfGwX7Qi8X2cAtGQ --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.243.188 waku a8f03178f03a9bcf2e26ea5fe23a689830500527a9d16b5e8e950abb3f13ae6d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a8f03178f03a. Setting up logs at ./log/docker/lightpush_node1_2024-12-17_04-11-27__974e1872-1d70-4dce-ac4a-c580bc6534a0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 25628
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25628/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25628/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.243.188/tcp/25629/p2p/16Uiu2HAkzH9Ya12zsXG7cvCoXuxPTnaSNuziAYwus17PPAw3FYbB","/ip4/172.18.243.188/tcp/25630/ws/p2p/16Uiu2HAkzH9Ya12zsXG7cvCoXuxPTnaSNuziAYwus17PPAw3FYbB"],"enrUri":"enr:-L24QCsYEoRtWqgvjubzJ9rkxB1O1SyuCeH87NiprR2w-dfONOSXQHzyJKiSzLQpdvT7ommOdzoAbuNTsWV59wUMddkCgmlkgnY0gmlwhKwS87yKbXVsdGlhZGRyc5YACASsEvO8BmQdAAoErBLzvAZkHt0DgnJzhQADAQAAiXNlY3AyNTZrMaECSBtgFMslIJRzrFMGxHEG2145Vn8KYyoKn9iukVrQuGqDdGNwgmQdg3VkcIJkH4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25628/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.187.150/tcp/63878/p2p/16Uiu2HAmLpAQgsCfPF6z8pmJngX8Ri6MuUFbNfGwX7Qi8X2cAtGQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25628/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.60.2/tcp/55071/p2p/16Uiu2HAm4WELXYzcAo5DkoBZefmE3q6d7Vz4ABENLydSqdeUBf6X"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63877/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55070/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload Empty string
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25628/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1734408692133740544}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:25628/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload Unecoded text
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25628/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "Hello World!", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1734408692140196096}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:25628/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A dictionary
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25628/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": {"key": "YWFh"}, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1734408692146948608}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:25628/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload An integer
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25628/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": 1234567890, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1734408692152336128}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:25628/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A list
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25628/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": ["YWFh"], "contentTopic": "/myapp/1/latest/proto", "timestamp": 1734408692157637632}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:25628/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A bool
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25628/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": true, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1734408692160695808}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:25628/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 3f5dde23eb87
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f0ebb4d15a39
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3f5dde23eb87. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a8f03178f03a
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f0ebb4d15a39. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.