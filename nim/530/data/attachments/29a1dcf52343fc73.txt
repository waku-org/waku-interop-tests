[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2024-12-17_04-02-46__55058650-6ba8-4f25-80a0-c0a16cf6d643
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-17_04-02-46__55058650-6ba8-4f25-80a0-c0a16cf6d643__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-17_04-02-46__55058650-6ba8-4f25-80a0-c0a16cf6d643__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-17_04-02-46__55058650-6ba8-4f25-80a0-c0a16cf6d643__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.159.91
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['21063', '21064', '21065', '21066', '21067']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 21063:21063 -p 21064:21064 -p 21065:21065 -p 21066:21066 -p 21067:21067 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21065 --rest-port=21063 --tcp-port=21064 --discv5-udp-port=21066 --rest-address=0.0.0.0 --nat=extip:172.18.159.91 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e392edaec175db71aaa38e05c93cf0bbdeefffb9f08f3b4ce90bce8f24eb10ae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21067 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.159.91 waku b98bdbf2fc47913db93f955630fccecfe093985752af44d21887c7eb6b81f370
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b98bdbf2fc47. Setting up logs at ./log/docker/node1_2024-12-17_04-02-46__55058650-6ba8-4f25-80a0-c0a16cf6d643__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 21063
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7aa22b577851. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21063/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21063/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.159.91/tcp/21064/p2p/16Uiu2HAm2dM3Bo6dLWy8MKSGk7uoSFrTGQ5Jxb9WCz5T8PmrvRMf","/ip4/172.18.159.91/tcp/21065/ws/p2p/16Uiu2HAm2dM3Bo6dLWy8MKSGk7uoSFrTGQ5Jxb9WCz5T8PmrvRMf"],"enrUri":"enr:-L24QPYKPd5fBSv1RNn0okSbfk1mG05gM1A6hzmcZYQvmQk_d4w2tNxaddskFr6yVgJcrR6EQcc6qkUdFV90LnuM0r8CgmlkgnY0gmlwhKwSn1uKbXVsdGlhZGRyc5YACASsEp9bBlJIAAoErBKfWwZSSd0DgnJzhQADAQAAiXNlY3AyNTZrMaECav9caSEy-0vkEboAyem00oUwmZgTa0URi6Ghvg42ouaDdGNwglJIg3VkcIJSSoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.9.31
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['35082', '35083', '35084', '35085', '35086']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 35082:35082 -p 35083:35083 -p 35084:35084 -p 35085:35085 -p 35086:35086 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35084 --rest-port=35082 --tcp-port=35083 --discv5-udp-port=35085 --rest-address=0.0.0.0 --nat=extip:172.18.9.31 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3a255ec43aebec6f5ecb90a7f0d65642ddcd7e1aa1fdd50f01a4a3d4f4ed585f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35086 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QPYKPd5fBSv1RNn0okSbfk1mG05gM1A6hzmcZYQvmQk_d4w2tNxaddskFr6yVgJcrR6EQcc6qkUdFV90LnuM0r8CgmlkgnY0gmlwhKwSn1uKbXVsdGlhZGRyc5YACASsEp9bBlJIAAoErBKfWwZSSd0DgnJzhQADAQAAiXNlY3AyNTZrMaECav9caSEy-0vkEboAyem00oUwmZgTa0URi6Ghvg42ouaDdGNwglJIg3VkcIJSSoV3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.9.31 waku 31608ec27ea309cd5a3b73124405c0366749e65138f31967e0e106ab0686f90c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 31608ec27ea3. Setting up logs at ./log/docker/node2_2024-12-17_04-02-46__55058650-6ba8-4f25-80a0-c0a16cf6d643__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 35082
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35082/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35082/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.31/tcp/35083/p2p/16Uiu2HAmLkuDMgDGRdXbzxcyyTRMisP7scbgBP9u3Fv9uewAeHVK","/ip4/172.18.9.31/tcp/35084/ws/p2p/16Uiu2HAmLkuDMgDGRdXbzxcyyTRMisP7scbgBP9u3Fv9uewAeHVK"],"enrUri":"enr:-L24QOo1vheE_yekosJw9jwSVpBnrmYANPeJVjL27Lj_bPP2I_203SlCAoFege8dyO1aSRejiJTYZvSqGyMoSvpgddECgmlkgnY0gmlwhKwSCR-KbXVsdGlhZGRyc5YACASsEgkfBokLAAoErBIJHwaJDN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDeGEsDum5Pos4u3SMLwejK2T_oVFepCiOWp9XgUnF4QKDdGNwgokLg3VkcIKJDYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.221.25
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['27800', '27801', '27802', '27803', '27804']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 27800:27800 -p 27801:27801 -p 27802:27802 -p 27803:27803 -p 27804:27804 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27802 --rest-port=27800 --tcp-port=27801 --discv5-udp-port=27803 --rest-address=0.0.0.0 --nat=extip:172.18.221.25 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=14ff3eba25c4af93db2ca39cfe1ec0bb6adaa34ff667fa04aac1d47fbcfec0b0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27804 --metrics-logging=true --relay=false --storenode=/ip4/172.18.9.31/tcp/35083/p2p/16Uiu2HAmLkuDMgDGRdXbzxcyyTRMisP7scbgBP9u3Fv9uewAeHVK --discv5-bootstrap-node=enr:-L24QOo1vheE_yekosJw9jwSVpBnrmYANPeJVjL27Lj_bPP2I_203SlCAoFege8dyO1aSRejiJTYZvSqGyMoSvpgddECgmlkgnY0gmlwhKwSCR-KbXVsdGlhZGRyc5YACASsEgkfBokLAAoErBIJHwaJDN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDeGEsDum5Pos4u3SMLwejK2T_oVFepCiOWp9XgUnF4QKDdGNwgokLg3VkcIKJDYV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.221.25 waku 777b33aa3b799fcdb6d1090c982533db95f4e1013fa0f864f55036076f5d8ef2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 777b33aa3b79. Setting up logs at ./log/docker/node3_2024-12-17_04-02-46__55058650-6ba8-4f25-80a0-c0a16cf6d643__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 27800
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27800/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27800/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.221.25/tcp/27801/p2p/16Uiu2HAmUZzW4qCeJqpm3erJekku2G81q4dCFR5XAAytA2Vb9i7r","/ip4/172.18.221.25/tcp/27802/ws/p2p/16Uiu2HAmUZzW4qCeJqpm3erJekku2G81q4dCFR5XAAytA2Vb9i7r"],"enrUri":"enr:-L24QOplMxVdS9W2bkwp26ebQiWOk-uv8Uhdjus6Gc9ncLD9dAYJnGlHIc4PErmbFra4TEY5KvPBR0dhr-bkIpZ1jH0CgmlkgnY0gmlwhKwS3RmKbXVsdGlhZGRyc5YACASsEt0ZBmyZAAoErBLdGQZsmt0DgnJzhQADAQAAiXNlY3AyNTZrMaED7HNCBJr2MvIqgWpOlcihGG-kQhdh7yHLCNSdnxazOvGDdGNwgmyZg3VkcIJsm4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21063/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35082/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21063/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.9.31/tcp/35083/p2p/16Uiu2HAmLkuDMgDGRdXbzxcyyTRMisP7scbgBP9u3Fv9uewAeHVK","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35082/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.159.91/tcp/21064/p2p/16Uiu2HAm2dM3Bo6dLWy8MKSGk7uoSFrTGQ5Jxb9WCz5T8PmrvRMf","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21063/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27800/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"86b4e0fbf70da35b1366","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"2CKOPqA2PyJm3KDMeyn6zwtaz374QI3NetlZf3od3X4="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b98bdbf2fc47
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 31608ec27ea3
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b98bdbf2fc47. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 777b33aa3b79
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 31608ec27ea3. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.