[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_no_request_id with id: 2024-09-18_04-18-00__705c1502-a58c-438a-ba8b-1d648c1171c3
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-18_04-18-00__705c1502-a58c-438a-ba8b-1d648c1171c3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.222.197
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['45981', '45982', '45983', '45984', '45985']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 45981:45981 -p 45982:45982 -p 45983:45983 -p 45984:45984 -p 45985:45985 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45983 --rest-port=45981 --tcp-port=45982 --discv5-udp-port=45984 --rest-address=0.0.0.0 --nat=extip:172.18.222.197 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b77fd41d6b6ef08b6a8ba94fd24c5da1311deb6f07aa46fbf3b7a593bbb6166f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45985 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.222.197 waku 2bf3218b224dee0ad91a09eb7168edd4b448552b6ad153658e878f3154ee2ec9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2bf3218b224d. Setting up logs at ./log/docker/node1_2024-09-18_04-18-00__705c1502-a58c-438a-ba8b-1d648c1171c3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 45981
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45981/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45981/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.222.197/tcp/45982/p2p/16Uiu2HAmSoqaLfroYXTSJedxiZFsVN9R2LVtWGU87rhbNWN5a4u9","/ip4/172.18.222.197/tcp/45983/ws/p2p/16Uiu2HAmSoqaLfroYXTSJedxiZFsVN9R2LVtWGU87rhbNWN5a4u9"],"enrUri":"enr:-LO4QOFb2LtA3GS9vbFboL7DpRZR68mbUyHp3EDcGfg1hBjeDcO0aXM-PjTMoacBaizw57SUsvBAUDsTyWTPwS0VU08BgmlkgnY0gmlwhKwS3sWKbXVsdGlhZGRyc4wACgSsEt7FBrOf3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPSR-wdsADyXbwAh7XQt9iyf6ksad_xtM1UNuqH-1k0hIN0Y3CCs56DdWRwgrOghXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-18_04-18-00__705c1502-a58c-438a-ba8b-1d648c1171c3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.23.3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['35806', '35807', '35808', '35809', '35810']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 35806:35806 -p 35807:35807 -p 35808:35808 -p 35809:35809 -p 35810:35810 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35808 --rest-port=35806 --tcp-port=35807 --discv5-udp-port=35809 --rest-address=0.0.0.0 --nat=extip:172.18.23.3 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=47be3cdd6c61ae8e65e5efab54b09b1eca130f2bb7d575eccfb419c247d4b110 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35810 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QOFb2LtA3GS9vbFboL7DpRZR68mbUyHp3EDcGfg1hBjeDcO0aXM-PjTMoacBaizw57SUsvBAUDsTyWTPwS0VU08BgmlkgnY0gmlwhKwS3sWKbXVsdGlhZGRyc4wACgSsEt7FBrOf3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPSR-wdsADyXbwAh7XQt9iyf6ksad_xtM1UNuqH-1k0hIN0Y3CCs56DdWRwgrOghXdha3UyBQ --filternode=/ip4/172.18.222.197/tcp/45982/p2p/16Uiu2HAmSoqaLfroYXTSJedxiZFsVN9R2LVtWGU87rhbNWN5a4u9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.23.3 waku a4f6a524a893dbf0727d4b35e94ce12d811d0b417011e672522b47c9d0219d98
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a4f6a524a893. Setting up logs at ./log/docker/node2_2024-09-18_04-18-00__705c1502-a58c-438a-ba8b-1d648c1171c3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 35806
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35806/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35806/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.23.3/tcp/35807/p2p/16Uiu2HAmS4SQggvv48yor5anroUbva2iQyXqkxSgtWJz2q4iu674","/ip4/172.18.23.3/tcp/35808/ws/p2p/16Uiu2HAmS4SQggvv48yor5anroUbva2iQyXqkxSgtWJz2q4iu674"],"enrUri":"enr:-LO4QOThMmsZ_lcVtrEMp5SaUBeapTme--XEFWnP4OSK185teuS2TlTFln1GdMUrf-fqZnWNiW2ocyL8X6RANfHe1OQBgmlkgnY0gmlwhKwSFwOKbXVsdGlhZGRyc4wACgSsEhcDBovg3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPHKcDNbOyChIq8yBJPv_L0Q16nngbasVUCE0t117wRI4N0Y3CCi9-DdWRwgovhhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35806/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.222.197/tcp/45982/p2p/16Uiu2HAmSoqaLfroYXTSJedxiZFsVN9R2LVtWGU87rhbNWN5a4u9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45981/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35806/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "ac6baaca-5baf-45c0-8e23-326305165e25", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"ac6baaca-5baf-45c0-8e23-326305165e25","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:35806/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:35806/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2bf3218b224d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a4f6a524a893
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.