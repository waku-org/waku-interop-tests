[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2024-11-05_04-10-57__70da95e9-e349-4c07-b692-a983694f49dd
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-05_04-10-57__70da95e9-e349-4c07-b692-a983694f49dd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.78.21
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['50344', '50345', '50346', '50347', '50348']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 50344:50344 -p 50345:50345 -p 50346:50346 -p 50347:50347 -p 50348:50348 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50346 --rest-port=50344 --tcp-port=50345 --discv5-udp-port=50347 --rest-address=0.0.0.0 --nat=extip:172.18.78.21 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4fd0c5c3d5ffcbb7fc3dfdc06c0bfa87e67291ebeaff6dc0afeecb9d02bc8fdf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50348 --metrics-logging=true --lightpush=true --relay=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d92df33d6e48. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.78.21 waku 9b2ae641bf6765bfaddf248e908582670e6e85217aff5b7465f4e5a318b56cbc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9b2ae641bf67. Setting up logs at ./log/docker/receiving_node1_2024-11-05_04-10-57__70da95e9-e349-4c07-b692-a983694f49dd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 50344
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50344/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50344/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.78.21/tcp/50345/p2p/16Uiu2HAmBh2Gs8JfT6nRb3L4ZFyYaR19H31bh5JtKajushKNfLXA","/ip4/172.18.78.21/tcp/50346/ws/p2p/16Uiu2HAmBh2Gs8JfT6nRb3L4ZFyYaR19H31bh5JtKajushKNfLXA"],"enrUri":"enr:-L24QAKOQyPanRIw6jKHs7L1SQ-te3OObgbDZh5Fh1wbiKcVdqdaViKZA1lPVUMgLuRCTl5YFwf12_BgkQX8yovu3d8CgmlkgnY0gmlwhKwSThWKbXVsdGlhZGRyc5YACASsEk4VBsSpAAoErBJOFQbEqt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC8ammW8KASBQpI-ppLweGHfvqBWLRrskTzxrG7PPl3QGDdGNwgsSpg3VkcILEq4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-05_04-10-57__70da95e9-e349-4c07-b692-a983694f49dd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.252.21
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['2335', '2336', '2337', '2338', '2339']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 2335:2335 -p 2336:2336 -p 2337:2337 -p 2338:2338 -p 2339:2339 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2337 --rest-port=2335 --tcp-port=2336 --discv5-udp-port=2338 --rest-address=0.0.0.0 --nat=extip:172.18.252.21 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7beedfb8cac8a5ce20d9aa549cfc44c1c4eb051f87a2e1eebb9d449bf0edfdad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2339 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.252.21 waku 817c43eb58388aadbcdda88172569b466abae9d7619a2923cadafcdb7b564a45
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 817c43eb5838. Setting up logs at ./log/docker/receiving_node2_2024-11-05_04-10-57__70da95e9-e349-4c07-b692-a983694f49dd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 2335
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2335/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2335/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.252.21/tcp/2336/p2p/16Uiu2HAmJKVJQStwyMNVmHyfXQQ8bUw3DorqFV3mWfNFZ1tW3PrA","/ip4/172.18.252.21/tcp/2337/ws/p2p/16Uiu2HAmJKVJQStwyMNVmHyfXQQ8bUw3DorqFV3mWfNFZ1tW3PrA"],"enrUri":"enr:-L24QLpODxH4jbG-w1xh5HcqleVKwQ5xkTimro78u1mzTKMUHkhsCHW0CkCyK_Y1bsrypmaMGkYycbYLopTgZAuHrbsCgmlkgnY0gmlwhKwS_BWKbXVsdGlhZGRyc5YACASsEvwVBgkgAAoErBL8FQYJId0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVCc9UqGByfirju5d09g5b71TxmVRe3OTYjlszahuajuDdGNwggkgg3VkcIIJIoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2335/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.78.21/tcp/50345/p2p/16Uiu2HAmBh2Gs8JfT6nRb3L4ZFyYaR19H31bh5JtKajushKNfLXA"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-05_04-10-57__70da95e9-e349-4c07-b692-a983694f49dd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.108.44
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['45454', '45455', '45456', '45457', '45458']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 45454:45454 -p 45455:45455 -p 45456:45456 -p 45457:45457 -p 45458:45458 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45456 --rest-port=45454 --tcp-port=45455 --discv5-udp-port=45457 --rest-address=0.0.0.0 --nat=extip:172.18.108.44 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e237bebbf6fe0e8c574e258afa90fad782f739b0cc12bbaae9cfcbd65d0cdf16 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45458 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QAKOQyPanRIw6jKHs7L1SQ-te3OObgbDZh5Fh1wbiKcVdqdaViKZA1lPVUMgLuRCTl5YFwf12_BgkQX8yovu3d8CgmlkgnY0gmlwhKwSThWKbXVsdGlhZGRyc5YACASsEk4VBsSpAAoErBJOFQbEqt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC8ammW8KASBQpI-ppLweGHfvqBWLRrskTzxrG7PPl3QGDdGNwgsSpg3VkcILEq4V3YWt1Mgk --lightpushnode=/ip4/172.18.78.21/tcp/50345/p2p/16Uiu2HAmBh2Gs8JfT6nRb3L4ZFyYaR19H31bh5JtKajushKNfLXA --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.108.44 waku 2527ed2eeae48484f2e78a30fd84d686aceb292181f96dc897e898add75820e7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2527ed2eeae4. Setting up logs at ./log/docker/lightpush_node1_2024-11-05_04-10-57__70da95e9-e349-4c07-b692-a983694f49dd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 45454
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45454/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45454/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.108.44/tcp/45455/p2p/16Uiu2HAm43XqBsGbWmHXwhtz1jzrwvo2uBPPtGTqnmkESVvXSMXM","/ip4/172.18.108.44/tcp/45456/ws/p2p/16Uiu2HAm43XqBsGbWmHXwhtz1jzrwvo2uBPPtGTqnmkESVvXSMXM"],"enrUri":"enr:-L24QLdDVuJ6Lczl1Z6MjIDuqFCwN-0gbzaK2bQGoanKp_uPeGlCTwYAVNdrXAaswR16zWEXEuhWAxqETC19ukXA46wCgmlkgnY0gmlwhKwSbCyKbXVsdGlhZGRyc5YACASsEmwsBrGPAAoErBJsLAaxkN0DgnJzhQADAQAAiXNlY3AyNTZrMaECgA0w7xrzbB2Vd6ETL6fes7T8rqjmu4WHDNx6RJV8FhiDdGNwgrGPg3VkcIKxkYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45454/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.78.21/tcp/50345/p2p/16Uiu2HAmBh2Gs8JfT6nRb3L4ZFyYaR19H31bh5JtKajushKNfLXA"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45454/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.252.21/tcp/2336/p2p/16Uiu2HAmJKVJQStwyMNVmHyfXQQ8bUw3DorqFV3mWfNFZ1tW3PrA"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50344/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2335/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45454/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730779863124749056}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:45454/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45454/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730779863128787200}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:45454/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45454/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730779863136824832}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:45454/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45454/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730779863141230592}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:45454/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9b2ae641bf67
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 817c43eb5838
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9b2ae641bf67. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2527ed2eeae4
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 817c43eb5838. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.