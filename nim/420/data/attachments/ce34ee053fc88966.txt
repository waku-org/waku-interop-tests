[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-11-05_04-12-23__8faf3636-0cfa-4589-8f4f-36bce84e0df7
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-05_04-12-23__8faf3636-0cfa-4589-8f4f-36bce84e0df7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.15.146
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['51036', '51037', '51038', '51039', '51040']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 51036:51036 -p 51037:51037 -p 51038:51038 -p 51039:51039 -p 51040:51040 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51038 --rest-port=51036 --tcp-port=51037 --discv5-udp-port=51039 --rest-address=0.0.0.0 --nat=extip:172.18.15.146 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2b2753a85aaae1112fd0efcf9b3ba7bca7df9c0fcd574d86daf2cefebaee19ad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51040 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.15.146 waku 18e868fcd15291b7a9ed6b41d917d36f7543639737f0c94309c5ec7ad28dcc41
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 18e868fcd152. Setting up logs at ./log/docker/receiving_node1_2024-11-05_04-12-23__8faf3636-0cfa-4589-8f4f-36bce84e0df7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 51036
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 848c1f7b68a6. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51036/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51036/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.15.146/tcp/51037/p2p/16Uiu2HAmENB57ZTih6krSyvBz2ZDEkjZ3YsFZFXarSppPNLGfy5z","/ip4/172.18.15.146/tcp/51038/ws/p2p/16Uiu2HAmENB57ZTih6krSyvBz2ZDEkjZ3YsFZFXarSppPNLGfy5z"],"enrUri":"enr:-L24QGNJAPnQuwi2AANSLB7O73Hf-h0nR5ArFMpbS3VfZDzqbHc_sx7XuWW_VQW3wgZh9C6YwQ5Rz8jx4swqLPAKSq8CgmlkgnY0gmlwhKwSD5KKbXVsdGlhZGRyc5YACASsEg-SBsddAAoErBIPkgbHXt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDGWifW3iT_SMQxrZ81DrByT4k6F8dlxYVsvNBfVKp3QGDdGNwgsddg3VkcILHX4V3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-05_04-12-23__8faf3636-0cfa-4589-8f4f-36bce84e0df7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.197.237
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['18915', '18916', '18917', '18918', '18919']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 18915:18915 -p 18916:18916 -p 18917:18917 -p 18918:18918 -p 18919:18919 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18917 --rest-port=18915 --tcp-port=18916 --discv5-udp-port=18918 --rest-address=0.0.0.0 --nat=extip:172.18.197.237 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a1be7a596945bdb4db8603dddd35da27a7c89f21cc9c76e9cd09bbfc88bc1e1b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18919 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.197.237 waku 181ca07ff011f07ae98df6f14481bf969fa8b870805e2d98685718a733e4c832
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 181ca07ff011. Setting up logs at ./log/docker/receiving_node2_2024-11-05_04-12-23__8faf3636-0cfa-4589-8f4f-36bce84e0df7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 18915
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18915/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18915/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.197.237/tcp/18916/p2p/16Uiu2HAmCCZtXAT2WVnr86BHjFzV4ZE629BPoHd8fPAdX8JUDksL","/ip4/172.18.197.237/tcp/18917/ws/p2p/16Uiu2HAmCCZtXAT2WVnr86BHjFzV4ZE629BPoHd8fPAdX8JUDksL"],"enrUri":"enr:-L24QG0vj4-MNtu7GBPcQ1K8STwE0HP6VjTuchMbNPr9Lb0AGmHvRBTmbJIc8NtNsJ9Erz9Wl2GSDU0wssVcov9SvxUCgmlkgnY0gmlwhKwSxe2KbXVsdGlhZGRyc5YACASsEsXtBknkAAoErBLF7QZJ5d0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-Ts9fvggDSG_SyyaTN62m2Q6whc9R_4XSviO7Wf5t2ODdGNwgknkg3VkcIJJ5oV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18915/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.15.146/tcp/51037/p2p/16Uiu2HAmENB57ZTih6krSyvBz2ZDEkjZ3YsFZFXarSppPNLGfy5z"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-05_04-12-23__8faf3636-0cfa-4589-8f4f-36bce84e0df7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.176.102
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['64677', '64678', '64679', '64680', '64681']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 64677:64677 -p 64678:64678 -p 64679:64679 -p 64680:64680 -p 64681:64681 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64679 --rest-port=64677 --tcp-port=64678 --discv5-udp-port=64680 --rest-address=0.0.0.0 --nat=extip:172.18.176.102 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9aa22e53557f0334d44a76f48cba94ca1acaaee070175fe51c75df17e51ced9f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64681 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QGNJAPnQuwi2AANSLB7O73Hf-h0nR5ArFMpbS3VfZDzqbHc_sx7XuWW_VQW3wgZh9C6YwQ5Rz8jx4swqLPAKSq8CgmlkgnY0gmlwhKwSD5KKbXVsdGlhZGRyc5YACASsEg-SBsddAAoErBIPkgbHXt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDGWifW3iT_SMQxrZ81DrByT4k6F8dlxYVsvNBfVKp3QGDdGNwgsddg3VkcILHX4V3YWt1Mg0 --lightpushnode=/ip4/172.18.15.146/tcp/51037/p2p/16Uiu2HAmENB57ZTih6krSyvBz2ZDEkjZ3YsFZFXarSppPNLGfy5z --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.176.102 waku 13d3e18b09da962f613d228f13be190c3aaddece92371526301a38fad5d718b1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 13d3e18b09da. Setting up logs at ./log/docker/lightpush_node1_2024-11-05_04-12-23__8faf3636-0cfa-4589-8f4f-36bce84e0df7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 64677
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64677/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64677/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.176.102/tcp/64678/p2p/16Uiu2HAm1zE72ReMWBHcqTuj1Vd1gLe1Rcs9LSzWR16aCdyvYVsZ","/ip4/172.18.176.102/tcp/64679/ws/p2p/16Uiu2HAm1zE72ReMWBHcqTuj1Vd1gLe1Rcs9LSzWR16aCdyvYVsZ"],"enrUri":"enr:-L24QMriExmS4wyTzjHwmXq9vGncuSxxgBCZIOkxjWAdFsZ4fPGKeyQuUtLSnlSMAVT3Q1pv3Vx9RAiTM_4U-e20C9MCgmlkgnY0gmlwhKwSsGaKbXVsdGlhZGRyc5YACASsErBmBvymAAoErBKwZgb8p90DgnJzhQADAQAAiXNlY3AyNTZrMaECYX0H7Dp1ATerqEog7EcMYDEQaJVDUxNAzSn0fjhAHQyDdGNwgvymg3VkcIL8qIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64677/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.15.146/tcp/51037/p2p/16Uiu2HAmENB57ZTih6krSyvBz2ZDEkjZ3YsFZFXarSppPNLGfy5z"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64677/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.197.237/tcp/18916/p2p/16Uiu2HAmCCZtXAT2WVnr86BHjFzV4ZE629BPoHd8fPAdX8JUDksL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51036/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18915/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64677/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730779949251026944}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51036/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1730779949251026944,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18915/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1730779949251026944,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 18e868fcd152
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 181ca07ff011
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 18e868fcd152. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 13d3e18b09da
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 181ca07ff011. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.