[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_light_push_with_invalid_content_topics with id: 2024-04-15_04-29-48__e589f04e-3f43-4cc9-a39b-fc35beafb6d6
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-04-15_04-29-48__e589f04e-3f43-4cc9-a39b-fc35beafb6d6__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.217.49
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['24600', '24601', '24602', '24603', '24604']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:297 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 24600:24600 -p 24601:24601 -p 24602:24602 -p 24603:24603 -p 24604:24604 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24602 --rest-port=24600 --tcp-port=24601 --discv5-udp-port=24603 --rest-address=0.0.0.0 --nat=extip:172.18.217.49 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24604 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.217.49 waku b0cbc80f56ce473c42ba23356227e7611ae5280ea260a462af6070f585271acc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID b0cbc80f56ce. Setting up logs at ./log/docker/receiving_node1_2024-04-15_04-29-48__e589f04e-3f43-4cc9-a39b-fc35beafb6d6__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 24600
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24600/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.217.49/tcp/24601/p2p/16Uiu2HAmGux1i4Ni6Xdp4j8BYKWEc8K7HuJuFfTWzVGBEo4qxDEy","/ip4/172.18.217.49/tcp/24602/ws/p2p/16Uiu2HAmGux1i4Ni6Xdp4j8BYKWEc8K7HuJuFfTWzVGBEo4qxDEy"],"enrUri":"enr:-LO4QCVglr8uEnQ5RlHyypv70AKFWjetkD8xpciu-kQIkh2hHu1j15-nBf2qZXKw0MHNz35o69V8x_XHSsdp0CDuQzcBgmlkgnY0gmlwhKwS2TGKbXVsdGlhZGRyc4wACgSsEtkxBmAa3QOCcnOFAAABAACJc2VjcDI1NmsxoQM_Q9ETXgA7oE9583vpMS2It38pJGDy5jToK1fK2kLTUoN0Y3CCYBmDdWRwgmAbhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-04-15_04-29-48__e589f04e-3f43-4cc9-a39b-fc35beafb6d6__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.83.234
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['39607', '39608', '39609', '39610', '39611']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:297 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 39607:39607 -p 39608:39608 -p 39609:39609 -p 39610:39610 -p 39611:39611 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39609 --rest-port=39607 --tcp-port=39608 --discv5-udp-port=39610 --rest-address=0.0.0.0 --nat=extip:172.18.83.234 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39611 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QCVglr8uEnQ5RlHyypv70AKFWjetkD8xpciu-kQIkh2hHu1j15-nBf2qZXKw0MHNz35o69V8x_XHSsdp0CDuQzcBgmlkgnY0gmlwhKwS2TGKbXVsdGlhZGRyc4wACgSsEtkxBmAa3QOCcnOFAAABAACJc2VjcDI1NmsxoQM_Q9ETXgA7oE9583vpMS2It38pJGDy5jToK1fK2kLTUoN0Y3CCYBmDdWRwgmAbhXdha3UyCQ --lightpushnode=/ip4/172.18.217.49/tcp/24601/p2p/16Uiu2HAmGux1i4Ni6Xdp4j8BYKWEc8K7HuJuFfTWzVGBEo4qxDEy --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.83.234 waku 00338ebb20e7f1293f69813aec941009a67baea8f2c27141b98caae2676aa94a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 00338ebb20e7. Setting up logs at ./log/docker/lightpush_node1_2024-04-15_04-29-48__e589f04e-3f43-4cc9-a39b-fc35beafb6d6__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 39607
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39607/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.83.234/tcp/39608/p2p/16Uiu2HAkvN4j1wFUoWuPMrV6M3eQpZjDEb4V93cozzdRLncUSPQd","/ip4/172.18.83.234/tcp/39609/ws/p2p/16Uiu2HAkvN4j1wFUoWuPMrV6M3eQpZjDEb4V93cozzdRLncUSPQd"],"enrUri":"enr:-LO4QDMUznDfXah_vLQNonp_YawbzpoNmW-6NczmvFXK7-WcVB5KGGDcLXQNnEkgSaD3dKkWzD2jkeywGB9-WIGeLCwBgmlkgnY0gmlwhKwSU-qKbXVsdGlhZGRyc4wACgSsElPqBpq53QOCcnOFAAABAACJc2VjcDI1NmsxoQIN7xTxMNP2jeL1rIq1OHfDgl_vDuq6ypQFX7QHRJN2qoN0Y3CCmriDdWRwgpq6hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39607/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.217.49/tcp/24601/p2p/16Uiu2HAmGux1i4Ni6Xdp4j8BYKWEc8K7HuJuFfTWzVGBEo4qxDEy"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24600/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:99 Running test with contetn topic Empty string
[35mDEBUG   [0m src.steps.light_push:light_push.py:127 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39607/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/0/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "", "timestamp": 1713155391728742912}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:39607/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:99 Running test with contetn topic A dictionary
[35mDEBUG   [0m src.steps.light_push:light_push.py:127 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39607/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/0/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": {"key": "YWFh"}, "timestamp": 1713155391732740096}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:39607/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:99 Running test with contetn topic An integer
[35mDEBUG   [0m src.steps.light_push:light_push.py:127 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39607/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/0/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": 1234567890, "timestamp": 1713155391735884288}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:39607/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:99 Running test with contetn topic A list
[35mDEBUG   [0m src.steps.light_push:light_push.py:127 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39607/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/0/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": ["YWFh"], "timestamp": 1713155391739009280}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:39607/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:99 Running test with contetn topic A bool
[35mDEBUG   [0m src.steps.light_push:light_push.py:127 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39607/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/0/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": true, "timestamp": 1713155391742016256}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:39607/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id b0cbc80f56ce
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id 00338ebb20e7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.