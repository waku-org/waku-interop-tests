[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_lightpush_nodes_and_1_receiving_node with id: 2024-08-05_04-15-07__51148ef4-86e2-45ba-9191-c98f01c58a02
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-05_04-15-07__51148ef4-86e2-45ba-9191-c98f01c58a02__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.187.193
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['15191', '15192', '15193', '15194', '15195']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 15191:15191 -p 15192:15192 -p 15193:15193 -p 15194:15194 -p 15195:15195 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15193 --rest-port=15191 --tcp-port=15192 --discv5-udp-port=15194 --rest-address=0.0.0.0 --nat=extip:172.18.187.193 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15195 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.187.193 waku e93acae146a9d857d9238d971555be811263129d6c43e7af0c55a5c296e44c5d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e93acae146a9. Setting up logs at ./log/docker/receiving_node1_2024-08-05_04-15-07__51148ef4-86e2-45ba-9191-c98f01c58a02__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 15191
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15191/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15191/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.187.193/tcp/15192/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.187.193/tcp/15193/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QMC0xYLd9SnT48gAiCL6dTkx6TgoW7NqOZANXGZY1D2VINui-KgJzNsFdv6vwF_OmoCPgEAMhefeWXvgg0S_G7IBgmlkgnY0gmlwhKwSu8GKbXVsdGlhZGRyc4wACgSsErvBBjtZ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCO1iDdWRwgjtahXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-05_04-15-07__51148ef4-86e2-45ba-9191-c98f01c58a02__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.149.94
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['30057', '30058', '30059', '30060', '30061']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 30057:30057 -p 30058:30058 -p 30059:30059 -p 30060:30060 -p 30061:30061 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30059 --rest-port=30057 --tcp-port=30058 --discv5-udp-port=30060 --rest-address=0.0.0.0 --nat=extip:172.18.149.94 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30061 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QMC0xYLd9SnT48gAiCL6dTkx6TgoW7NqOZANXGZY1D2VINui-KgJzNsFdv6vwF_OmoCPgEAMhefeWXvgg0S_G7IBgmlkgnY0gmlwhKwSu8GKbXVsdGlhZGRyc4wACgSsErvBBjtZ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCO1iDdWRwgjtahXdha3UyCQ --lightpushnode=/ip4/172.18.187.193/tcp/15192/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.149.94 waku 6d1b8a4fa06b565e8ebc635e8f5662d75acf51db661637fbf86e32610beebe87
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 6d1b8a4fa06b. Setting up logs at ./log/docker/lightpush_node1_2024-08-05_04-15-07__51148ef4-86e2-45ba-9191-c98f01c58a02__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 30057
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30057/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30057/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.149.94/tcp/30058/p2p/16Uiu2HAm9NgEAGYZuVFeD6oeaXNAM9Rpy3JBdMc2MYj3p8LGYBq5","/ip4/172.18.149.94/tcp/30059/ws/p2p/16Uiu2HAm9NgEAGYZuVFeD6oeaXNAM9Rpy3JBdMc2MYj3p8LGYBq5"],"enrUri":"enr:-LO4QJMtsbZJSYIm_rSlD8ZBBGiAd9D5lw5z7PDbSy40Xhk6FUooFQ4HmCCbRGB4LXQIk-satxsRDxlHdmwacggweKMBgmlkgnY0gmlwhKwSlV6KbXVsdGlhZGRyc4wACgSsEpVeBnVr3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLPPyeVm8FudTKm5LQtwhFdRyvqFpjpF7s7w98rDcKDNIN0Y3CCdWqDdWRwgnVshXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30057/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.187.193/tcp/15192/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/lightpush_node2_2024-08-05_04-15-07__51148ef4-86e2-45ba-9191-c98f01c58a02__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.184.186
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['29819', '29820', '29821', '29822', '29823']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 29819:29819 -p 29820:29820 -p 29821:29821 -p 29822:29822 -p 29823:29823 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29821 --rest-port=29819 --tcp-port=29820 --discv5-udp-port=29822 --rest-address=0.0.0.0 --nat=extip:172.18.184.186 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29823 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QMC0xYLd9SnT48gAiCL6dTkx6TgoW7NqOZANXGZY1D2VINui-KgJzNsFdv6vwF_OmoCPgEAMhefeWXvgg0S_G7IBgmlkgnY0gmlwhKwSu8GKbXVsdGlhZGRyc4wACgSsErvBBjtZ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCO1iDdWRwgjtahXdha3UyCQ --lightpushnode=/ip4/172.18.187.193/tcp/15192/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.184.186 waku d2d15585acd6741f63512b694c1fc7368688aafb1bcc7ed283e274f1009fbe63
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID d2d15585acd6. Setting up logs at ./log/docker/lightpush_node2_2024-08-05_04-15-07__51148ef4-86e2-45ba-9191-c98f01c58a02__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 29819
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29819/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29819/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.184.186/tcp/29820/p2p/16Uiu2HAmA5yqzSZUScVmB6tV87Bq9kNu19ckn6vpcCW4FCttstfj","/ip4/172.18.184.186/tcp/29821/ws/p2p/16Uiu2HAmA5yqzSZUScVmB6tV87Bq9kNu19ckn6vpcCW4FCttstfj"],"enrUri":"enr:-LO4QGDEaQGEj11j-NURsQGlmwKMxEb6rpHRyMwL3akfJNzrF56R2xfz2iUl28adfxCv8EfbaBhqGtGJqOG62f3QwloBgmlkgnY0gmlwhKwSuLqKbXVsdGlhZGRyc4wACgSsEri6BnR93QOCcnOFAAMBAACJc2VjcDI1NmsxoQLZ0-Nl2Tl6X5XkoBjk_EQMwJ5-YVTMaKLSHJjsDLmskoN0Y3CCdHyDdWRwgnR-hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29819/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.187.193/tcp/15192/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15191/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30057/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722831312851430656}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:30057/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x8f7bcbb9b013f386f048eae09e26c72d1c8a7efdc516550f8452ee1d61671fe6'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id e93acae146a9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 6d1b8a4fa06b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id d2d15585acd6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node2_2024-08-05_04-15-07__51148ef4-86e2-45ba-9191-c98f01c58a02__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-08-05_04-15-07__51148ef4-86e2-45ba-9191-c98f01c58a02__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-08-05_04-15-07__51148ef4-86e2-45ba-9191-c98f01c58a02__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_lightpush_nodes_and_1_receiving_node with id: 2024-08-05_04-15-21__e1b3c116-8b70-4b40-8768-051468349516
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-05_04-15-21__e1b3c116-8b70-4b40-8768-051468349516__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.173.6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['35868', '35869', '35870', '35871', '35872']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 35868:35868 -p 35869:35869 -p 35870:35870 -p 35871:35871 -p 35872:35872 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35870 --rest-port=35868 --tcp-port=35869 --discv5-udp-port=35871 --rest-address=0.0.0.0 --nat=extip:172.18.173.6 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35872 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.173.6 waku 2411400fa42f68dd94c5864decc6911796f5bdf73923a7a580e0856eb7aa359f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 2411400fa42f. Setting up logs at ./log/docker/receiving_node1_2024-08-05_04-15-21__e1b3c116-8b70-4b40-8768-051468349516__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 35868
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35868/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35868/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.173.6/tcp/35869/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.173.6/tcp/35870/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QFlLFWHoZwk0JyS-5oTJaffjI2OITkWqh_MpOGB9c0rZcJ6Ad5R8yDxvCEiKJubad1PrdpXgKPgVr0p9f85T-mMBgmlkgnY0gmlwhKwSrQaKbXVsdGlhZGRyc4wACgSsEq0GBowe3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCjB2DdWRwgowfhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-05_04-15-21__e1b3c116-8b70-4b40-8768-051468349516__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.144.234
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['20290', '20291', '20292', '20293', '20294']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 20290:20290 -p 20291:20291 -p 20292:20292 -p 20293:20293 -p 20294:20294 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20292 --rest-port=20290 --tcp-port=20291 --discv5-udp-port=20293 --rest-address=0.0.0.0 --nat=extip:172.18.144.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20294 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QFlLFWHoZwk0JyS-5oTJaffjI2OITkWqh_MpOGB9c0rZcJ6Ad5R8yDxvCEiKJubad1PrdpXgKPgVr0p9f85T-mMBgmlkgnY0gmlwhKwSrQaKbXVsdGlhZGRyc4wACgSsEq0GBowe3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCjB2DdWRwgowfhXdha3UyCQ --lightpushnode=/ip4/172.18.173.6/tcp/35869/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.144.234 waku 82f89d4cd3c3bf02ae0fca55d4d19553a0d17832b5dd82f21d6d3733195b0702
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 82f89d4cd3c3. Setting up logs at ./log/docker/lightpush_node1_2024-08-05_04-15-21__e1b3c116-8b70-4b40-8768-051468349516__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 20290
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20290/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20290/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.144.234/tcp/20291/p2p/16Uiu2HAm77QffRYYkjiGFbFY2T5qSANCi8X4vTJgRhe2xe4MTfC7","/ip4/172.18.144.234/tcp/20292/ws/p2p/16Uiu2HAm77QffRYYkjiGFbFY2T5qSANCi8X4vTJgRhe2xe4MTfC7"],"enrUri":"enr:-LO4QEJZkkTMifRFbiOip8V6FLA-KXIzFEX_VY8wYrhJjozcAoIjHHdHlj2pSbm8TCelUvShBiNWfEcHeY8LKaW08hwBgmlkgnY0gmlwhKwSkOqKbXVsdGlhZGRyc4wACgSsEpDqBk9E3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKtnnl8PDqS6tNOTVW8fIC30D9pB7qVi3acJGlxp5lfzIN0Y3CCT0ODdWRwgk9FhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20290/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.173.6/tcp/35869/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/lightpush_node2_2024-08-05_04-15-21__e1b3c116-8b70-4b40-8768-051468349516__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.173.207
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['5614', '5615', '5616', '5617', '5618']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 5614:5614 -p 5615:5615 -p 5616:5616 -p 5617:5617 -p 5618:5618 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5616 --rest-port=5614 --tcp-port=5615 --discv5-udp-port=5617 --rest-address=0.0.0.0 --nat=extip:172.18.173.207 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5618 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QFlLFWHoZwk0JyS-5oTJaffjI2OITkWqh_MpOGB9c0rZcJ6Ad5R8yDxvCEiKJubad1PrdpXgKPgVr0p9f85T-mMBgmlkgnY0gmlwhKwSrQaKbXVsdGlhZGRyc4wACgSsEq0GBowe3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCjB2DdWRwgowfhXdha3UyCQ --lightpushnode=/ip4/172.18.173.6/tcp/35869/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.173.207 waku c79546b65a918fe88a390b78749aabadd3b024d2ba08cae7ad71e300ca4dd8ee
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID c79546b65a91. Setting up logs at ./log/docker/lightpush_node2_2024-08-05_04-15-21__e1b3c116-8b70-4b40-8768-051468349516__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 5614
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5614/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5614/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.173.207/tcp/5615/p2p/16Uiu2HAm4TdmEqdKh4aYBskvLqcMJbkRB7tVTYo9eccK84SzrSeN","/ip4/172.18.173.207/tcp/5616/ws/p2p/16Uiu2HAm4TdmEqdKh4aYBskvLqcMJbkRB7tVTYo9eccK84SzrSeN"],"enrUri":"enr:-LO4QB0-1GsGXr5oDLpJAxV8g-TGn3O0Ne6Aor_oKz0Q2rhITQJRfwfJU-cgAdmp5EAX11iivm9bWByE8cqBqS0gKusBgmlkgnY0gmlwhKwSrc-KbXVsdGlhZGRyc4wACgSsEq3PBhXw3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKGOdZ6h8P4jVZOaSwqh4-EfQW2XGO2J1MiluIP3aVIE4N0Y3CCFe-DdWRwghXxhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5614/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.173.6/tcp/35869/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35868/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20290/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722831326595385344}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:20290/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0xab27afbdad47ee1acf9b92698aec538811f467ba3dce26ba9f442c0a144a0c6e'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 2411400fa42f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 82f89d4cd3c3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id c79546b65a91
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-08-05_04-15-21__e1b3c116-8b70-4b40-8768-051468349516__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node2_2024-08-05_04-15-21__e1b3c116-8b70-4b40-8768-051468349516__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-08-05_04-15-21__e1b3c116-8b70-4b40-8768-051468349516__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_lightpush_nodes_and_1_receiving_node with id: 2024-08-05_04-15-35__600af170-5481-4c43-9103-e798e3b4513c
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-05_04-15-35__600af170-5481-4c43-9103-e798e3b4513c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.117.122
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['25921', '25922', '25923', '25924', '25925']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 25921:25921 -p 25922:25922 -p 25923:25923 -p 25924:25924 -p 25925:25925 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25923 --rest-port=25921 --tcp-port=25922 --discv5-udp-port=25924 --rest-address=0.0.0.0 --nat=extip:172.18.117.122 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25925 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.117.122 waku 60ea3d2b28cdf25cab93f998037c61d2d36621b6ae069c70e79703d6c34b20fe
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 60ea3d2b28cd. Setting up logs at ./log/docker/receiving_node1_2024-08-05_04-15-35__600af170-5481-4c43-9103-e798e3b4513c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 25921
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25921/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25921/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.117.122/tcp/25922/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.117.122/tcp/25923/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QK0YbSHgpn0xUPokIaYnFGbSnJkaOTLXEsOcs9Jc2PPqNkzc78k4avAWwPACYUcIVbzh_3vdqovVVw84UUH-Wh8BgmlkgnY0gmlwhKwSdXqKbXVsdGlhZGRyc4wACgSsEnV6BmVD3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCZUKDdWRwgmVEhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-05_04-15-35__600af170-5481-4c43-9103-e798e3b4513c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.42.11
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['2413', '2414', '2415', '2416', '2417']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 2413:2413 -p 2414:2414 -p 2415:2415 -p 2416:2416 -p 2417:2417 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2415 --rest-port=2413 --tcp-port=2414 --discv5-udp-port=2416 --rest-address=0.0.0.0 --nat=extip:172.18.42.11 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2417 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QK0YbSHgpn0xUPokIaYnFGbSnJkaOTLXEsOcs9Jc2PPqNkzc78k4avAWwPACYUcIVbzh_3vdqovVVw84UUH-Wh8BgmlkgnY0gmlwhKwSdXqKbXVsdGlhZGRyc4wACgSsEnV6BmVD3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCZUKDdWRwgmVEhXdha3UyCQ --lightpushnode=/ip4/172.18.117.122/tcp/25922/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.42.11 waku fe30f7c4864d72fc1fb0f56b6292172c6faba974884a2159f14b3a65222e1046
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID fe30f7c4864d. Setting up logs at ./log/docker/lightpush_node1_2024-08-05_04-15-35__600af170-5481-4c43-9103-e798e3b4513c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 2413
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2413/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2413/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.42.11/tcp/2414/p2p/16Uiu2HAkwSsmBcCAT2JN1NDXEJNv3RbC8VzqJPmpbTF3mpgHpFq5","/ip4/172.18.42.11/tcp/2415/ws/p2p/16Uiu2HAkwSsmBcCAT2JN1NDXEJNv3RbC8VzqJPmpbTF3mpgHpFq5"],"enrUri":"enr:-LO4QI30G8zdklzscDHUH2yoC_71-pmYJe2B1WtssoyEfq9dMOySLzFb0C3cpyWFb_s66Jv8LaIpoVTlgeUZLqWid8sBgmlkgnY0gmlwhKwSKguKbXVsdGlhZGRyc4wACgSsEioLBglv3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIeBkb7rutliRvXKh0MVYGcmSnWOukRtjEA5aQhlSpWVIN0Y3CCCW6DdWRwgglwhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2413/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.117.122/tcp/25922/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/lightpush_node2_2024-08-05_04-15-35__600af170-5481-4c43-9103-e798e3b4513c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.62.119
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['3987', '3988', '3989', '3990', '3991']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 3987:3987 -p 3988:3988 -p 3989:3989 -p 3990:3990 -p 3991:3991 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3989 --rest-port=3987 --tcp-port=3988 --discv5-udp-port=3990 --rest-address=0.0.0.0 --nat=extip:172.18.62.119 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3991 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QK0YbSHgpn0xUPokIaYnFGbSnJkaOTLXEsOcs9Jc2PPqNkzc78k4avAWwPACYUcIVbzh_3vdqovVVw84UUH-Wh8BgmlkgnY0gmlwhKwSdXqKbXVsdGlhZGRyc4wACgSsEnV6BmVD3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCZUKDdWRwgmVEhXdha3UyCQ --lightpushnode=/ip4/172.18.117.122/tcp/25922/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.62.119 waku 6a25f96eceb9d5800acdb19c9332e00c899646235ea77cb3bb3d49986175e6dc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 6a25f96eceb9. Setting up logs at ./log/docker/lightpush_node2_2024-08-05_04-15-35__600af170-5481-4c43-9103-e798e3b4513c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 3987
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3987/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3987/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.62.119/tcp/3988/p2p/16Uiu2HAmLyQUED9pBuEDe2jnY11X8Cyf5ip71pjRafjsTtBNU4u3","/ip4/172.18.62.119/tcp/3989/ws/p2p/16Uiu2HAmLyQUED9pBuEDe2jnY11X8Cyf5ip71pjRafjsTtBNU4u3"],"enrUri":"enr:-LO4QNFMTEJ5PMIePlBPxjprdddd_92xGgZY4IzyymCQNqoqKrudH8xstBRbTnwRwYqhcPrB3xraMPcvN3nHPrANALgBgmlkgnY0gmlwhKwSPneKbXVsdGlhZGRyc4wACgSsEj53Bg-V3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN7lTjdfdUMJfyQPpS9w7sxzSch45DsLPNA6xl2NZdFvoN0Y3CCD5SDdWRwgg-WhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3987/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.117.122/tcp/25922/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25921/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2413/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722831341075937536}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:2413/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0xabbb27d51e051c3276e71ebf31dcd243a3c4e1dd6b72e7710239c2cd5db630b6'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 60ea3d2b28cd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id fe30f7c4864d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 6a25f96eceb9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-08-05_04-15-35__600af170-5481-4c43-9103-e798e3b4513c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node2_2024-08-05_04-15-35__600af170-5481-4c43-9103-e798e3b4513c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-08-05_04-15-35__600af170-5481-4c43-9103-e798e3b4513c__wakuorg_nwaku:latest.log