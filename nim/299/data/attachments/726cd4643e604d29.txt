[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_and_retrieve_100_messages with id: 2024-08-05_04-18-06__1fd1de55-73a4-42c2-b37b-9e88a9cc6094
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-05_04-18-06__1fd1de55-73a4-42c2-b37b-9e88a9cc6094__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.59.249
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['30139', '30140', '30141', '30142', '30143']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 30139:30139 -p 30140:30140 -p 30141:30141 -p 30142:30142 -p 30143:30143 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30141 --rest-port=30139 --tcp-port=30140 --discv5-udp-port=30142 --rest-address=0.0.0.0 --nat=extip:172.18.59.249 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30143 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.59.249 waku 25302bc3496ab58f25fcc441e60767aeadc49e5ba7628ecb40c48deaaa63401c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 25302bc3496a. Setting up logs at ./log/docker/receiving_node1_2024-08-05_04-18-06__1fd1de55-73a4-42c2-b37b-9e88a9cc6094__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 30139
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30139/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30139/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.59.249/tcp/30140/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.59.249/tcp/30141/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QCJhmWv1M5HzBbONPBKM5C4N65ce7pzJWlfCGfhpwlsXbFfMgvns5VIJTwX6Evx6RLGju7zTJlPxxqjmmwU9tFsBgmlkgnY0gmlwhKwSO_mKbXVsdGlhZGRyc4wACgSsEjv5BnW93QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCdbyDdWRwgnW-hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-05_04-18-06__1fd1de55-73a4-42c2-b37b-9e88a9cc6094__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.252.173
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['20281', '20282', '20283', '20284', '20285']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 20281:20281 -p 20282:20282 -p 20283:20283 -p 20284:20284 -p 20285:20285 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20283 --rest-port=20281 --tcp-port=20282 --discv5-udp-port=20284 --rest-address=0.0.0.0 --nat=extip:172.18.252.173 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20285 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QCJhmWv1M5HzBbONPBKM5C4N65ce7pzJWlfCGfhpwlsXbFfMgvns5VIJTwX6Evx6RLGju7zTJlPxxqjmmwU9tFsBgmlkgnY0gmlwhKwSO_mKbXVsdGlhZGRyc4wACgSsEjv5BnW93QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCdbyDdWRwgnW-hXdha3UyCQ --lightpushnode=/ip4/172.18.59.249/tcp/30140/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.252.173 waku 0ab00fe10dcd854376e2fff266b101e1268d41a2ccb38510c0ad053a96681b66
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 0ab00fe10dcd. Setting up logs at ./log/docker/lightpush_node1_2024-08-05_04-18-06__1fd1de55-73a4-42c2-b37b-9e88a9cc6094__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 20281
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20281/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20281/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.252.173/tcp/20282/p2p/16Uiu2HAm85pHYAB7c3sZhtNiDMyHxWL3gFc883kncRUnH7sRYc48","/ip4/172.18.252.173/tcp/20283/ws/p2p/16Uiu2HAm85pHYAB7c3sZhtNiDMyHxWL3gFc883kncRUnH7sRYc48"],"enrUri":"enr:-LO4QLY6Pyf8Y25EiTS4fxXxtLnfP5EDmB11BajNOowlgooSFdz-PfBecWYXLLK2SAWbBSFPqm1Yuc7oYQYCOsCQcUcBgmlkgnY0gmlwhKwS_K2KbXVsdGlhZGRyc4wACgSsEvytBk873QOCcnOFAAMBAACJc2VjcDI1NmsxoQK8EbSWOEC5DlIO9dnCq5cq1_mrs6yLRjbe_KQs9xoKuYN0Y3CCTzqDdWRwgk88hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20281/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.59.249/tcp/30140/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30139/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20281/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722831490069924864}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:20281/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0xe1c096a95811949d0ea02997eb85c6c460a5c5f17d9aedbc5676ccfe9b520a5b'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 25302bc3496a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 0ab00fe10dcd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-08-05_04-18-06__1fd1de55-73a4-42c2-b37b-9e88a9cc6094__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-08-05_04-18-06__1fd1de55-73a4-42c2-b37b-9e88a9cc6094__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_and_retrieve_100_messages with id: 2024-08-05_04-18-15__0b438f5a-ce59-4034-ba19-85004ed4bbbf
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-05_04-18-15__0b438f5a-ce59-4034-ba19-85004ed4bbbf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.106.178
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['49175', '49176', '49177', '49178', '49179']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 49175:49175 -p 49176:49176 -p 49177:49177 -p 49178:49178 -p 49179:49179 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49177 --rest-port=49175 --tcp-port=49176 --discv5-udp-port=49178 --rest-address=0.0.0.0 --nat=extip:172.18.106.178 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49179 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.106.178 waku 50422b810ff9012f0f848e59f33d3a732f2aa5d01abdcf0287f933e28a8ce047
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 50422b810ff9. Setting up logs at ./log/docker/receiving_node1_2024-08-05_04-18-15__0b438f5a-ce59-4034-ba19-85004ed4bbbf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 49175
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49175/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49175/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.106.178/tcp/49176/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.106.178/tcp/49177/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QC7YyZkcktBq1JnKp5K1K1dY_cO7Vc_bDq1_UQG07oS-TcKDoKaQCkY4grLFttLuXyv4Of-XmUh4vEMDPnOaqlkBgmlkgnY0gmlwhKwSarKKbXVsdGlhZGRyc4wACgSsEmqyBsAZ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCwBiDdWRwgsAahXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-05_04-18-15__0b438f5a-ce59-4034-ba19-85004ed4bbbf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.171.79
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['8064', '8065', '8066', '8067', '8068']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 8064:8064 -p 8065:8065 -p 8066:8066 -p 8067:8067 -p 8068:8068 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8066 --rest-port=8064 --tcp-port=8065 --discv5-udp-port=8067 --rest-address=0.0.0.0 --nat=extip:172.18.171.79 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8068 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QC7YyZkcktBq1JnKp5K1K1dY_cO7Vc_bDq1_UQG07oS-TcKDoKaQCkY4grLFttLuXyv4Of-XmUh4vEMDPnOaqlkBgmlkgnY0gmlwhKwSarKKbXVsdGlhZGRyc4wACgSsEmqyBsAZ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCwBiDdWRwgsAahXdha3UyCQ --lightpushnode=/ip4/172.18.106.178/tcp/49176/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.171.79 waku 59f3c18266d52ef6520a8a4bd7bad6ac703265b0975442c9e4d3fa6550e403eb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 59f3c18266d5. Setting up logs at ./log/docker/lightpush_node1_2024-08-05_04-18-15__0b438f5a-ce59-4034-ba19-85004ed4bbbf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 8064
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8064/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8064/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.171.79/tcp/8065/p2p/16Uiu2HAkvhayg7tkf1iN2BX4dSMjvGngafgfDT6fxHkhcFiqgGRC","/ip4/172.18.171.79/tcp/8066/ws/p2p/16Uiu2HAkvhayg7tkf1iN2BX4dSMjvGngafgfDT6fxHkhcFiqgGRC"],"enrUri":"enr:-LO4QA7hk4nfMrfbOPH4xjl2tUf46VpZXYtHG82qCY6MWu_ZNk6JZahS5qBpcftuTpJNsmEa6JK0oNuqajWxae4kE5UBgmlkgnY0gmlwhKwSq0-KbXVsdGlhZGRyc4wACgSsEqtPBh-C3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIS71L0144DYe7G4rE0NafLS2PteyQObJxrex_-V5zVT4N0Y3CCH4GDdWRwgh-DhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8064/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.106.178/tcp/49176/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49175/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8064/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722831498650977536}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:8064/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x3241acad7aac9c3765343e12f1bba10e20966104a9b9e7a5a9ec204e9ca0f7db'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 50422b810ff9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 59f3c18266d5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-08-05_04-18-15__0b438f5a-ce59-4034-ba19-85004ed4bbbf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-08-05_04-18-15__0b438f5a-ce59-4034-ba19-85004ed4bbbf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_and_retrieve_100_messages with id: 2024-08-05_04-18-22__d51a7f01-4174-442b-951a-6bcdaf07fe18
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-05_04-18-22__d51a7f01-4174-442b-951a-6bcdaf07fe18__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.114.112
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['56063', '56064', '56065', '56066', '56067']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 56063:56063 -p 56064:56064 -p 56065:56065 -p 56066:56066 -p 56067:56067 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56065 --rest-port=56063 --tcp-port=56064 --discv5-udp-port=56066 --rest-address=0.0.0.0 --nat=extip:172.18.114.112 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56067 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.114.112 waku 9cac953fbdc2f41d1169abbbf1e9c633678320e7e5a51db17bcbb70e73e3a85b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 9cac953fbdc2. Setting up logs at ./log/docker/receiving_node1_2024-08-05_04-18-22__d51a7f01-4174-442b-951a-6bcdaf07fe18__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 56063
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56063/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56063/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.114.112/tcp/56064/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.114.112/tcp/56065/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QG0MFSe7X18ie9xsJ6tusmH6bCXv519q70NXblDqEtUiBfHCZnrWJtw68WFYMRi-ermXOjQQIwgioyNyijE5xEsBgmlkgnY0gmlwhKwScnCKbXVsdGlhZGRyc4wACgSsEnJwBtsB3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CC2wCDdWRwgtsChXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-05_04-18-22__d51a7f01-4174-442b-951a-6bcdaf07fe18__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.63.48
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['34391', '34392', '34393', '34394', '34395']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 34391:34391 -p 34392:34392 -p 34393:34393 -p 34394:34394 -p 34395:34395 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34393 --rest-port=34391 --tcp-port=34392 --discv5-udp-port=34394 --rest-address=0.0.0.0 --nat=extip:172.18.63.48 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34395 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QG0MFSe7X18ie9xsJ6tusmH6bCXv519q70NXblDqEtUiBfHCZnrWJtw68WFYMRi-ermXOjQQIwgioyNyijE5xEsBgmlkgnY0gmlwhKwScnCKbXVsdGlhZGRyc4wACgSsEnJwBtsB3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CC2wCDdWRwgtsChXdha3UyCQ --lightpushnode=/ip4/172.18.114.112/tcp/56064/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.63.48 waku 12012858164e85b66e86348f99e8c1c1307937e8a5bebfd050ca3490c8aff817
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 12012858164e. Setting up logs at ./log/docker/lightpush_node1_2024-08-05_04-18-22__d51a7f01-4174-442b-951a-6bcdaf07fe18__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 34391
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34391/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34391/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.63.48/tcp/34392/p2p/16Uiu2HAmJHXJAPwZi6JeimCCXGXcC8VMg7vAG86YCaBC6Ch1MAbs","/ip4/172.18.63.48/tcp/34393/ws/p2p/16Uiu2HAmJHXJAPwZi6JeimCCXGXcC8VMg7vAG86YCaBC6Ch1MAbs"],"enrUri":"enr:-LO4QBvIIndox0yKld_HaDov9ey8MCnZOdw7V1kdoT2D8BYTf3u4uMJjAs1scCf8ZzfC_GBt-ReU82KEQGF6JDDiS-UBgmlkgnY0gmlwhKwSPzCKbXVsdGlhZGRyc4wACgSsEj8wBoZZ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNTplWo5ORJ7-qyxY-YE0yVspan-VaNfNmeL_OMI_M-ioN0Y3CChliDdWRwgoZahXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34391/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.114.112/tcp/56064/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56063/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34391/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722831505874515200}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:34391/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0xce86ac1a12231b6abd270e1bad786e469089fa7a9aa28fc2b2f0ceba7488c869'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 9cac953fbdc2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 12012858164e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-08-05_04-18-22__d51a7f01-4174-442b-951a-6bcdaf07fe18__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-08-05_04-18-22__d51a7f01-4174-442b-951a-6bcdaf07fe18__wakuorg_nwaku:latest.log