[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-05-08_07-52-01__5436697a-ec89-4e38-bac2-0441cfe4694d
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-08_07-52-01__5436697a-ec89-4e38-bac2-0441cfe4694d__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.53.76
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['3644', '3645', '3646', '3647', '3648']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:335 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 3644:3644 -p 3645:3645 -p 3646:3646 -p 3647:3647 -p 3648:3648 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3646 --rest-port=3644 --tcp-port=3645 --discv5-udp-port=3647 --rest-address=0.0.0.0 --nat=extip:172.18.53.76 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3648 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.53.76 waku ef02e082a7e725458ebba5d74bc8661991a721874cad8bea4ac9d568282bb32f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID ef02e082a7e7. Setting up logs at ./log/docker/publishing_node1_2024-05-08_07-52-01__5436697a-ec89-4e38-bac2-0441cfe4694d__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 3644
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3644/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:200 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3644/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.53.76/tcp/3645/p2p/16Uiu2HAm6s8U8opGYgiDw7Ad68NzPfZeChZK5f5wNDhARSmXh8zT","/ip4/172.18.53.76/tcp/3646/ws/p2p/16Uiu2HAm6s8U8opGYgiDw7Ad68NzPfZeChZK5f5wNDhARSmXh8zT"],"enrUri":"enr:-LO4QGbq1E88ATbh9QqL1WiFGoQ7L4v130sdxCORWY6nKjF_ZK6O6qbDODdgorfwAH8wjaOqM4ViReDmQU_Mbu_AUh8BgmlkgnY0gmlwhKwSNUyKbXVsdGlhZGRyc4wACgSsEjVMBg4-3QOCcnOFAAABAACJc2VjcDI1NmsxoQKp9gb4uogWFrpEzRFGAyUXv-qZwdE1rCQb5AIyKSDH4IN0Y3CCDj2DdWRwgg4_hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:205 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-08_07-52-01__5436697a-ec89-4e38-bac2-0441cfe4694d__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.45.123
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['6749', '6750', '6751', '6752', '6753']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:335 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 6749:6749 -p 6750:6750 -p 6751:6751 -p 6752:6752 -p 6753:6753 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6751 --rest-port=6749 --tcp-port=6750 --discv5-udp-port=6752 --rest-address=0.0.0.0 --nat=extip:172.18.45.123 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6753 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QGbq1E88ATbh9QqL1WiFGoQ7L4v130sdxCORWY6nKjF_ZK6O6qbDODdgorfwAH8wjaOqM4ViReDmQU_Mbu_AUh8BgmlkgnY0gmlwhKwSNUyKbXVsdGlhZGRyc4wACgSsEjVMBg4-3QOCcnOFAAABAACJc2VjcDI1NmsxoQKp9gb4uogWFrpEzRFGAyUXv-qZwdE1rCQb5AIyKSDH4IN0Y3CCDj2DdWRwgg4_hXdha3UyAQ --storenode=/ip4/172.18.53.76/tcp/3645/p2p/16Uiu2HAm6s8U8opGYgiDw7Ad68NzPfZeChZK5f5wNDhARSmXh8zT --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.45.123 waku 345198d9302ab7a8814e68ff4c824a975910d994db12df615e89d4bc0490d46f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 345198d9302a. Setting up logs at ./log/docker/store_node1_2024-05-08_07-52-01__5436697a-ec89-4e38-bac2-0441cfe4694d__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 6749
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6749/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:200 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6749/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.123/tcp/6750/p2p/16Uiu2HAm2agYNeYcqKts6uezJvRiEWU4qTXqE3GfcEe53vXN5act","/ip4/172.18.45.123/tcp/6751/ws/p2p/16Uiu2HAm2agYNeYcqKts6uezJvRiEWU4qTXqE3GfcEe53vXN5act"],"enrUri":"enr:-LO4QHXk60i7sOtRoDUQG-E_0MIHxtsTo5qlWT8uSVNP2wvtDZuSUP_bh6AN5DbU7Y5w3-zK9qjZeSJ5AFnL6etm3u4BgmlkgnY0gmlwhKwSLXuKbXVsdGlhZGRyc4wACgSsEi17Bhpf3QOCcnOFAAABAACJc2VjcDI1NmsxoQJqUKvBaTF18I98k4jpcss8s4fF1TFfAU3BrCUyfeMPtYN0Y3CCGl6DdWRwghpghXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:205 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6749/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.53.76/tcp/3645/p2p/16Uiu2HAm6s8U8opGYgiDw7Ad68NzPfZeChZK5f5wNDhARSmXh8zT"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3644/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6749/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3644/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6749/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715154733637285888,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id ef02e082a7e7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 345198d9302a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-08_07-52-01__5436697a-ec89-4e38-bac2-0441cfe4694d__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-08_07-52-01__5436697a-ec89-4e38-bac2-0441cfe4694d__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-05-08_07-52-17__527fba29-aefa-47c2-9bde-3efb3a6376a3
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-08_07-52-17__527fba29-aefa-47c2-9bde-3efb3a6376a3__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.30.139
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['55531', '55532', '55533', '55534', '55535']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:335 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 55531:55531 -p 55532:55532 -p 55533:55533 -p 55534:55534 -p 55535:55535 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55533 --rest-port=55531 --tcp-port=55532 --discv5-udp-port=55534 --rest-address=0.0.0.0 --nat=extip:172.18.30.139 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55535 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.30.139 waku e0795de365d9f80747ede88519b7c7cd40a7272d3bfeace7bf088303bef51e81
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e0795de365d9. Setting up logs at ./log/docker/publishing_node1_2024-05-08_07-52-17__527fba29-aefa-47c2-9bde-3efb3a6376a3__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 55531
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55531/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:200 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55531/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.30.139/tcp/55532/p2p/16Uiu2HAmF1zPGQUGG7vgEC1HSsAoz3trjMAH4yYmZVUyBJnmzTRF","/ip4/172.18.30.139/tcp/55533/ws/p2p/16Uiu2HAmF1zPGQUGG7vgEC1HSsAoz3trjMAH4yYmZVUyBJnmzTRF"],"enrUri":"enr:-LO4QNWnrwdQcWDj3KSRD_oU3B0OBU5PUousVgz_64qLS1FdN1O0S39bE9QauME9gauwkjaQfZcZ30vbkS5nZu3sO7cBgmlkgnY0gmlwhKwSHouKbXVsdGlhZGRyc4wACgSsEh6LBtjt3QOCcnOFAAABAACJc2VjcDI1NmsxoQMjGJwACzeXiZEgtIhBv0G1h5uN4q9M9pur08iyiUwTLoN0Y3CC2OyDdWRwgtjuhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:205 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-08_07-52-17__527fba29-aefa-47c2-9bde-3efb3a6376a3__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.77.88
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['48092', '48093', '48094', '48095', '48096']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:335 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 48092:48092 -p 48093:48093 -p 48094:48094 -p 48095:48095 -p 48096:48096 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48094 --rest-port=48092 --tcp-port=48093 --discv5-udp-port=48095 --rest-address=0.0.0.0 --nat=extip:172.18.77.88 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48096 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QNWnrwdQcWDj3KSRD_oU3B0OBU5PUousVgz_64qLS1FdN1O0S39bE9QauME9gauwkjaQfZcZ30vbkS5nZu3sO7cBgmlkgnY0gmlwhKwSHouKbXVsdGlhZGRyc4wACgSsEh6LBtjt3QOCcnOFAAABAACJc2VjcDI1NmsxoQMjGJwACzeXiZEgtIhBv0G1h5uN4q9M9pur08iyiUwTLoN0Y3CC2OyDdWRwgtjuhXdha3UyAQ --storenode=/ip4/172.18.30.139/tcp/55532/p2p/16Uiu2HAmF1zPGQUGG7vgEC1HSsAoz3trjMAH4yYmZVUyBJnmzTRF --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.77.88 waku 7e14b497666cb4e65e769a661838e5198f4e2c3667f8a4853ffa75a4ef4d0ebe
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 7e14b497666c. Setting up logs at ./log/docker/store_node1_2024-05-08_07-52-17__527fba29-aefa-47c2-9bde-3efb3a6376a3__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 48092
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48092/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:200 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48092/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.77.88/tcp/48093/p2p/16Uiu2HAmGgAt8h4gkwHE9Li8xGHWipidjrDMgUYHFFHwK5RgzWqz","/ip4/172.18.77.88/tcp/48094/ws/p2p/16Uiu2HAmGgAt8h4gkwHE9Li8xGHWipidjrDMgUYHFFHwK5RgzWqz"],"enrUri":"enr:-LO4QLF-zLGyxmeUz0Qip5k9AmN7KUJkfXvEt-79DBHm2-W6MxcqcSgVyKRXFnmbRe7sC_UxxAC_NJHRAdefavA3FGoBgmlkgnY0gmlwhKwSTViKbXVsdGlhZGRyc4wACgSsEk1YBrve3QOCcnOFAAABAACJc2VjcDI1NmsxoQM7vDyhrEf2xsJWsZCXUUOsmEjsLK-TR9jcYLHgQVWThYN0Y3CCu92DdWRwgrvfhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:205 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48092/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.30.139/tcp/55532/p2p/16Uiu2HAmF1zPGQUGG7vgEC1HSsAoz3trjMAH4yYmZVUyBJnmzTRF"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55531/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48092/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55531/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48092/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715154749503152384,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id e0795de365d9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 7e14b497666c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-08_07-52-17__527fba29-aefa-47c2-9bde-3efb3a6376a3__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-08_07-52-17__527fba29-aefa-47c2-9bde-3efb3a6376a3__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-05-08_07-52-32__a1d262b6-e9b8-4e4e-a8fb-e5ee67615f40
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-08_07-52-32__a1d262b6-e9b8-4e4e-a8fb-e5ee67615f40__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.43.210
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['36413', '36414', '36415', '36416', '36417']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:335 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 36413:36413 -p 36414:36414 -p 36415:36415 -p 36416:36416 -p 36417:36417 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36415 --rest-port=36413 --tcp-port=36414 --discv5-udp-port=36416 --rest-address=0.0.0.0 --nat=extip:172.18.43.210 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36417 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.43.210 waku 840e86f9e6704d9e1bdeb922d02a49aa7ecbf322cc26431e0181265d11060f7b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 840e86f9e670. Setting up logs at ./log/docker/publishing_node1_2024-05-08_07-52-32__a1d262b6-e9b8-4e4e-a8fb-e5ee67615f40__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 36413
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36413/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:200 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36413/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.43.210/tcp/36414/p2p/16Uiu2HAmFkJXgapPmTiMUXh599YsxzeSimJKtDGcYxtUMgR8mGZQ","/ip4/172.18.43.210/tcp/36415/ws/p2p/16Uiu2HAmFkJXgapPmTiMUXh599YsxzeSimJKtDGcYxtUMgR8mGZQ"],"enrUri":"enr:-LO4QH_oKCmHcRONSQ0BHJ10M5MgrR9VHXzyZfCC6Jpe7TnxB-2o-XK2UARYllSuMSyzb-SYcOdpDWdtGBtHFm-cN14BgmlkgnY0gmlwhKwSK9KKbXVsdGlhZGRyc4wACgSsEivSBo4_3QOCcnOFAAABAACJc2VjcDI1NmsxoQMt74Ulxix2sN2jLghUp9n-R8qBhonFhPQn32bBpI4gg4N0Y3CCjj6DdWRwgo5AhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:205 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-08_07-52-32__a1d262b6-e9b8-4e4e-a8fb-e5ee67615f40__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.21.32
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['36163', '36164', '36165', '36166', '36167']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:335 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 36163:36163 -p 36164:36164 -p 36165:36165 -p 36166:36166 -p 36167:36167 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36165 --rest-port=36163 --tcp-port=36164 --discv5-udp-port=36166 --rest-address=0.0.0.0 --nat=extip:172.18.21.32 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36167 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QH_oKCmHcRONSQ0BHJ10M5MgrR9VHXzyZfCC6Jpe7TnxB-2o-XK2UARYllSuMSyzb-SYcOdpDWdtGBtHFm-cN14BgmlkgnY0gmlwhKwSK9KKbXVsdGlhZGRyc4wACgSsEivSBo4_3QOCcnOFAAABAACJc2VjcDI1NmsxoQMt74Ulxix2sN2jLghUp9n-R8qBhonFhPQn32bBpI4gg4N0Y3CCjj6DdWRwgo5AhXdha3UyAQ --storenode=/ip4/172.18.43.210/tcp/36414/p2p/16Uiu2HAmFkJXgapPmTiMUXh599YsxzeSimJKtDGcYxtUMgR8mGZQ --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.21.32 waku fdb5bfa223d392a9ed3a5f618e54b86bbeb88859e6d094a8f0d2a0e9c3bf034d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID fdb5bfa223d3. Setting up logs at ./log/docker/store_node1_2024-05-08_07-52-32__a1d262b6-e9b8-4e4e-a8fb-e5ee67615f40__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 36163
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36163/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:200 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36163/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.21.32/tcp/36164/p2p/16Uiu2HAmE1Jb4nXMHrshTLE161s3uvWeFPTTvBPPmNSPM9HJGNbR","/ip4/172.18.21.32/tcp/36165/ws/p2p/16Uiu2HAmE1Jb4nXMHrshTLE161s3uvWeFPTTvBPPmNSPM9HJGNbR"],"enrUri":"enr:-LO4QMI8NRym4xfJ3chgRKgxMbW94nJwor_hZaFylPO8U0zRMN7449bpiJeVVb8sbE6AcVfdHzOqn7z-sy4OPQu33r4BgmlkgnY0gmlwhKwSFSCKbXVsdGlhZGRyc4wACgSsEhUgBo1F3QOCcnOFAAABAACJc2VjcDI1NmsxoQMUD-yhbUwZcAFXAMhdYbhSy065CYoFEeeb5GwV-QRUKIN0Y3CCjUSDdWRwgo1GhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:205 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36163/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.43.210/tcp/36414/p2p/16Uiu2HAmFkJXgapPmTiMUXh599YsxzeSimJKtDGcYxtUMgR8mGZQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36413/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36163/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36413/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36163/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715154764882494976,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 840e86f9e670
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id fdb5bfa223d3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-08_07-52-32__a1d262b6-e9b8-4e4e-a8fb-e5ee67615f40__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-08_07-52-32__a1d262b6-e9b8-4e4e-a8fb-e5ee67615f40__harbor.status.im_wakuorg_nwaku:latest.log