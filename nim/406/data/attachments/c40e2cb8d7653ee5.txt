[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_content_topics with id: 2024-10-25_04-09-39__a5ad10ee-7e6b-424f-b250-e5789742e402
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-25_04-09-39__a5ad10ee-7e6b-424f-b250-e5789742e402__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.136.112
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['20139', '20140', '20141', '20142', '20143']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 20139:20139 -p 20140:20140 -p 20141:20141 -p 20142:20142 -p 20143:20143 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20141 --rest-port=20139 --tcp-port=20140 --discv5-udp-port=20142 --rest-address=0.0.0.0 --nat=extip:172.18.136.112 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2ebdb6aac05d753acea9beef2b8a4b279dfa538c32eabed54dd2c0bd0fc0bda0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20143 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.136.112 waku c044f85c6877bfecf23eb8d1829a72aa31e7406066ec85a67a52b7c49e634067
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c044f85c6877. Setting up logs at ./log/docker/receiving_node1_2024-10-25_04-09-39__a5ad10ee-7e6b-424f-b250-e5789742e402__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 20139
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5d9f2fab5f89. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20139/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20139/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.112/tcp/20140/p2p/16Uiu2HAmCN2mgpnEFbz6NYM8wgmbbH8NpSvKzWunudzgZrp6nrE4","/ip4/172.18.136.112/tcp/20141/ws/p2p/16Uiu2HAmCN2mgpnEFbz6NYM8wgmbbH8NpSvKzWunudzgZrp6nrE4"],"enrUri":"enr:-LO4QEULcBeyB3WZVWKZH6omgPFDG4ummOIGvDRhG2I28ruROI4nQPfZ8haMRTH_MopMo9VjpNxPg3XpUN0tO19eUEkBgmlkgnY0gmlwhKwSiHCKbXVsdGlhZGRyc4wACgSsEohwBk6t3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL7p9z_9YYih2ryDkyM1QWXGt7qpZCNfzhAsV9QUPRM0YN0Y3CCTqyDdWRwgk6uhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-25_04-09-39__a5ad10ee-7e6b-424f-b250-e5789742e402__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.19.37
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['26256', '26257', '26258', '26259', '26260']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 26256:26256 -p 26257:26257 -p 26258:26258 -p 26259:26259 -p 26260:26260 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26258 --rest-port=26256 --tcp-port=26257 --discv5-udp-port=26259 --rest-address=0.0.0.0 --nat=extip:172.18.19.37 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ecc92e499e5950c20688de01ae68f323fc67db386edded2dcf863d0aa1ed3e73 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26260 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.19.37 waku 2ecf574f1ad56d8f3bda5108fb3ac05d712d4683a58c1e87ab334d5a13d29b47
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2ecf574f1ad5. Setting up logs at ./log/docker/receiving_node2_2024-10-25_04-09-39__a5ad10ee-7e6b-424f-b250-e5789742e402__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 26256
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26256/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26256/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.19.37/tcp/26257/p2p/16Uiu2HAkvfQoPMfKvZg5oGkV2WqHuxnRogny9gGMpvoYKne2JJVf","/ip4/172.18.19.37/tcp/26258/ws/p2p/16Uiu2HAkvfQoPMfKvZg5oGkV2WqHuxnRogny9gGMpvoYKne2JJVf"],"enrUri":"enr:-LO4QIOGvyhSlMg3JVcEHOG0qAvoE_tGg4wXHZQhzthsB77CaSI7MjbAOAC-rTVgjzeG1EddALx-fwpBO6vXzGdoqdABgmlkgnY0gmlwhKwSEyWKbXVsdGlhZGRyc4wACgSsEhMlBmaS3QOCcnOFAAMBAACJc2VjcDI1NmsxoQISYKehtGuQ1HCd8Aibcs1_rFEgcpsBA-geuuF0sTO8-oN0Y3CCZpGDdWRwgmaThXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26256/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.136.112/tcp/20140/p2p/16Uiu2HAmCN2mgpnEFbz6NYM8wgmbbH8NpSvKzWunudzgZrp6nrE4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-25_04-09-39__a5ad10ee-7e6b-424f-b250-e5789742e402__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.138.206
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['46688', '46689', '46690', '46691', '46692']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 46688:46688 -p 46689:46689 -p 46690:46690 -p 46691:46691 -p 46692:46692 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46690 --rest-port=46688 --tcp-port=46689 --discv5-udp-port=46691 --rest-address=0.0.0.0 --nat=extip:172.18.138.206 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fb6606d03d5f96aa8c1a0abcf5bfedb7ddebfbcebd3bd4239eda91defbbb01de --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46692 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QEULcBeyB3WZVWKZH6omgPFDG4ummOIGvDRhG2I28ruROI4nQPfZ8haMRTH_MopMo9VjpNxPg3XpUN0tO19eUEkBgmlkgnY0gmlwhKwSiHCKbXVsdGlhZGRyc4wACgSsEohwBk6t3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL7p9z_9YYih2ryDkyM1QWXGt7qpZCNfzhAsV9QUPRM0YN0Y3CCTqyDdWRwgk6uhXdha3UyCQ --lightpushnode=/ip4/172.18.136.112/tcp/20140/p2p/16Uiu2HAmCN2mgpnEFbz6NYM8wgmbbH8NpSvKzWunudzgZrp6nrE4 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.138.206 waku 30f79db26c5d621a19150f2436fd42787f07d096cb83c47e7642d6b8b64b30e0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 30f79db26c5d. Setting up logs at ./log/docker/lightpush_node1_2024-10-25_04-09-39__a5ad10ee-7e6b-424f-b250-e5789742e402__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 46688
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46688/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46688/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.138.206/tcp/46689/p2p/16Uiu2HAkuV3Y41tm5hcQptGpZ93tPQVb957vvPKNdi7CLh4rnfzT","/ip4/172.18.138.206/tcp/46690/ws/p2p/16Uiu2HAkuV3Y41tm5hcQptGpZ93tPQVb957vvPKNdi7CLh4rnfzT"],"enrUri":"enr:-LO4QCduf5AzK72WAz0uYnIu5dTs8OYkpIGarfuSLDaxBf0fN_4H1_geSoft4Y4-6-jB2Y8axdGMdZTMpxPGWw5lgcMBgmlkgnY0gmlwhKwSis6KbXVsdGlhZGRyc4wACgSsEorOBrZi3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIA3R24WYQAn7G_6bfUBONJNG70ChN3MkL0n55sqSSW1IN0Y3CCtmGDdWRwgrZjhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46688/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.136.112/tcp/20140/p2p/16Uiu2HAmCN2mgpnEFbz6NYM8wgmbbH8NpSvKzWunudzgZrp6nrE4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46688/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.19.37/tcp/26257/p2p/16Uiu2HAkvfQoPMfKvZg5oGkV2WqHuxnRogny9gGMpvoYKne2JJVf"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20139/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26256/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic Empty string
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46688/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "", "timestamp": 1729829384980691200}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:46688/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A dictionary
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46688/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": {"key": "YWFh"}, "timestamp": 1729829384987727104}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:46688/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic An integer
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46688/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": 1234567890, "timestamp": 1729829384994777088}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:46688/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A list
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46688/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": ["YWFh"], "timestamp": 1729829384999802624}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:46688/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A bool
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46688/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": true, "timestamp": 1729829385004775168}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:46688/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c044f85c6877
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2ecf574f1ad5
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c044f85c6877. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 30f79db26c5d
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2ecf574f1ad5. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.