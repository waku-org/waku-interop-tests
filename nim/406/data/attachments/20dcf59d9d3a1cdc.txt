[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_relaying_node with id: 2024-10-25_04-02-52__0ca57176-6c25-4b7b-9379-2516352e890e
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-25_04-02-52__0ca57176-6c25-4b7b-9379-2516352e890e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-25_04-02-52__0ca57176-6c25-4b7b-9379-2516352e890e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-10-25_04-02-52__0ca57176-6c25-4b7b-9379-2516352e890e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.36.253
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['39384', '39385', '39386', '39387', '39388']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 39384:39384 -p 39385:39385 -p 39386:39386 -p 39387:39387 -p 39388:39388 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39386 --rest-port=39384 --tcp-port=39385 --discv5-udp-port=39387 --rest-address=0.0.0.0 --nat=extip:172.18.36.253 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2e7ceed1ca598d9c76b72e2f8fea76abcb7ac14caede868acaf7a445da8f08ec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39388 --metrics-logging=true --filter=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.36.253 waku 62b14465b0df67af96b4231897a2bbb27ab5d1d94db99c3efd803148fee89028
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 62b14465b0df. Setting up logs at ./log/docker/node1_2024-10-25_04-02-52__0ca57176-6c25-4b7b-9379-2516352e890e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 39384
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container aa9d27dc32c6. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39384/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39384/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.36.253/tcp/39385/p2p/16Uiu2HAmA2nJ1qhih9cMmFAEvffCq33Ftg94jNjjwG1LnDqeKhnm","/ip4/172.18.36.253/tcp/39386/ws/p2p/16Uiu2HAmA2nJ1qhih9cMmFAEvffCq33Ftg94jNjjwG1LnDqeKhnm"],"enrUri":"enr:-LO4QEa2BMmYIV7q-IvV3kK_8OUoNmge85ls5vD2wFArK3XIJ7rq7QU7HUaLw-qIc-tHkkOhGBUul2R6gfq8dMx5JlwBgmlkgnY0gmlwhKwSJP2KbXVsdGlhZGRyc4wACgSsEiT9Bpna3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLZAhWxgIulkyN4cHmo_t9XVviVp09ht5pOkED24aGinoN0Y3CCmdmDdWRwgpnbhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.14.71
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['62139', '62140', '62141', '62142', '62143']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 62139:62139 -p 62140:62140 -p 62141:62141 -p 62142:62142 -p 62143:62143 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62141 --rest-port=62139 --tcp-port=62140 --discv5-udp-port=62142 --rest-address=0.0.0.0 --nat=extip:172.18.14.71 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e9aaadf8f9e7434e0cd4e4531acd98be70aaeea35cb9b16ac0de200fd6ebefeb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62143 --metrics-logging=true --filter=true --relay=true --discv5-bootstrap-node=enr:-LO4QEa2BMmYIV7q-IvV3kK_8OUoNmge85ls5vD2wFArK3XIJ7rq7QU7HUaLw-qIc-tHkkOhGBUul2R6gfq8dMx5JlwBgmlkgnY0gmlwhKwSJP2KbXVsdGlhZGRyc4wACgSsEiT9Bpna3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLZAhWxgIulkyN4cHmo_t9XVviVp09ht5pOkED24aGinoN0Y3CCmdmDdWRwgpnbhXdha3UyBQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.14.71 waku eafcb0b43be7561b0eb835e552d064ecf204557421b1bfa8a15fb60990397d2e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID eafcb0b43be7. Setting up logs at ./log/docker/node2_2024-10-25_04-02-52__0ca57176-6c25-4b7b-9379-2516352e890e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 62139
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62139/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62139/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.14.71/tcp/62140/p2p/16Uiu2HAkuvmkderNGFrmoZpJRGuPXUDeiT3E56HZHkyMu5N3eFio","/ip4/172.18.14.71/tcp/62141/ws/p2p/16Uiu2HAkuvmkderNGFrmoZpJRGuPXUDeiT3E56HZHkyMu5N3eFio"],"enrUri":"enr:-LO4QHaLnMBl3XYAvsla4Qi0t-RnFesju3oGpAWJZS5cNsiCeN07xEqvA1P9t02BaswNJbefvSdGCzOjn3brTGZBOT8BgmlkgnY0gmlwhKwSDkeKbXVsdGlhZGRyc4wACgSsEg5HBvK93QOCcnOFAAMBAACJc2VjcDI1NmsxoQIHdF8Bil6b6oPE1H4KRcR6OzFSc5HBijiFZbVFWPd0eIN0Y3CC8ryDdWRwgvK-hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.244.135
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['23231', '23232', '23233', '23234', '23235']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 23231:23231 -p 23232:23232 -p 23233:23233 -p 23234:23234 -p 23235:23235 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23233 --rest-port=23231 --tcp-port=23232 --discv5-udp-port=23234 --rest-address=0.0.0.0 --nat=extip:172.18.244.135 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=df09ecebd9fb55ceafdcc24b41dae5fa92aa6a5a4c33f4eecb6ffed09aaac6ca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23235 --metrics-logging=true --relay=false --filternode=/ip4/172.18.14.71/tcp/62140/p2p/16Uiu2HAkuvmkderNGFrmoZpJRGuPXUDeiT3E56HZHkyMu5N3eFio --discv5-bootstrap-node=enr:-LO4QHaLnMBl3XYAvsla4Qi0t-RnFesju3oGpAWJZS5cNsiCeN07xEqvA1P9t02BaswNJbefvSdGCzOjn3brTGZBOT8BgmlkgnY0gmlwhKwSDkeKbXVsdGlhZGRyc4wACgSsEg5HBvK93QOCcnOFAAMBAACJc2VjcDI1NmsxoQIHdF8Bil6b6oPE1H4KRcR6OzFSc5HBijiFZbVFWPd0eIN0Y3CC8ryDdWRwgvK-hXdha3UyBQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.244.135 waku ed58dfe7ab6502c514a68bdc995a64f5f529edd35ca13f0e20293969fae241c4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ed58dfe7ab65. Setting up logs at ./log/docker/node3_2024-10-25_04-02-52__0ca57176-6c25-4b7b-9379-2516352e890e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 23231
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23231/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23231/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.244.135/tcp/23232/p2p/16Uiu2HAmSHFwg6CVMhRgEbxdFSakHaqpL4jRUxzH5mu4hZeBpyrH","/ip4/172.18.244.135/tcp/23233/ws/p2p/16Uiu2HAmSHFwg6CVMhRgEbxdFSakHaqpL4jRUxzH5mu4hZeBpyrH"],"enrUri":"enr:-LO4QJ3kfrrmIiDyScHl02EkGhbWZA9qhtI9Rk6SX9TPIDODC-Hp_fP4AZsna49Q_CA4FXnwlK2ak1c8Koe3oJqu-pMBgmlkgnY0gmlwhKwS9IeKbXVsdGlhZGRyc4wACgSsEvSHBlrB3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPKcnhVZ6aqsuKnKl3aBLFwl6MdaDHCQEJrdVlcNqIiIoN0Y3CCWsCDdWRwglrChXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39384/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62139/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23231/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39384/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.14.71/tcp/62140/p2p/16Uiu2HAkuvmkderNGFrmoZpJRGuPXUDeiT3E56HZHkyMu5N3eFio","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62139/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.36.253/tcp/39385/p2p/16Uiu2HAmA2nJ1qhih9cMmFAEvffCq33Ftg94jNjjwG1LnDqeKhnm","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.244.135/tcp/23232/p2p/16Uiu2HAmSHFwg6CVMhRgEbxdFSakHaqpL4jRUxzH5mu4hZeBpyrH","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23231/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.14.71/tcp/62140/p2p/16Uiu2HAkuvmkderNGFrmoZpJRGuPXUDeiT3E56HZHkyMu5N3eFio","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39384/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23231/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1729829006725943040,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 62b14465b0df
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id eafcb0b43be7
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 62b14465b0df. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ed58dfe7ab65
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container eafcb0b43be7. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.