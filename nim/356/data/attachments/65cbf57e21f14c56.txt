[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2024-09-11_09-33-57__acf624b9-197c-48c0-aad2-bbcefe6aef5c
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-11_09-33-57__acf624b9-197c-48c0-aad2-bbcefe6aef5c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.88.218
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['6458', '6459', '6460', '6461', '6462']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 6458:6458 -p 6459:6459 -p 6460:6460 -p 6461:6461 -p 6462:6462 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6460 --rest-port=6458 --tcp-port=6459 --discv5-udp-port=6461 --rest-address=0.0.0.0 --nat=extip:172.18.88.218 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a91e1bd9a8dd86fea7fcaa6432ce4b42b0b7db045eaeb2f0890aba51ef1486bc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6462 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.88.218 waku 99f2d89839de6ae4800742723df07e47ac8cd92124d7008acbde53828b1861cd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 99f2d89839de. Setting up logs at ./log/docker/receiving_node1_2024-09-11_09-33-57__acf624b9-197c-48c0-aad2-bbcefe6aef5c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 6458
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6458/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6458/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.88.218/tcp/6459/p2p/16Uiu2HAmMaTjahx7SvwPiETvULoYBFsLDRExU9vm3jmf6WMbFeaf","/ip4/172.18.88.218/tcp/6460/ws/p2p/16Uiu2HAmMaTjahx7SvwPiETvULoYBFsLDRExU9vm3jmf6WMbFeaf"],"enrUri":"enr:-LO4QEDBDbDLQKlH1uINX2Cu1TDSPCNT_oizBfE3A9dX4lGSX_SBGeWUwJDcFNutHw92BQ8rJTAxnzqtuOavJaUm11UBgmlkgnY0gmlwhKwSWNqKbXVsdGlhZGRyc4wACgSsEljaBhk83QOCcnOFAAMBAACJc2VjcDI1NmsxoQOEkD3rPbxq5S4YJ8Z2jFqxYBJWqw4dOosXiEDDhHPoZIN0Y3CCGTuDdWRwghk9hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-11_09-33-57__acf624b9-197c-48c0-aad2-bbcefe6aef5c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.139.4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['38978', '38979', '38980', '38981', '38982']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 38978:38978 -p 38979:38979 -p 38980:38980 -p 38981:38981 -p 38982:38982 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38980 --rest-port=38978 --tcp-port=38979 --discv5-udp-port=38981 --rest-address=0.0.0.0 --nat=extip:172.18.139.4 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ea78155a4ce6a7ce6cdd1e0fd6490ba97e794592da2cabe4fa9a04acea43de20 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38982 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.139.4 waku 4602f0570914266c6bdb333d468d556c2b351dd44cd9cf653f97774e963a2aa4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4602f0570914. Setting up logs at ./log/docker/receiving_node2_2024-09-11_09-33-57__acf624b9-197c-48c0-aad2-bbcefe6aef5c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 38978
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38978/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38978/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.139.4/tcp/38979/p2p/16Uiu2HAm18wWS7FUnqov8gRsfjgdAK8EVCidRA1xyLjqbBhsz4xS","/ip4/172.18.139.4/tcp/38980/ws/p2p/16Uiu2HAm18wWS7FUnqov8gRsfjgdAK8EVCidRA1xyLjqbBhsz4xS"],"enrUri":"enr:-LO4QJVJqvckKC9qGmPD9NA7pI72jHde9-_oFxVapwQ3R_ZuJ5hO9ZuM80TZFzUi9eSDr22vqfgxbG1LkvGw6U9TX-sBgmlkgnY0gmlwhKwSiwSKbXVsdGlhZGRyc4wACgSsEosEBphE3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJU3M5BYGfsuYXRFnFBd2I73iOmkgV0CJVD3bbM3LMIg4N0Y3CCmEODdWRwgphFhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38978/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.88.218/tcp/6459/p2p/16Uiu2HAmMaTjahx7SvwPiETvULoYBFsLDRExU9vm3jmf6WMbFeaf"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-11_09-33-57__acf624b9-197c-48c0-aad2-bbcefe6aef5c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.158.106
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['51308', '51309', '51310', '51311', '51312']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 51308:51308 -p 51309:51309 -p 51310:51310 -p 51311:51311 -p 51312:51312 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51310 --rest-port=51308 --tcp-port=51309 --discv5-udp-port=51311 --rest-address=0.0.0.0 --nat=extip:172.18.158.106 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1ec1eafe238eabc7f5d6bf8401c4bfc0a8bb391fbbde456ba26ec80eac1cdcda --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51312 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QEDBDbDLQKlH1uINX2Cu1TDSPCNT_oizBfE3A9dX4lGSX_SBGeWUwJDcFNutHw92BQ8rJTAxnzqtuOavJaUm11UBgmlkgnY0gmlwhKwSWNqKbXVsdGlhZGRyc4wACgSsEljaBhk83QOCcnOFAAMBAACJc2VjcDI1NmsxoQOEkD3rPbxq5S4YJ8Z2jFqxYBJWqw4dOosXiEDDhHPoZIN0Y3CCGTuDdWRwghk9hXdha3UyCQ --lightpushnode=/ip4/172.18.88.218/tcp/6459/p2p/16Uiu2HAmMaTjahx7SvwPiETvULoYBFsLDRExU9vm3jmf6WMbFeaf --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.158.106 waku 4a18adb0ca2b0e2a8a9ad52739d7358009be6716833788472af3ab3b95829b24
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4a18adb0ca2b. Setting up logs at ./log/docker/lightpush_node1_2024-09-11_09-33-57__acf624b9-197c-48c0-aad2-bbcefe6aef5c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 51308
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51308/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51308/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.158.106/tcp/51309/p2p/16Uiu2HAmMXEkyDSTiyLBwNTedjY58Vmsy9ighnUukEViLxGfgS8h","/ip4/172.18.158.106/tcp/51310/ws/p2p/16Uiu2HAmMXEkyDSTiyLBwNTedjY58Vmsy9ighnUukEViLxGfgS8h"],"enrUri":"enr:-LO4QO79Dkq7YXGkRTFmh_VVkXGxJmlnJDC6FLoibblNyCBFJ90equnXi17lTDvUdGciIWzxekXfsv33644try7JIbwBgmlkgnY0gmlwhKwSnmqKbXVsdGlhZGRyc4wACgSsEp5qBshu3QOCcnOFAAMBAACJc2VjcDI1NmsxoQODvNPNq_7Rx3DyORh-ps3dkphenXD5sPMq_dCqIq-nWoN0Y3CCyG2DdWRwgshvhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51308/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.88.218/tcp/6459/p2p/16Uiu2HAmMaTjahx7SvwPiETvULoYBFsLDRExU9vm3jmf6WMbFeaf"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51308/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.139.4/tcp/38979/p2p/16Uiu2HAm18wWS7FUnqov8gRsfjgdAK8EVCidRA1xyLjqbBhsz4xS"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6458/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38978/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51308/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726047242832503296, "extraField": "extraValue"}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:51308/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 99f2d89839de
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4602f0570914
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4a18adb0ca2b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.