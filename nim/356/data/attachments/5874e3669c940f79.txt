[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_invalid_pubsub_topic_format with id: 2024-09-11_09-29-34__45780b24-4b4c-4da6-8733-3e10a1251a86
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-11_09-29-34__45780b24-4b4c-4da6-8733-3e10a1251a86__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.120.143
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['42072', '42073', '42074', '42075', '42076']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 42072:42072 -p 42073:42073 -p 42074:42074 -p 42075:42075 -p 42076:42076 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42074 --rest-port=42072 --tcp-port=42073 --discv5-udp-port=42075 --rest-address=0.0.0.0 --nat=extip:172.18.120.143 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e3508afb9ed6ffde1e8e2584accaef38adb4f7acfb6de5f00dcc2a36a906c90c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42076 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.120.143 waku dfd32502f3f8ad94568bc7bfa885a919dee55ff4193634828fb0f36289213984
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID dfd32502f3f8. Setting up logs at ./log/docker/node1_2024-09-11_09-29-34__45780b24-4b4c-4da6-8733-3e10a1251a86__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 42072
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42072/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42072/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.120.143/tcp/42073/p2p/16Uiu2HAmRcJt5CLVE3m8N6NVtzVi6NRmLGLP63gARSSRWeWiNwY2","/ip4/172.18.120.143/tcp/42074/ws/p2p/16Uiu2HAmRcJt5CLVE3m8N6NVtzVi6NRmLGLP63gARSSRWeWiNwY2"],"enrUri":"enr:-LO4QO7eJsPfOdKMRee0HTlFb7cDbLwAS1IJi097gQXSg9GPQNMkUcoxxoxBEmZOOquA_uZz_5OI-Ezek3B9d4CgHxgBgmlkgnY0gmlwhKwSeI-KbXVsdGlhZGRyc4wACgSsEniPBqRa3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPAeCPxC4orKkcB8RraS9_3bI4NVHdEF4Evzm7EP3qqV4N0Y3CCpFmDdWRwgqRbhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-11_09-29-34__45780b24-4b4c-4da6-8733-3e10a1251a86__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.16.49
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['5051', '5052', '5053', '5054', '5055']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 5051:5051 -p 5052:5052 -p 5053:5053 -p 5054:5054 -p 5055:5055 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5053 --rest-port=5051 --tcp-port=5052 --discv5-udp-port=5054 --rest-address=0.0.0.0 --nat=extip:172.18.16.49 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2d6b788b158d6a5eaf5aaca5cbb5ebeb92d6ca46ec5ca0c6be6ff31cfd18ffa7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5055 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QO7eJsPfOdKMRee0HTlFb7cDbLwAS1IJi097gQXSg9GPQNMkUcoxxoxBEmZOOquA_uZz_5OI-Ezek3B9d4CgHxgBgmlkgnY0gmlwhKwSeI-KbXVsdGlhZGRyc4wACgSsEniPBqRa3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPAeCPxC4orKkcB8RraS9_3bI4NVHdEF4Evzm7EP3qqV4N0Y3CCpFmDdWRwgqRbhXdha3UyBQ --filternode=/ip4/172.18.120.143/tcp/42073/p2p/16Uiu2HAmRcJt5CLVE3m8N6NVtzVi6NRmLGLP63gARSSRWeWiNwY2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.16.49 waku dabde21fc584b809434dd6fc61c02af4c38480dfaa577bca61ad489d400d3e2f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID dabde21fc584. Setting up logs at ./log/docker/node2_2024-09-11_09-29-34__45780b24-4b4c-4da6-8733-3e10a1251a86__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 5051
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5051/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5051/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.16.49/tcp/5052/p2p/16Uiu2HAmKcsmBudFrrsMV2W3XJTuWyE4PUkfwrZD88KJgrr2DV1c","/ip4/172.18.16.49/tcp/5053/ws/p2p/16Uiu2HAmKcsmBudFrrsMV2W3XJTuWyE4PUkfwrZD88KJgrr2DV1c"],"enrUri":"enr:-LO4QL3BokeuyVU_FXQnL8SKDAIp9Th_KJvvZMFi-rpokZ5BTqqKVtrMFonfW7csbUD3br3l3e-MY3G85nQzGdNBG-cBgmlkgnY0gmlwhKwSEDGKbXVsdGlhZGRyc4wACgSsEhAxBhO93QOCcnOFAAMBAACJc2VjcDI1NmsxoQNndzKmQkeV7RSsDxvNGaIpPZuSqGEeoP4HF4gDN7U_Y4N0Y3CCE7yDdWRwghO-hXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5051/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.120.143/tcp/42073/p2p/16Uiu2HAmRcJt5CLVE3m8N6NVtzVi6NRmLGLP63gARSSRWeWiNwY2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42072/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5051/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "87411afd-e07e-456d-8e3b-8c15897a0df5", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"87411afd-e07e-456d-8e3b-8c15897a0df5","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5051/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": ["/waku/2/rs/3/1"]}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:5051/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id dfd32502f3f8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id dabde21fc584
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.