[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2024-09-11_09-33-05__6a802b5f-fefb-46a5-953f-6d4b77c98660
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-11_09-33-05__6a802b5f-fefb-46a5-953f-6d4b77c98660__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.0.209
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['59959', '59960', '59961', '59962', '59963']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 59959:59959 -p 59960:59960 -p 59961:59961 -p 59962:59962 -p 59963:59963 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59961 --rest-port=59959 --tcp-port=59960 --discv5-udp-port=59962 --rest-address=0.0.0.0 --nat=extip:172.18.0.209 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ffa94de75ffe3a55eff1e88fd6ff346bccfbd0c05ececb707fedebf7257ee8cc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59963 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.0.209 waku db44bce71711b4427e9644b4f5868b6785d2f76e3dd5606550518c3fdeffeeec
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID db44bce71711. Setting up logs at ./log/docker/receiving_node1_2024-09-11_09-33-05__6a802b5f-fefb-46a5-953f-6d4b77c98660__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 59959
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59959/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59959/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.0.209/tcp/59960/p2p/16Uiu2HAmDGzbz5WvL8yL98aYvAqpvdwzxYSMT2QXfnwAKju8bwuS","/ip4/172.18.0.209/tcp/59961/ws/p2p/16Uiu2HAmDGzbz5WvL8yL98aYvAqpvdwzxYSMT2QXfnwAKju8bwuS"],"enrUri":"enr:-LO4QBqGWlVA8Z6a5r-n-vVwJHbwMlpnopNyPwFRET1XjE8HPum6Qu9NkMXFFgQdcwyyQD_em-uMOEc9UL_bHGpZp2gBgmlkgnY0gmlwhKwSANGKbXVsdGlhZGRyc4wACgSsEgDRBuo53QOCcnOFAAMBAACJc2VjcDI1NmsxoQMJOTITKeAVEDAlcYe9vmmCW9V0-GHJJZstfO3g9bmXOYN0Y3CC6jiDdWRwguo6hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-11_09-33-05__6a802b5f-fefb-46a5-953f-6d4b77c98660__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.197.115
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['29119', '29120', '29121', '29122', '29123']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 29119:29119 -p 29120:29120 -p 29121:29121 -p 29122:29122 -p 29123:29123 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29121 --rest-port=29119 --tcp-port=29120 --discv5-udp-port=29122 --rest-address=0.0.0.0 --nat=extip:172.18.197.115 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d721c4f54bd85b5ecb1aed3ae3bcc5edab6fb0c01c0eb38b56fb312543eedbdb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29123 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.197.115 waku ed13746908bfb48e47947037b0b271d21a9a0af81db736cf6ade3afa282528e7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ed13746908bf. Setting up logs at ./log/docker/receiving_node2_2024-09-11_09-33-05__6a802b5f-fefb-46a5-953f-6d4b77c98660__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 29119
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29119/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29119/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.197.115/tcp/29120/p2p/16Uiu2HAm3Bv1boxPGL9NDFTnMuXSDwbjzZCx8eetLYzj3Jxxvdfd","/ip4/172.18.197.115/tcp/29121/ws/p2p/16Uiu2HAm3Bv1boxPGL9NDFTnMuXSDwbjzZCx8eetLYzj3Jxxvdfd"],"enrUri":"enr:-LO4QKxpgm_dgW8hoZoA3d_64zA_tCGvoRVaHloiRgf3Yu1BKCbfJMfHQ8Djh2rrlWty1UdYKkkObxEQIWB_pV4A4oUBgmlkgnY0gmlwhKwSxXOKbXVsdGlhZGRyc4wACgSsEsVzBnHB3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJzVzqq69w2myme5K4KNHOjZeUKrgpKY1946PLfkZO3KIN0Y3CCccCDdWRwgnHChXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29119/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.0.209/tcp/59960/p2p/16Uiu2HAmDGzbz5WvL8yL98aYvAqpvdwzxYSMT2QXfnwAKju8bwuS"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-11_09-33-05__6a802b5f-fefb-46a5-953f-6d4b77c98660__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.217.122
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['16740', '16741', '16742', '16743', '16744']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 16740:16740 -p 16741:16741 -p 16742:16742 -p 16743:16743 -p 16744:16744 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16742 --rest-port=16740 --tcp-port=16741 --discv5-udp-port=16743 --rest-address=0.0.0.0 --nat=extip:172.18.217.122 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a79fbacd0a0aff615ed419c1c723d5f453bb1dbbe48b32a99e1c36f41c5feefe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16744 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QBqGWlVA8Z6a5r-n-vVwJHbwMlpnopNyPwFRET1XjE8HPum6Qu9NkMXFFgQdcwyyQD_em-uMOEc9UL_bHGpZp2gBgmlkgnY0gmlwhKwSANGKbXVsdGlhZGRyc4wACgSsEgDRBuo53QOCcnOFAAMBAACJc2VjcDI1NmsxoQMJOTITKeAVEDAlcYe9vmmCW9V0-GHJJZstfO3g9bmXOYN0Y3CC6jiDdWRwguo6hXdha3UyCQ --lightpushnode=/ip4/172.18.0.209/tcp/59960/p2p/16Uiu2HAmDGzbz5WvL8yL98aYvAqpvdwzxYSMT2QXfnwAKju8bwuS --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.217.122 waku 38059dceea9ecd35dc4b8452a125546abafaa8d629a778b6151f4fa43ea09cf5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 38059dceea9e. Setting up logs at ./log/docker/lightpush_node1_2024-09-11_09-33-05__6a802b5f-fefb-46a5-953f-6d4b77c98660__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 16740
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16740/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16740/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.217.122/tcp/16741/p2p/16Uiu2HAm7oz1s4fssVAejGiJcxFeLGsQbkKNt3buA3QpMXmH9d9x","/ip4/172.18.217.122/tcp/16742/ws/p2p/16Uiu2HAm7oz1s4fssVAejGiJcxFeLGsQbkKNt3buA3QpMXmH9d9x"],"enrUri":"enr:-LO4QGlJ721ynZCRsVe5PpnrxPjtu_hMzaei4eMG8reTtqI3SsePFaP6idWcGxjX8o7BY6EEz_CQjbCThC6jXD7ejpoBgmlkgnY0gmlwhKwS2XqKbXVsdGlhZGRyc4wACgSsEtl6BkFm3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK4A2n4PklZkFS9vArxRKk0e0OYWCblAjZDn7lA6503V4N0Y3CCQWWDdWRwgkFnhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16740/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.0.209/tcp/59960/p2p/16Uiu2HAmDGzbz5WvL8yL98aYvAqpvdwzxYSMT2QXfnwAKju8bwuS"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16740/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.197.115/tcp/29120/p2p/16Uiu2HAm3Bv1boxPGL9NDFTnMuXSDwbjzZCx8eetLYzj3Jxxvdfd"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59959/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29119/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16740/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726047190555054336}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:16740/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16740/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726047190559906816}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:16740/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16740/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726047190563584000}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:16740/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16740/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726047190566783744}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:16740/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id db44bce71711
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ed13746908bf
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 38059dceea9e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.