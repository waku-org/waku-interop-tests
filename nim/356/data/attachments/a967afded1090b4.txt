[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_content_topic_and_pubsub_topic_not_in_docker_flags with id: 2024-09-11_09-41-49__cf62c545-baf4-41a2-bc95-a35827eef2ec
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-11_09-41-49__cf62c545-baf4-41a2-bc95-a35827eef2ec__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.148.131
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['20602', '20603', '20604', '20605', '20606']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 20602:20602 -p 20603:20603 -p 20604:20604 -p 20605:20605 -p 20606:20606 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20604 --rest-port=20602 --tcp-port=20603 --discv5-udp-port=20605 --rest-address=0.0.0.0 --nat=extip:172.18.148.131 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=af7cc81bb460df4d6ccfea05eafbe5a30edc93bae37e1bebd268f5b5f1eee5b8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20606 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.148.131 waku be03ecc4d3b4335c7c5ef211dda7147b5ff3ccc54bc4385974fe7562074a69d1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID be03ecc4d3b4. Setting up logs at ./log/docker/node1_2024-09-11_09-41-49__cf62c545-baf4-41a2-bc95-a35827eef2ec__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 20602
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20602/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20602/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.148.131/tcp/20603/p2p/16Uiu2HAmDrKiseaHGvW45naM1bLWhrrgy8LQMgt1zdpLFpyexVVv","/ip4/172.18.148.131/tcp/20604/ws/p2p/16Uiu2HAmDrKiseaHGvW45naM1bLWhrrgy8LQMgt1zdpLFpyexVVv"],"enrUri":"enr:-LO4QEEz7MpVaswU0xIxVyjYL78FYInyvalSIAGB4fWDL0VFH6F3tEAsg3WQUT01jjk7fMkVAK-X7sCcidYcVUu61D4BgmlkgnY0gmlwhKwSlIOKbXVsdGlhZGRyc4wACgSsEpSDBlB83QOCcnOFAAIBAACJc2VjcDI1NmsxoQMRwvrfsoquAmoJAkun3rYuawEukEhNl16dGA-BoGE9JYN0Y3CCUHuDdWRwglB9hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-11_09-41-49__cf62c545-baf4-41a2-bc95-a35827eef2ec__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.52.135
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['20011', '20012', '20013', '20014', '20015']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 20011:20011 -p 20012:20012 -p 20013:20013 -p 20014:20014 -p 20015:20015 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20013 --rest-port=20011 --tcp-port=20012 --discv5-udp-port=20014 --rest-address=0.0.0.0 --nat=extip:172.18.52.135 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=a5a93093d6eddef05ccffd56b0fca73d9bb3d2ae2bb6deb4d0aadcc38aa15f83 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20015 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QEEz7MpVaswU0xIxVyjYL78FYInyvalSIAGB4fWDL0VFH6F3tEAsg3WQUT01jjk7fMkVAK-X7sCcidYcVUu61D4BgmlkgnY0gmlwhKwSlIOKbXVsdGlhZGRyc4wACgSsEpSDBlB83QOCcnOFAAIBAACJc2VjcDI1NmsxoQMRwvrfsoquAmoJAkun3rYuawEukEhNl16dGA-BoGE9JYN0Y3CCUHuDdWRwglB9hXdha3UyBQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.52.135 waku 52cdaba0ce6a7084a9a2dc3087588d901ecf2180f7e89eddf5f64f6d2626c7ab
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 52cdaba0ce6a. Setting up logs at ./log/docker/node2_2024-09-11_09-41-49__cf62c545-baf4-41a2-bc95-a35827eef2ec__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 20011
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20011/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20011/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.52.135/tcp/20012/p2p/16Uiu2HAm8Km6cGUh1GjekQ9UxXLVNwABKvJGv6HsHPq2qZYPGNGu","/ip4/172.18.52.135/tcp/20013/ws/p2p/16Uiu2HAm8Km6cGUh1GjekQ9UxXLVNwABKvJGv6HsHPq2qZYPGNGu"],"enrUri":"enr:-LO4QLMDERX-7sdHdCIVPnB3ozpkn0g4wr5NiA4W4E7e9QgfT0Lo6ZusfWWHhXANByDsqiLcYVxByEwSP21n3kxFPQUBgmlkgnY0gmlwhKwSNIeKbXVsdGlhZGRyc4wACgSsEjSHBk4t3QOCcnOFAAIBAACJc2VjcDI1NmsxoQK_pDtINltCDgOJ03INTl4K9oNblVe78zmsS4IMcMTWpoN0Y3CCTiyDdWRwgk4uhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20011/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.148.131/tcp/20603/p2p/16Uiu2HAmDrKiseaHGvW45naM1bLWhrrgy8LQMgt1zdpLFpyexVVv"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20602/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20011/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20602/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20602/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726047712511258112,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20011/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726047712511258112,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id be03ecc4d3b4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 52cdaba0ce6a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.