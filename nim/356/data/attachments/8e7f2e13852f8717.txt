[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2024-09-11_09-51-56__2db35972-160a-4252-a5d5-904384d22d2c
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-09-11_09-51-56__2db35972-160a-4252-a5d5-904384d22d2c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.8.165
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['42771', '42772', '42773', '42774', '42775']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 42771:42771 -p 42772:42772 -p 42773:42773 -p 42774:42774 -p 42775:42775 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42773 --rest-port=42771 --tcp-port=42772 --discv5-udp-port=42774 --rest-address=0.0.0.0 --nat=extip:172.18.8.165 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=78f96a9b3dcb6d84bb07cbf4acf5fe56886466aa457aec94397bb56680d5db4f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42775 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.8.165 waku 2b108b1e465ee12d3b50b72d30b9a2a89f583e1e0fe766ff1c2ce77629badfe4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2b108b1e465e. Setting up logs at ./log/docker/publishing_node1_2024-09-11_09-51-56__2db35972-160a-4252-a5d5-904384d22d2c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 42771
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42771/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42771/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.8.165/tcp/42772/p2p/16Uiu2HAm9bdxQqRkHsnAiMR7aMUwYDqjxQtfNqC2mRyYpLzjQbv8","/ip4/172.18.8.165/tcp/42773/ws/p2p/16Uiu2HAm9bdxQqRkHsnAiMR7aMUwYDqjxQtfNqC2mRyYpLzjQbv8"],"enrUri":"enr:-LO4QApNvmOKSq2Xyl3ggDiaWcCX3qCW4AvTD5EjFUnGO_k-Iyzx0PUd8pRqMc3mRb1dci7OSUak161-IZKJ8kmTRFsBgmlkgnY0gmlwhKwSCKWKbXVsdGlhZGRyc4wACgSsEgilBqcV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLSkSL_xuAS9qdVula-Ca19MmE3a7nCLCmho90I-E2c6YN0Y3CCpxSDdWRwgqcWhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node2_2024-09-11_09-51-56__2db35972-160a-4252-a5d5-904384d22d2c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.27.31
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['60205', '60206', '60207', '60208', '60209']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 60205:60205 -p 60206:60206 -p 60207:60207 -p 60208:60208 -p 60209:60209 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60207 --rest-port=60205 --tcp-port=60206 --discv5-udp-port=60208 --rest-address=0.0.0.0 --nat=extip:172.18.27.31 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0e802d1cbc9c3e2214f5cce97e2036bc28e67affcfdcdaffc5a0bada968afbed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60209 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.27.31 waku 5aab411242289df8100d399d1ef9dc88190361197f7316042862e12721a9e7f7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5aab41124228. Setting up logs at ./log/docker/publishing_node2_2024-09-11_09-51-56__2db35972-160a-4252-a5d5-904384d22d2c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 60205
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60205/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60205/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.27.31/tcp/60206/p2p/16Uiu2HAmPwPPHPvX1hkDoBds96NqfitgeBfBN2Z3y1xsTKqkWGGM","/ip4/172.18.27.31/tcp/60207/ws/p2p/16Uiu2HAmPwPPHPvX1hkDoBds96NqfitgeBfBN2Z3y1xsTKqkWGGM"],"enrUri":"enr:-LO4QNeLOapjCR8ovZc8FqLxwPYPky9rntit9Cd8JkEwXbXDeRLMEyUplwiDJeENCJrX4KLSLd82B2n_Jce9sGEGd8UBgmlkgnY0gmlwhKwSGx-KbXVsdGlhZGRyc4wACgSsEhsfBusv3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOno-TpMrcbs_xEke-A3gjobvOxOH-LuYbsuPcPJpuIToN0Y3CC6y6DdWRwguswhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60205/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.8.165/tcp/42772/p2p/16Uiu2HAm9bdxQqRkHsnAiMR7aMUwYDqjxQtfNqC2mRyYpLzjQbv8"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-09-11_09-51-56__2db35972-160a-4252-a5d5-904384d22d2c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.155.13
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['34926', '34927', '34928', '34929', '34930']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 34926:34926 -p 34927:34927 -p 34928:34928 -p 34929:34929 -p 34930:34930 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34928 --rest-port=34926 --tcp-port=34927 --discv5-udp-port=34929 --rest-address=0.0.0.0 --nat=extip:172.18.155.13 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c94efdcd0f6d5ecf7ea9b86b438b51c741eec6e1a7af0258dfebe6cffee74dad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34930 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QApNvmOKSq2Xyl3ggDiaWcCX3qCW4AvTD5EjFUnGO_k-Iyzx0PUd8pRqMc3mRb1dci7OSUak161-IZKJ8kmTRFsBgmlkgnY0gmlwhKwSCKWKbXVsdGlhZGRyc4wACgSsEgilBqcV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLSkSL_xuAS9qdVula-Ca19MmE3a7nCLCmho90I-E2c6YN0Y3CCpxSDdWRwgqcWhXdha3UyCw --storenode=/ip4/172.18.8.165/tcp/42772/p2p/16Uiu2HAm9bdxQqRkHsnAiMR7aMUwYDqjxQtfNqC2mRyYpLzjQbv8 --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.8.165/tcp/42772/p2p/16Uiu2HAm9bdxQqRkHsnAiMR7aMUwYDqjxQtfNqC2mRyYpLzjQbv8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.155.13 waku f4264112c5f1f048e1d1a29aed13f6b46041d2022d79d5ad904aa9c56af2ede1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f4264112c5f1. Setting up logs at ./log/docker/store_node1_2024-09-11_09-51-56__2db35972-160a-4252-a5d5-904384d22d2c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 34926
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34926/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34926/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.155.13/tcp/34927/p2p/16Uiu2HAkvQcmbbSaBvVtFVeHa21UrivoSQHA7mKQVmhFyBbBtq9v","/ip4/172.18.155.13/tcp/34928/ws/p2p/16Uiu2HAkvQcmbbSaBvVtFVeHa21UrivoSQHA7mKQVmhFyBbBtq9v"],"enrUri":"enr:-LO4QKWRsrNPnWfNpDUfObLzXIBrNfSU-zQvhhCbTd8My6ECNoWoPOGuuwgRhRkukqWVxxgoMAHTZpPtYD7wDsnqPZMBgmlkgnY0gmlwhKwSmw2KbXVsdGlhZGRyc4wACgSsEpsNBohw3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIOlnnq-50Wb3dq_hdGYKqQ6t5b9C-xSD4kEmZi4DAZHYN0Y3CCiG-DdWRwgohxhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34926/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.8.165/tcp/42772/p2p/16Uiu2HAm9bdxQqRkHsnAiMR7aMUwYDqjxQtfNqC2mRyYpLzjQbv8"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34926/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.27.31/tcp/60206/p2p/16Uiu2HAmPwPPHPvX1hkDoBds96NqfitgeBfBN2Z3y1xsTKqkWGGM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42771/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60205/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34926/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726048320797197312}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:217 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42771/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"tsF5BdH+EV0Y2km5vjw/kjuEU9Gqfk0n8XnCXPA9jqk="}]}'
[35mDEBUG   [0m src.steps.store:store.py:217 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34926/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"d48b234bd43ebbcba886","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"tsF5BdH+EV0Y2km5vjw/kjuEU9Gqfk0n8XnCXPA9jqk="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2b108b1e465e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5aab41124228
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f4264112c5f1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.