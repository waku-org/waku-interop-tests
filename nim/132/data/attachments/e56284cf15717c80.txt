[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_cant_publish_on_not_subscribed_shard with id: 2024-04-04_07-48-34__7b56eef6-78a8-4322-8068-92a0fdd217b3
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/node1_2024-04-04_07-48-34__7b56eef6-78a8-4322-8068-92a0fdd217b3__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.sharding:sharding.py:243 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.148.67
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['2584', '2585', '2586', '2587', '2588']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:297 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 2584:2584 -p 2585:2585 -p 2586:2586 -p 2587:2587 -p 2588:2588 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2586 --rest-port=2584 --tcp-port=2585 --discv5-udp-port=2587 --rest-address=0.0.0.0 --nat=extip:172.18.148.67 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2588 --metrics-logging=true --relay=true --filter=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68 --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.148.67 waku 397b94639961fd0628c1b75c807f0b1e89e5d941f3c2ab7a6b9be092c6826ce9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 397b94639961. Setting up logs at ./log/docker/node1_2024-04-04_07-48-34__7b56eef6-78a8-4322-8068-92a0fdd217b3__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 2584
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2584/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.148.67/tcp/2585/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.148.67/tcp/2586/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QDl6Lj4isMIZfdhdzvkIU2zq0ASiAOUhuWlmgQNIUQhxUzcFchJmEYblKpcqfy3CoQGzlWedZ6di1Ctq2AD55IoBgmlkgnY0gmlwhKwSlEOKbXVsdGlhZGRyc4wACgSsEpRDBgoa3QOCcnOFAAIBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCChmDdWRwggobhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/node2_2024-04-04_07-48-34__7b56eef6-78a8-4322-8068-92a0fdd217b3__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.sharding:sharding.py:243 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.208.114
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['28338', '28339', '28340', '28341', '28342']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:297 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 28338:28338 -p 28339:28339 -p 28340:28340 -p 28341:28341 -p 28342:28342 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28340 --rest-port=28338 --tcp-port=28339 --discv5-udp-port=28341 --rest-address=0.0.0.0 --nat=extip:172.18.208.114 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28342 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QDl6Lj4isMIZfdhdzvkIU2zq0ASiAOUhuWlmgQNIUQhxUzcFchJmEYblKpcqfy3CoQGzlWedZ6di1Ctq2AD55IoBgmlkgnY0gmlwhKwSlEOKbXVsdGlhZGRyc4wACgSsEpRDBgoa3QOCcnOFAAIBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCChmDdWRwggobhXdha3UyBQ --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.208.114 waku 2b1cfee6cd8a9214fc8718fa0acbc876c5225ee75e8111e48debf3e41e3fca48
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 2b1cfee6cd8a. Setting up logs at ./log/docker/node2_2024-04-04_07-48-34__7b56eef6-78a8-4322-8068-92a0fdd217b3__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 28338
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28338/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.208.114/tcp/28339/p2p/16Uiu2HAmLrA3WTixMmpMpt5W77o8etiLAu3JGVq577zRWUnjU4rC","/ip4/172.18.208.114/tcp/28340/ws/p2p/16Uiu2HAmLrA3WTixMmpMpt5W77o8etiLAu3JGVq577zRWUnjU4rC"],"enrUri":"enr:-LO4QLOB2R0Bl3IMpRGQqa3Gt9MUiHSEKHy2m7DmYgf7ignmFWFbzt2-mpXL1IHT7qvysEd33ScgP2_ITxZXhldu67QBgmlkgnY0gmlwhKwS0HKKbXVsdGlhZGRyc4wACgSsEtByBm603QOCcnOFAAIBAACJc2VjcDI1NmsxoQN5udg-o7BIIOz1DKc72J09clLoyKAKcekeQ1re76GJyYN0Y3CCbrODdWRwgm61hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28338/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.148.67/tcp/2585/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2584/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28338/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2584/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:2584/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/1'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id 397b94639961
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id 2b1cfee6cd8a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.