[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_stored_when_ephemeral_false with id: 2024-12-16_04-09-26__b81db735-5d64-4bae-be31-b4afa7bdca5b
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-16_04-09-26__b81db735-5d64-4bae-be31-b4afa7bdca5b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-16_04-09-26__b81db735-5d64-4bae-be31-b4afa7bdca5b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-16_04-09-26__b81db735-5d64-4bae-be31-b4afa7bdca5b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:414 Start 3 nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.151.137
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['52381', '52382', '52383', '52384', '52385']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 52381:52381 -p 52382:52382 -p 52383:52383 -p 52384:52384 -p 52385:52385 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52383 --rest-port=52381 --tcp-port=52382 --discv5-udp-port=52384 --rest-address=0.0.0.0 --nat=extip:172.18.151.137 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=24e76c6f96abdfe50e360c6d0ac4ddcbdbf3a0f2e28a5c497af7a1e1461d3b77 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52385 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.151.137 waku 6c7b05dfbf91e26577897192cde0704b4948fd84a8388e22b7205adbc880a759
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6c7b05dfbf91. Setting up logs at ./log/docker/node1_2024-12-16_04-09-26__b81db735-5d64-4bae-be31-b4afa7bdca5b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 52381
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 36113894aa7b. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52381/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52381/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.151.137/tcp/52382/p2p/16Uiu2HAm375dPgYeLXre73BwcjYUiPvN1hbSRKhxxKQkqD6tfQSX","/ip4/172.18.151.137/tcp/52383/ws/p2p/16Uiu2HAm375dPgYeLXre73BwcjYUiPvN1hbSRKhxxKQkqD6tfQSX"],"enrUri":"enr:-L24QMziGi8MdEzA6zIjZwMlS8lowUyMzkq_KAy5OREl-carYQTSAJqUyWF4OTRgqrNouu7MS1mFhHMLJ7gLFN3PmEkCgmlkgnY0gmlwhKwSl4mKbXVsdGlhZGRyc5YACASsEpeJBsyeAAoErBKXiQbMn90DgnJzhQADAQAAiXNlY3AyNTZrMaECchoy_pfo7aZ767tzEuxO4UITKm826XQfd9pKZoIcsESDdGNwgsyeg3VkcILMoIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.224.243
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['43936', '43937', '43938', '43939', '43940']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 43936:43936 -p 43937:43937 -p 43938:43938 -p 43939:43939 -p 43940:43940 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43938 --rest-port=43936 --tcp-port=43937 --discv5-udp-port=43939 --rest-address=0.0.0.0 --nat=extip:172.18.224.243 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2d00d4cbd78e7e0ca82afe1c14ecf5b557f9ff24c278a2195ad0b9c36d751a95 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43940 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QMziGi8MdEzA6zIjZwMlS8lowUyMzkq_KAy5OREl-carYQTSAJqUyWF4OTRgqrNouu7MS1mFhHMLJ7gLFN3PmEkCgmlkgnY0gmlwhKwSl4mKbXVsdGlhZGRyc5YACASsEpeJBsyeAAoErBKXiQbMn90DgnJzhQADAQAAiXNlY3AyNTZrMaECchoy_pfo7aZ767tzEuxO4UITKm826XQfd9pKZoIcsESDdGNwgsyeg3VkcILMoIV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.224.243 waku 0d479d6a2f4959961e566a839a5c4c46e81d2a2445cff07996449eae8b267fd6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0d479d6a2f49. Setting up logs at ./log/docker/node2_2024-12-16_04-09-26__b81db735-5d64-4bae-be31-b4afa7bdca5b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 43936
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43936/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43936/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.224.243/tcp/43937/p2p/16Uiu2HAmNyWCrDk7nLpodzEMNEZmcmYAVXqsoJ1jbm1jvYj5ADYv","/ip4/172.18.224.243/tcp/43938/ws/p2p/16Uiu2HAmNyWCrDk7nLpodzEMNEZmcmYAVXqsoJ1jbm1jvYj5ADYv"],"enrUri":"enr:-L24QLh7vBYftuYRfrDimT-M2usFXDL8z9J3ri91JQxnpHdCTdxe8Hb1drSb8a1TApFZ7h_bA19K5MLPPziIM1dw0kwCgmlkgnY0gmlwhKwS4POKbXVsdGlhZGRyc5YACASsEuDzBquhAAoErBLg8warot0DgnJzhQADAQAAiXNlY3AyNTZrMaEDmVMUlGfm95b8-ootXGFfMa2noQocB9HJ1mtlLHUYqRODdGNwgquhg3VkcIKro4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.126.119
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['42448', '42449', '42450', '42451', '42452']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 42448:42448 -p 42449:42449 -p 42450:42450 -p 42451:42451 -p 42452:42452 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42450 --rest-port=42448 --tcp-port=42449 --discv5-udp-port=42451 --rest-address=0.0.0.0 --nat=extip:172.18.126.119 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a61340cf10e1d97e5394818bcdbf166dfbc2b6a282af2e97baae52eba9c22a9c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42452 --metrics-logging=true --relay=false --storenode=/ip4/172.18.224.243/tcp/43937/p2p/16Uiu2HAmNyWCrDk7nLpodzEMNEZmcmYAVXqsoJ1jbm1jvYj5ADYv --discv5-bootstrap-node=enr:-L24QLh7vBYftuYRfrDimT-M2usFXDL8z9J3ri91JQxnpHdCTdxe8Hb1drSb8a1TApFZ7h_bA19K5MLPPziIM1dw0kwCgmlkgnY0gmlwhKwS4POKbXVsdGlhZGRyc5YACASsEuDzBquhAAoErBLg8warot0DgnJzhQADAQAAiXNlY3AyNTZrMaEDmVMUlGfm95b8-ootXGFfMa2noQocB9HJ1mtlLHUYqRODdGNwgquhg3VkcIKro4V3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.126.119 waku 651b5f533a20e62007d28f0f90dbf3728a05586e9c45cd117ebf683217824e21
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 651b5f533a20. Setting up logs at ./log/docker/node3_2024-12-16_04-09-26__b81db735-5d64-4bae-be31-b4afa7bdca5b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 42448
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42448/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42448/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.126.119/tcp/42449/p2p/16Uiu2HAmT7ULjoNdzDmX6NcNTBskVpbCNDZ9EXArwPFTNWVcCnCv","/ip4/172.18.126.119/tcp/42450/ws/p2p/16Uiu2HAmT7ULjoNdzDmX6NcNTBskVpbCNDZ9EXArwPFTNWVcCnCv"],"enrUri":"enr:-L24QE_QmBBwYEwLulsUhfStb2SWc7hh3La5y7JiMosKi6hRb3XUjT7kbCVSSEyzc1PUdCyVrr56A49Qt09L2kt4SrsCgmlkgnY0gmlwhKwSfneKbXVsdGlhZGRyc5YACASsEn53BqXRAAoErBJ-dwal0t0DgnJzhQADAQAAiXNlY3AyNTZrMaED1sxd8S_WwK5hAzBGsL4lbaDdzf--QZS4WTv65fVDKC-DdGNwgqXRg3VkcIKl04V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:419 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52381/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43936/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52381/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.224.243/tcp/43937/p2p/16Uiu2HAmNyWCrDk7nLpodzEMNEZmcmYAVXqsoJ1jbm1jvYj5ADYv","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43936/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.151.137/tcp/52382/p2p/16Uiu2HAm375dPgYeLXre73BwcjYUiPvN1hbSRKhxxKQkqD6tfQSX","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:424 Node1 publish message with ephemeral = false
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52381/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:428 Check if message is stored 
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42448/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"be28c2e910648ec1e6d4","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"TDYxeElBeZsq6m0RrKitP0O5aGS5nz5j9iwNFm8lqps="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 6c7b05dfbf91
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0d479d6a2f49
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6c7b05dfbf91. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 651b5f533a20
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0d479d6a2f49. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.