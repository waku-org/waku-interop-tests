[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_relay_no_subscription with id: 2024-12-16_04-15-11__577d3d29-c15c-43d1-b631-ae408ac646ae
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.relay:relay.py:34 Running fixture setup: setup_main_relay_nodes
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-16_04-15-11__577d3d29-c15c-43d1-b631-ae408ac646ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.232.186
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['51372', '51373', '51374', '51375', '51376']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 51372:51372 -p 51373:51373 -p 51374:51374 -p 51375:51375 -p 51376:51376 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51374 --rest-port=51372 --tcp-port=51373 --discv5-udp-port=51375 --rest-address=0.0.0.0 --nat=extip:172.18.232.186 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=05b6dec1fcbeefabe4ff2b48cadd40ecbeb6a2fc7bf75cd1500ce4b62ce1ee9a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51376 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.232.186 waku 2659ca05c17c3fc35e1875d5ad404695b3abc55dbccb871ab010f17cb23b895c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2659ca05c17c. Setting up logs at ./log/docker/node1_2024-12-16_04-15-11__577d3d29-c15c-43d1-b631-ae408ac646ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 51372
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container dab6dcfe2042. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51372/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51372/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.232.186/tcp/51373/p2p/16Uiu2HAmCq9BiBqmNRCYvudn2y5g948ptDUDb33BtB7uppnHToFi","/ip4/172.18.232.186/tcp/51374/ws/p2p/16Uiu2HAmCq9BiBqmNRCYvudn2y5g948ptDUDb33BtB7uppnHToFi"],"enrUri":"enr:-L24QOzExNrHCaWcE4hmTOBCNDwFplR7c-hVTOkU6um-SCq5OoFDiGUGiQnujbQDsks-A5wNe_qJSubdkw0tL4uHDIwCgmlkgnY0gmlwhKwS6LqKbXVsdGlhZGRyc5YACASsEui6BsitAAoErBLougbIrt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDApnMNPC0aFEv9pifP8BQbE282h7vBwMmbZEeY9jdqT2DdGNwgsitg3VkcILIr4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-16_04-15-11__577d3d29-c15c-43d1-b631-ae408ac646ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.187.232
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['16131', '16132', '16133', '16134', '16135']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 16131:16131 -p 16132:16132 -p 16133:16133 -p 16134:16134 -p 16135:16135 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16133 --rest-port=16131 --tcp-port=16132 --discv5-udp-port=16134 --rest-address=0.0.0.0 --nat=extip:172.18.187.232 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1187f98a477cafcfd04ccfae31dcc5daddb9b6378dafa7eb58fa11bf0dd3fa0c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16135 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QOzExNrHCaWcE4hmTOBCNDwFplR7c-hVTOkU6um-SCq5OoFDiGUGiQnujbQDsks-A5wNe_qJSubdkw0tL4uHDIwCgmlkgnY0gmlwhKwS6LqKbXVsdGlhZGRyc5YACASsEui6BsitAAoErBLougbIrt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDApnMNPC0aFEv9pifP8BQbE282h7vBwMmbZEeY9jdqT2DdGNwgsitg3VkcILIr4V3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.187.232 waku e4e6e12af06d9f28084948987f50d08530943bf24b85cb0b1900019745f90cb4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e4e6e12af06d. Setting up logs at ./log/docker/node2_2024-12-16_04-15-11__577d3d29-c15c-43d1-b631-ae408ac646ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 16131
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16131/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16131/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.187.232/tcp/16132/p2p/16Uiu2HAmQsFQrBSbMi9PzapKid9fEGibY8pWZsoxxTrjetzx4yeb","/ip4/172.18.187.232/tcp/16133/ws/p2p/16Uiu2HAmQsFQrBSbMi9PzapKid9fEGibY8pWZsoxxTrjetzx4yeb"],"enrUri":"enr:-L24QCtIAw9qxGZgr6ttfsRpfBvwbrEyyE7O95wMHjM-ojzTMKJzmvP5cfql4-yqUi9zpfrWAikzFIRedlmSHmH7B40CgmlkgnY0gmlwhKwSu-iKbXVsdGlhZGRyc5YACASsErvoBj8EAAoErBK76AY_Bd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDtXA-JXRknGUOsMgahs6UgluYShPtP-dkjdYmfktC7SyDdGNwgj8Eg3VkcII_BoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16131/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.232.186/tcp/51373/p2p/16Uiu2HAmCq9BiBqmNRCYvudn2y5g948ptDUDb33BtB7uppnHToFi"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:51372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/3/1'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2659ca05c17c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e4e6e12af06d
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2659ca05c17c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.