[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_payloads with id: 2024-11-08_04-10-11__9726a57e-8d98-4f1f-81a9-d0aa2ddbfa5f
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-08_04-10-11__9726a57e-8d98-4f1f-81a9-d0aa2ddbfa5f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.94.169
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['40726', '40727', '40728', '40729', '40730']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 40726:40726 -p 40727:40727 -p 40728:40728 -p 40729:40729 -p 40730:40730 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40728 --rest-port=40726 --tcp-port=40727 --discv5-udp-port=40729 --rest-address=0.0.0.0 --nat=extip:172.18.94.169 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5ceaa07dd2bcd03460f835699aed8c6e82a4ceab7c675c71acbfbcfef7d393b5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40730 --metrics-logging=true --lightpush=true --relay=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f05b287f5570. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.94.169 waku b9c725562ae91bc13440345bc41043fc582e88e8bce421d35d8bd0fe8ad3e112
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b9c725562ae9. Setting up logs at ./log/docker/receiving_node1_2024-11-08_04-10-11__9726a57e-8d98-4f1f-81a9-d0aa2ddbfa5f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 40726
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40726/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40726/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.94.169/tcp/40727/p2p/16Uiu2HAmFMcqAzWR9ut7AWRwFgepLRwqUdetAezrAw7izqUtiruK","/ip4/172.18.94.169/tcp/40728/ws/p2p/16Uiu2HAmFMcqAzWR9ut7AWRwFgepLRwqUdetAezrAw7izqUtiruK"],"enrUri":"enr:-L24QJwbFjC50YRjhc-aib_pFug5ZNeKsGtamJ-qSZoDjPSfegAGpi73j_XQR4_tl_swOITBd6HrCndoTao3T1u3-HkCgmlkgnY0gmlwhKwSXqmKbXVsdGlhZGRyc5YACASsEl6pBp8XAAoErBJeqQafGN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDKB_a6YHSU-KBRzJb6e9GBrr5YTuuWX28-kilD3Or-baDdGNwgp8Xg3VkcIKfGYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-08_04-10-11__9726a57e-8d98-4f1f-81a9-d0aa2ddbfa5f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.222.141
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5297', '5298', '5299', '5300', '5301']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5297:5297 -p 5298:5298 -p 5299:5299 -p 5300:5300 -p 5301:5301 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5299 --rest-port=5297 --tcp-port=5298 --discv5-udp-port=5300 --rest-address=0.0.0.0 --nat=extip:172.18.222.141 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f7faeae6bbc6f5b73594aacdbeff2847dbecef28eef96e1d1fab4eb6c76faab7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5301 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.222.141 waku 05df4e345e295a12ff0b8627f21da23c757b63045757844f7e45d0fd3611566d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 05df4e345e29. Setting up logs at ./log/docker/receiving_node2_2024-11-08_04-10-11__9726a57e-8d98-4f1f-81a9-d0aa2ddbfa5f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 5297
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5297/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5297/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.222.141/tcp/5298/p2p/16Uiu2HAmMq6B9S6g7528ZXX7WmHBF873XfCgUvbFHKqSjpxxn1kv","/ip4/172.18.222.141/tcp/5299/ws/p2p/16Uiu2HAmMq6B9S6g7528ZXX7WmHBF873XfCgUvbFHKqSjpxxn1kv"],"enrUri":"enr:-L24QGNtogSdWKen6yb2NAn9cyuIIyTTKEQLwfVziOj5NVeMKtBTNGYZ1Mcev00wdwK2xq3wqc9Jr8RieTBPQVcjx2sCgmlkgnY0gmlwhKwS3o2KbXVsdGlhZGRyc5YACASsEt6NBhSyAAoErBLejQYUs90DgnJzhQADAQAAiXNlY3AyNTZrMaEDiE-Tr7WdAhOESPUbWQaEcDmA0yYXSj7VeNJBZsoLNouDdGNwghSyg3VkcIIUtIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5297/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.94.169/tcp/40727/p2p/16Uiu2HAmFMcqAzWR9ut7AWRwFgepLRwqUdetAezrAw7izqUtiruK"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-08_04-10-11__9726a57e-8d98-4f1f-81a9-d0aa2ddbfa5f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.48.40
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['3025', '3026', '3027', '3028', '3029']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 3025:3025 -p 3026:3026 -p 3027:3027 -p 3028:3028 -p 3029:3029 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3027 --rest-port=3025 --tcp-port=3026 --discv5-udp-port=3028 --rest-address=0.0.0.0 --nat=extip:172.18.48.40 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=43b4abb95c4cd99eca333640dbeadcb9dec4bb8eccd12fc8dfe6b6dad113aee0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3029 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJwbFjC50YRjhc-aib_pFug5ZNeKsGtamJ-qSZoDjPSfegAGpi73j_XQR4_tl_swOITBd6HrCndoTao3T1u3-HkCgmlkgnY0gmlwhKwSXqmKbXVsdGlhZGRyc5YACASsEl6pBp8XAAoErBJeqQafGN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDKB_a6YHSU-KBRzJb6e9GBrr5YTuuWX28-kilD3Or-baDdGNwgp8Xg3VkcIKfGYV3YWt1Mgk --lightpushnode=/ip4/172.18.94.169/tcp/40727/p2p/16Uiu2HAmFMcqAzWR9ut7AWRwFgepLRwqUdetAezrAw7izqUtiruK --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.48.40 waku 642e9d6e48e5647e40784cbe5e38a42ffd21598fdc164ddcb56ab0a4b9f536e5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 642e9d6e48e5. Setting up logs at ./log/docker/lightpush_node1_2024-11-08_04-10-11__9726a57e-8d98-4f1f-81a9-d0aa2ddbfa5f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 3025
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3025/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3025/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.48.40/tcp/3026/p2p/16Uiu2HAmKNM5w3FeMZ74TT3ruUY7ZoSpkYMjs1ujSm1mavh1BkbD","/ip4/172.18.48.40/tcp/3027/ws/p2p/16Uiu2HAmKNM5w3FeMZ74TT3ruUY7ZoSpkYMjs1ujSm1mavh1BkbD"],"enrUri":"enr:-L24QFWJoor4HyEXvUUxSHwNnPFeaQLviYg9_1gpamb8FvXmPuFmft0IWI8q7FkhiwE799fIyuhIRRrggxTu734jEnECgmlkgnY0gmlwhKwSMCiKbXVsdGlhZGRyc5YACASsEjAoBgvSAAoErBIwKAYL090DgnJzhQADAQAAiXNlY3AyNTZrMaEDY75hT0ct6kl6w_RaaeL_IC3U_FFUNXrZlm4m_OxHLRyDdGNwggvSg3VkcIIL1IV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3025/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.94.169/tcp/40727/p2p/16Uiu2HAmFMcqAzWR9ut7AWRwFgepLRwqUdetAezrAw7izqUtiruK"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3025/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.222.141/tcp/5298/p2p/16Uiu2HAmMq6B9S6g7528ZXX7WmHBF873XfCgUvbFHKqSjpxxn1kv"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40726/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5297/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload Empty string
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3025/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1731039017343465472}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3025/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload Unecoded text
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3025/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "Hello World!", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1731039017348245248}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3025/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A dictionary
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3025/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": {"key": "YWFh"}, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1731039017353111808}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3025/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload An integer
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3025/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": 1234567890, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1731039017357306368}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3025/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A list
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3025/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": ["YWFh"], "contentTopic": "/myapp/1/latest/proto", "timestamp": 1731039017360808960}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3025/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A bool
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3025/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": true, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1731039017369170432}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3025/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b9c725562ae9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 05df4e345e29
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b9c725562ae9. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 642e9d6e48e5
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 05df4e345e29. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.