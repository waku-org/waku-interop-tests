[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_ping_on_unsubscribed_peer with id: 2024-09-29_04-15-31__56f06db8-632e-4ff8-b19e-2d767a122c6d
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-29_04-15-31__56f06db8-632e-4ff8-b19e-2d767a122c6d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.202.149
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['56171', '56172', '56173', '56174', '56175']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 56171:56171 -p 56172:56172 -p 56173:56173 -p 56174:56174 -p 56175:56175 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56173 --rest-port=56171 --tcp-port=56172 --discv5-udp-port=56174 --rest-address=0.0.0.0 --nat=extip:172.18.202.149 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=05be786fafcaac0baa817e4e5bccb91fec7f56ef3588f7fda1b6c636efb95a33 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56175 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.202.149 waku 523f8a4c9872ec228214b4069a5b3cbb81834cc0ca46e0d4b747783d119d2dcc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 523f8a4c9872. Setting up logs at ./log/docker/node1_2024-09-29_04-15-31__56f06db8-632e-4ff8-b19e-2d767a122c6d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 56171
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56171/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56171/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.202.149/tcp/56172/p2p/16Uiu2HAkwcpBRhCrpYQLLJm6SQ1x7PpGSgf38mxLQvKC6PTMYaJc","/ip4/172.18.202.149/tcp/56173/ws/p2p/16Uiu2HAkwcpBRhCrpYQLLJm6SQ1x7PpGSgf38mxLQvKC6PTMYaJc"],"enrUri":"enr:-LO4QKq9jO3zDbDoDWRHjeLjutNCrnTowBdHwd-jo7XTDxESRgo-PNRs7RjqG9FN_gdxpeE5kCKulZd0EfCo1MHWjDUBgmlkgnY0gmlwhKwSypWKbXVsdGlhZGRyc4wACgSsEsqVBttt3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIgkgkAqDNgyHh9kgmqj6tXCo9VZJa8rsTL-nUSS3aw-YN0Y3CC22yDdWRwgttuhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-29_04-15-31__56f06db8-632e-4ff8-b19e-2d767a122c6d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.251.0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['38710', '38711', '38712', '38713', '38714']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 38710:38710 -p 38711:38711 -p 38712:38712 -p 38713:38713 -p 38714:38714 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38712 --rest-port=38710 --tcp-port=38711 --discv5-udp-port=38713 --rest-address=0.0.0.0 --nat=extip:172.18.251.0 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=64bb3bebf65894afeadbd3d8dfea7cfd9cea14d991fa9ae865a259133dbda721 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38714 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QKq9jO3zDbDoDWRHjeLjutNCrnTowBdHwd-jo7XTDxESRgo-PNRs7RjqG9FN_gdxpeE5kCKulZd0EfCo1MHWjDUBgmlkgnY0gmlwhKwSypWKbXVsdGlhZGRyc4wACgSsEsqVBttt3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIgkgkAqDNgyHh9kgmqj6tXCo9VZJa8rsTL-nUSS3aw-YN0Y3CC22yDdWRwgttuhXdha3UyBQ --filternode=/ip4/172.18.202.149/tcp/56172/p2p/16Uiu2HAkwcpBRhCrpYQLLJm6SQ1x7PpGSgf38mxLQvKC6PTMYaJc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.251.0 waku ec452e61fa16461d2c36e22ffa66fb4e23d858fcec0eb24cbc234f881da9570e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ec452e61fa16. Setting up logs at ./log/docker/node2_2024-09-29_04-15-31__56f06db8-632e-4ff8-b19e-2d767a122c6d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 38710
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38710/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38710/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.251.0/tcp/38711/p2p/16Uiu2HAmLYiBBUSRWCQrEjQc8TSh3tUW89NocdCXBopWq61sePPJ","/ip4/172.18.251.0/tcp/38712/ws/p2p/16Uiu2HAmLYiBBUSRWCQrEjQc8TSh3tUW89NocdCXBopWq61sePPJ"],"enrUri":"enr:-LO4QA5Y5TbxPyyFaSHB3mBq17Sx-OJnrz6qbXPajc7P7ZZoSzQXRXSoCOIQiR8umEy9JvEZUtV0O-ZahB3A1XLuGEoBgmlkgnY0gmlwhKwS-wCKbXVsdGlhZGRyc4wACgSsEvsABpc43QOCcnOFAAMBAACJc2VjcDI1NmsxoQN1QbjkYVsnrTYsn5m6aZ66UuWVBcbzVznvsZm-Hj-9TYN0Y3CClzeDdWRwgpc5hXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38710/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.202.149/tcp/56172/p2p/16Uiu2HAkwcpBRhCrpYQLLJm6SQ1x7PpGSgf38mxLQvKC6PTMYaJc"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56171/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38710/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "bad65af9-5743-4396-8398-24a863ec2714", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"bad65af9-5743-4396-8398-24a863ec2714","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38710/filter/v2/subscriptions/903dba59-185d-46e9-97d1-2d1211cb9201" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"903dba59-185d-46e9-97d1-2d1211cb9201","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:38710/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"12345","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38710/filter/v2/subscriptions/34a28e6e-83cd-4132-a475-15de5f69265a" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:38710/filter/v2/subscriptions/34a28e6e-83cd-4132-a475-15de5f69265a. Response content: b'{"requestId":"34a28e6e-83cd-4132-a475-15de5f69265a","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 523f8a4c9872
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ec452e61fa16
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.