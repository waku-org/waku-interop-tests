[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_content_topics with id: 2024-09-29_04-18-24__1684fc03-35f6-42c5-918d-31f13b69b7ed
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-29_04-18-24__1684fc03-35f6-42c5-918d-31f13b69b7ed__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.30.70
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['27363', '27364', '27365', '27366', '27367']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 27363:27363 -p 27364:27364 -p 27365:27365 -p 27366:27366 -p 27367:27367 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27365 --rest-port=27363 --tcp-port=27364 --discv5-udp-port=27366 --rest-address=0.0.0.0 --nat=extip:172.18.30.70 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5c74c9b0659b6fc33d06a5bfbf0ed5eacd29b0a71b46f53eb7d432ec2d68a86b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27367 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.30.70 waku 2d5cd4847cf8cdc84aef9f54e9d139175704b4ce5b7ebc1adce913309dc7dab8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2d5cd4847cf8. Setting up logs at ./log/docker/receiving_node1_2024-09-29_04-18-24__1684fc03-35f6-42c5-918d-31f13b69b7ed__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 27363
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27363/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27363/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.30.70/tcp/27364/p2p/16Uiu2HAm1wQuhSMQhfZWp5pxujoViX1WGfhhAWBi2QywVjeN9NYL","/ip4/172.18.30.70/tcp/27365/ws/p2p/16Uiu2HAm1wQuhSMQhfZWp5pxujoViX1WGfhhAWBi2QywVjeN9NYL"],"enrUri":"enr:-LO4QKb6Y37SIiTiPNcC1TzyqZxQbU90ZLkL1UWDHplwGu5_dcLe3x0rkO5Or6E4LrTYp7kZVSSNMdjr3etAj1BenyUBgmlkgnY0gmlwhKwSHkaKbXVsdGlhZGRyc4wACgSsEh5GBmrl3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJgxIFkLLSdeiAHcpCU727Ux5td3gJkBVm9jNqtkMflPYN0Y3CCauSDdWRwgmrmhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-29_04-18-24__1684fc03-35f6-42c5-918d-31f13b69b7ed__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.158.87
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['52251', '52252', '52253', '52254', '52255']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 52251:52251 -p 52252:52252 -p 52253:52253 -p 52254:52254 -p 52255:52255 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52253 --rest-port=52251 --tcp-port=52252 --discv5-udp-port=52254 --rest-address=0.0.0.0 --nat=extip:172.18.158.87 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7a76ceb75cbc8299e98fdb9d3aab8471f620e7cce3cfe0e08ba0fcfab193d7a3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52255 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.158.87 waku d711376f672e0f4d2a0555067b78f7dcb3de672e4cf93514fafc2052cff2b141
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d711376f672e. Setting up logs at ./log/docker/receiving_node2_2024-09-29_04-18-24__1684fc03-35f6-42c5-918d-31f13b69b7ed__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 52251
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52251/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52251/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.158.87/tcp/52252/p2p/16Uiu2HAmBk4bPt2M4YBZzQcrGCDCDxE1sx7Hvk7RgVaUv9uThJNL","/ip4/172.18.158.87/tcp/52253/ws/p2p/16Uiu2HAmBk4bPt2M4YBZzQcrGCDCDxE1sx7Hvk7RgVaUv9uThJNL"],"enrUri":"enr:-LO4QE329LEFrlx8vex-K7LVzf6u3goT9yaTWtaNPDD9dES-A_NdlMf6VgN9N8muMac-wnjx0o8sV_7vo3jNCYPbqiMBgmlkgnY0gmlwhKwSnleKbXVsdGlhZGRyc4wACgSsEp5XBswd3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLycQPRmfJAsGDfiFie6M1Je0HWXDQ7AYNKC7pjttEuGYN0Y3CCzByDdWRwgswehXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52251/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.30.70/tcp/27364/p2p/16Uiu2HAm1wQuhSMQhfZWp5pxujoViX1WGfhhAWBi2QywVjeN9NYL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-29_04-18-24__1684fc03-35f6-42c5-918d-31f13b69b7ed__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.170.80
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['23878', '23879', '23880', '23881', '23882']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 23878:23878 -p 23879:23879 -p 23880:23880 -p 23881:23881 -p 23882:23882 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23880 --rest-port=23878 --tcp-port=23879 --discv5-udp-port=23881 --rest-address=0.0.0.0 --nat=extip:172.18.170.80 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7021aadb2bb9b8b2363dc1633ee1e8e855ff4e80364fdebcf6d4a9931ea8fbbd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23882 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QKb6Y37SIiTiPNcC1TzyqZxQbU90ZLkL1UWDHplwGu5_dcLe3x0rkO5Or6E4LrTYp7kZVSSNMdjr3etAj1BenyUBgmlkgnY0gmlwhKwSHkaKbXVsdGlhZGRyc4wACgSsEh5GBmrl3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJgxIFkLLSdeiAHcpCU727Ux5td3gJkBVm9jNqtkMflPYN0Y3CCauSDdWRwgmrmhXdha3UyCQ --lightpushnode=/ip4/172.18.30.70/tcp/27364/p2p/16Uiu2HAm1wQuhSMQhfZWp5pxujoViX1WGfhhAWBi2QywVjeN9NYL --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.170.80 waku 2107432ccd9fcec90fb1dcf8f1449f95d73f5a70fa88a8f72e8661af2903cd6e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2107432ccd9f. Setting up logs at ./log/docker/lightpush_node1_2024-09-29_04-18-24__1684fc03-35f6-42c5-918d-31f13b69b7ed__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 23878
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23878/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23878/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.170.80/tcp/23879/p2p/16Uiu2HAkyNKvLcqhSW12mWmpuRBeFNkeojRCfbaky9bXgdVmD29c","/ip4/172.18.170.80/tcp/23880/ws/p2p/16Uiu2HAkyNKvLcqhSW12mWmpuRBeFNkeojRCfbaky9bXgdVmD29c"],"enrUri":"enr:-LO4QPEu44PMu0UL6WSpmQ1PXRLxGS5nD3neQ4yIOVuCW3gdaRIrxp4AiVvQJgIBj7UoQNn_OvqJTHp05Vjw6NsRscYBgmlkgnY0gmlwhKwSqlCKbXVsdGlhZGRyc4wACgSsEqpQBl1I3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI6k1Lomrvw-izEEJ7K2PyaS8B8iI7YhL9O5lTUdL-Bt4N0Y3CCXUeDdWRwgl1JhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23878/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.30.70/tcp/27364/p2p/16Uiu2HAm1wQuhSMQhfZWp5pxujoViX1WGfhhAWBi2QywVjeN9NYL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23878/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.158.87/tcp/52252/p2p/16Uiu2HAmBk4bPt2M4YBZzQcrGCDCDxE1sx7Hvk7RgVaUv9uThJNL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27363/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52251/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic Empty string
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23878/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "", "timestamp": 1727583509240434176}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:23878/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A dictionary
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23878/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": {"key": "YWFh"}, "timestamp": 1727583509247322112}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:23878/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic An integer
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23878/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": 1234567890, "timestamp": 1727583509251930368}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:23878/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A list
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23878/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": ["YWFh"], "timestamp": 1727583509258111744}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:23878/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A bool
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23878/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": true, "timestamp": 1727583509268855040}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:23878/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2d5cd4847cf8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d711376f672e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2107432ccd9f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.