[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-09-29_04-13-32__29052964-ad76-470f-85d6-7d304de0720b
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-29_04-13-32__29052964-ad76-470f-85d6-7d304de0720b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-29_04-13-32__29052964-ad76-470f-85d6-7d304de0720b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-09-29_04-13-32__29052964-ad76-470f-85d6-7d304de0720b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.210.5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['49442', '49443', '49444', '49445', '49446']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 49442:49442 -p 49443:49443 -p 49444:49444 -p 49445:49445 -p 49446:49446 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49444 --rest-port=49442 --tcp-port=49443 --discv5-udp-port=49445 --rest-address=0.0.0.0 --nat=extip:172.18.210.5 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a2c7487484eb2caeb26abcec2dafcade277b4cb3efbafe08feb62e7eea48b1e6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49446 --metrics-logging=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.210.5 waku b6b41180c5a7270f7947595c1024c850543f147347604df42e5b6641bdf87d56
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b6b41180c5a7. Setting up logs at ./log/docker/node1_2024-09-29_04-13-32__29052964-ad76-470f-85d6-7d304de0720b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 49442
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49442/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49442/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.210.5/tcp/49443/p2p/16Uiu2HAmDhdurhdPJtNj3YTLiwFMga1AnsNYaiwp893rHrm8CQuz","/ip4/172.18.210.5/tcp/49444/ws/p2p/16Uiu2HAmDhdurhdPJtNj3YTLiwFMga1AnsNYaiwp893rHrm8CQuz"],"enrUri":"enr:-LO4QK-badya8y9MUBJHOYfgHV4cMqEuXu2yx8EmW-7wxvZHUhNj5yDjIbA8Zql2jy5ueSCfq1BsLgKzlwxi9KZOs_QBgmlkgnY0gmlwhKwS0gWKbXVsdGlhZGRyc4wACgSsEtIFBsEk3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMPiVHJuzhQCCUS56AwRD3wD7GixRkUccEHt_bROyRUJYN0Y3CCwSODdWRwgsElhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.234.217
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['62944', '62945', '62946', '62947', '62948']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 62944:62944 -p 62945:62945 -p 62946:62946 -p 62947:62947 -p 62948:62948 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62946 --rest-port=62944 --tcp-port=62945 --discv5-udp-port=62947 --rest-address=0.0.0.0 --nat=extip:172.18.234.217 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8841dfcbbe6cda207587a2ba3e4c40bdf8d7b699c0dfaba97dfdaccbaa16fbf0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62948 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-LO4QK-badya8y9MUBJHOYfgHV4cMqEuXu2yx8EmW-7wxvZHUhNj5yDjIbA8Zql2jy5ueSCfq1BsLgKzlwxi9KZOs_QBgmlkgnY0gmlwhKwS0gWKbXVsdGlhZGRyc4wACgSsEtIFBsEk3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMPiVHJuzhQCCUS56AwRD3wD7GixRkUccEHt_bROyRUJYN0Y3CCwSODdWRwgsElhXdha3UyCQ --lightpushnode=/ip4/172.18.210.5/tcp/49443/p2p/16Uiu2HAmDhdurhdPJtNj3YTLiwFMga1AnsNYaiwp893rHrm8CQuz
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.234.217 waku c8801d17f87f6afaab4bb3f79409255b8691cc1aa3ea081045ef45e89391c2dd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c8801d17f87f. Setting up logs at ./log/docker/node2_2024-09-29_04-13-32__29052964-ad76-470f-85d6-7d304de0720b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 62944
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62944/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62944/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.234.217/tcp/62945/p2p/16Uiu2HAmMZnYoaSTvvEXn5okXdKUSWNi5YwEoRVHgPZ1U7isaJSA","/ip4/172.18.234.217/tcp/62946/ws/p2p/16Uiu2HAmMZnYoaSTvvEXn5okXdKUSWNi5YwEoRVHgPZ1U7isaJSA"],"enrUri":"enr:-LO4QJcXlca8HmpLIXWvrU6BlmkptQCvZHzClzsvv-AnsvSzTCaly8C94kcMelcPrk2ay0UuOgsF7Dv7uvFMgLxGxXkBgmlkgnY0gmlwhKwS6tmKbXVsdGlhZGRyc4wACgSsEurZBvXi3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOEY-8vGMODBEZ6XN_Zbx3rOStA9uzsQt5Kf93osEZY_4N0Y3CC9eGDdWRwgvXjhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.33.155
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['49872', '49873', '49874', '49875', '49876']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 49872:49872 -p 49873:49873 -p 49874:49874 -p 49875:49875 -p 49876:49876 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49874 --rest-port=49872 --tcp-port=49873 --discv5-udp-port=49875 --rest-address=0.0.0.0 --nat=extip:172.18.33.155 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b8f41e6dbaa31357f0b3a71228d61109db21c8367facb6cbff6d8faf20adf12a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49876 --metrics-logging=true --relay=false --storenode=/ip4/172.18.234.217/tcp/62945/p2p/16Uiu2HAmMZnYoaSTvvEXn5okXdKUSWNi5YwEoRVHgPZ1U7isaJSA --discv5-bootstrap-node=enr:-LO4QJcXlca8HmpLIXWvrU6BlmkptQCvZHzClzsvv-AnsvSzTCaly8C94kcMelcPrk2ay0UuOgsF7Dv7uvFMgLxGxXkBgmlkgnY0gmlwhKwS6tmKbXVsdGlhZGRyc4wACgSsEurZBvXi3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOEY-8vGMODBEZ6XN_Zbx3rOStA9uzsQt5Kf93osEZY_4N0Y3CC9eGDdWRwgvXjhXdha3UyCw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.33.155 waku a85315920311cd81ef5d89bdd09ca0b3cf13e117b7869beb37fd79fb959f2c94
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a85315920311. Setting up logs at ./log/docker/node3_2024-09-29_04-13-32__29052964-ad76-470f-85d6-7d304de0720b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 49872
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49872/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49872/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.33.155/tcp/49873/p2p/16Uiu2HAm4kZYLqjERnnsQnZFhsodr4V2PpRSaweuCwmKLETwhKqR","/ip4/172.18.33.155/tcp/49874/ws/p2p/16Uiu2HAm4kZYLqjERnnsQnZFhsodr4V2PpRSaweuCwmKLETwhKqR"],"enrUri":"enr:-LO4QKN7hXfdh9McGHBRYMUJGsv0TG8px7g2ZMERsvGl9B5XD52lTZeF_EaHBMjlArJDfDhyHP1bxmK8nhDCIurpS2kBgmlkgnY0gmlwhKwSIZuKbXVsdGlhZGRyc4wACgSsEiGbBsLS3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKKj-_06JZrsS4mjjqVrZv7kyjM3NLYmH2dJXhVHYSUIIN0Y3CCwtGDdWRwgsLThXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49442/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62944/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49442/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.234.217/tcp/62945/p2p/16Uiu2HAmMZnYoaSTvvEXn5okXdKUSWNi5YwEoRVHgPZ1U7isaJSA","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62944/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.210.5/tcp/49443/p2p/16Uiu2HAmDhdurhdPJtNj3YTLiwFMga1AnsNYaiwp893rHrm8CQuz","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49442/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1727583247042290176}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49872/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"95fb8e9ae4255bc82390","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"JGbRUZ6taueNCGbRJ0hfoNfPW8y+MgETS4F1KNPTEKE="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b6b41180c5a7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c8801d17f87f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a85315920311
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.