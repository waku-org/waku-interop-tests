[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publishing_node_restarts with id: 2025-01-21_04-12-51__20361849-5b6d-4a2b-aebc-c77d0c09dbc9
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-21_04-12-51__20361849-5b6d-4a2b-aebc-c77d0c09dbc9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.12.205
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['13994', '13995', '13996', '13997', '13998']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 13994:13994 -p 13995:13995 -p 13996:13996 -p 13997:13997 -p 13998:13998 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13996 --rest-port=13994 --tcp-port=13995 --discv5-udp-port=13997 --rest-address=0.0.0.0 --nat=extip:172.18.12.205 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6feff3f8ce8dfec5fefec1fb220ed9c1e8e97ecadc4dff4c82b0e3fc89ceb56b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13998 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.12.205 waku a583c7faeb9b0c88dda1278720b97a2a47cc9e32f3dc0a9c77cd38a482ee4226
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a583c7faeb9b. Setting up logs at ./log/docker/publishing_node1_2025-01-21_04-12-51__20361849-5b6d-4a2b-aebc-c77d0c09dbc9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 13994
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5fc59779efbc. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13994/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13994/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.12.205/tcp/13995/p2p/16Uiu2HAmFnuzmu5QAjNorJK9tw26tQuonEnQvWePJp6W6p624X1G","/ip4/172.18.12.205/tcp/13996/ws/p2p/16Uiu2HAmFnuzmu5QAjNorJK9tw26tQuonEnQvWePJp6W6p624X1G"],"enrUri":"enr:-L24QDPWkVBfIcU8Qi_3V57QN-gOxBzsCrc0Y4i8aJMrAuiaE0lK2iDneJG6NOFaBbGJJN2qoSMVxrQpIWL1k_SXQGQCgmlkgnY0gmlwhKwSDM2KbXVsdGlhZGRyc5YACASsEgzNBjarAAoErBIMzQY2rN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDLprI1QRdy2poqsMSjjRRJSqiTNtCGzT0CRPMc7D5Ly-DdGNwgjarg3VkcII2rYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-21_04-12-51__20361849-5b6d-4a2b-aebc-c77d0c09dbc9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.171.150
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['21042', '21043', '21044', '21045', '21046']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 21042:21042 -p 21043:21043 -p 21044:21044 -p 21045:21045 -p 21046:21046 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21044 --rest-port=21042 --tcp-port=21043 --discv5-udp-port=21045 --rest-address=0.0.0.0 --nat=extip:172.18.171.150 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fa5783f9cceab18569b2ecba4bd69fbca696e7f0bbe52a050bb30a8afcadc5c0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21046 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QDPWkVBfIcU8Qi_3V57QN-gOxBzsCrc0Y4i8aJMrAuiaE0lK2iDneJG6NOFaBbGJJN2qoSMVxrQpIWL1k_SXQGQCgmlkgnY0gmlwhKwSDM2KbXVsdGlhZGRyc5YACASsEgzNBjarAAoErBIMzQY2rN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDLprI1QRdy2poqsMSjjRRJSqiTNtCGzT0CRPMc7D5Ly-DdGNwgjarg3VkcII2rYV3YWt1MgM --storenode=/ip4/172.18.12.205/tcp/13995/p2p/16Uiu2HAmFnuzmu5QAjNorJK9tw26tQuonEnQvWePJp6W6p624X1G --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.171.150 waku 34be207614459ef84f2dc4669e362fdedcae472e9a7b74987fe7983666af3466
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 34be20761445. Setting up logs at ./log/docker/store_node1_2025-01-21_04-12-51__20361849-5b6d-4a2b-aebc-c77d0c09dbc9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 21042
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21042/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21042/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.171.150/tcp/21043/p2p/16Uiu2HAm1N7XKKY8h5eWp7SgpVu825kVZ3mtshUVt1UvwfQmAdq9","/ip4/172.18.171.150/tcp/21044/ws/p2p/16Uiu2HAm1N7XKKY8h5eWp7SgpVu825kVZ3mtshUVt1UvwfQmAdq9"],"enrUri":"enr:-L24QKuWtKep3-02yR3_fsq8XzzbyIRMqwpIg8KFaXPaj_1oJFxJ_zuHiFv75rIsufSnEhLb8BxWaAoPz2Bg3EHMP0MCgmlkgnY0gmlwhKwSq5aKbXVsdGlhZGRyc5YACASsEquWBlIzAAoErBKrlgZSNN0DgnJzhQADAQAAiXNlY3AyNTZrMaECWDyuMiAg9BWiZxPppBhtIecOgvJSrK4wNMBaUlmerwCDdGNwglIzg3VkcIJSNYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21042/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.12.205/tcp/13995/p2p/16Uiu2HAmFnuzmu5QAjNorJK9tw26tQuonEnQvWePJp6W6p624X1G"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13994/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21042/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13994/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13994/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a583c7faeb9b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 34be20761445
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a583c7faeb9b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-21_04-12-51__20361849-5b6d-4a2b-aebc-c77d0c09dbc9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-21_04-12-51__20361849-5b6d-4a2b-aebc-c77d0c09dbc9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publishing_node_restarts with id: 2025-01-21_04-12-56__c7bef72a-ce0f-42ca-8f5f-915203ed704d
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-21_04-12-56__c7bef72a-ce0f-42ca-8f5f-915203ed704d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.48.161
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['59039', '59040', '59041', '59042', '59043']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 59039:59039 -p 59040:59040 -p 59041:59041 -p 59042:59042 -p 59043:59043 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59041 --rest-port=59039 --tcp-port=59040 --discv5-udp-port=59042 --rest-address=0.0.0.0 --nat=extip:172.18.48.161 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bcebdce88a7fbf17afdcffbfce7955bffdd11c9fc93eac3992b790becfc2ab80 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59043 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.48.161 waku 30bf8c7d826489254b9de49f7883d2e90924b1bf121e4fc7c45af57cb4191644
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 30bf8c7d8264. Setting up logs at ./log/docker/publishing_node1_2025-01-21_04-12-56__c7bef72a-ce0f-42ca-8f5f-915203ed704d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 59039
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 34be20761445. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59039/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59039/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.48.161/tcp/59040/p2p/16Uiu2HAm7auXhRK5ArWjdPpJzamiYKiqxhdGT6aa13f9FByKoPD3","/ip4/172.18.48.161/tcp/59041/ws/p2p/16Uiu2HAm7auXhRK5ArWjdPpJzamiYKiqxhdGT6aa13f9FByKoPD3"],"enrUri":"enr:-L24QBhIC0ZrC4Jl3iaZDBu901qgjHdDWDnbygGxdp3tg8aoADheQuXaNnt24YHnCyYrPuayP_oG8i-2saHrSMu_A9gCgmlkgnY0gmlwhKwSMKGKbXVsdGlhZGRyc5YACASsEjChBuagAAoErBIwoQbmod0DgnJzhQADAQAAiXNlY3AyNTZrMaECtKnKoJ0KjThD_QA_JbyE3-TpsA-Gyr4A_2a0qvW1KqKDdGNwguagg3VkcILmooV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-21_04-12-56__c7bef72a-ce0f-42ca-8f5f-915203ed704d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.84.195
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['17955', '17956', '17957', '17958', '17959']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 17955:17955 -p 17956:17956 -p 17957:17957 -p 17958:17958 -p 17959:17959 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17957 --rest-port=17955 --tcp-port=17956 --discv5-udp-port=17958 --rest-address=0.0.0.0 --nat=extip:172.18.84.195 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c71d8c6ece6dacd0afdcd608dcc327dcaf3dbaceb66b1fa2d7fabd01dd75bdcb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17959 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QBhIC0ZrC4Jl3iaZDBu901qgjHdDWDnbygGxdp3tg8aoADheQuXaNnt24YHnCyYrPuayP_oG8i-2saHrSMu_A9gCgmlkgnY0gmlwhKwSMKGKbXVsdGlhZGRyc5YACASsEjChBuagAAoErBIwoQbmod0DgnJzhQADAQAAiXNlY3AyNTZrMaECtKnKoJ0KjThD_QA_JbyE3-TpsA-Gyr4A_2a0qvW1KqKDdGNwguagg3VkcILmooV3YWt1MgM --storenode=/ip4/172.18.48.161/tcp/59040/p2p/16Uiu2HAm7auXhRK5ArWjdPpJzamiYKiqxhdGT6aa13f9FByKoPD3 --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.84.195 waku c9c3793b427a5dc4a21b1d3a4dd266ebaba470bb492aea55af258b0bb5aa477e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c9c3793b427a. Setting up logs at ./log/docker/store_node1_2025-01-21_04-12-56__c7bef72a-ce0f-42ca-8f5f-915203ed704d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 17955
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17955/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17955/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.195/tcp/17956/p2p/16Uiu2HAm9N6qYjcMybMUajtBqv3b1ZhaBeY8Fd3m4gKQPYZhStn4","/ip4/172.18.84.195/tcp/17957/ws/p2p/16Uiu2HAm9N6qYjcMybMUajtBqv3b1ZhaBeY8Fd3m4gKQPYZhStn4"],"enrUri":"enr:-L24QGVgStDouCUPFf5bCg0hseNVhfPkyq4fhXJLAr5zaaHjGoWLfUw8rOSPHQbwotXVSC5Ot_IHuSGrYcHGQvk4yH4CgmlkgnY0gmlwhKwSVMOKbXVsdGlhZGRyc5YACASsElTDBkYkAAoErBJUwwZGJd0DgnJzhQADAQAAiXNlY3AyNTZrMaECzxlmjDC4ejEVsUJqG3FbtDWCK7k0sirfiGSNxfy_nImDdGNwgkYkg3VkcIJGJoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17955/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.48.161/tcp/59040/p2p/16Uiu2HAm7auXhRK5ArWjdPpJzamiYKiqxhdGT6aa13f9FByKoPD3"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59039/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17955/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59039/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59039/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 30bf8c7d8264
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c9c3793b427a
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 30bf8c7d8264. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-21_04-12-56__c7bef72a-ce0f-42ca-8f5f-915203ed704d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-21_04-12-56__c7bef72a-ce0f-42ca-8f5f-915203ed704d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publishing_node_restarts with id: 2025-01-21_04-13-10__8e697ccf-843a-405e-a813-a82b33ca279f
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-21_04-13-10__8e697ccf-843a-405e-a813-a82b33ca279f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.157.95
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['2618', '2619', '2620', '2621', '2622']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 2618:2618 -p 2619:2619 -p 2620:2620 -p 2621:2621 -p 2622:2622 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2620 --rest-port=2618 --tcp-port=2619 --discv5-udp-port=2621 --rest-address=0.0.0.0 --nat=extip:172.18.157.95 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ea9f3ce1d33bcfb335a70435e516310ccc3ead5a8cdc1ab44ea73ed0c301cc53 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2622 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.157.95 waku 4e45e35f232d44faa22873c3d13eec55d487883544ed374ce2c6cf4e91e94e63
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4e45e35f232d. Setting up logs at ./log/docker/publishing_node1_2025-01-21_04-13-10__8e697ccf-843a-405e-a813-a82b33ca279f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 2618
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c9c3793b427a. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2618/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2618/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.157.95/tcp/2619/p2p/16Uiu2HAmU3a3bUkcXpKLkwo2SsQgdbauRmYVEDFnRU2XEmJvyEyd","/ip4/172.18.157.95/tcp/2620/ws/p2p/16Uiu2HAmU3a3bUkcXpKLkwo2SsQgdbauRmYVEDFnRU2XEmJvyEyd"],"enrUri":"enr:-L24QEV7nrSId4ajz7cbfLkEgBHJZ9iqL4zSII3YsUOuCg5-WDVc9yZ8U7QlD9P5lqBo4uLHGiqdYI29zXfIlJnbuAECgmlkgnY0gmlwhKwSnV-KbXVsdGlhZGRyc5YACASsEp1fBgo7AAoErBKdXwYKPN0DgnJzhQADAQAAiXNlY3AyNTZrMaED5KguP_DlLt20At3dGmzpOb3AvmKtABiSI_h6VWnUg9iDdGNwggo7g3VkcIIKPYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-21_04-13-10__8e697ccf-843a-405e-a813-a82b33ca279f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.71.226
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['31302', '31303', '31304', '31305', '31306']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 31302:31302 -p 31303:31303 -p 31304:31304 -p 31305:31305 -p 31306:31306 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31304 --rest-port=31302 --tcp-port=31303 --discv5-udp-port=31305 --rest-address=0.0.0.0 --nat=extip:172.18.71.226 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b1eb13179ba57a1814a30fcecd1bb943baa313e296fc9df1bd54cf7ca567ecaa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31306 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QEV7nrSId4ajz7cbfLkEgBHJZ9iqL4zSII3YsUOuCg5-WDVc9yZ8U7QlD9P5lqBo4uLHGiqdYI29zXfIlJnbuAECgmlkgnY0gmlwhKwSnV-KbXVsdGlhZGRyc5YACASsEp1fBgo7AAoErBKdXwYKPN0DgnJzhQADAQAAiXNlY3AyNTZrMaED5KguP_DlLt20At3dGmzpOb3AvmKtABiSI_h6VWnUg9iDdGNwggo7g3VkcIIKPYV3YWt1MgM --storenode=/ip4/172.18.157.95/tcp/2619/p2p/16Uiu2HAmU3a3bUkcXpKLkwo2SsQgdbauRmYVEDFnRU2XEmJvyEyd --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.71.226 waku 116db787b8de1732ffee7e1b5bf31d3dc4b8b68b7a69178ab5254d47a501db38
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 116db787b8de. Setting up logs at ./log/docker/store_node1_2025-01-21_04-13-10__8e697ccf-843a-405e-a813-a82b33ca279f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 31302
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31302/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31302/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.71.226/tcp/31303/p2p/16Uiu2HAkw4Gh8LDErcgWFrkXvAMucFMMZtbmSuYW4E5ox2Eo49ZV","/ip4/172.18.71.226/tcp/31304/ws/p2p/16Uiu2HAkw4Gh8LDErcgWFrkXvAMucFMMZtbmSuYW4E5ox2Eo49ZV"],"enrUri":"enr:-L24QFgeF3aT1dXCy1kL9J6QRXznbTSsqtWBJ8VtFPzQbGrvEkJkAYl-NJ3mhVk7fS7M2bAvZRzmhsmfLQWTsfWspfsCgmlkgnY0gmlwhKwSR-KKbXVsdGlhZGRyc5YACASsEkfiBnpHAAoErBJH4gZ6SN0DgnJzhQADAQAAiXNlY3AyNTZrMaECGDvYhHu6kWKe5mQJx4aPkUTF0JjCPKIOqJw-nccTSrSDdGNwgnpHg3VkcIJ6SYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31302/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.157.95/tcp/2619/p2p/16Uiu2HAmU3a3bUkcXpKLkwo2SsQgdbauRmYVEDFnRU2XEmJvyEyd"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2618/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31302/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2618/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2618/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4e45e35f232d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 116db787b8de
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4e45e35f232d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-21_04-13-10__8e697ccf-843a-405e-a813-a82b33ca279f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-21_04-13-10__8e697ccf-843a-405e-a813-a82b33ca279f__wakuorg_nwaku:latest.log