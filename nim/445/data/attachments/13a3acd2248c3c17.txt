[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_payload with id: 2024-11-10_06-13-27__efdc6466-29b2-4d13-979a-4af7d824621f
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-10_06-13-27__efdc6466-29b2-4d13-979a-4af7d824621f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.59.131
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['56897', '56898', '56899', '56900', '56901']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 56897:56897 -p 56898:56898 -p 56899:56899 -p 56900:56900 -p 56901:56901 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56899 --rest-port=56897 --tcp-port=56898 --discv5-udp-port=56900 --rest-address=0.0.0.0 --nat=extip:172.18.59.131 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e32c0e9eb2de8b32bd0eacbac0cfa1fbb265dfe2c9ea61edcb9fab4acaa0b4ed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56901 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.59.131 waku 7b0b32309da7a98fd085e3a6d03311fde72183cd0d20273cbcae7d18e0fec2f7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7b0b32309da7. Setting up logs at ./log/docker/receiving_node1_2024-11-10_06-13-27__efdc6466-29b2-4d13-979a-4af7d824621f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 56897
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container dddebe27b44f. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56897/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56897/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.59.131/tcp/56898/p2p/16Uiu2HAmKwpCSua6iEUS9rVgMibGZ5sKcxNfN3hsDjP7eUC79UP7","/ip4/172.18.59.131/tcp/56899/ws/p2p/16Uiu2HAmKwpCSua6iEUS9rVgMibGZ5sKcxNfN3hsDjP7eUC79UP7"],"enrUri":"enr:-L24QELW26nzrq9nDg4QYOE1gaO2MAcfE65qgWBAoc96_AaxHxemz5mheh3_CeTyX4ichASOWynValMhD9L2yh3_pT4CgmlkgnY0gmlwhKwSO4OKbXVsdGlhZGRyc5YACASsEjuDBt5CAAoErBI7gwbeQ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDbFEz7BXXlO_tLt52D72zi63X9Rvs08QaSGC6XiZDbI6DdGNwgt5Cg3VkcILeRIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-10_06-13-27__efdc6466-29b2-4d13-979a-4af7d824621f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.183.122
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37930', '37931', '37932', '37933', '37934']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37930:37930 -p 37931:37931 -p 37932:37932 -p 37933:37933 -p 37934:37934 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37932 --rest-port=37930 --tcp-port=37931 --discv5-udp-port=37933 --rest-address=0.0.0.0 --nat=extip:172.18.183.122 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c2d72ada8adbac8f0daa9b99ea4609de1ee26e1720a0cc6c796baa2a9f7dd422 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37934 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.183.122 waku 65514fcde469ee21d2c091855802668c8b7d35a8098c438ee4429fda4efdb7a1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 65514fcde469. Setting up logs at ./log/docker/receiving_node2_2024-11-10_06-13-27__efdc6466-29b2-4d13-979a-4af7d824621f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 37930
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37930/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37930/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.183.122/tcp/37931/p2p/16Uiu2HAmMnXu6NS3hrzxnTJtHgzKgqPNQmXzw3pWJPnuwiBCpv29","/ip4/172.18.183.122/tcp/37932/ws/p2p/16Uiu2HAmMnXu6NS3hrzxnTJtHgzKgqPNQmXzw3pWJPnuwiBCpv29"],"enrUri":"enr:-L24QPe-YFgv0bBri9cW55f6KDZRS4bBUdrjgEvKecxVRU3SAARTA4P-tmjoqnXrONhkQojFzcmEhMZKSLA0UhZO8ooCgmlkgnY0gmlwhKwSt3qKbXVsdGlhZGRyc5YACASsErd6BpQrAAoErBK3egaULN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDh6freToPUk_TtVVpJie6AUCQxpIn000cfqO4YErb2z6DdGNwgpQrg3VkcIKULYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37930/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.59.131/tcp/56898/p2p/16Uiu2HAmKwpCSua6iEUS9rVgMibGZ5sKcxNfN3hsDjP7eUC79UP7"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-10_06-13-27__efdc6466-29b2-4d13-979a-4af7d824621f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.77.152
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['52019', '52020', '52021', '52022', '52023']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 52019:52019 -p 52020:52020 -p 52021:52021 -p 52022:52022 -p 52023:52023 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52021 --rest-port=52019 --tcp-port=52020 --discv5-udp-port=52022 --rest-address=0.0.0.0 --nat=extip:172.18.77.152 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0a13da4ce73773b9dfc5417ab33eaf6afef4ea7cd0d56ad0bb1c6ddbef6ba648 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52023 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QELW26nzrq9nDg4QYOE1gaO2MAcfE65qgWBAoc96_AaxHxemz5mheh3_CeTyX4ichASOWynValMhD9L2yh3_pT4CgmlkgnY0gmlwhKwSO4OKbXVsdGlhZGRyc5YACASsEjuDBt5CAAoErBI7gwbeQ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDbFEz7BXXlO_tLt52D72zi63X9Rvs08QaSGC6XiZDbI6DdGNwgt5Cg3VkcILeRIV3YWt1Mgk --lightpushnode=/ip4/172.18.59.131/tcp/56898/p2p/16Uiu2HAmKwpCSua6iEUS9rVgMibGZ5sKcxNfN3hsDjP7eUC79UP7 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.77.152 waku 718ee7b2ffe92cf98f66402578de22e0a72c42f1d990da20768b041c68244667
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 718ee7b2ffe9. Setting up logs at ./log/docker/lightpush_node1_2024-11-10_06-13-27__efdc6466-29b2-4d13-979a-4af7d824621f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 52019
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52019/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52019/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.77.152/tcp/52020/p2p/16Uiu2HAm465Ff95VtP6e6EjSouE1kP4bwHKvxz1D1wtYHWn89TEN","/ip4/172.18.77.152/tcp/52021/ws/p2p/16Uiu2HAm465Ff95VtP6e6EjSouE1kP4bwHKvxz1D1wtYHWn89TEN"],"enrUri":"enr:-L24QDCFnafxb1HG5qd3RKa17UU_8g4WcdrEX9Es7hO1GAv1b-i_F8j53hghFmyVKmWBUgHQjjYDyShxuqXtuRKlXuQCgmlkgnY0gmlwhKwSTZiKbXVsdGlhZGRyc5YACASsEk2YBss0AAoErBJNmAbLNd0DgnJzhQADAQAAiXNlY3AyNTZrMaECgLPhsgOYK6wJthTIuTwFELKGJNHujA82xX9Puq_FNL-DdGNwgss0g3VkcILLNoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52019/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.59.131/tcp/56898/p2p/16Uiu2HAmKwpCSua6iEUS9rVgMibGZ5sKcxNfN3hsDjP7eUC79UP7"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52019/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.183.122/tcp/37931/p2p/16Uiu2HAmMnXu6NS3hrzxnTJtHgzKgqPNQmXzw3pWJPnuwiBCpv29"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56897/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37930/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52019/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1731219212700988160}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:52019/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 7b0b32309da7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 65514fcde469
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7b0b32309da7. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 718ee7b2ffe9
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 65514fcde469. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.