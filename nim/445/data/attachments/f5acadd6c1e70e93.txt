[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_meta with id: 2024-11-10_06-14-48__9b8d1a4d-795e-4239-8b9d-6cd7e67f502f
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-10_06-14-48__9b8d1a4d-795e-4239-8b9d-6cd7e67f502f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.43.214
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['43722', '43723', '43724', '43725', '43726']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 43722:43722 -p 43723:43723 -p 43724:43724 -p 43725:43725 -p 43726:43726 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43724 --rest-port=43722 --tcp-port=43723 --discv5-udp-port=43725 --rest-address=0.0.0.0 --nat=extip:172.18.43.214 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ac1b7cfd6fcebf524be11aecfe51b9da1580df0f0fb03f0faf7abd9b10a7e2af --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43726 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.43.214 waku 0ddc8263d906c2fb3461f5f65824dfb39addb13bb904a487a4474636a6be166c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0ddc8263d906. Setting up logs at ./log/docker/receiving_node1_2024-11-10_06-14-48__9b8d1a4d-795e-4239-8b9d-6cd7e67f502f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 43722
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 124639de85f8. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43722/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43722/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.43.214/tcp/43723/p2p/16Uiu2HAm4y1kEtv7XccUonesQDowUdkXTDuQCiS2EewyaT42tBRK","/ip4/172.18.43.214/tcp/43724/ws/p2p/16Uiu2HAm4y1kEtv7XccUonesQDowUdkXTDuQCiS2EewyaT42tBRK"],"enrUri":"enr:-L24QMTVGDUtxRe8FHCyQU2SqG_-KDIlif5di_kny7ckP5hqbGTfhqoyLKwt8FrGP8R5nINqoKXSH617dmjlTQhmvN0CgmlkgnY0gmlwhKwSK9aKbXVsdGlhZGRyc5YACASsEivWBqrLAAoErBIr1gaqzN0DgnJzhQADAQAAiXNlY3AyNTZrMaECjcCJisbm7lwW81YGmQOZjuvgLWvbLGhFuO0GzwwjqdKDdGNwgqrLg3VkcIKqzYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-10_06-14-48__9b8d1a4d-795e-4239-8b9d-6cd7e67f502f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.93.93
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['33434', '33435', '33436', '33437', '33438']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 33434:33434 -p 33435:33435 -p 33436:33436 -p 33437:33437 -p 33438:33438 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33436 --rest-port=33434 --tcp-port=33435 --discv5-udp-port=33437 --rest-address=0.0.0.0 --nat=extip:172.18.93.93 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5d7957fdb4efefab8bd2d7e1b1e0fee4d3ae6be003061ec054f314ee6eeba975 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33438 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.93.93 waku 788657153bf90317f500671ebdce90e7afbf4d1bf779fb3161f88a97c45c48e9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 788657153bf9. Setting up logs at ./log/docker/receiving_node2_2024-11-10_06-14-48__9b8d1a4d-795e-4239-8b9d-6cd7e67f502f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 33434
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33434/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33434/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.93.93/tcp/33435/p2p/16Uiu2HAkwmtGq6y2HW4v7q8mGvXfWJ1ZLCNGGeGHfKrPYUowS1pQ","/ip4/172.18.93.93/tcp/33436/ws/p2p/16Uiu2HAkwmtGq6y2HW4v7q8mGvXfWJ1ZLCNGGeGHfKrPYUowS1pQ"],"enrUri":"enr:-L24QHYa8n8bAlPoH5E-sZW_SMYhUuX9Yj1IzxRmm3drATInfKMOFzb_qzWMm1cLp3aInHmPvWmFSWw5H47yF3yU4y4CgmlkgnY0gmlwhKwSXV2KbXVsdGlhZGRyc5YACASsEl1dBoKbAAoErBJdXQaCnN0DgnJzhQADAQAAiXNlY3AyNTZrMaECIuTj_rSuL0B-H41sH-5YE6ZFf5pM6bOh0AJQZu1rEwWDdGNwgoKbg3VkcIKCnYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33434/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.43.214/tcp/43723/p2p/16Uiu2HAm4y1kEtv7XccUonesQDowUdkXTDuQCiS2EewyaT42tBRK"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-10_06-14-48__9b8d1a4d-795e-4239-8b9d-6cd7e67f502f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.176.98
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['58500', '58501', '58502', '58503', '58504']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 58500:58500 -p 58501:58501 -p 58502:58502 -p 58503:58503 -p 58504:58504 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58502 --rest-port=58500 --tcp-port=58501 --discv5-udp-port=58503 --rest-address=0.0.0.0 --nat=extip:172.18.176.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d44cf5ab0f3b343b22b8b9deddccc2d67a5f6ad60c13a9084faedfb1663e42f9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58504 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMTVGDUtxRe8FHCyQU2SqG_-KDIlif5di_kny7ckP5hqbGTfhqoyLKwt8FrGP8R5nINqoKXSH617dmjlTQhmvN0CgmlkgnY0gmlwhKwSK9aKbXVsdGlhZGRyc5YACASsEivWBqrLAAoErBIr1gaqzN0DgnJzhQADAQAAiXNlY3AyNTZrMaECjcCJisbm7lwW81YGmQOZjuvgLWvbLGhFuO0GzwwjqdKDdGNwgqrLg3VkcIKqzYV3YWt1Mgk --lightpushnode=/ip4/172.18.43.214/tcp/43723/p2p/16Uiu2HAm4y1kEtv7XccUonesQDowUdkXTDuQCiS2EewyaT42tBRK --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.176.98 waku 6ecad5e5970dd146972a72a5d514629a8103c6f5edb9d5fd4624034d5ea4cba2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6ecad5e5970d. Setting up logs at ./log/docker/lightpush_node1_2024-11-10_06-14-48__9b8d1a4d-795e-4239-8b9d-6cd7e67f502f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 58500
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58500/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58500/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.176.98/tcp/58501/p2p/16Uiu2HAkvuuD7TMZLE1TFvJFAjWvcnuwGFMpQnXCd5Vn4kqhvTLG","/ip4/172.18.176.98/tcp/58502/ws/p2p/16Uiu2HAkvuuD7TMZLE1TFvJFAjWvcnuwGFMpQnXCd5Vn4kqhvTLG"],"enrUri":"enr:-L24QEcpizyNK30jfD0gGiBEiAl4ulGI83IW6jJeWZ1qQ1tPBfOwce02kwXnsbAznPUAEusCHrQvG2zSRHUL5UWCY7ICgmlkgnY0gmlwhKwSsGKKbXVsdGlhZGRyc5YACASsErBiBuSFAAoErBKwYgbkht0DgnJzhQADAQAAiXNlY3AyNTZrMaECFhboiwqORu-9W_S01Ag3w0KCgDsWsQfQhg0XAvSOrg2DdGNwguSFg3VkcILkh4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58500/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.43.214/tcp/43723/p2p/16Uiu2HAm4y1kEtv7XccUonesQDowUdkXTDuQCiS2EewyaT42tBRK"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58500/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.93.93/tcp/33435/p2p/16Uiu2HAkwmtGq6y2HW4v7q8mGvXfWJ1ZLCNGGeGHfKrPYUowS1pQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43722/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33434/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58500/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1731219294295566848, "meta": "Light push works!!"}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:58500/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 0ddc8263d906
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 788657153bf9
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0ddc8263d906. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 6ecad5e5970d
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 788657153bf9. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.