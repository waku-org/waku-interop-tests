[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_pubsub_topics with id: 2024-11-10_06-14-21__7e7c65f7-03af-465f-8613-28d17498625d
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-10_06-14-21__7e7c65f7-03af-465f-8613-28d17498625d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.81.187
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['39023', '39024', '39025', '39026', '39027']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 39023:39023 -p 39024:39024 -p 39025:39025 -p 39026:39026 -p 39027:39027 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39025 --rest-port=39023 --tcp-port=39024 --discv5-udp-port=39026 --rest-address=0.0.0.0 --nat=extip:172.18.81.187 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=36feeae108cabf9f707c8e1b47aadefba5850923cdcc1de088b89856416e4c5f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39027 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.81.187 waku ad6f81a31dd3f5c84714879b2aec2fae32c937dbac6c124aa5c012ba6e8c8fd9
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b1d9ef935b4c. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ad6f81a31dd3. Setting up logs at ./log/docker/receiving_node1_2024-11-10_06-14-21__7e7c65f7-03af-465f-8613-28d17498625d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 39023
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39023/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39023/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.81.187/tcp/39024/p2p/16Uiu2HAkxgDNLT8t5G3smxcKPMZY3xDQzw63tZ9o7TAR7r6UjBY4","/ip4/172.18.81.187/tcp/39025/ws/p2p/16Uiu2HAkxgDNLT8t5G3smxcKPMZY3xDQzw63tZ9o7TAR7r6UjBY4"],"enrUri":"enr:-L24QNVnWfU96qX9YvPm6nKjrKfei9zR-B_G25nVJaGP3q7UWRhrI-ReR1PvuRTAXWdIuHUjNYeTbQ7x8m8RuKF5kXECgmlkgnY0gmlwhKwSUbuKbXVsdGlhZGRyc5YACASsElG7BphwAAoErBJRuwaYcd0DgnJzhQADAQAAiXNlY3AyNTZrMaECMEyu8kgevoy5exl6w594Q5CCvYOvJRDq_H_BPbmfjRGDdGNwgphwg3VkcIKYcoV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-10_06-14-21__7e7c65f7-03af-465f-8613-28d17498625d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.22.143
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['16760', '16761', '16762', '16763', '16764']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 16760:16760 -p 16761:16761 -p 16762:16762 -p 16763:16763 -p 16764:16764 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16762 --rest-port=16760 --tcp-port=16761 --discv5-udp-port=16763 --rest-address=0.0.0.0 --nat=extip:172.18.22.143 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3ba12dfc8aeb9f16ecbb2ceb1db9103a8c138eab597afeb2daa4cb42939be31a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16764 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.22.143 waku 562102d064c78dc185b70079c6bd1f486dba32cd7384128e50095ed3f6fd25d5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 562102d064c7. Setting up logs at ./log/docker/receiving_node2_2024-11-10_06-14-21__7e7c65f7-03af-465f-8613-28d17498625d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 16760
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16760/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16760/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.22.143/tcp/16761/p2p/16Uiu2HAmEmnfwjJCxWxaUFETKhn1ga8nKvUYJrUgfecgLyNuNP3D","/ip4/172.18.22.143/tcp/16762/ws/p2p/16Uiu2HAmEmnfwjJCxWxaUFETKhn1ga8nKvUYJrUgfecgLyNuNP3D"],"enrUri":"enr:-L24QD6PrFJIdxu30HvwiCUPXCScV9AHEJtu8bigWR7A_vn0BjvUvgk2yRAScGS9UlkAz9yUAeIPGUfngFV2OE-7U88CgmlkgnY0gmlwhKwSFo-KbXVsdGlhZGRyc5YACASsEhaPBkF5AAoErBIWjwZBet0DgnJzhQADAQAAiXNlY3AyNTZrMaEDH3U8GAIK5voLi03rg4WYh9ZZLhB1zL_Cw11S1KvCIsCDdGNwgkF5g3VkcIJBe4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16760/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.81.187/tcp/39024/p2p/16Uiu2HAkxgDNLT8t5G3smxcKPMZY3xDQzw63tZ9o7TAR7r6UjBY4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-10_06-14-21__7e7c65f7-03af-465f-8613-28d17498625d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.71.195
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['38998', '38999', '39000', '39001', '39002']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 38998:38998 -p 38999:38999 -p 39000:39000 -p 39001:39001 -p 39002:39002 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39000 --rest-port=38998 --tcp-port=38999 --discv5-udp-port=39001 --rest-address=0.0.0.0 --nat=extip:172.18.71.195 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=225c73d8dfcd96eac91d399f0a3dfd4a6daaad6d0134cf1dbccdfacdae7cacee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39002 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QNVnWfU96qX9YvPm6nKjrKfei9zR-B_G25nVJaGP3q7UWRhrI-ReR1PvuRTAXWdIuHUjNYeTbQ7x8m8RuKF5kXECgmlkgnY0gmlwhKwSUbuKbXVsdGlhZGRyc5YACASsElG7BphwAAoErBJRuwaYcd0DgnJzhQADAQAAiXNlY3AyNTZrMaECMEyu8kgevoy5exl6w594Q5CCvYOvJRDq_H_BPbmfjRGDdGNwgphwg3VkcIKYcoV3YWt1Mgk --lightpushnode=/ip4/172.18.81.187/tcp/39024/p2p/16Uiu2HAkxgDNLT8t5G3smxcKPMZY3xDQzw63tZ9o7TAR7r6UjBY4 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.71.195 waku 59dcb4328ef59015e0e823ffe13724ebdf56dc1b48117f5f05e39d26a6d33f5a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 59dcb4328ef5. Setting up logs at ./log/docker/lightpush_node1_2024-11-10_06-14-21__7e7c65f7-03af-465f-8613-28d17498625d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 38998
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38998/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38998/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.71.195/tcp/38999/p2p/16Uiu2HAm4THzfkxhnUvRKg2S8azykcitEiBVd4zWEF5385PkyLJJ","/ip4/172.18.71.195/tcp/39000/ws/p2p/16Uiu2HAm4THzfkxhnUvRKg2S8azykcitEiBVd4zWEF5385PkyLJJ"],"enrUri":"enr:-L24QIST_cltBGDklfyTMsawu6_3kmsi1rByW9FwbiR94j51DbXo7VMb3NoDhg9ZnxlZP4tAumbHABGS_rRLfAaw29sCgmlkgnY0gmlwhKwSR8OKbXVsdGlhZGRyc5YACASsEkfDBphXAAoErBJHwwaYWN0DgnJzhQADAQAAiXNlY3AyNTZrMaEChiN8TKYSrJBeNL64xtUriOlMyKHUAcXLA2pviEEGAEeDdGNwgphXg3VkcIKYWYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38998/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.81.187/tcp/39024/p2p/16Uiu2HAkxgDNLT8t5G3smxcKPMZY3xDQzw63tZ9o7TAR7r6UjBY4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38998/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.22.143/tcp/16761/p2p/16Uiu2HAmEmnfwjJCxWxaUFETKhn1ga8nKvUYJrUgfecgLyNuNP3D"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39023/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16760/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38998/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1731219266782535424}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:38998/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id ad6f81a31dd3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 562102d064c7
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ad6f81a31dd3. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 59dcb4328ef5
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 562102d064c7. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.