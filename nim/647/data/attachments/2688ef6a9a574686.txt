2025-02-11 04:09:19.650 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:09:19.650 DEBUG [tests.conftest] Running test: test_store_with_multiple_content_topics with id: 2025-02-11_04-09-19__00a0e542-ec19-4539-95f0-e54eb5522bf5
2025-02-11 04:09:19.650 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:09:19.651 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 04:09:19.651 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-11 04:09:19.657 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:09:19.657 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-11_04-09-19__00a0e542-ec19-4539-95f0-e54eb5522bf5__wakuorg_nwaku:latest.log
2025-02-11 04:09:19.657 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:09:19.657 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:09:19.659 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:09:19.659 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.176.139
2025-02-11 04:09:19.659 DEBUG [src.node.docker_mananger] Generated ports ['11230', '11231', '11232', '11233', '11234']
2025-02-11 04:09:19.659 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:09:19.659 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:09:19.660 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:09:19.660 DEBUG [src.node.docker_mananger] docker run -i -t -p 11230:11230 -p 11231:11231 -p 11232:11232 -p 11233:11233 -p 11234:11234 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11232 --rest-port=11230 --tcp-port=11231 --discv5-udp-port=11233 --rest-address=0.0.0.0 --nat=extip:172.18.176.139 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fb68b5640fdbfab5dd27cfb99e070e7c3cbf2dc8dae726faa98cfc7b45ba801b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11234 --metrics-logging=true --store=true --relay=true
2025-02-11 04:09:19.890 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.176.139 waku 6e1191333c141fcae85a0f3c43e3357bdafe7b4a2c0ea7f4924766b27994c293
2025-02-11 04:09:19.939 DEBUG [src.node.docker_mananger] Container started with ID 6e1191333c14. Setting up logs at ./log/docker/publishing_node1_2025-02-11_04-09-19__00a0e542-ec19-4539-95f0-e54eb5522bf5__wakuorg_nwaku:latest.log
2025-02-11 04:09:19.943 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11230
2025-02-11 04:09:19.943 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:09:20.445 ERROR [src.node.docker_mananger] Max retries reached for container 6f9808654098. Exiting log stream.
2025-02-11 04:09:20.943 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11230/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:09:20.946 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:09:20.946 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:09:20.946 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11230/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:09:20.949 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.176.139/tcp/11231/p2p/16Uiu2HAm4G5aUX8C1GY9nrQSf4vBnbSgjMUPuHHVZxsKnHM6E9DB","/ip4/172.18.176.139/tcp/11232/ws/p2p/16Uiu2HAm4G5aUX8C1GY9nrQSf4vBnbSgjMUPuHHVZxsKnHM6E9DB"],"enrUri":"enr:-L24QNL55p_zqvBiYdxTqAdRZpSEq0FUzJEdumSYisfo-6qfdAgrfnlmtJ0zHWR4NzsgBltk3Q07wcqSJyRDIkKcDZACgmlkgnY0gmlwhKwSsIuKbXVsdGlhZGRyc5YACASsErCLBivfAAoErBKwiwYr4N0DgnJzhQADAQAAiXNlY3AyNTZrMaECg0QOedcwRBQD4uN16LE8417D5z6rOLskqerW4VEBMDqDdGNwgivfg3VkcIIr4YV3YWt1MgM"}'
2025-02-11 04:09:20.949 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:09:20.955 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:09:20.956 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-11_04-09-19__00a0e542-ec19-4539-95f0-e54eb5522bf5__wakuorg_nwaku:latest.log
2025-02-11 04:09:20.956 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:09:20.956 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:09:20.957 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:09:20.957 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.248.202
2025-02-11 04:09:20.957 DEBUG [src.node.docker_mananger] Generated ports ['5610', '5611', '5612', '5613', '5614']
2025-02-11 04:09:20.958 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:09:20.958 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:09:20.958 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:09:20.958 DEBUG [src.node.docker_mananger] docker run -i -t -p 5610:5610 -p 5611:5611 -p 5612:5612 -p 5613:5613 -p 5614:5614 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5612 --rest-port=5610 --tcp-port=5611 --discv5-udp-port=5613 --rest-address=0.0.0.0 --nat=extip:172.18.248.202 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c0368f3be5cbebdf4f8dcda9e87164cfdceb4fcdb35a9242e1c1673f28bc55d0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5614 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QNL55p_zqvBiYdxTqAdRZpSEq0FUzJEdumSYisfo-6qfdAgrfnlmtJ0zHWR4NzsgBltk3Q07wcqSJyRDIkKcDZACgmlkgnY0gmlwhKwSsIuKbXVsdGlhZGRyc5YACASsErCLBivfAAoErBKwiwYr4N0DgnJzhQADAQAAiXNlY3AyNTZrMaECg0QOedcwRBQD4uN16LE8417D5z6rOLskqerW4VEBMDqDdGNwgivfg3VkcIIr4YV3YWt1MgM --storenode=/ip4/172.18.176.139/tcp/11231/p2p/16Uiu2HAm4G5aUX8C1GY9nrQSf4vBnbSgjMUPuHHVZxsKnHM6E9DB --store=true --relay=true
2025-02-11 04:09:21.181 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.248.202 waku 21e29f4045e1df7a49626ef8c1f6d360df58bbee54708c97c788a25743c35fe7
2025-02-11 04:09:21.229 DEBUG [src.node.docker_mananger] Container started with ID 21e29f4045e1. Setting up logs at ./log/docker/store_node1_2025-02-11_04-09-19__00a0e542-ec19-4539-95f0-e54eb5522bf5__wakuorg_nwaku:latest.log
2025-02-11 04:09:21.230 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 5610
2025-02-11 04:09:21.231 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:09:22.231 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5610/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:09:22.234 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:09:22.234 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:09:22.234 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5610/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:09:22.236 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.248.202/tcp/5611/p2p/16Uiu2HAmCozvrxRogjc8fBthNJnkY9tcPqZP7xQDCkmdQkaZJzT9","/ip4/172.18.248.202/tcp/5612/ws/p2p/16Uiu2HAmCozvrxRogjc8fBthNJnkY9tcPqZP7xQDCkmdQkaZJzT9"],"enrUri":"enr:-L24QC4Oflxoras9PAaoGMdQXolFN6LuTBHXc_27sJXnnzUUPk_etNDX4FrU-IYdMJx_0_mgl86dNlRQTIE7L1WiyG0CgmlkgnY0gmlwhKwS-MqKbXVsdGlhZGRyc5YACASsEvjKBhXrAAoErBL4ygYV7N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDAk7hu5sEJ1VYpU4RtXV3SjabnWTcx_lCTqhIbHsCmXiDdGNwghXrg3VkcIIV7YV3YWt1MgM"}'
2025-02-11 04:09:22.236 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:09:22.237 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5610/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.176.139/tcp/11231/p2p/16Uiu2HAm4G5aUX8C1GY9nrQSf4vBnbSgjMUPuHHVZxsKnHM6E9DB"]'
2025-02-11 04:09:22.239 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:09:22.240 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11230/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:09:22.242 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:09:22.242 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5610/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:09:22.244 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:09:22.245 DEBUG [src.steps.store] Relaying message
2025-02-11 04:09:22.245 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11230/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:09:22.251 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:09:22.251 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:09:22.452 DEBUG [src.steps.store] Relaying message
2025-02-11 04:09:22.453 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11230/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:09:22.458 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:09:22.458 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:09:22.659 DEBUG [src.steps.store] Relaying message
2025-02-11 04:09:22.660 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11230/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:09:22.666 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:09:22.666 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:09:22.867 DEBUG [src.steps.store] Relaying message
2025-02-11 04:09:22.867 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11230/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:09:22.873 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:09:22.874 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:09:23.074 DEBUG [src.steps.store] Relaying message
2025-02-11 04:09:23.075 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11230/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:09:23.081 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:09:23.081 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:09:23.282 DEBUG [src.steps.store] Relaying message
2025-02-11 04:09:23.283 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11230/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:09:23.288 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:09:23.289 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:09:23.490 DEBUG [src.steps.store] Relaying message
2025-02-11 04:09:23.490 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11230/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:09:23.496 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:09:23.496 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:09:23.697 DEBUG [src.steps.store] Relaying message
2025-02-11 04:09:23.697 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11230/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:09:23.704 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:09:23.704 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:09:23.906 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11230/store/v3/messages?contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto%2C%2Fstatusim%2F1%2Fcommunity%2Fcbor&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:09:23.909 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x574ed75a987351d2225a32f665a8c5c39109a2e2c3d93f42b066c08d89df6625"},{"messageHash":"0x57e5201b2c69fd3ae79adf55b418075b693d569df074fca39262c528e1b0239b"}]}'
2025-02-11 04:09:23.909 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5610/store/v3/messages?contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto%2C%2Fstatusim%2F1%2Fcommunity%2Fcbor&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:09:23.912 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x574ed75a987351d2225a32f665a8c5c39109a2e2c3d93f42b066c08d89df6625"},{"messageHash":"0x57e5201b2c69fd3ae79adf55b418075b693d569df074fca39262c528e1b0239b"}]}'
2025-02-11 04:09:23.915 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:09:23.916 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:09:23.916 DEBUG [src.node.waku_node] Stopping container with id 6e1191333c14
2025-02-11 04:09:24.450 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:09:24.450 DEBUG [src.node.waku_node] Stopping container with id 21e29f4045e1
2025-02-11 04:09:25.261 ERROR [src.node.docker_mananger] Max retries reached for container 6e1191333c14. Exiting log stream.
2025-02-11 04:09:25.961 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:09:25.961 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:09:25.968 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:09:25.975 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
