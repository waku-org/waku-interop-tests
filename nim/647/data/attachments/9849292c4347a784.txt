2025-02-11 04:04:47.295 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:04:47.296 DEBUG [tests.conftest] Running test: test_single_content_topic[/statusim/1/community/cbor] with id: 2025-02-11_04-04-47__976ec775-12b9-4fe3-941f-6edf8317ee12
2025-02-11 04:04:47.296 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:04:47.296 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 04:04:47.297 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-11 04:04:47.303 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:04:47.304 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_04-04-47__976ec775-12b9-4fe3-941f-6edf8317ee12__wakuorg_nwaku:latest.log
2025-02-11 04:04:47.304 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:04:47.304 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:04:47.305 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:04:47.305 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.215.67
2025-02-11 04:04:47.305 DEBUG [src.node.docker_mananger] Generated ports ['56737', '56738', '56739', '56740', '56741']
2025-02-11 04:04:47.306 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:04:47.306 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:04:47.306 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:04:47.306 DEBUG [src.node.docker_mananger] docker run -i -t -p 56737:56737 -p 56738:56738 -p 56739:56739 -p 56740:56740 -p 56741:56741 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56739 --rest-port=56737 --tcp-port=56738 --discv5-udp-port=56740 --rest-address=0.0.0.0 --nat=extip:172.18.215.67 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=06c000fe6b62c05d2d10de0a7b9fd7eb34cc38fc53f2bdd4fa642ccf7cded5e5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56741 --metrics-logging=true --relay=true --filter=true --content-topic=/statusim/1/community/cbor
2025-02-11 04:04:47.532 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.215.67 waku 27e853e02f50942e15089814b72ddc1b75276898de5117c4098d6ed3f963a924
2025-02-11 04:04:47.587 DEBUG [src.node.docker_mananger] Container started with ID 27e853e02f50. Setting up logs at ./log/docker/node1_2025-02-11_04-04-47__976ec775-12b9-4fe3-941f-6edf8317ee12__wakuorg_nwaku:latest.log
2025-02-11 04:04:47.587 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56737
2025-02-11 04:04:47.587 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:04:48.090 ERROR [src.node.docker_mananger] Max retries reached for container e0f09bbd7248. Exiting log stream.
2025-02-11 04:04:48.588 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56737/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:48.591 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:04:48.591 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:04:48.591 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56737/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:48.593 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.215.67/tcp/56738/p2p/16Uiu2HAmKas7yL5cR4hRLEtAzD4ooSaBQgFJgsNg4Bhe5HqJi8bL","/ip4/172.18.215.67/tcp/56739/ws/p2p/16Uiu2HAmKas7yL5cR4hRLEtAzD4ooSaBQgFJgsNg4Bhe5HqJi8bL"],"enrUri":"enr:-L24QGz65FZVkNysdQd_IudH5E71EswL7-2MatL21fkxFoVaOOFcxckuw9wkOOJu4FG5-CSItSKG9w-M7m04kbaWEhYCgmlkgnY0gmlwhKwS10OKbXVsdGlhZGRyc5YACASsEtdDBt2iAAoErBLXQwbdo90DgnJzhQACAQAAiXNlY3AyNTZrMaEDZvNPiYthblBrWDGQFWYaQByUH1i_YX5XrL0ATpe_0zuDdGNwgt2ig3VkcILdpIV3YWt1MgU"}'
2025-02-11 04:04:48.594 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:04:48.600 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:04:48.600 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_04-04-47__976ec775-12b9-4fe3-941f-6edf8317ee12__wakuorg_nwaku:latest.log
2025-02-11 04:04:48.600 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:04:48.600 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:04:48.601 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:04:48.602 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.215.189
2025-02-11 04:04:48.602 DEBUG [src.node.docker_mananger] Generated ports ['56674', '56675', '56676', '56677', '56678']
2025-02-11 04:04:48.602 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:04:48.602 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:04:48.602 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:04:48.602 DEBUG [src.node.docker_mananger] docker run -i -t -p 56674:56674 -p 56675:56675 -p 56676:56676 -p 56677:56677 -p 56678:56678 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56676 --rest-port=56674 --tcp-port=56675 --discv5-udp-port=56677 --rest-address=0.0.0.0 --nat=extip:172.18.215.189 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=7f9ae12d4ea821465fdb3234da351e2b81bcda274f52b887cdd090b1be29f1fb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56678 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QGz65FZVkNysdQd_IudH5E71EswL7-2MatL21fkxFoVaOOFcxckuw9wkOOJu4FG5-CSItSKG9w-M7m04kbaWEhYCgmlkgnY0gmlwhKwS10OKbXVsdGlhZGRyc5YACASsEtdDBt2iAAoErBLXQwbdo90DgnJzhQACAQAAiXNlY3AyNTZrMaEDZvNPiYthblBrWDGQFWYaQByUH1i_YX5XrL0ATpe_0zuDdGNwgt2ig3VkcILdpIV3YWt1MgU --content-topic=/statusim/1/community/cbor
2025-02-11 04:04:48.829 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.215.189 waku 72f1f3256331e113fad3ce9cb56119390abbdd936a9688457e8d9a9eb1f7f463
2025-02-11 04:04:48.883 DEBUG [src.node.docker_mananger] Container started with ID 72f1f3256331. Setting up logs at ./log/docker/node2_2025-02-11_04-04-47__976ec775-12b9-4fe3-941f-6edf8317ee12__wakuorg_nwaku:latest.log
2025-02-11 04:04:48.884 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56674
2025-02-11 04:04:48.885 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:04:49.885 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56674/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:49.898 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:04:49.898 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:04:49.900 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56674/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:49.906 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.215.189/tcp/56675/p2p/16Uiu2HAmC4KZQ4tZEEJzQBVoaFdWmqvtdwLDF9DV1q64HemsfSWE","/ip4/172.18.215.189/tcp/56676/ws/p2p/16Uiu2HAmC4KZQ4tZEEJzQBVoaFdWmqvtdwLDF9DV1q64HemsfSWE"],"enrUri":"enr:-L24QNU4-NX-p9X0JeZz1pzFwGq9mDR1YU1ekXAZQOYloNQIAHqzehvfyH3_txBbgQ5F_r1_J6qr7tS9Fz7V6Zw7-DwCgmlkgnY0gmlwhKwS172KbXVsdGlhZGRyc5YACASsEte9Bt1jAAoErBLXvQbdZN0DgnJzhQACAQAAiXNlY3AyNTZrMaEC9x5kH6EUOxvE_4kG-A36VyifE8fmwkubBWs-FXnQ6fODdGNwgt1jg3VkcILdZYV3YWt1MgE"}'
2025-02-11 04:04:49.907 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:04:49.908 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56674/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.215.67/tcp/56738/p2p/16Uiu2HAmKas7yL5cR4hRLEtAzD4ooSaBQgFJgsNg4Bhe5HqJi8bL"]'
2025-02-11 04:04:49.911 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:49.912 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56737/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/statusim/1/community/cbor"]'
2025-02-11 04:04:49.914 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:49.915 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56674/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/statusim/1/community/cbor"]'
2025-02-11 04:04:49.917 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:49.918 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56737/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:04:49.922 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:49.924 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 04:04:50.024 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 04:04:50.024 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56737/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:50.027 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/statusim/1/community/cbor","version":0,"timestamp":1739246689917886208,"ephemeral":false}]'
2025-02-11 04:04:50.028 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 04:04:50.029 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56674/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:50.031 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/statusim/1/community/cbor","version":0,"timestamp":1739246689917886208,"ephemeral":false}]'
2025-02-11 04:04:50.034 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:04:50.035 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:04:50.035 DEBUG [src.node.waku_node] Stopping container with id 27e853e02f50
2025-02-11 04:04:51.079 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:04:51.079 DEBUG [src.node.waku_node] Stopping container with id 72f1f3256331
2025-02-11 04:04:51.890 ERROR [src.node.docker_mananger] Max retries reached for container 27e853e02f50. Exiting log stream.
2025-02-11 04:04:52.569 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:04:52.570 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:04:52.576 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:04:52.580 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
