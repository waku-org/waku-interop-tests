2025-02-11 04:04:21.173 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:04:21.173 DEBUG [tests.conftest] Running test: test_publish_on_multiple_content_topics_and_only_after_fetch_them[content_topic_list0] with id: 2025-02-11_04-04-21__38b67de8-600c-4a4d-aa42-cc8046ff21e2
2025-02-11 04:04:21.174 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:04:21.174 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 04:04:21.174 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-11 04:04:21.181 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:04:21.181 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_04-04-21__38b67de8-600c-4a4d-aa42-cc8046ff21e2__wakuorg_nwaku:latest.log
2025-02-11 04:04:21.181 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:04:21.181 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:04:21.182 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:04:21.183 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.136.59
2025-02-11 04:04:21.183 DEBUG [src.node.docker_mananger] Generated ports ['56285', '56286', '56287', '56288', '56289']
2025-02-11 04:04:21.183 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:04:21.183 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:04:21.183 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:04:21.183 DEBUG [src.node.docker_mananger] docker run -i -t -p 56285:56285 -p 56286:56286 -p 56287:56287 -p 56288:56288 -p 56289:56289 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56287 --rest-port=56285 --tcp-port=56286 --discv5-udp-port=56288 --rest-address=0.0.0.0 --nat=extip:172.18.136.59 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=64c1ebb2bcb5ca9da2c6dddb5e476e37bc6c19e5000767e1bff1d4e75cc2da1c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56289 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2025-02-11 04:04:21.412 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.136.59 waku 93a1a9be6189c2753aa77b5e0963dd735aa4ec782bb724e713a9ff7461a49913
2025-02-11 04:04:21.462 DEBUG [src.node.docker_mananger] Container started with ID 93a1a9be6189. Setting up logs at ./log/docker/node1_2025-02-11_04-04-21__38b67de8-600c-4a4d-aa42-cc8046ff21e2__wakuorg_nwaku:latest.log
2025-02-11 04:04:21.462 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56285
2025-02-11 04:04:21.464 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:04:21.965 ERROR [src.node.docker_mananger] Max retries reached for container df8bea2330b0. Exiting log stream.
2025-02-11 04:04:22.464 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56285/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:22.467 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:04:22.467 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:04:22.467 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56285/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:22.470 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.59/tcp/56286/p2p/16Uiu2HAmQ1YiveJSzhX5Zn8iV7Gm8u6ooN5J6HuHQdbauhusoirj","/ip4/172.18.136.59/tcp/56287/ws/p2p/16Uiu2HAmQ1YiveJSzhX5Zn8iV7Gm8u6ooN5J6HuHQdbauhusoirj"],"enrUri":"enr:-L24QIMR5oB9VFyM-EOmGP3dDKShotQJ2olnK8cnR5wEzTlle0LVGFsH2sLyHDLHxgH4SE6OZ48MX7McrDISF0WNO38CgmlkgnY0gmlwhKwSiDuKbXVsdGlhZGRyc5YACASsEog7BtveAAoErBKIOwbb390DgnJzhQACAQAAiXNlY3AyNTZrMaEDqLTG1Cb8ucyywTmZ_PdesyccMAlYvDsOsqwAGjW-A9iDdGNwgtveg3VkcILb4IV3YWt1MgU"}'
2025-02-11 04:04:22.470 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:04:22.477 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:04:22.477 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_04-04-21__38b67de8-600c-4a4d-aa42-cc8046ff21e2__wakuorg_nwaku:latest.log
2025-02-11 04:04:22.477 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:04:22.477 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:04:22.478 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:04:22.479 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.46.146
2025-02-11 04:04:22.479 DEBUG [src.node.docker_mananger] Generated ports ['63384', '63385', '63386', '63387', '63388']
2025-02-11 04:04:22.479 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:04:22.479 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:04:22.479 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:04:22.479 DEBUG [src.node.docker_mananger] docker run -i -t -p 63384:63384 -p 63385:63385 -p 63386:63386 -p 63387:63387 -p 63388:63388 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63386 --rest-port=63384 --tcp-port=63385 --discv5-udp-port=63387 --rest-address=0.0.0.0 --nat=extip:172.18.46.146 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=d6dfd05a3fbae5bad1f4ce699dceff9fa15f1dfe2d58e714d64f84d9ad27ef7e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63388 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QIMR5oB9VFyM-EOmGP3dDKShotQJ2olnK8cnR5wEzTlle0LVGFsH2sLyHDLHxgH4SE6OZ48MX7McrDISF0WNO38CgmlkgnY0gmlwhKwSiDuKbXVsdGlhZGRyc5YACASsEog7BtveAAoErBKIOwbb390DgnJzhQACAQAAiXNlY3AyNTZrMaEDqLTG1Cb8ucyywTmZ_PdesyccMAlYvDsOsqwAGjW-A9iDdGNwgtveg3VkcILb4IV3YWt1MgU --content-topic=/myapp/1/latest/proto
2025-02-11 04:04:22.709 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.46.146 waku 0b00c0ebe7a8981cda59b0dea46aaaa314bb88b209796ab255ca10ab6496a512
2025-02-11 04:04:22.758 DEBUG [src.node.docker_mananger] Container started with ID 0b00c0ebe7a8. Setting up logs at ./log/docker/node2_2025-02-11_04-04-21__38b67de8-600c-4a4d-aa42-cc8046ff21e2__wakuorg_nwaku:latest.log
2025-02-11 04:04:22.758 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63384
2025-02-11 04:04:22.758 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:04:23.759 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63384/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:23.766 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:04:23.768 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:04:23.768 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63384/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:23.773 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.46.146/tcp/63385/p2p/16Uiu2HAmVcaxs9D7zmR5NWT7uybLH5b7FFam5mLumywo5nGcGPig","/ip4/172.18.46.146/tcp/63386/ws/p2p/16Uiu2HAmVcaxs9D7zmR5NWT7uybLH5b7FFam5mLumywo5nGcGPig"],"enrUri":"enr:-L24QIwjt4CyV6ZIeAgP_a2q84o_lFG5P4JRdfDIP_L4dCXJMbzGdU2shDIv7WVcgCsUENdU8x94eDnytKr5gtcVX4wCgmlkgnY0gmlwhKwSLpKKbXVsdGlhZGRyc5YACASsEi6SBveZAAoErBIukgb3mt0DgnJzhQACAQAAiXNlY3AyNTZrMaED-_kSoeSkQ0Dk5-utLZKj_0urKjFTPglWIJQIRjJTjbGDdGNwgveZg3VkcIL3m4V3YWt1MgE"}'
2025-02-11 04:04:23.774 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:04:23.775 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63384/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.136.59/tcp/56286/p2p/16Uiu2HAmQ1YiveJSzhX5Zn8iV7Gm8u6ooN5J6HuHQdbauhusoirj"]'
2025-02-11 04:04:23.777 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:23.778 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56285/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/newsService/1.0/weekly/protobuf", "/newsService/1.0/alerts/xml", "/newsService/1.0/updates/json", "/newsService/2.0/alerts/json", "/newsService/2.0/summaries/xml", "/newsService/2.0/highlights/yaml", "/newsService/3.0/weekly/json", "/newsService/3.0/summaries/xml"]'
2025-02-11 04:04:23.784 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:23.784 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63384/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/newsService/1.0/weekly/protobuf", "/newsService/1.0/alerts/xml", "/newsService/1.0/updates/json", "/newsService/2.0/alerts/json", "/newsService/2.0/summaries/xml", "/newsService/2.0/highlights/yaml", "/newsService/3.0/weekly/json", "/newsService/3.0/summaries/xml"]'
2025-02-11 04:04:23.794 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:23.795 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56285/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzEuMC93ZWVrbHkvcHJvdG9idWY=", "contentTopic": "/newsService/1.0/weekly/protobuf", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:04:23.804 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:23.805 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56285/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzEuMC9hbGVydHMveG1s", "contentTopic": "/newsService/1.0/alerts/xml", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:04:23.811 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:23.811 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56285/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzEuMC91cGRhdGVzL2pzb24=", "contentTopic": "/newsService/1.0/updates/json", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:04:23.817 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:23.817 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56285/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzIuMC9hbGVydHMvanNvbg==", "contentTopic": "/newsService/2.0/alerts/json", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:04:23.822 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:23.823 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56285/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzIuMC9zdW1tYXJpZXMveG1s", "contentTopic": "/newsService/2.0/summaries/xml", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:04:23.828 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:23.829 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56285/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzIuMC9oaWdobGlnaHRzL3lhbWw=", "contentTopic": "/newsService/2.0/highlights/yaml", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:04:23.834 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:23.834 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56285/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzMuMC93ZWVrbHkvanNvbg==", "contentTopic": "/newsService/3.0/weekly/json", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:04:23.839 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:23.840 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56285/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzMuMC9zdW1tYXJpZXMveG1s", "contentTopic": "/newsService/3.0/summaries/xml", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:04:23.845 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:23.845 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 04:04:23.945 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63384/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:23.948 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzEuMC93ZWVrbHkvcHJvdG9idWY=","contentTopic":"/newsService/1.0/weekly/protobuf","version":0,"timestamp":1739246663794496000,"ephemeral":false}]'
2025-02-11 04:04:23.948 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63384/relay/v1/auto/messages/%2FnewsService%2F1.0%2Falerts%2Fxml" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:23.950 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzEuMC9hbGVydHMveG1s","contentTopic":"/newsService/1.0/alerts/xml","version":0,"timestamp":1739246663805369088,"ephemeral":false}]'
2025-02-11 04:04:23.951 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63384/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fupdates%2Fjson" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:23.953 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzEuMC91cGRhdGVzL2pzb24=","contentTopic":"/newsService/1.0/updates/json","version":0,"timestamp":1739246663811693312,"ephemeral":false}]'
2025-02-11 04:04:23.953 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63384/relay/v1/auto/messages/%2FnewsService%2F2.0%2Falerts%2Fjson" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:23.955 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzIuMC9hbGVydHMvanNvbg==","contentTopic":"/newsService/2.0/alerts/json","version":0,"timestamp":1739246663817511936,"ephemeral":false}]'
2025-02-11 04:04:23.956 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63384/relay/v1/auto/messages/%2FnewsService%2F2.0%2Fsummaries%2Fxml" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:23.958 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzIuMC9zdW1tYXJpZXMveG1s","contentTopic":"/newsService/2.0/summaries/xml","version":0,"timestamp":1739246663823529216,"ephemeral":false}]'
2025-02-11 04:04:23.959 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63384/relay/v1/auto/messages/%2FnewsService%2F2.0%2Fhighlights%2Fyaml" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:23.961 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzIuMC9oaWdobGlnaHRzL3lhbWw=","contentTopic":"/newsService/2.0/highlights/yaml","version":0,"timestamp":1739246663828923392,"ephemeral":false}]'
2025-02-11 04:04:23.961 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63384/relay/v1/auto/messages/%2FnewsService%2F3.0%2Fweekly%2Fjson" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:23.963 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzMuMC93ZWVrbHkvanNvbg==","contentTopic":"/newsService/3.0/weekly/json","version":0,"timestamp":1739246663834488320,"ephemeral":false}]'
2025-02-11 04:04:23.964 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63384/relay/v1/auto/messages/%2FnewsService%2F3.0%2Fsummaries%2Fxml" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:23.966 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzMuMC9zdW1tYXJpZXMveG1s","contentTopic":"/newsService/3.0/summaries/xml","version":0,"timestamp":1739246663840243200,"ephemeral":false}]'
2025-02-11 04:04:23.967 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:04:23.968 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:04:23.968 DEBUG [src.node.waku_node] Stopping container with id 93a1a9be6189
2025-02-11 04:04:24.816 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:04:24.816 DEBUG [src.node.waku_node] Stopping container with id 0b00c0ebe7a8
2025-02-11 04:04:25.628 ERROR [src.node.docker_mananger] Max retries reached for container 93a1a9be6189. Exiting log stream.
2025-02-11 04:04:26.329 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:04:26.330 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:04:26.338 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:04:26.346 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
