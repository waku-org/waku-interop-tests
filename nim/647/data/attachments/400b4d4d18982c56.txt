2025-02-11 04:03:32.292 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:03:32.293 DEBUG [tests.conftest] Running test: test_light_push_with_missing_content_topic with id: 2025-02-11_04-03-32__4f3dd77a-7e9d-4e8c-9bbc-aec2b80abf55
2025-02-11 04:03:32.293 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:03:32.293 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 04:03:32.302 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:03:32.302 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_04-03-32__4f3dd77a-7e9d-4e8c-9bbc-aec2b80abf55__wakuorg_nwaku:latest.log
2025-02-11 04:03:32.303 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:03:32.303 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:03:32.305 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:03:32.305 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.188.109
2025-02-11 04:03:32.305 DEBUG [src.node.docker_mananger] Generated ports ['24367', '24368', '24369', '24370', '24371']
2025-02-11 04:03:32.305 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:03:32.305 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:03:32.305 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:03:32.306 DEBUG [src.node.docker_mananger] docker run -i -t -p 24367:24367 -p 24368:24368 -p 24369:24369 -p 24370:24370 -p 24371:24371 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24369 --rest-port=24367 --tcp-port=24368 --discv5-udp-port=24370 --rest-address=0.0.0.0 --nat=extip:172.18.188.109 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7fcedf2eec77b4a53f40766ea0f4a8ea04c193049f9e9aa41a7f8598a9d7dd5d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24371 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 04:03:32.559 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.188.109 waku ed5b132c4a3e84de761a5cdd1e522969cad75a83d8fecb7ca9e56bf16ef75c04
2025-02-11 04:03:32.614 DEBUG [src.node.docker_mananger] Container started with ID ed5b132c4a3e. Setting up logs at ./log/docker/receiving_node1_2025-02-11_04-03-32__4f3dd77a-7e9d-4e8c-9bbc-aec2b80abf55__wakuorg_nwaku:latest.log
2025-02-11 04:03:32.616 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 24367
2025-02-11 04:03:32.616 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:03:33.044 ERROR [src.node.docker_mananger] Max retries reached for container 95bf76aeb2bb. Exiting log stream.
2025-02-11 04:03:33.617 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24367/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:03:33.621 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:03:33.621 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:03:33.621 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24367/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:03:33.624 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.188.109/tcp/24368/p2p/16Uiu2HAm9gBgRLZuvLNJH2iCoUi85ay6XakQiigWUNf4jWUEkDfD","/ip4/172.18.188.109/tcp/24369/ws/p2p/16Uiu2HAm9gBgRLZuvLNJH2iCoUi85ay6XakQiigWUNf4jWUEkDfD"],"enrUri":"enr:-L24QEZHLC3MMuxqVx0fPdnMHUXywdM8KBsO9pZa_gGo5p45Yq1_dnCBxQCm_HWz4IUwggk4wsWu6p3V7FUpvQATq6wCgmlkgnY0gmlwhKwSvG2KbXVsdGlhZGRyc5YACASsErxtBl8wAAoErBK8bQZfMd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC07tUqek5IAWdEBWF6s_ed-JI0wdi6Swq4cLPdrheBgCDdGNwgl8wg3VkcIJfMoV3YWt1Mgk"}'
2025-02-11 04:03:33.624 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:03:33.631 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:03:33.631 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-11_04-03-32__4f3dd77a-7e9d-4e8c-9bbc-aec2b80abf55__wakuorg_nwaku:latest.log
2025-02-11 04:03:33.631 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:03:33.632 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:03:33.633 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:03:33.633 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.33.254
2025-02-11 04:03:33.634 DEBUG [src.node.docker_mananger] Generated ports ['48960', '48961', '48962', '48963', '48964']
2025-02-11 04:03:33.634 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:03:33.634 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:03:33.634 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:03:33.634 DEBUG [src.node.docker_mananger] docker run -i -t -p 48960:48960 -p 48961:48961 -p 48962:48962 -p 48963:48963 -p 48964:48964 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48962 --rest-port=48960 --tcp-port=48961 --discv5-udp-port=48963 --rest-address=0.0.0.0 --nat=extip:172.18.33.254 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ceee45c03d8ad81adbdd86e45d5a743b20ea6f14a61e47fd5721f16bb7abeeba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48964 --metrics-logging=true --lightpush=false --relay=true
2025-02-11 04:03:33.895 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.33.254 waku 5c5bd0618c18f1e6b43aaf0e466ed1d710d8e81039b0555d14cd2894940ec301
2025-02-11 04:03:33.949 DEBUG [src.node.docker_mananger] Container started with ID 5c5bd0618c18. Setting up logs at ./log/docker/receiving_node2_2025-02-11_04-03-32__4f3dd77a-7e9d-4e8c-9bbc-aec2b80abf55__wakuorg_nwaku:latest.log
2025-02-11 04:03:33.950 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 48960
2025-02-11 04:03:33.950 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:03:34.952 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48960/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:03:34.955 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:03:34.956 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:03:34.956 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48960/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:03:34.958 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.33.254/tcp/48961/p2p/16Uiu2HAm8Q1YFocVaLvgaFMaAFAUwEfWThPHF8pjNV1uS77ZWWSx","/ip4/172.18.33.254/tcp/48962/ws/p2p/16Uiu2HAm8Q1YFocVaLvgaFMaAFAUwEfWThPHF8pjNV1uS77ZWWSx"],"enrUri":"enr:-L24QFRD1fiXIoGjnIGAU40MKMZ7Y40NPYOs9gxEUpIFcsohDC1GkWOctT3EzeWW5WbKAGYZFUTQv30Pvi43x5d20GECgmlkgnY0gmlwhKwSIf6KbXVsdGlhZGRyc5YACASsEiH-Br9BAAoErBIh_ga_Qt0DgnJzhQADAQAAiXNlY3AyNTZrMaECwLrieDCyNWo2w96lpZPZRnECtnE7WgBPLuvjz5Vi9T2DdGNwgr9Bg3VkcIK_Q4V3YWt1MgE"}'
2025-02-11 04:03:34.958 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:03:34.959 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48960/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.188.109/tcp/24368/p2p/16Uiu2HAm9gBgRLZuvLNJH2iCoUi85ay6XakQiigWUNf4jWUEkDfD"]'
2025-02-11 04:03:35.001 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:03:35.012 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:03:35.012 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_04-03-32__4f3dd77a-7e9d-4e8c-9bbc-aec2b80abf55__wakuorg_nwaku:latest.log
2025-02-11 04:03:35.012 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:03:35.012 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:03:35.014 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:03:35.014 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.104.126
2025-02-11 04:03:35.014 DEBUG [src.node.docker_mananger] Generated ports ['4276', '4277', '4278', '4279', '4280']
2025-02-11 04:03:35.015 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:03:35.015 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:03:35.015 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:03:35.015 DEBUG [src.node.docker_mananger] docker run -i -t -p 4276:4276 -p 4277:4277 -p 4278:4278 -p 4279:4279 -p 4280:4280 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4278 --rest-port=4276 --tcp-port=4277 --discv5-udp-port=4279 --rest-address=0.0.0.0 --nat=extip:172.18.104.126 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2bdbadf9ef8edf838149a39a631be6f8448eaee331da44e8fd70aaccbb2cefa0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4280 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QEZHLC3MMuxqVx0fPdnMHUXywdM8KBsO9pZa_gGo5p45Yq1_dnCBxQCm_HWz4IUwggk4wsWu6p3V7FUpvQATq6wCgmlkgnY0gmlwhKwSvG2KbXVsdGlhZGRyc5YACASsErxtBl8wAAoErBK8bQZfMd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC07tUqek5IAWdEBWF6s_ed-JI0wdi6Swq4cLPdrheBgCDdGNwgl8wg3VkcIJfMoV3YWt1Mgk --lightpushnode=/ip4/172.18.188.109/tcp/24368/p2p/16Uiu2HAm9gBgRLZuvLNJH2iCoUi85ay6XakQiigWUNf4jWUEkDfD --lightpush=true --relay=false
2025-02-11 04:03:35.272 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.104.126 waku 0c5691d3a17c3f359aa4a587ba142accb998b241c2d13f9dad6b40d113d6fd0a
2025-02-11 04:03:35.322 DEBUG [src.node.docker_mananger] Container started with ID 0c5691d3a17c. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_04-03-32__4f3dd77a-7e9d-4e8c-9bbc-aec2b80abf55__wakuorg_nwaku:latest.log
2025-02-11 04:03:35.323 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 4276
2025-02-11 04:03:35.323 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:03:36.325 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4276/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:03:36.328 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:03:36.329 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:03:36.329 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4276/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:03:36.332 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.126/tcp/4277/p2p/16Uiu2HAm4Py9iVt6kXqor2B734aJgZ9H4VgkvGkDy6EpRAeSNA9L","/ip4/172.18.104.126/tcp/4278/ws/p2p/16Uiu2HAm4Py9iVt6kXqor2B734aJgZ9H4VgkvGkDy6EpRAeSNA9L"],"enrUri":"enr:-L24QCE9DV33FWOJhNMhSrSFA1ah_2L_YQh_GS3-rcf2ZiSZeEXGQSfsI6KuXozyZpzGb6VdJZxdS-1KT6DjKjK_3hICgmlkgnY0gmlwhKwSaH6KbXVsdGlhZGRyc5YACASsEmh-BhC1AAoErBJofgYQtt0DgnJzhQADAQAAiXNlY3AyNTZrMaEChUlvpc-rAccy8XdLiHpHDamjgwW5Not57TRNpD5gjV-DdGNwghC1g3VkcIIQt4V3YWt1Mgg"}'
2025-02-11 04:03:36.332 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:03:36.333 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4276/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.188.109/tcp/24368/p2p/16Uiu2HAm9gBgRLZuvLNJH2iCoUi85ay6XakQiigWUNf4jWUEkDfD"]'
2025-02-11 04:03:36.374 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:03:36.375 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4276/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.33.254/tcp/48961/p2p/16Uiu2HAm8Q1YFocVaLvgaFMaAFAUwEfWThPHF8pjNV1uS77ZWWSx"]'
2025-02-11 04:03:36.403 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:03:36.405 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24367/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:03:36.417 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:03:36.418 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48960/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:03:36.421 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:03:36.424 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4276/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "timestamp": 1739246616424505088}}'
2025-02-11 04:03:36.427 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:4276/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-11 04:03:36.429 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:03:36.430 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:03:36.430 DEBUG [src.node.waku_node] Stopping container with id ed5b132c4a3e
2025-02-11 04:03:37.175 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:03:37.177 DEBUG [src.node.waku_node] Stopping container with id 5c5bd0618c18
2025-02-11 04:03:38.013 ERROR [src.node.docker_mananger] Max retries reached for container ed5b132c4a3e. Exiting log stream.
2025-02-11 04:03:38.727 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:03:38.727 DEBUG [src.node.waku_node] Stopping container with id 0c5691d3a17c
2025-02-11 04:03:39.544 ERROR [src.node.docker_mananger] Max retries reached for container 5c5bd0618c18. Exiting log stream.
2025-02-11 04:03:40.248 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:03:40.250 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:03:40.263 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:03:40.269 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:03:40.274 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
