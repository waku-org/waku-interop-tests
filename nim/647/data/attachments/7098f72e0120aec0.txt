2025-02-11 04:03:33.472 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:03:33.472 DEBUG [tests.conftest] Running test: test_light_push_with_with_large_meta with id: 2025-02-11_04-03-33__a388c30f-f5d4-4e7c-bf40-9130fb5991b2
2025-02-11 04:03:33.473 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:03:33.473 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 04:03:33.479 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:03:33.479 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_04-03-33__a388c30f-f5d4-4e7c-bf40-9130fb5991b2__wakuorg_nwaku:latest.log
2025-02-11 04:03:33.479 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:03:33.479 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:03:33.481 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:03:33.481 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.153.27
2025-02-11 04:03:33.481 DEBUG [src.node.docker_mananger] Generated ports ['65149', '65150', '65151', '65152', '65153']
2025-02-11 04:03:33.481 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:03:33.481 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:03:33.481 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:03:33.482 DEBUG [src.node.docker_mananger] docker run -i -t -p 65149:65149 -p 65150:65150 -p 65151:65151 -p 65152:65152 -p 65153:65153 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65151 --rest-port=65149 --tcp-port=65150 --discv5-udp-port=65152 --rest-address=0.0.0.0 --nat=extip:172.18.153.27 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=db9fefdede79863cdc5a22cfacf79c9f510acbba9fdccda5edddfef1a94c1112 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65153 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 04:03:33.699 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.153.27 waku 2734dd6208a4ec07d4befe5840fede095be748b9850ea95eb7e1b31680b4d257
2025-02-11 04:03:33.745 DEBUG [src.node.docker_mananger] Container started with ID 2734dd6208a4. Setting up logs at ./log/docker/receiving_node1_2025-02-11_04-03-33__a388c30f-f5d4-4e7c-bf40-9130fb5991b2__wakuorg_nwaku:latest.log
2025-02-11 04:03:33.747 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 65149
2025-02-11 04:03:33.747 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:03:34.243 ERROR [src.node.docker_mananger] Max retries reached for container dee32f7c648e. Exiting log stream.
2025-02-11 04:03:34.747 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65149/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:03:34.750 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:03:34.750 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:03:34.751 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65149/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:03:34.753 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.153.27/tcp/65150/p2p/16Uiu2HAmHLLDMd5gagZKBkC3jDZnTbCZ4oj3fRN6mWSBRV81j7KW","/ip4/172.18.153.27/tcp/65151/ws/p2p/16Uiu2HAmHLLDMd5gagZKBkC3jDZnTbCZ4oj3fRN6mWSBRV81j7KW"],"enrUri":"enr:-L24QERM60o3pDUBK9XV2nquNIgUWqz0Oj5tFHQHh2I044PuMNRAap1tCok_Kia15jNLvvO8mEEkWToiJC7J6dTh-SkCgmlkgnY0gmlwhKwSmRuKbXVsdGlhZGRyc5YACASsEpkbBv5-AAoErBKZGwb-f90DgnJzhQADAQAAiXNlY3AyNTZrMaEDRYLb0bSDKFs037b5raJCmZsqovWTnLU5se3SrronF_mDdGNwgv5-g3VkcIL-gIV3YWt1Mgk"}'
2025-02-11 04:03:34.753 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:03:34.759 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:03:34.759 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-11_04-03-33__a388c30f-f5d4-4e7c-bf40-9130fb5991b2__wakuorg_nwaku:latest.log
2025-02-11 04:03:34.759 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:03:34.760 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:03:34.761 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:03:34.761 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.56.161
2025-02-11 04:03:34.761 DEBUG [src.node.docker_mananger] Generated ports ['46652', '46653', '46654', '46655', '46656']
2025-02-11 04:03:34.761 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:03:34.761 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:03:34.761 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:03:34.762 DEBUG [src.node.docker_mananger] docker run -i -t -p 46652:46652 -p 46653:46653 -p 46654:46654 -p 46655:46655 -p 46656:46656 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46654 --rest-port=46652 --tcp-port=46653 --discv5-udp-port=46655 --rest-address=0.0.0.0 --nat=extip:172.18.56.161 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3f401bd22bfdbed4e65b7bba04a68a6a48ce236edaea611b29b84a46dbbcdeea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46656 --metrics-logging=true --lightpush=false --relay=true
2025-02-11 04:03:34.987 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.56.161 waku a7ff1e67aeb7d6767d7451db5265ff243511ac1dae73c376865903f1c0d4ea8e
2025-02-11 04:03:35.036 DEBUG [src.node.docker_mananger] Container started with ID a7ff1e67aeb7. Setting up logs at ./log/docker/receiving_node2_2025-02-11_04-03-33__a388c30f-f5d4-4e7c-bf40-9130fb5991b2__wakuorg_nwaku:latest.log
2025-02-11 04:03:35.037 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46652
2025-02-11 04:03:35.037 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:03:36.037 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46652/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:03:36.040 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:03:36.040 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:03:36.040 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46652/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:03:36.042 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.56.161/tcp/46653/p2p/16Uiu2HAm43D4ThLbC6refJf3f5HeWJE9mX6G8osfedKRRMTg3yu8","/ip4/172.18.56.161/tcp/46654/ws/p2p/16Uiu2HAm43D4ThLbC6refJf3f5HeWJE9mX6G8osfedKRRMTg3yu8"],"enrUri":"enr:-L24QBA5LBZ8nMQjwnnY_Zr8zUxJvXP18iZaJyygN105_x05MQuF3hw9-4g751zwI3NtMVw_da0rv_51SZ5o5sM9CQwCgmlkgnY0gmlwhKwSOKGKbXVsdGlhZGRyc5YACASsEjihBrY9AAoErBI4oQa2Pt0DgnJzhQADAQAAiXNlY3AyNTZrMaECf_f3bsO0RsmD6DdqQXf55vJw11SWgG3i8Xaxjl28zK-DdGNwgrY9g3VkcIK2P4V3YWt1MgE"}'
2025-02-11 04:03:36.042 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:03:36.043 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46652/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.153.27/tcp/65150/p2p/16Uiu2HAmHLLDMd5gagZKBkC3jDZnTbCZ4oj3fRN6mWSBRV81j7KW"]'
2025-02-11 04:03:36.084 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:03:36.092 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:03:36.092 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_04-03-33__a388c30f-f5d4-4e7c-bf40-9130fb5991b2__wakuorg_nwaku:latest.log
2025-02-11 04:03:36.092 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:03:36.093 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:03:36.094 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:03:36.094 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.178.213
2025-02-11 04:03:36.094 DEBUG [src.node.docker_mananger] Generated ports ['54877', '54878', '54879', '54880', '54881']
2025-02-11 04:03:36.095 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:03:36.095 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:03:36.095 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:03:36.095 DEBUG [src.node.docker_mananger] docker run -i -t -p 54877:54877 -p 54878:54878 -p 54879:54879 -p 54880:54880 -p 54881:54881 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54879 --rest-port=54877 --tcp-port=54878 --discv5-udp-port=54880 --rest-address=0.0.0.0 --nat=extip:172.18.178.213 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9f51a5cd8250fa7d04cbdc4e02ab1d8a0a5d7128c1cfbfb3652cbb86f5c3dcc3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54881 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QERM60o3pDUBK9XV2nquNIgUWqz0Oj5tFHQHh2I044PuMNRAap1tCok_Kia15jNLvvO8mEEkWToiJC7J6dTh-SkCgmlkgnY0gmlwhKwSmRuKbXVsdGlhZGRyc5YACASsEpkbBv5-AAoErBKZGwb-f90DgnJzhQADAQAAiXNlY3AyNTZrMaEDRYLb0bSDKFs037b5raJCmZsqovWTnLU5se3SrronF_mDdGNwgv5-g3VkcIL-gIV3YWt1Mgk --lightpushnode=/ip4/172.18.153.27/tcp/65150/p2p/16Uiu2HAmHLLDMd5gagZKBkC3jDZnTbCZ4oj3fRN6mWSBRV81j7KW --lightpush=true --relay=false
2025-02-11 04:03:36.322 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.178.213 waku f5ac648d32ba99ec5e39d68190371aa30b192e6a8705f032de38eeb6a6a25b28
2025-02-11 04:03:36.369 DEBUG [src.node.docker_mananger] Container started with ID f5ac648d32ba. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_04-03-33__a388c30f-f5d4-4e7c-bf40-9130fb5991b2__wakuorg_nwaku:latest.log
2025-02-11 04:03:36.370 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 54877
2025-02-11 04:03:36.370 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:03:37.370 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54877/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:03:37.373 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:03:37.373 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:03:37.373 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54877/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:03:37.375 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.178.213/tcp/54878/p2p/16Uiu2HAmE5iVownQXN4BycS3CFJG7FhToDm1wFxDizqh1V435Ye8","/ip4/172.18.178.213/tcp/54879/ws/p2p/16Uiu2HAmE5iVownQXN4BycS3CFJG7FhToDm1wFxDizqh1V435Ye8"],"enrUri":"enr:-L24QKCwNqI0EoLz-yTZSt-h60XCPQekvDBm7Iec-cl5tYcTP41hY-g3Kp-tMC9V90zvySaPDrnOWBAi-ZHobcdDvcQCgmlkgnY0gmlwhKwSstWKbXVsdGlhZGRyc5YACASsErLVBtZeAAoErBKy1QbWX90DgnJzhQADAQAAiXNlY3AyNTZrMaEDFTFIMQx3wkHmosS_sUXcrCL5FBlWz47DTgphGaD2RmWDdGNwgtZeg3VkcILWYIV3YWt1Mgg"}'
2025-02-11 04:03:37.375 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:03:37.376 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54877/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.153.27/tcp/65150/p2p/16Uiu2HAmHLLDMd5gagZKBkC3jDZnTbCZ4oj3fRN6mWSBRV81j7KW"]'
2025-02-11 04:03:37.414 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:03:37.414 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54877/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.56.161/tcp/46653/p2p/16Uiu2HAm43D4ThLbC6refJf3f5HeWJE9mX6G8osfedKRRMTg3yu8"]'
2025-02-11 04:03:37.447 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:03:37.447 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65149/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:03:37.452 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:03:37.454 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46652/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:03:37.461 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:03:37.464 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 04:03:37.464 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54877/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739246617463952640, "meta": "YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYQ=="}}'
2025-02-11 04:03:37.473 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:54877/lightpush/v1/message. Response content: b'Failed to request a message push: decode_rpc_failure: (kind: InvalidLengthField, field: "meta")'
2025-02-11 04:03:37.475 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:03:37.476 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:03:37.476 DEBUG [src.node.waku_node] Stopping container with id 2734dd6208a4
2025-02-11 04:03:38.221 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:03:38.222 DEBUG [src.node.waku_node] Stopping container with id a7ff1e67aeb7
2025-02-11 04:03:39.033 ERROR [src.node.docker_mananger] Max retries reached for container 2734dd6208a4. Exiting log stream.
2025-02-11 04:03:39.710 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:03:39.711 DEBUG [src.node.waku_node] Stopping container with id f5ac648d32ba
2025-02-11 04:03:40.522 ERROR [src.node.docker_mananger] Max retries reached for container a7ff1e67aeb7. Exiting log stream.
2025-02-11 04:03:41.179 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:03:41.182 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:03:41.188 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:03:41.194 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:03:41.199 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
