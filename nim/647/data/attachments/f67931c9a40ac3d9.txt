2025-02-11 04:04:39.126 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:04:39.126 DEBUG [tests.conftest] Running test: test_main_node_only_lightpush__peer_only_filter with id: 2025-02-11_04-04-39__27689fed-d3c0-44d9-8b4e-a37a04503d95
2025-02-11 04:04:39.127 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:04:39.127 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 04:04:39.133 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:04:39.133 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_04-04-39__27689fed-d3c0-44d9-8b4e-a37a04503d95__wakuorg_nwaku:latest.log
2025-02-11 04:04:39.134 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:04:39.134 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:04:39.135 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:04:39.135 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.79.206
2025-02-11 04:04:39.135 DEBUG [src.node.docker_mananger] Generated ports ['10730', '10731', '10732', '10733', '10734']
2025-02-11 04:04:39.135 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:04:39.135 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:04:39.136 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:04:39.136 DEBUG [src.node.docker_mananger] docker run -i -t -p 10730:10730 -p 10731:10731 -p 10732:10732 -p 10733:10733 -p 10734:10734 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10732 --rest-port=10730 --tcp-port=10731 --discv5-udp-port=10733 --rest-address=0.0.0.0 --nat=extip:172.18.79.206 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3ec74c94ecc8bed9ac8b0ef89a9fdaa183e3dbe11a3f35e7caa93da2e3f9dbbd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10734 --metrics-logging=true --lightpush=false --relay=false --filter=true
2025-02-11 04:04:39.355 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.79.206 waku 0ee75fd329f0841b4f03a5a43503e0642e6b5a9929d3590fd3d2367347c15f8c
2025-02-11 04:04:39.399 DEBUG [src.node.docker_mananger] Container started with ID 0ee75fd329f0. Setting up logs at ./log/docker/receiving_node1_2025-02-11_04-04-39__27689fed-d3c0-44d9-8b4e-a37a04503d95__wakuorg_nwaku:latest.log
2025-02-11 04:04:39.399 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 10730
2025-02-11 04:04:39.399 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:04:39.932 ERROR [src.node.docker_mananger] Max retries reached for container b69e35c5b614. Exiting log stream.
2025-02-11 04:04:40.401 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10730/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:40.404 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:04:40.404 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:04:40.404 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10730/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:40.406 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.79.206/tcp/10731/p2p/16Uiu2HAmSNnVAbQUs5i1bNKwCRaoLDQEiqQtdi7KNpPZZikRFEZB","/ip4/172.18.79.206/tcp/10732/ws/p2p/16Uiu2HAmSNnVAbQUs5i1bNKwCRaoLDQEiqQtdi7KNpPZZikRFEZB"],"enrUri":"enr:-L24QMB7vntcLk6eeg1BsCJJmg-9oIy1msal5UJ2lgfhfm5jbfpEYkejirbq9qEv7QE7Xykv4XuTyMI50JN2RBLbTKICgmlkgnY0gmlwhKwST86KbXVsdGlhZGRyc5YACASsEk_OBinrAAoErBJPzgYp7N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDy9zovKs5VavHb-fqp6Nh7cWukuAYgB6vIdARjfDGK-6DdGNwginrg3VkcIIp7YV3YWt1MgQ"}'
2025-02-11 04:04:40.407 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:04:40.413 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:04:40.413 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_04-04-39__27689fed-d3c0-44d9-8b4e-a37a04503d95__wakuorg_nwaku:latest.log
2025-02-11 04:04:40.414 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:04:40.414 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:04:40.415 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:04:40.415 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.144.60
2025-02-11 04:04:40.415 DEBUG [src.node.docker_mananger] Generated ports ['38715', '38716', '38717', '38718', '38719']
2025-02-11 04:04:40.415 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:04:40.416 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:04:40.416 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:04:40.416 DEBUG [src.node.docker_mananger] docker run -i -t -p 38715:38715 -p 38716:38716 -p 38717:38717 -p 38718:38718 -p 38719:38719 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38717 --rest-port=38715 --tcp-port=38716 --discv5-udp-port=38718 --rest-address=0.0.0.0 --nat=extip:172.18.144.60 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c35cee3c6c24e0ebe71fcef956bd06dd260db75cdb702fb0e59d06bff504b571 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38719 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMB7vntcLk6eeg1BsCJJmg-9oIy1msal5UJ2lgfhfm5jbfpEYkejirbq9qEv7QE7Xykv4XuTyMI50JN2RBLbTKICgmlkgnY0gmlwhKwST86KbXVsdGlhZGRyc5YACASsEk_OBinrAAoErBJPzgYp7N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDy9zovKs5VavHb-fqp6Nh7cWukuAYgB6vIdARjfDGK-6DdGNwginrg3VkcIIp7YV3YWt1MgQ --lightpushnode=/ip4/172.18.79.206/tcp/10731/p2p/16Uiu2HAmSNnVAbQUs5i1bNKwCRaoLDQEiqQtdi7KNpPZZikRFEZB --lightpush=true --relay=false
2025-02-11 04:04:40.647 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.144.60 waku e2b4ece9e8fa9e2e0572dc6a26dff4f6067b9eedd47e6cbd3a6dee83c03c0bce
2025-02-11 04:04:40.695 DEBUG [src.node.docker_mananger] Container started with ID e2b4ece9e8fa. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_04-04-39__27689fed-d3c0-44d9-8b4e-a37a04503d95__wakuorg_nwaku:latest.log
2025-02-11 04:04:40.696 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38715
2025-02-11 04:04:40.696 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:04:41.696 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38715/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:41.700 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:04:41.700 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:04:41.700 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38715/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:41.702 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.144.60/tcp/38716/p2p/16Uiu2HAkwokRBxZv6zTbragRACgvuZUEXZgR5bw7uCzRyzLTNEFo","/ip4/172.18.144.60/tcp/38717/ws/p2p/16Uiu2HAkwokRBxZv6zTbragRACgvuZUEXZgR5bw7uCzRyzLTNEFo"],"enrUri":"enr:-L24QKMKyF15cNFPLd10hHjuHZ4z3gRY0P8MQVQ-qeY0wls_NRg8NQHu5i68YUKe9r76UCmHSSo5lRjmoWh4fJb7lE4CgmlkgnY0gmlwhKwSkDyKbXVsdGlhZGRyc5YACASsEpA8Bpc8AAoErBKQPAaXPd0DgnJzhQADAQAAiXNlY3AyNTZrMaECI18raIOS6QOpfRRoM_CPyyCItVkpwjnnCn5h_EAWoDaDdGNwgpc8g3VkcIKXPoV3YWt1Mgg"}'
2025-02-11 04:04:41.702 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:04:41.703 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38715/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.79.206/tcp/10731/p2p/16Uiu2HAmSNnVAbQUs5i1bNKwCRaoLDQEiqQtdi7KNpPZZikRFEZB"]'
2025-02-11 04:04:41.738 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:41.741 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38715/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739246681741203712}}'
2025-02-11 04:04:41.764 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:38715/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2025-02-11 04:04:41.765 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:04:41.766 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:04:41.766 DEBUG [src.node.waku_node] Stopping container with id 0ee75fd329f0
2025-02-11 04:04:42.579 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:04:42.580 DEBUG [src.node.waku_node] Stopping container with id e2b4ece9e8fa
2025-02-11 04:04:43.392 ERROR [src.node.docker_mananger] Max retries reached for container 0ee75fd329f0. Exiting log stream.
2025-02-11 04:04:43.959 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:04:43.960 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:04:43.963 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:04:43.966 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
