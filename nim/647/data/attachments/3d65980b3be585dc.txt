2025-02-11 04:05:21.694 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:05:21.694 DEBUG [tests.conftest] Running test: test_time_filter_negative_end_time with id: 2025-02-11_04-05-21__6a4883c5-6479-4297-a26c-a7a422292cc9
2025-02-11 04:05:21.694 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:05:21.694 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 04:05:21.695 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-11 04:05:21.701 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:05:21.701 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-11_04-05-21__6a4883c5-6479-4297-a26c-a7a422292cc9__wakuorg_nwaku:latest.log
2025-02-11 04:05:21.701 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:05:21.701 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:05:21.702 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:05:21.703 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.234.25
2025-02-11 04:05:21.703 DEBUG [src.node.docker_mananger] Generated ports ['46147', '46148', '46149', '46150', '46151']
2025-02-11 04:05:21.703 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:05:21.703 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:05:21.703 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:05:21.703 DEBUG [src.node.docker_mananger] docker run -i -t -p 46147:46147 -p 46148:46148 -p 46149:46149 -p 46150:46150 -p 46151:46151 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46149 --rest-port=46147 --tcp-port=46148 --discv5-udp-port=46150 --rest-address=0.0.0.0 --nat=extip:172.18.234.25 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c086e2e0be5cf10fbb5d0f00b9be8dc8ee7baf8203e0ac8a1a7442f5db2ce6fe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46151 --metrics-logging=true --store=true --relay=true
2025-02-11 04:05:21.936 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.234.25 waku bbffef38651c563bc7287ec9d16075b76c3f1486d0fd1f7cb23ac0eb0a1c1755
2025-02-11 04:05:21.989 DEBUG [src.node.docker_mananger] Container started with ID bbffef38651c. Setting up logs at ./log/docker/publishing_node1_2025-02-11_04-05-21__6a4883c5-6479-4297-a26c-a7a422292cc9__wakuorg_nwaku:latest.log
2025-02-11 04:05:21.991 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46147
2025-02-11 04:05:21.991 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:05:22.497 ERROR [src.node.docker_mananger] Max retries reached for container 3c9db965c664. Exiting log stream.
2025-02-11 04:05:22.992 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46147/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:22.995 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:05:22.995 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:05:22.995 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46147/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:22.997 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.234.25/tcp/46148/p2p/16Uiu2HAkzqPqJstLJ38U4HobGeb2Jm6SyDmqhbW4pX1NAJMPwKkd","/ip4/172.18.234.25/tcp/46149/ws/p2p/16Uiu2HAkzqPqJstLJ38U4HobGeb2Jm6SyDmqhbW4pX1NAJMPwKkd"],"enrUri":"enr:-L24QOdohxKBTyhuzzrzhBgCxg3uSDRRUj_JOIDJ547J-E_LQ6LAtpCTUPBc0eTA0VSGUAPFNfwJTp5cYEQURlVNTLYCgmlkgnY0gmlwhKwS6hmKbXVsdGlhZGRyc5YACASsEuoZBrREAAoErBLqGQa0Rd0DgnJzhQADAQAAiXNlY3AyNTZrMaECUF4eDSTmnRNFriIdDZ1ClqPjvabatySpH1Oa3wVQ6HqDdGNwgrREg3VkcIK0RoV3YWt1MgM"}'
2025-02-11 04:05:22.997 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:05:23.004 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:05:23.004 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-11_04-05-21__6a4883c5-6479-4297-a26c-a7a422292cc9__wakuorg_nwaku:latest.log
2025-02-11 04:05:23.005 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:05:23.005 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:05:23.006 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:05:23.006 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.13.40
2025-02-11 04:05:23.006 DEBUG [src.node.docker_mananger] Generated ports ['45889', '45890', '45891', '45892', '45893']
2025-02-11 04:05:23.007 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:05:23.007 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:05:23.007 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:05:23.007 DEBUG [src.node.docker_mananger] docker run -i -t -p 45889:45889 -p 45890:45890 -p 45891:45891 -p 45892:45892 -p 45893:45893 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45891 --rest-port=45889 --tcp-port=45890 --discv5-udp-port=45892 --rest-address=0.0.0.0 --nat=extip:172.18.13.40 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aebae10f7e422717bf470b8ead8eb9abbcceebbdadf8e95ef352347b16aee9c8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45893 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QOdohxKBTyhuzzrzhBgCxg3uSDRRUj_JOIDJ547J-E_LQ6LAtpCTUPBc0eTA0VSGUAPFNfwJTp5cYEQURlVNTLYCgmlkgnY0gmlwhKwS6hmKbXVsdGlhZGRyc5YACASsEuoZBrREAAoErBLqGQa0Rd0DgnJzhQADAQAAiXNlY3AyNTZrMaECUF4eDSTmnRNFriIdDZ1ClqPjvabatySpH1Oa3wVQ6HqDdGNwgrREg3VkcIK0RoV3YWt1MgM --storenode=/ip4/172.18.234.25/tcp/46148/p2p/16Uiu2HAkzqPqJstLJ38U4HobGeb2Jm6SyDmqhbW4pX1NAJMPwKkd --store=true --relay=true
2025-02-11 04:05:23.233 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.13.40 waku dce029c42db14478036f02e8aaf0e278e86748f1e8f5cfcebaec4d9713f397ec
2025-02-11 04:05:23.279 DEBUG [src.node.docker_mananger] Container started with ID dce029c42db1. Setting up logs at ./log/docker/store_node1_2025-02-11_04-05-21__6a4883c5-6479-4297-a26c-a7a422292cc9__wakuorg_nwaku:latest.log
2025-02-11 04:05:23.280 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45889
2025-02-11 04:05:23.281 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:05:24.282 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45889/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:24.285 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:05:24.285 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:05:24.286 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45889/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:24.288 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.13.40/tcp/45890/p2p/16Uiu2HAmMD4Ft7RDnVPV5HqXf449DSBb9p5XZSY7UqfAhe3FHean","/ip4/172.18.13.40/tcp/45891/ws/p2p/16Uiu2HAmMD4Ft7RDnVPV5HqXf449DSBb9p5XZSY7UqfAhe3FHean"],"enrUri":"enr:-L24QM-O4Gugi0VwsvpGJOm-cvflqGDlCisKNxB115xRySyCd-GVnGLXx5wlhmdUEhIOPEzIaynKqrnI_mFY_n4Rpx4CgmlkgnY0gmlwhKwSDSiKbXVsdGlhZGRyc5YACASsEg0oBrNCAAoErBINKAazQ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDfxR_qiv08cd-YsPTX2sW08DxUFz4W5VMxaAXBmBgWruDdGNwgrNCg3VkcIKzRIV3YWt1MgM"}'
2025-02-11 04:05:24.288 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:05:24.288 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45889/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.234.25/tcp/46148/p2p/16Uiu2HAkzqPqJstLJ38U4HobGeb2Jm6SyDmqhbW4pX1NAJMPwKkd"]'
2025-02-11 04:05:24.291 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:24.291 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46147/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:05:24.293 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:24.294 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45889/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:05:24.296 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:24.297 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:24.297 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46147/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:24.303 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:24.304 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:24.504 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:24.505 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46147/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:24.510 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:24.510 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:24.711 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:24.711 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46147/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:24.717 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:24.717 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:24.918 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:24.918 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46147/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:24.924 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:24.925 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:25.125 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:25.126 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46147/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:25.131 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:25.132 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:25.333 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:25.333 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46147/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:25.339 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:25.339 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:25.540 DEBUG [tests.store.test_time_filter] inquering stored messages with end time -10000
2025-02-11 04:05:25.540 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46147/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&endTime=-10000&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:25.543 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x46e599340970b2ff40cbfc41d7ad5e96ea2584abd6c46567c9ce965a29a83fc0","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739246721297105920,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x6bdb9b8136f50259daef5817bad7da03b1c9d8ce9bb535fd2ac113bd25d79586","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739246723297112064,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x829eb9e1a3fe0bf172f8dc18629829d7690dc560bf0c784bc527eacd2243c679","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739246724197114112,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0xa0e178afa62372b81e9ccabbafdc872d0c8160e9c9364098357cf5d3f3ba1682","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739246724397115904,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0xcae979c5f7bacb053ba622b5ee07eeb28a468df2a94f0e6f78381f52ec90749d","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739246726297117952,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x9e1fae51fad19856829c4be6b197f04c43f6ef46a08d79293d94d864bf63f9e6","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739246734297120000,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
2025-02-11 04:05:25.544 DEBUG [tests.store.test_time_filter] number of messages stored for  end time = -10000 is  6
2025-02-11 04:05:25.544 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45889/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&endTime=-10000&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:25.547 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x46e599340970b2ff40cbfc41d7ad5e96ea2584abd6c46567c9ce965a29a83fc0","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739246721297105920,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x6bdb9b8136f50259daef5817bad7da03b1c9d8ce9bb535fd2ac113bd25d79586","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739246723297112064,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x829eb9e1a3fe0bf172f8dc18629829d7690dc560bf0c784bc527eacd2243c679","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739246724197114112,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0xa0e178afa62372b81e9ccabbafdc872d0c8160e9c9364098357cf5d3f3ba1682","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739246724397115904,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0xcae979c5f7bacb053ba622b5ee07eeb28a468df2a94f0e6f78381f52ec90749d","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739246726297117952,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x9e1fae51fad19856829c4be6b197f04c43f6ef46a08d79293d94d864bf63f9e6","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739246734297120000,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
2025-02-11 04:05:25.548 DEBUG [tests.store.test_time_filter] number of messages stored for  end time = -10000 is  6
2025-02-11 04:05:25.550 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:05:25.551 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:05:25.551 DEBUG [src.node.waku_node] Stopping container with id bbffef38651c
2025-02-11 04:05:26.541 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:05:26.541 DEBUG [src.node.waku_node] Stopping container with id dce029c42db1
2025-02-11 04:05:27.353 ERROR [src.node.docker_mananger] Max retries reached for container bbffef38651c. Exiting log stream.
2025-02-11 04:05:28.040 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:05:28.042 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:05:28.048 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:05:28.055 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
