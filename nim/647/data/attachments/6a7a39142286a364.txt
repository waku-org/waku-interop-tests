2025-02-11 04:05:33.758 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:05:33.758 DEBUG [tests.conftest] Running test: test_store_with_invalid_hash with id: 2025-02-11_04-05-33__0cd984a4-0cf1-4c03-a141-b69ba33848da
2025-02-11 04:05:33.758 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:05:33.759 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 04:05:33.759 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-11 04:05:33.765 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:05:33.765 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-11_04-05-33__0cd984a4-0cf1-4c03-a141-b69ba33848da__wakuorg_nwaku:latest.log
2025-02-11 04:05:33.765 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:05:33.765 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:05:33.766 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:05:33.767 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.117.107
2025-02-11 04:05:33.767 DEBUG [src.node.docker_mananger] Generated ports ['32394', '32395', '32396', '32397', '32398']
2025-02-11 04:05:33.767 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:05:33.767 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:05:33.767 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:05:33.767 DEBUG [src.node.docker_mananger] docker run -i -t -p 32394:32394 -p 32395:32395 -p 32396:32396 -p 32397:32397 -p 32398:32398 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32396 --rest-port=32394 --tcp-port=32395 --discv5-udp-port=32397 --rest-address=0.0.0.0 --nat=extip:172.18.117.107 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cdb2ed22d242ffeccdb61fc7add1de32c3a8e0abd3a92b1e09488f11ecddedad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32398 --metrics-logging=true --store=true --relay=true
2025-02-11 04:05:33.991 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.117.107 waku 30af27b06314086d1f1ff138fa465e8e092b99e7f7b07982a89ec078783bd615
2025-02-11 04:05:34.039 DEBUG [src.node.docker_mananger] Container started with ID 30af27b06314. Setting up logs at ./log/docker/publishing_node1_2025-02-11_04-05-33__0cd984a4-0cf1-4c03-a141-b69ba33848da__wakuorg_nwaku:latest.log
2025-02-11 04:05:34.041 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32394
2025-02-11 04:05:34.041 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:05:34.563 ERROR [src.node.docker_mananger] Max retries reached for container cb5978fe1d23. Exiting log stream.
2025-02-11 04:05:35.042 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32394/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:35.044 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:05:35.044 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:05:35.045 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32394/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:35.047 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.117.107/tcp/32395/p2p/16Uiu2HAmN7z7n1M1pG7vyScD3Pu1M9ZdCWtygX8rLtwj9DUi1haW","/ip4/172.18.117.107/tcp/32396/ws/p2p/16Uiu2HAmN7z7n1M1pG7vyScD3Pu1M9ZdCWtygX8rLtwj9DUi1haW"],"enrUri":"enr:-L24QNZw5VHZlWAd1gwOf6hEnEeX4mUeejEqnN-P7TFwlxcrQ7Y8L3m7pZMh_2pj20_b1AWYxgdVMpTg2tTcTmQbugoCgmlkgnY0gmlwhKwSdWuKbXVsdGlhZGRyc5YACASsEnVrBn6LAAoErBJ1awZ-jN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDjKOZynu8FALiTMsEh-XcfLV8nYGxbcymH7opZ0ZVzaeDdGNwgn6Lg3VkcIJ-jYV3YWt1MgM"}'
2025-02-11 04:05:35.047 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:05:35.053 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:05:35.054 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-11_04-05-33__0cd984a4-0cf1-4c03-a141-b69ba33848da__wakuorg_nwaku:latest.log
2025-02-11 04:05:35.054 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:05:35.054 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:05:35.055 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:05:35.055 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.139.144
2025-02-11 04:05:35.055 DEBUG [src.node.docker_mananger] Generated ports ['46020', '46021', '46022', '46023', '46024']
2025-02-11 04:05:35.056 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:05:35.056 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:05:35.056 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:05:35.056 DEBUG [src.node.docker_mananger] docker run -i -t -p 46020:46020 -p 46021:46021 -p 46022:46022 -p 46023:46023 -p 46024:46024 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46022 --rest-port=46020 --tcp-port=46021 --discv5-udp-port=46023 --rest-address=0.0.0.0 --nat=extip:172.18.139.144 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7d53d50cdbe2d2adee6370990e3d94bcd0cb87eed890ff285586f72ff5d0c72d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46024 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QNZw5VHZlWAd1gwOf6hEnEeX4mUeejEqnN-P7TFwlxcrQ7Y8L3m7pZMh_2pj20_b1AWYxgdVMpTg2tTcTmQbugoCgmlkgnY0gmlwhKwSdWuKbXVsdGlhZGRyc5YACASsEnVrBn6LAAoErBJ1awZ-jN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDjKOZynu8FALiTMsEh-XcfLV8nYGxbcymH7opZ0ZVzaeDdGNwgn6Lg3VkcIJ-jYV3YWt1MgM --storenode=/ip4/172.18.117.107/tcp/32395/p2p/16Uiu2HAmN7z7n1M1pG7vyScD3Pu1M9ZdCWtygX8rLtwj9DUi1haW --store=true --relay=true
2025-02-11 04:05:35.281 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.139.144 waku a921213d4e1462f5a6e79453b88e63c5d0da05ec394b1227247c5efb9a399092
2025-02-11 04:05:35.327 DEBUG [src.node.docker_mananger] Container started with ID a921213d4e14. Setting up logs at ./log/docker/store_node1_2025-02-11_04-05-33__0cd984a4-0cf1-4c03-a141-b69ba33848da__wakuorg_nwaku:latest.log
2025-02-11 04:05:35.327 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46020
2025-02-11 04:05:35.327 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:05:36.328 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46020/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:36.331 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:05:36.331 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:05:36.331 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46020/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:36.333 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.139.144/tcp/46021/p2p/16Uiu2HAmMSDKv5CLQnsu9EoEcPoSorxdwaEBNUbYYEuc3KyvbgVT","/ip4/172.18.139.144/tcp/46022/ws/p2p/16Uiu2HAmMSDKv5CLQnsu9EoEcPoSorxdwaEBNUbYYEuc3KyvbgVT"],"enrUri":"enr:-L24QKjLKz47ZewkcNaV4x1vO-xMjOaxeC6KwWv9n2t5U8m1BUdvumhk688hOX0jDLhwNew4a6p1HoVNxysSuUNNIfICgmlkgnY0gmlwhKwSi5CKbXVsdGlhZGRyc5YACASsEouQBrPFAAoErBKLkAazxt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDgnNN3riMWo8lJ44ySpgWZgbTxpq2BHkjJAPHJODcPA6DdGNwgrPFg3VkcIKzx4V3YWt1MgM"}'
2025-02-11 04:05:36.334 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:05:36.334 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46020/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.117.107/tcp/32395/p2p/16Uiu2HAmN7z7n1M1pG7vyScD3Pu1M9ZdCWtygX8rLtwj9DUi1haW"]'
2025-02-11 04:05:36.337 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:36.337 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32394/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:05:36.339 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:36.340 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46020/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:05:36.342 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:36.343 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:36.343 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32394/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:36.349 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:36.349 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:36.550 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:36.550 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32394/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:36.555 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:36.556 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:36.756 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:36.756 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32394/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:36.761 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:36.761 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:36.962 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:36.962 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32394/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:36.968 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:36.968 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:37.169 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32394/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:37.171 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:32394/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true. Response content: b'waku message hash parsing error: invalid hash length: 4'
2025-02-11 04:05:37.172 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46020/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:37.175 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:46020/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true. Response content: b'waku message hash parsing error: invalid hash length: 4'
2025-02-11 04:05:37.177 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:05:37.178 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:05:37.178 DEBUG [src.node.waku_node] Stopping container with id 30af27b06314
2025-02-11 04:05:37.866 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:05:37.867 DEBUG [src.node.waku_node] Stopping container with id a921213d4e14
2025-02-11 04:05:38.678 ERROR [src.node.docker_mananger] Max retries reached for container 30af27b06314. Exiting log stream.
2025-02-11 04:05:39.326 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:05:39.328 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:05:39.335 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:05:39.343 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
