2025-02-11 04:04:13.836 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:04:13.837 DEBUG [tests.conftest] Running test: test_light_push_while_peer_is_paused with id: 2025-02-11_04-04-13__d8a92265-15de-451e-b4cb-96bc33bd8c1d
2025-02-11 04:04:13.837 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:04:13.837 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 04:04:13.843 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:04:13.844 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_04-04-13__d8a92265-15de-451e-b4cb-96bc33bd8c1d__wakuorg_nwaku:latest.log
2025-02-11 04:04:13.844 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:04:13.844 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:04:13.846 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:04:13.846 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.196.111
2025-02-11 04:04:13.846 DEBUG [src.node.docker_mananger] Generated ports ['22520', '22521', '22522', '22523', '22524']
2025-02-11 04:04:13.846 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:04:13.846 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:04:13.846 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:04:13.846 DEBUG [src.node.docker_mananger] docker run -i -t -p 22520:22520 -p 22521:22521 -p 22522:22522 -p 22523:22523 -p 22524:22524 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22522 --rest-port=22520 --tcp-port=22521 --discv5-udp-port=22523 --rest-address=0.0.0.0 --nat=extip:172.18.196.111 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c2f8b3afc55ec2a61ff9cad9ea3e1fd41bccc595ddba829d7c1e2e55acdfc73e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22524 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 04:04:14.073 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.196.111 waku e337cac13f6ccbe5d92bf0f0de2d55fe87e991263a6dd403d2fa62c2a148f68a
2025-02-11 04:04:14.123 DEBUG [src.node.docker_mananger] Container started with ID e337cac13f6c. Setting up logs at ./log/docker/receiving_node1_2025-02-11_04-04-13__d8a92265-15de-451e-b4cb-96bc33bd8c1d__wakuorg_nwaku:latest.log
2025-02-11 04:04:14.124 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22520
2025-02-11 04:04:14.125 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:04:14.640 ERROR [src.node.docker_mananger] Max retries reached for container 2ca64a67329d. Exiting log stream.
2025-02-11 04:04:15.125 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22520/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:15.128 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:04:15.128 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:04:15.128 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22520/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:15.131 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.196.111/tcp/22521/p2p/16Uiu2HAmUmgpTAKG79947gaa4YYhGnnka2tJEKzipRnbz5iqHEAr","/ip4/172.18.196.111/tcp/22522/ws/p2p/16Uiu2HAmUmgpTAKG79947gaa4YYhGnnka2tJEKzipRnbz5iqHEAr"],"enrUri":"enr:-L24QDsXZZm0VH9fSINa5sXQrDZthNllY7uA3LdF7r7yW_gGOvfRS0V-xFcfXXBWTe3fRAB7vyPR1-IcGy4xzv1_iqQCgmlkgnY0gmlwhKwSxG-KbXVsdGlhZGRyc5YACASsEsRvBlf5AAoErBLEbwZX-t0DgnJzhQADAQAAiXNlY3AyNTZrMaED73I7vC6syo3FXnJGOf48EFTatFZr_ta5vmby7g_XpK-DdGNwglf5g3VkcIJX-4V3YWt1Mgk"}'
2025-02-11 04:04:15.131 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:04:15.137 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:04:15.138 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-11_04-04-13__d8a92265-15de-451e-b4cb-96bc33bd8c1d__wakuorg_nwaku:latest.log
2025-02-11 04:04:15.138 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:04:15.138 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:04:15.139 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:04:15.139 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.140.164
2025-02-11 04:04:15.139 DEBUG [src.node.docker_mananger] Generated ports ['44533', '44534', '44535', '44536', '44537']
2025-02-11 04:04:15.139 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:04:15.140 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:04:15.140 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:04:15.140 DEBUG [src.node.docker_mananger] docker run -i -t -p 44533:44533 -p 44534:44534 -p 44535:44535 -p 44536:44536 -p 44537:44537 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44535 --rest-port=44533 --tcp-port=44534 --discv5-udp-port=44536 --rest-address=0.0.0.0 --nat=extip:172.18.140.164 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2f45df5a85a5b50eacff9cf68e8fdf070e5baf9a57f962f09e198faabc53ca54 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44537 --metrics-logging=true --lightpush=false --relay=true
2025-02-11 04:04:15.370 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.140.164 waku 24caf8ea317b66bcf069af16de9b4eaa8aaec877097566fca39201224b21b83f
2025-02-11 04:04:15.421 DEBUG [src.node.docker_mananger] Container started with ID 24caf8ea317b. Setting up logs at ./log/docker/receiving_node2_2025-02-11_04-04-13__d8a92265-15de-451e-b4cb-96bc33bd8c1d__wakuorg_nwaku:latest.log
2025-02-11 04:04:15.421 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44533
2025-02-11 04:04:15.421 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:04:16.422 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44533/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:16.425 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:04:16.425 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:04:16.426 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44533/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:16.428 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.140.164/tcp/44534/p2p/16Uiu2HAmPQsnGdBLChReyxWifWfCcXh8DfeaHNwrBdLuLBxKBnWy","/ip4/172.18.140.164/tcp/44535/ws/p2p/16Uiu2HAmPQsnGdBLChReyxWifWfCcXh8DfeaHNwrBdLuLBxKBnWy"],"enrUri":"enr:-L24QG7f8_ckOIw4nVids6tifj3n3kfivXy5e2ie77KRPZv5QZSxfMaPmsBkzwYN3P4pbzwRBfvDYSvGxnorQYpfzEYCgmlkgnY0gmlwhKwSjKSKbXVsdGlhZGRyc5YACASsEoykBq32AAoErBKMpAat990DgnJzhQADAQAAiXNlY3AyNTZrMaEDn9L_NoxW16Z17Wk5U0VuIN6sx104-_N82KASrR4TZC6DdGNwgq32g3VkcIKt-IV3YWt1MgE"}'
2025-02-11 04:04:16.428 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:04:16.428 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44533/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.196.111/tcp/22521/p2p/16Uiu2HAmUmgpTAKG79947gaa4YYhGnnka2tJEKzipRnbz5iqHEAr"]'
2025-02-11 04:04:16.468 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:16.476 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:04:16.477 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_04-04-13__d8a92265-15de-451e-b4cb-96bc33bd8c1d__wakuorg_nwaku:latest.log
2025-02-11 04:04:16.477 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:04:16.477 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:04:16.478 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:04:16.479 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.45.239
2025-02-11 04:04:16.479 DEBUG [src.node.docker_mananger] Generated ports ['34799', '34800', '34801', '34802', '34803']
2025-02-11 04:04:16.479 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:04:16.479 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:04:16.479 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:04:16.479 DEBUG [src.node.docker_mananger] docker run -i -t -p 34799:34799 -p 34800:34800 -p 34801:34801 -p 34802:34802 -p 34803:34803 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34801 --rest-port=34799 --tcp-port=34800 --discv5-udp-port=34802 --rest-address=0.0.0.0 --nat=extip:172.18.45.239 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=33ba7eaa1cabeaf5c34eb4ed9fff56b09caf07e2406bcc2fc50fecdc5bb4ea4d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34803 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QDsXZZm0VH9fSINa5sXQrDZthNllY7uA3LdF7r7yW_gGOvfRS0V-xFcfXXBWTe3fRAB7vyPR1-IcGy4xzv1_iqQCgmlkgnY0gmlwhKwSxG-KbXVsdGlhZGRyc5YACASsEsRvBlf5AAoErBLEbwZX-t0DgnJzhQADAQAAiXNlY3AyNTZrMaED73I7vC6syo3FXnJGOf48EFTatFZr_ta5vmby7g_XpK-DdGNwglf5g3VkcIJX-4V3YWt1Mgk --lightpushnode=/ip4/172.18.196.111/tcp/22521/p2p/16Uiu2HAmUmgpTAKG79947gaa4YYhGnnka2tJEKzipRnbz5iqHEAr --lightpush=true --relay=false
2025-02-11 04:04:16.726 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.45.239 waku f159cbe140ba76532019816cd166a7fdce8cdf3dc29e76764069be876f9c61ad
2025-02-11 04:04:16.777 DEBUG [src.node.docker_mananger] Container started with ID f159cbe140ba. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_04-04-13__d8a92265-15de-451e-b4cb-96bc33bd8c1d__wakuorg_nwaku:latest.log
2025-02-11 04:04:16.777 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 34799
2025-02-11 04:04:16.777 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:04:17.778 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34799/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:17.781 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:04:17.781 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:04:17.782 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34799/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:17.784 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.239/tcp/34800/p2p/16Uiu2HAkviQhTj2j4roaiqyRH11Fha5p98vMtTfByLqaXwuWM6V5","/ip4/172.18.45.239/tcp/34801/ws/p2p/16Uiu2HAkviQhTj2j4roaiqyRH11Fha5p98vMtTfByLqaXwuWM6V5"],"enrUri":"enr:-L24QNNIZumEElgWmHA48bSITcAfOGn60-6psmdAofSroi0KAKvcXYAifDgjFAuf5-n1B6JeM3MDNtIaaC4QverojpACgmlkgnY0gmlwhKwSLe-KbXVsdGlhZGRyc5YACASsEi3vBofwAAoErBIt7waH8d0DgnJzhQADAQAAiXNlY3AyNTZrMaECEyVIH_CpoMZvUhb-ZuBPqJScuYOfWgh-ptFE96DqTACDdGNwgofwg3VkcIKH8oV3YWt1Mgg"}'
2025-02-11 04:04:17.784 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:04:17.784 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34799/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.196.111/tcp/22521/p2p/16Uiu2HAmUmgpTAKG79947gaa4YYhGnnka2tJEKzipRnbz5iqHEAr"]'
2025-02-11 04:04:17.820 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:17.820 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34799/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.140.164/tcp/44534/p2p/16Uiu2HAmPQsnGdBLChReyxWifWfCcXh8DfeaHNwrBdLuLBxKBnWy"]'
2025-02-11 04:04:17.849 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:17.850 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22520/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:04:17.860 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:17.860 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44533/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:04:17.867 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:17.871 DEBUG [src.node.waku_node] Stopping container with id e337cac13f6c
2025-02-11 04:04:18.611 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:04:18.612 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34799/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739246657871338752}}'
2025-02-11 04:04:19.425 ERROR [src.node.docker_mananger] Max retries reached for container e337cac13f6c. Exiting log stream.
2025-02-11 04:04:23.621 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:34799/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2025-02-11 04:04:23.624 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:04:23.625 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:04:23.625 DEBUG [src.node.waku_node] Stopping container with id 24caf8ea317b
2025-02-11 04:04:24.714 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:04:24.714 DEBUG [src.node.waku_node] Stopping container with id f159cbe140ba
2025-02-11 04:04:25.528 ERROR [src.node.docker_mananger] Max retries reached for container 24caf8ea317b. Exiting log stream.
2025-02-11 04:04:25.773 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:04:25.774 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:04:25.781 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:04:25.787 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:04:25.793 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
