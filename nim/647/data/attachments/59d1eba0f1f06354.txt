2025-02-11 04:05:06.623 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:05:06.623 DEBUG [tests.conftest] Running test: test_invalid_page_size with id: 2025-02-11_04-05-06__ab1848a7-16f2-46c3-ba00-b0c0466f569d
2025-02-11 04:05:06.623 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:05:06.623 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 04:05:06.624 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-11 04:05:06.630 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:05:06.630 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-11_04-05-06__ab1848a7-16f2-46c3-ba00-b0c0466f569d__wakuorg_nwaku:latest.log
2025-02-11 04:05:06.630 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:05:06.630 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:05:06.631 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:05:06.631 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.227.61
2025-02-11 04:05:06.632 DEBUG [src.node.docker_mananger] Generated ports ['50910', '50911', '50912', '50913', '50914']
2025-02-11 04:05:06.632 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:05:06.632 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:05:06.632 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:05:06.632 DEBUG [src.node.docker_mananger] docker run -i -t -p 50910:50910 -p 50911:50911 -p 50912:50912 -p 50913:50913 -p 50914:50914 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50912 --rest-port=50910 --tcp-port=50911 --discv5-udp-port=50913 --rest-address=0.0.0.0 --nat=extip:172.18.227.61 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7f3b81f79d7faa4e6aaa9d75d20babb8a70ac3d8e3ceec36cd8eedefc2fdbda6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50914 --metrics-logging=true --store=true --relay=true
2025-02-11 04:05:06.857 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.227.61 waku c70d8a292828ea1f454ab5f5035c0ae704b294f5a303b4f27c920878b247f363
2025-02-11 04:05:06.903 DEBUG [src.node.docker_mananger] Container started with ID c70d8a292828. Setting up logs at ./log/docker/publishing_node1_2025-02-11_04-05-06__ab1848a7-16f2-46c3-ba00-b0c0466f569d__wakuorg_nwaku:latest.log
2025-02-11 04:05:06.906 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 50910
2025-02-11 04:05:06.908 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:05:07.418 ERROR [src.node.docker_mananger] Max retries reached for container 18afd131692c. Exiting log stream.
2025-02-11 04:05:07.909 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50910/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:07.911 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:05:07.912 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:05:07.912 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50910/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:07.914 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.227.61/tcp/50911/p2p/16Uiu2HAkvY4AJxjjY4S2sjuhHM6DhojTpEYC9RaHMpi8Xsx8eohS","/ip4/172.18.227.61/tcp/50912/ws/p2p/16Uiu2HAkvY4AJxjjY4S2sjuhHM6DhojTpEYC9RaHMpi8Xsx8eohS"],"enrUri":"enr:-L24QLdJi8Nq3otTgJJmIG65HiRQMfU0t5ec7IAxp336M1pgbtQfa5nhXggBELVYd2ncoMBXJ7PaYE6N_AZ2yuVKQKYCgmlkgnY0gmlwhKwS4z2KbXVsdGlhZGRyc5YACASsEuM9BsbfAAoErBLjPQbG4N0DgnJzhQADAQAAiXNlY3AyNTZrMaECEH5AleadJa7959_cs9vqUqXWC48qxSm1Izt18W8XDrmDdGNwgsbfg3VkcILG4YV3YWt1MgM"}'
2025-02-11 04:05:07.914 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:05:07.920 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:05:07.920 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-11_04-05-06__ab1848a7-16f2-46c3-ba00-b0c0466f569d__wakuorg_nwaku:latest.log
2025-02-11 04:05:07.921 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:05:07.921 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:05:07.922 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:05:07.922 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.15.233
2025-02-11 04:05:07.922 DEBUG [src.node.docker_mananger] Generated ports ['20078', '20079', '20080', '20081', '20082']
2025-02-11 04:05:07.922 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:05:07.923 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:05:07.923 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:05:07.923 DEBUG [src.node.docker_mananger] docker run -i -t -p 20078:20078 -p 20079:20079 -p 20080:20080 -p 20081:20081 -p 20082:20082 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20080 --rest-port=20078 --tcp-port=20079 --discv5-udp-port=20081 --rest-address=0.0.0.0 --nat=extip:172.18.15.233 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b6d18bbedf09efaccda8cdee8d2faa7bc8e15b7c2cb1f3869e2dadcf3aa64d88 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20082 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLdJi8Nq3otTgJJmIG65HiRQMfU0t5ec7IAxp336M1pgbtQfa5nhXggBELVYd2ncoMBXJ7PaYE6N_AZ2yuVKQKYCgmlkgnY0gmlwhKwS4z2KbXVsdGlhZGRyc5YACASsEuM9BsbfAAoErBLjPQbG4N0DgnJzhQADAQAAiXNlY3AyNTZrMaECEH5AleadJa7959_cs9vqUqXWC48qxSm1Izt18W8XDrmDdGNwgsbfg3VkcILG4YV3YWt1MgM --storenode=/ip4/172.18.227.61/tcp/50911/p2p/16Uiu2HAkvY4AJxjjY4S2sjuhHM6DhojTpEYC9RaHMpi8Xsx8eohS --store=true --relay=true
2025-02-11 04:05:08.145 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.15.233 waku 41bd660ec2350a75bb332ea29da35b05f50f7a3af2ffee86cec448fc645c04c8
2025-02-11 04:05:08.197 DEBUG [src.node.docker_mananger] Container started with ID 41bd660ec235. Setting up logs at ./log/docker/store_node1_2025-02-11_04-05-06__ab1848a7-16f2-46c3-ba00-b0c0466f569d__wakuorg_nwaku:latest.log
2025-02-11 04:05:08.197 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20078
2025-02-11 04:05:08.198 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:05:09.198 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20078/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:09.200 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:05:09.200 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:05:09.201 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20078/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:09.203 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.15.233/tcp/20079/p2p/16Uiu2HAmN8GHTCVGSMZtFtMz5tQEuYu3Xs4fyyaESwtcNQjVmCpP","/ip4/172.18.15.233/tcp/20080/ws/p2p/16Uiu2HAmN8GHTCVGSMZtFtMz5tQEuYu3Xs4fyyaESwtcNQjVmCpP"],"enrUri":"enr:-L24QGdvj83KymXr5aEmtpJodbz115QBuBk29_yTi9imEfPofkJabBpnFcRzRxeeK5t4WOLfNzPMOu4oLmUNKRqKJsoCgmlkgnY0gmlwhKwSD-mKbXVsdGlhZGRyc5YACASsEg_pBk5vAAoErBIP6QZOcN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDjLXhcQTyT5dRsb8n3824ORTPlZ5KImMjKg80Y2csAWiDdGNwgk5vg3VkcIJOcYV3YWt1MgM"}'
2025-02-11 04:05:09.203 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:05:09.203 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20078/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.227.61/tcp/50911/p2p/16Uiu2HAkvY4AJxjjY4S2sjuhHM6DhojTpEYC9RaHMpi8Xsx8eohS"]'
2025-02-11 04:05:18.193 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:18.194 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50910/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:05:18.196 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:18.197 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20078/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:05:18.199 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:18.200 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:18.200 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50910/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:18.206 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:18.206 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:18.407 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:18.407 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50910/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:18.411 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:18.412 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:18.613 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:18.614 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50910/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:18.619 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:18.620 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:18.821 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:18.821 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50910/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:18.827 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:18.828 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:19.028 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:19.029 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50910/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV80", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:19.034 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:19.034 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:19.235 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:19.235 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50910/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV81", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:19.241 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:19.241 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:19.442 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:19.442 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50910/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV82", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:19.447 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:19.447 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:19.648 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:19.648 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50910/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV83", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:19.653 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:19.653 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:19.854 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:19.854 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50910/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV84", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:19.859 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:19.860 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:20.060 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:20.060 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50910/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV85", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:20.065 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:20.066 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:20.267 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50910/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:20.269 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:50910/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true. Response content: b'page size parsing error: invalid integer: $2'
2025-02-11 04:05:20.270 DEBUG [tests.store.test_page_size] the invalid page_size $2 wasn't accepted 
2025-02-11 04:05:20.270 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20078/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:20.272 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:20078/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true. Response content: b'page size parsing error: invalid integer: $2'
2025-02-11 04:05:20.273 DEBUG [tests.store.test_page_size] the invalid page_size $2 wasn't accepted 
2025-02-11 04:05:20.274 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:05:20.275 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:05:20.275 DEBUG [src.node.waku_node] Stopping container with id c70d8a292828
2025-02-11 04:05:21.416 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:05:21.416 DEBUG [src.node.waku_node] Stopping container with id 41bd660ec235
2025-02-11 04:05:22.251 ERROR [src.node.docker_mananger] Max retries reached for container c70d8a292828. Exiting log stream.
2025-02-11 04:05:22.906 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:05:22.907 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:05:22.922 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:05:22.929 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
