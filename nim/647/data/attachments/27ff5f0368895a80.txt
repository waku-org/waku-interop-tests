2025-02-11 04:03:59.394 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:03:59.395 DEBUG [tests.conftest] Running test: test_light_push_with_missing_payload with id: 2025-02-11_04-03-59__fc229268-4466-4b76-9a8a-4512f5002948
2025-02-11 04:03:59.395 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:03:59.395 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 04:03:59.401 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:03:59.401 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_04-03-59__fc229268-4466-4b76-9a8a-4512f5002948__wakuorg_nwaku:latest.log
2025-02-11 04:03:59.402 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:03:59.402 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:03:59.403 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:03:59.403 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.12.139
2025-02-11 04:03:59.403 DEBUG [src.node.docker_mananger] Generated ports ['62868', '62869', '62870', '62871', '62872']
2025-02-11 04:03:59.403 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:03:59.404 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:03:59.404 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:03:59.404 DEBUG [src.node.docker_mananger] docker run -i -t -p 62868:62868 -p 62869:62869 -p 62870:62870 -p 62871:62871 -p 62872:62872 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62870 --rest-port=62868 --tcp-port=62869 --discv5-udp-port=62871 --rest-address=0.0.0.0 --nat=extip:172.18.12.139 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f0afd7c2e51e2dcea0fd3eedd77e1b6b09dc9ca6c9aec0e756b80cafb0ebaf94 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62872 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 04:03:59.625 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.12.139 waku b45b4da23c3261718b8319f31d0d313b4dd351ee5bbeed3e183228b89f4d58d3
2025-02-11 04:03:59.675 DEBUG [src.node.docker_mananger] Container started with ID b45b4da23c32. Setting up logs at ./log/docker/receiving_node1_2025-02-11_04-03-59__fc229268-4466-4b76-9a8a-4512f5002948__wakuorg_nwaku:latest.log
2025-02-11 04:03:59.676 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 62868
2025-02-11 04:03:59.676 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:04:00.181 ERROR [src.node.docker_mananger] Max retries reached for container 035f0df7e714. Exiting log stream.
2025-02-11 04:04:00.676 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62868/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:00.679 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:04:00.679 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:04:00.680 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62868/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:00.682 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.12.139/tcp/62869/p2p/16Uiu2HAmGdJHvNHz7aEVLURwhYK3UM4mTnFgdUTik1KUzetjsFHA","/ip4/172.18.12.139/tcp/62870/ws/p2p/16Uiu2HAmGdJHvNHz7aEVLURwhYK3UM4mTnFgdUTik1KUzetjsFHA"],"enrUri":"enr:-L24QAfX8aTIq5sEL1tBhRGUPlVQJld7DFJXqUVHPKFgnixIf9tj1xnH3tGAH_RWLBoryWllKtFoDiAqhKNjz1eZIsACgmlkgnY0gmlwhKwSDIuKbXVsdGlhZGRyc5YACASsEgyLBvWVAAoErBIMiwb1lt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDOv_fgdli4_anXLb8UNFCJJTAN9qRjxOlKZeyGl7r_7GDdGNwgvWVg3VkcIL1l4V3YWt1Mgk"}'
2025-02-11 04:04:00.682 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:04:00.689 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:04:00.689 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-11_04-03-59__fc229268-4466-4b76-9a8a-4512f5002948__wakuorg_nwaku:latest.log
2025-02-11 04:04:00.689 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:04:00.689 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:04:00.690 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:04:00.691 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.193.73
2025-02-11 04:04:00.691 DEBUG [src.node.docker_mananger] Generated ports ['45288', '45289', '45290', '45291', '45292']
2025-02-11 04:04:00.691 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:04:00.691 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:04:00.691 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:04:00.691 DEBUG [src.node.docker_mananger] docker run -i -t -p 45288:45288 -p 45289:45289 -p 45290:45290 -p 45291:45291 -p 45292:45292 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45290 --rest-port=45288 --tcp-port=45289 --discv5-udp-port=45291 --rest-address=0.0.0.0 --nat=extip:172.18.193.73 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cfa97cdaecdf493dc202b3f7fbb8cbdc6db3d0129f43cfccda464cbe03c02304 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45292 --metrics-logging=true --lightpush=false --relay=true
2025-02-11 04:04:00.919 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.193.73 waku 471b0c7282caa3705b1713bf097dc6452508f10169be60ca96f5166201a4bdd3
2025-02-11 04:04:00.965 DEBUG [src.node.docker_mananger] Container started with ID 471b0c7282ca. Setting up logs at ./log/docker/receiving_node2_2025-02-11_04-03-59__fc229268-4466-4b76-9a8a-4512f5002948__wakuorg_nwaku:latest.log
2025-02-11 04:04:00.966 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45288
2025-02-11 04:04:00.966 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:04:01.966 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45288/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:01.969 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:04:01.969 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:04:01.969 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45288/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:01.971 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.193.73/tcp/45289/p2p/16Uiu2HAmCL2QwFk9X4enVDTof3GKsBzdm6dtSATL4j7FJDMX9HJi","/ip4/172.18.193.73/tcp/45290/ws/p2p/16Uiu2HAmCL2QwFk9X4enVDTof3GKsBzdm6dtSATL4j7FJDMX9HJi"],"enrUri":"enr:-L24QMgeNRudFXW8QIig2cjDk6iwirgAvKA_c3pWLnJvYteWFOwknky9sA5EvqzSH5xuk54Ttw8UR3e4z1OMVv42lFwCgmlkgnY0gmlwhKwSwUmKbXVsdGlhZGRyc5YACASsEsFJBrDpAAoErBLBSQaw6t0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-yRMEBCDRUFDlFaQ-RI1cEGi1J6sjE8EC-CcqSied2ODdGNwgrDpg3VkcIKw64V3YWt1MgE"}'
2025-02-11 04:04:01.972 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:04:01.972 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45288/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.12.139/tcp/62869/p2p/16Uiu2HAmGdJHvNHz7aEVLURwhYK3UM4mTnFgdUTik1KUzetjsFHA"]'
2025-02-11 04:04:02.010 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:02.019 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:04:02.019 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_04-03-59__fc229268-4466-4b76-9a8a-4512f5002948__wakuorg_nwaku:latest.log
2025-02-11 04:04:02.019 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:04:02.019 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:04:02.021 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:04:02.021 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.195.251
2025-02-11 04:04:02.021 DEBUG [src.node.docker_mananger] Generated ports ['54911', '54912', '54913', '54914', '54915']
2025-02-11 04:04:02.021 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:04:02.021 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:04:02.021 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:04:02.021 DEBUG [src.node.docker_mananger] docker run -i -t -p 54911:54911 -p 54912:54912 -p 54913:54913 -p 54914:54914 -p 54915:54915 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54913 --rest-port=54911 --tcp-port=54912 --discv5-udp-port=54914 --rest-address=0.0.0.0 --nat=extip:172.18.195.251 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9d2dde0cddd5f8a6780c3ba1dadbaee859ece497bce2718e84b5ca86dd8fd2c6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54915 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QAfX8aTIq5sEL1tBhRGUPlVQJld7DFJXqUVHPKFgnixIf9tj1xnH3tGAH_RWLBoryWllKtFoDiAqhKNjz1eZIsACgmlkgnY0gmlwhKwSDIuKbXVsdGlhZGRyc5YACASsEgyLBvWVAAoErBIMiwb1lt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDOv_fgdli4_anXLb8UNFCJJTAN9qRjxOlKZeyGl7r_7GDdGNwgvWVg3VkcIL1l4V3YWt1Mgk --lightpushnode=/ip4/172.18.12.139/tcp/62869/p2p/16Uiu2HAmGdJHvNHz7aEVLURwhYK3UM4mTnFgdUTik1KUzetjsFHA --lightpush=true --relay=false
2025-02-11 04:04:02.264 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.195.251 waku c3d89006fc3b4485274a1a5cb0c5df48ed9e4c122e692608be33e96995a74613
2025-02-11 04:04:02.314 DEBUG [src.node.docker_mananger] Container started with ID c3d89006fc3b. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_04-03-59__fc229268-4466-4b76-9a8a-4512f5002948__wakuorg_nwaku:latest.log
2025-02-11 04:04:02.314 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 54911
2025-02-11 04:04:02.314 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:04:03.315 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54911/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:03.318 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:04:03.318 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:04:03.318 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54911/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:03.320 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.195.251/tcp/54912/p2p/16Uiu2HAmNe4KNtPhhF7hsDwrwTtdwf1miw2spxgDPTVFjqngXPwY","/ip4/172.18.195.251/tcp/54913/ws/p2p/16Uiu2HAmNe4KNtPhhF7hsDwrwTtdwf1miw2spxgDPTVFjqngXPwY"],"enrUri":"enr:-L24QC-Hv1uQDG5C-4PaQwo_G9TGuoT-nPE-18j3ls-2nzC2URx3D0pq_XTNB6f3Edy8LysJVFyCx89v6My4SVoatSQCgmlkgnY0gmlwhKwSw_uKbXVsdGlhZGRyc5YACASsEsP7BtaAAAoErBLD-wbWgd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDlFfGJODXGC6SzPknOU-RvHYj8a-PFPAp6SbdPeJkC7ODdGNwgtaAg3VkcILWgoV3YWt1Mgg"}'
2025-02-11 04:04:03.320 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:04:03.321 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54911/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.12.139/tcp/62869/p2p/16Uiu2HAmGdJHvNHz7aEVLURwhYK3UM4mTnFgdUTik1KUzetjsFHA"]'
2025-02-11 04:04:03.363 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:03.364 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54911/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.193.73/tcp/45289/p2p/16Uiu2HAmCL2QwFk9X4enVDTof3GKsBzdm6dtSATL4j7FJDMX9HJi"]'
2025-02-11 04:04:03.392 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:03.393 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62868/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:04:03.398 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:03.399 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45288/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:04:03.406 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:03.408 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54911/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1739246643408828160}}'
2025-02-11 04:04:03.412 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:54911/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-11 04:04:03.413 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:04:03.414 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:04:03.414 DEBUG [src.node.waku_node] Stopping container with id b45b4da23c32
2025-02-11 04:04:04.179 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:04:04.179 DEBUG [src.node.waku_node] Stopping container with id 471b0c7282ca
2025-02-11 04:04:04.990 ERROR [src.node.docker_mananger] Max retries reached for container b45b4da23c32. Exiting log stream.
2025-02-11 04:04:05.667 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:04:05.667 DEBUG [src.node.waku_node] Stopping container with id c3d89006fc3b
2025-02-11 04:04:06.479 ERROR [src.node.docker_mananger] Max retries reached for container 471b0c7282ca. Exiting log stream.
2025-02-11 04:04:07.158 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:04:07.159 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:04:07.166 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:04:07.174 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:04:07.181 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
