2025-02-11 04:06:20.400 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:06:20.401 DEBUG [tests.conftest] Running test: test_store_node_paused_and_unpaused with id: 2025-02-11_04-06-20__79631910-48d4-470b-9fc1-94e2e111fc08
2025-02-11 04:06:20.401 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:06:20.402 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 04:06:20.402 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-11 04:06:20.412 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:06:20.413 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-11_04-06-20__79631910-48d4-470b-9fc1-94e2e111fc08__wakuorg_nwaku:latest.log
2025-02-11 04:06:20.413 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:06:20.413 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:06:20.416 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:06:20.416 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.235.236
2025-02-11 04:06:20.416 DEBUG [src.node.docker_mananger] Generated ports ['11357', '11358', '11359', '11360', '11361']
2025-02-11 04:06:20.416 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:06:20.416 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:06:20.417 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:06:20.417 DEBUG [src.node.docker_mananger] docker run -i -t -p 11357:11357 -p 11358:11358 -p 11359:11359 -p 11360:11360 -p 11361:11361 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11359 --rest-port=11357 --tcp-port=11358 --discv5-udp-port=11360 --rest-address=0.0.0.0 --nat=extip:172.18.235.236 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=af4aa0db6afc653de3c5d4c7d6bff58756deac7f42aabb7996c757dec238e91c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11361 --metrics-logging=true --store=true --relay=true
2025-02-11 04:06:20.653 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.235.236 waku 2a08c86b2d73c42e28b733236326c1fb4bfba7691e8f932001627aba6a6a202f
2025-02-11 04:06:20.703 DEBUG [src.node.docker_mananger] Container started with ID 2a08c86b2d73. Setting up logs at ./log/docker/publishing_node1_2025-02-11_04-06-20__79631910-48d4-470b-9fc1-94e2e111fc08__wakuorg_nwaku:latest.log
2025-02-11 04:06:20.704 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11357
2025-02-11 04:06:20.704 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:06:21.263 ERROR [src.node.docker_mananger] Max retries reached for container 896d7026c984. Exiting log stream.
2025-02-11 04:06:21.705 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11357/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:21.707 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:06:21.708 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:06:21.708 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11357/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:21.710 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.235.236/tcp/11358/p2p/16Uiu2HAm8czLY6sahkccjD3hTDxLVYrMhxVutm9Rmv4XK2CRmWNy","/ip4/172.18.235.236/tcp/11359/ws/p2p/16Uiu2HAm8czLY6sahkccjD3hTDxLVYrMhxVutm9Rmv4XK2CRmWNy"],"enrUri":"enr:-L24QDEfueWs8SPjb4Vgsb_DYOA0ibVBEjLiliqgxv1nROJJJ-tLhze-mbrVnFdJ0bT2z6KPx3jtoTra0U4n61ngYPICgmlkgnY0gmlwhKwS6-yKbXVsdGlhZGRyc5YACASsEuvsBixeAAoErBLr7AYsX90DgnJzhQADAQAAiXNlY3AyNTZrMaECxA4TdL204H1pBvkDMVzjfXAri42Dkz8oL68tKuDnS46DdGNwgixeg3VkcIIsYIV3YWt1MgM"}'
2025-02-11 04:06:21.710 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:06:21.717 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:06:21.717 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-11_04-06-20__79631910-48d4-470b-9fc1-94e2e111fc08__wakuorg_nwaku:latest.log
2025-02-11 04:06:21.717 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:06:21.718 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:06:21.719 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:06:21.719 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.129.200
2025-02-11 04:06:21.719 DEBUG [src.node.docker_mananger] Generated ports ['31263', '31264', '31265', '31266', '31267']
2025-02-11 04:06:21.719 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:06:21.719 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:06:21.720 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:06:21.720 DEBUG [src.node.docker_mananger] docker run -i -t -p 31263:31263 -p 31264:31264 -p 31265:31265 -p 31266:31266 -p 31267:31267 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31265 --rest-port=31263 --tcp-port=31264 --discv5-udp-port=31266 --rest-address=0.0.0.0 --nat=extip:172.18.129.200 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9dc7ccbefbef5fd9df1b36b4fb9bdfcaedbe948ccc0afce24890afe7fdfcde00 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31267 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QDEfueWs8SPjb4Vgsb_DYOA0ibVBEjLiliqgxv1nROJJJ-tLhze-mbrVnFdJ0bT2z6KPx3jtoTra0U4n61ngYPICgmlkgnY0gmlwhKwS6-yKbXVsdGlhZGRyc5YACASsEuvsBixeAAoErBLr7AYsX90DgnJzhQADAQAAiXNlY3AyNTZrMaECxA4TdL204H1pBvkDMVzjfXAri42Dkz8oL68tKuDnS46DdGNwgixeg3VkcIIsYIV3YWt1MgM --storenode=/ip4/172.18.235.236/tcp/11358/p2p/16Uiu2HAm8czLY6sahkccjD3hTDxLVYrMhxVutm9Rmv4XK2CRmWNy --store=true --relay=true
2025-02-11 04:06:21.944 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.129.200 waku 2d8bf28f16ea6ae78b651092c6b52a2f738c1d15729c54d34e9be0eebbe66afb
2025-02-11 04:06:21.995 DEBUG [src.node.docker_mananger] Container started with ID 2d8bf28f16ea. Setting up logs at ./log/docker/store_node1_2025-02-11_04-06-20__79631910-48d4-470b-9fc1-94e2e111fc08__wakuorg_nwaku:latest.log
2025-02-11 04:06:21.997 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 31263
2025-02-11 04:06:21.997 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:06:22.998 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31263/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:23.001 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:06:23.001 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:06:23.001 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31263/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:23.003 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.129.200/tcp/31264/p2p/16Uiu2HAm1eapeveig1yHXXWnb43fzjzEniQTkN1X42u8kuSwpRBH","/ip4/172.18.129.200/tcp/31265/ws/p2p/16Uiu2HAm1eapeveig1yHXXWnb43fzjzEniQTkN1X42u8kuSwpRBH"],"enrUri":"enr:-L24QMhIJ4OtAUFevrb3gqKgSW5ix8EZiRptwybqyPJ9QKflFvUZAcpn4YaKdNoySODxH5YBtzYs1DWux5OOjUx52ncCgmlkgnY0gmlwhKwSgciKbXVsdGlhZGRyc5YACASsEoHIBnogAAoErBKByAZ6Id0DgnJzhQADAQAAiXNlY3AyNTZrMaECXHTXJE6lJGQk4fw-9eubONolpf3zMtUZUBeXAUtZPIyDdGNwgnogg3VkcIJ6IoV3YWt1MgM"}'
2025-02-11 04:06:23.004 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:06:23.004 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31263/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.235.236/tcp/11358/p2p/16Uiu2HAm8czLY6sahkccjD3hTDxLVYrMhxVutm9Rmv4XK2CRmWNy"]'
2025-02-11 04:06:23.006 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:23.007 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11357/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:06:23.009 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:23.009 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31263/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:06:23.011 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:23.012 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:23.013 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11357/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:23.018 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:23.019 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:23.220 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-11 04:06:23.220 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11357/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:23.223 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xca26e4119bb7da9e10c2a7ef4117aa442cb0f310dbd988f377b3c72fad9ea06a"}]}'
2025-02-11 04:06:23.224 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-11 04:06:23.224 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31263/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:23.227 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xca26e4119bb7da9e10c2a7ef4117aa442cb0f310dbd988f377b3c72fad9ea06a"}]}'
2025-02-11 04:06:23.227 DEBUG [src.node.waku_node] Pausing container with id 2d8bf28f16ea
2025-02-11 04:06:23.236 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:06:24.236 DEBUG [src.node.waku_node] Unpause container with id 2d8bf28f16ea
2025-02-11 04:06:24.246 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31263/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:24.249 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:06:24.250 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:06:24.250 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31263/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:24.252 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.129.200/tcp/31264/p2p/16Uiu2HAm1eapeveig1yHXXWnb43fzjzEniQTkN1X42u8kuSwpRBH","/ip4/172.18.129.200/tcp/31265/ws/p2p/16Uiu2HAm1eapeveig1yHXXWnb43fzjzEniQTkN1X42u8kuSwpRBH"],"enrUri":"enr:-L24QMhIJ4OtAUFevrb3gqKgSW5ix8EZiRptwybqyPJ9QKflFvUZAcpn4YaKdNoySODxH5YBtzYs1DWux5OOjUx52ncCgmlkgnY0gmlwhKwSgciKbXVsdGlhZGRyc5YACASsEoHIBnogAAoErBKByAZ6Id0DgnJzhQADAQAAiXNlY3AyNTZrMaECXHTXJE6lJGQk4fw-9eubONolpf3zMtUZUBeXAUtZPIyDdGNwgnogg3VkcIJ6IoV3YWt1MgM"}'
2025-02-11 04:06:24.252 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:06:24.253 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:24.253 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11357/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:24.258 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:24.259 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:24.459 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-11 04:06:24.460 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11357/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:24.463 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xca26e4119bb7da9e10c2a7ef4117aa442cb0f310dbd988f377b3c72fad9ea06a"},{"messageHash":"0xbd86fa4b716943c5c0dfd6b3dad5f05e0fb622d1f38adf84c213bc9bd34caf4b"}]}'
2025-02-11 04:06:24.464 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-11 04:06:24.464 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31263/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:24.467 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xca26e4119bb7da9e10c2a7ef4117aa442cb0f310dbd988f377b3c72fad9ea06a"},{"messageHash":"0xbd86fa4b716943c5c0dfd6b3dad5f05e0fb622d1f38adf84c213bc9bd34caf4b"}]}'
2025-02-11 04:06:24.467 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11357/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:24.470 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xca26e4119bb7da9e10c2a7ef4117aa442cb0f310dbd988f377b3c72fad9ea06a"},{"messageHash":"0xbd86fa4b716943c5c0dfd6b3dad5f05e0fb622d1f38adf84c213bc9bd34caf4b"}]}'
2025-02-11 04:06:24.470 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31263/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:24.473 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xca26e4119bb7da9e10c2a7ef4117aa442cb0f310dbd988f377b3c72fad9ea06a"},{"messageHash":"0xbd86fa4b716943c5c0dfd6b3dad5f05e0fb622d1f38adf84c213bc9bd34caf4b"}]}'
2025-02-11 04:06:24.474 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:06:24.475 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:06:24.475 DEBUG [src.node.waku_node] Stopping container with id 2a08c86b2d73
2025-02-11 04:06:25.229 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:06:25.230 DEBUG [src.node.waku_node] Stopping container with id 2d8bf28f16ea
2025-02-11 04:06:25.997 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:06:26.000 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:06:26.006 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:06:26.011 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
