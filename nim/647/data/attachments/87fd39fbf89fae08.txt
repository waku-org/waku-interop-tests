2025-02-11 04:04:03.117 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:04:03.117 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_meta with id: 2025-02-11_04-04-03__fa790623-5b1f-46d3-9b21-2ccd1751ff98
2025-02-11 04:04:03.117 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:04:03.117 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 04:04:03.123 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:04:03.124 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_04-04-03__fa790623-5b1f-46d3-9b21-2ccd1751ff98__wakuorg_nwaku:latest.log
2025-02-11 04:04:03.124 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:04:03.124 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:04:03.125 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:04:03.125 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.27.53
2025-02-11 04:04:03.125 DEBUG [src.node.docker_mananger] Generated ports ['36791', '36792', '36793', '36794', '36795']
2025-02-11 04:04:03.126 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:04:03.126 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:04:03.126 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:04:03.126 DEBUG [src.node.docker_mananger] docker run -i -t -p 36791:36791 -p 36792:36792 -p 36793:36793 -p 36794:36794 -p 36795:36795 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36793 --rest-port=36791 --tcp-port=36792 --discv5-udp-port=36794 --rest-address=0.0.0.0 --nat=extip:172.18.27.53 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e0d2bd8c33524da8abde5157edda41b21d48780edfe42ebdd03d16d85c62ba9a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36795 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 04:04:03.353 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.27.53 waku ab73ac8f8c2355bbcb75d1d19f8e918db564889329be9c1d57be30b2036824c8
2025-02-11 04:04:03.399 DEBUG [src.node.docker_mananger] Container started with ID ab73ac8f8c23. Setting up logs at ./log/docker/receiving_node1_2025-02-11_04-04-03__fa790623-5b1f-46d3-9b21-2ccd1751ff98__wakuorg_nwaku:latest.log
2025-02-11 04:04:03.400 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36791
2025-02-11 04:04:03.401 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:04:03.911 ERROR [src.node.docker_mananger] Max retries reached for container 3767fa08fdf5. Exiting log stream.
2025-02-11 04:04:04.402 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36791/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:04.404 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:04:04.404 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:04:04.405 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36791/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:04.407 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.27.53/tcp/36792/p2p/16Uiu2HAmKrtsLMs49Cd6REauDwKUedUbMypEgiehb9w1QorMaZKP","/ip4/172.18.27.53/tcp/36793/ws/p2p/16Uiu2HAmKrtsLMs49Cd6REauDwKUedUbMypEgiehb9w1QorMaZKP"],"enrUri":"enr:-L24QFB1WfrExtMs4rX7QY9cWIO0rHV98ys2-iFtKVXfqWWbRDsOIgOQLUiTRlgGjo30tPcGOhX0UgckpO8e_SFA8hoCgmlkgnY0gmlwhKwSGzWKbXVsdGlhZGRyc5YACASsEhs1Bo-4AAoErBIbNQaPud0DgnJzhQADAQAAiXNlY3AyNTZrMaEDaw6UZpcoYBZHrzmfylZkSUp6ig-icqDVpILlVIQGbbKDdGNwgo-4g3VkcIKPuoV3YWt1Mgk"}'
2025-02-11 04:04:04.407 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:04:04.413 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:04:04.413 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-11_04-04-03__fa790623-5b1f-46d3-9b21-2ccd1751ff98__wakuorg_nwaku:latest.log
2025-02-11 04:04:04.413 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:04:04.414 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:04:04.415 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:04:04.415 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.196.68
2025-02-11 04:04:04.415 DEBUG [src.node.docker_mananger] Generated ports ['36499', '36500', '36501', '36502', '36503']
2025-02-11 04:04:04.415 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:04:04.415 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:04:04.415 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:04:04.416 DEBUG [src.node.docker_mananger] docker run -i -t -p 36499:36499 -p 36500:36500 -p 36501:36501 -p 36502:36502 -p 36503:36503 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36501 --rest-port=36499 --tcp-port=36500 --discv5-udp-port=36502 --rest-address=0.0.0.0 --nat=extip:172.18.196.68 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3f88a1bbdfbfdd5c1c2a11789988fb528efc0fedfbfedeeae8f14da6cf56500d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36503 --metrics-logging=true --lightpush=false --relay=true
2025-02-11 04:04:04.639 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.196.68 waku ef27614ffda5e7caf7c7f9876278acf45ac826c2ffb9a7439863a68e1282b3ce
2025-02-11 04:04:04.691 DEBUG [src.node.docker_mananger] Container started with ID ef27614ffda5. Setting up logs at ./log/docker/receiving_node2_2025-02-11_04-04-03__fa790623-5b1f-46d3-9b21-2ccd1751ff98__wakuorg_nwaku:latest.log
2025-02-11 04:04:04.692 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36499
2025-02-11 04:04:04.692 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:04:05.692 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36499/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:05.695 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:04:05.695 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:04:05.695 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36499/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:05.697 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.196.68/tcp/36500/p2p/16Uiu2HAmRHZAkpqAah2ELB5Srs2wDt3YeBAm3gL34URjLEsUGE9P","/ip4/172.18.196.68/tcp/36501/ws/p2p/16Uiu2HAmRHZAkpqAah2ELB5Srs2wDt3YeBAm3gL34URjLEsUGE9P"],"enrUri":"enr:-L24QHsRLkdKT2tENu1HObDxkHiJ9GGMWjZvhR_xphVrI_miJdy-t_prJLMBiox2oet7PP8mH7MWCkUYeKn96qwyzJsCgmlkgnY0gmlwhKwSxESKbXVsdGlhZGRyc5YACASsEsREBo6UAAoErBLERAaOld0DgnJzhQADAQAAiXNlY3AyNTZrMaEDu6pClsdxQgXqNoJVANzPDBKb2CxSeImaoCu-UVLaBcKDdGNwgo6Ug3VkcIKOloV3YWt1MgE"}'
2025-02-11 04:04:05.697 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:04:05.698 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36499/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.27.53/tcp/36792/p2p/16Uiu2HAmKrtsLMs49Cd6REauDwKUedUbMypEgiehb9w1QorMaZKP"]'
2025-02-11 04:04:05.737 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:05.746 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:04:05.746 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_04-04-03__fa790623-5b1f-46d3-9b21-2ccd1751ff98__wakuorg_nwaku:latest.log
2025-02-11 04:04:05.747 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:04:05.747 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:04:05.748 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:04:05.748 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.113.84
2025-02-11 04:04:05.748 DEBUG [src.node.docker_mananger] Generated ports ['54051', '54052', '54053', '54054', '54055']
2025-02-11 04:04:05.749 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:04:05.749 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:04:05.749 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:04:05.749 DEBUG [src.node.docker_mananger] docker run -i -t -p 54051:54051 -p 54052:54052 -p 54053:54053 -p 54054:54054 -p 54055:54055 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54053 --rest-port=54051 --tcp-port=54052 --discv5-udp-port=54054 --rest-address=0.0.0.0 --nat=extip:172.18.113.84 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d7228ef7bfaffdd3b97b247f253f7fea8c6b7c1fe456b6d71dea25899df63475 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54055 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFB1WfrExtMs4rX7QY9cWIO0rHV98ys2-iFtKVXfqWWbRDsOIgOQLUiTRlgGjo30tPcGOhX0UgckpO8e_SFA8hoCgmlkgnY0gmlwhKwSGzWKbXVsdGlhZGRyc5YACASsEhs1Bo-4AAoErBIbNQaPud0DgnJzhQADAQAAiXNlY3AyNTZrMaEDaw6UZpcoYBZHrzmfylZkSUp6ig-icqDVpILlVIQGbbKDdGNwgo-4g3VkcIKPuoV3YWt1Mgk --lightpushnode=/ip4/172.18.27.53/tcp/36792/p2p/16Uiu2HAmKrtsLMs49Cd6REauDwKUedUbMypEgiehb9w1QorMaZKP --lightpush=true --relay=false
2025-02-11 04:04:05.981 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.113.84 waku 633b74783bcbfdbab4c38880795dadcfa6e497de5eebe7bf9e9d8d2aab8694a1
2025-02-11 04:04:06.028 DEBUG [src.node.docker_mananger] Container started with ID 633b74783bcb. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_04-04-03__fa790623-5b1f-46d3-9b21-2ccd1751ff98__wakuorg_nwaku:latest.log
2025-02-11 04:04:06.029 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 54051
2025-02-11 04:04:06.029 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:04:07.029 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54051/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:07.032 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:04:07.033 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:04:07.033 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54051/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:07.035 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.113.84/tcp/54052/p2p/16Uiu2HAmJ6MzdyCT6AevBmecT4u7YEBxQzjwbEN9B7QW8KtX6jDz","/ip4/172.18.113.84/tcp/54053/ws/p2p/16Uiu2HAmJ6MzdyCT6AevBmecT4u7YEBxQzjwbEN9B7QW8KtX6jDz"],"enrUri":"enr:-L24QF_pM2ROFDdSkVR-aU1rQXnAGdg7UK5VHsqmshYqbdaQfmfOtPP1PNhhgJjMqrYTAaZcJx-YnVD7YSYGcDKamF4CgmlkgnY0gmlwhKwScVSKbXVsdGlhZGRyc5YACASsEnFUBtMkAAoErBJxVAbTJd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDUMptgBucuEI0WXa1j0fovvjg2_Tw7qPJcw7Mb-fD2WGDdGNwgtMkg3VkcILTJoV3YWt1Mgg"}'
2025-02-11 04:04:07.035 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:04:07.035 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54051/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.27.53/tcp/36792/p2p/16Uiu2HAmKrtsLMs49Cd6REauDwKUedUbMypEgiehb9w1QorMaZKP"]'
2025-02-11 04:04:07.073 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:07.074 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54051/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.196.68/tcp/36500/p2p/16Uiu2HAmRHZAkpqAah2ELB5Srs2wDt3YeBAm3gL34URjLEsUGE9P"]'
2025-02-11 04:04:07.103 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:07.105 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36791/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:04:07.116 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:07.116 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36499/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:04:07.119 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:07.120 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 04:04:07.120 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54051/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739246647120032256, "meta": "Light push works!!"}}'
2025-02-11 04:04:07.122 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:54051/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
2025-02-11 04:04:07.124 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:04:07.125 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:04:07.125 DEBUG [src.node.waku_node] Stopping container with id ab73ac8f8c23
2025-02-11 04:04:07.882 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:04:07.882 DEBUG [src.node.waku_node] Stopping container with id ef27614ffda5
2025-02-11 04:04:08.693 ERROR [src.node.docker_mananger] Max retries reached for container ab73ac8f8c23. Exiting log stream.
2025-02-11 04:04:09.377 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:04:09.377 DEBUG [src.node.waku_node] Stopping container with id 633b74783bcb
2025-02-11 04:04:10.209 ERROR [src.node.docker_mananger] Max retries reached for container ef27614ffda5. Exiting log stream.
2025-02-11 04:04:10.867 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:04:10.867 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:04:10.875 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:04:10.887 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:04:10.892 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
