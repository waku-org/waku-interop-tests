2025-02-11 04:05:53.167 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:05:53.167 DEBUG [tests.conftest] Running test: test_relay_subscribe_with_multiple_overlapping_pubsub_topics with id: 2025-02-11_04-05-53__ab9ac965-7df4-4b37-82da-212e217719ee
2025-02-11 04:05:53.168 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:05:53.168 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 04:05:53.168 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-11 04:05:53.174 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:05:53.174 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_04-05-53__ab9ac965-7df4-4b37-82da-212e217719ee__wakuorg_nwaku:latest.log
2025-02-11 04:05:53.175 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:05:53.175 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:05:53.176 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:05:53.176 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.210.120
2025-02-11 04:05:53.176 DEBUG [src.node.docker_mananger] Generated ports ['1156', '1157', '1158', '1159', '1160']
2025-02-11 04:05:53.177 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:05:53.177 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:05:53.177 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:05:53.177 DEBUG [src.node.docker_mananger] docker run -i -t -p 1156:1156 -p 1157:1157 -p 1158:1158 -p 1159:1159 -p 1160:1160 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1158 --rest-port=1156 --tcp-port=1157 --discv5-udp-port=1159 --rest-address=0.0.0.0 --nat=extip:172.18.210.120 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ded4fd062c1c1d510a9c2d0339808cb9152fe3b940bed2c12a7ddba9db28d01e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1160 --metrics-logging=true --relay=true
2025-02-11 04:05:53.407 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.210.120 waku 8fb5b16ec70bbc6b96cae770b9e28382df52abfb8e92b2f353af132b02fa175c
2025-02-11 04:05:53.456 DEBUG [src.node.docker_mananger] Container started with ID 8fb5b16ec70b. Setting up logs at ./log/docker/node1_2025-02-11_04-05-53__ab9ac965-7df4-4b37-82da-212e217719ee__wakuorg_nwaku:latest.log
2025-02-11 04:05:53.457 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 1156
2025-02-11 04:05:53.457 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:05:53.969 ERROR [src.node.docker_mananger] Max retries reached for container be1d79cbeb41. Exiting log stream.
2025-02-11 04:05:54.459 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1156/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:54.462 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:05:54.463 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:05:54.463 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1156/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:54.465 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.210.120/tcp/1157/p2p/16Uiu2HAm3iWqCt7QKNss9Uy9gE1utSqNX2pLxrRSY5329shMcbh5","/ip4/172.18.210.120/tcp/1158/ws/p2p/16Uiu2HAm3iWqCt7QKNss9Uy9gE1utSqNX2pLxrRSY5329shMcbh5"],"enrUri":"enr:-L24QA4ID-xoOLbohtQwn_vkfWN4ojAYQypaoO287ciXMyNrbtwI2INkN5i4se-r71JToMych3QtYhsNxB_lSMB7Y20CgmlkgnY0gmlwhKwS0niKbXVsdGlhZGRyc5YACASsEtJ4BgSFAAoErBLSeAYEht0DgnJzhQADAQAAiXNlY3AyNTZrMaECey4GgX53zGfQGZdB8ekxhZpl5gzYDKfO2GCTPR1Y-xSDdGNwggSFg3VkcIIEh4V3YWt1MgE"}'
2025-02-11 04:05:54.465 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:05:54.474 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:05:54.474 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_04-05-53__ab9ac965-7df4-4b37-82da-212e217719ee__wakuorg_nwaku:latest.log
2025-02-11 04:05:54.474 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:05:54.474 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:05:54.476 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:05:54.476 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.187.161
2025-02-11 04:05:54.476 DEBUG [src.node.docker_mananger] Generated ports ['63418', '63419', '63420', '63421', '63422']
2025-02-11 04:05:54.476 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:05:54.476 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:05:54.476 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:05:54.477 DEBUG [src.node.docker_mananger] docker run -i -t -p 63418:63418 -p 63419:63419 -p 63420:63420 -p 63421:63421 -p 63422:63422 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63420 --rest-port=63418 --tcp-port=63419 --discv5-udp-port=63421 --rest-address=0.0.0.0 --nat=extip:172.18.187.161 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8aca1e8ccf0f991db316efbeaaecbd4b4cacadaeb7dcf28066b3d0be5ff4aeeb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63422 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QA4ID-xoOLbohtQwn_vkfWN4ojAYQypaoO287ciXMyNrbtwI2INkN5i4se-r71JToMych3QtYhsNxB_lSMB7Y20CgmlkgnY0gmlwhKwS0niKbXVsdGlhZGRyc5YACASsEtJ4BgSFAAoErBLSeAYEht0DgnJzhQADAQAAiXNlY3AyNTZrMaECey4GgX53zGfQGZdB8ekxhZpl5gzYDKfO2GCTPR1Y-xSDdGNwggSFg3VkcIIEh4V3YWt1MgE
2025-02-11 04:05:54.707 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.187.161 waku 4bb0d74644897651ae171a514e85cd961157105179a8aef09c4ef5866215b077
2025-02-11 04:05:54.758 DEBUG [src.node.docker_mananger] Container started with ID 4bb0d7464489. Setting up logs at ./log/docker/node2_2025-02-11_04-05-53__ab9ac965-7df4-4b37-82da-212e217719ee__wakuorg_nwaku:latest.log
2025-02-11 04:05:54.758 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63418
2025-02-11 04:05:54.759 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:05:55.759 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63418/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:55.765 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:05:55.765 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:05:55.766 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63418/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:55.769 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.187.161/tcp/63419/p2p/16Uiu2HAm5Wge8p2HfTBbkrMQbJY1WH1SkwAneqCbQnp28g9HdY7C","/ip4/172.18.187.161/tcp/63420/ws/p2p/16Uiu2HAm5Wge8p2HfTBbkrMQbJY1WH1SkwAneqCbQnp28g9HdY7C"],"enrUri":"enr:-L24QIg7JWpB3S9YNAbK3SfM4KJktZS54E-ohOCK9dPYdPsnKpSx36gAvFfc6Vss2o2LZprL8MpyTshf9D3k0XaKMHwCgmlkgnY0gmlwhKwSu6GKbXVsdGlhZGRyc5YACASsEruhBve7AAoErBK7oQb3vN0DgnJzhQADAQAAiXNlY3AyNTZrMaECld2FUeywNU-R5gxsyu_XR3CM7SjW59UnVbBqZLwotKODdGNwgve7g3VkcIL3vYV3YWt1MgE"}'
2025-02-11 04:05:55.769 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:05:55.769 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63418/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.210.120/tcp/1157/p2p/16Uiu2HAm3iWqCt7QKNss9Uy9gE1utSqNX2pLxrRSY5329shMcbh5"]'
2025-02-11 04:05:55.772 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:55.773 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1156/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9"]'
2025-02-11 04:05:55.778 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:55.778 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63418/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9"]'
2025-02-11 04:05:55.786 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:55.786 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1156/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25"]'
2025-02-11 04:05:55.791 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:55.791 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63418/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25"]'
2025-02-11 04:05:55.797 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:55.799 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1156/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:55.804 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:55.804 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 04:05:55.904 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 04:05:55.904 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1156/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:55.907 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739246755799409920,"ephemeral":false}]'
2025-02-11 04:05:55.908 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 04:05:55.909 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63418/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:55.911 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739246755799409920,"ephemeral":false}]'
2025-02-11 04:05:55.912 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1156/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:55.917 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:55.917 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 04:05:56.017 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 04:05:56.017 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1156/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:56.020 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739246755912541696,"ephemeral":false}]'
2025-02-11 04:05:56.021 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 04:05:56.021 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63418/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:56.024 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739246755912541696,"ephemeral":false}]'
2025-02-11 04:05:56.025 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1156/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:56.030 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:56.030 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 04:05:56.130 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 04:05:56.131 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1156/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:56.133 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739246756025508608,"ephemeral":false}]'
2025-02-11 04:05:56.134 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 04:05:56.134 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63418/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:56.136 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739246756025508608,"ephemeral":false}]'
2025-02-11 04:05:56.138 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1156/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F25" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:56.142 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:56.143 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 04:05:56.243 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 04:05:56.244 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1156/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F25" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:56.246 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739246756138471936,"ephemeral":false}]'
2025-02-11 04:05:56.247 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 04:05:56.247 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63418/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F25" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:56.249 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739246756138471936,"ephemeral":false}]'
2025-02-11 04:05:56.252 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:05:56.253 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:05:56.253 DEBUG [src.node.waku_node] Stopping container with id 8fb5b16ec70b
2025-02-11 04:05:56.940 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:05:56.941 DEBUG [src.node.waku_node] Stopping container with id 4bb0d7464489
2025-02-11 04:05:57.752 ERROR [src.node.docker_mananger] Max retries reached for container 8fb5b16ec70b. Exiting log stream.
2025-02-11 04:05:58.448 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:05:58.451 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:05:58.457 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:05:58.462 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
