2025-02-11 04:06:23.254 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:06:23.255 DEBUG [tests.conftest] Running test: test_store_without_pubsub_topic_and_content_topic with id: 2025-02-11_04-06-23__9f9dcc1c-a8dc-4f90-adc2-ef9c385b3b3e
2025-02-11 04:06:23.256 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:06:23.256 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 04:06:23.256 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-11 04:06:23.264 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:06:23.265 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-11_04-06-23__9f9dcc1c-a8dc-4f90-adc2-ef9c385b3b3e__wakuorg_nwaku:latest.log
2025-02-11 04:06:23.265 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:06:23.265 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:06:23.267 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:06:23.268 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.105.132
2025-02-11 04:06:23.269 DEBUG [src.node.docker_mananger] Generated ports ['54510', '54511', '54512', '54513', '54514']
2025-02-11 04:06:23.269 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:06:23.269 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:06:23.269 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:06:23.270 DEBUG [src.node.docker_mananger] docker run -i -t -p 54510:54510 -p 54511:54511 -p 54512:54512 -p 54513:54513 -p 54514:54514 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54512 --rest-port=54510 --tcp-port=54511 --discv5-udp-port=54513 --rest-address=0.0.0.0 --nat=extip:172.18.105.132 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=315f7541cfecbb7d15e90fcc2fe543acd244bbc735da4fd270ca72a7f058022c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54514 --metrics-logging=true --store=true --relay=true
2025-02-11 04:06:23.495 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.105.132 waku 56308e2016ea8495b998ec57a2a469d8bb37e3500915610cc99124a8beb36792
2025-02-11 04:06:23.547 DEBUG [src.node.docker_mananger] Container started with ID 56308e2016ea. Setting up logs at ./log/docker/publishing_node1_2025-02-11_04-06-23__9f9dcc1c-a8dc-4f90-adc2-ef9c385b3b3e__wakuorg_nwaku:latest.log
2025-02-11 04:06:23.549 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 54510
2025-02-11 04:06:23.549 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:06:24.091 ERROR [src.node.docker_mananger] Max retries reached for container a3442ca7e030. Exiting log stream.
2025-02-11 04:06:24.551 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54510/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:24.553 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:06:24.554 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:06:24.554 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54510/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:24.556 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.105.132/tcp/54511/p2p/16Uiu2HAmAdfkFkQUXw32gWjuQpusU9798mXdGW1VyJgXCDuUqbxf","/ip4/172.18.105.132/tcp/54512/ws/p2p/16Uiu2HAmAdfkFkQUXw32gWjuQpusU9798mXdGW1VyJgXCDuUqbxf"],"enrUri":"enr:-L24QGAnRjJo8Cckyg79KuqrgqWZa5M1jlme02MlQGVXSZOWSlWaTlg8AyxXkCwKCTtPUlbuWypB2AjO6ZR4qx5j6pkCgmlkgnY0gmlwhKwSaYSKbXVsdGlhZGRyc5YACASsEmmEBtTvAAoErBJphAbU8N0DgnJzhQADAQAAiXNlY3AyNTZrMaEC4fICegJIMbwBJuiFVJlP9t-at_ai1mBEMXWIbL3bjpSDdGNwgtTvg3VkcILU8YV3YWt1MgM"}'
2025-02-11 04:06:24.556 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:06:24.566 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:06:24.566 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-11_04-06-23__9f9dcc1c-a8dc-4f90-adc2-ef9c385b3b3e__wakuorg_nwaku:latest.log
2025-02-11 04:06:24.567 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:06:24.567 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:06:24.568 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:06:24.568 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.113.130
2025-02-11 04:06:24.568 DEBUG [src.node.docker_mananger] Generated ports ['21995', '21996', '21997', '21998', '21999']
2025-02-11 04:06:24.568 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:06:24.569 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:06:24.569 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:06:24.569 DEBUG [src.node.docker_mananger] docker run -i -t -p 21995:21995 -p 21996:21996 -p 21997:21997 -p 21998:21998 -p 21999:21999 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21997 --rest-port=21995 --tcp-port=21996 --discv5-udp-port=21998 --rest-address=0.0.0.0 --nat=extip:172.18.113.130 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c494cfaefbe2acbf40e32bd9ba0eec54b4bbdae5b6d91edbcea217e2d493cfaf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21999 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QGAnRjJo8Cckyg79KuqrgqWZa5M1jlme02MlQGVXSZOWSlWaTlg8AyxXkCwKCTtPUlbuWypB2AjO6ZR4qx5j6pkCgmlkgnY0gmlwhKwSaYSKbXVsdGlhZGRyc5YACASsEmmEBtTvAAoErBJphAbU8N0DgnJzhQADAQAAiXNlY3AyNTZrMaEC4fICegJIMbwBJuiFVJlP9t-at_ai1mBEMXWIbL3bjpSDdGNwgtTvg3VkcILU8YV3YWt1MgM --storenode=/ip4/172.18.105.132/tcp/54511/p2p/16Uiu2HAmAdfkFkQUXw32gWjuQpusU9798mXdGW1VyJgXCDuUqbxf --store=true --relay=true
2025-02-11 04:06:24.799 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.113.130 waku 2560b1471bdc83df067b8939e5f57f4232377c3dd6cd34b68f6235a03a935193
2025-02-11 04:06:24.847 DEBUG [src.node.docker_mananger] Container started with ID 2560b1471bdc. Setting up logs at ./log/docker/store_node1_2025-02-11_04-06-23__9f9dcc1c-a8dc-4f90-adc2-ef9c385b3b3e__wakuorg_nwaku:latest.log
2025-02-11 04:06:24.848 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 21995
2025-02-11 04:06:24.849 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:06:25.849 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21995/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:25.852 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:06:25.852 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:06:25.852 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21995/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:25.855 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.113.130/tcp/21996/p2p/16Uiu2HAkvTnHxw7aa3SwZiV6PCkUF17pSRoNWBP72DF4KYmX1Hjv","/ip4/172.18.113.130/tcp/21997/ws/p2p/16Uiu2HAkvTnHxw7aa3SwZiV6PCkUF17pSRoNWBP72DF4KYmX1Hjv"],"enrUri":"enr:-L24QNAmd7-5-Q7pajsyutSySBld0k21483GdSSDAiVNEiIZS-1U2vsWX1HpFrRybyA2eBNSQfdEyxkYj0UGNitTnxoCgmlkgnY0gmlwhKwScYKKbXVsdGlhZGRyc5YACASsEnGCBlXsAAoErBJxggZV7d0DgnJzhQADAQAAiXNlY3AyNTZrMaECD2X8rWLfLqj-VxBando4QQ4AjBlnF3FToKeYgURogRmDdGNwglXsg3VkcIJV7oV3YWt1MgM"}'
2025-02-11 04:06:25.855 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:06:25.855 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21995/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.105.132/tcp/54511/p2p/16Uiu2HAmAdfkFkQUXw32gWjuQpusU9798mXdGW1VyJgXCDuUqbxf"]'
2025-02-11 04:06:25.858 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:25.858 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54510/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:06:25.861 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:25.861 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21995/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:06:25.863 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:25.863 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:25.864 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54510/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:25.869 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:25.870 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:26.071 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:26.071 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54510/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:26.076 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:26.077 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:26.277 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:26.278 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54510/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:26.283 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:26.284 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:26.484 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:26.484 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54510/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:26.490 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:26.490 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:26.691 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:26.691 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54510/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:26.697 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:26.698 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:26.899 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:26.899 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54510/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:26.905 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:26.905 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:27.106 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:27.107 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54510/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:27.112 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:27.113 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:27.314 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:27.314 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54510/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:27.319 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:27.319 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:27.521 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54510/store/v3/messages?pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:27.523 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x02687a73da7d52d548ae85e03133a30552e590534e7694ce02d3038f5d3619b8"},{"messageHash":"0x1a8bd56314776dadca53978b447c953b9ad4cc04761bff871838392c01368e52"},{"messageHash":"0x1bc5669672d909cddb29cec27c868a39b8a0864ad66917bd345f0727e4e06846"},{"messageHash":"0x879aeb9d2a1f8680094552008ad1b7f7f465cf921b4c2804d4c296f20b4f55fc"},{"messageHash":"0xdee131d8f1e7ac61cc7e12e7631ac77e358f5ca6b7fff21e6cf1b11b4702221c"},{"messageHash":"0xdb2d19a533462730ec7a5342b213261aebef6b6a2a6e6201c6e265330d68ae91"},{"messageHash":"0x6d81d06f9fd08118cac28682536b3f6535bc5e256e7083340bc066d2affbb72f"},{"messageHash":"0xafe400af47c0906e6e817212821e8fdc42db09c4340717f96e5875ecf4d84f7c"}]}'
2025-02-11 04:06:27.524 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21995/store/v3/messages?pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:27.527 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x02687a73da7d52d548ae85e03133a30552e590534e7694ce02d3038f5d3619b8"},{"messageHash":"0x1a8bd56314776dadca53978b447c953b9ad4cc04761bff871838392c01368e52"},{"messageHash":"0x1bc5669672d909cddb29cec27c868a39b8a0864ad66917bd345f0727e4e06846"},{"messageHash":"0x879aeb9d2a1f8680094552008ad1b7f7f465cf921b4c2804d4c296f20b4f55fc"},{"messageHash":"0xdee131d8f1e7ac61cc7e12e7631ac77e358f5ca6b7fff21e6cf1b11b4702221c"},{"messageHash":"0xdb2d19a533462730ec7a5342b213261aebef6b6a2a6e6201c6e265330d68ae91"},{"messageHash":"0x6d81d06f9fd08118cac28682536b3f6535bc5e256e7083340bc066d2affbb72f"},{"messageHash":"0xafe400af47c0906e6e817212821e8fdc42db09c4340717f96e5875ecf4d84f7c"}]}'
2025-02-11 04:06:27.529 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:06:27.530 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:06:27.531 DEBUG [src.node.waku_node] Stopping container with id 56308e2016ea
2025-02-11 04:06:28.059 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:06:28.059 DEBUG [src.node.waku_node] Stopping container with id 2560b1471bdc
2025-02-11 04:06:28.870 ERROR [src.node.docker_mananger] Max retries reached for container 56308e2016ea. Exiting log stream.
2025-02-11 04:06:29.557 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:06:29.558 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:06:29.564 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:06:29.571 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
