2025-02-11 04:03:12.272 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:03:12.273 DEBUG [tests.conftest] Running test: test_light_push_with_extra_field with id: 2025-02-11_04-03-12__a8800efb-bfce-4116-9d2e-4ffa045a9d2e
2025-02-11 04:03:12.273 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:03:12.273 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 04:03:12.279 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:03:12.280 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_04-03-12__a8800efb-bfce-4116-9d2e-4ffa045a9d2e__wakuorg_nwaku:latest.log
2025-02-11 04:03:12.280 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:03:12.280 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:03:12.281 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:03:12.281 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.83.94
2025-02-11 04:03:12.282 DEBUG [src.node.docker_mananger] Generated ports ['22595', '22596', '22597', '22598', '22599']
2025-02-11 04:03:12.282 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:03:12.282 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:03:12.282 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:03:12.282 DEBUG [src.node.docker_mananger] docker run -i -t -p 22595:22595 -p 22596:22596 -p 22597:22597 -p 22598:22598 -p 22599:22599 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22597 --rest-port=22595 --tcp-port=22596 --discv5-udp-port=22598 --rest-address=0.0.0.0 --nat=extip:172.18.83.94 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fb9b34061e33a1c85a7c407eec8e8f7f155a9dfabf7fbaff9cc92addaab3c81a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22599 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 04:03:12.518 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.83.94 waku 5a08cb4e929ac7486dfbb248d47241f6c45267214ee9d9d27f778c4a955ec5f7
2025-02-11 04:03:12.565 DEBUG [src.node.docker_mananger] Container started with ID 5a08cb4e929a. Setting up logs at ./log/docker/receiving_node1_2025-02-11_04-03-12__a8800efb-bfce-4116-9d2e-4ffa045a9d2e__wakuorg_nwaku:latest.log
2025-02-11 04:03:12.567 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22595
2025-02-11 04:03:12.567 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:03:13.073 ERROR [src.node.docker_mananger] Max retries reached for container 1626881e2621. Exiting log stream.
2025-02-11 04:03:13.567 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22595/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:03:13.570 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:03:13.570 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:03:13.571 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22595/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:03:13.573 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.83.94/tcp/22596/p2p/16Uiu2HAmLpNX2cmUGhKNYBugXmN2STCo7qyoVK3wnp9KVn5R5N4e","/ip4/172.18.83.94/tcp/22597/ws/p2p/16Uiu2HAmLpNX2cmUGhKNYBugXmN2STCo7qyoVK3wnp9KVn5R5N4e"],"enrUri":"enr:-L24QK_2-31qgf8mwVL0MYp7_c75QjwAVvAJhNNw9m_oLRhMY5F5GOiZZnPF9L1Vnn8JirsYeN1gJFlgvpwLqwMnpWECgmlkgnY0gmlwhKwSU16KbXVsdGlhZGRyc5YACASsElNeBlhEAAoErBJTXgZYRd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDeUTJvEMdFaN2i63JjFNazcZnFB8Tjr-otPE5_W3-0qeDdGNwglhEg3VkcIJYRoV3YWt1Mgk"}'
2025-02-11 04:03:13.573 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:03:13.580 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:03:13.580 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-11_04-03-12__a8800efb-bfce-4116-9d2e-4ffa045a9d2e__wakuorg_nwaku:latest.log
2025-02-11 04:03:13.580 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:03:13.580 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:03:13.581 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:03:13.582 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.167.149
2025-02-11 04:03:13.582 DEBUG [src.node.docker_mananger] Generated ports ['43338', '43339', '43340', '43341', '43342']
2025-02-11 04:03:13.582 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:03:13.582 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:03:13.582 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:03:13.582 DEBUG [src.node.docker_mananger] docker run -i -t -p 43338:43338 -p 43339:43339 -p 43340:43340 -p 43341:43341 -p 43342:43342 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43340 --rest-port=43338 --tcp-port=43339 --discv5-udp-port=43341 --rest-address=0.0.0.0 --nat=extip:172.18.167.149 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7aa7d8a4dceaf8e71cd0a607c44f0538a56ae1b33650bdf4c31a14972bbf91e0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43342 --metrics-logging=true --lightpush=false --relay=true
2025-02-11 04:03:13.810 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.167.149 waku 26c81879564f2dabcb206bbf89712e1d0a40a64467ddfc39b31c16fdb76f411d
2025-02-11 04:03:13.862 DEBUG [src.node.docker_mananger] Container started with ID 26c81879564f. Setting up logs at ./log/docker/receiving_node2_2025-02-11_04-03-12__a8800efb-bfce-4116-9d2e-4ffa045a9d2e__wakuorg_nwaku:latest.log
2025-02-11 04:03:13.863 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 43338
2025-02-11 04:03:13.863 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:03:14.864 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43338/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:03:14.867 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:03:14.867 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:03:14.867 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43338/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:03:14.869 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.167.149/tcp/43339/p2p/16Uiu2HAm5VK11rZeULrukXMZgdMH3WP6Yy3cPa7evXqUfCECRpgq","/ip4/172.18.167.149/tcp/43340/ws/p2p/16Uiu2HAm5VK11rZeULrukXMZgdMH3WP6Yy3cPa7evXqUfCECRpgq"],"enrUri":"enr:-L24QEVhfHzzU8YDPMaGACEQXpnO4SrgJOpxmMBXvkVoiix4N2nJgA3UaSEaN4oz9axXtVSHbfM5gPnKYxaCBf7HGkUCgmlkgnY0gmlwhKwSp5WKbXVsdGlhZGRyc5YACASsEqeVBqlLAAoErBKnlQapTN0DgnJzhQADAQAAiXNlY3AyNTZrMaEClYN4t1aLGOAmAuDC0j0ktd-sjzC9nXAjLMqaHq71rfKDdGNwgqlLg3VkcIKpTYV3YWt1MgE"}'
2025-02-11 04:03:14.870 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:03:14.870 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43338/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.83.94/tcp/22596/p2p/16Uiu2HAmLpNX2cmUGhKNYBugXmN2STCo7qyoVK3wnp9KVn5R5N4e"]'
2025-02-11 04:03:14.910 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:03:14.919 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:03:14.919 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_04-03-12__a8800efb-bfce-4116-9d2e-4ffa045a9d2e__wakuorg_nwaku:latest.log
2025-02-11 04:03:14.919 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:03:14.920 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:03:14.921 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:03:14.921 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.73.19
2025-02-11 04:03:14.921 DEBUG [src.node.docker_mananger] Generated ports ['52432', '52433', '52434', '52435', '52436']
2025-02-11 04:03:14.922 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:03:14.922 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:03:14.922 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:03:14.922 DEBUG [src.node.docker_mananger] docker run -i -t -p 52432:52432 -p 52433:52433 -p 52434:52434 -p 52435:52435 -p 52436:52436 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52434 --rest-port=52432 --tcp-port=52433 --discv5-udp-port=52435 --rest-address=0.0.0.0 --nat=extip:172.18.73.19 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6f3a7aacf43c644b70865acb0b0d4e18efbb870da92ae80ef6d3f7f6db4f9ed7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52436 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QK_2-31qgf8mwVL0MYp7_c75QjwAVvAJhNNw9m_oLRhMY5F5GOiZZnPF9L1Vnn8JirsYeN1gJFlgvpwLqwMnpWECgmlkgnY0gmlwhKwSU16KbXVsdGlhZGRyc5YACASsElNeBlhEAAoErBJTXgZYRd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDeUTJvEMdFaN2i63JjFNazcZnFB8Tjr-otPE5_W3-0qeDdGNwglhEg3VkcIJYRoV3YWt1Mgk --lightpushnode=/ip4/172.18.83.94/tcp/22596/p2p/16Uiu2HAmLpNX2cmUGhKNYBugXmN2STCo7qyoVK3wnp9KVn5R5N4e --lightpush=true --relay=false
2025-02-11 04:03:15.154 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.73.19 waku 7f590b97462afe9a58e63016918cddadfdf529e05492ab1115475d1058f6e55d
2025-02-11 04:03:15.208 DEBUG [src.node.docker_mananger] Container started with ID 7f590b97462a. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_04-03-12__a8800efb-bfce-4116-9d2e-4ffa045a9d2e__wakuorg_nwaku:latest.log
2025-02-11 04:03:15.208 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 52432
2025-02-11 04:03:15.208 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:03:16.209 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52432/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:03:16.212 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:03:16.212 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:03:16.212 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52432/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:03:16.214 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.73.19/tcp/52433/p2p/16Uiu2HAmMBB75Ga4ZhE8u9f7jPP6j4Z948Xt1vTuWep6fJuKAioL","/ip4/172.18.73.19/tcp/52434/ws/p2p/16Uiu2HAmMBB75Ga4ZhE8u9f7jPP6j4Z948Xt1vTuWep6fJuKAioL"],"enrUri":"enr:-L24QF7oBwMy3H01YT4XYBTInuO9iP0QXPxTO7oJ5l_ygW6bU7gIIXufoXGk2uvGZTNtNEYBGM0en4dqY3h_VKVM-RMCgmlkgnY0gmlwhKwSSROKbXVsdGlhZGRyc5YACASsEkkTBszRAAoErBJJEwbM0t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDfpkUjiIxKuWCt-CJ7NYClYWi_b2m6K9P7HEfAdkXYIuDdGNwgszRg3VkcILM04V3YWt1Mgg"}'
2025-02-11 04:03:16.215 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:03:16.215 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52432/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.83.94/tcp/22596/p2p/16Uiu2HAmLpNX2cmUGhKNYBugXmN2STCo7qyoVK3wnp9KVn5R5N4e"]'
2025-02-11 04:03:16.253 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:03:16.253 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52432/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.167.149/tcp/43339/p2p/16Uiu2HAm5VK11rZeULrukXMZgdMH3WP6Yy3cPa7evXqUfCECRpgq"]'
2025-02-11 04:03:16.282 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:03:16.287 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22595/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:03:16.291 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:03:16.292 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43338/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:03:16.298 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:03:16.301 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 04:03:16.301 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52432/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739246596300888064, "extraField": "extraValue"}}'
2025-02-11 04:03:16.305 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:52432/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-11 04:03:16.307 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:03:16.308 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:03:16.308 DEBUG [src.node.waku_node] Stopping container with id 5a08cb4e929a
2025-02-11 04:03:17.075 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:03:17.076 DEBUG [src.node.waku_node] Stopping container with id 26c81879564f
2025-02-11 04:03:17.887 ERROR [src.node.docker_mananger] Max retries reached for container 5a08cb4e929a. Exiting log stream.
2025-02-11 04:03:18.573 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:03:18.573 DEBUG [src.node.waku_node] Stopping container with id 7f590b97462a
2025-02-11 04:03:19.385 ERROR [src.node.docker_mananger] Max retries reached for container 26c81879564f. Exiting log stream.
2025-02-11 04:03:20.068 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:03:20.070 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:03:20.077 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:03:20.083 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:03:20.089 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
