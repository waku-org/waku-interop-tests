2025-02-11 04:03:10.471 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:03:10.472 DEBUG [tests.conftest] Running test: test_filter_get_message_with_150_kb_payload with id: 2025-02-11_04-03-10__2c01331c-3b70-4830-9a87-3d4673b496cd
2025-02-11 04:03:10.472 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:03:10.472 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 04:03:10.472 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-11 04:03:10.478 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:03:10.478 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_04-03-10__2c01331c-3b70-4830-9a87-3d4673b496cd__wakuorg_nwaku:latest.log
2025-02-11 04:03:10.479 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:03:10.479 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:03:10.480 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:03:10.480 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.191.173
2025-02-11 04:03:10.480 DEBUG [src.node.docker_mananger] Generated ports ['15385', '15386', '15387', '15388', '15389']
2025-02-11 04:03:10.481 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:03:10.481 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:03:10.481 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:03:10.481 DEBUG [src.node.docker_mananger] docker run -i -t -p 15385:15385 -p 15386:15386 -p 15387:15387 -p 15388:15388 -p 15389:15389 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15387 --rest-port=15385 --tcp-port=15386 --discv5-udp-port=15388 --rest-address=0.0.0.0 --nat=extip:172.18.191.173 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1edaffcba4fae49a7fecaa7c5c2262840fd17aec5f27ff0efdd0dae62cd4a5a8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15389 --metrics-logging=true --relay=true --filter=true
2025-02-11 04:03:10.702 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.191.173 waku 96f49b9588a190f8d72baa3540e4d69afd0e7f255f0ae8575778824334f84638
2025-02-11 04:03:10.745 DEBUG [src.node.docker_mananger] Container started with ID 96f49b9588a1. Setting up logs at ./log/docker/node1_2025-02-11_04-03-10__2c01331c-3b70-4830-9a87-3d4673b496cd__wakuorg_nwaku:latest.log
2025-02-11 04:03:10.746 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15385
2025-02-11 04:03:10.746 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:03:11.271 ERROR [src.node.docker_mananger] Max retries reached for container 7196b5dceb5e. Exiting log stream.
2025-02-11 04:03:11.747 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15385/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:03:11.750 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:03:11.750 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:03:11.751 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15385/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:03:11.753 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.191.173/tcp/15386/p2p/16Uiu2HAm7mdv6oXFsCfCimRqvPu5Hv6wjo2sATbpVxw7mvTsi9Ye","/ip4/172.18.191.173/tcp/15387/ws/p2p/16Uiu2HAm7mdv6oXFsCfCimRqvPu5Hv6wjo2sATbpVxw7mvTsi9Ye"],"enrUri":"enr:-L24QOv9QHy-2d5uCT-rwlLwtZnTUXNQe8WEQEYtKfjbczeoeRmzW7jC5iekAZF0HhKV11u-U3G4CXF-NiaNtTBidFsCgmlkgnY0gmlwhKwSv62KbXVsdGlhZGRyc5YACASsEr-tBjwaAAoErBK_rQY8G90DgnJzhQADAQAAiXNlY3AyNTZrMaECt2mGoYq3_X57eJwI5y3YEgqZBxZAAGstx4sfHKwhR1ODdGNwgjwag3VkcII8HIV3YWt1MgU"}'
2025-02-11 04:03:11.753 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:03:11.753 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-11 04:03:11.759 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:03:11.759 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_04-03-10__2c01331c-3b70-4830-9a87-3d4673b496cd__wakuorg_nwaku:latest.log
2025-02-11 04:03:11.760 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:03:11.760 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:03:11.761 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:03:11.761 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.99.241
2025-02-11 04:03:11.761 DEBUG [src.node.docker_mananger] Generated ports ['4207', '4208', '4209', '4210', '4211']
2025-02-11 04:03:11.762 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:03:11.762 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:03:11.762 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:03:11.762 DEBUG [src.node.docker_mananger] docker run -i -t -p 4207:4207 -p 4208:4208 -p 4209:4209 -p 4210:4210 -p 4211:4211 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4209 --rest-port=4207 --tcp-port=4208 --discv5-udp-port=4210 --rest-address=0.0.0.0 --nat=extip:172.18.99.241 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b3b3dbdd7cf2efc7ebae40b4c21ebba40f32f5c9fcd3c23f77afe288aa771bda --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4211 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QOv9QHy-2d5uCT-rwlLwtZnTUXNQe8WEQEYtKfjbczeoeRmzW7jC5iekAZF0HhKV11u-U3G4CXF-NiaNtTBidFsCgmlkgnY0gmlwhKwSv62KbXVsdGlhZGRyc5YACASsEr-tBjwaAAoErBK_rQY8G90DgnJzhQADAQAAiXNlY3AyNTZrMaECt2mGoYq3_X57eJwI5y3YEgqZBxZAAGstx4sfHKwhR1ODdGNwgjwag3VkcII8HIV3YWt1MgU --filternode=/ip4/172.18.191.173/tcp/15386/p2p/16Uiu2HAm7mdv6oXFsCfCimRqvPu5Hv6wjo2sATbpVxw7mvTsi9Ye
2025-02-11 04:03:11.986 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.99.241 waku 35e73eba64f6553d122e8e3c3af27669b5c47f23c0b51ef3d7e7fa280b1c2836
2025-02-11 04:03:12.030 DEBUG [src.node.docker_mananger] Container started with ID 35e73eba64f6. Setting up logs at ./log/docker/node2_2025-02-11_04-03-10__2c01331c-3b70-4830-9a87-3d4673b496cd__wakuorg_nwaku:latest.log
2025-02-11 04:03:12.030 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 4207
2025-02-11 04:03:12.030 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:03:13.031 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4207/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:03:13.034 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:03:13.034 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:03:13.034 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4207/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:03:13.036 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.99.241/tcp/4208/p2p/16Uiu2HAm4LBB3CDvydLbENrERVVw1dJiAdwFFHf55xLpfs82Wit1","/ip4/172.18.99.241/tcp/4209/ws/p2p/16Uiu2HAm4LBB3CDvydLbENrERVVw1dJiAdwFFHf55xLpfs82Wit1"],"enrUri":"enr:-L24QDJdHagaORoUjLjijmZuWZulwk1UIygosNg7HpO2KvwcA5iIiNUJhTcabPZyZGHm1NGyty4cL_1SiaWMmEutO0oCgmlkgnY0gmlwhKwSY_GKbXVsdGlhZGRyc5YACASsEmPxBhBwAAoErBJj8QYQcd0DgnJzhQADAQAAiXNlY3AyNTZrMaEChFC1BSKAY1wbM9H6BmgKscPqEZbSy3wgC5znD-aU4cqDdGNwghBwg3VkcIIQcoV3YWt1MgA"}'
2025-02-11 04:03:13.036 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:03:13.037 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4207/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.191.173/tcp/15386/p2p/16Uiu2HAm7mdv6oXFsCfCimRqvPu5Hv6wjo2sATbpVxw7mvTsi9Ye"]'
2025-02-11 04:03:13.073 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:03:13.074 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-11 04:03:13.074 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15385/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 04:03:13.091 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:03:13.093 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4207/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "2a66c39d-7553-4812-9c84-03541a99e878", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 04:03:13.103 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"2a66c39d-7553-4812-9c84-03541a99e878","statusDesc":"OK"}'
2025-02-11 04:03:13.107 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-11 04:03:13.127 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:03:13.127 DEBUG [src.libs.common] Sleeping for 2 seconds
2025-02-11 04:03:15.127 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 04:03:15.128 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4207/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:03:15.132 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-11 04:03:15.136 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:03:15.137 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:03:15.137 DEBUG [src.node.waku_node] Stopping container with id 96f49b9588a1
2025-02-11 04:03:16.485 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:03:16.487 DEBUG [src.node.waku_node] Stopping container with id 35e73eba64f6
2025-02-11 04:03:17.312 ERROR [src.node.docker_mananger] Max retries reached for container 96f49b9588a1. Exiting log stream.
2025-02-11 04:03:17.984 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:03:17.985 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:03:17.993 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:03:17.997 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
