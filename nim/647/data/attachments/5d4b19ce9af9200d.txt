2025-02-11 04:06:23.586 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:06:23.586 DEBUG [tests.conftest] Running test: test_store_with_long_string_pubsub_topic with id: 2025-02-11_04-06-23__13f5553e-33c5-4489-af84-62e353838853
2025-02-11 04:06:23.586 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:06:23.587 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 04:06:23.587 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-11 04:06:23.593 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:06:23.593 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-11_04-06-23__13f5553e-33c5-4489-af84-62e353838853__wakuorg_nwaku:latest.log
2025-02-11 04:06:23.593 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:06:23.593 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:06:23.595 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:06:23.595 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.9.101
2025-02-11 04:06:23.595 DEBUG [src.node.docker_mananger] Generated ports ['17922', '17923', '17924', '17925', '17926']
2025-02-11 04:06:23.595 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:06:23.595 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:06:23.596 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:06:23.596 DEBUG [src.node.docker_mananger] docker run -i -t -p 17922:17922 -p 17923:17923 -p 17924:17924 -p 17925:17925 -p 17926:17926 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17924 --rest-port=17922 --tcp-port=17923 --discv5-udp-port=17925 --rest-address=0.0.0.0 --nat=extip:172.18.9.101 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=de64b1d5dcb6ba6a5ee70deddd6bdf6403af2d0afb9ff91e0ab09eafcbee17f4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17926 --metrics-logging=true --store=true --relay=true
2025-02-11 04:06:23.835 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.9.101 waku 32403a3345d4ca284cfd01e5c6ce2ace74e38c5a1a25ac7a178d5263c756a1fa
2025-02-11 04:06:23.886 DEBUG [src.node.docker_mananger] Container started with ID 32403a3345d4. Setting up logs at ./log/docker/publishing_node1_2025-02-11_04-06-23__13f5553e-33c5-4489-af84-62e353838853__wakuorg_nwaku:latest.log
2025-02-11 04:06:23.887 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17922
2025-02-11 04:06:23.887 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:06:24.393 ERROR [src.node.docker_mananger] Max retries reached for container f6625326b33c. Exiting log stream.
2025-02-11 04:06:24.888 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17922/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:24.890 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:06:24.890 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:06:24.891 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17922/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:24.893 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.101/tcp/17923/p2p/16Uiu2HAmN9zmudd3nEaWjDEb368WnEreHiqxhomv4B5U9CwM6YbS","/ip4/172.18.9.101/tcp/17924/ws/p2p/16Uiu2HAmN9zmudd3nEaWjDEb368WnEreHiqxhomv4B5U9CwM6YbS"],"enrUri":"enr:-L24QIryOSRzdV9h8PYkxLkRVp6Fm6dL4321k-jYEfysx9D3SrusWtnYZ-rUMLnKyqGzrk2R0jxjMrqdw7W8Kv4FBCECgmlkgnY0gmlwhKwSCWWKbXVsdGlhZGRyc5YACASsEgllBkYDAAoErBIJZQZGBN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDjSeBd7Zuc5nsr3QSlhTkG-TPPkbs4pL-z3L3Al0XYrGDdGNwgkYDg3VkcIJGBYV3YWt1MgM"}'
2025-02-11 04:06:24.893 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:06:24.900 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:06:24.900 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-11_04-06-23__13f5553e-33c5-4489-af84-62e353838853__wakuorg_nwaku:latest.log
2025-02-11 04:06:24.900 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:06:24.900 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:06:24.901 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:06:24.901 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.2.65
2025-02-11 04:06:24.902 DEBUG [src.node.docker_mananger] Generated ports ['43467', '43468', '43469', '43470', '43471']
2025-02-11 04:06:24.902 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:06:24.902 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:06:24.902 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:06:24.902 DEBUG [src.node.docker_mananger] docker run -i -t -p 43467:43467 -p 43468:43468 -p 43469:43469 -p 43470:43470 -p 43471:43471 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43469 --rest-port=43467 --tcp-port=43468 --discv5-udp-port=43470 --rest-address=0.0.0.0 --nat=extip:172.18.2.65 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dc140a230d72c7ca9b0fa0e2ea1ca0a34929c87a9277b4c21c515f1d8edd6a26 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43471 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QIryOSRzdV9h8PYkxLkRVp6Fm6dL4321k-jYEfysx9D3SrusWtnYZ-rUMLnKyqGzrk2R0jxjMrqdw7W8Kv4FBCECgmlkgnY0gmlwhKwSCWWKbXVsdGlhZGRyc5YACASsEgllBkYDAAoErBIJZQZGBN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDjSeBd7Zuc5nsr3QSlhTkG-TPPkbs4pL-z3L3Al0XYrGDdGNwgkYDg3VkcIJGBYV3YWt1MgM --storenode=/ip4/172.18.9.101/tcp/17923/p2p/16Uiu2HAmN9zmudd3nEaWjDEb368WnEreHiqxhomv4B5U9CwM6YbS --store=true --relay=true
2025-02-11 04:06:25.134 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.2.65 waku 89f198c265fbb86b51b6778148be5973b2cb7b79069328e3ef0298b75547eeda
2025-02-11 04:06:25.181 DEBUG [src.node.docker_mananger] Container started with ID 89f198c265fb. Setting up logs at ./log/docker/store_node1_2025-02-11_04-06-23__13f5553e-33c5-4489-af84-62e353838853__wakuorg_nwaku:latest.log
2025-02-11 04:06:25.181 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 43467
2025-02-11 04:06:25.181 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:06:26.182 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43467/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:26.185 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:06:26.186 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:06:26.186 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43467/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:26.188 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.2.65/tcp/43468/p2p/16Uiu2HAm6Lp7GsLx6m1Fy6UHQWZK9J3GBYDWG9SsmBMNLZAFV4uG","/ip4/172.18.2.65/tcp/43469/ws/p2p/16Uiu2HAm6Lp7GsLx6m1Fy6UHQWZK9J3GBYDWG9SsmBMNLZAFV4uG"],"enrUri":"enr:-L24QHr1PId2KI7E28QF3DQqgVAyZKRzH_k0Mfa08IR5PF8UThwAGmQG8W8hVJk40aR2X0cwzKMxOYVfC4JT5TcBs1UCgmlkgnY0gmlwhKwSAkGKbXVsdGlhZGRyc5YACASsEgJBBqnMAAoErBICQQapzd0DgnJzhQADAQAAiXNlY3AyNTZrMaECojHX9vsWuvpuXHhRKv-SPfKdzpqvn41Y3WLf-hXBnaODdGNwgqnMg3VkcIKpzoV3YWt1MgM"}'
2025-02-11 04:06:26.188 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:06:26.189 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43467/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.9.101/tcp/17923/p2p/16Uiu2HAmN9zmudd3nEaWjDEb368WnEreHiqxhomv4B5U9CwM6YbS"]'
2025-02-11 04:06:26.191 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:26.192 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17922/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:06:26.194 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:26.194 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43467/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:06:26.196 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:26.197 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:26.197 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17922/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:26.203 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:26.203 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:26.404 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:26.405 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17922/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:26.411 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:26.412 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:26.613 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:26.613 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17922/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:26.620 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:26.620 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:26.821 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:26.821 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17922/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:26.827 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:26.828 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:27.028 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:27.029 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17922/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:27.039 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:27.039 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:27.240 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:27.240 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17922/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:27.246 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:27.247 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:27.448 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:27.448 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17922/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:27.454 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:27.454 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:27.655 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:27.656 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17922/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:27.662 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:27.663 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:27.974 DEBUG [tests.store.test_topics] Trying to get stored msg with url topic size million 
2025-02-11 04:06:27.975 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:27.975 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17922/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:27.981 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:27.982 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:28.184 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-11 04:06:28.395 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-11 04:06:33.615 ERROR [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-11 04:06:33.619 ERROR [tests.store.test_topics] store request with very long pubsub topic wasn't accepted 
2025-02-11 04:06:33.622 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:06:33.623 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:06:33.624 DEBUG [src.node.waku_node] Stopping container with id 32403a3345d4
2025-02-11 04:06:34.419 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:06:34.420 DEBUG [src.node.waku_node] Stopping container with id 89f198c265fb
2025-02-11 04:06:35.232 ERROR [src.node.docker_mananger] Max retries reached for container 32403a3345d4. Exiting log stream.
2025-02-11 04:06:35.927 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:06:35.928 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:06:35.936 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:06:35.943 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
