2025-02-11 04:02:21.434 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:02:21.435 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2025-02-11_04-02-21__612bf998-65dd-4869-889e-d66eb9fca717
2025-02-11 04:02:21.435 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:02:21.435 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 04:02:21.436 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 04:02:21.444 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:02:21.444 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_04-02-21__612bf998-65dd-4869-889e-d66eb9fca717__wakuorg_nwaku:latest.log
2025-02-11 04:02:21.450 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:02:21.450 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_04-02-21__612bf998-65dd-4869-889e-d66eb9fca717__wakuorg_nwaku:latest.log
2025-02-11 04:02:21.456 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:02:21.456 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-11_04-02-21__612bf998-65dd-4869-889e-d66eb9fca717__wakuorg_nwaku:latest.log
2025-02-11 04:02:21.456 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 04:02:21.456 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 04:02:21.457 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:02:21.457 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:02:21.524 DEBUG [src.node.docker_mananger] Network waku created
2025-02-11 04:02:21.524 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.224.161
2025-02-11 04:02:21.524 DEBUG [src.node.docker_mananger] Generated ports ['37740', '37741', '37742', '37743', '37744']
2025-02-11 04:02:21.524 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:02:21.524 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:02:21.525 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:02:21.525 DEBUG [src.node.docker_mananger] docker run -i -t -p 37740:37740 -p 37741:37741 -p 37742:37742 -p 37743:37743 -p 37744:37744 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37742 --rest-port=37740 --tcp-port=37741 --discv5-udp-port=37743 --rest-address=0.0.0.0 --nat=extip:172.18.224.161 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9b89d7bb8cd7edbef8dddc8aeee44b6cbda0ac540bf6c9760fcb214cd6c3c4d8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37744 --metrics-logging=true --relay=true
2025-02-11 04:02:23.521 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.224.161 waku 6ede5a5cd24d5f66612c710915a7954752ff1c74c1f0bb0b3634f627086d6ee3
2025-02-11 04:02:23.565 DEBUG [src.node.docker_mananger] Container started with ID 6ede5a5cd24d. Setting up logs at ./log/docker/node1_2025-02-11_04-02-21__612bf998-65dd-4869-889e-d66eb9fca717__wakuorg_nwaku:latest.log
2025-02-11 04:02:23.566 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37740
2025-02-11 04:02:23.566 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:02:24.567 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37740/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:02:24.570 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:02:24.570 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:02:24.570 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37740/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:02:24.573 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.224.161/tcp/37741/p2p/16Uiu2HAmJKNiCrMJ5qByvVe54gqb3JRLLvMme3WVwpMm7o8yoe45","/ip4/172.18.224.161/tcp/37742/ws/p2p/16Uiu2HAmJKNiCrMJ5qByvVe54gqb3JRLLvMme3WVwpMm7o8yoe45"],"enrUri":"enr:-L24QKAezxbBGDu3wRW_8GscZhHFBniMc7Cquys-NJWeacQTW9UrjXcPHnWA3rs6S6cLnFZWzHbBD4wr27uhMHHDaRcCgmlkgnY0gmlwhKwS4KGKbXVsdGlhZGRyc5YACASsEuChBpNtAAoErBLgoQaTbt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVB_J4XllK8qcJDDCvoXOgAy-CpX0Q_UK6pr1NgJyq3aDdGNwgpNtg3VkcIKTb4V3YWt1MgE"}'
2025-02-11 04:02:24.573 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:02:24.573 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:02:24.573 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:02:24.575 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:02:24.575 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.21.79
2025-02-11 04:02:24.575 DEBUG [src.node.docker_mananger] Generated ports ['64441', '64442', '64443', '64444', '64445']
2025-02-11 04:02:24.575 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:02:24.575 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:02:24.576 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:02:24.576 DEBUG [src.node.docker_mananger] docker run -i -t -p 64441:64441 -p 64442:64442 -p 64443:64443 -p 64444:64444 -p 64445:64445 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64443 --rest-port=64441 --tcp-port=64442 --discv5-udp-port=64444 --rest-address=0.0.0.0 --nat=extip:172.18.21.79 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dd83aedbe5cff060e3ec2bceebc6cf53fe2575fcb4acde3e791ee127dec06c02 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64445 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QKAezxbBGDu3wRW_8GscZhHFBniMc7Cquys-NJWeacQTW9UrjXcPHnWA3rs6S6cLnFZWzHbBD4wr27uhMHHDaRcCgmlkgnY0gmlwhKwS4KGKbXVsdGlhZGRyc5YACASsEuChBpNtAAoErBLgoQaTbt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVB_J4XllK8qcJDDCvoXOgAy-CpX0Q_UK6pr1NgJyq3aDdGNwgpNtg3VkcIKTb4V3YWt1MgE
2025-02-11 04:02:24.795 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.21.79 waku de69f1bc3c190143856bec335b1ad39df7ef2d68812a222974e0eba773baa43e
2025-02-11 04:02:24.842 DEBUG [src.node.docker_mananger] Container started with ID de69f1bc3c19. Setting up logs at ./log/docker/node2_2025-02-11_04-02-21__612bf998-65dd-4869-889e-d66eb9fca717__wakuorg_nwaku:latest.log
2025-02-11 04:02:24.843 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 64441
2025-02-11 04:02:24.844 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:02:25.844 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64441/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:02:25.849 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:02:25.849 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:02:25.849 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64441/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:02:25.857 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.21.79/tcp/64442/p2p/16Uiu2HAmNM8h25XRPAsS5fdTRRQ9v2b1auaopGqj73FRqQqpMV64","/ip4/172.18.21.79/tcp/64443/ws/p2p/16Uiu2HAmNM8h25XRPAsS5fdTRRQ9v2b1auaopGqj73FRqQqpMV64"],"enrUri":"enr:-L24QEuAYnSvDDYj-qISbN58r4sf_y9J33j3DXeGohVd2AncLYYcZSHz6gB7n4Q4t2wGXKLYa044kfIMiufEV8RJBTsCgmlkgnY0gmlwhKwSFU-KbXVsdGlhZGRyc5YACASsEhVPBvu6AAoErBIVTwb7u90DgnJzhQADAQAAiXNlY3AyNTZrMaEDkAHYTucTdN5b_JO_RnfT2-vAXlOlO8gdG1JSsmZmE-WDdGNwgvu6g3VkcIL7vIV3YWt1MgM"}'
2025-02-11 04:02:25.857 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:02:25.858 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:02:25.858 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:02:25.864 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:02:25.864 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.102.173
2025-02-11 04:02:25.867 DEBUG [src.node.docker_mananger] Generated ports ['10535', '10536', '10537', '10538', '10539']
2025-02-11 04:02:25.869 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:02:25.869 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:02:25.869 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:02:25.869 DEBUG [src.node.docker_mananger] docker run -i -t -p 10535:10535 -p 10536:10536 -p 10537:10537 -p 10538:10538 -p 10539:10539 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10537 --rest-port=10535 --tcp-port=10536 --discv5-udp-port=10538 --rest-address=0.0.0.0 --nat=extip:172.18.102.173 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fe99ca7be94d60aa1f267caa3bbf61e32eee9c1915d1d5ebdafd3af0002ec65a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10539 --metrics-logging=true --relay=false --storenode=/ip4/172.18.21.79/tcp/64442/p2p/16Uiu2HAmNM8h25XRPAsS5fdTRRQ9v2b1auaopGqj73FRqQqpMV64 --discv5-bootstrap-node=enr:-L24QEuAYnSvDDYj-qISbN58r4sf_y9J33j3DXeGohVd2AncLYYcZSHz6gB7n4Q4t2wGXKLYa044kfIMiufEV8RJBTsCgmlkgnY0gmlwhKwSFU-KbXVsdGlhZGRyc5YACASsEhVPBvu6AAoErBIVTwb7u90DgnJzhQADAQAAiXNlY3AyNTZrMaEDkAHYTucTdN5b_JO_RnfT2-vAXlOlO8gdG1JSsmZmE-WDdGNwgvu6g3VkcIL7vIV3YWt1MgM
2025-02-11 04:02:26.118 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.102.173 waku 86c99318a56f6fdbde3da16d1309f44e3d7736cc0c25a9bf879c3e1a818aca97
2025-02-11 04:02:26.167 DEBUG [src.node.docker_mananger] Container started with ID 86c99318a56f. Setting up logs at ./log/docker/node3_2025-02-11_04-02-21__612bf998-65dd-4869-889e-d66eb9fca717__wakuorg_nwaku:latest.log
2025-02-11 04:02:26.167 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 10535
2025-02-11 04:02:26.167 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:02:27.168 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10535/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:02:27.171 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:02:27.171 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:02:27.171 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10535/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:02:27.173 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.102.173/tcp/10536/p2p/16Uiu2HAkyMA9gbZxNZ1RsqAB2fAJMazvhu7CZi3icsyBoVt794ot","/ip4/172.18.102.173/tcp/10537/ws/p2p/16Uiu2HAkyMA9gbZxNZ1RsqAB2fAJMazvhu7CZi3icsyBoVt794ot"],"enrUri":"enr:-L24QPJ05HeVkvqbCvDrtY0oXVNLlSlWn9bbjnItcAPgUIgdXdTebSZPHjzl1_CVdSAr2WanYQM35mEdmGHbkCliOMkCgmlkgnY0gmlwhKwSZq2KbXVsdGlhZGRyc5YACASsEmatBikoAAoErBJmrQYpKd0DgnJzhQADAQAAiXNlY3AyNTZrMaECOkayN-Ipmuz8Kal8F46WPZh4mQili6UxXaRP8EfkHIuDdGNwgikog3VkcIIpKoV3YWt1MgA"}'
2025-02-11 04:02:27.174 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:02:27.174 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37740/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 04:02:27.179 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:02:27.179 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64441/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 04:02:27.185 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:02:27.186 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37740/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:02:27.189 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.21.79/tcp/64442/p2p/16Uiu2HAmNM8h25XRPAsS5fdTRRQ9v2b1auaopGqj73FRqQqpMV64","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-11 04:02:27.190 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64441/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:02:27.192 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.224.161/tcp/37741/p2p/16Uiu2HAmJKNiCrMJ5qByvVe54gqb3JRLLvMme3WVwpMm7o8yoe45","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
2025-02-11 04:02:27.192 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-11 04:02:57.193 DEBUG [src.steps.store] Relaying message
2025-02-11 04:02:57.193 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37740/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:02:57.199 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:02:57.199 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:02:57.400 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-11 04:02:57.401 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10535/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:02:57.442 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1251406654fefe55c03d","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xeef7feb43f090ed255e2b2dbd270877554f2141970e5f0c7de3590b8f606e263"}]}'
2025-02-11 04:02:57.452 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:02:57.453 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:02:57.453 DEBUG [src.node.waku_node] Stopping container with id 6ede5a5cd24d
2025-02-11 04:02:58.293 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:02:58.293 DEBUG [src.node.waku_node] Stopping container with id de69f1bc3c19
2025-02-11 04:02:59.105 ERROR [src.node.docker_mananger] Max retries reached for container 6ede5a5cd24d. Exiting log stream.
2025-02-11 04:02:59.600 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:02:59.602 DEBUG [src.node.waku_node] Stopping container with id 86c99318a56f
2025-02-11 04:03:00.412 ERROR [src.node.docker_mananger] Max retries reached for container de69f1bc3c19. Exiting log stream.
2025-02-11 04:03:01.084 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:03:01.087 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:03:01.096 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:03:01.108 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:03:01.112 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
