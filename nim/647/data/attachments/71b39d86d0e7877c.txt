2025-02-11 04:04:13.539 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:04:13.540 DEBUG [tests.conftest] Running test: test_publish_after_node1_restarts with id: 2025-02-11_04-04-13__352a78ca-2b96-4d29-9073-1da4baf9b24e
2025-02-11 04:04:13.540 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:04:13.540 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 04:04:13.540 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-11 04:04:13.546 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:04:13.546 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_04-04-13__352a78ca-2b96-4d29-9073-1da4baf9b24e__wakuorg_nwaku:latest.log
2025-02-11 04:04:13.547 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:04:13.547 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:04:13.548 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:04:13.548 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.106.16
2025-02-11 04:04:13.548 DEBUG [src.node.docker_mananger] Generated ports ['29703', '29704', '29705', '29706', '29707']
2025-02-11 04:04:13.548 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:04:13.549 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:04:13.549 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:04:13.549 DEBUG [src.node.docker_mananger] docker run -i -t -p 29703:29703 -p 29704:29704 -p 29705:29705 -p 29706:29706 -p 29707:29707 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29705 --rest-port=29703 --tcp-port=29704 --discv5-udp-port=29706 --rest-address=0.0.0.0 --nat=extip:172.18.106.16 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=90f4fa292bedf8e5b584cb79fb1dce22ea5de5adde462b49cadb74f1a0cdcbcf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29707 --metrics-logging=true --relay=true
2025-02-11 04:04:13.782 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.106.16 waku db739828407b933f27488ea96b7256af18f67dc65614c5267fddf78449a4a96b
2025-02-11 04:04:13.834 DEBUG [src.node.docker_mananger] Container started with ID db739828407b. Setting up logs at ./log/docker/node1_2025-02-11_04-04-13__352a78ca-2b96-4d29-9073-1da4baf9b24e__wakuorg_nwaku:latest.log
2025-02-11 04:04:13.835 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29703
2025-02-11 04:04:13.835 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:04:14.333 ERROR [src.node.docker_mananger] Max retries reached for container 295a8fddf8e6. Exiting log stream.
2025-02-11 04:04:14.835 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29703/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:14.838 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:04:14.838 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:04:14.838 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29703/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:14.841 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.106.16/tcp/29704/p2p/16Uiu2HAmCBYgqknnXkzjRgVRTcPtbwz8GbZqxGb42Bh2a3sTHUCp","/ip4/172.18.106.16/tcp/29705/ws/p2p/16Uiu2HAmCBYgqknnXkzjRgVRTcPtbwz8GbZqxGb42Bh2a3sTHUCp"],"enrUri":"enr:-L24QLDXOx-Y9HdzYl6zglrmcJ4ty-RIITW23LX9wlmHfCo7XFCe4hz1yyKf8j_0VZv07wtQiBpSGM61A5e0_A4TAnUCgmlkgnY0gmlwhKwSahCKbXVsdGlhZGRyc5YACASsEmoQBnQIAAoErBJqEAZ0Cd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-PhND2nL7UOx2nwyRsORu9QpYunbYnuEW1tM-N7mTNmDdGNwgnQIg3VkcIJ0CoV3YWt1MgE"}'
2025-02-11 04:04:14.841 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:04:14.847 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:04:14.847 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_04-04-13__352a78ca-2b96-4d29-9073-1da4baf9b24e__wakuorg_nwaku:latest.log
2025-02-11 04:04:14.847 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:04:14.847 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:04:14.849 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:04:14.849 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.180.199
2025-02-11 04:04:14.849 DEBUG [src.node.docker_mananger] Generated ports ['42682', '42683', '42684', '42685', '42686']
2025-02-11 04:04:14.849 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:04:14.849 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:04:14.849 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:04:14.849 DEBUG [src.node.docker_mananger] docker run -i -t -p 42682:42682 -p 42683:42683 -p 42684:42684 -p 42685:42685 -p 42686:42686 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42684 --rest-port=42682 --tcp-port=42683 --discv5-udp-port=42685 --rest-address=0.0.0.0 --nat=extip:172.18.180.199 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=55e604110f0e50ddd362bdfad82aad8fdbdd725d46abeec6b1dea42bfedb8e9d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42686 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QLDXOx-Y9HdzYl6zglrmcJ4ty-RIITW23LX9wlmHfCo7XFCe4hz1yyKf8j_0VZv07wtQiBpSGM61A5e0_A4TAnUCgmlkgnY0gmlwhKwSahCKbXVsdGlhZGRyc5YACASsEmoQBnQIAAoErBJqEAZ0Cd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-PhND2nL7UOx2nwyRsORu9QpYunbYnuEW1tM-N7mTNmDdGNwgnQIg3VkcIJ0CoV3YWt1MgE
2025-02-11 04:04:15.084 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.180.199 waku 8c608e3ebedce9c68a425d0b16e81517ba4441ffd4a5f54c3b34ab7af7d58eb5
2025-02-11 04:04:15.131 DEBUG [src.node.docker_mananger] Container started with ID 8c608e3ebedc. Setting up logs at ./log/docker/node2_2025-02-11_04-04-13__352a78ca-2b96-4d29-9073-1da4baf9b24e__wakuorg_nwaku:latest.log
2025-02-11 04:04:15.132 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42682
2025-02-11 04:04:15.132 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:04:16.132 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42682/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:16.137 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:04:16.138 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:04:16.138 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42682/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:16.145 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.180.199/tcp/42683/p2p/16Uiu2HAkuYXAGEZrqbTntfLDa9SEejqSXZHiHGFD9b8LiaKjAW8Z","/ip4/172.18.180.199/tcp/42684/ws/p2p/16Uiu2HAkuYXAGEZrqbTntfLDa9SEejqSXZHiHGFD9b8LiaKjAW8Z"],"enrUri":"enr:-L24QJIMAI02p_4zB4RUg6fqsDOf8Xl1OtJGu2SPbAaemlEVdZpea69tDvlUTroWDNBFnEH44psy-vsQ28Ph70vqp6kCgmlkgnY0gmlwhKwStMeKbXVsdGlhZGRyc5YACASsErTHBqa7AAoErBK0xwamvN0DgnJzhQADAQAAiXNlY3AyNTZrMaECAcEX68rrVsGZs4apFPhWgxXJcPAOq6f8l1a3ahFRQdKDdGNwgqa7g3VkcIKmvYV3YWt1MgE"}'
2025-02-11 04:04:16.145 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:04:16.146 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42682/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.106.16/tcp/29704/p2p/16Uiu2HAmCBYgqknnXkzjRgVRTcPtbwz8GbZqxGb42Bh2a3sTHUCp"]'
2025-02-11 04:04:16.148 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:16.149 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2025-02-11 04:04:16.149 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29703/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 04:04:16.153 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:16.153 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42682/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 04:04:16.158 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:16.159 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:04:16.164 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:16.165 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 04:04:16.265 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 04:04:16.265 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:16.268 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739246656159479040,"ephemeral":false}]'
2025-02-11 04:04:16.270 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 04:04:16.270 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:16.272 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739246656159479040,"ephemeral":false}]'
2025-02-11 04:04:16.273 INFO [src.steps.relay] WARM UP successful!!
2025-02-11 04:04:16.274 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:04:16.279 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:16.279 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 04:04:16.380 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 04:04:16.380 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:16.383 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739246656274739456,"ephemeral":false}]'
2025-02-11 04:04:16.385 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 04:04:16.385 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:16.387 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739246656274739456,"ephemeral":false}]'
2025-02-11 04:04:16.388 DEBUG [src.node.waku_node] Restarting container with id db739828407b
2025-02-11 04:04:17.551 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29703/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:17.655 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29703/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:17.658 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:04:17.658 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:04:17.658 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29703/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:17.660 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.106.16/tcp/29704/p2p/16Uiu2HAmCBYgqknnXkzjRgVRTcPtbwz8GbZqxGb42Bh2a3sTHUCp","/ip4/172.18.106.16/tcp/29705/ws/p2p/16Uiu2HAmCBYgqknnXkzjRgVRTcPtbwz8GbZqxGb42Bh2a3sTHUCp"],"enrUri":"enr:-L24QLDXOx-Y9HdzYl6zglrmcJ4ty-RIITW23LX9wlmHfCo7XFCe4hz1yyKf8j_0VZv07wtQiBpSGM61A5e0_A4TAnUCgmlkgnY0gmlwhKwSahCKbXVsdGlhZGRyc5YACASsEmoQBnQIAAoErBJqEAZ0Cd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-PhND2nL7UOx2nwyRsORu9QpYunbYnuEW1tM-N7mTNmDdGNwgnQIg3VkcIJ0CoV3YWt1MgE"}'
2025-02-11 04:04:17.661 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:04:17.661 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29703/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 04:04:17.680 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:17.680 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42682/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 04:04:17.683 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:17.683 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:04:17.686 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:17.686 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 04:04:17.787 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 04:04:17.787 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:17.790 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739246657683745024,"ephemeral":false}]'
2025-02-11 04:04:17.791 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 04:04:17.791 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:17.794 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-11 04:04:18.795 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29703/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 04:04:18.797 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:18.798 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42682/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 04:04:18.800 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:18.800 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:04:18.803 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:18.803 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 04:04:18.904 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 04:04:18.904 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:18.906 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739246658800944128,"ephemeral":false}]'
2025-02-11 04:04:18.908 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 04:04:18.908 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:18.910 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-11 04:04:19.911 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29703/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 04:04:19.914 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:19.914 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42682/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 04:04:19.916 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:19.917 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:04:19.920 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:19.920 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 04:04:20.020 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 04:04:20.020 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:20.023 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739246659917250816,"ephemeral":false}]'
2025-02-11 04:04:20.025 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 04:04:20.025 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:20.027 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-11 04:04:21.028 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29703/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 04:04:21.031 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:21.031 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42682/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 04:04:21.033 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:21.033 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:04:21.036 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:21.036 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 04:04:21.136 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 04:04:21.137 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:21.139 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739246661033873920,"ephemeral":false}]'
2025-02-11 04:04:21.141 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 04:04:21.141 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:21.143 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-11 04:04:22.144 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29703/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 04:04:22.165 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:22.166 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42682/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 04:04:22.175 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:22.178 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:04:22.184 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:22.185 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 04:04:22.285 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 04:04:22.285 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:22.288 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739246662178084608,"ephemeral":false}]'
2025-02-11 04:04:22.289 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 04:04:22.289 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:22.292 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739246662178084608,"ephemeral":false}]'
2025-02-11 04:04:22.295 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:04:22.296 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:04:22.296 DEBUG [src.node.waku_node] Stopping container with id db739828407b
2025-02-11 04:04:22.820 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:04:22.820 DEBUG [src.node.waku_node] Stopping container with id 8c608e3ebedc
2025-02-11 04:04:23.659 ERROR [src.node.docker_mananger] Max retries reached for container db739828407b. Exiting log stream.
2025-02-11 04:04:24.085 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:04:24.086 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:04:24.113 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:04:24.121 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
