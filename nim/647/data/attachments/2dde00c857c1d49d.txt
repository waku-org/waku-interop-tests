2025-02-11 04:06:07.044 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:06:07.045 DEBUG [tests.conftest] Running test: test_time_filter_matches_multiple_messages with id: 2025-02-11_04-06-07__c866ddfb-299e-46a8-be32-b72fede4e184
2025-02-11 04:06:07.046 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:06:07.047 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 04:06:07.047 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-11 04:06:07.055 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:06:07.055 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-11_04-06-07__c866ddfb-299e-46a8-be32-b72fede4e184__wakuorg_nwaku:latest.log
2025-02-11 04:06:07.056 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:06:07.056 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:06:07.058 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:06:07.058 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.238.36
2025-02-11 04:06:07.059 DEBUG [src.node.docker_mananger] Generated ports ['55805', '55806', '55807', '55808', '55809']
2025-02-11 04:06:07.059 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:06:07.059 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:06:07.059 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:06:07.059 DEBUG [src.node.docker_mananger] docker run -i -t -p 55805:55805 -p 55806:55806 -p 55807:55807 -p 55808:55808 -p 55809:55809 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55807 --rest-port=55805 --tcp-port=55806 --discv5-udp-port=55808 --rest-address=0.0.0.0 --nat=extip:172.18.238.36 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d3fe28d351931816a43a00aee0fd03f2d5ceca76edd2a4e4edbd06d9fd90f3a7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55809 --metrics-logging=true --store=true --relay=true
2025-02-11 04:06:07.279 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.238.36 waku bee8f89dcac51dbec7060e6eb6a6202af547ea2a096090ba6162c89071c09722
2025-02-11 04:06:07.327 DEBUG [src.node.docker_mananger] Container started with ID bee8f89dcac5. Setting up logs at ./log/docker/publishing_node1_2025-02-11_04-06-07__c866ddfb-299e-46a8-be32-b72fede4e184__wakuorg_nwaku:latest.log
2025-02-11 04:06:07.329 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 55805
2025-02-11 04:06:07.329 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:06:07.875 ERROR [src.node.docker_mananger] Max retries reached for container 083d445f3b69. Exiting log stream.
2025-02-11 04:06:08.330 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55805/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:08.333 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:06:08.333 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:06:08.333 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55805/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:08.336 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.238.36/tcp/55806/p2p/16Uiu2HAmGoNFNNp7SQ7s1Kinw1fhLb1cHzYsZvvCN6xtoqpPsgsa","/ip4/172.18.238.36/tcp/55807/ws/p2p/16Uiu2HAmGoNFNNp7SQ7s1Kinw1fhLb1cHzYsZvvCN6xtoqpPsgsa"],"enrUri":"enr:-L24QFQH0cPl4Qs_tgjJ8rK_EeM2_-sLG4kwV_S0oI9SvfX4ZlMwvWsNxL9mGJNi4ZQVGGLxnzNvtP0dVDwTKDb4j3oCgmlkgnY0gmlwhKwS7iSKbXVsdGlhZGRyc5YACASsEu4kBtn-AAoErBLuJAbZ_90DgnJzhQADAQAAiXNlY3AyNTZrMaEDPZQnfB8JgnTS_Low0qy1OdMV6bbwYPI9N2sUV3vCQ4GDdGNwgtn-g3VkcILaAIV3YWt1MgM"}'
2025-02-11 04:06:08.336 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:06:08.342 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:06:08.342 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-11_04-06-07__c866ddfb-299e-46a8-be32-b72fede4e184__wakuorg_nwaku:latest.log
2025-02-11 04:06:08.343 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:06:08.343 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:06:08.344 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:06:08.344 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.251.37
2025-02-11 04:06:08.344 DEBUG [src.node.docker_mananger] Generated ports ['27192', '27193', '27194', '27195', '27196']
2025-02-11 04:06:08.345 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:06:08.345 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:06:08.345 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:06:08.345 DEBUG [src.node.docker_mananger] docker run -i -t -p 27192:27192 -p 27193:27193 -p 27194:27194 -p 27195:27195 -p 27196:27196 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27194 --rest-port=27192 --tcp-port=27193 --discv5-udp-port=27195 --rest-address=0.0.0.0 --nat=extip:172.18.251.37 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f889baecedc9638e23eaed5e16cb72eaaf45521fcc7ee59fbca983f2db60b153 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27196 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFQH0cPl4Qs_tgjJ8rK_EeM2_-sLG4kwV_S0oI9SvfX4ZlMwvWsNxL9mGJNi4ZQVGGLxnzNvtP0dVDwTKDb4j3oCgmlkgnY0gmlwhKwS7iSKbXVsdGlhZGRyc5YACASsEu4kBtn-AAoErBLuJAbZ_90DgnJzhQADAQAAiXNlY3AyNTZrMaEDPZQnfB8JgnTS_Low0qy1OdMV6bbwYPI9N2sUV3vCQ4GDdGNwgtn-g3VkcILaAIV3YWt1MgM --storenode=/ip4/172.18.238.36/tcp/55806/p2p/16Uiu2HAmGoNFNNp7SQ7s1Kinw1fhLb1cHzYsZvvCN6xtoqpPsgsa --store=true --relay=true
2025-02-11 04:06:08.572 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.251.37 waku 4907aca3e49b4f019f1d123e9365e815d4711572d11c4ee483c27b2ce186ed41
2025-02-11 04:06:08.621 DEBUG [src.node.docker_mananger] Container started with ID 4907aca3e49b. Setting up logs at ./log/docker/store_node1_2025-02-11_04-06-07__c866ddfb-299e-46a8-be32-b72fede4e184__wakuorg_nwaku:latest.log
2025-02-11 04:06:08.622 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27192
2025-02-11 04:06:08.622 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:06:09.622 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27192/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:09.625 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:06:09.625 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:06:09.625 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27192/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:09.627 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.251.37/tcp/27193/p2p/16Uiu2HAm9BkAm4bEyPXDVWJZtPrMfPNheSTjhPqn98WNFJUrBuA6","/ip4/172.18.251.37/tcp/27194/ws/p2p/16Uiu2HAm9BkAm4bEyPXDVWJZtPrMfPNheSTjhPqn98WNFJUrBuA6"],"enrUri":"enr:-L24QEN4klq4y68jtZ67wuVwBeJ8ik2udMUS02b1CZZpcrEXbFUf2oxU-PzCOCNst3s87pPgE24KGbVOzT3KvnAn6CMCgmlkgnY0gmlwhKwS-yWKbXVsdGlhZGRyc5YACASsEvslBmo5AAoErBL7JQZqOt0DgnJzhQADAQAAiXNlY3AyNTZrMaECzHI45c19QzEKaWBzq2qFmYXKa40ZLQ1KTCrl1FvtKx-DdGNwgmo5g3VkcIJqO4V3YWt1MgM"}'
2025-02-11 04:06:09.627 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:06:09.628 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27192/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.238.36/tcp/55806/p2p/16Uiu2HAmGoNFNNp7SQ7s1Kinw1fhLb1cHzYsZvvCN6xtoqpPsgsa"]'
2025-02-11 04:06:09.630 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:09.630 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55805/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:06:09.633 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:09.633 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27192/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:06:09.635 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:09.636 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:09.636 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55805/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:09.642 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:09.642 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:09.843 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:09.843 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55805/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:09.848 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:09.848 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:10.049 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:10.049 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55805/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:10.054 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:10.055 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:10.255 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:10.255 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55805/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:10.261 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:10.261 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:10.462 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:10.462 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55805/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:10.468 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:10.468 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:10.669 DEBUG [src.steps.store] Relaying message
2025-02-11 04:06:10.669 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55805/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:06:10.674 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:06:10.675 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:06:10.876 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55805/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739246766636382048&endTime=1739246771636593824&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:10.878 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xc85dbd0009056283616842250f4dc8e18cb5fbac686081b8e431b9b14f1053e1"},{"messageHash":"0xc4d4f30157d1b3f3319504a3e6674be49bb608b5990b8ba3ff441174060de2c6"},{"messageHash":"0xbd7188c253f6fea4cdf6d732ea17272fe42fa6cad23bfb4bbc1bb535fa76fd10"},{"messageHash":"0xafae7bb0424a25130c7d78b9d1045ec2e257e265e94d7689939c446d15e0a0a4"},{"messageHash":"0x7755bef1a28797caf199c934b8bfe479657746149b921e0bc76d0e09b76cc357"}]}'
2025-02-11 04:06:10.879 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27192/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739246766636382048&endTime=1739246771636593824&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:06:10.882 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xc85dbd0009056283616842250f4dc8e18cb5fbac686081b8e431b9b14f1053e1"},{"messageHash":"0xc4d4f30157d1b3f3319504a3e6674be49bb608b5990b8ba3ff441174060de2c6"},{"messageHash":"0xbd7188c253f6fea4cdf6d732ea17272fe42fa6cad23bfb4bbc1bb535fa76fd10"},{"messageHash":"0xafae7bb0424a25130c7d78b9d1045ec2e257e265e94d7689939c446d15e0a0a4"},{"messageHash":"0x7755bef1a28797caf199c934b8bfe479657746149b921e0bc76d0e09b76cc357"}]}'
2025-02-11 04:06:10.883 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:06:10.885 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:06:10.885 DEBUG [src.node.waku_node] Stopping container with id bee8f89dcac5
2025-02-11 04:06:11.849 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:06:11.850 DEBUG [src.node.waku_node] Stopping container with id 4907aca3e49b
2025-02-11 04:06:12.661 ERROR [src.node.docker_mananger] Max retries reached for container bee8f89dcac5. Exiting log stream.
2025-02-11 04:06:13.357 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:06:13.358 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:06:13.364 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:06:13.370 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
