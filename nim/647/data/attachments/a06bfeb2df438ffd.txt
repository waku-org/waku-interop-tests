2025-02-11 04:04:24.125 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:04:24.125 DEBUG [tests.conftest] Running test: test_relay_unsubscribe_from_non_existing_pubsub_topic with id: 2025-02-11_04-04-24__0bf4352d-676d-4942-96b6-f337e5863249
2025-02-11 04:04:24.125 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:04:24.125 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 04:04:24.126 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-11 04:04:24.132 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:04:24.132 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_04-04-24__0bf4352d-676d-4942-96b6-f337e5863249__wakuorg_nwaku:latest.log
2025-02-11 04:04:24.132 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:04:24.132 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:04:24.133 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:04:24.134 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.159.250
2025-02-11 04:04:24.134 DEBUG [src.node.docker_mananger] Generated ports ['14108', '14109', '14110', '14111', '14112']
2025-02-11 04:04:24.134 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:04:24.134 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:04:24.134 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:04:24.134 DEBUG [src.node.docker_mananger] docker run -i -t -p 14108:14108 -p 14109:14109 -p 14110:14110 -p 14111:14111 -p 14112:14112 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14110 --rest-port=14108 --tcp-port=14109 --discv5-udp-port=14111 --rest-address=0.0.0.0 --nat=extip:172.18.159.250 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b0ff95cf69b6ddfe97aeb76f4ed9d7e19bd7fce5ddb40d5be9e3ccfeffdafde2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14112 --metrics-logging=true --relay=true
2025-02-11 04:04:24.371 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.159.250 waku 39d1277ea9a69123457e5139215979b537060571486a27f5019cca6a17314e69
2025-02-11 04:04:24.418 DEBUG [src.node.docker_mananger] Container started with ID 39d1277ea9a6. Setting up logs at ./log/docker/node1_2025-02-11_04-04-24__0bf4352d-676d-4942-96b6-f337e5863249__wakuorg_nwaku:latest.log
2025-02-11 04:04:24.418 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14108
2025-02-11 04:04:24.418 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:04:24.923 ERROR [src.node.docker_mananger] Max retries reached for container 8c608e3ebedc. Exiting log stream.
2025-02-11 04:04:25.419 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14108/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:25.422 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:04:25.422 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:04:25.422 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14108/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:25.424 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.159.250/tcp/14109/p2p/16Uiu2HAmTeLW63iUaDAkRi1xHCrnKpzkMyazAhK81MwgSDByvBFn","/ip4/172.18.159.250/tcp/14110/ws/p2p/16Uiu2HAmTeLW63iUaDAkRi1xHCrnKpzkMyazAhK81MwgSDByvBFn"],"enrUri":"enr:-L24QMsBLGyYD4-Vzt90xJFYVDu-t0zcWozUIvZX_UAhxm8_fJAx92p_n8VR2QkWc-8YdBIe4i0IOhixEeqDFHhA8N0CgmlkgnY0gmlwhKwSn_qKbXVsdGlhZGRyc5YACASsEp_6BjcdAAoErBKf-gY3Ht0DgnJzhQADAQAAiXNlY3AyNTZrMaED3rSCOGxv8N1jDCwvv8d8CKTEsa3ylK79wRqz73vJ-UmDdGNwgjcdg3VkcII3H4V3YWt1MgE"}'
2025-02-11 04:04:25.424 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:04:25.430 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:04:25.430 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_04-04-24__0bf4352d-676d-4942-96b6-f337e5863249__wakuorg_nwaku:latest.log
2025-02-11 04:04:25.430 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:04:25.431 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:04:25.432 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:04:25.432 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.52.179
2025-02-11 04:04:25.432 DEBUG [src.node.docker_mananger] Generated ports ['31712', '31713', '31714', '31715', '31716']
2025-02-11 04:04:25.432 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:04:25.432 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:04:25.433 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:04:25.433 DEBUG [src.node.docker_mananger] docker run -i -t -p 31712:31712 -p 31713:31713 -p 31714:31714 -p 31715:31715 -p 31716:31716 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31714 --rest-port=31712 --tcp-port=31713 --discv5-udp-port=31715 --rest-address=0.0.0.0 --nat=extip:172.18.52.179 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e5ec709badef0f5ee50dbf01ec1dd9c6dcade73b9e7f7db7c7e1525a1cce9b1b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31716 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QMsBLGyYD4-Vzt90xJFYVDu-t0zcWozUIvZX_UAhxm8_fJAx92p_n8VR2QkWc-8YdBIe4i0IOhixEeqDFHhA8N0CgmlkgnY0gmlwhKwSn_qKbXVsdGlhZGRyc5YACASsEp_6BjcdAAoErBKf-gY3Ht0DgnJzhQADAQAAiXNlY3AyNTZrMaED3rSCOGxv8N1jDCwvv8d8CKTEsa3ylK79wRqz73vJ-UmDdGNwgjcdg3VkcII3H4V3YWt1MgE
2025-02-11 04:04:25.688 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.52.179 waku 6178e692a7b5f7ed99086506f1318ce6e9574529008c3303920b095612a890ab
2025-02-11 04:04:25.739 DEBUG [src.node.docker_mananger] Container started with ID 6178e692a7b5. Setting up logs at ./log/docker/node2_2025-02-11_04-04-24__0bf4352d-676d-4942-96b6-f337e5863249__wakuorg_nwaku:latest.log
2025-02-11 04:04:25.740 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 31712
2025-02-11 04:04:25.740 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:04:26.741 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31712/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:26.745 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:04:26.745 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:04:26.745 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31712/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:26.747 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.52.179/tcp/31713/p2p/16Uiu2HAmBy8217uhbNBkDTKDwRfQwdTdtgF4NL74ZuJwx9omCE31","/ip4/172.18.52.179/tcp/31714/ws/p2p/16Uiu2HAmBy8217uhbNBkDTKDwRfQwdTdtgF4NL74ZuJwx9omCE31"],"enrUri":"enr:-L24QOhNu6V8vBqfekhS_tgjhTVY0oonG70IKSnQQ1DXZApqQLlwJI7C6S8FpEpkJVm4vxM56c7dx9KLBUT2nwpd_3YCgmlkgnY0gmlwhKwSNLOKbXVsdGlhZGRyc5YACASsEjSzBnvhAAoErBI0swZ74t0DgnJzhQADAQAAiXNlY3AyNTZrMaEC9clv8MgHEYg1fQJaw9wh3urBvYHcKNhlAhyLn55SMACDdGNwgnvhg3VkcIJ744V3YWt1MgE"}'
2025-02-11 04:04:26.748 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:04:26.748 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31712/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.159.250/tcp/14109/p2p/16Uiu2HAmTeLW63iUaDAkRi1xHCrnKpzkMyazAhK81MwgSDByvBFn"]'
2025-02-11 04:04:26.750 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:26.751 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14108/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 04:04:26.755 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:26.756 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31712/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 04:04:26.761 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:26.762 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14108/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:04:26.767 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:26.768 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 04:04:26.868 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 04:04:26.869 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14108/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:26.871 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739246666761975040,"ephemeral":false}]'
2025-02-11 04:04:26.873 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 04:04:26.873 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31712/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:26.875 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739246666761975040,"ephemeral":false}]'
2025-02-11 04:04:26.877 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:14108/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1000"]'
2025-02-11 04:04:26.879 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:26.879 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:31712/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1000"]'
2025-02-11 04:04:26.882 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:26.882 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14108/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:04:26.887 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:04:26.888 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 04:04:26.988 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 04:04:26.988 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14108/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:26.991 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739246666882481664,"ephemeral":false}]'
2025-02-11 04:04:26.992 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 04:04:26.992 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31712/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:04:26.995 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739246666882481664,"ephemeral":false}]'
2025-02-11 04:04:26.997 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:04:26.998 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:04:26.998 DEBUG [src.node.waku_node] Stopping container with id 39d1277ea9a6
2025-02-11 04:04:27.910 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:04:27.910 DEBUG [src.node.waku_node] Stopping container with id 6178e692a7b5
2025-02-11 04:04:28.722 ERROR [src.node.docker_mananger] Max retries reached for container 39d1277ea9a6. Exiting log stream.
2025-02-11 04:04:29.413 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:04:29.413 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:04:29.419 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:04:29.425 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
