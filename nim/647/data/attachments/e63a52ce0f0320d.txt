2025-02-11 04:07:30.826 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:07:30.826 DEBUG [tests.conftest] Running test: test_relay_no_subscription with id: 2025-02-11_04-07-30__ded232b9-bb0e-4ea3-9d9d-c2d5445e05ae
2025-02-11 04:07:30.826 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:07:30.827 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 04:07:30.827 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-11 04:07:30.833 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:07:30.833 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_04-07-30__ded232b9-bb0e-4ea3-9d9d-c2d5445e05ae__wakuorg_nwaku:latest.log
2025-02-11 04:07:30.833 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:07:30.833 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:07:30.834 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:07:30.834 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.30.26
2025-02-11 04:07:30.835 DEBUG [src.node.docker_mananger] Generated ports ['45220', '45221', '45222', '45223', '45224']
2025-02-11 04:07:30.835 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:07:30.835 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:07:30.835 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:07:30.835 DEBUG [src.node.docker_mananger] docker run -i -t -p 45220:45220 -p 45221:45221 -p 45222:45222 -p 45223:45223 -p 45224:45224 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45222 --rest-port=45220 --tcp-port=45221 --discv5-udp-port=45223 --rest-address=0.0.0.0 --nat=extip:172.18.30.26 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=927ac48dda2bdccfdaff39e9bf78efdbcfbfe9f13d3b3b0a1d3c9850be0dbdc2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45224 --metrics-logging=true --relay=true
2025-02-11 04:07:31.058 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.30.26 waku fdbb41d0319ebc61ddda626a80d1a71b2ec1999029eaab43a21407e13fe17a45
2025-02-11 04:07:31.105 DEBUG [src.node.docker_mananger] Container started with ID fdbb41d0319e. Setting up logs at ./log/docker/node1_2025-02-11_04-07-30__ded232b9-bb0e-4ea3-9d9d-c2d5445e05ae__wakuorg_nwaku:latest.log
2025-02-11 04:07:31.106 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45220
2025-02-11 04:07:31.107 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:07:31.615 ERROR [src.node.docker_mananger] Max retries reached for container 8f890bf75c7a. Exiting log stream.
2025-02-11 04:07:32.107 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45220/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:07:32.110 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:07:32.110 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:07:32.110 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45220/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:07:32.112 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.30.26/tcp/45221/p2p/16Uiu2HAmJ9KToa8kTVr1xTnAc7vcKwpeTkGQwVB3yjqA31o2tTDi","/ip4/172.18.30.26/tcp/45222/ws/p2p/16Uiu2HAmJ9KToa8kTVr1xTnAc7vcKwpeTkGQwVB3yjqA31o2tTDi"],"enrUri":"enr:-L24QAu9q7Ei4iPcInSQcIXuDh7-UnmUq3ZkH9TdAmAG9V_YK8atOQkRaHKurTSjjcUhQXXHTv5rT3wY_7S1QEC2SIMCgmlkgnY0gmlwhKwSHhqKbXVsdGlhZGRyc5YACASsEh4aBrClAAoErBIeGgawpt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDUYxOwaAFSPKmNLqu2YzRF-63fyjfW3agQ-X8EUe8ZFGDdGNwgrClg3VkcIKwp4V3YWt1MgE"}'
2025-02-11 04:07:32.112 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:07:32.119 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:07:32.119 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_04-07-30__ded232b9-bb0e-4ea3-9d9d-c2d5445e05ae__wakuorg_nwaku:latest.log
2025-02-11 04:07:32.119 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:07:32.119 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:07:32.120 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:07:32.121 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.240.155
2025-02-11 04:07:32.121 DEBUG [src.node.docker_mananger] Generated ports ['45161', '45162', '45163', '45164', '45165']
2025-02-11 04:07:32.121 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:07:32.121 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:07:32.121 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:07:32.121 DEBUG [src.node.docker_mananger] docker run -i -t -p 45161:45161 -p 45162:45162 -p 45163:45163 -p 45164:45164 -p 45165:45165 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45163 --rest-port=45161 --tcp-port=45162 --discv5-udp-port=45164 --rest-address=0.0.0.0 --nat=extip:172.18.240.155 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=49e9ceff60dcf6ffebddf922bbede77f2aabbce79f53dcdce69e46b7ceee33cb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45165 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QAu9q7Ei4iPcInSQcIXuDh7-UnmUq3ZkH9TdAmAG9V_YK8atOQkRaHKurTSjjcUhQXXHTv5rT3wY_7S1QEC2SIMCgmlkgnY0gmlwhKwSHhqKbXVsdGlhZGRyc5YACASsEh4aBrClAAoErBIeGgawpt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDUYxOwaAFSPKmNLqu2YzRF-63fyjfW3agQ-X8EUe8ZFGDdGNwgrClg3VkcIKwp4V3YWt1MgE
2025-02-11 04:07:32.350 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.240.155 waku a2421e908eacca209031defea8949d35686a01255e4e679639d2a60a092b368e
2025-02-11 04:07:32.397 DEBUG [src.node.docker_mananger] Container started with ID a2421e908eac. Setting up logs at ./log/docker/node2_2025-02-11_04-07-30__ded232b9-bb0e-4ea3-9d9d-c2d5445e05ae__wakuorg_nwaku:latest.log
2025-02-11 04:07:32.398 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45161
2025-02-11 04:07:32.398 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:07:33.398 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45161/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:07:33.404 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:07:33.406 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:07:33.407 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45161/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:07:33.411 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.240.155/tcp/45162/p2p/16Uiu2HAmPZduFwahAKbRdQ2GBXQzoD2LU53mYQmk7SmVQBeEU2Zy","/ip4/172.18.240.155/tcp/45163/ws/p2p/16Uiu2HAmPZduFwahAKbRdQ2GBXQzoD2LU53mYQmk7SmVQBeEU2Zy"],"enrUri":"enr:-L24QKWeQF7NacUaCufkGR3r1VORC66QUuYWrPjxVTFWJFeUfVBJzK0wf2-u_-53ZJwTE0DB_8zYE3eoh6Xijex4JbkCgmlkgnY0gmlwhKwS8JuKbXVsdGlhZGRyc5YACASsEvCbBrBqAAoErBLwmwawa90DgnJzhQADAQAAiXNlY3AyNTZrMaEDohGH1OGCn6hAE2wDLxnLJNf40cSQ9LFN5ZkN_6RxyMSDdGNwgrBqg3VkcIKwbIV3YWt1MgE"}'
2025-02-11 04:07:33.411 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:07:33.413 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45161/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.30.26/tcp/45221/p2p/16Uiu2HAmJ9KToa8kTVr1xTnAc7vcKwpeTkGQwVB3yjqA31o2tTDi"]'
2025-02-11 04:07:33.417 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:07:33.418 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45220/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:07:33.420 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:45220/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/3/1'
2025-02-11 04:07:33.421 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:07:33.422 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:07:33.423 DEBUG [src.node.waku_node] Stopping container with id fdbb41d0319e
2025-02-11 04:07:34.581 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:07:34.581 DEBUG [src.node.waku_node] Stopping container with id a2421e908eac
2025-02-11 04:07:35.393 ERROR [src.node.docker_mananger] Max retries reached for container fdbb41d0319e. Exiting log stream.
2025-02-11 04:07:36.086 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:07:36.087 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:07:36.092 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:07:36.096 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
