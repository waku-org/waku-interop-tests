2025-02-11 04:05:27.648 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 04:05:27.648 DEBUG [tests.conftest] Running test: test_time_filter_matches_one_message with id: 2025-02-11_04-05-27__249bdfa5-5ac0-4aa8-9601-5dbe6f2ec393
2025-02-11 04:05:27.648 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 04:05:27.648 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 04:05:27.649 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-11 04:05:27.655 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:05:27.656 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-11_04-05-27__249bdfa5-5ac0-4aa8-9601-5dbe6f2ec393__wakuorg_nwaku:latest.log
2025-02-11 04:05:27.656 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:05:27.656 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:05:27.657 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:05:27.657 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.212.67
2025-02-11 04:05:27.658 DEBUG [src.node.docker_mananger] Generated ports ['31307', '31308', '31309', '31310', '31311']
2025-02-11 04:05:27.658 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:05:27.658 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:05:27.658 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:05:27.658 DEBUG [src.node.docker_mananger] docker run -i -t -p 31307:31307 -p 31308:31308 -p 31309:31309 -p 31310:31310 -p 31311:31311 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31309 --rest-port=31307 --tcp-port=31308 --discv5-udp-port=31310 --rest-address=0.0.0.0 --nat=extip:172.18.212.67 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9a469610dd6c9e681dba42aed26796c948b6cd2a48468a1eac5f986df1df09f3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31311 --metrics-logging=true --store=true --relay=true
2025-02-11 04:05:27.882 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.212.67 waku 403f0b78825f19252a0ba9b883cd021c20aefd8499f0dc37eb81f9672b2b12bf
2025-02-11 04:05:27.934 DEBUG [src.node.docker_mananger] Container started with ID 403f0b78825f. Setting up logs at ./log/docker/publishing_node1_2025-02-11_04-05-27__249bdfa5-5ac0-4aa8-9601-5dbe6f2ec393__wakuorg_nwaku:latest.log
2025-02-11 04:05:27.936 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 31307
2025-02-11 04:05:27.936 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:05:28.449 ERROR [src.node.docker_mananger] Max retries reached for container 181ab20f4c2e. Exiting log stream.
2025-02-11 04:05:28.937 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31307/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:28.940 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:05:28.940 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:05:28.940 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31307/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:28.942 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.212.67/tcp/31308/p2p/16Uiu2HAkyoh1mJ4pat7VK1Ja4VqEuN5axLtWhqSqj7NnHoatUuVN","/ip4/172.18.212.67/tcp/31309/ws/p2p/16Uiu2HAkyoh1mJ4pat7VK1Ja4VqEuN5axLtWhqSqj7NnHoatUuVN"],"enrUri":"enr:-L24QF4ZMCzZQd6DQB2KbS3TKN1otJjhhdu6k83mo4_g2hklGlhsLbLmX702KhowzuxK63OXWWUtxJoE9oBDEoS44_ACgmlkgnY0gmlwhKwS1EOKbXVsdGlhZGRyc5YACASsEtRDBnpMAAoErBLUQwZ6Td0DgnJzhQADAQAAiXNlY3AyNTZrMaECQRKx03cy2nR41ek2pR7PAjB_BrObOLz5yKy8gk92VkWDdGNwgnpMg3VkcIJ6ToV3YWt1MgM"}'
2025-02-11 04:05:28.942 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:05:28.949 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 04:05:28.949 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-11_04-05-27__249bdfa5-5ac0-4aa8-9601-5dbe6f2ec393__wakuorg_nwaku:latest.log
2025-02-11 04:05:28.949 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 04:05:28.949 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 04:05:28.951 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 04:05:28.951 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.156.214
2025-02-11 04:05:28.951 DEBUG [src.node.docker_mananger] Generated ports ['36051', '36052', '36053', '36054', '36055']
2025-02-11 04:05:28.951 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 04:05:28.951 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 04:05:28.951 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 04:05:28.952 DEBUG [src.node.docker_mananger] docker run -i -t -p 36051:36051 -p 36052:36052 -p 36053:36053 -p 36054:36054 -p 36055:36055 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36053 --rest-port=36051 --tcp-port=36052 --discv5-udp-port=36054 --rest-address=0.0.0.0 --nat=extip:172.18.156.214 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=afb9edf2ab2dea7c7c8d8cab2a06bed3ab30a4517a8ed545cffba91c06649f75 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36055 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QF4ZMCzZQd6DQB2KbS3TKN1otJjhhdu6k83mo4_g2hklGlhsLbLmX702KhowzuxK63OXWWUtxJoE9oBDEoS44_ACgmlkgnY0gmlwhKwS1EOKbXVsdGlhZGRyc5YACASsEtRDBnpMAAoErBLUQwZ6Td0DgnJzhQADAQAAiXNlY3AyNTZrMaECQRKx03cy2nR41ek2pR7PAjB_BrObOLz5yKy8gk92VkWDdGNwgnpMg3VkcIJ6ToV3YWt1MgM --storenode=/ip4/172.18.212.67/tcp/31308/p2p/16Uiu2HAkyoh1mJ4pat7VK1Ja4VqEuN5axLtWhqSqj7NnHoatUuVN --store=true --relay=true
2025-02-11 04:05:29.186 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.156.214 waku badab60b5d5eb08892f69baa69ec85cc08f927f9fd770d045aeeece5acb9a26b
2025-02-11 04:05:29.236 DEBUG [src.node.docker_mananger] Container started with ID badab60b5d5e. Setting up logs at ./log/docker/store_node1_2025-02-11_04-05-27__249bdfa5-5ac0-4aa8-9601-5dbe6f2ec393__wakuorg_nwaku:latest.log
2025-02-11 04:05:29.237 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36051
2025-02-11 04:05:29.237 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 04:05:30.238 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36051/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:30.241 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 04:05:30.241 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 04:05:30.241 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36051/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:30.243 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.156.214/tcp/36052/p2p/16Uiu2HAm7YLAPrzMABGstTfCF7qt8qqk39gPfq5zRbyNtgsQcP3f","/ip4/172.18.156.214/tcp/36053/ws/p2p/16Uiu2HAm7YLAPrzMABGstTfCF7qt8qqk39gPfq5zRbyNtgsQcP3f"],"enrUri":"enr:-L24QHWX-HJIcN6bbgT51JJj14LHoxVd8KEskju9mp5gRMLCDc8Z3z5U18ESNays91ncbdVJi7usLo6QL4-anj57WuMCgmlkgnY0gmlwhKwSnNaKbXVsdGlhZGRyc5YACASsEpzWBozUAAoErBKc1gaM1d0DgnJzhQADAQAAiXNlY3AyNTZrMaECtADmwPregH_QbvLG-_Kvhs9GHj8Jld05kelhRgXEoxqDdGNwgozUg3VkcIKM1oV3YWt1MgM"}'
2025-02-11 04:05:30.243 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 04:05:30.244 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36051/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.212.67/tcp/31308/p2p/16Uiu2HAkyoh1mJ4pat7VK1Ja4VqEuN5axLtWhqSqj7NnHoatUuVN"]'
2025-02-11 04:05:30.246 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:30.247 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31307/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:05:30.249 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:30.249 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36051/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 04:05:30.251 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:30.252 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:30.253 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31307/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:30.258 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:30.259 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:30.460 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:30.460 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31307/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:30.466 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:30.467 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:30.668 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:30.668 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31307/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:30.674 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:30.675 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:30.875 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:30.876 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31307/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:30.881 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:30.883 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:31.084 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:31.084 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31307/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:31.090 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:31.090 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:31.291 DEBUG [src.steps.store] Relaying message
2025-02-11 04:05:31.291 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31307/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 04:05:31.297 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 04:05:31.297 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 04:05:31.498 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31307/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739246727252541792&endTime=1739246727252741792&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:31.502 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x4917846ded18ae0a5da8853ece82dd304717c683ee23c1bf1c25a7e74bf9c6db"}]}'
2025-02-11 04:05:31.502 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36051/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739246727252541792&endTime=1739246727252741792&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 04:05:31.505 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x4917846ded18ae0a5da8853ece82dd304717c683ee23c1bf1c25a7e74bf9c6db"}]}'
2025-02-11 04:05:31.507 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 04:05:31.508 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 04:05:31.508 DEBUG [src.node.waku_node] Stopping container with id 403f0b78825f
2025-02-11 04:05:32.441 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:05:32.443 DEBUG [src.node.waku_node] Stopping container with id badab60b5d5e
2025-02-11 04:05:33.274 ERROR [src.node.docker_mananger] Max retries reached for container 403f0b78825f. Exiting log stream.
2025-02-11 04:05:33.939 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 04:05:33.940 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 04:05:33.952 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 04:05:33.958 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
