[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2024-12-06_06-51-56__fb064ac0-f013-4b9e-adba-6e224ca6290a
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-06_06-51-56__fb064ac0-f013-4b9e-adba-6e224ca6290a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.101.65
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['54053', '54054', '54055', '54056', '54057']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 54053:54053 -p 54054:54054 -p 54055:54055 -p 54056:54056 -p 54057:54057 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54055 --rest-port=54053 --tcp-port=54054 --discv5-udp-port=54056 --rest-address=0.0.0.0 --nat=extip:172.18.101.65 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a6fa4a8d2fc9ad0db6d0a9d6dcff8dd34efdc94eb14e41cad6bf8f323f9dda0a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54057 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.101.65 waku 1334a69334d65f42360acf75195bcc2b7c90fe837f02e1a710e91ea59a59b989
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1334a69334d6. Setting up logs at ./log/docker/receiving_node1_2024-12-06_06-51-56__fb064ac0-f013-4b9e-adba-6e224ca6290a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 54053
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9486b4adae7b. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54053/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54053/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.101.65/tcp/54054/p2p/16Uiu2HAmQmyxhWXjE6FsfHuSLwn9SLy7D9eZfAzuPFLZAfQ4iefh","/ip4/172.18.101.65/tcp/54055/ws/p2p/16Uiu2HAmQmyxhWXjE6FsfHuSLwn9SLy7D9eZfAzuPFLZAfQ4iefh"],"enrUri":"enr:-L24QDOeVBDuDU6wN8C_f8TEMYjgKVnJgQLW-wFY5IKN-YgTE2q7sMy6HngvuL_7DLwuraQ8f--FS5tfoAjpCwEitzYCgmlkgnY0gmlwhKwSZUGKbXVsdGlhZGRyc5YACASsEmVBBtMmAAoErBJlQQbTJ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDtBbeTgUG7JsZY-OwIAILc4QL7UnQpNdg4RuK2U-OOfCDdGNwgtMmg3VkcILTKIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-06_06-51-56__fb064ac0-f013-4b9e-adba-6e224ca6290a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.19.10
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['64288', '64289', '64290', '64291', '64292']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 64288:64288 -p 64289:64289 -p 64290:64290 -p 64291:64291 -p 64292:64292 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64290 --rest-port=64288 --tcp-port=64289 --discv5-udp-port=64291 --rest-address=0.0.0.0 --nat=extip:172.18.19.10 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a66caf0c41e9bfcab36baf0d8eaafa20db2c0a25d2acbaf62cfc54de0c10cef6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64292 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.19.10 waku 61e80213a9e3f665e8da7876df4039bddabba8413f3ec1a3f9c8f4e36ad7704f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 61e80213a9e3. Setting up logs at ./log/docker/receiving_node2_2024-12-06_06-51-56__fb064ac0-f013-4b9e-adba-6e224ca6290a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 64288
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64288/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64288/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.19.10/tcp/64289/p2p/16Uiu2HAmDCfEYtHyMerRjzFqZ4YHW4MWvCcrgQJv8mjFkhFzrsAG","/ip4/172.18.19.10/tcp/64290/ws/p2p/16Uiu2HAmDCfEYtHyMerRjzFqZ4YHW4MWvCcrgQJv8mjFkhFzrsAG"],"enrUri":"enr:-L24QGpNnX1o2Kxf3III_lo-YjMnup3H7WGqQSTESFTrr6PnXpLHiQI6d3WbdaBa1pdEqR3wOZtcAF4Nh14Y4skZQrYCgmlkgnY0gmlwhKwSEwqKbXVsdGlhZGRyc5YACASsEhMKBvshAAoErBITCgb7It0DgnJzhQADAQAAiXNlY3AyNTZrMaEDCBz4nJfzstVfvB2PvJD02CgMAS-t_QB3U2aWRvuH05mDdGNwgvshg3VkcIL7I4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64288/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.101.65/tcp/54054/p2p/16Uiu2HAmQmyxhWXjE6FsfHuSLwn9SLy7D9eZfAzuPFLZAfQ4iefh"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-06_06-51-56__fb064ac0-f013-4b9e-adba-6e224ca6290a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.54.208
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5201', '5202', '5203', '5204', '5205']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5201:5201 -p 5202:5202 -p 5203:5203 -p 5204:5204 -p 5205:5205 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5203 --rest-port=5201 --tcp-port=5202 --discv5-udp-port=5204 --rest-address=0.0.0.0 --nat=extip:172.18.54.208 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0105e3db2ef3e4acdfb4f773a26b4cffcf68ed3dbaeaccce81bb371c10a38f8a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5205 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QDOeVBDuDU6wN8C_f8TEMYjgKVnJgQLW-wFY5IKN-YgTE2q7sMy6HngvuL_7DLwuraQ8f--FS5tfoAjpCwEitzYCgmlkgnY0gmlwhKwSZUGKbXVsdGlhZGRyc5YACASsEmVBBtMmAAoErBJlQQbTJ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDtBbeTgUG7JsZY-OwIAILc4QL7UnQpNdg4RuK2U-OOfCDdGNwgtMmg3VkcILTKIV3YWt1Mgk --lightpushnode=/ip4/172.18.101.65/tcp/54054/p2p/16Uiu2HAmQmyxhWXjE6FsfHuSLwn9SLy7D9eZfAzuPFLZAfQ4iefh --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.54.208 waku ecc7cf0a92f06528132e2423f124009baaf9dcdee38839f7f6b46c8f441951a6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ecc7cf0a92f0. Setting up logs at ./log/docker/lightpush_node1_2024-12-06_06-51-56__fb064ac0-f013-4b9e-adba-6e224ca6290a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 5201
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5201/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5201/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.54.208/tcp/5202/p2p/16Uiu2HAmDjcpC7y9p2coRy8UzwZgKkzn1hfJjQSBbLYNStt1Vk2t","/ip4/172.18.54.208/tcp/5203/ws/p2p/16Uiu2HAmDjcpC7y9p2coRy8UzwZgKkzn1hfJjQSBbLYNStt1Vk2t"],"enrUri":"enr:-L24QOLiH3uxEvEDuM39HY3tmyZ_6pFacWzFE5BQWoo-AFmAH33fPJgi5zxfWd55Y3GcjwjzReSln579xW8kbcmnJdwCgmlkgnY0gmlwhKwSNtCKbXVsdGlhZGRyc5YACASsEjbQBhRSAAoErBI20AYUU90DgnJzhQADAQAAiXNlY3AyNTZrMaEDEAs9bdGNzgH9R8Jpws1iCnplunT8T5V6NKaHA4_2_PmDdGNwghRSg3VkcIIUVIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5201/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.101.65/tcp/54054/p2p/16Uiu2HAmQmyxhWXjE6FsfHuSLwn9SLy7D9eZfAzuPFLZAfQ4iefh"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5201/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.19.10/tcp/64289/p2p/16Uiu2HAmDCfEYtHyMerRjzFqZ4YHW4MWvCcrgQJv8mjFkhFzrsAG"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54053/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64288/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5201/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733467921278030336}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:5201/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5201/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733467921285298176}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:5201/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5201/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733467921289767424}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:5201/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5201/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733467921294021120}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:5201/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1334a69334d6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 61e80213a9e3
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1334a69334d6. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ecc7cf0a92f0
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 61e80213a9e3. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.