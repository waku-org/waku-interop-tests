[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_content_topic[/app/29/sometopic/someencoding] with id: 2024-12-06_04-22-56__3c267452-052c-4584-a30b-1aa40a8d6c0f
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-06_04-22-56__3c267452-052c-4584-a30b-1aa40a8d6c0f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.198.9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['2962', '2963', '2964', '2965', '2966']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 2962:2962 -p 2963:2963 -p 2964:2964 -p 2965:2965 -p 2966:2966 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2964 --rest-port=2962 --tcp-port=2963 --discv5-udp-port=2965 --rest-address=0.0.0.0 --nat=extip:172.18.198.9 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=1bee8e6ccfa81d9f7df75b7c2cee0c1fb5abe0baddc5f1cafbef367fbbbda056 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2966 --metrics-logging=true --relay=true --filter=true --content-topic=/app/29/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.198.9 waku e62858e84f3e9e7f59e2f9390625757efc9ae06809d47577778a0bb20cdf0886
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e62858e84f3e. Setting up logs at ./log/docker/node1_2024-12-06_04-22-56__3c267452-052c-4584-a30b-1aa40a8d6c0f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 2962
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 555f17c21835. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2962/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2962/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.198.9/tcp/2963/p2p/16Uiu2HAmRs83RXtv4fM8xaerVNmkKgeA5W9vLLoyoZfQgWeVFK62","/ip4/172.18.198.9/tcp/2964/ws/p2p/16Uiu2HAmRs83RXtv4fM8xaerVNmkKgeA5W9vLLoyoZfQgWeVFK62"],"enrUri":"enr:-L24QBwcXzxDcnOHc0kWWN9pTsPO5ThtoIk3idu44H_eWNZ3E8ru761IHZF2Alc_-TkYdNXpBotBvS7AHvPIyuFhk1cCgmlkgnY0gmlwhKwSxgmKbXVsdGlhZGRyc5YACASsEsYJBguTAAoErBLGCQYLlN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDxEOY2m6khlAuRNds49T8-hwpIUef-2vh_rME1DHKW3uDdGNwgguTg3VkcIILlYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-06_04-22-56__3c267452-052c-4584-a30b-1aa40a8d6c0f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.180.250
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['57586', '57587', '57588', '57589', '57590']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 57586:57586 -p 57587:57587 -p 57588:57588 -p 57589:57589 -p 57590:57590 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57588 --rest-port=57586 --tcp-port=57587 --discv5-udp-port=57589 --rest-address=0.0.0.0 --nat=extip:172.18.180.250 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=cb44bb3dafb11e7da1f4cd07913b8b8521d4ffbedfbb5feef4abbfc5661fab0e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57590 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QBwcXzxDcnOHc0kWWN9pTsPO5ThtoIk3idu44H_eWNZ3E8ru761IHZF2Alc_-TkYdNXpBotBvS7AHvPIyuFhk1cCgmlkgnY0gmlwhKwSxgmKbXVsdGlhZGRyc5YACASsEsYJBguTAAoErBLGCQYLlN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDxEOY2m6khlAuRNds49T8-hwpIUef-2vh_rME1DHKW3uDdGNwgguTg3VkcIILlYV3YWt1MgU --content-topic=/app/29/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.180.250 waku d9a806dfadc28e55f3ab333757f657f9457f258b6089a8ea09d79b3fb2c8952c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d9a806dfadc2. Setting up logs at ./log/docker/node2_2024-12-06_04-22-56__3c267452-052c-4584-a30b-1aa40a8d6c0f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 57586
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57586/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57586/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.180.250/tcp/57587/p2p/16Uiu2HAmKe1sMZzaBgUPreX2MsefiZRkjfCwC69WKEtjuBk1LYHL","/ip4/172.18.180.250/tcp/57588/ws/p2p/16Uiu2HAmKe1sMZzaBgUPreX2MsefiZRkjfCwC69WKEtjuBk1LYHL"],"enrUri":"enr:-L24QLf9EvRQyDgMpuZeNLdsXzf3AhNzAnsc5S6mmwk-zWCXMfGAUeiefRaiYFceNibZYfDD2EXpjbamV0lMIsJv3W0CgmlkgnY0gmlwhKwStPqKbXVsdGlhZGRyc5YACASsErT6BuDzAAoErBK0-gbg9N0DgnJzhQACAQAAiXNlY3AyNTZrMaEDZ8HxywTjvzETdmP9SFj6sL8dd1dY8kCtX5wlwr6PumeDdGNwguDzg3VkcILg9YV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57586/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.198.9/tcp/2963/p2p/16Uiu2HAmRs83RXtv4fM8xaerVNmkKgeA5W9vLLoyoZfQgWeVFK62"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2962/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/29/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57586/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/29/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2962/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2962/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/29/sometopic/someencoding","version":0,"timestamp":1733458979290755072,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57586/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/29/sometopic/someencoding","version":0,"timestamp":1733458979290755072,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e62858e84f3e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d9a806dfadc2
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e62858e84f3e. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.