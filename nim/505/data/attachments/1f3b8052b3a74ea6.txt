[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_relay_receiving_node_not_connected_directly_to_relaying_node with id: 2024-12-06_04-03-26__2af0bd3a-2f3c-4bf0-8f1f-19028cc327c9
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-06_04-03-26__2af0bd3a-2f3c-4bf0-8f1f-19028cc327c9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-06_04-03-26__2af0bd3a-2f3c-4bf0-8f1f-19028cc327c9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-06_04-03-26__2af0bd3a-2f3c-4bf0-8f1f-19028cc327c9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.78.109
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['61249', '61250', '61251', '61252', '61253']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 61249:61249 -p 61250:61250 -p 61251:61251 -p 61252:61252 -p 61253:61253 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61251 --rest-port=61249 --tcp-port=61250 --discv5-udp-port=61252 --rest-address=0.0.0.0 --nat=extip:172.18.78.109 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cba2ac3ff3df6510c780d01e5922233cc02873c115667a548bf8d8bc98da3401 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61253 --metrics-logging=true --relay=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9afd082d66c3. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.78.109 waku 386437d63f7e03148e780d24322824b2788e9dac441995da92b7b96805e8c043
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 386437d63f7e. Setting up logs at ./log/docker/node1_2024-12-06_04-03-26__2af0bd3a-2f3c-4bf0-8f1f-19028cc327c9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 61249
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61249/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61249/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.78.109/tcp/61250/p2p/16Uiu2HAmVSyMKPjta1UJzgYFovi4zfXu1UAo8x59R4vYgrNtJmK2","/ip4/172.18.78.109/tcp/61251/ws/p2p/16Uiu2HAmVSyMKPjta1UJzgYFovi4zfXu1UAo8x59R4vYgrNtJmK2"],"enrUri":"enr:-L24QFbJpRbFEt-fqjb7RypTuVd2PPHmR9bvWfdavZeTBQq1Sf2vqehsydk7Pu5SRd2TpE_cl-dWJAgx93Fm1VENkRECgmlkgnY0gmlwhKwSTm2KbXVsdGlhZGRyc5YACASsEk5tBu9CAAoErBJObQbvQ90DgnJzhQADAQAAiXNlY3AyNTZrMaED-YKT8BbDaN0a7Xgig-teo4JU5k74zNMSFwgDyTzru_2DdGNwgu9Cg3VkcILvRIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.34.198
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['58916', '58917', '58918', '58919', '58920']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 58916:58916 -p 58917:58917 -p 58918:58918 -p 58919:58919 -p 58920:58920 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58918 --rest-port=58916 --tcp-port=58917 --discv5-udp-port=58919 --rest-address=0.0.0.0 --nat=extip:172.18.34.198 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=afe6d0bc773a5bca9e5f0bc9ab9dbd515ab0cfbc31edddbc7f12a028f94db7a4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58920 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QFbJpRbFEt-fqjb7RypTuVd2PPHmR9bvWfdavZeTBQq1Sf2vqehsydk7Pu5SRd2TpE_cl-dWJAgx93Fm1VENkRECgmlkgnY0gmlwhKwSTm2KbXVsdGlhZGRyc5YACASsEk5tBu9CAAoErBJObQbvQ90DgnJzhQADAQAAiXNlY3AyNTZrMaED-YKT8BbDaN0a7Xgig-teo4JU5k74zNMSFwgDyTzru_2DdGNwgu9Cg3VkcILvRIV3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.34.198 waku 7f78e9e0d8291f8c3868ac50e400d9ff504d6faab3e5d0997467bc642a79790b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7f78e9e0d829. Setting up logs at ./log/docker/node2_2024-12-06_04-03-26__2af0bd3a-2f3c-4bf0-8f1f-19028cc327c9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 58916
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58916/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58916/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.34.198/tcp/58917/p2p/16Uiu2HAm9gfg3xhfT1o4UCuLJkjmGuW6E4KLVhqH6V8eQtFBkfKr","/ip4/172.18.34.198/tcp/58918/ws/p2p/16Uiu2HAm9gfg3xhfT1o4UCuLJkjmGuW6E4KLVhqH6V8eQtFBkfKr"],"enrUri":"enr:-L24QCVYFtpGYSBoTbUn8bJoLJKCEzr1wmrv-2ILkuZi4_aEUpX4aq1_hqZPVI3kizcIWZVILkuBaUY_ZpeQrWboHUICgmlkgnY0gmlwhKwSIsaKbXVsdGlhZGRyc5YACASsEiLGBuYlAAoErBIixgbmJt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC09r7tS5jlpqmoE_GQt1qXPebaaHPZF-t-LOTmzUG8PWDdGNwguYlg3VkcILmJ4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.136.30
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['6224', '6225', '6226', '6227', '6228']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 6224:6224 -p 6225:6225 -p 6226:6226 -p 6227:6227 -p 6228:6228 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6226 --rest-port=6224 --tcp-port=6225 --discv5-udp-port=6227 --rest-address=0.0.0.0 --nat=extip:172.18.136.30 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ad8cfeede1edf6fb2aee93f4c6a7fdebf68f6ddadc8c8bbddefd09eadfb99fdc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6228 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QCVYFtpGYSBoTbUn8bJoLJKCEzr1wmrv-2ILkuZi4_aEUpX4aq1_hqZPVI3kizcIWZVILkuBaUY_ZpeQrWboHUICgmlkgnY0gmlwhKwSIsaKbXVsdGlhZGRyc5YACASsEiLGBuYlAAoErBIixgbmJt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC09r7tS5jlpqmoE_GQt1qXPebaaHPZF-t-LOTmzUG8PWDdGNwguYlg3VkcILmJ4V3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.136.30 waku fd7c805d565253162ff4e5902b2d2af7224482e393ddbb002bf492842e92d6b1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fd7c805d5652. Setting up logs at ./log/docker/node3_2024-12-06_04-03-26__2af0bd3a-2f3c-4bf0-8f1f-19028cc327c9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 6224
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6224/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6224/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.30/tcp/6225/p2p/16Uiu2HAmPpse8tzitZUQbgzURbVxhPkitKbJhXNe72KcZpXvfox9","/ip4/172.18.136.30/tcp/6226/ws/p2p/16Uiu2HAmPpse8tzitZUQbgzURbVxhPkitKbJhXNe72KcZpXvfox9"],"enrUri":"enr:-L24QLJPE4iH6wCr50WWz_Ow3VTdO8HDIzAGynr-p22uFsRmfg-TTtywpRFUPK0nq5tq8TqXIQ1IvojZ1bYxICOdI04CgmlkgnY0gmlwhKwSiB6KbXVsdGlhZGRyc5YACASsEogeBhhRAAoErBKIHgYYUt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDpfjHHRSh9oP1RPjpVYKrGQGnsaZ1O1L06RBcce9BGLaDdGNwghhRg3VkcIIYU4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61249/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58916/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6224/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61249/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.34.198/tcp/58917/p2p/16Uiu2HAm9gfg3xhfT1o4UCuLJkjmGuW6E4KLVhqH6V8eQtFBkfKr","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58916/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.78.109/tcp/61250/p2p/16Uiu2HAmVSyMKPjta1UJzgYFovi4zfXu1UAo8x59R4vYgrNtJmK2","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.136.30/tcp/6225/p2p/16Uiu2HAmPpse8tzitZUQbgzURbVxhPkitKbJhXNe72KcZpXvfox9","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6224/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.34.198/tcp/58917/p2p/16Uiu2HAm9gfg3xhfT1o4UCuLJkjmGuW6E4KLVhqH6V8eQtFBkfKr","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61249/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6224/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1733457842502984960,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 386437d63f7e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 7f78e9e0d829
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 386437d63f7e. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id fd7c805d5652
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7f78e9e0d829. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.