[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2024-12-06_06-52-34__8f084cfb-410d-4971-8e7c-c4b817bdc231
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-06_06-52-34__8f084cfb-410d-4971-8e7c-c4b817bdc231__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.250.63
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['32924', '32925', '32926', '32927', '32928']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 32924:32924 -p 32925:32925 -p 32926:32926 -p 32927:32927 -p 32928:32928 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32926 --rest-port=32924 --tcp-port=32925 --discv5-udp-port=32927 --rest-address=0.0.0.0 --nat=extip:172.18.250.63 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b22a2c96cb5c30ce34bad29fbacaad9ed0759ed1dd4ffd8c8464e4fdabec1fa3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32928 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.250.63 waku d5abfa44f5297baa373965354315c6269212d284d50f521da05de8bdb8652eca
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d5abfa44f529. Setting up logs at ./log/docker/receiving_node1_2024-12-06_06-52-34__8f084cfb-410d-4971-8e7c-c4b817bdc231__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 32924
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a0c5649b1e1b. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32924/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32924/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.250.63/tcp/32925/p2p/16Uiu2HAkvYf4AiPhwQDQFhdtjpPPdexVSb3PcSUz6mRUejwJZAe2","/ip4/172.18.250.63/tcp/32926/ws/p2p/16Uiu2HAkvYf4AiPhwQDQFhdtjpPPdexVSb3PcSUz6mRUejwJZAe2"],"enrUri":"enr:-L24QCXuSUYn_ajuLbiyxN6uwQlhMtt6SRNSGUV4qhLEh7n1cJsX-6K-aU-3jiywXkw0O44ekHY0BiqOicRI-qbDXQYCgmlkgnY0gmlwhKwS-j-KbXVsdGlhZGRyc5YACASsEvo_BoCdAAoErBL6PwaAnt0DgnJzhQADAQAAiXNlY3AyNTZrMaECEKW1CTo4QPBz-LnJTQn6kkEUsvfwA9Yk3ZlySeVWD3eDdGNwgoCdg3VkcIKAn4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-06_06-52-34__8f084cfb-410d-4971-8e7c-c4b817bdc231__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.85.115
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['58217', '58218', '58219', '58220', '58221']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 58217:58217 -p 58218:58218 -p 58219:58219 -p 58220:58220 -p 58221:58221 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58219 --rest-port=58217 --tcp-port=58218 --discv5-udp-port=58220 --rest-address=0.0.0.0 --nat=extip:172.18.85.115 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c67b9bc512bd41fedf2eea3ddea0bafa3d4fba6f4242c35a43ba3ffe8e8b521a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58221 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.85.115 waku 1a1a28da55aefa4e48444e19d2de68e88fd954dbc3be4fab45d36e79499b17cd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1a1a28da55ae. Setting up logs at ./log/docker/receiving_node2_2024-12-06_06-52-34__8f084cfb-410d-4971-8e7c-c4b817bdc231__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 58217
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58217/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58217/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.85.115/tcp/58218/p2p/16Uiu2HAmHwWeEWQeykgQn5LB6NczWGZM6v9vPQuZwXnLSxKuA5v5","/ip4/172.18.85.115/tcp/58219/ws/p2p/16Uiu2HAmHwWeEWQeykgQn5LB6NczWGZM6v9vPQuZwXnLSxKuA5v5"],"enrUri":"enr:-L24QOKteVtwbsP2yAAOIjacLE7vgek4VpC-hK54LsBOBEOAF51UpNQS1F2wQVn454L_cdYY6NgpVjKdk2Xti4PnrccCgmlkgnY0gmlwhKwSVXOKbXVsdGlhZGRyc5YACASsElVzBuNqAAoErBJVcwbja90DgnJzhQADAQAAiXNlY3AyNTZrMaEDToX6n_D9qgN-DrWMFqGg_5gctdYbeQulnhxBFckMI76DdGNwguNqg3VkcILjbIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58217/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.250.63/tcp/32925/p2p/16Uiu2HAkvYf4AiPhwQDQFhdtjpPPdexVSb3PcSUz6mRUejwJZAe2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-06_06-52-34__8f084cfb-410d-4971-8e7c-c4b817bdc231__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.143.59
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['1834', '1835', '1836', '1837', '1838']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 1834:1834 -p 1835:1835 -p 1836:1836 -p 1837:1837 -p 1838:1838 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1836 --rest-port=1834 --tcp-port=1835 --discv5-udp-port=1837 --rest-address=0.0.0.0 --nat=extip:172.18.143.59 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c1aafbc53e9cc038ca9f2e6cedfd33e9fac3d98e0a333cdc3b9610bbba8b7c5e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1838 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QCXuSUYn_ajuLbiyxN6uwQlhMtt6SRNSGUV4qhLEh7n1cJsX-6K-aU-3jiywXkw0O44ekHY0BiqOicRI-qbDXQYCgmlkgnY0gmlwhKwS-j-KbXVsdGlhZGRyc5YACASsEvo_BoCdAAoErBL6PwaAnt0DgnJzhQADAQAAiXNlY3AyNTZrMaECEKW1CTo4QPBz-LnJTQn6kkEUsvfwA9Yk3ZlySeVWD3eDdGNwgoCdg3VkcIKAn4V3YWt1Mgk --lightpushnode=/ip4/172.18.250.63/tcp/32925/p2p/16Uiu2HAkvYf4AiPhwQDQFhdtjpPPdexVSb3PcSUz6mRUejwJZAe2 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.143.59 waku 4e8d662a2137d7e5f7128f350fa5fbdd28be766ea8a28bce652270df3e733ee9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4e8d662a2137. Setting up logs at ./log/docker/lightpush_node1_2024-12-06_06-52-34__8f084cfb-410d-4971-8e7c-c4b817bdc231__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 1834
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1834/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1834/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.143.59/tcp/1835/p2p/16Uiu2HAm3Mh1jbb633TYzkNRqbcnqWujjvap832HPvSnwF4tm7x4","/ip4/172.18.143.59/tcp/1836/ws/p2p/16Uiu2HAm3Mh1jbb633TYzkNRqbcnqWujjvap832HPvSnwF4tm7x4"],"enrUri":"enr:-L24QCT9mbXyswIxjkelJCwREwo7z7Ji2TFJwILUeTMWTMkYaahxe5dEeZTzTZaXQgMt-KTznQWbj3j6EQO2h7BDBJ4CgmlkgnY0gmlwhKwSjzuKbXVsdGlhZGRyc5YACASsEo87BgcrAAoErBKPOwYHLN0DgnJzhQADAQAAiXNlY3AyNTZrMaECddhXOjGx-rkSsHn8_NvzqcMictdIC3atYPR3m9wbvsGDdGNwggcrg3VkcIIHLYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1834/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.250.63/tcp/32925/p2p/16Uiu2HAkvYf4AiPhwQDQFhdtjpPPdexVSb3PcSUz6mRUejwJZAe2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1834/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.85.115/tcp/58218/p2p/16Uiu2HAmHwWeEWQeykgQn5LB6NczWGZM6v9vPQuZwXnLSxKuA5v5"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32924/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58217/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1834/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733467959871901440, "extraField": "extraValue"}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:1834/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d5abfa44f529
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1a1a28da55ae
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d5abfa44f529. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4e8d662a2137
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1a1a28da55ae. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.