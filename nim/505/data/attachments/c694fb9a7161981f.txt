[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_all_with_extra_field with id: 2024-12-06_06-50-15__2e782374-b790-4922-a2d2-7d325d399625
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-06_06-50-15__2e782374-b790-4922-a2d2-7d325d399625__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.78.244
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['45675', '45676', '45677', '45678', '45679']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 45675:45675 -p 45676:45676 -p 45677:45677 -p 45678:45678 -p 45679:45679 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45677 --rest-port=45675 --tcp-port=45676 --discv5-udp-port=45678 --rest-address=0.0.0.0 --nat=extip:172.18.78.244 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cacedb5f17d47f8311aa8d6acc9fbced93dd6146bd0bbb37ad5dae43df7d00ca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45679 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.78.244 waku 21a6c87749430cfbc182f2c4df7c90c13f44fdd644c5982fa29ec6677dc6dca6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 21a6c8774943. Setting up logs at ./log/docker/node1_2024-12-06_06-50-15__2e782374-b790-4922-a2d2-7d325d399625__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 45675
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1f6dfe5a27bc. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45675/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45675/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.78.244/tcp/45676/p2p/16Uiu2HAm63jjeKNQdZBUM44MDKimGFzTdLuJAXpwUpVxesdaBWNQ","/ip4/172.18.78.244/tcp/45677/ws/p2p/16Uiu2HAm63jjeKNQdZBUM44MDKimGFzTdLuJAXpwUpVxesdaBWNQ"],"enrUri":"enr:-L24QM0cPjH3ITnjpZATItMCQpFm5rf7WJn4KYDcYT74lPWDNzWifTNhNx9VO1UWr67qe04GG_eXmGTRPOM2vPa2IrgCgmlkgnY0gmlwhKwSTvSKbXVsdGlhZGRyc5YACASsEk70BrJsAAoErBJO9Aaybd0DgnJzhQADAQAAiXNlY3AyNTZrMaECndIGflkwAAB6Xgic0AEAZs0PYJcRM5eRbfJykC7QQQ2DdGNwgrJsg3VkcIKyboV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-06_06-50-15__2e782374-b790-4922-a2d2-7d325d399625__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.238.183
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['4216', '4217', '4218', '4219', '4220']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 4216:4216 -p 4217:4217 -p 4218:4218 -p 4219:4219 -p 4220:4220 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4218 --rest-port=4216 --tcp-port=4217 --discv5-udp-port=4219 --rest-address=0.0.0.0 --nat=extip:172.18.238.183 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5b232275fa7e0aa13c00a73c5bdf53ff3caebcd807c16d3d21aec109d5c2f32a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4220 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QM0cPjH3ITnjpZATItMCQpFm5rf7WJn4KYDcYT74lPWDNzWifTNhNx9VO1UWr67qe04GG_eXmGTRPOM2vPa2IrgCgmlkgnY0gmlwhKwSTvSKbXVsdGlhZGRyc5YACASsEk70BrJsAAoErBJO9Aaybd0DgnJzhQADAQAAiXNlY3AyNTZrMaECndIGflkwAAB6Xgic0AEAZs0PYJcRM5eRbfJykC7QQQ2DdGNwgrJsg3VkcIKyboV3YWt1MgU --filternode=/ip4/172.18.78.244/tcp/45676/p2p/16Uiu2HAm63jjeKNQdZBUM44MDKimGFzTdLuJAXpwUpVxesdaBWNQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.238.183 waku 5aa99568b5b8242abd66af80d2cf819a1ec9f6859312c5fab05d7ce81ba4e822
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5aa99568b5b8. Setting up logs at ./log/docker/node2_2024-12-06_06-50-15__2e782374-b790-4922-a2d2-7d325d399625__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 4216
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4216/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4216/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.238.183/tcp/4217/p2p/16Uiu2HAmLpYV8Eiafe5A8Jr2yb7vkLGAEREFqV8Y8L3S335GPiZv","/ip4/172.18.238.183/tcp/4218/ws/p2p/16Uiu2HAmLpYV8Eiafe5A8Jr2yb7vkLGAEREFqV8Y8L3S335GPiZv"],"enrUri":"enr:-L24QMEdd6NtRoLVlIiCcilaoCgD-e2z5XFP-41UmqDFx9WmOv4O3KrZq4T4WLYdLO-VCkeeCur3lrCN0KXsVGwrdYcCgmlkgnY0gmlwhKwS7reKbXVsdGlhZGRyc5YACASsEu63BhB5AAoErBLutwYQet0DgnJzhQADAQAAiXNlY3AyNTZrMaEDeVAO1rw_Kuw2dynQhAT0bEMzzwdn5OeAtj3uEjhbfpmDdGNwghB5g3VkcIIQe4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4216/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.78.244/tcp/45676/p2p/16Uiu2HAm63jjeKNQdZBUM44MDKimGFzTdLuJAXpwUpVxesdaBWNQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45675/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4216/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "5dc617a9-65f9-4495-890c-560b9aaa2597", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"5dc617a9-65f9-4495-890c-560b9aaa2597","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:4216/filter/v2/subscriptions/all" -H "Content-Type: application/json" -d '{"requestId": 1, "extraField": "extraValue"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:4216/filter/v2/subscriptions/all. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 21a6c8774943
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5aa99568b5b8
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 21a6c8774943. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.