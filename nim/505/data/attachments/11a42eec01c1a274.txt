[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_content_topic[/app/27/sometopic/someencoding] with id: 2024-12-06_04-22-54__e4f0f4da-1088-4b38-93d6-931e1ad6409c
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-06_04-22-54__e4f0f4da-1088-4b38-93d6-931e1ad6409c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.6.226
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['41042', '41043', '41044', '41045', '41046']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 41042:41042 -p 41043:41043 -p 41044:41044 -p 41045:41045 -p 41046:41046 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41044 --rest-port=41042 --tcp-port=41043 --discv5-udp-port=41045 --rest-address=0.0.0.0 --nat=extip:172.18.6.226 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=d7b9bd863fdc3babddbcbbfe8ded0e05d6c4bbf71fbf086e4f00a39825c1e3cb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41046 --metrics-logging=true --relay=true --filter=true --content-topic=/app/27/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.6.226 waku c5103b69ebd1d174d3c60ac591bbd077e953404f32b494bda022da5608c8d8ea
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c5103b69ebd1. Setting up logs at ./log/docker/node1_2024-12-06_04-22-54__e4f0f4da-1088-4b38-93d6-931e1ad6409c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 41042
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 343fbf8a6bc3. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41042/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41042/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.6.226/tcp/41043/p2p/16Uiu2HAmBt8RgAs76paks1QLaTfhwBk9DVVy2SgNRxueST2RY2ak","/ip4/172.18.6.226/tcp/41044/ws/p2p/16Uiu2HAmBt8RgAs76paks1QLaTfhwBk9DVVy2SgNRxueST2RY2ak"],"enrUri":"enr:-L24QCwGuyHAO9NyFwQVWk8xkvhvwchs0jbtVrD7CtaSdt6SFTva6zDY2-CKmEBh86tuLBMnk6NbzxlblLvOwO52yp0CgmlkgnY0gmlwhKwSBuKKbXVsdGlhZGRyc5YACASsEgbiBqBTAAoErBIG4gagVN0DgnJzhQACAQAAiXNlY3AyNTZrMaEC9IH-pqqire2lQO1y9L8H36Sf7FL1tasUGx_Fg--80MGDdGNwgqBTg3VkcIKgVYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-06_04-22-54__e4f0f4da-1088-4b38-93d6-931e1ad6409c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.229.118
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['25452', '25453', '25454', '25455', '25456']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 25452:25452 -p 25453:25453 -p 25454:25454 -p 25455:25455 -p 25456:25456 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25454 --rest-port=25452 --tcp-port=25453 --discv5-udp-port=25455 --rest-address=0.0.0.0 --nat=extip:172.18.229.118 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=e9888b54fcd1a7a6b5f4aeba6ae06d3a196fcbc7d32efe6b24efed7b2c9c4b62 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25456 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QCwGuyHAO9NyFwQVWk8xkvhvwchs0jbtVrD7CtaSdt6SFTva6zDY2-CKmEBh86tuLBMnk6NbzxlblLvOwO52yp0CgmlkgnY0gmlwhKwSBuKKbXVsdGlhZGRyc5YACASsEgbiBqBTAAoErBIG4gagVN0DgnJzhQACAQAAiXNlY3AyNTZrMaEC9IH-pqqire2lQO1y9L8H36Sf7FL1tasUGx_Fg--80MGDdGNwgqBTg3VkcIKgVYV3YWt1MgU --content-topic=/app/27/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.229.118 waku f93cea6f2caa1bc2254c1b7c8b667fdc35008a5b7097b8e9cffaa6a5fb2c12e5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f93cea6f2caa. Setting up logs at ./log/docker/node2_2024-12-06_04-22-54__e4f0f4da-1088-4b38-93d6-931e1ad6409c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 25452
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25452/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25452/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.229.118/tcp/25453/p2p/16Uiu2HAmDqtuHZbEV3hXzbXPyYaJS8AgD5kFjx6FvbqSgNgTGwfJ","/ip4/172.18.229.118/tcp/25454/ws/p2p/16Uiu2HAmDqtuHZbEV3hXzbXPyYaJS8AgD5kFjx6FvbqSgNgTGwfJ"],"enrUri":"enr:-L24QOxWUXnHMuVVafpBECgILK8hvdF93S-UFZZAJfxNDALDd1jhlxpVvN5CF3M4YSVMppQ1Zdd6r8ALnL2YGeIgOJsCgmlkgnY0gmlwhKwS5XaKbXVsdGlhZGRyc5YACASsEuV2BmNtAAoErBLldgZjbt0DgnJzhQACAQAAiXNlY3AyNTZrMaEDEabqVdvY0kqN-A-u8ZhRad9LgK2RrH5FszKtH8P0u12DdGNwgmNtg3VkcIJjb4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25452/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.6.226/tcp/41043/p2p/16Uiu2HAmBt8RgAs76paks1QLaTfhwBk9DVVy2SgNRxueST2RY2ak"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41042/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/27/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25452/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/27/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41042/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41042/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/27/sometopic/someencoding","version":0,"timestamp":1733458978033360384,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25452/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/27/sometopic/someencoding","version":0,"timestamp":1733458978033360384,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c5103b69ebd1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f93cea6f2caa
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c5103b69ebd1. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.