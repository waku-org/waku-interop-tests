[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_invalid_pubsub_topic_format with id: 2024-12-06_04-11-58__216cb24c-b507-439b-a399-e19a6d88d4fe
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-06_04-11-58__216cb24c-b507-439b-a399-e19a6d88d4fe__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.119.130
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['28811', '28812', '28813', '28814', '28815']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 28811:28811 -p 28812:28812 -p 28813:28813 -p 28814:28814 -p 28815:28815 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28813 --rest-port=28811 --tcp-port=28812 --discv5-udp-port=28814 --rest-address=0.0.0.0 --nat=extip:172.18.119.130 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3fedb6a5b2c76c0ce8a9dcd2fcd6babe2a42af9dfd552dd1dab0a5a52cb5cd34 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28815 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.119.130 waku a9f206df4658a426a0e37d3e0ce8f3fbbfa7ce87d49eb2715df5f8f458bb849e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a9f206df4658. Setting up logs at ./log/docker/node1_2024-12-06_04-11-58__216cb24c-b507-439b-a399-e19a6d88d4fe__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 28811
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 105d1b1d2549. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28811/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28811/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.119.130/tcp/28812/p2p/16Uiu2HAm2MufE8HFt14JDnnSc8wjrZU3RgMs16ugZAzDvcs9mfjj","/ip4/172.18.119.130/tcp/28813/ws/p2p/16Uiu2HAm2MufE8HFt14JDnnSc8wjrZU3RgMs16ugZAzDvcs9mfjj"],"enrUri":"enr:-L24QMQJPXM7JlE1NNMmHYdgydn4S16g0iTMIgxcWZG5ALH-VqAk668dgVea860iGWMYNRctr949x3EvwXV41cv1hKICgmlkgnY0gmlwhKwSd4KKbXVsdGlhZGRyc5YACASsEneCBnCMAAoErBJ3ggZwjd0DgnJzhQADAQAAiXNlY3AyNTZrMaECZwr0AY5OQKqi2GmVik_Y8jQbOKByHLgoZ8VhJi47DuaDdGNwgnCMg3VkcIJwjoV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-06_04-11-58__216cb24c-b507-439b-a399-e19a6d88d4fe__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.207.138
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10648', '10649', '10650', '10651', '10652']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10648:10648 -p 10649:10649 -p 10650:10650 -p 10651:10651 -p 10652:10652 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10650 --rest-port=10648 --tcp-port=10649 --discv5-udp-port=10651 --rest-address=0.0.0.0 --nat=extip:172.18.207.138 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ee7cbb62e1df9fdfbdeed4fcc84f0e7a5110ef3bdeb87c5abcdeac5708e6dd6f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10652 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QMQJPXM7JlE1NNMmHYdgydn4S16g0iTMIgxcWZG5ALH-VqAk668dgVea860iGWMYNRctr949x3EvwXV41cv1hKICgmlkgnY0gmlwhKwSd4KKbXVsdGlhZGRyc5YACASsEneCBnCMAAoErBJ3ggZwjd0DgnJzhQADAQAAiXNlY3AyNTZrMaECZwr0AY5OQKqi2GmVik_Y8jQbOKByHLgoZ8VhJi47DuaDdGNwgnCMg3VkcIJwjoV3YWt1MgU --filternode=/ip4/172.18.119.130/tcp/28812/p2p/16Uiu2HAm2MufE8HFt14JDnnSc8wjrZU3RgMs16ugZAzDvcs9mfjj
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.207.138 waku 109efa00306f4b75b32774704e882d1fd5039cb8dd1baed9c8e5fa248dcec685
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 109efa00306f. Setting up logs at ./log/docker/node2_2024-12-06_04-11-58__216cb24c-b507-439b-a399-e19a6d88d4fe__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 10648
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10648/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10648/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.207.138/tcp/10649/p2p/16Uiu2HAmPbSM4KXzToKNGzCGcgGNB84vfy2FWCfNNMxd1smh5Vqn","/ip4/172.18.207.138/tcp/10650/ws/p2p/16Uiu2HAmPbSM4KXzToKNGzCGcgGNB84vfy2FWCfNNMxd1smh5Vqn"],"enrUri":"enr:-L24QKxMQSqrtSq-G4yKkWNfSXk2E382EEMbZ_gA76lTPTyzLuwgbRqUyEOqTxgPWnFycr9HxAADRJ81JSlJ0tAqwdUCgmlkgnY0gmlwhKwSz4qKbXVsdGlhZGRyc5YACASsEs-KBimZAAoErBLPigYpmt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDooegcTz_z2cj5K0AC_kyk9ajhLpw5bVixHkAgLRsYB2DdGNwgimZg3VkcIIpm4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10648/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.119.130/tcp/28812/p2p/16Uiu2HAm2MufE8HFt14JDnnSc8wjrZU3RgMs16ugZAzDvcs9mfjj"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28811/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10648/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "8d8d7125-cf2a-47fb-9cb9-c7e10ba06426", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"8d8d7125-cf2a-47fb-9cb9-c7e10ba06426","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10648/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": ["/waku/2/rs/3/1"]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10648/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a9f206df4658
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 109efa00306f
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a9f206df4658. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.