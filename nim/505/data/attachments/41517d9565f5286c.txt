[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-12-06_06-53-21__2f53705c-f905-4d3d-b840-2070e75e2543
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-06_06-53-21__2f53705c-f905-4d3d-b840-2070e75e2543__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.115.76
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['17122', '17123', '17124', '17125', '17126']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 17122:17122 -p 17123:17123 -p 17124:17124 -p 17125:17125 -p 17126:17126 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17124 --rest-port=17122 --tcp-port=17123 --discv5-udp-port=17125 --rest-address=0.0.0.0 --nat=extip:172.18.115.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c2ba276f203feff38d76cca8fd3c2ad5a5d9fdf8a26fbfcf0d9ecab5eafab2e9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17126 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.115.76 waku 56d054ce44b22b7d11e01faf356090f8c01f698a0b3cd1994617a7fa4adb3892
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 56d054ce44b2. Setting up logs at ./log/docker/receiving_node1_2024-12-06_06-53-21__2f53705c-f905-4d3d-b840-2070e75e2543__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 17122
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9bfb76b6c4ce. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17122/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17122/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.115.76/tcp/17123/p2p/16Uiu2HAmVrBXbTo1Pb345oXHef7azPf8u6MY6Lvska7hvFCY8W3D","/ip4/172.18.115.76/tcp/17124/ws/p2p/16Uiu2HAmVrBXbTo1Pb345oXHef7azPf8u6MY6Lvska7hvFCY8W3D"],"enrUri":"enr:-L24QABjQpF9jioiaAYaGRBdtsiGlz-Apyuwk4kIYXyYIWbZd6HENnsEz6tgg4AQRNFwdBBErdm_Kk_kdfQyFdN52z8CgmlkgnY0gmlwhKwSc0yKbXVsdGlhZGRyc5YACASsEnNMBkLjAAoErBJzTAZC5N0DgnJzhQADAQAAiXNlY3AyNTZrMaED_3S0jYY3HZr_VO5yvxL5fnHZlFS23KX6Fyw9SPw1W3yDdGNwgkLjg3VkcIJC5YV3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-06_06-53-21__2f53705c-f905-4d3d-b840-2070e75e2543__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.93.69
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8552', '8553', '8554', '8555', '8556']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8552:8552 -p 8553:8553 -p 8554:8554 -p 8555:8555 -p 8556:8556 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8554 --rest-port=8552 --tcp-port=8553 --discv5-udp-port=8555 --rest-address=0.0.0.0 --nat=extip:172.18.93.69 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7db83df740eff20bfbf6ce9154d7caf9e7effbb1d3bf9bebda273aa5bec99bb3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8556 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.93.69 waku a69780432a091501bdffe2c4d9c94dd3c2d58056423d726d3009eb62f486b699
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a69780432a09. Setting up logs at ./log/docker/receiving_node2_2024-12-06_06-53-21__2f53705c-f905-4d3d-b840-2070e75e2543__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 8552
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8552/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8552/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.93.69/tcp/8553/p2p/16Uiu2HAkwmcrYHx2SWzq8We61y2yNMVAoQWGxsUMUHUTDkV7CVPB","/ip4/172.18.93.69/tcp/8554/ws/p2p/16Uiu2HAkwmcrYHx2SWzq8We61y2yNMVAoQWGxsUMUHUTDkV7CVPB"],"enrUri":"enr:-L24QC6E8Tjr3GqaJ3dvUof9zXNB9c-TsHQpRhtTo4NF1d_bNahf7lStuH8i6xyNI9RAW6yzwn96PRbObZSdw1IcsdwCgmlkgnY0gmlwhKwSXUWKbXVsdGlhZGRyc5YACASsEl1FBiFpAAoErBJdRQYhat0DgnJzhQADAQAAiXNlY3AyNTZrMaECItN03ribZk2u3JhGttK59NP1n2UquSY_gQNN0rTdW06DdGNwgiFpg3VkcIIha4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8552/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.115.76/tcp/17123/p2p/16Uiu2HAmVrBXbTo1Pb345oXHef7azPf8u6MY6Lvska7hvFCY8W3D"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-06_06-53-21__2f53705c-f905-4d3d-b840-2070e75e2543__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.205.181
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['65379', '65380', '65381', '65382', '65383']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 65379:65379 -p 65380:65380 -p 65381:65381 -p 65382:65382 -p 65383:65383 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65381 --rest-port=65379 --tcp-port=65380 --discv5-udp-port=65382 --rest-address=0.0.0.0 --nat=extip:172.18.205.181 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5b700ed013a296dce987ebbab0d2bac158fdbe171f03d2abce6d1c988daede37 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65383 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QABjQpF9jioiaAYaGRBdtsiGlz-Apyuwk4kIYXyYIWbZd6HENnsEz6tgg4AQRNFwdBBErdm_Kk_kdfQyFdN52z8CgmlkgnY0gmlwhKwSc0yKbXVsdGlhZGRyc5YACASsEnNMBkLjAAoErBJzTAZC5N0DgnJzhQADAQAAiXNlY3AyNTZrMaED_3S0jYY3HZr_VO5yvxL5fnHZlFS23KX6Fyw9SPw1W3yDdGNwgkLjg3VkcIJC5YV3YWt1Mg0 --lightpushnode=/ip4/172.18.115.76/tcp/17123/p2p/16Uiu2HAmVrBXbTo1Pb345oXHef7azPf8u6MY6Lvska7hvFCY8W3D --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.205.181 waku 6a440bbb78331c90dc87dd23c23a2e46071031054c715eb718ebc14b8b84e8c0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6a440bbb7833. Setting up logs at ./log/docker/lightpush_node1_2024-12-06_06-53-21__2f53705c-f905-4d3d-b840-2070e75e2543__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 65379
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65379/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65379/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.205.181/tcp/65380/p2p/16Uiu2HAmGsFHMtWbJKDF9Z6za3aj1VARWhxuLEL1QnWfLrGkWiAe","/ip4/172.18.205.181/tcp/65381/ws/p2p/16Uiu2HAmGsFHMtWbJKDF9Z6za3aj1VARWhxuLEL1QnWfLrGkWiAe"],"enrUri":"enr:-L24QMmBk5eeRiAhUB0iTHboRLNSduiPKH3hqj73V1rqPZAMfMrKAaGny_utIvM6ADuOq09FU4UJvzT9I3KAwnaZXEACgmlkgnY0gmlwhKwSzbWKbXVsdGlhZGRyc5YACASsEs21Bv9kAAoErBLNtQb_Zd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDPpKZ864-gAQbEgPpPHgNcS02SlzYzK8iX3tck9EfZ0uDdGNwgv9kg3VkcIL_ZoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65379/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.115.76/tcp/17123/p2p/16Uiu2HAmVrBXbTo1Pb345oXHef7azPf8u6MY6Lvska7hvFCY8W3D"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65379/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.93.69/tcp/8553/p2p/16Uiu2HAkwmcrYHx2SWzq8We61y2yNMVAoQWGxsUMUHUTDkV7CVPB"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17122/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8552/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65379/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733468006464318464}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17122/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1733468006464318464,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8552/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1733468006464318464,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 56d054ce44b2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a69780432a09
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 56d054ce44b2. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 6a440bbb7833
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a69780432a09. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.