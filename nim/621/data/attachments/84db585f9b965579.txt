[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_message_with_both_ephemeral_true_and_false with id: 2025-01-19_04-06-37__95f7e53d-12fe-45ff-96c4-f4fbd9a8fc54
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-19_04-06-37__95f7e53d-12fe-45ff-96c4-f4fbd9a8fc54__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.235.134
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['6914', '6915', '6916', '6917', '6918']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 6914:6914 -p 6915:6915 -p 6916:6916 -p 6917:6917 -p 6918:6918 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6916 --rest-port=6914 --tcp-port=6915 --discv5-udp-port=6917 --rest-address=0.0.0.0 --nat=extip:172.18.235.134 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4b50af93bfd0f1b1259b8bcf5ed8dbd9eea6cfcf7e7ec6d146d2bef8e3bebfe8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6918 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.235.134 waku 5bc7454c48ac9c3ed35486a04eb77ce75699e37052a1f7755621061db534544a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5bc7454c48ac. Setting up logs at ./log/docker/publishing_node1_2025-01-19_04-06-37__95f7e53d-12fe-45ff-96c4-f4fbd9a8fc54__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 6914
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a9c76fe52346. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6914/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6914/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.235.134/tcp/6915/p2p/16Uiu2HAmCHDaRaSLKZQVDoS3RwuDWvxegrEF4wQ8bhSiVGjC86ii","/ip4/172.18.235.134/tcp/6916/ws/p2p/16Uiu2HAmCHDaRaSLKZQVDoS3RwuDWvxegrEF4wQ8bhSiVGjC86ii"],"enrUri":"enr:-L24QLVEUwMyG6URQGQA-qUCdRCr8BSZmW0IoYeqaQaNR8EjFv7GqDjcDyQcs6OpomOVqOk557hEg-DOxRvo4-_FH4kCgmlkgnY0gmlwhKwS64aKbXVsdGlhZGRyc5YACASsEuuGBhsDAAoErBLrhgYbBN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-mwtan5djMKD4nLuw19UGm-Seg0kLIOkFS6__pEetO-DdGNwghsDg3VkcIIbBYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-19_04-06-37__95f7e53d-12fe-45ff-96c4-f4fbd9a8fc54__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.25.44
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['28329', '28330', '28331', '28332', '28333']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 28329:28329 -p 28330:28330 -p 28331:28331 -p 28332:28332 -p 28333:28333 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28331 --rest-port=28329 --tcp-port=28330 --discv5-udp-port=28332 --rest-address=0.0.0.0 --nat=extip:172.18.25.44 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0666db9cb01a4f5dcaecc4d3037febb00fcd2e11ec7ca4982fdfeba4ccb4f62e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28333 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLVEUwMyG6URQGQA-qUCdRCr8BSZmW0IoYeqaQaNR8EjFv7GqDjcDyQcs6OpomOVqOk557hEg-DOxRvo4-_FH4kCgmlkgnY0gmlwhKwS64aKbXVsdGlhZGRyc5YACASsEuuGBhsDAAoErBLrhgYbBN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-mwtan5djMKD4nLuw19UGm-Seg0kLIOkFS6__pEetO-DdGNwghsDg3VkcIIbBYV3YWt1MgM --storenode=/ip4/172.18.235.134/tcp/6915/p2p/16Uiu2HAmCHDaRaSLKZQVDoS3RwuDWvxegrEF4wQ8bhSiVGjC86ii --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.25.44 waku c211f348a43d25312bcdcf8bdbe4a3fc814b417e7c811e170cebc443838a3fca
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c211f348a43d. Setting up logs at ./log/docker/store_node1_2025-01-19_04-06-37__95f7e53d-12fe-45ff-96c4-f4fbd9a8fc54__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 28329
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28329/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28329/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.25.44/tcp/28330/p2p/16Uiu2HAmNATCneQd83vE1zxU4AjuUvtyiYeTP8G38w8pviSJXGHX","/ip4/172.18.25.44/tcp/28331/ws/p2p/16Uiu2HAmNATCneQd83vE1zxU4AjuUvtyiYeTP8G38w8pviSJXGHX"],"enrUri":"enr:-L24QMcNZdsqTlq-TRpoD1pSwQxUk_ZmakpgvGHb9meex86eZtV99wfZvEWsQw3fQFhZkxomZdjy9KFHvVTbbG6jFlECgmlkgnY0gmlwhKwSGSyKbXVsdGlhZGRyc5YACASsEhksBm6qAAoErBIZLAZuq90DgnJzhQADAQAAiXNlY3AyNTZrMaEDjUVjmNIYJBtT0ikZL7D7OrunXb5uqzZwh4w_zZjMFfqDdGNwgm6qg3VkcIJurIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28329/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.235.134/tcp/6915/p2p/16Uiu2HAmCHDaRaSLKZQVDoS3RwuDWvxegrEF4wQ8bhSiVGjC86ii"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6914/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28329/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6914/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)', "ephemeral": true}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6914/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6914/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5bc7454c48ac
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c211f348a43d
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5bc7454c48ac. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-19_04-06-37__95f7e53d-12fe-45ff-96c4-f4fbd9a8fc54__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-19_04-06-37__95f7e53d-12fe-45ff-96c4-f4fbd9a8fc54__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_message_with_both_ephemeral_true_and_false with id: 2025-01-19_04-06-43__66acf6b8-1841-4c17-9cd3-80525807a162
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-19_04-06-43__66acf6b8-1841-4c17-9cd3-80525807a162__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.125.27
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['4469', '4470', '4471', '4472', '4473']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 4469:4469 -p 4470:4470 -p 4471:4471 -p 4472:4472 -p 4473:4473 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4471 --rest-port=4469 --tcp-port=4470 --discv5-udp-port=4472 --rest-address=0.0.0.0 --nat=extip:172.18.125.27 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0d0085e73becec31b02389ebb1aadca7dc1c1ef8bdf788eae8e9a3a41faedb29 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4473 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.125.27 waku 65f97a5fe93d92af10234ba96f573821aa1809a2edd65fbcba2da2513a62a770
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 65f97a5fe93d. Setting up logs at ./log/docker/publishing_node1_2025-01-19_04-06-43__66acf6b8-1841-4c17-9cd3-80525807a162__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 4469
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c211f348a43d. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4469/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4469/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.125.27/tcp/4470/p2p/16Uiu2HAmT7dCMbcoA4GeXa5ZTDkdSH3kkLqZFn39CYrae9aPPSFg","/ip4/172.18.125.27/tcp/4471/ws/p2p/16Uiu2HAmT7dCMbcoA4GeXa5ZTDkdSH3kkLqZFn39CYrae9aPPSFg"],"enrUri":"enr:-L24QCmjjnA_NYgimMXrSKfykNdapLn8NJx3xX7WEIQ_sDpUc3cz49NDtDlHyZJ9RlTSFkNVfEhL2QwVrC3iyJv1vS8CgmlkgnY0gmlwhKwSfRuKbXVsdGlhZGRyc5YACASsEn0bBhF2AAoErBJ9GwYRd90DgnJzhQADAQAAiXNlY3AyNTZrMaED1tZhP0t_2MwFBTrf0Nwb69sCWIEH6JZVHLFVamM_GceDdGNwghF2g3VkcIIReIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-19_04-06-43__66acf6b8-1841-4c17-9cd3-80525807a162__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.46.95
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['56804', '56805', '56806', '56807', '56808']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 56804:56804 -p 56805:56805 -p 56806:56806 -p 56807:56807 -p 56808:56808 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56806 --rest-port=56804 --tcp-port=56805 --discv5-udp-port=56807 --rest-address=0.0.0.0 --nat=extip:172.18.46.95 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ae7f1da0ab69795ec7cf4ca81a1d10bea18a57efaac4fd3adea4a1579c1df8bc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56808 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QCmjjnA_NYgimMXrSKfykNdapLn8NJx3xX7WEIQ_sDpUc3cz49NDtDlHyZJ9RlTSFkNVfEhL2QwVrC3iyJv1vS8CgmlkgnY0gmlwhKwSfRuKbXVsdGlhZGRyc5YACASsEn0bBhF2AAoErBJ9GwYRd90DgnJzhQADAQAAiXNlY3AyNTZrMaED1tZhP0t_2MwFBTrf0Nwb69sCWIEH6JZVHLFVamM_GceDdGNwghF2g3VkcIIReIV3YWt1MgM --storenode=/ip4/172.18.125.27/tcp/4470/p2p/16Uiu2HAmT7dCMbcoA4GeXa5ZTDkdSH3kkLqZFn39CYrae9aPPSFg --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.46.95 waku 7c587536ff7f74cf37a7229b86871e0aac938aea011dfb8fb297dad56bfe039c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7c587536ff7f. Setting up logs at ./log/docker/store_node1_2025-01-19_04-06-43__66acf6b8-1841-4c17-9cd3-80525807a162__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 56804
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56804/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56804/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.46.95/tcp/56805/p2p/16Uiu2HAmFs5WdDpb4LYWunBvKngd8ZJaUFwZ7YT5TQbnr5VCYemQ","/ip4/172.18.46.95/tcp/56806/ws/p2p/16Uiu2HAmFs5WdDpb4LYWunBvKngd8ZJaUFwZ7YT5TQbnr5VCYemQ"],"enrUri":"enr:-L24QK3BUgHrqVQ1jZ7v_NPAIxAv8Cuib4OjBl-z7wzJ9y6Le92yjamW1sHkT_4hanZ_k5ZE_1CipIaSClgvUHwxiZcCgmlkgnY0gmlwhKwSLl-KbXVsdGlhZGRyc5YACASsEi5fBt3lAAoErBIuXwbd5t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDL6vdsiKWl2MXV9TMwiF1lQOqN0RDt2kk5cbpK38kUMuDdGNwgt3lg3VkcILd54V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56804/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.125.27/tcp/4470/p2p/16Uiu2HAmT7dCMbcoA4GeXa5ZTDkdSH3kkLqZFn39CYrae9aPPSFg"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4469/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56804/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4469/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)', "ephemeral": true}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4469/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4469/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 65f97a5fe93d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 7c587536ff7f
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 65f97a5fe93d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-19_04-06-43__66acf6b8-1841-4c17-9cd3-80525807a162__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-19_04-06-43__66acf6b8-1841-4c17-9cd3-80525807a162__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_message_with_both_ephemeral_true_and_false with id: 2025-01-19_04-06-57__0a0091bb-3d49-4357-bebc-09fbb5b2998d
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-19_04-06-57__0a0091bb-3d49-4357-bebc-09fbb5b2998d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.86.240
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37915', '37916', '37917', '37918', '37919']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37915:37915 -p 37916:37916 -p 37917:37917 -p 37918:37918 -p 37919:37919 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37917 --rest-port=37915 --tcp-port=37916 --discv5-udp-port=37918 --rest-address=0.0.0.0 --nat=extip:172.18.86.240 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f6c707b8f74b95ce4abe4e3facdb0e6fd144caa70afb2a1cbdf46d8d6b88fa2a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37919 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.86.240 waku 7ee47245501895e28bea4e0429882a57bcb20c46345775cf4d8fcc0f3da76204
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7ee472455018. Setting up logs at ./log/docker/publishing_node1_2025-01-19_04-06-57__0a0091bb-3d49-4357-bebc-09fbb5b2998d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 37915
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7c587536ff7f. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37915/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37915/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.86.240/tcp/37916/p2p/16Uiu2HAky3q12JJiNrBeLzgKQVFrFNE8doamLnXQuD79yKTS8g1B","/ip4/172.18.86.240/tcp/37917/ws/p2p/16Uiu2HAky3q12JJiNrBeLzgKQVFrFNE8doamLnXQuD79yKTS8g1B"],"enrUri":"enr:-L24QAJXfuikxZz1Y5xURKYMdZKvWGpnnE8kKIinLWi3lg59cANDwHABJ2orr53-6pwRTKEkxocHp8zNJ620BoDFVM0CgmlkgnY0gmlwhKwSVvCKbXVsdGlhZGRyc5YACASsElbwBpQcAAoErBJW8AaUHd0DgnJzhQADAQAAiXNlY3AyNTZrMaECNdYrku7y1LZVBTtn3N1RFowhlp31z5O0cJiiS25M0O6DdGNwgpQcg3VkcIKUHoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-19_04-06-57__0a0091bb-3d49-4357-bebc-09fbb5b2998d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.5.73
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['50262', '50263', '50264', '50265', '50266']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 50262:50262 -p 50263:50263 -p 50264:50264 -p 50265:50265 -p 50266:50266 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50264 --rest-port=50262 --tcp-port=50263 --discv5-udp-port=50265 --rest-address=0.0.0.0 --nat=extip:172.18.5.73 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=255ccbfe2e2ed8ccf9edf89bfcdc7dc7b7dec41c0611896eea48e3129359de9e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50266 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QAJXfuikxZz1Y5xURKYMdZKvWGpnnE8kKIinLWi3lg59cANDwHABJ2orr53-6pwRTKEkxocHp8zNJ620BoDFVM0CgmlkgnY0gmlwhKwSVvCKbXVsdGlhZGRyc5YACASsElbwBpQcAAoErBJW8AaUHd0DgnJzhQADAQAAiXNlY3AyNTZrMaECNdYrku7y1LZVBTtn3N1RFowhlp31z5O0cJiiS25M0O6DdGNwgpQcg3VkcIKUHoV3YWt1MgM --storenode=/ip4/172.18.86.240/tcp/37916/p2p/16Uiu2HAky3q12JJiNrBeLzgKQVFrFNE8doamLnXQuD79yKTS8g1B --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.5.73 waku f2f37197592a08c05d8baac50b7abf849b5b5101c65d4cebac03cf20fb335490
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f2f37197592a. Setting up logs at ./log/docker/store_node1_2025-01-19_04-06-57__0a0091bb-3d49-4357-bebc-09fbb5b2998d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 50262
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50262/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50262/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.5.73/tcp/50263/p2p/16Uiu2HAmG4A2ra7osST9zPwooUTSzmBaoetFLyF6y3oAnBtW6TNe","/ip4/172.18.5.73/tcp/50264/ws/p2p/16Uiu2HAmG4A2ra7osST9zPwooUTSzmBaoetFLyF6y3oAnBtW6TNe"],"enrUri":"enr:-L24QDgrBILCHm-JAnZtC2PE44ibL0K8sQPQfLZ9N0H8zBm4OlzhhLRDU__9329OURlgpGhuQbw8v7NXPSAwLHd7h0ACgmlkgnY0gmlwhKwSBUmKbXVsdGlhZGRyc5YACASsEgVJBsRXAAoErBIFSQbEWN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDMoJd9tLc90y5ct1nIdfJbsXDMrjz2pj5WT06B6XoKweDdGNwgsRXg3VkcILEWYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50262/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.86.240/tcp/37916/p2p/16Uiu2HAky3q12JJiNrBeLzgKQVFrFNE8doamLnXQuD79yKTS8g1B"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37915/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50262/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37915/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)', "ephemeral": true}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37915/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37915/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 7ee472455018
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f2f37197592a
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7ee472455018. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-19_04-06-57__0a0091bb-3d49-4357-bebc-09fbb5b2998d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-19_04-06-57__0a0091bb-3d49-4357-bebc-09fbb5b2998d__wakuorg_nwaku:latest.log