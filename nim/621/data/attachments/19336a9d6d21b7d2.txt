[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2025-01-19_04-06-48__31acd62e-4790-4a34-a98e-eb2d29fab3f5
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-19_04-06-48__31acd62e-4790-4a34-a98e-eb2d29fab3f5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.149.114
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['15919', '15920', '15921', '15922', '15923']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 15919:15919 -p 15920:15920 -p 15921:15921 -p 15922:15922 -p 15923:15923 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15921 --rest-port=15919 --tcp-port=15920 --discv5-udp-port=15922 --rest-address=0.0.0.0 --nat=extip:172.18.149.114 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2c4e9b804bd399bbaba46bb522c092e6eea48d7bbbc5eaadda0167fcecc513ba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15923 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.149.114 waku 2d92f8faf7e99c2a92770f1cfd7d0c99991ac5fe3427bddba7a23df88e59a4a5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2d92f8faf7e9. Setting up logs at ./log/docker/receiving_node1_2025-01-19_04-06-48__31acd62e-4790-4a34-a98e-eb2d29fab3f5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 15919
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c94281d963d2. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15919/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15919/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.149.114/tcp/15920/p2p/16Uiu2HAmKjxYrc6iVTdq7mL8dkDCGggbW5oaXmiy2knq4pqrmTgt","/ip4/172.18.149.114/tcp/15921/ws/p2p/16Uiu2HAmKjxYrc6iVTdq7mL8dkDCGggbW5oaXmiy2knq4pqrmTgt"],"enrUri":"enr:-L24QOHBV3RbgP15Y9C1RIEJVivBCQze-yMjg2WdLYEX0QIPampke0s3iO945LcFN_MwGJZYSiiY4JADNkCY_QcepwgCgmlkgnY0gmlwhKwSlXKKbXVsdGlhZGRyc5YACASsEpVyBj4wAAoErBKVcgY-Md0DgnJzhQADAQAAiXNlY3AyNTZrMaEDaUetNfMZOY5bkaWPSgSozXXuuiAuFxHvCI0AxHibBuGDdGNwgj4wg3VkcII-MoV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-19_04-06-48__31acd62e-4790-4a34-a98e-eb2d29fab3f5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.28.16
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['22636', '22637', '22638', '22639', '22640']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 22636:22636 -p 22637:22637 -p 22638:22638 -p 22639:22639 -p 22640:22640 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22638 --rest-port=22636 --tcp-port=22637 --discv5-udp-port=22639 --rest-address=0.0.0.0 --nat=extip:172.18.28.16 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=da547fb7dbfa64b2c8631c8a0c96d37ecc6c0ddbd7c8a7df7c8ffb0c96b6b4ee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22640 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.28.16 waku 44ea4183de5c079dbaa54b81671448e4885b9fa85aed0b8eeaf97b5371abcf64
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 44ea4183de5c. Setting up logs at ./log/docker/receiving_node2_2025-01-19_04-06-48__31acd62e-4790-4a34-a98e-eb2d29fab3f5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 22636
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22636/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22636/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.28.16/tcp/22637/p2p/16Uiu2HAmEbsyhZcRqMVB6jb1xRsGRrmZC8rC1EPsdLuP7svUuPqy","/ip4/172.18.28.16/tcp/22638/ws/p2p/16Uiu2HAmEbsyhZcRqMVB6jb1xRsGRrmZC8rC1EPsdLuP7svUuPqy"],"enrUri":"enr:-L24QHX45xcfT2ub9sIIjmMhiYrAzWDnfm6T1La5LqYGmox6VA4G2978NJTUKEX9VVC_7NMfsISFR946coEOczzWyFkCgmlkgnY0gmlwhKwSHBCKbXVsdGlhZGRyc5YACASsEhwQBlhtAAoErBIcEAZYbt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDHOttIvfxXg5OIUKboRYtjR_kxNyCCn5OPvMLzL6gWKCDdGNwglhtg3VkcIJYb4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22636/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.149.114/tcp/15920/p2p/16Uiu2HAmKjxYrc6iVTdq7mL8dkDCGggbW5oaXmiy2knq4pqrmTgt"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-19_04-06-48__31acd62e-4790-4a34-a98e-eb2d29fab3f5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.190.25
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['36838', '36839', '36840', '36841', '36842']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 36838:36838 -p 36839:36839 -p 36840:36840 -p 36841:36841 -p 36842:36842 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36840 --rest-port=36838 --tcp-port=36839 --discv5-udp-port=36841 --rest-address=0.0.0.0 --nat=extip:172.18.190.25 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7d7cc51d3b3c2bc98d31736a4b617caa7dd6fae7b03dd65d592ebf2bc2a8a41e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36842 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QOHBV3RbgP15Y9C1RIEJVivBCQze-yMjg2WdLYEX0QIPampke0s3iO945LcFN_MwGJZYSiiY4JADNkCY_QcepwgCgmlkgnY0gmlwhKwSlXKKbXVsdGlhZGRyc5YACASsEpVyBj4wAAoErBKVcgY-Md0DgnJzhQADAQAAiXNlY3AyNTZrMaEDaUetNfMZOY5bkaWPSgSozXXuuiAuFxHvCI0AxHibBuGDdGNwgj4wg3VkcII-MoV3YWt1Mgk --lightpushnode=/ip4/172.18.149.114/tcp/15920/p2p/16Uiu2HAmKjxYrc6iVTdq7mL8dkDCGggbW5oaXmiy2knq4pqrmTgt --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.190.25 waku 3a00ccdaa8f991ced1e904731a25569a48d9bbe8bd83232711ce257ef5853d32
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3a00ccdaa8f9. Setting up logs at ./log/docker/lightpush_node1_2025-01-19_04-06-48__31acd62e-4790-4a34-a98e-eb2d29fab3f5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 36838
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36838/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36838/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.190.25/tcp/36839/p2p/16Uiu2HAmGLqLFs1C5o14bEEZXFf5inpAqLyETYM6hpHFwKsZZQ32","/ip4/172.18.190.25/tcp/36840/ws/p2p/16Uiu2HAmGLqLFs1C5o14bEEZXFf5inpAqLyETYM6hpHFwKsZZQ32"],"enrUri":"enr:-L24QKqz17ZsxiK5hRZIr2t4Va_RwH90YRvObcxENvFxuiWXPVNzZ3H1WitzbVA6m2s3fqVV8IzKiaxF_HV1Ri7aVY4CgmlkgnY0gmlwhKwSvhmKbXVsdGlhZGRyc5YACASsEr4ZBo_nAAoErBK-GQaP6N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDNsgYv7EGZJAksTmdK5pI3QkrSdCnYetItcBZF5UekHGDdGNwgo_ng3VkcIKP6YV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36838/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.149.114/tcp/15920/p2p/16Uiu2HAmKjxYrc6iVTdq7mL8dkDCGggbW5oaXmiy2knq4pqrmTgt"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36838/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.28.16/tcp/22637/p2p/16Uiu2HAmEbsyhZcRqMVB6jb1xRsGRrmZC8rC1EPsdLuP7svUuPqy"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15919/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22636/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36838/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1737259612189143296, "version": 2.1}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:36838/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2d92f8faf7e9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 44ea4183de5c
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2d92f8faf7e9. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 3a00ccdaa8f9
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 44ea4183de5c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.