[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_no_timestamp with id: 2025-01-19_04-05-27__df296d04-32b1-4efb-9820-0467170c8b37
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-19_04-05-27__df296d04-32b1-4efb-9820-0467170c8b37__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.148.32
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['7530', '7531', '7532', '7533', '7534']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 7530:7530 -p 7531:7531 -p 7532:7532 -p 7533:7533 -p 7534:7534 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7532 --rest-port=7530 --tcp-port=7531 --discv5-udp-port=7533 --rest-address=0.0.0.0 --nat=extip:172.18.148.32 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d75fa4c7b35fc8f4eb3ffe1a539c7c5f564ff4cec53170bceaaafba11d6eceae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7534 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.148.32 waku b406a354573339321144c8b5e14156c9524a5c09e110308245b10da90c3d25b1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b406a3545733. Setting up logs at ./log/docker/receiving_node1_2025-01-19_04-05-27__df296d04-32b1-4efb-9820-0467170c8b37__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 7530
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container cda878ca5c79. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7530/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7530/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.148.32/tcp/7531/p2p/16Uiu2HAmEuWY1aaVnJtUTZW5SnyW5CWkyDVmh46rKm27LEUXZBHs","/ip4/172.18.148.32/tcp/7532/ws/p2p/16Uiu2HAmEuWY1aaVnJtUTZW5SnyW5CWkyDVmh46rKm27LEUXZBHs"],"enrUri":"enr:-L24QCdRlEcRLUT1byPS6bnibl6n28ArP7HhsWoVFfcl08CJHdZJg6jpBvxAh3e67e7bvC-9pxiAzzazMmRY-vf7fNUCgmlkgnY0gmlwhKwSlCCKbXVsdGlhZGRyc5YACASsEpQgBh1rAAoErBKUIAYdbN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDIW-iom_Eb0m0ofWKad5iToLuylD03qaT8Iq0c3TRhLqDdGNwgh1rg3VkcIIdbYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-19_04-05-27__df296d04-32b1-4efb-9820-0467170c8b37__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.116.247
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['31198', '31199', '31200', '31201', '31202']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 31198:31198 -p 31199:31199 -p 31200:31200 -p 31201:31201 -p 31202:31202 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31200 --rest-port=31198 --tcp-port=31199 --discv5-udp-port=31201 --rest-address=0.0.0.0 --nat=extip:172.18.116.247 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3a637840fefeb831ad60fcb405cbdb7e9f75ad926a000c8c18a6cfafd71e55d4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31202 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.116.247 waku ff9de16a05e4d729ba3f90ddb4a01d29f623e575bee368633bf16de18fcc85aa
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ff9de16a05e4. Setting up logs at ./log/docker/receiving_node2_2025-01-19_04-05-27__df296d04-32b1-4efb-9820-0467170c8b37__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 31198
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31198/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31198/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.116.247/tcp/31199/p2p/16Uiu2HAmFdJqMzCQeXVtXuZLgYikUaGYfYsY9DmsKP2yagEp7MPM","/ip4/172.18.116.247/tcp/31200/ws/p2p/16Uiu2HAmFdJqMzCQeXVtXuZLgYikUaGYfYsY9DmsKP2yagEp7MPM"],"enrUri":"enr:-L24QB4kGowxPU8tkjnVozI-6SrY8br2xmof44ZS8YR0RW8PD6INqX-U-E5K2_dJAcvGwAVzaEZL2rZVB6d0lXJE7kgCgmlkgnY0gmlwhKwSdPeKbXVsdGlhZGRyc5YACASsEnT3BnnfAAoErBJ09wZ54N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDLCTMkegYoGxrWwhxVHlgS8mmJjsdJEgn8Qv5ZpbFcCCDdGNwgnnfg3VkcIJ54YV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31198/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.148.32/tcp/7531/p2p/16Uiu2HAmEuWY1aaVnJtUTZW5SnyW5CWkyDVmh46rKm27LEUXZBHs"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-19_04-05-27__df296d04-32b1-4efb-9820-0467170c8b37__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.227.169
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['11852', '11853', '11854', '11855', '11856']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 11852:11852 -p 11853:11853 -p 11854:11854 -p 11855:11855 -p 11856:11856 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11854 --rest-port=11852 --tcp-port=11853 --discv5-udp-port=11855 --rest-address=0.0.0.0 --nat=extip:172.18.227.169 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f29143cc7eadf7a41759d6ecdbeeba3bd7f229bc8b3a40ff951a6e8d7bfc4d3d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11856 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QCdRlEcRLUT1byPS6bnibl6n28ArP7HhsWoVFfcl08CJHdZJg6jpBvxAh3e67e7bvC-9pxiAzzazMmRY-vf7fNUCgmlkgnY0gmlwhKwSlCCKbXVsdGlhZGRyc5YACASsEpQgBh1rAAoErBKUIAYdbN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDIW-iom_Eb0m0ofWKad5iToLuylD03qaT8Iq0c3TRhLqDdGNwgh1rg3VkcIIdbYV3YWt1Mgk --lightpushnode=/ip4/172.18.148.32/tcp/7531/p2p/16Uiu2HAmEuWY1aaVnJtUTZW5SnyW5CWkyDVmh46rKm27LEUXZBHs --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.227.169 waku e21c74dd23689c321bc2704f2083e5a9c8ac9113c0cf7dcd13b7f8688a72abe5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e21c74dd2368. Setting up logs at ./log/docker/lightpush_node1_2025-01-19_04-05-27__df296d04-32b1-4efb-9820-0467170c8b37__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 11852
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11852/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11852/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.227.169/tcp/11853/p2p/16Uiu2HAmCXbdfWMqC4sGciB5NS5tp5wUMVTG6VB7oNT5kCSUduM5","/ip4/172.18.227.169/tcp/11854/ws/p2p/16Uiu2HAmCXbdfWMqC4sGciB5NS5tp5wUMVTG6VB7oNT5kCSUduM5"],"enrUri":"enr:-L24QAMPgbYsyZfa_8WiWy7H9YuiXijKvddh8rJcAyPYHZrXXBBaXVdw5_h_M37loNhyenL7odRwPgyLFnT_yR6qPjgCgmlkgnY0gmlwhKwS46mKbXVsdGlhZGRyc5YACASsEuOpBi5NAAoErBLjqQYuTt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_hs_VD9zquEymddJieixBThvlwz39nSJaHrWuFXWTwyDdGNwgi5Ng3VkcIIuT4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11852/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.148.32/tcp/7531/p2p/16Uiu2HAmEuWY1aaVnJtUTZW5SnyW5CWkyDVmh46rKm27LEUXZBHs"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11852/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.116.247/tcp/31199/p2p/16Uiu2HAmFdJqMzCQeXVtXuZLgYikUaGYfYsY9DmsKP2yagEp7MPM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7530/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31198/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11852/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7530/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1737259531074687232,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31198/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1737259531074687232,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b406a3545733
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ff9de16a05e4
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b406a3545733. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e21c74dd2368
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ff9de16a05e4. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.