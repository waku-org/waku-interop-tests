[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_message_relayed_before_store_node_is_started with id: 2025-01-19_04-07-17__5ad068e2-e06c-4ee7-9b5a-ac337bd08981
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-19_04-07-17__5ad068e2-e06c-4ee7-9b5a-ac337bd08981__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.189.48
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['39447', '39448', '39449', '39450', '39451']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 39447:39447 -p 39448:39448 -p 39449:39449 -p 39450:39450 -p 39451:39451 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39449 --rest-port=39447 --tcp-port=39448 --discv5-udp-port=39450 --rest-address=0.0.0.0 --nat=extip:172.18.189.48 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4de2fb67f8ac7cb6af6ad24b7ea61fd2ece5f69bece44bee6d3fc8ad4bf35dfc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39451 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.189.48 waku 6c4776362778262b916ed6f9ffba02324268405e2e6ad17044064c1190fd6908
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6c4776362778. Setting up logs at ./log/docker/publishing_node1_2025-01-19_04-07-17__5ad068e2-e06c-4ee7-9b5a-ac337bd08981__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 39447
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 545ee97bac1a. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39447/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39447/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.189.48/tcp/39448/p2p/16Uiu2HAmSsahi97C9dhhxA9KZf69DPHLu3sHxxsXVyknjovn2412","/ip4/172.18.189.48/tcp/39449/ws/p2p/16Uiu2HAmSsahi97C9dhhxA9KZf69DPHLu3sHxxsXVyknjovn2412"],"enrUri":"enr:-L24QEu7upq_eHSqDdLQqwzE-0JiTYwhEW965xC5tVFgNsejfcHwRa2loHGibLWPJuWmj9cvdXZgDEGxOuOELprLtLsCgmlkgnY0gmlwhKwSvTCKbXVsdGlhZGRyc5YACASsEr0wBpoYAAoErBK9MAaaGd0DgnJzhQADAQAAiXNlY3AyNTZrMaED0z1tvq8Oml9n-JKMlFoZJrXA0A-i5tij9c0_YX7n6wWDdGNwgpoYg3VkcIKaGoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-19_04-07-17__5ad068e2-e06c-4ee7-9b5a-ac337bd08981__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.49.246
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['38831', '38832', '38833', '38834', '38835']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 38831:38831 -p 38832:38832 -p 38833:38833 -p 38834:38834 -p 38835:38835 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38833 --rest-port=38831 --tcp-port=38832 --discv5-udp-port=38834 --rest-address=0.0.0.0 --nat=extip:172.18.49.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cfecf2d7bbb7697f5de1b836cd624da22ffa82ec00bd34abb5bf3e82fda9fcb4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38835 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QEu7upq_eHSqDdLQqwzE-0JiTYwhEW965xC5tVFgNsejfcHwRa2loHGibLWPJuWmj9cvdXZgDEGxOuOELprLtLsCgmlkgnY0gmlwhKwSvTCKbXVsdGlhZGRyc5YACASsEr0wBpoYAAoErBK9MAaaGd0DgnJzhQADAQAAiXNlY3AyNTZrMaED0z1tvq8Oml9n-JKMlFoZJrXA0A-i5tij9c0_YX7n6wWDdGNwgpoYg3VkcIKaGoV3YWt1MgM --storenode=/ip4/172.18.189.48/tcp/39448/p2p/16Uiu2HAmSsahi97C9dhhxA9KZf69DPHLu3sHxxsXVyknjovn2412 --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.49.246 waku 70e67a7b44e2643e6daaea6a17537bc08399ebb5b6989d7c16d423288e8b7385
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 70e67a7b44e2. Setting up logs at ./log/docker/store_node1_2025-01-19_04-07-17__5ad068e2-e06c-4ee7-9b5a-ac337bd08981__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 38831
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38831/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38831/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.49.246/tcp/38832/p2p/16Uiu2HAmQhVGwhF1XjcnJRYVA2gjWZj1eMpnsNmzcssBmmpxqyxC","/ip4/172.18.49.246/tcp/38833/ws/p2p/16Uiu2HAmQhVGwhF1XjcnJRYVA2gjWZj1eMpnsNmzcssBmmpxqyxC"],"enrUri":"enr:-L24QGWP7lVCbUq6iUxzhTb1T29ofNRDUDQmrd3hinvzvAZODLqDIrV6f0ydqyOIO3uhjARdi4uB5BToiOOerDAHc8UCgmlkgnY0gmlwhKwSMfaKbXVsdGlhZGRyc5YACASsEjH2BpewAAoErBIx9gaXsd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDsvAcRAUbDQ7Z4JB3DfhLhELYfPsY-MXOaL8UT6QdqbGDdGNwgpewg3VkcIKXsoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38831/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.189.48/tcp/39448/p2p/16Uiu2HAmSsahi97C9dhhxA9KZf69DPHLu3sHxxsXVyknjovn2412"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39447/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38831/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39447/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39447/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 6c4776362778
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 70e67a7b44e2
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6c4776362778. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-19_04-07-17__5ad068e2-e06c-4ee7-9b5a-ac337bd08981__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-19_04-07-17__5ad068e2-e06c-4ee7-9b5a-ac337bd08981__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_message_relayed_before_store_node_is_started with id: 2025-01-19_04-07-22__96fcd414-5e32-4da0-a025-b3ac0e180ff3
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-19_04-07-22__96fcd414-5e32-4da0-a025-b3ac0e180ff3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.33.24
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['19789', '19790', '19791', '19792', '19793']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 19789:19789 -p 19790:19790 -p 19791:19791 -p 19792:19792 -p 19793:19793 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19791 --rest-port=19789 --tcp-port=19790 --discv5-udp-port=19792 --rest-address=0.0.0.0 --nat=extip:172.18.33.24 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fa01b8eda89937a4fcbf392e0b0bbfefb3635fdabd3c0ef21d82dcb3171a7d9d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19793 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.33.24 waku f52b3c5694066f3e72bf1cf64d8401162b0c3f5cb1431eb150ff6a0bcfac5326
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f52b3c569406. Setting up logs at ./log/docker/publishing_node1_2025-01-19_04-07-22__96fcd414-5e32-4da0-a025-b3ac0e180ff3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 19789
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 70e67a7b44e2. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19789/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19789/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.33.24/tcp/19790/p2p/16Uiu2HAmMwjxYGCRsdVsvtD6i2UKxP5mEYr5u56npbwxKQ82fUPn","/ip4/172.18.33.24/tcp/19791/ws/p2p/16Uiu2HAmMwjxYGCRsdVsvtD6i2UKxP5mEYr5u56npbwxKQ82fUPn"],"enrUri":"enr:-L24QL20YCJc0KLFEjUACwrw2SOgC14J7-IsyvliSYEPo-rnf28Z17WQ8IipffEowe534eWuCV5OcJ-E3SYkIUcbJ4oCgmlkgnY0gmlwhKwSIRiKbXVsdGlhZGRyc5YACASsEiEYBk1OAAoErBIhGAZNT90DgnJzhQADAQAAiXNlY3AyNTZrMaEDigPIYRBxHquoFgfr1am3XwZ1j2XBSYeTBvQ5lQX4fhWDdGNwgk1Og3VkcIJNUIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-19_04-07-22__96fcd414-5e32-4da0-a025-b3ac0e180ff3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.6.164
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['26402', '26403', '26404', '26405', '26406']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 26402:26402 -p 26403:26403 -p 26404:26404 -p 26405:26405 -p 26406:26406 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26404 --rest-port=26402 --tcp-port=26403 --discv5-udp-port=26405 --rest-address=0.0.0.0 --nat=extip:172.18.6.164 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7696f2b2afedbd3facd4ca09f5dea5eeaefa33e4b321feaeabe2ee841cc58d8f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26406 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QL20YCJc0KLFEjUACwrw2SOgC14J7-IsyvliSYEPo-rnf28Z17WQ8IipffEowe534eWuCV5OcJ-E3SYkIUcbJ4oCgmlkgnY0gmlwhKwSIRiKbXVsdGlhZGRyc5YACASsEiEYBk1OAAoErBIhGAZNT90DgnJzhQADAQAAiXNlY3AyNTZrMaEDigPIYRBxHquoFgfr1am3XwZ1j2XBSYeTBvQ5lQX4fhWDdGNwgk1Og3VkcIJNUIV3YWt1MgM --storenode=/ip4/172.18.33.24/tcp/19790/p2p/16Uiu2HAmMwjxYGCRsdVsvtD6i2UKxP5mEYr5u56npbwxKQ82fUPn --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.6.164 waku f9d68bcbc9926319f3493714b692b4f7c738d236a659c6127be77a6098f1aa05
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f9d68bcbc992. Setting up logs at ./log/docker/store_node1_2025-01-19_04-07-22__96fcd414-5e32-4da0-a025-b3ac0e180ff3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 26402
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26402/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26402/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.6.164/tcp/26403/p2p/16Uiu2HAkxDMmCrfpD6upW7x9kCe65bR8kLqgBUCw5fq1H32ajJaE","/ip4/172.18.6.164/tcp/26404/ws/p2p/16Uiu2HAkxDMmCrfpD6upW7x9kCe65bR8kLqgBUCw5fq1H32ajJaE"],"enrUri":"enr:-L24QMUgh9WaH9AXoMJsMaZOdIKgilKmOC-Rf6hr3WAOzKlLedkd5rKNxfemd53pYAosr6UejZFPBtHb-NlzYAWW37UCgmlkgnY0gmlwhKwSBqSKbXVsdGlhZGRyc5YACASsEgakBmcjAAoErBIGpAZnJN0DgnJzhQADAQAAiXNlY3AyNTZrMaECKWt-NSAe2yJedZycWAUa6UTB9kEHTbu0udQLJ8iIQquDdGNwgmcjg3VkcIJnJYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26402/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.33.24/tcp/19790/p2p/16Uiu2HAmMwjxYGCRsdVsvtD6i2UKxP5mEYr5u56npbwxKQ82fUPn"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19789/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26402/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19789/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19789/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f52b3c569406
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f9d68bcbc992
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f52b3c569406. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-19_04-07-22__96fcd414-5e32-4da0-a025-b3ac0e180ff3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-19_04-07-22__96fcd414-5e32-4da0-a025-b3ac0e180ff3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_message_relayed_before_store_node_is_started with id: 2025-01-19_04-07-27__7e9cba15-b8c9-4dfc-b245-29bda8bbc9d9
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-19_04-07-27__7e9cba15-b8c9-4dfc-b245-29bda8bbc9d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.112.70
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['6679', '6680', '6681', '6682', '6683']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 6679:6679 -p 6680:6680 -p 6681:6681 -p 6682:6682 -p 6683:6683 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6681 --rest-port=6679 --tcp-port=6680 --discv5-udp-port=6682 --rest-address=0.0.0.0 --nat=extip:172.18.112.70 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cb2cf8bdbccf3becb1f98ab12df0f26a55ed536d9af2d5bccecb333646959e2e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6683 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.112.70 waku 27800ae0f5efc593bde58896ed96843a2be0b42c6eca08c59488243d31d3f346
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 27800ae0f5ef. Setting up logs at ./log/docker/publishing_node1_2025-01-19_04-07-27__7e9cba15-b8c9-4dfc-b245-29bda8bbc9d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 6679
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f9d68bcbc992. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6679/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6679/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.112.70/tcp/6680/p2p/16Uiu2HAmNgzaft9zWpXF1PK3g5JnVcNVHPbag6rLP8AAmf8ycAtD","/ip4/172.18.112.70/tcp/6681/ws/p2p/16Uiu2HAmNgzaft9zWpXF1PK3g5JnVcNVHPbag6rLP8AAmf8ycAtD"],"enrUri":"enr:-L24QEoBBMhTOdCAXqKBPzzgEDQdOx0hHAsAwlZf4IUUz2N9bwCO0U5OdUgfuUJYByrYEqims_90TcchU2gHblG6XZwCgmlkgnY0gmlwhKwScEaKbXVsdGlhZGRyc5YACASsEnBGBhoYAAoErBJwRgYaGd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDlRhKsBBSMzYIZwWYVmgnsU64Pv2XW_gtGsN1-WpScraDdGNwghoYg3VkcIIaGoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-19_04-07-27__7e9cba15-b8c9-4dfc-b245-29bda8bbc9d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.123.189
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['16786', '16787', '16788', '16789', '16790']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 16786:16786 -p 16787:16787 -p 16788:16788 -p 16789:16789 -p 16790:16790 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16788 --rest-port=16786 --tcp-port=16787 --discv5-udp-port=16789 --rest-address=0.0.0.0 --nat=extip:172.18.123.189 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=93498cb4dede40ccff50ca9fb4b4eac6c68dbedce2d41ca7f63ff5fa62cb0bd0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16790 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QEoBBMhTOdCAXqKBPzzgEDQdOx0hHAsAwlZf4IUUz2N9bwCO0U5OdUgfuUJYByrYEqims_90TcchU2gHblG6XZwCgmlkgnY0gmlwhKwScEaKbXVsdGlhZGRyc5YACASsEnBGBhoYAAoErBJwRgYaGd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDlRhKsBBSMzYIZwWYVmgnsU64Pv2XW_gtGsN1-WpScraDdGNwghoYg3VkcIIaGoV3YWt1MgM --storenode=/ip4/172.18.112.70/tcp/6680/p2p/16Uiu2HAmNgzaft9zWpXF1PK3g5JnVcNVHPbag6rLP8AAmf8ycAtD --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.123.189 waku 3e14059b2c717e916d11b590d79a048ed0603eabd7f9c45085af41c2444a39b3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3e14059b2c71. Setting up logs at ./log/docker/store_node1_2025-01-19_04-07-27__7e9cba15-b8c9-4dfc-b245-29bda8bbc9d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 16786
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16786/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16786/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.123.189/tcp/16787/p2p/16Uiu2HAm9btCHq8jGGouHve3CsSDfN3MWgaCpTtJS8Ta5tN1jN5P","/ip4/172.18.123.189/tcp/16788/ws/p2p/16Uiu2HAm9btCHq8jGGouHve3CsSDfN3MWgaCpTtJS8Ta5tN1jN5P"],"enrUri":"enr:-L24QJBeztH3Zvzk1_Q0914J5iUObnNM38GLDJ8Vn8y0rJaWAql_qO4LptFcNSEQZZhMsxgDkPzcQ8MLccoP_tYxSO0CgmlkgnY0gmlwhKwSe72KbXVsdGlhZGRyc5YACASsEnu9BkGTAAoErBJ7vQZBlN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC0qE8tTCScKaYJDve8ARtBto3SaTnopa_y5MnESGpR2KDdGNwgkGTg3VkcIJBlYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16786/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.112.70/tcp/6680/p2p/16Uiu2HAmNgzaft9zWpXF1PK3g5JnVcNVHPbag6rLP8AAmf8ycAtD"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6679/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16786/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6679/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6679/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 27800ae0f5ef
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 3e14059b2c71
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 27800ae0f5ef. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-19_04-07-27__7e9cba15-b8c9-4dfc-b245-29bda8bbc9d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-19_04-07-27__7e9cba15-b8c9-4dfc-b245-29bda8bbc9d9__wakuorg_nwaku:latest.log