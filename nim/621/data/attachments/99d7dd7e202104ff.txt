[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_relay_and_store__peer_neither_relay_nor_store with id: 2025-01-19_04-12-12__9f69f0bb-eaac-411c-ae61-40a2fa3f44d6
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-19_04-12-12__9f69f0bb-eaac-411c-ae61-40a2fa3f44d6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.122.36
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['60214', '60215', '60216', '60217', '60218']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 60214:60214 -p 60215:60215 -p 60216:60216 -p 60217:60217 -p 60218:60218 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60216 --rest-port=60214 --tcp-port=60215 --discv5-udp-port=60217 --rest-address=0.0.0.0 --nat=extip:172.18.122.36 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aefe774b4b99251a59ea2e1fea23aedac0d0ea0ccb9f33bfabab48c3440da2a9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60218 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.122.36 waku cc91dcb7c2dce3176b28c7f7feef827a2bb09f5852c426c7d9a15f27d5584d46
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID cc91dcb7c2dc. Setting up logs at ./log/docker/publishing_node1_2025-01-19_04-12-12__9f69f0bb-eaac-411c-ae61-40a2fa3f44d6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 60214
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c1dc4f22cc34. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60214/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60214/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.122.36/tcp/60215/p2p/16Uiu2HAm25Ted8BK1YydAcehDZYwyMKLCJjjwcpnqu2BSKg35YCD","/ip4/172.18.122.36/tcp/60216/ws/p2p/16Uiu2HAm25Ted8BK1YydAcehDZYwyMKLCJjjwcpnqu2BSKg35YCD"],"enrUri":"enr:-L24QIOOgNSJUK5djHlXAgpNwRFnz-rl73U4qk_wlGzH0gLmf9X0dkaI0DxSN2Tq_i2UL1psjSIZMPCJwJRcmyBorosCgmlkgnY0gmlwhKwSeiSKbXVsdGlhZGRyc5YACASsEnokBus3AAoErBJ6JAbrON0DgnJzhQADAQAAiXNlY3AyNTZrMaECYtRACYHKWAyus1VQ7xBGyAlZwJappzJXzUJKxmqY4waDdGNwgus3g3VkcILrOYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-19_04-12-12__9f69f0bb-eaac-411c-ae61-40a2fa3f44d6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.95.235
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['48479', '48480', '48481', '48482', '48483']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 48479:48479 -p 48480:48480 -p 48481:48481 -p 48482:48482 -p 48483:48483 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48481 --rest-port=48479 --tcp-port=48480 --discv5-udp-port=48482 --rest-address=0.0.0.0 --nat=extip:172.18.95.235 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=36d4a5d5b1ce7929a4b8f1f74617cde8d62e102b5dd764faddb14cbec1b28312 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48483 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QIOOgNSJUK5djHlXAgpNwRFnz-rl73U4qk_wlGzH0gLmf9X0dkaI0DxSN2Tq_i2UL1psjSIZMPCJwJRcmyBorosCgmlkgnY0gmlwhKwSeiSKbXVsdGlhZGRyc5YACASsEnokBus3AAoErBJ6JAbrON0DgnJzhQADAQAAiXNlY3AyNTZrMaECYtRACYHKWAyus1VQ7xBGyAlZwJappzJXzUJKxmqY4waDdGNwgus3g3VkcILrOYV3YWt1MgM --storenode=/ip4/172.18.122.36/tcp/60215/p2p/16Uiu2HAm25Ted8BK1YydAcehDZYwyMKLCJjjwcpnqu2BSKg35YCD --store=false --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.95.235 waku dfae3dab2f7c2f835b534cd7f6fb52bb3fd7356334b6adaea0acebe98c6d6ed9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID dfae3dab2f7c. Setting up logs at ./log/docker/store_node1_2025-01-19_04-12-12__9f69f0bb-eaac-411c-ae61-40a2fa3f44d6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 48479
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48479/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48479/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.95.235/tcp/48480/p2p/16Uiu2HAm5V6nookZXBum2vSsT6ioMhNcBBZ81i74v6mpBdWJdK3X","/ip4/172.18.95.235/tcp/48481/ws/p2p/16Uiu2HAm5V6nookZXBum2vSsT6ioMhNcBBZ81i74v6mpBdWJdK3X"],"enrUri":"enr:-L24QCZc9qp4iAmOFSF8oOBSz7DcdxNrvc5YpV6Yb1Y0Vn5fJR5lZgD1f_zhZatPb3q1eKxF9ZiWK7fw-B6GFKxLb9oCgmlkgnY0gmlwhKwSX-uKbXVsdGlhZGRyc5YACASsEl_rBr1gAAoErBJf6wa9Yd0DgnJzhQADAQAAiXNlY3AyNTZrMaEClXWqRQh-N8a00QCdiaU8v-0lwQsOTVzkBz28tjBU6OqDdGNwgr1gg3VkcIK9YoV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48479/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.122.36/tcp/60215/p2p/16Uiu2HAm25Ted8BK1YydAcehDZYwyMKLCJjjwcpnqu2BSKg35YCD"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60214/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60214/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60214/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id cc91dcb7c2dc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id dfae3dab2f7c
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container cc91dcb7c2dc. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-19_04-12-12__9f69f0bb-eaac-411c-ae61-40a2fa3f44d6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-19_04-12-12__9f69f0bb-eaac-411c-ae61-40a2fa3f44d6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_relay_and_store__peer_neither_relay_nor_store with id: 2025-01-19_04-12-18__291b3620-d0d4-432a-b4a9-e88162a54124
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-19_04-12-18__291b3620-d0d4-432a-b4a9-e88162a54124__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.79.248
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['58535', '58536', '58537', '58538', '58539']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 58535:58535 -p 58536:58536 -p 58537:58537 -p 58538:58538 -p 58539:58539 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58537 --rest-port=58535 --tcp-port=58536 --discv5-udp-port=58538 --rest-address=0.0.0.0 --nat=extip:172.18.79.248 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=65ef1dc96a25b7436dd5f40af5d4dd581d028bcafa55d3ca457b3109d79dfdb5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58539 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.79.248 waku a1f73034e940e2a0f13f38abeb91fb660ad6ee43e6706bc796070e45b288d894
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a1f73034e940. Setting up logs at ./log/docker/publishing_node1_2025-01-19_04-12-18__291b3620-d0d4-432a-b4a9-e88162a54124__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 58535
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container dfae3dab2f7c. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58535/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58535/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.79.248/tcp/58536/p2p/16Uiu2HAm5yWj7TmRoW3861SyjeswzQprEcNBCa7pKrWQhZQM6v9Z","/ip4/172.18.79.248/tcp/58537/ws/p2p/16Uiu2HAm5yWj7TmRoW3861SyjeswzQprEcNBCa7pKrWQhZQM6v9Z"],"enrUri":"enr:-L24QIB_rGhkSF3FKDGV-oTLwIih9OCzOFRcPpjNHy_6uPILX1nKFZrc6JskOfqRf5P2l1EBgTn0u9ZEhZI8uGHJmLgCgmlkgnY0gmlwhKwST_iKbXVsdGlhZGRyc5YACASsEk_4BuSoAAoErBJP-Abkqd0DgnJzhQADAQAAiXNlY3AyNTZrMaECnLz-G8UvbVvOZrtSXrrXC6DMRITOPwa7FdsZ3UydTMyDdGNwguSog3VkcILkqoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-19_04-12-18__291b3620-d0d4-432a-b4a9-e88162a54124__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.36.239
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['30227', '30228', '30229', '30230', '30231']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 30227:30227 -p 30228:30228 -p 30229:30229 -p 30230:30230 -p 30231:30231 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30229 --rest-port=30227 --tcp-port=30228 --discv5-udp-port=30230 --rest-address=0.0.0.0 --nat=extip:172.18.36.239 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e7bacafcc3daa9cedab7ce5e7a07f16b361c64bda7bea7932acfad63f43d9edd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30231 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QIB_rGhkSF3FKDGV-oTLwIih9OCzOFRcPpjNHy_6uPILX1nKFZrc6JskOfqRf5P2l1EBgTn0u9ZEhZI8uGHJmLgCgmlkgnY0gmlwhKwST_iKbXVsdGlhZGRyc5YACASsEk_4BuSoAAoErBJP-Abkqd0DgnJzhQADAQAAiXNlY3AyNTZrMaECnLz-G8UvbVvOZrtSXrrXC6DMRITOPwa7FdsZ3UydTMyDdGNwguSog3VkcILkqoV3YWt1MgM --storenode=/ip4/172.18.79.248/tcp/58536/p2p/16Uiu2HAm5yWj7TmRoW3861SyjeswzQprEcNBCa7pKrWQhZQM6v9Z --store=false --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.36.239 waku f598ed842e499974ed2f36871ff87414d8c671d2c4451383cdfd0026ed649a2b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f598ed842e49. Setting up logs at ./log/docker/store_node1_2025-01-19_04-12-18__291b3620-d0d4-432a-b4a9-e88162a54124__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 30227
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30227/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30227/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.36.239/tcp/30228/p2p/16Uiu2HAkyS4ps4K3fmCAjwhjg7jGgv2qv1yk652Hvb3c44KXWQtS","/ip4/172.18.36.239/tcp/30229/ws/p2p/16Uiu2HAkyS4ps4K3fmCAjwhjg7jGgv2qv1yk652Hvb3c44KXWQtS"],"enrUri":"enr:-L24QFs8DdaGc7zZ2g17kQRQKLtXHvM6saF2t2gNGjtjFIn9PE4UJMdmii5AZs9rfQIluAV-BDlvyoPJ_HruGxywUiYCgmlkgnY0gmlwhKwSJO-KbXVsdGlhZGRyc5YACASsEiTvBnYUAAoErBIk7wZ2Fd0DgnJzhQADAQAAiXNlY3AyNTZrMaECO4iUbiebgBcjROPnmBDJHImhx2Wvz1jhlqYq61-hNsuDdGNwgnYUg3VkcIJ2FoV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30227/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.79.248/tcp/58536/p2p/16Uiu2HAm5yWj7TmRoW3861SyjeswzQprEcNBCa7pKrWQhZQM6v9Z"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58535/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58535/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58535/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a1f73034e940
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f598ed842e49
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a1f73034e940. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-19_04-12-18__291b3620-d0d4-432a-b4a9-e88162a54124__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-19_04-12-18__291b3620-d0d4-432a-b4a9-e88162a54124__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_relay_and_store__peer_neither_relay_nor_store with id: 2025-01-19_04-12-22__82cfb416-b475-4dc7-8ab4-032dd07bc07c
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-19_04-12-22__82cfb416-b475-4dc7-8ab4-032dd07bc07c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.212.236
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5672', '5673', '5674', '5675', '5676']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5672:5672 -p 5673:5673 -p 5674:5674 -p 5675:5675 -p 5676:5676 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5674 --rest-port=5672 --tcp-port=5673 --discv5-udp-port=5675 --rest-address=0.0.0.0 --nat=extip:172.18.212.236 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5e4d10f5fabdd61cf3faebbc6e5bdbcf9fa81b6dd45d5f57dcaff900a4b0813d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5676 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.212.236 waku c306692088889980780f0cbec8e364481bc982d3db700d6c839b80709c978b3c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c30669208888. Setting up logs at ./log/docker/publishing_node1_2025-01-19_04-12-22__82cfb416-b475-4dc7-8ab4-032dd07bc07c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 5672
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f598ed842e49. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5672/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5672/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.212.236/tcp/5673/p2p/16Uiu2HAmP2H382BL8twntyxUNywuQ798Wkm37473YRmzbVNiS4Uf","/ip4/172.18.212.236/tcp/5674/ws/p2p/16Uiu2HAmP2H382BL8twntyxUNywuQ798Wkm37473YRmzbVNiS4Uf"],"enrUri":"enr:-L24QCGXvHhUTRvUKrFINfDiblILbwMZvEFsuQkqwky7Oj_QGlVFCQQLmCYAfyqQV_DiRaJI-k33BfswK_4FNAwqpLUCgmlkgnY0gmlwhKwS1OyKbXVsdGlhZGRyc5YACASsEtTsBhYpAAoErBLU7AYWKt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDmgjvHLXlWYVJ57567zeCSM-c4H2NgQ4vh9Z8R1ucNkiDdGNwghYpg3VkcIIWK4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-19_04-12-22__82cfb416-b475-4dc7-8ab4-032dd07bc07c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.164.165
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['4235', '4236', '4237', '4238', '4239']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 4235:4235 -p 4236:4236 -p 4237:4237 -p 4238:4238 -p 4239:4239 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4237 --rest-port=4235 --tcp-port=4236 --discv5-udp-port=4238 --rest-address=0.0.0.0 --nat=extip:172.18.164.165 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6c162f7e9d7dd61cf96da7e5b904b10bfb10be7dd4b904f4cb959aafccb2adae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4239 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QCGXvHhUTRvUKrFINfDiblILbwMZvEFsuQkqwky7Oj_QGlVFCQQLmCYAfyqQV_DiRaJI-k33BfswK_4FNAwqpLUCgmlkgnY0gmlwhKwS1OyKbXVsdGlhZGRyc5YACASsEtTsBhYpAAoErBLU7AYWKt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDmgjvHLXlWYVJ57567zeCSM-c4H2NgQ4vh9Z8R1ucNkiDdGNwghYpg3VkcIIWK4V3YWt1MgM --storenode=/ip4/172.18.212.236/tcp/5673/p2p/16Uiu2HAmP2H382BL8twntyxUNywuQ798Wkm37473YRmzbVNiS4Uf --store=false --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.164.165 waku 3302332cbd5bc6849e634edb18e095b10e952f23993cb0b3dba199561e68bafa
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3302332cbd5b. Setting up logs at ./log/docker/store_node1_2025-01-19_04-12-22__82cfb416-b475-4dc7-8ab4-032dd07bc07c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 4235
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4235/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4235/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.164.165/tcp/4236/p2p/16Uiu2HAmEf1qEApDnrK3GVmLYfJtd6xNUxBQKgq8vJW7wyptsHxG","/ip4/172.18.164.165/tcp/4237/ws/p2p/16Uiu2HAmEf1qEApDnrK3GVmLYfJtd6xNUxBQKgq8vJW7wyptsHxG"],"enrUri":"enr:-L24QHz6pozAAOAyRPxyBrCdjLPJg103yGfIwJnh1Kkk_uNNOrS3Gz2T6WTWU3SBg6xttRlwpkQWnfmZILMpya0UatwCgmlkgnY0gmlwhKwSpKWKbXVsdGlhZGRyc5YACASsEqSlBhCMAAoErBKkpQYQjd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDHbkMmKnFFumhc4tRx6mX-DeryRipg1NwgZzFiZClViWDdGNwghCMg3VkcIIQjoV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4235/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.212.236/tcp/5673/p2p/16Uiu2HAmP2H382BL8twntyxUNywuQ798Wkm37473YRmzbVNiS4Uf"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5672/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5672/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5672/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c30669208888
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 3302332cbd5b
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c30669208888. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-19_04-12-22__82cfb416-b475-4dc7-8ab4-032dd07bc07c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-19_04-12-22__82cfb416-b475-4dc7-8ab4-032dd07bc07c__wakuorg_nwaku:latest.log