[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_with_meta with id: 2024-09-30_04-15-12__ede0de91-4c79-49c2-a656-a19efb2d8283
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-30_04-15-12__ede0de91-4c79-49c2-a656-a19efb2d8283__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.138.61
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['45863', '45864', '45865', '45866', '45867']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 45863:45863 -p 45864:45864 -p 45865:45865 -p 45866:45866 -p 45867:45867 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45865 --rest-port=45863 --tcp-port=45864 --discv5-udp-port=45866 --rest-address=0.0.0.0 --nat=extip:172.18.138.61 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f1ecf76ffcf54e4efbcc81f20ee4e84e0febe50ee7d1a046e7a2be3ae5ca9097 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45867 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.138.61 waku e831f02a1405bfadbf8964f4142fb61b787dd151c06ea3cac5518fefc873501c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e831f02a1405. Setting up logs at ./log/docker/node1_2024-09-30_04-15-12__ede0de91-4c79-49c2-a656-a19efb2d8283__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 45863
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45863/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45863/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.138.61/tcp/45864/p2p/16Uiu2HAm7ts9uoycEa97TrJey9fWh7KL1YHsNs8AkZ7SeRMfy2fx","/ip4/172.18.138.61/tcp/45865/ws/p2p/16Uiu2HAm7ts9uoycEa97TrJey9fWh7KL1YHsNs8AkZ7SeRMfy2fx"],"enrUri":"enr:-LO4QGxd6PhtfIK583uSv4sGeBp-vfoYOes6JRUblIALplc5YmysbuolcX2dbBKgoeSnBs8qmOUxZky7OCLhAP3uT0MBgmlkgnY0gmlwhKwSij2KbXVsdGlhZGRyc4wACgSsEoo9BrMp3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK5Q49YqRqTzUlpGrbQTl6dJ8aR4vZzkUVmaPE7NAOnF4N0Y3CCsyiDdWRwgrMqhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-30_04-15-12__ede0de91-4c79-49c2-a656-a19efb2d8283__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.194.176
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['62632', '62633', '62634', '62635', '62636']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 62632:62632 -p 62633:62633 -p 62634:62634 -p 62635:62635 -p 62636:62636 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62634 --rest-port=62632 --tcp-port=62633 --discv5-udp-port=62635 --rest-address=0.0.0.0 --nat=extip:172.18.194.176 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ab1b57fdefde4dca75c0cf0de8cc80eba8ed0bd4a8d0bd1397fb3ffdd2e00a7b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62636 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QGxd6PhtfIK583uSv4sGeBp-vfoYOes6JRUblIALplc5YmysbuolcX2dbBKgoeSnBs8qmOUxZky7OCLhAP3uT0MBgmlkgnY0gmlwhKwSij2KbXVsdGlhZGRyc4wACgSsEoo9BrMp3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK5Q49YqRqTzUlpGrbQTl6dJ8aR4vZzkUVmaPE7NAOnF4N0Y3CCsyiDdWRwgrMqhXdha3UyBQ --filternode=/ip4/172.18.138.61/tcp/45864/p2p/16Uiu2HAm7ts9uoycEa97TrJey9fWh7KL1YHsNs8AkZ7SeRMfy2fx
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.194.176 waku ea020337c1731101a510038c781682a0a6931071192cf9f7ca835d032b6ed397
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ea020337c173. Setting up logs at ./log/docker/node2_2024-09-30_04-15-12__ede0de91-4c79-49c2-a656-a19efb2d8283__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 62632
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62632/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62632/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.194.176/tcp/62633/p2p/16Uiu2HAmE6Sa4K1JUn6a97xW93ff97zaopugfAhi7XjpgVxakQhV","/ip4/172.18.194.176/tcp/62634/ws/p2p/16Uiu2HAmE6Sa4K1JUn6a97xW93ff97zaopugfAhi7XjpgVxakQhV"],"enrUri":"enr:-LO4QHt8FcOhDi124ZhxrQ3TDSER4X8D8jCBf7nrP_GKLALmYPKZ6L_icaglbT1vTYOlP0W-l8ssYjXgY0zErcS2clIBgmlkgnY0gmlwhKwSwrCKbXVsdGlhZGRyc4wACgSsEsKwBvSq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMVYNq3NTz5DkedRvLm85TSdYDOvduEPgrrvaAvlULEEIN0Y3CC9KmDdWRwgvSrhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62632/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.138.61/tcp/45864/p2p/16Uiu2HAm7ts9uoycEa97TrJey9fWh7KL1YHsNs8AkZ7SeRMfy2fx"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45863/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62632/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "05d7a678-5ce6-4f95-9313-491a900bbbf5", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"05d7a678-5ce6-4f95-9313-491a900bbbf5","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45863/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "meta": "RmlsdGVyIHdvcmtzISE="}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62632/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1727669715195277056,"meta":"RmlsdGVyIHdvcmtzISE=","ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e831f02a1405
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ea020337c173
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.