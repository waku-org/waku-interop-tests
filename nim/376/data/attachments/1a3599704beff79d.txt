[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_subscribe_and_publish_on_another_content_topic_from_another_shard with id: 2024-09-30_04-25-05__519ddc6b-5c2b-4fbe-a418-715ffb7d1bd7
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-30_04-25-05__519ddc6b-5c2b-4fbe-a418-715ffb7d1bd7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.95.56
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['14031', '14032', '14033', '14034', '14035']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 14031:14031 -p 14032:14032 -p 14033:14033 -p 14034:14034 -p 14035:14035 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14033 --rest-port=14031 --tcp-port=14032 --discv5-udp-port=14034 --rest-address=0.0.0.0 --nat=extip:172.18.95.56 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=52efcbda909ebbebacd4572dbbccaf5594b69a1debe7ab65afaf2befa84e541e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14035 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.95.56 waku 928df22fa49f57af3fb39ca6d15edae2476793867a5aa261624ef02a758219cb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 928df22fa49f. Setting up logs at ./log/docker/node1_2024-09-30_04-25-05__519ddc6b-5c2b-4fbe-a418-715ffb7d1bd7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 14031
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14031/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14031/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.95.56/tcp/14032/p2p/16Uiu2HAkzeH9aJPEHqPiu7CVfiwjpQdaHv3rYauKuRTFRSojRG9i","/ip4/172.18.95.56/tcp/14033/ws/p2p/16Uiu2HAkzeH9aJPEHqPiu7CVfiwjpQdaHv3rYauKuRTFRSojRG9i"],"enrUri":"enr:-LO4QPjZGn81gehl2v-6gLPfzgCkdSC-l_SP5-6bLWKDpfegZwerS1t1Xzq6YFVJVldEBx3gg3OrmtGj4S2nvMB5ZYEBgmlkgnY0gmlwhKwSXziKbXVsdGlhZGRyc4wACgSsEl84BjbR3QOCcnOFAAIBAACJc2VjcDI1NmsxoQJNhStufsXOJv3BgQbGdFcxu-ozxS9U8CRaqZRTWGsMdYN0Y3CCNtCDdWRwgjbShXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-30_04-25-05__519ddc6b-5c2b-4fbe-a418-715ffb7d1bd7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.122.53
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['49862', '49863', '49864', '49865', '49866']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 49862:49862 -p 49863:49863 -p 49864:49864 -p 49865:49865 -p 49866:49866 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49864 --rest-port=49862 --tcp-port=49863 --discv5-udp-port=49865 --rest-address=0.0.0.0 --nat=extip:172.18.122.53 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=d25b6409df1deeab4bd1ddacbac43a46a9f9cadbcddc3d16ba9e5cb9329d5bbc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49866 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QPjZGn81gehl2v-6gLPfzgCkdSC-l_SP5-6bLWKDpfegZwerS1t1Xzq6YFVJVldEBx3gg3OrmtGj4S2nvMB5ZYEBgmlkgnY0gmlwhKwSXziKbXVsdGlhZGRyc4wACgSsEl84BjbR3QOCcnOFAAIBAACJc2VjcDI1NmsxoQJNhStufsXOJv3BgQbGdFcxu-ozxS9U8CRaqZRTWGsMdYN0Y3CCNtCDdWRwgjbShXdha3UyBQ --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.122.53 waku 17e2c3609701971388b062bb45958cfbf49ba9fd14060ead134a511b9e00ef2d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 17e2c3609701. Setting up logs at ./log/docker/node2_2024-09-30_04-25-05__519ddc6b-5c2b-4fbe-a418-715ffb7d1bd7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 49862
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49862/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49862/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.122.53/tcp/49863/p2p/16Uiu2HAmN7jzpTBSCMYBrnoWipKeZYhuJSy1wvdGNLwkyi8KYqgu","/ip4/172.18.122.53/tcp/49864/ws/p2p/16Uiu2HAmN7jzpTBSCMYBrnoWipKeZYhuJSy1wvdGNLwkyi8KYqgu"],"enrUri":"enr:-LO4QKQsycVDtIhU3MiT08VE4qThF0UObIZTb1rGJrqEnk2JHLh2k0DYvMwWOvTkFE32D_1g5X0uiAPD8i3zMQ80g8MBgmlkgnY0gmlwhKwSejWKbXVsdGlhZGRyc4wACgSsEno1BsLI3QOCcnOFAAIBAACJc2VjcDI1NmsxoQOMk6Kf83xrYaQ9IF1ljI6mBQq8Ei3Kbso6mw4D7HPEYoN0Y3CCwseDdWRwgsLJhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49862/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.95.56/tcp/14032/p2p/16Uiu2HAkzeH9aJPEHqPiu7CVfiwjpQdaHv3rYauKuRTFRSojRG9i"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14031/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/toychat/2/huilong/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49862/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/toychat/2/huilong/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14031/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14031/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/toychat/2/huilong/proto","version":0,"timestamp":1727670309331004416,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49862/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/toychat/2/huilong/proto","version":0,"timestamp":1727670309331004416,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14031/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14031/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1727670309461502976,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49862/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1727670309461502976,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 928df22fa49f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 17e2c3609701
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.