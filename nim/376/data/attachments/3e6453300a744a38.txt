[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_subscribe_and_publish_on_another_content_topic_from_same_shard with id: 2024-09-30_04-25-22__ac7f50f9-25c3-4acb-9d7c-16d3467a1016
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-30_04-25-22__ac7f50f9-25c3-4acb-9d7c-16d3467a1016__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.18.1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['48603', '48604', '48605', '48606', '48607']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 48603:48603 -p 48604:48604 -p 48605:48605 -p 48606:48606 -p 48607:48607 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48605 --rest-port=48603 --tcp-port=48604 --discv5-udp-port=48606 --rest-address=0.0.0.0 --nat=extip:172.18.18.1 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=0acc2eecaeeed3aa22175f2edd8275faaacb996d02ec4a3ed4f5e6cc8bcceaec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48607 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.18.1 waku 73dad21e1d39588e24a0ef958db433d5a43ad9c592fbb936b6ea656656cf975a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 73dad21e1d39. Setting up logs at ./log/docker/node1_2024-09-30_04-25-22__ac7f50f9-25c3-4acb-9d7c-16d3467a1016__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 48603
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48603/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48603/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.18.1/tcp/48604/p2p/16Uiu2HAmBnHQNgqFJVXiTefc2TFHPhR3SFdmBm5wvHjU5CDEh6Qy","/ip4/172.18.18.1/tcp/48605/ws/p2p/16Uiu2HAmBnHQNgqFJVXiTefc2TFHPhR3SFdmBm5wvHjU5CDEh6Qy"],"enrUri":"enr:-LO4QKdXrbohP1qM-6PjNompu12P5eceRd_t9WT1pJC9F4ysOC1O1EMy89KdzIcprLNcI_VIzMYurNAkFh08OyKg-wsBgmlkgnY0gmlwhKwSEgGKbXVsdGlhZGRyc4wACgSsEhIBBr3d3QOCcnOFAAIBAACJc2VjcDI1NmsxoQLzAqksoYCJWuinklPIy0xflJHQCNsNtwJA0HjmMzFgcoN0Y3CCvdyDdWRwgr3ehXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-30_04-25-22__ac7f50f9-25c3-4acb-9d7c-16d3467a1016__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.205.232
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['53792', '53793', '53794', '53795', '53796']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 53792:53792 -p 53793:53793 -p 53794:53794 -p 53795:53795 -p 53796:53796 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53794 --rest-port=53792 --tcp-port=53793 --discv5-udp-port=53795 --rest-address=0.0.0.0 --nat=extip:172.18.205.232 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=9f6dacc786a4707e4beeac7f06fabab7c12616e1cce3548b3e20e40ab5beabd1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53796 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QKdXrbohP1qM-6PjNompu12P5eceRd_t9WT1pJC9F4ysOC1O1EMy89KdzIcprLNcI_VIzMYurNAkFh08OyKg-wsBgmlkgnY0gmlwhKwSEgGKbXVsdGlhZGRyc4wACgSsEhIBBr3d3QOCcnOFAAIBAACJc2VjcDI1NmsxoQLzAqksoYCJWuinklPIy0xflJHQCNsNtwJA0HjmMzFgcoN0Y3CCvdyDdWRwgr3ehXdha3UyBQ --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.205.232 waku 77e7876eb277d3bd11be9e161632150fdeb7746bf8648eec84ac2310752c03aa
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 77e7876eb277. Setting up logs at ./log/docker/node2_2024-09-30_04-25-22__ac7f50f9-25c3-4acb-9d7c-16d3467a1016__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 53792
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53792/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53792/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.205.232/tcp/53793/p2p/16Uiu2HAmNLpCB4FUG2azehw1APucVeaLq4b7eWwMPses4yYNV1tq","/ip4/172.18.205.232/tcp/53794/ws/p2p/16Uiu2HAmNLpCB4FUG2azehw1APucVeaLq4b7eWwMPses4yYNV1tq"],"enrUri":"enr:-LO4QDODb-oBqIeeiDbgHqUdIpDMnI6tcDX1M-QheyeIIWs3HJmxWfZWfKcgqUyuAMIkJOjoerPOSUc1nViedcvu_sABgmlkgnY0gmlwhKwSzeiKbXVsdGlhZGRyc4wACgSsEs3oBtIi3QOCcnOFAAIBAACJc2VjcDI1NmsxoQOP7O4RhxZqmsA9Oh4m5KDqx3Bhe5hoeSTh6tszhvjCToN0Y3CC0iGDdWRwgtIjhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53792/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.18.1/tcp/48604/p2p/16Uiu2HAmBnHQNgqFJVXiTefc2TFHPhR3SFdmBm5wvHjU5CDEh6Qy"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48603/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/newsService/1.0/weekly/protobuf"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53792/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/newsService/1.0/weekly/protobuf"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48603/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/newsService/1.0/weekly/protobuf", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48603/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/newsService/1.0/weekly/protobuf","version":0,"timestamp":1727670326147086848,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53792/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/newsService/1.0/weekly/protobuf","version":0,"timestamp":1727670326147086848,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48603/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48603/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1727670326271082752,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53792/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1727670326271082752,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 73dad21e1d39
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 77e7876eb277
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.