[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-09-30_04-14-26__3eed4dae-df46-405d-9f05-63374ef5d925
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-30_04-14-26__3eed4dae-df46-405d-9f05-63374ef5d925__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-30_04-14-26__3eed4dae-df46-405d-9f05-63374ef5d925__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-09-30_04-14-26__3eed4dae-df46-405d-9f05-63374ef5d925__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.116.108
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['16773', '16774', '16775', '16776', '16777']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 16773:16773 -p 16774:16774 -p 16775:16775 -p 16776:16776 -p 16777:16777 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16775 --rest-port=16773 --tcp-port=16774 --discv5-udp-port=16776 --rest-address=0.0.0.0 --nat=extip:172.18.116.108 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cd77df7ee175eadfe0eb2d78a19aecb376ccdc79bbf3bc5cbe7fd7fab95b0de6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16777 --metrics-logging=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.116.108 waku 8fc04215c085226cad1ba513212f620a3e46132eb188643ba8e96eff5b315463
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 8fc04215c085. Setting up logs at ./log/docker/node1_2024-09-30_04-14-26__3eed4dae-df46-405d-9f05-63374ef5d925__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 16773
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16773/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16773/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.116.108/tcp/16774/p2p/16Uiu2HAmFD36JfbrYQ3V66mXE4F4smB7D3yDbCxmxbzZS8hCBfsr","/ip4/172.18.116.108/tcp/16775/ws/p2p/16Uiu2HAmFD36JfbrYQ3V66mXE4F4smB7D3yDbCxmxbzZS8hCBfsr"],"enrUri":"enr:-LO4QM6j0Tm_As1T2pRX0f2FDkLDiHc1wTK4rkhtHQMelmEubqj4uCduj1E7eOVBGYwOVZ_MzQ44GXPijUgKrPxTL_EBgmlkgnY0gmlwhKwSdGyKbXVsdGlhZGRyc4wACgSsEnRsBkGH3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMl7Q9KqzkIK9lXPeuBmRZud19E5lr4v_4jEYk9fe3RXYN0Y3CCQYaDdWRwgkGIhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.91.199
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['21070', '21071', '21072', '21073', '21074']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 21070:21070 -p 21071:21071 -p 21072:21072 -p 21073:21073 -p 21074:21074 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21072 --rest-port=21070 --tcp-port=21071 --discv5-udp-port=21073 --rest-address=0.0.0.0 --nat=extip:172.18.91.199 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5a404289fbbaff59cc87f284d673b00ce64debf3ce2be9645dedafbb5c6bf2ea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21074 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-LO4QM6j0Tm_As1T2pRX0f2FDkLDiHc1wTK4rkhtHQMelmEubqj4uCduj1E7eOVBGYwOVZ_MzQ44GXPijUgKrPxTL_EBgmlkgnY0gmlwhKwSdGyKbXVsdGlhZGRyc4wACgSsEnRsBkGH3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMl7Q9KqzkIK9lXPeuBmRZud19E5lr4v_4jEYk9fe3RXYN0Y3CCQYaDdWRwgkGIhXdha3UyCQ --lightpushnode=/ip4/172.18.116.108/tcp/16774/p2p/16Uiu2HAmFD36JfbrYQ3V66mXE4F4smB7D3yDbCxmxbzZS8hCBfsr
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.91.199 waku 41f5c9f8f4f7845bd27301c99025b06e2d8eb16be08d4fe393b0207490089498
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 41f5c9f8f4f7. Setting up logs at ./log/docker/node2_2024-09-30_04-14-26__3eed4dae-df46-405d-9f05-63374ef5d925__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 21070
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21070/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21070/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.91.199/tcp/21071/p2p/16Uiu2HAmQapinj9oBx44mfg4XCYwec1bEbHph2oXQ99emmubuS7U","/ip4/172.18.91.199/tcp/21072/ws/p2p/16Uiu2HAmQapinj9oBx44mfg4XCYwec1bEbHph2oXQ99emmubuS7U"],"enrUri":"enr:-LO4QPgEcnHUAMEJ7_74VWMjf_sYnhg4kV-kMcNMfQoUbilAL8tkvmvig0Uzc9xriKpt8cPBVe-cVdOPbL_btBrOSxwBgmlkgnY0gmlwhKwSW8eKbXVsdGlhZGRyc4wACgSsElvHBlJQ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOxOwgvQGDFvZxbgbt3V1EcL0v5Dpftcbk_p_aMpaSIu4N0Y3CCUk-DdWRwglJRhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.29.230
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['45141', '45142', '45143', '45144', '45145']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 45141:45141 -p 45142:45142 -p 45143:45143 -p 45144:45144 -p 45145:45145 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45143 --rest-port=45141 --tcp-port=45142 --discv5-udp-port=45144 --rest-address=0.0.0.0 --nat=extip:172.18.29.230 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f2ffb4eb585a4faf28002cdb81c405fee930799ea2eec6171d11dfce761a7bcb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45145 --metrics-logging=true --relay=false --storenode=/ip4/172.18.91.199/tcp/21071/p2p/16Uiu2HAmQapinj9oBx44mfg4XCYwec1bEbHph2oXQ99emmubuS7U --discv5-bootstrap-node=enr:-LO4QPgEcnHUAMEJ7_74VWMjf_sYnhg4kV-kMcNMfQoUbilAL8tkvmvig0Uzc9xriKpt8cPBVe-cVdOPbL_btBrOSxwBgmlkgnY0gmlwhKwSW8eKbXVsdGlhZGRyc4wACgSsElvHBlJQ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOxOwgvQGDFvZxbgbt3V1EcL0v5Dpftcbk_p_aMpaSIu4N0Y3CCUk-DdWRwglJRhXdha3UyCw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.29.230 waku 39ea780834511642c9e9ad1ddbad0d338a0c7504d0075866a7156b4c5affadce
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 39ea78083451. Setting up logs at ./log/docker/node3_2024-09-30_04-14-26__3eed4dae-df46-405d-9f05-63374ef5d925__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 45141
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45141/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45141/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.29.230/tcp/45142/p2p/16Uiu2HAm5gYKmGYUxYxheCsUENcvgfF3ctL7A554i2TEJT3h9quJ","/ip4/172.18.29.230/tcp/45143/ws/p2p/16Uiu2HAm5gYKmGYUxYxheCsUENcvgfF3ctL7A554i2TEJT3h9quJ"],"enrUri":"enr:-LO4QGPNE7X2HhO2XRFwyY2jsf9Y4SDEG-LiYDhrl-cxpGUPEL99nAEw6yS20fXjZZ5LKcCVNDSe3MIJ2NxmErS0xhIBgmlkgnY0gmlwhKwSHeaKbXVsdGlhZGRyc4wACgSsEh3mBrBX3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKYY-zS-swap-BXmwfIodD3WjFlKzSo5-o_eajVXhXLmYN0Y3CCsFaDdWRwgrBYhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16773/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21070/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16773/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.91.199/tcp/21071/p2p/16Uiu2HAmQapinj9oBx44mfg4XCYwec1bEbHph2oXQ99emmubuS7U","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21070/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.116.108/tcp/16774/p2p/16Uiu2HAmFD36JfbrYQ3V66mXE4F4smB7D3yDbCxmxbzZS8hCBfsr","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16773/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1727669701637474816}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45141/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"ec181b0d997cd8080c94","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"3CI4VewtZgkJbB1B6MAR8vAo6UyxitqgsfAuFBQMvmw="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 8fc04215c085
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 41f5c9f8f4f7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 39ea78083451
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'unhandled': ['Error: unhandled exception: Asynchronous task [relayConnectivityLoop() at peer_manager.nim:960] finished with an exception "MetricsError"!']
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'stacktrace': ['FAT 2024-09-30 04:15:02.796+00:00 Shutting down after receiving SIGSEGV      topics="wakunode main" tid=1 file=wakunode2.nim:124 stacktrace="/app/vendor/nim-chronicles/chronicles.nim(170) _ZN9wakunode213handleSigsegvE5int32\\n"', '/app/vendor/nimbus-build-system/vendor/Nim/lib/system/excpt.nim(526) _ZN6system15writeStackTraceE', '/app/vendor/nimbus-build-system/vendor/Nim/lib/system/excpt.nim(330) _ZN6system18rawWriteStackTraceE3varI6stringE', '/app/vendor/nimbus-build-system/vendor/Nim/lib/system/stacktraces.nim(59) _ZN11stacktraces30auxWriteStackTraceWithOverrideE3varI6stringE', '/app/vendor/nimbus-build-system/vendor/Nim/lib/system/excpt.nim(345) _ZN6system18rawWriteStackTraceE3varI3seqIN6system15StackTraceEntryEEE', '/app/vendor/nimbus-build-system/vendor/Nim/lib/system/stacktraces.nim(62) _ZN11stacktraces30auxWriteStackTraceWithOverrideE3varI3seqIN6system15StackTraceEntryEEE', '/app/vendor/nimbus-build-system/vendor/Nim/lib/system/excpt.nim(345) _ZN6system18rawWriteStackTraceE3varI3seqIN6system15StackTraceEntryEEE', '/app/vendor/nimbus-build-system/vendor/Nim/lib/system/stacktraces.nim(62) _ZN11stacktraces30auxWriteStackTraceWithOverrideE3varI3seqIN6system15StackTraceEntryEEE', '/app/vendor/nimbus-build-system/vendor/Nim/lib/system/stacktraces.nim(62) _ZN11stacktraces30auxWriteStackTraceWithOverrideE3varI3seqIN6system15StackTraceEntryEEE', '/app/vendor/nimbus-build-system/vendor/Nim/lib/system/stacktraces.nim(62) _ZN11stacktraces30auxWriteStackTraceWithOverrideE3varI3seqIN6system15StackTraceEntryEEE', '/app/vendor/nimbus-build-system/vendor/Nim/lib/system/stacktraces.nim(62) _ZN11stacktraces30auxWriteStackTraceWithOverrideE3varI3seqIN6system15StackTraceEntryEEE', '/app/vendor/nimbus-build-system/vendor/Nim/lib/system/stacktraces.nim(62) _ZN11stacktraces30auxWriteStackTraceWithOverrideE3varI3seqIN6system15StackTraceEntryEEE']
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'SIGSEGV': ['FAT 2024-09-30 04:15:02.796+00:00 Shutting down after receiving SIGSEGV      topics="wakunode main" tid=1 file=wakunode2.nim:124 stacktrace="/app/vendor/nim-chronicles/chronicles.nim(170) _ZN9wakunode213handleSigsegvE5int32\\n"', '/app/apps/wakunode2/wakunode2.nim(127) _ZN9wakunode213handleSigsegvE5int32', 'Stack trace: /app/apps/wakunode2/wakunode2.nim(129) _ZN9wakunode213handleSigsegvE5int32', '/app/apps/wakunode2/wakunode2.nim(129) _ZN9wakunode213handleSigsegvE5int32', '/app/apps/wakunode2/wakunode2.nim(129) _ZN9wakunode213handleSigsegvE5int32', '/app/apps/wakunode2/wakunode2.nim(129) _ZN9wakunode213handleSigsegvE5int32']
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-09-30_04-15-07__16d6a6eb-fcba-4118-8597-aba8ef5ca4cc
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-30_04-15-07__16d6a6eb-fcba-4118-8597-aba8ef5ca4cc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-30_04-15-07__16d6a6eb-fcba-4118-8597-aba8ef5ca4cc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-09-30_04-15-07__16d6a6eb-fcba-4118-8597-aba8ef5ca4cc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.211.151
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['3661', '3662', '3663', '3664', '3665']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 3661:3661 -p 3662:3662 -p 3663:3663 -p 3664:3664 -p 3665:3665 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3663 --rest-port=3661 --tcp-port=3662 --discv5-udp-port=3664 --rest-address=0.0.0.0 --nat=extip:172.18.211.151 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2d3aeeab0c5add5ca5007dbca6fa8a0bd4cbabe2fd36c08bfba2dd6a3f559ecf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3665 --metrics-logging=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.211.151 waku b0e737cc30dac70d3ec7fd3d1674a7ae91b93370be4305d0bbe86050133acc9b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b0e737cc30da. Setting up logs at ./log/docker/node1_2024-09-30_04-15-07__16d6a6eb-fcba-4118-8597-aba8ef5ca4cc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 3661
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3661/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3661/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.211.151/tcp/3662/p2p/16Uiu2HAkx7txX3QeVcRGEf9uByhehUxZCYFNA6RM6weGMjXpJjrK","/ip4/172.18.211.151/tcp/3663/ws/p2p/16Uiu2HAkx7txX3QeVcRGEf9uByhehUxZCYFNA6RM6weGMjXpJjrK"],"enrUri":"enr:-LO4QL8hy_PvJGFOh4xB9b0JTslSwxpvQTKy2oNfBeB-3YUDJzRKR65ASiQ6ikQw3BCvAedT6E6D8eJua0qWy3c75VIBgmlkgnY0gmlwhKwS05eKbXVsdGlhZGRyc4wACgSsEtOXBg5P3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIoBUfPm22yULwx0YvKDhqrab-42ipCzGIsB8pUJRjn7IN0Y3CCDk6DdWRwgg5QhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.136.129
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['55768', '55769', '55770', '55771', '55772']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 55768:55768 -p 55769:55769 -p 55770:55770 -p 55771:55771 -p 55772:55772 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55770 --rest-port=55768 --tcp-port=55769 --discv5-udp-port=55771 --rest-address=0.0.0.0 --nat=extip:172.18.136.129 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cad9aeccfda0e1b92dce5a7c38005e1d9bdebffb6c08ddbf44b6e5fbeaf5c1f9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55772 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-LO4QL8hy_PvJGFOh4xB9b0JTslSwxpvQTKy2oNfBeB-3YUDJzRKR65ASiQ6ikQw3BCvAedT6E6D8eJua0qWy3c75VIBgmlkgnY0gmlwhKwS05eKbXVsdGlhZGRyc4wACgSsEtOXBg5P3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIoBUfPm22yULwx0YvKDhqrab-42ipCzGIsB8pUJRjn7IN0Y3CCDk6DdWRwgg5QhXdha3UyCQ --lightpushnode=/ip4/172.18.211.151/tcp/3662/p2p/16Uiu2HAkx7txX3QeVcRGEf9uByhehUxZCYFNA6RM6weGMjXpJjrK
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.136.129 waku d748678bcf963b29d70b5361b26bab9abf9e66e6294914b2f474af5badb805de
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d748678bcf96. Setting up logs at ./log/docker/node2_2024-09-30_04-15-07__16d6a6eb-fcba-4118-8597-aba8ef5ca4cc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 55768
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55768/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55768/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.129/tcp/55769/p2p/16Uiu2HAkwgKSU7ctvbKGUEA8dNxavBQye4fKzWN5q4VW8R5LvPGN","/ip4/172.18.136.129/tcp/55770/ws/p2p/16Uiu2HAkwgKSU7ctvbKGUEA8dNxavBQye4fKzWN5q4VW8R5LvPGN"],"enrUri":"enr:-LO4QJkxeyqm5-2_U-u046dbSlIgVSy_muupnsQrwJOQijSeQ8PfuO8C_K5CeAHXtugu3u0jPxcJbf9Hf57D67tFtMgBgmlkgnY0gmlwhKwSiIGKbXVsdGlhZGRyc4wACgSsEoiBBtna3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIhd9x552sLU75yVBkfOVHKv4wP5BWwE2944gtc1dT-C4N0Y3CC2dmDdWRwgtnbhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.2.48
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['8582', '8583', '8584', '8585', '8586']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 8582:8582 -p 8583:8583 -p 8584:8584 -p 8585:8585 -p 8586:8586 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8584 --rest-port=8582 --tcp-port=8583 --discv5-udp-port=8585 --rest-address=0.0.0.0 --nat=extip:172.18.2.48 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3d88f8b32ffaa55ad3b2db7dfe43f6a9d06b24833e157dd2edd4ecc0a07df6ab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8586 --metrics-logging=true --relay=false --storenode=/ip4/172.18.136.129/tcp/55769/p2p/16Uiu2HAkwgKSU7ctvbKGUEA8dNxavBQye4fKzWN5q4VW8R5LvPGN --discv5-bootstrap-node=enr:-LO4QJkxeyqm5-2_U-u046dbSlIgVSy_muupnsQrwJOQijSeQ8PfuO8C_K5CeAHXtugu3u0jPxcJbf9Hf57D67tFtMgBgmlkgnY0gmlwhKwSiIGKbXVsdGlhZGRyc4wACgSsEoiBBtna3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIhd9x552sLU75yVBkfOVHKv4wP5BWwE2944gtc1dT-C4N0Y3CC2dmDdWRwgtnbhXdha3UyCw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.2.48 waku 67a50546ca2aae21197c427ccde6e4eaa57d996b6ad0337a7ae3369a8bacc6f0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 67a50546ca2a. Setting up logs at ./log/docker/node3_2024-09-30_04-15-07__16d6a6eb-fcba-4118-8597-aba8ef5ca4cc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 8582
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8582/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8582/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.2.48/tcp/8583/p2p/16Uiu2HAkwdyswnzTz6r2umsWw2ZmE4nVqL6Xz2EKXjw4UQF9iX93","/ip4/172.18.2.48/tcp/8584/ws/p2p/16Uiu2HAkwdyswnzTz6r2umsWw2ZmE4nVqL6Xz2EKXjw4UQF9iX93"],"enrUri":"enr:-LO4QLlzdqehxcvdCcVZ0Q-bYdB_hgy9GbU6jGqFbaJcr33yWw3fFc7bgcOdXMfU5BZ32uF8SJARKl2hTax0ehalNsoBgmlkgnY0gmlwhKwSAjCKbXVsdGlhZGRyc4wACgSsEgIwBiGI3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIg3pUMZrw95zLYyX9mFCLihs4xjrgLulmdv7-r_ceV8oN0Y3CCIYeDdWRwgiGJhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3661/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55768/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3661/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.136.129/tcp/55769/p2p/16Uiu2HAkwgKSU7ctvbKGUEA8dNxavBQye4fKzWN5q4VW8R5LvPGN","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":false},{"protocol":"/vac/waku/store-query/3.0.0","connected":false},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":false},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":false},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":false}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55768/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.211.151/tcp/3662/p2p/16Uiu2HAkx7txX3QeVcRGEf9uByhehUxZCYFNA6RM6weGMjXpJjrK","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3661/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1727669742700059648}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8582/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"d36c79d0a8db971899e8","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"gq8Rbbx6oZY70j4kbrduFgE/eeuFIZZA57zpdQrD9uM="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b0e737cc30da
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d748678bcf96
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 67a50546ca2a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.