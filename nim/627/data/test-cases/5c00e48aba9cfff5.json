{"uid":"5c00e48aba9cfff5","name":"test_metrics_after_relay_publish","fullName":"tests.metrics.test_metrics.TestMetrics#test_metrics_after_relay_publish","historyId":"3cfc90d3bb649759bb636ccc254f23e5","time":{"start":1737777803198,"stop":1737777808760,"duration":5562},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1737777751443,"stop":1737777751443,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1737777800473,"stop":1737777800474,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1737777800474,"stop":1737777800474,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors","time":{"start":1737777800474,"stop":1737777800474,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"filter_setup","time":{"start":1737777800474,"stop":1737777800475,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1737777800474,"stop":1737777800474,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1737777800474,"stop":1737777800474,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1737777800474,"stop":1737777800474,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"relay_setup","time":{"start":1737777800475,"stop":1737777800475,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_relay_nodes","time":{"start":1737777800475,"stop":1737777803073,"duration":2598},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1737777803070,"stop":1737777803073,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.metrics.test_metrics.TestMetrics object at 0x7fcd228e9c70>, <src.node.waku_node.WakuNode object at 0x7fcd224906e0>, ['/ip4/172.18.21.252/tcp/13071/p2p/16Uiu2HAkvxBSZQtFD9psmP9uZoAKqDtCqhks4i9WZJcXQn1PNBKn'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"light_push_setup","time":{"start":1737777800475,"stop":1737777800475,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"store_setup","time":{"start":1737777800475,"stop":1737777800475,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"subscribe_main_relay_nodes","time":{"start":1737777803073,"stop":1737777803085,"duration":12},"status":"passed","steps":[{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1737777803073,"stop":1737777803085,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7fcd223a2cc0>, <src.node.waku_node.WakuNode object at 0x7fcd224906e0>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"relay_warm_up","time":{"start":1737777803085,"stop":1737777803197,"duration":112},"status":"passed","steps":[{"name":"wait_for_published_message_to_reach_relay_peer","time":{"start":1737777803085,"stop":1737777803197,"duration":112},"status":"passed","steps":[{"name":"check_published_message_reaches_relay_peer","time":{"start":1737777803085,"stop":1737777803197,"duration":112},"status":"passed","steps":[{"name":"assert_received_message","time":{"start":1737777803194,"stop":1737777803194,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1737777803085318656}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1737777803197,"stop":1737777803197,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1737777803085318656}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1737777803085318656}"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"timeout_duration","value":"120"},{"name":"time_between_retries","value":"1"},{"name":"pubsub_topic","value":"None"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"status":"passed","steps":[{"name":"create_message","time":{"start":1737777803198,"stop":1737777803198,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_metric","time":{"start":1737777808707,"stop":1737777808711,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7fcd223a2cc0>"},{"name":"metric_name","value":"'libp2p_peers'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1737777808711,"stop":1737777808714,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7fcd223a2cc0>"},{"name":"metric_name","value":"'libp2p_pubsub_peers'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1737777808714,"stop":1737777808717,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7fcd223a2cc0>"},{"name":"metric_name","value":"'libp2p_pubsub_topics'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1737777808717,"stop":1737777808720,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7fcd223a2cc0>"},{"name":"metric_name","value":"'libp2p_pubsub_subscriptions_total'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1737777808721,"stop":1737777808724,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7fcd223a2cc0>"},{"name":"metric_name","value":"'libp2p_gossipsub_peers_per_topic_mesh{topic=\"other\"}'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1737777808724,"stop":1737777808727,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7fcd223a2cc0>"},{"name":"metric_name","value":"'waku_peer_store_size'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1737777808727,"stop":1737777808730,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7fcd223a2cc0>"},{"name":"metric_name","value":"'waku_histogram_message_size_count'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1737777808731,"stop":1737777808734,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7fcd223a2cc0>"},{"name":"metric_name","value":"'waku_node_messages_total{type=\"relay\"}'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1737777808734,"stop":1737777808737,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7fcd224906e0>"},{"name":"metric_name","value":"'libp2p_peers'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1737777808737,"stop":1737777808740,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7fcd224906e0>"},{"name":"metric_name","value":"'libp2p_pubsub_peers'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1737777808740,"stop":1737777808743,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7fcd224906e0>"},{"name":"metric_name","value":"'libp2p_pubsub_topics'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1737777808743,"stop":1737777808746,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7fcd224906e0>"},{"name":"metric_name","value":"'libp2p_pubsub_subscriptions_total'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1737777808747,"stop":1737777808750,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7fcd224906e0>"},{"name":"metric_name","value":"'libp2p_gossipsub_peers_per_topic_mesh{topic=\"other\"}'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1737777808750,"stop":1737777808753,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7fcd224906e0>"},{"name":"metric_name","value":"'waku_peer_store_size'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1737777808753,"stop":1737777808756,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7fcd224906e0>"},{"name":"metric_name","value":"'waku_histogram_message_size_count'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1737777808756,"stop":1737777808759,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7fcd224906e0>"},{"name":"metric_name","value":"'waku_node_messages_total{type=\"relay\"}'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"6b54bd8b4b0701e9","name":"log","source":"6b54bd8b4b0701e9.txt","type":"text/plain","size":16667}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":17,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"close_open_nodes::0","time":{"start":1737777808762,"stop":1737777811041,"duration":2279},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup::0","time":{"start":1737777808762,"stop":1737777808762,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors::0","time":{"start":1737777811042,"stop":1737777811054,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1737777811054,"stop":1737777811054,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1737777890199,"stop":1737777890199,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')"},{"name":"parentSuite","value":"tests.metrics"},{"name":"suite","value":"test_metrics"},{"name":"subSuite","value":"TestMetrics"},{"name":"host","value":"fv-az1055-299"},{"name":"thread","value":"1918-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.metrics.test_metrics"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":0,"passed":44,"unknown":0,"total":44},"items":[{"uid":"5a95d79932fa102b","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/626//#testresult/5a95d79932fa102b","status":"passed","time":{"start":1737691389555,"stop":1737691395118,"duration":5563}},{"uid":"addcb4ab52b28fc0","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/625//#testresult/addcb4ab52b28fc0","status":"passed","time":{"start":1737604999659,"stop":1737605005212,"duration":5553}},{"uid":"a61dfd51b3fbd88a","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/624//#testresult/a61dfd51b3fbd88a","status":"passed","time":{"start":1737518597333,"stop":1737518602885,"duration":5552}},{"uid":"527509cc5079bd64","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/623//#testresult/527509cc5079bd64","status":"passed","time":{"start":1737432189038,"stop":1737432194591,"duration":5553}},{"uid":"69c05b665acb8cbb","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/622//#testresult/69c05b665acb8cbb","status":"passed","time":{"start":1737345795464,"stop":1737345801017,"duration":5553}},{"uid":"a02b47bc88940a80","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/621//#testresult/a02b47bc88940a80","status":"passed","time":{"start":1737259433447,"stop":1737259439000,"duration":5553}},{"uid":"c0ad894f9420b2a2","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/620//#testresult/c0ad894f9420b2a2","status":"passed","time":{"start":1737173035045,"stop":1737173040597,"duration":5552}},{"uid":"deef59fef5b0673e","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/619//#testresult/deef59fef5b0673e","status":"passed","time":{"start":1737086592057,"stop":1737086597612,"duration":5555}},{"uid":"5e51ae38cec90c","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/618//#testresult/5e51ae38cec90c","status":"passed","time":{"start":1737000193688,"stop":1737000199240,"duration":5552}},{"uid":"efc30d8c6d101664","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/617//#testresult/efc30d8c6d101664","status":"passed","time":{"start":1736913783065,"stop":1736913788619,"duration":5554}},{"uid":"6ecc4176d35c29a4","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/616//#testresult/6ecc4176d35c29a4","status":"passed","time":{"start":1736827403409,"stop":1736827408961,"duration":5552}},{"uid":"2124eac625c57ce","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/615//#testresult/2124eac625c57ce","status":"passed","time":{"start":1736741000359,"stop":1736741005916,"duration":5557}},{"uid":"e420b1c5160f878f","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/614//#testresult/e420b1c5160f878f","status":"passed","time":{"start":1736654592853,"stop":1736654598406,"duration":5553}},{"uid":"7da8f28fd5506fdf","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/613//#testresult/7da8f28fd5506fdf","status":"passed","time":{"start":1736568190936,"stop":1736568196489,"duration":5553}},{"uid":"93709dc4ec577dae","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/612//#testresult/93709dc4ec577dae","status":"passed","time":{"start":1736481792059,"stop":1736481797613,"duration":5554}},{"uid":"931311b64ddb6a28","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/611//#testresult/931311b64ddb6a28","status":"passed","time":{"start":1736395392489,"stop":1736395398041,"duration":5552}},{"uid":"768fee1cbeb09f96","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/610//#testresult/768fee1cbeb09f96","status":"passed","time":{"start":1736308993398,"stop":1736308998953,"duration":5555}},{"uid":"77ac7ec707e7e47e","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/609//#testresult/77ac7ec707e7e47e","status":"passed","time":{"start":1736222601409,"stop":1736222606963,"duration":5554}},{"uid":"8fd47369e52eb9d5","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/608//#testresult/8fd47369e52eb9d5","status":"passed","time":{"start":1736170397709,"stop":1736170403267,"duration":5558}},{"uid":"7b8af892ee4c0c26","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/607//#testresult/7b8af892ee4c0c26","status":"passed","time":{"start":1736136808011,"stop":1736136813564,"duration":5553}}]},"tags":["@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')"]},"source":"5c00e48aba9cfff5.json","parameterValues":[]}