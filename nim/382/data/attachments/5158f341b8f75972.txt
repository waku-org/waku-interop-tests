[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2024-10-05_04-13-39__4cf04989-cba0-49a9-8157-a5ac48b484dd
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-05_04-13-39__4cf04989-cba0-49a9-8157-a5ac48b484dd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-05_04-13-39__4cf04989-cba0-49a9-8157-a5ac48b484dd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-10-05_04-13-39__4cf04989-cba0-49a9-8157-a5ac48b484dd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.201.112
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['30588', '30589', '30590', '30591', '30592']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 30588:30588 -p 30589:30589 -p 30590:30590 -p 30591:30591 -p 30592:30592 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30590 --rest-port=30588 --tcp-port=30589 --discv5-udp-port=30591 --rest-address=0.0.0.0 --nat=extip:172.18.201.112 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c95d8e050f14f6a1a57bf5b9dfa29f4cbd1ed20b48acc8c8cb59824defdc5fcb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30592 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.201.112 waku 8a3bf627eb561650cba14825e710451cb9700811bd826e3d3118a7b0159968b1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 8a3bf627eb56. Setting up logs at ./log/docker/node1_2024-10-05_04-13-39__4cf04989-cba0-49a9-8157-a5ac48b484dd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 30588
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30588/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30588/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.201.112/tcp/30589/p2p/16Uiu2HAm7LKfQttppxeGNqTDMgshtaNmmGstirvXygQbJNGDEgWY","/ip4/172.18.201.112/tcp/30590/ws/p2p/16Uiu2HAm7LKfQttppxeGNqTDMgshtaNmmGstirvXygQbJNGDEgWY"],"enrUri":"enr:-LO4QCRtJarlQh0bQ6j_sFQSqAsnSqj2pve9L5quFxXX2eFISv5yRr4zHrWtMQ6d66EJNjHMxLncFZhRkztTIKL3CYUBgmlkgnY0gmlwhKwSyXCKbXVsdGlhZGRyc4wACgSsEslwBnd-3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKw7V3d_jdmxnljkP2mz_VVLYU0CK_yfcRpvv2MP0pGFYN0Y3CCd32DdWRwgnd_hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.168.222
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['8940', '8941', '8942', '8943', '8944']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 8940:8940 -p 8941:8941 -p 8942:8942 -p 8943:8943 -p 8944:8944 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8942 --rest-port=8940 --tcp-port=8941 --discv5-udp-port=8943 --rest-address=0.0.0.0 --nat=extip:172.18.168.222 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=adad9fef3abcedea3b2ffa7445f4bd04a65951f803cdf7740ad321dc4fb912db --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8944 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-LO4QCRtJarlQh0bQ6j_sFQSqAsnSqj2pve9L5quFxXX2eFISv5yRr4zHrWtMQ6d66EJNjHMxLncFZhRkztTIKL3CYUBgmlkgnY0gmlwhKwSyXCKbXVsdGlhZGRyc4wACgSsEslwBnd-3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKw7V3d_jdmxnljkP2mz_VVLYU0CK_yfcRpvv2MP0pGFYN0Y3CCd32DdWRwgnd_hXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.168.222 waku ce5a5615e698f7e12b49b0f4d4c50aba68d0f1d7523d8dd3d2bf5fa9aa8deba7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ce5a5615e698. Setting up logs at ./log/docker/node2_2024-10-05_04-13-39__4cf04989-cba0-49a9-8157-a5ac48b484dd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 8940
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8940/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8940/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.168.222/tcp/8941/p2p/16Uiu2HAmGwhEBL5iqTssidHuPZiU6wzRBMC8rbNq8fiVRGtb23R4","/ip4/172.18.168.222/tcp/8942/ws/p2p/16Uiu2HAmGwhEBL5iqTssidHuPZiU6wzRBMC8rbNq8fiVRGtb23R4"],"enrUri":"enr:-LO4QADMiECQApR9m5wsGrFiDffQseAVugSsDOv7CeIT2-BtW7_gYw-mbh2eJdSj9ChwziGo63OTAaHzsBchFUvZTjgBgmlkgnY0gmlwhKwSqN6KbXVsdGlhZGRyc4wACgSsEqjeBiLu3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM_tkLIbQ55kapEWjgHdj1uTb3kYo17uFsHsf7nrSC0o4N0Y3CCIu2DdWRwgiLvhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.119.59
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['12776', '12777', '12778', '12779', '12780']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 12776:12776 -p 12777:12777 -p 12778:12778 -p 12779:12779 -p 12780:12780 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12778 --rest-port=12776 --tcp-port=12777 --discv5-udp-port=12779 --rest-address=0.0.0.0 --nat=extip:172.18.119.59 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=311bec317f7aa2db61e1e80aedbfc9fabeda5a9de1fba38d4d08f4dad3d997d8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12780 --metrics-logging=true --relay=false --storenode=/ip4/172.18.168.222/tcp/8941/p2p/16Uiu2HAmGwhEBL5iqTssidHuPZiU6wzRBMC8rbNq8fiVRGtb23R4 --discv5-bootstrap-node=enr:-LO4QADMiECQApR9m5wsGrFiDffQseAVugSsDOv7CeIT2-BtW7_gYw-mbh2eJdSj9ChwziGo63OTAaHzsBchFUvZTjgBgmlkgnY0gmlwhKwSqN6KbXVsdGlhZGRyc4wACgSsEqjeBiLu3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM_tkLIbQ55kapEWjgHdj1uTb3kYo17uFsHsf7nrSC0o4N0Y3CCIu2DdWRwgiLvhXdha3UyAw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.119.59 waku 6dc07df0fc1e9df2d41c9d12a243e7e0583de07966580cff9485f3720794a807
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 6dc07df0fc1e. Setting up logs at ./log/docker/node3_2024-10-05_04-13-39__4cf04989-cba0-49a9-8157-a5ac48b484dd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 12776
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12776/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12776/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.119.59/tcp/12777/p2p/16Uiu2HAmVPQuwSKCufv3AfeojxvMv5oVRDK3wuMSPGCNyYXQ64Z2","/ip4/172.18.119.59/tcp/12778/ws/p2p/16Uiu2HAmVPQuwSKCufv3AfeojxvMv5oVRDK3wuMSPGCNyYXQ64Z2"],"enrUri":"enr:-LO4QHzSNi9har1XAz-DV3A67f6xt46YYCGgjndXNZVEF8twcZa0CVK9OMbgUd4EMffZ2s7g6IPMKKICBNXYjsI7J8QBgmlkgnY0gmlwhKwSdzuKbXVsdGlhZGRyc4wACgSsEnc7BjHq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQP4mSh-_T1NbkF2w4udgBjmv06ObuqqI0wJWuczElJjZYN0Y3CCMemDdWRwgjHrhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30588/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8940/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30588/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30588/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.168.222/tcp/8941/p2p/16Uiu2HAmGwhEBL5iqTssidHuPZiU6wzRBMC8rbNq8fiVRGtb23R4","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8940/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.201.112/tcp/30589/p2p/16Uiu2HAm7LKfQttppxeGNqTDMgshtaNmmGstirvXygQbJNGDEgWY","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30588/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12776/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"8acd252d50554c9741f2","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"vxkpvwfAe83ZUX91kGvFQ288/hx16sQb4nSVeC/Y8iI="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 8a3bf627eb56
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ce5a5615e698
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 6dc07df0fc1e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.