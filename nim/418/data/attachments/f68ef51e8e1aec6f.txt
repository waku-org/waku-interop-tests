[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_content_topic[/app/22/sometopic/someencoding] with id: 2024-11-03_04-18-49__58feba28-e2bd-4cb6-9d45-e2072b5f58ff
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-03_04-18-49__58feba28-e2bd-4cb6-9d45-e2072b5f58ff__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.136.230
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['26048', '26049', '26050', '26051', '26052']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 26048:26048 -p 26049:26049 -p 26050:26050 -p 26051:26051 -p 26052:26052 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26050 --rest-port=26048 --tcp-port=26049 --discv5-udp-port=26051 --rest-address=0.0.0.0 --nat=extip:172.18.136.230 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=b8f0a2bbcdffde0dca1d8ddac34d1b96aec97eafcd9bdb020f1ff0104ac1a417 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26052 --metrics-logging=true --relay=true --filter=true --content-topic=/app/22/sometopic/someencoding
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e19e8dfec24c. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.136.230 waku ce57442ec35c5ae3d14798ee0c2bf488f4200b8262c48302a56767321682b2e2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ce57442ec35c. Setting up logs at ./log/docker/node1_2024-11-03_04-18-49__58feba28-e2bd-4cb6-9d45-e2072b5f58ff__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 26048
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26048/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26048/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.230/tcp/26049/p2p/16Uiu2HAmQwejJdJJvLtHgAMrXpJdYjPvs4G55m8AAQy7zkF6vxAm","/ip4/172.18.136.230/tcp/26050/ws/p2p/16Uiu2HAmQwejJdJJvLtHgAMrXpJdYjPvs4G55m8AAQy7zkF6vxAm"],"enrUri":"enr:-L24QIZa11Qd5tCM_z8Sdgm3toTG2O2O10YbrZRxpm6Q4yJdKnzLwJuZAHXKCjCyEIqz0SB39OOGgz3KrvgpGzHL0zMCgmlkgnY0gmlwhKwSiOaKbXVsdGlhZGRyc5YACASsEojmBmXBAAoErBKI5gZlwt0DgnJzhQACAQAAiXNlY3AyNTZrMaEDtpDulezEpD9GX8a34LsczcChARMiCQpnk93vaWrD3IqDdGNwgmXBg3VkcIJlw4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-03_04-18-49__58feba28-e2bd-4cb6-9d45-e2072b5f58ff__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.233.32
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10292', '10293', '10294', '10295', '10296']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10292:10292 -p 10293:10293 -p 10294:10294 -p 10295:10295 -p 10296:10296 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10294 --rest-port=10292 --tcp-port=10293 --discv5-udp-port=10295 --rest-address=0.0.0.0 --nat=extip:172.18.233.32 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=f0038c7bddf5c0a91caffd8f9d24f289f7afcb45f0bac288c4f0c8fd7b1a045a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10296 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QIZa11Qd5tCM_z8Sdgm3toTG2O2O10YbrZRxpm6Q4yJdKnzLwJuZAHXKCjCyEIqz0SB39OOGgz3KrvgpGzHL0zMCgmlkgnY0gmlwhKwSiOaKbXVsdGlhZGRyc5YACASsEojmBmXBAAoErBKI5gZlwt0DgnJzhQACAQAAiXNlY3AyNTZrMaEDtpDulezEpD9GX8a34LsczcChARMiCQpnk93vaWrD3IqDdGNwgmXBg3VkcIJlw4V3YWt1MgU --content-topic=/app/22/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.233.32 waku 5753504c96e40f29c654ed7681db9f7cd4de23e21566a143dae762c5d9b7446b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5753504c96e4. Setting up logs at ./log/docker/node2_2024-11-03_04-18-49__58feba28-e2bd-4cb6-9d45-e2072b5f58ff__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 10292
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10292/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10292/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.233.32/tcp/10293/p2p/16Uiu2HAmHF7Duq6tYmVgm7miKuFx84a9BhRM9jHqPV7r8gB6W6ZZ","/ip4/172.18.233.32/tcp/10294/ws/p2p/16Uiu2HAmHF7Duq6tYmVgm7miKuFx84a9BhRM9jHqPV7r8gB6W6ZZ"],"enrUri":"enr:-L24QCeR3ZEK0SnaJIdt30uaddOshnK24OQSUBJtrEvQuAlvbqxgKV2g1qBO0K8XFu5QhY1Pf8Bf4ZbYM8irI6V71Y8CgmlkgnY0gmlwhKwS6SCKbXVsdGlhZGRyc5YACASsEukgBig1AAoErBLpIAYoNt0DgnJzhQACAQAAiXNlY3AyNTZrMaEDRCxELFs0vIkQF7ew_17f7gZgeI6pCodewbD6cvPRI2yDdGNwgig1g3VkcIIoN4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10292/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.136.230/tcp/26049/p2p/16Uiu2HAmQwejJdJJvLtHgAMrXpJdYjPvs4G55m8AAQy7zkF6vxAm"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26048/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/22/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10292/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/22/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26048/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26048/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/22/sometopic/someencoding","version":0,"timestamp":1730607533112842240,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10292/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/22/sometopic/someencoding","version":0,"timestamp":1730607533112842240,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ce57442ec35c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5753504c96e4
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ce57442ec35c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.