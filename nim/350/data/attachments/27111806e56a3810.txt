[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_no_content_topic with id: 2024-09-08_04-17-35__323e11d7-a133-44ae-acaa-500f17e51e6d
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-08_04-17-35__323e11d7-a133-44ae-acaa-500f17e51e6d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.86.10
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['53456', '53457', '53458', '53459', '53460']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 53456:53456 -p 53457:53457 -p 53458:53458 -p 53459:53459 -p 53460:53460 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53458 --rest-port=53456 --tcp-port=53457 --discv5-udp-port=53459 --rest-address=0.0.0.0 --nat=extip:172.18.86.10 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=08c2eb8a8cfb4a6eaab51eaf8fbec73339dddea472937213ee3cededfebacfef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53460 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.86.10 waku 390ab8c7f5f9152b2c84000b9065346897e0fb81a41a23f5ce0ec9d4148bac6b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 390ab8c7f5f9. Setting up logs at ./log/docker/node1_2024-09-08_04-17-35__323e11d7-a133-44ae-acaa-500f17e51e6d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 53456
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53456/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53456/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.86.10/tcp/53457/p2p/16Uiu2HAkv7LgE8pt6EFeTGH6Qg4oubYanr6mer1kWzr1sWTCQbc2","/ip4/172.18.86.10/tcp/53458/ws/p2p/16Uiu2HAkv7LgE8pt6EFeTGH6Qg4oubYanr6mer1kWzr1sWTCQbc2"],"enrUri":"enr:-LO4QA4jymbgvAgpYy0L-OBI_l6Egg81UhZYpa7x3j8ld4QmV8MHpXqYE2xHnuHlVBEUZ-wrEFrDBV5c3teOcMVu1W4BgmlkgnY0gmlwhKwSVgqKbXVsdGlhZGRyc4wACgSsElYKBtDS3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIKKWgTLiwcM42tnBrHqZkcnSSXafNk2XlR6JArC8eaf4N0Y3CC0NGDdWRwgtDThXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-08_04-17-35__323e11d7-a133-44ae-acaa-500f17e51e6d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.248.160
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['21356', '21357', '21358', '21359', '21360']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 21356:21356 -p 21357:21357 -p 21358:21358 -p 21359:21359 -p 21360:21360 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21358 --rest-port=21356 --tcp-port=21357 --discv5-udp-port=21359 --rest-address=0.0.0.0 --nat=extip:172.18.248.160 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b9a47afdbc0fe19b828f0cb977a3e2ba599fad2c2ae604ceffdea2cf9a8e1fb2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21360 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QA4jymbgvAgpYy0L-OBI_l6Egg81UhZYpa7x3j8ld4QmV8MHpXqYE2xHnuHlVBEUZ-wrEFrDBV5c3teOcMVu1W4BgmlkgnY0gmlwhKwSVgqKbXVsdGlhZGRyc4wACgSsElYKBtDS3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIKKWgTLiwcM42tnBrHqZkcnSSXafNk2XlR6JArC8eaf4N0Y3CC0NGDdWRwgtDThXdha3UyBQ --filternode=/ip4/172.18.86.10/tcp/53457/p2p/16Uiu2HAkv7LgE8pt6EFeTGH6Qg4oubYanr6mer1kWzr1sWTCQbc2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.248.160 waku 351d597551ecba7f40e2e71a21f9bcc1609a4dc5a1e513571b72c18fc5472c4b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 351d597551ec. Setting up logs at ./log/docker/node2_2024-09-08_04-17-35__323e11d7-a133-44ae-acaa-500f17e51e6d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 21356
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21356/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21356/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.248.160/tcp/21357/p2p/16Uiu2HAm5qdEYRDtMJAHHbYHTzfMkMa3qzZLYnDrsCt76ieB5KhP","/ip4/172.18.248.160/tcp/21358/ws/p2p/16Uiu2HAm5qdEYRDtMJAHHbYHTzfMkMa3qzZLYnDrsCt76ieB5KhP"],"enrUri":"enr:-LO4QPvHnzW4XEiRasDvBEiPZ8C8OmWna92pkyIxuaNX0EIpbtCXK30Ljs1dKrLdhyx76r9ayC2asi67-OZHxnIlyioBgmlkgnY0gmlwhKwS-KCKbXVsdGlhZGRyc4wACgSsEvigBlNu3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKat7Q_6sxbuzY7hmmM5TL0PxEl1hPxL5U6s6qgn_8VzoN0Y3CCU22DdWRwglNvhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21356/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.86.10/tcp/53457/p2p/16Uiu2HAkv7LgE8pt6EFeTGH6Qg4oubYanr6mer1kWzr1sWTCQbc2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53456/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21356/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "788f5249-4379-4db1-919e-bcbc53a2d5e9", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"788f5249-4379-4db1-919e-bcbc53a2d5e9","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:21356/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:21356/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 390ab8c7f5f9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 351d597551ec
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.