[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_only_store with id: 2024-05-11_04-21-58__10982516-8d3a-488e-8039-4287edd61c66
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-11_04-21-58__10982516-8d3a-488e-8039-4287edd61c66__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.87.116
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['55592', '55593', '55594', '55595', '55596']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 55592:55592 -p 55593:55593 -p 55594:55594 -p 55595:55595 -p 55596:55596 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55594 --rest-port=55592 --tcp-port=55593 --discv5-udp-port=55595 --rest-address=0.0.0.0 --nat=extip:172.18.87.116 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55596 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.87.116 waku a07beacb1fc3ede5d58b552dbd33b22a6d9c40863ae2623eb13ae41dc1fe7a7e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID a07beacb1fc3. Setting up logs at ./log/docker/publishing_node1_2024-05-11_04-21-58__10982516-8d3a-488e-8039-4287edd61c66__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 55592
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55592/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55592/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.87.116/tcp/55593/p2p/16Uiu2HAmHuLVh9167Q5rp7HEssybTUrmwSntMXw4kT9kWFhPw5p7","/ip4/172.18.87.116/tcp/55594/ws/p2p/16Uiu2HAmHuLVh9167Q5rp7HEssybTUrmwSntMXw4kT9kWFhPw5p7"],"enrUri":"enr:-LO4QM5c9oaA4ib60lOmh_pg8UicEfviaBzkDt7te0eiF1wcXwTLiuI3GArGuzrkOfoxA_6rsbwrL41tlxCtfgCxbU0BgmlkgnY0gmlwhKwSV3SKbXVsdGlhZGRyc4wACgSsEld0Btkq3QOCcnOFAAABAACJc2VjcDI1NmsxoQNN91gGSfT5yB4Fm6pXwJhmOdqGpCziaZftjNnjrjhXDIN0Y3CC2SmDdWRwgtkrhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-11_04-21-58__10982516-8d3a-488e-8039-4287edd61c66__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.5.176
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['39256', '39257', '39258', '39259', '39260']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 39256:39256 -p 39257:39257 -p 39258:39258 -p 39259:39259 -p 39260:39260 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39258 --rest-port=39256 --tcp-port=39257 --discv5-udp-port=39259 --rest-address=0.0.0.0 --nat=extip:172.18.5.176 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39260 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QM5c9oaA4ib60lOmh_pg8UicEfviaBzkDt7te0eiF1wcXwTLiuI3GArGuzrkOfoxA_6rsbwrL41tlxCtfgCxbU0BgmlkgnY0gmlwhKwSV3SKbXVsdGlhZGRyc4wACgSsEld0Btkq3QOCcnOFAAABAACJc2VjcDI1NmsxoQNN91gGSfT5yB4Fm6pXwJhmOdqGpCziaZftjNnjrjhXDIN0Y3CC2SmDdWRwgtkrhXdha3UyAw --storenode=/ip4/172.18.87.116/tcp/55593/p2p/16Uiu2HAmHuLVh9167Q5rp7HEssybTUrmwSntMXw4kT9kWFhPw5p7 --store=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.5.176 waku 53a370c037532a87e011a742d2a3f81a9bda0a776bde233637f0be3b9efb4910
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 53a370c03753. Setting up logs at ./log/docker/store_node1_2024-05-11_04-21-58__10982516-8d3a-488e-8039-4287edd61c66__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 39256
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39256/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39256/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.5.176/tcp/39257/p2p/16Uiu2HAmMLUuZDmctxGd1DsjrJGzwemeJcrdENbCGMjNMqcGcvNq","/ip4/172.18.5.176/tcp/39258/ws/p2p/16Uiu2HAmMLUuZDmctxGd1DsjrJGzwemeJcrdENbCGMjNMqcGcvNq"],"enrUri":"enr:-LO4QHAiU9V4uqZV8qbbRwOqtCI3_X8Z2vq602vt8Vb-p9MjIlLl7S0i56VqYQqQ1WACv-IqUXx6THQ1Q_FU8E7HR3sBgmlkgnY0gmlwhKwSBbCKbXVsdGlhZGRyc4wACgSsEgWwBpla3QOCcnOFAAABAACJc2VjcDI1NmsxoQOA-2-J0r4bVk6_pJJ42pkAi8-CjNLnr4EFYaV586v4roN0Y3CCmVmDdWRwgplbhXdha3UyAg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39256/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.87.116/tcp/55593/p2p/16Uiu2HAmHuLVh9167Q5rp7HEssybTUrmwSntMXw4kT9kWFhPw5p7"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55592/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55592/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55592/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715401321127733504,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id a07beacb1fc3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 53a370c03753
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-11_04-21-58__10982516-8d3a-488e-8039-4287edd61c66__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-11_04-21-58__10982516-8d3a-488e-8039-4287edd61c66__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_only_store with id: 2024-05-11_04-22-05__f1437ecd-6175-4825-9810-10191806d518
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-11_04-22-05__f1437ecd-6175-4825-9810-10191806d518__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.81.40
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['40069', '40070', '40071', '40072', '40073']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 40069:40069 -p 40070:40070 -p 40071:40071 -p 40072:40072 -p 40073:40073 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40071 --rest-port=40069 --tcp-port=40070 --discv5-udp-port=40072 --rest-address=0.0.0.0 --nat=extip:172.18.81.40 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40073 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.81.40 waku cefa4ebfc51ef7743454d33c10cba177c3a6680ee1a57c49a37fb0c76c46fe4a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID cefa4ebfc51e. Setting up logs at ./log/docker/publishing_node1_2024-05-11_04-22-05__f1437ecd-6175-4825-9810-10191806d518__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 40069
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40069/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40069/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.81.40/tcp/40070/p2p/16Uiu2HAm2H5gcvLMv8M111quxZwGa9neRfgPU6rncX5LrXccw5H3","/ip4/172.18.81.40/tcp/40071/ws/p2p/16Uiu2HAm2H5gcvLMv8M111quxZwGa9neRfgPU6rncX5LrXccw5H3"],"enrUri":"enr:-LO4QDCbU8H8Zezrwj522E8vfMqmz-HxyC40hZTGOmVEVf6zO7Ha-mm0PJZfos_qCcSXQe8if_QWjoQMjp0eW9d5ICkBgmlkgnY0gmlwhKwSUSiKbXVsdGlhZGRyc4wACgSsElEoBpyH3QOCcnOFAAABAACJc2VjcDI1NmsxoQJlzmIfrHvRZwP5-chtgyHAiGDuMxUtNi1YS2WHX43TsoN0Y3CCnIaDdWRwgpyIhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-11_04-22-05__f1437ecd-6175-4825-9810-10191806d518__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.125.105
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['4531', '4532', '4533', '4534', '4535']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 4531:4531 -p 4532:4532 -p 4533:4533 -p 4534:4534 -p 4535:4535 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4533 --rest-port=4531 --tcp-port=4532 --discv5-udp-port=4534 --rest-address=0.0.0.0 --nat=extip:172.18.125.105 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4535 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QDCbU8H8Zezrwj522E8vfMqmz-HxyC40hZTGOmVEVf6zO7Ha-mm0PJZfos_qCcSXQe8if_QWjoQMjp0eW9d5ICkBgmlkgnY0gmlwhKwSUSiKbXVsdGlhZGRyc4wACgSsElEoBpyH3QOCcnOFAAABAACJc2VjcDI1NmsxoQJlzmIfrHvRZwP5-chtgyHAiGDuMxUtNi1YS2WHX43TsoN0Y3CCnIaDdWRwgpyIhXdha3UyAw --storenode=/ip4/172.18.81.40/tcp/40070/p2p/16Uiu2HAm2H5gcvLMv8M111quxZwGa9neRfgPU6rncX5LrXccw5H3 --store=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.125.105 waku 0ea80f2535d85d82fae0d833775db0766e1d788e07c8748580b3fccc7ddfed6e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 0ea80f2535d8. Setting up logs at ./log/docker/store_node1_2024-05-11_04-22-05__f1437ecd-6175-4825-9810-10191806d518__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 4531
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4531/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4531/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.125.105/tcp/4532/p2p/16Uiu2HAm2EWKFe6SswryryufghZ1YStXmnrzzbcBFxNwKXpajm7S","/ip4/172.18.125.105/tcp/4533/ws/p2p/16Uiu2HAm2EWKFe6SswryryufghZ1YStXmnrzzbcBFxNwKXpajm7S"],"enrUri":"enr:-LO4QBY30AtvgibldHnnleBRK832ucePkj1TB_Gp_2UhAh-sdj0P0qlq3mYAC2rX6CMJtQr4Ng3wOr26JIx3taSVFG8BgmlkgnY0gmlwhKwSfWmKbXVsdGlhZGRyc4wACgSsEn1pBhG13QOCcnOFAAABAACJc2VjcDI1NmsxoQJlJX3uCXLW390LgWiC1HGAyIcZnONyFXVUlb97u4bSJYN0Y3CCEbSDdWRwghG2hXdha3UyAg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4531/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.81.40/tcp/40070/p2p/16Uiu2HAm2H5gcvLMv8M111quxZwGa9neRfgPU6rncX5LrXccw5H3"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40069/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40069/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40069/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715401328660386048,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id cefa4ebfc51e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 0ea80f2535d8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-11_04-22-05__f1437ecd-6175-4825-9810-10191806d518__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-11_04-22-05__f1437ecd-6175-4825-9810-10191806d518__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_only_store with id: 2024-05-11_04-22-12__43787e16-db2e-4c0e-8687-1664dfefd572
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-11_04-22-12__43787e16-db2e-4c0e-8687-1664dfefd572__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.251.169
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['54604', '54605', '54606', '54607', '54608']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 54604:54604 -p 54605:54605 -p 54606:54606 -p 54607:54607 -p 54608:54608 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54606 --rest-port=54604 --tcp-port=54605 --discv5-udp-port=54607 --rest-address=0.0.0.0 --nat=extip:172.18.251.169 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54608 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.251.169 waku c61c67d6e63557983fc4745a3a993edf91b61cf5418fa5982ffb74bf51524643
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID c61c67d6e635. Setting up logs at ./log/docker/publishing_node1_2024-05-11_04-22-12__43787e16-db2e-4c0e-8687-1664dfefd572__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 54604
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54604/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54604/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.251.169/tcp/54605/p2p/16Uiu2HAmCnxg5vMs8esgLBpjjTx3JBPUYiYhoRiDwFrD7jJMqKS3","/ip4/172.18.251.169/tcp/54606/ws/p2p/16Uiu2HAmCnxg5vMs8esgLBpjjTx3JBPUYiYhoRiDwFrD7jJMqKS3"],"enrUri":"enr:-LO4QJ28t-v53OqQtnK4YJYL382qvawVNcJkluE4CSsrDMo6GKk5USzW5X1Y3DWb9Qosjwd9a1Zg30vmTEuA1nj8OVgBgmlkgnY0gmlwhKwS-6mKbXVsdGlhZGRyc4wACgSsEvupBtVO3QOCcnOFAAABAACJc2VjcDI1NmsxoQMCCsBhcJS1bCVpSamESOgam6mp3GmUOhkrFnRIaoziFIN0Y3CC1U2DdWRwgtVPhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-11_04-22-12__43787e16-db2e-4c0e-8687-1664dfefd572__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.91.39
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['17937', '17938', '17939', '17940', '17941']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 17937:17937 -p 17938:17938 -p 17939:17939 -p 17940:17940 -p 17941:17941 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17939 --rest-port=17937 --tcp-port=17938 --discv5-udp-port=17940 --rest-address=0.0.0.0 --nat=extip:172.18.91.39 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17941 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QJ28t-v53OqQtnK4YJYL382qvawVNcJkluE4CSsrDMo6GKk5USzW5X1Y3DWb9Qosjwd9a1Zg30vmTEuA1nj8OVgBgmlkgnY0gmlwhKwS-6mKbXVsdGlhZGRyc4wACgSsEvupBtVO3QOCcnOFAAABAACJc2VjcDI1NmsxoQMCCsBhcJS1bCVpSamESOgam6mp3GmUOhkrFnRIaoziFIN0Y3CC1U2DdWRwgtVPhXdha3UyAw --storenode=/ip4/172.18.251.169/tcp/54605/p2p/16Uiu2HAmCnxg5vMs8esgLBpjjTx3JBPUYiYhoRiDwFrD7jJMqKS3 --store=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.91.39 waku 9fa87fb846cb8eb183a6e85b47bf1cb91ed9edbdfdc9e883ffb5ef4c9e69ae4f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 9fa87fb846cb. Setting up logs at ./log/docker/store_node1_2024-05-11_04-22-12__43787e16-db2e-4c0e-8687-1664dfefd572__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 17937
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17937/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17937/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.91.39/tcp/17938/p2p/16Uiu2HAkxSQmmCf4fArBxgpV3t1mqxsLmPd5crbZPKTM9R2hQdFQ","/ip4/172.18.91.39/tcp/17939/ws/p2p/16Uiu2HAkxSQmmCf4fArBxgpV3t1mqxsLmPd5crbZPKTM9R2hQdFQ"],"enrUri":"enr:-LO4QG4eedNOdV6iT6K6ePgX4l0lEPWjryKBXJuCgPE3atNJHPlVYBdq0zqzIVUwIwVQgMJnp5FTJcJG-6kcQqbE8msBgmlkgnY0gmlwhKwSWyeKbXVsdGlhZGRyc4wACgSsElsnBkYT3QOCcnOFAAABAACJc2VjcDI1NmsxoQIsw3JNupst8g0bp7ZdRjuSLkuXi3nlhuxc0TX_vFhwC4N0Y3CCRhKDdWRwgkYUhXdha3UyAg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17937/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.251.169/tcp/54605/p2p/16Uiu2HAmCnxg5vMs8esgLBpjjTx3JBPUYiYhoRiDwFrD7jJMqKS3"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54604/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54604/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54604/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715401334966634240,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id c61c67d6e635
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 9fa87fb846cb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-11_04-22-12__43787e16-db2e-4c0e-8687-1664dfefd572__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-11_04-22-12__43787e16-db2e-4c0e-8687-1664dfefd572__harbor.status.im_wakuorg_nwaku:latest.log