[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_relay__peer_only_store with id: 2024-12-25_16-01-16__51aa9a76-1c42-475b-82dd-e431cbdfdaab
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-12-25_16-01-16__51aa9a76-1c42-475b-82dd-e431cbdfdaab__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.249.200
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['57183', '57184', '57185', '57186', '57187']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 57183:57183 -p 57184:57184 -p 57185:57185 -p 57186:57186 -p 57187:57187 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57185 --rest-port=57183 --tcp-port=57184 --discv5-udp-port=57186 --rest-address=0.0.0.0 --nat=extip:172.18.249.200 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ccee34e472fcfb3f4d7fcae4b998f2af4ec8ca9ed624ae952e537e60ff80ad2a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57187 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.249.200 waku 038db8893d9b339d4cd4bb3f49bcc93682f0f8fdc5f1ceb5d995d038ac39b899
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 038db8893d9b. Setting up logs at ./log/docker/publishing_node1_2024-12-25_16-01-16__51aa9a76-1c42-475b-82dd-e431cbdfdaab__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 57183
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9300bf4d471f. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57183/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57183/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.249.200/tcp/57184/p2p/16Uiu2HAmJP8r4xK3L721fhnG1iTT7oGXiRCHgsMVCVpx7QDCmjDF","/ip4/172.18.249.200/tcp/57185/ws/p2p/16Uiu2HAmJP8r4xK3L721fhnG1iTT7oGXiRCHgsMVCVpx7QDCmjDF"],"enrUri":"enr:-L24QDAdYXYUMlflbtqGDQCXqUKXpfYtt86_Xn61NIYXIu7fKt2WCdECdYaRGjd_OelPQdJb5eAfV-W8F6_BrowHxpgCgmlkgnY0gmlwhKwS-ciKbXVsdGlhZGRyc5YACASsEvnIBt9gAAoErBL5yAbfYd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVRZvbvxjQqaOMyyBKMyvYf0WBUeU4wZvrYbpSPnGcH6DdGNwgt9gg3VkcILfYoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-12-25_16-01-16__51aa9a76-1c42-475b-82dd-e431cbdfdaab__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.51.72
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['22345', '22346', '22347', '22348', '22349']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 22345:22345 -p 22346:22346 -p 22347:22347 -p 22348:22348 -p 22349:22349 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22347 --rest-port=22345 --tcp-port=22346 --discv5-udp-port=22348 --rest-address=0.0.0.0 --nat=extip:172.18.51.72 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ebf7ebb203ab14553fb9f5ecf9554b1d56ecbffd28fa5af2bc3baff08bad204a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22349 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QDAdYXYUMlflbtqGDQCXqUKXpfYtt86_Xn61NIYXIu7fKt2WCdECdYaRGjd_OelPQdJb5eAfV-W8F6_BrowHxpgCgmlkgnY0gmlwhKwS-ciKbXVsdGlhZGRyc5YACASsEvnIBt9gAAoErBL5yAbfYd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVRZvbvxjQqaOMyyBKMyvYf0WBUeU4wZvrYbpSPnGcH6DdGNwgt9gg3VkcILfYoV3YWt1MgE --storenode=/ip4/172.18.249.200/tcp/57184/p2p/16Uiu2HAmJP8r4xK3L721fhnG1iTT7oGXiRCHgsMVCVpx7QDCmjDF --store=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.51.72 waku d8702e53c9733ac4cd058258b560fc390f8beb23c88fbba7eb63ebbe31957c08
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d8702e53c973. Setting up logs at ./log/docker/store_node1_2024-12-25_16-01-16__51aa9a76-1c42-475b-82dd-e431cbdfdaab__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 22345
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22345/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22345/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.51.72/tcp/22346/p2p/16Uiu2HAmVNHAkrJHb6A2BvzV9NT1VUxKKfnVh34NF91CtfEQQHgg","/ip4/172.18.51.72/tcp/22347/ws/p2p/16Uiu2HAmVNHAkrJHb6A2BvzV9NT1VUxKKfnVh34NF91CtfEQQHgg"],"enrUri":"enr:-L24QB7nAV5EogNQlG4cAaqLGAB6Iq04rGZzFlIEzPYlxXUYNhlOeBAlxRUFwBmTGxvTBhKWAx42u7k6ImmRFSy9csMCgmlkgnY0gmlwhKwSM0iKbXVsdGlhZGRyc5YACASsEjNIBldKAAoErBIzSAZXS90DgnJzhQADAQAAiXNlY3AyNTZrMaED-E7SE9AV4sbOG7BmPTVWUFKaDR35uV2kF6TRfZMoKmWDdGNwgldKg3VkcIJXTIV3YWt1MgI"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22345/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.249.200/tcp/57184/p2p/16Uiu2HAmJP8r4xK3L721fhnG1iTT7oGXiRCHgsMVCVpx7QDCmjDF"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57183/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57183/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22345/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 038db8893d9b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d8702e53c973
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 038db8893d9b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.