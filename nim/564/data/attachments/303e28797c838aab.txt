[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_time_filter_small_timestamp with id: 2024-12-25_16-01-52__d041bcaa-a43f-4238-8326-c4a22dd5965b
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-12-25_16-01-52__d041bcaa-a43f-4238-8326-c4a22dd5965b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.159.77
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['7896', '7897', '7898', '7899', '7900']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 7896:7896 -p 7897:7897 -p 7898:7898 -p 7899:7899 -p 7900:7900 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7898 --rest-port=7896 --tcp-port=7897 --discv5-udp-port=7899 --rest-address=0.0.0.0 --nat=extip:172.18.159.77 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1c5e5be95b2aee7a1a6bf4e459ee33a7f7d9bb834c6bc08d67c5db7b8dbe4551 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7900 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.159.77 waku 407aeb70a787e77f9738089c3290f6697704cca2102c1d6a5e4de3c1dd7d92ec
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 407aeb70a787. Setting up logs at ./log/docker/publishing_node1_2024-12-25_16-01-52__d041bcaa-a43f-4238-8326-c4a22dd5965b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 7896
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 764723638d1a. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7896/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7896/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.159.77/tcp/7897/p2p/16Uiu2HAkvSdSNdvYGDWJzWdkBSZLcLNudYjeAYHZ9iavKJrazfdx","/ip4/172.18.159.77/tcp/7898/ws/p2p/16Uiu2HAkvSdSNdvYGDWJzWdkBSZLcLNudYjeAYHZ9iavKJrazfdx"],"enrUri":"enr:-L24QP-SnjohjUgCFAA71C8RkHX_7hWhiQVj0C2eglVCd6PnA4NnYwRe00mGoM7ldSSroqa-CX7QbF20jkTc1EOKirICgmlkgnY0gmlwhKwSn02KbXVsdGlhZGRyc5YACASsEp9NBh7ZAAoErBKfTQYe2t0DgnJzhQADAQAAiXNlY3AyNTZrMaECDxpk0G_Wj2DYVC246DpvYmf5-tESgfIaMTFFaFDGm4-DdGNwgh7Zg3VkcIIe24V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-12-25_16-01-52__d041bcaa-a43f-4238-8326-c4a22dd5965b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.16.237
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['65381', '65382', '65383', '65384', '65385']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 65381:65381 -p 65382:65382 -p 65383:65383 -p 65384:65384 -p 65385:65385 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65383 --rest-port=65381 --tcp-port=65382 --discv5-udp-port=65384 --rest-address=0.0.0.0 --nat=extip:172.18.16.237 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8a127e4c1238cf6ad04a89e2ce97eec8eccfdb533fdaadeb5ea4aad1ba5c4f98 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65385 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QP-SnjohjUgCFAA71C8RkHX_7hWhiQVj0C2eglVCd6PnA4NnYwRe00mGoM7ldSSroqa-CX7QbF20jkTc1EOKirICgmlkgnY0gmlwhKwSn02KbXVsdGlhZGRyc5YACASsEp9NBh7ZAAoErBKfTQYe2t0DgnJzhQADAQAAiXNlY3AyNTZrMaECDxpk0G_Wj2DYVC246DpvYmf5-tESgfIaMTFFaFDGm4-DdGNwgh7Zg3VkcIIe24V3YWt1MgM --storenode=/ip4/172.18.159.77/tcp/7897/p2p/16Uiu2HAkvSdSNdvYGDWJzWdkBSZLcLNudYjeAYHZ9iavKJrazfdx --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.16.237 waku cf44223346b279436469c498065df6133acfd0ac5e0efba648fda4131eebfc0b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID cf44223346b2. Setting up logs at ./log/docker/store_node1_2024-12-25_16-01-52__d041bcaa-a43f-4238-8326-c4a22dd5965b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 65381
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65381/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65381/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.16.237/tcp/65382/p2p/16Uiu2HAmJBcqE7e58aCg1z3kXVbyAomoFh2m6TsxvifVfVgQCDyH","/ip4/172.18.16.237/tcp/65383/ws/p2p/16Uiu2HAmJBcqE7e58aCg1z3kXVbyAomoFh2m6TsxvifVfVgQCDyH"],"enrUri":"enr:-L24QIuM9EvliV8tBDp44yptbuM9LV0Mx9RDgxART9j6jeAADSoDG9cuaRLQvBuQNcYHSAzJccoIyR7UzHjWDYuJYDwCgmlkgnY0gmlwhKwSEO2KbXVsdGlhZGRyc5YACASsEhDtBv9mAAoErBIQ7Qb_Z90DgnJzhQADAQAAiXNlY3AyNTZrMaEDUiMb3nr0O7_ORl_QtS_AlAzQ4E6w7aS5dNq_s19mk_iDdGNwgv9mg3VkcIL_aIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65381/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.159.77/tcp/7897/p2p/16Uiu2HAkvSdSNdvYGDWJzWdkBSZLcLNudYjeAYHZ9iavKJrazfdx"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7896/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65381/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7896/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7896/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7896/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7896/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7896/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7896/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:218 inquering stored messages with start time 1735142521509381888 after end time 1735142534509396993
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7896/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1735142521509381888&endTime=1735142534509396993&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"JGGWBPXjUPzXhRqEZPhN3cHZ+yAWNrlUUOE8WEmo388=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735142521509381888,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"gkeV7WgSK7iBJzZ0VjIKHjNVYHUlt5Eyh6btkN4Ws/M=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735142523509388800,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"u4h2Y2qVcFu7Apmw9OI9bthYYMGGa0Kz7VCIjI+GEg0=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735142524409390848,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"UTfk+vdqLDgXxzygECnKFs/imou7VoGW5VD35mG/q4U=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735142524609392896,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"9tWNCgANnAmTTphqkgNeolK6bLOkmdx1vRZCSsQDkwQ=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735142526509394944,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"z/J2nbOYnr+JJakG4vkfv6fcv0cdzIRVVSDxMERZevg=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735142534509396992,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:221 number of messages stored for start time 1735142521509381888 and end time = 1735142534509396993 is  6
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65381/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1735142521509381888&endTime=1735142534509396993&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"JGGWBPXjUPzXhRqEZPhN3cHZ+yAWNrlUUOE8WEmo388=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735142521509381888,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"gkeV7WgSK7iBJzZ0VjIKHjNVYHUlt5Eyh6btkN4Ws/M=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735142523509388800,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"u4h2Y2qVcFu7Apmw9OI9bthYYMGGa0Kz7VCIjI+GEg0=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735142524409390848,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"UTfk+vdqLDgXxzygECnKFs/imou7VoGW5VD35mG/q4U=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735142524609392896,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"9tWNCgANnAmTTphqkgNeolK6bLOkmdx1vRZCSsQDkwQ=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735142526509394944,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"z/J2nbOYnr+JJakG4vkfv6fcv0cdzIRVVSDxMERZevg=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735142534509396992,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:221 number of messages stored for start time 1735142521509381888 and end time = 1735142534509396993 is  6
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 407aeb70a787
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id cf44223346b2
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 407aeb70a787. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.