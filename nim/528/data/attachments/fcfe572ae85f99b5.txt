[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_payload with id: 2024-12-15_12-46-21__e0071786-9e70-4063-8980-dc541c8aec25
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-15_12-46-21__e0071786-9e70-4063-8980-dc541c8aec25__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.60.28
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['39398', '39399', '39400', '39401', '39402']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 39398:39398 -p 39399:39399 -p 39400:39400 -p 39401:39401 -p 39402:39402 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39400 --rest-port=39398 --tcp-port=39399 --discv5-udp-port=39401 --rest-address=0.0.0.0 --nat=extip:172.18.60.28 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cbb77daed2de5df5b1ac45d1171375a2cfc02d2901e9efa720da2b4d165f65f5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39402 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.60.28 waku 97224a0b1de5179206ce442325e40b8461def9d3e79177be2a6afb89d8dc5052
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 97224a0b1de5. Setting up logs at ./log/docker/receiving_node1_2024-12-15_12-46-21__e0071786-9e70-4063-8980-dc541c8aec25__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 39398
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d9e824654b23. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39398/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39398/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.60.28/tcp/39399/p2p/16Uiu2HAm4E6UdBf1EpWqeksCq2SM4kt9MeutH4zS1iDSzsJSqWQm","/ip4/172.18.60.28/tcp/39400/ws/p2p/16Uiu2HAm4E6UdBf1EpWqeksCq2SM4kt9MeutH4zS1iDSzsJSqWQm"],"enrUri":"enr:-L24QN-pgNfT_UUmmaVUykHS_t9T_vGbjZOGHm2cphJRwDRyRv7knbmtoitDWtG-7PtcJhRuaj8ONHjEFhgEWaklmKUCgmlkgnY0gmlwhKwSPByKbXVsdGlhZGRyc5YACASsEjwcBpnnAAoErBI8HAaZ6N0DgnJzhQADAQAAiXNlY3AyNTZrMaECgsHpXPqwoPJExn9megrapStAE8_vMRXVMA27V8xU9CaDdGNwgpnng3VkcIKZ6YV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-15_12-46-21__e0071786-9e70-4063-8980-dc541c8aec25__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.18.207
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['22534', '22535', '22536', '22537', '22538']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 22534:22534 -p 22535:22535 -p 22536:22536 -p 22537:22537 -p 22538:22538 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22536 --rest-port=22534 --tcp-port=22535 --discv5-udp-port=22537 --rest-address=0.0.0.0 --nat=extip:172.18.18.207 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5e9c5ebbb019c13de48cfa49cdaaa637bfa61e678a17a7e1bf97aaed6c39515b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22538 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.18.207 waku 4e7479196ca4336b713c73d922bfb95e552c21b6a5728182a2eb94b2ec2a44ea
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4e7479196ca4. Setting up logs at ./log/docker/receiving_node2_2024-12-15_12-46-21__e0071786-9e70-4063-8980-dc541c8aec25__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 22534
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22534/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22534/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.18.207/tcp/22535/p2p/16Uiu2HAkvHxipdkKnssNN1FSDK2TRphKeopNbhH5t2fmV8JU4q5N","/ip4/172.18.18.207/tcp/22536/ws/p2p/16Uiu2HAkvHxipdkKnssNN1FSDK2TRphKeopNbhH5t2fmV8JU4q5N"],"enrUri":"enr:-L24QJe_wc3OgB-7mSw7ukuijB0IGVXdWvs4ZGucpuigpueyTKuFZkuMuZjGvzYAokcFOGBqcafY8BHam0HBypoSes0CgmlkgnY0gmlwhKwSEs-KbXVsdGlhZGRyc5YACASsEhLPBlgHAAoErBISzwZYCN0DgnJzhQADAQAAiXNlY3AyNTZrMaECDOH4dd-2LdBTcZwd-WrIjavZboxcZ0TMQDiAtiaYjEWDdGNwglgHg3VkcIJYCYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22534/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.60.28/tcp/39399/p2p/16Uiu2HAm4E6UdBf1EpWqeksCq2SM4kt9MeutH4zS1iDSzsJSqWQm"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-15_12-46-21__e0071786-9e70-4063-8980-dc541c8aec25__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.26.231
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['16788', '16789', '16790', '16791', '16792']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 16788:16788 -p 16789:16789 -p 16790:16790 -p 16791:16791 -p 16792:16792 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16790 --rest-port=16788 --tcp-port=16789 --discv5-udp-port=16791 --rest-address=0.0.0.0 --nat=extip:172.18.26.231 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aa6ab60c6d1ff0c77ddcf5dda9ef5f7bdaa63dbabfef5508f33d9bd25fccb2ab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16792 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QN-pgNfT_UUmmaVUykHS_t9T_vGbjZOGHm2cphJRwDRyRv7knbmtoitDWtG-7PtcJhRuaj8ONHjEFhgEWaklmKUCgmlkgnY0gmlwhKwSPByKbXVsdGlhZGRyc5YACASsEjwcBpnnAAoErBI8HAaZ6N0DgnJzhQADAQAAiXNlY3AyNTZrMaECgsHpXPqwoPJExn9megrapStAE8_vMRXVMA27V8xU9CaDdGNwgpnng3VkcIKZ6YV3YWt1Mgk --lightpushnode=/ip4/172.18.60.28/tcp/39399/p2p/16Uiu2HAm4E6UdBf1EpWqeksCq2SM4kt9MeutH4zS1iDSzsJSqWQm --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.26.231 waku 75b283b57ee8b98f19d77300186f20078a124167ff1ba9182e997a1c1c8fac7f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 75b283b57ee8. Setting up logs at ./log/docker/lightpush_node1_2024-12-15_12-46-21__e0071786-9e70-4063-8980-dc541c8aec25__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 16788
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16788/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16788/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.26.231/tcp/16789/p2p/16Uiu2HAmARHuC8iheXDKoheFHnhmCJs7Ez2S4PTekjuFdqeZ13Xw","/ip4/172.18.26.231/tcp/16790/ws/p2p/16Uiu2HAmARHuC8iheXDKoheFHnhmCJs7Ez2S4PTekjuFdqeZ13Xw"],"enrUri":"enr:-L24QHRKrJf6h4K9UnJcX7UoxdAq5jd_c-WFJek0F78QFhcWdlUMQLSw-eY-u7_JIRASb4Wu6yGOG7GnGHB_uRqzpaMCgmlkgnY0gmlwhKwSGueKbXVsdGlhZGRyc5YACASsEhrnBkGVAAoErBIa5wZBlt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3sZWtqv6qDdUvWXDN03wX3q1pWt8vWaMvga48hVVb2qDdGNwgkGVg3VkcIJBl4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16788/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.60.28/tcp/39399/p2p/16Uiu2HAm4E6UdBf1EpWqeksCq2SM4kt9MeutH4zS1iDSzsJSqWQm"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16788/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.18.207/tcp/22535/p2p/16Uiu2HAkvHxipdkKnssNN1FSDK2TRphKeopNbhH5t2fmV8JU4q5N"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39398/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22534/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16788/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1734266784962158336}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:16788/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 97224a0b1de5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4e7479196ca4
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 97224a0b1de5. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 75b283b57ee8
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4e7479196ca4. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.