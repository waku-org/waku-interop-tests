[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_filter_ping_on_unsubscribed_peer with id: 2024-05-24_14-15-32__8ce6002b-0795-4a57-8ab8-2b1a8ba19179
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/node1_2024-05-24_14-15-32__8ce6002b-0795-4a57-8ab8-2b1a8ba19179__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.44.146
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['60282', '60283', '60284', '60285', '60286']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 60282:60282 -p 60283:60283 -p 60284:60284 -p 60285:60285 -p 60286:60286 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60284 --rest-port=60282 --tcp-port=60283 --discv5-udp-port=60285 --rest-address=0.0.0.0 --nat=extip:172.18.44.146 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60286 --metrics-logging=true --relay=true --filter=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.44.146 waku ba459fe7534d749059bd80d8f60849b6c9a5d4cca5d2061248eca7ec25d0fb7e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.25.99
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['2786', '2787', '2788', '2789', '2790']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 2786:2786 -p 2787:2787 -p 2788:2788 -p 2789:2789 -p 2790:2790 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2788 --rest-port=2786 --tcp-port=2787 --discv5-udp-port=2789 --rest-address=0.0.0.0 --nat=extip:172.18.25.99 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2790 --metrics-logging=true --relay=true --filter=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.25.99 waku 1a371c125a65e83cd98f34d5161fc7a645527fda7981456f43b1f4f437a37384
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 1a371c125a65. Setting up logs at ./log/docker/node1_2024-05-24_14-15-32__8ce6002b-0795-4a57-8ab8-2b1a8ba19179__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 2786
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2786/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2786/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.25.99/tcp/2787/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.25.99/tcp/2788/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QMwRAxeDqHaSymNZDUusDSrB7cP3I2e2kExUD9JgnHxLY8MioS18NmjihkN3yTsN8rz0YT5LSfntgnS8vLjr2PIBgmlkgnY0gmlwhKwSGWOKbXVsdGlhZGRyc4wACgSsEhljBgrk3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCCuODdWRwggrlhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/node2_2024-05-24_14-15-32__8ce6002b-0795-4a57-8ab8-2b1a8ba19179__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.221.10
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['30416', '30417', '30418', '30419', '30420']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 30416:30416 -p 30417:30417 -p 30418:30418 -p 30419:30419 -p 30420:30420 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30418 --rest-port=30416 --tcp-port=30417 --discv5-udp-port=30419 --rest-address=0.0.0.0 --nat=extip:172.18.221.10 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30420 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QMwRAxeDqHaSymNZDUusDSrB7cP3I2e2kExUD9JgnHxLY8MioS18NmjihkN3yTsN8rz0YT5LSfntgnS8vLjr2PIBgmlkgnY0gmlwhKwSGWOKbXVsdGlhZGRyc4wACgSsEhljBgrk3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCCuODdWRwggrlhXdha3UyBQ --filternode=/ip4/172.18.25.99/tcp/2787/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.221.10 waku cf1f55e05b301b288613cb5e1935aa5ca2084465b7ef3614e1ac1541d60350e6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID cf1f55e05b30. Setting up logs at ./log/docker/node2_2024-05-24_14-15-32__8ce6002b-0795-4a57-8ab8-2b1a8ba19179__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 30416
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30416/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30416/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.221.10/tcp/30417/p2p/16Uiu2HAm1E1XaisF5TYPNY58rnUKxbrPTnE9tg2SEKqfpj7kF6W7","/ip4/172.18.221.10/tcp/30418/ws/p2p/16Uiu2HAm1E1XaisF5TYPNY58rnUKxbrPTnE9tg2SEKqfpj7kF6W7"],"enrUri":"enr:-LO4QJEAACk4tQA6iY_T4ppEK711rTuLz2emX7OCdr6jhtxyH5sYGk6S2TP3f91UZU0UZi5Wofch188RoITqT9BqPp8BgmlkgnY0gmlwhKwS3QqKbXVsdGlhZGRyc4wACgSsEt0KBnbS3QOCcnOFAAABAACJc2VjcDI1NmsxoQJWKUFDbVRh5UAc9TRIjxXDezAFsqBC0JAIjQjhw2yj7IN0Y3CCdtGDdWRwgnbThXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30416/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.25.99/tcp/2787/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2786/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30416/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "5a318b25-39cc-4c07-b03a-dfc1ad50abfe", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/0/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"5a318b25-39cc-4c07-b03a-dfc1ad50abfe","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30416/filter/v2/subscriptions/81b0e697-b844-4bae-9dd8-5e933f92c9a1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"81b0e697-b844-4bae-9dd8-5e933f92c9a1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:30416/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/0/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"12345","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30416/filter/v2/subscriptions/9baa370f-e346-44a6-8aa2-be2f89bfcde5" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:30416/filter/v2/subscriptions/9baa370f-e346-44a6-8aa2-be2f89bfcde5. Response content: b'{"requestId":"9baa370f-e346-44a6-8aa2-be2f89bfcde5","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 1a371c125a65
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id cf1f55e05b30
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.