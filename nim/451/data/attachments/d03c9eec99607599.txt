[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_to_pubsub_topics_from_multiple_clusters with id: 2024-11-16_04-11-24__5e19bb1d-9162-4640-89b2-792e59f69155
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-16_04-11-24__5e19bb1d-9162-4640-89b2-792e59f69155__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.211.199
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['33422', '33423', '33424', '33425', '33426']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 33422:33422 -p 33423:33423 -p 33424:33424 -p 33425:33425 -p 33426:33426 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33424 --rest-port=33422 --tcp-port=33423 --discv5-udp-port=33425 --rest-address=0.0.0.0 --nat=extip:172.18.211.199 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ab8c7bcdfe85f388ba0bae411c17618f3299bd5f6b40ea5264e9c1c71c68b5d6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33426 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.211.199 waku 9b329e96051f5cad4adb9bf3ad4a0690d343f56d1077f0da72d2f0184ff5bb78
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9b329e96051f. Setting up logs at ./log/docker/node1_2024-11-16_04-11-24__5e19bb1d-9162-4640-89b2-792e59f69155__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 33422
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7ffc121fd45f. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33422/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33422/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.211.199/tcp/33423/p2p/16Uiu2HAkxy4fMymqVcBp7C6Vq1e6r5H9hE9muhXYSghSr9v2wrkh","/ip4/172.18.211.199/tcp/33424/ws/p2p/16Uiu2HAkxy4fMymqVcBp7C6Vq1e6r5H9hE9muhXYSghSr9v2wrkh"],"enrUri":"enr:-L24QOJYdLY6I8iIsZgFMbpD3nQUUimed7yEJl-DrWcpmJw5eJ5MYTEQF-vZs7C9Rzl0qWyDK3jswtEURP3ZUnA5OeoCgmlkgnY0gmlwhKwS08eKbXVsdGlhZGRyc5YACASsEtPHBoKPAAoErBLTxwaCkN0DgnJzhQADAQAAiXNlY3AyNTZrMaECNJ22daxUebpjYno4fikhgF0k4-kiPKPHWwxheOoBSuqDdGNwgoKPg3VkcIKCkYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-16_04-11-24__5e19bb1d-9162-4640-89b2-792e59f69155__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.101.185
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8495', '8496', '8497', '8498', '8499']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8495:8495 -p 8496:8496 -p 8497:8497 -p 8498:8498 -p 8499:8499 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8497 --rest-port=8495 --tcp-port=8496 --discv5-udp-port=8498 --rest-address=0.0.0.0 --nat=extip:172.18.101.185 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3bfbe1acf52fddfc7fcafb28d8f871226f581cbfc4077bed5c783b8fbfdca7ab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8499 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QOJYdLY6I8iIsZgFMbpD3nQUUimed7yEJl-DrWcpmJw5eJ5MYTEQF-vZs7C9Rzl0qWyDK3jswtEURP3ZUnA5OeoCgmlkgnY0gmlwhKwS08eKbXVsdGlhZGRyc5YACASsEtPHBoKPAAoErBLTxwaCkN0DgnJzhQADAQAAiXNlY3AyNTZrMaECNJ22daxUebpjYno4fikhgF0k4-kiPKPHWwxheOoBSuqDdGNwgoKPg3VkcIKCkYV3YWt1MgU --filternode=/ip4/172.18.211.199/tcp/33423/p2p/16Uiu2HAkxy4fMymqVcBp7C6Vq1e6r5H9hE9muhXYSghSr9v2wrkh
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.101.185 waku 55cf06f2fe4dd304d5e6efcbc8b1e8de07dee85cdc436e9aafc4ecd1b33be267
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 55cf06f2fe4d. Setting up logs at ./log/docker/node2_2024-11-16_04-11-24__5e19bb1d-9162-4640-89b2-792e59f69155__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 8495
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8495/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8495/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.101.185/tcp/8496/p2p/16Uiu2HAmBPCrNc7ELdRw2SkiHxEa1Ym2YgExtiLw1CcHmgGzQfNq","/ip4/172.18.101.185/tcp/8497/ws/p2p/16Uiu2HAmBPCrNc7ELdRw2SkiHxEa1Ym2YgExtiLw1CcHmgGzQfNq"],"enrUri":"enr:-L24QDD8ALYo3j6g_DZpO12gVo9BGGxMovEM7mwEDchp7hMVd905WETeS6JmLa-CV36bGdK-mqmKChygKPxAAjyiZC0CgmlkgnY0gmlwhKwSZbmKbXVsdGlhZGRyc5YACASsEmW5BiEwAAoErBJluQYhMd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC7Rkn0iRw24yqxWgnl076SBFLRXI0Y8nPgKmNwrg6CpKDdGNwgiEwg3VkcIIhMoV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8495/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.211.199/tcp/33423/p2p/16Uiu2HAkxy4fMymqVcBp7C6Vq1e6r5H9hE9muhXYSghSr9v2wrkh"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33422/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8495/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1589f275-3936-4e91-be09-9be11a3a2038", "contentFilters": ["/waku/2/rs/3/1"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1589f275-3936-4e91-be09-9be11a3a2038","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33422/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/1", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8495/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/1","version":0,"timestamp":1731730287596276224,"ephemeral":false}]'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/2/2
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33422/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8495/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "96a86d3d-65ce-4d4d-8106-15c93b050a0a", "contentFilters": ["/waku/2/rs/2/2"], "pubsubTopic": "/waku/2/rs/2/2"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"96a86d3d-65ce-4d4d-8106-15c93b050a0a","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33422/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/2/2", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8495/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/2/2","version":0,"timestamp":1731730287724547584,"ephemeral":false}]'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/3/9
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33422/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8495/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "725e76b8-2251-4a4c-a34b-2450841f7c50", "contentFilters": ["/waku/2/rs/3/9"], "pubsubTopic": "/waku/2/rs/3/9"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"725e76b8-2251-4a4c-a34b-2450841f7c50","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33422/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/9", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8495/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/9","version":0,"timestamp":1731730287847337728,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 9b329e96051f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 55cf06f2fe4d
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9b329e96051f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.