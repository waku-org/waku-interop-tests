[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_receiving_nodes__relay_node1_forwards_lightpushed_message_to_relay_node2 with id: 2024-11-16_04-13-41__3c00e4f2-ae87-41dc-a832-cc0833814aeb
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-16_04-13-41__3c00e4f2-ae87-41dc-a832-cc0833814aeb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.76.76
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['12906', '12907', '12908', '12909', '12910']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 12906:12906 -p 12907:12907 -p 12908:12908 -p 12909:12909 -p 12910:12910 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12908 --rest-port=12906 --tcp-port=12907 --discv5-udp-port=12909 --rest-address=0.0.0.0 --nat=extip:172.18.76.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bdbeb9f1e6eea1bb9e03d8aee3795b5cf6560841b11eefb6cba2ac5efb00be7e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12910 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.76.76 waku ebacb7cdde8dbcf8a793245d6f1b7d9d1160162ac790ff3cc3fdf4525d2f9ae4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ebacb7cdde8d. Setting up logs at ./log/docker/receiving_node1_2024-11-16_04-13-41__3c00e4f2-ae87-41dc-a832-cc0833814aeb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 12906
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d464fefec216. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12906/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12906/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.76.76/tcp/12907/p2p/16Uiu2HAm3wUobKWv1r16H168ioZ6h43rEYMpz2VBu8cFnyPGYiMA","/ip4/172.18.76.76/tcp/12908/ws/p2p/16Uiu2HAm3wUobKWv1r16H168ioZ6h43rEYMpz2VBu8cFnyPGYiMA"],"enrUri":"enr:-L24QD9lbUW5G111xw_myp8UIq2YWIrzxPn2o_9XONrcQGGmCYn2UglR1zhR41qKiAdbAui0G8qeLiIBt-E3azo8zlECgmlkgnY0gmlwhKwSTEyKbXVsdGlhZGRyc5YACASsEkxMBjJrAAoErBJMTAYybN0DgnJzhQADAQAAiXNlY3AyNTZrMaECfoBId69jO5opH7avPBQiGOPkUutbapxyhlu5WLu0eF2DdGNwgjJrg3VkcIIybYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-16_04-13-41__3c00e4f2-ae87-41dc-a832-cc0833814aeb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.238.5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['36041', '36042', '36043', '36044', '36045']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 36041:36041 -p 36042:36042 -p 36043:36043 -p 36044:36044 -p 36045:36045 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36043 --rest-port=36041 --tcp-port=36042 --discv5-udp-port=36044 --rest-address=0.0.0.0 --nat=extip:172.18.238.5 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=46cecaff2efb1afe7dc5cae0f9f11aee2b45f685c7a6e853c01fabfcc6fb622a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36045 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.238.5 waku ae9ebcfc230a4370c1914b89ce7e745d57ab7eec7bce9e88a27439e5d8f6c813
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ae9ebcfc230a. Setting up logs at ./log/docker/receiving_node2_2024-11-16_04-13-41__3c00e4f2-ae87-41dc-a832-cc0833814aeb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 36041
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36041/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36041/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.238.5/tcp/36042/p2p/16Uiu2HAmRPduBxvDaaJXgVFfHJRGVRiN4dQkEFY1o8mQxeGMW2fV","/ip4/172.18.238.5/tcp/36043/ws/p2p/16Uiu2HAmRPduBxvDaaJXgVFfHJRGVRiN4dQkEFY1o8mQxeGMW2fV"],"enrUri":"enr:-L24QMs44n7gTNC08SiEzqSH-OzYjZjtZNv0xYZCe9ZAThxfH3ItAuGIC5YmFWGkqg59ov5sDNR7yqjzpsEgkC_ef-cCgmlkgnY0gmlwhKwS7gWKbXVsdGlhZGRyc5YACASsEu4FBozKAAoErBLuBQaMy90DgnJzhQADAQAAiXNlY3AyNTZrMaEDvTkYUw1tsOCU1-M-mahPyfCZh7OiYoMYGPRj8YcrucSDdGNwgozKg3VkcIKMzIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36041/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.76.76/tcp/12907/p2p/16Uiu2HAm3wUobKWv1r16H168ioZ6h43rEYMpz2VBu8cFnyPGYiMA"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-16_04-13-41__3c00e4f2-ae87-41dc-a832-cc0833814aeb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.112.225
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['64863', '64864', '64865', '64866', '64867']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 64863:64863 -p 64864:64864 -p 64865:64865 -p 64866:64866 -p 64867:64867 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64865 --rest-port=64863 --tcp-port=64864 --discv5-udp-port=64866 --rest-address=0.0.0.0 --nat=extip:172.18.112.225 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cdf1d7ccfbccfa3facfbda8e9faf2d2191d3bd11e9db18ae0f71adf22d88eb32 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64867 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QD9lbUW5G111xw_myp8UIq2YWIrzxPn2o_9XONrcQGGmCYn2UglR1zhR41qKiAdbAui0G8qeLiIBt-E3azo8zlECgmlkgnY0gmlwhKwSTEyKbXVsdGlhZGRyc5YACASsEkxMBjJrAAoErBJMTAYybN0DgnJzhQADAQAAiXNlY3AyNTZrMaECfoBId69jO5opH7avPBQiGOPkUutbapxyhlu5WLu0eF2DdGNwgjJrg3VkcIIybYV3YWt1Mgk --lightpushnode=/ip4/172.18.76.76/tcp/12907/p2p/16Uiu2HAm3wUobKWv1r16H168ioZ6h43rEYMpz2VBu8cFnyPGYiMA --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.112.225 waku 6b77a76191fed32b39172f355eed3ecfea220c26d4e5a90aff3e4232a1f799c4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6b77a76191fe. Setting up logs at ./log/docker/lightpush_node1_2024-11-16_04-13-41__3c00e4f2-ae87-41dc-a832-cc0833814aeb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 64863
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64863/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64863/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.112.225/tcp/64864/p2p/16Uiu2HAm21EcLQf7jStp2RUSQKkHLz2cwxtjG83bDxNZuK5zDSbR","/ip4/172.18.112.225/tcp/64865/ws/p2p/16Uiu2HAm21EcLQf7jStp2RUSQKkHLz2cwxtjG83bDxNZuK5zDSbR"],"enrUri":"enr:-L24QOiz7BJN1uJmxUeiF68zQbXlc-fewwy0CRrpf4fFOQ_vDoGlP4ed1UC5gj4mSxb7C649LQU5no2tZvfFoSv4FXsCgmlkgnY0gmlwhKwScOGKbXVsdGlhZGRyc5YACASsEnDhBv1gAAoErBJw4Qb9Yd0DgnJzhQADAQAAiXNlY3AyNTZrMaECYb8u4yeYYjPwqFdFXfzGD_reEZrWBqoxBbEMr1G6mcCDdGNwgv1gg3VkcIL9YoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64863/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.76.76/tcp/12907/p2p/16Uiu2HAm3wUobKWv1r16H168ioZ6h43rEYMpz2VBu8cFnyPGYiMA"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64863/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.238.5/tcp/36042/p2p/16Uiu2HAmRPduBxvDaaJXgVFfHJRGVRiN4dQkEFY1o8mQxeGMW2fV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12906/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36041/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64863/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1731730426979267328}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12906/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1731730426979267328,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36041/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1731730426979267328,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id ebacb7cdde8d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id ae9ebcfc230a
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ebacb7cdde8d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 6b77a76191fe
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ae9ebcfc230a. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.