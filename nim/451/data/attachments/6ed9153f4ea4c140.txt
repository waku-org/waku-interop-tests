[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_repeated_filter_requestID with id: 2024-11-16_04-07-02__a0cfbbb5-ba14-4f32-a43d-d36cd98b0add
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-16_04-07-02__a0cfbbb5-ba14-4f32-a43d-d36cd98b0add__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-16_04-07-02__a0cfbbb5-ba14-4f32-a43d-d36cd98b0add__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-16_04-07-02__a0cfbbb5-ba14-4f32-a43d-d36cd98b0add__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:347 Create 3 nodes
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:348 Start 3 nodes with their corresponding config
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.69.73
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['25895', '25896', '25897', '25898', '25899']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 25895:25895 -p 25896:25896 -p 25897:25897 -p 25898:25898 -p 25899:25899 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25897 --rest-port=25895 --tcp-port=25896 --discv5-udp-port=25898 --rest-address=0.0.0.0 --nat=extip:172.18.69.73 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d02f3a8ac65ce20f777be8cdb69efba5e68b7844ce12abd1cad1c5bdacbb846b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25899 --metrics-logging=true --relay=true --store=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b302e9b7d8db. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.69.73 waku 45b71a101a6bd9290cf9966ca097d073a25f849dc67cce3be452482d4fc3fd59
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 45b71a101a6b. Setting up logs at ./log/docker/node1_2024-11-16_04-07-02__a0cfbbb5-ba14-4f32-a43d-d36cd98b0add__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 25895
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25895/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25895/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.69.73/tcp/25896/p2p/16Uiu2HAm1uqFv9Ggdb6DsaT75CusdWcr1rcsXV7SkgBmB3uQjGwf","/ip4/172.18.69.73/tcp/25897/ws/p2p/16Uiu2HAm1uqFv9Ggdb6DsaT75CusdWcr1rcsXV7SkgBmB3uQjGwf"],"enrUri":"enr:-L24QF1JXoRbU8BsJyhbLZzftOq7MAJoA8l8t1_bZoNYJMr9NP4xZMbfOt4NIfQp0hG-LkKkZ8sO-bg0hCJgEaW6jsgCgmlkgnY0gmlwhKwSRUmKbXVsdGlhZGRyc5YACASsEkVJBmUoAAoErBJFSQZlKd0DgnJzhQADAQAAiXNlY3AyNTZrMaECYFzf95Q85sM2KgqxuDq_ix62jTjISQPwhnAZUgl5tn6DdGNwgmUog3VkcIJlKoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.108.250
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['48703', '48704', '48705', '48706', '48707']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 48703:48703 -p 48704:48704 -p 48705:48705 -p 48706:48706 -p 48707:48707 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48705 --rest-port=48703 --tcp-port=48704 --discv5-udp-port=48706 --rest-address=0.0.0.0 --nat=extip:172.18.108.250 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=58cbcbde6fdb4596a56af5e5a89340adbed1a3bd9ebe4e26fa941e4c01aa8daa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48707 --metrics-logging=true --relay=true --store=true --filter=true --discv5-bootstrap-node=enr:-L24QF1JXoRbU8BsJyhbLZzftOq7MAJoA8l8t1_bZoNYJMr9NP4xZMbfOt4NIfQp0hG-LkKkZ8sO-bg0hCJgEaW6jsgCgmlkgnY0gmlwhKwSRUmKbXVsdGlhZGRyc5YACASsEkVJBmUoAAoErBJFSQZlKd0DgnJzhQADAQAAiXNlY3AyNTZrMaECYFzf95Q85sM2KgqxuDq_ix62jTjISQPwhnAZUgl5tn6DdGNwgmUog3VkcIJlKoV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.108.250 waku 90dabfcf8197bb522ce6385ccf3bdfa569c5b9f3ea3a47af3d91cc73c6b91e7d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 90dabfcf8197. Setting up logs at ./log/docker/node2_2024-11-16_04-07-02__a0cfbbb5-ba14-4f32-a43d-d36cd98b0add__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 48703
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48703/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48703/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.108.250/tcp/48704/p2p/16Uiu2HAm9oYc6GczC7iH7azfEQM7drdrEN8mBNufCHxADrXfwY73","/ip4/172.18.108.250/tcp/48705/ws/p2p/16Uiu2HAm9oYc6GczC7iH7azfEQM7drdrEN8mBNufCHxADrXfwY73"],"enrUri":"enr:-L24QIE7lY_wNuLDQ2AUhMsqTtnzrKeS4Su8I-POwwXHD5soJW44JdlkEsTd8YVAkJg04A_qtKvv1rAk7Lc1rAZSm8ACgmlkgnY0gmlwhKwSbPqKbXVsdGlhZGRyc5YACASsEmz6Br5AAAoErBJs-ga-Qd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC1Z4OiFviGDrWlBk-XQFmFPM0WMBddEpKCgbsNv3bnYqDdGNwgr5Ag3VkcIK-QoV3YWt1Mgc"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.250.249
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['29434', '29435', '29436', '29437', '29438']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 29434:29434 -p 29435:29435 -p 29436:29436 -p 29437:29437 -p 29438:29438 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29436 --rest-port=29434 --tcp-port=29435 --discv5-udp-port=29437 --rest-address=0.0.0.0 --nat=extip:172.18.250.249 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ca4fdaeacedc9efe98d29fa4cebeaa851a86bfe59c8ece42a89d75678e7a7bd2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29438 --metrics-logging=true --relay=true --filternode=/ip4/172.18.108.250/tcp/48704/p2p/16Uiu2HAm9oYc6GczC7iH7azfEQM7drdrEN8mBNufCHxADrXfwY73 --store=false --discv5-bootstrap-node=enr:-L24QIE7lY_wNuLDQ2AUhMsqTtnzrKeS4Su8I-POwwXHD5soJW44JdlkEsTd8YVAkJg04A_qtKvv1rAk7Lc1rAZSm8ACgmlkgnY0gmlwhKwSbPqKbXVsdGlhZGRyc5YACASsEmz6Br5AAAoErBJs-ga-Qd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC1Z4OiFviGDrWlBk-XQFmFPM0WMBddEpKCgbsNv3bnYqDdGNwgr5Ag3VkcIK-QoV3YWt1Mgc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.250.249 waku 6dab0f73bf835aa0f4a276d80c8e047f2e88eb1406a67bb565f3d0c8bf56a050
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6dab0f73bf83. Setting up logs at ./log/docker/node3_2024-11-16_04-07-02__a0cfbbb5-ba14-4f32-a43d-d36cd98b0add__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 29434
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29434/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29434/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.250.249/tcp/29435/p2p/16Uiu2HAkxVfnKXEcKXufiXDEfqVyF5LUGMGov9wP85L63AXxMJ66","/ip4/172.18.250.249/tcp/29436/ws/p2p/16Uiu2HAkxVfnKXEcKXufiXDEfqVyF5LUGMGov9wP85L63AXxMJ66"],"enrUri":"enr:-L24QJIIPqXnwgKwG5RzRviQEf71IyKoIvVUNs5EJAYq9TFWRDFNQy2BpiFbwzLwl6x6Psk2K9dsoFWcJtRXquZxEGICgmlkgnY0gmlwhKwS-vmKbXVsdGlhZGRyc5YACASsEvr5BnL7AAoErBL6-QZy_N0DgnJzhQADAQAAiXNlY3AyNTZrMaECLZkpDEJeZDoJrwxvzQLmtf6bVlrtk7VshkaO1BavCxuDdGNwgnL7g3VkcIJy_YV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:353 Subscribe nodes to relay  pubsub topics
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25895/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48703/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:357 Wait for all nodes auto connection
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25895/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.108.250/tcp/48704/p2p/16Uiu2HAm9oYc6GczC7iH7azfEQM7drdrEN8mBNufCHxADrXfwY73","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48703/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.69.73/tcp/25896/p2p/16Uiu2HAm1uqFv9Ggdb6DsaT75CusdWcr1rcsXV7SkgBmB3uQjGwf","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:361 Node3 subscribe to filter for pubsubtopic  /waku/2/rs/3/1 2 times with same request id
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29434/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29434/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:370 Node1 publish message for topic /waku/2/rs/3/1
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25895/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 5 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29434/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:374 Response for node 3 is []
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29434/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:378 Response for node3 using same request ID is []
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 45b71a101a6b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 90dabfcf8197
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 45b71a101a6b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 6dab0f73bf83
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 90dabfcf8197. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.