[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_lightpushing_node with id: 2024-11-16_04-04-28__7a8d58fc-7a5e-49c2-b92f-d7db3f120d9f
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-16_04-04-28__7a8d58fc-7a5e-49c2-b92f-d7db3f120d9f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-16_04-04-28__7a8d58fc-7a5e-49c2-b92f-d7db3f120d9f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-16_04-04-28__7a8d58fc-7a5e-49c2-b92f-d7db3f120d9f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.27.8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['43308', '43309', '43310', '43311', '43312']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 43308:43308 -p 43309:43309 -p 43310:43310 -p 43311:43311 -p 43312:43312 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43310 --rest-port=43308 --tcp-port=43309 --discv5-udp-port=43311 --rest-address=0.0.0.0 --nat=extip:172.18.27.8 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8e4dbeb244e5471d2fa7cb2add0f9a27ee6ad5866fa3fbd5cbcab15b98bb3d7c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43312 --metrics-logging=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.27.8 waku 5f86e21bfc604c87473e280954920d9452e579b5ed6fcde808065d209bd7fda8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5f86e21bfc60. Setting up logs at ./log/docker/node1_2024-11-16_04-04-28__7a8d58fc-7a5e-49c2-b92f-d7db3f120d9f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 43308
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ca6be4f9fd57. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43308/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43308/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.27.8/tcp/43309/p2p/16Uiu2HAmQZiJ1UteK8hxgUNkZXfw8v78SKmZAAvqd6jLBY6uf8yG","/ip4/172.18.27.8/tcp/43310/ws/p2p/16Uiu2HAmQZiJ1UteK8hxgUNkZXfw8v78SKmZAAvqd6jLBY6uf8yG"],"enrUri":"enr:-L24QE4OuhyvLZcfMPNJs-3AQMJqSNFC8m5W_iP4_fpFTHqsOeDL79bGG_VjOYCRrqem2vHMtVtXf79Xw5t3_birSRUCgmlkgnY0gmlwhKwSGwiKbXVsdGlhZGRyc5YACASsEhsIBqktAAoErBIbCAapLt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDsPIvER473I_5Nux7mVLLqdt3A3LgbFrCSZjppTMvs8uDdGNwgqktg3VkcIKpL4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.201.231
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['49564', '49565', '49566', '49567', '49568']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 49564:49564 -p 49565:49565 -p 49566:49566 -p 49567:49567 -p 49568:49568 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49566 --rest-port=49564 --tcp-port=49565 --discv5-udp-port=49567 --rest-address=0.0.0.0 --nat=extip:172.18.201.231 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d83b827fb82eecd9acc57dfedb4cb70b94e9bfbb8707923f8ba5e6f7cefcc9e9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49568 --metrics-logging=true --lightpush=true --filter=true --relay=true --discv5-bootstrap-node=enr:-L24QE4OuhyvLZcfMPNJs-3AQMJqSNFC8m5W_iP4_fpFTHqsOeDL79bGG_VjOYCRrqem2vHMtVtXf79Xw5t3_birSRUCgmlkgnY0gmlwhKwSGwiKbXVsdGlhZGRyc5YACASsEhsIBqktAAoErBIbCAapLt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDsPIvER473I_5Nux7mVLLqdt3A3LgbFrCSZjppTMvs8uDdGNwgqktg3VkcIKpL4V3YWt1Mgk --lightpushnode=/ip4/172.18.27.8/tcp/43309/p2p/16Uiu2HAmQZiJ1UteK8hxgUNkZXfw8v78SKmZAAvqd6jLBY6uf8yG
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.201.231 waku edc6a877acec8ee737b3ed4a0eeffb2336ff67e86ba90343d7fa4999581fb54d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID edc6a877acec. Setting up logs at ./log/docker/node2_2024-11-16_04-04-28__7a8d58fc-7a5e-49c2-b92f-d7db3f120d9f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 49564
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49564/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49564/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.201.231/tcp/49565/p2p/16Uiu2HAm4B6mMN8RpD2RayZityUaBYa9A3EMU3N11LMbdMLfG592","/ip4/172.18.201.231/tcp/49566/ws/p2p/16Uiu2HAm4B6mMN8RpD2RayZityUaBYa9A3EMU3N11LMbdMLfG592"],"enrUri":"enr:-L24QAAHKPNI7ERIQNRfFKpn9aT1b4A7JMIuJ-k-DByOOmA_cjIKKuPqb_nRFJDC2U9hVHL1kaH6IDtlpXbTOth7EHMCgmlkgnY0gmlwhKwSyeeKbXVsdGlhZGRyc5YACASsEsnnBsGdAAoErBLJ5wbBnt0DgnJzhQADAQAAiXNlY3AyNTZrMaECgf1-yEpl0M5ByMhYLnIQf-3hdZCI7YPTgl50K58ytvmDdGNwgsGdg3VkcILBn4V3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.28.148
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['27242', '27243', '27244', '27245', '27246']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 27242:27242 -p 27243:27243 -p 27244:27244 -p 27245:27245 -p 27246:27246 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27244 --rest-port=27242 --tcp-port=27243 --discv5-udp-port=27245 --rest-address=0.0.0.0 --nat=extip:172.18.28.148 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fd3d0a9ced9ab047fabefca3e8d78adfcddf06434fdaa36cb3111db6b940b015 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27246 --metrics-logging=true --relay=false --filternode=/ip4/172.18.201.231/tcp/49565/p2p/16Uiu2HAm4B6mMN8RpD2RayZityUaBYa9A3EMU3N11LMbdMLfG592 --discv5-bootstrap-node=enr:-L24QAAHKPNI7ERIQNRfFKpn9aT1b4A7JMIuJ-k-DByOOmA_cjIKKuPqb_nRFJDC2U9hVHL1kaH6IDtlpXbTOth7EHMCgmlkgnY0gmlwhKwSyeeKbXVsdGlhZGRyc5YACASsEsnnBsGdAAoErBLJ5wbBnt0DgnJzhQADAQAAiXNlY3AyNTZrMaECgf1-yEpl0M5ByMhYLnIQf-3hdZCI7YPTgl50K58ytvmDdGNwgsGdg3VkcILBn4V3YWt1Mg0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.28.148 waku c92db29aec5cc67c8215cb562b2b20bc972d267c0633f82872a04f9dcd31e479
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c92db29aec5c. Setting up logs at ./log/docker/node3_2024-11-16_04-04-28__7a8d58fc-7a5e-49c2-b92f-d7db3f120d9f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 27242
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27242/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27242/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.28.148/tcp/27243/p2p/16Uiu2HAmPuZZ9REqPiDRr6K4jM6YnccQ5ujvCdPWaCJtDyJzPh8n","/ip4/172.18.28.148/tcp/27244/ws/p2p/16Uiu2HAmPuZZ9REqPiDRr6K4jM6YnccQ5ujvCdPWaCJtDyJzPh8n"],"enrUri":"enr:-L24QESL4dvIe9cypEqbcczMdLuit4zX_K1ta_w_3xl43dShUeKlg7R8Bv1Oo7O_UXmFeyhpJ0R7Jn538IpjIa8qhCwCgmlkgnY0gmlwhKwSHJSKbXVsdGlhZGRyc5YACASsEhyUBmprAAoErBIclAZqbN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDpyw7W8DH13qx9-bH19HSEQiORERLThqx7-iSMD1xdAODdGNwgmprg3VkcIJqbYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43308/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49564/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27242/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43308/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43308/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.201.231/tcp/49565/p2p/16Uiu2HAm4B6mMN8RpD2RayZityUaBYa9A3EMU3N11LMbdMLfG592","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49564/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.27.8/tcp/43309/p2p/16Uiu2HAmQZiJ1UteK8hxgUNkZXfw8v78SKmZAAvqd6jLBY6uf8yG","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.28.148/tcp/27243/p2p/16Uiu2HAmPuZZ9REqPiDRr6K4jM6YnccQ5ujvCdPWaCJtDyJzPh8n","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27242/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.201.231/tcp/49565/p2p/16Uiu2HAm4B6mMN8RpD2RayZityUaBYa9A3EMU3N11LMbdMLfG592","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43308/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1731729903519467264}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27242/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1731729903519467264,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 5f86e21bfc60
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id edc6a877acec
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5f86e21bfc60. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id c92db29aec5c
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container edc6a877acec. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.