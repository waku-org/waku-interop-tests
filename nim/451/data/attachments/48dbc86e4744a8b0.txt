[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_relay_receiving_node_not_connected_directly_to_relaying_node with id: 2024-11-16_04-03-39__cc362e44-36c6-4598-9240-e78b4d9603ae
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-16_04-03-39__cc362e44-36c6-4598-9240-e78b4d9603ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-16_04-03-39__cc362e44-36c6-4598-9240-e78b4d9603ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-16_04-03-39__cc362e44-36c6-4598-9240-e78b4d9603ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.120.41
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5988', '5989', '5990', '5991', '5992']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5988:5988 -p 5989:5989 -p 5990:5990 -p 5991:5991 -p 5992:5992 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5990 --rest-port=5988 --tcp-port=5989 --discv5-udp-port=5991 --rest-address=0.0.0.0 --nat=extip:172.18.120.41 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bc61da41b3aeca04d9ba4240459d9fe822674af8ce37396faa6fbfbb5ec7cbfe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5992 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.120.41 waku c3425fe900fe830b0de22d5905d84d7360b98396becb96b255308173036e54ca
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c3425fe900fe. Setting up logs at ./log/docker/node1_2024-11-16_04-03-39__cc362e44-36c6-4598-9240-e78b4d9603ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 5988
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 84c180fb89e6. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5988/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5988/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.120.41/tcp/5989/p2p/16Uiu2HAmBptozqNCFrnxYAGYPRwJ21qsdQjbHv43HZxS7x7PCBgZ","/ip4/172.18.120.41/tcp/5990/ws/p2p/16Uiu2HAmBptozqNCFrnxYAGYPRwJ21qsdQjbHv43HZxS7x7PCBgZ"],"enrUri":"enr:-L24QKhDD0_Ai1Y50Bs9Knwp7Y3oQX85XgbOu5RHqMxPwxolFZiiiM3-VX6bSrdWCAtkzwc9oCgi1YNMehq3LJXlHakCgmlkgnY0gmlwhKwSeCmKbXVsdGlhZGRyc5YACASsEngpBhdlAAoErBJ4KQYXZt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC863bjJOCm61FCzB71Vn8RfzaEw75zTCdZLznF2PM0vaDdGNwghdlg3VkcIIXZ4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.19.237
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['12027', '12028', '12029', '12030', '12031']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 12027:12027 -p 12028:12028 -p 12029:12029 -p 12030:12030 -p 12031:12031 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12029 --rest-port=12027 --tcp-port=12028 --discv5-udp-port=12030 --rest-address=0.0.0.0 --nat=extip:172.18.19.237 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3d1abfb70c03af9f8aeeaff13d03febc25bb1880d6aae03e0e0cc22adfafe27f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12031 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QKhDD0_Ai1Y50Bs9Knwp7Y3oQX85XgbOu5RHqMxPwxolFZiiiM3-VX6bSrdWCAtkzwc9oCgi1YNMehq3LJXlHakCgmlkgnY0gmlwhKwSeCmKbXVsdGlhZGRyc5YACASsEngpBhdlAAoErBJ4KQYXZt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC863bjJOCm61FCzB71Vn8RfzaEw75zTCdZLznF2PM0vaDdGNwghdlg3VkcIIXZ4V3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.19.237 waku 2468b6839f8620ef27ed2bd60b0f153983d7394039fca419cf6425d0740f1469
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2468b6839f86. Setting up logs at ./log/docker/node2_2024-11-16_04-03-39__cc362e44-36c6-4598-9240-e78b4d9603ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 12027
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12027/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12027/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.19.237/tcp/12028/p2p/16Uiu2HAkxLqMbePU5CS1DzZzwxzF23USd9DzWi8PR1WXhguyLHYT","/ip4/172.18.19.237/tcp/12029/ws/p2p/16Uiu2HAkxLqMbePU5CS1DzZzwxzF23USd9DzWi8PR1WXhguyLHYT"],"enrUri":"enr:-L24QIMEyinAaTh2XCNnfphu8KPUifOSWjPkvU4g3gFi5qslOktBXIDI-eEkuTSi3_9Ur8CuVvAxGR77hpGcOAVXo4ACgmlkgnY0gmlwhKwSE-2KbXVsdGlhZGRyc5YACASsEhPtBi78AAoErBIT7QYu_d0DgnJzhQADAQAAiXNlY3AyNTZrMaECK1XCFcbt-15XnZYxB_CgiZAHuHJBprNOTObVsDSNkhiDdGNwgi78g3VkcIIu_oV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.36.89
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10865', '10866', '10867', '10868', '10869']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10865:10865 -p 10866:10866 -p 10867:10867 -p 10868:10868 -p 10869:10869 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10867 --rest-port=10865 --tcp-port=10866 --discv5-udp-port=10868 --rest-address=0.0.0.0 --nat=extip:172.18.36.89 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7b36cacbbfc1a5b1d006319af05bf4dc5dcc7f1b7d81bc41db051bbfa812d80d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10869 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QIMEyinAaTh2XCNnfphu8KPUifOSWjPkvU4g3gFi5qslOktBXIDI-eEkuTSi3_9Ur8CuVvAxGR77hpGcOAVXo4ACgmlkgnY0gmlwhKwSE-2KbXVsdGlhZGRyc5YACASsEhPtBi78AAoErBIT7QYu_d0DgnJzhQADAQAAiXNlY3AyNTZrMaECK1XCFcbt-15XnZYxB_CgiZAHuHJBprNOTObVsDSNkhiDdGNwgi78g3VkcIIu_oV3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.36.89 waku 8e80aec165630d8dd796a8ea71b1eb13a715fe7a0175df36c282988dea46eaeb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8e80aec16563. Setting up logs at ./log/docker/node3_2024-11-16_04-03-39__cc362e44-36c6-4598-9240-e78b4d9603ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 10865
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10865/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10865/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.36.89/tcp/10866/p2p/16Uiu2HAkuwY2g1MiZCuR7VjsKn8bKLmmS7JGCk6sVrSExWik12pt","/ip4/172.18.36.89/tcp/10867/ws/p2p/16Uiu2HAkuwY2g1MiZCuR7VjsKn8bKLmmS7JGCk6sVrSExWik12pt"],"enrUri":"enr:-L24QK42fi0aGBW4U0QOGBHbA5gKXQZ9P5BeIpMnKDGcBiVjIxeCmvuhj0au71B9JOSRGsV3LzLwxVZUdGQAfXAfJwcCgmlkgnY0gmlwhKwSJFmKbXVsdGlhZGRyc5YACASsEiRZBipyAAoErBIkWQYqc90DgnJzhQADAQAAiXNlY3AyNTZrMaECB6ZvThTGbzrtjBmtx3ouox_o4q8bqn6ZX9tltX3XEg2DdGNwgipyg3VkcIIqdIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5988/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12027/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10865/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5988/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.19.237/tcp/12028/p2p/16Uiu2HAkxLqMbePU5CS1DzZzwxzF23USd9DzWi8PR1WXhguyLHYT","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12027/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.36.89/tcp/10866/p2p/16Uiu2HAkuwY2g1MiZCuR7VjsKn8bKLmmS7JGCk6sVrSExWik12pt","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"},{"multiaddr":"/ip4/172.18.120.41/tcp/5989/p2p/16Uiu2HAmBptozqNCFrnxYAGYPRwJ21qsdQjbHv43HZxS7x7PCBgZ","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10865/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.19.237/tcp/12028/p2p/16Uiu2HAkxLqMbePU5CS1DzZzwxzF23USd9DzWi8PR1WXhguyLHYT","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5988/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10865/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1731729854644971008,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id c3425fe900fe
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 2468b6839f86
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c3425fe900fe. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 8e80aec16563
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2468b6839f86. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.