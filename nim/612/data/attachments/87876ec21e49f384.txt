[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_pubsub_topic_not_in_docker_flags with id: 2025-01-10_04-06-27__83b4bd7e-b75b-47fe-b2c7-d2c3fc336a6e
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-10_04-06-27__83b4bd7e-b75b-47fe-b2c7-d2c3fc336a6e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.66.82
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['58044', '58045', '58046', '58047', '58048']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 58044:58044 -p 58045:58045 -p 58046:58046 -p 58047:58047 -p 58048:58048 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58046 --rest-port=58044 --tcp-port=58045 --discv5-udp-port=58047 --rest-address=0.0.0.0 --nat=extip:172.18.66.82 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ffbf166cddf92f5de1be1de457dcc76bb8bf0cadee93bfdc96e9788f1e6afb56 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58048 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.66.82 waku c40155c49436fda00bac0356d34dcb9ee81e67d29ab1c6f55b20025a2a371b67
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c40155c49436. Setting up logs at ./log/docker/node1_2025-01-10_04-06-27__83b4bd7e-b75b-47fe-b2c7-d2c3fc336a6e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 58044
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 55da50e19ad3. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58044/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58044/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.66.82/tcp/58045/p2p/16Uiu2HAm7JZWmWjUmoxQc937o7LkkXqb1jQua6qTmgDWktFdc3c1","/ip4/172.18.66.82/tcp/58046/ws/p2p/16Uiu2HAm7JZWmWjUmoxQc937o7LkkXqb1jQua6qTmgDWktFdc3c1"],"enrUri":"enr:-L24QMzYVXSSzbCnQIcctQ-E-dgQ2a3NK_bAbc6RnU1CHftkDtrnaKYGYU1i5cYUngSldWdOaLT0soI0iU6Uatx-FnMCgmlkgnY0gmlwhKwSQlKKbXVsdGlhZGRyc5YACASsEkJSBuK9AAoErBJCUgbivt0DgnJzhQACAQAAiXNlY3AyNTZrMaECsHndyuGUUHXdjmdGo-jwhKN3oe9qyxgCrEvxlyL8De6DdGNwguK9g3VkcILiv4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-10_04-06-27__83b4bd7e-b75b-47fe-b2c7-d2c3fc336a6e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.124.152
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['12979', '12980', '12981', '12982', '12983']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 12979:12979 -p 12980:12980 -p 12981:12981 -p 12982:12982 -p 12983:12983 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12981 --rest-port=12979 --tcp-port=12980 --discv5-udp-port=12982 --rest-address=0.0.0.0 --nat=extip:172.18.124.152 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=5dafa9afcc7ffcf778dfc82e10cf31593a09cdba9a825db864fb393b9cabe905 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12983 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QMzYVXSSzbCnQIcctQ-E-dgQ2a3NK_bAbc6RnU1CHftkDtrnaKYGYU1i5cYUngSldWdOaLT0soI0iU6Uatx-FnMCgmlkgnY0gmlwhKwSQlKKbXVsdGlhZGRyc5YACASsEkJSBuK9AAoErBJCUgbivt0DgnJzhQACAQAAiXNlY3AyNTZrMaECsHndyuGUUHXdjmdGo-jwhKN3oe9qyxgCrEvxlyL8De6DdGNwguK9g3VkcILiv4V3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.124.152 waku eaeb4c4731c5f50bf260fd47d9d05bf51beca5567b37492b651ae46f5822dfb4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID eaeb4c4731c5. Setting up logs at ./log/docker/node2_2025-01-10_04-06-27__83b4bd7e-b75b-47fe-b2c7-d2c3fc336a6e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 12979
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12979/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12979/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.124.152/tcp/12980/p2p/16Uiu2HAmUV1jDTsHuPWYwBQrzbQqEkdVRKfGHNwcnT8pEe4HqaHu","/ip4/172.18.124.152/tcp/12981/ws/p2p/16Uiu2HAmUV1jDTsHuPWYwBQrzbQqEkdVRKfGHNwcnT8pEe4HqaHu"],"enrUri":"enr:-L24QJUxQazqzTPeeo24SGeNAJZ3805ckvoy5yZkqUUfesrEGi2jU-9ihoduwg8olrigXClGLqBzVA0Fru6FyXhohnwCgmlkgnY0gmlwhKwSfJiKbXVsdGlhZGRyc5YACASsEnyYBjK0AAoErBJ8mAYytd0DgnJzhQACAQAAiXNlY3AyNTZrMaED6yy9qgzEJIgYgNj62urMQ-gd3ACSSyf4b8d5ggAyA5iDdGNwgjK0g3VkcIIytoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12979/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.66.82/tcp/58045/p2p/16Uiu2HAm7JZWmWjUmoxQc937o7LkkXqb1jQua6qTmgDWktFdc3c1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58044/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12979/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58044/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58044/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1736481990583093504,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12979/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1736481990583093504,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c40155c49436
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id eaeb4c4731c5
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c40155c49436. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.