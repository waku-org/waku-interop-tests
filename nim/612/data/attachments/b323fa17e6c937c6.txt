[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_nodes_different_content_topic_different_shard with id: 2025-01-10_04-03-30__da13c329-2783-4021-953e-14d96f923b97
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-10_04-03-30__da13c329-2783-4021-953e-14d96f923b97__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.99.138
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['15778', '15779', '15780', '15781', '15782']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 15778:15778 -p 15779:15779 -p 15780:15780 -p 15781:15781 -p 15782:15782 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15780 --rest-port=15778 --tcp-port=15779 --discv5-udp-port=15781 --rest-address=0.0.0.0 --nat=extip:172.18.99.138 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ba267e43a67edfc4fb2b608eead1ab703d0d067eb6dd8ac95dc734fbe164a8ee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15782 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.99.138 waku c92538538678dd9bf54c3a0395a1f854aa051bf6e4a327234483173b5ab6fa51
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c92538538678. Setting up logs at ./log/docker/node1_2025-01-10_04-03-30__da13c329-2783-4021-953e-14d96f923b97__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 15778
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 60f0263125b2. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15778/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15778/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.99.138/tcp/15779/p2p/16Uiu2HAmFjWgcccYJ3ijRTnV4Wguphu2E2NKyNQrn5JWnaPT9ktm","/ip4/172.18.99.138/tcp/15780/ws/p2p/16Uiu2HAmFjWgcccYJ3ijRTnV4Wguphu2E2NKyNQrn5JWnaPT9ktm"],"enrUri":"enr:-L24QKTTcJ4dLV1WkEmUJMn91B3P90aaigcU7oFUyhf-HpsiQv6nzPR6ydvPBUP-AvkaREUvlDmK47E5d6-nYDd0NEsCgmlkgnY0gmlwhKwSY4qKbXVsdGlhZGRyc5YACASsEmOKBj2jAAoErBJjigY9pN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDLbuujn39T3L_waz1UpDEf4hM-HLZdHlzcUcBk1G-xyaDdGNwgj2jg3VkcII9pYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-10_04-03-30__da13c329-2783-4021-953e-14d96f923b97__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.156.61
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['14702', '14703', '14704', '14705', '14706']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 14702:14702 -p 14703:14703 -p 14704:14704 -p 14705:14705 -p 14706:14706 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14704 --rest-port=14702 --tcp-port=14703 --discv5-udp-port=14705 --rest-address=0.0.0.0 --nat=extip:172.18.156.61 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ed62ecc3ce358ce8df3baa2676134ff20879bd1e3e20ab5da36bb42a9aed6dc8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14706 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QKTTcJ4dLV1WkEmUJMn91B3P90aaigcU7oFUyhf-HpsiQv6nzPR6ydvPBUP-AvkaREUvlDmK47E5d6-nYDd0NEsCgmlkgnY0gmlwhKwSY4qKbXVsdGlhZGRyc5YACASsEmOKBj2jAAoErBJjigY9pN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDLbuujn39T3L_waz1UpDEf4hM-HLZdHlzcUcBk1G-xyaDdGNwgj2jg3VkcII9pYV3YWt1MgU --content-topic=/waku/2/content/test.js
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.156.61 waku b3d8157823edf0b1d481c2172aa103c6769ac26cbc75d87f8cf5549193047757
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b3d8157823ed. Setting up logs at ./log/docker/node2_2025-01-10_04-03-30__da13c329-2783-4021-953e-14d96f923b97__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 14702
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14702/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14702/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.156.61/tcp/14703/p2p/16Uiu2HAmLKKiUG6rNKQyZfjpEDPfazmYRAAeiLoXGCKxDxEiy4DC","/ip4/172.18.156.61/tcp/14704/ws/p2p/16Uiu2HAmLKKiUG6rNKQyZfjpEDPfazmYRAAeiLoXGCKxDxEiy4DC"],"enrUri":"enr:-L24QBnTERGKNzUEdZaTXB5kUirH_foUne8wS1cUqhkXcR6HGS_m4J8z66p2cfeujlC6zA64QHnDT_0Yq_o-sMAuiPUCgmlkgnY0gmlwhKwSnD2KbXVsdGlhZGRyc5YACASsEpw9BjlvAAoErBKcPQY5cN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDcdPGiFlvog25EjWiV5PEC_RPUYK6ACAMY2u9268d-F-DdGNwgjlvg3VkcII5cYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14702/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.99.138/tcp/15779/p2p/16Uiu2HAmFjWgcccYJ3ijRTnV4Wguphu2E2NKyNQrn5JWnaPT9ktm"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15778/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14702/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/content/test.js"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15778/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15778/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1736481812650358528,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14702/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:14702/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto. Response content: b'/myapp/1/latest/proto'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c92538538678
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b3d8157823ed
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c92538538678. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.