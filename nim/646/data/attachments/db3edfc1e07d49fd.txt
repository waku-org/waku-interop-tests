2025-02-10 04:03:15.271 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 04:03:15.271 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_all_with_invalid_request_id with id: 2025-02-10_04-03-15__5842f5d6-dbf0-4c8a-97a4-ff8757a14bce
2025-02-10 04:03:15.272 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 04:03:15.272 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-10 04:03:15.272 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-10 04:03:15.278 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:03:15.279 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-10_04-03-15__5842f5d6-dbf0-4c8a-97a4-ff8757a14bce__wakuorg_nwaku:latest.log
2025-02-10 04:03:15.279 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:03:15.279 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:03:15.281 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:03:15.281 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.1.67
2025-02-10 04:03:15.281 DEBUG [src.node.docker_mananger] Generated ports ['9104', '9105', '9106', '9107', '9108']
2025-02-10 04:03:15.281 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:03:15.281 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:03:15.281 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:03:15.281 DEBUG [src.node.docker_mananger] docker run -i -t -p 9104:9104 -p 9105:9105 -p 9106:9106 -p 9107:9107 -p 9108:9108 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9106 --rest-port=9104 --tcp-port=9105 --discv5-udp-port=9107 --rest-address=0.0.0.0 --nat=extip:172.18.1.67 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9df161fda950a1efad54cfde69abfeddac514b5a1a1d82fc122ccb799b2cbc7f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9108 --metrics-logging=true --relay=true --filter=true
2025-02-10 04:03:15.520 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.1.67 waku d71d3dda89ccb01edb2f6ea65525fe36a2ac44d5cfc83c45b25d11c553140450
2025-02-10 04:03:15.575 DEBUG [src.node.docker_mananger] Container started with ID d71d3dda89cc. Setting up logs at ./log/docker/node1_2025-02-10_04-03-15__5842f5d6-dbf0-4c8a-97a4-ff8757a14bce__wakuorg_nwaku:latest.log
2025-02-10 04:03:15.576 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9104
2025-02-10 04:03:15.576 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:03:16.074 ERROR [src.node.docker_mananger] Max retries reached for container cd18e6e8ef74. Exiting log stream.
2025-02-10 04:03:16.577 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9104/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:16.580 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:03:16.581 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:03:16.581 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9104/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:16.583 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.1.67/tcp/9105/p2p/16Uiu2HAm95nBbaddMvoCgNN6nsbnVNoY4ySEMDmaknYUdFgtHXHc","/ip4/172.18.1.67/tcp/9106/ws/p2p/16Uiu2HAm95nBbaddMvoCgNN6nsbnVNoY4ySEMDmaknYUdFgtHXHc"],"enrUri":"enr:-L24QL7ibq14D6M2Ocds-RRHnClopgruZMbD40WnIAqcKQeAGtFDIMVFVKSBx1_j4Pnii1djkzlz7GZX1PK4CFmbwbACgmlkgnY0gmlwhKwSAUOKbXVsdGlhZGRyc5YACASsEgFDBiORAAoErBIBQwYjkt0DgnJzhQADAQAAiXNlY3AyNTZrMaECyusD3rZDI9bSwMaEPVPZ7ZRahCb_1_0J1299KJNYxIuDdGNwgiORg3VkcIIjk4V3YWt1MgU"}'
2025-02-10 04:03:16.583 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:03:16.584 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-10 04:03:16.590 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:03:16.590 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-10_04-03-15__5842f5d6-dbf0-4c8a-97a4-ff8757a14bce__wakuorg_nwaku:latest.log
2025-02-10 04:03:16.591 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:03:16.591 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:03:16.592 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:03:16.592 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.246.145
2025-02-10 04:03:16.593 DEBUG [src.node.docker_mananger] Generated ports ['5356', '5357', '5358', '5359', '5360']
2025-02-10 04:03:16.593 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:03:16.593 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:03:16.593 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:03:16.593 DEBUG [src.node.docker_mananger] docker run -i -t -p 5356:5356 -p 5357:5357 -p 5358:5358 -p 5359:5359 -p 5360:5360 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5358 --rest-port=5356 --tcp-port=5357 --discv5-udp-port=5359 --rest-address=0.0.0.0 --nat=extip:172.18.246.145 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=58f9d2c29b1c7266fa1e87be9cf3ec5b0c9beea1da61c6f6afdab9ee62aa6ed0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5360 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QL7ibq14D6M2Ocds-RRHnClopgruZMbD40WnIAqcKQeAGtFDIMVFVKSBx1_j4Pnii1djkzlz7GZX1PK4CFmbwbACgmlkgnY0gmlwhKwSAUOKbXVsdGlhZGRyc5YACASsEgFDBiORAAoErBIBQwYjkt0DgnJzhQADAQAAiXNlY3AyNTZrMaECyusD3rZDI9bSwMaEPVPZ7ZRahCb_1_0J1299KJNYxIuDdGNwgiORg3VkcIIjk4V3YWt1MgU --filternode=/ip4/172.18.1.67/tcp/9105/p2p/16Uiu2HAm95nBbaddMvoCgNN6nsbnVNoY4ySEMDmaknYUdFgtHXHc
2025-02-10 04:03:16.844 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.246.145 waku 65c6d8c806b55a2f4b5b9317d2116e1904f1b600e1d7c5f04dea404705e8b245
2025-02-10 04:03:16.897 DEBUG [src.node.docker_mananger] Container started with ID 65c6d8c806b5. Setting up logs at ./log/docker/node2_2025-02-10_04-03-15__5842f5d6-dbf0-4c8a-97a4-ff8757a14bce__wakuorg_nwaku:latest.log
2025-02-10 04:03:16.898 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 5356
2025-02-10 04:03:16.898 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:03:17.898 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5356/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:17.901 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:03:17.902 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:03:17.902 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5356/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:17.904 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.246.145/tcp/5357/p2p/16Uiu2HAm5dZzsDghpNSYqae7fEKyEVN7WtJrhgfW9YEURuDDqPZQ","/ip4/172.18.246.145/tcp/5358/ws/p2p/16Uiu2HAm5dZzsDghpNSYqae7fEKyEVN7WtJrhgfW9YEURuDDqPZQ"],"enrUri":"enr:-L24QD-lKDLkV22gyIhrORAhlCZ3Hi5IsIYtsT44dPwQfuXISv3yT5P3aPdiD0Vo7jRfzYJLDsRXHuJVvbyCseB27-ACgmlkgnY0gmlwhKwS9pGKbXVsdGlhZGRyc5YACASsEvaRBhTtAAoErBL2kQYU7t0DgnJzhQADAQAAiXNlY3AyNTZrMaECl6ETXzV6Zofm96Ut9GS_4BuvHEwJitb-EGegWHR7Ci-DdGNwghTtg3VkcIIU74V3YWt1MgA"}'
2025-02-10 04:03:17.905 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:03:17.905 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5356/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.1.67/tcp/9105/p2p/16Uiu2HAm95nBbaddMvoCgNN6nsbnVNoY4ySEMDmaknYUdFgtHXHc"]'
2025-02-10 04:03:17.943 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:03:17.945 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-10 04:03:17.945 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9104/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-10 04:03:17.963 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:03:17.964 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5356/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "01355137-9d40-4f82-a156-afa6a3f456f8", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-10 04:03:17.977 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"01355137-9d40-4f82-a156-afa6a3f456f8","statusDesc":"OK"}'
2025-02-10 04:03:17.978 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:5356/filter/v2/subscriptions/all" -H "Content-Type: application/json" -d '{"requestId": 1}'
2025-02-10 04:03:17.981 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:5356/filter/v2/subscriptions/all. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
2025-02-10 04:03:17.985 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 04:03:17.986 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 04:03:17.986 DEBUG [src.node.waku_node] Stopping container with id d71d3dda89cc
2025-02-10 04:03:19.088 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:03:19.088 DEBUG [src.node.waku_node] Stopping container with id 65c6d8c806b5
2025-02-10 04:03:19.917 ERROR [src.node.docker_mananger] Max retries reached for container d71d3dda89cc. Exiting log stream.
2025-02-10 04:03:20.633 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:03:20.636 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 04:03:20.642 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:03:20.646 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
