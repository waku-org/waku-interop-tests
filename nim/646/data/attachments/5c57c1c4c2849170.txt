2025-02-10 04:04:35.980 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 04:04:35.981 DEBUG [tests.conftest] Running test: test_store_with_wrong_encoding_pubsubtopic with id: 2025-02-10_04-04-35__311ea5f3-471e-4fe7-8be0-9c049a0bdd52
2025-02-10 04:04:35.982 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 04:04:35.983 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-10 04:04:35.983 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-10 04:04:35.992 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:04:35.993 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-10_04-04-35__311ea5f3-471e-4fe7-8be0-9c049a0bdd52__wakuorg_nwaku:latest.log
2025-02-10 04:04:35.993 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:04:35.993 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:04:35.995 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:04:35.995 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.68.119
2025-02-10 04:04:35.995 DEBUG [src.node.docker_mananger] Generated ports ['30776', '30777', '30778', '30779', '30780']
2025-02-10 04:04:35.995 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:04:35.996 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:04:35.996 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:04:35.996 DEBUG [src.node.docker_mananger] docker run -i -t -p 30776:30776 -p 30777:30777 -p 30778:30778 -p 30779:30779 -p 30780:30780 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30778 --rest-port=30776 --tcp-port=30777 --discv5-udp-port=30779 --rest-address=0.0.0.0 --nat=extip:172.18.68.119 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a2ecfe81afeba4a76f88e37afc51d806d3cb4dc5ce8b1894549e6b2b7ee5d01f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30780 --metrics-logging=true --store=true --relay=true
2025-02-10 04:04:36.230 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.68.119 waku a2722cea6afcdb13b75eba96d6aa0ceb6d6327fb5bbd93fb4f55220f7786c023
2025-02-10 04:04:36.278 DEBUG [src.node.docker_mananger] Container started with ID a2722cea6afc. Setting up logs at ./log/docker/publishing_node1_2025-02-10_04-04-35__311ea5f3-471e-4fe7-8be0-9c049a0bdd52__wakuorg_nwaku:latest.log
2025-02-10 04:04:36.280 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 30776
2025-02-10 04:04:36.280 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:04:36.818 ERROR [src.node.docker_mananger] Max retries reached for container a6483ed0d2bb. Exiting log stream.
2025-02-10 04:04:37.281 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30776/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:04:37.283 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:04:37.283 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:04:37.284 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30776/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:04:37.286 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.68.119/tcp/30777/p2p/16Uiu2HAmDHoFkt2qsLtbEi7YiuCUXBMJmKBC4JJt8oU9QN99fCmz","/ip4/172.18.68.119/tcp/30778/ws/p2p/16Uiu2HAmDHoFkt2qsLtbEi7YiuCUXBMJmKBC4JJt8oU9QN99fCmz"],"enrUri":"enr:-L24QF2k1DaosZ6roFDNeqrV8uHmmvnTIYIUQZOK2pd0LDU1HB3zNE37U35gnstQVfN7k9cLLYkDsVy_h6UOUVXrY9QCgmlkgnY0gmlwhKwSRHeKbXVsdGlhZGRyc5YACASsEkR3Bng5AAoErBJEdwZ4Ot0DgnJzhQADAQAAiXNlY3AyNTZrMaEDCW3xwEue1ubuWFQYVcOuQnHWU8j42XMLqbHTM9z1TO2DdGNwgng5g3VkcIJ4O4V3YWt1MgM"}'
2025-02-10 04:04:37.286 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:04:37.293 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:04:37.293 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-10_04-04-35__311ea5f3-471e-4fe7-8be0-9c049a0bdd52__wakuorg_nwaku:latest.log
2025-02-10 04:04:37.293 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:04:37.293 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:04:37.294 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:04:37.295 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.28.4
2025-02-10 04:04:37.295 DEBUG [src.node.docker_mananger] Generated ports ['49663', '49664', '49665', '49666', '49667']
2025-02-10 04:04:37.295 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:04:37.295 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:04:37.295 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:04:37.295 DEBUG [src.node.docker_mananger] docker run -i -t -p 49663:49663 -p 49664:49664 -p 49665:49665 -p 49666:49666 -p 49667:49667 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49665 --rest-port=49663 --tcp-port=49664 --discv5-udp-port=49666 --rest-address=0.0.0.0 --nat=extip:172.18.28.4 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=31af4a605fb3c276ffbcbad0541eacebcc8afdecafa8adce5a8c43c43e2d37d1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49667 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QF2k1DaosZ6roFDNeqrV8uHmmvnTIYIUQZOK2pd0LDU1HB3zNE37U35gnstQVfN7k9cLLYkDsVy_h6UOUVXrY9QCgmlkgnY0gmlwhKwSRHeKbXVsdGlhZGRyc5YACASsEkR3Bng5AAoErBJEdwZ4Ot0DgnJzhQADAQAAiXNlY3AyNTZrMaEDCW3xwEue1ubuWFQYVcOuQnHWU8j42XMLqbHTM9z1TO2DdGNwgng5g3VkcIJ4O4V3YWt1MgM --storenode=/ip4/172.18.68.119/tcp/30777/p2p/16Uiu2HAmDHoFkt2qsLtbEi7YiuCUXBMJmKBC4JJt8oU9QN99fCmz --store=true --relay=true
2025-02-10 04:04:37.520 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.28.4 waku 08c4e36a70ee40c30e878612f6a689fd3ddba3a2c868d3bf82ec387727b872a0
2025-02-10 04:04:37.568 DEBUG [src.node.docker_mananger] Container started with ID 08c4e36a70ee. Setting up logs at ./log/docker/store_node1_2025-02-10_04-04-35__311ea5f3-471e-4fe7-8be0-9c049a0bdd52__wakuorg_nwaku:latest.log
2025-02-10 04:04:37.570 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49663
2025-02-10 04:04:37.570 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:04:38.573 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49663/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:04:38.576 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:04:38.576 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:04:38.576 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49663/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:04:38.578 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.28.4/tcp/49664/p2p/16Uiu2HAm5SxoSwpqqNHeCtAZ3k4VqvV23dKZE2w6pre11n6X9f19","/ip4/172.18.28.4/tcp/49665/ws/p2p/16Uiu2HAm5SxoSwpqqNHeCtAZ3k4VqvV23dKZE2w6pre11n6X9f19"],"enrUri":"enr:-L24QO04cnzjXWpFkD1Hp9CH4MjGR2ub_TpNr1Gb1RZBUrx0EipVzLzefxeShHwKkID5xV8nwT7JQGMBcN5tWyxMqoICgmlkgnY0gmlwhKwSHASKbXVsdGlhZGRyc5YACASsEhwEBsIAAAoErBIcBAbCAd0DgnJzhQADAQAAiXNlY3AyNTZrMaEClOl4aP4WMRRIFN0yqv5M7TYF4MonMhxYD6lLuNyI_-CDdGNwgsIAg3VkcILCAoV3YWt1MgM"}'
2025-02-10 04:04:38.578 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:04:38.579 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49663/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.68.119/tcp/30777/p2p/16Uiu2HAmDHoFkt2qsLtbEi7YiuCUXBMJmKBC4JJt8oU9QN99fCmz"]'
2025-02-10 04:04:38.581 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:04:38.582 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30776/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:04:38.584 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:04:38.584 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49663/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:04:38.586 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:04:38.587 DEBUG [src.steps.store] Relaying message
2025-02-10 04:04:38.587 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30776/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:04:38.592 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:04:38.592 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:04:38.793 DEBUG [src.steps.store] Relaying message
2025-02-10 04:04:38.793 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30776/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:04:38.799 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:04:38.800 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:04:39.000 DEBUG [src.steps.store] Relaying message
2025-02-10 04:04:39.001 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30776/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:04:39.006 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:04:39.007 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:04:39.208 DEBUG [src.steps.store] Relaying message
2025-02-10 04:04:39.208 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30776/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:04:39.214 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:04:39.214 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:04:39.415 DEBUG [src.steps.store] Relaying message
2025-02-10 04:04:39.415 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30776/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:04:39.421 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:04:39.421 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:04:39.622 DEBUG [src.steps.store] Relaying message
2025-02-10 04:04:39.622 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30776/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:04:39.629 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:04:39.629 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:04:39.830 DEBUG [src.steps.store] Relaying message
2025-02-10 04:04:39.830 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30776/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:04:39.836 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:04:39.836 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:04:40.037 DEBUG [src.steps.store] Relaying message
2025-02-10 04:04:40.038 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30776/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:04:40.044 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:04:40.045 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:04:40.246 DEBUG [tests.store.test_topics] trying get message with  wrong encoded pubsub topic %23waku%2F2%2Frs%2F3%2F0
2025-02-10 04:04:40.246 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30776/store/v3/messages?includeData=true&pubsubTopic=%23waku%2F2%2Frs%2F3%2F0&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:04:40.250 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-10 04:04:40.250 DEBUG [tests.store.test_topics] response for getting message with wrong encoded pubsub topic {'requestId': '', 'statusCode': 200, 'statusDesc': 'OK', 'messages': []}
2025-02-10 04:04:40.255 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 04:04:40.256 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 04:04:40.256 DEBUG [src.node.waku_node] Stopping container with id a2722cea6afc
2025-02-10 04:04:40.838 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:04:40.839 DEBUG [src.node.waku_node] Stopping container with id 08c4e36a70ee
2025-02-10 04:04:41.652 ERROR [src.node.docker_mananger] Max retries reached for container a2722cea6afc. Exiting log stream.
2025-02-10 04:04:42.357 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:04:42.358 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 04:04:42.366 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:04:42.372 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
