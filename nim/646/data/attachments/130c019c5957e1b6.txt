2025-02-10 04:02:24.076 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 04:02:24.077 DEBUG [tests.conftest] Running test: test_filter_node_not_connected_directly_to_relaying_node with id: 2025-02-10_04-02-24__79841144-20e5-45ca-96af-e464dd132050
2025-02-10 04:02:24.077 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 04:02:24.077 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-10 04:02:24.077 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-10 04:02:24.085 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:02:24.085 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-10_04-02-24__79841144-20e5-45ca-96af-e464dd132050__wakuorg_nwaku:latest.log
2025-02-10 04:02:24.090 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:02:24.090 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-10_04-02-24__79841144-20e5-45ca-96af-e464dd132050__wakuorg_nwaku:latest.log
2025-02-10 04:02:24.096 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:02:24.096 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-10_04-02-24__79841144-20e5-45ca-96af-e464dd132050__wakuorg_nwaku:latest.log
2025-02-10 04:02:24.096 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-10 04:02:24.096 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-10 04:02:24.097 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:02:24.097 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:02:24.162 DEBUG [src.node.docker_mananger] Network waku created
2025-02-10 04:02:24.162 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.220.155
2025-02-10 04:02:24.162 DEBUG [src.node.docker_mananger] Generated ports ['18985', '18986', '18987', '18988', '18989']
2025-02-10 04:02:24.162 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:02:24.163 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:02:24.163 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:02:24.163 DEBUG [src.node.docker_mananger] docker run -i -t -p 18985:18985 -p 18986:18986 -p 18987:18987 -p 18988:18988 -p 18989:18989 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18987 --rest-port=18985 --tcp-port=18986 --discv5-udp-port=18988 --rest-address=0.0.0.0 --nat=extip:172.18.220.155 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e3f4deaf9a8f0a7ab0fb6b859266ce4213e70afeb5b03defac5c7df7c3cc3db1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18989 --metrics-logging=true --filter=true --relay=true
2025-02-10 04:02:27.829 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.220.155 waku 59716514d4a460f8d2e8adf173e2ba3acb3a3866915b159814f87f65247e986b
2025-02-10 04:02:27.883 DEBUG [src.node.docker_mananger] Container started with ID 59716514d4a4. Setting up logs at ./log/docker/node1_2025-02-10_04-02-24__79841144-20e5-45ca-96af-e464dd132050__wakuorg_nwaku:latest.log
2025-02-10 04:02:27.884 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18985
2025-02-10 04:02:27.884 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:02:28.884 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18985/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:02:28.887 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:02:28.887 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:02:28.888 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18985/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:02:28.890 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.220.155/tcp/18986/p2p/16Uiu2HAkyQ27jB8Jmo1e8rpehwksGwsnXP1cxGuLYYhQxr6Q9C6y","/ip4/172.18.220.155/tcp/18987/ws/p2p/16Uiu2HAkyQ27jB8Jmo1e8rpehwksGwsnXP1cxGuLYYhQxr6Q9C6y"],"enrUri":"enr:-L24QD9FVBgu9dG6g8aMNR5RAgRo6qzGpV8d1MtwsO34GVMLOxtbi33BjbIbd6Ft7Mwv9LoZMRLTtqetGS-y0HUvgUUCgmlkgnY0gmlwhKwS3JuKbXVsdGlhZGRyc5YACASsEtybBkoqAAoErBLcmwZKK90DgnJzhQADAQAAiXNlY3AyNTZrMaECOwJa1tQ-EBnvGqhEFEbRcqg7CNVz4xPsXu96SJuVGnaDdGNwgkoqg3VkcIJKLIV3YWt1MgU"}'
2025-02-10 04:02:28.890 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:02:28.890 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:02:28.890 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:02:28.892 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:02:28.892 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.210.247
2025-02-10 04:02:28.892 DEBUG [src.node.docker_mananger] Generated ports ['22700', '22701', '22702', '22703', '22704']
2025-02-10 04:02:28.892 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:02:28.892 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:02:28.892 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:02:28.892 DEBUG [src.node.docker_mananger] docker run -i -t -p 22700:22700 -p 22701:22701 -p 22702:22702 -p 22703:22703 -p 22704:22704 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22702 --rest-port=22700 --tcp-port=22701 --discv5-udp-port=22703 --rest-address=0.0.0.0 --nat=extip:172.18.210.247 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=885aa1de0b405d97f63d2825eebabb0a96dc75c8b0ccbfbeadcc2871be5a44cc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22704 --metrics-logging=true --filter=true --relay=true --discv5-bootstrap-node=enr:-L24QD9FVBgu9dG6g8aMNR5RAgRo6qzGpV8d1MtwsO34GVMLOxtbi33BjbIbd6Ft7Mwv9LoZMRLTtqetGS-y0HUvgUUCgmlkgnY0gmlwhKwS3JuKbXVsdGlhZGRyc5YACASsEtybBkoqAAoErBLcmwZKK90DgnJzhQADAQAAiXNlY3AyNTZrMaECOwJa1tQ-EBnvGqhEFEbRcqg7CNVz4xPsXu96SJuVGnaDdGNwgkoqg3VkcIJKLIV3YWt1MgU
2025-02-10 04:02:29.111 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.210.247 waku 89809e138894b88fc578e81786d125ef519b456681ad92218b8d971737d7e254
2025-02-10 04:02:29.159 DEBUG [src.node.docker_mananger] Container started with ID 89809e138894. Setting up logs at ./log/docker/node2_2025-02-10_04-02-24__79841144-20e5-45ca-96af-e464dd132050__wakuorg_nwaku:latest.log
2025-02-10 04:02:29.159 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22700
2025-02-10 04:02:29.160 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:02:30.160 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22700/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:02:30.172 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:02:30.174 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:02:30.174 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22700/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:02:30.178 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.210.247/tcp/22701/p2p/16Uiu2HAkwVdwA5P9T8GfejqqDbE9CKQVfqqh7i9o521Wg13kzio2","/ip4/172.18.210.247/tcp/22702/ws/p2p/16Uiu2HAkwVdwA5P9T8GfejqqDbE9CKQVfqqh7i9o521Wg13kzio2"],"enrUri":"enr:-L24QI3hxN47OOIcRP8Hd6JmTZs9euFVVp-J6kEYBd5D4edJEHuitCD55f7uL3DWSrOSbtxZUPgHfN4DO-rt1GjECTgCgmlkgnY0gmlwhKwS0veKbXVsdGlhZGRyc5YACASsEtL3BlitAAoErBLS9wZYrt0DgnJzhQADAQAAiXNlY3AyNTZrMaECHrtiYMFUMIpcuQ-U95bw5DCtb0GcKs7_GJiWJRda74mDdGNwglitg3VkcIJYr4V3YWt1MgU"}'
2025-02-10 04:02:30.179 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:02:30.179 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:02:30.180 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:02:30.183 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:02:30.183 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.53.234
2025-02-10 04:02:30.183 DEBUG [src.node.docker_mananger] Generated ports ['50947', '50948', '50949', '50950', '50951']
2025-02-10 04:02:30.183 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:02:30.183 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:02:30.184 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:02:30.184 DEBUG [src.node.docker_mananger] docker run -i -t -p 50947:50947 -p 50948:50948 -p 50949:50949 -p 50950:50950 -p 50951:50951 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50949 --rest-port=50947 --tcp-port=50948 --discv5-udp-port=50950 --rest-address=0.0.0.0 --nat=extip:172.18.53.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=be1e62fc87e2a5f5eeaf7b78d17edaba6794e0fdeee3c52a6bb2ef0efa7be9ff --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50951 --metrics-logging=true --relay=false --filternode=/ip4/172.18.210.247/tcp/22701/p2p/16Uiu2HAkwVdwA5P9T8GfejqqDbE9CKQVfqqh7i9o521Wg13kzio2 --discv5-bootstrap-node=enr:-L24QI3hxN47OOIcRP8Hd6JmTZs9euFVVp-J6kEYBd5D4edJEHuitCD55f7uL3DWSrOSbtxZUPgHfN4DO-rt1GjECTgCgmlkgnY0gmlwhKwS0veKbXVsdGlhZGRyc5YACASsEtL3BlitAAoErBLS9wZYrt0DgnJzhQADAQAAiXNlY3AyNTZrMaECHrtiYMFUMIpcuQ-U95bw5DCtb0GcKs7_GJiWJRda74mDdGNwglitg3VkcIJYr4V3YWt1MgU
2025-02-10 04:02:30.417 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.53.234 waku 2d32187b076c2369c3414eb5928ebbc9af1f93d17daa63002c540990ea1ef00d
2025-02-10 04:02:30.464 DEBUG [src.node.docker_mananger] Container started with ID 2d32187b076c. Setting up logs at ./log/docker/node3_2025-02-10_04-02-24__79841144-20e5-45ca-96af-e464dd132050__wakuorg_nwaku:latest.log
2025-02-10 04:02:30.464 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 50947
2025-02-10 04:02:30.464 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:02:31.465 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50947/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:02:31.468 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:02:31.468 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:02:31.468 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50947/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:02:31.470 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.53.234/tcp/50948/p2p/16Uiu2HAmLZKgGnCA6u6mWF7NzkKzDeKVhPEDvVPzwixTKwXmYRE6","/ip4/172.18.53.234/tcp/50949/ws/p2p/16Uiu2HAmLZKgGnCA6u6mWF7NzkKzDeKVhPEDvVPzwixTKwXmYRE6"],"enrUri":"enr:-L24QCHptGeqsIQ06bMrmHp0uUHWEWlg_YmUL2BgTibjILpqA50_uZTxe95c15d_tesz4TbIsvpOher78ZvjFuJPYl0CgmlkgnY0gmlwhKwSNeqKbXVsdGlhZGRyc5YACASsEjXqBscEAAoErBI16gbHBd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDdWndLtvRPq__qVdMaeeHZK-hTay3r6GO7nhgZURBsy-DdGNwgscEg3VkcILHBoV3YWt1MgA"}'
2025-02-10 04:02:31.470 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:02:31.471 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18985/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-10 04:02:31.475 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:02:31.476 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22700/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-10 04:02:31.481 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:02:31.482 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50947/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-10 04:02:31.526 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
2025-02-10 04:02:31.526 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18985/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:02:31.532 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.210.247/tcp/22701/p2p/16Uiu2HAkwVdwA5P9T8GfejqqDbE9CKQVfqqh7i9o521Wg13kzio2","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-10 04:02:31.533 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22700/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:02:31.537 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.220.155/tcp/18986/p2p/16Uiu2HAkyQ27jB8Jmo1e8rpehwksGwsnXP1cxGuLYYhQxr6Q9C6y","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.53.234/tcp/50948/p2p/16Uiu2HAmLZKgGnCA6u6mWF7NzkKzDeKVhPEDvVPzwixTKwXmYRE6","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-10 04:02:31.537 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50947/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:02:31.540 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.210.247/tcp/22701/p2p/16Uiu2HAkwVdwA5P9T8GfejqqDbE9CKQVfqqh7i9o521Wg13kzio2","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
2025-02-10 04:02:31.540 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-10 04:03:01.541 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18985/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:03:01.548 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:03:01.548 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:03:02.548 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-10 04:03:02.549 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50947/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:02.551 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1739160181541482752,"ephemeral":false}]'
2025-02-10 04:03:02.555 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 04:03:02.555 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 04:03:02.556 DEBUG [src.node.waku_node] Stopping container with id 59716514d4a4
2025-02-10 04:03:03.633 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:03:03.633 DEBUG [src.node.waku_node] Stopping container with id 89809e138894
2025-02-10 04:03:04.443 ERROR [src.node.docker_mananger] Max retries reached for container 59716514d4a4. Exiting log stream.
2025-02-10 04:03:04.930 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:03:04.930 DEBUG [src.node.waku_node] Stopping container with id 2d32187b076c
2025-02-10 04:03:05.741 ERROR [src.node.docker_mananger] Max retries reached for container 89809e138894. Exiting log stream.
2025-02-10 04:03:06.373 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:03:06.374 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 04:03:06.383 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:03:06.395 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:03:06.402 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
