2025-02-10 04:05:08.391 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 04:05:08.391 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_meta with id: 2025-02-10_04-05-08__4097a06a-d060-4515-b43a-b25ff362d4a9
2025-02-10 04:05:08.392 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 04:05:08.392 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-10 04:05:08.398 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:05:08.398 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-10_04-05-08__4097a06a-d060-4515-b43a-b25ff362d4a9__wakuorg_nwaku:latest.log
2025-02-10 04:05:08.398 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:05:08.399 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:05:08.400 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:05:08.400 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.213.243
2025-02-10 04:05:08.400 DEBUG [src.node.docker_mananger] Generated ports ['22065', '22066', '22067', '22068', '22069']
2025-02-10 04:05:08.400 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:05:08.401 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:05:08.401 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:05:08.401 DEBUG [src.node.docker_mananger] docker run -i -t -p 22065:22065 -p 22066:22066 -p 22067:22067 -p 22068:22068 -p 22069:22069 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22067 --rest-port=22065 --tcp-port=22066 --discv5-udp-port=22068 --rest-address=0.0.0.0 --nat=extip:172.18.213.243 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bfccce8065bc9de257b4619a63ad67fc620c085201ca51acde912f397ddb2abf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22069 --metrics-logging=true --lightpush=true --relay=true
2025-02-10 04:05:08.623 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.213.243 waku 896506458b303b400c927c892687ba6123782740364d9c37e43ba688cdc1dcbb
2025-02-10 04:05:08.670 DEBUG [src.node.docker_mananger] Container started with ID 896506458b30. Setting up logs at ./log/docker/receiving_node1_2025-02-10_04-05-08__4097a06a-d060-4515-b43a-b25ff362d4a9__wakuorg_nwaku:latest.log
2025-02-10 04:05:08.671 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22065
2025-02-10 04:05:08.671 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:05:09.193 ERROR [src.node.docker_mananger] Max retries reached for container ddbee3d44c60. Exiting log stream.
2025-02-10 04:05:09.671 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22065/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:05:09.675 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:05:09.675 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:05:09.675 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22065/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:05:09.677 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.213.243/tcp/22066/p2p/16Uiu2HAm1CVBd5bcN6WtXCPGAZveTdsc3XYqtJv75mG7aRUVCijz","/ip4/172.18.213.243/tcp/22067/ws/p2p/16Uiu2HAm1CVBd5bcN6WtXCPGAZveTdsc3XYqtJv75mG7aRUVCijz"],"enrUri":"enr:-L24QF2qMNMe4yQNzTX1hOVSIqUN_5FPe0ejeuVU_vgIHvy0KSTp_OR_bvkLYtcshwTD-XejJgSnLtokO1TAp4iffBkCgmlkgnY0gmlwhKwS1fOKbXVsdGlhZGRyc5YACASsEtXzBlYyAAoErBLV8wZWM90DgnJzhQADAQAAiXNlY3AyNTZrMaECVcVdKV4Q_zzMDNevCRbBurUePdlZzQZljkRClYCSBlmDdGNwglYyg3VkcIJWNIV3YWt1Mgk"}'
2025-02-10 04:05:09.677 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:05:09.684 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:05:09.684 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-10_04-05-08__4097a06a-d060-4515-b43a-b25ff362d4a9__wakuorg_nwaku:latest.log
2025-02-10 04:05:09.684 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:05:09.684 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:05:09.685 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:05:09.686 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.39.89
2025-02-10 04:05:09.686 DEBUG [src.node.docker_mananger] Generated ports ['46330', '46331', '46332', '46333', '46334']
2025-02-10 04:05:09.686 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:05:09.686 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:05:09.686 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:05:09.686 DEBUG [src.node.docker_mananger] docker run -i -t -p 46330:46330 -p 46331:46331 -p 46332:46332 -p 46333:46333 -p 46334:46334 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46332 --rest-port=46330 --tcp-port=46331 --discv5-udp-port=46333 --rest-address=0.0.0.0 --nat=extip:172.18.39.89 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d5459d4a44ae3ecabdbeceda7fc1a7206a9318f89e1d2abcafba3da3d02ec9a7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46334 --metrics-logging=true --lightpush=false --relay=true
2025-02-10 04:05:09.923 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.39.89 waku f4501c99e046e45f4414bd28042166a64248dbd6ddfb2db1a9b2d67f9842a154
2025-02-10 04:05:09.975 DEBUG [src.node.docker_mananger] Container started with ID f4501c99e046. Setting up logs at ./log/docker/receiving_node2_2025-02-10_04-05-08__4097a06a-d060-4515-b43a-b25ff362d4a9__wakuorg_nwaku:latest.log
2025-02-10 04:05:09.976 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46330
2025-02-10 04:05:09.976 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:05:10.976 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46330/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:05:10.979 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:05:10.979 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:05:10.979 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46330/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:05:10.981 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.39.89/tcp/46331/p2p/16Uiu2HAmSQibd7V1Sm85M4Rhm4LjaoTf4tRqNeAqNfHRh9w4QeD6","/ip4/172.18.39.89/tcp/46332/ws/p2p/16Uiu2HAmSQibd7V1Sm85M4Rhm4LjaoTf4tRqNeAqNfHRh9w4QeD6"],"enrUri":"enr:-L24QFXRH3SLFj6jjLfSQMgye4efamTmiw6V1485Y20VN03LPU92WJd-WRHEyiPzskZxiCBJL8S0MnJg9JOKrIIu9mYCgmlkgnY0gmlwhKwSJ1mKbXVsdGlhZGRyc5YACASsEidZBrT7AAoErBInWQa0_N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDzFusfyk35870HhTW53T5XtooprVEDFZWGHOikTlKR3mDdGNwgrT7g3VkcIK0_YV3YWt1MgE"}'
2025-02-10 04:05:10.982 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:05:10.982 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46330/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.213.243/tcp/22066/p2p/16Uiu2HAm1CVBd5bcN6WtXCPGAZveTdsc3XYqtJv75mG7aRUVCijz"]'
2025-02-10 04:05:11.020 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:05:11.030 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:05:11.030 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-10_04-05-08__4097a06a-d060-4515-b43a-b25ff362d4a9__wakuorg_nwaku:latest.log
2025-02-10 04:05:11.030 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:05:11.030 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:05:11.032 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:05:11.032 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.117.236
2025-02-10 04:05:11.032 DEBUG [src.node.docker_mananger] Generated ports ['57171', '57172', '57173', '57174', '57175']
2025-02-10 04:05:11.032 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:05:11.032 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:05:11.032 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:05:11.033 DEBUG [src.node.docker_mananger] docker run -i -t -p 57171:57171 -p 57172:57172 -p 57173:57173 -p 57174:57174 -p 57175:57175 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57173 --rest-port=57171 --tcp-port=57172 --discv5-udp-port=57174 --rest-address=0.0.0.0 --nat=extip:172.18.117.236 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b5b6bdca3c58847cbafbad7c613e74f4cbd558d93598c03be6ccc1fbba97b5d7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57175 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QF2qMNMe4yQNzTX1hOVSIqUN_5FPe0ejeuVU_vgIHvy0KSTp_OR_bvkLYtcshwTD-XejJgSnLtokO1TAp4iffBkCgmlkgnY0gmlwhKwS1fOKbXVsdGlhZGRyc5YACASsEtXzBlYyAAoErBLV8wZWM90DgnJzhQADAQAAiXNlY3AyNTZrMaECVcVdKV4Q_zzMDNevCRbBurUePdlZzQZljkRClYCSBlmDdGNwglYyg3VkcIJWNIV3YWt1Mgk --lightpushnode=/ip4/172.18.213.243/tcp/22066/p2p/16Uiu2HAm1CVBd5bcN6WtXCPGAZveTdsc3XYqtJv75mG7aRUVCijz --lightpush=true --relay=false
2025-02-10 04:05:11.268 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.117.236 waku 0c6302fca26bacaedfb023688f6784125106a6d4f9fff4f3e10f3a9bc69f084c
2025-02-10 04:05:11.315 DEBUG [src.node.docker_mananger] Container started with ID 0c6302fca26b. Setting up logs at ./log/docker/lightpush_node1_2025-02-10_04-05-08__4097a06a-d060-4515-b43a-b25ff362d4a9__wakuorg_nwaku:latest.log
2025-02-10 04:05:11.316 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57171
2025-02-10 04:05:11.316 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:05:12.316 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57171/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:05:12.320 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:05:12.320 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:05:12.320 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57171/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:05:12.322 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.117.236/tcp/57172/p2p/16Uiu2HAm59XzF6SHw7gdACB4z7JTeuqfYqJ2y9KmyEPY1vfc6E6h","/ip4/172.18.117.236/tcp/57173/ws/p2p/16Uiu2HAm59XzF6SHw7gdACB4z7JTeuqfYqJ2y9KmyEPY1vfc6E6h"],"enrUri":"enr:-L24QOVd11YnWFLRcfkKlm2waaS69FwsfoS8zvBjC1cySQw9UtHc9S0BvgGFfK8Oj12-MDnOmfnwuFZMQDhZZAOr2uwCgmlkgnY0gmlwhKwSdeyKbXVsdGlhZGRyc5YACASsEnXsBt9UAAoErBJ17AbfVd0DgnJzhQADAQAAiXNlY3AyNTZrMaECkHKKGpH6PADvKC_rl7VCKnHxceYeE2XIMnRGKmRcKBaDdGNwgt9Ug3VkcILfVoV3YWt1Mgg"}'
2025-02-10 04:05:12.322 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:05:12.323 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57171/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.213.243/tcp/22066/p2p/16Uiu2HAm1CVBd5bcN6WtXCPGAZveTdsc3XYqtJv75mG7aRUVCijz"]'
2025-02-10 04:05:12.361 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:05:12.362 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57171/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.39.89/tcp/46331/p2p/16Uiu2HAmSQibd7V1Sm85M4Rhm4LjaoTf4tRqNeAqNfHRh9w4QeD6"]'
2025-02-10 04:05:12.390 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:05:12.392 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22065/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:05:12.404 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:05:12.404 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46330/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:05:12.408 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:05:12.410 DEBUG [src.steps.light_push] Lightpushing message
2025-02-10 04:05:12.411 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57171/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739160312410752768, "meta": "Light push works!!"}}'
2025-02-10 04:05:12.414 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:57171/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
2025-02-10 04:05:12.417 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 04:05:12.418 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 04:05:12.418 DEBUG [src.node.waku_node] Stopping container with id 896506458b30
2025-02-10 04:05:13.171 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:05:13.172 DEBUG [src.node.waku_node] Stopping container with id f4501c99e046
2025-02-10 04:05:13.984 ERROR [src.node.docker_mananger] Max retries reached for container 896506458b30. Exiting log stream.
2025-02-10 04:05:14.689 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:05:14.689 DEBUG [src.node.waku_node] Stopping container with id 0c6302fca26b
2025-02-10 04:05:15.502 ERROR [src.node.docker_mananger] Max retries reached for container f4501c99e046. Exiting log stream.
2025-02-10 04:05:16.217 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:05:16.220 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 04:05:16.226 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:05:16.231 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:05:16.236 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
