2025-02-10 04:03:46.307 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 04:03:46.307 DEBUG [tests.conftest] Running test: test_light_push_with_payload_less_than_150_kb with id: 2025-02-10_04-03-46__1d56ea74-4b2b-4bd2-bbb6-2cfe3f9adcb5
2025-02-10 04:03:46.308 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 04:03:46.308 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-10 04:03:46.314 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:03:46.314 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-10_04-03-46__1d56ea74-4b2b-4bd2-bbb6-2cfe3f9adcb5__wakuorg_nwaku:latest.log
2025-02-10 04:03:46.314 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:03:46.314 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:03:46.315 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:03:46.315 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.203.93
2025-02-10 04:03:46.316 DEBUG [src.node.docker_mananger] Generated ports ['44969', '44970', '44971', '44972', '44973']
2025-02-10 04:03:46.316 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:03:46.316 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:03:46.316 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:03:46.316 DEBUG [src.node.docker_mananger] docker run -i -t -p 44969:44969 -p 44970:44970 -p 44971:44971 -p 44972:44972 -p 44973:44973 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44971 --rest-port=44969 --tcp-port=44970 --discv5-udp-port=44972 --rest-address=0.0.0.0 --nat=extip:172.18.203.93 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fd50979fb93aab9d5a6cf6b4516f8da330319c93ae663da7e218ee0dd0e8cc9d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44973 --metrics-logging=true --lightpush=true --relay=true
2025-02-10 04:03:46.537 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.203.93 waku a5f6bb6aa3ebd87572c21d91c509f3d1404fd167e5ba77ca88352ca20807d9f7
2025-02-10 04:03:46.587 DEBUG [src.node.docker_mananger] Container started with ID a5f6bb6aa3eb. Setting up logs at ./log/docker/receiving_node1_2025-02-10_04-03-46__1d56ea74-4b2b-4bd2-bbb6-2cfe3f9adcb5__wakuorg_nwaku:latest.log
2025-02-10 04:03:46.587 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44969
2025-02-10 04:03:46.587 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:03:47.108 ERROR [src.node.docker_mananger] Max retries reached for container ea427308a732. Exiting log stream.
2025-02-10 04:03:47.588 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44969/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:47.591 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:03:47.591 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:03:47.591 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44969/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:47.593 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.203.93/tcp/44970/p2p/16Uiu2HAmSrjCKUXtSMzYdXvEMZpdDcTAC5XoJLCzy4eHZu8Prsi4","/ip4/172.18.203.93/tcp/44971/ws/p2p/16Uiu2HAmSrjCKUXtSMzYdXvEMZpdDcTAC5XoJLCzy4eHZu8Prsi4"],"enrUri":"enr:-L24QMzpU9pX1YlaoRoldsFl0YkcvaEJVvyTmqmm08RV2E7cfnl6mKANEscMuQeKx77c42LhHrontDY_UAlicMDuiZoCgmlkgnY0gmlwhKwSy12KbXVsdGlhZGRyc5YACASsEstdBq-qAAoErBLLXQavq90DgnJzhQADAQAAiXNlY3AyNTZrMaED0wVzhL52IBKATgUXChlZWD0HvGNa_NEKOUZUD91Z9b2DdGNwgq-qg3VkcIKvrIV3YWt1Mgk"}'
2025-02-10 04:03:47.593 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:03:47.599 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:03:47.600 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-10_04-03-46__1d56ea74-4b2b-4bd2-bbb6-2cfe3f9adcb5__wakuorg_nwaku:latest.log
2025-02-10 04:03:47.600 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:03:47.600 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:03:47.601 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:03:47.601 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.110.186
2025-02-10 04:03:47.601 DEBUG [src.node.docker_mananger] Generated ports ['44459', '44460', '44461', '44462', '44463']
2025-02-10 04:03:47.601 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:03:47.602 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:03:47.602 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:03:47.602 DEBUG [src.node.docker_mananger] docker run -i -t -p 44459:44459 -p 44460:44460 -p 44461:44461 -p 44462:44462 -p 44463:44463 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44461 --rest-port=44459 --tcp-port=44460 --discv5-udp-port=44462 --rest-address=0.0.0.0 --nat=extip:172.18.110.186 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1e046d9cbaf1b48ce2e1ba919fd39ec5691ca20cd045f2b3f69dda8df4ec33d5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44463 --metrics-logging=true --lightpush=false --relay=true
2025-02-10 04:03:47.818 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.110.186 waku 5792a8147dfaf9a03331114fb4ae4dc19433319a7f2f9ef0732be95de54111a1
2025-02-10 04:03:47.865 DEBUG [src.node.docker_mananger] Container started with ID 5792a8147dfa. Setting up logs at ./log/docker/receiving_node2_2025-02-10_04-03-46__1d56ea74-4b2b-4bd2-bbb6-2cfe3f9adcb5__wakuorg_nwaku:latest.log
2025-02-10 04:03:47.866 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44459
2025-02-10 04:03:47.866 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:03:48.866 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44459/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:48.868 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:03:48.869 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:03:48.869 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44459/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:48.871 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.110.186/tcp/44460/p2p/16Uiu2HAmVJfy1Surpj6zxFpNMXQnGsB9G6A8c6GZyftekUAd4efD","/ip4/172.18.110.186/tcp/44461/ws/p2p/16Uiu2HAmVJfy1Surpj6zxFpNMXQnGsB9G6A8c6GZyftekUAd4efD"],"enrUri":"enr:-L24QBUPTF8QgDVbkTsAelcaJ9RSAIKSLyAfzlYy6oawoh0SEqBfeVy3AioCFH5cV1KENN-FksqFW5hPQ4gQ3N5f9egCgmlkgnY0gmlwhKwSbrqKbXVsdGlhZGRyc5YACASsEm66Bq2sAAoErBJuugatrd0DgnJzhQADAQAAiXNlY3AyNTZrMaED92JGR4hn2hFlFPnjk4EQQwPJAX9T2IHJpCvCX0SNjXSDdGNwgq2sg3VkcIKtroV3YWt1MgE"}'
2025-02-10 04:03:48.871 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:03:48.871 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44459/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.203.93/tcp/44970/p2p/16Uiu2HAmSrjCKUXtSMzYdXvEMZpdDcTAC5XoJLCzy4eHZu8Prsi4"]'
2025-02-10 04:03:48.911 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:03:48.919 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:03:48.920 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-10_04-03-46__1d56ea74-4b2b-4bd2-bbb6-2cfe3f9adcb5__wakuorg_nwaku:latest.log
2025-02-10 04:03:48.920 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:03:48.920 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:03:48.921 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:03:48.921 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.31.102
2025-02-10 04:03:48.922 DEBUG [src.node.docker_mananger] Generated ports ['39768', '39769', '39770', '39771', '39772']
2025-02-10 04:03:48.922 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:03:48.922 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:03:48.922 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:03:48.922 DEBUG [src.node.docker_mananger] docker run -i -t -p 39768:39768 -p 39769:39769 -p 39770:39770 -p 39771:39771 -p 39772:39772 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39770 --rest-port=39768 --tcp-port=39769 --discv5-udp-port=39771 --rest-address=0.0.0.0 --nat=extip:172.18.31.102 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=36adf5cbebdc90c2bfc82dbd9dc3cbaafda2c0d03c4399fa58c99be36d402aaf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39772 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMzpU9pX1YlaoRoldsFl0YkcvaEJVvyTmqmm08RV2E7cfnl6mKANEscMuQeKx77c42LhHrontDY_UAlicMDuiZoCgmlkgnY0gmlwhKwSy12KbXVsdGlhZGRyc5YACASsEstdBq-qAAoErBLLXQavq90DgnJzhQADAQAAiXNlY3AyNTZrMaED0wVzhL52IBKATgUXChlZWD0HvGNa_NEKOUZUD91Z9b2DdGNwgq-qg3VkcIKvrIV3YWt1Mgk --lightpushnode=/ip4/172.18.203.93/tcp/44970/p2p/16Uiu2HAmSrjCKUXtSMzYdXvEMZpdDcTAC5XoJLCzy4eHZu8Prsi4 --lightpush=true --relay=false
2025-02-10 04:03:49.155 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.31.102 waku 0094b87f727acf482f8319dc8e5442ba83fa066f24850583238c9f295ede1a2f
2025-02-10 04:03:49.201 DEBUG [src.node.docker_mananger] Container started with ID 0094b87f727a. Setting up logs at ./log/docker/lightpush_node1_2025-02-10_04-03-46__1d56ea74-4b2b-4bd2-bbb6-2cfe3f9adcb5__wakuorg_nwaku:latest.log
2025-02-10 04:03:49.202 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 39768
2025-02-10 04:03:49.202 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:03:50.202 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39768/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:50.205 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:03:50.205 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:03:50.206 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39768/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:50.207 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.31.102/tcp/39769/p2p/16Uiu2HAm4TdSf77zpX7SyP6SSacvtxhY3aRgxESEoFQgV4BQLQb1","/ip4/172.18.31.102/tcp/39770/ws/p2p/16Uiu2HAm4TdSf77zpX7SyP6SSacvtxhY3aRgxESEoFQgV4BQLQb1"],"enrUri":"enr:-L24QNMqZa-5ogRBBzk8gcNaS1anCi38pcVRn-OGr0OyvcTlLrSWnDHwHhHWoaqv-BTXHzPLAoIfrmAHDA28uu3eUdICgmlkgnY0gmlwhKwSH2aKbXVsdGlhZGRyc5YACASsEh9mBptZAAoErBIfZgabWt0DgnJzhQADAQAAiXNlY3AyNTZrMaEChjl5vlv8tihmeAP6ZphdogpFL9rvExkHojM2KQE6WViDdGNwgptZg3VkcIKbW4V3YWt1Mgg"}'
2025-02-10 04:03:50.208 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:03:50.208 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39768/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.203.93/tcp/44970/p2p/16Uiu2HAmSrjCKUXtSMzYdXvEMZpdDcTAC5XoJLCzy4eHZu8Prsi4"]'
2025-02-10 04:03:50.245 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:03:50.245 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39768/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.110.186/tcp/44460/p2p/16Uiu2HAmVJfy1Surpj6zxFpNMXQnGsB9G6A8c6GZyftekUAd4efD"]'
2025-02-10 04:03:50.273 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:03:50.274 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44969/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:03:50.283 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:03:50.284 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44459/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:03:50.289 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:03:50.291 DEBUG [tests.light_push.test_publish] Running test with payload length of 143360 bytes
2025-02-10 04:03:50.292 DEBUG [src.steps.light_push] Lightpushing message
2025-02-10 04:03:50.294 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-10 04:03:50.447 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:03:50.447 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-10 04:03:50.547 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-10 04:03:50.547 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44969/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:50.552 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-10 04:03:50.555 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-10 04:03:50.555 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44459/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:50.559 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-10 04:03:50.563 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 04:03:50.564 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 04:03:50.564 DEBUG [src.node.waku_node] Stopping container with id a5f6bb6aa3eb
2025-02-10 04:03:52.089 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:03:52.090 DEBUG [src.node.waku_node] Stopping container with id 5792a8147dfa
2025-02-10 04:03:52.902 ERROR [src.node.docker_mananger] Max retries reached for container a5f6bb6aa3eb. Exiting log stream.
2025-02-10 04:03:53.598 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:03:53.598 DEBUG [src.node.waku_node] Stopping container with id 0094b87f727a
2025-02-10 04:03:54.409 ERROR [src.node.docker_mananger] Max retries reached for container 5792a8147dfa. Exiting log stream.
2025-02-10 04:03:55.096 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:03:55.098 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 04:03:55.105 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:03:55.111 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:03:55.130 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
