2025-02-10 04:07:36.114 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 04:07:36.114 DEBUG [tests.conftest] Running test: test_store_with_wrong_url_content_topic with id: 2025-02-10_04-07-36__a7319388-d18b-4021-bcc7-6a186d95d81e
2025-02-10 04:07:36.114 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 04:07:36.115 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-10 04:07:36.115 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-10 04:07:36.121 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:07:36.121 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-10_04-07-36__a7319388-d18b-4021-bcc7-6a186d95d81e__wakuorg_nwaku:latest.log
2025-02-10 04:07:36.121 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:07:36.122 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:07:36.123 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:07:36.123 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.234.71
2025-02-10 04:07:36.123 DEBUG [src.node.docker_mananger] Generated ports ['5288', '5289', '5290', '5291', '5292']
2025-02-10 04:07:36.123 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:07:36.124 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:07:36.124 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:07:36.124 DEBUG [src.node.docker_mananger] docker run -i -t -p 5288:5288 -p 5289:5289 -p 5290:5290 -p 5291:5291 -p 5292:5292 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5290 --rest-port=5288 --tcp-port=5289 --discv5-udp-port=5291 --rest-address=0.0.0.0 --nat=extip:172.18.234.71 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ac158ffe5c6fadf7bfd8ffa29ebdf2ed0dd0dce2498600e1a4e1b1485f345e34 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5292 --metrics-logging=true --store=true --relay=true
2025-02-10 04:07:36.351 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.234.71 waku c3705cb5057379205601598ac287c4f7f9d6c75d756f76351e4f4f379ec5fa41
2025-02-10 04:07:36.408 DEBUG [src.node.docker_mananger] Container started with ID c3705cb50573. Setting up logs at ./log/docker/publishing_node1_2025-02-10_04-07-36__a7319388-d18b-4021-bcc7-6a186d95d81e__wakuorg_nwaku:latest.log
2025-02-10 04:07:36.410 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 5288
2025-02-10 04:07:36.412 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:07:36.918 ERROR [src.node.docker_mananger] Max retries reached for container 863b1708d1f4. Exiting log stream.
2025-02-10 04:07:37.413 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5288/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:37.415 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:07:37.415 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:07:37.416 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5288/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:37.418 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.234.71/tcp/5289/p2p/16Uiu2HAmCc1RRAk7uDB2Vn65UdAUBYcF4aZXGVkZ2JmCWGKGWPfL","/ip4/172.18.234.71/tcp/5290/ws/p2p/16Uiu2HAmCc1RRAk7uDB2Vn65UdAUBYcF4aZXGVkZ2JmCWGKGWPfL"],"enrUri":"enr:-L24QHlIWm9NDQOSKFoyToSqQlPi3ux1Kvnzd2jzfXPOb5XBSRIfY3J7xKhQ1dcdTxWW3FqwpxAn7ZItk6zeKC6sR6wCgmlkgnY0gmlwhKwS6keKbXVsdGlhZGRyc5YACASsEupHBhSpAAoErBLqRwYUqt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_zx3_5x7lx5jRzFgScv941ePcuAnll7gCw6--qM8Rr-DdGNwghSpg3VkcIIUq4V3YWt1MgM"}'
2025-02-10 04:07:37.418 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:07:37.425 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:07:37.425 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-10_04-07-36__a7319388-d18b-4021-bcc7-6a186d95d81e__wakuorg_nwaku:latest.log
2025-02-10 04:07:37.425 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:07:37.425 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:07:37.426 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:07:37.427 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.15.153
2025-02-10 04:07:37.427 DEBUG [src.node.docker_mananger] Generated ports ['7969', '7970', '7971', '7972', '7973']
2025-02-10 04:07:37.427 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:07:37.427 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:07:37.427 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:07:37.427 DEBUG [src.node.docker_mananger] docker run -i -t -p 7969:7969 -p 7970:7970 -p 7971:7971 -p 7972:7972 -p 7973:7973 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7971 --rest-port=7969 --tcp-port=7970 --discv5-udp-port=7972 --rest-address=0.0.0.0 --nat=extip:172.18.15.153 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5fae3c829dc3cfbdbadccbc819cdbacf0e8e1f4b655cebbd1f13d1005f70c3b4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7973 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QHlIWm9NDQOSKFoyToSqQlPi3ux1Kvnzd2jzfXPOb5XBSRIfY3J7xKhQ1dcdTxWW3FqwpxAn7ZItk6zeKC6sR6wCgmlkgnY0gmlwhKwS6keKbXVsdGlhZGRyc5YACASsEupHBhSpAAoErBLqRwYUqt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_zx3_5x7lx5jRzFgScv941ePcuAnll7gCw6--qM8Rr-DdGNwghSpg3VkcIIUq4V3YWt1MgM --storenode=/ip4/172.18.234.71/tcp/5289/p2p/16Uiu2HAmCc1RRAk7uDB2Vn65UdAUBYcF4aZXGVkZ2JmCWGKGWPfL --store=true --relay=true
2025-02-10 04:07:37.667 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.15.153 waku dabdbbac8dbb7c432e020950786529cb0b8c6d7a3793a73a3c50a53b5763f8d4
2025-02-10 04:07:37.716 DEBUG [src.node.docker_mananger] Container started with ID dabdbbac8dbb. Setting up logs at ./log/docker/store_node1_2025-02-10_04-07-36__a7319388-d18b-4021-bcc7-6a186d95d81e__wakuorg_nwaku:latest.log
2025-02-10 04:07:37.717 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7969
2025-02-10 04:07:37.717 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:07:38.718 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7969/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:38.721 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:07:38.721 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:07:38.721 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7969/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:38.723 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.15.153/tcp/7970/p2p/16Uiu2HAmS6tScLvAyqVKV534UK45619CWJxuKp4Ah35SSVYhExGd","/ip4/172.18.15.153/tcp/7971/ws/p2p/16Uiu2HAmS6tScLvAyqVKV534UK45619CWJxuKp4Ah35SSVYhExGd"],"enrUri":"enr:-L24QOd_aI7VcOpR1WNHt3p51pQZ_WFSypBwt9duB0HEIxe-br8zdr5PAYiBZK2NFE3KH95bQAatDhDKDN_u1pF44DkCgmlkgnY0gmlwhKwSD5mKbXVsdGlhZGRyc5YACASsEg-ZBh8iAAoErBIPmQYfI90DgnJzhQADAQAAiXNlY3AyNTZrMaEDx8pZv1T9xmAnDlFBMD7fv_lpJ7Nu5lHlS1NKYaenQa6DdGNwgh8ig3VkcIIfJIV3YWt1MgM"}'
2025-02-10 04:07:38.723 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:07:38.724 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7969/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.234.71/tcp/5289/p2p/16Uiu2HAmCc1RRAk7uDB2Vn65UdAUBYcF4aZXGVkZ2JmCWGKGWPfL"]'
2025-02-10 04:07:38.726 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:38.727 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5288/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:07:38.729 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:38.729 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7969/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:07:38.732 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:38.732 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:38.733 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5288/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:38.738 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:38.738 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:38.939 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:38.939 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5288/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:38.946 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:38.946 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:39.147 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:39.148 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5288/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:39.154 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:39.155 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:39.356 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:39.356 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5288/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:39.362 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:39.362 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:39.563 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:39.564 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5288/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:39.569 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:39.570 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:39.770 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:39.771 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5288/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:39.777 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:39.777 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:39.978 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:39.978 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5288/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:39.985 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:39.986 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:40.186 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:40.187 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5288/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:40.193 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:40.193 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:40.395 DEBUG [tests.store.test_topics] trying to find stored messages with wrong content_topic =myapp/1/latest/proto
2025-02-10 04:07:40.395 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5288/store/v3/messages?includeData=true&contentTopics=myapp%2F1%2Flatest%2Fproto&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:40.399 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-10 04:07:40.399 DEBUG [tests.store.test_topics]  response for wrong url content topic is {'requestId': '', 'statusCode': 200, 'statusDesc': 'OK', 'messages': []}
2025-02-10 04:07:40.402 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 04:07:40.403 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 04:07:40.403 DEBUG [src.node.waku_node] Stopping container with id c3705cb50573
2025-02-10 04:07:40.930 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:07:40.930 DEBUG [src.node.waku_node] Stopping container with id dabdbbac8dbb
2025-02-10 04:07:41.743 ERROR [src.node.docker_mananger] Max retries reached for container c3705cb50573. Exiting log stream.
2025-02-10 04:07:42.466 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:07:42.468 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 04:07:42.473 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:07:42.479 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
