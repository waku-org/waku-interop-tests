2025-02-10 04:03:03.645 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 04:03:03.646 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_pubsub_topic_string_instead_of_list with id: 2025-02-10_04-03-03__67279c31-537c-4f4b-9bd9-cf249693da97
2025-02-10 04:03:03.646 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 04:03:03.646 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-10 04:03:03.646 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-10 04:03:03.653 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:03:03.653 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-10_04-03-03__67279c31-537c-4f4b-9bd9-cf249693da97__wakuorg_nwaku:latest.log
2025-02-10 04:03:03.653 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:03:03.653 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:03:03.654 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:03:03.655 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.104.56
2025-02-10 04:03:03.655 DEBUG [src.node.docker_mananger] Generated ports ['33674', '33675', '33676', '33677', '33678']
2025-02-10 04:03:03.655 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:03:03.655 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:03:03.655 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:03:03.655 DEBUG [src.node.docker_mananger] docker run -i -t -p 33674:33674 -p 33675:33675 -p 33676:33676 -p 33677:33677 -p 33678:33678 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33676 --rest-port=33674 --tcp-port=33675 --discv5-udp-port=33677 --rest-address=0.0.0.0 --nat=extip:172.18.104.56 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d7b5ce8fe9ddfeeea1b7b7d1df9cd2dcdcdd6c4deaee8bf86ee6deeacdddc4ff --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33678 --metrics-logging=true --relay=true --filter=true
2025-02-10 04:03:03.881 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.104.56 waku c6d92b58327440ec923326a6d344b782113bbe9da8bf76c699a865fcc9ccd674
2025-02-10 04:03:03.930 DEBUG [src.node.docker_mananger] Container started with ID c6d92b583274. Setting up logs at ./log/docker/node1_2025-02-10_04-03-03__67279c31-537c-4f4b-9bd9-cf249693da97__wakuorg_nwaku:latest.log
2025-02-10 04:03:03.930 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 33674
2025-02-10 04:03:03.931 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:03:04.449 ERROR [src.node.docker_mananger] Max retries reached for container a23fe42b76ea. Exiting log stream.
2025-02-10 04:03:04.931 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33674/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:04.934 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:03:04.934 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:03:04.934 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33674/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:04.937 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.56/tcp/33675/p2p/16Uiu2HAm8ydYHwfTjDxmvV72ae1Xmy7UxqmVZHKU9miFHCvjACXC","/ip4/172.18.104.56/tcp/33676/ws/p2p/16Uiu2HAm8ydYHwfTjDxmvV72ae1Xmy7UxqmVZHKU9miFHCvjACXC"],"enrUri":"enr:-L24QISzz5rMDNlCr1zbyArSqFNk1m0ooVVn_VIn65OOc6LvHcmC7kCw5zeCyviQmhwvQf3XPtEWwnlLMclP39A_eiMCgmlkgnY0gmlwhKwSaDiKbXVsdGlhZGRyc5YACASsEmg4BoOLAAoErBJoOAaDjN0DgnJzhQADAQAAiXNlY3AyNTZrMaECyVfB5JzLkFJ1N91tQaUdja9Iw7-CdwfrS6sVi2Dt5kuDdGNwgoOLg3VkcIKDjYV3YWt1MgU"}'
2025-02-10 04:03:04.937 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:03:04.937 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-10 04:03:04.943 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:03:04.943 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-10_04-03-03__67279c31-537c-4f4b-9bd9-cf249693da97__wakuorg_nwaku:latest.log
2025-02-10 04:03:04.944 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:03:04.944 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:03:04.945 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:03:04.945 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.10.191
2025-02-10 04:03:04.945 DEBUG [src.node.docker_mananger] Generated ports ['32969', '32970', '32971', '32972', '32973']
2025-02-10 04:03:04.945 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:03:04.946 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:03:04.946 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:03:04.946 DEBUG [src.node.docker_mananger] docker run -i -t -p 32969:32969 -p 32970:32970 -p 32971:32971 -p 32972:32972 -p 32973:32973 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32971 --rest-port=32969 --tcp-port=32970 --discv5-udp-port=32972 --rest-address=0.0.0.0 --nat=extip:172.18.10.191 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5ceae65aaabbea74bafc311cbb1ece8be795d05d8e0addbbd4c9daecfa90d4ad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32973 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QISzz5rMDNlCr1zbyArSqFNk1m0ooVVn_VIn65OOc6LvHcmC7kCw5zeCyviQmhwvQf3XPtEWwnlLMclP39A_eiMCgmlkgnY0gmlwhKwSaDiKbXVsdGlhZGRyc5YACASsEmg4BoOLAAoErBJoOAaDjN0DgnJzhQADAQAAiXNlY3AyNTZrMaECyVfB5JzLkFJ1N91tQaUdja9Iw7-CdwfrS6sVi2Dt5kuDdGNwgoOLg3VkcIKDjYV3YWt1MgU --filternode=/ip4/172.18.104.56/tcp/33675/p2p/16Uiu2HAm8ydYHwfTjDxmvV72ae1Xmy7UxqmVZHKU9miFHCvjACXC
2025-02-10 04:03:05.178 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.10.191 waku f641bd48ebbe1fdc9795afefd6639bbfb7c2c2d4d61255766fdb3fdd3ce91fe8
2025-02-10 04:03:05.229 DEBUG [src.node.docker_mananger] Container started with ID f641bd48ebbe. Setting up logs at ./log/docker/node2_2025-02-10_04-03-03__67279c31-537c-4f4b-9bd9-cf249693da97__wakuorg_nwaku:latest.log
2025-02-10 04:03:05.229 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32969
2025-02-10 04:03:05.229 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:03:06.230 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32969/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:06.233 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:03:06.233 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:03:06.233 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32969/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:06.236 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.10.191/tcp/32970/p2p/16Uiu2HAkyEeAcXwtB3S7LhGb13nht1nE4syxo5W8rfosu5vd4fjQ","/ip4/172.18.10.191/tcp/32971/ws/p2p/16Uiu2HAkyEeAcXwtB3S7LhGb13nht1nE4syxo5W8rfosu5vd4fjQ"],"enrUri":"enr:-L24QDUD-r3cSk4NfYaI-9D5fh4Qdg8z6ObbLGU-_Pb6pIoKGlsnZoeFGs2vYGT1giRCesqMQQX3XiomKJDxIgMxXNsCgmlkgnY0gmlwhKwSCr-KbXVsdGlhZGRyc5YACASsEgq_BoDKAAoErBIKvwaAy90DgnJzhQADAQAAiXNlY3AyNTZrMaECOJtO7tlWcaZEK6nLewRwlJopV6okiR91zSySbuNmhMuDdGNwgoDKg3VkcIKAzIV3YWt1MgA"}'
2025-02-10 04:03:06.236 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:03:06.236 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32969/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.104.56/tcp/33675/p2p/16Uiu2HAm8ydYHwfTjDxmvV72ae1Xmy7UxqmVZHKU9miFHCvjACXC"]'
2025-02-10 04:03:06.275 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:03:06.276 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-10 04:03:06.276 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33674/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-10 04:03:06.291 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:03:06.293 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32969/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "69e0a666-b8e1-40de-9235-0d794ad0901a", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-10 04:03:06.304 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"69e0a666-b8e1-40de-9235-0d794ad0901a","statusDesc":"OK"}'
2025-02-10 04:03:06.305 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:32969/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": "/test/1/waku-filter/proto", "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-10 04:03:06.307 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:32969/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
2025-02-10 04:03:06.309 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 04:03:06.310 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 04:03:06.310 DEBUG [src.node.waku_node] Stopping container with id c6d92b583274
2025-02-10 04:03:07.394 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:03:07.394 DEBUG [src.node.waku_node] Stopping container with id f641bd48ebbe
2025-02-10 04:03:08.206 ERROR [src.node.docker_mananger] Max retries reached for container c6d92b583274. Exiting log stream.
2025-02-10 04:03:08.890 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:03:08.890 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 04:03:08.895 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:03:08.899 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
