2025-02-10 04:03:28.031 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 04:03:28.032 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_no_request_id with id: 2025-02-10_04-03-28__e433122c-f465-4633-8551-b68a126cb6db
2025-02-10 04:03:28.032 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 04:03:28.032 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-10 04:03:28.033 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-10 04:03:28.039 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:03:28.040 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-10_04-03-28__e433122c-f465-4633-8551-b68a126cb6db__wakuorg_nwaku:latest.log
2025-02-10 04:03:28.040 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:03:28.040 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:03:28.041 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:03:28.041 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.106.101
2025-02-10 04:03:28.042 DEBUG [src.node.docker_mananger] Generated ports ['42339', '42340', '42341', '42342', '42343']
2025-02-10 04:03:28.042 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:03:28.042 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:03:28.042 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:03:28.042 DEBUG [src.node.docker_mananger] docker run -i -t -p 42339:42339 -p 42340:42340 -p 42341:42341 -p 42342:42342 -p 42343:42343 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42341 --rest-port=42339 --tcp-port=42340 --discv5-udp-port=42342 --rest-address=0.0.0.0 --nat=extip:172.18.106.101 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d3d725abfabeac9d8aefbdeb1f73739e9e80d1afeadfa3cc2ce8b8b23cddffad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42343 --metrics-logging=true --relay=true --filter=true
2025-02-10 04:03:28.295 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.106.101 waku fe3ca3b176c8ff053dfd6d85feec3215fd106bfa6a934eba6bd4967f4d43b477
2025-02-10 04:03:28.348 DEBUG [src.node.docker_mananger] Container started with ID fe3ca3b176c8. Setting up logs at ./log/docker/node1_2025-02-10_04-03-28__e433122c-f465-4633-8551-b68a126cb6db__wakuorg_nwaku:latest.log
2025-02-10 04:03:28.349 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42339
2025-02-10 04:03:28.349 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:03:28.761 ERROR [src.node.docker_mananger] Max retries reached for container 2e960e773c7c. Exiting log stream.
2025-02-10 04:03:29.349 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42339/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:29.352 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:03:29.353 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:03:29.353 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42339/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:29.355 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.106.101/tcp/42340/p2p/16Uiu2HAmT81kTqG4uJWgF1YahHfqjZF9KRuHthr9RqCRoDXxdQQs","/ip4/172.18.106.101/tcp/42341/ws/p2p/16Uiu2HAmT81kTqG4uJWgF1YahHfqjZF9KRuHthr9RqCRoDXxdQQs"],"enrUri":"enr:-L24QM7EJVVFx5CFB1v1UOXFXByBuYfvVsFtdlAB2Igy5uRseILVoLiXMrlxmo4-jMlHS64bqK5kLdiL5qrhCA6uGbACgmlkgnY0gmlwhKwSamWKbXVsdGlhZGRyc5YACASsEmplBqVkAAoErBJqZQalZd0DgnJzhQADAQAAiXNlY3AyNTZrMaED1u_hm81fZCelfTFs-FGTTNlVVYB-_MNPwvvw8NpGvHSDdGNwgqVkg3VkcIKlZoV3YWt1MgU"}'
2025-02-10 04:03:29.356 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:03:29.356 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-10 04:03:29.362 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:03:29.363 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-10_04-03-28__e433122c-f465-4633-8551-b68a126cb6db__wakuorg_nwaku:latest.log
2025-02-10 04:03:29.363 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:03:29.363 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:03:29.364 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:03:29.365 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.0.158
2025-02-10 04:03:29.365 DEBUG [src.node.docker_mananger] Generated ports ['6135', '6136', '6137', '6138', '6139']
2025-02-10 04:03:29.365 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:03:29.365 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:03:29.365 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:03:29.365 DEBUG [src.node.docker_mananger] docker run -i -t -p 6135:6135 -p 6136:6136 -p 6137:6137 -p 6138:6138 -p 6139:6139 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6137 --rest-port=6135 --tcp-port=6136 --discv5-udp-port=6138 --rest-address=0.0.0.0 --nat=extip:172.18.0.158 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8979cedcceb27fc05caba4bccfd904fb95fe4bb74c41b43efd8ce75853bd63f7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6139 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QM7EJVVFx5CFB1v1UOXFXByBuYfvVsFtdlAB2Igy5uRseILVoLiXMrlxmo4-jMlHS64bqK5kLdiL5qrhCA6uGbACgmlkgnY0gmlwhKwSamWKbXVsdGlhZGRyc5YACASsEmplBqVkAAoErBJqZQalZd0DgnJzhQADAQAAiXNlY3AyNTZrMaED1u_hm81fZCelfTFs-FGTTNlVVYB-_MNPwvvw8NpGvHSDdGNwgqVkg3VkcIKlZoV3YWt1MgU --filternode=/ip4/172.18.106.101/tcp/42340/p2p/16Uiu2HAmT81kTqG4uJWgF1YahHfqjZF9KRuHthr9RqCRoDXxdQQs
2025-02-10 04:03:29.601 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.0.158 waku bff4b4ad7d24f18626e66ea9373c9aeca51fb45a3690d0de633d13fa8c46613c
2025-02-10 04:03:29.651 DEBUG [src.node.docker_mananger] Container started with ID bff4b4ad7d24. Setting up logs at ./log/docker/node2_2025-02-10_04-03-28__e433122c-f465-4633-8551-b68a126cb6db__wakuorg_nwaku:latest.log
2025-02-10 04:03:29.652 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6135
2025-02-10 04:03:29.652 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:03:30.653 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6135/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:30.656 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:03:30.657 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:03:30.657 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6135/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:30.659 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.0.158/tcp/6136/p2p/16Uiu2HAm4VSaW2gsTMX23SGLcCJjiULDxfjQrZDAoc1giMiZ6R1Z","/ip4/172.18.0.158/tcp/6137/ws/p2p/16Uiu2HAm4VSaW2gsTMX23SGLcCJjiULDxfjQrZDAoc1giMiZ6R1Z"],"enrUri":"enr:-L24QDJ3BVEbQkwIvpQdkAj4Gi1NySkr6c7oASyKiDkLQuNoTABzBo0ugcEstbSAZb9f2eoy7kXFqI-00y-pE9ITUKcCgmlkgnY0gmlwhKwSAJ6KbXVsdGlhZGRyc5YACASsEgCeBhf4AAoErBIAngYX-d0DgnJzhQADAQAAiXNlY3AyNTZrMaEChrBaM3ZytHoLn_7g7FepmX4ivXsUujtEmsDu8SozVWiDdGNwghf4g3VkcIIX-oV3YWt1MgA"}'
2025-02-10 04:03:30.660 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:03:30.660 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6135/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.106.101/tcp/42340/p2p/16Uiu2HAmT81kTqG4uJWgF1YahHfqjZF9KRuHthr9RqCRoDXxdQQs"]'
2025-02-10 04:03:30.701 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:03:30.702 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-10 04:03:30.702 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42339/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-10 04:03:30.721 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:03:30.723 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6135/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "f48dca02-e288-432d-93b3-ad405bafcb56", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-10 04:03:30.735 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"f48dca02-e288-432d-93b3-ad405bafcb56","statusDesc":"OK"}'
2025-02-10 04:03:30.736 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:6135/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-10 04:03:30.739 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:6135/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
2025-02-10 04:03:30.743 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 04:03:30.743 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 04:03:30.744 DEBUG [src.node.waku_node] Stopping container with id fe3ca3b176c8
2025-02-10 04:03:31.880 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:03:31.881 DEBUG [src.node.waku_node] Stopping container with id bff4b4ad7d24
2025-02-10 04:03:32.696 ERROR [src.node.docker_mananger] Max retries reached for container fe3ca3b176c8. Exiting log stream.
2025-02-10 04:03:33.405 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:03:33.405 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 04:03:33.410 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:03:33.414 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
