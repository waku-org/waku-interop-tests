2025-02-10 04:07:47.922 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 04:07:47.923 DEBUG [tests.conftest] Running test: test_store_without_pubsub_topic_and_content_topic with id: 2025-02-10_04-07-47__4c611ae8-4c87-46a3-b405-60da17b8ed05
2025-02-10 04:07:47.923 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 04:07:47.923 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-10 04:07:47.923 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-10 04:07:47.930 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:07:47.930 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-10_04-07-47__4c611ae8-4c87-46a3-b405-60da17b8ed05__wakuorg_nwaku:latest.log
2025-02-10 04:07:47.930 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:07:47.930 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:07:47.931 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:07:47.932 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.104.144
2025-02-10 04:07:47.932 DEBUG [src.node.docker_mananger] Generated ports ['57031', '57032', '57033', '57034', '57035']
2025-02-10 04:07:47.932 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:07:47.932 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:07:47.932 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:07:47.932 DEBUG [src.node.docker_mananger] docker run -i -t -p 57031:57031 -p 57032:57032 -p 57033:57033 -p 57034:57034 -p 57035:57035 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57033 --rest-port=57031 --tcp-port=57032 --discv5-udp-port=57034 --rest-address=0.0.0.0 --nat=extip:172.18.104.144 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a727ada521ede56a5921da89973f0b58df8aeaf7ecbb66425f94e2cbfb6d7aab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57035 --metrics-logging=true --store=true --relay=true
2025-02-10 04:07:48.167 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.104.144 waku 02b32904a3a43f7668140cbd97212c0dc2059dffa5b9596fe680dec7254de9d0
2025-02-10 04:07:48.219 DEBUG [src.node.docker_mananger] Container started with ID 02b32904a3a4. Setting up logs at ./log/docker/publishing_node1_2025-02-10_04-07-47__4c611ae8-4c87-46a3-b405-60da17b8ed05__wakuorg_nwaku:latest.log
2025-02-10 04:07:48.220 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57031
2025-02-10 04:07:48.220 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:07:48.713 ERROR [src.node.docker_mananger] Max retries reached for container 8b61e43032cb. Exiting log stream.
2025-02-10 04:07:49.220 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57031/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:49.223 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:07:49.223 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:07:49.223 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57031/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:49.226 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.144/tcp/57032/p2p/16Uiu2HAm2JyGhDJM5rJDENYGJ3VpubxQXzv4c2KwZseH7ocuf5iN","/ip4/172.18.104.144/tcp/57033/ws/p2p/16Uiu2HAm2JyGhDJM5rJDENYGJ3VpubxQXzv4c2KwZseH7ocuf5iN"],"enrUri":"enr:-L24QHL23SePwZ4-rYtkfi-yCYggTeShRuBV9CoFt-o6GPxrE7zWhdnqBxlhl-F3STDdXJ3OZdhU5jzQUwA69ts5so4CgmlkgnY0gmlwhKwSaJCKbXVsdGlhZGRyc5YACASsEmiQBt7IAAoErBJokAbeyd0DgnJzhQADAQAAiXNlY3AyNTZrMaECZkpLVHoLXoUC3iueaGd8p86GDUqgUNxc7GLLI0iv1H-DdGNwgt7Ig3VkcILeyoV3YWt1MgM"}'
2025-02-10 04:07:49.226 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:07:49.233 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:07:49.233 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-10_04-07-47__4c611ae8-4c87-46a3-b405-60da17b8ed05__wakuorg_nwaku:latest.log
2025-02-10 04:07:49.233 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:07:49.233 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:07:49.234 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:07:49.235 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.113.105
2025-02-10 04:07:49.235 DEBUG [src.node.docker_mananger] Generated ports ['4547', '4548', '4549', '4550', '4551']
2025-02-10 04:07:49.235 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:07:49.235 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:07:49.235 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:07:49.235 DEBUG [src.node.docker_mananger] docker run -i -t -p 4547:4547 -p 4548:4548 -p 4549:4549 -p 4550:4550 -p 4551:4551 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4549 --rest-port=4547 --tcp-port=4548 --discv5-udp-port=4550 --rest-address=0.0.0.0 --nat=extip:172.18.113.105 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9dd8964d9f20cd41f441bbdc3fb69b68fc67b8a8ce3904a113fe5b4bdfacdcfe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4551 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QHL23SePwZ4-rYtkfi-yCYggTeShRuBV9CoFt-o6GPxrE7zWhdnqBxlhl-F3STDdXJ3OZdhU5jzQUwA69ts5so4CgmlkgnY0gmlwhKwSaJCKbXVsdGlhZGRyc5YACASsEmiQBt7IAAoErBJokAbeyd0DgnJzhQADAQAAiXNlY3AyNTZrMaECZkpLVHoLXoUC3iueaGd8p86GDUqgUNxc7GLLI0iv1H-DdGNwgt7Ig3VkcILeyoV3YWt1MgM --storenode=/ip4/172.18.104.144/tcp/57032/p2p/16Uiu2HAm2JyGhDJM5rJDENYGJ3VpubxQXzv4c2KwZseH7ocuf5iN --store=true --relay=true
2025-02-10 04:07:49.460 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.113.105 waku 3c09b6658923ea9890026ae086f0e5dae8ebc14154f74bf6a4532aa3d69167dd
2025-02-10 04:07:49.512 DEBUG [src.node.docker_mananger] Container started with ID 3c09b6658923. Setting up logs at ./log/docker/store_node1_2025-02-10_04-07-47__4c611ae8-4c87-46a3-b405-60da17b8ed05__wakuorg_nwaku:latest.log
2025-02-10 04:07:49.513 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 4547
2025-02-10 04:07:49.515 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:07:50.515 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4547/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:50.518 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:07:50.518 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:07:50.518 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4547/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:50.520 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.113.105/tcp/4548/p2p/16Uiu2HAmQFSoTnC1vBGPoWJaogZik7yaHwKbCHfPGc88E4RhGgdx","/ip4/172.18.113.105/tcp/4549/ws/p2p/16Uiu2HAmQFSoTnC1vBGPoWJaogZik7yaHwKbCHfPGc88E4RhGgdx"],"enrUri":"enr:-L24QL-e_yOea9mZ6aEE0D2ls4KxLLGHfttg_RDc3LLXkSxtWyUJSGKaGCd81Zm8ZkLyV4Euf8SiqItCg-ONNlCjQOQCgmlkgnY0gmlwhKwScWmKbXVsdGlhZGRyc5YACASsEnFpBhHEAAoErBJxaQYRxd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDrEQ2VGHTShdXzUTm42YXxhmHNMnpTLRPmM9VJLqw_vODdGNwghHEg3VkcIIRxoV3YWt1MgM"}'
2025-02-10 04:07:50.520 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:07:50.520 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4547/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.104.144/tcp/57032/p2p/16Uiu2HAm2JyGhDJM5rJDENYGJ3VpubxQXzv4c2KwZseH7ocuf5iN"]'
2025-02-10 04:07:50.523 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:50.523 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57031/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:07:50.526 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:50.526 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4547/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:07:50.528 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:50.529 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:50.529 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57031/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:50.534 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:50.534 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:50.735 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:50.736 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57031/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:50.741 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:50.742 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:50.943 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:50.943 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57031/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:50.948 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:50.949 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:51.150 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:51.150 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57031/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:51.155 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:51.156 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:51.356 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:51.357 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57031/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:51.362 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:51.363 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:51.564 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:51.565 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57031/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:51.570 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:51.571 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:51.772 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:51.772 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57031/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:51.777 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:51.777 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:51.978 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:51.978 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57031/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:51.985 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:51.986 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:52.187 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57031/store/v3/messages?pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:52.190 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x61cba21a2ae1107984188926f45f3af838898189410ed1576555ae98cfd48ff2"},{"messageHash":"0x263c83b03da13b9d32f2eb6846cd4c4a6c4d0ddbfd6118756ab1e9395055d009"},{"messageHash":"0xfc4997f561503ef4199f032e10440c09db8b62d55913ad000def15619b4aec5f"},{"messageHash":"0x66885d42df7e59f53968b31aab248a941b9c878f60de9d277f904f3c1a5f826d"},{"messageHash":"0xae001d0dbc7c4be71d0c76bb4f80d06a75c5adafd9831b31f305f5cbd05a543d"},{"messageHash":"0x8b46bbd9694e4c913ae3d88d08dbc64a457d366822a2082833365112b95723ad"},{"messageHash":"0x5da49e61dae1c916274675e3aef70f0a8d700bfa5e45bd7e8230aea6989d9833"},{"messageHash":"0xefda828064de797a0f7af4632f23718de23eb888a670b9c388e86aeeb206f204"}]}'
2025-02-10 04:07:52.190 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4547/store/v3/messages?pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:52.193 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x61cba21a2ae1107984188926f45f3af838898189410ed1576555ae98cfd48ff2"},{"messageHash":"0x263c83b03da13b9d32f2eb6846cd4c4a6c4d0ddbfd6118756ab1e9395055d009"},{"messageHash":"0xfc4997f561503ef4199f032e10440c09db8b62d55913ad000def15619b4aec5f"},{"messageHash":"0x66885d42df7e59f53968b31aab248a941b9c878f60de9d277f904f3c1a5f826d"},{"messageHash":"0xae001d0dbc7c4be71d0c76bb4f80d06a75c5adafd9831b31f305f5cbd05a543d"},{"messageHash":"0x8b46bbd9694e4c913ae3d88d08dbc64a457d366822a2082833365112b95723ad"},{"messageHash":"0x5da49e61dae1c916274675e3aef70f0a8d700bfa5e45bd7e8230aea6989d9833"},{"messageHash":"0xefda828064de797a0f7af4632f23718de23eb888a670b9c388e86aeeb206f204"}]}'
2025-02-10 04:07:52.196 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 04:07:52.198 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 04:07:52.198 DEBUG [src.node.waku_node] Stopping container with id 02b32904a3a4
2025-02-10 04:07:52.741 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:07:52.741 DEBUG [src.node.waku_node] Stopping container with id 3c09b6658923
2025-02-10 04:07:53.553 ERROR [src.node.docker_mananger] Max retries reached for container 02b32904a3a4. Exiting log stream.
2025-02-10 04:07:54.273 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:07:54.275 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 04:07:54.282 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:07:54.290 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
