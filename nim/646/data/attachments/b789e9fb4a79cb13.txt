2025-02-10 04:07:08.401 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 04:07:08.402 DEBUG [tests.conftest] Running test: test_store_with_non_hex_characters_in_hash with id: 2025-02-10_04-07-08__2bff15d2-45e5-4224-a5ed-98359c0a1a91
2025-02-10 04:07:08.403 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 04:07:08.403 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-10 04:07:08.404 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-10 04:07:08.415 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:07:08.415 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-10_04-07-08__2bff15d2-45e5-4224-a5ed-98359c0a1a91__wakuorg_nwaku:latest.log
2025-02-10 04:07:08.415 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:07:08.416 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:07:08.418 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:07:08.418 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.63.186
2025-02-10 04:07:08.418 DEBUG [src.node.docker_mananger] Generated ports ['22759', '22760', '22761', '22762', '22763']
2025-02-10 04:07:08.418 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:07:08.419 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:07:08.419 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:07:08.419 DEBUG [src.node.docker_mananger] docker run -i -t -p 22759:22759 -p 22760:22760 -p 22761:22761 -p 22762:22762 -p 22763:22763 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22761 --rest-port=22759 --tcp-port=22760 --discv5-udp-port=22762 --rest-address=0.0.0.0 --nat=extip:172.18.63.186 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b8bef8cfff89caf96bf53e9ff28a7f36d5b06d851a96c42a610be1c51d6754af --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22763 --metrics-logging=true --store=true --relay=true
2025-02-10 04:07:08.646 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.63.186 waku 8f29290490a2a929a145094fc1cf393bc8b9fbb4c24b43521c073ed3714ce951
2025-02-10 04:07:08.699 DEBUG [src.node.docker_mananger] Container started with ID 8f29290490a2. Setting up logs at ./log/docker/publishing_node1_2025-02-10_04-07-08__2bff15d2-45e5-4224-a5ed-98359c0a1a91__wakuorg_nwaku:latest.log
2025-02-10 04:07:08.701 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22759
2025-02-10 04:07:08.703 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:07:09.237 ERROR [src.node.docker_mananger] Max retries reached for container 040dd926fc3d. Exiting log stream.
2025-02-10 04:07:09.703 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22759/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:09.706 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:07:09.706 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:07:09.707 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22759/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:09.709 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.63.186/tcp/22760/p2p/16Uiu2HAkuet9Jd3BkspF5XrneT2ieLmSpbwUJxh7tHaptzifFHBN","/ip4/172.18.63.186/tcp/22761/ws/p2p/16Uiu2HAkuet9Jd3BkspF5XrneT2ieLmSpbwUJxh7tHaptzifFHBN"],"enrUri":"enr:-L24QCGacVZH7vdb1y4k12oNi17UUdMNMqEMoNc0nykLZ7Y1RQaW7vfspoAQe5GZUxctJ50D0Hz3GczbmQ4jP3CMasECgmlkgnY0gmlwhKwSP7qKbXVsdGlhZGRyc5YACASsEj-6BljoAAoErBI_ugZY6d0DgnJzhQADAQAAiXNlY3AyNTZrMaECA2JN686h-ddHdowN0eEHb_9I69zZhp8sW_kve3grZomDdGNwgljog3VkcIJY6oV3YWt1MgM"}'
2025-02-10 04:07:09.709 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:07:09.716 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:07:09.716 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-10_04-07-08__2bff15d2-45e5-4224-a5ed-98359c0a1a91__wakuorg_nwaku:latest.log
2025-02-10 04:07:09.716 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:07:09.716 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:07:09.718 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:07:09.718 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.44.74
2025-02-10 04:07:09.718 DEBUG [src.node.docker_mananger] Generated ports ['56285', '56286', '56287', '56288', '56289']
2025-02-10 04:07:09.718 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:07:09.718 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:07:09.718 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:07:09.719 DEBUG [src.node.docker_mananger] docker run -i -t -p 56285:56285 -p 56286:56286 -p 56287:56287 -p 56288:56288 -p 56289:56289 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56287 --rest-port=56285 --tcp-port=56286 --discv5-udp-port=56288 --rest-address=0.0.0.0 --nat=extip:172.18.44.74 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=af41845ce29e18b24b2b02cdfaf0f9d2ceebeef2e14bfa667ea78e6492e2ceaf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56289 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QCGacVZH7vdb1y4k12oNi17UUdMNMqEMoNc0nykLZ7Y1RQaW7vfspoAQe5GZUxctJ50D0Hz3GczbmQ4jP3CMasECgmlkgnY0gmlwhKwSP7qKbXVsdGlhZGRyc5YACASsEj-6BljoAAoErBI_ugZY6d0DgnJzhQADAQAAiXNlY3AyNTZrMaECA2JN686h-ddHdowN0eEHb_9I69zZhp8sW_kve3grZomDdGNwgljog3VkcIJY6oV3YWt1MgM --storenode=/ip4/172.18.63.186/tcp/22760/p2p/16Uiu2HAkuet9Jd3BkspF5XrneT2ieLmSpbwUJxh7tHaptzifFHBN --store=true --relay=true
2025-02-10 04:07:09.947 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.44.74 waku 402e068ffdd23b5616a9509ab99ed3a25a18f2e437f64c7db00d84139e9219ba
2025-02-10 04:07:10.000 DEBUG [src.node.docker_mananger] Container started with ID 402e068ffdd2. Setting up logs at ./log/docker/store_node1_2025-02-10_04-07-08__2bff15d2-45e5-4224-a5ed-98359c0a1a91__wakuorg_nwaku:latest.log
2025-02-10 04:07:10.001 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56285
2025-02-10 04:07:10.001 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:07:11.002 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56285/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:11.005 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:07:11.005 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:07:11.005 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56285/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:11.007 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.44.74/tcp/56286/p2p/16Uiu2HAmP6X95FDPsvnpRUb7QuBg8Woj5aopcZ1H2ZgJUpwK4msL","/ip4/172.18.44.74/tcp/56287/ws/p2p/16Uiu2HAmP6X95FDPsvnpRUb7QuBg8Woj5aopcZ1H2ZgJUpwK4msL"],"enrUri":"enr:-L24QH52n_Itcxw4g79imrHdlmjNobhXY1g7xFu-g8z69l6fGD5F7NB-wvcqYQDpDNWR0Xs8hYaSfxb9V0OCAYsE-vsCgmlkgnY0gmlwhKwSLEqKbXVsdGlhZGRyc5YACASsEixKBtveAAoErBIsSgbb390DgnJzhQADAQAAiXNlY3AyNTZrMaEDmx80Afl-eItfyRmsZHKfKvTsx0cClmYM_I6Nt9PaJy-DdGNwgtveg3VkcILb4IV3YWt1MgM"}'
2025-02-10 04:07:11.007 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:07:11.008 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56285/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.63.186/tcp/22760/p2p/16Uiu2HAkuet9Jd3BkspF5XrneT2ieLmSpbwUJxh7tHaptzifFHBN"]'
2025-02-10 04:07:19.997 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:19.998 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22759/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:07:20.001 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:20.001 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56285/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:07:20.003 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:20.004 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:20.004 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22759/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:20.010 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:20.011 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:20.212 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:20.212 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22759/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:20.218 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:20.219 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:20.419 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:20.420 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22759/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:20.426 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:20.427 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:20.627 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:20.627 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22759/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:20.633 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:20.633 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:20.834 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22759/store/v3/messages?hashes=%23%23%23%20INVALID%20HASH%20%23%23%23&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:20.837 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:22759/store/v3/messages?hashes=%23%23%23%20INVALID%20HASH%20%23%23%23&pageSize=50&ascending=true. Response content: b'Exception converting hex string to bytes: # is not a hexadecimal character'
2025-02-10 04:07:20.837 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56285/store/v3/messages?hashes=%23%23%23%20INVALID%20HASH%20%23%23%23&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:20.840 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:56285/store/v3/messages?hashes=%23%23%23%20INVALID%20HASH%20%23%23%23&pageSize=50&ascending=true. Response content: b'Exception converting hex string to bytes: # is not a hexadecimal character'
2025-02-10 04:07:20.841 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 04:07:20.842 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 04:07:20.842 DEBUG [src.node.waku_node] Stopping container with id 8f29290490a2
2025-02-10 04:07:22.204 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:07:22.204 DEBUG [src.node.waku_node] Stopping container with id 402e068ffdd2
2025-02-10 04:07:23.017 ERROR [src.node.docker_mananger] Max retries reached for container 8f29290490a2. Exiting log stream.
2025-02-10 04:07:23.026 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:07:23.027 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 04:07:23.035 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:07:23.042 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
