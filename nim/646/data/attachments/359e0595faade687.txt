2025-02-10 04:07:03.211 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 04:07:03.212 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_version with id: 2025-02-10_04-07-03__6585f341-2a04-4953-b0a9-f6863995348e
2025-02-10 04:07:03.212 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 04:07:03.212 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-10 04:07:03.219 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:07:03.219 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-10_04-07-03__6585f341-2a04-4953-b0a9-f6863995348e__wakuorg_nwaku:latest.log
2025-02-10 04:07:03.219 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:07:03.219 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:07:03.220 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:07:03.221 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.104.98
2025-02-10 04:07:03.221 DEBUG [src.node.docker_mananger] Generated ports ['22096', '22097', '22098', '22099', '22100']
2025-02-10 04:07:03.221 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:07:03.221 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:07:03.221 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:07:03.221 DEBUG [src.node.docker_mananger] docker run -i -t -p 22096:22096 -p 22097:22097 -p 22098:22098 -p 22099:22099 -p 22100:22100 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22098 --rest-port=22096 --tcp-port=22097 --discv5-udp-port=22099 --rest-address=0.0.0.0 --nat=extip:172.18.104.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=29fff4d3fa7b1eeaa265bc45d58a0ce85c3bd69ae32a616e2b9e2aebccb8d696 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22100 --metrics-logging=true --lightpush=true --relay=true
2025-02-10 04:07:03.453 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.104.98 waku 570b21ab975c699aba04215de4fcdfd9118353927f682b0c8a90228ad539d5e6
2025-02-10 04:07:03.503 DEBUG [src.node.docker_mananger] Container started with ID 570b21ab975c. Setting up logs at ./log/docker/receiving_node1_2025-02-10_04-07-03__6585f341-2a04-4953-b0a9-f6863995348e__wakuorg_nwaku:latest.log
2025-02-10 04:07:03.503 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22096
2025-02-10 04:07:03.503 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:07:04.001 ERROR [src.node.docker_mananger] Max retries reached for container c6c9bbd1ffcc. Exiting log stream.
2025-02-10 04:07:04.504 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22096/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:04.507 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:07:04.507 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:07:04.507 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22096/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:04.510 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.98/tcp/22097/p2p/16Uiu2HAmEu3JFSBA2ceDv4BjWxQHUsqtVx5r33YhWNhqSPpcCrSM","/ip4/172.18.104.98/tcp/22098/ws/p2p/16Uiu2HAmEu3JFSBA2ceDv4BjWxQHUsqtVx5r33YhWNhqSPpcCrSM"],"enrUri":"enr:-L24QIH7YI0v3cbHnVE1PsKqcz0Li8wvAOBZdROmMeINgQUiEA4oVssvtSbS3lfboaLDF2EGSTy-9thcbRtZvLNN6LkCgmlkgnY0gmlwhKwSaGKKbXVsdGlhZGRyc5YACASsEmhiBlZRAAoErBJoYgZWUt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDIVDWiKCneDyndx1y4mXASeU3IaLwdp7oBlWxjSeyVuqDdGNwglZRg3VkcIJWU4V3YWt1Mgk"}'
2025-02-10 04:07:04.510 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:07:04.516 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:07:04.516 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-10_04-07-03__6585f341-2a04-4953-b0a9-f6863995348e__wakuorg_nwaku:latest.log
2025-02-10 04:07:04.517 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:07:04.517 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:07:04.518 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:07:04.518 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.9.136
2025-02-10 04:07:04.518 DEBUG [src.node.docker_mananger] Generated ports ['1247', '1248', '1249', '1250', '1251']
2025-02-10 04:07:04.518 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:07:04.519 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:07:04.519 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:07:04.519 DEBUG [src.node.docker_mananger] docker run -i -t -p 1247:1247 -p 1248:1248 -p 1249:1249 -p 1250:1250 -p 1251:1251 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1249 --rest-port=1247 --tcp-port=1248 --discv5-udp-port=1250 --rest-address=0.0.0.0 --nat=extip:172.18.9.136 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=08dc8ea16aba40bea21fdb78dff82cb4edc70eccd2bf0faaf57368e4b86cf81f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1251 --metrics-logging=true --lightpush=false --relay=true
2025-02-10 04:07:04.741 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.9.136 waku 2b5ffbe7dd2d44d5312450374e8c47bff66e51f895fc265a810c9c17c1419253
2025-02-10 04:07:04.791 DEBUG [src.node.docker_mananger] Container started with ID 2b5ffbe7dd2d. Setting up logs at ./log/docker/receiving_node2_2025-02-10_04-07-03__6585f341-2a04-4953-b0a9-f6863995348e__wakuorg_nwaku:latest.log
2025-02-10 04:07:04.792 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 1247
2025-02-10 04:07:04.792 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:07:05.792 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1247/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:05.795 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:07:05.795 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:07:05.795 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1247/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:05.797 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.136/tcp/1248/p2p/16Uiu2HAm5p67nnSGa8kRporTGjJcJrNnG8hvHU6Yb8kQwmTKjGRG","/ip4/172.18.9.136/tcp/1249/ws/p2p/16Uiu2HAm5p67nnSGa8kRporTGjJcJrNnG8hvHU6Yb8kQwmTKjGRG"],"enrUri":"enr:-L24QLo1HAafBJQ6IpM0kOe3UMz2veE1z8Rv-F5Xv3dCAIj3dfhTe7ECJ1i0M8GxYODbQadK_9MAnhOjY51Q0z6yuPwCgmlkgnY0gmlwhKwSCYiKbXVsdGlhZGRyc5YACASsEgmIBgTgAAoErBIJiAYE4d0DgnJzhQADAQAAiXNlY3AyNTZrMaECmlLwmZs6h6k30QgujoknKdZHUtO-hsW6WbN5TDYGjYuDdGNwggTgg3VkcIIE4oV3YWt1MgE"}'
2025-02-10 04:07:05.798 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:07:05.798 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1247/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.104.98/tcp/22097/p2p/16Uiu2HAmEu3JFSBA2ceDv4BjWxQHUsqtVx5r33YhWNhqSPpcCrSM"]'
2025-02-10 04:07:05.837 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:05.846 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:07:05.846 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-10_04-07-03__6585f341-2a04-4953-b0a9-f6863995348e__wakuorg_nwaku:latest.log
2025-02-10 04:07:05.846 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:07:05.846 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:07:05.848 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:07:05.848 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.210.69
2025-02-10 04:07:05.848 DEBUG [src.node.docker_mananger] Generated ports ['40482', '40483', '40484', '40485', '40486']
2025-02-10 04:07:05.848 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:07:05.849 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:07:05.849 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:07:05.849 DEBUG [src.node.docker_mananger] docker run -i -t -p 40482:40482 -p 40483:40483 -p 40484:40484 -p 40485:40485 -p 40486:40486 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40484 --rest-port=40482 --tcp-port=40483 --discv5-udp-port=40485 --rest-address=0.0.0.0 --nat=extip:172.18.210.69 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ddedd654bb8ebc2cf8bb64d150afde30a1312dbeb6cc65eaddbd7de5e127c74f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40486 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QIH7YI0v3cbHnVE1PsKqcz0Li8wvAOBZdROmMeINgQUiEA4oVssvtSbS3lfboaLDF2EGSTy-9thcbRtZvLNN6LkCgmlkgnY0gmlwhKwSaGKKbXVsdGlhZGRyc5YACASsEmhiBlZRAAoErBJoYgZWUt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDIVDWiKCneDyndx1y4mXASeU3IaLwdp7oBlWxjSeyVuqDdGNwglZRg3VkcIJWU4V3YWt1Mgk --lightpushnode=/ip4/172.18.104.98/tcp/22097/p2p/16Uiu2HAmEu3JFSBA2ceDv4BjWxQHUsqtVx5r33YhWNhqSPpcCrSM --lightpush=true --relay=false
2025-02-10 04:07:06.092 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.210.69 waku 036b47e32b108322c8b68b4c11f84ed2842c046cea65831d399a47b92b625244
2025-02-10 04:07:06.142 DEBUG [src.node.docker_mananger] Container started with ID 036b47e32b10. Setting up logs at ./log/docker/lightpush_node1_2025-02-10_04-07-03__6585f341-2a04-4953-b0a9-f6863995348e__wakuorg_nwaku:latest.log
2025-02-10 04:07:06.143 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40482
2025-02-10 04:07:06.143 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:07:07.144 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40482/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:07.147 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:07:07.147 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:07:07.148 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40482/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:07.150 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.210.69/tcp/40483/p2p/16Uiu2HAm3Pdysrwo5KsgC6XkzupPxU2696CmhsekE9ZA4S5T74VL","/ip4/172.18.210.69/tcp/40484/ws/p2p/16Uiu2HAm3Pdysrwo5KsgC6XkzupPxU2696CmhsekE9ZA4S5T74VL"],"enrUri":"enr:-L24QFWin40XA3HFd-ixTqlT8jBNkPdQrxrRJoAG9UEjzoyhcERVa9XfuItx41A-SWj2goHYnAZKJS5Fjv2vEby4xhgCgmlkgnY0gmlwhKwS0kWKbXVsdGlhZGRyc5YACASsEtJFBp4jAAoErBLSRQaeJN0DgnJzhQADAQAAiXNlY3AyNTZrMaECdlgS83K9n8r4QdFc5JEr6_FDQZ2z6rJVkRZ-kl1LkaeDdGNwgp4jg3VkcIKeJYV3YWt1Mgg"}'
2025-02-10 04:07:07.150 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:07:07.150 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40482/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.104.98/tcp/22097/p2p/16Uiu2HAmEu3JFSBA2ceDv4BjWxQHUsqtVx5r33YhWNhqSPpcCrSM"]'
2025-02-10 04:07:07.185 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:07.187 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40482/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.9.136/tcp/1248/p2p/16Uiu2HAm5p67nnSGa8kRporTGjJcJrNnG8hvHU6Yb8kQwmTKjGRG"]'
2025-02-10 04:07:07.212 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:07.214 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22096/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:07:07.219 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:07.221 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1247/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:07:07.227 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:07.230 DEBUG [src.steps.light_push] Lightpushing message
2025-02-10 04:07:07.230 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40482/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739160427229845760, "version": 2.1}}'
2025-02-10 04:07:07.236 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:40482/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-10 04:07:07.241 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 04:07:07.242 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 04:07:07.242 DEBUG [src.node.waku_node] Stopping container with id 570b21ab975c
2025-02-10 04:07:08.020 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:07:08.020 DEBUG [src.node.waku_node] Stopping container with id 2b5ffbe7dd2d
2025-02-10 04:07:08.833 ERROR [src.node.docker_mananger] Max retries reached for container 570b21ab975c. Exiting log stream.
2025-02-10 04:07:09.542 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:07:09.542 DEBUG [src.node.waku_node] Stopping container with id 036b47e32b10
2025-02-10 04:07:10.355 ERROR [src.node.docker_mananger] Max retries reached for container 2b5ffbe7dd2d. Exiting log stream.
2025-02-10 04:07:11.095 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:07:11.096 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 04:07:11.103 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:07:11.109 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:07:11.114 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
