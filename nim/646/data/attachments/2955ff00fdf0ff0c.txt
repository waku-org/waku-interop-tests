2025-02-10 04:03:41.248 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 04:03:41.249 DEBUG [tests.conftest] Running test: test_main_node_only_lightpush__peer_full with id: 2025-02-10_04-03-41__030955a6-62ef-4465-9e26-a61b581508f2
2025-02-10 04:03:41.249 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 04:03:41.249 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-10 04:03:41.257 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:03:41.257 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-10_04-03-41__030955a6-62ef-4465-9e26-a61b581508f2__wakuorg_nwaku:latest.log
2025-02-10 04:03:41.257 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:03:41.257 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:03:41.259 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:03:41.259 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.50.88
2025-02-10 04:03:41.259 DEBUG [src.node.docker_mananger] Generated ports ['26292', '26293', '26294', '26295', '26296']
2025-02-10 04:03:41.259 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:03:41.259 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:03:41.259 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:03:41.260 DEBUG [src.node.docker_mananger] docker run -i -t -p 26292:26292 -p 26293:26293 -p 26294:26294 -p 26295:26295 -p 26296:26296 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26294 --rest-port=26292 --tcp-port=26293 --discv5-udp-port=26295 --rest-address=0.0.0.0 --nat=extip:172.18.50.88 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aeed6896c74a2e95b9e5ddd09deab1f47cebbb971301ee0cf91badccebba2e23 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26296 --metrics-logging=true --lightpush=true --relay=true --filter=true
2025-02-10 04:03:41.492 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.50.88 waku b796bdb2600e69c98f66f26857b7574175138ab561d36d1a0b533388e588a251
2025-02-10 04:03:41.540 DEBUG [src.node.docker_mananger] Container started with ID b796bdb2600e. Setting up logs at ./log/docker/receiving_node1_2025-02-10_04-03-41__030955a6-62ef-4465-9e26-a61b581508f2__wakuorg_nwaku:latest.log
2025-02-10 04:03:41.540 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26292
2025-02-10 04:03:41.540 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:03:42.056 ERROR [src.node.docker_mananger] Max retries reached for container 72f828c99b84. Exiting log stream.
2025-02-10 04:03:42.541 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26292/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:42.544 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:03:42.544 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:03:42.544 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26292/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:42.547 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.50.88/tcp/26293/p2p/16Uiu2HAm5NRYa1oiV1jqZdVemDHb75G3nJmm5f4XtM9acQNbrENt","/ip4/172.18.50.88/tcp/26294/ws/p2p/16Uiu2HAm5NRYa1oiV1jqZdVemDHb75G3nJmm5f4XtM9acQNbrENt"],"enrUri":"enr:-L24QMni5rggLC24dxh1TgJb91gv6bgDHlheS7Uv2LCWY2I5Twio7pFLy2RUT2Xw7rDa9OUd1a3uOQNAdMRwehBajGYCgmlkgnY0gmlwhKwSMliKbXVsdGlhZGRyc5YACASsEjJYBma1AAoErBIyWAZmtt0DgnJzhQADAQAAiXNlY3AyNTZrMaECk7_OJUtUIp5b7YdYbPgJtO2kuj2rO1ZkeO7aAlm2S_GDdGNwgma1g3VkcIJmt4V3YWt1Mg0"}'
2025-02-10 04:03:42.547 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:03:42.553 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:03:42.553 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-10_04-03-41__030955a6-62ef-4465-9e26-a61b581508f2__wakuorg_nwaku:latest.log
2025-02-10 04:03:42.553 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:03:42.554 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:03:42.555 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:03:42.555 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.96.170
2025-02-10 04:03:42.555 DEBUG [src.node.docker_mananger] Generated ports ['22267', '22268', '22269', '22270', '22271']
2025-02-10 04:03:42.556 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:03:42.556 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:03:42.556 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:03:42.556 DEBUG [src.node.docker_mananger] docker run -i -t -p 22267:22267 -p 22268:22268 -p 22269:22269 -p 22270:22270 -p 22271:22271 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22269 --rest-port=22267 --tcp-port=22268 --discv5-udp-port=22270 --rest-address=0.0.0.0 --nat=extip:172.18.96.170 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a14dd6c37dcd91d29702b63e4d6dc0da0e939721eda2acb124faed5a076facb5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22271 --metrics-logging=true --lightpush=false --relay=true
2025-02-10 04:03:42.792 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.96.170 waku 8c0eeb66cd44e28354a31d8fdd82872dd4764301c37d469f2476337e645d2b16
2025-02-10 04:03:42.843 DEBUG [src.node.docker_mananger] Container started with ID 8c0eeb66cd44. Setting up logs at ./log/docker/receiving_node2_2025-02-10_04-03-41__030955a6-62ef-4465-9e26-a61b581508f2__wakuorg_nwaku:latest.log
2025-02-10 04:03:42.844 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22267
2025-02-10 04:03:42.844 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:03:43.844 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22267/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:43.847 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:03:43.847 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:03:43.848 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22267/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:43.850 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.96.170/tcp/22268/p2p/16Uiu2HAmDfkzxXVzEEGRDC8gNyjXXjrFJMxFuWcaYtfobSb7XLB6","/ip4/172.18.96.170/tcp/22269/ws/p2p/16Uiu2HAmDfkzxXVzEEGRDC8gNyjXXjrFJMxFuWcaYtfobSb7XLB6"],"enrUri":"enr:-L24QKqFj4eTfaie4q_kruQgqBCQlXp4YKl7-3Y89x_wMGrJRTI-ZQGmdrnFg49n4prwFgPZDU3xS48goaScPv-LoF8CgmlkgnY0gmlwhKwSYKqKbXVsdGlhZGRyc5YACASsEmCqBlb8AAoErBJgqgZW_d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDw4sFt7oDb6Tl7Cal3JkBTwL6NKtOrItAaJ4xT3LmYWDdGNwglb8g3VkcIJW_oV3YWt1MgE"}'
2025-02-10 04:03:43.850 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:03:43.850 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22267/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.50.88/tcp/26293/p2p/16Uiu2HAm5NRYa1oiV1jqZdVemDHb75G3nJmm5f4XtM9acQNbrENt"]'
2025-02-10 04:03:43.890 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:03:43.900 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:03:43.900 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-10_04-03-41__030955a6-62ef-4465-9e26-a61b581508f2__wakuorg_nwaku:latest.log
2025-02-10 04:03:43.900 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:03:43.900 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:03:43.902 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:03:43.902 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.150.98
2025-02-10 04:03:43.902 DEBUG [src.node.docker_mananger] Generated ports ['15421', '15422', '15423', '15424', '15425']
2025-02-10 04:03:43.902 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:03:43.902 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:03:43.903 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:03:43.903 DEBUG [src.node.docker_mananger] docker run -i -t -p 15421:15421 -p 15422:15422 -p 15423:15423 -p 15424:15424 -p 15425:15425 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15423 --rest-port=15421 --tcp-port=15422 --discv5-udp-port=15424 --rest-address=0.0.0.0 --nat=extip:172.18.150.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a2f9e0def1e099cb6ecab6f578cf71feac4c7df8d4697e078fd0bdd6dfffae18 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15425 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMni5rggLC24dxh1TgJb91gv6bgDHlheS7Uv2LCWY2I5Twio7pFLy2RUT2Xw7rDa9OUd1a3uOQNAdMRwehBajGYCgmlkgnY0gmlwhKwSMliKbXVsdGlhZGRyc5YACASsEjJYBma1AAoErBIyWAZmtt0DgnJzhQADAQAAiXNlY3AyNTZrMaECk7_OJUtUIp5b7YdYbPgJtO2kuj2rO1ZkeO7aAlm2S_GDdGNwgma1g3VkcIJmt4V3YWt1Mg0 --lightpushnode=/ip4/172.18.50.88/tcp/26293/p2p/16Uiu2HAm5NRYa1oiV1jqZdVemDHb75G3nJmm5f4XtM9acQNbrENt --lightpush=true --relay=false
2025-02-10 04:03:44.148 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.150.98 waku 29e7542df7b3d4e737182ec331210d82fe62a4a8f8beae04e0dd27cbdbe63238
2025-02-10 04:03:44.198 DEBUG [src.node.docker_mananger] Container started with ID 29e7542df7b3. Setting up logs at ./log/docker/lightpush_node1_2025-02-10_04-03-41__030955a6-62ef-4465-9e26-a61b581508f2__wakuorg_nwaku:latest.log
2025-02-10 04:03:44.198 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15421
2025-02-10 04:03:44.198 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:03:45.199 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15421/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:45.202 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:03:45.202 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:03:45.202 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15421/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:45.204 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.150.98/tcp/15422/p2p/16Uiu2HAkwf1GddJiyrwVUBcnMjgF332BggCYeM1UvSp6rju2Brrm","/ip4/172.18.150.98/tcp/15423/ws/p2p/16Uiu2HAkwf1GddJiyrwVUBcnMjgF332BggCYeM1UvSp6rju2Brrm"],"enrUri":"enr:-L24QCqNX8WMn03dYFASOL-ssQAW-QhPSrExyWPhe9bRY3l7XGXrSIEYwH4MAUwAs8v7wV73pMW66BqTnBHfRaEGg1oCgmlkgnY0gmlwhKwSlmKKbXVsdGlhZGRyc5YACASsEpZiBjw-AAoErBKWYgY8P90DgnJzhQADAQAAiXNlY3AyNTZrMaECISG8axv3QCglc6JfYjLHmNga7yy-11PIjaupsPzF1kqDdGNwgjw-g3VkcII8QIV3YWt1Mgg"}'
2025-02-10 04:03:45.204 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:03:45.205 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15421/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.50.88/tcp/26293/p2p/16Uiu2HAm5NRYa1oiV1jqZdVemDHb75G3nJmm5f4XtM9acQNbrENt"]'
2025-02-10 04:03:45.241 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:03:45.242 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15421/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.96.170/tcp/22268/p2p/16Uiu2HAmDfkzxXVzEEGRDC8gNyjXXjrFJMxFuWcaYtfobSb7XLB6"]'
2025-02-10 04:03:45.268 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:03:45.271 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26292/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:03:45.279 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:03:45.280 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22267/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:03:45.288 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:03:45.289 DEBUG [src.steps.light_push] Lightpushing message
2025-02-10 04:03:45.289 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15421/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739160225289337088}}'
2025-02-10 04:03:45.306 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:03:45.307 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-10 04:03:45.407 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-10 04:03:45.408 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26292/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:45.411 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739160225289337088,"ephemeral":false}]'
2025-02-10 04:03:45.412 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-10 04:03:45.412 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22267/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:45.415 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739160225289337088,"ephemeral":false}]'
2025-02-10 04:03:45.417 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 04:03:45.418 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 04:03:45.418 DEBUG [src.node.waku_node] Stopping container with id b796bdb2600e
2025-02-10 04:03:46.046 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:03:46.047 DEBUG [src.node.waku_node] Stopping container with id 8c0eeb66cd44
2025-02-10 04:03:46.860 ERROR [src.node.docker_mananger] Max retries reached for container b796bdb2600e. Exiting log stream.
2025-02-10 04:03:47.567 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:03:47.567 DEBUG [src.node.waku_node] Stopping container with id 29e7542df7b3
2025-02-10 04:03:48.380 ERROR [src.node.docker_mananger] Max retries reached for container 8c0eeb66cd44. Exiting log stream.
2025-02-10 04:03:49.103 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:03:49.104 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 04:03:49.114 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:03:49.121 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:03:49.127 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
