2025-02-10 04:06:45.500 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 04:06:45.500 DEBUG [tests.conftest] Running test: test_publish_on_multiple_content_topics_and_only_after_fetch_them[content_topic_list1] with id: 2025-02-10_04-06-45__3b8ecec5-4d9d-4143-b936-a06791953fe9
2025-02-10 04:06:45.500 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 04:06:45.501 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-10 04:06:45.501 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-10 04:06:45.507 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:06:45.508 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-10_04-06-45__3b8ecec5-4d9d-4143-b936-a06791953fe9__wakuorg_nwaku:latest.log
2025-02-10 04:06:45.508 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:06:45.508 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:06:45.509 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:06:45.509 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.159.205
2025-02-10 04:06:45.509 DEBUG [src.node.docker_mananger] Generated ports ['24828', '24829', '24830', '24831', '24832']
2025-02-10 04:06:45.510 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:06:45.510 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:06:45.510 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:06:45.510 DEBUG [src.node.docker_mananger] docker run -i -t -p 24828:24828 -p 24829:24829 -p 24830:24830 -p 24831:24831 -p 24832:24832 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24830 --rest-port=24828 --tcp-port=24829 --discv5-udp-port=24831 --rest-address=0.0.0.0 --nat=extip:172.18.159.205 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=faf1e31bb1f072b2c01fef761d9ecd5d6eefdc332dfd6c0fbfa1fc304fb9cc3e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24832 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2025-02-10 04:06:45.740 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.159.205 waku ce8c26d40ac7577a0bd989315ccdebbe89cffc1db9b1c2e8c754bbe327669e64
2025-02-10 04:06:45.789 DEBUG [src.node.docker_mananger] Container started with ID ce8c26d40ac7. Setting up logs at ./log/docker/node1_2025-02-10_04-06-45__3b8ecec5-4d9d-4143-b936-a06791953fe9__wakuorg_nwaku:latest.log
2025-02-10 04:06:45.789 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 24828
2025-02-10 04:06:45.789 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:06:46.302 ERROR [src.node.docker_mananger] Max retries reached for container 9ef3a767784d. Exiting log stream.
2025-02-10 04:06:46.791 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24828/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:06:46.793 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:06:46.794 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:06:46.794 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24828/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:06:46.796 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.159.205/tcp/24829/p2p/16Uiu2HAkyYSs4by3dJH9UecWWhfqtcCZ1a5CsKZZhbuGTpwsCyGE","/ip4/172.18.159.205/tcp/24830/ws/p2p/16Uiu2HAkyYSs4by3dJH9UecWWhfqtcCZ1a5CsKZZhbuGTpwsCyGE"],"enrUri":"enr:-L24QCj2nIxsPghzlJX5fEpfVMkGqyVre8KUDC7R4XrGNCNrNOjqmjgDoEqc-R6WCFZyo9zUMbYnb2AmfnEvLM0v0DMCgmlkgnY0gmlwhKwSn82KbXVsdGlhZGRyc5YACASsEp_NBmD9AAoErBKfzQZg_t0DgnJzhQACAQAAiXNlY3AyNTZrMaECPSr7po0Gfbiufq78vcn4soyfRgKwYiSDaswPzY_Z1auDdGNwgmD9g3VkcIJg_4V3YWt1MgU"}'
2025-02-10 04:06:46.796 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:06:46.803 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:06:46.803 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-10_04-06-45__3b8ecec5-4d9d-4143-b936-a06791953fe9__wakuorg_nwaku:latest.log
2025-02-10 04:06:46.803 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:06:46.803 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:06:46.805 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:06:46.805 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.1.23
2025-02-10 04:06:46.805 DEBUG [src.node.docker_mananger] Generated ports ['64450', '64451', '64452', '64453', '64454']
2025-02-10 04:06:46.805 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:06:46.805 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:06:46.805 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:06:46.806 DEBUG [src.node.docker_mananger] docker run -i -t -p 64450:64450 -p 64451:64451 -p 64452:64452 -p 64453:64453 -p 64454:64454 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64452 --rest-port=64450 --tcp-port=64451 --discv5-udp-port=64453 --rest-address=0.0.0.0 --nat=extip:172.18.1.23 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=3ba9474ce9dcded1cb5b02cf6e09c46cacde4ad9fa7b36a540ea7b41d92e1a8f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64454 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QCj2nIxsPghzlJX5fEpfVMkGqyVre8KUDC7R4XrGNCNrNOjqmjgDoEqc-R6WCFZyo9zUMbYnb2AmfnEvLM0v0DMCgmlkgnY0gmlwhKwSn82KbXVsdGlhZGRyc5YACASsEp_NBmD9AAoErBKfzQZg_t0DgnJzhQACAQAAiXNlY3AyNTZrMaECPSr7po0Gfbiufq78vcn4soyfRgKwYiSDaswPzY_Z1auDdGNwgmD9g3VkcIJg_4V3YWt1MgU --content-topic=/myapp/1/latest/proto
2025-02-10 04:06:47.037 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.1.23 waku eedaae1cea16e15614a5ac714526ae05bb3e0da6f87b14236f501af70e503c80
2025-02-10 04:06:47.085 DEBUG [src.node.docker_mananger] Container started with ID eedaae1cea16. Setting up logs at ./log/docker/node2_2025-02-10_04-06-45__3b8ecec5-4d9d-4143-b936-a06791953fe9__wakuorg_nwaku:latest.log
2025-02-10 04:06:47.085 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 64450
2025-02-10 04:06:47.086 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:06:48.087 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64450/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:06:48.099 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:06:48.099 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:06:48.099 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64450/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:06:48.102 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.1.23/tcp/64451/p2p/16Uiu2HAkwKjT4BqFTGyD2mqBFvHdCUMkrZU5xM2WLz81e5jaJwkN","/ip4/172.18.1.23/tcp/64452/ws/p2p/16Uiu2HAkwKjT4BqFTGyD2mqBFvHdCUMkrZU5xM2WLz81e5jaJwkN"],"enrUri":"enr:-L24QCgb5soXy40epAqAdhHYtK3Sg5RKM7LG0HuQD5VCsCnoGy9mk4gF6UudX1ZKxguebykM0WFFolXRGSRpjwnqnXcCgmlkgnY0gmlwhKwSAReKbXVsdGlhZGRyc5YACASsEgEXBvvDAAoErBIBFwb7xN0DgnJzhQACAQAAiXNlY3AyNTZrMaECHDHQBXjgn8TXb3qLz40n1edfLzTi3V_P7psNnp45huODdGNwgvvDg3VkcIL7xYV3YWt1MgE"}'
2025-02-10 04:06:48.102 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:06:48.102 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64450/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.159.205/tcp/24829/p2p/16Uiu2HAkyYSs4by3dJH9UecWWhfqtcCZ1a5CsKZZhbuGTpwsCyGE"]'
2025-02-10 04:06:48.105 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:06:48.105 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24828/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-10 04:06:48.116 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:06:48.116 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64450/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-10 04:06:48.136 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:06:48.138 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24828/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L215YXBwLzEvbGF0ZXN0L3Byb3Rv", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:06:48.146 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:06:48.147 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24828/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9jb250ZW50L3Rlc3QuanM=", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:06:48.154 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:06:48.155 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24828/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yMi9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:06:48.160 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:06:48.161 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24828/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L3RveWNoYXQvMi9odWlsb25nL3Byb3Rv", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:06:48.166 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:06:48.166 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24828/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L3N0YXR1c2ltLzEvY29tbXVuaXR5L2Nib3I=", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:06:48.173 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:06:48.173 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24828/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yNy9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:06:48.178 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:06:48.179 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24828/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yOS9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:06:48.184 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:06:48.185 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24828/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yMC9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:06:48.190 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:06:48.190 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-10 04:06:48.291 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64450/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:06:48.293 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L215YXBwLzEvbGF0ZXN0L3Byb3Rv","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739160408136560384,"ephemeral":false}]'
2025-02-10 04:06:48.293 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64450/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:06:48.295 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9jb250ZW50L3Rlc3QuanM=","contentTopic":"/waku/2/content/test.js","version":0,"timestamp":1739160408147453696,"ephemeral":false}]'
2025-02-10 04:06:48.296 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64450/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:06:48.298 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yMi9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/22/sometopic/someencoding","version":0,"timestamp":1739160408154874368,"ephemeral":false}]'
2025-02-10 04:06:48.298 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64450/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:06:48.300 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3RveWNoYXQvMi9odWlsb25nL3Byb3Rv","contentTopic":"/toychat/2/huilong/proto","version":0,"timestamp":1739160408161206272,"ephemeral":false}]'
2025-02-10 04:06:48.301 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64450/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:06:48.303 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3N0YXR1c2ltLzEvY29tbXVuaXR5L2Nib3I=","contentTopic":"/statusim/1/community/cbor","version":0,"timestamp":1739160408166732032,"ephemeral":false}]'
2025-02-10 04:06:48.303 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64450/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:06:48.305 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yNy9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/27/sometopic/someencoding","version":0,"timestamp":1739160408173682688,"ephemeral":false}]'
2025-02-10 04:06:48.306 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64450/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:06:48.308 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yOS9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/29/sometopic/someencoding","version":0,"timestamp":1739160408179039232,"ephemeral":false}]'
2025-02-10 04:06:48.308 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64450/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:06:48.310 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yMC9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/20/sometopic/someencoding","version":0,"timestamp":1739160408185125376,"ephemeral":false}]'
2025-02-10 04:06:48.312 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 04:06:48.313 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 04:06:48.313 DEBUG [src.node.waku_node] Stopping container with id ce8c26d40ac7
2025-02-10 04:06:49.396 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:06:49.397 DEBUG [src.node.waku_node] Stopping container with id eedaae1cea16
2025-02-10 04:06:50.208 ERROR [src.node.docker_mananger] Max retries reached for container ce8c26d40ac7. Exiting log stream.
2025-02-10 04:06:50.908 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:06:50.909 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 04:06:50.918 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:06:50.927 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
