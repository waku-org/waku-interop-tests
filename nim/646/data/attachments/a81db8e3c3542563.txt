2025-02-10 04:07:41.605 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 04:07:41.605 DEBUG [tests.conftest] Running test: test_time_filter_invalid_start_time with id: 2025-02-10_04-07-41__a3fde31c-f73c-4156-99fd-e1606a9fbaaa
2025-02-10 04:07:41.605 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 04:07:41.606 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-10 04:07:41.606 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-10 04:07:41.613 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:07:41.614 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-10_04-07-41__a3fde31c-f73c-4156-99fd-e1606a9fbaaa__wakuorg_nwaku:latest.log
2025-02-10 04:07:41.614 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:07:41.614 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:07:41.615 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:07:41.615 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.59.45
2025-02-10 04:07:41.616 DEBUG [src.node.docker_mananger] Generated ports ['32941', '32942', '32943', '32944', '32945']
2025-02-10 04:07:41.616 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:07:41.616 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:07:41.616 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:07:41.616 DEBUG [src.node.docker_mananger] docker run -i -t -p 32941:32941 -p 32942:32942 -p 32943:32943 -p 32944:32944 -p 32945:32945 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32943 --rest-port=32941 --tcp-port=32942 --discv5-udp-port=32944 --rest-address=0.0.0.0 --nat=extip:172.18.59.45 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ebd9fa9cabb79984ed0dbc9e6b2eb857a9ee38fe26ce9c1c227d96babadc3dad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32945 --metrics-logging=true --store=true --relay=true
2025-02-10 04:07:41.851 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.59.45 waku 5ce77038e242bc2abe478f9ef7706c02892bde33c1f617351f4c8dffeed80dae
2025-02-10 04:07:41.901 DEBUG [src.node.docker_mananger] Container started with ID 5ce77038e242. Setting up logs at ./log/docker/publishing_node1_2025-02-10_04-07-41__a3fde31c-f73c-4156-99fd-e1606a9fbaaa__wakuorg_nwaku:latest.log
2025-02-10 04:07:41.903 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32941
2025-02-10 04:07:41.903 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:07:42.408 ERROR [src.node.docker_mananger] Max retries reached for container 793f1f7bee75. Exiting log stream.
2025-02-10 04:07:42.903 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32941/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:42.906 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:07:42.906 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:07:42.906 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32941/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:42.908 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.59.45/tcp/32942/p2p/16Uiu2HAkxQaoLhQ8K41ccFEthjJpNwDzBWKC2rj4a94Sc6deUmVf","/ip4/172.18.59.45/tcp/32943/ws/p2p/16Uiu2HAkxQaoLhQ8K41ccFEthjJpNwDzBWKC2rj4a94Sc6deUmVf"],"enrUri":"enr:-L24QBQPJI6bIOMPHwyb6LYHASnFttLWy8V_Bq1oID69Wf9ze_8MM9AFCGX2jX6hGVqBzcFMhJ-lbCgx0-hRIRxzdcwCgmlkgnY0gmlwhKwSOy2KbXVsdGlhZGRyc5YACASsEjstBoCuAAoErBI7LQaAr90DgnJzhQADAQAAiXNlY3AyNTZrMaECLEufZ0ofrRc2WUbJfqYK7bjnTgCdwH6Y9CRCeg7G5naDdGNwgoCug3VkcIKAsIV3YWt1MgM"}'
2025-02-10 04:07:42.909 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:07:42.915 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:07:42.915 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-10_04-07-41__a3fde31c-f73c-4156-99fd-e1606a9fbaaa__wakuorg_nwaku:latest.log
2025-02-10 04:07:42.915 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:07:42.916 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:07:42.917 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:07:42.917 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.43.120
2025-02-10 04:07:42.917 DEBUG [src.node.docker_mananger] Generated ports ['14512', '14513', '14514', '14515', '14516']
2025-02-10 04:07:42.917 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:07:42.917 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:07:42.918 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:07:42.918 DEBUG [src.node.docker_mananger] docker run -i -t -p 14512:14512 -p 14513:14513 -p 14514:14514 -p 14515:14515 -p 14516:14516 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14514 --rest-port=14512 --tcp-port=14513 --discv5-udp-port=14515 --rest-address=0.0.0.0 --nat=extip:172.18.43.120 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c6416eaf16bbc84aec8de5fd2265b30d0c3d9af64adddeb86fc0ded1dfd2a439 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14516 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QBQPJI6bIOMPHwyb6LYHASnFttLWy8V_Bq1oID69Wf9ze_8MM9AFCGX2jX6hGVqBzcFMhJ-lbCgx0-hRIRxzdcwCgmlkgnY0gmlwhKwSOy2KbXVsdGlhZGRyc5YACASsEjstBoCuAAoErBI7LQaAr90DgnJzhQADAQAAiXNlY3AyNTZrMaECLEufZ0ofrRc2WUbJfqYK7bjnTgCdwH6Y9CRCeg7G5naDdGNwgoCug3VkcIKAsIV3YWt1MgM --storenode=/ip4/172.18.59.45/tcp/32942/p2p/16Uiu2HAkxQaoLhQ8K41ccFEthjJpNwDzBWKC2rj4a94Sc6deUmVf --store=true --relay=true
2025-02-10 04:07:43.145 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.43.120 waku 8b61e43032cb6fdfaffa75947d72e3dce445069c1d9027eae2a9b0aabebdce45
2025-02-10 04:07:43.194 DEBUG [src.node.docker_mananger] Container started with ID 8b61e43032cb. Setting up logs at ./log/docker/store_node1_2025-02-10_04-07-41__a3fde31c-f73c-4156-99fd-e1606a9fbaaa__wakuorg_nwaku:latest.log
2025-02-10 04:07:43.195 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14512
2025-02-10 04:07:43.196 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:07:44.197 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14512/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:44.200 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:07:44.200 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:07:44.200 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14512/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:44.202 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.43.120/tcp/14513/p2p/16Uiu2HAmSZ9fatJAwrvG6edbW3yJz9VPWVb37ziThLmJvYtbSq6A","/ip4/172.18.43.120/tcp/14514/ws/p2p/16Uiu2HAmSZ9fatJAwrvG6edbW3yJz9VPWVb37ziThLmJvYtbSq6A"],"enrUri":"enr:-L24QP-f-LfwdWL_X4YEeG2la-cJczMe0yYLb8K8xeYdBpRHXN6ZAgYp5Y-cEb83ffiBYKHDZn8oz_n3gQU5rG6qRgsCgmlkgnY0gmlwhKwSK3iKbXVsdGlhZGRyc5YACASsEit4BjixAAoErBIreAY4st0DgnJzhQADAQAAiXNlY3AyNTZrMaEDzoSqRJRo-0oF7DDsnvHQfxyLc4DgwCgGO0P0-xuqFBODdGNwgjixg3VkcII4s4V3YWt1MgM"}'
2025-02-10 04:07:44.203 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:07:44.203 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14512/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.59.45/tcp/32942/p2p/16Uiu2HAkxQaoLhQ8K41ccFEthjJpNwDzBWKC2rj4a94Sc6deUmVf"]'
2025-02-10 04:07:44.205 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:44.206 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32941/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:07:44.208 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:44.208 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14512/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:07:44.210 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:44.211 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:44.211 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32941/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:44.217 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:44.217 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:44.418 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:44.418 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32941/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:44.423 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:44.424 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:44.625 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:44.625 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32941/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:44.630 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:44.631 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:44.831 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:44.832 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32941/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:44.837 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:44.837 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:45.038 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:45.038 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32941/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:45.044 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:45.044 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:45.244 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:45.245 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32941/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:45.250 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:45.250 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:45.451 DEBUG [tests.store.test_time_filter] inquering stored messages with start time abc
2025-02-10 04:07:45.452 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32941/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:45.454 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:32941/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true. Response content: b'time parsing error: invalid integer: abc'
2025-02-10 04:07:45.455 DEBUG [tests.store.test_time_filter] invalid start_time cause error Error: 400 Client Error: Bad Request for url: http://127.0.0.1:32941/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true with response: b'time parsing error: invalid integer: abc'
2025-02-10 04:07:45.457 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 04:07:45.458 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 04:07:45.458 DEBUG [src.node.waku_node] Stopping container with id 5ce77038e242
2025-02-10 04:07:46.402 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:07:46.403 DEBUG [src.node.waku_node] Stopping container with id 8b61e43032cb
2025-02-10 04:07:47.231 ERROR [src.node.docker_mananger] Max retries reached for container 5ce77038e242. Exiting log stream.
2025-02-10 04:07:47.901 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:07:47.903 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 04:07:47.914 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:07:47.919 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
