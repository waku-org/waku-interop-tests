[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2025-02-10_04-03-41__030955a6-62ef-4465-9e26-a61b581508f2
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-10_04-03-41__030955a6-62ef-4465-9e26-a61b581508f2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.50.88
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['26292', '26293', '26294', '26295', '26296']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 26292:26292 -p 26293:26293 -p 26294:26294 -p 26295:26295 -p 26296:26296 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26294 --rest-port=26292 --tcp-port=26293 --discv5-udp-port=26295 --rest-address=0.0.0.0 --nat=extip:172.18.50.88 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aeed6896c74a2e95b9e5ddd09deab1f47cebbb971301ee0cf91badccebba2e23 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26296 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.50.88 waku b796bdb2600e69c98f66f26857b7574175138ab561d36d1a0b533388e588a251
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b796bdb2600e. Setting up logs at ./log/docker/receiving_node1_2025-02-10_04-03-41__030955a6-62ef-4465-9e26-a61b581508f2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 26292
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 72f828c99b84. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26292/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26292/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.50.88/tcp/26293/p2p/16Uiu2HAm5NRYa1oiV1jqZdVemDHb75G3nJmm5f4XtM9acQNbrENt","/ip4/172.18.50.88/tcp/26294/ws/p2p/16Uiu2HAm5NRYa1oiV1jqZdVemDHb75G3nJmm5f4XtM9acQNbrENt"],"enrUri":"enr:-L24QMni5rggLC24dxh1TgJb91gv6bgDHlheS7Uv2LCWY2I5Twio7pFLy2RUT2Xw7rDa9OUd1a3uOQNAdMRwehBajGYCgmlkgnY0gmlwhKwSMliKbXVsdGlhZGRyc5YACASsEjJYBma1AAoErBIyWAZmtt0DgnJzhQADAQAAiXNlY3AyNTZrMaECk7_OJUtUIp5b7YdYbPgJtO2kuj2rO1ZkeO7aAlm2S_GDdGNwgma1g3VkcIJmt4V3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-10_04-03-41__030955a6-62ef-4465-9e26-a61b581508f2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.96.170
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['22267', '22268', '22269', '22270', '22271']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 22267:22267 -p 22268:22268 -p 22269:22269 -p 22270:22270 -p 22271:22271 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22269 --rest-port=22267 --tcp-port=22268 --discv5-udp-port=22270 --rest-address=0.0.0.0 --nat=extip:172.18.96.170 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a14dd6c37dcd91d29702b63e4d6dc0da0e939721eda2acb124faed5a076facb5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22271 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.96.170 waku 8c0eeb66cd44e28354a31d8fdd82872dd4764301c37d469f2476337e645d2b16
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8c0eeb66cd44. Setting up logs at ./log/docker/receiving_node2_2025-02-10_04-03-41__030955a6-62ef-4465-9e26-a61b581508f2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 22267
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22267/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22267/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.96.170/tcp/22268/p2p/16Uiu2HAmDfkzxXVzEEGRDC8gNyjXXjrFJMxFuWcaYtfobSb7XLB6","/ip4/172.18.96.170/tcp/22269/ws/p2p/16Uiu2HAmDfkzxXVzEEGRDC8gNyjXXjrFJMxFuWcaYtfobSb7XLB6"],"enrUri":"enr:-L24QKqFj4eTfaie4q_kruQgqBCQlXp4YKl7-3Y89x_wMGrJRTI-ZQGmdrnFg49n4prwFgPZDU3xS48goaScPv-LoF8CgmlkgnY0gmlwhKwSYKqKbXVsdGlhZGRyc5YACASsEmCqBlb8AAoErBJgqgZW_d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDw4sFt7oDb6Tl7Cal3JkBTwL6NKtOrItAaJ4xT3LmYWDdGNwglb8g3VkcIJW_oV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22267/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.50.88/tcp/26293/p2p/16Uiu2HAm5NRYa1oiV1jqZdVemDHb75G3nJmm5f4XtM9acQNbrENt"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-10_04-03-41__030955a6-62ef-4465-9e26-a61b581508f2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.150.98
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['15421', '15422', '15423', '15424', '15425']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 15421:15421 -p 15422:15422 -p 15423:15423 -p 15424:15424 -p 15425:15425 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15423 --rest-port=15421 --tcp-port=15422 --discv5-udp-port=15424 --rest-address=0.0.0.0 --nat=extip:172.18.150.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a2f9e0def1e099cb6ecab6f578cf71feac4c7df8d4697e078fd0bdd6dfffae18 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15425 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMni5rggLC24dxh1TgJb91gv6bgDHlheS7Uv2LCWY2I5Twio7pFLy2RUT2Xw7rDa9OUd1a3uOQNAdMRwehBajGYCgmlkgnY0gmlwhKwSMliKbXVsdGlhZGRyc5YACASsEjJYBma1AAoErBIyWAZmtt0DgnJzhQADAQAAiXNlY3AyNTZrMaECk7_OJUtUIp5b7YdYbPgJtO2kuj2rO1ZkeO7aAlm2S_GDdGNwgma1g3VkcIJmt4V3YWt1Mg0 --lightpushnode=/ip4/172.18.50.88/tcp/26293/p2p/16Uiu2HAm5NRYa1oiV1jqZdVemDHb75G3nJmm5f4XtM9acQNbrENt --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.150.98 waku 29e7542df7b3d4e737182ec331210d82fe62a4a8f8beae04e0dd27cbdbe63238
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 29e7542df7b3. Setting up logs at ./log/docker/lightpush_node1_2025-02-10_04-03-41__030955a6-62ef-4465-9e26-a61b581508f2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 15421
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15421/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15421/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.150.98/tcp/15422/p2p/16Uiu2HAkwf1GddJiyrwVUBcnMjgF332BggCYeM1UvSp6rju2Brrm","/ip4/172.18.150.98/tcp/15423/ws/p2p/16Uiu2HAkwf1GddJiyrwVUBcnMjgF332BggCYeM1UvSp6rju2Brrm"],"enrUri":"enr:-L24QCqNX8WMn03dYFASOL-ssQAW-QhPSrExyWPhe9bRY3l7XGXrSIEYwH4MAUwAs8v7wV73pMW66BqTnBHfRaEGg1oCgmlkgnY0gmlwhKwSlmKKbXVsdGlhZGRyc5YACASsEpZiBjw-AAoErBKWYgY8P90DgnJzhQADAQAAiXNlY3AyNTZrMaECISG8axv3QCglc6JfYjLHmNga7yy-11PIjaupsPzF1kqDdGNwgjw-g3VkcII8QIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15421/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.50.88/tcp/26293/p2p/16Uiu2HAm5NRYa1oiV1jqZdVemDHb75G3nJmm5f4XtM9acQNbrENt"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15421/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.96.170/tcp/22268/p2p/16Uiu2HAmDfkzxXVzEEGRDC8gNyjXXjrFJMxFuWcaYtfobSb7XLB6"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26292/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22267/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15421/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739160225289337088}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26292/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739160225289337088,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22267/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739160225289337088,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b796bdb2600e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 8c0eeb66cd44
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b796bdb2600e. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 29e7542df7b3
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 8c0eeb66cd44. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.