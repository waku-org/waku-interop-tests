2025-02-10 04:03:57.370 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 04:03:57.371 DEBUG [tests.conftest] Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2025-02-10_04-03-57__df8e6977-0767-486b-abf8-9635a4c5e4c2
2025-02-10 04:03:57.371 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 04:03:57.371 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-10 04:03:57.378 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:03:57.378 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-10_04-03-57__df8e6977-0767-486b-abf8-9635a4c5e4c2__wakuorg_nwaku:latest.log
2025-02-10 04:03:57.379 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:03:57.379 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:03:57.380 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:03:57.380 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.165.97
2025-02-10 04:03:57.381 DEBUG [src.node.docker_mananger] Generated ports ['44255', '44256', '44257', '44258', '44259']
2025-02-10 04:03:57.381 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:03:57.381 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:03:57.381 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:03:57.381 DEBUG [src.node.docker_mananger] docker run -i -t -p 44255:44255 -p 44256:44256 -p 44257:44257 -p 44258:44258 -p 44259:44259 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44257 --rest-port=44255 --tcp-port=44256 --discv5-udp-port=44258 --rest-address=0.0.0.0 --nat=extip:172.18.165.97 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a3fe149f7efeba4b93be8a6bbeccdfedb18da7690c5c6af606a0fefe9e9dcba7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44259 --metrics-logging=true --lightpush=true --relay=true
2025-02-10 04:03:57.621 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.165.97 waku dc94ec4b5758390e7a9f56adc511cda6aea91b0f78fd81671b12ca97c2f9cf6e
2025-02-10 04:03:57.672 DEBUG [src.node.docker_mananger] Container started with ID dc94ec4b5758. Setting up logs at ./log/docker/receiving_node1_2025-02-10_04-03-57__df8e6977-0767-486b-abf8-9635a4c5e4c2__wakuorg_nwaku:latest.log
2025-02-10 04:03:57.674 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44255
2025-02-10 04:03:57.674 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:03:58.173 ERROR [src.node.docker_mananger] Max retries reached for container dafef577849a. Exiting log stream.
2025-02-10 04:03:58.674 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44255/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:58.677 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:03:58.677 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:03:58.678 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44255/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:58.680 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.165.97/tcp/44256/p2p/16Uiu2HAmHXwEDbSe1CCHSwCGAaUbZBxrg53VhgaEBrbsGuD6FQF1","/ip4/172.18.165.97/tcp/44257/ws/p2p/16Uiu2HAmHXwEDbSe1CCHSwCGAaUbZBxrg53VhgaEBrbsGuD6FQF1"],"enrUri":"enr:-L24QFbxoTJCgESsvSeOZ_Vz2jYCf-7FrF17MIYfpnnB2QgsMGZYPVuMO8huHnB8WATlf2k-QpLTyUgI7McGSSAbvzcCgmlkgnY0gmlwhKwSpWGKbXVsdGlhZGRyc5YACASsEqVhBqzgAAoErBKlYQas4d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDSHvWyB2-PZQo8ZUeIJiEuYPkmiHBelaXPbX4elbFUOiDdGNwgqzgg3VkcIKs4oV3YWt1Mgk"}'
2025-02-10 04:03:58.680 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:03:58.687 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:03:58.688 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-10_04-03-57__df8e6977-0767-486b-abf8-9635a4c5e4c2__wakuorg_nwaku:latest.log
2025-02-10 04:03:58.688 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:03:58.688 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:03:58.689 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:03:58.689 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.147.1
2025-02-10 04:03:58.690 DEBUG [src.node.docker_mananger] Generated ports ['22739', '22740', '22741', '22742', '22743']
2025-02-10 04:03:58.690 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:03:58.690 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:03:58.690 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:03:58.690 DEBUG [src.node.docker_mananger] docker run -i -t -p 22739:22739 -p 22740:22740 -p 22741:22741 -p 22742:22742 -p 22743:22743 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22741 --rest-port=22739 --tcp-port=22740 --discv5-udp-port=22742 --rest-address=0.0.0.0 --nat=extip:172.18.147.1 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ac3fbe2fdaf7dad2f7f2da06fceeeef8921c0a027e2c84e24babba0ce0afd20c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22743 --metrics-logging=true --lightpush=false --relay=true
2025-02-10 04:03:58.932 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.147.1 waku c66aa1c190f446d50698ea3ff015b23fe37a9068b72e40952f70db032572b25a
2025-02-10 04:03:58.985 DEBUG [src.node.docker_mananger] Container started with ID c66aa1c190f4. Setting up logs at ./log/docker/receiving_node2_2025-02-10_04-03-57__df8e6977-0767-486b-abf8-9635a4c5e4c2__wakuorg_nwaku:latest.log
2025-02-10 04:03:58.986 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22739
2025-02-10 04:03:58.986 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:03:59.986 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22739/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:59.989 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:03:59.989 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:03:59.990 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22739/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:59.992 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.147.1/tcp/22740/p2p/16Uiu2HAmA8ZjJSjNAYtJt4HJo44eLHiAieYaZRY9d9FeGmfHi5QX","/ip4/172.18.147.1/tcp/22741/ws/p2p/16Uiu2HAmA8ZjJSjNAYtJt4HJo44eLHiAieYaZRY9d9FeGmfHi5QX"],"enrUri":"enr:-L24QH8HjSKpA3lL8Z7Zt40e8pk-BZWfpKpG5RHlOnVjLnn5bITkPJNDqywzwIfMsqWUec_05EZhPGbqjp7LfTRxomECgmlkgnY0gmlwhKwSkwGKbXVsdGlhZGRyc5YACASsEpMBBljUAAoErBKTAQZY1d0DgnJzhQADAQAAiXNlY3AyNTZrMaEC2n1dB8_CkDTSqTTYrzGO_5pXoVI6dzPk7nX3OndCMoyDdGNwgljUg3VkcIJY1oV3YWt1MgE"}'
2025-02-10 04:03:59.992 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:03:59.992 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22739/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.165.97/tcp/44256/p2p/16Uiu2HAmHXwEDbSe1CCHSwCGAaUbZBxrg53VhgaEBrbsGuD6FQF1"]'
2025-02-10 04:04:00.031 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:04:00.041 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:04:00.042 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-10_04-03-57__df8e6977-0767-486b-abf8-9635a4c5e4c2__wakuorg_nwaku:latest.log
2025-02-10 04:04:00.042 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:04:00.042 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:04:00.043 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:04:00.044 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.71.65
2025-02-10 04:04:00.044 DEBUG [src.node.docker_mananger] Generated ports ['14757', '14758', '14759', '14760', '14761']
2025-02-10 04:04:00.044 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:04:00.044 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:04:00.044 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:04:00.044 DEBUG [src.node.docker_mananger] docker run -i -t -p 14757:14757 -p 14758:14758 -p 14759:14759 -p 14760:14760 -p 14761:14761 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14759 --rest-port=14757 --tcp-port=14758 --discv5-udp-port=14760 --rest-address=0.0.0.0 --nat=extip:172.18.71.65 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7efba6e03373bc8be1dff3b7dda114eda4342ae3fdca1d8ae708ef2ef54ca109 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14761 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFbxoTJCgESsvSeOZ_Vz2jYCf-7FrF17MIYfpnnB2QgsMGZYPVuMO8huHnB8WATlf2k-QpLTyUgI7McGSSAbvzcCgmlkgnY0gmlwhKwSpWGKbXVsdGlhZGRyc5YACASsEqVhBqzgAAoErBKlYQas4d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDSHvWyB2-PZQo8ZUeIJiEuYPkmiHBelaXPbX4elbFUOiDdGNwgqzgg3VkcIKs4oV3YWt1Mgk --lightpushnode=/ip4/172.18.165.97/tcp/44256/p2p/16Uiu2HAmHXwEDbSe1CCHSwCGAaUbZBxrg53VhgaEBrbsGuD6FQF1 --lightpush=true --relay=false
2025-02-10 04:04:00.283 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.71.65 waku 37d89a535d5bbf9855abb81096eee36c71e8094418fee09cf6a948c80874dacb
2025-02-10 04:04:00.332 DEBUG [src.node.docker_mananger] Container started with ID 37d89a535d5b. Setting up logs at ./log/docker/lightpush_node1_2025-02-10_04-03-57__df8e6977-0767-486b-abf8-9635a4c5e4c2__wakuorg_nwaku:latest.log
2025-02-10 04:04:00.332 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14757
2025-02-10 04:04:00.333 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:04:01.334 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14757/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:04:01.337 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:04:01.337 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:04:01.338 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14757/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:04:01.340 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.71.65/tcp/14758/p2p/16Uiu2HAm4QfwqPhY8LahzLVJA6bJCvN7aPDZQGBrQbFBFn43dmKG","/ip4/172.18.71.65/tcp/14759/ws/p2p/16Uiu2HAm4QfwqPhY8LahzLVJA6bJCvN7aPDZQGBrQbFBFn43dmKG"],"enrUri":"enr:-L24QE5LOFIimu7xgoUMvDzuOpnkIwsd9dJAuV-bs3youbu2ZX7re8dRaSmZ6YeU8esuDgixcw8YGz97Ae7LpsDfocMCgmlkgnY0gmlwhKwSR0GKbXVsdGlhZGRyc5YACASsEkdBBjmmAAoErBJHQQY5p90DgnJzhQADAQAAiXNlY3AyNTZrMaEChXeQN7PPv8DncsAoF-zySUxIKTEiKVBYnV3BXYftYTODdGNwgjmmg3VkcII5qIV3YWt1Mgg"}'
2025-02-10 04:04:01.340 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:04:01.341 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14757/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.165.97/tcp/44256/p2p/16Uiu2HAmHXwEDbSe1CCHSwCGAaUbZBxrg53VhgaEBrbsGuD6FQF1"]'
2025-02-10 04:04:01.383 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:04:01.384 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14757/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.147.1/tcp/22740/p2p/16Uiu2HAmA8ZjJSjNAYtJt4HJo44eLHiAieYaZRY9d9FeGmfHi5QX"]'
2025-02-10 04:04:01.410 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:04:01.414 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44255/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:04:01.419 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:04:01.420 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22739/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:04:01.426 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:04:01.429 DEBUG [src.steps.light_push] Lightpushing message
2025-02-10 04:04:01.429 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14757/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739160241429372416}}'
2025-02-10 04:04:01.437 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:14757/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
2025-02-10 04:04:01.440 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 04:04:01.441 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 04:04:01.441 DEBUG [src.node.waku_node] Stopping container with id dc94ec4b5758
2025-02-10 04:04:02.182 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:04:02.182 DEBUG [src.node.waku_node] Stopping container with id c66aa1c190f4
2025-02-10 04:04:02.995 ERROR [src.node.docker_mananger] Max retries reached for container dc94ec4b5758. Exiting log stream.
2025-02-10 04:04:03.717 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:04:03.717 DEBUG [src.node.waku_node] Stopping container with id 37d89a535d5b
2025-02-10 04:04:04.530 ERROR [src.node.docker_mananger] Max retries reached for container c66aa1c190f4. Exiting log stream.
2025-02-10 04:04:05.257 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:04:05.260 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 04:04:05.266 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:04:05.272 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:04:05.277 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
