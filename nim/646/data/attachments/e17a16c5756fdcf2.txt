2025-02-10 04:07:11.118 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 04:07:11.118 DEBUG [tests.conftest] Running test: test_main_node_only_lightpush__peer_only_lightpush with id: 2025-02-10_04-07-11__f4cd9673-7b50-4b22-9257-353a4b16732c
2025-02-10 04:07:11.118 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 04:07:11.119 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-10 04:07:11.125 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:07:11.126 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-10_04-07-11__f4cd9673-7b50-4b22-9257-353a4b16732c__wakuorg_nwaku:latest.log
2025-02-10 04:07:11.126 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:07:11.126 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:07:11.127 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:07:11.128 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.235.122
2025-02-10 04:07:11.128 DEBUG [src.node.docker_mananger] Generated ports ['2775', '2776', '2777', '2778', '2779']
2025-02-10 04:07:11.128 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:07:11.128 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:07:11.128 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:07:11.128 DEBUG [src.node.docker_mananger] docker run -i -t -p 2775:2775 -p 2776:2776 -p 2777:2777 -p 2778:2778 -p 2779:2779 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2777 --rest-port=2775 --tcp-port=2776 --discv5-udp-port=2778 --rest-address=0.0.0.0 --nat=extip:172.18.235.122 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8d449261e51df29dba7e68137ebd1590ec9af685d7dbe322c3bf4b105ed3cb94 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2779 --metrics-logging=true --lightpush=true --relay=false
2025-02-10 04:07:11.358 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.235.122 waku 569014db7b15f618048fb52d01b59547de347f55f7973bcf660e7122445240d5
2025-02-10 04:07:11.407 DEBUG [src.node.docker_mananger] Container started with ID 569014db7b15. Setting up logs at ./log/docker/receiving_node1_2025-02-10_04-07-11__f4cd9673-7b50-4b22-9257-353a4b16732c__wakuorg_nwaku:latest.log
2025-02-10 04:07:11.407 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2775
2025-02-10 04:07:11.407 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:07:11.914 ERROR [src.node.docker_mananger] Max retries reached for container 036b47e32b10. Exiting log stream.
2025-02-10 04:07:12.409 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2775/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:12.412 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:07:12.412 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:07:12.412 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2775/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:12.414 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.235.122/tcp/2776/p2p/16Uiu2HAmTorfacT8nTMeQb9YtaAmK31dXmaMy34s5Jwn7nXb1nf2","/ip4/172.18.235.122/tcp/2777/ws/p2p/16Uiu2HAmTorfacT8nTMeQb9YtaAmK31dXmaMy34s5Jwn7nXb1nf2"],"enrUri":"enr:-L24QAQZ8cCO22IKCnxpzL6SXw9oSUMhyRqQ87HCI3nG-zc0cLkygNnL_orFf8nJ02j-5K7f65iFlfXLvcOqPdFKtl8CgmlkgnY0gmlwhKwS63qKbXVsdGlhZGRyc5YACASsEut6BgrYAAoErBLregYK2d0DgnJzhQADAQAAiXNlY3AyNTZrMaED4STXlRDaQBe0eWw7Gwvfcgwh9T9uE4Rk-bGRVJR5YhGDdGNwggrYg3VkcIIK2oV3YWt1Mgg"}'
2025-02-10 04:07:12.414 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:07:12.421 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:07:12.421 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-10_04-07-11__f4cd9673-7b50-4b22-9257-353a4b16732c__wakuorg_nwaku:latest.log
2025-02-10 04:07:12.421 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:07:12.421 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:07:12.422 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:07:12.422 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.252.223
2025-02-10 04:07:12.423 DEBUG [src.node.docker_mananger] Generated ports ['65122', '65123', '65124', '65125', '65126']
2025-02-10 04:07:12.423 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:07:12.423 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:07:12.423 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:07:12.423 DEBUG [src.node.docker_mananger] docker run -i -t -p 65122:65122 -p 65123:65123 -p 65124:65124 -p 65125:65125 -p 65126:65126 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65124 --rest-port=65122 --tcp-port=65123 --discv5-udp-port=65125 --rest-address=0.0.0.0 --nat=extip:172.18.252.223 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6acf3fedeef75e905db4ccdf92bd9b44f5e9382d2ec1c332e37e153f9be1ba94 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65126 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QAQZ8cCO22IKCnxpzL6SXw9oSUMhyRqQ87HCI3nG-zc0cLkygNnL_orFf8nJ02j-5K7f65iFlfXLvcOqPdFKtl8CgmlkgnY0gmlwhKwS63qKbXVsdGlhZGRyc5YACASsEut6BgrYAAoErBLregYK2d0DgnJzhQADAQAAiXNlY3AyNTZrMaED4STXlRDaQBe0eWw7Gwvfcgwh9T9uE4Rk-bGRVJR5YhGDdGNwggrYg3VkcIIK2oV3YWt1Mgg --lightpushnode=/ip4/172.18.235.122/tcp/2776/p2p/16Uiu2HAmTorfacT8nTMeQb9YtaAmK31dXmaMy34s5Jwn7nXb1nf2 --lightpush=true --relay=false
2025-02-10 04:07:12.651 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.252.223 waku 86dc52bc2a4e8f74fa38f29d4c3bdbd3780586dda8cb7336e6bcdb1f479a9ad8
2025-02-10 04:07:12.703 DEBUG [src.node.docker_mananger] Container started with ID 86dc52bc2a4e. Setting up logs at ./log/docker/lightpush_node1_2025-02-10_04-07-11__f4cd9673-7b50-4b22-9257-353a4b16732c__wakuorg_nwaku:latest.log
2025-02-10 04:07:12.704 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 65122
2025-02-10 04:07:12.704 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:07:13.704 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65122/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:13.707 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:07:13.707 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:07:13.708 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65122/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:13.710 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.252.223/tcp/65123/p2p/16Uiu2HAkxrTyqBL1JPeFGjQKpDBdWYWQGknM4iGsjsPfgJvLY3a8","/ip4/172.18.252.223/tcp/65124/ws/p2p/16Uiu2HAkxrTyqBL1JPeFGjQKpDBdWYWQGknM4iGsjsPfgJvLY3a8"],"enrUri":"enr:-L24QAfEuWtxNhy0n4bgdiJrdEhxy5tWAgpXDFo3OvyncxhTa9BSJIg7aUhyPnJ3ege782-ai_tuQgFWJpZ171ggpWgCgmlkgnY0gmlwhKwS_N-KbXVsdGlhZGRyc5YACASsEvzfBv5jAAoErBL83wb-ZN0DgnJzhQADAQAAiXNlY3AyNTZrMaECMu0DZ8zh3vIj7vTfXm42GypagYack-6Ciw7_cl0qHLGDdGNwgv5jg3VkcIL-ZYV3YWt1Mgg"}'
2025-02-10 04:07:13.710 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:07:13.710 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65122/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.235.122/tcp/2776/p2p/16Uiu2HAmTorfacT8nTMeQb9YtaAmK31dXmaMy34s5Jwn7nXb1nf2"]'
2025-02-10 04:07:13.746 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:13.747 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65122/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739160433747637248}}'
2025-02-10 04:07:13.771 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:65122/lightpush/v1/message. Response content: b'Failed to request a message push: no waku relay found'
2025-02-10 04:07:13.772 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 04:07:13.773 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 04:07:13.774 DEBUG [src.node.waku_node] Stopping container with id 569014db7b15
2025-02-10 04:07:14.427 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:07:14.427 DEBUG [src.node.waku_node] Stopping container with id 86dc52bc2a4e
2025-02-10 04:07:15.239 ERROR [src.node.docker_mananger] Max retries reached for container 569014db7b15. Exiting log stream.
2025-02-10 04:07:15.657 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:07:15.658 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 04:07:15.661 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:07:15.665 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
