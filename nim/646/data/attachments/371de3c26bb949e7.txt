2025-02-10 04:03:13.420 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 04:03:13.420 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2025-02-10_04-03-13__d9115383-3210-4186-9027-f7ab54860bcc
2025-02-10 04:03:13.421 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 04:03:13.421 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-10 04:03:13.421 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-10 04:03:13.429 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:03:13.429 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-10_04-03-13__d9115383-3210-4186-9027-f7ab54860bcc__wakuorg_nwaku:latest.log
2025-02-10 04:03:13.435 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:03:13.435 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-10_04-03-13__d9115383-3210-4186-9027-f7ab54860bcc__wakuorg_nwaku:latest.log
2025-02-10 04:03:13.440 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:03:13.441 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-10_04-03-13__d9115383-3210-4186-9027-f7ab54860bcc__wakuorg_nwaku:latest.log
2025-02-10 04:03:13.441 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-10 04:03:13.441 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-10 04:03:13.442 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:03:13.442 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:03:13.505 DEBUG [src.node.docker_mananger] Network waku created
2025-02-10 04:03:13.505 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.186.27
2025-02-10 04:03:13.505 DEBUG [src.node.docker_mananger] Generated ports ['18680', '18681', '18682', '18683', '18684']
2025-02-10 04:03:13.505 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:03:13.506 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:03:13.506 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:03:13.506 DEBUG [src.node.docker_mananger] docker run -i -t -p 18680:18680 -p 18681:18681 -p 18682:18682 -p 18683:18683 -p 18684:18684 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18682 --rest-port=18680 --tcp-port=18681 --discv5-udp-port=18683 --rest-address=0.0.0.0 --nat=extip:172.18.186.27 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=de79bbeedf218f0d00f0dfebc1bdf0af8d7897d158ef22ab9eb6ccda4c3dc7a2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18684 --metrics-logging=true --lightpush=true
2025-02-10 04:03:15.766 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.186.27 waku 68e73ef90a62217271b305238ffcdf2385855690fa69c83abc02137b995ee2ed
2025-02-10 04:03:15.817 DEBUG [src.node.docker_mananger] Container started with ID 68e73ef90a62. Setting up logs at ./log/docker/node1_2025-02-10_04-03-13__d9115383-3210-4186-9027-f7ab54860bcc__wakuorg_nwaku:latest.log
2025-02-10 04:03:15.817 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18680
2025-02-10 04:03:15.818 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:03:16.818 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18680/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:16.821 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:03:16.821 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:03:16.822 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18680/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:16.824 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.186.27/tcp/18681/p2p/16Uiu2HAmL3Qjos44FDXxvexvv7TgwrX77JKj2SrRwo7DAKaN3M4c","/ip4/172.18.186.27/tcp/18682/ws/p2p/16Uiu2HAmL3Qjos44FDXxvexvv7TgwrX77JKj2SrRwo7DAKaN3M4c"],"enrUri":"enr:-L24QGjXGdfnrPYRL3IM5KYnLRuJQ2NpNVNuEj6A-Qxa-8G9H3Rlg-6sUDxsbWT7O3a7mapI_3TlvFwlno2Nctb6px0CgmlkgnY0gmlwhKwSuhuKbXVsdGlhZGRyc5YACASsErobBkj5AAoErBK6GwZI-t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDbcAphEVnNn50rq2jIJR-PHvTrqOhbDxp5kbianR19uGDdGNwgkj5g3VkcIJI-4V3YWt1Mgk"}'
2025-02-10 04:03:16.824 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:03:16.824 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:03:16.824 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:03:16.826 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:03:16.826 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.234.90
2025-02-10 04:03:16.826 DEBUG [src.node.docker_mananger] Generated ports ['14928', '14929', '14930', '14931', '14932']
2025-02-10 04:03:16.826 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:03:16.827 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:03:16.827 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:03:16.827 DEBUG [src.node.docker_mananger] docker run -i -t -p 14928:14928 -p 14929:14929 -p 14930:14930 -p 14931:14931 -p 14932:14932 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14930 --rest-port=14928 --tcp-port=14929 --discv5-udp-port=14931 --rest-address=0.0.0.0 --nat=extip:172.18.234.90 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=edd7aa93c5b0cfbe6b3bbb91f1ed5cf1c1ee4c0bc870e36aeaf9fa5c0674ebae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14932 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QGjXGdfnrPYRL3IM5KYnLRuJQ2NpNVNuEj6A-Qxa-8G9H3Rlg-6sUDxsbWT7O3a7mapI_3TlvFwlno2Nctb6px0CgmlkgnY0gmlwhKwSuhuKbXVsdGlhZGRyc5YACASsErobBkj5AAoErBK6GwZI-t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDbcAphEVnNn50rq2jIJR-PHvTrqOhbDxp5kbianR19uGDdGNwgkj5g3VkcIJI-4V3YWt1Mgk --lightpushnode=/ip4/172.18.186.27/tcp/18681/p2p/16Uiu2HAmL3Qjos44FDXxvexvv7TgwrX77JKj2SrRwo7DAKaN3M4c
2025-02-10 04:03:17.056 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.234.90 waku 2e62ec3b710bfabf51ab8f544aa31f2439b09df4e5260ad6983fae0f38bdeea3
2025-02-10 04:03:17.101 DEBUG [src.node.docker_mananger] Container started with ID 2e62ec3b710b. Setting up logs at ./log/docker/node2_2025-02-10_04-03-13__d9115383-3210-4186-9027-f7ab54860bcc__wakuorg_nwaku:latest.log
2025-02-10 04:03:17.102 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14928
2025-02-10 04:03:17.103 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:03:18.103 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14928/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:18.107 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:03:18.107 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:03:18.107 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14928/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:18.109 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.234.90/tcp/14929/p2p/16Uiu2HAkv7Qz6Z3xWqNwrfocxdhVyn6pXWoMgCkNwo8szQx8KhjL","/ip4/172.18.234.90/tcp/14930/ws/p2p/16Uiu2HAkv7Qz6Z3xWqNwrfocxdhVyn6pXWoMgCkNwo8szQx8KhjL"],"enrUri":"enr:-L24QOeVgqEgqX8KmgNtoR6zgK3MwqDnC6fVB0J1q4P9dRyybIcEXmNfn2vC4z1dvaid_hNca1JPRzsyXrk5iiE78XcCgmlkgnY0gmlwhKwS6lqKbXVsdGlhZGRyc5YACASsEupaBjpRAAoErBLqWgY6Ut0DgnJzhQADAQAAiXNlY3AyNTZrMaECCi5HGG5ue41beiFNxsLd0Ed2esT1ydU1StUotdIldReDdGNwgjpRg3VkcII6U4V3YWt1Mgs"}'
2025-02-10 04:03:18.110 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:03:18.110 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:03:18.110 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:03:18.111 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:03:18.112 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.209.96
2025-02-10 04:03:18.112 DEBUG [src.node.docker_mananger] Generated ports ['28060', '28061', '28062', '28063', '28064']
2025-02-10 04:03:18.112 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:03:18.112 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:03:18.112 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:03:18.112 DEBUG [src.node.docker_mananger] docker run -i -t -p 28060:28060 -p 28061:28061 -p 28062:28062 -p 28063:28063 -p 28064:28064 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28062 --rest-port=28060 --tcp-port=28061 --discv5-udp-port=28063 --rest-address=0.0.0.0 --nat=extip:172.18.209.96 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9aab472cc13d0213ecdadde4e9f9bac8ffb5bbc91149e5e54a2fd72daf34d532 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28064 --metrics-logging=true --relay=false --storenode=/ip4/172.18.234.90/tcp/14929/p2p/16Uiu2HAkv7Qz6Z3xWqNwrfocxdhVyn6pXWoMgCkNwo8szQx8KhjL --discv5-bootstrap-node=enr:-L24QOeVgqEgqX8KmgNtoR6zgK3MwqDnC6fVB0J1q4P9dRyybIcEXmNfn2vC4z1dvaid_hNca1JPRzsyXrk5iiE78XcCgmlkgnY0gmlwhKwS6lqKbXVsdGlhZGRyc5YACASsEupaBjpRAAoErBLqWgY6Ut0DgnJzhQADAQAAiXNlY3AyNTZrMaECCi5HGG5ue41beiFNxsLd0Ed2esT1ydU1StUotdIldReDdGNwgjpRg3VkcII6U4V3YWt1Mgs
2025-02-10 04:03:18.340 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.209.96 waku 3d2050ff54722201fabc5d75248cb352a0cdda9a651939c8ada125a3521aac7a
2025-02-10 04:03:18.391 DEBUG [src.node.docker_mananger] Container started with ID 3d2050ff5472. Setting up logs at ./log/docker/node3_2025-02-10_04-03-13__d9115383-3210-4186-9027-f7ab54860bcc__wakuorg_nwaku:latest.log
2025-02-10 04:03:18.391 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28060
2025-02-10 04:03:18.392 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:03:19.392 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28060/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:19.395 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:03:19.395 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:03:19.395 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28060/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:19.397 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.209.96/tcp/28061/p2p/16Uiu2HAmMTFo8BY2NLV2wSiWTomSWmwaX2Qhn2aCbvrrhdVcAucj","/ip4/172.18.209.96/tcp/28062/ws/p2p/16Uiu2HAmMTFo8BY2NLV2wSiWTomSWmwaX2Qhn2aCbvrrhdVcAucj"],"enrUri":"enr:-L24QEp9Fen_akN8KOsOV-zdUBPqH2hwFMEAIggY3S6ai8iwTywX6tFxkwk6_OYLKRQiAg3YMp4kFigDaUuJFosRX6oCgmlkgnY0gmlwhKwS0WCKbXVsdGlhZGRyc5YACASsEtFgBm2dAAoErBLRYAZtnt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDgretRJxwYQYCDhNczr8Qjq4moUKgiAVgy0VzXt0XiYCDdGNwgm2dg3VkcIJtn4V3YWt1MgA"}'
2025-02-10 04:03:19.397 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:03:19.398 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18680/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-10 04:03:19.401 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:03:19.401 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14928/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-10 04:03:19.408 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:03:19.409 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18680/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:19.412 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.234.90/tcp/14929/p2p/16Uiu2HAkv7Qz6Z3xWqNwrfocxdhVyn6pXWoMgCkNwo8szQx8KhjL","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-10 04:03:19.412 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14928/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:19.415 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.186.27/tcp/18681/p2p/16Uiu2HAmL3Qjos44FDXxvexvv7TgwrX77JKj2SrRwo7DAKaN3M4c","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
2025-02-10 04:03:19.415 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-10 04:03:49.416 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18680/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1739160229415866112}}'
2025-02-10 04:03:49.428 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:03:49.428 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:03:50.428 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-10 04:03:50.429 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28060/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:03:50.475 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"c96e8a64f6becf0006c1","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xa3ebaca318a76210f00ccbee1b5e7d9e42db184332c4c2b6d303e47a7026cb6f"}]}'
2025-02-10 04:03:50.481 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 04:03:50.482 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 04:03:50.482 DEBUG [src.node.waku_node] Stopping container with id 68e73ef90a62
2025-02-10 04:03:51.619 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:03:51.621 DEBUG [src.node.waku_node] Stopping container with id 2e62ec3b710b
2025-02-10 04:03:52.432 ERROR [src.node.docker_mananger] Max retries reached for container 68e73ef90a62. Exiting log stream.
2025-02-10 04:03:52.863 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:03:52.863 DEBUG [src.node.waku_node] Stopping container with id 3d2050ff5472
2025-02-10 04:03:53.717 ERROR [src.node.docker_mananger] Max retries reached for container 2e62ec3b710b. Exiting log stream.
2025-02-10 04:03:53.841 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:03:53.842 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 04:03:53.851 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:03:53.874 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:03:53.879 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
