2025-02-10 04:05:35.126 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 04:05:35.126 DEBUG [tests.conftest] Running test: test_message_published_on_different_pubsub_topic_is_not_retrieved with id: 2025-02-10_04-05-35__94cb24cd-b24d-4f4c-9573-fb14e4a63369
2025-02-10 04:05:35.126 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 04:05:35.127 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-10 04:05:35.127 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-10 04:05:35.133 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:05:35.133 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-10_04-05-35__94cb24cd-b24d-4f4c-9573-fb14e4a63369__wakuorg_nwaku:latest.log
2025-02-10 04:05:35.133 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:05:35.133 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:05:35.135 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:05:35.135 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.31.113
2025-02-10 04:05:35.135 DEBUG [src.node.docker_mananger] Generated ports ['6856', '6857', '6858', '6859', '6860']
2025-02-10 04:05:35.135 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:05:35.135 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:05:35.135 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:05:35.135 DEBUG [src.node.docker_mananger] docker run -i -t -p 6856:6856 -p 6857:6857 -p 6858:6858 -p 6859:6859 -p 6860:6860 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6858 --rest-port=6856 --tcp-port=6857 --discv5-udp-port=6859 --rest-address=0.0.0.0 --nat=extip:172.18.31.113 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bdf6ecdea9465c2dbe50f797bec8fad8ad0f4dd9359ecb6df36ec75ac50eeefe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6860 --metrics-logging=true --relay=true
2025-02-10 04:05:35.364 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.31.113 waku ea3d139121f956fe9a35914bd6cc747e377daaeab1048a92eb204c7ffe08e6a5
2025-02-10 04:05:35.410 DEBUG [src.node.docker_mananger] Container started with ID ea3d139121f9. Setting up logs at ./log/docker/node1_2025-02-10_04-05-35__94cb24cd-b24d-4f4c-9573-fb14e4a63369__wakuorg_nwaku:latest.log
2025-02-10 04:05:35.411 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6856
2025-02-10 04:05:35.411 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:05:35.937 ERROR [src.node.docker_mananger] Max retries reached for container 7211acd7e01d. Exiting log stream.
2025-02-10 04:05:36.411 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6856/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:05:36.414 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:05:36.414 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:05:36.414 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6856/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:05:36.416 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.31.113/tcp/6857/p2p/16Uiu2HAmDVFFVho3Rgk7cxFWxQfJU42Wh1wGysRG79EE1amJ8EAx","/ip4/172.18.31.113/tcp/6858/ws/p2p/16Uiu2HAmDVFFVho3Rgk7cxFWxQfJU42Wh1wGysRG79EE1amJ8EAx"],"enrUri":"enr:-L24QEDvRXtA3_UDihoW4jDCk9j3Hr0qW2UFtnR0jKleBjZ2MazvQJJiVF8BHvh6ocaj--Gg4r6Xd8es14ja3nsNbcgCgmlkgnY0gmlwhKwSH3GKbXVsdGlhZGRyc5YACASsEh9xBhrJAAoErBIfcQYayt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDFy594Fb-iPy8z0n1Y7ktDl0H9DCJXXDz9fwpp5GBv2DdGNwghrJg3VkcIIay4V3YWt1MgE"}'
2025-02-10 04:05:36.417 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:05:36.423 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:05:36.423 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-10_04-05-35__94cb24cd-b24d-4f4c-9573-fb14e4a63369__wakuorg_nwaku:latest.log
2025-02-10 04:05:36.423 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:05:36.423 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:05:36.424 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:05:36.424 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.193.92
2025-02-10 04:05:36.425 DEBUG [src.node.docker_mananger] Generated ports ['9756', '9757', '9758', '9759', '9760']
2025-02-10 04:05:36.425 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:05:36.425 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:05:36.425 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:05:36.425 DEBUG [src.node.docker_mananger] docker run -i -t -p 9756:9756 -p 9757:9757 -p 9758:9758 -p 9759:9759 -p 9760:9760 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9758 --rest-port=9756 --tcp-port=9757 --discv5-udp-port=9759 --rest-address=0.0.0.0 --nat=extip:172.18.193.92 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4fecf8fa17399caaccfea6b0bcdee3d1351b4cfedfdb7259ae8d2e4e6b35a6ec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9760 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QEDvRXtA3_UDihoW4jDCk9j3Hr0qW2UFtnR0jKleBjZ2MazvQJJiVF8BHvh6ocaj--Gg4r6Xd8es14ja3nsNbcgCgmlkgnY0gmlwhKwSH3GKbXVsdGlhZGRyc5YACASsEh9xBhrJAAoErBIfcQYayt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDFy594Fb-iPy8z0n1Y7ktDl0H9DCJXXDz9fwpp5GBv2DdGNwghrJg3VkcIIay4V3YWt1MgE
2025-02-10 04:05:36.645 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.193.92 waku 55018ceac6f90d52914c3e9586cdd1d8385fa264188afbd827c46a58d917686e
2025-02-10 04:05:36.698 DEBUG [src.node.docker_mananger] Container started with ID 55018ceac6f9. Setting up logs at ./log/docker/node2_2025-02-10_04-05-35__94cb24cd-b24d-4f4c-9573-fb14e4a63369__wakuorg_nwaku:latest.log
2025-02-10 04:05:36.699 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9756
2025-02-10 04:05:36.699 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:05:37.700 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9756/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:05:37.707 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:05:37.708 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:05:37.708 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9756/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:05:37.710 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.193.92/tcp/9757/p2p/16Uiu2HAmDEL4dKt5JzpQy6hKtw4cK8tdDeEp7CFa4VgubXyVRq16","/ip4/172.18.193.92/tcp/9758/ws/p2p/16Uiu2HAmDEL4dKt5JzpQy6hKtw4cK8tdDeEp7CFa4VgubXyVRq16"],"enrUri":"enr:-L24QDT_n3sJBvgqt4MxXupRyZvQLxiz4l85dvP_byaQkIgLdwqf0kZZgrt3B2u62XCew9gq07k1GB3Fxr-arc935DACgmlkgnY0gmlwhKwSwVyKbXVsdGlhZGRyc5YACASsEsFcBiYdAAoErBLBXAYmHt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDCIp0uAWedur_i2BmqWqRInVRBCa--POZd2z54jwq9cWDdGNwgiYdg3VkcIImH4V3YWt1MgE"}'
2025-02-10 04:05:37.711 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:05:37.711 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9756/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.31.113/tcp/6857/p2p/16Uiu2HAmDVFFVho3Rgk7cxFWxQfJU42Wh1wGysRG79EE1amJ8EAx"]'
2025-02-10 04:05:37.713 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:05:37.714 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2025-02-10 04:05:37.714 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6856/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-10 04:05:37.718 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:05:37.718 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9756/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-10 04:05:37.724 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:05:37.725 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6856/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:05:37.731 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:05:37.731 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-10 04:05:37.832 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-10 04:05:37.832 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6856/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:05:37.834 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739160337725781760,"ephemeral":false}]'
2025-02-10 04:05:37.836 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-10 04:05:37.836 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9756/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:05:37.838 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739160337725781760,"ephemeral":false}]'
2025-02-10 04:05:37.840 INFO [src.steps.relay] WARM UP successful!!
2025-02-10 04:05:37.840 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6856/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
2025-02-10 04:05:37.847 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:05:37.847 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9756/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
2025-02-10 04:05:37.860 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:05:37.860 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6856/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:05:37.866 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:05:37.867 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-10 04:05:37.968 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9756/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:05:37.970 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-10 04:05:37.972 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 04:05:37.973 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 04:05:37.973 DEBUG [src.node.waku_node] Stopping container with id ea3d139121f9
2025-02-10 04:05:38.997 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:05:38.998 DEBUG [src.node.waku_node] Stopping container with id 55018ceac6f9
2025-02-10 04:05:39.810 ERROR [src.node.docker_mananger] Max retries reached for container ea3d139121f9. Exiting log stream.
2025-02-10 04:05:40.495 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:05:40.496 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 04:05:40.506 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:05:40.512 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
