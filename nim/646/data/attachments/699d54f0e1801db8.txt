2025-02-10 04:05:23.313 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 04:05:23.313 DEBUG [tests.conftest] Running test: test_main_node_only_lightpush__peer_only_filter with id: 2025-02-10_04-05-23__551f36c3-ac4d-4739-b0df-89255059bace
2025-02-10 04:05:23.314 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 04:05:23.314 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-10 04:05:23.320 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:05:23.321 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-10_04-05-23__551f36c3-ac4d-4739-b0df-89255059bace__wakuorg_nwaku:latest.log
2025-02-10 04:05:23.321 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:05:23.321 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:05:23.322 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:05:23.322 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.206.175
2025-02-10 04:05:23.322 DEBUG [src.node.docker_mananger] Generated ports ['36839', '36840', '36841', '36842', '36843']
2025-02-10 04:05:23.323 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:05:23.323 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:05:23.323 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:05:23.323 DEBUG [src.node.docker_mananger] docker run -i -t -p 36839:36839 -p 36840:36840 -p 36841:36841 -p 36842:36842 -p 36843:36843 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36841 --rest-port=36839 --tcp-port=36840 --discv5-udp-port=36842 --rest-address=0.0.0.0 --nat=extip:172.18.206.175 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bdfc8e1de190e7c7093e68bffdec08a53d18bfac92a9e99fb62c94eb4cfea74e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36843 --metrics-logging=true --lightpush=false --relay=false --filter=true
2025-02-10 04:05:23.558 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.206.175 waku a47fd9d2eb159a80c30cafed0103cdb5318857562f1e0de87270ba680f83faaf
2025-02-10 04:05:23.605 DEBUG [src.node.docker_mananger] Container started with ID a47fd9d2eb15. Setting up logs at ./log/docker/receiving_node1_2025-02-10_04-05-23__551f36c3-ac4d-4739-b0df-89255059bace__wakuorg_nwaku:latest.log
2025-02-10 04:05:23.605 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36839
2025-02-10 04:05:23.605 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:05:24.113 ERROR [src.node.docker_mananger] Max retries reached for container ff74b41ae987. Exiting log stream.
2025-02-10 04:05:24.606 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36839/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:05:24.609 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:05:24.609 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:05:24.609 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36839/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:05:24.611 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.206.175/tcp/36840/p2p/16Uiu2HAkw3XGWH2H6hsCWPuwHcwtuwM7qWnThRavyD6vH9ENxfmZ","/ip4/172.18.206.175/tcp/36841/ws/p2p/16Uiu2HAkw3XGWH2H6hsCWPuwHcwtuwM7qWnThRavyD6vH9ENxfmZ"],"enrUri":"enr:-L24QFpe7fImzsXgrpSr7uyRcizmyIVWZHaB1NmF27sEJAVSLZV_OZHVsGbaHLY4euBJnCV8QOyUVP-dt6UBEVKKRN4CgmlkgnY0gmlwhKwSzq-KbXVsdGlhZGRyc5YACASsEs6vBo_oAAoErBLOrwaP6d0DgnJzhQADAQAAiXNlY3AyNTZrMaECGAq-2m0fu_ey5Eb9ZeyuwtYKH3ltIEylQ5Etn_k1mHiDdGNwgo_og3VkcIKP6oV3YWt1MgQ"}'
2025-02-10 04:05:24.611 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:05:24.618 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:05:24.618 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-10_04-05-23__551f36c3-ac4d-4739-b0df-89255059bace__wakuorg_nwaku:latest.log
2025-02-10 04:05:24.618 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:05:24.618 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:05:24.619 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:05:24.620 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.250.161
2025-02-10 04:05:24.620 DEBUG [src.node.docker_mananger] Generated ports ['58797', '58798', '58799', '58800', '58801']
2025-02-10 04:05:24.620 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:05:24.620 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:05:24.620 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:05:24.620 DEBUG [src.node.docker_mananger] docker run -i -t -p 58797:58797 -p 58798:58798 -p 58799:58799 -p 58800:58800 -p 58801:58801 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58799 --rest-port=58797 --tcp-port=58798 --discv5-udp-port=58800 --rest-address=0.0.0.0 --nat=extip:172.18.250.161 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5d3eac7a84e224af8abc1ffeaa865f9e0ad2ff549bd839640ca651d2c4be4506 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58801 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFpe7fImzsXgrpSr7uyRcizmyIVWZHaB1NmF27sEJAVSLZV_OZHVsGbaHLY4euBJnCV8QOyUVP-dt6UBEVKKRN4CgmlkgnY0gmlwhKwSzq-KbXVsdGlhZGRyc5YACASsEs6vBo_oAAoErBLOrwaP6d0DgnJzhQADAQAAiXNlY3AyNTZrMaECGAq-2m0fu_ey5Eb9ZeyuwtYKH3ltIEylQ5Etn_k1mHiDdGNwgo_og3VkcIKP6oV3YWt1MgQ --lightpushnode=/ip4/172.18.206.175/tcp/36840/p2p/16Uiu2HAkw3XGWH2H6hsCWPuwHcwtuwM7qWnThRavyD6vH9ENxfmZ --lightpush=true --relay=false
2025-02-10 04:05:24.866 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.250.161 waku 33ae549a339c4a41fc5ce9f86e600da7975e0771363f553b8a35ac07cbb3881a
2025-02-10 04:05:24.911 DEBUG [src.node.docker_mananger] Container started with ID 33ae549a339c. Setting up logs at ./log/docker/lightpush_node1_2025-02-10_04-05-23__551f36c3-ac4d-4739-b0df-89255059bace__wakuorg_nwaku:latest.log
2025-02-10 04:05:24.912 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58797
2025-02-10 04:05:24.912 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:05:25.912 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58797/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:05:25.915 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:05:25.916 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:05:25.916 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58797/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:05:25.918 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.250.161/tcp/58798/p2p/16Uiu2HAm4ZksNZAbPuR7UDscxm3DPJsZ5vTtwrByF9EFFw8SC5mP","/ip4/172.18.250.161/tcp/58799/ws/p2p/16Uiu2HAm4ZksNZAbPuR7UDscxm3DPJsZ5vTtwrByF9EFFw8SC5mP"],"enrUri":"enr:-L24QIBfRhFlKzfJmTspE4znv8OpqyGeEg9DoWRee2VPs27kKgLr9U05GzfCSpRz7352bsBGEHzUUd6_nUNKZerFZN4CgmlkgnY0gmlwhKwS-qGKbXVsdGlhZGRyc5YACASsEvqhBuWuAAoErBL6oQblr90DgnJzhQADAQAAiXNlY3AyNTZrMaECh8tbbipkcIf10P1OZh9ChP0EccC1sc0Ldyp4CfjyEMaDdGNwguWug3VkcILlsIV3YWt1Mgg"}'
2025-02-10 04:05:25.918 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:05:25.918 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58797/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.206.175/tcp/36840/p2p/16Uiu2HAkw3XGWH2H6hsCWPuwHcwtuwM7qWnThRavyD6vH9ENxfmZ"]'
2025-02-10 04:05:25.959 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:05:25.960 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58797/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739160325960317184}}'
2025-02-10 04:05:25.982 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:58797/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2025-02-10 04:05:25.984 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 04:05:25.985 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 04:05:25.985 DEBUG [src.node.waku_node] Stopping container with id a47fd9d2eb15
2025-02-10 04:05:27.086 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:05:27.087 DEBUG [src.node.waku_node] Stopping container with id 33ae549a339c
2025-02-10 04:05:27.898 ERROR [src.node.docker_mananger] Max retries reached for container a47fd9d2eb15. Exiting log stream.
2025-02-10 04:05:28.608 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:05:28.609 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 04:05:28.612 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:05:28.615 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
