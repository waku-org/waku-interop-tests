[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_relaying_node with id: 2025-02-10_04-02-24__79841144-20e5-45ca-96af-e464dd132050
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-02-10_04-02-24__79841144-20e5-45ca-96af-e464dd132050__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-02-10_04-02-24__79841144-20e5-45ca-96af-e464dd132050__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-02-10_04-02-24__79841144-20e5-45ca-96af-e464dd132050__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:33 Network waku created
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.220.155
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['18985', '18986', '18987', '18988', '18989']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 18985:18985 -p 18986:18986 -p 18987:18987 -p 18988:18988 -p 18989:18989 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18987 --rest-port=18985 --tcp-port=18986 --discv5-udp-port=18988 --rest-address=0.0.0.0 --nat=extip:172.18.220.155 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e3f4deaf9a8f0a7ab0fb6b859266ce4213e70afeb5b03defac5c7df7c3cc3db1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18989 --metrics-logging=true --filter=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.220.155 waku 59716514d4a460f8d2e8adf173e2ba3acb3a3866915b159814f87f65247e986b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 59716514d4a4. Setting up logs at ./log/docker/node1_2025-02-10_04-02-24__79841144-20e5-45ca-96af-e464dd132050__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 18985
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18985/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18985/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.220.155/tcp/18986/p2p/16Uiu2HAkyQ27jB8Jmo1e8rpehwksGwsnXP1cxGuLYYhQxr6Q9C6y","/ip4/172.18.220.155/tcp/18987/ws/p2p/16Uiu2HAkyQ27jB8Jmo1e8rpehwksGwsnXP1cxGuLYYhQxr6Q9C6y"],"enrUri":"enr:-L24QD9FVBgu9dG6g8aMNR5RAgRo6qzGpV8d1MtwsO34GVMLOxtbi33BjbIbd6Ft7Mwv9LoZMRLTtqetGS-y0HUvgUUCgmlkgnY0gmlwhKwS3JuKbXVsdGlhZGRyc5YACASsEtybBkoqAAoErBLcmwZKK90DgnJzhQADAQAAiXNlY3AyNTZrMaECOwJa1tQ-EBnvGqhEFEbRcqg7CNVz4xPsXu96SJuVGnaDdGNwgkoqg3VkcIJKLIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.210.247
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['22700', '22701', '22702', '22703', '22704']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 22700:22700 -p 22701:22701 -p 22702:22702 -p 22703:22703 -p 22704:22704 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22702 --rest-port=22700 --tcp-port=22701 --discv5-udp-port=22703 --rest-address=0.0.0.0 --nat=extip:172.18.210.247 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=885aa1de0b405d97f63d2825eebabb0a96dc75c8b0ccbfbeadcc2871be5a44cc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22704 --metrics-logging=true --filter=true --relay=true --discv5-bootstrap-node=enr:-L24QD9FVBgu9dG6g8aMNR5RAgRo6qzGpV8d1MtwsO34GVMLOxtbi33BjbIbd6Ft7Mwv9LoZMRLTtqetGS-y0HUvgUUCgmlkgnY0gmlwhKwS3JuKbXVsdGlhZGRyc5YACASsEtybBkoqAAoErBLcmwZKK90DgnJzhQADAQAAiXNlY3AyNTZrMaECOwJa1tQ-EBnvGqhEFEbRcqg7CNVz4xPsXu96SJuVGnaDdGNwgkoqg3VkcIJKLIV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.210.247 waku 89809e138894b88fc578e81786d125ef519b456681ad92218b8d971737d7e254
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 89809e138894. Setting up logs at ./log/docker/node2_2025-02-10_04-02-24__79841144-20e5-45ca-96af-e464dd132050__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 22700
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22700/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22700/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.210.247/tcp/22701/p2p/16Uiu2HAkwVdwA5P9T8GfejqqDbE9CKQVfqqh7i9o521Wg13kzio2","/ip4/172.18.210.247/tcp/22702/ws/p2p/16Uiu2HAkwVdwA5P9T8GfejqqDbE9CKQVfqqh7i9o521Wg13kzio2"],"enrUri":"enr:-L24QI3hxN47OOIcRP8Hd6JmTZs9euFVVp-J6kEYBd5D4edJEHuitCD55f7uL3DWSrOSbtxZUPgHfN4DO-rt1GjECTgCgmlkgnY0gmlwhKwS0veKbXVsdGlhZGRyc5YACASsEtL3BlitAAoErBLS9wZYrt0DgnJzhQADAQAAiXNlY3AyNTZrMaECHrtiYMFUMIpcuQ-U95bw5DCtb0GcKs7_GJiWJRda74mDdGNwglitg3VkcIJYr4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.53.234
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['50947', '50948', '50949', '50950', '50951']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 50947:50947 -p 50948:50948 -p 50949:50949 -p 50950:50950 -p 50951:50951 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50949 --rest-port=50947 --tcp-port=50948 --discv5-udp-port=50950 --rest-address=0.0.0.0 --nat=extip:172.18.53.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=be1e62fc87e2a5f5eeaf7b78d17edaba6794e0fdeee3c52a6bb2ef0efa7be9ff --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50951 --metrics-logging=true --relay=false --filternode=/ip4/172.18.210.247/tcp/22701/p2p/16Uiu2HAkwVdwA5P9T8GfejqqDbE9CKQVfqqh7i9o521Wg13kzio2 --discv5-bootstrap-node=enr:-L24QI3hxN47OOIcRP8Hd6JmTZs9euFVVp-J6kEYBd5D4edJEHuitCD55f7uL3DWSrOSbtxZUPgHfN4DO-rt1GjECTgCgmlkgnY0gmlwhKwS0veKbXVsdGlhZGRyc5YACASsEtL3BlitAAoErBLS9wZYrt0DgnJzhQADAQAAiXNlY3AyNTZrMaECHrtiYMFUMIpcuQ-U95bw5DCtb0GcKs7_GJiWJRda74mDdGNwglitg3VkcIJYr4V3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.53.234 waku 2d32187b076c2369c3414eb5928ebbc9af1f93d17daa63002c540990ea1ef00d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2d32187b076c. Setting up logs at ./log/docker/node3_2025-02-10_04-02-24__79841144-20e5-45ca-96af-e464dd132050__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 50947
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50947/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50947/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.53.234/tcp/50948/p2p/16Uiu2HAmLZKgGnCA6u6mWF7NzkKzDeKVhPEDvVPzwixTKwXmYRE6","/ip4/172.18.53.234/tcp/50949/ws/p2p/16Uiu2HAmLZKgGnCA6u6mWF7NzkKzDeKVhPEDvVPzwixTKwXmYRE6"],"enrUri":"enr:-L24QCHptGeqsIQ06bMrmHp0uUHWEWlg_YmUL2BgTibjILpqA50_uZTxe95c15d_tesz4TbIsvpOher78ZvjFuJPYl0CgmlkgnY0gmlwhKwSNeqKbXVsdGlhZGRyc5YACASsEjXqBscEAAoErBI16gbHBd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDdWndLtvRPq__qVdMaeeHZK-hTay3r6GO7nhgZURBsy-DdGNwgscEg3VkcILHBoV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18985/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22700/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50947/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18985/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.210.247/tcp/22701/p2p/16Uiu2HAkwVdwA5P9T8GfejqqDbE9CKQVfqqh7i9o521Wg13kzio2","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22700/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.220.155/tcp/18986/p2p/16Uiu2HAkyQ27jB8Jmo1e8rpehwksGwsnXP1cxGuLYYhQxr6Q9C6y","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.53.234/tcp/50948/p2p/16Uiu2HAmLZKgGnCA6u6mWF7NzkKzDeKVhPEDvVPzwixTKwXmYRE6","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50947/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.210.247/tcp/22701/p2p/16Uiu2HAkwVdwA5P9T8GfejqqDbE9CKQVfqqh7i9o521Wg13kzio2","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18985/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50947/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1739160181541482752,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 59716514d4a4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 89809e138894
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 59716514d4a4. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2d32187b076c
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 89809e138894. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.