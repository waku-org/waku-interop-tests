2025-02-10 04:07:15.668 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 04:07:15.668 DEBUG [tests.conftest] Running test: test_main_node_only_lightpush__peer_only_relay with id: 2025-02-10_04-07-15__cc652306-725b-4352-857b-98dead648a34
2025-02-10 04:07:15.668 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 04:07:15.669 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-10 04:07:15.675 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:07:15.675 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-10_04-07-15__cc652306-725b-4352-857b-98dead648a34__wakuorg_nwaku:latest.log
2025-02-10 04:07:15.676 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:07:15.676 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:07:15.677 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:07:15.677 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.197.108
2025-02-10 04:07:15.677 DEBUG [src.node.docker_mananger] Generated ports ['59195', '59196', '59197', '59198', '59199']
2025-02-10 04:07:15.677 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:07:15.678 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:07:15.678 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:07:15.678 DEBUG [src.node.docker_mananger] docker run -i -t -p 59195:59195 -p 59196:59196 -p 59197:59197 -p 59198:59198 -p 59199:59199 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59197 --rest-port=59195 --tcp-port=59196 --discv5-udp-port=59198 --rest-address=0.0.0.0 --nat=extip:172.18.197.108 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e3b53bb2a34fa0f2fedbbecfaff7eceebd09ff67ae92d0cad7a51b33cd3c9e97 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59199 --metrics-logging=true --lightpush=false --relay=true
2025-02-10 04:07:15.900 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.197.108 waku aa50cf90ff29058162450578b700d1decdfee739e2d15ad697b1cc4561db35d3
2025-02-10 04:07:15.951 DEBUG [src.node.docker_mananger] Container started with ID aa50cf90ff29. Setting up logs at ./log/docker/receiving_node1_2025-02-10_04-07-15__cc652306-725b-4352-857b-98dead648a34__wakuorg_nwaku:latest.log
2025-02-10 04:07:15.951 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 59195
2025-02-10 04:07:15.951 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:07:16.472 ERROR [src.node.docker_mananger] Max retries reached for container 86dc52bc2a4e. Exiting log stream.
2025-02-10 04:07:16.952 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59195/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:16.955 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:07:16.955 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:07:16.955 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59195/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:16.957 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.197.108/tcp/59196/p2p/16Uiu2HAmNWbT6c6AHZ3fE5ZMWvYhpRQKF1s2pG67edErowUcbQZB","/ip4/172.18.197.108/tcp/59197/ws/p2p/16Uiu2HAmNWbT6c6AHZ3fE5ZMWvYhpRQKF1s2pG67edErowUcbQZB"],"enrUri":"enr:-L24QOfViJG4p8zYgPIQW8sOyE4lUzaLrTdWeYd5-lzDDqN7RMfJdM0ysjzcR475GRG6LAFN6YIhfqoLUtPPF5hko60CgmlkgnY0gmlwhKwSxWyKbXVsdGlhZGRyc5YACASsEsVsBuc8AAoErBLFbAbnPd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDkm5Ub3vV8-Td1RAzCq8qCzci-rnqynVVtkpD2BLVD2aDdGNwguc8g3VkcILnPoV3YWt1MgE"}'
2025-02-10 04:07:16.957 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:07:16.958 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59195/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:07:16.975 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:16.982 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:07:16.982 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-10_04-07-15__cc652306-725b-4352-857b-98dead648a34__wakuorg_nwaku:latest.log
2025-02-10 04:07:16.982 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:07:16.982 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:07:16.984 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:07:16.984 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.101.151
2025-02-10 04:07:16.984 DEBUG [src.node.docker_mananger] Generated ports ['8151', '8152', '8153', '8154', '8155']
2025-02-10 04:07:16.984 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:07:16.984 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:07:16.984 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:07:16.985 DEBUG [src.node.docker_mananger] docker run -i -t -p 8151:8151 -p 8152:8152 -p 8153:8153 -p 8154:8154 -p 8155:8155 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8153 --rest-port=8151 --tcp-port=8152 --discv5-udp-port=8154 --rest-address=0.0.0.0 --nat=extip:172.18.101.151 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bdbcd2322bb01163aef2e4b29fdf31e07b67fccb7ce0cf2ebff00cd9ff563a6c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8155 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QOfViJG4p8zYgPIQW8sOyE4lUzaLrTdWeYd5-lzDDqN7RMfJdM0ysjzcR475GRG6LAFN6YIhfqoLUtPPF5hko60CgmlkgnY0gmlwhKwSxWyKbXVsdGlhZGRyc5YACASsEsVsBuc8AAoErBLFbAbnPd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDkm5Ub3vV8-Td1RAzCq8qCzci-rnqynVVtkpD2BLVD2aDdGNwguc8g3VkcILnPoV3YWt1MgE --lightpushnode=/ip4/172.18.197.108/tcp/59196/p2p/16Uiu2HAmNWbT6c6AHZ3fE5ZMWvYhpRQKF1s2pG67edErowUcbQZB --lightpush=true --relay=false
2025-02-10 04:07:17.210 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.101.151 waku 77236ff9a41314a81db8fc5d20e2aeaa7142701d2ea0b134ac34b0c023689ce8
2025-02-10 04:07:17.257 DEBUG [src.node.docker_mananger] Container started with ID 77236ff9a413. Setting up logs at ./log/docker/lightpush_node1_2025-02-10_04-07-15__cc652306-725b-4352-857b-98dead648a34__wakuorg_nwaku:latest.log
2025-02-10 04:07:17.258 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 8151
2025-02-10 04:07:17.258 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:07:18.259 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8151/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:18.262 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:07:18.262 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:07:18.262 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8151/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:18.264 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.101.151/tcp/8152/p2p/16Uiu2HAmUVXcqSb51W8SbRia7NZnn9RSMQ5sSkRKo5QvagF5BABY","/ip4/172.18.101.151/tcp/8153/ws/p2p/16Uiu2HAmUVXcqSb51W8SbRia7NZnn9RSMQ5sSkRKo5QvagF5BABY"],"enrUri":"enr:-L24QOuup7ikE4JuZ7GYRq-UrFybo0kIrj5HEr8viWZ-9fp1Dr0B0wbIIrKm5SQjpwPDaocC-ykmnfsewfrgIaFrBSwCgmlkgnY0gmlwhKwSZZeKbXVsdGlhZGRyc5YACASsEmWXBh_YAAoErBJllwYf2d0DgnJzhQADAQAAiXNlY3AyNTZrMaED606JoP25_Y0Xk8_Wzl2PjR_hzYRHUqMF6JyGO9p1GneDdGNwgh_Yg3VkcIIf2oV3YWt1Mgg"}'
2025-02-10 04:07:18.265 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:07:18.265 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8151/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.197.108/tcp/59196/p2p/16Uiu2HAmNWbT6c6AHZ3fE5ZMWvYhpRQKF1s2pG67edErowUcbQZB"]'
2025-02-10 04:07:18.297 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:18.299 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8151/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739160438299043072}}'
2025-02-10 04:07:18.314 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:8151/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2025-02-10 04:07:18.319 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 04:07:18.320 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 04:07:18.321 DEBUG [src.node.waku_node] Stopping container with id aa50cf90ff29
2025-02-10 04:07:19.437 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:07:19.438 DEBUG [src.node.waku_node] Stopping container with id 77236ff9a413
2025-02-10 04:07:20.250 ERROR [src.node.docker_mananger] Max retries reached for container aa50cf90ff29. Exiting log stream.
2025-02-10 04:07:20.926 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:07:20.927 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 04:07:20.934 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:07:20.938 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
