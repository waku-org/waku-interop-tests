2025-02-10 04:07:22.485 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 04:07:22.485 DEBUG [tests.conftest] Running test: test_time_filter_start_time_equals_end_time with id: 2025-02-10_04-07-22__422ac537-7cc1-46e2-86da-242875e7d28c
2025-02-10 04:07:22.486 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 04:07:22.486 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-10 04:07:22.486 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-10 04:07:22.493 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:07:22.493 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-10_04-07-22__422ac537-7cc1-46e2-86da-242875e7d28c__wakuorg_nwaku:latest.log
2025-02-10 04:07:22.493 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:07:22.493 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:07:22.495 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:07:22.495 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.19.200
2025-02-10 04:07:22.495 DEBUG [src.node.docker_mananger] Generated ports ['27169', '27170', '27171', '27172', '27173']
2025-02-10 04:07:22.495 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:07:22.495 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:07:22.495 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:07:22.496 DEBUG [src.node.docker_mananger] docker run -i -t -p 27169:27169 -p 27170:27170 -p 27171:27171 -p 27172:27172 -p 27173:27173 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27171 --rest-port=27169 --tcp-port=27170 --discv5-udp-port=27172 --rest-address=0.0.0.0 --nat=extip:172.18.19.200 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f829dd685bfacb49d17d60770ac93fad3df1b13bf401eca1fe33d7cb6ac905b1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27173 --metrics-logging=true --store=true --relay=true
2025-02-10 04:07:22.738 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.19.200 waku beb57380a96714c043a94c00c3f5b25e8a3d9cd54428eb039b8ba727d1ce7821
2025-02-10 04:07:22.790 DEBUG [src.node.docker_mananger] Container started with ID beb57380a967. Setting up logs at ./log/docker/publishing_node1_2025-02-10_04-07-22__422ac537-7cc1-46e2-86da-242875e7d28c__wakuorg_nwaku:latest.log
2025-02-10 04:07:22.791 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27169
2025-02-10 04:07:22.791 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:07:23.286 ERROR [src.node.docker_mananger] Max retries reached for container 51589fcb55eb. Exiting log stream.
2025-02-10 04:07:23.792 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27169/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:23.794 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:07:23.794 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:07:23.795 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27169/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:23.797 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.19.200/tcp/27170/p2p/16Uiu2HAmUPah7ANYcTtzZe43LDrRTuXnicWdzhgxgwNVTs6QdfQL","/ip4/172.18.19.200/tcp/27171/ws/p2p/16Uiu2HAmUPah7ANYcTtzZe43LDrRTuXnicWdzhgxgwNVTs6QdfQL"],"enrUri":"enr:-L24QJUxw-U5HhKKbNTOfICyaj5LNmUtQ6_ZETixYybKbC0BcmBVc6bLSJCk4JnkozwTmkNd2CeF7w_uMrtr4tNOGXMCgmlkgnY0gmlwhKwSE8iKbXVsdGlhZGRyc5YACASsEhPIBmoiAAoErBITyAZqI90DgnJzhQADAQAAiXNlY3AyNTZrMaED6ciHM7Myvkr_PgsR8gpjl8MliDxQohTDQpS8s5kbJlGDdGNwgmoig3VkcIJqJIV3YWt1MgM"}'
2025-02-10 04:07:23.797 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:07:23.804 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:07:23.804 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-10_04-07-22__422ac537-7cc1-46e2-86da-242875e7d28c__wakuorg_nwaku:latest.log
2025-02-10 04:07:23.804 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:07:23.804 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:07:23.805 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:07:23.806 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.76.7
2025-02-10 04:07:23.806 DEBUG [src.node.docker_mananger] Generated ports ['49082', '49083', '49084', '49085', '49086']
2025-02-10 04:07:23.806 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:07:23.806 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:07:23.806 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:07:23.806 DEBUG [src.node.docker_mananger] docker run -i -t -p 49082:49082 -p 49083:49083 -p 49084:49084 -p 49085:49085 -p 49086:49086 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49084 --rest-port=49082 --tcp-port=49083 --discv5-udp-port=49085 --rest-address=0.0.0.0 --nat=extip:172.18.76.7 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d9f8879aeda35b3d1fe556efdcebdc669b2fdeab49acf4ccdfa6f075a1cd8bde --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49086 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJUxw-U5HhKKbNTOfICyaj5LNmUtQ6_ZETixYybKbC0BcmBVc6bLSJCk4JnkozwTmkNd2CeF7w_uMrtr4tNOGXMCgmlkgnY0gmlwhKwSE8iKbXVsdGlhZGRyc5YACASsEhPIBmoiAAoErBITyAZqI90DgnJzhQADAQAAiXNlY3AyNTZrMaED6ciHM7Myvkr_PgsR8gpjl8MliDxQohTDQpS8s5kbJlGDdGNwgmoig3VkcIJqJIV3YWt1MgM --storenode=/ip4/172.18.19.200/tcp/27170/p2p/16Uiu2HAmUPah7ANYcTtzZe43LDrRTuXnicWdzhgxgwNVTs6QdfQL --store=true --relay=true
2025-02-10 04:07:24.031 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.76.7 waku af818f47ad5787599783ddafdfaf505f9259910fdde1253d60ff43848f95fe87
2025-02-10 04:07:24.076 DEBUG [src.node.docker_mananger] Container started with ID af818f47ad57. Setting up logs at ./log/docker/store_node1_2025-02-10_04-07-22__422ac537-7cc1-46e2-86da-242875e7d28c__wakuorg_nwaku:latest.log
2025-02-10 04:07:24.076 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49082
2025-02-10 04:07:24.077 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:07:25.078 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49082/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:25.081 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:07:25.081 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:07:25.081 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49082/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:25.084 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.76.7/tcp/49083/p2p/16Uiu2HAkvzgZMGLXPWhiYYd4HUGanpSzWSZbPrCBomrwsrxMfJBz","/ip4/172.18.76.7/tcp/49084/ws/p2p/16Uiu2HAkvzgZMGLXPWhiYYd4HUGanpSzWSZbPrCBomrwsrxMfJBz"],"enrUri":"enr:-L24QB2RqCrajKh5zPPsh1JU_isnaonV7IGUcBFLQKZvgdA-Lz_WWVQXXDIOhZU_0rChluYcUG-Oq9_19Yakvz3GO34CgmlkgnY0gmlwhKwSTAeKbXVsdGlhZGRyc5YACASsEkwHBr-7AAoErBJMBwa_vN0DgnJzhQADAQAAiXNlY3AyNTZrMaECF1CB_9FlsFavjpTulLf4NgLVfHOWogDHVhCs4F0FHbGDdGNwgr-7g3VkcIK_vYV3YWt1MgM"}'
2025-02-10 04:07:25.084 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:07:25.085 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49082/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.19.200/tcp/27170/p2p/16Uiu2HAmUPah7ANYcTtzZe43LDrRTuXnicWdzhgxgwNVTs6QdfQL"]'
2025-02-10 04:07:25.087 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:25.088 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27169/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:07:25.090 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:25.090 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49082/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:07:25.092 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:25.093 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:25.094 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27169/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:25.099 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:25.100 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:25.301 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:25.301 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27169/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:25.306 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:25.306 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:25.507 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:25.507 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27169/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:25.513 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:25.514 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:25.715 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:25.715 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27169/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:25.720 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:25.721 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:25.922 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:25.922 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27169/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:25.927 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:25.928 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:26.128 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:26.129 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27169/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:26.134 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:26.134 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:26.335 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27169/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739160442093666048&endTime=1739160442093666048&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:26.338 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x40678819b372cd751b4bc0bd30f3ddaf6bbd69af5e54c0cbfabec4dc0c384dce"}]}'
2025-02-10 04:07:26.379 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 04:07:26.380 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 04:07:26.380 DEBUG [src.node.waku_node] Stopping container with id beb57380a967
2025-02-10 04:07:27.373 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:07:27.373 DEBUG [src.node.waku_node] Stopping container with id af818f47ad57
2025-02-10 04:07:28.186 ERROR [src.node.docker_mananger] Max retries reached for container beb57380a967. Exiting log stream.
2025-02-10 04:07:28.882 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:07:28.884 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 04:07:28.890 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:07:28.896 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:07:28.896 DEBUG [tests.conftest] Running fixture teardown: attach_logs_on_fail
2025-02-10 04:07:28.896 DEBUG [tests.conftest] Test failed, attempting to attach logs to the allure reports
2025-02-10 04:07:28.897 DEBUG [src.libs.common] Attaching file ./log/docker/store_node1_2025-02-10_04-07-22__422ac537-7cc1-46e2-86da-242875e7d28c__wakuorg_nwaku:latest.log
2025-02-10 04:07:28.897 DEBUG [src.libs.common] Attaching file ./log/docker/publishing_node1_2025-02-10_04-07-22__422ac537-7cc1-46e2-86da-242875e7d28c__wakuorg_nwaku:latest.log
2025-02-10 04:07:28.901 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 04:07:28.901 DEBUG [tests.conftest] Running test: test_time_filter_start_time_equals_end_time with id: 2025-02-10_04-07-28__b6d0d039-50c8-4dcb-ac9a-956f0c705104
2025-02-10 04:07:28.901 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 04:07:28.902 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-10 04:07:28.902 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-10 04:07:28.908 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:07:28.908 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-10_04-07-28__b6d0d039-50c8-4dcb-ac9a-956f0c705104__wakuorg_nwaku:latest.log
2025-02-10 04:07:28.908 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:07:28.908 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:07:28.910 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:07:28.910 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.242.129
2025-02-10 04:07:28.910 DEBUG [src.node.docker_mananger] Generated ports ['11533', '11534', '11535', '11536', '11537']
2025-02-10 04:07:28.910 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:07:28.910 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:07:28.911 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:07:28.911 DEBUG [src.node.docker_mananger] docker run -i -t -p 11533:11533 -p 11534:11534 -p 11535:11535 -p 11536:11536 -p 11537:11537 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11535 --rest-port=11533 --tcp-port=11534 --discv5-udp-port=11536 --rest-address=0.0.0.0 --nat=extip:172.18.242.129 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ac7a1ebb8e362eea172b64fc58bcfad9cec23947bdee18e32faead1bd620be6c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11537 --metrics-logging=true --store=true --relay=true
2025-02-10 04:07:29.141 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.242.129 waku 4b2b9f97e04b6cd5344baaa7859f2d3d9406389d67e3f67d8a838861177cc2f4
2025-02-10 04:07:29.184 DEBUG [src.node.docker_mananger] Container started with ID 4b2b9f97e04b. Setting up logs at ./log/docker/publishing_node1_2025-02-10_04-07-28__b6d0d039-50c8-4dcb-ac9a-956f0c705104__wakuorg_nwaku:latest.log
2025-02-10 04:07:29.186 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11533
2025-02-10 04:07:29.186 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:07:29.693 ERROR [src.node.docker_mananger] Max retries reached for container af818f47ad57. Exiting log stream.
2025-02-10 04:07:30.186 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11533/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:30.189 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:07:30.189 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:07:30.189 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11533/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:30.191 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.242.129/tcp/11534/p2p/16Uiu2HAmDW1P8v8PJSy97oxFkjMnTLrhmncudZhRtLKPzuAsugnn","/ip4/172.18.242.129/tcp/11535/ws/p2p/16Uiu2HAmDW1P8v8PJSy97oxFkjMnTLrhmncudZhRtLKPzuAsugnn"],"enrUri":"enr:-L24QJyqunbC-Wb9Am3r4Mw55H1W8t7IFEP23IHaHC_SEJpzIkVcMjqjtojQ49Fdqgtj0C1G4nZ7Ta0qfm4VjQsgzXgCgmlkgnY0gmlwhKwS8oGKbXVsdGlhZGRyc5YACASsEvKBBi0OAAoErBLygQYtD90DgnJzhQADAQAAiXNlY3AyNTZrMaEDDI6gWV0034Nr0nax_s1uFfSiSQZvlPdrSY8D-VH8VDuDdGNwgi0Og3VkcIItEIV3YWt1MgM"}'
2025-02-10 04:07:30.191 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:07:30.198 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 04:07:30.198 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-10_04-07-28__b6d0d039-50c8-4dcb-ac9a-956f0c705104__wakuorg_nwaku:latest.log
2025-02-10 04:07:30.198 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 04:07:30.198 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 04:07:30.200 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 04:07:30.200 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.28.233
2025-02-10 04:07:30.200 DEBUG [src.node.docker_mananger] Generated ports ['35839', '35840', '35841', '35842', '35843']
2025-02-10 04:07:30.200 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 04:07:30.200 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 04:07:30.200 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 04:07:30.200 DEBUG [src.node.docker_mananger] docker run -i -t -p 35839:35839 -p 35840:35840 -p 35841:35841 -p 35842:35842 -p 35843:35843 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35841 --rest-port=35839 --tcp-port=35840 --discv5-udp-port=35842 --rest-address=0.0.0.0 --nat=extip:172.18.28.233 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=78d5d8b6b8bbbac3ca6c7b4f819dee13dfccafc086d9c8eedce16bfd7bc19ba4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35843 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJyqunbC-Wb9Am3r4Mw55H1W8t7IFEP23IHaHC_SEJpzIkVcMjqjtojQ49Fdqgtj0C1G4nZ7Ta0qfm4VjQsgzXgCgmlkgnY0gmlwhKwS8oGKbXVsdGlhZGRyc5YACASsEvKBBi0OAAoErBLygQYtD90DgnJzhQADAQAAiXNlY3AyNTZrMaEDDI6gWV0034Nr0nax_s1uFfSiSQZvlPdrSY8D-VH8VDuDdGNwgi0Og3VkcIItEIV3YWt1MgM --storenode=/ip4/172.18.242.129/tcp/11534/p2p/16Uiu2HAmDW1P8v8PJSy97oxFkjMnTLrhmncudZhRtLKPzuAsugnn --store=true --relay=true
2025-02-10 04:07:30.433 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.28.233 waku be9e983e7cc35349a8832825a43d4db4465c3adb5975fb3e0814e2589e9211dc
2025-02-10 04:07:30.483 DEBUG [src.node.docker_mananger] Container started with ID be9e983e7cc3. Setting up logs at ./log/docker/store_node1_2025-02-10_04-07-28__b6d0d039-50c8-4dcb-ac9a-956f0c705104__wakuorg_nwaku:latest.log
2025-02-10 04:07:30.484 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 35839
2025-02-10 04:07:30.484 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 04:07:31.485 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35839/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:31.487 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 04:07:31.488 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 04:07:31.488 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35839/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:31.490 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.28.233/tcp/35840/p2p/16Uiu2HAmMxpzABNVKSeZwkTJXfMaB823qtPfHWH9VZWGyEiMamiA","/ip4/172.18.28.233/tcp/35841/ws/p2p/16Uiu2HAmMxpzABNVKSeZwkTJXfMaB823qtPfHWH9VZWGyEiMamiA"],"enrUri":"enr:-L24QNAMJrQ5vKUECyCFPrCravwljsjj5LC9AiuUFXbQHkdwPpNIKb0d_1pAsdvx79MvElkRyyeZS_uRoV7jxvbE9X4CgmlkgnY0gmlwhKwSHOmKbXVsdGlhZGRyc5YACASsEhzpBowAAAoErBIc6QaMAd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDiksMcrZy-p1dVSjEElaCnANOEVeWLXwREXG2CosuxMuDdGNwgowAg3VkcIKMAoV3YWt1MgM"}'
2025-02-10 04:07:31.490 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 04:07:31.490 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35839/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.242.129/tcp/11534/p2p/16Uiu2HAmDW1P8v8PJSy97oxFkjMnTLrhmncudZhRtLKPzuAsugnn"]'
2025-02-10 04:07:31.493 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:31.494 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11533/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:07:31.496 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:31.496 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35839/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 04:07:31.498 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:31.499 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:31.500 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11533/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:31.505 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:31.505 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:31.706 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:31.707 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11533/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:31.712 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:31.712 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:31.913 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:31.913 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11533/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:31.918 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:31.919 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:32.120 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:32.120 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11533/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:32.127 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:32.127 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:32.328 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:32.328 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11533/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:32.334 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:32.335 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:32.536 DEBUG [src.steps.store] Relaying message
2025-02-10 04:07:32.536 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11533/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 04:07:32.542 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 04:07:32.543 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 04:07:32.743 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11533/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739160448499706112&endTime=1739160448499706112&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-10 04:07:32.746 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x1bf89e34ec291514098aac94d99c5534bc03880cb13cc628f8d951c205ba9fd2"}]}'
2025-02-10 04:07:32.757 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 04:07:32.758 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 04:07:32.758 DEBUG [src.node.waku_node] Stopping container with id 4b2b9f97e04b
2025-02-10 04:07:33.722 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:07:33.722 DEBUG [src.node.waku_node] Stopping container with id be9e983e7cc3
2025-02-10 04:07:34.534 ERROR [src.node.docker_mananger] Max retries reached for container 4b2b9f97e04b. Exiting log stream.
2025-02-10 04:07:35.216 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 04:07:35.217 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 04:07:35.223 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:07:35.230 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 04:07:35.230 DEBUG [tests.conftest] Running fixture teardown: attach_logs_on_fail
2025-02-10 04:07:35.231 DEBUG [tests.conftest] Test failed, attempting to attach logs to the allure reports
2025-02-10 04:07:35.231 DEBUG [src.libs.common] Attaching file ./log/docker/store_node1_2025-02-10_04-07-28__b6d0d039-50c8-4dcb-ac9a-956f0c705104__wakuorg_nwaku:latest.log
2025-02-10 04:07:35.232 DEBUG [src.libs.common] Attaching file ./log/docker/publishing_node1_2025-02-10_04-07-28__b6d0d039-50c8-4dcb-ac9a-956f0c705104__wakuorg_nwaku:latest.log
