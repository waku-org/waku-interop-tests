[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2024-08-08_04-17-43__99c9f05b-66b8-4285-ba09-513448bcf7ff
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-08_04-17-43__99c9f05b-66b8-4285-ba09-513448bcf7ff__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.145.125
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['31588', '31589', '31590', '31591', '31592']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 31588:31588 -p 31589:31589 -p 31590:31590 -p 31591:31591 -p 31592:31592 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31590 --rest-port=31588 --tcp-port=31589 --discv5-udp-port=31591 --rest-address=0.0.0.0 --nat=extip:172.18.145.125 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31592 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.145.125 waku 9f4daa8fd75f27ab77d8808ed21dcb8a46f53f5a8bbdd27da47bdb786923ca32
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 9f4daa8fd75f. Setting up logs at ./log/docker/receiving_node1_2024-08-08_04-17-43__99c9f05b-66b8-4285-ba09-513448bcf7ff__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 31588
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31588/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31588/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.145.125/tcp/31589/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.145.125/tcp/31590/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QNMJFozh7cIwViP4BaboHCqJBFBT_-9uja-kxjbi0IOjY_5sXikeoJVjx3EPszkDjNjYLegYPJpYc1LNpN18dxcBgmlkgnY0gmlwhKwSkX2KbXVsdGlhZGRyc4wACgSsEpF9Bntm3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCe2WDdWRwgntnhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-08_04-17-43__99c9f05b-66b8-4285-ba09-513448bcf7ff__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.83.63
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['47084', '47085', '47086', '47087', '47088']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 47084:47084 -p 47085:47085 -p 47086:47086 -p 47087:47087 -p 47088:47088 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47086 --rest-port=47084 --tcp-port=47085 --discv5-udp-port=47087 --rest-address=0.0.0.0 --nat=extip:172.18.83.63 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47088 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.83.63 waku 35f7784d7d8a157658d9f0706b3fd6a955e1c5ff0f47620b90c7b0537320fb3f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 35f7784d7d8a. Setting up logs at ./log/docker/receiving_node2_2024-08-08_04-17-43__99c9f05b-66b8-4285-ba09-513448bcf7ff__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 47084
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47084/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47084/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.83.63/tcp/47085/p2p/16Uiu2HAmRyRsaN96h2LxHrA4W5Lz35n7BdSjAMiY8rUMkopeczK1","/ip4/172.18.83.63/tcp/47086/ws/p2p/16Uiu2HAmRyRsaN96h2LxHrA4W5Lz35n7BdSjAMiY8rUMkopeczK1"],"enrUri":"enr:-LO4QLqRPeWxrqwGszfSeZeomnLdU7tg7MQPfcLtl0grAZjWVwcNxBFKhPN9liHo1kcQSfQLlmhe9ezLz0el9Jxo9hMBgmlkgnY0gmlwhKwSUz-KbXVsdGlhZGRyc4wACgSsElM_Brfu3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPF4T4ceW2mKd5I40TYNp3QguQwESEvhRISNj_yzrWBQIN0Y3CCt-2DdWRwgrfvhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47084/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.145.125/tcp/31589/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-08_04-17-43__99c9f05b-66b8-4285-ba09-513448bcf7ff__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.56.122
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['10493', '10494', '10495', '10496', '10497']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 10493:10493 -p 10494:10494 -p 10495:10495 -p 10496:10496 -p 10497:10497 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10495 --rest-port=10493 --tcp-port=10494 --discv5-udp-port=10496 --rest-address=0.0.0.0 --nat=extip:172.18.56.122 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10497 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QNMJFozh7cIwViP4BaboHCqJBFBT_-9uja-kxjbi0IOjY_5sXikeoJVjx3EPszkDjNjYLegYPJpYc1LNpN18dxcBgmlkgnY0gmlwhKwSkX2KbXVsdGlhZGRyc4wACgSsEpF9Bntm3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCe2WDdWRwgntnhXdha3UyCQ --lightpushnode=/ip4/172.18.145.125/tcp/31589/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.56.122 waku eddf9867e05460f9585eaf9b332710a311fcb732da79046bef0cde0f5587cacc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID eddf9867e054. Setting up logs at ./log/docker/lightpush_node1_2024-08-08_04-17-43__99c9f05b-66b8-4285-ba09-513448bcf7ff__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 10493
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10493/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10493/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.56.122/tcp/10494/p2p/16Uiu2HAm9QY4bv1QGtST18dC5ASXjJVWZbofrFRQyt39zfivZqGz","/ip4/172.18.56.122/tcp/10495/ws/p2p/16Uiu2HAm9QY4bv1QGtST18dC5ASXjJVWZbofrFRQyt39zfivZqGz"],"enrUri":"enr:-LO4QFUZGWMmj5IjvG4TIV1wnyL2ZLf2hcuSWzM4Y5qc8gX8WDE9MbbWstNUw49dV6dymjTcMg_DrsJx72qCXLA15QABgmlkgnY0gmlwhKwSOHqKbXVsdGlhZGRyc4wACgSsEjh6Bij_3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLPuRWT1opAQNf8Lb7ADZVS8mR1V0P2KTGb3SPKvZqmT4N0Y3CCKP6DdWRwgikAhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10493/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.145.125/tcp/31589/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10493/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.83.63/tcp/47085/p2p/16Uiu2HAmRyRsaN96h2LxHrA4W5Lz35n7BdSjAMiY8rUMkopeczK1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31588/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47084/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10493/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1723090668651611136}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:10493/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0xb9bc7503eae71bdda5c367128cccdb40a752f4a909d90d521b5d9ef71f76be5f'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 9f4daa8fd75f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 35f7784d7d8a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id eddf9867e054
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.