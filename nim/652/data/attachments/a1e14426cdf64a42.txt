2025-02-15 04:07:26.904 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:07:26.904 DEBUG [tests.conftest] Running test: test_publish_on_multiple_content_topics_and_only_after_fetch_them[content_topic_list1] with id: 2025-02-15_04-07-26__90e06d24-2cc5-408f-89d7-bd1d6d41039e
2025-02-15 04:07:26.904 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:07:26.904 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-15 04:07:26.905 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-15 04:07:26.911 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:07:26.912 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_04-07-26__90e06d24-2cc5-408f-89d7-bd1d6d41039e__wakuorg_nwaku:latest.log
2025-02-15 04:07:26.912 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:07:26.912 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:07:26.913 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:07:26.913 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.236.164
2025-02-15 04:07:26.913 DEBUG [src.node.docker_mananger] Generated ports ['30249', '30250', '30251', '30252', '30253']
2025-02-15 04:07:26.914 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:07:26.914 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:07:26.914 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:07:26.914 DEBUG [src.node.docker_mananger] docker run -i -t -p 30249:30249 -p 30250:30250 -p 30251:30251 -p 30252:30252 -p 30253:30253 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30251 --rest-port=30249 --tcp-port=30250 --discv5-udp-port=30252 --rest-address=0.0.0.0 --nat=extip:172.18.236.164 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ce9a5eefa4f47ddb6eaf1bfda5e9f40bacbd13e3a5cce33f91e7dee8dd4fabc5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30253 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2025-02-15 04:07:27.147 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.236.164 waku f8a230368ec4155e50e514bebd3bcc691252d6fec522c0363370fdf8d2580f07
2025-02-15 04:07:27.196 DEBUG [src.node.docker_mananger] Container started with ID f8a230368ec4. Setting up logs at ./log/docker/node1_2025-02-15_04-07-26__90e06d24-2cc5-408f-89d7-bd1d6d41039e__wakuorg_nwaku:latest.log
2025-02-15 04:07:27.197 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 30249
2025-02-15 04:07:27.198 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:07:27.695 ERROR [src.node.docker_mananger] Max retries reached for container 9f638b394688. Exiting log stream.
2025-02-15 04:07:28.198 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30249/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:28.201 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:07:28.201 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:07:28.201 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30249/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:28.203 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.236.164/tcp/30250/p2p/16Uiu2HAm5TjPENKMbaiZUAw7g8EWd2XbfUXnHDh9eznYESVaaZcW","/ip4/172.18.236.164/tcp/30251/ws/p2p/16Uiu2HAm5TjPENKMbaiZUAw7g8EWd2XbfUXnHDh9eznYESVaaZcW"],"enrUri":"enr:-L24QPB27Irb5VPa47b-Z8jUt1fJh1dEhMpAXycisxr30XcPDvpMqvlaHFyAY7o7YF2V7D6yNzvMRTojPK-mFz-w2E4CgmlkgnY0gmlwhKwS7KSKbXVsdGlhZGRyc5YACASsEuykBnYqAAoErBLspAZ2K90DgnJzhQACAQAAiXNlY3AyNTZrMaEClRvhQbyASuX_Ue_zYHXfQZir_dWxizdsEOFNJthDOgODdGNwgnYqg3VkcIJ2LIV3YWt1MgU"}'
2025-02-15 04:07:28.204 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:07:28.210 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:07:28.210 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-15_04-07-26__90e06d24-2cc5-408f-89d7-bd1d6d41039e__wakuorg_nwaku:latest.log
2025-02-15 04:07:28.210 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:07:28.210 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:07:28.211 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:07:28.211 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.98.104
2025-02-15 04:07:28.212 DEBUG [src.node.docker_mananger] Generated ports ['29815', '29816', '29817', '29818', '29819']
2025-02-15 04:07:28.212 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:07:28.212 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:07:28.212 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:07:28.212 DEBUG [src.node.docker_mananger] docker run -i -t -p 29815:29815 -p 29816:29816 -p 29817:29817 -p 29818:29818 -p 29819:29819 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29817 --rest-port=29815 --tcp-port=29816 --discv5-udp-port=29818 --rest-address=0.0.0.0 --nat=extip:172.18.98.104 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=aa13b9eab7eedcbcffe02f64ad93c53f5e26c3a1ee56655cff8de93a0305cd12 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29819 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QPB27Irb5VPa47b-Z8jUt1fJh1dEhMpAXycisxr30XcPDvpMqvlaHFyAY7o7YF2V7D6yNzvMRTojPK-mFz-w2E4CgmlkgnY0gmlwhKwS7KSKbXVsdGlhZGRyc5YACASsEuykBnYqAAoErBLspAZ2K90DgnJzhQACAQAAiXNlY3AyNTZrMaEClRvhQbyASuX_Ue_zYHXfQZir_dWxizdsEOFNJthDOgODdGNwgnYqg3VkcIJ2LIV3YWt1MgU --content-topic=/myapp/1/latest/proto
2025-02-15 04:07:28.439 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.98.104 waku 04ba8dd917ee038db8d02b6409108e76b529b77fbd99f6f28766eff6135b9b09
2025-02-15 04:07:28.489 DEBUG [src.node.docker_mananger] Container started with ID 04ba8dd917ee. Setting up logs at ./log/docker/node2_2025-02-15_04-07-26__90e06d24-2cc5-408f-89d7-bd1d6d41039e__wakuorg_nwaku:latest.log
2025-02-15 04:07:28.490 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29815
2025-02-15 04:07:28.491 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:07:29.492 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29815/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:29.498 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:07:29.500 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:07:29.500 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29815/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:29.503 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.98.104/tcp/29816/p2p/16Uiu2HAm7xeyerQgVK8XQ5W2mGrKcCRY3xSfX5u1Azy8pceAnNLw","/ip4/172.18.98.104/tcp/29817/ws/p2p/16Uiu2HAm7xeyerQgVK8XQ5W2mGrKcCRY3xSfX5u1Azy8pceAnNLw"],"enrUri":"enr:-L24QMPTY4rJutqWwkVyC7sqUV-ZL11IqsUEvqtWRiJ7ta_3TGcojDz1X3e39NaNnwnLWYDdF7Tjpu2hNXkfPp-v3_ACgmlkgnY0gmlwhKwSYmiKbXVsdGlhZGRyc5YACASsEmJoBnR4AAoErBJiaAZ0ed0DgnJzhQACAQAAiXNlY3AyNTZrMaECujwdYRyv2ppktNMYXH_ZusjViYb42h4HJj2Gedbj8nCDdGNwgnR4g3VkcIJ0eoV3YWt1MgE"}'
2025-02-15 04:07:29.505 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:07:29.506 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29815/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.236.164/tcp/30250/p2p/16Uiu2HAm5TjPENKMbaiZUAw7g8EWd2XbfUXnHDh9eznYESVaaZcW"]'
2025-02-15 04:07:29.509 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:29.509 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30249/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-15 04:07:29.519 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:29.521 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29815/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-15 04:07:29.543 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:29.544 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30249/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L215YXBwLzEvbGF0ZXN0L3Byb3Rv", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:07:29.552 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:29.552 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30249/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9jb250ZW50L3Rlc3QuanM=", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:07:29.558 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:29.559 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30249/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yMi9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:07:29.563 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:29.564 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30249/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L3RveWNoYXQvMi9odWlsb25nL3Byb3Rv", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:07:29.569 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:29.570 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30249/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L3N0YXR1c2ltLzEvY29tbXVuaXR5L2Nib3I=", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:07:29.575 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:29.576 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30249/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yNy9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:07:29.581 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:29.582 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30249/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yOS9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:07:29.587 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:29.587 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30249/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yMC9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:07:29.593 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:29.594 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:07:29.694 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29815/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:29.697 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L215YXBwLzEvbGF0ZXN0L3Byb3Rv","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592449544175360,"ephemeral":false}]'
2025-02-15 04:07:29.697 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29815/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:29.700 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9jb250ZW50L3Rlc3QuanM=","contentTopic":"/waku/2/content/test.js","version":0,"timestamp":1739592449552508672,"ephemeral":false}]'
2025-02-15 04:07:29.700 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29815/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:29.702 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yMi9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/22/sometopic/someencoding","version":0,"timestamp":1739592449559057664,"ephemeral":false}]'
2025-02-15 04:07:29.703 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29815/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:29.705 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3RveWNoYXQvMi9odWlsb25nL3Byb3Rv","contentTopic":"/toychat/2/huilong/proto","version":0,"timestamp":1739592449564157184,"ephemeral":false}]'
2025-02-15 04:07:29.705 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29815/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:29.707 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3N0YXR1c2ltLzEvY29tbXVuaXR5L2Nib3I=","contentTopic":"/statusim/1/community/cbor","version":0,"timestamp":1739592449570044160,"ephemeral":false}]'
2025-02-15 04:07:29.708 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29815/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:29.710 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yNy9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/27/sometopic/someencoding","version":0,"timestamp":1739592449576440320,"ephemeral":false}]'
2025-02-15 04:07:29.710 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29815/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:29.712 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yOS9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/29/sometopic/someencoding","version":0,"timestamp":1739592449582048256,"ephemeral":false}]'
2025-02-15 04:07:29.712 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29815/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:29.714 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yMC9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/20/sometopic/someencoding","version":0,"timestamp":1739592449587523072,"ephemeral":false}]'
2025-02-15 04:07:29.716 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:07:29.717 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:07:29.717 DEBUG [src.node.waku_node] Stopping container with id f8a230368ec4
2025-02-15 04:07:30.804 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:07:30.804 DEBUG [src.node.waku_node] Stopping container with id 04ba8dd917ee
2025-02-15 04:07:31.616 ERROR [src.node.docker_mananger] Max retries reached for container f8a230368ec4. Exiting log stream.
2025-02-15 04:07:32.326 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:07:32.328 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:07:32.337 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:07:32.347 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
