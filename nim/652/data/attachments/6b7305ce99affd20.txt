2025-02-15 04:08:51.227 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:08:51.228 DEBUG [tests.conftest] Running test: test_unsubscribe_from_some_pubsub_topics with id: 2025-02-15_04-08-51__cc340e09-cf4b-4052-8b3c-06f4c4777b76
2025-02-15 04:08:51.228 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:08:51.228 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-15 04:08:51.229 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-15 04:08:51.235 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:08:51.235 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_04-08-51__cc340e09-cf4b-4052-8b3c-06f4c4777b76__wakuorg_nwaku:latest.log
2025-02-15 04:08:51.236 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:08:51.236 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:08:51.237 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:08:51.237 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.147.17
2025-02-15 04:08:51.237 DEBUG [src.node.docker_mananger] Generated ports ['10372', '10373', '10374', '10375', '10376']
2025-02-15 04:08:51.237 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:08:51.237 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:08:51.238 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:08:51.238 DEBUG [src.node.docker_mananger] docker run -i -t -p 10372:10372 -p 10373:10373 -p 10374:10374 -p 10375:10375 -p 10376:10376 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10374 --rest-port=10372 --tcp-port=10373 --discv5-udp-port=10375 --rest-address=0.0.0.0 --nat=extip:172.18.147.17 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=b987e5d23eeb911ade43defeecd549ebc1ffd7facdd75cba5a6fd2dc944a1de2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10376 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0 --pubsub-topic=/waku/2/rs/2/1 --pubsub-topic=/waku/2/rs/2/2 --pubsub-topic=/waku/2/rs/2/3 --pubsub-topic=/waku/2/rs/2/4 --pubsub-topic=/waku/2/rs/2/5 --pubsub-topic=/waku/2/rs/2/6 --pubsub-topic=/waku/2/rs/2/7
2025-02-15 04:08:51.465 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.147.17 waku 3f1691cb1fcf3fdee4d369737f3f3fb841e2d93ca8783b9470ac0d4af3e82f44
2025-02-15 04:08:51.515 DEBUG [src.node.docker_mananger] Container started with ID 3f1691cb1fcf. Setting up logs at ./log/docker/node1_2025-02-15_04-08-51__cc340e09-cf4b-4052-8b3c-06f4c4777b76__wakuorg_nwaku:latest.log
2025-02-15 04:08:51.516 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 10372
2025-02-15 04:08:51.517 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:08:52.033 ERROR [src.node.docker_mananger] Max retries reached for container 671e9105a861. Exiting log stream.
2025-02-15 04:08:52.517 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10372/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:52.520 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:08:52.520 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:08:52.521 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10372/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:52.523 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.147.17/tcp/10373/p2p/16Uiu2HAmC5rvkS1B4ieeMREEUniepT1VBzyspvgUNqAP6rxRmvW9","/ip4/172.18.147.17/tcp/10374/ws/p2p/16Uiu2HAmC5rvkS1B4ieeMREEUniepT1VBzyspvgUNqAP6rxRmvW9"],"enrUri":"enr:-Mu4QEjGtp18dFidbA_ZeR2VyriqDZhfo5TWAy8aDFSLyKgwVgIHkJWi4YeMZEeNh-0LQMKkbgY_q-DmWPh31rrfPuwCgmlkgnY0gmlwhKwSkxGKbXVsdGlhZGRyc5YACASsEpMRBiiFAAoErBKTEQYoht0DgnJzkwACCAAAAAEAAgADAAQABQAGAAeJc2VjcDI1NmsxoQL3g3ChmlqBV2AMIgJs-tzsusmyySwFs6WXTiGmTLcbjoN0Y3CCKIWDdWRwgiiHhXdha3UyBQ"}'
2025-02-15 04:08:52.523 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:08:52.529 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:08:52.529 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-15_04-08-51__cc340e09-cf4b-4052-8b3c-06f4c4777b76__wakuorg_nwaku:latest.log
2025-02-15 04:08:52.530 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:08:52.530 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:08:52.531 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:08:52.531 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.22.115
2025-02-15 04:08:52.531 DEBUG [src.node.docker_mananger] Generated ports ['19829', '19830', '19831', '19832', '19833']
2025-02-15 04:08:52.531 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:08:52.531 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:08:52.532 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:08:52.532 DEBUG [src.node.docker_mananger] docker run -i -t -p 19829:19829 -p 19830:19830 -p 19831:19831 -p 19832:19832 -p 19833:19833 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19831 --rest-port=19829 --tcp-port=19830 --discv5-udp-port=19832 --rest-address=0.0.0.0 --nat=extip:172.18.22.115 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=27c00fc06a5fc41bdedaa14fe4dfa02fe35fb706b80613b83ad4a997df55f7aa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19833 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-Mu4QEjGtp18dFidbA_ZeR2VyriqDZhfo5TWAy8aDFSLyKgwVgIHkJWi4YeMZEeNh-0LQMKkbgY_q-DmWPh31rrfPuwCgmlkgnY0gmlwhKwSkxGKbXVsdGlhZGRyc5YACASsEpMRBiiFAAoErBKTEQYoht0DgnJzkwACCAAAAAEAAgADAAQABQAGAAeJc2VjcDI1NmsxoQL3g3ChmlqBV2AMIgJs-tzsusmyySwFs6WXTiGmTLcbjoN0Y3CCKIWDdWRwgiiHhXdha3UyBQ --pubsub-topic=/waku/2/rs/2/0 --pubsub-topic=/waku/2/rs/2/1 --pubsub-topic=/waku/2/rs/2/2 --pubsub-topic=/waku/2/rs/2/3 --pubsub-topic=/waku/2/rs/2/4 --pubsub-topic=/waku/2/rs/2/5 --pubsub-topic=/waku/2/rs/2/6 --pubsub-topic=/waku/2/rs/2/7
2025-02-15 04:08:52.759 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.22.115 waku c93895c3b56f12557c1e82a1ef5927639a6ec57597cace3bd281753050a30a06
2025-02-15 04:08:52.808 DEBUG [src.node.docker_mananger] Container started with ID c93895c3b56f. Setting up logs at ./log/docker/node2_2025-02-15_04-08-51__cc340e09-cf4b-4052-8b3c-06f4c4777b76__wakuorg_nwaku:latest.log
2025-02-15 04:08:52.808 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 19829
2025-02-15 04:08:52.809 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:08:53.809 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19829/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:53.820 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:08:53.822 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:08:53.822 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19829/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:53.837 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.22.115/tcp/19830/p2p/16Uiu2HAmJeBRa9ocYrohcdUSjykcCY4G8tiZ914zLmFFtGNwnNNE","/ip4/172.18.22.115/tcp/19831/ws/p2p/16Uiu2HAmJeBRa9ocYrohcdUSjykcCY4G8tiZ914zLmFFtGNwnNNE"],"enrUri":"enr:-Mu4QD71RPWt_fhwa_xjNjGrtFiuXxlj18SAH-IaNq6hFECtKlgoepH18aB_cFZaB29QU4kk7uRrNChnDjPnwyP7ujACgmlkgnY0gmlwhKwSFnOKbXVsdGlhZGRyc5YACASsEhZzBk12AAoErBIWcwZNd90DgnJzkwACCAAAAAEAAgADAAQABQAGAAeJc2VjcDI1NmsxoQNY8Q_dqMqHZ8lF_DLw8zYLzmO999lxzRuCfggeR5pAi4N0Y3CCTXaDdWRwgk14hXdha3UyAQ"}'
2025-02-15 04:08:53.837 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:08:53.840 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19829/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.147.17/tcp/10373/p2p/16Uiu2HAmC5rvkS1B4ieeMREEUniepT1VBzyspvgUNqAP6rxRmvW9"]'
2025-02-15 04:08:53.847 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:53.847 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10372/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0", "/waku/2/rs/2/1", "/waku/2/rs/2/2", "/waku/2/rs/2/3", "/waku/2/rs/2/4", "/waku/2/rs/2/5", "/waku/2/rs/2/6", "/waku/2/rs/2/7"]'
2025-02-15 04:08:53.851 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:53.851 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19829/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0", "/waku/2/rs/2/1", "/waku/2/rs/2/2", "/waku/2/rs/2/3", "/waku/2/rs/2/4", "/waku/2/rs/2/5", "/waku/2/rs/2/6", "/waku/2/rs/2/7"]'
2025-02-15 04:08:53.854 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:53.854 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:08:53.859 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:53.860 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:08:53.960 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:53.960 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:53.963 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592533854676224,"ephemeral":false}]'
2025-02-15 04:08:53.965 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:53.965 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19829/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:53.967 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592533854676224,"ephemeral":false}]'
2025-02-15 04:08:53.969 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:08:53.974 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:53.974 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:08:54.075 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:54.075 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:54.078 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592533968910336,"ephemeral":false}]'
2025-02-15 04:08:54.079 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:54.080 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19829/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:54.082 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592533968910336,"ephemeral":false}]'
2025-02-15 04:08:54.084 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:08:54.088 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:54.089 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:08:54.189 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:54.190 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:54.192 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592534084070912,"ephemeral":false}]'
2025-02-15 04:08:54.194 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:54.194 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19829/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:54.196 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592534084070912,"ephemeral":false}]'
2025-02-15 04:08:54.198 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F3" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:08:54.203 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:54.204 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:08:54.304 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:54.304 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F3" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:54.307 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592534198258432,"ephemeral":false}]'
2025-02-15 04:08:54.308 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:54.308 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19829/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F3" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:54.311 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592534198258432,"ephemeral":false}]'
2025-02-15 04:08:54.312 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F4" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:08:54.317 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:54.318 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:08:54.418 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:54.419 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F4" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:54.421 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592534312441088,"ephemeral":false}]'
2025-02-15 04:08:54.423 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:54.423 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19829/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F4" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:54.426 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592534312441088,"ephemeral":false}]'
2025-02-15 04:08:54.427 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F5" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:08:54.432 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:54.432 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:08:54.532 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:54.533 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F5" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:54.535 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592534427453952,"ephemeral":false}]'
2025-02-15 04:08:54.536 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:54.536 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19829/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F5" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:54.538 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592534427453952,"ephemeral":false}]'
2025-02-15 04:08:54.540 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F6" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:08:54.545 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:54.545 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:08:54.645 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:54.646 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F6" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:54.648 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592534540399872,"ephemeral":false}]'
2025-02-15 04:08:54.649 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:54.650 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19829/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F6" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:54.652 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592534540399872,"ephemeral":false}]'
2025-02-15 04:08:54.653 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F7" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:08:54.658 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:54.659 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:08:54.759 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:54.760 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F7" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:54.762 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592534653516544,"ephemeral":false}]'
2025-02-15 04:08:54.763 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:54.764 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19829/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F7" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:54.766 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592534653516544,"ephemeral":false}]'
2025-02-15 04:08:54.767 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:10372/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0", "/waku/2/rs/2/1", "/waku/2/rs/2/2"]'
2025-02-15 04:08:54.776 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:54.777 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:19829/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0", "/waku/2/rs/2/1", "/waku/2/rs/2/2"]'
2025-02-15 04:08:54.784 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:54.785 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:08:54.788 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/0'
2025-02-15 04:08:54.790 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:08:54.791 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/1'
2025-02-15 04:08:54.793 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:08:54.795 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/2'
2025-02-15 04:08:54.797 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F3" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:08:54.802 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:54.802 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:08:54.902 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:54.903 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F3" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:54.905 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592534797027584,"ephemeral":false}]'
2025-02-15 04:08:54.906 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:54.907 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19829/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F3" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:54.909 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592534797027584,"ephemeral":false}]'
2025-02-15 04:08:54.910 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F4" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:08:54.915 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:54.915 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:08:55.016 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:55.017 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F4" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:55.020 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592534910648576,"ephemeral":false}]'
2025-02-15 04:08:55.021 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:55.021 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19829/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F4" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:55.024 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592534910648576,"ephemeral":false}]'
2025-02-15 04:08:55.025 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F5" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:08:55.030 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:55.030 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:08:55.131 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:55.131 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F5" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:55.134 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592535025531136,"ephemeral":false}]'
2025-02-15 04:08:55.135 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:55.135 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19829/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F5" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:55.139 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592535025531136,"ephemeral":false}]'
2025-02-15 04:08:55.140 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F6" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:08:55.145 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:55.145 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:08:55.245 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:55.246 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F6" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:55.248 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592535140548352,"ephemeral":false}]'
2025-02-15 04:08:55.249 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:55.250 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19829/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F6" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:55.252 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592535140548352,"ephemeral":false}]'
2025-02-15 04:08:55.277 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F7" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:08:55.283 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:55.283 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:08:55.384 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:55.384 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F7" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:55.387 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592535277723648,"ephemeral":false}]'
2025-02-15 04:08:55.388 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:08:55.388 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19829/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F7" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:55.391 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592535277723648,"ephemeral":false}]'
2025-02-15 04:08:55.393 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:08:55.395 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:08:55.395 DEBUG [src.node.waku_node] Stopping container with id 3f1691cb1fcf
2025-02-15 04:08:56.024 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:08:56.025 DEBUG [src.node.waku_node] Stopping container with id c93895c3b56f
2025-02-15 04:08:56.871 ERROR [src.node.docker_mananger] Max retries reached for container 3f1691cb1fcf. Exiting log stream.
2025-02-15 04:08:57.518 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:08:57.520 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:08:57.541 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:08:57.552 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
