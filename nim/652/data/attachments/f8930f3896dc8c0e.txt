[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_invalid_request_id with id: 2025-02-15_04-04-59__a5eba0aa-01d9-4fb3-a87d-8981156119c8
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_04-04-59__a5eba0aa-01d9-4fb3-a87d-8981156119c8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.74.126
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['2906', '2907', '2908', '2909', '2910']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 2906:2906 -p 2907:2907 -p 2908:2908 -p 2909:2909 -p 2910:2910 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2908 --rest-port=2906 --tcp-port=2907 --discv5-udp-port=2909 --rest-address=0.0.0.0 --nat=extip:172.18.74.126 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e27b6cba34975eaad2edb9612ed94660cb9a2d07d8a57ba4dd8349ccec9ae87d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2910 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.74.126 waku d02ed0ebb4742fbf451c1a6e2507e43a8401b1a292d203440ec0d58f8b065599
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d02ed0ebb474. Setting up logs at ./log/docker/node1_2025-02-15_04-04-59__a5eba0aa-01d9-4fb3-a87d-8981156119c8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 2906
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d3124f463e68. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2906/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2906/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.74.126/tcp/2907/p2p/16Uiu2HAmT7fySGxDwjcGSRtyHcqkwYH3nk75guak9kbhAxUXsKN4","/ip4/172.18.74.126/tcp/2908/ws/p2p/16Uiu2HAmT7fySGxDwjcGSRtyHcqkwYH3nk75guak9kbhAxUXsKN4"],"enrUri":"enr:-L24QGQCYZJZb6gkSQhFRLghx8TTj34x6ozySIeK9VoqPdnxMwynN1OiAYP93LjglfBTRWkP5pNzuWAyZysUHk3LY1UCgmlkgnY0gmlwhKwSSn6KbXVsdGlhZGRyc5YACASsEkp-BgtbAAoErBJKfgYLXN0DgnJzhQADAQAAiXNlY3AyNTZrMaED1tmFJrKWfJrwqSOHUmeRDowJ_6aY3WHyl3TSSx8r6x2DdGNwggtbg3VkcIILXYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-02-15_04-04-59__a5eba0aa-01d9-4fb3-a87d-8981156119c8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.105.61
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['20363', '20364', '20365', '20366', '20367']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 20363:20363 -p 20364:20364 -p 20365:20365 -p 20366:20366 -p 20367:20367 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20365 --rest-port=20363 --tcp-port=20364 --discv5-udp-port=20366 --rest-address=0.0.0.0 --nat=extip:172.18.105.61 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e8593de9917bdb95f8b2f886cfd1cebdbd8bf2dfa3e6029c637ce022b5ae0fdf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20367 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QGQCYZJZb6gkSQhFRLghx8TTj34x6ozySIeK9VoqPdnxMwynN1OiAYP93LjglfBTRWkP5pNzuWAyZysUHk3LY1UCgmlkgnY0gmlwhKwSSn6KbXVsdGlhZGRyc5YACASsEkp-BgtbAAoErBJKfgYLXN0DgnJzhQADAQAAiXNlY3AyNTZrMaED1tmFJrKWfJrwqSOHUmeRDowJ_6aY3WHyl3TSSx8r6x2DdGNwggtbg3VkcIILXYV3YWt1MgU --filternode=/ip4/172.18.74.126/tcp/2907/p2p/16Uiu2HAmT7fySGxDwjcGSRtyHcqkwYH3nk75guak9kbhAxUXsKN4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.105.61 waku f68f29994b08ac94da62597f260e94cae4dcc3f78a438c0b2b806b476c46114a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f68f29994b08. Setting up logs at ./log/docker/node2_2025-02-15_04-04-59__a5eba0aa-01d9-4fb3-a87d-8981156119c8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 20363
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20363/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20363/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.105.61/tcp/20364/p2p/16Uiu2HAmSuKRHMRQoQc6x5vtMsVUqWyE33ioE7M2CwruSRCURvN6","/ip4/172.18.105.61/tcp/20365/ws/p2p/16Uiu2HAmSuKRHMRQoQc6x5vtMsVUqWyE33ioE7M2CwruSRCURvN6"],"enrUri":"enr:-L24QFGaWMFLIpts9njKu1k_h80tfqppLu7kSKkkeZei3TgCS2kXxGgmwek9iVm26M1wleoa1_M1gSYOnpCH8B7t0lcCgmlkgnY0gmlwhKwSaT2KbXVsdGlhZGRyc5YACASsEmk9Bk-MAAoErBJpPQZPjd0DgnJzhQADAQAAiXNlY3AyNTZrMaED069PO7m-KAsxXcXwu0eQqGa07F1hNmyd9S0TJhq06guDdGNwgk-Mg3VkcIJPjoV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20363/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.74.126/tcp/2907/p2p/16Uiu2HAmT7fySGxDwjcGSRtyHcqkwYH3nk75guak9kbhAxUXsKN4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2906/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20363/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e912bb75-f7c9-48fe-8b26-cbed4c84c6bf", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"e912bb75-f7c9-48fe-8b26-cbed4c84c6bf","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:20363/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:20363/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d02ed0ebb474
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f68f29994b08
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d02ed0ebb474. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.