2025-02-15 04:07:54.794 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:07:54.795 DEBUG [tests.conftest] Running test: test_2_receiving_nodes__relay_node1_forwards_lightpushed_message_to_relay_node2 with id: 2025-02-15_04-07-54__af0b4e16-3fdb-4dcd-961a-f647d2d8714e
2025-02-15 04:07:54.795 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:07:54.796 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-15 04:07:54.804 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:07:54.805 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-15_04-07-54__af0b4e16-3fdb-4dcd-961a-f647d2d8714e__wakuorg_nwaku:latest.log
2025-02-15 04:07:54.806 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:07:54.806 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:07:54.808 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:07:54.808 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.179.114
2025-02-15 04:07:54.809 DEBUG [src.node.docker_mananger] Generated ports ['55741', '55742', '55743', '55744', '55745']
2025-02-15 04:07:54.809 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:07:54.809 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:07:54.809 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:07:54.810 DEBUG [src.node.docker_mananger] docker run -i -t -p 55741:55741 -p 55742:55742 -p 55743:55743 -p 55744:55744 -p 55745:55745 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55743 --rest-port=55741 --tcp-port=55742 --discv5-udp-port=55744 --rest-address=0.0.0.0 --nat=extip:172.18.179.114 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ada80f1f1572fee2c4eedcdd1cc4a65cad3e423f5f4691feeca2fa48bf95d4fc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55745 --metrics-logging=true --lightpush=true --relay=true
2025-02-15 04:07:55.062 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.179.114 waku 7fe7c305f122f33aa147fc5e8a5866fae981f0448cab938d4fc8878de8189c82
2025-02-15 04:07:55.116 DEBUG [src.node.docker_mananger] Container started with ID 7fe7c305f122. Setting up logs at ./log/docker/receiving_node1_2025-02-15_04-07-54__af0b4e16-3fdb-4dcd-961a-f647d2d8714e__wakuorg_nwaku:latest.log
2025-02-15 04:07:55.116 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 55741
2025-02-15 04:07:55.116 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:07:55.626 ERROR [src.node.docker_mananger] Max retries reached for container b0828626a2cc. Exiting log stream.
2025-02-15 04:07:56.118 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55741/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:56.121 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:07:56.121 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:07:56.122 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55741/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:56.124 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.179.114/tcp/55742/p2p/16Uiu2HAm6tgRLnQCgdkuM6DmSz8EwsSZr2M2asiLJF3gNQzTPLJJ","/ip4/172.18.179.114/tcp/55743/ws/p2p/16Uiu2HAm6tgRLnQCgdkuM6DmSz8EwsSZr2M2asiLJF3gNQzTPLJJ"],"enrUri":"enr:-L24QHZEpAIbBAHaZ8RPejFypfUZ1lpZc_hFDgkUTPGt3ly7R_Of6deb6ccCpRy6hoV44uyqfvuVqtPI4bkAnzI0j2YCgmlkgnY0gmlwhKwSs3KKbXVsdGlhZGRyc5YACASsErNyBtm-AAoErBKzcgbZv90DgnJzhQADAQAAiXNlY3AyNTZrMaECqlu8cOd4YXTlLt43AklwTybNPSgiHZfwPbvXLUh3WIeDdGNwgtm-g3VkcILZwIV3YWt1Mgk"}'
2025-02-15 04:07:56.124 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:07:56.131 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:07:56.131 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-15_04-07-54__af0b4e16-3fdb-4dcd-961a-f647d2d8714e__wakuorg_nwaku:latest.log
2025-02-15 04:07:56.131 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:07:56.131 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:07:56.133 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:07:56.133 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.244.33
2025-02-15 04:07:56.133 DEBUG [src.node.docker_mananger] Generated ports ['15794', '15795', '15796', '15797', '15798']
2025-02-15 04:07:56.133 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:07:56.133 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:07:56.134 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:07:56.134 DEBUG [src.node.docker_mananger] docker run -i -t -p 15794:15794 -p 15795:15795 -p 15796:15796 -p 15797:15797 -p 15798:15798 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15796 --rest-port=15794 --tcp-port=15795 --discv5-udp-port=15797 --rest-address=0.0.0.0 --nat=extip:172.18.244.33 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f4e10df3818fd6129aac5e7fcfbedeea1978d6b57be935746eac332dcbf40dc1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15798 --metrics-logging=true --lightpush=false --relay=true
2025-02-15 04:07:56.369 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.244.33 waku d08fb43707e934b54db5f6d4a0ecd9e773eeb59c3b04d9a29aad5db5df143481
2025-02-15 04:07:56.420 DEBUG [src.node.docker_mananger] Container started with ID d08fb43707e9. Setting up logs at ./log/docker/receiving_node2_2025-02-15_04-07-54__af0b4e16-3fdb-4dcd-961a-f647d2d8714e__wakuorg_nwaku:latest.log
2025-02-15 04:07:56.420 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15794
2025-02-15 04:07:56.420 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:07:57.421 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15794/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:57.424 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:07:57.424 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:07:57.425 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15794/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:57.427 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.244.33/tcp/15795/p2p/16Uiu2HAmDi9XXdrdYzLMfobM5v7CCq6kv6vCtTDnyWcn4YswAsD3","/ip4/172.18.244.33/tcp/15796/ws/p2p/16Uiu2HAmDi9XXdrdYzLMfobM5v7CCq6kv6vCtTDnyWcn4YswAsD3"],"enrUri":"enr:-L24QE_OZjECgAgCJK0GKlP9ApLrUng1Udo1I56gvkqZRdWzU7CjdwgbDlpGq_Z9o_jNVsK8oZHCFrXkFF9npxTFs0gCgmlkgnY0gmlwhKwS9CGKbXVsdGlhZGRyc5YACASsEvQhBj2zAAoErBL0IQY9tN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDD6rOJ--x2aG5ydLO7TpzrsMKTAqxWTdYdWdPwKpUmgqDdGNwgj2zg3VkcII9tYV3YWt1MgE"}'
2025-02-15 04:07:57.427 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:07:57.427 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15794/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.179.114/tcp/55742/p2p/16Uiu2HAm6tgRLnQCgdkuM6DmSz8EwsSZr2M2asiLJF3gNQzTPLJJ"]'
2025-02-15 04:07:57.465 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:57.479 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:07:57.480 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-15_04-07-54__af0b4e16-3fdb-4dcd-961a-f647d2d8714e__wakuorg_nwaku:latest.log
2025-02-15 04:07:57.480 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:07:57.480 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:07:57.482 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:07:57.482 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.200.125
2025-02-15 04:07:57.482 DEBUG [src.node.docker_mananger] Generated ports ['37375', '37376', '37377', '37378', '37379']
2025-02-15 04:07:57.482 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:07:57.482 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:07:57.482 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:07:57.483 DEBUG [src.node.docker_mananger] docker run -i -t -p 37375:37375 -p 37376:37376 -p 37377:37377 -p 37378:37378 -p 37379:37379 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37377 --rest-port=37375 --tcp-port=37376 --discv5-udp-port=37378 --rest-address=0.0.0.0 --nat=extip:172.18.200.125 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cc631fa565a98179bacccc791c3dc98ae51ee4deeebe90ecbaabbdeb8d57cd9f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37379 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QHZEpAIbBAHaZ8RPejFypfUZ1lpZc_hFDgkUTPGt3ly7R_Of6deb6ccCpRy6hoV44uyqfvuVqtPI4bkAnzI0j2YCgmlkgnY0gmlwhKwSs3KKbXVsdGlhZGRyc5YACASsErNyBtm-AAoErBKzcgbZv90DgnJzhQADAQAAiXNlY3AyNTZrMaECqlu8cOd4YXTlLt43AklwTybNPSgiHZfwPbvXLUh3WIeDdGNwgtm-g3VkcILZwIV3YWt1Mgk --lightpushnode=/ip4/172.18.179.114/tcp/55742/p2p/16Uiu2HAm6tgRLnQCgdkuM6DmSz8EwsSZr2M2asiLJF3gNQzTPLJJ --lightpush=true --relay=false
2025-02-15 04:07:57.720 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.200.125 waku 3039c4ee3ba423f952549c3e4353d0507ae1e06235e7486df11ae87868a7c540
2025-02-15 04:07:57.768 DEBUG [src.node.docker_mananger] Container started with ID 3039c4ee3ba4. Setting up logs at ./log/docker/lightpush_node1_2025-02-15_04-07-54__af0b4e16-3fdb-4dcd-961a-f647d2d8714e__wakuorg_nwaku:latest.log
2025-02-15 04:07:57.769 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37375
2025-02-15 04:07:57.769 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:07:58.769 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37375/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:58.772 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:07:58.773 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:07:58.773 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37375/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:58.775 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.200.125/tcp/37376/p2p/16Uiu2HAm3Mu5Nz1nwE3M3n14wa8qyCaKF9JyGxM5fzj3phYfAWkB","/ip4/172.18.200.125/tcp/37377/ws/p2p/16Uiu2HAm3Mu5Nz1nwE3M3n14wa8qyCaKF9JyGxM5fzj3phYfAWkB"],"enrUri":"enr:-L24QJDcl2nVjC4w6yw1hFRLnY_0wayeR7nlNr43lvhjRpUhOq5Yt-lphV13mPJd_2avNvht6a0kE4g-mDlK-NKDWf0CgmlkgnY0gmlwhKwSyH2KbXVsdGlhZGRyc5YACASsEsh9BpIAAAoErBLIfQaSAd0DgnJzhQADAQAAiXNlY3AyNTZrMaECdeX68BdpxzCQdYAGThj-0Rp55vmhuvpqi9OrfmzLgoSDdGNwgpIAg3VkcIKSAoV3YWt1Mgg"}'
2025-02-15 04:07:58.775 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:07:58.775 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37375/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.179.114/tcp/55742/p2p/16Uiu2HAm6tgRLnQCgdkuM6DmSz8EwsSZr2M2asiLJF3gNQzTPLJJ"]'
2025-02-15 04:07:58.813 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:58.815 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37375/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.244.33/tcp/15795/p2p/16Uiu2HAmDi9XXdrdYzLMfobM5v7CCq6kv6vCtTDnyWcn4YswAsD3"]'
2025-02-15 04:07:58.847 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:58.851 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55741/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 04:07:58.857 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:58.857 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15794/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 04:07:58.861 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:58.862 DEBUG [src.steps.light_push] Lightpushing message
2025-02-15 04:07:58.862 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37375/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739592478862429952}}'
2025-02-15 04:07:58.873 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:58.875 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:07:58.975 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-15 04:07:58.975 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55741/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:58.978 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592478862429952,"ephemeral":false}]'
2025-02-15 04:07:58.980 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-15 04:07:58.980 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15794/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:58.982 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592478862429952,"ephemeral":false}]'
2025-02-15 04:07:58.984 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:07:58.985 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:07:58.986 DEBUG [src.node.waku_node] Stopping container with id 7fe7c305f122
2025-02-15 04:07:59.621 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:07:59.621 DEBUG [src.node.waku_node] Stopping container with id d08fb43707e9
2025-02-15 04:08:00.434 ERROR [src.node.docker_mananger] Max retries reached for container 7fe7c305f122. Exiting log stream.
2025-02-15 04:08:01.046 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:08:01.046 DEBUG [src.node.waku_node] Stopping container with id 3039c4ee3ba4
2025-02-15 04:08:01.859 ERROR [src.node.docker_mananger] Max retries reached for container d08fb43707e9. Exiting log stream.
2025-02-15 04:08:02.551 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:08:02.552 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:08:02.560 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:08:02.568 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:08:02.575 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
