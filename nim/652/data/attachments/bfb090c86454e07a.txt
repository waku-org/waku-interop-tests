2025-02-15 04:07:48.351 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:07:48.351 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_all_from_90_content_topics with id: 2025-02-15_04-07-48__edca6469-384d-4c16-bff2-1abf027dad91
2025-02-15 04:07:48.351 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:07:48.352 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-15 04:07:48.352 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-15 04:07:48.358 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:07:48.358 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_04-07-48__edca6469-384d-4c16-bff2-1abf027dad91__wakuorg_nwaku:latest.log
2025-02-15 04:07:48.358 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:07:48.359 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:07:48.360 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:07:48.360 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.187.79
2025-02-15 04:07:48.360 DEBUG [src.node.docker_mananger] Generated ports ['11778', '11779', '11780', '11781', '11782']
2025-02-15 04:07:48.360 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:07:48.361 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:07:48.361 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:07:48.361 DEBUG [src.node.docker_mananger] docker run -i -t -p 11778:11778 -p 11779:11779 -p 11780:11780 -p 11781:11781 -p 11782:11782 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11780 --rest-port=11778 --tcp-port=11779 --discv5-udp-port=11781 --rest-address=0.0.0.0 --nat=extip:172.18.187.79 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eaf5a5ec3b9262820d32e544f3f52e41faecf0ae4bc4c988e64cd097d5d1cdbb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11782 --metrics-logging=true --relay=true --filter=true
2025-02-15 04:07:48.597 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.187.79 waku d1888900d924a9c669e2468ee9dd6dbe8ae491504724af8b963704af847f6b9d
2025-02-15 04:07:48.645 DEBUG [src.node.docker_mananger] Container started with ID d1888900d924. Setting up logs at ./log/docker/node1_2025-02-15_04-07-48__edca6469-384d-4c16-bff2-1abf027dad91__wakuorg_nwaku:latest.log
2025-02-15 04:07:48.646 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11778
2025-02-15 04:07:48.646 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:07:49.154 ERROR [src.node.docker_mananger] Max retries reached for container d34ab4d44912. Exiting log stream.
2025-02-15 04:07:49.647 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11778/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:49.650 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:07:49.650 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:07:49.651 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11778/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:49.653 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.187.79/tcp/11779/p2p/16Uiu2HAmM6bknAhzFcMgZDfy9HyBCWMD5VxZHSKEnkqvjr6quksC","/ip4/172.18.187.79/tcp/11780/ws/p2p/16Uiu2HAmM6bknAhzFcMgZDfy9HyBCWMD5VxZHSKEnkqvjr6quksC"],"enrUri":"enr:-L24QN8m4avgtf7hioC57gYMT7QAu_Ln0iUCYyQBcdSQzuEdaZbvVR2-_QssLPcqnh2slIIs6INwRH3tWdGoUyw21bwCgmlkgnY0gmlwhKwSu0-KbXVsdGlhZGRyc5YACASsErtPBi4DAAoErBK7TwYuBN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDfW0MVlvyGOM3kQMbh0A8kthy2GyK8ZoBDTgLRvry8-uDdGNwgi4Dg3VkcIIuBYV3YWt1MgU"}'
2025-02-15 04:07:49.653 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:07:49.653 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-15 04:07:49.659 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:07:49.660 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-15_04-07-48__edca6469-384d-4c16-bff2-1abf027dad91__wakuorg_nwaku:latest.log
2025-02-15 04:07:49.660 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:07:49.660 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:07:49.661 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:07:49.661 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.182.20
2025-02-15 04:07:49.661 DEBUG [src.node.docker_mananger] Generated ports ['45297', '45298', '45299', '45300', '45301']
2025-02-15 04:07:49.661 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:07:49.662 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:07:49.662 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:07:49.662 DEBUG [src.node.docker_mananger] docker run -i -t -p 45297:45297 -p 45298:45298 -p 45299:45299 -p 45300:45300 -p 45301:45301 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45299 --rest-port=45297 --tcp-port=45298 --discv5-udp-port=45300 --rest-address=0.0.0.0 --nat=extip:172.18.182.20 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2e18e34ca02e02024a2d46f8c38cad04eadbdba8ea0be55bab0aad5d7d5dd10b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45301 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QN8m4avgtf7hioC57gYMT7QAu_Ln0iUCYyQBcdSQzuEdaZbvVR2-_QssLPcqnh2slIIs6INwRH3tWdGoUyw21bwCgmlkgnY0gmlwhKwSu0-KbXVsdGlhZGRyc5YACASsErtPBi4DAAoErBK7TwYuBN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDfW0MVlvyGOM3kQMbh0A8kthy2GyK8ZoBDTgLRvry8-uDdGNwgi4Dg3VkcIIuBYV3YWt1MgU --filternode=/ip4/172.18.187.79/tcp/11779/p2p/16Uiu2HAmM6bknAhzFcMgZDfy9HyBCWMD5VxZHSKEnkqvjr6quksC
2025-02-15 04:07:49.896 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.182.20 waku b0828626a2cc47b684e72bebd9c8bf3ef26b4aded14a42e4f51649762c414cfd
2025-02-15 04:07:49.941 DEBUG [src.node.docker_mananger] Container started with ID b0828626a2cc. Setting up logs at ./log/docker/node2_2025-02-15_04-07-48__edca6469-384d-4c16-bff2-1abf027dad91__wakuorg_nwaku:latest.log
2025-02-15 04:07:49.941 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45297
2025-02-15 04:07:49.941 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:07:50.942 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45297/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:50.944 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:07:50.945 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:07:50.945 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45297/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:50.947 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.182.20/tcp/45298/p2p/16Uiu2HAmDo412naexH3WUsHuFG5cjriRc7hDF49yYA77mNauV7sV","/ip4/172.18.182.20/tcp/45299/ws/p2p/16Uiu2HAmDo412naexH3WUsHuFG5cjriRc7hDF49yYA77mNauV7sV"],"enrUri":"enr:-L24QL1Y-Ui6beagiDkf7p3tWnT-DF9AJ4-Hfiz80PIVfOIxdRn0RU7smFrmy-urIqxmpG7f0l0YsWVndmcIkO1QAjoCgmlkgnY0gmlwhKwSthSKbXVsdGlhZGRyc5YACASsErYUBrDyAAoErBK2FAaw890DgnJzhQADAQAAiXNlY3AyNTZrMaEDEOx2Fn0sm6nMmBPcXebdyox5uLlQmBAT7Bfy3aKutsiDdGNwgrDyg3VkcIKw9IV3YWt1MgA"}'
2025-02-15 04:07:50.947 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:07:50.948 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45297/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.187.79/tcp/11779/p2p/16Uiu2HAmM6bknAhzFcMgZDfy9HyBCWMD5VxZHSKEnkqvjr6quksC"]'
2025-02-15 04:07:50.986 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:50.990 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11778/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 04:07:51.004 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:51.005 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45297/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "43056e3c-4e54-4941-a0cd-ec3cc98dabd1", "contentFilters": ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-15 04:07:51.021 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"43056e3c-4e54-4941-a0cd-ec3cc98dabd1","statusDesc":"OK"}'
2025-02-15 04:07:51.022 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11778/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 04:07:51.024 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:51.024 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45297/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "ca960cc4-cf05-4078-bba9-d50f773e8394", "contentFilters": ["31", "32", "33", "34", "35", "36", "37", "38", "39", "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "50", "51", "52", "53", "54", "55", "56", "57", "58", "59", "60"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-15 04:07:51.041 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"ca960cc4-cf05-4078-bba9-d50f773e8394","statusDesc":"OK"}'
2025-02-15 04:07:51.041 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11778/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 04:07:51.044 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:51.044 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45297/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "96980783-223b-473c-a15f-202aa8c1d83b", "contentFilters": ["61", "62", "63", "64", "65", "66", "67", "68", "69", "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", "80", "81", "82", "83", "84", "85", "86", "87", "88", "89", "90"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-15 04:07:51.065 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"96980783-223b-473c-a15f-202aa8c1d83b","statusDesc":"OK"}'
2025-02-15 04:07:51.066 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11778/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "11", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:07:51.090 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:51.090 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:07:51.191 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:07:51.191 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45297/filter/v2/messages/11" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:51.195 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"11","version":0,"timestamp":1739592471065867008,"ephemeral":false}]'
2025-02-15 04:07:51.197 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11778/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "60", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:07:51.218 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:51.218 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:07:51.318 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:07:51.319 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45297/filter/v2/messages/60" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:51.321 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"60","version":0,"timestamp":1739592471197076992,"ephemeral":false}]'
2025-02-15 04:07:51.323 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11778/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "74", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:07:51.345 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:51.345 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:07:51.445 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:07:51.446 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45297/filter/v2/messages/74" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:51.449 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"74","version":0,"timestamp":1739592471323208192,"ephemeral":false}]'
2025-02-15 04:07:51.450 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:45297/filter/v2/subscriptions/all" -H "Content-Type: application/json" -d '{"requestId": "1"}'
2025-02-15 04:07:51.460 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
2025-02-15 04:07:51.461 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11778/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "8", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:07:51.464 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:51.465 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:07:51.565 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:07:51.565 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45297/filter/v2/messages/8" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:51.568 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:45297/filter/v2/messages/8. Response content: b'Not subscribed to topic: 8'
2025-02-15 04:07:51.569 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11778/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "54", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:07:51.573 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:51.573 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:07:51.674 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:07:51.674 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45297/filter/v2/messages/54" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:51.677 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:45297/filter/v2/messages/54. Response content: b'Not subscribed to topic: 54'
2025-02-15 04:07:51.678 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11778/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "85", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:07:51.682 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:51.682 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:07:51.782 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:07:51.783 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45297/filter/v2/messages/85" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:51.785 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:45297/filter/v2/messages/85. Response content: b'Not subscribed to topic: 85'
2025-02-15 04:07:51.788 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:07:51.789 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:07:51.789 DEBUG [src.node.waku_node] Stopping container with id d1888900d924
2025-02-15 04:07:53.243 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:07:53.243 DEBUG [src.node.waku_node] Stopping container with id b0828626a2cc
2025-02-15 04:07:54.056 ERROR [src.node.docker_mananger] Max retries reached for container d1888900d924. Exiting log stream.
2025-02-15 04:07:54.766 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:07:54.769 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:07:54.777 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:07:54.784 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
