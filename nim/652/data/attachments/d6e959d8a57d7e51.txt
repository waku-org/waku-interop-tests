2025-02-15 04:07:14.252 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:07:14.252 DEBUG [tests.conftest] Running test: test_publish_without_subscribing_via_api_works with id: 2025-02-15_04-07-14__90c7f424-2800-47f2-8a66-fbe0f9ec74ed
2025-02-15 04:07:14.252 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:07:14.252 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-15 04:07:14.253 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-15 04:07:14.259 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:07:14.259 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_04-07-14__90c7f424-2800-47f2-8a66-fbe0f9ec74ed__wakuorg_nwaku:latest.log
2025-02-15 04:07:14.259 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:07:14.259 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:07:14.261 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:07:14.261 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.140.165
2025-02-15 04:07:14.261 DEBUG [src.node.docker_mananger] Generated ports ['64219', '64220', '64221', '64222', '64223']
2025-02-15 04:07:14.261 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:07:14.261 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:07:14.261 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:07:14.262 DEBUG [src.node.docker_mananger] docker run -i -t -p 64219:64219 -p 64220:64220 -p 64221:64221 -p 64222:64222 -p 64223:64223 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64221 --rest-port=64219 --tcp-port=64220 --discv5-udp-port=64222 --rest-address=0.0.0.0 --nat=extip:172.18.140.165 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=b78cbfe7b6e4417ffe54a5587a08f1c7f9d6df8ef528baeae4ab904fdebf058b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64223 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2025-02-15 04:07:14.492 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.140.165 waku 7034084ef9cb119d0250d6f06b4acad45ad7805eb6db4c3d4ecaa1706e8b58eb
2025-02-15 04:07:14.541 DEBUG [src.node.docker_mananger] Container started with ID 7034084ef9cb. Setting up logs at ./log/docker/node1_2025-02-15_04-07-14__90c7f424-2800-47f2-8a66-fbe0f9ec74ed__wakuorg_nwaku:latest.log
2025-02-15 04:07:14.541 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 64219
2025-02-15 04:07:14.541 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:07:14.937 ERROR [src.node.docker_mananger] Max retries reached for container 3059a8346f27. Exiting log stream.
2025-02-15 04:07:15.542 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64219/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:15.544 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:07:15.545 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:07:15.545 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64219/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:15.547 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.140.165/tcp/64220/p2p/16Uiu2HAmUjhRsGvR9DaNz2vVVHx856cNYgxWHQuMEtZ4hdeeNmUV","/ip4/172.18.140.165/tcp/64221/ws/p2p/16Uiu2HAmUjhRsGvR9DaNz2vVVHx856cNYgxWHQuMEtZ4hdeeNmUV"],"enrUri":"enr:-L24QKBITSrpQ6gPamQUuIjBhpcuV-oll7Dn-CnsrkT3cNBeZG7q2vZvZ1FWmLmUsAeGcGsrMCqnLDJdS8KerR78D1oCgmlkgnY0gmlwhKwSjKWKbXVsdGlhZGRyc5YACASsEoylBvrcAAoErBKMpQb63d0DgnJzhQACAQAAiXNlY3AyNTZrMaED7u_DHCbQUpe5dcJ_V1z2daoJ-Yo1jIREOxia4YQe7SKDdGNwgvrcg3VkcIL63oV3YWt1MgU"}'
2025-02-15 04:07:15.547 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:07:15.553 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:07:15.553 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-15_04-07-14__90c7f424-2800-47f2-8a66-fbe0f9ec74ed__wakuorg_nwaku:latest.log
2025-02-15 04:07:15.554 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:07:15.554 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:07:15.555 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:07:15.555 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.30.189
2025-02-15 04:07:15.555 DEBUG [src.node.docker_mananger] Generated ports ['32301', '32302', '32303', '32304', '32305']
2025-02-15 04:07:15.556 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:07:15.556 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:07:15.556 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:07:15.556 DEBUG [src.node.docker_mananger] docker run -i -t -p 32301:32301 -p 32302:32302 -p 32303:32303 -p 32304:32304 -p 32305:32305 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32303 --rest-port=32301 --tcp-port=32302 --discv5-udp-port=32304 --rest-address=0.0.0.0 --nat=extip:172.18.30.189 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=4faafcb50a3c2bf16be67dacb0afb10e2d2c9c38bc5fbc0cf4967fd73a239f6b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32305 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QKBITSrpQ6gPamQUuIjBhpcuV-oll7Dn-CnsrkT3cNBeZG7q2vZvZ1FWmLmUsAeGcGsrMCqnLDJdS8KerR78D1oCgmlkgnY0gmlwhKwSjKWKbXVsdGlhZGRyc5YACASsEoylBvrcAAoErBKMpQb63d0DgnJzhQACAQAAiXNlY3AyNTZrMaED7u_DHCbQUpe5dcJ_V1z2daoJ-Yo1jIREOxia4YQe7SKDdGNwgvrcg3VkcIL63oV3YWt1MgU --content-topic=/myapp/1/latest/proto
2025-02-15 04:07:15.790 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.30.189 waku d0a3364b4d8d61406907695c355454d1c7f86bb10123f82e8787f481d18b77ba
2025-02-15 04:07:15.837 DEBUG [src.node.docker_mananger] Container started with ID d0a3364b4d8d. Setting up logs at ./log/docker/node2_2025-02-15_04-07-14__90c7f424-2800-47f2-8a66-fbe0f9ec74ed__wakuorg_nwaku:latest.log
2025-02-15 04:07:15.837 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32301
2025-02-15 04:07:15.838 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:07:16.838 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32301/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:16.843 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:07:16.844 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:07:16.847 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32301/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:16.853 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.30.189/tcp/32302/p2p/16Uiu2HAm2eu1FRCRDem8hgwaKXt1q2mf1Fwfp8Pp42RFwY4MTnhq","/ip4/172.18.30.189/tcp/32303/ws/p2p/16Uiu2HAm2eu1FRCRDem8hgwaKXt1q2mf1Fwfp8Pp42RFwY4MTnhq"],"enrUri":"enr:-L24QFK7L-gd8uNy6hJwFESAFA8qRGZbElI1-qLTzg4tpmJ6Iz7d4DycvaiWbsxLKwvuhk36J_lMvlKqUsOzy_6UhE0CgmlkgnY0gmlwhKwSHr2KbXVsdGlhZGRyc5YACASsEh69Bn4uAAoErBIevQZ-L90DgnJzhQACAQAAiXNlY3AyNTZrMaECa2UWJutO1k0b9JJ_ALNK0RQJqsQVR8aCPv9zA1-RyYSDdGNwgn4ug3VkcIJ-MIV3YWt1MgE"}'
2025-02-15 04:07:16.855 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:07:16.856 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32301/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.140.165/tcp/64220/p2p/16Uiu2HAmUjhRsGvR9DaNz2vVVHx856cNYgxWHQuMEtZ4hdeeNmUV"]'
2025-02-15 04:07:16.860 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:16.860 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64219/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:07:16.865 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:16.866 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32301/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:07:16.871 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:16.873 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:07:16.874 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:07:16.874 DEBUG [src.node.waku_node] Stopping container with id 7034084ef9cb
2025-02-15 04:07:18.045 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:07:18.046 DEBUG [src.node.waku_node] Stopping container with id d0a3364b4d8d
2025-02-15 04:07:18.858 ERROR [src.node.docker_mananger] Max retries reached for container 7034084ef9cb. Exiting log stream.
2025-02-15 04:07:19.558 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:07:19.559 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:07:19.567 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:07:19.576 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
