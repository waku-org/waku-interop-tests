2025-02-15 04:02:21.913 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:02:21.913 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2025-02-15_04-02-21__16c64eab-bd45-44ce-92b9-affc0dfe970a
2025-02-15 04:02:21.913 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:02:21.914 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-15 04:02:21.914 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-15 04:02:21.923 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:02:21.923 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_04-02-21__16c64eab-bd45-44ce-92b9-affc0dfe970a__wakuorg_nwaku:latest.log
2025-02-15 04:02:21.929 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:02:21.929 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-15_04-02-21__16c64eab-bd45-44ce-92b9-affc0dfe970a__wakuorg_nwaku:latest.log
2025-02-15 04:02:21.935 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:02:21.935 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-15_04-02-21__16c64eab-bd45-44ce-92b9-affc0dfe970a__wakuorg_nwaku:latest.log
2025-02-15 04:02:21.935 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-15 04:02:21.936 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-15 04:02:21.936 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:02:21.937 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:02:22.002 DEBUG [src.node.docker_mananger] Network waku created
2025-02-15 04:02:22.002 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.191.83
2025-02-15 04:02:22.002 DEBUG [src.node.docker_mananger] Generated ports ['40942', '40943', '40944', '40945', '40946']
2025-02-15 04:02:22.002 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:02:22.002 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:02:22.002 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:02:22.003 DEBUG [src.node.docker_mananger] docker run -i -t -p 40942:40942 -p 40943:40943 -p 40944:40944 -p 40945:40945 -p 40946:40946 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40944 --rest-port=40942 --tcp-port=40943 --discv5-udp-port=40945 --rest-address=0.0.0.0 --nat=extip:172.18.191.83 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=974c1fa3a7e2bae3e6daf2df5853dcefa97beedfb0fac34978acdd747ac9fff3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40946 --metrics-logging=true --relay=true
2025-02-15 04:02:24.088 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.191.83 waku 1ae05021647b87ab5c9a7a25017b1a26738390be5477bc63b9e6394487b33aec
2025-02-15 04:02:24.137 DEBUG [src.node.docker_mananger] Container started with ID 1ae05021647b. Setting up logs at ./log/docker/node1_2025-02-15_04-02-21__16c64eab-bd45-44ce-92b9-affc0dfe970a__wakuorg_nwaku:latest.log
2025-02-15 04:02:24.139 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40942
2025-02-15 04:02:24.139 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:02:25.140 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40942/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:25.143 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:02:25.143 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:02:25.144 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40942/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:25.146 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.191.83/tcp/40943/p2p/16Uiu2HAmQqPmk8pq5hwZgSLmsncnvE7aM3UnFzjQrFtqjecQ3SsL","/ip4/172.18.191.83/tcp/40944/ws/p2p/16Uiu2HAmQqPmk8pq5hwZgSLmsncnvE7aM3UnFzjQrFtqjecQ3SsL"],"enrUri":"enr:-L24QPX8DRJjXGaEkTfa2LV0SmQkBccJKbSpJB3lPgQTdpd5Z59-Xscaipar3PtiJl8Azbh-vArNEbA49WGm7hSHmdkCgmlkgnY0gmlwhKwSv1OKbXVsdGlhZGRyc5YACASsEr9TBp_vAAoErBK_Uwaf8N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDtPaIvMbqsV_9FByYL7UIqpX2AqcRc5V5hbedf5ivt8uDdGNwgp_vg3VkcIKf8YV3YWt1MgE"}'
2025-02-15 04:02:25.146 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:02:25.147 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:02:25.147 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:02:25.148 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:02:25.148 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.50.238
2025-02-15 04:02:25.149 DEBUG [src.node.docker_mananger] Generated ports ['39796', '39797', '39798', '39799', '39800']
2025-02-15 04:02:25.149 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:02:25.149 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:02:25.149 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:02:25.149 DEBUG [src.node.docker_mananger] docker run -i -t -p 39796:39796 -p 39797:39797 -p 39798:39798 -p 39799:39799 -p 39800:39800 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39798 --rest-port=39796 --tcp-port=39797 --discv5-udp-port=39799 --rest-address=0.0.0.0 --nat=extip:172.18.50.238 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=59cdaca43da4e48990b9786fbe8aa6e7cbfda940af3c89780f2afefd6d0acdfe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39800 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QPX8DRJjXGaEkTfa2LV0SmQkBccJKbSpJB3lPgQTdpd5Z59-Xscaipar3PtiJl8Azbh-vArNEbA49WGm7hSHmdkCgmlkgnY0gmlwhKwSv1OKbXVsdGlhZGRyc5YACASsEr9TBp_vAAoErBK_Uwaf8N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDtPaIvMbqsV_9FByYL7UIqpX2AqcRc5V5hbedf5ivt8uDdGNwgp_vg3VkcIKf8YV3YWt1MgE
2025-02-15 04:02:25.387 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.50.238 waku 4b2264c5e6485e5c0eedc6d7b0eafd1ac77c90cf5c6f58d984a7f0b4b31b34f3
2025-02-15 04:02:25.440 DEBUG [src.node.docker_mananger] Container started with ID 4b2264c5e648. Setting up logs at ./log/docker/node2_2025-02-15_04-02-21__16c64eab-bd45-44ce-92b9-affc0dfe970a__wakuorg_nwaku:latest.log
2025-02-15 04:02:25.440 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 39796
2025-02-15 04:02:25.441 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:02:26.441 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39796/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:26.448 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:02:26.449 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:02:26.454 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39796/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:26.461 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.50.238/tcp/39797/p2p/16Uiu2HAmLNbATE7zfXzaqBJTKygP6v2msjY2rq2Vbg9YLpqWFD15","/ip4/172.18.50.238/tcp/39798/ws/p2p/16Uiu2HAmLNbATE7zfXzaqBJTKygP6v2msjY2rq2Vbg9YLpqWFD15"],"enrUri":"enr:-L24QFD3TYhQ7ppS4S3NJ1Ixz-FyAQX93Pz7r5LllDBE1lF7DptybOMy6wbB0L9KPAlcFnzATQSaqVyuYZOnp4LNLT0CgmlkgnY0gmlwhKwSMu6KbXVsdGlhZGRyc5YACASsEjLuBpt1AAoErBIy7gabdt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDcqn8KjIwbu2JBr3ye8Zg9Ta7cWmq_Tyf4uzEFaehHPSDdGNwgpt1g3VkcIKbd4V3YWt1MgM"}'
2025-02-15 04:02:26.461 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:02:26.462 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:02:26.462 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:02:26.465 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:02:26.465 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.83.170
2025-02-15 04:02:26.465 DEBUG [src.node.docker_mananger] Generated ports ['65157', '65158', '65159', '65160', '65161']
2025-02-15 04:02:26.465 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:02:26.465 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:02:26.465 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:02:26.465 DEBUG [src.node.docker_mananger] docker run -i -t -p 65157:65157 -p 65158:65158 -p 65159:65159 -p 65160:65160 -p 65161:65161 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65159 --rest-port=65157 --tcp-port=65158 --discv5-udp-port=65160 --rest-address=0.0.0.0 --nat=extip:172.18.83.170 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=939433e91b1a2c75b28d5ae3c1c671bfafd5eea16f044cf879e6423967bd42d9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65161 --metrics-logging=true --relay=false --storenode=/ip4/172.18.50.238/tcp/39797/p2p/16Uiu2HAmLNbATE7zfXzaqBJTKygP6v2msjY2rq2Vbg9YLpqWFD15 --discv5-bootstrap-node=enr:-L24QFD3TYhQ7ppS4S3NJ1Ixz-FyAQX93Pz7r5LllDBE1lF7DptybOMy6wbB0L9KPAlcFnzATQSaqVyuYZOnp4LNLT0CgmlkgnY0gmlwhKwSMu6KbXVsdGlhZGRyc5YACASsEjLuBpt1AAoErBIy7gabdt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDcqn8KjIwbu2JBr3ye8Zg9Ta7cWmq_Tyf4uzEFaehHPSDdGNwgpt1g3VkcIKbd4V3YWt1MgM
2025-02-15 04:02:26.719 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.83.170 waku f541c2af27732c8d93238b0b85e12caeeea7f9198db2cb60f03d478f5279c101
2025-02-15 04:02:26.772 DEBUG [src.node.docker_mananger] Container started with ID f541c2af2773. Setting up logs at ./log/docker/node3_2025-02-15_04-02-21__16c64eab-bd45-44ce-92b9-affc0dfe970a__wakuorg_nwaku:latest.log
2025-02-15 04:02:26.772 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 65157
2025-02-15 04:02:26.773 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:02:27.774 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65157/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:27.777 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:02:27.777 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:02:27.777 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65157/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:27.780 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.83.170/tcp/65158/p2p/16Uiu2HAm8Nx8k4ZTibKBWu3tNSVrbcywifDruYpr7ZLxXHwFPtr5","/ip4/172.18.83.170/tcp/65159/ws/p2p/16Uiu2HAm8Nx8k4ZTibKBWu3tNSVrbcywifDruYpr7ZLxXHwFPtr5"],"enrUri":"enr:-L24QNd6jBb4FhyuoK1q5DzDpxI9rV56aLh-DmRm7TUPKMEXFlvT9LWSev5NDU4dxtv5aB2hIUy26ES7Ty1ppPSD7s4CgmlkgnY0gmlwhKwSU6qKbXVsdGlhZGRyc5YACASsElOqBv6GAAoErBJTqgb-h90DgnJzhQADAQAAiXNlY3AyNTZrMaECwHV0Do9N6qiJafOdHSDjEN4ZAwQSEFI576FuKQghk1qDdGNwgv6Gg3VkcIL-iIV3YWt1MgA"}'
2025-02-15 04:02:27.780 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:02:27.780 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40942/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 04:02:27.785 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:02:27.785 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39796/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 04:02:27.790 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:02:27.791 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40942/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:27.794 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.50.238/tcp/39797/p2p/16Uiu2HAmLNbATE7zfXzaqBJTKygP6v2msjY2rq2Vbg9YLpqWFD15","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-15 04:02:27.795 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39796/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:27.797 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.191.83/tcp/40943/p2p/16Uiu2HAmQqPmk8pq5hwZgSLmsncnvE7aM3UnFzjQrFtqjecQ3SsL","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
2025-02-15 04:02:27.797 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-15 04:02:57.798 DEBUG [src.steps.store] Relaying message
2025-02-15 04:02:57.798 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:02:57.804 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:02:57.804 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 04:02:58.005 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-15 04:02:58.006 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65157/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:58.049 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"78ad2e6330a27144b9a8","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x52d0c90b68c7db9b7a73164ca5e41e9a7cba702d989d1633c77a67c2b2deb420"}]}'
2025-02-15 04:02:58.057 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:02:58.058 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:02:58.058 DEBUG [src.node.waku_node] Stopping container with id 1ae05021647b
2025-02-15 04:02:58.866 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:02:58.866 DEBUG [src.node.waku_node] Stopping container with id 4b2264c5e648
2025-02-15 04:02:59.680 ERROR [src.node.docker_mananger] Max retries reached for container 1ae05021647b. Exiting log stream.
2025-02-15 04:03:00.307 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:03:00.307 DEBUG [src.node.waku_node] Stopping container with id f541c2af2773
2025-02-15 04:03:01.123 ERROR [src.node.docker_mananger] Max retries reached for container 4b2264c5e648. Exiting log stream.
2025-02-15 04:03:01.739 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:03:01.741 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:03:01.750 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:03:01.763 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:03:01.767 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
