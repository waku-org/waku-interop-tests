2025-02-15 04:04:09.157 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:04:09.157 DEBUG [tests.conftest] Running test: test_publish_after_node1_restarts with id: 2025-02-15_04-04-09__3d80031b-a341-474d-9b47-b58cae2afce9
2025-02-15 04:04:09.158 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:04:09.158 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-15 04:04:09.158 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-15 04:04:09.164 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:04:09.164 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_04-04-09__3d80031b-a341-474d-9b47-b58cae2afce9__wakuorg_nwaku:latest.log
2025-02-15 04:04:09.165 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:04:09.165 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:04:09.166 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:04:09.166 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.68.145
2025-02-15 04:04:09.166 DEBUG [src.node.docker_mananger] Generated ports ['25305', '25306', '25307', '25308', '25309']
2025-02-15 04:04:09.167 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:04:09.167 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:04:09.167 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:04:09.167 DEBUG [src.node.docker_mananger] docker run -i -t -p 25305:25305 -p 25306:25306 -p 25307:25307 -p 25308:25308 -p 25309:25309 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25307 --rest-port=25305 --tcp-port=25306 --discv5-udp-port=25308 --rest-address=0.0.0.0 --nat=extip:172.18.68.145 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ca5fafb5ca382eeb7f0a2dafedd625afd7c8c1afcfee71aeb4d5be9bc094fcad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25309 --metrics-logging=true --relay=true
2025-02-15 04:04:09.390 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.68.145 waku b8ea4eb26119db654c4f555cbf2ed8a1e7667276d30e645ad2db3675a925425a
2025-02-15 04:04:09.441 DEBUG [src.node.docker_mananger] Container started with ID b8ea4eb26119. Setting up logs at ./log/docker/node1_2025-02-15_04-04-09__3d80031b-a341-474d-9b47-b58cae2afce9__wakuorg_nwaku:latest.log
2025-02-15 04:04:09.442 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 25305
2025-02-15 04:04:09.442 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:04:09.955 ERROR [src.node.docker_mananger] Max retries reached for container 567e32670e9d. Exiting log stream.
2025-02-15 04:04:10.442 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25305/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:10.445 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:04:10.445 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:04:10.446 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25305/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:10.448 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.68.145/tcp/25306/p2p/16Uiu2HAm3yU31dzncVY77JxmPWUASawYWsXSdW5hkdegaWhjVzUN","/ip4/172.18.68.145/tcp/25307/ws/p2p/16Uiu2HAm3yU31dzncVY77JxmPWUASawYWsXSdW5hkdegaWhjVzUN"],"enrUri":"enr:-L24QHNGFNmrSnHnpVPGUs_i8MiRqPZdv7ZNq0RzDiH_onaDdVhHlQc1iMxs3OlNZI3KyXx5B_cEWMNbC-xu3lgEEnUCgmlkgnY0gmlwhKwSRJGKbXVsdGlhZGRyc5YACASsEkSRBmLaAAoErBJEkQZi290DgnJzhQADAQAAiXNlY3AyNTZrMaECfwKTWmkuWksTA5Xydqg-OXYdGaXjCd31qnYjfCr_lfeDdGNwgmLag3VkcIJi3IV3YWt1MgE"}'
2025-02-15 04:04:10.448 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:04:10.454 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:04:10.454 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-15_04-04-09__3d80031b-a341-474d-9b47-b58cae2afce9__wakuorg_nwaku:latest.log
2025-02-15 04:04:10.454 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:04:10.454 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:04:10.456 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:04:10.456 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.5.218
2025-02-15 04:04:10.456 DEBUG [src.node.docker_mananger] Generated ports ['40703', '40704', '40705', '40706', '40707']
2025-02-15 04:04:10.456 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:04:10.456 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:04:10.456 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:04:10.457 DEBUG [src.node.docker_mananger] docker run -i -t -p 40703:40703 -p 40704:40704 -p 40705:40705 -p 40706:40706 -p 40707:40707 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40705 --rest-port=40703 --tcp-port=40704 --discv5-udp-port=40706 --rest-address=0.0.0.0 --nat=extip:172.18.5.218 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ebd9baefbaddf6f2cbb73e2f8e855102fb4977a0dc3af4f099e6da5cbb1aca2f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40707 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QHNGFNmrSnHnpVPGUs_i8MiRqPZdv7ZNq0RzDiH_onaDdVhHlQc1iMxs3OlNZI3KyXx5B_cEWMNbC-xu3lgEEnUCgmlkgnY0gmlwhKwSRJGKbXVsdGlhZGRyc5YACASsEkSRBmLaAAoErBJEkQZi290DgnJzhQADAQAAiXNlY3AyNTZrMaECfwKTWmkuWksTA5Xydqg-OXYdGaXjCd31qnYjfCr_lfeDdGNwgmLag3VkcIJi3IV3YWt1MgE
2025-02-15 04:04:10.685 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.5.218 waku c5b8ee8196fff8ab883e916659fb8b198d4ec90428fab0b54a55cf87bb3dddc6
2025-02-15 04:04:10.733 DEBUG [src.node.docker_mananger] Container started with ID c5b8ee8196ff. Setting up logs at ./log/docker/node2_2025-02-15_04-04-09__3d80031b-a341-474d-9b47-b58cae2afce9__wakuorg_nwaku:latest.log
2025-02-15 04:04:10.734 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40703
2025-02-15 04:04:10.735 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:04:11.735 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40703/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:11.746 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:04:11.747 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:04:11.747 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40703/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:11.750 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.5.218/tcp/40704/p2p/16Uiu2HAmM3YReQX2j4Pm4oML1otesc3Fp7fX19ft5Zc6T6J7Zuzi","/ip4/172.18.5.218/tcp/40705/ws/p2p/16Uiu2HAmM3YReQX2j4Pm4oML1otesc3Fp7fX19ft5Zc6T6J7Zuzi"],"enrUri":"enr:-L24QPdtAIM-AkGj0lHgwCN6otLFLq9dCAWLeCW2nB-gZ7a4PfKxlE93nDebJSLcx0-rn-PH9TQutdHxG5S-5RWz1sACgmlkgnY0gmlwhKwSBdqKbXVsdGlhZGRyc5YACASsEgXaBp8AAAoErBIF2gafAd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDfKSKZ5Jbp-lWPswiY1Dq3Q2fKPXckjvbsrA5xdchjqODdGNwgp8Ag3VkcIKfAoV3YWt1MgE"}'
2025-02-15 04:04:11.750 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:04:11.750 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40703/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.68.145/tcp/25306/p2p/16Uiu2HAm3yU31dzncVY77JxmPWUASawYWsXSdW5hkdegaWhjVzUN"]'
2025-02-15 04:04:11.753 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:11.753 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2025-02-15 04:04:11.754 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25305/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 04:04:11.758 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:11.758 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40703/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 04:04:11.764 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:11.764 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25305/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:11.770 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:11.770 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:04:11.871 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:11.871 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25305/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:11.874 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739592251764815872,"ephemeral":false}]'
2025-02-15 04:04:11.875 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:11.875 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:11.878 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739592251764815872,"ephemeral":false}]'
2025-02-15 04:04:11.879 INFO [src.steps.relay] WARM UP successful!!
2025-02-15 04:04:11.880 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25305/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:11.884 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:11.884 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:04:11.985 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:11.986 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25305/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:11.988 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739592251880318208,"ephemeral":false}]'
2025-02-15 04:04:11.990 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:11.990 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:11.992 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739592251880318208,"ephemeral":false}]'
2025-02-15 04:04:11.993 DEBUG [src.node.waku_node] Restarting container with id b8ea4eb26119
2025-02-15 04:04:13.184 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25305/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:13.287 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25305/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:13.290 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:04:13.291 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:04:13.291 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25305/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:13.293 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.68.145/tcp/25306/p2p/16Uiu2HAm3yU31dzncVY77JxmPWUASawYWsXSdW5hkdegaWhjVzUN","/ip4/172.18.68.145/tcp/25307/ws/p2p/16Uiu2HAm3yU31dzncVY77JxmPWUASawYWsXSdW5hkdegaWhjVzUN"],"enrUri":"enr:-L24QHNGFNmrSnHnpVPGUs_i8MiRqPZdv7ZNq0RzDiH_onaDdVhHlQc1iMxs3OlNZI3KyXx5B_cEWMNbC-xu3lgEEnUCgmlkgnY0gmlwhKwSRJGKbXVsdGlhZGRyc5YACASsEkSRBmLaAAoErBJEkQZi290DgnJzhQADAQAAiXNlY3AyNTZrMaECfwKTWmkuWksTA5Xydqg-OXYdGaXjCd31qnYjfCr_lfeDdGNwgmLag3VkcIJi3IV3YWt1MgE"}'
2025-02-15 04:04:13.293 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:04:13.294 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25305/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 04:04:13.312 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:13.312 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40703/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 04:04:13.314 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:13.315 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25305/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:13.317 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:13.318 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:04:13.418 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:13.418 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25305/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:13.421 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739592253315223296,"ephemeral":false}]'
2025-02-15 04:04:13.423 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:13.423 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:13.425 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-15 04:04:14.426 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25305/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 04:04:14.429 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:14.429 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40703/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 04:04:14.431 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:14.432 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25305/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:14.434 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:14.435 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:04:14.535 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:14.535 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25305/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:14.538 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739592254432095744,"ephemeral":false}]'
2025-02-15 04:04:14.540 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:14.540 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:14.542 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-15 04:04:15.543 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25305/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 04:04:15.546 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:15.546 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40703/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 04:04:15.548 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:15.549 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25305/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:15.552 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:15.552 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:04:15.652 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:15.652 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25305/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:15.655 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739592255549394176,"ephemeral":false}]'
2025-02-15 04:04:15.657 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:15.657 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:15.659 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-15 04:04:16.660 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25305/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 04:04:16.663 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:16.664 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40703/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 04:04:16.666 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:16.666 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25305/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:16.669 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:16.669 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:04:16.769 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:16.770 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25305/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:16.772 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739592256666821376,"ephemeral":false}]'
2025-02-15 04:04:16.774 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:16.774 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:16.776 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-15 04:04:17.777 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25305/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 04:04:17.780 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:17.780 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40703/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 04:04:17.783 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:17.783 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25305/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:17.789 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:17.789 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:04:17.889 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:17.889 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25305/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:17.892 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739592257783707392,"ephemeral":false}]'
2025-02-15 04:04:17.894 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:17.894 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:17.896 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739592257783707392,"ephemeral":false}]'
2025-02-15 04:04:17.900 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:04:17.900 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:04:17.901 DEBUG [src.node.waku_node] Stopping container with id b8ea4eb26119
2025-02-15 04:04:18.729 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:04:18.730 DEBUG [src.node.waku_node] Stopping container with id c5b8ee8196ff
2025-02-15 04:04:19.506 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:04:19.508 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:04:19.528 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:04:19.537 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
