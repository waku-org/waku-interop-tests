2025-02-15 04:06:05.914 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:06:05.915 DEBUG [tests.conftest] Running test: test_main_node_only_lightpush__peer_only_filter with id: 2025-02-15_04-06-05__ee6b1dee-ffd4-4359-b36d-bb6792f9b32a
2025-02-15 04:06:05.915 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:06:05.915 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-15 04:06:05.922 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:06:05.922 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-15_04-06-05__ee6b1dee-ffd4-4359-b36d-bb6792f9b32a__wakuorg_nwaku:latest.log
2025-02-15 04:06:05.922 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:06:05.922 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:06:05.923 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:06:05.923 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.21.182
2025-02-15 04:06:05.923 DEBUG [src.node.docker_mananger] Generated ports ['54006', '54007', '54008', '54009', '54010']
2025-02-15 04:06:05.924 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:06:05.924 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:06:05.924 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:06:05.924 DEBUG [src.node.docker_mananger] docker run -i -t -p 54006:54006 -p 54007:54007 -p 54008:54008 -p 54009:54009 -p 54010:54010 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54008 --rest-port=54006 --tcp-port=54007 --discv5-udp-port=54009 --rest-address=0.0.0.0 --nat=extip:172.18.21.182 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f14eadce2558ccccaf0ed1fd5b95fd379bc9265a945a8b86a95bc31e2dc19f2b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54010 --metrics-logging=true --lightpush=false --relay=false --filter=true
2025-02-15 04:06:06.154 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.21.182 waku 485b053e0c99b9741f616484aaecf2f9eb1ee89458cc04e4426c2897a9730d9d
2025-02-15 04:06:06.201 DEBUG [src.node.docker_mananger] Container started with ID 485b053e0c99. Setting up logs at ./log/docker/receiving_node1_2025-02-15_04-06-05__ee6b1dee-ffd4-4359-b36d-bb6792f9b32a__wakuorg_nwaku:latest.log
2025-02-15 04:06:06.203 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 54006
2025-02-15 04:06:06.203 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:06:06.710 ERROR [src.node.docker_mananger] Max retries reached for container fc9c306eca2d. Exiting log stream.
2025-02-15 04:06:07.203 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54006/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:06:07.206 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:06:07.206 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:06:07.207 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54006/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:06:07.209 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.21.182/tcp/54007/p2p/16Uiu2HAm11swx4VPBywZAhyV75nwEP39WfK6JNasdHFtvQetuWZn","/ip4/172.18.21.182/tcp/54008/ws/p2p/16Uiu2HAm11swx4VPBywZAhyV75nwEP39WfK6JNasdHFtvQetuWZn"],"enrUri":"enr:-L24QMIWQvirpGgTUIQ80hnpnoYnCsIituAsYyubZXryqkkhPIhji9ApsMxUwAFY1E0WTP3Xr2LmoeRyZplENqA-_JgCgmlkgnY0gmlwhKwSFbaKbXVsdGlhZGRyc5YACASsEhW2BtL3AAoErBIVtgbS-N0DgnJzhQADAQAAiXNlY3AyNTZrMaECUw228xn6EwwTagvGwnFQYqh5_kit3P8La77kdKoYajGDdGNwgtL3g3VkcILS-YV3YWt1MgQ"}'
2025-02-15 04:06:07.209 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:06:07.215 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:06:07.215 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-15_04-06-05__ee6b1dee-ffd4-4359-b36d-bb6792f9b32a__wakuorg_nwaku:latest.log
2025-02-15 04:06:07.215 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:06:07.215 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:06:07.217 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:06:07.217 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.37.220
2025-02-15 04:06:07.217 DEBUG [src.node.docker_mananger] Generated ports ['30192', '30193', '30194', '30195', '30196']
2025-02-15 04:06:07.217 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:06:07.217 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:06:07.217 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:06:07.217 DEBUG [src.node.docker_mananger] docker run -i -t -p 30192:30192 -p 30193:30193 -p 30194:30194 -p 30195:30195 -p 30196:30196 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30194 --rest-port=30192 --tcp-port=30193 --discv5-udp-port=30195 --rest-address=0.0.0.0 --nat=extip:172.18.37.220 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=404bafade012e0adeddf98e9f6979ec1ba9bd8db729135af6c2aeaa93e21bdea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30196 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMIWQvirpGgTUIQ80hnpnoYnCsIituAsYyubZXryqkkhPIhji9ApsMxUwAFY1E0WTP3Xr2LmoeRyZplENqA-_JgCgmlkgnY0gmlwhKwSFbaKbXVsdGlhZGRyc5YACASsEhW2BtL3AAoErBIVtgbS-N0DgnJzhQADAQAAiXNlY3AyNTZrMaECUw228xn6EwwTagvGwnFQYqh5_kit3P8La77kdKoYajGDdGNwgtL3g3VkcILS-YV3YWt1MgQ --lightpushnode=/ip4/172.18.21.182/tcp/54007/p2p/16Uiu2HAm11swx4VPBywZAhyV75nwEP39WfK6JNasdHFtvQetuWZn --lightpush=true --relay=false
2025-02-15 04:06:07.454 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.37.220 waku 7dbc12883c6d9f39cd4471752699889cfa144090ce32fdca8d2ae21046014b14
2025-02-15 04:06:07.502 DEBUG [src.node.docker_mananger] Container started with ID 7dbc12883c6d. Setting up logs at ./log/docker/lightpush_node1_2025-02-15_04-06-05__ee6b1dee-ffd4-4359-b36d-bb6792f9b32a__wakuorg_nwaku:latest.log
2025-02-15 04:06:07.503 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 30192
2025-02-15 04:06:07.503 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:06:08.503 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30192/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:06:08.506 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:06:08.506 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:06:08.506 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30192/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:06:08.508 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.37.220/tcp/30193/p2p/16Uiu2HAkuuG7NxDZsdTm1Dx1JeRLmu2SNDkuMCBdQuPDyTH1HEz3","/ip4/172.18.37.220/tcp/30194/ws/p2p/16Uiu2HAkuuG7NxDZsdTm1Dx1JeRLmu2SNDkuMCBdQuPDyTH1HEz3"],"enrUri":"enr:-L24QNZpGFNIoOEHHjkOlHNTI0n6HFk7DSphUn-2nNf6sQ5hTZf9C7mWtFFHUDyVcUPCpwbbzAREozjZatsxUR24XxUCgmlkgnY0gmlwhKwSJdyKbXVsdGlhZGRyc5YACASsEiXcBnXxAAoErBIl3AZ18t0DgnJzhQADAQAAiXNlY3AyNTZrMaECBxFGDgefhvpm6KV9L0I3T0mN9QjKFgJM3_ogW1eIEsCDdGNwgnXxg3VkcIJ184V3YWt1Mgg"}'
2025-02-15 04:06:08.509 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:06:08.509 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30192/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.21.182/tcp/54007/p2p/16Uiu2HAm11swx4VPBywZAhyV75nwEP39WfK6JNasdHFtvQetuWZn"]'
2025-02-15 04:06:08.543 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:06:08.544 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30192/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739592368543968256}}'
2025-02-15 04:06:08.568 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:30192/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2025-02-15 04:06:08.570 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:06:08.571 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:06:08.571 DEBUG [src.node.waku_node] Stopping container with id 485b053e0c99
2025-02-15 04:06:09.699 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:06:09.700 DEBUG [src.node.waku_node] Stopping container with id 7dbc12883c6d
2025-02-15 04:06:10.510 ERROR [src.node.docker_mananger] Max retries reached for container 485b053e0c99. Exiting log stream.
2025-02-15 04:06:10.913 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:06:10.914 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:06:10.918 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:06:10.921 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
