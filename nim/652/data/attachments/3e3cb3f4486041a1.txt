2025-02-15 04:04:28.467 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:04:28.468 DEBUG [tests.conftest] Running test: test_publish_on_multiple_content_topics_and_only_after_fetch_them[content_topic_list0] with id: 2025-02-15_04-04-28__fe6c3baa-5f8c-4cac-b6d2-d8c884b92114
2025-02-15 04:04:28.468 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:04:28.468 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-15 04:04:28.468 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-15 04:04:28.475 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:04:28.475 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_04-04-28__fe6c3baa-5f8c-4cac-b6d2-d8c884b92114__wakuorg_nwaku:latest.log
2025-02-15 04:04:28.475 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:04:28.475 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:04:28.477 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:04:28.477 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.136.163
2025-02-15 04:04:28.477 DEBUG [src.node.docker_mananger] Generated ports ['4629', '4630', '4631', '4632', '4633']
2025-02-15 04:04:28.477 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:04:28.477 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:04:28.478 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:04:28.478 DEBUG [src.node.docker_mananger] docker run -i -t -p 4629:4629 -p 4630:4630 -p 4631:4631 -p 4632:4632 -p 4633:4633 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4631 --rest-port=4629 --tcp-port=4630 --discv5-udp-port=4632 --rest-address=0.0.0.0 --nat=extip:172.18.136.163 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=aa7604aecaee8df7ca0b0c0dea8ddd7c1a7a4f8cfcad551edfd635190ea9f4da --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4633 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2025-02-15 04:04:28.705 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.136.163 waku bac6fa4490b0b82feabfc2b5efa867a3d13eb7ca8095dce91f4390112f1ff358
2025-02-15 04:04:28.758 DEBUG [src.node.docker_mananger] Container started with ID bac6fa4490b0. Setting up logs at ./log/docker/node1_2025-02-15_04-04-28__fe6c3baa-5f8c-4cac-b6d2-d8c884b92114__wakuorg_nwaku:latest.log
2025-02-15 04:04:28.758 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 4629
2025-02-15 04:04:28.758 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:04:29.269 ERROR [src.node.docker_mananger] Max retries reached for container 93ec9ae58c9b. Exiting log stream.
2025-02-15 04:04:29.759 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4629/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:29.762 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:04:29.762 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:04:29.762 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4629/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:29.764 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.163/tcp/4630/p2p/16Uiu2HAmSekgmyH8oEEVTiGUoxeMQcM1CJb8eNiPecSq8qLom3dF","/ip4/172.18.136.163/tcp/4631/ws/p2p/16Uiu2HAmSekgmyH8oEEVTiGUoxeMQcM1CJb8eNiPecSq8qLom3dF"],"enrUri":"enr:-L24QLF5GdJq1bpqjiveRJOmp1XA-wM7LQfyAXgdcSvlAjl-YhDMvYqAWvfBwolCvfByEa0x6qkrkjJFNJoptEGbqN8CgmlkgnY0gmlwhKwSiKOKbXVsdGlhZGRyc5YACASsEoijBhIWAAoErBKIowYSF90DgnJzhQACAQAAiXNlY3AyNTZrMaEDz_QqwJ0h3ornIPOUgjvGRpq592MK4YbTC3dm92aOGJ6DdGNwghIWg3VkcIISGIV3YWt1MgU"}'
2025-02-15 04:04:29.764 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:04:29.771 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:04:29.771 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-15_04-04-28__fe6c3baa-5f8c-4cac-b6d2-d8c884b92114__wakuorg_nwaku:latest.log
2025-02-15 04:04:29.771 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:04:29.771 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:04:29.772 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:04:29.773 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.252.194
2025-02-15 04:04:29.773 DEBUG [src.node.docker_mananger] Generated ports ['16922', '16923', '16924', '16925', '16926']
2025-02-15 04:04:29.773 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:04:29.773 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:04:29.773 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:04:29.773 DEBUG [src.node.docker_mananger] docker run -i -t -p 16922:16922 -p 16923:16923 -p 16924:16924 -p 16925:16925 -p 16926:16926 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16924 --rest-port=16922 --tcp-port=16923 --discv5-udp-port=16925 --rest-address=0.0.0.0 --nat=extip:172.18.252.194 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=bafae37ff5a602e21cdcf3f2cdbdace339fda9c3feacba7d6fc5ba99b49d7fe6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16926 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QLF5GdJq1bpqjiveRJOmp1XA-wM7LQfyAXgdcSvlAjl-YhDMvYqAWvfBwolCvfByEa0x6qkrkjJFNJoptEGbqN8CgmlkgnY0gmlwhKwSiKOKbXVsdGlhZGRyc5YACASsEoijBhIWAAoErBKIowYSF90DgnJzhQACAQAAiXNlY3AyNTZrMaEDz_QqwJ0h3ornIPOUgjvGRpq592MK4YbTC3dm92aOGJ6DdGNwghIWg3VkcIISGIV3YWt1MgU --content-topic=/myapp/1/latest/proto
2025-02-15 04:04:29.996 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.252.194 waku d40fc037214212634becf4e66b39e89ba4047c59567f33bcc4563580cf72283e
2025-02-15 04:04:30.047 DEBUG [src.node.docker_mananger] Container started with ID d40fc0372142. Setting up logs at ./log/docker/node2_2025-02-15_04-04-28__fe6c3baa-5f8c-4cac-b6d2-d8c884b92114__wakuorg_nwaku:latest.log
2025-02-15 04:04:30.047 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 16922
2025-02-15 04:04:30.047 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:04:31.048 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16922/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:31.056 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:04:31.057 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:04:31.058 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16922/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:31.066 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.252.194/tcp/16923/p2p/16Uiu2HAmLGQLRFeRcM3jtsmK8GZYuk3bXjDEhEUMm8HDVDAjqWXF","/ip4/172.18.252.194/tcp/16924/ws/p2p/16Uiu2HAmLGQLRFeRcM3jtsmK8GZYuk3bXjDEhEUMm8HDVDAjqWXF"],"enrUri":"enr:-L24QF-Pm0jW4ehCs7zMcVFrg-dtOp6eO3EAC2jTwgNpfm57MMJP9cHmff3oPUTW1fwuxw-nXKiNsr9Urb1W5fHGWXkCgmlkgnY0gmlwhKwS_MKKbXVsdGlhZGRyc5YACASsEvzCBkIbAAoErBL8wgZCHN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDcRRBt8Nf-O_YUD7S4sa-u6OSl43UBW0ZBufJZ06ZC66DdGNwgkIbg3VkcIJCHYV3YWt1MgE"}'
2025-02-15 04:04:31.066 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:04:31.066 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16922/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.136.163/tcp/4630/p2p/16Uiu2HAmSekgmyH8oEEVTiGUoxeMQcM1CJb8eNiPecSq8qLom3dF"]'
2025-02-15 04:04:31.069 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:31.070 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4629/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/newsService/1.0/weekly/protobuf", "/newsService/1.0/alerts/xml", "/newsService/1.0/updates/json", "/newsService/2.0/alerts/json", "/newsService/2.0/summaries/xml", "/newsService/2.0/highlights/yaml", "/newsService/3.0/weekly/json", "/newsService/3.0/summaries/xml"]'
2025-02-15 04:04:31.076 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:31.077 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16922/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/newsService/1.0/weekly/protobuf", "/newsService/1.0/alerts/xml", "/newsService/1.0/updates/json", "/newsService/2.0/alerts/json", "/newsService/2.0/summaries/xml", "/newsService/2.0/highlights/yaml", "/newsService/3.0/weekly/json", "/newsService/3.0/summaries/xml"]'
2025-02-15 04:04:31.086 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:31.089 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4629/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzEuMC93ZWVrbHkvcHJvdG9idWY=", "contentTopic": "/newsService/1.0/weekly/protobuf", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:31.096 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:31.097 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4629/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzEuMC9hbGVydHMveG1s", "contentTopic": "/newsService/1.0/alerts/xml", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:31.102 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:31.103 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4629/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzEuMC91cGRhdGVzL2pzb24=", "contentTopic": "/newsService/1.0/updates/json", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:31.108 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:31.109 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4629/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzIuMC9hbGVydHMvanNvbg==", "contentTopic": "/newsService/2.0/alerts/json", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:31.114 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:31.115 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4629/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzIuMC9zdW1tYXJpZXMveG1s", "contentTopic": "/newsService/2.0/summaries/xml", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:31.120 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:31.121 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4629/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzIuMC9oaWdobGlnaHRzL3lhbWw=", "contentTopic": "/newsService/2.0/highlights/yaml", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:31.126 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:31.126 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4629/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzMuMC93ZWVrbHkvanNvbg==", "contentTopic": "/newsService/3.0/weekly/json", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:31.133 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:31.134 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4629/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzMuMC9zdW1tYXJpZXMveG1s", "contentTopic": "/newsService/3.0/summaries/xml", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:31.139 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:31.139 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:04:31.240 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16922/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:31.242 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzEuMC93ZWVrbHkvcHJvdG9idWY=","contentTopic":"/newsService/1.0/weekly/protobuf","version":0,"timestamp":1739592271088822016,"ephemeral":false}]'
2025-02-15 04:04:31.242 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16922/relay/v1/auto/messages/%2FnewsService%2F1.0%2Falerts%2Fxml" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:31.245 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzEuMC9hbGVydHMveG1s","contentTopic":"/newsService/1.0/alerts/xml","version":0,"timestamp":1739592271096837120,"ephemeral":false}]'
2025-02-15 04:04:31.245 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16922/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fupdates%2Fjson" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:31.247 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzEuMC91cGRhdGVzL2pzb24=","contentTopic":"/newsService/1.0/updates/json","version":0,"timestamp":1739592271103351296,"ephemeral":false}]'
2025-02-15 04:04:31.248 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16922/relay/v1/auto/messages/%2FnewsService%2F2.0%2Falerts%2Fjson" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:31.250 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzIuMC9hbGVydHMvanNvbg==","contentTopic":"/newsService/2.0/alerts/json","version":0,"timestamp":1739592271109268224,"ephemeral":false}]'
2025-02-15 04:04:31.250 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16922/relay/v1/auto/messages/%2FnewsService%2F2.0%2Fsummaries%2Fxml" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:31.253 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzIuMC9zdW1tYXJpZXMveG1s","contentTopic":"/newsService/2.0/summaries/xml","version":0,"timestamp":1739592271115197952,"ephemeral":false}]'
2025-02-15 04:04:31.253 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16922/relay/v1/auto/messages/%2FnewsService%2F2.0%2Fhighlights%2Fyaml" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:31.255 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzIuMC9oaWdobGlnaHRzL3lhbWw=","contentTopic":"/newsService/2.0/highlights/yaml","version":0,"timestamp":1739592271121288448,"ephemeral":false}]'
2025-02-15 04:04:31.256 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16922/relay/v1/auto/messages/%2FnewsService%2F3.0%2Fweekly%2Fjson" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:31.257 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzMuMC93ZWVrbHkvanNvbg==","contentTopic":"/newsService/3.0/weekly/json","version":0,"timestamp":1739592271126532352,"ephemeral":false}]'
2025-02-15 04:04:31.258 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16922/relay/v1/auto/messages/%2FnewsService%2F3.0%2Fsummaries%2Fxml" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:31.260 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzMuMC9zdW1tYXJpZXMveG1s","contentTopic":"/newsService/3.0/summaries/xml","version":0,"timestamp":1739592271134267392,"ephemeral":false}]'
2025-02-15 04:04:31.262 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:04:31.263 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:04:31.263 DEBUG [src.node.waku_node] Stopping container with id bac6fa4490b0
2025-02-15 04:04:32.374 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:04:32.374 DEBUG [src.node.waku_node] Stopping container with id d40fc0372142
2025-02-15 04:04:33.186 ERROR [src.node.docker_mananger] Max retries reached for container bac6fa4490b0. Exiting log stream.
2025-02-15 04:04:33.868 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:04:33.871 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:04:33.878 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:04:33.886 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
