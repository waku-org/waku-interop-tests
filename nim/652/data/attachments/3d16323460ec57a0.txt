2025-02-15 04:08:36.064 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:08:36.064 DEBUG [tests.conftest] Running test: test_relay_no_subscription with id: 2025-02-15_04-08-36__619a849e-29aa-4ac2-80cf-c8668823e56e
2025-02-15 04:08:36.064 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:08:36.065 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-15 04:08:36.065 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-15 04:08:36.072 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:08:36.072 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_04-08-36__619a849e-29aa-4ac2-80cf-c8668823e56e__wakuorg_nwaku:latest.log
2025-02-15 04:08:36.072 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:08:36.072 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:08:36.074 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:08:36.074 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.177.162
2025-02-15 04:08:36.074 DEBUG [src.node.docker_mananger] Generated ports ['28686', '28687', '28688', '28689', '28690']
2025-02-15 04:08:36.075 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:08:36.075 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:08:36.075 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:08:36.075 DEBUG [src.node.docker_mananger] docker run -i -t -p 28686:28686 -p 28687:28687 -p 28688:28688 -p 28689:28689 -p 28690:28690 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28688 --rest-port=28686 --tcp-port=28687 --discv5-udp-port=28689 --rest-address=0.0.0.0 --nat=extip:172.18.177.162 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=62bbf5cb855a8b32fce56fca1658c24eea71f10a845ebcb3fa12b6fbdefc9eb7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28690 --metrics-logging=true --relay=true
2025-02-15 04:08:36.319 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.177.162 waku cf8083ec6ca977fbddf83f1866fbe4d768365261ec182f3be65c6c88517e4369
2025-02-15 04:08:36.368 DEBUG [src.node.docker_mananger] Container started with ID cf8083ec6ca9. Setting up logs at ./log/docker/node1_2025-02-15_04-08-36__619a849e-29aa-4ac2-80cf-c8668823e56e__wakuorg_nwaku:latest.log
2025-02-15 04:08:36.370 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28686
2025-02-15 04:08:36.370 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:08:36.842 ERROR [src.node.docker_mananger] Max retries reached for container 7e3299c58c6e. Exiting log stream.
2025-02-15 04:08:37.371 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28686/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:37.374 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:08:37.375 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:08:37.375 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28686/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:37.377 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.177.162/tcp/28687/p2p/16Uiu2HAkvvmo4ARbJJQ9scyNLgTgS2okMQbZScrxjfiPomgCpU7r","/ip4/172.18.177.162/tcp/28688/ws/p2p/16Uiu2HAkvvmo4ARbJJQ9scyNLgTgS2okMQbZScrxjfiPomgCpU7r"],"enrUri":"enr:-L24QBLe91fifk7hZEtAJP4qmhIjWGvRgjTLncBzXrcAU4kcO1nuHVWysS1oo2xqX9yQmS2i4R_ZeRt84DaYZ22MO7cCgmlkgnY0gmlwhKwSsaKKbXVsdGlhZGRyc5YACASsErGiBnAPAAoErBKxogZwEN0DgnJzhQADAQAAiXNlY3AyNTZrMaECFlAa8xStCv9VJ58pRvfahm7_Xtx817sf6fK9XFgousGDdGNwgnAPg3VkcIJwEYV3YWt1MgE"}'
2025-02-15 04:08:37.377 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:08:37.384 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:08:37.384 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-15_04-08-36__619a849e-29aa-4ac2-80cf-c8668823e56e__wakuorg_nwaku:latest.log
2025-02-15 04:08:37.384 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:08:37.385 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:08:37.386 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:08:37.386 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.186.134
2025-02-15 04:08:37.386 DEBUG [src.node.docker_mananger] Generated ports ['1853', '1854', '1855', '1856', '1857']
2025-02-15 04:08:37.386 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:08:37.387 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:08:37.387 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:08:37.387 DEBUG [src.node.docker_mananger] docker run -i -t -p 1853:1853 -p 1854:1854 -p 1855:1855 -p 1856:1856 -p 1857:1857 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1855 --rest-port=1853 --tcp-port=1854 --discv5-udp-port=1856 --rest-address=0.0.0.0 --nat=extip:172.18.186.134 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=af9ea736ed0983dece0814d3bc1aced1285c4ef58d41cb7b65fcceef0edcab5e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1857 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QBLe91fifk7hZEtAJP4qmhIjWGvRgjTLncBzXrcAU4kcO1nuHVWysS1oo2xqX9yQmS2i4R_ZeRt84DaYZ22MO7cCgmlkgnY0gmlwhKwSsaKKbXVsdGlhZGRyc5YACASsErGiBnAPAAoErBKxogZwEN0DgnJzhQADAQAAiXNlY3AyNTZrMaECFlAa8xStCv9VJ58pRvfahm7_Xtx817sf6fK9XFgousGDdGNwgnAPg3VkcIJwEYV3YWt1MgE
2025-02-15 04:08:37.626 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.186.134 waku 6d2e0454ce9445a2513784c112f10d238626089f12d872fa93300b18d22c8ba4
2025-02-15 04:08:37.674 DEBUG [src.node.docker_mananger] Container started with ID 6d2e0454ce94. Setting up logs at ./log/docker/node2_2025-02-15_04-08-36__619a849e-29aa-4ac2-80cf-c8668823e56e__wakuorg_nwaku:latest.log
2025-02-15 04:08:37.675 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 1853
2025-02-15 04:08:37.675 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:08:38.676 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1853/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:38.691 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:08:38.693 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:08:38.694 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1853/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:38.698 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.186.134/tcp/1854/p2p/16Uiu2HAm3fFFgkfSztVozyyzQNCdiuBDABRjW8QKg1u466jxmtuj","/ip4/172.18.186.134/tcp/1855/ws/p2p/16Uiu2HAm3fFFgkfSztVozyyzQNCdiuBDABRjW8QKg1u466jxmtuj"],"enrUri":"enr:-L24QGqU5D-ceUULrens_W8jffb4oBWWr_R8KqjuEwo8WGAFbsEFFXGva4IIVupLTvIGpr2lBHArd8AKNB2B_OitkiYCgmlkgnY0gmlwhKwSuoaKbXVsdGlhZGRyc5YACASsErqGBgc-AAoErBK6hgYHP90DgnJzhQADAQAAiXNlY3AyNTZrMaECelerQeH9jUIIM8BSvcX-tFjXPOsW0hStHcXwjtsyOm6DdGNwggc-g3VkcIIHQIV3YWt1MgE"}'
2025-02-15 04:08:38.699 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:08:38.699 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1853/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.177.162/tcp/28687/p2p/16Uiu2HAkvvmo4ARbJJQ9scyNLgTgS2okMQbZScrxjfiPomgCpU7r"]'
2025-02-15 04:08:38.706 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:38.708 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28686/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:08:38.711 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28686/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/3/1'
2025-02-15 04:08:38.712 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:08:38.713 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:08:38.713 DEBUG [src.node.waku_node] Stopping container with id cf8083ec6ca9
2025-02-15 04:08:39.671 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:08:39.672 DEBUG [src.node.waku_node] Stopping container with id 6d2e0454ce94
2025-02-15 04:08:40.485 ERROR [src.node.docker_mananger] Max retries reached for container cf8083ec6ca9. Exiting log stream.
2025-02-15 04:08:41.204 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:08:41.205 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:08:41.210 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:08:41.215 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
