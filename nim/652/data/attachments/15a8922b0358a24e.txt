2025-02-15 04:03:51.260 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:03:51.260 DEBUG [tests.conftest] Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2025-02-15_04-03-51__ff67bbe2-39e9-4d86-9edf-a5ce1c8c064b
2025-02-15 04:03:51.260 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:03:51.261 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-15 04:03:51.267 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:03:51.267 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-15_04-03-51__ff67bbe2-39e9-4d86-9edf-a5ce1c8c064b__wakuorg_nwaku:latest.log
2025-02-15 04:03:51.267 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:03:51.268 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:03:51.269 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:03:51.269 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.162.93
2025-02-15 04:03:51.269 DEBUG [src.node.docker_mananger] Generated ports ['16584', '16585', '16586', '16587', '16588']
2025-02-15 04:03:51.269 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:03:51.269 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:03:51.270 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:03:51.270 DEBUG [src.node.docker_mananger] docker run -i -t -p 16584:16584 -p 16585:16585 -p 16586:16586 -p 16587:16587 -p 16588:16588 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16586 --rest-port=16584 --tcp-port=16585 --discv5-udp-port=16587 --rest-address=0.0.0.0 --nat=extip:172.18.162.93 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b37d5e4bd5afd6e4d0ec7e70d63ba276a8e8beea9abd1d829b09f8bedbab7e6f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16588 --metrics-logging=true --lightpush=true --relay=true
2025-02-15 04:03:51.494 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.162.93 waku fb327fb40861815c115b0857fc33c5fe1eea704b7d844531557f18fed3754807
2025-02-15 04:03:51.541 DEBUG [src.node.docker_mananger] Container started with ID fb327fb40861. Setting up logs at ./log/docker/receiving_node1_2025-02-15_04-03-51__ff67bbe2-39e9-4d86-9edf-a5ce1c8c064b__wakuorg_nwaku:latest.log
2025-02-15 04:03:51.542 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 16584
2025-02-15 04:03:51.542 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:03:52.061 ERROR [src.node.docker_mananger] Max retries reached for container 587a1e83e557. Exiting log stream.
2025-02-15 04:03:52.542 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16584/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:52.545 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:03:52.545 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:03:52.545 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16584/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:52.548 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.162.93/tcp/16585/p2p/16Uiu2HAmVStMVHg3MBvokvtAAR9ZsYXo6QebR6SjmxhHZBmx8yQx","/ip4/172.18.162.93/tcp/16586/ws/p2p/16Uiu2HAmVStMVHg3MBvokvtAAR9ZsYXo6QebR6SjmxhHZBmx8yQx"],"enrUri":"enr:-L24QDYI-cdzSluoomm_xjXguBkY3chuVjxGqHbiVbymoWg6ST2G75zwrS7Ojvjh2ecfr-TWce1_-X0PlaKmQ9GzMN8CgmlkgnY0gmlwhKwSol2KbXVsdGlhZGRyc5YACASsEqJdBkDJAAoErBKiXQZAyt0DgnJzhQADAQAAiXNlY3AyNTZrMaED-XztfRtIwgkQJx7yVNE7NL8G-hp7LewyTFdPkVQFrNWDdGNwgkDJg3VkcIJAy4V3YWt1Mgk"}'
2025-02-15 04:03:52.548 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:03:52.554 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:03:52.555 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-15_04-03-51__ff67bbe2-39e9-4d86-9edf-a5ce1c8c064b__wakuorg_nwaku:latest.log
2025-02-15 04:03:52.555 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:03:52.555 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:03:52.556 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:03:52.556 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.163.0
2025-02-15 04:03:52.556 DEBUG [src.node.docker_mananger] Generated ports ['50125', '50126', '50127', '50128', '50129']
2025-02-15 04:03:52.557 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:03:52.557 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:03:52.557 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:03:52.557 DEBUG [src.node.docker_mananger] docker run -i -t -p 50125:50125 -p 50126:50126 -p 50127:50127 -p 50128:50128 -p 50129:50129 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50127 --rest-port=50125 --tcp-port=50126 --discv5-udp-port=50128 --rest-address=0.0.0.0 --nat=extip:172.18.163.0 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fbaab50f6d8e18babd1eaa2dceecddd148bc1f4fb12c0b2c0da5eabecce575df --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50129 --metrics-logging=true --lightpush=false --relay=true
2025-02-15 04:03:52.795 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.163.0 waku d03a2ec613719eeb71559449220c9dcd2c42fcfa91ddd6318cda0ac6a85fe82a
2025-02-15 04:03:52.846 DEBUG [src.node.docker_mananger] Container started with ID d03a2ec61371. Setting up logs at ./log/docker/receiving_node2_2025-02-15_04-03-51__ff67bbe2-39e9-4d86-9edf-a5ce1c8c064b__wakuorg_nwaku:latest.log
2025-02-15 04:03:52.846 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 50125
2025-02-15 04:03:52.847 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:03:53.847 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50125/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:53.850 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:03:53.850 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:03:53.850 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50125/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:53.852 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.163.0/tcp/50126/p2p/16Uiu2HAmJjwqm9ymx14P9BgAYE5teeBjC8izerTn9TDwHPgCpdUa","/ip4/172.18.163.0/tcp/50127/ws/p2p/16Uiu2HAmJjwqm9ymx14P9BgAYE5teeBjC8izerTn9TDwHPgCpdUa"],"enrUri":"enr:-L24QKolRLylAYnmQjv2Nwte2AhjMSD14ZO2rvBVYF35MD-EU6rR0VmiTSIKVnQlZLZqzmKKUQwjAj0ZIpgNIub8h-0CgmlkgnY0gmlwhKwSowCKbXVsdGlhZGRyc5YACASsEqMABsPOAAoErBKjAAbDz90DgnJzhQADAQAAiXNlY3AyNTZrMaEDWmswRS8Uu74NNhyETC6YjrIs8AYz8NrnwcMCE-6FvzeDdGNwgsPOg3VkcILD0IV3YWt1MgE"}'
2025-02-15 04:03:53.852 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:03:53.853 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50125/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.162.93/tcp/16585/p2p/16Uiu2HAmVStMVHg3MBvokvtAAR9ZsYXo6QebR6SjmxhHZBmx8yQx"]'
2025-02-15 04:03:53.891 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:53.901 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:03:53.901 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-15_04-03-51__ff67bbe2-39e9-4d86-9edf-a5ce1c8c064b__wakuorg_nwaku:latest.log
2025-02-15 04:03:53.901 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:03:53.901 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:03:53.903 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:03:53.903 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.44.131
2025-02-15 04:03:53.903 DEBUG [src.node.docker_mananger] Generated ports ['65473', '65474', '65475', '65476', '65477']
2025-02-15 04:03:53.903 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:03:53.903 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:03:53.903 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:03:53.903 DEBUG [src.node.docker_mananger] docker run -i -t -p 65473:65473 -p 65474:65474 -p 65475:65475 -p 65476:65476 -p 65477:65477 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65475 --rest-port=65473 --tcp-port=65474 --discv5-udp-port=65476 --rest-address=0.0.0.0 --nat=extip:172.18.44.131 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6ca400cfbb03b49531f675cd9af4a5d1d28a7ef9d170c1768ed6aed0dba760d5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65477 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QDYI-cdzSluoomm_xjXguBkY3chuVjxGqHbiVbymoWg6ST2G75zwrS7Ojvjh2ecfr-TWce1_-X0PlaKmQ9GzMN8CgmlkgnY0gmlwhKwSol2KbXVsdGlhZGRyc5YACASsEqJdBkDJAAoErBKiXQZAyt0DgnJzhQADAQAAiXNlY3AyNTZrMaED-XztfRtIwgkQJx7yVNE7NL8G-hp7LewyTFdPkVQFrNWDdGNwgkDJg3VkcIJAy4V3YWt1Mgk --lightpushnode=/ip4/172.18.162.93/tcp/16585/p2p/16Uiu2HAmVStMVHg3MBvokvtAAR9ZsYXo6QebR6SjmxhHZBmx8yQx --lightpush=true --relay=false
2025-02-15 04:03:54.158 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.44.131 waku 72d5787e2877dd78ce9d3fa1a8937f10ac28d2954cd741272ebd007dd6552904
2025-02-15 04:03:54.211 DEBUG [src.node.docker_mananger] Container started with ID 72d5787e2877. Setting up logs at ./log/docker/lightpush_node1_2025-02-15_04-03-51__ff67bbe2-39e9-4d86-9edf-a5ce1c8c064b__wakuorg_nwaku:latest.log
2025-02-15 04:03:54.212 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 65473
2025-02-15 04:03:54.212 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:03:55.212 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65473/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:55.215 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:03:55.216 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:03:55.216 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65473/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:55.218 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.44.131/tcp/65474/p2p/16Uiu2HAmAXjAZBbAoyjS8WJxJLXnVxkUdLX7cgYcACMH7YkKpKno","/ip4/172.18.44.131/tcp/65475/ws/p2p/16Uiu2HAmAXjAZBbAoyjS8WJxJLXnVxkUdLX7cgYcACMH7YkKpKno"],"enrUri":"enr:-L24QABhoXyj3Jl4lwxjU7hXR48xS873WuDcCp4muGnIkQu9Pld_-_yC7H_Vk3kY2he2ktw5ANOqnynPVNntP_bVS6oCgmlkgnY0gmlwhKwSLIOKbXVsdGlhZGRyc5YACASsEiyDBv_CAAoErBIsgwb_w90DgnJzhQADAQAAiXNlY3AyNTZrMaEC4GxkAs-etuEXFVvhvdhmIJmvXACHpVVpJ1l6MsXIjgCDdGNwgv_Cg3VkcIL_xIV3YWt1Mgg"}'
2025-02-15 04:03:55.218 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:03:55.218 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65473/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.162.93/tcp/16585/p2p/16Uiu2HAmVStMVHg3MBvokvtAAR9ZsYXo6QebR6SjmxhHZBmx8yQx"]'
2025-02-15 04:03:55.257 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:55.257 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65473/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.163.0/tcp/50126/p2p/16Uiu2HAmJjwqm9ymx14P9BgAYE5teeBjC8izerTn9TDwHPgCpdUa"]'
2025-02-15 04:03:55.285 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:55.288 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16584/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 04:03:55.294 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:55.294 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50125/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 04:03:55.301 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:55.303 DEBUG [src.steps.light_push] Lightpushing message
2025-02-15 04:03:55.303 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65473/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739592235303044352}}'
2025-02-15 04:03:55.310 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:65473/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
2025-02-15 04:03:55.312 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:03:55.313 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:03:55.313 DEBUG [src.node.waku_node] Stopping container with id fb327fb40861
2025-02-15 04:03:56.059 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:03:56.059 DEBUG [src.node.waku_node] Stopping container with id d03a2ec61371
2025-02-15 04:03:56.871 ERROR [src.node.docker_mananger] Max retries reached for container fb327fb40861. Exiting log stream.
2025-02-15 04:03:57.553 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:03:57.554 DEBUG [src.node.waku_node] Stopping container with id 72d5787e2877
2025-02-15 04:03:58.386 ERROR [src.node.docker_mananger] Max retries reached for container d03a2ec61371. Exiting log stream.
2025-02-15 04:03:58.802 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:03:58.804 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:03:58.811 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:03:58.824 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:03:58.829 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
