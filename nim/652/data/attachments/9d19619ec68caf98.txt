2025-02-15 04:07:10.921 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:07:10.922 DEBUG [tests.conftest] Running test: test_store_with_excessive_length_hash with id: 2025-02-15_04-07-10__f31ea2ea-2bac-43bf-a0cd-c5ffd5ff9395
2025-02-15 04:07:10.922 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:07:10.923 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-15 04:07:10.923 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-15 04:07:10.931 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:07:10.931 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-15_04-07-10__f31ea2ea-2bac-43bf-a0cd-c5ffd5ff9395__wakuorg_nwaku:latest.log
2025-02-15 04:07:10.931 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:07:10.932 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:07:10.935 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:07:10.935 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.29.144
2025-02-15 04:07:10.935 DEBUG [src.node.docker_mananger] Generated ports ['55282', '55283', '55284', '55285', '55286']
2025-02-15 04:07:10.936 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:07:10.936 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:07:10.936 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:07:10.936 DEBUG [src.node.docker_mananger] docker run -i -t -p 55282:55282 -p 55283:55283 -p 55284:55284 -p 55285:55285 -p 55286:55286 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55284 --rest-port=55282 --tcp-port=55283 --discv5-udp-port=55285 --rest-address=0.0.0.0 --nat=extip:172.18.29.144 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f1a9f60d38968638abfb7c8ce02c8cb7ec4aaaccd8f9e471ee9ed8d403b4fc64 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55286 --metrics-logging=true --store=true --relay=true
2025-02-15 04:07:11.174 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.29.144 waku 20e874a8883eb74947f72bd4e3c61fcfaba655677bdb29651e1a189a39afe8fb
2025-02-15 04:07:11.223 DEBUG [src.node.docker_mananger] Container started with ID 20e874a8883e. Setting up logs at ./log/docker/publishing_node1_2025-02-15_04-07-10__f31ea2ea-2bac-43bf-a0cd-c5ffd5ff9395__wakuorg_nwaku:latest.log
2025-02-15 04:07:11.225 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 55282
2025-02-15 04:07:11.226 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:07:11.769 ERROR [src.node.docker_mananger] Max retries reached for container 6c29a32c0b55. Exiting log stream.
2025-02-15 04:07:12.226 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55282/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:12.229 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:07:12.230 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:07:12.230 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55282/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:12.232 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.29.144/tcp/55283/p2p/16Uiu2HAm6Ei9QyJap8DxWXKMZEuYwAZfZWHjegas7BVbgxD6F7Sy","/ip4/172.18.29.144/tcp/55284/ws/p2p/16Uiu2HAm6Ei9QyJap8DxWXKMZEuYwAZfZWHjegas7BVbgxD6F7Sy"],"enrUri":"enr:-L24QBOlOsaRvFihWh8cHFXENe8LAODmIZ_Dovi8CqJXikAiMUD7tEah6RCYGsvgf_wZ6bxWRV2j5EQkoL8OA77YgEECgmlkgnY0gmlwhKwSHZCKbXVsdGlhZGRyc5YACASsEh2QBtfzAAoErBIdkAbX9N0DgnJzhQADAQAAiXNlY3AyNTZrMaECoKGdwogKFRlA1TcKpVj50KT9ZZWxLdGwGBxbJ-HXKvqDdGNwgtfzg3VkcILX9YV3YWt1MgM"}'
2025-02-15 04:07:12.232 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:07:12.239 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:07:12.239 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-15_04-07-10__f31ea2ea-2bac-43bf-a0cd-c5ffd5ff9395__wakuorg_nwaku:latest.log
2025-02-15 04:07:12.239 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:07:12.239 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:07:12.241 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:07:12.241 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.234.122
2025-02-15 04:07:12.241 DEBUG [src.node.docker_mananger] Generated ports ['29292', '29293', '29294', '29295', '29296']
2025-02-15 04:07:12.241 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:07:12.241 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:07:12.241 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:07:12.241 DEBUG [src.node.docker_mananger] docker run -i -t -p 29292:29292 -p 29293:29293 -p 29294:29294 -p 29295:29295 -p 29296:29296 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29294 --rest-port=29292 --tcp-port=29293 --discv5-udp-port=29295 --rest-address=0.0.0.0 --nat=extip:172.18.234.122 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b88c4c3cfb0324ae15dbf437fdccc67af97eaa04280adc12a3ddbefca8f4e312 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29296 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QBOlOsaRvFihWh8cHFXENe8LAODmIZ_Dovi8CqJXikAiMUD7tEah6RCYGsvgf_wZ6bxWRV2j5EQkoL8OA77YgEECgmlkgnY0gmlwhKwSHZCKbXVsdGlhZGRyc5YACASsEh2QBtfzAAoErBIdkAbX9N0DgnJzhQADAQAAiXNlY3AyNTZrMaECoKGdwogKFRlA1TcKpVj50KT9ZZWxLdGwGBxbJ-HXKvqDdGNwgtfzg3VkcILX9YV3YWt1MgM --storenode=/ip4/172.18.29.144/tcp/55283/p2p/16Uiu2HAm6Ei9QyJap8DxWXKMZEuYwAZfZWHjegas7BVbgxD6F7Sy --store=true --relay=true
2025-02-15 04:07:12.471 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.234.122 waku 49a041612c3439e2aeea8b61851215f5338d5c9929c05d9eaa0c19486e4bfcf5
2025-02-15 04:07:12.523 DEBUG [src.node.docker_mananger] Container started with ID 49a041612c34. Setting up logs at ./log/docker/store_node1_2025-02-15_04-07-10__f31ea2ea-2bac-43bf-a0cd-c5ffd5ff9395__wakuorg_nwaku:latest.log
2025-02-15 04:07:12.524 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29292
2025-02-15 04:07:12.524 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:07:13.524 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29292/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:13.527 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:07:13.528 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:07:13.528 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29292/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:13.530 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.234.122/tcp/29293/p2p/16Uiu2HAmJP17DTybLWcLPSKnrwGrap23qyUZUDLYpmdCs1jm7bw6","/ip4/172.18.234.122/tcp/29294/ws/p2p/16Uiu2HAmJP17DTybLWcLPSKnrwGrap23qyUZUDLYpmdCs1jm7bw6"],"enrUri":"enr:-L24QHgzFV3TANDBgR3H0wyf0iLcXG_jGnG71ueLdD24i2I7RleXmsCuC4nPebs1aAwDeLW9n6Or7n6-JKNY3IFYnNsCgmlkgnY0gmlwhKwS6nqKbXVsdGlhZGRyc5YACASsEup6BnJtAAoErBLqegZybt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVQ2vWGZzvpYB2v6kUwoSuuVCMa7F-brOtNINQKC2avmDdGNwgnJtg3VkcIJyb4V3YWt1MgM"}'
2025-02-15 04:07:13.530 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:07:13.530 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29292/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.29.144/tcp/55283/p2p/16Uiu2HAm6Ei9QyJap8DxWXKMZEuYwAZfZWHjegas7BVbgxD6F7Sy"]'
2025-02-15 04:07:13.533 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:13.533 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55282/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 04:07:13.536 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:13.536 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29292/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 04:07:13.538 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:13.539 DEBUG [src.steps.store] Relaying message
2025-02-15 04:07:13.539 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55282/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:07:13.545 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:13.546 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 04:07:13.746 DEBUG [src.steps.store] Relaying message
2025-02-15 04:07:13.747 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55282/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:07:13.753 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:13.753 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 04:07:13.954 DEBUG [src.steps.store] Relaying message
2025-02-15 04:07:13.954 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55282/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:07:13.960 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:13.961 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 04:07:14.161 DEBUG [src.steps.store] Relaying message
2025-02-15 04:07:14.162 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55282/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:07:14.168 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:07:14.168 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 04:07:14.369 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55282/store/v3/messages?hashes=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:14.372 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:55282/store/v3/messages?hashes=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&pageSize=50&ascending=true. Response content: b'waku message hash parsing error: invalid hash length: 25'
2025-02-15 04:07:14.372 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29292/store/v3/messages?hashes=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:07:14.375 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:29292/store/v3/messages?hashes=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&pageSize=50&ascending=true. Response content: b'waku message hash parsing error: invalid hash length: 25'
2025-02-15 04:07:14.376 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:07:14.377 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:07:14.378 DEBUG [src.node.waku_node] Stopping container with id 20e874a8883e
2025-02-15 04:07:15.038 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:07:15.038 DEBUG [src.node.waku_node] Stopping container with id 49a041612c34
2025-02-15 04:07:15.851 ERROR [src.node.docker_mananger] Max retries reached for container 20e874a8883e. Exiting log stream.
2025-02-15 04:07:16.525 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:07:16.527 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:07:16.535 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:07:16.542 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
