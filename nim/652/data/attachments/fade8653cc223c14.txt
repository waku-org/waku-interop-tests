2025-02-15 04:02:29.969 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:02:29.970 DEBUG [tests.conftest] Running test: test_lightpush with id: 2025-02-15_04-02-29__6c95e093-333d-451d-949f-abe1065f1783
2025-02-15 04:02:29.970 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:02:29.970 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-15 04:02:29.971 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-15 04:02:29.971 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-15 04:02:29.971 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-15 04:02:29.977 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:02:29.977 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_04-02-29__6c95e093-333d-451d-949f-abe1065f1783__wakuorg_nwaku:latest.log
2025-02-15 04:02:29.978 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:02:29.978 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:02:29.979 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:02:29.979 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.81.87
2025-02-15 04:02:29.979 DEBUG [src.node.docker_mananger] Generated ports ['48230', '48231', '48232', '48233', '48234']
2025-02-15 04:02:29.980 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:02:29.980 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:02:29.980 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:02:29.980 DEBUG [src.node.docker_mananger] docker run -i -t -p 48230:48230 -p 48231:48231 -p 48232:48232 -p 48233:48233 -p 48234:48234 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48232 --rest-port=48230 --tcp-port=48231 --discv5-udp-port=48233 --rest-address=0.0.0.0 --nat=extip:172.18.81.87 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cccfd5ee3759dea3d52b8ddd1cdfcca68fb6eaf7f2b99a0cfdda0ac8be6a4263 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48234 --metrics-logging=true --lightpush=true --relay=true
2025-02-15 04:02:30.198 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.81.87 waku 3de08dd3d74e5b5d5cf6a1d1fa0d412fb9718f47ef5cd062b39c073022122d74
2025-02-15 04:02:30.248 DEBUG [src.node.docker_mananger] Container started with ID 3de08dd3d74e. Setting up logs at ./log/docker/node1_2025-02-15_04-02-29__6c95e093-333d-451d-949f-abe1065f1783__wakuorg_nwaku:latest.log
2025-02-15 04:02:30.249 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 48230
2025-02-15 04:02:30.250 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:02:30.776 ERROR [src.node.docker_mananger] Max retries reached for container cc97eff0db6f. Exiting log stream.
2025-02-15 04:02:31.250 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48230/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:31.253 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:02:31.253 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:02:31.253 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48230/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:31.256 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.81.87/tcp/48231/p2p/16Uiu2HAmCLYNpwSLXA3peaiAvMiciorD3m58ua1LSJJo2AhV5dbw","/ip4/172.18.81.87/tcp/48232/ws/p2p/16Uiu2HAmCLYNpwSLXA3peaiAvMiciorD3m58ua1LSJJo2AhV5dbw"],"enrUri":"enr:-L24QPEGmgoUMMoTdL1b9249aV_wT1z1OOp7hN-n2W2xdK5Ma7wVEjtXrJRwGYW368f8DX7cNPlBw-tjDMFyzON8mJYCgmlkgnY0gmlwhKwSUVeKbXVsdGlhZGRyc5YACASsElFXBrxnAAoErBJRVwa8aN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-0YtV3QQlzeDztwHcAy-XDFRkQhqRInPdg6SStlsXxqDdGNwgrxng3VkcIK8aYV3YWt1Mgk"}'
2025-02-15 04:02:31.256 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:02:31.262 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:02:31.262 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_04-02-29__6c95e093-333d-451d-949f-abe1065f1783__wakuorg_nwaku:latest.log
2025-02-15 04:02:31.262 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:02:31.263 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:02:31.264 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:02:31.264 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.226.155
2025-02-15 04:02:31.264 DEBUG [src.node.docker_mananger] Generated ports ['26639', '26640', '26641', '26642', '26643']
2025-02-15 04:02:31.264 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:02:31.265 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:02:31.265 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:02:31.265 DEBUG [src.node.docker_mananger] docker run -i -t -p 26639:26639 -p 26640:26640 -p 26641:26641 -p 26642:26642 -p 26643:26643 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26641 --rest-port=26639 --tcp-port=26640 --discv5-udp-port=26642 --rest-address=0.0.0.0 --nat=extip:172.18.226.155 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=419bbb5cba1f03bb2ba5af86b4afba9af5b21fb2bfcdd6f27cfbe219556a0d1c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26643 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QPEGmgoUMMoTdL1b9249aV_wT1z1OOp7hN-n2W2xdK5Ma7wVEjtXrJRwGYW368f8DX7cNPlBw-tjDMFyzON8mJYCgmlkgnY0gmlwhKwSUVeKbXVsdGlhZGRyc5YACASsElFXBrxnAAoErBJRVwa8aN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-0YtV3QQlzeDztwHcAy-XDFRkQhqRInPdg6SStlsXxqDdGNwgrxng3VkcIK8aYV3YWt1Mgk
2025-02-15 04:02:31.492 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.226.155 waku b5b0a505a02ff1cffb1e4cc393c75f9be5ae24a56bd33dd2990b6f39ed3b1dc3
2025-02-15 04:02:31.543 DEBUG [src.node.docker_mananger] Container started with ID b5b0a505a02f. Setting up logs at ./log/docker/node1_2025-02-15_04-02-29__6c95e093-333d-451d-949f-abe1065f1783__wakuorg_nwaku:latest.log
2025-02-15 04:02:31.543 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26639
2025-02-15 04:02:31.543 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:02:32.545 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26639/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:32.552 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:02:32.552 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:02:32.552 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26639/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:32.554 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.226.155/tcp/26640/p2p/16Uiu2HAm5NTMLMnAv182GMJuPVLsDA9VGaJA4EtdYgyAagcBcnSb","/ip4/172.18.226.155/tcp/26641/ws/p2p/16Uiu2HAm5NTMLMnAv182GMJuPVLsDA9VGaJA4EtdYgyAagcBcnSb"],"enrUri":"enr:-L24QHH9zqwiozFTI-E5CaHavHrMqUip-At4Nmj7NgJO1tmHTlrc8Y8d8R_Z2Ffri37TguTKWbeu5pGAVlU21KI5te8CgmlkgnY0gmlwhKwS4puKbXVsdGlhZGRyc5YACASsEuKbBmgQAAoErBLimwZoEd0DgnJzhQADAQAAiXNlY3AyNTZrMaECk8HY_kjTgRR1ysq34xLbTAYS6qLg5C6ac3BwMbMqe1iDdGNwgmgQg3VkcIJoEoV3YWt1MgE"}'
2025-02-15 04:02:32.554 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:02:32.560 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:02:32.560 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_04-02-29__6c95e093-333d-451d-949f-abe1065f1783__wakuorg_nwaku:latest.log
2025-02-15 04:02:32.561 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:02:32.561 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:02:32.562 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:02:32.562 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.225.164
2025-02-15 04:02:32.562 DEBUG [src.node.docker_mananger] Generated ports ['28800', '28801', '28802', '28803', '28804']
2025-02-15 04:02:32.563 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:02:32.563 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:02:32.563 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:02:32.563 DEBUG [src.node.docker_mananger] docker run -i -t -p 28800:28800 -p 28801:28801 -p 28802:28802 -p 28803:28803 -p 28804:28804 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28802 --rest-port=28800 --tcp-port=28801 --discv5-udp-port=28803 --rest-address=0.0.0.0 --nat=extip:172.18.225.164 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ed3356ef41f5a38f7ecc681f655cb607e4aed9bdebe8a65de7ea5e754af2009f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28804 --metrics-logging=true --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QPEGmgoUMMoTdL1b9249aV_wT1z1OOp7hN-n2W2xdK5Ma7wVEjtXrJRwGYW368f8DX7cNPlBw-tjDMFyzON8mJYCgmlkgnY0gmlwhKwSUVeKbXVsdGlhZGRyc5YACASsElFXBrxnAAoErBJRVwa8aN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-0YtV3QQlzeDztwHcAy-XDFRkQhqRInPdg6SStlsXxqDdGNwgrxng3VkcIK8aYV3YWt1Mgk --lightpushnode=/ip4/172.18.81.87/tcp/48231/p2p/16Uiu2HAmCLYNpwSLXA3peaiAvMiciorD3m58ua1LSJJo2AhV5dbw
2025-02-15 04:02:32.789 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.225.164 waku a846ebb335b34681b7185f44ceb5c5fef0707d70289bc3917f3c369ed0030058
2025-02-15 04:02:32.835 DEBUG [src.node.docker_mananger] Container started with ID a846ebb335b3. Setting up logs at ./log/docker/node1_2025-02-15_04-02-29__6c95e093-333d-451d-949f-abe1065f1783__wakuorg_nwaku:latest.log
2025-02-15 04:02:32.835 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28800
2025-02-15 04:02:32.836 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:02:33.836 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28800/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:33.839 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:02:33.839 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:02:33.839 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28800/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:33.841 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.225.164/tcp/28801/p2p/16Uiu2HAmHYHniTCsMnTLHDY5FtSX2oYggfTVW2sZsse8TjHAzmQr","/ip4/172.18.225.164/tcp/28802/ws/p2p/16Uiu2HAmHYHniTCsMnTLHDY5FtSX2oYggfTVW2sZsse8TjHAzmQr"],"enrUri":"enr:-L24QDtJzItEqlodeZ_-fdfLuF3mRmJrchdK-8dmaGDQ_zpoK_x2CG3OMa6F-ETRPQc-LH9YVQ_b5K0Ftcy1gTep12ACgmlkgnY0gmlwhKwS4aSKbXVsdGlhZGRyc5YACASsEuGkBnCBAAoErBLhpAZwgt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDSJMWK18-ZG6fMy0lMGuaxbsmIvAYcAZco46iaNti4o-DdGNwgnCBg3VkcIJwg4V3YWt1Mgg"}'
2025-02-15 04:02:33.842 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:02:33.842 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48230/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 04:02:33.846 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:02:33.846 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26639/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 04:02:33.852 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:02:33.852 DEBUG [src.steps.light_push] Lightpushing message
2025-02-15 04:02:33.853 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28800/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1739592153852941056}}'
2025-02-15 04:02:33.900 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:02:33.902 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:02:34.005 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-15 04:02:34.005 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48230/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:34.007 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739592153852941056,"ephemeral":false}]'
2025-02-15 04:02:34.009 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-15 04:02:34.009 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26639/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:34.011 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739592153852941056,"ephemeral":false}]'
2025-02-15 04:02:34.014 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:02:34.015 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:02:34.015 DEBUG [src.node.waku_node] Stopping container with id 3de08dd3d74e
2025-02-15 04:02:34.734 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:02:34.735 DEBUG [src.node.waku_node] Stopping container with id b5b0a505a02f
2025-02-15 04:02:35.569 ERROR [src.node.docker_mananger] Max retries reached for container 3de08dd3d74e. Exiting log stream.
2025-02-15 04:02:36.203 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:02:36.204 DEBUG [src.node.waku_node] Stopping container with id a846ebb335b3
2025-02-15 04:02:37.030 ERROR [src.node.docker_mananger] Max retries reached for container b5b0a505a02f. Exiting log stream.
2025-02-15 04:02:37.690 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:02:37.692 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:02:37.706 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:02:37.721 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:02:37.735 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
