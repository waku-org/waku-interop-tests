2025-02-15 04:03:51.886 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:03:51.886 DEBUG [tests.conftest] Running test: test_get_store_messages_with_wrong_typo_content_topic with id: 2025-02-15_04-03-51__a96c8a9b-8c81-413d-9b63-ee6e6f3651af
2025-02-15 04:03:51.886 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:03:51.886 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-15 04:03:51.887 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-15 04:03:51.893 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:03:51.893 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-15_04-03-51__a96c8a9b-8c81-413d-9b63-ee6e6f3651af__wakuorg_nwaku:latest.log
2025-02-15 04:03:51.893 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:03:51.893 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:03:51.895 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:03:51.895 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.131.180
2025-02-15 04:03:51.895 DEBUG [src.node.docker_mananger] Generated ports ['21049', '21050', '21051', '21052', '21053']
2025-02-15 04:03:51.895 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:03:51.895 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:03:51.895 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:03:51.895 DEBUG [src.node.docker_mananger] docker run -i -t -p 21049:21049 -p 21050:21050 -p 21051:21051 -p 21052:21052 -p 21053:21053 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21051 --rest-port=21049 --tcp-port=21050 --discv5-udp-port=21052 --rest-address=0.0.0.0 --nat=extip:172.18.131.180 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c4b62aee3ae0e1a9a3ae9fab8e9bf9af0cadfe48bcfcb130a9e7b5d7bed05ffb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21053 --metrics-logging=true --store=true --relay=true
2025-02-15 04:03:52.116 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.131.180 waku 4a23e0afc806bef984ec8305c15a008bc6a2ed20ff70c8770a0fd4d55b8e6248
2025-02-15 04:03:52.166 DEBUG [src.node.docker_mananger] Container started with ID 4a23e0afc806. Setting up logs at ./log/docker/publishing_node1_2025-02-15_04-03-51__a96c8a9b-8c81-413d-9b63-ee6e6f3651af__wakuorg_nwaku:latest.log
2025-02-15 04:03:52.166 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 21049
2025-02-15 04:03:52.168 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:03:52.682 ERROR [src.node.docker_mananger] Max retries reached for container a2bd634e33f7. Exiting log stream.
2025-02-15 04:03:53.168 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21049/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:53.171 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:03:53.171 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:03:53.171 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21049/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:53.173 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.131.180/tcp/21050/p2p/16Uiu2HAm9ABaKiQcHFU74cmsDg43UvYASNZC4Sy8BKrPVSnA4xck","/ip4/172.18.131.180/tcp/21051/ws/p2p/16Uiu2HAm9ABaKiQcHFU74cmsDg43UvYASNZC4Sy8BKrPVSnA4xck"],"enrUri":"enr:-L24QFu4ieLDf4OYtuA9ESWYylI8lgjZufbjisT2ebChm2Rsdu9ScG7tYN9Iw0lc6uERY1ivzWMD7fYpbHg4LVHufZsCgmlkgnY0gmlwhKwSg7SKbXVsdGlhZGRyc5YACASsEoO0BlI6AAoErBKDtAZSO90DgnJzhQADAQAAiXNlY3AyNTZrMaECzAvJnzq6D4hm3tyNsBbH72EPYm7bgv44FwrtiS7EJj2DdGNwglI6g3VkcIJSPIV3YWt1MgM"}'
2025-02-15 04:03:53.174 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:03:53.180 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:03:53.180 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-15_04-03-51__a96c8a9b-8c81-413d-9b63-ee6e6f3651af__wakuorg_nwaku:latest.log
2025-02-15 04:03:53.180 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:03:53.180 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:03:53.182 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:03:53.182 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.210.83
2025-02-15 04:03:53.182 DEBUG [src.node.docker_mananger] Generated ports ['31198', '31199', '31200', '31201', '31202']
2025-02-15 04:03:53.182 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:03:53.182 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:03:53.182 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:03:53.183 DEBUG [src.node.docker_mananger] docker run -i -t -p 31198:31198 -p 31199:31199 -p 31200:31200 -p 31201:31201 -p 31202:31202 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31200 --rest-port=31198 --tcp-port=31199 --discv5-udp-port=31201 --rest-address=0.0.0.0 --nat=extip:172.18.210.83 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=921f5fa6a27df6b55bf947acfce2df2efa9e3b8a0ef620bdb2bcdadccc94c98d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31202 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFu4ieLDf4OYtuA9ESWYylI8lgjZufbjisT2ebChm2Rsdu9ScG7tYN9Iw0lc6uERY1ivzWMD7fYpbHg4LVHufZsCgmlkgnY0gmlwhKwSg7SKbXVsdGlhZGRyc5YACASsEoO0BlI6AAoErBKDtAZSO90DgnJzhQADAQAAiXNlY3AyNTZrMaECzAvJnzq6D4hm3tyNsBbH72EPYm7bgv44FwrtiS7EJj2DdGNwglI6g3VkcIJSPIV3YWt1MgM --storenode=/ip4/172.18.131.180/tcp/21050/p2p/16Uiu2HAm9ABaKiQcHFU74cmsDg43UvYASNZC4Sy8BKrPVSnA4xck --store=true --relay=true
2025-02-15 04:03:53.407 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.210.83 waku ca67c531f052e1072e52720c237a60d2d0fb6ad948bd319b094698c0520e52e3
2025-02-15 04:03:53.459 DEBUG [src.node.docker_mananger] Container started with ID ca67c531f052. Setting up logs at ./log/docker/store_node1_2025-02-15_04-03-51__a96c8a9b-8c81-413d-9b63-ee6e6f3651af__wakuorg_nwaku:latest.log
2025-02-15 04:03:53.460 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 31198
2025-02-15 04:03:53.461 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:03:54.462 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31198/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:54.464 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:03:54.465 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:03:54.465 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31198/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:54.467 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.210.83/tcp/31199/p2p/16Uiu2HAmDKRw7jzt9gc3qR9ichiL2wZkoxAuB4B7Ree8fDPMte7P","/ip4/172.18.210.83/tcp/31200/ws/p2p/16Uiu2HAmDKRw7jzt9gc3qR9ichiL2wZkoxAuB4B7Ree8fDPMte7P"],"enrUri":"enr:-L24QME9Ra03_8AM1Qn3RvFGsKx5kMq1s24zDBFI-kpSURpZFb1GBxldxw3kCjFcbjOtYTn3DupBPWfujSfI87Ken8YCgmlkgnY0gmlwhKwS0lOKbXVsdGlhZGRyc5YACASsEtJTBnnfAAoErBLSUwZ54N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDCdj_b0qx_4ev0kJ9AS-kJ2iYuSNrMpZqOb_xcefb1Z6DdGNwgnnfg3VkcIJ54YV3YWt1MgM"}'
2025-02-15 04:03:54.467 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:03:54.467 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31198/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.131.180/tcp/21050/p2p/16Uiu2HAm9ABaKiQcHFU74cmsDg43UvYASNZC4Sy8BKrPVSnA4xck"]'
2025-02-15 04:03:54.470 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:54.470 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21049/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 04:03:54.473 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:54.473 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31198/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 04:03:54.475 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:54.476 DEBUG [tests.store.test_api_flags] Trying to publish msg with content topic /myapp/1/latest/protoo
2025-02-15 04:03:54.476 DEBUG [src.steps.store] Relaying message
2025-02-15 04:03:54.476 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21049/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/protoo", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:03:54.482 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:54.482 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 04:03:54.683 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31198/store/v3/messages?includeData=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fprotoo&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:54.687 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x50010b836281e8ea33f09c1b31de9379c786b0dddb6674acd83ab417a4ceee1b","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/protoo","version":0,"timestamp":1739592234476679424,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
2025-02-15 04:03:54.687 DEBUG [tests.store.test_api_flags] stored content topic is /myapp/1/latest/protoo
2025-02-15 04:03:54.689 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:03:54.690 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:03:54.690 DEBUG [src.node.waku_node] Stopping container with id 4a23e0afc806
2025-02-15 04:03:55.893 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:03:55.893 DEBUG [src.node.waku_node] Stopping container with id ca67c531f052
2025-02-15 04:03:56.706 ERROR [src.node.docker_mananger] Max retries reached for container 4a23e0afc806. Exiting log stream.
2025-02-15 04:03:57.400 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:03:57.403 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:03:57.408 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:03:57.413 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
