2025-02-15 04:05:22.513 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:05:22.513 DEBUG [tests.conftest] Running test: test_time_filter_invalid_start_time with id: 2025-02-15_04-05-22__d93802e7-10f9-4d36-a8ef-effa2f39b6cd
2025-02-15 04:05:22.514 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:05:22.514 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-15 04:05:22.514 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-15 04:05:22.521 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:05:22.521 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-15_04-05-22__d93802e7-10f9-4d36-a8ef-effa2f39b6cd__wakuorg_nwaku:latest.log
2025-02-15 04:05:22.521 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:05:22.521 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:05:22.523 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:05:22.523 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.109.195
2025-02-15 04:05:22.523 DEBUG [src.node.docker_mananger] Generated ports ['19980', '19981', '19982', '19983', '19984']
2025-02-15 04:05:22.523 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:05:22.524 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:05:22.524 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:05:22.524 DEBUG [src.node.docker_mananger] docker run -i -t -p 19980:19980 -p 19981:19981 -p 19982:19982 -p 19983:19983 -p 19984:19984 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19982 --rest-port=19980 --tcp-port=19981 --discv5-udp-port=19983 --rest-address=0.0.0.0 --nat=extip:172.18.109.195 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9d4b5b3ddc0aaed2791852fbcdcaaf9dbcdc9fb1fdae76f7c36ddf1da74ed4ce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19984 --metrics-logging=true --store=true --relay=true
2025-02-15 04:05:22.764 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.109.195 waku 76bd96c90f6537a97c0a75ca785b6572c8f529e7e9e87de21c93fc56fc6ead3b
2025-02-15 04:05:22.815 DEBUG [src.node.docker_mananger] Container started with ID 76bd96c90f65. Setting up logs at ./log/docker/publishing_node1_2025-02-15_04-05-22__d93802e7-10f9-4d36-a8ef-effa2f39b6cd__wakuorg_nwaku:latest.log
2025-02-15 04:05:22.817 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 19980
2025-02-15 04:05:22.819 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:05:23.321 ERROR [src.node.docker_mananger] Max retries reached for container 83009ceece94. Exiting log stream.
2025-02-15 04:05:23.819 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19980/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:23.822 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:05:23.822 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:05:23.822 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19980/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:23.824 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.109.195/tcp/19981/p2p/16Uiu2HAmDD1qRqYbtptzuUMC1i4RMCTnaYj7kJ58Do5B49ayBvfL","/ip4/172.18.109.195/tcp/19982/ws/p2p/16Uiu2HAmDD1qRqYbtptzuUMC1i4RMCTnaYj7kJ58Do5B49ayBvfL"],"enrUri":"enr:-L24QF1ddP3Q8oHjRYvKFinAWGsa6lEXd5HciZ0X3aRb2Ja9G200zCjOwRUXpV91GKH7MzdlMzJ7FMfGiw8wRwElOHcCgmlkgnY0gmlwhKwSbcOKbXVsdGlhZGRyc5YACASsEm3DBk4NAAoErBJtwwZODt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDCDRD4cgrYRtPct23g5-zMcgxbNndY_m2cGtfYEpwt1ODdGNwgk4Ng3VkcIJOD4V3YWt1MgM"}'
2025-02-15 04:05:23.825 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:05:23.831 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:05:23.831 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-15_04-05-22__d93802e7-10f9-4d36-a8ef-effa2f39b6cd__wakuorg_nwaku:latest.log
2025-02-15 04:05:23.831 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:05:23.832 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:05:23.833 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:05:23.833 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.74.234
2025-02-15 04:05:23.833 DEBUG [src.node.docker_mananger] Generated ports ['30417', '30418', '30419', '30420', '30421']
2025-02-15 04:05:23.833 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:05:23.833 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:05:23.834 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:05:23.834 DEBUG [src.node.docker_mananger] docker run -i -t -p 30417:30417 -p 30418:30418 -p 30419:30419 -p 30420:30420 -p 30421:30421 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30419 --rest-port=30417 --tcp-port=30418 --discv5-udp-port=30420 --rest-address=0.0.0.0 --nat=extip:172.18.74.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b5c1fe1e0bb4db6dc9ecac5b619a39bdd31a70c4f9d67b56827ea39693ba69a9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30421 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QF1ddP3Q8oHjRYvKFinAWGsa6lEXd5HciZ0X3aRb2Ja9G200zCjOwRUXpV91GKH7MzdlMzJ7FMfGiw8wRwElOHcCgmlkgnY0gmlwhKwSbcOKbXVsdGlhZGRyc5YACASsEm3DBk4NAAoErBJtwwZODt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDCDRD4cgrYRtPct23g5-zMcgxbNndY_m2cGtfYEpwt1ODdGNwgk4Ng3VkcIJOD4V3YWt1MgM --storenode=/ip4/172.18.109.195/tcp/19981/p2p/16Uiu2HAmDD1qRqYbtptzuUMC1i4RMCTnaYj7kJ58Do5B49ayBvfL --store=true --relay=true
2025-02-15 04:05:24.077 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.74.234 waku 5b3c5865a6e61cbfe541ad50ddc12cb4bbefe6520424d1617ba0a016fe8ef3ca
2025-02-15 04:05:24.128 DEBUG [src.node.docker_mananger] Container started with ID 5b3c5865a6e6. Setting up logs at ./log/docker/store_node1_2025-02-15_04-05-22__d93802e7-10f9-4d36-a8ef-effa2f39b6cd__wakuorg_nwaku:latest.log
2025-02-15 04:05:24.130 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 30417
2025-02-15 04:05:24.132 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:05:25.132 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30417/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:25.135 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:05:25.135 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:05:25.135 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30417/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:25.137 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.74.234/tcp/30418/p2p/16Uiu2HAmUVv2woDxRZpFWm4rfLaa62pxzr6Aru5zHj3LextT9P8J","/ip4/172.18.74.234/tcp/30419/ws/p2p/16Uiu2HAmUVv2woDxRZpFWm4rfLaa62pxzr6Aru5zHj3LextT9P8J"],"enrUri":"enr:-L24QHdLbjoO7W0eDXIuvmTqYIiFE8p4gz5nOqWX0wvL2uoIcpkXWb0G33cWshD1gIsUDDTJ7AYzVb9Iw1wVlX5CnoYCgmlkgnY0gmlwhKwSSuqKbXVsdGlhZGRyc5YACASsEkrqBnbSAAoErBJK6gZ2090DgnJzhQADAQAAiXNlY3AyNTZrMaED62fiEze7V2anvs6s4LjW3hLMcGTa8Ovi9PPW43ou8b-DdGNwgnbSg3VkcIJ21IV3YWt1MgM"}'
2025-02-15 04:05:25.138 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:05:25.138 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30417/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.109.195/tcp/19981/p2p/16Uiu2HAmDD1qRqYbtptzuUMC1i4RMCTnaYj7kJ58Do5B49ayBvfL"]'
2025-02-15 04:05:25.141 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:25.141 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19980/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 04:05:25.143 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:25.143 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30417/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 04:05:25.145 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:25.147 DEBUG [src.steps.store] Relaying message
2025-02-15 04:05:25.147 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19980/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:05:25.152 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:25.153 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 04:05:25.354 DEBUG [src.steps.store] Relaying message
2025-02-15 04:05:25.354 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19980/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:05:25.360 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:25.361 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 04:05:25.561 DEBUG [src.steps.store] Relaying message
2025-02-15 04:05:25.562 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19980/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:05:25.568 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:25.568 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 04:05:25.769 DEBUG [src.steps.store] Relaying message
2025-02-15 04:05:25.769 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19980/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:05:25.776 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:25.776 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 04:05:25.977 DEBUG [src.steps.store] Relaying message
2025-02-15 04:05:25.978 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19980/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:05:25.983 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:25.984 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 04:05:26.184 DEBUG [src.steps.store] Relaying message
2025-02-15 04:05:26.185 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19980/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:05:26.191 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:26.192 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 04:05:26.392 DEBUG [tests.store.test_time_filter] inquering stored messages with start time abc
2025-02-15 04:05:26.393 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19980/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:26.396 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:19980/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true. Response content: b'time parsing error: invalid integer: abc'
2025-02-15 04:05:26.397 DEBUG [tests.store.test_time_filter] invalid start_time cause error Error: 400 Client Error: Bad Request for url: http://127.0.0.1:19980/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true with response: b'time parsing error: invalid integer: abc'
2025-02-15 04:05:26.398 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:05:26.399 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:05:26.399 DEBUG [src.node.waku_node] Stopping container with id 76bd96c90f65
2025-02-15 04:05:27.353 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:05:27.353 DEBUG [src.node.waku_node] Stopping container with id 5b3c5865a6e6
2025-02-15 04:05:28.166 ERROR [src.node.docker_mananger] Max retries reached for container 76bd96c90f65. Exiting log stream.
2025-02-15 04:05:28.877 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:05:28.878 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:05:28.886 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:05:28.892 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
