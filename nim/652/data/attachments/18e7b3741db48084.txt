2025-02-15 04:03:17.326 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:03:17.326 DEBUG [tests.conftest] Running test: test_light_push_with_missing_payload with id: 2025-02-15_04-03-17__d5423999-91e1-4568-b7e1-b3d06471e506
2025-02-15 04:03:17.326 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:03:17.327 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-15 04:03:17.333 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:03:17.333 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-15_04-03-17__d5423999-91e1-4568-b7e1-b3d06471e506__wakuorg_nwaku:latest.log
2025-02-15 04:03:17.333 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:03:17.333 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:03:17.335 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:03:17.335 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.108.207
2025-02-15 04:03:17.335 DEBUG [src.node.docker_mananger] Generated ports ['26517', '26518', '26519', '26520', '26521']
2025-02-15 04:03:17.335 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:03:17.335 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:03:17.335 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:03:17.336 DEBUG [src.node.docker_mananger] docker run -i -t -p 26517:26517 -p 26518:26518 -p 26519:26519 -p 26520:26520 -p 26521:26521 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26519 --rest-port=26517 --tcp-port=26518 --discv5-udp-port=26520 --rest-address=0.0.0.0 --nat=extip:172.18.108.207 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=99fcb72c47a39dfcf3add72ab7f431e8fcbc5c8a313cf23beb8b6bafdabd3262 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26521 --metrics-logging=true --lightpush=true --relay=true
2025-02-15 04:03:17.570 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.108.207 waku 52362e965bda8a8559c1475735c75c0a671a1b7f0630b7e74ba64e117537cb68
2025-02-15 04:03:17.626 DEBUG [src.node.docker_mananger] Container started with ID 52362e965bda. Setting up logs at ./log/docker/receiving_node1_2025-02-15_04-03-17__d5423999-91e1-4568-b7e1-b3d06471e506__wakuorg_nwaku:latest.log
2025-02-15 04:03:17.628 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26517
2025-02-15 04:03:17.628 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:03:18.119 ERROR [src.node.docker_mananger] Max retries reached for container 8901ee3a650d. Exiting log stream.
2025-02-15 04:03:18.628 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26517/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:18.631 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:03:18.631 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:03:18.632 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26517/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:18.634 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.108.207/tcp/26518/p2p/16Uiu2HAmE2HsBHcBBEUr2fo2G14RWeKrDC7KUJN3CnLJkDwzJjJB","/ip4/172.18.108.207/tcp/26519/ws/p2p/16Uiu2HAmE2HsBHcBBEUr2fo2G14RWeKrDC7KUJN3CnLJkDwzJjJB"],"enrUri":"enr:-L24QDLgu6W-m1BIJz0SRE-jAFxjALAh6SmZYyhRRFVPa53VWT0W8RPUR9qX38NBhwo6-42qDh8ef2m_ckcdEYE6F6wCgmlkgnY0gmlwhKwSbM-KbXVsdGlhZGRyc5YACASsEmzPBmeWAAoErBJszwZnl90DgnJzhQADAQAAiXNlY3AyNTZrMaEDFFCwRKAYNu8BwNJ-BEcrl-KXFCG7Ob-2qz7hxK03WkSDdGNwgmeWg3VkcIJnmIV3YWt1Mgk"}'
2025-02-15 04:03:18.634 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:03:18.640 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:03:18.641 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-15_04-03-17__d5423999-91e1-4568-b7e1-b3d06471e506__wakuorg_nwaku:latest.log
2025-02-15 04:03:18.641 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:03:18.641 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:03:18.642 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:03:18.642 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.2.60
2025-02-15 04:03:18.642 DEBUG [src.node.docker_mananger] Generated ports ['59406', '59407', '59408', '59409', '59410']
2025-02-15 04:03:18.643 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:03:18.643 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:03:18.643 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:03:18.643 DEBUG [src.node.docker_mananger] docker run -i -t -p 59406:59406 -p 59407:59407 -p 59408:59408 -p 59409:59409 -p 59410:59410 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59408 --rest-port=59406 --tcp-port=59407 --discv5-udp-port=59409 --rest-address=0.0.0.0 --nat=extip:172.18.2.60 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4ad5d49676e54bd71e9c4cfe952eed94cb9d456daba3bb7521805b29aa92da7b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59410 --metrics-logging=true --lightpush=false --relay=true
2025-02-15 04:03:18.879 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.2.60 waku 5098dec860b3e11a86d6af437ba30bf01bd92ea13fe4cd40ad1c21c90e604dc6
2025-02-15 04:03:18.925 DEBUG [src.node.docker_mananger] Container started with ID 5098dec860b3. Setting up logs at ./log/docker/receiving_node2_2025-02-15_04-03-17__d5423999-91e1-4568-b7e1-b3d06471e506__wakuorg_nwaku:latest.log
2025-02-15 04:03:18.925 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 59406
2025-02-15 04:03:18.926 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:03:19.927 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59406/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:19.929 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:03:19.930 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:03:19.930 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59406/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:19.932 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.2.60/tcp/59407/p2p/16Uiu2HAmP9J8hTL96mFkRxZd31cJ3ojHu89TcZHeDYF6DRHHNUei","/ip4/172.18.2.60/tcp/59408/ws/p2p/16Uiu2HAmP9J8hTL96mFkRxZd31cJ3ojHu89TcZHeDYF6DRHHNUei"],"enrUri":"enr:-L24QPSWn_YZ--_lb3w8YfwsK9n4yNJ2c2RCm32PCQmL_RjBO5rOeRoqTJrcn1fe_weUZDB0Cb-NC-EjtFK8uLX4gZsCgmlkgnY0gmlwhKwSAjyKbXVsdGlhZGRyc5YACASsEgI8BugPAAoErBICPAboEN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDm9U9NmKAHOB11x4FjfUzX6nk7yP3mGhG_S7Z5AflDJ-DdGNwgugPg3VkcILoEYV3YWt1MgE"}'
2025-02-15 04:03:19.932 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:03:19.932 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59406/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.108.207/tcp/26518/p2p/16Uiu2HAmE2HsBHcBBEUr2fo2G14RWeKrDC7KUJN3CnLJkDwzJjJB"]'
2025-02-15 04:03:19.969 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:19.978 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:03:19.979 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-15_04-03-17__d5423999-91e1-4568-b7e1-b3d06471e506__wakuorg_nwaku:latest.log
2025-02-15 04:03:19.979 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:03:19.979 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:03:19.980 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:03:19.981 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.119.36
2025-02-15 04:03:19.981 DEBUG [src.node.docker_mananger] Generated ports ['39872', '39873', '39874', '39875', '39876']
2025-02-15 04:03:19.981 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:03:19.981 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:03:19.981 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:03:19.981 DEBUG [src.node.docker_mananger] docker run -i -t -p 39872:39872 -p 39873:39873 -p 39874:39874 -p 39875:39875 -p 39876:39876 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39874 --rest-port=39872 --tcp-port=39873 --discv5-udp-port=39875 --rest-address=0.0.0.0 --nat=extip:172.18.119.36 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4a42ac2dddec04aac632eb848ca718ee10a0c0efac2b1d709f33fed5c786a6ce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39876 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QDLgu6W-m1BIJz0SRE-jAFxjALAh6SmZYyhRRFVPa53VWT0W8RPUR9qX38NBhwo6-42qDh8ef2m_ckcdEYE6F6wCgmlkgnY0gmlwhKwSbM-KbXVsdGlhZGRyc5YACASsEmzPBmeWAAoErBJszwZnl90DgnJzhQADAQAAiXNlY3AyNTZrMaEDFFCwRKAYNu8BwNJ-BEcrl-KXFCG7Ob-2qz7hxK03WkSDdGNwgmeWg3VkcIJnmIV3YWt1Mgk --lightpushnode=/ip4/172.18.108.207/tcp/26518/p2p/16Uiu2HAmE2HsBHcBBEUr2fo2G14RWeKrDC7KUJN3CnLJkDwzJjJB --lightpush=true --relay=false
2025-02-15 04:03:20.215 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.119.36 waku c3bec534d41f95c6c0636d487f221d3ee3315ae2e754160a46e29f66b10275ca
2025-02-15 04:03:20.264 DEBUG [src.node.docker_mananger] Container started with ID c3bec534d41f. Setting up logs at ./log/docker/lightpush_node1_2025-02-15_04-03-17__d5423999-91e1-4568-b7e1-b3d06471e506__wakuorg_nwaku:latest.log
2025-02-15 04:03:20.265 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 39872
2025-02-15 04:03:20.265 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:03:21.265 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39872/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:21.268 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:03:21.269 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:03:21.269 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39872/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:21.271 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.119.36/tcp/39873/p2p/16Uiu2HAmErsHsnf4ASAsHNRHfV6WhLtsbkvHbBNimHs3NXJXXs3G","/ip4/172.18.119.36/tcp/39874/ws/p2p/16Uiu2HAmErsHsnf4ASAsHNRHfV6WhLtsbkvHbBNimHs3NXJXXs3G"],"enrUri":"enr:-L24QBNikTLbjYNH7f7Lm9i3r-ZLNTUFdKWyzktPuOk59YdPERy9wI-7SS19HarUu56PLGXExPCE71wKHTnDEJ22BU8CgmlkgnY0gmlwhKwSdySKbXVsdGlhZGRyc5YACASsEnckBpvBAAoErBJ3JAabwt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDIMJcshI5v7OpKzej-_qDRYAwLFHBhcjhX5llNqUsl7uDdGNwgpvBg3VkcIKbw4V3YWt1Mgg"}'
2025-02-15 04:03:21.271 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:03:21.271 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39872/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.108.207/tcp/26518/p2p/16Uiu2HAmE2HsBHcBBEUr2fo2G14RWeKrDC7KUJN3CnLJkDwzJjJB"]'
2025-02-15 04:03:21.308 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:21.308 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39872/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.2.60/tcp/59407/p2p/16Uiu2HAmP9J8hTL96mFkRxZd31cJ3ojHu89TcZHeDYF6DRHHNUei"]'
2025-02-15 04:03:21.339 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:21.340 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26517/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 04:03:21.345 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:21.347 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59406/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 04:03:21.353 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:21.357 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39872/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1739592201357739776}}'
2025-02-15 04:03:21.363 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:39872/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-15 04:03:21.367 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:03:21.368 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:03:21.368 DEBUG [src.node.waku_node] Stopping container with id 52362e965bda
2025-02-15 04:03:21.955 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:03:21.955 DEBUG [src.node.waku_node] Stopping container with id 5098dec860b3
2025-02-15 04:03:22.768 ERROR [src.node.docker_mananger] Max retries reached for container 52362e965bda. Exiting log stream.
2025-02-15 04:03:23.452 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:03:23.453 DEBUG [src.node.waku_node] Stopping container with id c3bec534d41f
2025-02-15 04:03:24.265 ERROR [src.node.docker_mananger] Max retries reached for container 5098dec860b3. Exiting log stream.
2025-02-15 04:03:24.974 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:03:24.977 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:03:24.984 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:03:24.990 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:03:24.996 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
