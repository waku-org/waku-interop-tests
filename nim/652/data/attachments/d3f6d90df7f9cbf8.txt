2025-02-15 04:03:44.362 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:03:44.362 DEBUG [tests.conftest] Running test: test_light_push_with_missing_content_topic with id: 2025-02-15_04-03-44__2edf590a-cb24-4642-b4e8-5df17fc5468c
2025-02-15 04:03:44.362 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:03:44.362 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-15 04:03:44.369 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:03:44.369 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-15_04-03-44__2edf590a-cb24-4642-b4e8-5df17fc5468c__wakuorg_nwaku:latest.log
2025-02-15 04:03:44.369 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:03:44.369 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:03:44.370 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:03:44.371 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.169.250
2025-02-15 04:03:44.371 DEBUG [src.node.docker_mananger] Generated ports ['56378', '56379', '56380', '56381', '56382']
2025-02-15 04:03:44.371 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:03:44.371 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:03:44.371 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:03:44.371 DEBUG [src.node.docker_mananger] docker run -i -t -p 56378:56378 -p 56379:56379 -p 56380:56380 -p 56381:56381 -p 56382:56382 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56380 --rest-port=56378 --tcp-port=56379 --discv5-udp-port=56381 --rest-address=0.0.0.0 --nat=extip:172.18.169.250 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dcef795feaeeca13c769c144aa145ac1e4c6cbab3a7bf0c9e4ce63671dd07a9f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56382 --metrics-logging=true --lightpush=true --relay=true
2025-02-15 04:03:44.597 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.169.250 waku 348c6b4d88201d9db83fba295e037e786430db31bb64586c9198157bf1ebefec
2025-02-15 04:03:44.649 DEBUG [src.node.docker_mananger] Container started with ID 348c6b4d8820. Setting up logs at ./log/docker/receiving_node1_2025-02-15_04-03-44__2edf590a-cb24-4642-b4e8-5df17fc5468c__wakuorg_nwaku:latest.log
2025-02-15 04:03:44.649 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56378
2025-02-15 04:03:44.649 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:03:45.132 ERROR [src.node.docker_mananger] Max retries reached for container 71cf755f03dc. Exiting log stream.
2025-02-15 04:03:45.650 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56378/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:45.653 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:03:45.653 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:03:45.653 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56378/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:45.655 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.169.250/tcp/56379/p2p/16Uiu2HAm4ASjYofhQ9tZPmREBw1oh7p16ZqtEM9v7LWVYiRW3AcD","/ip4/172.18.169.250/tcp/56380/ws/p2p/16Uiu2HAm4ASjYofhQ9tZPmREBw1oh7p16ZqtEM9v7LWVYiRW3AcD"],"enrUri":"enr:-L24QEmkUma4IZpZEvgqmRaDAiezaP1grpoQIhI7Ai525OMwC35_UXAOOJtE6qWB8tXcVe-ZIWJpM-l6Nod1gKhRyIICgmlkgnY0gmlwhKwSqfqKbXVsdGlhZGRyc5YACASsEqn6Btw7AAoErBKp-gbcPN0DgnJzhQADAQAAiXNlY3AyNTZrMaECgdJ-TPzny_Dy2jn006WA7ThI5sbg5b2ahxCsun8_NB6DdGNwgtw7g3VkcILcPYV3YWt1Mgk"}'
2025-02-15 04:03:45.655 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:03:45.662 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:03:45.662 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-15_04-03-44__2edf590a-cb24-4642-b4e8-5df17fc5468c__wakuorg_nwaku:latest.log
2025-02-15 04:03:45.662 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:03:45.662 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:03:45.664 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:03:45.664 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.97.210
2025-02-15 04:03:45.664 DEBUG [src.node.docker_mananger] Generated ports ['51722', '51723', '51724', '51725', '51726']
2025-02-15 04:03:45.664 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:03:45.664 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:03:45.664 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:03:45.664 DEBUG [src.node.docker_mananger] docker run -i -t -p 51722:51722 -p 51723:51723 -p 51724:51724 -p 51725:51725 -p 51726:51726 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51724 --rest-port=51722 --tcp-port=51723 --discv5-udp-port=51725 --rest-address=0.0.0.0 --nat=extip:172.18.97.210 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4e87ae4f79c98f709fcaadb9bb8ac12cae11ffe1feab420efbad7b160da3892e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51726 --metrics-logging=true --lightpush=false --relay=true
2025-02-15 04:03:45.900 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.97.210 waku e224ff0cf47b910f12a9a18ca8f21ede55f7c41110db97b04b972a4a2bdc0cda
2025-02-15 04:03:45.947 DEBUG [src.node.docker_mananger] Container started with ID e224ff0cf47b. Setting up logs at ./log/docker/receiving_node2_2025-02-15_04-03-44__2edf590a-cb24-4642-b4e8-5df17fc5468c__wakuorg_nwaku:latest.log
2025-02-15 04:03:45.947 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 51722
2025-02-15 04:03:45.948 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:03:46.949 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51722/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:46.951 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:03:46.952 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:03:46.952 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51722/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:46.954 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.97.210/tcp/51723/p2p/16Uiu2HAmHrqzSbZ5z89yCPkYv5YrYMaoUV645AUaX1X6KPyufKKH","/ip4/172.18.97.210/tcp/51724/ws/p2p/16Uiu2HAmHrqzSbZ5z89yCPkYv5YrYMaoUV645AUaX1X6KPyufKKH"],"enrUri":"enr:-L24QHKpoQCH_0wL6S5rtgnmB3Aswg9gGh9kGxWlV5wLOVkwLFdKFhAXch8RO-6NsmY-pIZLRo5vD0WmLmCX_A20bpoCgmlkgnY0gmlwhKwSYdKKbXVsdGlhZGRyc5YACASsEmHSBsoLAAoErBJh0gbKDN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDTVPzyRd1pWsdYTme45ntrbM2gYgxV7iGlDcByj9WjFyDdGNwgsoLg3VkcILKDYV3YWt1MgE"}'
2025-02-15 04:03:46.954 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:03:46.954 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51722/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.169.250/tcp/56379/p2p/16Uiu2HAm4ASjYofhQ9tZPmREBw1oh7p16ZqtEM9v7LWVYiRW3AcD"]'
2025-02-15 04:03:46.994 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:47.006 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:03:47.006 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-15_04-03-44__2edf590a-cb24-4642-b4e8-5df17fc5468c__wakuorg_nwaku:latest.log
2025-02-15 04:03:47.006 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:03:47.006 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:03:47.008 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:03:47.008 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.194.157
2025-02-15 04:03:47.008 DEBUG [src.node.docker_mananger] Generated ports ['10145', '10146', '10147', '10148', '10149']
2025-02-15 04:03:47.008 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:03:47.008 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:03:47.009 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:03:47.009 DEBUG [src.node.docker_mananger] docker run -i -t -p 10145:10145 -p 10146:10146 -p 10147:10147 -p 10148:10148 -p 10149:10149 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10147 --rest-port=10145 --tcp-port=10146 --discv5-udp-port=10148 --rest-address=0.0.0.0 --nat=extip:172.18.194.157 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1dcf099eccaccc608837c5eaacbb614f32e905352c9e6907ab67927bc8bff961 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10149 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QEmkUma4IZpZEvgqmRaDAiezaP1grpoQIhI7Ai525OMwC35_UXAOOJtE6qWB8tXcVe-ZIWJpM-l6Nod1gKhRyIICgmlkgnY0gmlwhKwSqfqKbXVsdGlhZGRyc5YACASsEqn6Btw7AAoErBKp-gbcPN0DgnJzhQADAQAAiXNlY3AyNTZrMaECgdJ-TPzny_Dy2jn006WA7ThI5sbg5b2ahxCsun8_NB6DdGNwgtw7g3VkcILcPYV3YWt1Mgk --lightpushnode=/ip4/172.18.169.250/tcp/56379/p2p/16Uiu2HAm4ASjYofhQ9tZPmREBw1oh7p16ZqtEM9v7LWVYiRW3AcD --lightpush=true --relay=false
2025-02-15 04:03:47.246 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.194.157 waku 587a1e83e557adb30386f9ede8a995afd1c9776f2d604ea702b9c75b71ada018
2025-02-15 04:03:47.295 DEBUG [src.node.docker_mananger] Container started with ID 587a1e83e557. Setting up logs at ./log/docker/lightpush_node1_2025-02-15_04-03-44__2edf590a-cb24-4642-b4e8-5df17fc5468c__wakuorg_nwaku:latest.log
2025-02-15 04:03:47.295 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 10145
2025-02-15 04:03:47.295 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:03:48.296 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10145/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:48.299 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:03:48.299 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:03:48.299 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10145/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:48.301 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.194.157/tcp/10146/p2p/16Uiu2HAmNhRVLPVWwnNMCcputcAf7XnAEb121USA4JZWDyZfRo3q","/ip4/172.18.194.157/tcp/10147/ws/p2p/16Uiu2HAmNhRVLPVWwnNMCcputcAf7XnAEb121USA4JZWDyZfRo3q"],"enrUri":"enr:-L24QP2dTH_6FsyEPbwlRj_oC6Ry69TDX34Mv3l63bMdZlzUQ3W5Fu3JG7ootAjJzphIUFJRC8-R8gyU3gyaa1Bzyx8CgmlkgnY0gmlwhKwSwp2KbXVsdGlhZGRyc5YACASsEsKdBieiAAoErBLCnQYno90DgnJzhQADAQAAiXNlY3AyNTZrMaEDlTR0j1k1GWi7A7jraxLRylsvCbqe4keFG1f5i57bWjyDdGNwgieig3VkcIInpIV3YWt1Mgg"}'
2025-02-15 04:03:48.301 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:03:48.301 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10145/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.169.250/tcp/56379/p2p/16Uiu2HAm4ASjYofhQ9tZPmREBw1oh7p16ZqtEM9v7LWVYiRW3AcD"]'
2025-02-15 04:03:48.340 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:48.341 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10145/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.97.210/tcp/51723/p2p/16Uiu2HAmHrqzSbZ5z89yCPkYv5YrYMaoUV645AUaX1X6KPyufKKH"]'
2025-02-15 04:03:48.367 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:48.367 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56378/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 04:03:48.375 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:48.377 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51722/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 04:03:48.384 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:48.385 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10145/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "timestamp": 1739592228385496576}}'
2025-02-15 04:03:48.388 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10145/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-15 04:03:48.389 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:03:48.390 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:03:48.390 DEBUG [src.node.waku_node] Stopping container with id 348c6b4d8820
2025-02-15 04:03:49.169 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:03:49.169 DEBUG [src.node.waku_node] Stopping container with id e224ff0cf47b
2025-02-15 04:03:49.981 ERROR [src.node.docker_mananger] Max retries reached for container 348c6b4d8820. Exiting log stream.
2025-02-15 04:03:50.022 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:03:50.023 DEBUG [src.node.waku_node] Stopping container with id 587a1e83e557
2025-02-15 04:03:50.835 ERROR [src.node.docker_mananger] Max retries reached for container e224ff0cf47b. Exiting log stream.
2025-02-15 04:03:51.236 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:03:51.237 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:03:51.244 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:03:51.251 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:03:51.257 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
