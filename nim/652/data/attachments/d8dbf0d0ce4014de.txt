2025-02-15 04:03:16.252 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:03:16.252 DEBUG [tests.conftest] Running test: test_light_push_with_extra_field with id: 2025-02-15_04-03-16__53bb7802-eca4-4c1c-bf1b-d0203a57fa5d
2025-02-15 04:03:16.252 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:03:16.252 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-15 04:03:16.258 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:03:16.258 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-15_04-03-16__53bb7802-eca4-4c1c-bf1b-d0203a57fa5d__wakuorg_nwaku:latest.log
2025-02-15 04:03:16.259 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:03:16.259 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:03:16.260 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:03:16.260 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.207.170
2025-02-15 04:03:16.260 DEBUG [src.node.docker_mananger] Generated ports ['38132', '38133', '38134', '38135', '38136']
2025-02-15 04:03:16.261 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:03:16.261 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:03:16.261 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:03:16.261 DEBUG [src.node.docker_mananger] docker run -i -t -p 38132:38132 -p 38133:38133 -p 38134:38134 -p 38135:38135 -p 38136:38136 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38134 --rest-port=38132 --tcp-port=38133 --discv5-udp-port=38135 --rest-address=0.0.0.0 --nat=extip:172.18.207.170 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3b2aed7eb3bbbfbb9998eaaebe2a3ede3ddea171fbff809f205094fb6ad558de --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38136 --metrics-logging=true --lightpush=true --relay=true
2025-02-15 04:03:16.482 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.207.170 waku b663ab098c5c825fe8e904ba7ab063161d248c77df2fcd84713528646d3668f9
2025-02-15 04:03:16.532 DEBUG [src.node.docker_mananger] Container started with ID b663ab098c5c. Setting up logs at ./log/docker/receiving_node1_2025-02-15_04-03-16__53bb7802-eca4-4c1c-bf1b-d0203a57fa5d__wakuorg_nwaku:latest.log
2025-02-15 04:03:16.533 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38132
2025-02-15 04:03:16.533 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:03:17.040 ERROR [src.node.docker_mananger] Max retries reached for container f09a8daefd2c. Exiting log stream.
2025-02-15 04:03:17.534 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38132/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:17.536 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:03:17.537 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:03:17.537 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38132/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:17.539 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.207.170/tcp/38133/p2p/16Uiu2HAm1SAAkU8aL4irF9s9nBAyBKTdTgQzioi6Xfm9GgvicMeF","/ip4/172.18.207.170/tcp/38134/ws/p2p/16Uiu2HAm1SAAkU8aL4irF9s9nBAyBKTdTgQzioi6Xfm9GgvicMeF"],"enrUri":"enr:-L24QF-IVt5YXz85uXGRM_Kr992dsEEHHgJkxbukAKEwc217dKvGHisq9pRFn6FtIvvrM0ad4fFKYgtHV11hZ0qrGkECgmlkgnY0gmlwhKwSz6qKbXVsdGlhZGRyc5YACASsEs-qBpT1AAoErBLPqgaU9t0DgnJzhQADAQAAiXNlY3AyNTZrMaECWUX-rx2r4J_aoBm8qd8ebGcPSOsNlPDdLXO9quuy3aiDdGNwgpT1g3VkcIKU94V3YWt1Mgk"}'
2025-02-15 04:03:17.539 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:03:17.545 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:03:17.545 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-15_04-03-16__53bb7802-eca4-4c1c-bf1b-d0203a57fa5d__wakuorg_nwaku:latest.log
2025-02-15 04:03:17.545 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:03:17.546 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:03:17.549 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:03:17.549 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.8.65
2025-02-15 04:03:17.549 DEBUG [src.node.docker_mananger] Generated ports ['10679', '10680', '10681', '10682', '10683']
2025-02-15 04:03:17.550 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:03:17.550 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:03:17.550 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:03:17.550 DEBUG [src.node.docker_mananger] docker run -i -t -p 10679:10679 -p 10680:10680 -p 10681:10681 -p 10682:10682 -p 10683:10683 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10681 --rest-port=10679 --tcp-port=10680 --discv5-udp-port=10682 --rest-address=0.0.0.0 --nat=extip:172.18.8.65 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4d8bcac12596e51b00aae7962ccadf62ec43bd3bdcbdef3d70fff5c0922ca235 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10683 --metrics-logging=true --lightpush=false --relay=true
2025-02-15 04:03:17.798 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.8.65 waku 812c7acbd11fd2aa4635c67a9116c61e472069969971248ed5cd161e6591fa58
2025-02-15 04:03:17.847 DEBUG [src.node.docker_mananger] Container started with ID 812c7acbd11f. Setting up logs at ./log/docker/receiving_node2_2025-02-15_04-03-16__53bb7802-eca4-4c1c-bf1b-d0203a57fa5d__wakuorg_nwaku:latest.log
2025-02-15 04:03:17.848 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 10679
2025-02-15 04:03:17.848 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:03:18.848 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10679/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:18.851 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:03:18.851 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:03:18.851 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10679/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:18.853 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.8.65/tcp/10680/p2p/16Uiu2HAkx8zd7XBB9UbyPcmApmJ5xh6dkmwwVN2oGcCsYqKMpcyL","/ip4/172.18.8.65/tcp/10681/ws/p2p/16Uiu2HAkx8zd7XBB9UbyPcmApmJ5xh6dkmwwVN2oGcCsYqKMpcyL"],"enrUri":"enr:-L24QLIfhdLoTxX83Yol2KFHpGW9QnMWGYXmaOKSCX8BK2EJEIUyCAYyxMByqiKbV81vtYj97Taxqe__mg_rB5tNmcICgmlkgnY0gmlwhKwSCEGKbXVsdGlhZGRyc5YACASsEghBBim4AAoErBIIQQYpud0DgnJzhQADAQAAiXNlY3AyNTZrMaECKE1EaWlNfYBWxRkwHRRdorBRH3ez67ildqfpZnEuFgeDdGNwgim4g3VkcIIpuoV3YWt1MgE"}'
2025-02-15 04:03:18.853 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:03:18.854 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10679/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.207.170/tcp/38133/p2p/16Uiu2HAm1SAAkU8aL4irF9s9nBAyBKTdTgQzioi6Xfm9GgvicMeF"]'
2025-02-15 04:03:18.892 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:18.904 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:03:18.904 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-15_04-03-16__53bb7802-eca4-4c1c-bf1b-d0203a57fa5d__wakuorg_nwaku:latest.log
2025-02-15 04:03:18.904 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:03:18.904 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:03:18.906 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:03:18.906 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.194.118
2025-02-15 04:03:18.906 DEBUG [src.node.docker_mananger] Generated ports ['23978', '23979', '23980', '23981', '23982']
2025-02-15 04:03:18.906 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:03:18.906 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:03:18.906 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:03:18.907 DEBUG [src.node.docker_mananger] docker run -i -t -p 23978:23978 -p 23979:23979 -p 23980:23980 -p 23981:23981 -p 23982:23982 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23980 --rest-port=23978 --tcp-port=23979 --discv5-udp-port=23981 --rest-address=0.0.0.0 --nat=extip:172.18.194.118 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cb2f3a594aeebb2d1a0a4744abd8f6af37d866b8f2deaf54fc77be479bca5c8a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23982 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QF-IVt5YXz85uXGRM_Kr992dsEEHHgJkxbukAKEwc217dKvGHisq9pRFn6FtIvvrM0ad4fFKYgtHV11hZ0qrGkECgmlkgnY0gmlwhKwSz6qKbXVsdGlhZGRyc5YACASsEs-qBpT1AAoErBLPqgaU9t0DgnJzhQADAQAAiXNlY3AyNTZrMaECWUX-rx2r4J_aoBm8qd8ebGcPSOsNlPDdLXO9quuy3aiDdGNwgpT1g3VkcIKU94V3YWt1Mgk --lightpushnode=/ip4/172.18.207.170/tcp/38133/p2p/16Uiu2HAm1SAAkU8aL4irF9s9nBAyBKTdTgQzioi6Xfm9GgvicMeF --lightpush=true --relay=false
2025-02-15 04:03:19.133 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.194.118 waku 32c95e88d2b65bf95731e93cfa4a4cc6bcfaf32a5df2fd2d2e4700e55ae44e07
2025-02-15 04:03:19.183 DEBUG [src.node.docker_mananger] Container started with ID 32c95e88d2b6. Setting up logs at ./log/docker/lightpush_node1_2025-02-15_04-03-16__53bb7802-eca4-4c1c-bf1b-d0203a57fa5d__wakuorg_nwaku:latest.log
2025-02-15 04:03:19.183 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23978
2025-02-15 04:03:19.184 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:03:20.184 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23978/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:20.187 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:03:20.187 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:03:20.187 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23978/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:20.189 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.194.118/tcp/23979/p2p/16Uiu2HAkxryzYABJD4XFa9ZGt7apKDT8VGFsujcTdALBhoYL6wgj","/ip4/172.18.194.118/tcp/23980/ws/p2p/16Uiu2HAkxryzYABJD4XFa9ZGt7apKDT8VGFsujcTdALBhoYL6wgj"],"enrUri":"enr:-L24QALTk2tZREJvmUPfZBRnMnlNeGWl4G6PBiZymt0U0wGTWsNuePfXJS7gp9rqMo19nhh-7RthOqOV2OCaebn0FA4CgmlkgnY0gmlwhKwSwnaKbXVsdGlhZGRyc5YACASsEsJ2Bl2rAAoErBLCdgZdrN0DgnJzhQADAQAAiXNlY3AyNTZrMaECMw7yvD_1Oj10eQQwvvbOalk-jzV94wn4pMw2_f04R3CDdGNwgl2rg3VkcIJdrYV3YWt1Mgg"}'
2025-02-15 04:03:20.189 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:03:20.190 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23978/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.207.170/tcp/38133/p2p/16Uiu2HAm1SAAkU8aL4irF9s9nBAyBKTdTgQzioi6Xfm9GgvicMeF"]'
2025-02-15 04:03:20.226 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:20.226 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23978/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.8.65/tcp/10680/p2p/16Uiu2HAkx8zd7XBB9UbyPcmApmJ5xh6dkmwwVN2oGcCsYqKMpcyL"]'
2025-02-15 04:03:20.260 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:20.261 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38132/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 04:03:20.267 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:20.269 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10679/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 04:03:20.273 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:20.274 DEBUG [src.steps.light_push] Lightpushing message
2025-02-15 04:03:20.275 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23978/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739592200274598656, "extraField": "extraValue"}}'
2025-02-15 04:03:20.277 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:23978/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-15 04:03:20.279 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:03:20.280 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:03:20.280 DEBUG [src.node.waku_node] Stopping container with id b663ab098c5c
2025-02-15 04:03:20.884 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:03:20.885 DEBUG [src.node.waku_node] Stopping container with id 812c7acbd11f
2025-02-15 04:03:21.696 ERROR [src.node.docker_mananger] Max retries reached for container b663ab098c5c. Exiting log stream.
2025-02-15 04:03:22.389 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:03:22.389 DEBUG [src.node.waku_node] Stopping container with id 32c95e88d2b6
2025-02-15 04:03:23.201 ERROR [src.node.docker_mananger] Max retries reached for container 812c7acbd11f. Exiting log stream.
2025-02-15 04:03:23.883 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:03:23.885 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:03:23.891 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:03:23.899 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:03:23.904 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
