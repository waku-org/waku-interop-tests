2025-02-15 04:05:35.872 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:05:35.872 DEBUG [tests.conftest] Running test: test_publish_on_multiple_pubsub_topics_and_only_after_fetch_them with id: 2025-02-15_04-05-35__290b4a28-1f8f-4c86-8ef6-a6b083b04fdd
2025-02-15 04:05:35.873 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:05:35.873 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-15 04:05:35.873 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-15 04:05:35.880 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:05:35.880 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_04-05-35__290b4a28-1f8f-4c86-8ef6-a6b083b04fdd__wakuorg_nwaku:latest.log
2025-02-15 04:05:35.880 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:05:35.880 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:05:35.882 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:05:35.882 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.39.122
2025-02-15 04:05:35.882 DEBUG [src.node.docker_mananger] Generated ports ['3122', '3123', '3124', '3125', '3126']
2025-02-15 04:05:35.882 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:05:35.882 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:05:35.883 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:05:35.883 DEBUG [src.node.docker_mananger] docker run -i -t -p 3122:3122 -p 3123:3123 -p 3124:3124 -p 3125:3125 -p 3126:3126 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3124 --rest-port=3122 --tcp-port=3123 --discv5-udp-port=3125 --rest-address=0.0.0.0 --nat=extip:172.18.39.122 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=389eb3f79c7aba8dc2de59152db3efc659b9ea7d3bb890dadaddef9d9fdc2fff --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3126 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
2025-02-15 04:05:36.103 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.39.122 waku 380f5944b6f51432621aad46fbb33457fa20472e87b28d93421c7b4d26140cf4
2025-02-15 04:05:36.153 DEBUG [src.node.docker_mananger] Container started with ID 380f5944b6f5. Setting up logs at ./log/docker/node1_2025-02-15_04-05-35__290b4a28-1f8f-4c86-8ef6-a6b083b04fdd__wakuorg_nwaku:latest.log
2025-02-15 04:05:36.155 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 3122
2025-02-15 04:05:36.156 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:05:36.670 ERROR [src.node.docker_mananger] Max retries reached for container 6855aac32be2. Exiting log stream.
2025-02-15 04:05:37.156 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3122/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:37.159 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:05:37.159 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:05:37.159 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3122/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:37.162 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.39.122/tcp/3123/p2p/16Uiu2HAmM6aVct4nXPYhHLcZvXe3iEcKNdTtphxejNJbF8dHXSpF","/ip4/172.18.39.122/tcp/3124/ws/p2p/16Uiu2HAmM6aVct4nXPYhHLcZvXe3iEcKNdTtphxejNJbF8dHXSpF"],"enrUri":"enr:-L24QKbK9Ezq7-Eex9lVSXu-gZJmdPYeqi32JtKROlbOwGNSABSLLXUyqBiqOHeuNC90gDe33s8f5iJU2XvPQfMhulUCgmlkgnY0gmlwhKwSJ3qKbXVsdGlhZGRyc5YACASsEid6BgwzAAoErBInegYMNN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDfWufN7144dh67yUd4_-Ho03s02yDXlemUxiSlfrJDiiDdGNwggwzg3VkcIIMNYV3YWt1MgU"}'
2025-02-15 04:05:37.162 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:05:37.168 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:05:37.168 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-15_04-05-35__290b4a28-1f8f-4c86-8ef6-a6b083b04fdd__wakuorg_nwaku:latest.log
2025-02-15 04:05:37.168 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:05:37.169 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:05:37.170 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:05:37.170 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.57.189
2025-02-15 04:05:37.170 DEBUG [src.node.docker_mananger] Generated ports ['58227', '58228', '58229', '58230', '58231']
2025-02-15 04:05:37.170 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:05:37.170 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:05:37.170 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:05:37.171 DEBUG [src.node.docker_mananger] docker run -i -t -p 58227:58227 -p 58228:58228 -p 58229:58229 -p 58230:58230 -p 58231:58231 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58229 --rest-port=58227 --tcp-port=58228 --discv5-udp-port=58230 --rest-address=0.0.0.0 --nat=extip:172.18.57.189 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=1240390f7d3f7e00b064b8cd6cb35ef12d489e5fac4dd11a07249320ecce4db9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58231 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QKbK9Ezq7-Eex9lVSXu-gZJmdPYeqi32JtKROlbOwGNSABSLLXUyqBiqOHeuNC90gDe33s8f5iJU2XvPQfMhulUCgmlkgnY0gmlwhKwSJ3qKbXVsdGlhZGRyc5YACASsEid6BgwzAAoErBInegYMNN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDfWufN7144dh67yUd4_-Ho03s02yDXlemUxiSlfrJDiiDdGNwggwzg3VkcIIMNYV3YWt1MgU --pubsub-topic=/waku/2/rs/2/0
2025-02-15 04:05:37.404 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.57.189 waku ee49b4f36423e8f8353a628dc1b1a70bc32c94556dd325711235f22050d69636
2025-02-15 04:05:37.453 DEBUG [src.node.docker_mananger] Container started with ID ee49b4f36423. Setting up logs at ./log/docker/node2_2025-02-15_04-05-35__290b4a28-1f8f-4c86-8ef6-a6b083b04fdd__wakuorg_nwaku:latest.log
2025-02-15 04:05:37.453 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58227
2025-02-15 04:05:37.453 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:05:38.454 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58227/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:38.471 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:05:38.471 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:05:38.471 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58227/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:38.476 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.57.189/tcp/58228/p2p/16Uiu2HAm2Kcn79CSgkEZdco25YdDZBXnMsqFPieiR5y9GPZLCvak","/ip4/172.18.57.189/tcp/58229/ws/p2p/16Uiu2HAm2Kcn79CSgkEZdco25YdDZBXnMsqFPieiR5y9GPZLCvak"],"enrUri":"enr:-L24QAGXuKktGrv1n9B-GmwZiqL4LCKAfbAjV7gHOkSbDilTVD6hQmPdm32Ito0asuW9MXpaR21WsgJJ10uaYTvVs3oCgmlkgnY0gmlwhKwSOb2KbXVsdGlhZGRyc5YACASsEjm9BuN0AAoErBI5vQbjdd0DgnJzhQACAQAAiXNlY3AyNTZrMaECZnS0JMRe0pm8NbLhoOZ_gMlb0l_9iziEbgv61AM9SwGDdGNwguN0g3VkcILjdoV3YWt1MgE"}'
2025-02-15 04:05:38.477 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:05:38.477 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58227/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.39.122/tcp/3123/p2p/16Uiu2HAmM6aVct4nXPYhHLcZvXe3iEcKNdTtphxejNJbF8dHXSpF"]'
2025-02-15 04:05:38.481 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:38.481 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3122/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0", "/waku/2/rs/2/1", "/waku/2/rs/2/2", "/waku/2/rs/2/3", "/waku/2/rs/2/4", "/waku/2/rs/2/5", "/waku/2/rs/2/6", "/waku/2/rs/2/7"]'
2025-02-15 04:05:38.491 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:38.491 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58227/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0", "/waku/2/rs/2/1", "/waku/2/rs/2/2", "/waku/2/rs/2/3", "/waku/2/rs/2/4", "/waku/2/rs/2/5", "/waku/2/rs/2/6", "/waku/2/rs/2/7"]'
2025-02-15 04:05:38.513 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:38.516 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3122/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzA=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:05:38.525 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:38.526 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3122/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzE=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:05:38.531 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:38.532 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3122/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzI=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:05:38.538 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:38.538 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3122/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F3" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzM=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:05:38.544 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:38.545 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3122/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F4" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzQ=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:05:38.550 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:38.550 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3122/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F5" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzU=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:05:38.556 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:38.556 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3122/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F6" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzY=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:05:38.562 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:38.562 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3122/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F7" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzc=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:05:38.567 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:38.567 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:05:38.668 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58227/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:38.670 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzA=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592338516211456,"ephemeral":false}]'
2025-02-15 04:05:38.671 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58227/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:38.673 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzE=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592338526405888,"ephemeral":false}]'
2025-02-15 04:05:38.673 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58227/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:38.675 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzI=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592338532050176,"ephemeral":false}]'
2025-02-15 04:05:38.676 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58227/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F3" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:38.678 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzM=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592338538574080,"ephemeral":false}]'
2025-02-15 04:05:38.678 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58227/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F4" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:38.680 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzQ=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592338545058304,"ephemeral":false}]'
2025-02-15 04:05:38.680 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58227/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F5" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:38.682 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzU=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592338550841088,"ephemeral":false}]'
2025-02-15 04:05:38.683 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58227/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F6" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:38.685 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzY=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592338556623616,"ephemeral":false}]'
2025-02-15 04:05:38.685 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58227/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F7" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:38.687 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzc=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592338562458112,"ephemeral":false}]'
2025-02-15 04:05:38.689 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:05:38.690 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:05:38.690 DEBUG [src.node.waku_node] Stopping container with id 380f5944b6f5
2025-02-15 04:05:39.636 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:05:39.636 DEBUG [src.node.waku_node] Stopping container with id ee49b4f36423
2025-02-15 04:05:40.449 ERROR [src.node.docker_mananger] Max retries reached for container 380f5944b6f5. Exiting log stream.
2025-02-15 04:05:41.130 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:05:41.131 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:05:41.140 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:05:41.149 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
