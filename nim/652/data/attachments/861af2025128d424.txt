2025-02-15 04:04:42.389 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:04:42.390 DEBUG [tests.conftest] Running test: test_single_content_topic[/waku/2/content/test.js] with id: 2025-02-15_04-04-42__bc333ca1-8d63-4681-9dfd-7d3baf687c60
2025-02-15 04:04:42.391 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:04:42.391 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-15 04:04:42.391 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-15 04:04:42.402 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:04:42.402 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_04-04-42__bc333ca1-8d63-4681-9dfd-7d3baf687c60__wakuorg_nwaku:latest.log
2025-02-15 04:04:42.402 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:04:42.403 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:04:42.405 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:04:42.405 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.17.93
2025-02-15 04:04:42.406 DEBUG [src.node.docker_mananger] Generated ports ['57164', '57165', '57166', '57167', '57168']
2025-02-15 04:04:42.406 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:04:42.406 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:04:42.406 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:04:42.406 DEBUG [src.node.docker_mananger] docker run -i -t -p 57164:57164 -p 57165:57165 -p 57166:57166 -p 57167:57167 -p 57168:57168 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57166 --rest-port=57164 --tcp-port=57165 --discv5-udp-port=57167 --rest-address=0.0.0.0 --nat=extip:172.18.17.93 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=8b7d9c24d1dfef3f90f3eef848358ec406ad3c328fd4f76ed2e976786bff6c67 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57168 --metrics-logging=true --relay=true --filter=true --content-topic=/waku/2/content/test.js
2025-02-15 04:04:42.637 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.17.93 waku 71302e896d4e759396f2cf884ab73b2f5ced05e0184695736bc03b22145d7997
2025-02-15 04:04:42.689 DEBUG [src.node.docker_mananger] Container started with ID 71302e896d4e. Setting up logs at ./log/docker/node1_2025-02-15_04-04-42__bc333ca1-8d63-4681-9dfd-7d3baf687c60__wakuorg_nwaku:latest.log
2025-02-15 04:04:42.691 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57164
2025-02-15 04:04:42.691 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:04:43.222 ERROR [src.node.docker_mananger] Max retries reached for container 5083acda4dd8. Exiting log stream.
2025-02-15 04:04:43.692 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57164/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:43.695 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:04:43.695 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:04:43.695 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57164/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:43.697 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.17.93/tcp/57165/p2p/16Uiu2HAkxN2fAjAeFmPRst5A3ReSr7B4SEBYCMfuteBS9jyzJy83","/ip4/172.18.17.93/tcp/57166/ws/p2p/16Uiu2HAkxN2fAjAeFmPRst5A3ReSr7B4SEBYCMfuteBS9jyzJy83"],"enrUri":"enr:-L24QJaGB0mJd-souN38nJ6cS7kiMjmh66Mrr-RchZ_dR-p0IMtqM_Pm42kYx16gcXwZ1GzhPOp7z-2Hwvdb7cY0T7kCgmlkgnY0gmlwhKwSEV2KbXVsdGlhZGRyc5YACASsEhFdBt9NAAoErBIRXQbfTt0DgnJzhQACAQAAiXNlY3AyNTZrMaECK6QehZyyiefZHfHljt6y7bv_T42alhHR-SMgYErKBTCDdGNwgt9Ng3VkcILfT4V3YWt1MgU"}'
2025-02-15 04:04:43.698 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:04:43.704 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:04:43.704 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-15_04-04-42__bc333ca1-8d63-4681-9dfd-7d3baf687c60__wakuorg_nwaku:latest.log
2025-02-15 04:04:43.704 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:04:43.705 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:04:43.706 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:04:43.706 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.197.127
2025-02-15 04:04:43.706 DEBUG [src.node.docker_mananger] Generated ports ['34682', '34683', '34684', '34685', '34686']
2025-02-15 04:04:43.706 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:04:43.707 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:04:43.707 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:04:43.707 DEBUG [src.node.docker_mananger] docker run -i -t -p 34682:34682 -p 34683:34683 -p 34684:34684 -p 34685:34685 -p 34686:34686 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34684 --rest-port=34682 --tcp-port=34683 --discv5-udp-port=34685 --rest-address=0.0.0.0 --nat=extip:172.18.197.127 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=adae4ea8ef4d85beaa44dffc1cbec5402befb76efe2d452d5a522b4abf319faa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34686 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QJaGB0mJd-souN38nJ6cS7kiMjmh66Mrr-RchZ_dR-p0IMtqM_Pm42kYx16gcXwZ1GzhPOp7z-2Hwvdb7cY0T7kCgmlkgnY0gmlwhKwSEV2KbXVsdGlhZGRyc5YACASsEhFdBt9NAAoErBIRXQbfTt0DgnJzhQACAQAAiXNlY3AyNTZrMaECK6QehZyyiefZHfHljt6y7bv_T42alhHR-SMgYErKBTCDdGNwgt9Ng3VkcILfT4V3YWt1MgU --content-topic=/waku/2/content/test.js
2025-02-15 04:04:43.944 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.197.127 waku a86f3c35a83be4ec909b8e6a225d3b9c907009ced7b39ee1a8cc78a2fca757c5
2025-02-15 04:04:43.994 DEBUG [src.node.docker_mananger] Container started with ID a86f3c35a83b. Setting up logs at ./log/docker/node2_2025-02-15_04-04-42__bc333ca1-8d63-4681-9dfd-7d3baf687c60__wakuorg_nwaku:latest.log
2025-02-15 04:04:43.994 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 34682
2025-02-15 04:04:43.995 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:04:44.995 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34682/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:45.013 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:04:45.014 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:04:45.015 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34682/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:45.022 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.197.127/tcp/34683/p2p/16Uiu2HAm5Euu2bqSnuTWk7Sdi37DwdPRgxQzhG26RVWbbi9BNHVL","/ip4/172.18.197.127/tcp/34684/ws/p2p/16Uiu2HAm5Euu2bqSnuTWk7Sdi37DwdPRgxQzhG26RVWbbi9BNHVL"],"enrUri":"enr:-L24QE4USP-UU_gicNKHaMXPxuctpqK1PRwlAostAembBUhhainb2dYYnnoFA1JMzVTyNSbf5oBJuwlNoPAtb030tKUCgmlkgnY0gmlwhKwSxX-KbXVsdGlhZGRyc5YACASsEsV_Bod7AAoErBLFfwaHfN0DgnJzhQACAQAAiXNlY3AyNTZrMaECkdM3ojedmfT3lqC8WnB2LVAIWZ_oUfD17hSBMPEZJtODdGNwgod7g3VkcIKHfYV3YWt1MgE"}'
2025-02-15 04:04:45.022 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:04:45.023 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34682/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.17.93/tcp/57165/p2p/16Uiu2HAkxN2fAjAeFmPRst5A3ReSr7B4SEBYCMfuteBS9jyzJy83"]'
2025-02-15 04:04:45.027 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:45.028 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57164/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/content/test.js"]'
2025-02-15 04:04:45.030 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:45.031 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34682/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/content/test.js"]'
2025-02-15 04:04:45.033 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:45.033 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57164/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:45.038 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:45.038 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:04:45.139 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:45.139 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57164/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:45.142 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/waku/2/content/test.js","version":0,"timestamp":1739592285033588224,"ephemeral":false}]'
2025-02-15 04:04:45.144 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:45.144 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34682/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:45.147 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/waku/2/content/test.js","version":0,"timestamp":1739592285033588224,"ephemeral":false}]'
2025-02-15 04:04:45.149 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:04:45.150 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:04:45.150 DEBUG [src.node.waku_node] Stopping container with id 71302e896d4e
2025-02-15 04:04:46.181 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:04:46.182 DEBUG [src.node.waku_node] Stopping container with id a86f3c35a83b
2025-02-15 04:04:46.994 ERROR [src.node.docker_mananger] Max retries reached for container 71302e896d4e. Exiting log stream.
2025-02-15 04:04:47.692 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:04:47.693 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:04:47.698 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:04:47.704 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
