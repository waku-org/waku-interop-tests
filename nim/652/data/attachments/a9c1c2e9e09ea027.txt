2025-02-15 04:09:04.173 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:09:04.173 DEBUG [tests.conftest] Running test: test_cursor_equal_to_first_message with id: 2025-02-15_04-09-04__7ab38fbd-877d-46ea-87c3-13cb90d266de
2025-02-15 04:09:04.173 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:09:04.174 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-15 04:09:04.174 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-15 04:09:04.181 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:09:04.181 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-15_04-09-04__7ab38fbd-877d-46ea-87c3-13cb90d266de__wakuorg_nwaku:latest.log
2025-02-15 04:09:04.181 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:09:04.181 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:09:04.183 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:09:04.183 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.205.62
2025-02-15 04:09:04.183 DEBUG [src.node.docker_mananger] Generated ports ['56304', '56305', '56306', '56307', '56308']
2025-02-15 04:09:04.184 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:09:04.184 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:09:04.184 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:09:04.184 DEBUG [src.node.docker_mananger] docker run -i -t -p 56304:56304 -p 56305:56305 -p 56306:56306 -p 56307:56307 -p 56308:56308 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56306 --rest-port=56304 --tcp-port=56305 --discv5-udp-port=56307 --rest-address=0.0.0.0 --nat=extip:172.18.205.62 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dc9ffa4b1eaecbbfd8dee5ad6a5b6785b07fd62bed9a8c0dd7bebfad1a8044f8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56308 --metrics-logging=true --store=true --relay=true
2025-02-15 04:09:04.423 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.205.62 waku ca4d7ce863d9a2a33eb57293cbea58c5096755384b788a0640172ad51ccbf93b
2025-02-15 04:09:04.477 DEBUG [src.node.docker_mananger] Container started with ID ca4d7ce863d9. Setting up logs at ./log/docker/publishing_node1_2025-02-15_04-09-04__7ab38fbd-877d-46ea-87c3-13cb90d266de__wakuorg_nwaku:latest.log
2025-02-15 04:09:04.479 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56304
2025-02-15 04:09:04.479 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:09:04.981 ERROR [src.node.docker_mananger] Max retries reached for container b43f0e7a059b. Exiting log stream.
2025-02-15 04:09:05.479 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56304/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:09:05.482 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:09:05.483 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:09:05.483 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56304/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:09:05.485 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.205.62/tcp/56305/p2p/16Uiu2HAm1JJCYCbEqknJUvttH5p34rhwo4sJ618kqQgFsXdKmM9z","/ip4/172.18.205.62/tcp/56306/ws/p2p/16Uiu2HAm1JJCYCbEqknJUvttH5p34rhwo4sJ618kqQgFsXdKmM9z"],"enrUri":"enr:-L24QB2ksgYWl46pztYX_FLrbCGs0spOmPiEXGjrKSkjxIRUAYVOqEqCUfY9DdOFg3S4fqckhnF4Gnh6AObfb3BM57ACgmlkgnY0gmlwhKwSzT6KbXVsdGlhZGRyc5YACASsEs0-BtvxAAoErBLNPgbb8t0DgnJzhQADAQAAiXNlY3AyNTZrMaECV0Jtyzd2adr9UbFyyYg1sKIrMBaqEBJ-cW_tu4pgtdmDdGNwgtvxg3VkcILb84V3YWt1MgM"}'
2025-02-15 04:09:05.485 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:09:05.493 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:09:05.493 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-15_04-09-04__7ab38fbd-877d-46ea-87c3-13cb90d266de__wakuorg_nwaku:latest.log
2025-02-15 04:09:05.493 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:09:05.493 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:09:05.495 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:09:05.495 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.37.230
2025-02-15 04:09:05.495 DEBUG [src.node.docker_mananger] Generated ports ['61142', '61143', '61144', '61145', '61146']
2025-02-15 04:09:05.495 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:09:05.495 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:09:05.495 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:09:05.496 DEBUG [src.node.docker_mananger] docker run -i -t -p 61142:61142 -p 61143:61143 -p 61144:61144 -p 61145:61145 -p 61146:61146 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61144 --rest-port=61142 --tcp-port=61143 --discv5-udp-port=61145 --rest-address=0.0.0.0 --nat=extip:172.18.37.230 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b5c213b5e8d4848d01fac0fa2d3efb10fd444ea146c4650ae532af44a680eddc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61146 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QB2ksgYWl46pztYX_FLrbCGs0spOmPiEXGjrKSkjxIRUAYVOqEqCUfY9DdOFg3S4fqckhnF4Gnh6AObfb3BM57ACgmlkgnY0gmlwhKwSzT6KbXVsdGlhZGRyc5YACASsEs0-BtvxAAoErBLNPgbb8t0DgnJzhQADAQAAiXNlY3AyNTZrMaECV0Jtyzd2adr9UbFyyYg1sKIrMBaqEBJ-cW_tu4pgtdmDdGNwgtvxg3VkcILb84V3YWt1MgM --storenode=/ip4/172.18.205.62/tcp/56305/p2p/16Uiu2HAm1JJCYCbEqknJUvttH5p34rhwo4sJ618kqQgFsXdKmM9z --store=true --relay=true
2025-02-15 04:09:05.736 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.37.230 waku 78017781cf899b6363a4b6d168c9a7d6ba81acc2be81d3c49912b335c118bf66
2025-02-15 04:09:05.787 DEBUG [src.node.docker_mananger] Container started with ID 78017781cf89. Setting up logs at ./log/docker/store_node1_2025-02-15_04-09-04__7ab38fbd-877d-46ea-87c3-13cb90d266de__wakuorg_nwaku:latest.log
2025-02-15 04:09:05.788 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61142
2025-02-15 04:09:05.788 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:09:06.789 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61142/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:09:06.792 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:09:06.792 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:09:06.792 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61142/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:09:06.794 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.37.230/tcp/61143/p2p/16Uiu2HAmTxawBQkUv4qdP1WWokJi82X7WSi7UjexdXmjv7vzjuA9","/ip4/172.18.37.230/tcp/61144/ws/p2p/16Uiu2HAmTxawBQkUv4qdP1WWokJi82X7WSi7UjexdXmjv7vzjuA9"],"enrUri":"enr:-L24QFpajB9GAtHymXmWRFVsjgKcToj28KbyFTVd6-5N19YrEhAcgtEXwTFs04kVcbKznLwJjwSMOO2uCD1gTd7dDyYCgmlkgnY0gmlwhKwSJeaKbXVsdGlhZGRyc5YACASsEiXmBu7XAAoErBIl5gbu2N0DgnJzhQADAQAAiXNlY3AyNTZrMaED42FIQlKwDdHQZTsW8SLgEb99e1oVwmtuqKLl4MB1VqKDdGNwgu7Xg3VkcILu2YV3YWt1MgM"}'
2025-02-15 04:09:06.794 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:09:06.795 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61142/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.205.62/tcp/56305/p2p/16Uiu2HAm1JJCYCbEqknJUvttH5p34rhwo4sJ618kqQgFsXdKmM9z"]'
2025-02-15 04:09:06.797 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:09:06.798 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56304/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 04:09:06.800 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:09:06.800 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61142/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 04:09:06.803 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:09:06.804 DEBUG [src.steps.store] Relaying message
2025-02-15 04:09:06.804 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56304/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:09:06.810 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:09:06.810 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 04:09:07.012 DEBUG [src.steps.store] Relaying message
2025-02-15 04:09:07.012 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56304/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:09:07.018 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:09:07.019 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 04:09:07.220 DEBUG [src.steps.store] Relaying message
2025-02-15 04:09:07.220 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56304/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:09:07.226 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:09:07.227 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 04:09:07.428 DEBUG [src.steps.store] Relaying message
2025-02-15 04:09:07.428 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56304/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:09:07.434 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:09:07.434 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 04:09:07.635 DEBUG [src.steps.store] Relaying message
2025-02-15 04:09:07.636 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56304/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV80", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:09:07.641 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:09:07.642 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 04:09:07.843 DEBUG [src.steps.store] Relaying message
2025-02-15 04:09:07.843 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56304/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV81", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:09:07.850 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:09:07.851 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 04:09:08.051 DEBUG [src.steps.store] Relaying message
2025-02-15 04:09:08.052 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56304/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV82", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:09:08.060 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:09:08.060 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 04:09:08.262 DEBUG [src.steps.store] Relaying message
2025-02-15 04:09:08.262 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56304/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV83", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:09:08.268 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:09:08.268 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 04:09:08.469 DEBUG [src.steps.store] Relaying message
2025-02-15 04:09:08.469 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56304/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV84", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:09:08.475 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:09:08.477 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 04:09:08.678 DEBUG [src.steps.store] Relaying message
2025-02-15 04:09:08.678 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56304/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV85", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:09:08.684 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:09:08.685 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 04:09:08.886 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56304/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0x60a3f7492f942427b545fd49b4e2a329d787ea7730705c4b5b0f566d17958b95&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:09:08.889 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x42fa7db7144220bedee113e902ed90a390a87184f568cc306fcec509008b0332"},{"messageHash":"0xeb11d53785166529c56d6a43ff5b8f130d63a2e0c30a932f19d6ce1415d3a14e"},{"messageHash":"0x18a15b8d67214ec19ef6a32ad61f12003fb8f034440239ab9279a8459e7cc244"},{"messageHash":"0x5cd16ecfc754f78c1b2489263a9696bc36307f8b8fe94628f30d3855f99c1e40"},{"messageHash":"0x35d54514ee2086c502dceaccd5762c6aaf698bcb508ba6c38aab7f648fb1523c"},{"messageHash":"0x22f286b2de7d149c2beb1c965d6c86ed974e27541ca5e5211171d5923b6d4cc5"},{"messageHash":"0xc7b8945da73958eb7a39bafdda61b4de8ae0ff0334f9477fcc9a293e68407404"},{"messageHash":"0x0f5f0a4b47ce0f1bdd444a29a6f9b67ff64bf0ec525caab17c2dcdb6a8da4e47"},{"messageHash":"0xf5b5977e60310a89ceffb8552ce9945ca1d6ae60ec546cf65bd3bcc66df57a3b"}]}'
2025-02-15 04:09:08.890 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61142/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0x60a3f7492f942427b545fd49b4e2a329d787ea7730705c4b5b0f566d17958b95&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:09:08.893 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x42fa7db7144220bedee113e902ed90a390a87184f568cc306fcec509008b0332"},{"messageHash":"0xeb11d53785166529c56d6a43ff5b8f130d63a2e0c30a932f19d6ce1415d3a14e"},{"messageHash":"0x18a15b8d67214ec19ef6a32ad61f12003fb8f034440239ab9279a8459e7cc244"},{"messageHash":"0x5cd16ecfc754f78c1b2489263a9696bc36307f8b8fe94628f30d3855f99c1e40"},{"messageHash":"0x35d54514ee2086c502dceaccd5762c6aaf698bcb508ba6c38aab7f648fb1523c"},{"messageHash":"0x22f286b2de7d149c2beb1c965d6c86ed974e27541ca5e5211171d5923b6d4cc5"},{"messageHash":"0xc7b8945da73958eb7a39bafdda61b4de8ae0ff0334f9477fcc9a293e68407404"},{"messageHash":"0x0f5f0a4b47ce0f1bdd444a29a6f9b67ff64bf0ec525caab17c2dcdb6a8da4e47"},{"messageHash":"0xf5b5977e60310a89ceffb8552ce9945ca1d6ae60ec546cf65bd3bcc66df57a3b"}]}'
2025-02-15 04:09:08.895 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:09:08.896 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:09:08.897 DEBUG [src.node.waku_node] Stopping container with id ca4d7ce863d9
2025-02-15 04:09:10.020 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:09:10.020 DEBUG [src.node.waku_node] Stopping container with id 78017781cf89
2025-02-15 04:09:10.855 ERROR [src.node.docker_mananger] Max retries reached for container ca4d7ce863d9. Exiting log stream.
2025-02-15 04:09:11.529 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:09:11.532 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:09:11.545 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:09:11.552 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
