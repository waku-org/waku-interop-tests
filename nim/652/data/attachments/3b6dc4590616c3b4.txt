2025-02-15 04:05:54.974 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:05:54.975 DEBUG [tests.conftest] Running test: test_relay_subscribe_with_multiple_overlapping_pubsub_topics with id: 2025-02-15_04-05-54__320c2154-dad8-4354-9857-077de0036834
2025-02-15 04:05:54.975 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:05:54.975 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-15 04:05:54.975 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-15 04:05:54.982 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:05:54.982 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_04-05-54__320c2154-dad8-4354-9857-077de0036834__wakuorg_nwaku:latest.log
2025-02-15 04:05:54.982 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:05:54.982 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:05:54.983 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:05:54.984 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.35.24
2025-02-15 04:05:54.984 DEBUG [src.node.docker_mananger] Generated ports ['17870', '17871', '17872', '17873', '17874']
2025-02-15 04:05:54.984 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:05:54.984 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:05:54.984 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:05:54.984 DEBUG [src.node.docker_mananger] docker run -i -t -p 17870:17870 -p 17871:17871 -p 17872:17872 -p 17873:17873 -p 17874:17874 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17872 --rest-port=17870 --tcp-port=17871 --discv5-udp-port=17873 --rest-address=0.0.0.0 --nat=extip:172.18.35.24 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ef68c8762ecb17ff8880b88fdc82f52f31b35bfb2ca2aae208db8c1017150bbe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17874 --metrics-logging=true --relay=true
2025-02-15 04:05:55.218 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.35.24 waku 24fc766a4b41669ac683dc64394c6a7b9614100ca31266b7f9c6cf39c6cb7d05
2025-02-15 04:05:55.274 DEBUG [src.node.docker_mananger] Container started with ID 24fc766a4b41. Setting up logs at ./log/docker/node1_2025-02-15_04-05-54__320c2154-dad8-4354-9857-077de0036834__wakuorg_nwaku:latest.log
2025-02-15 04:05:55.274 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17870
2025-02-15 04:05:55.275 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:05:55.772 ERROR [src.node.docker_mananger] Max retries reached for container eb473f0c6699. Exiting log stream.
2025-02-15 04:05:56.275 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17870/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:56.278 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:05:56.279 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:05:56.279 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17870/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:56.281 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.35.24/tcp/17871/p2p/16Uiu2HAmRJcuwiycJqXn2bxRJh3DmhxTsocGWavCqz2c5x8wkCL4","/ip4/172.18.35.24/tcp/17872/ws/p2p/16Uiu2HAmRJcuwiycJqXn2bxRJh3DmhxTsocGWavCqz2c5x8wkCL4"],"enrUri":"enr:-L24QBGSBFLA28VvGtSksHQnGbyyVWe2jHy526adQT8d8PrTVF8MraR7iqRSRgPit8j2YNnPmyYLXuCsyDpIn7ZeS7QCgmlkgnY0gmlwhKwSIxiKbXVsdGlhZGRyc5YACASsEiMYBkXPAAoErBIjGAZF0N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDu_ATMazaBOKq619bU98Kksl7xl6gfM_M39n2GblHhRWDdGNwgkXPg3VkcIJF0YV3YWt1MgE"}'
2025-02-15 04:05:56.281 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:05:56.288 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:05:56.288 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-15_04-05-54__320c2154-dad8-4354-9857-077de0036834__wakuorg_nwaku:latest.log
2025-02-15 04:05:56.288 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:05:56.288 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:05:56.290 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:05:56.290 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.107.55
2025-02-15 04:05:56.290 DEBUG [src.node.docker_mananger] Generated ports ['47141', '47142', '47143', '47144', '47145']
2025-02-15 04:05:56.290 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:05:56.290 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:05:56.290 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:05:56.290 DEBUG [src.node.docker_mananger] docker run -i -t -p 47141:47141 -p 47142:47142 -p 47143:47143 -p 47144:47144 -p 47145:47145 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47143 --rest-port=47141 --tcp-port=47142 --discv5-udp-port=47144 --rest-address=0.0.0.0 --nat=extip:172.18.107.55 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c79b162ef1bdcd037d9fde9e4a2e3f48b02dd84adeeba62e068d0037dc2edb20 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47145 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QBGSBFLA28VvGtSksHQnGbyyVWe2jHy526adQT8d8PrTVF8MraR7iqRSRgPit8j2YNnPmyYLXuCsyDpIn7ZeS7QCgmlkgnY0gmlwhKwSIxiKbXVsdGlhZGRyc5YACASsEiMYBkXPAAoErBIjGAZF0N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDu_ATMazaBOKq619bU98Kksl7xl6gfM_M39n2GblHhRWDdGNwgkXPg3VkcIJF0YV3YWt1MgE
2025-02-15 04:05:56.526 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.107.55 waku 2f476a4783588f84affa93c8f82a28bce5ae89da5408e994863f30526659ca63
2025-02-15 04:05:56.570 DEBUG [src.node.docker_mananger] Container started with ID 2f476a478358. Setting up logs at ./log/docker/node2_2025-02-15_04-05-54__320c2154-dad8-4354-9857-077de0036834__wakuorg_nwaku:latest.log
2025-02-15 04:05:56.570 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 47141
2025-02-15 04:05:56.571 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:05:57.572 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47141/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:57.577 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:05:57.578 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:05:57.579 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47141/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:57.585 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.107.55/tcp/47142/p2p/16Uiu2HAm4Qu3xqf5GeYW15RY1uyA85SV5KtBBc5HHWJ2CznWvMG1","/ip4/172.18.107.55/tcp/47143/ws/p2p/16Uiu2HAm4Qu3xqf5GeYW15RY1uyA85SV5KtBBc5HHWJ2CznWvMG1"],"enrUri":"enr:-L24QDBRA8IgG6-8cDdvOVgjosiygnajQJj-D_sFgq23S41nL5-095xB-vCQlJx6WE4s6SSX5HFhlubn23TwqJ4im2sCgmlkgnY0gmlwhKwSazeKbXVsdGlhZGRyc5YACASsEms3BrgmAAoErBJrNwa4J90DgnJzhQADAQAAiXNlY3AyNTZrMaEChYZhyL9N3kadQ9BMxH7nyPojipWTFEmMUS7fBmeOwy6DdGNwgrgmg3VkcIK4KIV3YWt1MgE"}'
2025-02-15 04:05:57.587 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:05:57.587 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47141/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.35.24/tcp/17871/p2p/16Uiu2HAmRJcuwiycJqXn2bxRJh3DmhxTsocGWavCqz2c5x8wkCL4"]'
2025-02-15 04:05:57.590 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:57.591 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17870/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9"]'
2025-02-15 04:05:57.596 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:57.597 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47141/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9"]'
2025-02-15 04:05:57.605 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:57.606 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17870/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25"]'
2025-02-15 04:05:57.611 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:57.611 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47141/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25"]'
2025-02-15 04:05:57.617 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:57.618 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17870/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:05:57.623 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:57.624 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:05:57.724 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:05:57.724 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17870/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:57.726 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739592357618241280,"ephemeral":false}]'
2025-02-15 04:05:57.728 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:05:57.728 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47141/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:57.730 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739592357618241280,"ephemeral":false}]'
2025-02-15 04:05:57.732 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17870/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:05:57.736 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:57.737 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:05:57.837 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:05:57.837 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17870/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:57.841 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739592357732105472,"ephemeral":false}]'
2025-02-15 04:05:57.842 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:05:57.843 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47141/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:57.845 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739592357732105472,"ephemeral":false}]'
2025-02-15 04:05:57.847 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17870/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:05:57.851 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:57.852 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:05:57.952 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:05:57.953 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17870/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:57.955 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739592357846968576,"ephemeral":false}]'
2025-02-15 04:05:57.957 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:05:57.957 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47141/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:57.959 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739592357846968576,"ephemeral":false}]'
2025-02-15 04:05:57.961 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17870/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F25" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:05:57.966 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:57.966 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:05:58.066 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:05:58.067 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17870/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F25" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:58.069 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739592357960918784,"ephemeral":false}]'
2025-02-15 04:05:58.071 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:05:58.071 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47141/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F25" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:58.073 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739592357960918784,"ephemeral":false}]'
2025-02-15 04:05:58.076 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:05:58.077 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:05:58.077 DEBUG [src.node.waku_node] Stopping container with id 24fc766a4b41
2025-02-15 04:05:58.742 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:05:58.742 DEBUG [src.node.waku_node] Stopping container with id 2f476a478358
2025-02-15 04:05:59.556 ERROR [src.node.docker_mananger] Max retries reached for container 24fc766a4b41. Exiting log stream.
2025-02-15 04:06:00.255 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:06:00.256 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:06:00.264 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:06:00.272 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
