2025-02-15 04:04:47.707 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:04:47.707 DEBUG [tests.conftest] Running test: test_multiple_content_topics_different_shard with id: 2025-02-15_04-04-47__91470958-f3fd-4d9c-87bf-74b249c70988
2025-02-15 04:04:47.707 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:04:47.708 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-15 04:04:47.708 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-15 04:04:47.715 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:04:47.715 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_04-04-47__91470958-f3fd-4d9c-87bf-74b249c70988__wakuorg_nwaku:latest.log
2025-02-15 04:04:47.716 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:04:47.716 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:04:47.717 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:04:47.717 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.37.74
2025-02-15 04:04:47.717 DEBUG [src.node.docker_mananger] Generated ports ['4546', '4547', '4548', '4549', '4550']
2025-02-15 04:04:47.717 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:04:47.718 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:04:47.718 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:04:47.718 DEBUG [src.node.docker_mananger] docker run -i -t -p 4546:4546 -p 4547:4547 -p 4548:4548 -p 4549:4549 -p 4550:4550 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4548 --rest-port=4546 --tcp-port=4547 --discv5-udp-port=4549 --rest-address=0.0.0.0 --nat=extip:172.18.37.74 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=14fe6d558ff198afd5ab64501afbab3cb3eb8b0dbf98a8eba9cebcfcdd64aaf7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4550 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto --content-topic=/waku/2/content/test.js --content-topic=/app/22/sometopic/someencoding --content-topic=/toychat/2/huilong/proto --content-topic=/statusim/1/community/cbor --content-topic=/app/27/sometopic/someencoding --content-topic=/app/29/sometopic/someencoding --content-topic=/app/20/sometopic/someencoding
2025-02-15 04:04:47.943 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.37.74 waku 1e85ad1d3f5f72490186517808d98b5293066d3844fcda0653fb069025907b67
2025-02-15 04:04:47.991 DEBUG [src.node.docker_mananger] Container started with ID 1e85ad1d3f5f. Setting up logs at ./log/docker/node1_2025-02-15_04-04-47__91470958-f3fd-4d9c-87bf-74b249c70988__wakuorg_nwaku:latest.log
2025-02-15 04:04:47.992 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 4546
2025-02-15 04:04:47.992 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:04:48.509 ERROR [src.node.docker_mananger] Max retries reached for container a86f3c35a83b. Exiting log stream.
2025-02-15 04:04:48.993 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4546/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:48.996 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:04:48.996 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:04:48.996 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4546/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:48.998 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.37.74/tcp/4547/p2p/16Uiu2HAmL6Q5PbwTn5wgjQW9jk3zRqcLb6s9znxRfgDTdAoAe7yT","/ip4/172.18.37.74/tcp/4548/ws/p2p/16Uiu2HAmL6Q5PbwTn5wgjQW9jk3zRqcLb6s9znxRfgDTdAoAe7yT"],"enrUri":"enr:-L24QNqR4ynp4N5bSIg2QQMECgPB6M8s9O_J0Re2Vuv1lKV2ZmHAAgxrWmYrJuSFXfmdWnFJGIqSajm_W5uyLd-521sCgmlkgnY0gmlwhKwSJUqKbXVsdGlhZGRyc5YACASsEiVKBhHDAAoErBIlSgYRxN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDboQn2B97km0BhC1Ug4lyzfytwIwUxZGMCnjUWKp6K_qDdGNwghHDg3VkcIIRxYV3YWt1MgU"}'
2025-02-15 04:04:48.998 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:04:49.005 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:04:49.005 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-15_04-04-47__91470958-f3fd-4d9c-87bf-74b249c70988__wakuorg_nwaku:latest.log
2025-02-15 04:04:49.005 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:04:49.005 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:04:49.006 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:04:49.007 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.48.125
2025-02-15 04:04:49.007 DEBUG [src.node.docker_mananger] Generated ports ['61994', '61995', '61996', '61997', '61998']
2025-02-15 04:04:49.007 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:04:49.007 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:04:49.007 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:04:49.007 DEBUG [src.node.docker_mananger] docker run -i -t -p 61994:61994 -p 61995:61995 -p 61996:61996 -p 61997:61997 -p 61998:61998 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61996 --rest-port=61994 --tcp-port=61995 --discv5-udp-port=61997 --rest-address=0.0.0.0 --nat=extip:172.18.48.125 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=b00ee73c66abd5dcefec4fb1c5cec88a03d333cbfc8dcfd3eded687ba0995ed3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61998 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QNqR4ynp4N5bSIg2QQMECgPB6M8s9O_J0Re2Vuv1lKV2ZmHAAgxrWmYrJuSFXfmdWnFJGIqSajm_W5uyLd-521sCgmlkgnY0gmlwhKwSJUqKbXVsdGlhZGRyc5YACASsEiVKBhHDAAoErBIlSgYRxN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDboQn2B97km0BhC1Ug4lyzfytwIwUxZGMCnjUWKp6K_qDdGNwghHDg3VkcIIRxYV3YWt1MgU --content-topic=/myapp/1/latest/proto --content-topic=/waku/2/content/test.js --content-topic=/app/22/sometopic/someencoding --content-topic=/toychat/2/huilong/proto --content-topic=/statusim/1/community/cbor --content-topic=/app/27/sometopic/someencoding --content-topic=/app/29/sometopic/someencoding --content-topic=/app/20/sometopic/someencoding
2025-02-15 04:04:49.246 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.48.125 waku c16c1b5ffbb4e7015bd112a5a5aba63544f4ca0a229b89a7ab9d370dffac2e4f
2025-02-15 04:04:49.300 DEBUG [src.node.docker_mananger] Container started with ID c16c1b5ffbb4. Setting up logs at ./log/docker/node2_2025-02-15_04-04-47__91470958-f3fd-4d9c-87bf-74b249c70988__wakuorg_nwaku:latest.log
2025-02-15 04:04:49.300 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61994
2025-02-15 04:04:49.301 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:04:50.302 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61994/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:50.324 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:04:50.324 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:04:50.324 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61994/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:50.330 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.48.125/tcp/61995/p2p/16Uiu2HAmNbMVTYkwKpr8Qg4R8QUwG22jYxsUtjFtwNdjaxQBgF5v","/ip4/172.18.48.125/tcp/61996/ws/p2p/16Uiu2HAmNbMVTYkwKpr8Qg4R8QUwG22jYxsUtjFtwNdjaxQBgF5v"],"enrUri":"enr:-L24QMIZNwP4fsmZRSj7T7pKeNETO0BNB1A3yJkI3TcMeanRYu8zlQtxoHThqbdnoerRM_azDQiP--E7yElIimB594wCgmlkgnY0gmlwhKwSMH2KbXVsdGlhZGRyc5YACASsEjB9BvIrAAoErBIwfQbyLN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDk6ZzNnnIYv5C6XnpKeFzCJzsvjZAVYYzUQnWbWhgAW2DdGNwgvIrg3VkcILyLYV3YWt1MgE"}'
2025-02-15 04:04:50.331 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:04:50.334 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61994/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.37.74/tcp/4547/p2p/16Uiu2HAmL6Q5PbwTn5wgjQW9jk3zRqcLb6s9znxRfgDTdAoAe7yT"]'
2025-02-15 04:04:50.339 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:50.339 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4546/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-15 04:04:50.342 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:50.342 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61994/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-15 04:04:50.345 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:50.345 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4546/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:50.350 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:50.350 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:04:50.451 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:50.452 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4546/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:50.454 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592290345448448,"ephemeral":false}]'
2025-02-15 04:04:50.456 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:50.456 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61994/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:50.459 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739592290345448448,"ephemeral":false}]'
2025-02-15 04:04:50.460 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4546/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:50.465 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:50.466 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:04:50.566 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:50.566 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4546/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:50.569 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/waku/2/content/test.js","version":0,"timestamp":1739592290460453632,"ephemeral":false}]'
2025-02-15 04:04:50.571 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:50.571 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61994/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:50.573 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/waku/2/content/test.js","version":0,"timestamp":1739592290460453632,"ephemeral":false}]'
2025-02-15 04:04:50.575 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4546/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:50.580 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:50.581 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:04:50.681 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:50.682 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4546/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:50.684 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/22/sometopic/someencoding","version":0,"timestamp":1739592290575509760,"ephemeral":false}]'
2025-02-15 04:04:50.686 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:50.686 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61994/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:50.689 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/22/sometopic/someencoding","version":0,"timestamp":1739592290575509760,"ephemeral":false}]'
2025-02-15 04:04:50.690 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4546/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:50.696 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:50.697 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:04:50.797 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:50.798 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4546/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:50.800 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/toychat/2/huilong/proto","version":0,"timestamp":1739592290690847744,"ephemeral":false}]'
2025-02-15 04:04:50.802 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:50.802 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61994/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:50.805 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/toychat/2/huilong/proto","version":0,"timestamp":1739592290690847744,"ephemeral":false}]'
2025-02-15 04:04:50.807 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4546/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:50.812 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:50.812 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:04:50.912 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:50.913 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4546/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:50.916 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/statusim/1/community/cbor","version":0,"timestamp":1739592290806932224,"ephemeral":false}]'
2025-02-15 04:04:50.917 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:50.917 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61994/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:50.920 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/statusim/1/community/cbor","version":0,"timestamp":1739592290806932224,"ephemeral":false}]'
2025-02-15 04:04:50.921 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4546/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:50.926 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:50.927 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:04:51.027 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:51.028 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4546/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:51.031 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/27/sometopic/someencoding","version":0,"timestamp":1739592290921660160,"ephemeral":false}]'
2025-02-15 04:04:51.032 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:51.032 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61994/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:51.035 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/27/sometopic/someencoding","version":0,"timestamp":1739592290921660160,"ephemeral":false}]'
2025-02-15 04:04:51.036 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4546/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:51.042 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:51.042 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:04:51.142 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:51.143 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4546/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:51.145 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/29/sometopic/someencoding","version":0,"timestamp":1739592291036836352,"ephemeral":false}]'
2025-02-15 04:04:51.147 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:51.147 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61994/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:51.150 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/29/sometopic/someencoding","version":0,"timestamp":1739592291036836352,"ephemeral":false}]'
2025-02-15 04:04:51.152 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4546/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:04:51.157 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:04:51.158 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:04:51.258 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:51.259 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4546/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:51.262 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/20/sometopic/someencoding","version":0,"timestamp":1739592291151888896,"ephemeral":false}]'
2025-02-15 04:04:51.264 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:04:51.264 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61994/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:04:51.267 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/20/sometopic/someencoding","version":0,"timestamp":1739592291151888896,"ephemeral":false}]'
2025-02-15 04:04:51.270 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:04:51.271 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:04:51.271 DEBUG [src.node.waku_node] Stopping container with id 1e85ad1d3f5f
2025-02-15 04:04:52.513 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:04:52.513 DEBUG [src.node.waku_node] Stopping container with id c16c1b5ffbb4
2025-02-15 04:04:53.360 ERROR [src.node.docker_mananger] Max retries reached for container 1e85ad1d3f5f. Exiting log stream.
2025-02-15 04:04:54.071 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:04:54.073 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:04:54.091 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:04:54.101 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
