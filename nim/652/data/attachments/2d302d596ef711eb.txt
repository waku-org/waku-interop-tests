2025-02-15 04:04:59.758 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:04:59.759 DEBUG [tests.conftest] Running test: test_filter_update_subscription_with_invalid_request_id with id: 2025-02-15_04-04-59__a5eba0aa-01d9-4fb3-a87d-8981156119c8
2025-02-15 04:04:59.759 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:04:59.759 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-15 04:04:59.760 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-15 04:04:59.766 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:04:59.766 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_04-04-59__a5eba0aa-01d9-4fb3-a87d-8981156119c8__wakuorg_nwaku:latest.log
2025-02-15 04:04:59.766 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:04:59.766 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:04:59.768 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:04:59.768 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.74.126
2025-02-15 04:04:59.768 DEBUG [src.node.docker_mananger] Generated ports ['2906', '2907', '2908', '2909', '2910']
2025-02-15 04:04:59.768 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:04:59.768 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:04:59.769 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:04:59.769 DEBUG [src.node.docker_mananger] docker run -i -t -p 2906:2906 -p 2907:2907 -p 2908:2908 -p 2909:2909 -p 2910:2910 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2908 --rest-port=2906 --tcp-port=2907 --discv5-udp-port=2909 --rest-address=0.0.0.0 --nat=extip:172.18.74.126 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e27b6cba34975eaad2edb9612ed94660cb9a2d07d8a57ba4dd8349ccec9ae87d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2910 --metrics-logging=true --relay=true --filter=true
2025-02-15 04:05:00.000 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.74.126 waku d02ed0ebb4742fbf451c1a6e2507e43a8401b1a292d203440ec0d58f8b065599
2025-02-15 04:05:00.048 DEBUG [src.node.docker_mananger] Container started with ID d02ed0ebb474. Setting up logs at ./log/docker/node1_2025-02-15_04-04-59__a5eba0aa-01d9-4fb3-a87d-8981156119c8__wakuorg_nwaku:latest.log
2025-02-15 04:05:00.050 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2906
2025-02-15 04:05:00.050 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:05:00.550 ERROR [src.node.docker_mananger] Max retries reached for container d3124f463e68. Exiting log stream.
2025-02-15 04:05:01.050 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2906/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:01.054 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:05:01.054 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:05:01.054 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2906/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:01.057 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.74.126/tcp/2907/p2p/16Uiu2HAmT7fySGxDwjcGSRtyHcqkwYH3nk75guak9kbhAxUXsKN4","/ip4/172.18.74.126/tcp/2908/ws/p2p/16Uiu2HAmT7fySGxDwjcGSRtyHcqkwYH3nk75guak9kbhAxUXsKN4"],"enrUri":"enr:-L24QGQCYZJZb6gkSQhFRLghx8TTj34x6ozySIeK9VoqPdnxMwynN1OiAYP93LjglfBTRWkP5pNzuWAyZysUHk3LY1UCgmlkgnY0gmlwhKwSSn6KbXVsdGlhZGRyc5YACASsEkp-BgtbAAoErBJKfgYLXN0DgnJzhQADAQAAiXNlY3AyNTZrMaED1tmFJrKWfJrwqSOHUmeRDowJ_6aY3WHyl3TSSx8r6x2DdGNwggtbg3VkcIILXYV3YWt1MgU"}'
2025-02-15 04:05:01.057 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:05:01.057 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-15 04:05:01.064 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:05:01.064 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-15_04-04-59__a5eba0aa-01d9-4fb3-a87d-8981156119c8__wakuorg_nwaku:latest.log
2025-02-15 04:05:01.064 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:05:01.064 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:05:01.066 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:05:01.066 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.105.61
2025-02-15 04:05:01.066 DEBUG [src.node.docker_mananger] Generated ports ['20363', '20364', '20365', '20366', '20367']
2025-02-15 04:05:01.066 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:05:01.066 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:05:01.066 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:05:01.066 DEBUG [src.node.docker_mananger] docker run -i -t -p 20363:20363 -p 20364:20364 -p 20365:20365 -p 20366:20366 -p 20367:20367 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20365 --rest-port=20363 --tcp-port=20364 --discv5-udp-port=20366 --rest-address=0.0.0.0 --nat=extip:172.18.105.61 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e8593de9917bdb95f8b2f886cfd1cebdbd8bf2dfa3e6029c637ce022b5ae0fdf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20367 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QGQCYZJZb6gkSQhFRLghx8TTj34x6ozySIeK9VoqPdnxMwynN1OiAYP93LjglfBTRWkP5pNzuWAyZysUHk3LY1UCgmlkgnY0gmlwhKwSSn6KbXVsdGlhZGRyc5YACASsEkp-BgtbAAoErBJKfgYLXN0DgnJzhQADAQAAiXNlY3AyNTZrMaED1tmFJrKWfJrwqSOHUmeRDowJ_6aY3WHyl3TSSx8r6x2DdGNwggtbg3VkcIILXYV3YWt1MgU --filternode=/ip4/172.18.74.126/tcp/2907/p2p/16Uiu2HAmT7fySGxDwjcGSRtyHcqkwYH3nk75guak9kbhAxUXsKN4
2025-02-15 04:05:01.304 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.105.61 waku f68f29994b08ac94da62597f260e94cae4dcc3f78a438c0b2b806b476c46114a
2025-02-15 04:05:01.350 DEBUG [src.node.docker_mananger] Container started with ID f68f29994b08. Setting up logs at ./log/docker/node2_2025-02-15_04-04-59__a5eba0aa-01d9-4fb3-a87d-8981156119c8__wakuorg_nwaku:latest.log
2025-02-15 04:05:01.351 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20363
2025-02-15 04:05:01.351 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:05:02.351 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20363/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:02.355 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:05:02.355 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:05:02.355 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20363/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:05:02.357 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.105.61/tcp/20364/p2p/16Uiu2HAmSuKRHMRQoQc6x5vtMsVUqWyE33ioE7M2CwruSRCURvN6","/ip4/172.18.105.61/tcp/20365/ws/p2p/16Uiu2HAmSuKRHMRQoQc6x5vtMsVUqWyE33ioE7M2CwruSRCURvN6"],"enrUri":"enr:-L24QFGaWMFLIpts9njKu1k_h80tfqppLu7kSKkkeZei3TgCS2kXxGgmwek9iVm26M1wleoa1_M1gSYOnpCH8B7t0lcCgmlkgnY0gmlwhKwSaT2KbXVsdGlhZGRyc5YACASsEmk9Bk-MAAoErBJpPQZPjd0DgnJzhQADAQAAiXNlY3AyNTZrMaED069PO7m-KAsxXcXwu0eQqGa07F1hNmyd9S0TJhq06guDdGNwgk-Mg3VkcIJPjoV3YWt1MgA"}'
2025-02-15 04:05:02.358 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:05:02.358 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20363/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.74.126/tcp/2907/p2p/16Uiu2HAmT7fySGxDwjcGSRtyHcqkwYH3nk75guak9kbhAxUXsKN4"]'
2025-02-15 04:05:02.395 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:02.398 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-15 04:05:02.399 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2906/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 04:05:02.417 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:05:02.418 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20363/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e912bb75-f7c9-48fe-8b26-cbed4c84c6bf", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-15 04:05:02.430 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"e912bb75-f7c9-48fe-8b26-cbed4c84c6bf","statusDesc":"OK"}'
2025-02-15 04:05:02.431 INFO [src.node.api_clients.base_client] curl -v -X PUT "http://127.0.0.1:20363/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-15 04:05:02.434 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:20363/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
2025-02-15 04:05:02.436 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:05:02.437 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:05:02.438 DEBUG [src.node.waku_node] Stopping container with id d02ed0ebb474
2025-02-15 04:05:03.535 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:05:03.536 DEBUG [src.node.waku_node] Stopping container with id f68f29994b08
2025-02-15 04:05:04.348 ERROR [src.node.docker_mananger] Max retries reached for container d02ed0ebb474. Exiting log stream.
2025-02-15 04:05:05.058 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:05:05.059 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:05:05.063 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:05:05.068 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
