2025-02-15 04:02:46.050 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:02:46.050 DEBUG [tests.conftest] Running test: test_light_push_with_with_large_meta with id: 2025-02-15_04-02-46__4ae7d740-1831-4286-a318-a3654ba0a893
2025-02-15 04:02:46.050 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:02:46.051 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-15 04:02:46.057 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:02:46.057 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-15_04-02-46__4ae7d740-1831-4286-a318-a3654ba0a893__wakuorg_nwaku:latest.log
2025-02-15 04:02:46.058 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:02:46.058 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:02:46.059 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:02:46.059 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.169.131
2025-02-15 04:02:46.059 DEBUG [src.node.docker_mananger] Generated ports ['53120', '53121', '53122', '53123', '53124']
2025-02-15 04:02:46.060 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:02:46.060 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:02:46.060 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:02:46.060 DEBUG [src.node.docker_mananger] docker run -i -t -p 53120:53120 -p 53121:53121 -p 53122:53122 -p 53123:53123 -p 53124:53124 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53122 --rest-port=53120 --tcp-port=53121 --discv5-udp-port=53123 --rest-address=0.0.0.0 --nat=extip:172.18.169.131 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ce9e8ed549ee6c26bfbe69bdbd7d69428d37eead3d8eb1dfce11ff07c8b39301 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53124 --metrics-logging=true --lightpush=true --relay=true
2025-02-15 04:02:46.280 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.169.131 waku 68455af12763de037f1027470ff756ec6dd1415b684278c4ca475a76aebcaeaf
2025-02-15 04:02:46.330 DEBUG [src.node.docker_mananger] Container started with ID 68455af12763. Setting up logs at ./log/docker/receiving_node1_2025-02-15_04-02-46__4ae7d740-1831-4286-a318-a3654ba0a893__wakuorg_nwaku:latest.log
2025-02-15 04:02:46.332 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53120
2025-02-15 04:02:46.332 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:02:46.816 ERROR [src.node.docker_mananger] Max retries reached for container f36f1ecc6d45. Exiting log stream.
2025-02-15 04:02:47.332 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53120/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:47.335 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:02:47.335 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:02:47.336 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53120/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:47.338 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.169.131/tcp/53121/p2p/16Uiu2HAmR7VduMiLQgJruGTawez5P6jqzgG53ZmPnUNk2i4RtYwC","/ip4/172.18.169.131/tcp/53122/ws/p2p/16Uiu2HAmR7VduMiLQgJruGTawez5P6jqzgG53ZmPnUNk2i4RtYwC"],"enrUri":"enr:-L24QH32r0ORpE2uxZ_UuETF0dqTLct0ELG8sUJukg98OM42d6F6KsTNnNRuUcOxskp8vxWTAMiNYyVhXtXZCTRdVq8CgmlkgnY0gmlwhKwSqYOKbXVsdGlhZGRyc5YACASsEqmDBs-BAAoErBKpgwbPgt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDuRZ1XDD23FB_0vTLHqoJXyuOAvEj1eV01HP57gOxX7uDdGNwgs-Bg3VkcILPg4V3YWt1Mgk"}'
2025-02-15 04:02:47.338 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:02:47.345 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:02:47.345 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-15_04-02-46__4ae7d740-1831-4286-a318-a3654ba0a893__wakuorg_nwaku:latest.log
2025-02-15 04:02:47.345 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:02:47.345 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:02:47.346 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:02:47.347 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.117.248
2025-02-15 04:02:47.347 DEBUG [src.node.docker_mananger] Generated ports ['43110', '43111', '43112', '43113', '43114']
2025-02-15 04:02:47.347 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:02:47.347 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:02:47.347 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:02:47.347 DEBUG [src.node.docker_mananger] docker run -i -t -p 43110:43110 -p 43111:43111 -p 43112:43112 -p 43113:43113 -p 43114:43114 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43112 --rest-port=43110 --tcp-port=43111 --discv5-udp-port=43113 --rest-address=0.0.0.0 --nat=extip:172.18.117.248 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3ab1be8c38148978176a5b4fbd1e6dfdfef6af7b4fdeaae4fa0fd603c84bee6c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43114 --metrics-logging=true --lightpush=false --relay=true
2025-02-15 04:02:47.564 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.117.248 waku 135d7bd13163cc8811f718e40f13e2266e907aab9e90eff59a1b62ed136a7203
2025-02-15 04:02:47.616 DEBUG [src.node.docker_mananger] Container started with ID 135d7bd13163. Setting up logs at ./log/docker/receiving_node2_2025-02-15_04-02-46__4ae7d740-1831-4286-a318-a3654ba0a893__wakuorg_nwaku:latest.log
2025-02-15 04:02:47.617 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 43110
2025-02-15 04:02:47.617 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:02:48.617 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43110/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:48.620 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:02:48.620 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:02:48.620 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43110/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:48.622 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.117.248/tcp/43111/p2p/16Uiu2HAmN1tNU1eEztsBVz6AAnbszartcWEJtd8Q5dnEyocLBvHu","/ip4/172.18.117.248/tcp/43112/ws/p2p/16Uiu2HAmN1tNU1eEztsBVz6AAnbszartcWEJtd8Q5dnEyocLBvHu"],"enrUri":"enr:-L24QP2UE2C1CuvCWZE7MATnot6W65P_toLIzlrcr8q2RkFSPB4sQFCcKA8prhhBPReHY7m4pVH7XarFTNHUzlu-nJUCgmlkgnY0gmlwhKwSdfiKbXVsdGlhZGRyc5YACASsEnX4BqhnAAoErBJ1-AaoaN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDixOeOC5JBlKUW2BnOKJwSLqnoLnSEYLcWZKyfdnueWiDdGNwgqhng3VkcIKoaYV3YWt1MgE"}'
2025-02-15 04:02:48.623 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:02:48.623 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43110/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.169.131/tcp/53121/p2p/16Uiu2HAmR7VduMiLQgJruGTawez5P6jqzgG53ZmPnUNk2i4RtYwC"]'
2025-02-15 04:02:48.659 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:02:48.669 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:02:48.670 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-15_04-02-46__4ae7d740-1831-4286-a318-a3654ba0a893__wakuorg_nwaku:latest.log
2025-02-15 04:02:48.670 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:02:48.670 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:02:48.671 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:02:48.671 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.98.168
2025-02-15 04:02:48.672 DEBUG [src.node.docker_mananger] Generated ports ['53380', '53381', '53382', '53383', '53384']
2025-02-15 04:02:48.672 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:02:48.672 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:02:48.672 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:02:48.672 DEBUG [src.node.docker_mananger] docker run -i -t -p 53380:53380 -p 53381:53381 -p 53382:53382 -p 53383:53383 -p 53384:53384 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53382 --rest-port=53380 --tcp-port=53381 --discv5-udp-port=53383 --rest-address=0.0.0.0 --nat=extip:172.18.98.168 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8aeca6ee8b568ab7de23fb5a8d6dabeb6acb6ad832e201c5652b6c21c98eb80a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53384 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QH32r0ORpE2uxZ_UuETF0dqTLct0ELG8sUJukg98OM42d6F6KsTNnNRuUcOxskp8vxWTAMiNYyVhXtXZCTRdVq8CgmlkgnY0gmlwhKwSqYOKbXVsdGlhZGRyc5YACASsEqmDBs-BAAoErBKpgwbPgt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDuRZ1XDD23FB_0vTLHqoJXyuOAvEj1eV01HP57gOxX7uDdGNwgs-Bg3VkcILPg4V3YWt1Mgk --lightpushnode=/ip4/172.18.169.131/tcp/53121/p2p/16Uiu2HAmR7VduMiLQgJruGTawez5P6jqzgG53ZmPnUNk2i4RtYwC --lightpush=true --relay=false
2025-02-15 04:02:48.902 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.98.168 waku ca224b169fd0bd4f3bb082b0a362a96643656e8a28c537b6d2c6e3133e2e65b6
2025-02-15 04:02:48.948 DEBUG [src.node.docker_mananger] Container started with ID ca224b169fd0. Setting up logs at ./log/docker/lightpush_node1_2025-02-15_04-02-46__4ae7d740-1831-4286-a318-a3654ba0a893__wakuorg_nwaku:latest.log
2025-02-15 04:02:48.949 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53380
2025-02-15 04:02:48.949 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:02:49.951 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53380/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:49.953 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:02:49.954 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:02:49.954 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53380/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:49.956 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.98.168/tcp/53381/p2p/16Uiu2HAmPSzeF6VRz41ENFqvxPPYHvK2xtcQqbq9F8Jsi3HRJXQw","/ip4/172.18.98.168/tcp/53382/ws/p2p/16Uiu2HAmPSzeF6VRz41ENFqvxPPYHvK2xtcQqbq9F8Jsi3HRJXQw"],"enrUri":"enr:-L24QK31C3USabwvhjC3Zt36O98YO7A99TQc1ZvISOA537wKWAOs2Mx0-zLh8a2r7FTh--YvVE0moMi3n_kSvB0LDEMCgmlkgnY0gmlwhKwSYqiKbXVsdGlhZGRyc5YACASsEmKoBtCFAAoErBJiqAbQht0DgnJzhQADAQAAiXNlY3AyNTZrMaEDoF3qwEaWWI5ODPpPl5AKhjCVtZ1y3PQp-aRjb3KQksyDdGNwgtCFg3VkcILQh4V3YWt1Mgg"}'
2025-02-15 04:02:49.956 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:02:49.956 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53380/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.169.131/tcp/53121/p2p/16Uiu2HAmR7VduMiLQgJruGTawez5P6jqzgG53ZmPnUNk2i4RtYwC"]'
2025-02-15 04:02:49.992 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:02:49.994 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53380/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.117.248/tcp/43111/p2p/16Uiu2HAmN1tNU1eEztsBVz6AAnbszartcWEJtd8Q5dnEyocLBvHu"]'
2025-02-15 04:02:50.022 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:02:50.025 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53120/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 04:02:50.032 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:02:50.032 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43110/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 04:02:50.036 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:02:50.040 DEBUG [src.steps.light_push] Lightpushing message
2025-02-15 04:02:50.040 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53380/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739592170039977984, "meta": "YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYQ=="}}'
2025-02-15 04:02:50.050 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:53380/lightpush/v1/message. Response content: b'Failed to request a message push: decode_rpc_failure: (kind: InvalidLengthField, field: "meta")'
2025-02-15 04:02:50.052 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:02:50.053 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:02:50.053 DEBUG [src.node.waku_node] Stopping container with id 68455af12763
2025-02-15 04:02:50.828 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:02:50.828 DEBUG [src.node.waku_node] Stopping container with id 135d7bd13163
2025-02-15 04:02:51.702 ERROR [src.node.docker_mananger] Max retries reached for container 68455af12763. Exiting log stream.
2025-02-15 04:02:52.038 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:02:52.038 DEBUG [src.node.waku_node] Stopping container with id ca224b169fd0
2025-02-15 04:02:52.850 ERROR [src.node.docker_mananger] Max retries reached for container 135d7bd13163. Exiting log stream.
2025-02-15 04:02:52.944 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:02:52.945 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:02:52.960 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:02:52.967 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:02:52.973 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
