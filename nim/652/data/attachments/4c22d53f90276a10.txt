2025-02-15 04:08:02.578 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:08:02.578 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_version with id: 2025-02-15_04-08-02__4e338cd9-791b-4fd7-985b-a2fe3e5a1fd1
2025-02-15 04:08:02.579 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:08:02.579 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-15 04:08:02.586 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:08:02.586 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-15_04-08-02__4e338cd9-791b-4fd7-985b-a2fe3e5a1fd1__wakuorg_nwaku:latest.log
2025-02-15 04:08:02.586 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:08:02.586 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:08:02.588 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:08:02.588 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.95.77
2025-02-15 04:08:02.588 DEBUG [src.node.docker_mananger] Generated ports ['2950', '2951', '2952', '2953', '2954']
2025-02-15 04:08:02.588 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:08:02.588 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:08:02.588 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:08:02.589 DEBUG [src.node.docker_mananger] docker run -i -t -p 2950:2950 -p 2951:2951 -p 2952:2952 -p 2953:2953 -p 2954:2954 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2952 --rest-port=2950 --tcp-port=2951 --discv5-udp-port=2953 --rest-address=0.0.0.0 --nat=extip:172.18.95.77 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4caca4e231fde8c73ae8fea1bb2eedaa571c616319d6dbc3caebfe7abe56dfba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2954 --metrics-logging=true --lightpush=true --relay=true
2025-02-15 04:08:02.834 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.95.77 waku 751c5370b270c0822b9769a7c558c2970d2012514075893f2076c64e500c83f2
2025-02-15 04:08:02.876 DEBUG [src.node.docker_mananger] Container started with ID 751c5370b270. Setting up logs at ./log/docker/receiving_node1_2025-02-15_04-08-02__4e338cd9-791b-4fd7-985b-a2fe3e5a1fd1__wakuorg_nwaku:latest.log
2025-02-15 04:08:02.877 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2950
2025-02-15 04:08:02.877 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:08:03.379 ERROR [src.node.docker_mananger] Max retries reached for container 3039c4ee3ba4. Exiting log stream.
2025-02-15 04:08:03.878 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2950/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:03.881 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:08:03.881 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:08:03.881 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2950/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:03.884 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.95.77/tcp/2951/p2p/16Uiu2HAmPdoumW4LcxBrcPoKTnGLUJCaMffZYJ2QtsLBo1Dihc66","/ip4/172.18.95.77/tcp/2952/ws/p2p/16Uiu2HAmPdoumW4LcxBrcPoKTnGLUJCaMffZYJ2QtsLBo1Dihc66"],"enrUri":"enr:-L24QEgGTxm-rVmjArxzLZGady_GRV3QW_Cgc726Ajnw5WtycO-A5q_yKaBYVNKYtWsgWCPCYB6Fhn84Gn3Smf3dYgMCgmlkgnY0gmlwhKwSX02KbXVsdGlhZGRyc5YACASsEl9NBguHAAoErBJfTQYLiN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDoyMruY1ncGnSoXsAA8slPHRH0BfrmNOjTium1Bzn6WODdGNwgguHg3VkcIILiYV3YWt1Mgk"}'
2025-02-15 04:08:03.884 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:08:03.891 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:08:03.891 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-15_04-08-02__4e338cd9-791b-4fd7-985b-a2fe3e5a1fd1__wakuorg_nwaku:latest.log
2025-02-15 04:08:03.891 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:08:03.892 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:08:03.893 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:08:03.893 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.21.33
2025-02-15 04:08:03.893 DEBUG [src.node.docker_mananger] Generated ports ['23267', '23268', '23269', '23270', '23271']
2025-02-15 04:08:03.894 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:08:03.894 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:08:03.894 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:08:03.894 DEBUG [src.node.docker_mananger] docker run -i -t -p 23267:23267 -p 23268:23268 -p 23269:23269 -p 23270:23270 -p 23271:23271 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23269 --rest-port=23267 --tcp-port=23268 --discv5-udp-port=23270 --rest-address=0.0.0.0 --nat=extip:172.18.21.33 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cbbe7b6a00cbe33244b7d1756eadaa3c3dcdab8dec6ce9a282aa2dde1b2118bb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23271 --metrics-logging=true --lightpush=false --relay=true
2025-02-15 04:08:04.128 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.21.33 waku 28d97a2a06193ee00e3dfada43c322b4a280d0d3cb8c34dca635f01a10fb06cd
2025-02-15 04:08:04.182 DEBUG [src.node.docker_mananger] Container started with ID 28d97a2a0619. Setting up logs at ./log/docker/receiving_node2_2025-02-15_04-08-02__4e338cd9-791b-4fd7-985b-a2fe3e5a1fd1__wakuorg_nwaku:latest.log
2025-02-15 04:08:04.183 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23267
2025-02-15 04:08:04.184 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:08:05.184 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23267/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:05.187 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:08:05.187 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:08:05.187 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23267/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:05.190 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.21.33/tcp/23268/p2p/16Uiu2HAmR5DNkXcZDYGRtoppfpJt77CPHs2NPdHrTWoJL5op24V6","/ip4/172.18.21.33/tcp/23269/ws/p2p/16Uiu2HAmR5DNkXcZDYGRtoppfpJt77CPHs2NPdHrTWoJL5op24V6"],"enrUri":"enr:-L24QMtGrlh2QM8anJ64bRcqdHFqKZ_vBAxDF8sJru8lwg75fuPeln5pGyIrPpiYiC3TV1mI3udJ9qo43QPXjn8NdxACgmlkgnY0gmlwhKwSFSGKbXVsdGlhZGRyc5YACASsEhUhBlrkAAoErBIVIQZa5d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDuIDpAPlPgaKhfQFqsdkqa2eZIRFWYj0ZUC_t_TyxIiGDdGNwglrkg3VkcIJa5oV3YWt1MgE"}'
2025-02-15 04:08:05.190 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:08:05.190 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23267/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.95.77/tcp/2951/p2p/16Uiu2HAmPdoumW4LcxBrcPoKTnGLUJCaMffZYJ2QtsLBo1Dihc66"]'
2025-02-15 04:08:05.232 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:05.240 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:08:05.240 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-15_04-08-02__4e338cd9-791b-4fd7-985b-a2fe3e5a1fd1__wakuorg_nwaku:latest.log
2025-02-15 04:08:05.240 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:08:05.241 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:08:05.242 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:08:05.242 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.205.10
2025-02-15 04:08:05.243 DEBUG [src.node.docker_mananger] Generated ports ['36841', '36842', '36843', '36844', '36845']
2025-02-15 04:08:05.243 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:08:05.243 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:08:05.243 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:08:05.243 DEBUG [src.node.docker_mananger] docker run -i -t -p 36841:36841 -p 36842:36842 -p 36843:36843 -p 36844:36844 -p 36845:36845 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36843 --rest-port=36841 --tcp-port=36842 --discv5-udp-port=36844 --rest-address=0.0.0.0 --nat=extip:172.18.205.10 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1b29ffeba8ef1be5ace428bd9cd5be7bdbe0f063a6001ab9d0cc7ec92d0e11b1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36845 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QEgGTxm-rVmjArxzLZGady_GRV3QW_Cgc726Ajnw5WtycO-A5q_yKaBYVNKYtWsgWCPCYB6Fhn84Gn3Smf3dYgMCgmlkgnY0gmlwhKwSX02KbXVsdGlhZGRyc5YACASsEl9NBguHAAoErBJfTQYLiN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDoyMruY1ncGnSoXsAA8slPHRH0BfrmNOjTium1Bzn6WODdGNwgguHg3VkcIILiYV3YWt1Mgk --lightpushnode=/ip4/172.18.95.77/tcp/2951/p2p/16Uiu2HAmPdoumW4LcxBrcPoKTnGLUJCaMffZYJ2QtsLBo1Dihc66 --lightpush=true --relay=false
2025-02-15 04:08:05.485 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.205.10 waku 3b222e1b8d3aa2e9dd785bdde0cd39efa03e42cb7ce11d59a229ec81acf29886
2025-02-15 04:08:05.534 DEBUG [src.node.docker_mananger] Container started with ID 3b222e1b8d3a. Setting up logs at ./log/docker/lightpush_node1_2025-02-15_04-08-02__4e338cd9-791b-4fd7-985b-a2fe3e5a1fd1__wakuorg_nwaku:latest.log
2025-02-15 04:08:05.534 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36841
2025-02-15 04:08:05.534 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:08:06.535 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36841/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:06.538 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:08:06.538 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:08:06.538 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36841/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:08:06.541 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.205.10/tcp/36842/p2p/16Uiu2HAkzkZKsdcu4i93wFxFWUbJiCcXveehNyhZrTPjDk5tdW3R","/ip4/172.18.205.10/tcp/36843/ws/p2p/16Uiu2HAkzkZKsdcu4i93wFxFWUbJiCcXveehNyhZrTPjDk5tdW3R"],"enrUri":"enr:-L24QNiiYYvA1T_Otw7GHlJG0QqedGTG6Ke2jwgdLWbDbB9KWcEqjqTP-sjkBV9F4hAKlCcytQ_jz32EN80YzXd98XcCgmlkgnY0gmlwhKwSzQqKbXVsdGlhZGRyc5YACASsEs0KBo_qAAoErBLNCgaP690DgnJzhQADAQAAiXNlY3AyNTZrMaECTyDyUIeqzDtiAvbb_vNLyuU_ScLFk6QixGr5acMiHLCDdGNwgo_qg3VkcIKP7IV3YWt1Mgg"}'
2025-02-15 04:08:06.541 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:08:06.541 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36841/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.95.77/tcp/2951/p2p/16Uiu2HAmPdoumW4LcxBrcPoKTnGLUJCaMffZYJ2QtsLBo1Dihc66"]'
2025-02-15 04:08:06.580 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:06.583 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36841/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.21.33/tcp/23268/p2p/16Uiu2HAmR5DNkXcZDYGRtoppfpJt77CPHs2NPdHrTWoJL5op24V6"]'
2025-02-15 04:08:06.609 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:06.614 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2950/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 04:08:06.621 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:06.621 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23267/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 04:08:06.627 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:08:06.634 DEBUG [src.steps.light_push] Lightpushing message
2025-02-15 04:08:06.634 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36841/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739592486634109184, "version": 2.1}}'
2025-02-15 04:08:06.637 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:36841/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-15 04:08:06.640 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:08:06.641 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:08:06.641 DEBUG [src.node.waku_node] Stopping container with id 751c5370b270
2025-02-15 04:08:07.414 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:08:07.415 DEBUG [src.node.waku_node] Stopping container with id 28d97a2a0619
2025-02-15 04:08:08.248 ERROR [src.node.docker_mananger] Max retries reached for container 751c5370b270. Exiting log stream.
2025-02-15 04:08:08.941 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:08:08.941 DEBUG [src.node.waku_node] Stopping container with id 3b222e1b8d3a
2025-02-15 04:08:09.754 ERROR [src.node.docker_mananger] Max retries reached for container 28d97a2a0619. Exiting log stream.
2025-02-15 04:08:10.490 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:08:10.491 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:08:10.506 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:08:10.512 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:08:10.518 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
