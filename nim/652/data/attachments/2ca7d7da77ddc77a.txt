2025-02-15 04:02:57.699 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 04:02:57.699 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_from_non_existing_content_topic with id: 2025-02-15_04-02-57__9ba729c4-2603-4d71-a2e0-559c45f78709
2025-02-15 04:02:57.699 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 04:02:57.700 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-15 04:02:57.700 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-15 04:02:57.706 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:02:57.706 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_04-02-57__9ba729c4-2603-4d71-a2e0-559c45f78709__wakuorg_nwaku:latest.log
2025-02-15 04:02:57.706 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:02:57.706 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:02:57.708 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:02:57.708 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.109.239
2025-02-15 04:02:57.708 DEBUG [src.node.docker_mananger] Generated ports ['22240', '22241', '22242', '22243', '22244']
2025-02-15 04:02:57.708 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:02:57.708 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:02:57.708 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:02:57.709 DEBUG [src.node.docker_mananger] docker run -i -t -p 22240:22240 -p 22241:22241 -p 22242:22242 -p 22243:22243 -p 22244:22244 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22242 --rest-port=22240 --tcp-port=22241 --discv5-udp-port=22243 --rest-address=0.0.0.0 --nat=extip:172.18.109.239 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=51c7ea980d3e16cdf0f5aa8bc9383c14a0b30cd8adad9f8ea7dd7dec31c2a4dd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22244 --metrics-logging=true --relay=true --filter=true
2025-02-15 04:02:57.933 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.109.239 waku 36de6c72bf7616d2d7911a08a7cbcc84ca8ef9963c4fe096914baae68bde1f56
2025-02-15 04:02:57.989 DEBUG [src.node.docker_mananger] Container started with ID 36de6c72bf76. Setting up logs at ./log/docker/node1_2025-02-15_04-02-57__9ba729c4-2603-4d71-a2e0-559c45f78709__wakuorg_nwaku:latest.log
2025-02-15 04:02:57.990 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22240
2025-02-15 04:02:57.991 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:02:58.501 ERROR [src.node.docker_mananger] Max retries reached for container e917b05d7f27. Exiting log stream.
2025-02-15 04:02:58.991 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22240/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:58.994 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:02:58.995 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:02:58.995 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22240/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:02:58.997 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.109.239/tcp/22241/p2p/16Uiu2HAm6J9eW53DrV4SKJU9MqSEHqemMxksigayk1GjPQm5imCc","/ip4/172.18.109.239/tcp/22242/ws/p2p/16Uiu2HAm6J9eW53DrV4SKJU9MqSEHqemMxksigayk1GjPQm5imCc"],"enrUri":"enr:-L24QJyt0v9WFnJPfNgojD18Br1QDMEu-OZtSqi_wwzjMji3T3nqQ3UZtGdKeJnvQsyOyGHqv9C614DikJhfkWZZLAACgmlkgnY0gmlwhKwSbe-KbXVsdGlhZGRyc5YACASsEm3vBlbhAAoErBJt7wZW4t0DgnJzhQADAQAAiXNlY3AyNTZrMaECoYMxfj3HRqJ2saMK-lQM9i6kaFYafqA3SNvee6m4_7mDdGNwglbhg3VkcIJW44V3YWt1MgU"}'
2025-02-15 04:02:58.997 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:02:58.998 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-15 04:02:59.004 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 04:02:59.004 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-15_04-02-57__9ba729c4-2603-4d71-a2e0-559c45f78709__wakuorg_nwaku:latest.log
2025-02-15 04:02:59.004 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 04:02:59.004 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 04:02:59.005 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 04:02:59.005 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.213.209
2025-02-15 04:02:59.006 DEBUG [src.node.docker_mananger] Generated ports ['23933', '23934', '23935', '23936', '23937']
2025-02-15 04:02:59.006 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 04:02:59.006 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 04:02:59.006 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 04:02:59.006 DEBUG [src.node.docker_mananger] docker run -i -t -p 23933:23933 -p 23934:23934 -p 23935:23935 -p 23936:23936 -p 23937:23937 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23935 --rest-port=23933 --tcp-port=23934 --discv5-udp-port=23936 --rest-address=0.0.0.0 --nat=extip:172.18.213.209 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=80eddba4f1c0aeca1eaddcdb0da9ecef7b5f8d4a6f4b3cb23d1bbc3f236de0ec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23937 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QJyt0v9WFnJPfNgojD18Br1QDMEu-OZtSqi_wwzjMji3T3nqQ3UZtGdKeJnvQsyOyGHqv9C614DikJhfkWZZLAACgmlkgnY0gmlwhKwSbe-KbXVsdGlhZGRyc5YACASsEm3vBlbhAAoErBJt7wZW4t0DgnJzhQADAQAAiXNlY3AyNTZrMaECoYMxfj3HRqJ2saMK-lQM9i6kaFYafqA3SNvee6m4_7mDdGNwglbhg3VkcIJW44V3YWt1MgU --filternode=/ip4/172.18.109.239/tcp/22241/p2p/16Uiu2HAm6J9eW53DrV4SKJU9MqSEHqemMxksigayk1GjPQm5imCc
2025-02-15 04:02:59.232 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.213.209 waku 6dc26c30562bd3f6652f484dd8c5fe37311d620b6c0b46de0082ac06e4f37375
2025-02-15 04:02:59.281 DEBUG [src.node.docker_mananger] Container started with ID 6dc26c30562b. Setting up logs at ./log/docker/node2_2025-02-15_04-02-57__9ba729c4-2603-4d71-a2e0-559c45f78709__wakuorg_nwaku:latest.log
2025-02-15 04:02:59.282 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23933
2025-02-15 04:02:59.282 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 04:03:00.283 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23933/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:00.286 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 04:03:00.286 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 04:03:00.287 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23933/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:00.289 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.213.209/tcp/23934/p2p/16Uiu2HAmB4vMMhZbJqJozRVEf7yEhNaZemunCrtCjUnAdwe8Tx61","/ip4/172.18.213.209/tcp/23935/ws/p2p/16Uiu2HAmB4vMMhZbJqJozRVEf7yEhNaZemunCrtCjUnAdwe8Tx61"],"enrUri":"enr:-L24QFHXUK5dsk-9T9k4ANxsLFCAl0KkkQGCNLemzf7oVnH9HF7R6NBRckNXCkdjwVKN9DDUEKGteWJ1NWhezAiWnzwCgmlkgnY0gmlwhKwS1dGKbXVsdGlhZGRyc5YACASsEtXRBl1-AAoErBLV0QZdf90DgnJzhQADAQAAiXNlY3AyNTZrMaEC6GoLSF0Poe48qY2xCGvmP6_AdeKc_y_5ve3VY03TCf6DdGNwgl1-g3VkcIJdgIV3YWt1MgA"}'
2025-02-15 04:03:00.289 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 04:03:00.289 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23933/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.109.239/tcp/22241/p2p/16Uiu2HAm6J9eW53DrV4SKJU9MqSEHqemMxksigayk1GjPQm5imCc"]'
2025-02-15 04:03:00.325 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:00.326 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-15 04:03:00.326 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22240/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 04:03:00.344 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:00.345 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23933/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "9e9fa79b-a32b-40c1-8787-6aba6ffbe69e", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-15 04:03:00.356 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"9e9fa79b-a32b-40c1-8787-6aba6ffbe69e","statusDesc":"OK"}'
2025-02-15 04:03:00.358 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:23933/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/2/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-15 04:03:00.365 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:23933/filter/v2/subscriptions. Response content: b'{"requestId":"1","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
2025-02-15 04:03:00.366 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22240/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 04:03:00.374 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 04:03:00.374 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 04:03:00.474 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-15 04:03:00.475 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23933/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-15 04:03:00.477 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1739592180366725120,"ephemeral":false}]'
2025-02-15 04:03:00.481 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 04:03:00.482 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 04:03:00.482 DEBUG [src.node.waku_node] Stopping container with id 36de6c72bf76
2025-02-15 04:03:01.575 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:03:01.575 DEBUG [src.node.waku_node] Stopping container with id 6dc26c30562b
2025-02-15 04:03:02.387 ERROR [src.node.docker_mananger] Max retries reached for container 36de6c72bf76. Exiting log stream.
2025-02-15 04:03:03.071 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 04:03:03.072 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 04:03:03.078 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 04:03:03.083 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
