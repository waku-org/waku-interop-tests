[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_from_some_of_the_subscribed_content_topics with id: 2024-12-29_18-48-10__2f2378b4-fd04-44b2-b04b-2f4881bc4a5e
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-29_18-48-10__2f2378b4-fd04-44b2-b04b-2f4881bc4a5e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.87.184
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['32263', '32264', '32265', '32266', '32267']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 32263:32263 -p 32264:32264 -p 32265:32265 -p 32266:32266 -p 32267:32267 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32265 --rest-port=32263 --tcp-port=32264 --discv5-udp-port=32266 --rest-address=0.0.0.0 --nat=extip:172.18.87.184 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=54fa51df31de932aaea8fc564ebb958acc6670a8e4f3fe1bee56c94b8cdd0abb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32267 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.87.184 waku 49a95753db69616239c3df3fbdd6082affeeef3561a2b77034182a68d6c93669
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 49a95753db69. Setting up logs at ./log/docker/node1_2024-12-29_18-48-10__2f2378b4-fd04-44b2-b04b-2f4881bc4a5e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 32263
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container af87672b73ec. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32263/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32263/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.87.184/tcp/32264/p2p/16Uiu2HAmCAqP2rgvUcw8a9MmpzbTPJdViiCgKUHt8KGxDgcdWrXU","/ip4/172.18.87.184/tcp/32265/ws/p2p/16Uiu2HAmCAqP2rgvUcw8a9MmpzbTPJdViiCgKUHt8KGxDgcdWrXU"],"enrUri":"enr:-L24QBkpRwi82M7pG9DGyIY0vDU28g09vSIDd6L47ZLL2m1UTjbN7aNd0TdpeANpzWoisqTu94vqZMDr-2pXbwQfxW8CgmlkgnY0gmlwhKwSV7iKbXVsdGlhZGRyc5YACASsEle4Bn4IAAoErBJXuAZ-Cd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-MmYUWdQSuzCMbP-gWrAAQgHNEUVXXwvRKmP8kAVqzODdGNwgn4Ig3VkcIJ-CoV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-29_18-48-10__2f2378b4-fd04-44b2-b04b-2f4881bc4a5e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.233.237
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['28205', '28206', '28207', '28208', '28209']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 28205:28205 -p 28206:28206 -p 28207:28207 -p 28208:28208 -p 28209:28209 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28207 --rest-port=28205 --tcp-port=28206 --discv5-udp-port=28208 --rest-address=0.0.0.0 --nat=extip:172.18.233.237 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ad2305dfead4498c8dc180c70ed7dc1adfe1aeac39cabd75fc0d409d663fd9d1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28209 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QBkpRwi82M7pG9DGyIY0vDU28g09vSIDd6L47ZLL2m1UTjbN7aNd0TdpeANpzWoisqTu94vqZMDr-2pXbwQfxW8CgmlkgnY0gmlwhKwSV7iKbXVsdGlhZGRyc5YACASsEle4Bn4IAAoErBJXuAZ-Cd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-MmYUWdQSuzCMbP-gWrAAQgHNEUVXXwvRKmP8kAVqzODdGNwgn4Ig3VkcIJ-CoV3YWt1MgU --filternode=/ip4/172.18.87.184/tcp/32264/p2p/16Uiu2HAmCAqP2rgvUcw8a9MmpzbTPJdViiCgKUHt8KGxDgcdWrXU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.233.237 waku e6f27ce01d5844d34fefebdc60440a555f67a845a81dad6b8089fc8ddeafd2a4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e6f27ce01d58. Setting up logs at ./log/docker/node2_2024-12-29_18-48-10__2f2378b4-fd04-44b2-b04b-2f4881bc4a5e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 28205
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28205/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28205/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.233.237/tcp/28206/p2p/16Uiu2HAmLMCwjnwhyqPLEtzJF3VLkPH1k1VSxFRbpPJVuf7HxMmv","/ip4/172.18.233.237/tcp/28207/ws/p2p/16Uiu2HAmLMCwjnwhyqPLEtzJF3VLkPH1k1VSxFRbpPJVuf7HxMmv"],"enrUri":"enr:-L24QJBvxbc7Z28bB34Jt3cd3jeHqNoIN8Qbnq-qHiPzUur8BmiXu-FdrLXBrOrBFdKFuH1KpXALg6UjpPTBkxTvkD0CgmlkgnY0gmlwhKwS6e2KbXVsdGlhZGRyc5YACASsEuntBm4uAAoErBLp7QZuL90DgnJzhQADAQAAiXNlY3AyNTZrMaEDck9H5sU7VQ_F_E95IWivKR79qHrl2-EJkPbP8b_ud9WDdGNwgm4ug3VkcIJuMIV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28205/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.87.184/tcp/32264/p2p/16Uiu2HAmCAqP2rgvUcw8a9MmpzbTPJdViiCgKUHt8KGxDgcdWrXU"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32263/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28205/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "9e4562ab-d2e5-4d87-9261-e88c109605ff", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"9e4562ab-d2e5-4d87-9261-e88c109605ff","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32263/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28205/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "66a6e900-bb7a-4b90-9411-bc530dd6acb4", "contentFilters": ["Hello World!", "1234567890"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"66a6e900-bb7a-4b90-9411-bc530dd6acb4","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32263/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28205/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1735498093518180352,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:28205/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["Hello World!"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32263/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28205/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1735498093631864576,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32263/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "Hello World!", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28205/filter/v2/messages/Hello%20World%21" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28205/filter/v2/messages/Hello%20World%21. Response content: b'Not subscribed to topic: Hello World!'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 49a95753db69
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e6f27ce01d58
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 49a95753db69. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.