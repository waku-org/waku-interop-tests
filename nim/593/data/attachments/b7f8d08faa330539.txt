[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-12-29_18-47-53__9e60fc27-fbd4-4a0d-9e8f-4c86cb64b696
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-29_18-47-53__9e60fc27-fbd4-4a0d-9e8f-4c86cb64b696__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.62.153
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['46515', '46516', '46517', '46518', '46519']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 46515:46515 -p 46516:46516 -p 46517:46517 -p 46518:46518 -p 46519:46519 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46517 --rest-port=46515 --tcp-port=46516 --discv5-udp-port=46518 --rest-address=0.0.0.0 --nat=extip:172.18.62.153 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=faebd3fc7ee0d8be51a9260b8a5c45cded6b3a55b9ae015edacb78af99a583d6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46519 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.62.153 waku e0e0ad54998c6adcd7fa1f07aab504e277428dcb0f3cf4ab768906d6384ccf2e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e0e0ad54998c. Setting up logs at ./log/docker/receiving_node1_2024-12-29_18-47-53__9e60fc27-fbd4-4a0d-9e8f-4c86cb64b696__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 46515
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2521ff47b68a. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46515/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46515/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.62.153/tcp/46516/p2p/16Uiu2HAmP1gW2u6i6y1WHqGyFkLuwQr8StuUGe3e8nJArV1Z7369","/ip4/172.18.62.153/tcp/46517/ws/p2p/16Uiu2HAmP1gW2u6i6y1WHqGyFkLuwQr8StuUGe3e8nJArV1Z7369"],"enrUri":"enr:-L24QMK7PXur8OQ5ZUs8zDzhsaBS7gPDCi1bEl0x-3wxS_JBGaKYR_wFVjwWs9GddkvDW_6_nX2-4HZo8se_w5pb2QECgmlkgnY0gmlwhKwSPpmKbXVsdGlhZGRyc5YACASsEj6ZBrW0AAoErBI-mQa1td0DgnJzhQADAQAAiXNlY3AyNTZrMaEDmeHiUNfsL1i1XpLjChf8poSjfPoOLZVW4WXcs7CKauKDdGNwgrW0g3VkcIK1toV3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-29_18-47-53__9e60fc27-fbd4-4a0d-9e8f-4c86cb64b696__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.250.213
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['36522', '36523', '36524', '36525', '36526']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 36522:36522 -p 36523:36523 -p 36524:36524 -p 36525:36525 -p 36526:36526 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36524 --rest-port=36522 --tcp-port=36523 --discv5-udp-port=36525 --rest-address=0.0.0.0 --nat=extip:172.18.250.213 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cddbcc5a5765d7fa8b6d1f37bc6093a9c599c3fd751ae9f3fabae8fa6c1afdf1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36526 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.250.213 waku e12f20a3fb1dfe5748162d596e313a26aaa449fb5c9902185140cfa1590dfeef
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e12f20a3fb1d. Setting up logs at ./log/docker/receiving_node2_2024-12-29_18-47-53__9e60fc27-fbd4-4a0d-9e8f-4c86cb64b696__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 36522
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36522/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36522/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.250.213/tcp/36523/p2p/16Uiu2HAm8Z1fGUnAwE6H3R9HZBMfRd7qiCgvDUuLBBMEwjEpnaNF","/ip4/172.18.250.213/tcp/36524/ws/p2p/16Uiu2HAm8Z1fGUnAwE6H3R9HZBMfRd7qiCgvDUuLBBMEwjEpnaNF"],"enrUri":"enr:-L24QC9SFPmNMnD7uEv7YlicAROvGUtj6odb_qiEm7h44fF9eOrtvZ4cT90EK3IFzNjrHZp4o6HYB3kYXJ5tjO5R5wgCgmlkgnY0gmlwhKwS-tWKbXVsdGlhZGRyc5YACASsEvrVBo6rAAoErBL61QaOrN0DgnJzhQADAQAAiXNlY3AyNTZrMaECwwk_pYRY1pq02j-u98SduxdDsxb6sGYcoOX5TdWLiQyDdGNwgo6rg3VkcIKOrYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36522/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.62.153/tcp/46516/p2p/16Uiu2HAmP1gW2u6i6y1WHqGyFkLuwQr8StuUGe3e8nJArV1Z7369"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-29_18-47-53__9e60fc27-fbd4-4a0d-9e8f-4c86cb64b696__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.68.217
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['51016', '51017', '51018', '51019', '51020']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 51016:51016 -p 51017:51017 -p 51018:51018 -p 51019:51019 -p 51020:51020 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51018 --rest-port=51016 --tcp-port=51017 --discv5-udp-port=51019 --rest-address=0.0.0.0 --nat=extip:172.18.68.217 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f1ac1a507fdd89b9ee6c189fd14feebcaece5e4eadd33e4dcf4beded45edfde2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51020 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMK7PXur8OQ5ZUs8zDzhsaBS7gPDCi1bEl0x-3wxS_JBGaKYR_wFVjwWs9GddkvDW_6_nX2-4HZo8se_w5pb2QECgmlkgnY0gmlwhKwSPpmKbXVsdGlhZGRyc5YACASsEj6ZBrW0AAoErBI-mQa1td0DgnJzhQADAQAAiXNlY3AyNTZrMaEDmeHiUNfsL1i1XpLjChf8poSjfPoOLZVW4WXcs7CKauKDdGNwgrW0g3VkcIK1toV3YWt1Mg0 --lightpushnode=/ip4/172.18.62.153/tcp/46516/p2p/16Uiu2HAmP1gW2u6i6y1WHqGyFkLuwQr8StuUGe3e8nJArV1Z7369 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.68.217 waku 4b446b714fbfc153d5fd060b5bccc70bacced15b215180ba3469cce8ef33e78c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4b446b714fbf. Setting up logs at ./log/docker/lightpush_node1_2024-12-29_18-47-53__9e60fc27-fbd4-4a0d-9e8f-4c86cb64b696__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 51016
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51016/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51016/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.68.217/tcp/51017/p2p/16Uiu2HAmDyT3B7uBUReUaH5kvr6PvuZpA5jAnDKUarjJVeLyQKt8","/ip4/172.18.68.217/tcp/51018/ws/p2p/16Uiu2HAmDyT3B7uBUReUaH5kvr6PvuZpA5jAnDKUarjJVeLyQKt8"],"enrUri":"enr:-L24QHSMF2Zx2lOsuLVp_1bGBYfSWKsXdgZNpBKv8kBV6k58U8EaSJlghrmy2MA05eOOR9ylYdMHpnG7JF7dKtB6JnYCgmlkgnY0gmlwhKwSRNmKbXVsdGlhZGRyc5YACASsEkTZBsdJAAoErBJE2QbHSt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDE5ZRPYWncczE9D0TkWj2_7QKP0Q4g0d3ULDkUTQSJlWDdGNwgsdJg3VkcILHS4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51016/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.62.153/tcp/46516/p2p/16Uiu2HAmP1gW2u6i6y1WHqGyFkLuwQr8StuUGe3e8nJArV1Z7369"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51016/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.250.213/tcp/36523/p2p/16Uiu2HAm8Z1fGUnAwE6H3R9HZBMfRd7qiCgvDUuLBBMEwjEpnaNF"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46515/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36522/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51016/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1735498077280123392}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46515/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735498077280123392,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36522/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735498077280123392,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e0e0ad54998c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e12f20a3fb1d
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e0e0ad54998c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4b446b714fbf
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e12f20a3fb1d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.