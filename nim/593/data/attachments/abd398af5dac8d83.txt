[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_stored_when_ephemeral_false with id: 2024-12-29_18-47-14__360e621a-fd6c-4400-b36d-2275db83dd25
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-29_18-47-14__360e621a-fd6c-4400-b36d-2275db83dd25__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-29_18-47-14__360e621a-fd6c-4400-b36d-2275db83dd25__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-29_18-47-14__360e621a-fd6c-4400-b36d-2275db83dd25__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:414 Start 3 nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.29.213
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['12639', '12640', '12641', '12642', '12643']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 12639:12639 -p 12640:12640 -p 12641:12641 -p 12642:12642 -p 12643:12643 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12641 --rest-port=12639 --tcp-port=12640 --discv5-udp-port=12642 --rest-address=0.0.0.0 --nat=extip:172.18.29.213 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1decdd18ee4a278dceb0b24eceffecb2d07cee7ef51af171bb6106c25adaca68 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12643 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.29.213 waku 5d67a756c4b1a129cbcbac2bf257635558090eb15be1ae727bd5da36a71ab77e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5d67a756c4b1. Setting up logs at ./log/docker/node1_2024-12-29_18-47-14__360e621a-fd6c-4400-b36d-2275db83dd25__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 12639
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 34e3f5a16f9a. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12639/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12639/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.29.213/tcp/12640/p2p/16Uiu2HAmQ6u4k3jFeegC96JmCSBskuAvfgjbbuhXwugeZYioJegQ","/ip4/172.18.29.213/tcp/12641/ws/p2p/16Uiu2HAmQ6u4k3jFeegC96JmCSBskuAvfgjbbuhXwugeZYioJegQ"],"enrUri":"enr:-L24QPc1ENBhfxHyYYMYMDKIaBeK_R_lJpdobP503fssHgBsWf-JvghrgM0WBWUtr5A_oMrOgmGfhVxfjd1btgnW_bACgmlkgnY0gmlwhKwSHdWKbXVsdGlhZGRyc5YACASsEh3VBjFgAAoErBId1QYxYd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDqhOuXm5-Lcn09tI88mc0Fofqx5aJL3OF_819Bq4bqAmDdGNwgjFgg3VkcIIxYoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.107.42
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['41411', '41412', '41413', '41414', '41415']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 41411:41411 -p 41412:41412 -p 41413:41413 -p 41414:41414 -p 41415:41415 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41413 --rest-port=41411 --tcp-port=41412 --discv5-udp-port=41414 --rest-address=0.0.0.0 --nat=extip:172.18.107.42 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=feb1177ee99af77156e1cf17e048b07fdcad2cbce7bd9fe0c8f0556e6cad33fb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41415 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QPc1ENBhfxHyYYMYMDKIaBeK_R_lJpdobP503fssHgBsWf-JvghrgM0WBWUtr5A_oMrOgmGfhVxfjd1btgnW_bACgmlkgnY0gmlwhKwSHdWKbXVsdGlhZGRyc5YACASsEh3VBjFgAAoErBId1QYxYd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDqhOuXm5-Lcn09tI88mc0Fofqx5aJL3OF_819Bq4bqAmDdGNwgjFgg3VkcIIxYoV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.107.42 waku 97156d6097893fc44d592cb5ae75e24b84914c2acc10f46488a644a27bb7583d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 97156d609789. Setting up logs at ./log/docker/node2_2024-12-29_18-47-14__360e621a-fd6c-4400-b36d-2275db83dd25__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 41411
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41411/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41411/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.107.42/tcp/41412/p2p/16Uiu2HAkvo9sf7HVRu61v91cYU1ErbVprvp52qtRbxaVABW3E3RW","/ip4/172.18.107.42/tcp/41413/ws/p2p/16Uiu2HAkvo9sf7HVRu61v91cYU1ErbVprvp52qtRbxaVABW3E3RW"],"enrUri":"enr:-L24QJ3pRNYyUms7jXdPduOBJQN3EMV975CclmiKWZ6SmzALKbdgCFILqMS4jIE0_eewbA_Om25MkKX3H1gX8eoT-xoCgmlkgnY0gmlwhKwSayqKbXVsdGlhZGRyc5YACASsEmsqBqHEAAoErBJrKgahxd0DgnJzhQADAQAAiXNlY3AyNTZrMaECFFxsi4QSY3rqAhAAWKeEfwxqSGctbs_KSZIpr7TWgB2DdGNwgqHEg3VkcIKhxoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.22.145
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['50514', '50515', '50516', '50517', '50518']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 50514:50514 -p 50515:50515 -p 50516:50516 -p 50517:50517 -p 50518:50518 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50516 --rest-port=50514 --tcp-port=50515 --discv5-udp-port=50517 --rest-address=0.0.0.0 --nat=extip:172.18.22.145 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6c78ea3cc0473d939c1fd6332facfcd24bb91e69bed9f8994dedea0293b6bf62 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50518 --metrics-logging=true --relay=false --storenode=/ip4/172.18.107.42/tcp/41412/p2p/16Uiu2HAkvo9sf7HVRu61v91cYU1ErbVprvp52qtRbxaVABW3E3RW --discv5-bootstrap-node=enr:-L24QJ3pRNYyUms7jXdPduOBJQN3EMV975CclmiKWZ6SmzALKbdgCFILqMS4jIE0_eewbA_Om25MkKX3H1gX8eoT-xoCgmlkgnY0gmlwhKwSayqKbXVsdGlhZGRyc5YACASsEmsqBqHEAAoErBJrKgahxd0DgnJzhQADAQAAiXNlY3AyNTZrMaECFFxsi4QSY3rqAhAAWKeEfwxqSGctbs_KSZIpr7TWgB2DdGNwgqHEg3VkcIKhxoV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.22.145 waku 2e36d5e7137e64441ed15c1915f7baa922669d30b65d691d37a5ad5d6620ac7e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2e36d5e7137e. Setting up logs at ./log/docker/node3_2024-12-29_18-47-14__360e621a-fd6c-4400-b36d-2275db83dd25__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 50514
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50514/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50514/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.22.145/tcp/50515/p2p/16Uiu2HAmJuVWvHVAKpqgqmfmmjHCSvEvWvyfBpNJ9JvbBFKeXTT9","/ip4/172.18.22.145/tcp/50516/ws/p2p/16Uiu2HAmJuVWvHVAKpqgqmfmmjHCSvEvWvyfBpNJ9JvbBFKeXTT9"],"enrUri":"enr:-L24QNMGlsVmjEXHhUXJCLSkYMgznQ3UAL9HfMZsnJ7r8ZfdQlUsl5BeckmCOyA31P4UhpFTM4NoVe39K5Hpmlmdz_UCgmlkgnY0gmlwhKwSFpGKbXVsdGlhZGRyc5YACASsEhaRBsVTAAoErBIWkQbFVN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDXN07JATcKgFjgKPP-gIAkVvFfMi6Gpkm7e4kGG_S7VSDdGNwgsVTg3VkcILFVYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:419 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12639/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41411/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12639/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.107.42/tcp/41412/p2p/16Uiu2HAkvo9sf7HVRu61v91cYU1ErbVprvp52qtRbxaVABW3E3RW","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41411/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.29.213/tcp/12640/p2p/16Uiu2HAmQ6u4k3jFeegC96JmCSBskuAvfgjbbuhXwugeZYioJegQ","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:424 Node1 publish message with ephemeral = false
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12639/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:428 Check if message is stored 
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50514/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"537bce1904e6dec4ffb4","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"mRTjfvk/rk6j26SAgy4VcUxsHF3nsohuK6YJicREBRs="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5d67a756c4b1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 97156d609789
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5d67a756c4b1. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2e36d5e7137e
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 97156d609789. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.