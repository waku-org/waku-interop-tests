{"uid":"bbdae93ad8f177db","name":"test_filter_update_subscription_with_pubsub_topic_list_instead_of_string","fullName":"tests.filter.test_subscribe_update.TestFilterSubscribeUpdate#test_filter_update_subscription_with_pubsub_topic_list_instead_of_string","historyId":"cc55d99843f9686d58cfe40b5273656b","time":{"start":1712290391400,"stop":1712290391405,"duration":5},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1712290299897,"stop":1712290299897,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1712290387956,"stop":1712290387956,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1712290387956,"stop":1712290387957,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1712290387956,"stop":1712290387956,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"filter_setup","time":{"start":1712290387957,"stop":1712290387958,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1712290387957,"stop":1712290387957,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_relay_node","time":{"start":1712290387958,"stop":1712290389579,"duration":1621},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_filter_node","time":{"start":1712290389580,"stop":1712290391369,"duration":1789},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"subscribe_main_nodes","time":{"start":1712290391370,"stop":1712290391400,"duration":30},"status":"passed","steps":[{"name":"wait_for_subscriptions_on_main_nodes","time":{"start":1712290391370,"stop":1712290391400,"duration":30},"status":"passed","steps":[{"name":"create_filter_subscription_with_retry","time":{"start":1712290391394,"stop":1712290391400,"duration":6},"status":"passed","steps":[{"name":"create_filter_subscription","time":{"start":1712290391394,"stop":1712290391400,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '375a6263-5d1e-4441-b1f0-b3877a599c0e', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/0/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '375a6263-5d1e-4441-b1f0-b3877a599c0e', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/0/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"content_topic_list","value":"['/test/1/waku-filter/proto']"},{"name":"pubsub_topic","value":"None"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"status":"passed","steps":[{"name":"update_filter_subscription","time":{"start":1712290391401,"stop":1712290391403,"duration":2},"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:12462/filter/v2/subscriptions with response: b'{\"requestId\":\"unknown\",\"statusDesc\":\"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\\\\"Invalid content body, could not decode. Unable to deserialize data\\\\\", contentType: \\\\\"text/plain\\\\\"))\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 163, in update_filter_subscription\n    return node.update_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 246, in update_filter_subscriptions\n    return self._api.update_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 60, in update_filter_subscriptions\n    update_subscriptions_response = self.rest_call(\"put\", \"filter/v2/subscriptions\", json.dumps(subscription))\n                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 18, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '1', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': ['/waku/2/rs/0/1']}"},{"name":"node","value":"None"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"f9d4901429d0c6b1","name":"log","source":"f9d4901429d0c6b1.txt","type":"text/plain","size":9881}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1712290391407,"stop":1712290391407,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1712290391408,"stop":1712290395562,"duration":4154},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1712290395563,"stop":1712290395563,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1712290829088,"stop":1712290829088,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"@pytest.mark.usefixtures('setup_main_relay_node', 'setup_main_filter_node')"},{"name":"parentSuite","value":"tests.filter"},{"name":"suite","value":"test_subscribe_update"},{"name":"subSuite","value":"TestFilterSubscribeUpdate"},{"name":"host","value":"fv-az651-360"},{"name":"thread","value":"2125-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.filter.test_subscribe_update"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":2,"skipped":0,"passed":103,"unknown":0,"total":105},"items":[{"uid":"55d5a511aaf0de3c","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/132//#testresult/55d5a511aaf0de3c","status":"passed","time":{"start":1712216569437,"stop":1712216569441,"duration":4}},{"uid":"5ea039cb87a7f9a5","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/131//#testresult/5ea039cb87a7f9a5","status":"passed","time":{"start":1712215250494,"stop":1712215250500,"duration":6}},{"uid":"5c5a3f8a4318d39c","reportUrl":"https://waku-org.github.io/waku-interop-tests/130//#testresult/5c5a3f8a4318d39c","status":"passed","time":{"start":1712204039387,"stop":1712204039391,"duration":4}},{"uid":"d4f2281986f41593","reportUrl":"https://waku-org.github.io/waku-interop-tests/129//#testresult/d4f2281986f41593","status":"passed","time":{"start":1712151495807,"stop":1712151495813,"duration":6}},{"uid":"cd4e20222ba90b73","reportUrl":"https://waku-org.github.io/waku-interop-tests/128//#testresult/cd4e20222ba90b73","status":"passed","time":{"start":1712117536646,"stop":1712117536652,"duration":6}},{"uid":"67250fa026014342","reportUrl":"https://waku-org.github.io/waku-interop-tests/127//#testresult/67250fa026014342","status":"passed","time":{"start":1712031138446,"stop":1712031138459,"duration":13}},{"uid":"63dcb257587c0d5d","reportUrl":"https://waku-org.github.io/waku-interop-tests/126//#testresult/63dcb257587c0d5d","status":"passed","time":{"start":1711980587181,"stop":1711980587188,"duration":7}},{"uid":"df77979d3d703010","reportUrl":"https://waku-org.github.io/waku-interop-tests/125//#testresult/df77979d3d703010","status":"passed","time":{"start":1711978671419,"stop":1711978671424,"duration":5}},{"uid":"738cb8419943a941","reportUrl":"https://waku-org.github.io/waku-interop-tests/124//#testresult/738cb8419943a941","status":"passed","time":{"start":1711969053655,"stop":1711969053659,"duration":4}},{"uid":"118ea65f5fe8ce56","reportUrl":"https://waku-org.github.io/waku-interop-tests/123//#testresult/118ea65f5fe8ce56","status":"passed","time":{"start":1711944746885,"stop":1711944746888,"duration":3}},{"uid":"5303f6ed33054989","reportUrl":"https://waku-org.github.io/waku-interop-tests/122//#testresult/5303f6ed33054989","status":"passed","time":{"start":1711858410111,"stop":1711858410115,"duration":4}},{"uid":"4c9d217520a4cb27","reportUrl":"https://waku-org.github.io/waku-interop-tests/120//#testresult/4c9d217520a4cb27","status":"passed","time":{"start":1711720954066,"stop":1711720954076,"duration":10}},{"uid":"51cecbbf5aab172f","reportUrl":"https://waku-org.github.io/waku-interop-tests/119//#testresult/51cecbbf5aab172f","status":"passed","time":{"start":1711685573915,"stop":1711685573920,"duration":5}},{"uid":"46e4005167e1829c","reportUrl":"https://waku-org.github.io/waku-interop-tests/118//#testresult/46e4005167e1829c","status":"passed","time":{"start":1711624649464,"stop":1711624649469,"duration":5}},{"uid":"78c1bf2eb9742113","reportUrl":"https://waku-org.github.io/waku-interop-tests/117//#testresult/78c1bf2eb9742113","status":"passed","time":{"start":1711612649894,"stop":1711612649898,"duration":4}},{"uid":"a9650362c22637ad","reportUrl":"https://waku-org.github.io/waku-interop-tests/116//#testresult/a9650362c22637ad","status":"passed","time":{"start":1711599094616,"stop":1711599094621,"duration":5}},{"uid":"1da8dd4828689dd2","reportUrl":"https://waku-org.github.io/waku-interop-tests/115//#testresult/1da8dd4828689dd2","status":"passed","time":{"start":1711512856108,"stop":1711512856113,"duration":5}},{"uid":"bb5bee38f590488a","reportUrl":"https://waku-org.github.io/waku-interop-tests/114//#testresult/bb5bee38f590488a","status":"passed","time":{"start":1711473791824,"stop":1711473791829,"duration":5}},{"uid":"78e1ff09bc8813df","reportUrl":"https://waku-org.github.io/waku-interop-tests/112//#testresult/78e1ff09bc8813df","status":"passed","time":{"start":1711426295631,"stop":1711426295636,"duration":5}},{"uid":"f9e62543221a248a","reportUrl":"https://waku-org.github.io/waku-interop-tests/111//#testresult/f9e62543221a248a","status":"passed","time":{"start":1711365028320,"stop":1711365028326,"duration":6}}]},"tags":["@pytest.mark.usefixtures('setup_main_relay_node', 'setup_main_filter_node')"]},"source":"bbdae93ad8f177db.json","parameterValues":[]}