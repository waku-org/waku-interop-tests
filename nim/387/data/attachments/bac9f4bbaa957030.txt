[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_receiving_nodes__relay_node1_forwards_lightpushed_message_to_relay_node2 with id: 2024-10-10_04-19-02__ff0685cd-a1d2-40cf-944b-4446e8e1b067
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-10_04-19-02__ff0685cd-a1d2-40cf-944b-4446e8e1b067__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.59.171
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['33658', '33659', '33660', '33661', '33662']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 33658:33658 -p 33659:33659 -p 33660:33660 -p 33661:33661 -p 33662:33662 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33660 --rest-port=33658 --tcp-port=33659 --discv5-udp-port=33661 --rest-address=0.0.0.0 --nat=extip:172.18.59.171 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fc0c86b4c59cb144a753f5a9e662bad5ffe87e3eba4458e72c267f972ab0dfa9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33662 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.59.171 waku 2deaf950f81426140e9ede8faa0957656d8a3b9fee52922206b101a6a3f6d9c6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2deaf950f814. Setting up logs at ./log/docker/receiving_node1_2024-10-10_04-19-02__ff0685cd-a1d2-40cf-944b-4446e8e1b067__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 33658
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33658/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33658/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.59.171/tcp/33659/p2p/16Uiu2HAkwRvfTyarZ9cx2gxk3ru3WuzYeE8A2CSNA6erxzT7wGhg","/ip4/172.18.59.171/tcp/33660/ws/p2p/16Uiu2HAkwRvfTyarZ9cx2gxk3ru3WuzYeE8A2CSNA6erxzT7wGhg"],"enrUri":"enr:-LO4QKS7kFhgmeKA3K1mc3n9Y_-dGruiyvZyjOrumRomqzfdB7Rqayvu_RB4bI38iw35nuFET74cYC6bnawfxcSZ2G0BgmlkgnY0gmlwhKwSO6uKbXVsdGlhZGRyc4wACgSsEjurBoN83QOCcnOFAAMBAACJc2VjcDI1NmsxoQIdx_okBZP7Lcjisxy6_mjAIr18BuOppYcf2Vhp8hh4I4N0Y3CCg3uDdWRwgoN9hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-10_04-19-02__ff0685cd-a1d2-40cf-944b-4446e8e1b067__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.244.47
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['61467', '61468', '61469', '61470', '61471']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 61467:61467 -p 61468:61468 -p 61469:61469 -p 61470:61470 -p 61471:61471 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61469 --rest-port=61467 --tcp-port=61468 --discv5-udp-port=61470 --rest-address=0.0.0.0 --nat=extip:172.18.244.47 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ee1caadf2e8bdf30d44a92e89acfe4767f069d7fbe3f576466d5ffbe894c6eab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61471 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.244.47 waku 19aa65984b1e65b8f4b6aabc60fdcf9587820ef22c32973f517e60ee67f5a4e2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 19aa65984b1e. Setting up logs at ./log/docker/receiving_node2_2024-10-10_04-19-02__ff0685cd-a1d2-40cf-944b-4446e8e1b067__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 61467
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61467/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61467/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.244.47/tcp/61468/p2p/16Uiu2HAmFdBRdnA76wjndsM1cCzDm7DpGt3Lrd544gn92DHjuvPs","/ip4/172.18.244.47/tcp/61469/ws/p2p/16Uiu2HAmFdBRdnA76wjndsM1cCzDm7DpGt3Lrd544gn92DHjuvPs"],"enrUri":"enr:-LO4QOKeJ_uT560FHzmnaiiuQXmf3LO_QSwaRrHPoOBU-ScJTEPCqM-alH_wT1Jk3n1EVrDCVTK6Rt2nfSNzjsUPj4YBgmlkgnY0gmlwhKwS9C-KbXVsdGlhZGRyc4wACgSsEvQvBvAd3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMsHGvubgh_sAfZPthdjnHaZjWxzkAo6Lt0LFma0C_f4oN0Y3CC8ByDdWRwgvAehXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61467/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.59.171/tcp/33659/p2p/16Uiu2HAkwRvfTyarZ9cx2gxk3ru3WuzYeE8A2CSNA6erxzT7wGhg"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-10_04-19-02__ff0685cd-a1d2-40cf-944b-4446e8e1b067__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.161.238
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['51171', '51172', '51173', '51174', '51175']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 51171:51171 -p 51172:51172 -p 51173:51173 -p 51174:51174 -p 51175:51175 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51173 --rest-port=51171 --tcp-port=51172 --discv5-udp-port=51174 --rest-address=0.0.0.0 --nat=extip:172.18.161.238 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=445fbea8b4aa9c85fb3bd922ac6bef734727be9f7d25af3c7cbc8db25ff60f54 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51175 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QKS7kFhgmeKA3K1mc3n9Y_-dGruiyvZyjOrumRomqzfdB7Rqayvu_RB4bI38iw35nuFET74cYC6bnawfxcSZ2G0BgmlkgnY0gmlwhKwSO6uKbXVsdGlhZGRyc4wACgSsEjurBoN83QOCcnOFAAMBAACJc2VjcDI1NmsxoQIdx_okBZP7Lcjisxy6_mjAIr18BuOppYcf2Vhp8hh4I4N0Y3CCg3uDdWRwgoN9hXdha3UyCQ --lightpushnode=/ip4/172.18.59.171/tcp/33659/p2p/16Uiu2HAkwRvfTyarZ9cx2gxk3ru3WuzYeE8A2CSNA6erxzT7wGhg --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.161.238 waku 7308d12e6f799f3dd3adb4e1c4e55f049d5e654bd27f0eac659ccc5f55edbe83
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7308d12e6f79. Setting up logs at ./log/docker/lightpush_node1_2024-10-10_04-19-02__ff0685cd-a1d2-40cf-944b-4446e8e1b067__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 51171
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51171/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51171/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.161.238/tcp/51172/p2p/16Uiu2HAmSFpdfWdKzSkbY9Qr1CczjLBaS7yGGeyy51g1rvgtEisb","/ip4/172.18.161.238/tcp/51173/ws/p2p/16Uiu2HAmSFpdfWdKzSkbY9Qr1CczjLBaS7yGGeyy51g1rvgtEisb"],"enrUri":"enr:-LO4QH5xl-9AjBBDk2Dha8-9aV2LSfhPgEjcAPnogY0jvmkUbxhmcewh-P4DtBCG5bGGYLnsW9DcX8CU1QZ1neIu3bcBgmlkgnY0gmlwhKwSoe6KbXVsdGlhZGRyc4wACgSsEqHuBsfl3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPKFEVC235fTtoxB5QPr4ZkqkFKATckQc8erYLIt3CDkoN0Y3CCx-SDdWRwgsfmhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51171/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.59.171/tcp/33659/p2p/16Uiu2HAkwRvfTyarZ9cx2gxk3ru3WuzYeE8A2CSNA6erxzT7wGhg"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51171/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.244.47/tcp/61468/p2p/16Uiu2HAmFdBRdnA76wjndsM1cCzDm7DpGt3Lrd544gn92DHjuvPs"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33658/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61467/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51171/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728533948040024832}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33658/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728533948040024832,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61467/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728533948040024832,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2deaf950f814
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 19aa65984b1e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7308d12e6f79
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.