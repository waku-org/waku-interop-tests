[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2024-10-10_04-21-31__835afc7e-8ba1-4933-b7e3-3517990388fb
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-10_04-21-31__835afc7e-8ba1-4933-b7e3-3517990388fb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.141.170
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['46567', '46568', '46569', '46570', '46571']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 46567:46567 -p 46568:46568 -p 46569:46569 -p 46570:46570 -p 46571:46571 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46569 --rest-port=46567 --tcp-port=46568 --discv5-udp-port=46570 --rest-address=0.0.0.0 --nat=extip:172.18.141.170 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f7f0f5c8ff7c8cebb7adb21df6ac0cbfad7e06bbafd2d4df1c8bbaad00d5aa0f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46571 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.141.170 waku 2ea9f2d7eac44284ab908e0718c729b59fb143c4482ae6fed489b969ed1f10dc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2ea9f2d7eac4. Setting up logs at ./log/docker/receiving_node1_2024-10-10_04-21-31__835afc7e-8ba1-4933-b7e3-3517990388fb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 46567
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46567/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46567/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.141.170/tcp/46568/p2p/16Uiu2HAmL8EGjoJjXieVbnWoBJvNdMusf5aZ6ds7E42zw8Ydm3KG","/ip4/172.18.141.170/tcp/46569/ws/p2p/16Uiu2HAmL8EGjoJjXieVbnWoBJvNdMusf5aZ6ds7E42zw8Ydm3KG"],"enrUri":"enr:-LO4QPDbYjLeQmhCEKIFBRfpJL953OGu85tMi3BVEnPGND7qPdLZoI1dxdc7NOkCX5STKJyg1pJP8ibw2s9PI8ib_DIBgmlkgnY0gmlwhKwSjaqKbXVsdGlhZGRyc4wACgSsEo2qBrXp3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNu_DtAraUUgOiOIwcLmLMAAeavRTVhU1hskGN3fIdbq4N0Y3CCteiDdWRwgrXqhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-10_04-21-31__835afc7e-8ba1-4933-b7e3-3517990388fb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.7.254
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['56880', '56881', '56882', '56883', '56884']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 56880:56880 -p 56881:56881 -p 56882:56882 -p 56883:56883 -p 56884:56884 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56882 --rest-port=56880 --tcp-port=56881 --discv5-udp-port=56883 --rest-address=0.0.0.0 --nat=extip:172.18.7.254 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5afccaca4f2dfaae37afaefc68a16cd3bfcee8f16b8efff58d7743258aef6a2c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56884 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.7.254 waku 23649454be0f4d4c44e2e397fddd73ffd1b13e48b499797e6cbb08af1a896d39
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 23649454be0f. Setting up logs at ./log/docker/receiving_node2_2024-10-10_04-21-31__835afc7e-8ba1-4933-b7e3-3517990388fb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 56880
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56880/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56880/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.7.254/tcp/56881/p2p/16Uiu2HAmS2mzNvzyFVudwY5v35148ERKK6AngVs5EUw1seioga3a","/ip4/172.18.7.254/tcp/56882/ws/p2p/16Uiu2HAmS2mzNvzyFVudwY5v35148ERKK6AngVs5EUw1seioga3a"],"enrUri":"enr:-LO4QD85D_3qVX_lhwEFxbi3Vc4vU9tZa_8b5lM0muf7rvvjRVWHRl5Lr2wjqpgltZDh5Jsp9gJNrpcEvkO3CBkHXXQBgmlkgnY0gmlwhKwSB_6KbXVsdGlhZGRyc4wACgSsEgf-Bt4y3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPGvLtTeo3m0CoH9ILddrIH9ubWYr0DKWvxrZ8W9BNiEYN0Y3CC3jGDdWRwgt4zhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56880/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.141.170/tcp/46568/p2p/16Uiu2HAmL8EGjoJjXieVbnWoBJvNdMusf5aZ6ds7E42zw8Ydm3KG"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-10_04-21-31__835afc7e-8ba1-4933-b7e3-3517990388fb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.85.179
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['33083', '33084', '33085', '33086', '33087']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 33083:33083 -p 33084:33084 -p 33085:33085 -p 33086:33086 -p 33087:33087 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33085 --rest-port=33083 --tcp-port=33084 --discv5-udp-port=33086 --rest-address=0.0.0.0 --nat=extip:172.18.85.179 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ddae405bf97b1b7895bea8efd7cd6de0f32dbeb4cfa0da14cebf5baabd8f69c6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33087 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QPDbYjLeQmhCEKIFBRfpJL953OGu85tMi3BVEnPGND7qPdLZoI1dxdc7NOkCX5STKJyg1pJP8ibw2s9PI8ib_DIBgmlkgnY0gmlwhKwSjaqKbXVsdGlhZGRyc4wACgSsEo2qBrXp3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNu_DtAraUUgOiOIwcLmLMAAeavRTVhU1hskGN3fIdbq4N0Y3CCteiDdWRwgrXqhXdha3UyCQ --lightpushnode=/ip4/172.18.141.170/tcp/46568/p2p/16Uiu2HAmL8EGjoJjXieVbnWoBJvNdMusf5aZ6ds7E42zw8Ydm3KG --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.85.179 waku e0a9dc229500c80927c9a3a9de6a4a39624c8f283bf04218ce12e77b01c85db7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e0a9dc229500. Setting up logs at ./log/docker/lightpush_node1_2024-10-10_04-21-31__835afc7e-8ba1-4933-b7e3-3517990388fb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 33083
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33083/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33083/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.85.179/tcp/33084/p2p/16Uiu2HAmC3DUMMW9qLaQwgu95AZx3qqbjsod6ZRF5giQ4MTvr8vv","/ip4/172.18.85.179/tcp/33085/ws/p2p/16Uiu2HAmC3DUMMW9qLaQwgu95AZx3qqbjsod6ZRF5giQ4MTvr8vv"],"enrUri":"enr:-LO4QOIQj1i5MFrZbnfC_qrHK93poJhnz22S_UlHIu1VCjKlZDnHzQkkhaZEG5ykDvKfc3vPzb2rsLf-VhCmBiZxSZ8BgmlkgnY0gmlwhKwSVbOKbXVsdGlhZGRyc4wACgSsElWzBoE93QOCcnOFAAMBAACJc2VjcDI1NmsxoQL21e19Hh9sP5qsm4Vn9PiB6evEz-J98GBppwmi0uOJ64N0Y3CCgTyDdWRwgoE-hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33083/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.141.170/tcp/46568/p2p/16Uiu2HAmL8EGjoJjXieVbnWoBJvNdMusf5aZ6ds7E42zw8Ydm3KG"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33083/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.7.254/tcp/56881/p2p/16Uiu2HAmS2mzNvzyFVudwY5v35148ERKK6AngVs5EUw1seioga3a"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46567/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56880/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33083/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728534096961913856, "extraField": "extraValue"}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:33083/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2ea9f2d7eac4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 23649454be0f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e0a9dc229500
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.