{"uid":"bb7ae19b8dffda4a","name":"test_publish_after_node1_restarts","fullName":"tests.relay.test_publish.TestRelayPublish#test_publish_after_node1_restarts","historyId":"ac4c595ebfa5f8d963dda5d51f886384","time":{"start":1728534344782,"stop":1728534350223,"duration":5441},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1728533549058,"stop":1728533549058,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1728534337977,"stop":1728534337977,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors","time":{"start":1728534337977,"stop":1728534337977,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1728534337977,"stop":1728534337977,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1728534337977,"stop":1728534337977,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1728534337978,"stop":1728534337978,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"relay_setup","time":{"start":1728534337978,"stop":1728534337978,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1728534337978,"stop":1728534337978,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_relay_nodes","time":{"start":1728534337978,"stop":1728534344601,"duration":6623},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1728534344526,"stop":1728534344600,"duration":74},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.relay.test_publish.TestRelayPublish object at 0x7fdd23083800>, <src.node.waku_node.WakuNode object at 0x7fdd23083ad0>, ['/ip4/172.18.225.190/tcp/62774/p2p/16Uiu2HAkvCFs5jUB2ex5ivZgLLcMxgg1ry6xMdMGmVxVmmBdgHoe'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_main_relay_nodes","time":{"start":1728534344601,"stop":1728534344654,"duration":53},"status":"passed","steps":[{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1728534344601,"stop":1728534344654,"duration":53},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7fdd222fd5e0>, <src.node.waku_node.WakuNode object at 0x7fdd23083ad0>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"relay_warm_up","time":{"start":1728534344654,"stop":1728534344782,"duration":128},"status":"passed","steps":[{"name":"wait_for_published_message_to_reach_relay_peer","time":{"start":1728534344654,"stop":1728534344781,"duration":127},"status":"passed","steps":[{"name":"check_published_message_reaches_relay_peer","time":{"start":1728534344654,"stop":1728534344781,"duration":127},"status":"passed","steps":[{"name":"assert_received_message","time":{"start":1728534344771,"stop":1728534344771,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728534344654125312}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728534344781,"stop":1728534344781,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728534344654125312}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728534344654125312}"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"timeout_duration","value":"120"},{"name":"time_between_retries","value":"1"},{"name":"pubsub_topic","value":"None"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"status":"passed","steps":[{"name":"check_published_message_reaches_relay_peer","time":{"start":1728534344782,"stop":1728534344900,"duration":118},"status":"passed","steps":[{"name":"create_message","time":{"start":1728534344783,"stop":1728534344783,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728534344895,"stop":1728534344895,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728534344782568448}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728534344900,"stop":1728534344900,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728534344782568448}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"None"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_and_publish_with_retry","time":{"start":1728534348965,"stop":1728534350223,"duration":1258},"status":"passed","steps":[{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1728534348965,"stop":1728534348994,"duration":29},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7fdd222fd5e0>, <src.node.waku_node.WakuNode object at 0x7fdd23083ad0>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_published_message_reaches_relay_peer","time":{"start":1728534348994,"stop":1728534349107,"duration":113},"status":"failed","statusMessage":"AssertionError: Peer NODE_2:wakuorg/nwaku:latest couldn't find any messages\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/relay.py\", line 125, in check_published_message_reaches_relay_peer\n    assert get_messages_response, f\"Peer NODE_{index + 1}:{peer.image} couldn't find any messages\"\n           ^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"create_message","time":{"start":1728534348995,"stop":1728534348995,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728534349104,"stop":1728534349104,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728534348994585088}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"None"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1728534350107,"stop":1728534350112,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7fdd222fd5e0>, <src.node.waku_node.WakuNode object at 0x7fdd23083ad0>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_published_message_reaches_relay_peer","time":{"start":1728534350112,"stop":1728534350223,"duration":111},"status":"passed","steps":[{"name":"create_message","time":{"start":1728534350112,"stop":1728534350112,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728534350219,"stop":1728534350219,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728534350112385024}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728534350222,"stop":1728534350223,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728534350112385024}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"None"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<tests.relay.test_publish.TestRelayPublish object at 0x7fdd23083800>, [<src.node.waku_node.WakuNode object at 0x7fdd222fd5e0>, <src.node.waku_node.WakuNode object at 0x7fdd23083ad0>], ['/waku/2/rs/3/1'])"}],"shouldDisplayMessage":false,"stepsCount":9,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"18df07c73a81837e","name":"log","source":"18df07c73a81837e.txt","type":"text/plain","size":21053}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":14,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1728534350224,"stop":1728534350227,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1728534350228,"stop":1728534355499,"duration":5271},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors::0","time":{"start":1728534355500,"stop":1728534355528,"duration":28},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1728534355530,"stop":1728534355530,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1728535563655,"stop":1728535563655,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"flaky(reruns=5)"},{"name":"tag","value":"@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')"},{"name":"parentSuite","value":"tests.relay"},{"name":"suite","value":"test_publish"},{"name":"subSuite","value":"TestRelayPublish"},{"name":"host","value":"fv-az1149-82"},{"name":"thread","value":"2102-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.relay.test_publish"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":0,"passed":79,"unknown":0,"total":79},"items":[{"uid":"5e905902de30f398","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/385//#testresult/5e905902de30f398","status":"passed","time":{"start":1728361549234,"stop":1728361554472,"duration":5238}},{"uid":"661ea87a894ef21d","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/384//#testresult/661ea87a894ef21d","status":"passed","time":{"start":1728275003563,"stop":1728275009677,"duration":6114}},{"uid":"218b509030101ba3","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/383//#testresult/218b509030101ba3","status":"passed","time":{"start":1728188536117,"stop":1728188542085,"duration":5968}},{"uid":"771a5ce8604b6860","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/382//#testresult/771a5ce8604b6860","status":"passed","time":{"start":1728102169211,"stop":1728102174479,"duration":5268}},{"uid":"5e77c76ecfc757e","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/381//#testresult/5e77c76ecfc757e","status":"passed","time":{"start":1728015789563,"stop":1728015794912,"duration":5349}},{"uid":"6037a3780a21a54f","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/380//#testresult/6037a3780a21a54f","status":"passed","time":{"start":1727941702927,"stop":1727941708288,"duration":5361}},{"uid":"904b0b3182ab7b8f","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/379//#testresult/904b0b3182ab7b8f","status":"passed","time":{"start":1727929420301,"stop":1727929426307,"duration":6006}},{"uid":"d86a46e1bbd56a5e","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/378//#testresult/d86a46e1bbd56a5e","status":"passed","time":{"start":1727842972365,"stop":1727842978181,"duration":5816}},{"uid":"85980149fd603bd8","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/377//#testresult/85980149fd603bd8","status":"passed","time":{"start":1727756598964,"stop":1727756604081,"duration":5117}},{"uid":"f6708c41f7542845","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/376//#testresult/f6708c41f7542845","status":"passed","time":{"start":1727670222826,"stop":1727670228835,"duration":6009}},{"uid":"2635006b6bb1a7ec","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/375//#testresult/2635006b6bb1a7ec","status":"passed","time":{"start":1727583745932,"stop":1727583751106,"duration":5174}},{"uid":"8437bb3736e55444","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/374//#testresult/8437bb3736e55444","status":"passed","time":{"start":1727497323670,"stop":1727497329223,"duration":5553}},{"uid":"39b58a0a51ee1ace","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/373//#testresult/39b58a0a51ee1ace","status":"passed","time":{"start":1727410977763,"stop":1727410983458,"duration":5695}},{"uid":"9e1c14643bd086e1","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/372//#testresult/9e1c14643bd086e1","status":"passed","time":{"start":1727324592668,"stop":1727324598680,"duration":6012}},{"uid":"37e95d49d40b1c7c","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/371//#testresult/37e95d49d40b1c7c","status":"passed","time":{"start":1727238187920,"stop":1727238193081,"duration":5161}},{"uid":"6b80887eb0f55281","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/370//#testresult/6b80887eb0f55281","status":"passed","time":{"start":1727151765457,"stop":1727151770707,"duration":5250}},{"uid":"ccda281e6de49644","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/369//#testresult/ccda281e6de49644","status":"passed","time":{"start":1727065373862,"stop":1727065379900,"duration":6038}},{"uid":"73eb53b26141174b","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/368//#testresult/73eb53b26141174b","status":"passed","time":{"start":1726979000940,"stop":1726979006252,"duration":5312}},{"uid":"a1635c66d5f59902","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/367//#testresult/a1635c66d5f59902","status":"passed","time":{"start":1726892530700,"stop":1726892536501,"duration":5801}},{"uid":"80f1ba2c09c541b5","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/366//#testresult/80f1ba2c09c541b5","status":"passed","time":{"start":1726806136379,"stop":1726806141594,"duration":5215}}]},"tags":["@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')","flaky(reruns=5)"]},"source":"bb7ae19b8dffda4a.json","parameterValues":[]}