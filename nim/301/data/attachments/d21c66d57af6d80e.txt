[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2024-08-05_11-29-37__2fbfa0b4-1c48-467a-8794-00ec602d4571
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-05_11-29-37__2fbfa0b4-1c48-467a-8794-00ec602d4571__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.209.60
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['57630', '57631', '57632', '57633', '57634']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 57630:57630 -p 57631:57631 -p 57632:57632 -p 57633:57633 -p 57634:57634 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57632 --rest-port=57630 --tcp-port=57631 --discv5-udp-port=57633 --rest-address=0.0.0.0 --nat=extip:172.18.209.60 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57634 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.209.60 waku c7b62ae9ca8be6dee304f0798fd17ab07c7ebda9ff3d53e275d69ac0774407b3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID c7b62ae9ca8b. Setting up logs at ./log/docker/receiving_node1_2024-08-05_11-29-37__2fbfa0b4-1c48-467a-8794-00ec602d4571__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 57630
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57630/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57630/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.209.60/tcp/57631/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.209.60/tcp/57632/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QJrDAA5bCIGNofhb9dz19wuAIiY_ZCfgFwmAYM2Ib3siasjFky0nJWSftd3nOJn5lv7SmosD9wEiBfIz1lZmLZYBgmlkgnY0gmlwhKwS0TyKbXVsdGlhZGRyc4wACgSsEtE8BuEg3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CC4R-DdWRwguEhhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-05_11-29-37__2fbfa0b4-1c48-467a-8794-00ec602d4571__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.94.61
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['33211', '33212', '33213', '33214', '33215']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 33211:33211 -p 33212:33212 -p 33213:33213 -p 33214:33214 -p 33215:33215 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33213 --rest-port=33211 --tcp-port=33212 --discv5-udp-port=33214 --rest-address=0.0.0.0 --nat=extip:172.18.94.61 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33215 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.94.61 waku 97f999b990194fb5ddaadc97de4ed722b1c65ec8f1a21e36e894519904e26131
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 97f999b99019. Setting up logs at ./log/docker/receiving_node2_2024-08-05_11-29-37__2fbfa0b4-1c48-467a-8794-00ec602d4571__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 33211
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33211/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33211/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.94.61/tcp/33212/p2p/16Uiu2HAm7z7cFeASDFvWfDdx2nYDHPmNYc9N5fS9PmYVFPQKbQV5","/ip4/172.18.94.61/tcp/33213/ws/p2p/16Uiu2HAm7z7cFeASDFvWfDdx2nYDHPmNYc9N5fS9PmYVFPQKbQV5"],"enrUri":"enr:-LO4QGnlYar1U0I4aIqFOhmZZLwQ7zZ9V9v23WD9lZMvqAXdDqAtos5g4cHSo5eOHPcSrdZBc2RIxCXNsIhs6O9CtNsBgmlkgnY0gmlwhKwSXj2KbXVsdGlhZGRyc4wACgSsEl49BoG93QOCcnOFAAMBAACJc2VjcDI1NmsxoQK6m86wIivRo2_0kGihr2Yn2bKA7huJDwL73pfDrhCo6IN0Y3CCgbyDdWRwgoG-hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33211/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.209.60/tcp/57631/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-05_11-29-37__2fbfa0b4-1c48-467a-8794-00ec602d4571__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.142.182
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['25291', '25292', '25293', '25294', '25295']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 25291:25291 -p 25292:25292 -p 25293:25293 -p 25294:25294 -p 25295:25295 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25293 --rest-port=25291 --tcp-port=25292 --discv5-udp-port=25294 --rest-address=0.0.0.0 --nat=extip:172.18.142.182 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25295 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QJrDAA5bCIGNofhb9dz19wuAIiY_ZCfgFwmAYM2Ib3siasjFky0nJWSftd3nOJn5lv7SmosD9wEiBfIz1lZmLZYBgmlkgnY0gmlwhKwS0TyKbXVsdGlhZGRyc4wACgSsEtE8BuEg3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CC4R-DdWRwguEhhXdha3UyCQ --lightpushnode=/ip4/172.18.209.60/tcp/57631/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.142.182 waku 96bae671d0cde0dbfa174067696ec3d2ff86361ad3a55cae24a3ee1d16bb1822
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 96bae671d0cd. Setting up logs at ./log/docker/lightpush_node1_2024-08-05_11-29-37__2fbfa0b4-1c48-467a-8794-00ec602d4571__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 25291
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25291/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25291/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.142.182/tcp/25292/p2p/16Uiu2HAmU726tBrWVXJvTvJcqgEQNRBxQzG1SDgin3WpmHZaYMu7","/ip4/172.18.142.182/tcp/25293/ws/p2p/16Uiu2HAmU726tBrWVXJvTvJcqgEQNRBxQzG1SDgin3WpmHZaYMu7"],"enrUri":"enr:-LO4QEYM4dd8YmTiwlme6C-eapNIr8WverFJuzihc2PP9aQ_LAFxz7a5uTa_kHgBnbT7dQrx25cEbAIGY7w5jDED4CEBgmlkgnY0gmlwhKwSjraKbXVsdGlhZGRyc4wACgSsEo62BmLN3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPlimKvIvDsdncFvcCWxcrccJ11lo1KibZsW2UUb0UzhoN0Y3CCYsyDdWRwgmLOhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25291/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.209.60/tcp/57631/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25291/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.94.61/tcp/33212/p2p/16Uiu2HAm7z7cFeASDFvWfDdx2nYDHPmNYc9N5fS9PmYVFPQKbQV5"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57630/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33211/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25291/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722857382588621824}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:25291/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x22705b23add1f56871ef2bc4bae3a1fbc1db5c31830ce22df74a63876e56f8e8'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id c7b62ae9ca8b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 97f999b99019
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 96bae671d0cd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.