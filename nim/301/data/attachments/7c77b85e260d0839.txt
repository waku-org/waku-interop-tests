[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_pubsub_topics with id: 2024-08-05_11-29-50__2f1deb03-c2e5-4cb5-a6d5-460b896a308c
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-05_11-29-50__2f1deb03-c2e5-4cb5-a6d5-460b896a308c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.3.76
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['63355', '63356', '63357', '63358', '63359']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 63355:63355 -p 63356:63356 -p 63357:63357 -p 63358:63358 -p 63359:63359 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63357 --rest-port=63355 --tcp-port=63356 --discv5-udp-port=63358 --rest-address=0.0.0.0 --nat=extip:172.18.3.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63359 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.3.76 waku 24f43c89312fc0b3c0c43f2f360aac3a377437791509911c9ea2fdc276700ea2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 24f43c89312f. Setting up logs at ./log/docker/receiving_node1_2024-08-05_11-29-50__2f1deb03-c2e5-4cb5-a6d5-460b896a308c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 63355
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63355/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63355/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.3.76/tcp/63356/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.3.76/tcp/63357/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QAH054g_oROyL0ZCOF_VVIcgS8ydL5N9unQG6VDOggU6cif9eTOizL15BWK-YY9-yoE7_vGkf3kemNFnNlBx5tYBgmlkgnY0gmlwhKwSA0yKbXVsdGlhZGRyc4wACgSsEgNMBvd93QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CC93yDdWRwgvd-hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-05_11-29-50__2f1deb03-c2e5-4cb5-a6d5-460b896a308c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.70.158
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['41534', '41535', '41536', '41537', '41538']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 41534:41534 -p 41535:41535 -p 41536:41536 -p 41537:41537 -p 41538:41538 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41536 --rest-port=41534 --tcp-port=41535 --discv5-udp-port=41537 --rest-address=0.0.0.0 --nat=extip:172.18.70.158 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41538 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.70.158 waku 22a1b5b1646581f63dc49b2cd35a89de7fa1a348e58a039ffacc09d547191b31
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 22a1b5b16465. Setting up logs at ./log/docker/receiving_node2_2024-08-05_11-29-50__2f1deb03-c2e5-4cb5-a6d5-460b896a308c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 41534
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41534/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41534/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.70.158/tcp/41535/p2p/16Uiu2HAkuzNV2MWayNMTknABjZAhHdetzSptTLAiYeTHYh5wNJib","/ip4/172.18.70.158/tcp/41536/ws/p2p/16Uiu2HAkuzNV2MWayNMTknABjZAhHdetzSptTLAiYeTHYh5wNJib"],"enrUri":"enr:-LO4QJwd2Ad3RLV0wbXnhxytXsm6UtIu-3Y6mrC1oAtARSp3O1PQlmF7d0m4peCfxjnd4s-MP9-TYU8E_MZ5oGOOyU0BgmlkgnY0gmlwhKwSRp6KbXVsdGlhZGRyc4wACgSsEkaeBqJA3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIIYGJGIiHq4wHZ7IDKqn5xs81F6fmYTRCwrm9qAftVeIN0Y3CCoj-DdWRwgqJBhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41534/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.3.76/tcp/63356/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-05_11-29-50__2f1deb03-c2e5-4cb5-a6d5-460b896a308c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.160.54
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['55524', '55525', '55526', '55527', '55528']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 55524:55524 -p 55525:55525 -p 55526:55526 -p 55527:55527 -p 55528:55528 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55526 --rest-port=55524 --tcp-port=55525 --discv5-udp-port=55527 --rest-address=0.0.0.0 --nat=extip:172.18.160.54 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55528 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QAH054g_oROyL0ZCOF_VVIcgS8ydL5N9unQG6VDOggU6cif9eTOizL15BWK-YY9-yoE7_vGkf3kemNFnNlBx5tYBgmlkgnY0gmlwhKwSA0yKbXVsdGlhZGRyc4wACgSsEgNMBvd93QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CC93yDdWRwgvd-hXdha3UyCQ --lightpushnode=/ip4/172.18.3.76/tcp/63356/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.160.54 waku 7c31f7611994da1005388cb6b9b3ab978d2cfa30f9484d5776385c554f14d784
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 7c31f7611994. Setting up logs at ./log/docker/lightpush_node1_2024-08-05_11-29-50__2f1deb03-c2e5-4cb5-a6d5-460b896a308c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 55524
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55524/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55524/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.160.54/tcp/55525/p2p/16Uiu2HAkypR41r8DUC6dtbmiLCtDZ1xeJA8rxCMqQcW5Eb8Hrf56","/ip4/172.18.160.54/tcp/55526/ws/p2p/16Uiu2HAkypR41r8DUC6dtbmiLCtDZ1xeJA8rxCMqQcW5Eb8Hrf56"],"enrUri":"enr:-LO4QAucXdfG41w7RAKFmreFdwKRdjx5MPcgkuKSLZ2M9rOXPvlyDPhsM2q0LY6bgtQ9rOB2j6HGExOI8jxPokNLffIBgmlkgnY0gmlwhKwSoDaKbXVsdGlhZGRyc4wACgSsEqA2Btjm3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJBQjpigZTdx7irTZZMuwx4f6VMk1Nr-WobWSsfDmP1TYN0Y3CC2OWDdWRwgtjnhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55524/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.3.76/tcp/63356/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55524/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.70.158/tcp/41535/p2p/16Uiu2HAkuzNV2MWayNMTknABjZAhHdetzSptTLAiYeTHYh5wNJib"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63355/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41534/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55524/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722857394842126848}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:55524/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x71f24c772150135a0fd5a50c06c528d392af78d325994dbc71393985016a4a84'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 24f43c89312f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 22a1b5b16465
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 7c31f7611994
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.