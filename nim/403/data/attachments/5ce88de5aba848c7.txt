[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_invalid_request_id with id: 2024-10-23_12-48-50__fb103856-e8db-4939-88bc-b76390f81643
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-23_12-48-50__fb103856-e8db-4939-88bc-b76390f81643__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.60.144
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['56650', '56651', '56652', '56653', '56654']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 56650:56650 -p 56651:56651 -p 56652:56652 -p 56653:56653 -p 56654:56654 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56652 --rest-port=56650 --tcp-port=56651 --discv5-udp-port=56653 --rest-address=0.0.0.0 --nat=extip:172.18.60.144 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bc3bedffd3d6bd784ace1bf2abeaf4d9f06bbbb26b3262f9af654fd3c19c838a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56654 --metrics-logging=true --relay=true --filter=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 359602f838b7. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.60.144 waku b1f219addd1e40df326a9a0fdcb54c6ca07faec7154c640fdc3ba9811c8751d8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b1f219addd1e. Setting up logs at ./log/docker/node1_2024-10-23_12-48-50__fb103856-e8db-4939-88bc-b76390f81643__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 56650
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56650/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56650/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.60.144/tcp/56651/p2p/16Uiu2HAmQcczfzfFgramLaz98mGkeGRW7ze8pfxWACa9w9vYvX17","/ip4/172.18.60.144/tcp/56652/ws/p2p/16Uiu2HAmQcczfzfFgramLaz98mGkeGRW7ze8pfxWACa9w9vYvX17"],"enrUri":"enr:-LO4QJ8TjAbHCcGGAkdx12OO9kIGUFl21I0aS9h_4VUtv_CUYs8OaQ4xkqoBdYmmcxj-nqW1BdIshIwGj72GhoV1xjkBgmlkgnY0gmlwhKwSPJCKbXVsdGlhZGRyc4wACgSsEjyQBt1M3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOxsO9PIR3wa6VrYVyaU_ARdl_xrJxazpHYwSc33qLyloN0Y3CC3UuDdWRwgt1NhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-23_12-48-50__fb103856-e8db-4939-88bc-b76390f81643__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.138.173
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8327', '8328', '8329', '8330', '8331']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8327:8327 -p 8328:8328 -p 8329:8329 -p 8330:8330 -p 8331:8331 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8329 --rest-port=8327 --tcp-port=8328 --discv5-udp-port=8330 --rest-address=0.0.0.0 --nat=extip:172.18.138.173 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=34c92bab17f0a9199b4abea4cd4ed5de8a0e2f52de2bbf5d2aff6dc5bffd8dfe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8331 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QJ8TjAbHCcGGAkdx12OO9kIGUFl21I0aS9h_4VUtv_CUYs8OaQ4xkqoBdYmmcxj-nqW1BdIshIwGj72GhoV1xjkBgmlkgnY0gmlwhKwSPJCKbXVsdGlhZGRyc4wACgSsEjyQBt1M3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOxsO9PIR3wa6VrYVyaU_ARdl_xrJxazpHYwSc33qLyloN0Y3CC3UuDdWRwgt1NhXdha3UyBQ --filternode=/ip4/172.18.60.144/tcp/56651/p2p/16Uiu2HAmQcczfzfFgramLaz98mGkeGRW7ze8pfxWACa9w9vYvX17
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.138.173 waku c2c464ea74a9066db83a950931bdd5b90e6fe7233a6f90e93871e560160faaf6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c2c464ea74a9. Setting up logs at ./log/docker/node2_2024-10-23_12-48-50__fb103856-e8db-4939-88bc-b76390f81643__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 8327
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8327/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8327/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.138.173/tcp/8328/p2p/16Uiu2HAmLKdjDLTM8xzTYFGTPiWFkfiUQJ8qPG38HMgw3m9KWhHX","/ip4/172.18.138.173/tcp/8329/ws/p2p/16Uiu2HAmLKdjDLTM8xzTYFGTPiWFkfiUQJ8qPG38HMgw3m9KWhHX"],"enrUri":"enr:-LO4QBPEZoicM6ifzbwK1WkJABukg2x0YJERgvLY2TwBqPbNGHGjYEqUgsqWGzQ4wpwceWuXD4bXafbAnNULUtKcbT8BgmlkgnY0gmlwhKwSiq2KbXVsdGlhZGRyc4wACgSsEoqtBiCJ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNx6CSFcpIMS4dtLlWrq_TBLwvRs3vRBg6FubH_xiV0BoN0Y3CCIIiDdWRwgiCKhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8327/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.60.144/tcp/56651/p2p/16Uiu2HAmQcczfzfFgramLaz98mGkeGRW7ze8pfxWACa9w9vYvX17"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56650/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8327/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "fa66456c-8743-4d5b-8a84-85a23f671d8d", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"fa66456c-8743-4d5b-8a84-85a23f671d8d","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:8327/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:8327/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b1f219addd1e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c2c464ea74a9
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b1f219addd1e. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.