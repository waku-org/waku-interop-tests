[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2024-10-23_13-13-26__0217e772-b46f-4f10-acf0-c23af4c13c2e
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-10-23_13-13-26__0217e772-b46f-4f10-acf0-c23af4c13c2e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.139.47
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['23230', '23231', '23232', '23233', '23234']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 23230:23230 -p 23231:23231 -p 23232:23232 -p 23233:23233 -p 23234:23234 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23232 --rest-port=23230 --tcp-port=23231 --discv5-udp-port=23233 --rest-address=0.0.0.0 --nat=extip:172.18.139.47 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ae25355cff6319cbb95f86c7bcdf7b14e65bdfd8dac3da6cb34cad7e7a1e2be5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23234 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.139.47 waku 62444ae91791998ae1d1b16ecb85bdb1dd728a4cc0db85e117b7a32ee62abce0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 62444ae91791. Setting up logs at ./log/docker/publishing_node1_2024-10-23_13-13-26__0217e772-b46f-4f10-acf0-c23af4c13c2e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 23230
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ed11606a7f72. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23230/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23230/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.139.47/tcp/23231/p2p/16Uiu2HAmBSKrN8JUK5UooFGZ5mdTRtnqCx7P923EcEuafHyM2aeb","/ip4/172.18.139.47/tcp/23232/ws/p2p/16Uiu2HAmBSKrN8JUK5UooFGZ5mdTRtnqCx7P923EcEuafHyM2aeb"],"enrUri":"enr:-LO4QFLodbMsQ8sN4ga-hVbqDHytZ9EfxWpudKfFlJudVn1hWo8Elw07HD2s-NiJNlYfMhmddYCTFXF0aJ7ChypMS_ABgmlkgnY0gmlwhKwSiy-KbXVsdGlhZGRyc4wACgSsEosvBlrA3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLt5dAP1R-P8Bf4n3jOzuhCCHHsixzdKduaZkSyawJMkIN0Y3CCWr-DdWRwglrBhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node2_2024-10-23_13-13-26__0217e772-b46f-4f10-acf0-c23af4c13c2e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.230.103
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['62973', '62974', '62975', '62976', '62977']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 62973:62973 -p 62974:62974 -p 62975:62975 -p 62976:62976 -p 62977:62977 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62975 --rest-port=62973 --tcp-port=62974 --discv5-udp-port=62976 --rest-address=0.0.0.0 --nat=extip:172.18.230.103 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=15c891ebbfebfff89fbe36c746f630cacc1f26ee7d5d3c2eeaaceccbd57acf6a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62977 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.230.103 waku 9fe7366fea662813a246e84fb077f1ee1641acc9bf30a7c5460a5932cfc43135
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9fe7366fea66. Setting up logs at ./log/docker/publishing_node2_2024-10-23_13-13-26__0217e772-b46f-4f10-acf0-c23af4c13c2e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 62973
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62973/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62973/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.230.103/tcp/62974/p2p/16Uiu2HAmFN5JdhbkNnmMjcKpfZCdcJ3pw1bUj3DEFjyACf9pdNv8","/ip4/172.18.230.103/tcp/62975/ws/p2p/16Uiu2HAmFN5JdhbkNnmMjcKpfZCdcJ3pw1bUj3DEFjyACf9pdNv8"],"enrUri":"enr:-LO4QLHF-MSQuIy4YgkCuHPogcoUCKGnxxI3kjcHnXgzRz0JL9Gbxz9HfWZeEHOQdmaOura71HeCm6YnbjR9Kn2kZLgBgmlkgnY0gmlwhKwS5meKbXVsdGlhZGRyc4wACgSsEuZnBvX_3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMoPcnsE8zxYGORgRqDIVfrbI88r21Nv5VaS-6c4S4CjYN0Y3CC9f6DdWRwgvYAhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62973/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.139.47/tcp/23231/p2p/16Uiu2HAmBSKrN8JUK5UooFGZ5mdTRtnqCx7P923EcEuafHyM2aeb"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-10-23_13-13-26__0217e772-b46f-4f10-acf0-c23af4c13c2e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.127.43
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['16092', '16093', '16094', '16095', '16096']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 16092:16092 -p 16093:16093 -p 16094:16094 -p 16095:16095 -p 16096:16096 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16094 --rest-port=16092 --tcp-port=16093 --discv5-udp-port=16095 --rest-address=0.0.0.0 --nat=extip:172.18.127.43 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e4f17a4fc846abf7c60406ce450ef5bbaeeefffae7eedbd27dc207e5639dfc35 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16096 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QFLodbMsQ8sN4ga-hVbqDHytZ9EfxWpudKfFlJudVn1hWo8Elw07HD2s-NiJNlYfMhmddYCTFXF0aJ7ChypMS_ABgmlkgnY0gmlwhKwSiy-KbXVsdGlhZGRyc4wACgSsEosvBlrA3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLt5dAP1R-P8Bf4n3jOzuhCCHHsixzdKduaZkSyawJMkIN0Y3CCWr-DdWRwglrBhXdha3UyCw --storenode=/ip4/172.18.139.47/tcp/23231/p2p/16Uiu2HAmBSKrN8JUK5UooFGZ5mdTRtnqCx7P923EcEuafHyM2aeb --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.139.47/tcp/23231/p2p/16Uiu2HAmBSKrN8JUK5UooFGZ5mdTRtnqCx7P923EcEuafHyM2aeb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.127.43 waku 9c052938dda3184c70f1f669f7f3afdf4dee85a396c7880e450a51fbb725d106
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9c052938dda3. Setting up logs at ./log/docker/store_node1_2024-10-23_13-13-26__0217e772-b46f-4f10-acf0-c23af4c13c2e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 16092
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16092/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16092/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.127.43/tcp/16093/p2p/16Uiu2HAm6prvLBzmjFtwF7uXYXkZAtyjaFn8PTdgg7KEoZfjUiRH","/ip4/172.18.127.43/tcp/16094/ws/p2p/16Uiu2HAm6prvLBzmjFtwF7uXYXkZAtyjaFn8PTdgg7KEoZfjUiRH"],"enrUri":"enr:-LO4QExtqML8KSag5BkZciwf27PtDQCDvSyab_GeDmy2WMeHAOlucd0Oxg6pq9sCteaddnucIzhSqlCG7kp8VrWAsXEBgmlkgnY0gmlwhKwSfyuKbXVsdGlhZGRyc4wACgSsEn8rBj7e3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKpYUj5CKg936CYS4KS8_BnPiGm1pAIHG-YvjhG_Nxo3IN0Y3CCPt2DdWRwgj7fhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16092/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.139.47/tcp/23231/p2p/16Uiu2HAmBSKrN8JUK5UooFGZ5mdTRtnqCx7P923EcEuafHyM2aeb"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16092/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.230.103/tcp/62974/p2p/16Uiu2HAmFN5JdhbkNnmMjcKpfZCdcJ3pw1bUj3DEFjyACf9pdNv8"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23230/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62973/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16092/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1729689211318922240}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23230/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"HwbVFj5QP1jj543gLWom/mDmuLdFQAF0qUcWUxPvijM="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16092/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"5c7e44bb2258a605f727","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"HwbVFj5QP1jj543gLWom/mDmuLdFQAF0qUcWUxPvijM="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 62444ae91791
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9fe7366fea66
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 62444ae91791. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9c052938dda3
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9fe7366fea66. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.