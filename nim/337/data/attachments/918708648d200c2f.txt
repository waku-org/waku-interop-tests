[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_payload with id: 2024-08-29_04-19-53__3fa3b142-1a28-450a-a242-388b2c80d947
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-29_04-19-53__3fa3b142-1a28-450a-a242-388b2c80d947__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.189.38
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['29802', '29803', '29804', '29805', '29806']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 29802:29802 -p 29803:29803 -p 29804:29804 -p 29805:29805 -p 29806:29806 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29804 --rest-port=29802 --tcp-port=29803 --discv5-udp-port=29805 --rest-address=0.0.0.0 --nat=extip:172.18.189.38 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a940d54b1bee9dad3e22da23c621cd0da41e5ba46c646177faa880ebbeb170be --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29806 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.189.38 waku 2b6fd687b8b202b1c5a69c147eae7fe9c238407f5147e769e0be2e161fa32b6a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2b6fd687b8b2. Setting up logs at ./log/docker/receiving_node1_2024-08-29_04-19-53__3fa3b142-1a28-450a-a242-388b2c80d947__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 29802
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29802/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29802/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.189.38/tcp/29803/p2p/16Uiu2HAm4DfuGGngTjY39iPtUbGjpYBqy65ffWaPfEYwRgmEK2Ar","/ip4/172.18.189.38/tcp/29804/ws/p2p/16Uiu2HAm4DfuGGngTjY39iPtUbGjpYBqy65ffWaPfEYwRgmEK2Ar"],"enrUri":"enr:-LO4QCTEpqUWtxSOdPVXzw2hN1cC4hr-ZHUnGsBiQ13sfEIAH5VZojnqHcPVXvxqTK2eQAQM0u_iGK2rtyu0xa8f4OABgmlkgnY0gmlwhKwSvSaKbXVsdGlhZGRyc4wACgSsEr0mBnRs3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKCph_T-_wAskv9gRyYIBwggdihto_fbvFi533nH9a3P4N0Y3CCdGuDdWRwgnRthXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-29_04-19-53__3fa3b142-1a28-450a-a242-388b2c80d947__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.117.185
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['48537', '48538', '48539', '48540', '48541']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 48537:48537 -p 48538:48538 -p 48539:48539 -p 48540:48540 -p 48541:48541 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48539 --rest-port=48537 --tcp-port=48538 --discv5-udp-port=48540 --rest-address=0.0.0.0 --nat=extip:172.18.117.185 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=abedda4ae70405a0f8e14b9d04299c0588889d1a67dd0fa17cca4fbcacd9e9ed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48541 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.117.185 waku 3f5cf0400ccc497e1e2f4f03d137c877dcf9dc9a72aec7e910da3e0a0532af7e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3f5cf0400ccc. Setting up logs at ./log/docker/receiving_node2_2024-08-29_04-19-53__3fa3b142-1a28-450a-a242-388b2c80d947__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 48537
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48537/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48537/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.117.185/tcp/48538/p2p/16Uiu2HAmJH3is7dhr65KzBLRTT6zf8RRnhphFjJRqHKm5HkXmDsM","/ip4/172.18.117.185/tcp/48539/ws/p2p/16Uiu2HAmJH3is7dhr65KzBLRTT6zf8RRnhphFjJRqHKm5HkXmDsM"],"enrUri":"enr:-LO4QKL4F_3iBGk6ywLADUOk4ViGrzXEqrefmu6OOt2LDp_7K1JEyZKaLtXEuI4tzAsPu6CKbeWU7_NxqJzbi0PrLjYBgmlkgnY0gmlwhKwSdbmKbXVsdGlhZGRyc4wACgSsEnW5Br2b3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNThygOfljSlcxigbLM_d0Yqs1_bz-s5D4n-HL6NQ2fuIN0Y3CCvZqDdWRwgr2chXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48537/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.189.38/tcp/29803/p2p/16Uiu2HAm4DfuGGngTjY39iPtUbGjpYBqy65ffWaPfEYwRgmEK2Ar"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-29_04-19-53__3fa3b142-1a28-450a-a242-388b2c80d947__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.193.153
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['2057', '2058', '2059', '2060', '2061']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 2057:2057 -p 2058:2058 -p 2059:2059 -p 2060:2060 -p 2061:2061 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2059 --rest-port=2057 --tcp-port=2058 --discv5-udp-port=2060 --rest-address=0.0.0.0 --nat=extip:172.18.193.153 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e30f4ba2df2f64ddfcc9fbb71aaaaeb9dfd74e4ea6538ae30ef391bf87ace54b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2061 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QCTEpqUWtxSOdPVXzw2hN1cC4hr-ZHUnGsBiQ13sfEIAH5VZojnqHcPVXvxqTK2eQAQM0u_iGK2rtyu0xa8f4OABgmlkgnY0gmlwhKwSvSaKbXVsdGlhZGRyc4wACgSsEr0mBnRs3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKCph_T-_wAskv9gRyYIBwggdihto_fbvFi533nH9a3P4N0Y3CCdGuDdWRwgnRthXdha3UyCQ --lightpushnode=/ip4/172.18.189.38/tcp/29803/p2p/16Uiu2HAm4DfuGGngTjY39iPtUbGjpYBqy65ffWaPfEYwRgmEK2Ar --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.193.153 waku c48c6bb841925babc721c754c71f1033abcba5f714adeabf45faf37b45b5dbf2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c48c6bb84192. Setting up logs at ./log/docker/lightpush_node1_2024-08-29_04-19-53__3fa3b142-1a28-450a-a242-388b2c80d947__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 2057
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2057/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2057/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.193.153/tcp/2058/p2p/16Uiu2HAm558MqbfL4dSqNcipWncAgaudBVgoiXsRDjaTq92eWRYB","/ip4/172.18.193.153/tcp/2059/ws/p2p/16Uiu2HAm558MqbfL4dSqNcipWncAgaudBVgoiXsRDjaTq92eWRYB"],"enrUri":"enr:-LO4QCpcnSWuk2x2Gym27wfULBUf78R0lle_1wJdFxRHL9WBQNaP4qEXSBsyfEV0YQUzJiAfj-xodPGwbxQ307dH9BIBgmlkgnY0gmlwhKwSwZmKbXVsdGlhZGRyc4wACgSsEsGZBggL3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKPUYAV97w3viPdjPrXOdPwjY8lq7HLY3ZT6jk4V2CX6IN0Y3CCCAqDdWRwgggMhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2057/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.189.38/tcp/29803/p2p/16Uiu2HAm4DfuGGngTjY39iPtUbGjpYBqy65ffWaPfEYwRgmEK2Ar"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2057/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.117.185/tcp/48538/p2p/16Uiu2HAmJH3is7dhr65KzBLRTT6zf8RRnhphFjJRqHKm5HkXmDsM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29802/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48537/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2057/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1724905199293848576}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:2057/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2b6fd687b8b2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3f5cf0400ccc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c48c6bb84192
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.