[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_get_store_duplicate_messages with id: 2024-08-29_04-32-36__0e9e9b6b-d849-4ca0-9512-db2a0e295121
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-08-29_04-32-36__0e9e9b6b-d849-4ca0-9512-db2a0e295121__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.118.8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['4511', '4512', '4513', '4514', '4515']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 4511:4511 -p 4512:4512 -p 4513:4513 -p 4514:4514 -p 4515:4515 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4513 --rest-port=4511 --tcp-port=4512 --discv5-udp-port=4514 --rest-address=0.0.0.0 --nat=extip:172.18.118.8 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4b0e770f26efbabee7dc1dfaf9bb34bceef1d36b3fa8ea319ad6c69d3c60d3e7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4515 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.118.8 waku a137968f160461cd0e37da6a5b0063b59fe4e15616b9232c2d077881543a2f58
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a137968f1604. Setting up logs at ./log/docker/publishing_node1_2024-08-29_04-32-36__0e9e9b6b-d849-4ca0-9512-db2a0e295121__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 4511
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4511/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4511/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.118.8/tcp/4512/p2p/16Uiu2HAmR6FkfFRnjd9wCSNEeDimN6eHdht7dFBiQPVCeu2zo6tz","/ip4/172.18.118.8/tcp/4513/ws/p2p/16Uiu2HAmR6FkfFRnjd9wCSNEeDimN6eHdht7dFBiQPVCeu2zo6tz"],"enrUri":"enr:-LO4QPAOJZikpXRFE7L0FEZSGFGi7PahmAz57U5BQnNbedXbVSgeQF8DT_f-xr6V-lVa6EEH7aD3mFkynyY2cSLLGT4BgmlkgnY0gmlwhKwSdgiKbXVsdGlhZGRyc4wACgSsEnYIBhGh3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO4xS3zv_JPbuLKXmCHnVK8fDKnUEsApEiJqCbESl2rW4N0Y3CCEaCDdWRwghGihXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-08-29_04-32-36__0e9e9b6b-d849-4ca0-9512-db2a0e295121__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.128.220
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['50456', '50457', '50458', '50459', '50460']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 50456:50456 -p 50457:50457 -p 50458:50458 -p 50459:50459 -p 50460:50460 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50458 --rest-port=50456 --tcp-port=50457 --discv5-udp-port=50459 --rest-address=0.0.0.0 --nat=extip:172.18.128.220 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e3ec72d0e9de6edabf6bca12dbc8cef8ba75be4b8a67de5bfbcbafc041655dce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50460 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QPAOJZikpXRFE7L0FEZSGFGi7PahmAz57U5BQnNbedXbVSgeQF8DT_f-xr6V-lVa6EEH7aD3mFkynyY2cSLLGT4BgmlkgnY0gmlwhKwSdgiKbXVsdGlhZGRyc4wACgSsEnYIBhGh3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO4xS3zv_JPbuLKXmCHnVK8fDKnUEsApEiJqCbESl2rW4N0Y3CCEaCDdWRwghGihXdha3UyAw --storenode=/ip4/172.18.118.8/tcp/4512/p2p/16Uiu2HAmR6FkfFRnjd9wCSNEeDimN6eHdht7dFBiQPVCeu2zo6tz --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.128.220 waku 4e16adc3046edda713e6e9f702f18be362baab0f7b1d14684fdb6b7715c3a8a3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4e16adc3046e. Setting up logs at ./log/docker/store_node1_2024-08-29_04-32-36__0e9e9b6b-d849-4ca0-9512-db2a0e295121__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 50456
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50456/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50456/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.128.220/tcp/50457/p2p/16Uiu2HAkwyPs3vFoJMcQ1YMShyeX1geM7DCNy9oXaNznGTWVfp2F","/ip4/172.18.128.220/tcp/50458/ws/p2p/16Uiu2HAkwyPs3vFoJMcQ1YMShyeX1geM7DCNy9oXaNznGTWVfp2F"],"enrUri":"enr:-LO4QA5owZG5LYxz_mKOp_1vKni0mTgAHnrtS95VD9hLvTUhWJAwXBVYVlfXvY-fRMU8eYqA8dZdyFCeEXaPy12lTVsBgmlkgnY0gmlwhKwSgNyKbXVsdGlhZGRyc4wACgSsEoDcBsUa3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIl17yu3092eWBTNHLG3UBAjZ1_x5elInCk1MrxfJ8ftIN0Y3CCxRmDdWRwgsUbhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50456/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.118.8/tcp/4512/p2p/16Uiu2HAmR6FkfFRnjd9wCSNEeDimN6eHdht7dFBiQPVCeu2zo6tz"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4511/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50456/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4511/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4511/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:216 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4511/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"SwGmRHWDg3Z7nGEePFryiGDT2SC49qQUyl86ZQnnkWs="}]}'
[35mDEBUG   [0m src.steps.store:store.py:216 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50456/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"SwGmRHWDg3Z7nGEePFryiGDT2SC49qQUyl86ZQnnkWs="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a137968f1604
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4e16adc3046e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.