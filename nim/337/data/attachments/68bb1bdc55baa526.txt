[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_relay__peer_only_store with id: 2024-08-29_04-36-36__fcda36a2-4386-4fef-94da-5f25d8065d99
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-08-29_04-36-36__fcda36a2-4386-4fef-94da-5f25d8065d99__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.16.128
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['60964', '60965', '60966', '60967', '60968']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 60964:60964 -p 60965:60965 -p 60966:60966 -p 60967:60967 -p 60968:60968 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60966 --rest-port=60964 --tcp-port=60965 --discv5-udp-port=60967 --rest-address=0.0.0.0 --nat=extip:172.18.16.128 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c4c2afed1cfc5b5ba1bbbe3d5b81b0d8715ab8ce045cf8feb4bed5ecbdb35d5e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60968 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.16.128 waku d501de63f23d9ff48fbacb3b173c478ab5361730fe38434ed79571b8fc6b0e96
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d501de63f23d. Setting up logs at ./log/docker/publishing_node1_2024-08-29_04-36-36__fcda36a2-4386-4fef-94da-5f25d8065d99__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 60964
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60964/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60964/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.16.128/tcp/60965/p2p/16Uiu2HAmK3fibbygZJ7ge5seZx44nhM45ypqT3Fxe3KnMNaEwCp2","/ip4/172.18.16.128/tcp/60966/ws/p2p/16Uiu2HAmK3fibbygZJ7ge5seZx44nhM45ypqT3Fxe3KnMNaEwCp2"],"enrUri":"enr:-LO4QFatlGk3TVj_8H-Q-IUvNbD37_pEJocNfMaOiRZ96LspbwvUcQbzmDLMEkbMGMG1_u7kyw8qABB5H2eefiac5XUBgmlkgnY0gmlwhKwSEICKbXVsdGlhZGRyc4wACgSsEhCABu4m3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNe9WmFD2NrDUySYKraswF4jR_MU-Ns2Py5PAa9_kwpU4N0Y3CC7iWDdWRwgu4nhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-08-29_04-36-36__fcda36a2-4386-4fef-94da-5f25d8065d99__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.221.159
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['51302', '51303', '51304', '51305', '51306']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 51302:51302 -p 51303:51303 -p 51304:51304 -p 51305:51305 -p 51306:51306 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51304 --rest-port=51302 --tcp-port=51303 --discv5-udp-port=51305 --rest-address=0.0.0.0 --nat=extip:172.18.221.159 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2196358b7bcede89a127fd7a4ce7b016cb565edce3c06bbcf3775cce6c9a64ac --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51306 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QFatlGk3TVj_8H-Q-IUvNbD37_pEJocNfMaOiRZ96LspbwvUcQbzmDLMEkbMGMG1_u7kyw8qABB5H2eefiac5XUBgmlkgnY0gmlwhKwSEICKbXVsdGlhZGRyc4wACgSsEhCABu4m3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNe9WmFD2NrDUySYKraswF4jR_MU-Ns2Py5PAa9_kwpU4N0Y3CC7iWDdWRwgu4nhXdha3UyAQ --storenode=/ip4/172.18.16.128/tcp/60965/p2p/16Uiu2HAmK3fibbygZJ7ge5seZx44nhM45ypqT3Fxe3KnMNaEwCp2 --store=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.221.159 waku e4887a1a05abcf710c44f4847067b33b0fbdc796f1ac5fac76f54c3a116f281f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e4887a1a05ab. Setting up logs at ./log/docker/store_node1_2024-08-29_04-36-36__fcda36a2-4386-4fef-94da-5f25d8065d99__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 51302
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51302/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51302/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.221.159/tcp/51303/p2p/16Uiu2HAmMuJWzgANKZ1sKGEs69oGxUCvoC8QtD1t92bBgKmmxxvC","/ip4/172.18.221.159/tcp/51304/ws/p2p/16Uiu2HAmMuJWzgANKZ1sKGEs69oGxUCvoC8QtD1t92bBgKmmxxvC"],"enrUri":"enr:-LO4QODePANEyU_8wq8EemP4w0IeoC4tnBu1oV1PGwNTnwhxXE3iGOJ6CTFLXLPHCJv3hMbuHfWdk37J_-3Kqw1SaV8BgmlkgnY0gmlwhKwS3Z-KbXVsdGlhZGRyc4wACgSsEt2fBsho3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOJY9sEQMo--lkrtcrAvi0jIsMqMrG7JLKyVIxG8LFPoYN0Y3CCyGeDdWRwgshphXdha3UyAg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51302/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.16.128/tcp/60965/p2p/16Uiu2HAmK3fibbygZJ7ge5seZx44nhM45ypqT3Fxe3KnMNaEwCp2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60964/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60964/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:216 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51302/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d501de63f23d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e4887a1a05ab
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.