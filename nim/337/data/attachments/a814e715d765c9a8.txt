[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_all_with_extra_field with id: 2024-08-29_04-19-06__21369888-fb99-4e64-8df1-5b4c92e1c8d6
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-29_04-19-06__21369888-fb99-4e64-8df1-5b4c92e1c8d6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.44.177
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['25191', '25192', '25193', '25194', '25195']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 25191:25191 -p 25192:25192 -p 25193:25193 -p 25194:25194 -p 25195:25195 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25193 --rest-port=25191 --tcp-port=25192 --discv5-udp-port=25194 --rest-address=0.0.0.0 --nat=extip:172.18.44.177 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2124e9deedbfdcec41ee7e3beef99157a2a4eedccc0c12f585aefff7c0cc49bb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25195 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.44.177 waku 2c6a93fea7b1e0c4da2f757347a4d72327adde261778ade4104b7bec73665a3f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2c6a93fea7b1. Setting up logs at ./log/docker/node1_2024-08-29_04-19-06__21369888-fb99-4e64-8df1-5b4c92e1c8d6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 25191
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25191/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25191/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.44.177/tcp/25192/p2p/16Uiu2HAm8YHqhLjwUSVeNN26HirJ7Qz4YyXY6GGn1TDGNs8idSyF","/ip4/172.18.44.177/tcp/25193/ws/p2p/16Uiu2HAm8YHqhLjwUSVeNN26HirJ7Qz4YyXY6GGn1TDGNs8idSyF"],"enrUri":"enr:-LO4QETRbx6JZlgPfyqvEwztz4yPhU2zrCHQSb75ZuT4hiyZQtuajdZ3tfeJ0L39GnXkNikILWvVKfjJTYxsFuxL1EIBgmlkgnY0gmlwhKwSLLGKbXVsdGlhZGRyc4wACgSsEiyxBmJp3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLC2fZeF2yjULewg73M8eb8-N4I8C9BrZZoiV7_ls9l0oN0Y3CCYmiDdWRwgmJqhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-08-29_04-19-06__21369888-fb99-4e64-8df1-5b4c92e1c8d6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.2.58
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['24495', '24496', '24497', '24498', '24499']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 24495:24495 -p 24496:24496 -p 24497:24497 -p 24498:24498 -p 24499:24499 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24497 --rest-port=24495 --tcp-port=24496 --discv5-udp-port=24498 --rest-address=0.0.0.0 --nat=extip:172.18.2.58 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ef34f8e02dadd345fda6adcfcac5fdffcbca500bcffcae3c7d26ef45765a37d9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24499 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QETRbx6JZlgPfyqvEwztz4yPhU2zrCHQSb75ZuT4hiyZQtuajdZ3tfeJ0L39GnXkNikILWvVKfjJTYxsFuxL1EIBgmlkgnY0gmlwhKwSLLGKbXVsdGlhZGRyc4wACgSsEiyxBmJp3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLC2fZeF2yjULewg73M8eb8-N4I8C9BrZZoiV7_ls9l0oN0Y3CCYmiDdWRwgmJqhXdha3UyBQ --filternode=/ip4/172.18.44.177/tcp/25192/p2p/16Uiu2HAm8YHqhLjwUSVeNN26HirJ7Qz4YyXY6GGn1TDGNs8idSyF
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.2.58 waku baebf72335bd740ae5b047f2e27cd5ee1e759a998284d0072af7d02bc12cd4c3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID baebf72335bd. Setting up logs at ./log/docker/node2_2024-08-29_04-19-06__21369888-fb99-4e64-8df1-5b4c92e1c8d6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 24495
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24495/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24495/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.2.58/tcp/24496/p2p/16Uiu2HAmA9AHfauZ6TTbTVsafWgqsCM8rTd9eYmDb1mMs3HVrmaA","/ip4/172.18.2.58/tcp/24497/ws/p2p/16Uiu2HAmA9AHfauZ6TTbTVsafWgqsCM8rTd9eYmDb1mMs3HVrmaA"],"enrUri":"enr:-LO4QMb9hTSqTQ0EgVxF_Aq8wPDk9vFA19YLOwgeBd-K-IPNVaTrOtKGWBZCwAzjeRu6dOzc45Omy-h6aqCS81Osp-kBgmlkgnY0gmlwhKwSAjqKbXVsdGlhZGRyc4wACgSsEgI6Bl-x3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLapHAyKHfuAk1z0bPksCMdP-w4g6iNOT6IBKeOiydom4N0Y3CCX7CDdWRwgl-yhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24495/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.44.177/tcp/25192/p2p/16Uiu2HAm8YHqhLjwUSVeNN26HirJ7Qz4YyXY6GGn1TDGNs8idSyF"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25191/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24495/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "c659aa1a-adb4-4365-9b21-fa09fc838de8", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"c659aa1a-adb4-4365-9b21-fa09fc838de8","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:24495/filter/v2/subscriptions/all" -H "Content-Type: application/json" -d '{"requestId": 1, "extraField": "extraValue"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:24495/filter/v2/subscriptions/all. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2c6a93fea7b1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id baebf72335bd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.