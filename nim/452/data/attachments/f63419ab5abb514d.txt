[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_all_with_extra_field with id: 2024-11-17_04-12-54__f6574a03-dbe0-47c1-96ec-61a80a34efba
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-17_04-12-54__f6574a03-dbe0-47c1-96ec-61a80a34efba__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.48.252
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['32722', '32723', '32724', '32725', '32726']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 32722:32722 -p 32723:32723 -p 32724:32724 -p 32725:32725 -p 32726:32726 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32724 --rest-port=32722 --tcp-port=32723 --discv5-udp-port=32725 --rest-address=0.0.0.0 --nat=extip:172.18.48.252 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c9a19451b30a86aabd0b9dda95dc31ecfbe5fefd0dde8dd0892ac05161a611d9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32726 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.48.252 waku bd35b06175a5e4ff6a3219a8f37720f3d4552f3cb5a297aaa4ba2d31053a1bbc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID bd35b06175a5. Setting up logs at ./log/docker/node1_2024-11-17_04-12-54__f6574a03-dbe0-47c1-96ec-61a80a34efba__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 32722
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a8ab343f47db. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32722/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32722/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.48.252/tcp/32723/p2p/16Uiu2HAm6s8xKSVEHSVyjYm412VXiaAC5nzLfxZU2Yia8Vuhu7aa","/ip4/172.18.48.252/tcp/32724/ws/p2p/16Uiu2HAm6s8xKSVEHSVyjYm412VXiaAC5nzLfxZU2Yia8Vuhu7aa"],"enrUri":"enr:-L24QB056XSs8X9vlJC_nbtYiNcwgV_-YBGJ1jjx-e8rjrS0U9fT1IAlzjrcvv868dBq5tw03INhLb5Og69tNplOhJMCgmlkgnY0gmlwhKwSMPyKbXVsdGlhZGRyc5YACASsEjD8Bn_TAAoErBIw_AZ_1N0DgnJzhQADAQAAiXNlY3AyNTZrMaECqfaToDazUt4qJVR5FH4TNAlRSbvOINCiZeLNVw3GrRODdGNwgn_Tg3VkcIJ_1YV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-17_04-12-54__f6574a03-dbe0-47c1-96ec-61a80a34efba__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.7.35
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['44191', '44192', '44193', '44194', '44195']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 44191:44191 -p 44192:44192 -p 44193:44193 -p 44194:44194 -p 44195:44195 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44193 --rest-port=44191 --tcp-port=44192 --discv5-udp-port=44194 --rest-address=0.0.0.0 --nat=extip:172.18.7.35 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=95fcf4cb7460bcdfc75a24d589d9efa0ec1e6f307fd3ffeafdc8b6b91d3ccea0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44195 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QB056XSs8X9vlJC_nbtYiNcwgV_-YBGJ1jjx-e8rjrS0U9fT1IAlzjrcvv868dBq5tw03INhLb5Og69tNplOhJMCgmlkgnY0gmlwhKwSMPyKbXVsdGlhZGRyc5YACASsEjD8Bn_TAAoErBIw_AZ_1N0DgnJzhQADAQAAiXNlY3AyNTZrMaECqfaToDazUt4qJVR5FH4TNAlRSbvOINCiZeLNVw3GrRODdGNwgn_Tg3VkcIJ_1YV3YWt1MgU --filternode=/ip4/172.18.48.252/tcp/32723/p2p/16Uiu2HAm6s8xKSVEHSVyjYm412VXiaAC5nzLfxZU2Yia8Vuhu7aa
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.7.35 waku 95bef6e9e6102713347434b35b2b482a70185b9ee957b134e0953e3619c8e5dc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 95bef6e9e610. Setting up logs at ./log/docker/node2_2024-11-17_04-12-54__f6574a03-dbe0-47c1-96ec-61a80a34efba__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 44191
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44191/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44191/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.7.35/tcp/44192/p2p/16Uiu2HAm34M16FxQBX7rnwbbVBjuiawi3cM5yn9st2eQbYtaBKLS","/ip4/172.18.7.35/tcp/44193/ws/p2p/16Uiu2HAm34M16FxQBX7rnwbbVBjuiawi3cM5yn9st2eQbYtaBKLS"],"enrUri":"enr:-L24QOZi1-b0TcCB_e9zEQFDAV3I216kCRCqo88IcPOwZn-4OXUjDhDU7oRqU7iJp3P8MwnTY0fvhebzO3tRuBz5iM0CgmlkgnY0gmlwhKwSByOKbXVsdGlhZGRyc5YACASsEgcjBqygAAoErBIHIwasod0DgnJzhQADAQAAiXNlY3AyNTZrMaECcWbXIYRqQSCc-9UXjwCzb0WYvxc2fqXuA0J5gMBMEC-DdGNwgqygg3VkcIKsooV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44191/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.48.252/tcp/32723/p2p/16Uiu2HAm6s8xKSVEHSVyjYm412VXiaAC5nzLfxZU2Yia8Vuhu7aa"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32722/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44191/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "b2ef8ba9-f9a6-4899-a991-59757be37d9a", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"b2ef8ba9-f9a6-4899-a991-59757be37d9a","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:44191/filter/v2/subscriptions/all" -H "Content-Type: application/json" -d '{"requestId": 1, "extraField": "extraValue"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:44191/filter/v2/subscriptions/all. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id bd35b06175a5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 95bef6e9e610
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container bd35b06175a5. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.