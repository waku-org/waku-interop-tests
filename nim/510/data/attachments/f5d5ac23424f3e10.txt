[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_stored_when_ephemeral_false with id: 2024-12-10_08-34-57__ea4916b4-6119-49be-8f05-70230f336d37
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-10_08-34-57__ea4916b4-6119-49be-8f05-70230f336d37__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-10_08-34-57__ea4916b4-6119-49be-8f05-70230f336d37__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-10_08-34-57__ea4916b4-6119-49be-8f05-70230f336d37__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:413 Start 3 nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.140.46
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['49482', '49483', '49484', '49485', '49486']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 49482:49482 -p 49483:49483 -p 49484:49484 -p 49485:49485 -p 49486:49486 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49484 --rest-port=49482 --tcp-port=49483 --discv5-udp-port=49485 --rest-address=0.0.0.0 --nat=extip:172.18.140.46 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=13de8c1b23f47cea6f6fa973fc37adc9f5e39afc397fef8e3ef64e3e49ab147d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49486 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.140.46 waku 0f361cf8c560a70e74a30fdb2d3a10fbefa4ebeec3e4b2989a3d16c4b09b393d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0f361cf8c560. Setting up logs at ./log/docker/node1_2024-12-10_08-34-57__ea4916b4-6119-49be-8f05-70230f336d37__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 49482
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container add10d01d77f. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49482/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49482/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.140.46/tcp/49483/p2p/16Uiu2HAkuhWVG6omHPsFJ6Qg2sndNohtuLjtBQWq27y5A7RReEs4","/ip4/172.18.140.46/tcp/49484/ws/p2p/16Uiu2HAkuhWVG6omHPsFJ6Qg2sndNohtuLjtBQWq27y5A7RReEs4"],"enrUri":"enr:-L24QM81W028axzxvDbMDMYFdhuj5HKPcYt0RNc6mXKh_mT3YlU2I0o7IeW6jj8XALCrzDFleWBcWIs5stN6sOAOlrwCgmlkgnY0gmlwhKwSjC6KbXVsdGlhZGRyc5YACASsEowuBsFLAAoErBKMLgbBTN0DgnJzhQADAQAAiXNlY3AyNTZrMaECBA6PdOkcc6pQR2-eU0_0_c_1stbXfn_lwsldluAXFnODdGNwgsFLg3VkcILBTYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.32.101
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['47606', '47607', '47608', '47609', '47610']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 47606:47606 -p 47607:47607 -p 47608:47608 -p 47609:47609 -p 47610:47610 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47608 --rest-port=47606 --tcp-port=47607 --discv5-udp-port=47609 --rest-address=0.0.0.0 --nat=extip:172.18.32.101 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0cc8fe17fb3bbbd2eeccb02f804ce648fae1d31ca8ea0c669fb28dadfc9b7b46 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47610 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QM81W028axzxvDbMDMYFdhuj5HKPcYt0RNc6mXKh_mT3YlU2I0o7IeW6jj8XALCrzDFleWBcWIs5stN6sOAOlrwCgmlkgnY0gmlwhKwSjC6KbXVsdGlhZGRyc5YACASsEowuBsFLAAoErBKMLgbBTN0DgnJzhQADAQAAiXNlY3AyNTZrMaECBA6PdOkcc6pQR2-eU0_0_c_1stbXfn_lwsldluAXFnODdGNwgsFLg3VkcILBTYV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.32.101 waku f68380334b61b94ebdc5a2d31094556cade0102018a2cfd48b417bbfb3cb4fab
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f68380334b61. Setting up logs at ./log/docker/node2_2024-12-10_08-34-57__ea4916b4-6119-49be-8f05-70230f336d37__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 47606
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47606/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47606/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.32.101/tcp/47607/p2p/16Uiu2HAmSrgokqPHkohpG32X9tU2rn5B8B5MxF8HDo83BP6po41P","/ip4/172.18.32.101/tcp/47608/ws/p2p/16Uiu2HAmSrgokqPHkohpG32X9tU2rn5B8B5MxF8HDo83BP6po41P"],"enrUri":"enr:-L24QB8FWXfNb-GyLuO4r1TDA_nMbCAwBtYO4HiGqPhzDMiITegRCfduBrMJAAATKjfbjCRpK4s4xGawDWUDgL4GMBMCgmlkgnY0gmlwhKwSIGWKbXVsdGlhZGRyc5YACASsEiBlBrn3AAoErBIgZQa5-N0DgnJzhQADAQAAiXNlY3AyNTZrMaED0wK__pWTzUiiD6UuLl7hGIdp8xbdpyUBj1OnTQYuL0KDdGNwgrn3g3VkcIK5-YV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.222.182
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['57680', '57681', '57682', '57683', '57684']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 57680:57680 -p 57681:57681 -p 57682:57682 -p 57683:57683 -p 57684:57684 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57682 --rest-port=57680 --tcp-port=57681 --discv5-udp-port=57683 --rest-address=0.0.0.0 --nat=extip:172.18.222.182 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cdadbdde50ce1fc32bd5acabf406ce6462adda82e6a0be8cd6d9c8affeabc8f3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57684 --metrics-logging=true --relay=false --storenode=/ip4/172.18.32.101/tcp/47607/p2p/16Uiu2HAmSrgokqPHkohpG32X9tU2rn5B8B5MxF8HDo83BP6po41P --discv5-bootstrap-node=enr:-L24QB8FWXfNb-GyLuO4r1TDA_nMbCAwBtYO4HiGqPhzDMiITegRCfduBrMJAAATKjfbjCRpK4s4xGawDWUDgL4GMBMCgmlkgnY0gmlwhKwSIGWKbXVsdGlhZGRyc5YACASsEiBlBrn3AAoErBIgZQa5-N0DgnJzhQADAQAAiXNlY3AyNTZrMaED0wK__pWTzUiiD6UuLl7hGIdp8xbdpyUBj1OnTQYuL0KDdGNwgrn3g3VkcIK5-YV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.222.182 waku 142577020c4c86fd86a21de4b23406b054f342859663fccab760d90d5f4cf782
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 142577020c4c. Setting up logs at ./log/docker/node3_2024-12-10_08-34-57__ea4916b4-6119-49be-8f05-70230f336d37__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 57680
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57680/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57680/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.222.182/tcp/57681/p2p/16Uiu2HAm5E2Jmak5saUVo7Z3YG69jCiivqVrN9kRPQkziaXYdeZT","/ip4/172.18.222.182/tcp/57682/ws/p2p/16Uiu2HAm5E2Jmak5saUVo7Z3YG69jCiivqVrN9kRPQkziaXYdeZT"],"enrUri":"enr:-L24QFeGTAhUjMNQ9BFgS6Ksp7pZBvmBrxo1XFgqN-x_qF5bHfe7Ch56QOi7VtS0xw2MwL4Rb6CbqYcUl05aNnqr_W8CgmlkgnY0gmlwhKwS3raKbXVsdGlhZGRyc5YACASsEt62BuFRAAoErBLetgbhUt0DgnJzhQADAQAAiXNlY3AyNTZrMaECkZjiMQocMt9OePas1JHTgrC7vBE6skRIOGBMit06-J6DdGNwguFRg3VkcILhU4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:418 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49482/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47606/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49482/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.32.101/tcp/47607/p2p/16Uiu2HAmSrgokqPHkohpG32X9tU2rn5B8B5MxF8HDo83BP6po41P","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47606/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.140.46/tcp/49483/p2p/16Uiu2HAkuhWVG6omHPsFJ6Qg2sndNohtuLjtBQWq27y5A7RReEs4","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:423 Node1 publish message with ephemeral = false
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49482/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:427 Check if message is stored 
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57680/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"3d1fa590d1f7c1214366","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"J+jao2ZBqQC1b6r3fQ0o+RTInBW1TTHkilzT5pnn4ZY="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0f361cf8c560
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f68380334b61
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0f361cf8c560. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 142577020c4c
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f68380334b61. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.