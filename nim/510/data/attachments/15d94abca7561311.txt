[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_payload with id: 2024-12-10_08-40-06__f1a1a7b8-6e76-4c5f-8b85-21d32e6ceaef
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-10_08-40-06__f1a1a7b8-6e76-4c5f-8b85-21d32e6ceaef__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.155.41
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['58898', '58899', '58900', '58901', '58902']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 58898:58898 -p 58899:58899 -p 58900:58900 -p 58901:58901 -p 58902:58902 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58900 --rest-port=58898 --tcp-port=58899 --discv5-udp-port=58901 --rest-address=0.0.0.0 --nat=extip:172.18.155.41 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dafca8ff11becc234df56cd7dc6e5c64ec1a895ad0b7be97a8b6bfdbf81a6348 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58902 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.155.41 waku 2c1fd7de0f053ee87125b0b2bb4a989b3694db2cefb8cd24ee61ee9167f233b6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2c1fd7de0f05. Setting up logs at ./log/docker/receiving_node1_2024-12-10_08-40-06__f1a1a7b8-6e76-4c5f-8b85-21d32e6ceaef__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 58898
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container dfa2075e8206. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58898/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58898/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.155.41/tcp/58899/p2p/16Uiu2HAmEyBkADkfzToDGKcQ3MNwGGfe4synqAuEpnVCVhJY5bq7","/ip4/172.18.155.41/tcp/58900/ws/p2p/16Uiu2HAmEyBkADkfzToDGKcQ3MNwGGfe4synqAuEpnVCVhJY5bq7"],"enrUri":"enr:-L24QG1sXs3brWcjZFIO5GFTOEHmx6XcPHrnsHMpvZtRF118EpfVhh54vEBcsVMW5y9LmI1I6VFAWT0twao0dbUJ1R0CgmlkgnY0gmlwhKwSmymKbXVsdGlhZGRyc5YACASsEpspBuYTAAoErBKbKQbmFN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDImC2RcKt-siHE6isDVQtfjUhVGn4r9Pi8z6K5IV11d6DdGNwguYTg3VkcILmFYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-10_08-40-06__f1a1a7b8-6e76-4c5f-8b85-21d32e6ceaef__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.36.128
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['59918', '59919', '59920', '59921', '59922']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 59918:59918 -p 59919:59919 -p 59920:59920 -p 59921:59921 -p 59922:59922 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59920 --rest-port=59918 --tcp-port=59919 --discv5-udp-port=59921 --rest-address=0.0.0.0 --nat=extip:172.18.36.128 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e3854e50cbc677737f6c1d3cdf41f8fffffe4d1e475eafddc5dffd79e2a293db --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59922 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.36.128 waku fccacf2cd1f8eaed9cafdab8ab1fd99feb50fe351ad61fe3496e36a17677e23d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fccacf2cd1f8. Setting up logs at ./log/docker/receiving_node2_2024-12-10_08-40-06__f1a1a7b8-6e76-4c5f-8b85-21d32e6ceaef__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 59918
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59918/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59918/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.36.128/tcp/59919/p2p/16Uiu2HAkvampkuheAM5dnrGcQ2JJ2TyvtQG8c9gwD453ntvKNASZ","/ip4/172.18.36.128/tcp/59920/ws/p2p/16Uiu2HAkvampkuheAM5dnrGcQ2JJ2TyvtQG8c9gwD453ntvKNASZ"],"enrUri":"enr:-L24QEvT3wiT9jnyxwj4uSPaPqiYDyEiNA-wPvnhvRmOkMchAM03Wo_cTa0G3LuQd_rwqtBfGMv4odtiTTbw7QHW_qkCgmlkgnY0gmlwhKwSJICKbXVsdGlhZGRyc5YACASsEiSABuoPAAoErBIkgAbqEN0DgnJzhQADAQAAiXNlY3AyNTZrMaECETCFtC2pdRlX2ppVYD4I3Qotn9rOVX4VFuC_PbogE9aDdGNwguoPg3VkcILqEYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59918/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.155.41/tcp/58899/p2p/16Uiu2HAmEyBkADkfzToDGKcQ3MNwGGfe4synqAuEpnVCVhJY5bq7"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-10_08-40-06__f1a1a7b8-6e76-4c5f-8b85-21d32e6ceaef__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.39.247
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['31993', '31994', '31995', '31996', '31997']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 31993:31993 -p 31994:31994 -p 31995:31995 -p 31996:31996 -p 31997:31997 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31995 --rest-port=31993 --tcp-port=31994 --discv5-udp-port=31996 --rest-address=0.0.0.0 --nat=extip:172.18.39.247 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=73e70501f4f1f9f46e1831e5b17e2b32c3a437c9ecc5c3b7a8c922441cf0baf0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31997 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QG1sXs3brWcjZFIO5GFTOEHmx6XcPHrnsHMpvZtRF118EpfVhh54vEBcsVMW5y9LmI1I6VFAWT0twao0dbUJ1R0CgmlkgnY0gmlwhKwSmymKbXVsdGlhZGRyc5YACASsEpspBuYTAAoErBKbKQbmFN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDImC2RcKt-siHE6isDVQtfjUhVGn4r9Pi8z6K5IV11d6DdGNwguYTg3VkcILmFYV3YWt1Mgk --lightpushnode=/ip4/172.18.155.41/tcp/58899/p2p/16Uiu2HAmEyBkADkfzToDGKcQ3MNwGGfe4synqAuEpnVCVhJY5bq7 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.39.247 waku 26f0af240a16d87b5e1839b7dcfbe7db31bd2a02c26620ed4e2ec6c8dcec7259
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 26f0af240a16. Setting up logs at ./log/docker/lightpush_node1_2024-12-10_08-40-06__f1a1a7b8-6e76-4c5f-8b85-21d32e6ceaef__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 31993
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31993/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31993/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.39.247/tcp/31994/p2p/16Uiu2HAmEzXtMQufXAS5QnmhkYWHtgAQfX2wah8ShnKTwJm3aQW2","/ip4/172.18.39.247/tcp/31995/ws/p2p/16Uiu2HAmEzXtMQufXAS5QnmhkYWHtgAQfX2wah8ShnKTwJm3aQW2"],"enrUri":"enr:-L24QFrW-9-NCq2W8X3gHhnM245BJtd4YyBhc-32YF8D5w8JdVCq_Bt9ACF-w_A1P8YLAGVdllnbBWNBKIgN_wVkEjoCgmlkgnY0gmlwhKwSJ_eKbXVsdGlhZGRyc5YACASsEif3Bnz6AAoErBIn9wZ8-90DgnJzhQADAQAAiXNlY3AyNTZrMaEDIrkRDPkL9gIfHftuTISfcE-QZ9DHC0eopoI4R4U5-NeDdGNwgnz6g3VkcIJ8_IV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31993/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.155.41/tcp/58899/p2p/16Uiu2HAmEyBkADkfzToDGKcQ3MNwGGfe4synqAuEpnVCVhJY5bq7"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31993/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.36.128/tcp/59919/p2p/16Uiu2HAkvampkuheAM5dnrGcQ2JJ2TyvtQG8c9gwD453ntvKNASZ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58898/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59918/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31993/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1733820010817887232}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:31993/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2c1fd7de0f05
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id fccacf2cd1f8
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2c1fd7de0f05. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 26f0af240a16
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fccacf2cd1f8. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.