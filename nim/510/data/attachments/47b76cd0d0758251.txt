[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_pubsub_topic_also_in_docker_flags[/waku/2/rs/2/0] with id: 2024-12-10_08-48-42__6d3745ce-89d8-4cea-9d8b-ae120dc74f99
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-10_08-48-42__6d3745ce-89d8-4cea-9d8b-ae120dc74f99__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.107.215
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['42725', '42726', '42727', '42728', '42729']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 42725:42725 -p 42726:42726 -p 42727:42727 -p 42728:42728 -p 42729:42729 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42727 --rest-port=42725 --tcp-port=42726 --discv5-udp-port=42728 --rest-address=0.0.0.0 --nat=extip:172.18.107.215 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=8bbc98b47eb337fe0f245cc9f49a494a4ccb2ba048993f2ff1c2debba7500eba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42729 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0 --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.107.215 waku 990367fe3d2ff7597cc318fd82c91ac22cc14bc40f9fa5147b74c1b89c3768a6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 990367fe3d2f. Setting up logs at ./log/docker/node1_2024-12-10_08-48-42__6d3745ce-89d8-4cea-9d8b-ae120dc74f99__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 42725
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a8aa53d59e98. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42725/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42725/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.107.215/tcp/42726/p2p/16Uiu2HAmPNmForYdhzQqJk4Y3h4uWBjuYbtDxyxbP97UnvCWEdUE","/ip4/172.18.107.215/tcp/42727/ws/p2p/16Uiu2HAmPNmForYdhzQqJk4Y3h4uWBjuYbtDxyxbP97UnvCWEdUE"],"enrUri":"enr:-L24QJPIwRCr_X-LfaUN02Ro0zV1Mt4SC0SHQZJa-Fjd2-blESsa9skQF0OH1ikP8gXjtsjyCPIz4K3o3n7YUYuWuxUCgmlkgnY0gmlwhKwSa9eKbXVsdGlhZGRyc5YACASsEmvXBqbmAAoErBJr1wam590DgnJzhQACAQAAiXNlY3AyNTZrMaEDn0h1Dc27tvW7fRKkLRpETx4X3wYVsyCmxHC9KRDWxrODdGNwgqbmg3VkcIKm6IV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-10_08-48-42__6d3745ce-89d8-4cea-9d8b-ae120dc74f99__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.205.13
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['60623', '60624', '60625', '60626', '60627']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 60623:60623 -p 60624:60624 -p 60625:60625 -p 60626:60626 -p 60627:60627 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60625 --rest-port=60623 --tcp-port=60624 --discv5-udp-port=60626 --rest-address=0.0.0.0 --nat=extip:172.18.205.13 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=b11cd2417eea2cecafdeab73eef0b542ed9ae6ea62fafbe1ed8fac3eea4acfdd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60627 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QJPIwRCr_X-LfaUN02Ro0zV1Mt4SC0SHQZJa-Fjd2-blESsa9skQF0OH1ikP8gXjtsjyCPIz4K3o3n7YUYuWuxUCgmlkgnY0gmlwhKwSa9eKbXVsdGlhZGRyc5YACASsEmvXBqbmAAoErBJr1wam590DgnJzhQACAQAAiXNlY3AyNTZrMaEDn0h1Dc27tvW7fRKkLRpETx4X3wYVsyCmxHC9KRDWxrODdGNwgqbmg3VkcIKm6IV3YWt1MgU --pubsub-topic=/waku/2/rs/2/0 --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.205.13 waku f57112019e4e9306a9c75a6386a8339c044d7852da6ec6913e690c849c566742
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f57112019e4e. Setting up logs at ./log/docker/node2_2024-12-10_08-48-42__6d3745ce-89d8-4cea-9d8b-ae120dc74f99__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 60623
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60623/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60623/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.205.13/tcp/60624/p2p/16Uiu2HAm147cuKAYvk4N9yqpY4pCDaHNZ8Dc3rfdi72YCwX2H5cU","/ip4/172.18.205.13/tcp/60625/ws/p2p/16Uiu2HAm147cuKAYvk4N9yqpY4pCDaHNZ8Dc3rfdi72YCwX2H5cU"],"enrUri":"enr:-L24QHuJ1laqyY-9bwkRmmQ-dQVO96XNN0LJYP-DRbsabvTVLWyWtv2MlADxo2xDRXlHNf86PkxeLwQZf0iHYh78lBYCgmlkgnY0gmlwhKwSzQ2KbXVsdGlhZGRyc5YACASsEs0NBuzQAAoErBLNDQbs0d0DgnJzhQACAQAAiXNlY3AyNTZrMaECU6BVtMD8HMMCGh62b_PChid7dVq8-3aa5OUyp1GjsumDdGNwguzQg3VkcILs0oV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60623/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.107.215/tcp/42726/p2p/16Uiu2HAmPNmForYdhzQqJk4Y3h4uWBjuYbtDxyxbP97UnvCWEdUE"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42725/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60623/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42725/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42725/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1733820525108130560,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60623/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1733820525108130560,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 990367fe3d2f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f57112019e4e
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 990367fe3d2f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.