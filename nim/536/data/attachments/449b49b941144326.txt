[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_relaying_node with id: 2024-12-23_04-02-39__2eda376c-d986-488d-a70f-e15dff973300
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-23_04-02-39__2eda376c-d986-488d-a70f-e15dff973300__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-23_04-02-39__2eda376c-d986-488d-a70f-e15dff973300__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-23_04-02-39__2eda376c-d986-488d-a70f-e15dff973300__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.128.59
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['43121', '43122', '43123', '43124', '43125']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 43121:43121 -p 43122:43122 -p 43123:43123 -p 43124:43124 -p 43125:43125 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43123 --rest-port=43121 --tcp-port=43122 --discv5-udp-port=43124 --rest-address=0.0.0.0 --nat=extip:172.18.128.59 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b8c8cf2a0d9984f186eeb217862d4bbfefad7e55fa6e1bdf0df00574224c539c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43125 --metrics-logging=true --filter=true --relay=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0b546efeb263. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.128.59 waku 35a10d193e37e49ae4b5d892e937d209f4b6d4d5b039d7644ccd806e6473bf37
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 35a10d193e37. Setting up logs at ./log/docker/node1_2024-12-23_04-02-39__2eda376c-d986-488d-a70f-e15dff973300__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 43121
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43121/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43121/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.128.59/tcp/43122/p2p/16Uiu2HAmU9wG3BfHhWrdcEXJWiZKcQocYw1gp6ETM549egpnmrmE","/ip4/172.18.128.59/tcp/43123/ws/p2p/16Uiu2HAmU9wG3BfHhWrdcEXJWiZKcQocYw1gp6ETM549egpnmrmE"],"enrUri":"enr:-L24QJ8hzgF0ic4qS3DW6F1QzMoAb3OI3dOCVbff6j_fxr2dK_WltQIG8gj1ay_7j4Y-wXmeLmVyOU_qCSLgvDS3nAgCgmlkgnY0gmlwhKwSgDuKbXVsdGlhZGRyc5YACASsEoA7BqhyAAoErBKAOwaoc90DgnJzhQADAQAAiXNlY3AyNTZrMaED5kmnIp8HtNHgd-J2HQOlwfkTiUVeb2e-uVsLV8SH7zmDdGNwgqhyg3VkcIKodIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.168.80
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['34882', '34883', '34884', '34885', '34886']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 34882:34882 -p 34883:34883 -p 34884:34884 -p 34885:34885 -p 34886:34886 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34884 --rest-port=34882 --tcp-port=34883 --discv5-udp-port=34885 --rest-address=0.0.0.0 --nat=extip:172.18.168.80 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=607cda75b3be6b4dd773596bea1fa73a4fd35201efaa6d54c4bbeb1eb501ccde --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34886 --metrics-logging=true --filter=true --relay=true --discv5-bootstrap-node=enr:-L24QJ8hzgF0ic4qS3DW6F1QzMoAb3OI3dOCVbff6j_fxr2dK_WltQIG8gj1ay_7j4Y-wXmeLmVyOU_qCSLgvDS3nAgCgmlkgnY0gmlwhKwSgDuKbXVsdGlhZGRyc5YACASsEoA7BqhyAAoErBKAOwaoc90DgnJzhQADAQAAiXNlY3AyNTZrMaED5kmnIp8HtNHgd-J2HQOlwfkTiUVeb2e-uVsLV8SH7zmDdGNwgqhyg3VkcIKodIV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.168.80 waku 1fdee8b50e0486eb695ef98ec9525e205d9b2980e6ba9d235485bad28f2adfe2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1fdee8b50e04. Setting up logs at ./log/docker/node2_2024-12-23_04-02-39__2eda376c-d986-488d-a70f-e15dff973300__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 34882
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34882/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34882/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.168.80/tcp/34883/p2p/16Uiu2HAmF1uUfp97adLb8AijQryYgjmpcazJ8o1qnNJw6CzhpZRP","/ip4/172.18.168.80/tcp/34884/ws/p2p/16Uiu2HAmF1uUfp97adLb8AijQryYgjmpcazJ8o1qnNJw6CzhpZRP"],"enrUri":"enr:-L24QLoF1sZmcSlfHz-HEtIzX9KWtZSOo36KVW9IKJSbrjC3DEHxu8CSpd_QTwqFLzyFbHy6Hnav2XLHPMC3Bb56VqwCgmlkgnY0gmlwhKwSqFCKbXVsdGlhZGRyc5YACASsEqhQBohDAAoErBKoUAaIRN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDIxMPqs2NO71-31UK-FfqLEbQpphQ8yC5WD5H9MI2F76DdGNwgohDg3VkcIKIRYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.227.138
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['43995', '43996', '43997', '43998', '43999']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 43995:43995 -p 43996:43996 -p 43997:43997 -p 43998:43998 -p 43999:43999 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43997 --rest-port=43995 --tcp-port=43996 --discv5-udp-port=43998 --rest-address=0.0.0.0 --nat=extip:172.18.227.138 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3a818b06cada9e0cddee4ab5a90fed27512ff17a1ceb8d2d3da23bb075bf9cf2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43999 --metrics-logging=true --relay=false --filternode=/ip4/172.18.168.80/tcp/34883/p2p/16Uiu2HAmF1uUfp97adLb8AijQryYgjmpcazJ8o1qnNJw6CzhpZRP --discv5-bootstrap-node=enr:-L24QLoF1sZmcSlfHz-HEtIzX9KWtZSOo36KVW9IKJSbrjC3DEHxu8CSpd_QTwqFLzyFbHy6Hnav2XLHPMC3Bb56VqwCgmlkgnY0gmlwhKwSqFCKbXVsdGlhZGRyc5YACASsEqhQBohDAAoErBKoUAaIRN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDIxMPqs2NO71-31UK-FfqLEbQpphQ8yC5WD5H9MI2F76DdGNwgohDg3VkcIKIRYV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.227.138 waku 411861b1edda4404b4ef8bdfd37341c12f2009338afb8fc6bc008c2af3c10127
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 411861b1edda. Setting up logs at ./log/docker/node3_2024-12-23_04-02-39__2eda376c-d986-488d-a70f-e15dff973300__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 43995
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43995/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43995/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.227.138/tcp/43996/p2p/16Uiu2HAmK2KtVmZieTGWZKmcg1TK6i3bzvFwBC1WR58RHoHKD4vR","/ip4/172.18.227.138/tcp/43997/ws/p2p/16Uiu2HAmK2KtVmZieTGWZKmcg1TK6i3bzvFwBC1WR58RHoHKD4vR"],"enrUri":"enr:-L24QLEA1x4tgb5neAjj2NcZRKFGJA1GpSqqSt0IcZQ0PeNdedQVLHJcTw-6d94JgGNeKFXae1ItaHeAxr2tc6WfdLMCgmlkgnY0gmlwhKwS44qKbXVsdGlhZGRyc5YACASsEuOKBqvcAAoErBLjigar3d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDXp1pCPjvi6h7Xwjlx3kjl9oWxf2CYvl-TtWZ5662SAaDdGNwgqvcg3VkcIKr3oV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43121/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34882/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43995/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43121/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.168.80/tcp/34883/p2p/16Uiu2HAmF1uUfp97adLb8AijQryYgjmpcazJ8o1qnNJw6CzhpZRP","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34882/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.128.59/tcp/43122/p2p/16Uiu2HAmU9wG3BfHhWrdcEXJWiZKcQocYw1gp6ETM549egpnmrmE","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.227.138/tcp/43996/p2p/16Uiu2HAmK2KtVmZieTGWZKmcg1TK6i3bzvFwBC1WR58RHoHKD4vR","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43995/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.168.80/tcp/34883/p2p/16Uiu2HAmF1uUfp97adLb8AijQryYgjmpcazJ8o1qnNJw6CzhpZRP","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43121/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43995/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1734926594362546176,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 35a10d193e37
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1fdee8b50e04
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 35a10d193e37. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 411861b1edda
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1fdee8b50e04. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.