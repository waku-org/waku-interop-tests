[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_relay_receiving_node_not_connected_directly_to_relaying_node with id: 2024-12-10_04-02-54__273f6639-5be0-43c3-a7fe-de9ccf7904c7
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-10_04-02-54__273f6639-5be0-43c3-a7fe-de9ccf7904c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-10_04-02-54__273f6639-5be0-43c3-a7fe-de9ccf7904c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-10_04-02-54__273f6639-5be0-43c3-a7fe-de9ccf7904c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.60.187
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['33614', '33615', '33616', '33617', '33618']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 33614:33614 -p 33615:33615 -p 33616:33616 -p 33617:33617 -p 33618:33618 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33616 --rest-port=33614 --tcp-port=33615 --discv5-udp-port=33617 --rest-address=0.0.0.0 --nat=extip:172.18.60.187 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bc364baf0db05caa903bcf11edfab9917dbd08e02d99ca2ac9fbacfa0a0bba1c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33618 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.60.187 waku 994b578939dfd17dc968dd2778038ed7dcae1d1fe6000ba8a292b1c4ccd7f114
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 994b578939df. Setting up logs at ./log/docker/node1_2024-12-10_04-02-54__273f6639-5be0-43c3-a7fe-de9ccf7904c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 33614
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container bb61f200edce. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33614/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33614/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.60.187/tcp/33615/p2p/16Uiu2HAmRYybvAqnAQvjxHhirrnDvmxUruYwHsNwcNAFXCwZmbSC","/ip4/172.18.60.187/tcp/33616/ws/p2p/16Uiu2HAmRYybvAqnAQvjxHhirrnDvmxUruYwHsNwcNAFXCwZmbSC"],"enrUri":"enr:-L24QCZZFnjCy7Q5jACObdKJ7JNnrca4XvIk0LhQpmco4oqqAIifha4dgmZxq0iBNgnr7AIGoPkzmIm6DBlvFEQmeDICgmlkgnY0gmlwhKwSPLuKbXVsdGlhZGRyc5YACASsEjy7BoNPAAoErBI8uwaDUN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDv52ZgprZdhhn2cN0Mcgrj5bdwSkycAfO2XHT2-vTWN2DdGNwgoNPg3VkcIKDUYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.7.8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['28064', '28065', '28066', '28067', '28068']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 28064:28064 -p 28065:28065 -p 28066:28066 -p 28067:28067 -p 28068:28068 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28066 --rest-port=28064 --tcp-port=28065 --discv5-udp-port=28067 --rest-address=0.0.0.0 --nat=extip:172.18.7.8 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4a98d168ba6c3a76bdaaff8d2cedde19de2edbacdfea85ee29cabb2fac5f4729 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28068 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QCZZFnjCy7Q5jACObdKJ7JNnrca4XvIk0LhQpmco4oqqAIifha4dgmZxq0iBNgnr7AIGoPkzmIm6DBlvFEQmeDICgmlkgnY0gmlwhKwSPLuKbXVsdGlhZGRyc5YACASsEjy7BoNPAAoErBI8uwaDUN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDv52ZgprZdhhn2cN0Mcgrj5bdwSkycAfO2XHT2-vTWN2DdGNwgoNPg3VkcIKDUYV3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.7.8 waku e37fa4a0574666ff8a11694744b3dfcec65874bbf518d6bf95e58ce9b041ac29
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e37fa4a05746. Setting up logs at ./log/docker/node2_2024-12-10_04-02-54__273f6639-5be0-43c3-a7fe-de9ccf7904c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 28064
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28064/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28064/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.7.8/tcp/28065/p2p/16Uiu2HAmLo3hppxoXqmmXtzwdgG5mq6gm4TBweRtzp5navhdt9Mo","/ip4/172.18.7.8/tcp/28066/ws/p2p/16Uiu2HAmLo3hppxoXqmmXtzwdgG5mq6gm4TBweRtzp5navhdt9Mo"],"enrUri":"enr:-L24QM3FYyEkrZumgAqKsgrd6esxscOQyi1yWG67kW-3u2WZHOLcaCe9UFAmuFQHnAy08ZVxcjLL4a-oj99JCG_M-lUCgmlkgnY0gmlwhKwSBwiKbXVsdGlhZGRyc5YACASsEgcIBm2hAAoErBIHCAZtot0DgnJzhQADAQAAiXNlY3AyNTZrMaEDeO3vMGgKh1XG6BQhg5TLOrm7Kkkyc_Gj0IkSReAvic6DdGNwgm2hg3VkcIJto4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.165.177
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['9866', '9867', '9868', '9869', '9870']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 9866:9866 -p 9867:9867 -p 9868:9868 -p 9869:9869 -p 9870:9870 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9868 --rest-port=9866 --tcp-port=9867 --discv5-udp-port=9869 --rest-address=0.0.0.0 --nat=extip:172.18.165.177 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1dcbc4fbb9f8665388c2a26e5de1b6e7ee134bbc6d96a90d58fa6e8cbda00cab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9870 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QM3FYyEkrZumgAqKsgrd6esxscOQyi1yWG67kW-3u2WZHOLcaCe9UFAmuFQHnAy08ZVxcjLL4a-oj99JCG_M-lUCgmlkgnY0gmlwhKwSBwiKbXVsdGlhZGRyc5YACASsEgcIBm2hAAoErBIHCAZtot0DgnJzhQADAQAAiXNlY3AyNTZrMaEDeO3vMGgKh1XG6BQhg5TLOrm7Kkkyc_Gj0IkSReAvic6DdGNwgm2hg3VkcIJto4V3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.165.177 waku 036db44209cb3000f627e18db53ecf55db59c1444084a04992e8cf5bfd240465
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 036db44209cb. Setting up logs at ./log/docker/node3_2024-12-10_04-02-54__273f6639-5be0-43c3-a7fe-de9ccf7904c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 9866
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9866/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9866/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.165.177/tcp/9867/p2p/16Uiu2HAmHtrzhuwwctDduRdioaPw4spWYBpfhvR9x4GtNC1Mt1BW","/ip4/172.18.165.177/tcp/9868/ws/p2p/16Uiu2HAmHtrzhuwwctDduRdioaPw4spWYBpfhvR9x4GtNC1Mt1BW"],"enrUri":"enr:-L24QOWIyXBSOVker1hvi92HJi1aDVbXEwsNI8_0bmXvjCbociRydcOULKC6TBMSeeE-DVgwwCR17Xw81Quv-UI1ptACgmlkgnY0gmlwhKwSpbGKbXVsdGlhZGRyc5YACASsEqWxBiaLAAoErBKlsQYmjN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDTdg_8BginFzL8R5Bi4y_gyK6opI7DuHinXSQd19be9mDdGNwgiaLg3VkcIImjYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33614/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28064/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9866/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33614/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.7.8/tcp/28065/p2p/16Uiu2HAmLo3hppxoXqmmXtzwdgG5mq6gm4TBweRtzp5navhdt9Mo","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28064/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.60.187/tcp/33615/p2p/16Uiu2HAmRYybvAqnAQvjxHhirrnDvmxUruYwHsNwcNAFXCwZmbSC","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.165.177/tcp/9867/p2p/16Uiu2HAmHtrzhuwwctDduRdioaPw4spWYBpfhvR9x4GtNC1Mt1BW","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9866/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.7.8/tcp/28065/p2p/16Uiu2HAmLo3hppxoXqmmXtzwdgG5mq6gm4TBweRtzp5navhdt9Mo","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33614/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9866/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1733803408417278976,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 994b578939df
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e37fa4a05746
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 994b578939df. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 036db44209cb
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e37fa4a05746. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.