[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_pubsub_topics with id: 2024-09-03_04-20-51__a417cc97-c602-47c7-9f98-ea67c921dbfa
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-03_04-20-51__a417cc97-c602-47c7-9f98-ea67c921dbfa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.220.99
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['32838', '32839', '32840', '32841', '32842']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 32838:32838 -p 32839:32839 -p 32840:32840 -p 32841:32841 -p 32842:32842 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32840 --rest-port=32838 --tcp-port=32839 --discv5-udp-port=32841 --rest-address=0.0.0.0 --nat=extip:172.18.220.99 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b6d8fdd5cd3bedff5e6b1df0bb5fea2e65b4de8149becb1ceeae220ef08daae1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32842 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.220.99 waku 26c41a63232cec1452bb95dc894cb45943686e04b965afe3a12f5936e4fb531c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 26c41a63232c. Setting up logs at ./log/docker/receiving_node1_2024-09-03_04-20-51__a417cc97-c602-47c7-9f98-ea67c921dbfa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 32838
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32838/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32838/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.220.99/tcp/32839/p2p/16Uiu2HAmQGemLZKwpGBdJ3t1VdVk4NciGHNDUB4rhGBpoXsLwoWT","/ip4/172.18.220.99/tcp/32840/ws/p2p/16Uiu2HAmQGemLZKwpGBdJ3t1VdVk4NciGHNDUB4rhGBpoXsLwoWT"],"enrUri":"enr:-LO4QIkYKfwQCFhI6yAgKVCdNXnrV5iFv9LacOLwnmvdvBccdy-bJRGEe0fptH_KowiFKBVWhapgCZnUSfaM09PwEzcBgmlkgnY0gmlwhKwS3GOKbXVsdGlhZGRyc4wACgSsEtxjBoBI3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOsk1Hvd96hBCDFszpUgJLBBdQXI7iycE9m_nD9SXu2hIN0Y3CCgEeDdWRwgoBJhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-03_04-20-51__a417cc97-c602-47c7-9f98-ea67c921dbfa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.192.61
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['4039', '4040', '4041', '4042', '4043']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 4039:4039 -p 4040:4040 -p 4041:4041 -p 4042:4042 -p 4043:4043 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4041 --rest-port=4039 --tcp-port=4040 --discv5-udp-port=4042 --rest-address=0.0.0.0 --nat=extip:172.18.192.61 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=46bc3656bafe2debadaffeaafa9ecd268d53b4fa927206a65fbbfe24de356d7d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4043 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.192.61 waku 36632e8ed288eb5c02b92f6a3fa421ad9890615c1c50ce22909d9ba72688142f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 36632e8ed288. Setting up logs at ./log/docker/receiving_node2_2024-09-03_04-20-51__a417cc97-c602-47c7-9f98-ea67c921dbfa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 4039
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4039/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4039/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.192.61/tcp/4040/p2p/16Uiu2HAm4p5rfDwxNdvXRw2XzCrCYABYFffwWW7VqN7HUCqxdz3J","/ip4/172.18.192.61/tcp/4041/ws/p2p/16Uiu2HAm4p5rfDwxNdvXRw2XzCrCYABYFffwWW7VqN7HUCqxdz3J"],"enrUri":"enr:-LO4QEnhcRtR25G0-X_MfHGrOCOoWXGIBf7TbMpMXII4IP2dFT-f1PfkZdHcQsir6mpROGEt7rTiK_Y07SyGCHJ5Vl8BgmlkgnY0gmlwhKwSwD2KbXVsdGlhZGRyc4wACgSsEsA9Bg_J3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKLdvU8aR_uSWNvQlNoJo9RlZAOqSBRB1mX0U8NZd8X2YN0Y3CCD8iDdWRwgg_KhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4039/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.220.99/tcp/32839/p2p/16Uiu2HAmQGemLZKwpGBdJ3t1VdVk4NciGHNDUB4rhGBpoXsLwoWT"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-03_04-20-51__a417cc97-c602-47c7-9f98-ea67c921dbfa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.40.12
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['1666', '1667', '1668', '1669', '1670']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 1666:1666 -p 1667:1667 -p 1668:1668 -p 1669:1669 -p 1670:1670 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1668 --rest-port=1666 --tcp-port=1667 --discv5-udp-port=1669 --rest-address=0.0.0.0 --nat=extip:172.18.40.12 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0b79de382dcccc3caaeeb16a6bce8ce96f7b8ecbeebdd40ab0fdb23b853da7b1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1670 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QIkYKfwQCFhI6yAgKVCdNXnrV5iFv9LacOLwnmvdvBccdy-bJRGEe0fptH_KowiFKBVWhapgCZnUSfaM09PwEzcBgmlkgnY0gmlwhKwS3GOKbXVsdGlhZGRyc4wACgSsEtxjBoBI3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOsk1Hvd96hBCDFszpUgJLBBdQXI7iycE9m_nD9SXu2hIN0Y3CCgEeDdWRwgoBJhXdha3UyCQ --lightpushnode=/ip4/172.18.220.99/tcp/32839/p2p/16Uiu2HAmQGemLZKwpGBdJ3t1VdVk4NciGHNDUB4rhGBpoXsLwoWT --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.40.12 waku f28e95472c8ea60c2230758ecdb32a3ec0b062b2becd8ecd7a2f3ea517faeb8e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f28e95472c8e. Setting up logs at ./log/docker/lightpush_node1_2024-09-03_04-20-51__a417cc97-c602-47c7-9f98-ea67c921dbfa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 1666
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1666/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1666/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.40.12/tcp/1667/p2p/16Uiu2HAmMCrTU8vWp3Cd4ncnaxZpjSLzyJJHMmPu7u9EPnyuCDEh","/ip4/172.18.40.12/tcp/1668/ws/p2p/16Uiu2HAmMCrTU8vWp3Cd4ncnaxZpjSLzyJJHMmPu7u9EPnyuCDEh"],"enrUri":"enr:-LO4QFCXFk0cK79N02MvPI7qVrYSm9INBiWmYNvqCtOVJ5OpWDYzI17_6pvLklvuBQ-Ug2g9xPnBQHo77XSfssrveecBgmlkgnY0gmlwhKwSKAyKbXVsdGlhZGRyc4wACgSsEigMBgaE3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN_Byf3-2VEoGMpGiaJbzWScqR9k519kJquMKR5T7fgAoN0Y3CCBoODdWRwggaFhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1666/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.220.99/tcp/32839/p2p/16Uiu2HAmQGemLZKwpGBdJ3t1VdVk4NciGHNDUB4rhGBpoXsLwoWT"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1666/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.192.61/tcp/4040/p2p/16Uiu2HAm4p5rfDwxNdvXRw2XzCrCYABYFffwWW7VqN7HUCqxdz3J"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32838/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4039/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1666/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725337256681160704}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:1666/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0xe730bbd4d5afe1da081f5de06e4a750873272b2cf5a12e0d1b85b7691135d1cc'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 26c41a63232c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 36632e8ed288
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f28e95472c8e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.