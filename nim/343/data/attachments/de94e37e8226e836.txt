[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_with_no_content_topic with id: 2024-09-03_04-18-27__fffd1dfa-2249-4613-ba19-aa12fb60c5d9
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-03_04-18-27__fffd1dfa-2249-4613-ba19-aa12fb60c5d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.20.72
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['51006', '51007', '51008', '51009', '51010']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 51006:51006 -p 51007:51007 -p 51008:51008 -p 51009:51009 -p 51010:51010 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51008 --rest-port=51006 --tcp-port=51007 --discv5-udp-port=51009 --rest-address=0.0.0.0 --nat=extip:172.18.20.72 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=253bd370434dc1b2ce0fbca5bdb0e2ffbe5cbec927b7c75fcb1a0146fabbaade --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51010 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.34.62
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['33043', '33044', '33045', '33046', '33047']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 33043:33043 -p 33044:33044 -p 33045:33045 -p 33046:33046 -p 33047:33047 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33045 --rest-port=33043 --tcp-port=33044 --discv5-udp-port=33046 --rest-address=0.0.0.0 --nat=extip:172.18.34.62 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eb299f6d02c6376c60255baed53a32dedfbcead088abfcef4ce8b361fc8a843b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33047 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.34.62 waku d8a898c9ab4177ec4f4e78153037071eea8059701f3ed39508388f9636e43b86
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d8a898c9ab41. Setting up logs at ./log/docker/node1_2024-09-03_04-18-27__fffd1dfa-2249-4613-ba19-aa12fb60c5d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 33043
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33043/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33043/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.34.62/tcp/33044/p2p/16Uiu2HAmPhjLT3kpbNhqpNdsjwJmHBP5tZcP95tuyk1uSwd3EXsg","/ip4/172.18.34.62/tcp/33045/ws/p2p/16Uiu2HAmPhjLT3kpbNhqpNdsjwJmHBP5tZcP95tuyk1uSwd3EXsg"],"enrUri":"enr:-LO4QCmuyqthTEQ8po7bFHs6se3KJw2sYqffCPzxE6aLvMFTQRlV_It5BxBOiPiNyJ1aQENE0cU-mI91qnQvG8Bd4jcBgmlkgnY0gmlwhKwSIj6KbXVsdGlhZGRyc4wACgSsEiI-BoEV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOkJFJaJUH829LPgatOHfVoqfQtMtoA1K8myKhebKcGW4N0Y3CCgRSDdWRwgoEWhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-03_04-18-27__fffd1dfa-2249-4613-ba19-aa12fb60c5d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.152.152
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['46849', '46850', '46851', '46852', '46853']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 46849:46849 -p 46850:46850 -p 46851:46851 -p 46852:46852 -p 46853:46853 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46851 --rest-port=46849 --tcp-port=46850 --discv5-udp-port=46852 --rest-address=0.0.0.0 --nat=extip:172.18.152.152 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dcbec6b0f5df61f0becba6ad54ceba5febf6622cb8bceef6e1aa3eb6fdafa8ea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46853 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QCmuyqthTEQ8po7bFHs6se3KJw2sYqffCPzxE6aLvMFTQRlV_It5BxBOiPiNyJ1aQENE0cU-mI91qnQvG8Bd4jcBgmlkgnY0gmlwhKwSIj6KbXVsdGlhZGRyc4wACgSsEiI-BoEV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOkJFJaJUH829LPgatOHfVoqfQtMtoA1K8myKhebKcGW4N0Y3CCgRSDdWRwgoEWhXdha3UyBQ --filternode=/ip4/172.18.34.62/tcp/33044/p2p/16Uiu2HAmPhjLT3kpbNhqpNdsjwJmHBP5tZcP95tuyk1uSwd3EXsg
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.152.152 waku 334daf06fa0c2dfed51a670a3a4a7cd2f34d603a9eb8a1fd853c7ae9878c8265
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 334daf06fa0c. Setting up logs at ./log/docker/node2_2024-09-03_04-18-27__fffd1dfa-2249-4613-ba19-aa12fb60c5d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 46849
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46849/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46849/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.152.152/tcp/46850/p2p/16Uiu2HAm8DWhvkLkspJ4zq15286yL7cVhWM7kv6BtEBPVAWEwbX5","/ip4/172.18.152.152/tcp/46851/ws/p2p/16Uiu2HAm8DWhvkLkspJ4zq15286yL7cVhWM7kv6BtEBPVAWEwbX5"],"enrUri":"enr:-LO4QHavrXPNt4jVHm5iPge6WFJOeQJblQTpw1CR2fQPJkhiXiPBWLpIwd9UB3ml1KCLGWVrpTxoQnp2N-xKlXr6pmMBgmlkgnY0gmlwhKwSmJiKbXVsdGlhZGRyc4wACgSsEpiYBrcD3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK-CnmFmhB_O_SYGRbpLT7lT2SlHcjDARp9b66AwLTLOIN0Y3CCtwKDdWRwgrcEhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46849/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.34.62/tcp/33044/p2p/16Uiu2HAmPhjLT3kpbNhqpNdsjwJmHBP5tZcP95tuyk1uSwd3EXsg"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33043/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46849/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1aad34c3-079b-4706-a150-edb5193cb48e", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1aad34c3-079b-4706-a150-edb5193cb48e","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:46849/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:46849/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d8a898c9ab41
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 334daf06fa0c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.