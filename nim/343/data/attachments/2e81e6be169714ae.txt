[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_ping_on_unsubscribed_peer with id: 2024-09-03_04-16-50__c81da229-02f9-4718-8f26-fe91e067dfd4
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-03_04-16-50__c81da229-02f9-4718-8f26-fe91e067dfd4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.161.58
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['49198', '49199', '49200', '49201', '49202']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 49198:49198 -p 49199:49199 -p 49200:49200 -p 49201:49201 -p 49202:49202 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49200 --rest-port=49198 --tcp-port=49199 --discv5-udp-port=49201 --rest-address=0.0.0.0 --nat=extip:172.18.161.58 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3743dd81f6fb5a5fb75fba0a00df3363d6e32f475bd1ef1fd75b8d8939e5ce45 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49202 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.161.58 waku ba7d47bed56f519573ae86b5f0fdb6a7c1a71eac793278fe8906f9fcd372d90d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ba7d47bed56f. Setting up logs at ./log/docker/node1_2024-09-03_04-16-50__c81da229-02f9-4718-8f26-fe91e067dfd4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 49198
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49198/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49198/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.161.58/tcp/49199/p2p/16Uiu2HAmA7xCdy1gBLf8f9afivSCuQgdPL595dSWSxiM8FL7W88H","/ip4/172.18.161.58/tcp/49200/ws/p2p/16Uiu2HAmA7xCdy1gBLf8f9afivSCuQgdPL595dSWSxiM8FL7W88H"],"enrUri":"enr:-LO4QKKjNgKXRf_ACTkYaUsXc-GJDrbdKo9u7DSlBLo3mnXIVqK7puLmXcPL-XIDl3YHZGCUrRe0x_HnzqXZ9RuV4ncBgmlkgnY0gmlwhKwSoTqKbXVsdGlhZGRyc4wACgSsEqE6BsAw3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLaVTDlAvKawp13T_KCTqKDcE_3oxPsJjInwVQ4y_YwaoN0Y3CCwC-DdWRwgsAxhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-03_04-16-50__c81da229-02f9-4718-8f26-fe91e067dfd4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.158.1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['10311', '10312', '10313', '10314', '10315']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 10311:10311 -p 10312:10312 -p 10313:10313 -p 10314:10314 -p 10315:10315 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10313 --rest-port=10311 --tcp-port=10312 --discv5-udp-port=10314 --rest-address=0.0.0.0 --nat=extip:172.18.158.1 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fc6b3c8486fb599aadf17e019ce7fd1507dcdf2538f752ef4283e5dc0277c1aa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10315 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QKKjNgKXRf_ACTkYaUsXc-GJDrbdKo9u7DSlBLo3mnXIVqK7puLmXcPL-XIDl3YHZGCUrRe0x_HnzqXZ9RuV4ncBgmlkgnY0gmlwhKwSoTqKbXVsdGlhZGRyc4wACgSsEqE6BsAw3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLaVTDlAvKawp13T_KCTqKDcE_3oxPsJjInwVQ4y_YwaoN0Y3CCwC-DdWRwgsAxhXdha3UyBQ --filternode=/ip4/172.18.161.58/tcp/49199/p2p/16Uiu2HAmA7xCdy1gBLf8f9afivSCuQgdPL595dSWSxiM8FL7W88H
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.158.1 waku 66f9afdefca2a90da81cb75d35b6379195385c14ea336b111a8547418b1fe0cb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 66f9afdefca2. Setting up logs at ./log/docker/node2_2024-09-03_04-16-50__c81da229-02f9-4718-8f26-fe91e067dfd4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 10311
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10311/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10311/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.158.1/tcp/10312/p2p/16Uiu2HAmKpWiKhFDdFzYKwuW9WLeLRe4KJjTohVVeZwGAfeFFUeL","/ip4/172.18.158.1/tcp/10313/ws/p2p/16Uiu2HAmKpWiKhFDdFzYKwuW9WLeLRe4KJjTohVVeZwGAfeFFUeL"],"enrUri":"enr:-LO4QDP722Z5MQ_ubLQivYhVP-lsCBDqWClmYFRmpxlfEJlzIKaQXhpXz8Z4Z8usUXfDhKLEP52opRTr4dTo8g97s3cBgmlkgnY0gmlwhKwSngGKbXVsdGlhZGRyc4wACgSsEp4BBihJ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNqcl3uJq_t9Q8_lhzks_-YjUPL1EepNqV-qiOAHpOvcYN0Y3CCKEiDdWRwgihKhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10311/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.161.58/tcp/49199/p2p/16Uiu2HAmA7xCdy1gBLf8f9afivSCuQgdPL595dSWSxiM8FL7W88H"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49198/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10311/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1a7c271d-e69c-4cbd-830c-48011af306c0", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1a7c271d-e69c-4cbd-830c-48011af306c0","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10311/filter/v2/subscriptions/1c062da9-1b99-40ca-b23f-b3937499903a" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1c062da9-1b99-40ca-b23f-b3937499903a","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:10311/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"12345","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10311/filter/v2/subscriptions/9e5053fa-7409-4877-bd4c-d5e168cee65f" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:10311/filter/v2/subscriptions/9e5053fa-7409-4877-bd4c-d5e168cee65f. Response content: b'{"requestId":"9e5053fa-7409-4877-bd4c-d5e168cee65f","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ba7d47bed56f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 66f9afdefca2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.