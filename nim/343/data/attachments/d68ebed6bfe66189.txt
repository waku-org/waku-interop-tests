[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_extra_field with id: 2024-09-03_04-17-36__844c5a14-2a24-432a-919b-339ffcde7ddd
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-03_04-17-36__844c5a14-2a24-432a-919b-339ffcde7ddd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.114.130
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['63445', '63446', '63447', '63448', '63449']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 63445:63445 -p 63446:63446 -p 63447:63447 -p 63448:63448 -p 63449:63449 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63447 --rest-port=63445 --tcp-port=63446 --discv5-udp-port=63448 --rest-address=0.0.0.0 --nat=extip:172.18.114.130 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=deebfd8fb4b4e9d5bbcf51f28c3fc3a8d8dd1fafac6e2632ccca9c824ed5ba2c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63449 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.114.130 waku a18c344b76eb0c0a1e8e096471089e08f84613f979d0ee84e2f53a725393051e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a18c344b76eb. Setting up logs at ./log/docker/node1_2024-09-03_04-17-36__844c5a14-2a24-432a-919b-339ffcde7ddd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 63445
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63445/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63445/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.114.130/tcp/63446/p2p/16Uiu2HAm1VLmJV2cNnPBgm7ts5b5X6dqDpZSuUGFPB8f6o6iCshf","/ip4/172.18.114.130/tcp/63447/ws/p2p/16Uiu2HAm1VLmJV2cNnPBgm7ts5b5X6dqDpZSuUGFPB8f6o6iCshf"],"enrUri":"enr:-LO4QARy1Bwp3cd_8qeOk5Cd0VjluaErMPUdAeP-fEUfqvKoFRTld8ZDU_pLpNEQFQhr0RmQDcOOU_XMkwzrpoZp2n0BgmlkgnY0gmlwhKwScoKKbXVsdGlhZGRyc4wACgSsEnKCBvfX3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJaFrfI9H3eSAFCVF_c32PibiqZ8yb7o3g_ky-U281lpoN0Y3CC99aDdWRwgvfYhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-03_04-17-36__844c5a14-2a24-432a-919b-339ffcde7ddd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.187.62
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['55832', '55833', '55834', '55835', '55836']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 55832:55832 -p 55833:55833 -p 55834:55834 -p 55835:55835 -p 55836:55836 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55834 --rest-port=55832 --tcp-port=55833 --discv5-udp-port=55835 --rest-address=0.0.0.0 --nat=extip:172.18.187.62 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dd0bead76cf75acdd6a3253400ee9bc705ddb2e8ba8ead96e7caef71ad7babc5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55836 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QARy1Bwp3cd_8qeOk5Cd0VjluaErMPUdAeP-fEUfqvKoFRTld8ZDU_pLpNEQFQhr0RmQDcOOU_XMkwzrpoZp2n0BgmlkgnY0gmlwhKwScoKKbXVsdGlhZGRyc4wACgSsEnKCBvfX3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJaFrfI9H3eSAFCVF_c32PibiqZ8yb7o3g_ky-U281lpoN0Y3CC99aDdWRwgvfYhXdha3UyBQ --filternode=/ip4/172.18.114.130/tcp/63446/p2p/16Uiu2HAm1VLmJV2cNnPBgm7ts5b5X6dqDpZSuUGFPB8f6o6iCshf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.187.62 waku 1beb0bec46c9eca7325f9db5872d1aca4abcaba43d76ad061e78676928a291bc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 1beb0bec46c9. Setting up logs at ./log/docker/node2_2024-09-03_04-17-36__844c5a14-2a24-432a-919b-339ffcde7ddd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 55832
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55832/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55832/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.187.62/tcp/55833/p2p/16Uiu2HAmR3PPqFPf2tai1XsN8zeBmAmZJr2zekjoWUE9jLpjRZkx","/ip4/172.18.187.62/tcp/55834/ws/p2p/16Uiu2HAmR3PPqFPf2tai1XsN8zeBmAmZJr2zekjoWUE9jLpjRZkx"],"enrUri":"enr:-LO4QKikCJdvrD0-U31IOUXeqdZ9tn0v5vDymhJGkDKLjhpVRrhIoRKWALTGGm_9w5h_UAwdOhxOWhK5zTJnySPjImUBgmlkgnY0gmlwhKwSuz6KbXVsdGlhZGRyc4wACgSsErs-Btoa3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO4CROgrTMtGnWzTywEdpNAZ34W8YJIvdpD31qMx-ec9YN0Y3CC2hmDdWRwgtobhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55832/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.114.130/tcp/63446/p2p/16Uiu2HAm1VLmJV2cNnPBgm7ts5b5X6dqDpZSuUGFPB8f6o6iCshf"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63445/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55832/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "c5e771f1-a6ce-4ee9-b8d6-3d2c46f41928", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"c5e771f1-a6ce-4ee9-b8d6-3d2c46f41928","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55832/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1", "extraField": "extraValue"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:55832/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a18c344b76eb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1beb0bec46c9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.