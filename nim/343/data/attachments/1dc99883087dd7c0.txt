[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_meta with id: 2024-09-03_04-21-18__307cd34e-f7c5-495d-bd53-59c4e8503360
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-03_04-21-18__307cd34e-f7c5-495d-bd53-59c4e8503360__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.46.118
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['64612', '64613', '64614', '64615', '64616']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 64612:64612 -p 64613:64613 -p 64614:64614 -p 64615:64615 -p 64616:64616 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64614 --rest-port=64612 --tcp-port=64613 --discv5-udp-port=64615 --rest-address=0.0.0.0 --nat=extip:172.18.46.118 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=318ae553dd2d1169a697ebcca2968a731d8d2e7ecc6e4e08bc5ea29211e48b74 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64616 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.46.118 waku ebc5e726f01555dcf36810c97e03c77a13b0d449dc60bf170378a66e14b8117d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ebc5e726f015. Setting up logs at ./log/docker/receiving_node1_2024-09-03_04-21-18__307cd34e-f7c5-495d-bd53-59c4e8503360__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 64612
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64612/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64612/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.46.118/tcp/64613/p2p/16Uiu2HAmMZBmz9Po63rfe79QyRh6rzq4VE6yDz5is66KhmPYoomR","/ip4/172.18.46.118/tcp/64614/ws/p2p/16Uiu2HAmMZBmz9Po63rfe79QyRh6rzq4VE6yDz5is66KhmPYoomR"],"enrUri":"enr:-LO4QPoNYh7zJhHorohjTVZZOGi_6NwQzPnC5rBIuIKfAP7OZF_LpUYHnsjVgMwuA841BfJJKD2Iq_5QY5L4NSv2kHoBgmlkgnY0gmlwhKwSLnaKbXVsdGlhZGRyc4wACgSsEi52Bvxm3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOEPJ3eNoVTW4RHNNykRweF6RqWiv91oyVgsgul_D4paIN0Y3CC_GWDdWRwgvxnhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-03_04-21-18__307cd34e-f7c5-495d-bd53-59c4e8503360__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.57.0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['51945', '51946', '51947', '51948', '51949']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 51945:51945 -p 51946:51946 -p 51947:51947 -p 51948:51948 -p 51949:51949 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51947 --rest-port=51945 --tcp-port=51946 --discv5-udp-port=51948 --rest-address=0.0.0.0 --nat=extip:172.18.57.0 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b8ce9f0ce9be99766128b546efd73ea0f7c5bdcb4bffde14c084fa887ca0ccfb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51949 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.57.0 waku 0463fc260b2a09230e5f3e6614416eda0033ed2278ed4942c4feb5a092eed7e2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 0463fc260b2a. Setting up logs at ./log/docker/receiving_node2_2024-09-03_04-21-18__307cd34e-f7c5-495d-bd53-59c4e8503360__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 51945
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51945/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51945/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.57.0/tcp/51946/p2p/16Uiu2HAmDEfatXbtuywvvckAZqXFDfcJJgw1pvFmpeVjtzoGDZfa","/ip4/172.18.57.0/tcp/51947/ws/p2p/16Uiu2HAmDEfatXbtuywvvckAZqXFDfcJJgw1pvFmpeVjtzoGDZfa"],"enrUri":"enr:-LO4QA5Xz7PK3zKPOXcUXLyUdR2NC8JVGoJAGksvicgAIanjbQdlbhMLbA2rdDlHSdIky_dhRLYrgYUHEtDx1bheF1EBgmlkgnY0gmlwhKwSOQCKbXVsdGlhZGRyc4wACgSsEjkABsrr3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMIoId9cR_pNR4qMdxvrvt4P_V-A0Rp-QrPM74YeMS3jYN0Y3CCyuqDdWRwgsrshXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51945/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.46.118/tcp/64613/p2p/16Uiu2HAmMZBmz9Po63rfe79QyRh6rzq4VE6yDz5is66KhmPYoomR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-03_04-21-18__307cd34e-f7c5-495d-bd53-59c4e8503360__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.103.157
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['26427', '26428', '26429', '26430', '26431']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 26427:26427 -p 26428:26428 -p 26429:26429 -p 26430:26430 -p 26431:26431 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26429 --rest-port=26427 --tcp-port=26428 --discv5-udp-port=26430 --rest-address=0.0.0.0 --nat=extip:172.18.103.157 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eb5f5830a55eecb2f7b18cd0418d5a951ed8da71f1bb3dc26fd8e874dee16efe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26431 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QPoNYh7zJhHorohjTVZZOGi_6NwQzPnC5rBIuIKfAP7OZF_LpUYHnsjVgMwuA841BfJJKD2Iq_5QY5L4NSv2kHoBgmlkgnY0gmlwhKwSLnaKbXVsdGlhZGRyc4wACgSsEi52Bvxm3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOEPJ3eNoVTW4RHNNykRweF6RqWiv91oyVgsgul_D4paIN0Y3CC_GWDdWRwgvxnhXdha3UyCQ --lightpushnode=/ip4/172.18.46.118/tcp/64613/p2p/16Uiu2HAmMZBmz9Po63rfe79QyRh6rzq4VE6yDz5is66KhmPYoomR --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.103.157 waku 33b2b2abc36c3db106471e1cf101efa034bbe3af1e7f609249cf41c6bf9de39d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 33b2b2abc36c. Setting up logs at ./log/docker/lightpush_node1_2024-09-03_04-21-18__307cd34e-f7c5-495d-bd53-59c4e8503360__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 26427
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26427/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26427/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.103.157/tcp/26428/p2p/16Uiu2HAm98rDcxHsTAq5D2889Cg6WgSCnNQKT9dPE5KJKHDiNmNC","/ip4/172.18.103.157/tcp/26429/ws/p2p/16Uiu2HAm98rDcxHsTAq5D2889Cg6WgSCnNQKT9dPE5KJKHDiNmNC"],"enrUri":"enr:-LO4QLEcQxJ_wg-xPeiTbjv4ZBvqWENn1m7EWqqJnG6NRGVnUhJubu4iBeAlukS4nYLMncx_bgZJ9gmukC8OX6mu4p0BgmlkgnY0gmlwhKwSZ52KbXVsdGlhZGRyc4wACgSsEmedBmc93QOCcnOFAAMBAACJc2VjcDI1NmsxoQLLtFHfE5IrjLoHdxylxuaTsqiMlGxNreW-KjJcrHslVYN0Y3CCZzyDdWRwgmc-hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26427/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.46.118/tcp/64613/p2p/16Uiu2HAmMZBmz9Po63rfe79QyRh6rzq4VE6yDz5is66KhmPYoomR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26427/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.57.0/tcp/51946/p2p/16Uiu2HAmDEfatXbtuywvvckAZqXFDfcJJgw1pvFmpeVjtzoGDZfa"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64612/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51945/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26427/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725337284083831296, "meta": "TGlnaHQgcHVzaCB3b3JrcyEh"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64612/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725337284083831296,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51945/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725337284083831296,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ebc5e726f015
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0463fc260b2a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 33b2b2abc36c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'oom': ['DBG 2024-09-03 04:21:19.345+00:00 starting switch for peer                   topics="libp2p switch" tid=1 file=switch.nim:312 peerInfo="(peerId: \\"16Uiu2HAmMZBmz9Po63rfe79QyRh6rzq4VE6yDz5is66KhmPYoomR\\", listenAddrs: @[\\"/ip4/0.0.0.0/tcp/64614/ws\\", \\"/ip4/0.0.0.0/tcp/64613\\"], addrs: @[], protocols: @[\\"/ipfs/id/1.0.0\\", \\"/libp2p/autonat/1.0.0\\", \\"/libp2p/circuit/relay/0.2.0/hop\\", \\"/vac/waku/metadata/1.0.0\\", \\"/vac/waku/relay/2.0.0\\", \\"/rendezvous/1.0.0\\", \\"/ipfs/ping/1.0.0\\", \\"/vac/waku/lightpush/2.0.0-beta1\\", \\"/vac/waku/peer-exchange/2.0.0-alpha1\\"], protoVersion: \\"ipfs/0.1.0\\", agentVersion: \\"nwaku\\")"', 'DBG 2024-09-03 04:21:19.346+00:00 Started libp2p node                        topics="libp2p switch" tid=1 file=switch.nim:341 peer="(peerId: \\"16Uiu2HAmMZBmz9Po63rfe79QyRh6rzq4VE6yDz5is66KhmPYoomR\\", listenAddrs: @[\\"/ip4/0.0.0.0/tcp/64613\\", \\"/ip4/0.0.0.0/tcp/64614/ws\\"], addrs: @[\\"/ip4/172.18.46.118/tcp/64613\\", \\"/ip4/172.18.46.118/tcp/64614/ws\\"], protocols: @[\\"/ipfs/id/1.0.0\\", \\"/libp2p/autonat/1.0.0\\", \\"/libp2p/circuit/relay/0.2.0/hop\\", \\"/vac/waku/metadata/1.0.0\\", \\"/vac/waku/relay/2.0.0\\", \\"/rendezvous/1.0.0\\", \\"/ipfs/ping/1.0.0\\", \\"/vac/waku/lightpush/2.0.0-beta1\\", \\"/vac/waku/peer-exchange/2.0.0-alpha1\\"], protoVersion: \\"ipfs/0.1.0\\", agentVersion: \\"nwaku\\")"', 'INF 2024-09-03 04:21:19.347+00:00 PeerInfo                                   topics="waku node" tid=1 file=waku_node.nim:1290 peerId=16U*PYoomR addrs="@[/ip4/172.18.46.118/tcp/64613, /ip4/172.18.46.118/tcp/64614/ws]"', 'INF 2024-09-03 04:21:19.347+00:00 Listening on                               topics="waku node" tid=1 file=waku_node.nim:1302 full=[/ip4/0.0.0.0/tcp/64613/p2p/16Uiu2HAmMZBmz9Po63rfe79QyRh6rzq4VE6yDz5is66KhmPYoomR][/ip4/0.0.0.0/tcp/64614/ws/p2p/16Uiu2HAmMZBmz9Po63rfe79QyRh6rzq4VE6yDz5is66KhmPYoomR] localIp=172.17.0.6', 'INF 2024-09-03 04:21:19.347+00:00 Announcing addresses                       topics="waku node" tid=1 file=waku_node.nim:1303 full=[/ip4/172.18.46.118/tcp/64613/p2p/16Uiu2HAmMZBmz9Po63rfe79QyRh6rzq4VE6yDz5is66KhmPYoomR][/ip4/172.18.46.118/tcp/64614/ws/p2p/16Uiu2HAmMZBmz9Po63rfe79QyRh6rzq4VE6yDz5is66KhmPYoomR]', 'NTC 2024-09-03 04:21:24.089+00:00 sent relay message                         topics="waku relay" tid=1 file=protocol.nim:176 my_peer_id=16U*PYoomR msg_hash=0x41797d8414fa41a056719ef86ad8a44f2144baef588ea4c9f812c451218dd4ef msg_id=aacd74da546b...1c9df9a5f9cc to_peer_id=16U*oGDZfa topic=/waku/2/rs/3/0 sentTime=1725337284089349632 payloadSizeBytes=18']
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_meta with id: 2024-09-03_04-21-31__7d1ec385-f517-4e89-8429-b5b3ccadb0f6
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-03_04-21-31__7d1ec385-f517-4e89-8429-b5b3ccadb0f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.222.52
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['40904', '40905', '40906', '40907', '40908']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 40904:40904 -p 40905:40905 -p 40906:40906 -p 40907:40907 -p 40908:40908 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40906 --rest-port=40904 --tcp-port=40905 --discv5-udp-port=40907 --rest-address=0.0.0.0 --nat=extip:172.18.222.52 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=90c2edb5e0bd4adddda43eb5e4298a0073cfae0d038df0de655ccdc9dfa5620e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40908 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.222.52 waku 2cd03b62ca892ca04c28c86aa7defc158de408e666e606599f7a76ccf38bb62d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2cd03b62ca89. Setting up logs at ./log/docker/receiving_node1_2024-09-03_04-21-31__7d1ec385-f517-4e89-8429-b5b3ccadb0f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 40904
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40904/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40904/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.222.52/tcp/40905/p2p/16Uiu2HAmBpqbmmUpXmhXwE6dEncdhxGRBaojsKiuZRa8f8y5ZePD","/ip4/172.18.222.52/tcp/40906/ws/p2p/16Uiu2HAmBpqbmmUpXmhXwE6dEncdhxGRBaojsKiuZRa8f8y5ZePD"],"enrUri":"enr:-LO4QJbYguBTCPfiCwF-1-lhKyZZJTSWAug_KM3pu0YJ_AQBPZ47DgAvO1-P1sXA5ZU8F4Z-UNeBGxxURqUhxO5Zip4BgmlkgnY0gmlwhKwS3jSKbXVsdGlhZGRyc4wACgSsEt40Bp_K3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLzqjon9WJmylw07bx_ITcPp7ZM8iNPAPjroSSS7NvbPIN0Y3CCn8mDdWRwgp_LhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-03_04-21-31__7d1ec385-f517-4e89-8429-b5b3ccadb0f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.56.242
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['40946', '40947', '40948', '40949', '40950']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 40946:40946 -p 40947:40947 -p 40948:40948 -p 40949:40949 -p 40950:40950 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40948 --rest-port=40946 --tcp-port=40947 --discv5-udp-port=40949 --rest-address=0.0.0.0 --nat=extip:172.18.56.242 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0fdbc4db8ce8d2eaa8afdccf9255eddafb5c6cd5e604cf8f1fcabadac25bdb49 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40950 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.56.242 waku 931da9768955423214b5f4306a3c9008a19c60899ac9e4ab175442fa3fb3fc14
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 931da9768955. Setting up logs at ./log/docker/receiving_node2_2024-09-03_04-21-31__7d1ec385-f517-4e89-8429-b5b3ccadb0f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 40946
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40946/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40946/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.56.242/tcp/40947/p2p/16Uiu2HAmCZJfM4nR5an7D8NYoBYHnmLW9CQuBe8ieNseWJP8b3CP","/ip4/172.18.56.242/tcp/40948/ws/p2p/16Uiu2HAmCZJfM4nR5an7D8NYoBYHnmLW9CQuBe8ieNseWJP8b3CP"],"enrUri":"enr:-LO4QBJnJIaKoNgIJIOoKJqtfy85qU_e8mKtEYFRbdHC0PgbBgkNJ9v44tsBgAYqBebg-RPXSF1hm6Ss8AeWxO1_s4IBgmlkgnY0gmlwhKwSOPKKbXVsdGlhZGRyc4wACgSsEjjyBp_03QOCcnOFAAMBAACJc2VjcDI1NmsxoQL-izhGnoPsYa_9rYViWTJ3ofhX-4-VNqGGtsIovoINHIN0Y3CCn_ODdWRwgp_1hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40946/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.222.52/tcp/40905/p2p/16Uiu2HAmBpqbmmUpXmhXwE6dEncdhxGRBaojsKiuZRa8f8y5ZePD"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-03_04-21-31__7d1ec385-f517-4e89-8429-b5b3ccadb0f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.234.226
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['64228', '64229', '64230', '64231', '64232']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 64228:64228 -p 64229:64229 -p 64230:64230 -p 64231:64231 -p 64232:64232 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64230 --rest-port=64228 --tcp-port=64229 --discv5-udp-port=64231 --rest-address=0.0.0.0 --nat=extip:172.18.234.226 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2d9fdfc4010acc835fd2bd0fbbad7e4cf1e58bb99e6cadd94ea7d6e567fdad13 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64232 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QJbYguBTCPfiCwF-1-lhKyZZJTSWAug_KM3pu0YJ_AQBPZ47DgAvO1-P1sXA5ZU8F4Z-UNeBGxxURqUhxO5Zip4BgmlkgnY0gmlwhKwS3jSKbXVsdGlhZGRyc4wACgSsEt40Bp_K3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLzqjon9WJmylw07bx_ITcPp7ZM8iNPAPjroSSS7NvbPIN0Y3CCn8mDdWRwgp_LhXdha3UyCQ --lightpushnode=/ip4/172.18.222.52/tcp/40905/p2p/16Uiu2HAmBpqbmmUpXmhXwE6dEncdhxGRBaojsKiuZRa8f8y5ZePD --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.234.226 waku 72893ce31a791967d757f5e1ca38e0f905d5b83ed8d435c45e3376feaab2d140
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 72893ce31a79. Setting up logs at ./log/docker/lightpush_node1_2024-09-03_04-21-31__7d1ec385-f517-4e89-8429-b5b3ccadb0f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 64228
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64228/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64228/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.234.226/tcp/64229/p2p/16Uiu2HAkzRSfJQ8LuMTSUzGp4HTG31CUoRNnz767f9EA5G4MpPAx","/ip4/172.18.234.226/tcp/64230/ws/p2p/16Uiu2HAkzRSfJQ8LuMTSUzGp4HTG31CUoRNnz767f9EA5G4MpPAx"],"enrUri":"enr:-LO4QBF8tT35gFiPA3vQmsx_YIjlMgms_D-lqwGs2IvTzTF1G6NrDLncagM-jv7MU7E4vMoffADco9p0ppyESbRzu9YBgmlkgnY0gmlwhKwS6uKKbXVsdGlhZGRyc4wACgSsEuriBvrm3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJKO1_-Hr_YSWoKxp3s477qhe0plafJdY49vFOSwn-JkYN0Y3CC-uWDdWRwgvrnhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64228/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.222.52/tcp/40905/p2p/16Uiu2HAmBpqbmmUpXmhXwE6dEncdhxGRBaojsKiuZRa8f8y5ZePD"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64228/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.56.242/tcp/40947/p2p/16Uiu2HAmCZJfM4nR5an7D8NYoBYHnmLW9CQuBe8ieNseWJP8b3CP"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40904/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40946/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64228/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725337297306172928, "meta": "TGlnaHQgcHVzaCB3b3JrcyEh"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40904/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725337297306172928,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40946/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725337297306172928,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2cd03b62ca89
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 931da9768955
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 72893ce31a79
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.