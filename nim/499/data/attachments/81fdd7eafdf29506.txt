[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_content_topic[/app/20/sometopic/someencoding] with id: 2024-12-04_11-11-52__0feaac80-085d-4e30-8796-838cfce1880e
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-04_11-11-52__0feaac80-085d-4e30-8796-838cfce1880e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.118.252
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['24597', '24598', '24599', '24600', '24601']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 24597:24597 -p 24598:24598 -p 24599:24599 -p 24600:24600 -p 24601:24601 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24599 --rest-port=24597 --tcp-port=24598 --discv5-udp-port=24600 --rest-address=0.0.0.0 --nat=extip:172.18.118.252 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ef4e1f385e7c4da44e97076ef3b85a1cfecc093e0c51b860fa64ed4a55c4db83 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24601 --metrics-logging=true --relay=true --filter=true --content-topic=/app/20/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.118.252 waku 8e8791dc21a71666db5772713725bafd96799c89edb666dddd7c2c2bec403b25
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container df321c13af8e. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8e8791dc21a7. Setting up logs at ./log/docker/node1_2024-12-04_11-11-52__0feaac80-085d-4e30-8796-838cfce1880e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 24597
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24597/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24597/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.118.252/tcp/24598/p2p/16Uiu2HAmJwPsnx2iMv1ma5GmFCQAJ6o5JqNQKXZoDPrx1fM6qstw","/ip4/172.18.118.252/tcp/24599/ws/p2p/16Uiu2HAmJwPsnx2iMv1ma5GmFCQAJ6o5JqNQKXZoDPrx1fM6qstw"],"enrUri":"enr:-L24QGWw6hfAOv3cRXRptCV6c21dzJWKtrwAWbuqkfxDoTNBRc0aPvYI6-U9ZUqUPmKzvTm02_yLVGv4jfRaCdzjcxkCgmlkgnY0gmlwhKwSdvyKbXVsdGlhZGRyc5YACASsEnb8BmAWAAoErBJ2_AZgF90DgnJzhQACAQAAiXNlY3AyNTZrMaEDXVoD7XO3X-LmdjdFFCenqX_pSNG9J00Mb4Cp7EH3DJyDdGNwgmAWg3VkcIJgGIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-04_11-11-52__0feaac80-085d-4e30-8796-838cfce1880e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.47.5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['46478', '46479', '46480', '46481', '46482']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 46478:46478 -p 46479:46479 -p 46480:46480 -p 46481:46481 -p 46482:46482 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46480 --rest-port=46478 --tcp-port=46479 --discv5-udp-port=46481 --rest-address=0.0.0.0 --nat=extip:172.18.47.5 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=6b53bdbb3fcdd8d2bb93d5ecc8b97fc88cbe864ddbc8bb19f3f2ef16ef2f7fff --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46482 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QGWw6hfAOv3cRXRptCV6c21dzJWKtrwAWbuqkfxDoTNBRc0aPvYI6-U9ZUqUPmKzvTm02_yLVGv4jfRaCdzjcxkCgmlkgnY0gmlwhKwSdvyKbXVsdGlhZGRyc5YACASsEnb8BmAWAAoErBJ2_AZgF90DgnJzhQACAQAAiXNlY3AyNTZrMaEDXVoD7XO3X-LmdjdFFCenqX_pSNG9J00Mb4Cp7EH3DJyDdGNwgmAWg3VkcIJgGIV3YWt1MgU --content-topic=/app/20/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.47.5 waku 6ad9e015e6a31e8d3fedcb8fd5cfbd57bf045b403192bdaaf78090cac791b795
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6ad9e015e6a3. Setting up logs at ./log/docker/node2_2024-12-04_11-11-52__0feaac80-085d-4e30-8796-838cfce1880e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 46478
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46478/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46478/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.47.5/tcp/46479/p2p/16Uiu2HAm9rR1zXEGHqdXHq5FYzVdtdaHETB4qEzm3RJ2kNpK51nM","/ip4/172.18.47.5/tcp/46480/ws/p2p/16Uiu2HAm9rR1zXEGHqdXHq5FYzVdtdaHETB4qEzm3RJ2kNpK51nM"],"enrUri":"enr:-L24QDd-wnwT13BTaaLlheM_xPjXV_tb1QW1bkRvTCrCai8tBGs3LmqdMFHv2x3q219LiqzwYTLlQmYE6Qli9ZTorM4CgmlkgnY0gmlwhKwSLwWKbXVsdGlhZGRyc5YACASsEi8FBrWPAAoErBIvBQa1kN0DgnJzhQACAQAAiXNlY3AyNTZrMaEC1lo4Me3XGa09OAS-xjjXXNNU8bn5K4vug7nL0A6gyCaDdGNwgrWPg3VkcIK1kYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46478/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.118.252/tcp/24598/p2p/16Uiu2HAmJwPsnx2iMv1ma5GmFCQAJ6o5JqNQKXZoDPrx1fM6qstw"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24597/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/20/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46478/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/20/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24597/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24597/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/20/sometopic/someencoding","version":0,"timestamp":1733310716321211648,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46478/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/20/sometopic/someencoding","version":0,"timestamp":1733310716321211648,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 8e8791dc21a7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 6ad9e015e6a3
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 8e8791dc21a7. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.