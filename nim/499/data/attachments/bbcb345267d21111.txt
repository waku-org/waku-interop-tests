[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_relaying_node with id: 2024-12-04_10-55-07__65307c11-c461-460c-854d-02d64d87bae0
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-04_10-55-07__65307c11-c461-460c-854d-02d64d87bae0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-04_10-55-07__65307c11-c461-460c-854d-02d64d87bae0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-04_10-55-07__65307c11-c461-460c-854d-02d64d87bae0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.147.6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['14124', '14125', '14126', '14127', '14128']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 14124:14124 -p 14125:14125 -p 14126:14126 -p 14127:14127 -p 14128:14128 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14126 --rest-port=14124 --tcp-port=14125 --discv5-udp-port=14127 --rest-address=0.0.0.0 --nat=extip:172.18.147.6 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4001b11eebccccef80d90e4c2ffad11d1d5d8f9c2bfa7a7cb9f85bb4b7c80ede --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14128 --metrics-logging=true --filter=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.147.6 waku 3bd500bbbc3abcd5e47d9e7dfc8cd496aa238d6e929695d2fd9696e7a4f70a33
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 88144561dc77. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3bd500bbbc3a. Setting up logs at ./log/docker/node1_2024-12-04_10-55-07__65307c11-c461-460c-854d-02d64d87bae0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 14124
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14124/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14124/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.147.6/tcp/14125/p2p/16Uiu2HAm7XxGEU71vwKFFrwA5n3nT8eKA3nv8NSxoJih8VPrhAmy","/ip4/172.18.147.6/tcp/14126/ws/p2p/16Uiu2HAm7XxGEU71vwKFFrwA5n3nT8eKA3nv8NSxoJih8VPrhAmy"],"enrUri":"enr:-L24QAV0FCzVPDTiNzmtRs9C0jTXTcb9StFuz6seWwY3ANyiGtJT2YypHDjY0agJRATgyfSLAU2dJs53eb68qrNWddYCgmlkgnY0gmlwhKwSkwaKbXVsdGlhZGRyc5YACASsEpMGBjctAAoErBKTBgY3Lt0DgnJzhQADAQAAiXNlY3AyNTZrMaECs-gjxFQQbGMv6CtoRNOcgJ09yWGylyO9iJnUXNGcwQSDdGNwgjctg3VkcII3L4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.8.23
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['19030', '19031', '19032', '19033', '19034']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 19030:19030 -p 19031:19031 -p 19032:19032 -p 19033:19033 -p 19034:19034 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19032 --rest-port=19030 --tcp-port=19031 --discv5-udp-port=19033 --rest-address=0.0.0.0 --nat=extip:172.18.8.23 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fbba76f2fa15fb8267f48c9703eafd5f3f8545df42fd2cb09dc2bbc8fdb54c9b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19034 --metrics-logging=true --filter=true --relay=true --discv5-bootstrap-node=enr:-L24QAV0FCzVPDTiNzmtRs9C0jTXTcb9StFuz6seWwY3ANyiGtJT2YypHDjY0agJRATgyfSLAU2dJs53eb68qrNWddYCgmlkgnY0gmlwhKwSkwaKbXVsdGlhZGRyc5YACASsEpMGBjctAAoErBKTBgY3Lt0DgnJzhQADAQAAiXNlY3AyNTZrMaECs-gjxFQQbGMv6CtoRNOcgJ09yWGylyO9iJnUXNGcwQSDdGNwgjctg3VkcII3L4V3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.8.23 waku 3861d49d78ae9e5ce8130075d3d9e4807cd5b1ea88dddebef8aff185ccbfb08e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3861d49d78ae. Setting up logs at ./log/docker/node2_2024-12-04_10-55-07__65307c11-c461-460c-854d-02d64d87bae0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 19030
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19030/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19030/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.8.23/tcp/19031/p2p/16Uiu2HAmPpnzppbEZtQQptNbK47tetwa9Z24C5Qk5dPDJxu4mNjK","/ip4/172.18.8.23/tcp/19032/ws/p2p/16Uiu2HAmPpnzppbEZtQQptNbK47tetwa9Z24C5Qk5dPDJxu4mNjK"],"enrUri":"enr:-L24QPg0wqc9uizTvIGRwU6S-bOqyWQpmGYiwd9jcpaEXWiAdwxoye3PX4fVSpiuyRZzEq67I8zajGe4kcFn-1zzxRcCgmlkgnY0gmlwhKwSCBeKbXVsdGlhZGRyc5YACASsEggXBkpXAAoErBIIFwZKWN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDpfOHD-hUetC8UpE1wvj3D2C_17EFbUey4NCZtuTu2lqDdGNwgkpXg3VkcIJKWYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.64.187
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['44162', '44163', '44164', '44165', '44166']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 44162:44162 -p 44163:44163 -p 44164:44164 -p 44165:44165 -p 44166:44166 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44164 --rest-port=44162 --tcp-port=44163 --discv5-udp-port=44165 --rest-address=0.0.0.0 --nat=extip:172.18.64.187 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3dbbcbef641b3b1c04fdfc6fd7b4a6c6428a8e4ff159ea91aa1681ab4b811e73 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44166 --metrics-logging=true --relay=false --filternode=/ip4/172.18.8.23/tcp/19031/p2p/16Uiu2HAmPpnzppbEZtQQptNbK47tetwa9Z24C5Qk5dPDJxu4mNjK --discv5-bootstrap-node=enr:-L24QPg0wqc9uizTvIGRwU6S-bOqyWQpmGYiwd9jcpaEXWiAdwxoye3PX4fVSpiuyRZzEq67I8zajGe4kcFn-1zzxRcCgmlkgnY0gmlwhKwSCBeKbXVsdGlhZGRyc5YACASsEggXBkpXAAoErBIIFwZKWN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDpfOHD-hUetC8UpE1wvj3D2C_17EFbUey4NCZtuTu2lqDdGNwgkpXg3VkcIJKWYV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.64.187 waku 37a919b9dfb67ed33b4c2fd380e045c0c3e8db0ec5ca037ffef87453d4062980
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 37a919b9dfb6. Setting up logs at ./log/docker/node3_2024-12-04_10-55-07__65307c11-c461-460c-854d-02d64d87bae0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 44162
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44162/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44162/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.64.187/tcp/44163/p2p/16Uiu2HAmMgXoZpyQDkcS9JZLEo4fwdS5rr3Le5dgV5VguQnKVRBY","/ip4/172.18.64.187/tcp/44164/ws/p2p/16Uiu2HAmMgXoZpyQDkcS9JZLEo4fwdS5rr3Le5dgV5VguQnKVRBY"],"enrUri":"enr:-L24QBWju_sxixCAItfTl6CghiFgXfq94dCV2jYN4IzfR1EKemkzkx73cr_zh4E3DKFTGQyNNVWaVAydtYHHWIwnlAICgmlkgnY0gmlwhKwSQLuKbXVsdGlhZGRyc5YACASsEkC7BqyDAAoErBJAuwashN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDhh5TxO-GQ7AgyBSIYyVeSXlxw-vB7ZP9XhVW9mamgyODdGNwgqyDg3VkcIKshYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14124/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19030/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44162/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14124/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.8.23/tcp/19031/p2p/16Uiu2HAmPpnzppbEZtQQptNbK47tetwa9Z24C5Qk5dPDJxu4mNjK","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19030/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.147.6/tcp/14125/p2p/16Uiu2HAm7XxGEU71vwKFFrwA5n3nT8eKA3nv8NSxoJih8VPrhAmy","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.64.187/tcp/44163/p2p/16Uiu2HAmMgXoZpyQDkcS9JZLEo4fwdS5rr3Le5dgV5VguQnKVRBY","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44162/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.8.23/tcp/19031/p2p/16Uiu2HAmPpnzppbEZtQQptNbK47tetwa9Z24C5Qk5dPDJxu4mNjK","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14124/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44162/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1733309742658268672,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 3bd500bbbc3a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 3861d49d78ae
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3bd500bbbc3a. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 37a919b9dfb6
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3861d49d78ae. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.