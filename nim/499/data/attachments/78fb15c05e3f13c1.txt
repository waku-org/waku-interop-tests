[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-12-04_11-05-56__ff724397-6052-49a2-ab4a-901194b45424
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-04_11-05-56__ff724397-6052-49a2-ab4a-901194b45424__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.174.208
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['64266', '64267', '64268', '64269', '64270']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 64266:64266 -p 64267:64267 -p 64268:64268 -p 64269:64269 -p 64270:64270 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64268 --rest-port=64266 --tcp-port=64267 --discv5-udp-port=64269 --rest-address=0.0.0.0 --nat=extip:172.18.174.208 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=08a839aba42f493c825cdf0a5722a57fa87a0a0282e8fc3ccb2e027c9b931b9a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64270 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.174.208 waku fa0ba87bafa7650e9f84048275df50586c0ed9ece3324299d8134a33c12597ce
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fa0ba87bafa7. Setting up logs at ./log/docker/receiving_node1_2024-12-04_11-05-56__ff724397-6052-49a2-ab4a-901194b45424__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 64266
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 31a7c510d093. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64266/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64266/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.174.208/tcp/64267/p2p/16Uiu2HAkxGcDS31kTKPJWr5Gm52pMLDmeA95GD2dAMARNQUEpy1e","/ip4/172.18.174.208/tcp/64268/ws/p2p/16Uiu2HAkxGcDS31kTKPJWr5Gm52pMLDmeA95GD2dAMARNQUEpy1e"],"enrUri":"enr:-L24QF9KySIEErMj283TakPl8QDLGdeOpLSXmxhpPnRXhxhWeYGsSIJKaVla3pXUCwJeupMXOxaC1dn8T1FNP_kn6JkCgmlkgnY0gmlwhKwSrtCKbXVsdGlhZGRyc5YACASsEq7QBvsLAAoErBKu0Ab7DN0DgnJzhQADAQAAiXNlY3AyNTZrMaECKkCTmkBo9r8JfMB0ePRikAWAh_ZHSuVYLYFAS-aipU2DdGNwgvsLg3VkcIL7DYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-04_11-05-56__ff724397-6052-49a2-ab4a-901194b45424__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.48.1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['62608', '62609', '62610', '62611', '62612']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 62608:62608 -p 62609:62609 -p 62610:62610 -p 62611:62611 -p 62612:62612 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62610 --rest-port=62608 --tcp-port=62609 --discv5-udp-port=62611 --rest-address=0.0.0.0 --nat=extip:172.18.48.1 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a6ed92b7fa941ab75e4ac9bdb1d9b70ed3a83798f0a54c3bfe8e1fc81b3edf0d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62612 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.48.1 waku c8a93c094bdb1664765da3b5a8f46912e0d8df1b7c21619726865a160cdd04ba
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c8a93c094bdb. Setting up logs at ./log/docker/receiving_node2_2024-12-04_11-05-56__ff724397-6052-49a2-ab4a-901194b45424__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 62608
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62608/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62608/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.48.1/tcp/62609/p2p/16Uiu2HAmNXr5zGZ5DfQHSAz5ib14MLk67Hb7RoKpsaGQWEnbE6XY","/ip4/172.18.48.1/tcp/62610/ws/p2p/16Uiu2HAmNXr5zGZ5DfQHSAz5ib14MLk67Hb7RoKpsaGQWEnbE6XY"],"enrUri":"enr:-L24QH4jeq-FGvPmET3GzyOYFu98xA2cmwg_K14rQQM-9HATStL3y_arGaK3pSPADwur_hNd0yWTsjwoZZE64nTubiQCgmlkgnY0gmlwhKwSMAGKbXVsdGlhZGRyc5YACASsEjABBvSRAAoErBIwAQb0kt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDksB1rLaJQJMSWwK6LQ0mgHQuEWCAitL5HZFSUaYR6KeDdGNwgvSRg3VkcIL0k4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62608/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.174.208/tcp/64267/p2p/16Uiu2HAkxGcDS31kTKPJWr5Gm52pMLDmeA95GD2dAMARNQUEpy1e"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-04_11-05-56__ff724397-6052-49a2-ab4a-901194b45424__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.138.8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['16339', '16340', '16341', '16342', '16343']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 16339:16339 -p 16340:16340 -p 16341:16341 -p 16342:16342 -p 16343:16343 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16341 --rest-port=16339 --tcp-port=16340 --discv5-udp-port=16342 --rest-address=0.0.0.0 --nat=extip:172.18.138.8 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fc0e640eb0ed89468b5ceb3bf93e2ebb28fb15d2ff5d2b61d2ac6f3b10acd136 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16343 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QF9KySIEErMj283TakPl8QDLGdeOpLSXmxhpPnRXhxhWeYGsSIJKaVla3pXUCwJeupMXOxaC1dn8T1FNP_kn6JkCgmlkgnY0gmlwhKwSrtCKbXVsdGlhZGRyc5YACASsEq7QBvsLAAoErBKu0Ab7DN0DgnJzhQADAQAAiXNlY3AyNTZrMaECKkCTmkBo9r8JfMB0ePRikAWAh_ZHSuVYLYFAS-aipU2DdGNwgvsLg3VkcIL7DYV3YWt1Mgk --lightpushnode=/ip4/172.18.174.208/tcp/64267/p2p/16Uiu2HAkxGcDS31kTKPJWr5Gm52pMLDmeA95GD2dAMARNQUEpy1e --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.138.8 waku ca5d607eda081493015bcd6913053de354e02c7863405131864e78e8004b8ed9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ca5d607eda08. Setting up logs at ./log/docker/lightpush_node1_2024-12-04_11-05-56__ff724397-6052-49a2-ab4a-901194b45424__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 16339
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16339/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16339/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.138.8/tcp/16340/p2p/16Uiu2HAm8J65ioAsZFCaEVronHhtdvrMAD4Mrf3KiPhZmq7TKofS","/ip4/172.18.138.8/tcp/16341/ws/p2p/16Uiu2HAm8J65ioAsZFCaEVronHhtdvrMAD4Mrf3KiPhZmq7TKofS"],"enrUri":"enr:-L24QAsYwrksPY3i3_Z13MM-yW5SE8HEJ3wPXXk3bAB2Eb7eBDRsilF_xvh9yGeHv0RzsNCq9Gg-JFtJi5W9deXm30ICgmlkgnY0gmlwhKwSigiKbXVsdGlhZGRyc5YACASsEooIBj_UAAoErBKKCAY_1d0DgnJzhQADAQAAiXNlY3AyNTZrMaECvzaJOKZPpJCZHFmyAL_ax6P7DWgkj0-TycDvNj72W12DdGNwgj_Ug3VkcII_1oV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16339/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.174.208/tcp/64267/p2p/16Uiu2HAkxGcDS31kTKPJWr5Gm52pMLDmeA95GD2dAMARNQUEpy1e"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16339/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.48.1/tcp/62609/p2p/16Uiu2HAmNXr5zGZ5DfQHSAz5ib14MLk67Hb7RoKpsaGQWEnbE6XY"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64266/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62608/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16339/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733310361863226880, "version": 2.1}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:16339/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id fa0ba87bafa7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c8a93c094bdb
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fa0ba87bafa7. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ca5d607eda08
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c8a93c094bdb. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.