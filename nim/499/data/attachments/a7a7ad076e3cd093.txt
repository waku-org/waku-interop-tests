[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_to_pubsub_topics_from_multiple_clusters with id: 2024-12-04_11-02-14__79235f8a-679d-4c71-b53d-7b7e2515cd44
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-04_11-02-14__79235f8a-679d-4c71-b53d-7b7e2515cd44__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.50.50
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['26482', '26483', '26484', '26485', '26486']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 26482:26482 -p 26483:26483 -p 26484:26484 -p 26485:26485 -p 26486:26486 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26484 --rest-port=26482 --tcp-port=26483 --discv5-udp-port=26485 --rest-address=0.0.0.0 --nat=extip:172.18.50.50 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0aa0df4a5f9c6ebf8bc4a2c71dd8e2aabe502dedbf91cdacfa8daae1b46f35c8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26486 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.50.50 waku 5f2ecc17b44d0c3ce4d6e956cfc10897e880f14a78bc662e955963cb31dfa0cb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5f2ecc17b44d. Setting up logs at ./log/docker/node1_2024-12-04_11-02-14__79235f8a-679d-4c71-b53d-7b7e2515cd44__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 26482
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 02b5fd45bc03. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26482/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26482/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.50.50/tcp/26483/p2p/16Uiu2HAmG7BaqDLUFwz8agduUDUwx5GNhuffHZbH1wk4zsvtg34U","/ip4/172.18.50.50/tcp/26484/ws/p2p/16Uiu2HAmG7BaqDLUFwz8agduUDUwx5GNhuffHZbH1wk4zsvtg34U"],"enrUri":"enr:-L24QD4bhv5jRuxRwzCylJCnpq6jXmxjg1RYaeO8XACY5QM8TsYrmap7UG25ZgaMX9Yc55OJahapxCQQxwZqwNS3Bc0CgmlkgnY0gmlwhKwSMjKKbXVsdGlhZGRyc5YACASsEjIyBmdzAAoErBIyMgZndN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDM0jdEib0oMTpUeVpqvqCcDj7EPQLONXUPau1wY99c3mDdGNwgmdzg3VkcIJndYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-04_11-02-14__79235f8a-679d-4c71-b53d-7b7e2515cd44__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.212.242
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['24454', '24455', '24456', '24457', '24458']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 24454:24454 -p 24455:24455 -p 24456:24456 -p 24457:24457 -p 24458:24458 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24456 --rest-port=24454 --tcp-port=24455 --discv5-udp-port=24457 --rest-address=0.0.0.0 --nat=extip:172.18.212.242 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ecfd64c8fc487ade49f0ff5b216d0e98ef5209af968bfa9379e35dddfdd86a00 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24458 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QD4bhv5jRuxRwzCylJCnpq6jXmxjg1RYaeO8XACY5QM8TsYrmap7UG25ZgaMX9Yc55OJahapxCQQxwZqwNS3Bc0CgmlkgnY0gmlwhKwSMjKKbXVsdGlhZGRyc5YACASsEjIyBmdzAAoErBIyMgZndN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDM0jdEib0oMTpUeVpqvqCcDj7EPQLONXUPau1wY99c3mDdGNwgmdzg3VkcIJndYV3YWt1MgU --filternode=/ip4/172.18.50.50/tcp/26483/p2p/16Uiu2HAmG7BaqDLUFwz8agduUDUwx5GNhuffHZbH1wk4zsvtg34U
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.212.242 waku dae2a9ed638b141c7bfbdc20f0d9bfbf1cf75c7648e00fbddb75e165c334b505
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID dae2a9ed638b. Setting up logs at ./log/docker/node2_2024-12-04_11-02-14__79235f8a-679d-4c71-b53d-7b7e2515cd44__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 24454
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24454/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24454/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.212.242/tcp/24455/p2p/16Uiu2HAkwiyuQ9hRvUEwFH3zsiWyB2ra8AxdAeywpFh5WovRAT31","/ip4/172.18.212.242/tcp/24456/ws/p2p/16Uiu2HAkwiyuQ9hRvUEwFH3zsiWyB2ra8AxdAeywpFh5WovRAT31"],"enrUri":"enr:-L24QOiN0vSxKaG00jUiijLsyoTLGamroeBMnK_LGH_KsfvZX_H1ixMfZ-wNSAS19fI7UJEcILLjAIox-h9Ka5TuDO0CgmlkgnY0gmlwhKwS1PKKbXVsdGlhZGRyc5YACASsEtTyBl-HAAoErBLU8gZfiN0DgnJzhQADAQAAiXNlY3AyNTZrMaECIiaDviAFIdMQpMfB4LqsK_ML-1niWeMV-yAPOItlqSSDdGNwgl-Hg3VkcIJfiYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24454/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.50.50/tcp/26483/p2p/16Uiu2HAmG7BaqDLUFwz8agduUDUwx5GNhuffHZbH1wk4zsvtg34U"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26482/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24454/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "d1d7646f-b513-4107-ac25-569c5f6ad726", "contentFilters": ["/waku/2/rs/3/1"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"d1d7646f-b513-4107-ac25-569c5f6ad726","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26482/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/1", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24454/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/1","version":0,"timestamp":1733310138308968448,"ephemeral":false}]'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/2/2
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26482/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24454/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "07268754-40c1-4b34-8b9b-6798801d4460", "contentFilters": ["/waku/2/rs/2/2"], "pubsubTopic": "/waku/2/rs/2/2"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"07268754-40c1-4b34-8b9b-6798801d4460","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26482/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/2/2", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24454/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/2/2","version":0,"timestamp":1733310138422910464,"ephemeral":false}]'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/3/9
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26482/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24454/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "14b30d17-a816-4e43-8e16-31c665378399", "contentFilters": ["/waku/2/rs/3/9"], "pubsubTopic": "/waku/2/rs/3/9"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"14b30d17-a816-4e43-8e16-31c665378399","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26482/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/9", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24454/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/9","version":0,"timestamp":1733310138531907584,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5f2ecc17b44d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id dae2a9ed638b
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5f2ecc17b44d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.