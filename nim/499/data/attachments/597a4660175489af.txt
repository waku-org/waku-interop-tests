[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_relay_receiving_node_not_connected_directly_to_relaying_node with id: 2024-12-04_10-55-06__9ea7252c-1590-4daa-925a-8c28af68db02
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-04_10-55-06__9ea7252c-1590-4daa-925a-8c28af68db02__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-04_10-55-06__9ea7252c-1590-4daa-925a-8c28af68db02__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-04_10-55-06__9ea7252c-1590-4daa-925a-8c28af68db02__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.38.235
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['54777', '54778', '54779', '54780', '54781']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 54777:54777 -p 54778:54778 -p 54779:54779 -p 54780:54780 -p 54781:54781 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54779 --rest-port=54777 --tcp-port=54778 --discv5-udp-port=54780 --rest-address=0.0.0.0 --nat=extip:172.18.38.235 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c9d784a4f76efbeb434b70e5a8bda7764ff400cdfb533db2e1feb85e7c271bca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54781 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.38.235 waku 159db015113ab89fc94dbf96b26d5355ca05a77fffacdd3c47f8cc081de85b1d
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 27287957d72b. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 159db015113a. Setting up logs at ./log/docker/node1_2024-12-04_10-55-06__9ea7252c-1590-4daa-925a-8c28af68db02__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 54777
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54777/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54777/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.38.235/tcp/54778/p2p/16Uiu2HAmGHpkXcvZnT8zfKSHBxZnqaSVaWh1oVk2h51CMcnnejYR","/ip4/172.18.38.235/tcp/54779/ws/p2p/16Uiu2HAmGHpkXcvZnT8zfKSHBxZnqaSVaWh1oVk2h51CMcnnejYR"],"enrUri":"enr:-L24QKIjTFh-AVAr6xoGp3bMB0qzCpmZWM_OWIT3XroUfftDYfbSidKiLx7ygVe23JXAJc0n08IQ8Lee9eS1mqFyUyQCgmlkgnY0gmlwhKwSJuuKbXVsdGlhZGRyc5YACASsEibrBtX6AAoErBIm6wbV-90DgnJzhQADAQAAiXNlY3AyNTZrMaEDNgKyXBkx9FvPRj7FMxQ3fJ6r5RY6AXvOE-UVf9EAZ36DdGNwgtX6g3VkcILV_IV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.209.122
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['7364', '7365', '7366', '7367', '7368']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 7364:7364 -p 7365:7365 -p 7366:7366 -p 7367:7367 -p 7368:7368 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7366 --rest-port=7364 --tcp-port=7365 --discv5-udp-port=7367 --rest-address=0.0.0.0 --nat=extip:172.18.209.122 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9d6f8cb897cc3b8adcb9e3cbdb0cdc4eb8cdaaaf9c18cad863fb7eaced17f19b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7368 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QKIjTFh-AVAr6xoGp3bMB0qzCpmZWM_OWIT3XroUfftDYfbSidKiLx7ygVe23JXAJc0n08IQ8Lee9eS1mqFyUyQCgmlkgnY0gmlwhKwSJuuKbXVsdGlhZGRyc5YACASsEibrBtX6AAoErBIm6wbV-90DgnJzhQADAQAAiXNlY3AyNTZrMaEDNgKyXBkx9FvPRj7FMxQ3fJ6r5RY6AXvOE-UVf9EAZ36DdGNwgtX6g3VkcILV_IV3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.209.122 waku 45891cf0effa7b2856270e32a36a48b2de74b8f5c723dc254f574369aad38f52
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 45891cf0effa. Setting up logs at ./log/docker/node2_2024-12-04_10-55-06__9ea7252c-1590-4daa-925a-8c28af68db02__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 7364
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7364/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7364/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.209.122/tcp/7365/p2p/16Uiu2HAmAABff3Jx9CoRVAmXt2dMsyHTdo7vw7Kib5pXFvc9Mzae","/ip4/172.18.209.122/tcp/7366/ws/p2p/16Uiu2HAmAABff3Jx9CoRVAmXt2dMsyHTdo7vw7Kib5pXFvc9Mzae"],"enrUri":"enr:-L24QBnP-P8yHUT5KHemOfZuMHpZHzpHfN28XMYf2ZJtzJ09DHNtxGpxol0KhVqF4h2xw1MGjKKtCztv9p2pjpAqlocCgmlkgnY0gmlwhKwS0XqKbXVsdGlhZGRyc5YACASsEtF6BhzFAAoErBLRegYcxt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC2ueUF23UUomgWV3l1c2JAPgi2moPNT0fHH95Oonm72ODdGNwghzFg3VkcIIcx4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.203.200
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['17207', '17208', '17209', '17210', '17211']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 17207:17207 -p 17208:17208 -p 17209:17209 -p 17210:17210 -p 17211:17211 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17209 --rest-port=17207 --tcp-port=17208 --discv5-udp-port=17210 --rest-address=0.0.0.0 --nat=extip:172.18.203.200 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=efad3a8caaf41daaffbf5dde94d0200e6da94e2e9ee764d9ff3e16c95f9e4939 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17211 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QBnP-P8yHUT5KHemOfZuMHpZHzpHfN28XMYf2ZJtzJ09DHNtxGpxol0KhVqF4h2xw1MGjKKtCztv9p2pjpAqlocCgmlkgnY0gmlwhKwS0XqKbXVsdGlhZGRyc5YACASsEtF6BhzFAAoErBLRegYcxt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC2ueUF23UUomgWV3l1c2JAPgi2moPNT0fHH95Oonm72ODdGNwghzFg3VkcIIcx4V3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.203.200 waku 9ef7860099c79e4c653ca9450804819090de488153d0c8cdb1027a04d4f0a8ee
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9ef7860099c7. Setting up logs at ./log/docker/node3_2024-12-04_10-55-06__9ea7252c-1590-4daa-925a-8c28af68db02__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 17207
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17207/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17207/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.203.200/tcp/17208/p2p/16Uiu2HAmEGkPeKZuCJFzNJASYGSuc4AqHvh47G54PnEjWDtBskXB","/ip4/172.18.203.200/tcp/17209/ws/p2p/16Uiu2HAmEGkPeKZuCJFzNJASYGSuc4AqHvh47G54PnEjWDtBskXB"],"enrUri":"enr:-L24QJlcp8qbIAYGM_WTScPF8kN3IdOl5P05d67FPUtFM7XmdeIp72RJd7pBrHOjjJ9GnkJgHGVu9VP0dmdhvox6LfwCgmlkgnY0gmlwhKwSy8iKbXVsdGlhZGRyc5YACASsEsvIBkM4AAoErBLLyAZDOd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDGATP5dzZAdSY8eMT1D1beh0VTbBWwXeEjfMBK_VL9LKDdGNwgkM4g3VkcIJDOoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54777/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7364/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17207/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54777/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.209.122/tcp/7365/p2p/16Uiu2HAmAABff3Jx9CoRVAmXt2dMsyHTdo7vw7Kib5pXFvc9Mzae","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7364/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.203.200/tcp/17208/p2p/16Uiu2HAmEGkPeKZuCJFzNJASYGSuc4AqHvh47G54PnEjWDtBskXB","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"},{"multiaddr":"/ip4/172.18.38.235/tcp/54778/p2p/16Uiu2HAmGHpkXcvZnT8zfKSHBxZnqaSVaWh1oVk2h51CMcnnejYR","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17207/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.209.122/tcp/7365/p2p/16Uiu2HAmAABff3Jx9CoRVAmXt2dMsyHTdo7vw7Kib5pXFvc9Mzae","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54777/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17207/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1733309742525392384,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 159db015113a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 45891cf0effa
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 159db015113a. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 9ef7860099c7
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 45891cf0effa. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.