[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter with id: 2024-12-25_18-25-55__ccf12c5b-5c58-4b52-bdd2-a2db71fdd2fb
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-25_18-25-55__ccf12c5b-5c58-4b52-bdd2-a2db71fdd2fb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.195.156
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['32697', '32698', '32699', '32700', '32701']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 32697:32697 -p 32698:32698 -p 32699:32699 -p 32700:32700 -p 32701:32701 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32699 --rest-port=32697 --tcp-port=32698 --discv5-udp-port=32700 --rest-address=0.0.0.0 --nat=extip:172.18.195.156 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b82dcb70dece7ed4cda5cad73f835b50ddf90f44ac3cea1a57b3a99a41c358b9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32701 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.195.156 waku bc32b9af64b704a86e121495c424f49249668139c4e06e5a66d147ba4ddedd2f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID bc32b9af64b7. Setting up logs at ./log/docker/node1_2024-12-25_18-25-55__ccf12c5b-5c58-4b52-bdd2-a2db71fdd2fb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 32697
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32697/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32697/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.195.156/tcp/32698/p2p/16Uiu2HAmUnuDY4ZtmoEisQ76xsFsfFFEvyooDM6anvpXJMiMT1tx","/ip4/172.18.195.156/tcp/32699/ws/p2p/16Uiu2HAmUnuDY4ZtmoEisQ76xsFsfFFEvyooDM6anvpXJMiMT1tx"],"enrUri":"enr:-L24QDqrs5LTOcSMKV_F_9E-GFgzt5VLl5AN0JIo0gzpBqHqFb3zympNL8_zHPOXG1MtCFPCnsd-saZFzqGZGbUyaB4CgmlkgnY0gmlwhKwSw5yKbXVsdGlhZGRyc5YACASsEsOcBn-6AAoErBLDnAZ_u90DgnJzhQADAQAAiXNlY3AyNTZrMaED78HVJruXcFd_3f_lr2TKWsTgW6t-dk66MfV1muAnTzWDdGNwgn-6g3VkcIJ_vIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-25_18-25-55__ccf12c5b-5c58-4b52-bdd2-a2db71fdd2fb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.1.190
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5744', '5745', '5746', '5747', '5748']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5744:5744 -p 5745:5745 -p 5746:5746 -p 5747:5747 -p 5748:5748 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5746 --rest-port=5744 --tcp-port=5745 --discv5-udp-port=5747 --rest-address=0.0.0.0 --nat=extip:172.18.1.190 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=996a39a9bad21c9f94f4bae2ca0bfe592bfa9e03d3bbefaf46780bc3d005d44b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5748 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QDqrs5LTOcSMKV_F_9E-GFgzt5VLl5AN0JIo0gzpBqHqFb3zympNL8_zHPOXG1MtCFPCnsd-saZFzqGZGbUyaB4CgmlkgnY0gmlwhKwSw5yKbXVsdGlhZGRyc5YACASsEsOcBn-6AAoErBLDnAZ_u90DgnJzhQADAQAAiXNlY3AyNTZrMaED78HVJruXcFd_3f_lr2TKWsTgW6t-dk66MfV1muAnTzWDdGNwgn-6g3VkcIJ_vIV3YWt1MgU --filternode=/ip4/172.18.195.156/tcp/32698/p2p/16Uiu2HAmUnuDY4ZtmoEisQ76xsFsfFFEvyooDM6anvpXJMiMT1tx
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.1.190 waku d109eebc4a3e31976fb7f83e52791e6f5734c317f1906cefb8d21c39a7f80e49
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d109eebc4a3e. Setting up logs at ./log/docker/node1_2024-12-25_18-25-55__ccf12c5b-5c58-4b52-bdd2-a2db71fdd2fb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 5744
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5744/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5744/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.1.190/tcp/5745/p2p/16Uiu2HAmCfvMn8rFwh6D8n7NuCTZSbz6usaE2NgvUh27Z9S3VjAP","/ip4/172.18.1.190/tcp/5746/ws/p2p/16Uiu2HAmCfvMn8rFwh6D8n7NuCTZSbz6usaE2NgvUh27Z9S3VjAP"],"enrUri":"enr:-L24QMqpAymaGmGU6O14cSNWJPzCfwDCQtaXPu5IAGlXkmJON4hAD56sShB0t4BNtwD42De1gkUI3Vva-US_IL1wYaUCgmlkgnY0gmlwhKwSAb6KbXVsdGlhZGRyc5YACASsEgG-BhZxAAoErBIBvgYWct0DgnJzhQADAQAAiXNlY3AyNTZrMaEDAD0RSap8ta2QzW-WzcCLyxRgTXDJiJP8q_E49KjjJyiDdGNwghZxg3VkcIIWc4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32697/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5744/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "2e084794-634c-49b4-aec6-72b6d1f22ecc", "contentFilters": ["/test/1/waku-relay/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"2e084794-634c-49b4-aec6-72b6d1f22ecc","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32697/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5744/filter/v2/messages/%2Ftest%2F1%2Fwaku-relay%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1735151162211810560,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id bc32b9af64b7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d109eebc4a3e
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container bc32b9af64b7. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.