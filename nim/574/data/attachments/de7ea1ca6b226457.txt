[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_repeated_filter_requestID with id: 2024-12-25_18-25-51__8eb84036-5726-4a71-b4bf-34f056c96aef
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-25_18-25-51__8eb84036-5726-4a71-b4bf-34f056c96aef__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-25_18-25-51__8eb84036-5726-4a71-b4bf-34f056c96aef__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-25_18-25-51__8eb84036-5726-4a71-b4bf-34f056c96aef__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:348 Create 3 nodes
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:349 Start 3 nodes with their corresponding config
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.56.85
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['47886', '47887', '47888', '47889', '47890']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 47886:47886 -p 47887:47887 -p 47888:47888 -p 47889:47889 -p 47890:47890 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47888 --rest-port=47886 --tcp-port=47887 --discv5-udp-port=47889 --rest-address=0.0.0.0 --nat=extip:172.18.56.85 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=63cef7ed84b6ae34fa72ba1bbcbceda5cbfdd614a3cfae65a70b7afe76a2feea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47890 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.56.85 waku 4cdbd0ac58c263e00b188075b07da2497396cc53d106cd31d2772b59e1497f1c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4cdbd0ac58c2. Setting up logs at ./log/docker/node1_2024-12-25_18-25-51__8eb84036-5726-4a71-b4bf-34f056c96aef__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 47886
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47886/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47886/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.56.85/tcp/47887/p2p/16Uiu2HAm9wETfkAwZQpcrp6sK9uGhaB2Rd8kSfXbZCTDsWJAUgL2","/ip4/172.18.56.85/tcp/47888/ws/p2p/16Uiu2HAm9wETfkAwZQpcrp6sK9uGhaB2Rd8kSfXbZCTDsWJAUgL2"],"enrUri":"enr:-L24QHPfi4njcDgfH3ULpqwrglZmbjfP1TozJ9JM_VhSEvZTYOCio4Z62hULvEfKQx0HIJ4ru1q6qKKehKktQrnpkUkCgmlkgnY0gmlwhKwSOFWKbXVsdGlhZGRyc5YACASsEjhVBrsPAAoErBI4VQa7EN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC15YvtivQxiGRyipIyNauGerwllyDzStGrVTl4231inODdGNwgrsPg3VkcIK7EYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.53.133
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['45120', '45121', '45122', '45123', '45124']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 45120:45120 -p 45121:45121 -p 45122:45122 -p 45123:45123 -p 45124:45124 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45122 --rest-port=45120 --tcp-port=45121 --discv5-udp-port=45123 --rest-address=0.0.0.0 --nat=extip:172.18.53.133 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ddc3ceed2faeb3ca7d387472ce9bffc1aeee11d5be123e0f60813e7afd3ef7ca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45124 --metrics-logging=true --relay=true --store=true --filter=true --discv5-bootstrap-node=enr:-L24QHPfi4njcDgfH3ULpqwrglZmbjfP1TozJ9JM_VhSEvZTYOCio4Z62hULvEfKQx0HIJ4ru1q6qKKehKktQrnpkUkCgmlkgnY0gmlwhKwSOFWKbXVsdGlhZGRyc5YACASsEjhVBrsPAAoErBI4VQa7EN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC15YvtivQxiGRyipIyNauGerwllyDzStGrVTl4231inODdGNwgrsPg3VkcIK7EYV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.53.133 waku a2300112a80383bc9eae471c6f0b06a58c2ab527e1a9b63e19115b09010ac6fe
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a2300112a803. Setting up logs at ./log/docker/node2_2024-12-25_18-25-51__8eb84036-5726-4a71-b4bf-34f056c96aef__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 45120
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45120/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45120/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.53.133/tcp/45121/p2p/16Uiu2HAmB5ayRgxS4puEEMKTvPnkTek7ZJoHMsz5m8jvevCLu8bG","/ip4/172.18.53.133/tcp/45122/ws/p2p/16Uiu2HAmB5ayRgxS4puEEMKTvPnkTek7ZJoHMsz5m8jvevCLu8bG"],"enrUri":"enr:-L24QKTpLgisXlhJOGZ7iP3N9H0x8QbMMGvel5z-KXt3GgmwC2oHxVPLyzk8no1HSisPo8esEEZV-aXY3Dq5govmidcCgmlkgnY0gmlwhKwSNYWKbXVsdGlhZGRyc5YACASsEjWFBrBBAAoErBI1hQawQt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC6JW2xojw-gBy0tXQoNnNyKlUdrfObjwcfZEXLdHs_q-DdGNwgrBBg3VkcIKwQ4V3YWt1Mgc"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.231.5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['23346', '23347', '23348', '23349', '23350']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 23346:23346 -p 23347:23347 -p 23348:23348 -p 23349:23349 -p 23350:23350 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23348 --rest-port=23346 --tcp-port=23347 --discv5-udp-port=23349 --rest-address=0.0.0.0 --nat=extip:172.18.231.5 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c97a5e2b6fcc8dffcbdfeedca26cc036da4c1b221ed8efdadd1ce00f769dfe82 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23350 --metrics-logging=true --relay=true --filternode=/ip4/172.18.53.133/tcp/45121/p2p/16Uiu2HAmB5ayRgxS4puEEMKTvPnkTek7ZJoHMsz5m8jvevCLu8bG --store=false --pubsub-topic=/waku/2/rs/3/1 --discv5-bootstrap-node=enr:-L24QKTpLgisXlhJOGZ7iP3N9H0x8QbMMGvel5z-KXt3GgmwC2oHxVPLyzk8no1HSisPo8esEEZV-aXY3Dq5govmidcCgmlkgnY0gmlwhKwSNYWKbXVsdGlhZGRyc5YACASsEjWFBrBBAAoErBI1hQawQt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC6JW2xojw-gBy0tXQoNnNyKlUdrfObjwcfZEXLdHs_q-DdGNwgrBBg3VkcIKwQ4V3YWt1Mgc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.231.5 waku 2102417cae547b03061d5b6527919d263618656329668f008f6e7bfd1de23431
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2102417cae54. Setting up logs at ./log/docker/node3_2024-12-25_18-25-51__8eb84036-5726-4a71-b4bf-34f056c96aef__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 23346
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23346/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23346/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.231.5/tcp/23347/p2p/16Uiu2HAmFB3dbC4f8yj6EGAkobfNoYV3M4EfwD2AMi5c5456QoFk","/ip4/172.18.231.5/tcp/23348/ws/p2p/16Uiu2HAmFB3dbC4f8yj6EGAkobfNoYV3M4EfwD2AMi5c5456QoFk"],"enrUri":"enr:-L24QINkHm8O9EzO4MJFPQftLRoyQIca0k3bBuCi2riy_feZdLMndxCmb7F6ceM0FzpXE5OlIcHh1rPhwQybw-dYP4gCgmlkgnY0gmlwhKwS5wWKbXVsdGlhZGRyc5YACASsEucFBlszAAoErBLnBQZbNN0DgnJzhQADAQABiXNlY3AyNTZrMaEDJWqCDQHK1DCWKFEznJNxRNL8plIz2iSG4PpVFgpZrPeDdGNwglszg3VkcIJbNYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:360 Subscribe nodes to relay  pubsub topics
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47886/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45120/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:364 Wait for all nodes auto connection
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47886/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.53.133/tcp/45121/p2p/16Uiu2HAmB5ayRgxS4puEEMKTvPnkTek7ZJoHMsz5m8jvevCLu8bG","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45120/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.56.85/tcp/47887/p2p/16Uiu2HAm9wETfkAwZQpcrp6sK9uGhaB2Rd8kSfXbZCTDsWJAUgL2","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:368 Node3 subscribe to filter for pubsubtopic  /waku/2/rs/3/1 2 times with same request id
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23346/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23346/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:377 Node1 publish message for topic /waku/2/rs/3/1
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47886/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 5 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23346/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:381 Response for node 3 is []
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23346/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:385 Response for node3 using same request ID is []
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4cdbd0ac58c2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a2300112a803
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2102417cae54
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4cdbd0ac58c2. Exiting log stream.
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a2300112a803. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.