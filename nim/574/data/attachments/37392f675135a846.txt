[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_with_extra_field with id: 2024-12-25_18-26-57__f4c5ce08-4ca3-453a-ad36-66cc07137b66
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-25_18-26-57__f4c5ce08-4ca3-453a-ad36-66cc07137b66__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:33 Network waku created
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.66.75
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['15939', '15940', '15941', '15942', '15943']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 15939:15939 -p 15940:15940 -p 15941:15941 -p 15942:15942 -p 15943:15943 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15941 --rest-port=15939 --tcp-port=15940 --discv5-udp-port=15942 --rest-address=0.0.0.0 --nat=extip:172.18.66.75 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6322bbdacd2687d9fbd9fd99ddef4c6c78f0add7e950d5d9b52cefef377ddef5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15943 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.66.75 waku 6c1339c4828feaf067d2899ffc66f633f417ff1cd9f259bcdc2a6c8809c9c059
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6c1339c4828f. Setting up logs at ./log/docker/node1_2024-12-25_18-26-57__f4c5ce08-4ca3-453a-ad36-66cc07137b66__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 15939
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15939/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15939/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.66.75/tcp/15940/p2p/16Uiu2HAmDUY5JYSjUPM92dmLNKX6vymxzjhE6Hzw9v7UXzixy1iH","/ip4/172.18.66.75/tcp/15941/ws/p2p/16Uiu2HAmDUY5JYSjUPM92dmLNKX6vymxzjhE6Hzw9v7UXzixy1iH"],"enrUri":"enr:-L24QAZIeHie5jlIKO2uEKaETjNFWDnHUZl7qI0RElMP0ZrPCF1oAJ7e2OUKoxDQBelN8VcJgt8CV8yoc2S3sUtmMQQCgmlkgnY0gmlwhKwSQkuKbXVsdGlhZGRyc5YACASsEkJLBj5EAAoErBJCSwY-Rd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDC4rPAcLXpV00n2XwE18DcdijeJbteTl27LlMfEtkWqDdGNwgj5Eg3VkcII-RoV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-25_18-26-57__f4c5ce08-4ca3-453a-ad36-66cc07137b66__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.113.154
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['64332', '64333', '64334', '64335', '64336']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 64332:64332 -p 64333:64333 -p 64334:64334 -p 64335:64335 -p 64336:64336 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64334 --rest-port=64332 --tcp-port=64333 --discv5-udp-port=64335 --rest-address=0.0.0.0 --nat=extip:172.18.113.154 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bb58b8ee98eec712e1fc6def095fe9b7e88d5a0e8c8d658024039e1be4aefd4b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64336 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QAZIeHie5jlIKO2uEKaETjNFWDnHUZl7qI0RElMP0ZrPCF1oAJ7e2OUKoxDQBelN8VcJgt8CV8yoc2S3sUtmMQQCgmlkgnY0gmlwhKwSQkuKbXVsdGlhZGRyc5YACASsEkJLBj5EAAoErBJCSwY-Rd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDC4rPAcLXpV00n2XwE18DcdijeJbteTl27LlMfEtkWqDdGNwgj5Eg3VkcII-RoV3YWt1MgU --filternode=/ip4/172.18.66.75/tcp/15940/p2p/16Uiu2HAmDUY5JYSjUPM92dmLNKX6vymxzjhE6Hzw9v7UXzixy1iH
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.113.154 waku d5b83702845f62cc2f3d95d9f6ea68f1e3e7a2e8f8d1e983836a5519cef8c7d0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d5b83702845f. Setting up logs at ./log/docker/node2_2024-12-25_18-26-57__f4c5ce08-4ca3-453a-ad36-66cc07137b66__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 64332
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64332/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64332/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.113.154/tcp/64333/p2p/16Uiu2HAm4dQgkorVGH8y7HviQ9AxyJ6GtURhHze8pUCkx6FGNBhQ","/ip4/172.18.113.154/tcp/64334/ws/p2p/16Uiu2HAm4dQgkorVGH8y7HviQ9AxyJ6GtURhHze8pUCkx6FGNBhQ"],"enrUri":"enr:-L24QMEOonsiYl2PQiZ9y2lZGZZ5CWW5cNITpwWT9A53GrEtMKxqZd1-oqKFasl0n7GMCg0WjE6jSgfWnN-WWU0go34CgmlkgnY0gmlwhKwScZqKbXVsdGlhZGRyc5YACASsEnGaBvtNAAoErBJxmgb7Tt0DgnJzhQADAQAAiXNlY3AyNTZrMaECiLrb_lrHybxgytmgwbO1aWM9UZdukJIf3hfpK1IkQkeDdGNwgvtNg3VkcIL7T4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64332/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.66.75/tcp/15940/p2p/16Uiu2HAmDUY5JYSjUPM92dmLNKX6vymxzjhE6Hzw9v7UXzixy1iH"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15939/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64332/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "01874809-29a9-47f2-8842-f616673f5b0d", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"01874809-29a9-47f2-8842-f616673f5b0d","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15939/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "extraField": "extraValue"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:15939/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 6c1339c4828f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d5b83702845f
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6c1339c4828f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.