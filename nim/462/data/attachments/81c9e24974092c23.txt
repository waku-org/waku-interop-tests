[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_version with id: 2024-11-25_06-22-45__c0df0b95-76f4-4f5a-9763-ac4afc59c6f8
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-25_06-22-45__c0df0b95-76f4-4f5a-9763-ac4afc59c6f8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.45.246
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['29261', '29262', '29263', '29264', '29265']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 29261:29261 -p 29262:29262 -p 29263:29263 -p 29264:29264 -p 29265:29265 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29263 --rest-port=29261 --tcp-port=29262 --discv5-udp-port=29264 --rest-address=0.0.0.0 --nat=extip:172.18.45.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8e5713b652344111ec8ff1c3e0bb26adceca6cd9cc4689af540c3cdfa4af52ae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29265 --metrics-logging=true --lightpush=true --relay=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 87cc58c08f5f. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.45.246 waku a0f0c21a7bb45c9c01a051a237e3ee432e14bd16e22024448c9bbb4ae4e48325
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a0f0c21a7bb4. Setting up logs at ./log/docker/receiving_node1_2024-11-25_06-22-45__c0df0b95-76f4-4f5a-9763-ac4afc59c6f8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 29261
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29261/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29261/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.246/tcp/29262/p2p/16Uiu2HAkwSoZDs7UjJiXiDVTLk5bwBjTKEgHgj2oqexAauXiCPan","/ip4/172.18.45.246/tcp/29263/ws/p2p/16Uiu2HAkwSoZDs7UjJiXiDVTLk5bwBjTKEgHgj2oqexAauXiCPan"],"enrUri":"enr:-L24QF0zl7lMW5WZUYn9Gz7TONSFNX3YvR03lXQE0cpLxaQxe7S70ocu4TFfJS9LwAtkYpNEvRiYh4vLfWK2XkY2wZcCgmlkgnY0gmlwhKwSLfaKbXVsdGlhZGRyc5YACASsEi32BnJOAAoErBIt9gZyT90DgnJzhQADAQAAiXNlY3AyNTZrMaECHgGFctWXgw0FaEHiIioyLpGtNyS50xZqMXiTVMQwO0eDdGNwgnJOg3VkcIJyUIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-25_06-22-45__c0df0b95-76f4-4f5a-9763-ac4afc59c6f8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.125.179
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['47362', '47363', '47364', '47365', '47366']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 47362:47362 -p 47363:47363 -p 47364:47364 -p 47365:47365 -p 47366:47366 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47364 --rest-port=47362 --tcp-port=47363 --discv5-udp-port=47365 --rest-address=0.0.0.0 --nat=extip:172.18.125.179 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7103cfc7a76cf71078d9cbfcef7feaddcfff587e1cef2f49a4f1ccb7eb90af86 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47366 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.125.179 waku b82d36e052625fe808c0120bd4dbc80008d1f4ea55b955c8809e9a911baaea7c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b82d36e05262. Setting up logs at ./log/docker/receiving_node2_2024-11-25_06-22-45__c0df0b95-76f4-4f5a-9763-ac4afc59c6f8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 47362
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47362/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47362/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.125.179/tcp/47363/p2p/16Uiu2HAm5hwZWoYUEo5FmYCE9npGpxKiQGzyCqrWvHz8tq5KdThD","/ip4/172.18.125.179/tcp/47364/ws/p2p/16Uiu2HAm5hwZWoYUEo5FmYCE9npGpxKiQGzyCqrWvHz8tq5KdThD"],"enrUri":"enr:-L24QEVm3bjIMVkwexS0kDozy3p6WtrE0Yf0mgxY0bDCYwiZfcnHSt_YulLz3szfWYE8NAwgwfA6-bc_ipFSlLFEESECgmlkgnY0gmlwhKwSfbOKbXVsdGlhZGRyc5YACASsEn2zBrkDAAoErBJ9swa5BN0DgnJzhQADAQAAiXNlY3AyNTZrMaECmL_HuBS1E5zmEJj8rhNLfM3PnkEojPYFd2aDypDnuoSDdGNwgrkDg3VkcIK5BYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47362/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.45.246/tcp/29262/p2p/16Uiu2HAkwSoZDs7UjJiXiDVTLk5bwBjTKEgHgj2oqexAauXiCPan"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-25_06-22-45__c0df0b95-76f4-4f5a-9763-ac4afc59c6f8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.223.167
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['13498', '13499', '13500', '13501', '13502']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 13498:13498 -p 13499:13499 -p 13500:13500 -p 13501:13501 -p 13502:13502 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13500 --rest-port=13498 --tcp-port=13499 --discv5-udp-port=13501 --rest-address=0.0.0.0 --nat=extip:172.18.223.167 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9e5c5c6ebda9279e760d76b189c8f0d784e26838c9f790fdca483bafeccda4b7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13502 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QF0zl7lMW5WZUYn9Gz7TONSFNX3YvR03lXQE0cpLxaQxe7S70ocu4TFfJS9LwAtkYpNEvRiYh4vLfWK2XkY2wZcCgmlkgnY0gmlwhKwSLfaKbXVsdGlhZGRyc5YACASsEi32BnJOAAoErBIt9gZyT90DgnJzhQADAQAAiXNlY3AyNTZrMaECHgGFctWXgw0FaEHiIioyLpGtNyS50xZqMXiTVMQwO0eDdGNwgnJOg3VkcIJyUIV3YWt1Mgk --lightpushnode=/ip4/172.18.45.246/tcp/29262/p2p/16Uiu2HAkwSoZDs7UjJiXiDVTLk5bwBjTKEgHgj2oqexAauXiCPan --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.223.167 waku 537ffaa05f659ec7e02f0c14d7069e94388c8edebb705c6d4e225920efce1ac3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 537ffaa05f65. Setting up logs at ./log/docker/lightpush_node1_2024-11-25_06-22-45__c0df0b95-76f4-4f5a-9763-ac4afc59c6f8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 13498
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13498/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13498/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.223.167/tcp/13499/p2p/16Uiu2HAm7U7TtLDwQbXNgJ6ukQiWq3BWMrEo2tk7ixCaRfmPJcNZ","/ip4/172.18.223.167/tcp/13500/ws/p2p/16Uiu2HAm7U7TtLDwQbXNgJ6ukQiWq3BWMrEo2tk7ixCaRfmPJcNZ"],"enrUri":"enr:-L24QDdMu8ykA-s-Fw-uK-xBUEskG6-5VlDNxw4iStCzRJfGIAiTJLczfXOiChsDckabKQJ8WkRK_nxXRl1OOM8dqlACgmlkgnY0gmlwhKwS36eKbXVsdGlhZGRyc5YACASsEt-nBjS7AAoErBLfpwY0vN0DgnJzhQADAQAAiXNlY3AyNTZrMaECsuw4ULERsphr30oxLykzHl30WJPiq5S7AiLZIWNBUNaDdGNwgjS7g3VkcII0vYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13498/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.45.246/tcp/29262/p2p/16Uiu2HAkwSoZDs7UjJiXiDVTLk5bwBjTKEgHgj2oqexAauXiCPan"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13498/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.125.179/tcp/47363/p2p/16Uiu2HAm5hwZWoYUEo5FmYCE9npGpxKiQGzyCqrWvHz8tq5KdThD"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29261/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47362/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13498/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1732515772989236480, "version": 10}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29261/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1732515772989236480,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47362/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1732515772989236480,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id a0f0c21a7bb4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id b82d36e05262
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a0f0c21a7bb4. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 537ffaa05f65
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b82d36e05262. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.