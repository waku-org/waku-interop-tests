[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush with id: 2024-11-25_06-15-35__439ff927-8252-4fbc-ad0d-cae83592fcd8
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-25_06-15-35__439ff927-8252-4fbc-ad0d-cae83592fcd8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.100.244
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['11024', '11025', '11026', '11027', '11028']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 11024:11024 -p 11025:11025 -p 11026:11026 -p 11027:11027 -p 11028:11028 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11026 --rest-port=11024 --tcp-port=11025 --discv5-udp-port=11027 --rest-address=0.0.0.0 --nat=extip:172.18.100.244 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=02f65bf51a16db04abd3d27f7dbfffbc4023fbad46d91c5f0941fd3da1beafbf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11028 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.100.244 waku b405df56a3cec7431852be811c94387504de9ac86ba2159bfc866eea902fa8db
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b405df56a3ce. Setting up logs at ./log/docker/node1_2024-11-25_06-15-35__439ff927-8252-4fbc-ad0d-cae83592fcd8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 11024
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11024/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11024/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.100.244/tcp/11025/p2p/16Uiu2HAkyKJVmnJuWTr6CCUHuHWAW25xSYaW2C2vAWuzuJUHZ91i","/ip4/172.18.100.244/tcp/11026/ws/p2p/16Uiu2HAkyKJVmnJuWTr6CCUHuHWAW25xSYaW2C2vAWuzuJUHZ91i"],"enrUri":"enr:-L24QKObMlX872X4qG5BmiqNjsfuvWmzOWiUvrHWVMnYoO8mZ0_9IlsRCXseCZT4dVLLuW_LUbbNRQA9jgbr94O1puMCgmlkgnY0gmlwhKwSZPSKbXVsdGlhZGRyc5YACASsEmT0BisRAAoErBJk9AYrEt0DgnJzhQADAQAAiXNlY3AyNTZrMaECOcz4yPfkDy75BdLt3aKmgC-zBqApQWWmgEwT42onIGmDdGNwgisRg3VkcIIrE4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-25_06-15-35__439ff927-8252-4fbc-ad0d-cae83592fcd8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.246.19
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['49395', '49396', '49397', '49398', '49399']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 49395:49395 -p 49396:49396 -p 49397:49397 -p 49398:49398 -p 49399:49399 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49397 --rest-port=49395 --tcp-port=49396 --discv5-udp-port=49398 --rest-address=0.0.0.0 --nat=extip:172.18.246.19 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bf09fbe6675acbd6c8ef9c3a1dd9ebc8cae9f3e5d5f9f1f9d1b8126eb70e01fb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49399 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QKObMlX872X4qG5BmiqNjsfuvWmzOWiUvrHWVMnYoO8mZ0_9IlsRCXseCZT4dVLLuW_LUbbNRQA9jgbr94O1puMCgmlkgnY0gmlwhKwSZPSKbXVsdGlhZGRyc5YACASsEmT0BisRAAoErBJk9AYrEt0DgnJzhQADAQAAiXNlY3AyNTZrMaECOcz4yPfkDy75BdLt3aKmgC-zBqApQWWmgEwT42onIGmDdGNwgisRg3VkcIIrE4V3YWt1Mgk
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.246.19 waku cb6739faf6bdc841699f7ded61b50258fc2883027c15323e4a56249900a4100b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID cb6739faf6bd. Setting up logs at ./log/docker/node1_2024-11-25_06-15-35__439ff927-8252-4fbc-ad0d-cae83592fcd8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 49395
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49395/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49395/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.246.19/tcp/49396/p2p/16Uiu2HAmMud8LMkuvHCePoxzdKTFAT5tNAZBis4VTq1Kkebd39mF","/ip4/172.18.246.19/tcp/49397/ws/p2p/16Uiu2HAmMud8LMkuvHCePoxzdKTFAT5tNAZBis4VTq1Kkebd39mF"],"enrUri":"enr:-L24QBgwnnMHfO5g-_kd6HwODK-UwGLEFJKOgf53N61YOhNYa29wklpZrabqzmXdCajiYZbwCIov-d6U8_XfUdSFVEMCgmlkgnY0gmlwhKwS9hOKbXVsdGlhZGRyc5YACASsEvYTBsD0AAoErBL2EwbA9d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDiXjlqqpDNNhlSuNAscNjFs4hym8Qk1sEMP5Ae-rrybaDdGNwgsD0g3VkcILA9oV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-25_06-15-35__439ff927-8252-4fbc-ad0d-cae83592fcd8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.244.121
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['43439', '43440', '43441', '43442', '43443']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 43439:43439 -p 43440:43440 -p 43441:43441 -p 43442:43442 -p 43443:43443 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43441 --rest-port=43439 --tcp-port=43440 --discv5-udp-port=43442 --rest-address=0.0.0.0 --nat=extip:172.18.244.121 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=35cc66c0e3dea07d921e1ac43ffef122c4a3dc7aeeee5fecb1bf353b545a4361 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43443 --metrics-logging=true --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QKObMlX872X4qG5BmiqNjsfuvWmzOWiUvrHWVMnYoO8mZ0_9IlsRCXseCZT4dVLLuW_LUbbNRQA9jgbr94O1puMCgmlkgnY0gmlwhKwSZPSKbXVsdGlhZGRyc5YACASsEmT0BisRAAoErBJk9AYrEt0DgnJzhQADAQAAiXNlY3AyNTZrMaECOcz4yPfkDy75BdLt3aKmgC-zBqApQWWmgEwT42onIGmDdGNwgisRg3VkcIIrE4V3YWt1Mgk --lightpushnode=/ip4/172.18.100.244/tcp/11025/p2p/16Uiu2HAkyKJVmnJuWTr6CCUHuHWAW25xSYaW2C2vAWuzuJUHZ91i
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.244.121 waku 4f3592309fcca4d3b5c386ff0207a3d85fa068d6d6bd2f155c30e32d1650e9f5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4f3592309fcc. Setting up logs at ./log/docker/node1_2024-11-25_06-15-35__439ff927-8252-4fbc-ad0d-cae83592fcd8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 43439
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43439/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43439/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.244.121/tcp/43440/p2p/16Uiu2HAmFx4VrWJwfhuWG479gVTG392EwwviDD3jBkCr3Yru873B","/ip4/172.18.244.121/tcp/43441/ws/p2p/16Uiu2HAmFx4VrWJwfhuWG479gVTG392EwwviDD3jBkCr3Yru873B"],"enrUri":"enr:-L24QAoAwDyHwfG8OlUV3UACI-BcH_AepvJ4sdG4MbMAZsySKR8uzlgrloH4d7DoFNVzK4dkpRyKNaYt9fGRHwhEoA4CgmlkgnY0gmlwhKwS9HmKbXVsdGlhZGRyc5YACASsEvR5BqmwAAoErBL0eQapsd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDMPKf0t57SOZMvOi7_JHDnHNcD-OZ1jaH0_WHQDaLkw6DdGNwgqmwg3VkcIKpsoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11024/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49395/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43439/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1732515345711671808}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11024/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1732515345711671808,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49395/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1732515345711671808,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id b405df56a3ce
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id cb6739faf6bd
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b405df56a3ce. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 4f3592309fcc
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container cb6739faf6bd. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.