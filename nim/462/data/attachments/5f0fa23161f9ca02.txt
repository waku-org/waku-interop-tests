[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_with_very_large_request_id with id: 2024-11-25_06-21-00__42f4f93c-7fa6-45d6-b513-f21e3d3bd2e0
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-25_06-21-00__42f4f93c-7fa6-45d6-b513-f21e3d3bd2e0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.173.227
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['30472', '30473', '30474', '30475', '30476']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 30472:30472 -p 30473:30473 -p 30474:30474 -p 30475:30475 -p 30476:30476 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30474 --rest-port=30472 --tcp-port=30473 --discv5-udp-port=30475 --rest-address=0.0.0.0 --nat=extip:172.18.173.227 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7fecaffb06cb97ffaa36cf92bccdc39a1b8d7c1ba4f04c93fbca4e9290df40dc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30476 --metrics-logging=true --relay=true --filter=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 791e285d8aef. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.173.227 waku e686355699e81237536910992bde4eb6267d487cceecac94d68ade0c1b9be935
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e686355699e8. Setting up logs at ./log/docker/node1_2024-11-25_06-21-00__42f4f93c-7fa6-45d6-b513-f21e3d3bd2e0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 30472
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30472/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30472/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.173.227/tcp/30473/p2p/16Uiu2HAmTxN1LFYYqhatm6XhsHMEZuPyyxUhs31nQ8rHSVYmtJCS","/ip4/172.18.173.227/tcp/30474/ws/p2p/16Uiu2HAmTxN1LFYYqhatm6XhsHMEZuPyyxUhs31nQ8rHSVYmtJCS"],"enrUri":"enr:-L24QMFmDin-05h7XtWbuhvoKTThd4G_htCYHODB_Zv6Sgk4Bo8Yy0WVk72YcXYsD2eA5GA1mkmFagWIBSKyIzk5dmgCgmlkgnY0gmlwhKwSreOKbXVsdGlhZGRyc5YACASsEq3jBncJAAoErBKt4wZ3Ct0DgnJzhQADAQAAiXNlY3AyNTZrMaED41KqAEHf9zM3wQsEQOqNwcG6sfUDYfBrS4aCYtrrmJODdGNwgncJg3VkcIJ3C4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-25_06-21-00__42f4f93c-7fa6-45d6-b513-f21e3d3bd2e0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.213.109
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['52278', '52279', '52280', '52281', '52282']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 52278:52278 -p 52279:52279 -p 52280:52280 -p 52281:52281 -p 52282:52282 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52280 --rest-port=52278 --tcp-port=52279 --discv5-udp-port=52281 --rest-address=0.0.0.0 --nat=extip:172.18.213.109 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bd1bbeca8bbef37dc48703f0ce707687d5481f2d63bdf07e8dd7fe2ac624f2c7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52282 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QMFmDin-05h7XtWbuhvoKTThd4G_htCYHODB_Zv6Sgk4Bo8Yy0WVk72YcXYsD2eA5GA1mkmFagWIBSKyIzk5dmgCgmlkgnY0gmlwhKwSreOKbXVsdGlhZGRyc5YACASsEq3jBncJAAoErBKt4wZ3Ct0DgnJzhQADAQAAiXNlY3AyNTZrMaED41KqAEHf9zM3wQsEQOqNwcG6sfUDYfBrS4aCYtrrmJODdGNwgncJg3VkcIJ3C4V3YWt1MgU --filternode=/ip4/172.18.173.227/tcp/30473/p2p/16Uiu2HAmTxN1LFYYqhatm6XhsHMEZuPyyxUhs31nQ8rHSVYmtJCS
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.213.109 waku e9403fb3fc4bf37228a271852592ec9f9bf86d98604946abdf63da00b3a12411
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e9403fb3fc4b. Setting up logs at ./log/docker/node2_2024-11-25_06-21-00__42f4f93c-7fa6-45d6-b513-f21e3d3bd2e0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 52278
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52278/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52278/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.213.109/tcp/52279/p2p/16Uiu2HAkzXEszCLHVXP5iQzm9o6dRJyZrJgjngrm5ciCAgMvV7Je","/ip4/172.18.213.109/tcp/52280/ws/p2p/16Uiu2HAkzXEszCLHVXP5iQzm9o6dRJyZrJgjngrm5ciCAgMvV7Je"],"enrUri":"enr:-L24QLd8p0_CA7QJu0fTmA8-j1EDO_UB-kBHSDWy0b7iU1kTeMzhq4q7wkKdLefpjQew_S9MBkXmM8PA9Ww-yKkoBL4CgmlkgnY0gmlwhKwS1W2KbXVsdGlhZGRyc5YACASsEtVtBsw3AAoErBLVbQbMON0DgnJzhQADAQAAiXNlY3AyNTZrMaECS7eJ6BXMAH5OKkvFS-WOIWk6G47E3FwETNwiNJVwp0eDdGNwgsw3g3VkcILMOYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52278/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.173.227/tcp/30473/p2p/16Uiu2HAmTxN1LFYYqhatm6XhsHMEZuPyyxUhs31nQ8rHSVYmtJCS"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30472/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52278/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "7482d884-0462-45e3-9008-1c2c83a0b28c", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"7482d884-0462-45e3-9008-1c2c83a0b28c","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30472/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52278/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1732515665787733248,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:52278/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345678901234567890123456789012345678901234567890", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"12345678901234567890123456789012345678901234567890","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30472/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52278/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:52278/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto. Response content: b'Not subscribed to topic: /test/1/waku-filter/proto'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id e686355699e8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id e9403fb3fc4b
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e686355699e8. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.