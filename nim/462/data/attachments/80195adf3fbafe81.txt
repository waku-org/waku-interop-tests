[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_stored_when_ephemeral_false with id: 2024-11-25_06-16-45__526218d5-264f-4cd3-8515-23b0b32c73f3
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-25_06-16-45__526218d5-264f-4cd3-8515-23b0b32c73f3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-25_06-16-45__526218d5-264f-4cd3-8515-23b0b32c73f3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-25_06-16-45__526218d5-264f-4cd3-8515-23b0b32c73f3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:407 Start 3 nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.111.41
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['7398', '7399', '7400', '7401', '7402']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 7398:7398 -p 7399:7399 -p 7400:7400 -p 7401:7401 -p 7402:7402 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7400 --rest-port=7398 --tcp-port=7399 --discv5-udp-port=7401 --rest-address=0.0.0.0 --nat=extip:172.18.111.41 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cf0eed1e38c97cbadfc6fb4b9b96d37fdd23efa0af1b18fcc0b02f4ee3ca2f8c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7402 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.111.41 waku a07bb29f49f84d33a85272754c3656af68f94ce5528e076a4aa311357944bb3e
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1ac95b716d83. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a07bb29f49f8. Setting up logs at ./log/docker/node1_2024-11-25_06-16-45__526218d5-264f-4cd3-8515-23b0b32c73f3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 7398
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7398/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7398/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.111.41/tcp/7399/p2p/16Uiu2HAmAYBUJNZBXC2J1ETniqByjFH547Z6otdCUSXjHCJsxc7n","/ip4/172.18.111.41/tcp/7400/ws/p2p/16Uiu2HAmAYBUJNZBXC2J1ETniqByjFH547Z6otdCUSXjHCJsxc7n"],"enrUri":"enr:-L24QPDByz3qt2Yf-t8Be3BJPtYXtTxT7MPcEW_wGyDdHKvsU61L4pU29dUA7H4qEiNzK_nhfamnP7aEHI0q8lmG62cCgmlkgnY0gmlwhKwSbymKbXVsdGlhZGRyc5YACASsEm8pBhznAAoErBJvKQYc6N0DgnJzhQADAQAAiXNlY3AyNTZrMaEC4IoiiD4csha8Fu9CQ3NutlHgsMuFrEA5zdCEAjHIF42DdGNwghzng3VkcIIc6YV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.166.224
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['23496', '23497', '23498', '23499', '23500']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 23496:23496 -p 23497:23497 -p 23498:23498 -p 23499:23499 -p 23500:23500 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23498 --rest-port=23496 --tcp-port=23497 --discv5-udp-port=23499 --rest-address=0.0.0.0 --nat=extip:172.18.166.224 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=acd3ce4cd6fef02ebcbafcecccce1c2afe717aee709cce49a18b825fa15c93cd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23500 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QPDByz3qt2Yf-t8Be3BJPtYXtTxT7MPcEW_wGyDdHKvsU61L4pU29dUA7H4qEiNzK_nhfamnP7aEHI0q8lmG62cCgmlkgnY0gmlwhKwSbymKbXVsdGlhZGRyc5YACASsEm8pBhznAAoErBJvKQYc6N0DgnJzhQADAQAAiXNlY3AyNTZrMaEC4IoiiD4csha8Fu9CQ3NutlHgsMuFrEA5zdCEAjHIF42DdGNwghzng3VkcIIc6YV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.166.224 waku a9552f731fc83f6042747a276b7f7e44f0f8df8b5bf412bf5abe4a5591e5cb70
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a9552f731fc8. Setting up logs at ./log/docker/node2_2024-11-25_06-16-45__526218d5-264f-4cd3-8515-23b0b32c73f3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 23496
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23496/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23496/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.166.224/tcp/23497/p2p/16Uiu2HAmBrDFeAeShiULtLZbrjoChnjigyQgxuSiZexRZRt3oRCZ","/ip4/172.18.166.224/tcp/23498/ws/p2p/16Uiu2HAmBrDFeAeShiULtLZbrjoChnjigyQgxuSiZexRZRt3oRCZ"],"enrUri":"enr:-L24QPx6l4cLO4bQ2gAQCgmNnC3OKi9U1_z7QwNcxS5GBTqbEEsq8NGKjOJgByoX9r5p8AegvA0U9p9OoUO5Wf69cU8CgmlkgnY0gmlwhKwSpuCKbXVsdGlhZGRyc5YACASsEqbgBlvJAAoErBKm4AZbyt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC9ARKf4HOD1RwC-nw6XyVD49Kez-bedTXfRpbe3M-0i6DdGNwglvJg3VkcIJby4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.68.98
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['41825', '41826', '41827', '41828', '41829']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 41825:41825 -p 41826:41826 -p 41827:41827 -p 41828:41828 -p 41829:41829 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41827 --rest-port=41825 --tcp-port=41826 --discv5-udp-port=41828 --rest-address=0.0.0.0 --nat=extip:172.18.68.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=32b17cc7f4aadccaf422bfdd2aaab62dfa7d5aaebb1ce3ec535e45a24cae980f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41829 --metrics-logging=true --relay=false --storenode=/ip4/172.18.166.224/tcp/23497/p2p/16Uiu2HAmBrDFeAeShiULtLZbrjoChnjigyQgxuSiZexRZRt3oRCZ --discv5-bootstrap-node=enr:-L24QPx6l4cLO4bQ2gAQCgmNnC3OKi9U1_z7QwNcxS5GBTqbEEsq8NGKjOJgByoX9r5p8AegvA0U9p9OoUO5Wf69cU8CgmlkgnY0gmlwhKwSpuCKbXVsdGlhZGRyc5YACASsEqbgBlvJAAoErBKm4AZbyt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC9ARKf4HOD1RwC-nw6XyVD49Kez-bedTXfRpbe3M-0i6DdGNwglvJg3VkcIJby4V3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.68.98 waku 37cf46a1a03ec525b5a95e2b7169207325859dcba62490d28550514113a07815
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 37cf46a1a03e. Setting up logs at ./log/docker/node3_2024-11-25_06-16-45__526218d5-264f-4cd3-8515-23b0b32c73f3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 41825
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41825/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41825/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.68.98/tcp/41826/p2p/16Uiu2HAm3Kd8VTYVxgtqE1H3uMKED6x6fKrkoN61SbfT5x8qiiso","/ip4/172.18.68.98/tcp/41827/ws/p2p/16Uiu2HAm3Kd8VTYVxgtqE1H3uMKED6x6fKrkoN61SbfT5x8qiiso"],"enrUri":"enr:-L24QH04byIevQk_ds88CngEw8etM43FsrzKxH1NqJYq185eCLtdD2-juwQ2a8AuikIp7Ii8w7tg1YrS9565gaXsFHICgmlkgnY0gmlwhKwSRGKKbXVsdGlhZGRyc5YACASsEkRiBqNiAAoErBJEYgajY90DgnJzhQADAQAAiXNlY3AyNTZrMaECdVDJuxhndXDUU2I7GnAYu2OWX3a4IYFrC6cGwEFUiM6DdGNwgqNig3VkcIKjZIV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:412 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7398/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23496/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7398/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.166.224/tcp/23497/p2p/16Uiu2HAmBrDFeAeShiULtLZbrjoChnjigyQgxuSiZexRZRt3oRCZ","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23496/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.111.41/tcp/7399/p2p/16Uiu2HAmAYBUJNZBXC2J1ETniqByjFH547Z6otdCUSXjHCJsxc7n","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:417 Node1 publish message with ephemeral = false
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7398/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:421 Check if message is stored 
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41825/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"e735c7acbea05a02076c","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"QWbcMC0AmqfERbLbLr9/L7Q/mG0YklWTf3i34yM5fYY="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id a07bb29f49f8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id a9552f731fc8
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a07bb29f49f8. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 37cf46a1a03e
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a9552f731fc8. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.