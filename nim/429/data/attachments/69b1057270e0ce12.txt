[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_repeated_filter_requestID with id: 2024-11-06_23-02-41__cc6825f2-a34b-4c63-9388-30dc7ca1a4d4
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-06_23-02-41__cc6825f2-a34b-4c63-9388-30dc7ca1a4d4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-06_23-02-41__cc6825f2-a34b-4c63-9388-30dc7ca1a4d4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-06_23-02-41__cc6825f2-a34b-4c63-9388-30dc7ca1a4d4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:221 Create 3 nodes
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:222 Start 3 nodes with their corresponding config
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.124.74
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['16516', '16517', '16518', '16519', '16520']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 16516:16516 -p 16517:16517 -p 16518:16518 -p 16519:16519 -p 16520:16520 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16518 --rest-port=16516 --tcp-port=16517 --discv5-udp-port=16519 --rest-address=0.0.0.0 --nat=extip:172.18.124.74 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f98cfbbff1c6fb40394230a659adacdbacba8b9fad68a64b28cbb1cc7ef8fdd5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16520 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.124.74 waku 417ca4c596efd5005419da214da640175277f12ed3df6fa10a8483fd2d482547
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container bf3c4cfcbe03. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 417ca4c596ef. Setting up logs at ./log/docker/node1_2024-11-06_23-02-41__cc6825f2-a34b-4c63-9388-30dc7ca1a4d4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 16516
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16516/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16516/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.124.74/tcp/16517/p2p/16Uiu2HAm7PiP2uNiSzZsu4Fb6s79xaGNHbESEGkQYqZkuoJLZvaL","/ip4/172.18.124.74/tcp/16518/ws/p2p/16Uiu2HAm7PiP2uNiSzZsu4Fb6s79xaGNHbESEGkQYqZkuoJLZvaL"],"enrUri":"enr:-L24QE2nry4NW02Fpc5j9PpHgs5zlFE-2TfmGk2S8yp3hi0BCp-zRXuTWTwfAesHa9BFYExY5f4gpv1CDEUVTRfuS7kCgmlkgnY0gmlwhKwSfEqKbXVsdGlhZGRyc5YACASsEnxKBkCFAAoErBJ8SgZAht0DgnJzhQADAQAAiXNlY3AyNTZrMaECscvLxJo_nmEpg5lZm1yrH7J0TA8Yi5c6vvzrP-_xYVGDdGNwgkCFg3VkcIJAh4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.152.11
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['39899', '39900', '39901', '39902', '39903']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 39899:39899 -p 39900:39900 -p 39901:39901 -p 39902:39902 -p 39903:39903 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39901 --rest-port=39899 --tcp-port=39900 --discv5-udp-port=39902 --rest-address=0.0.0.0 --nat=extip:172.18.152.11 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=082023effa789dbfec20abcffab64bb97abbea6e7abffd0ebb317edd3748c63b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39903 --metrics-logging=true --relay=true --store=true --filter=true --discv5-bootstrap-node=enr:-L24QE2nry4NW02Fpc5j9PpHgs5zlFE-2TfmGk2S8yp3hi0BCp-zRXuTWTwfAesHa9BFYExY5f4gpv1CDEUVTRfuS7kCgmlkgnY0gmlwhKwSfEqKbXVsdGlhZGRyc5YACASsEnxKBkCFAAoErBJ8SgZAht0DgnJzhQADAQAAiXNlY3AyNTZrMaECscvLxJo_nmEpg5lZm1yrH7J0TA8Yi5c6vvzrP-_xYVGDdGNwgkCFg3VkcIJAh4V3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.152.11 waku 066209636a7c10eaa34e0865108b5ae2258d87b8eadfafd10f96fbe00596e1e0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 066209636a7c. Setting up logs at ./log/docker/node2_2024-11-06_23-02-41__cc6825f2-a34b-4c63-9388-30dc7ca1a4d4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 39899
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39899/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39899/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.152.11/tcp/39900/p2p/16Uiu2HAm7pA9sjye8jroTqtfjbEWXdWe7WZqDVCXJbcYaxPtmY4g","/ip4/172.18.152.11/tcp/39901/ws/p2p/16Uiu2HAm7pA9sjye8jroTqtfjbEWXdWe7WZqDVCXJbcYaxPtmY4g"],"enrUri":"enr:-L24QJpeYksPnJTlOhgkeyxoUD6IDWNggbYTTV5tGx4qHSu4K5QcFe_KzYivHwuzeguxmtV8dO59O1BudNqdZb_gCucCgmlkgnY0gmlwhKwSmAuKbXVsdGlhZGRyc5YACASsEpgLBpvcAAoErBKYCwab3d0DgnJzhQADAQAAiXNlY3AyNTZrMaECuA7gjgXK5NzdRbppDvfhH-IlwoNcfwh7Z7HA_tAoPEGDdGNwgpvcg3VkcIKb3oV3YWt1Mgc"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.191.246
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['33045', '33046', '33047', '33048', '33049']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 33045:33045 -p 33046:33046 -p 33047:33047 -p 33048:33048 -p 33049:33049 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33047 --rest-port=33045 --tcp-port=33046 --discv5-udp-port=33048 --rest-address=0.0.0.0 --nat=extip:172.18.191.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f1736fffb0fcda95dea2babe3ceadccbfbacebfedccb1da28fb0637ecf8ba7f2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33049 --metrics-logging=true --relay=true --filternode=/ip4/172.18.152.11/tcp/39900/p2p/16Uiu2HAm7pA9sjye8jroTqtfjbEWXdWe7WZqDVCXJbcYaxPtmY4g --store=false --discv5-bootstrap-node=enr:-L24QJpeYksPnJTlOhgkeyxoUD6IDWNggbYTTV5tGx4qHSu4K5QcFe_KzYivHwuzeguxmtV8dO59O1BudNqdZb_gCucCgmlkgnY0gmlwhKwSmAuKbXVsdGlhZGRyc5YACASsEpgLBpvcAAoErBKYCwab3d0DgnJzhQADAQAAiXNlY3AyNTZrMaECuA7gjgXK5NzdRbppDvfhH-IlwoNcfwh7Z7HA_tAoPEGDdGNwgpvcg3VkcIKb3oV3YWt1Mgc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.191.246 waku 20ee8722e6509efeeed51ff8a71d081b85b239418f5a7897da0a9810701d4d8e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 20ee8722e650. Setting up logs at ./log/docker/node3_2024-11-06_23-02-41__cc6825f2-a34b-4c63-9388-30dc7ca1a4d4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 33045
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33045/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33045/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.191.246/tcp/33046/p2p/16Uiu2HAm6ZUGDTeXMdAwaZyLqFCMcxUuZFWL3xRvQ5UXJMNP5up4","/ip4/172.18.191.246/tcp/33047/ws/p2p/16Uiu2HAm6ZUGDTeXMdAwaZyLqFCMcxUuZFWL3xRvQ5UXJMNP5up4"],"enrUri":"enr:-L24QEz2GBrXtkUoxX3ZpwqRe2ss7RT5GShK7RPbmcdafZeVGpM_WMMraE7D66PpR6JozTI8hSkaDqrdH_e9e_ZD8eYCgmlkgnY0gmlwhKwSv_aKbXVsdGlhZGRyc5YACASsEr_2BoEWAAoErBK_9gaBF90DgnJzhQADAQAAiXNlY3AyNTZrMaECpW_0UV5Ln0CCsYvIAYq8_EdWYph_OWmGmb1FIV4BJ5mDdGNwgoEWg3VkcIKBGIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:227 Subscribe nodes to relay  pubsub topics
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16516/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39899/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:231 Wait for all nodes auto connection
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16516/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.152.11/tcp/39900/p2p/16Uiu2HAm7pA9sjye8jroTqtfjbEWXdWe7WZqDVCXJbcYaxPtmY4g","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39899/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.124.74/tcp/16517/p2p/16Uiu2HAm7PiP2uNiSzZsu4Fb6s79xaGNHbESEGkQYqZkuoJLZvaL","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:235 Node3 subscribe to filter for pubsubtopic  /waku/2/rs/3/1 2 times with same request id
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33045/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33045/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:244 Node1 publish message for topic /waku/2/rs/3/1
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16516/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 5 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33045/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:248 Response for node 3 is []
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33045/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:252 Response for node3 using same request ID is []
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 417ca4c596ef
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 066209636a7c
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 417ca4c596ef. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 20ee8722e650
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 066209636a7c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.