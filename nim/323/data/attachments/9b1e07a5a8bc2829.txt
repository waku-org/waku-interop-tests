[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_ping_on_unsubscribed_peer with id: 2024-08-19_04-13-29__6d360537-2afd-4a2b-93e8-9bf8acc34482
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-19_04-13-29__6d360537-2afd-4a2b-93e8-9bf8acc34482__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.72.72
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['7316', '7317', '7318', '7319', '7320']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:429 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:161 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:163 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 7316:7316 -p 7317:7317 -p 7318:7318 -p 7319:7319 -p 7320:7320 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7318 --rest-port=7316 --tcp-port=7317 --discv5-udp-port=7319 --rest-address=0.0.0.0 --nat=extip:172.18.72.72 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7320 --metrics-logging=true --relay=true --filter=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.72.72 waku 38721d2ba8d996737e539ccda57898fc897c4848bf2ecaad21c402ea2dd21f4f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 38721d2ba8d9. Setting up logs at ./log/docker/node1_2024-08-19_04-13-29__6d360537-2afd-4a2b-93e8-9bf8acc34482__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:175 Started container from image wakuorg/nwaku:latest. REST: 7316
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7316/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:275 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7316/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.72.72/tcp/7317/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.72.72/tcp/7318/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QLdvGcwmNnr3WCFbj0STkjEcDQhTcIhm0g3YR-qCml9XB1Fd51XSxYWMrBoSnujfeDZFcVW9aqeRDqnwQpBxepIBgmlkgnY0gmlwhKwSSEiKbXVsdGlhZGRyc4wACgSsEkhIBhyW3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCHJWDdWRwghyXhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:280 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-19_04-13-29__6d360537-2afd-4a2b-93e8-9bf8acc34482__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.117.223
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['4762', '4763', '4764', '4765', '4766']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:429 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:161 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:163 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 4762:4762 -p 4763:4763 -p 4764:4764 -p 4765:4765 -p 4766:4766 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4764 --rest-port=4762 --tcp-port=4763 --discv5-udp-port=4765 --rest-address=0.0.0.0 --nat=extip:172.18.117.223 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4766 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QLdvGcwmNnr3WCFbj0STkjEcDQhTcIhm0g3YR-qCml9XB1Fd51XSxYWMrBoSnujfeDZFcVW9aqeRDqnwQpBxepIBgmlkgnY0gmlwhKwSSEiKbXVsdGlhZGRyc4wACgSsEkhIBhyW3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCHJWDdWRwghyXhXdha3UyBQ --filternode=/ip4/172.18.72.72/tcp/7317/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.117.223 waku b4b48cb6ade311f03bc042c9c6c1a511625bfb6fdb4aab9d950940e899292683
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID b4b48cb6ade3. Setting up logs at ./log/docker/node2_2024-08-19_04-13-29__6d360537-2afd-4a2b-93e8-9bf8acc34482__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:175 Started container from image wakuorg/nwaku:latest. REST: 4762
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4762/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:275 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4762/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.117.223/tcp/4763/p2p/16Uiu2HAmUCozXoNrfy85syyi5qTHzzU9v1ij4Yw6vnAyj8UZiQYr","/ip4/172.18.117.223/tcp/4764/ws/p2p/16Uiu2HAmUCozXoNrfy85syyi5qTHzzU9v1ij4Yw6vnAyj8UZiQYr"],"enrUri":"enr:-LO4QFhJwCcJ9R2jGf8mKFnG1US10CsfdE9eDxkvEtyLhXS7KZ-kWjj7zK3E9nN4W7JCleanzq39pCAJFrTaRvaLIt0BgmlkgnY0gmlwhKwSdd-KbXVsdGlhZGRyc4wACgSsEnXfBhKc3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPnBi2WQ4iF378FK2y7i367jwc4dewvfmtr_Z3I0VmCe4N0Y3CCEpuDdWRwghKdhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:280 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4762/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.72.72/tcp/7317/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7316/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4762/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "fcd5e570-e18b-4a6b-b986-8bab008312e2", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"fcd5e570-e18b-4a6b-b986-8bab008312e2","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4762/filter/v2/subscriptions/0ee56b03-14fa-48b3-a2ab-144ccd596b1e" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"0ee56b03-14fa-48b3-a2ab-144ccd596b1e","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:4762/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"12345","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4762/filter/v2/subscriptions/4616ee65-7a91-4266-91e2-94cbc8a9ad07" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:4762/filter/v2/subscriptions/4616ee65-7a91-4266-91e2-94cbc8a9ad07. Response content: b'{"requestId":"4616ee65-7a91-4266-91e2-94cbc8a9ad07","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:219 Stopping container with id 38721d2ba8d9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:219 Stopping container with id b4b48cb6ade3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Container stopped.