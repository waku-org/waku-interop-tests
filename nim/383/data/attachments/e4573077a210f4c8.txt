[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_with_large_meta with id: 2024-10-06_04-19-08__86d36d8a-e711-4d71-b0d0-b63b3a52fc28
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-06_04-19-08__86d36d8a-e711-4d71-b0d0-b63b3a52fc28__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.148.5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['35857', '35858', '35859', '35860', '35861']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 35857:35857 -p 35858:35858 -p 35859:35859 -p 35860:35860 -p 35861:35861 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35859 --rest-port=35857 --tcp-port=35858 --discv5-udp-port=35860 --rest-address=0.0.0.0 --nat=extip:172.18.148.5 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=de8f5aab66d7916ace0ec36cd1b9bf11a7e0fca261ad66ad45a10f3119acfffa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35861 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.148.5 waku 37e09ca17da8d0e36859446bd2ca7778496c35c65d711d17c26a9b4bad28a1c8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 37e09ca17da8. Setting up logs at ./log/docker/receiving_node1_2024-10-06_04-19-08__86d36d8a-e711-4d71-b0d0-b63b3a52fc28__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 35857
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35857/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35857/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.148.5/tcp/35858/p2p/16Uiu2HAmExoDUf1k4yu7o5i7Co2EZzEXiTzbUihmspny194Znz4B","/ip4/172.18.148.5/tcp/35859/ws/p2p/16Uiu2HAmExoDUf1k4yu7o5i7Co2EZzEXiTzbUihmspny194Znz4B"],"enrUri":"enr:-LO4QMNomDUNwMceSEgo1iOEy2T6KRW2vLudabmeD6PMzv77QS0buUbPe837O5RJq0mEXOCkglR0mx9femV7jfSXKP4BgmlkgnY0gmlwhKwSlAWKbXVsdGlhZGRyc4wACgSsEpQFBowT3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMiRz0GUG6DdD54xfNmA4HFZi2whWQ9SVJAMLJj0V5xpIN0Y3CCjBKDdWRwgowUhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-06_04-19-08__86d36d8a-e711-4d71-b0d0-b63b3a52fc28__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.148.96
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['27507', '27508', '27509', '27510', '27511']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 27507:27507 -p 27508:27508 -p 27509:27509 -p 27510:27510 -p 27511:27511 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27509 --rest-port=27507 --tcp-port=27508 --discv5-udp-port=27510 --rest-address=0.0.0.0 --nat=extip:172.18.148.96 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6ceac1e7c3d3fd3b8f5bad31cf3e35dbbedcab41dcdedbe3dbb0bc597e9c1fe0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27511 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.148.96 waku fc3c1844adfeab18fd4db4699495757df342bcb5384a92c321a8d018984bc100
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID fc3c1844adfe. Setting up logs at ./log/docker/receiving_node2_2024-10-06_04-19-08__86d36d8a-e711-4d71-b0d0-b63b3a52fc28__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 27507
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27507/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27507/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.148.96/tcp/27508/p2p/16Uiu2HAmRujMJbuwGQtsHceGrn7DHp5bwCEwXEr392jRj5BsCDBd","/ip4/172.18.148.96/tcp/27509/ws/p2p/16Uiu2HAmRujMJbuwGQtsHceGrn7DHp5bwCEwXEr392jRj5BsCDBd"],"enrUri":"enr:-LO4QEZyaNH_egQTeWdRcv0kvLm1KgIByAMHxquUZl3-FZhxMjf3CmTkhaW0_dXZWZECX_DaGzKsr5wdJNy6t-s2GuIBgmlkgnY0gmlwhKwSlGCKbXVsdGlhZGRyc4wACgSsEpRgBmt13QOCcnOFAAMBAACJc2VjcDI1NmsxoQPE7q6RYMjcylD2olOmUJoyY2GDpmeNHMdKaMzBxUXXMIN0Y3CCa3SDdWRwgmt2hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27507/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.148.5/tcp/35858/p2p/16Uiu2HAmExoDUf1k4yu7o5i7Co2EZzEXiTzbUihmspny194Znz4B"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-06_04-19-08__86d36d8a-e711-4d71-b0d0-b63b3a52fc28__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.181.194
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['54248', '54249', '54250', '54251', '54252']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 54248:54248 -p 54249:54249 -p 54250:54250 -p 54251:54251 -p 54252:54252 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54250 --rest-port=54248 --tcp-port=54249 --discv5-udp-port=54251 --rest-address=0.0.0.0 --nat=extip:172.18.181.194 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dd872cbbab0affb500e39d7f6dcb6d1cf8f896daa0d17b057eabc77e93edd0fb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54252 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QMNomDUNwMceSEgo1iOEy2T6KRW2vLudabmeD6PMzv77QS0buUbPe837O5RJq0mEXOCkglR0mx9femV7jfSXKP4BgmlkgnY0gmlwhKwSlAWKbXVsdGlhZGRyc4wACgSsEpQFBowT3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMiRz0GUG6DdD54xfNmA4HFZi2whWQ9SVJAMLJj0V5xpIN0Y3CCjBKDdWRwgowUhXdha3UyCQ --lightpushnode=/ip4/172.18.148.5/tcp/35858/p2p/16Uiu2HAmExoDUf1k4yu7o5i7Co2EZzEXiTzbUihmspny194Znz4B --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.181.194 waku 737496a613aa9f728eaa4af00ea2142b47922cb06cc940a92c947dcc7b777cbd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 737496a613aa. Setting up logs at ./log/docker/lightpush_node1_2024-10-06_04-19-08__86d36d8a-e711-4d71-b0d0-b63b3a52fc28__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 54248
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54248/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54248/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.181.194/tcp/54249/p2p/16Uiu2HAkzXhNGp2dLrni6TxVJ9i1S1gCEmrd5Jj2cxxki4M5iSAo","/ip4/172.18.181.194/tcp/54250/ws/p2p/16Uiu2HAkzXhNGp2dLrni6TxVJ9i1S1gCEmrd5Jj2cxxki4M5iSAo"],"enrUri":"enr:-LO4QJj1Qwkzjcj5N_zSG5mZWoo5DtYVA8IinFqGmksSa4mBbx1J-HwNosb6mIyOR2tH99fDoQLfwNEt4ucg4yHFyIUBgmlkgnY0gmlwhKwStcKKbXVsdGlhZGRyc4wACgSsErXCBtPq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJL1X0J8bT763cHyBffjmH563DngJhb_ORbjr7MYaeGJIN0Y3CC0-mDdWRwgtPrhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54248/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.148.5/tcp/35858/p2p/16Uiu2HAmExoDUf1k4yu7o5i7Co2EZzEXiTzbUihmspny194Znz4B"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54248/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.148.96/tcp/27508/p2p/16Uiu2HAmRujMJbuwGQtsHceGrn7DHp5bwCEwXEr392jRj5BsCDBd"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35857/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27507/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54248/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728188352596889088, "meta": "YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYQ=="}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:54248/lightpush/v1/message. Response content: b'Failed to request a message push: decode_rpc_failure: (kind: InvalidLengthField, field: "meta")'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 37e09ca17da8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id fc3c1844adfe
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 737496a613aa
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.