[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2024-10-06_04-19-11__fed1eae8-d245-4373-acb5-de3dd26f89fc
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-06_04-19-11__fed1eae8-d245-4373-acb5-de3dd26f89fc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.246.128
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['25503', '25504', '25505', '25506', '25507']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 25503:25503 -p 25504:25504 -p 25505:25505 -p 25506:25506 -p 25507:25507 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25505 --rest-port=25503 --tcp-port=25504 --discv5-udp-port=25506 --rest-address=0.0.0.0 --nat=extip:172.18.246.128 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ea93fc68bc7643ffde8acd8ea72aaf7cd34c5d85ad5ea3e3e3cf9e9d32dacff5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25507 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.246.128 waku 7a44228ff999eea3c014f045ae8c0f8bc58354e43c784f571af46cc1eed00c69
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7a44228ff999. Setting up logs at ./log/docker/receiving_node1_2024-10-06_04-19-11__fed1eae8-d245-4373-acb5-de3dd26f89fc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 25503
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25503/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25503/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.246.128/tcp/25504/p2p/16Uiu2HAm3m1VS6yTe9q6Kw4RCbfSHEejFvLp5P5F5cCkJukFP2iJ","/ip4/172.18.246.128/tcp/25505/ws/p2p/16Uiu2HAm3m1VS6yTe9q6Kw4RCbfSHEejFvLp5P5F5cCkJukFP2iJ"],"enrUri":"enr:-LO4QM4lzEdiYlUW5_Gad7Snz8f66nMjNYk4gBB7KlLpk3-iWmDx9U8S7_7GVd0Judl7bjZ9jzcL-zDHXJ9Yos0UbIEBgmlkgnY0gmlwhKwS9oCKbXVsdGlhZGRyc4wACgSsEvaABmOh3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ70ZeMKKHiy-4OlfDvW3y7uTyVDKtob9XNTinD4ERbL4N0Y3CCY6CDdWRwgmOihXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-06_04-19-11__fed1eae8-d245-4373-acb5-de3dd26f89fc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.158.29
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['40003', '40004', '40005', '40006', '40007']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 40003:40003 -p 40004:40004 -p 40005:40005 -p 40006:40006 -p 40007:40007 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40005 --rest-port=40003 --tcp-port=40004 --discv5-udp-port=40006 --rest-address=0.0.0.0 --nat=extip:172.18.158.29 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0514ca6d6edf3a3e96e9025fc27b42c640fc16a0582c9456eb4f7bc36e9963e0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40007 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.158.29 waku 2fe81d850409dcc971a2eaad13150d535b8297d987214089f44222d71c35fd00
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2fe81d850409. Setting up logs at ./log/docker/receiving_node2_2024-10-06_04-19-11__fed1eae8-d245-4373-acb5-de3dd26f89fc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 40003
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40003/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40003/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.158.29/tcp/40004/p2p/16Uiu2HAmP4y2iff83rCMxwGMcCV84PJEUfatGhG4zaKVr62NoZJ4","/ip4/172.18.158.29/tcp/40005/ws/p2p/16Uiu2HAmP4y2iff83rCMxwGMcCV84PJEUfatGhG4zaKVr62NoZJ4"],"enrUri":"enr:-LO4QDK2YaBsIrtomsQC_9q1XlRljmLTBmjfoY8TBnX1zinqbTlC71mHsMQf17mphgWhZSQO9FKWBwRTc9sDTqPezxcBgmlkgnY0gmlwhKwSnh2KbXVsdGlhZGRyc4wACgSsEp4dBpxF3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOauVDhvYbdL1z_4aN_34cuK1qaSHobYHQxzgrbxOuxPYN0Y3CCnESDdWRwgpxGhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40003/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.246.128/tcp/25504/p2p/16Uiu2HAm3m1VS6yTe9q6Kw4RCbfSHEejFvLp5P5F5cCkJukFP2iJ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-06_04-19-11__fed1eae8-d245-4373-acb5-de3dd26f89fc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.209.155
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['28154', '28155', '28156', '28157', '28158']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 28154:28154 -p 28155:28155 -p 28156:28156 -p 28157:28157 -p 28158:28158 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28156 --rest-port=28154 --tcp-port=28155 --discv5-udp-port=28157 --rest-address=0.0.0.0 --nat=extip:172.18.209.155 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c71fdea1ff99e6f47d2e3fabad6c8fdcb629dfae712ff59b2dd88aec0d9ea437 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28158 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QM4lzEdiYlUW5_Gad7Snz8f66nMjNYk4gBB7KlLpk3-iWmDx9U8S7_7GVd0Judl7bjZ9jzcL-zDHXJ9Yos0UbIEBgmlkgnY0gmlwhKwS9oCKbXVsdGlhZGRyc4wACgSsEvaABmOh3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ70ZeMKKHiy-4OlfDvW3y7uTyVDKtob9XNTinD4ERbL4N0Y3CCY6CDdWRwgmOihXdha3UyCQ --lightpushnode=/ip4/172.18.246.128/tcp/25504/p2p/16Uiu2HAm3m1VS6yTe9q6Kw4RCbfSHEejFvLp5P5F5cCkJukFP2iJ --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.209.155 waku b955bec6f913d59bd1717126c2e5104855a48fa7ca7b44dd4fac0ccf6187a166
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b955bec6f913. Setting up logs at ./log/docker/lightpush_node1_2024-10-06_04-19-11__fed1eae8-d245-4373-acb5-de3dd26f89fc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 28154
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28154/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28154/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.209.155/tcp/28155/p2p/16Uiu2HAm7QHxPtFJpVLrTRvs9G68xE1CPG7nBhfDtGJvwgkyi4pm","/ip4/172.18.209.155/tcp/28156/ws/p2p/16Uiu2HAm7QHxPtFJpVLrTRvs9G68xE1CPG7nBhfDtGJvwgkyi4pm"],"enrUri":"enr:-LO4QNqtJm-ghZYuMrITeiBmLidp3tmCEPkhGQBNy_djfLfkCDfSXkj9jDaDkbCok3yjx0iMou245pOC-So9JcVsSTcBgmlkgnY0gmlwhKwS0ZuKbXVsdGlhZGRyc4wACgSsEtGbBm383QOCcnOFAAMBAACJc2VjcDI1NmsxoQKx8cJzPcoXqOvyE_TeTCtOetIfwzjIq8FImRQITodtxoN0Y3CCbfuDdWRwgm39hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28154/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.246.128/tcp/25504/p2p/16Uiu2HAm3m1VS6yTe9q6Kw4RCbfSHEejFvLp5P5F5cCkJukFP2iJ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28154/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.158.29/tcp/40004/p2p/16Uiu2HAmP4y2iff83rCMxwGMcCV84PJEUfatGhG4zaKVr62NoZJ4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25503/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40003/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28154/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728188355897100288, "extraField": "extraValue"}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28154/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7a44228ff999
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2fe81d850409
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b955bec6f913
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.