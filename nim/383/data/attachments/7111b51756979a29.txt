[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2024-10-06_04-35-55__c3882081-9d2d-4f35-b171-b4483daa5e4a
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-10-06_04-35-55__c3882081-9d2d-4f35-b171-b4483daa5e4a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.239.37
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['28236', '28237', '28238', '28239', '28240']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 28236:28236 -p 28237:28237 -p 28238:28238 -p 28239:28239 -p 28240:28240 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28238 --rest-port=28236 --tcp-port=28237 --discv5-udp-port=28239 --rest-address=0.0.0.0 --nat=extip:172.18.239.37 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f64ff09be3bedc80cbc29e3f4caf30ed97cfcdce84fb1e8fce4d872d5e1aeb9c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28240 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.239.37 waku 3cc1875132c0ab76a257d39afe9811bb78a141fdccefa55705ad340d2370af80
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3cc1875132c0. Setting up logs at ./log/docker/publishing_node1_2024-10-06_04-35-55__c3882081-9d2d-4f35-b171-b4483daa5e4a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 28236
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28236/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28236/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.239.37/tcp/28237/p2p/16Uiu2HAkuqLA8D9BhLxFVhwdsyZsiuxCZyunvL5gPDtYqU6JvXUM","/ip4/172.18.239.37/tcp/28238/ws/p2p/16Uiu2HAkuqLA8D9BhLxFVhwdsyZsiuxCZyunvL5gPDtYqU6JvXUM"],"enrUri":"enr:-LO4QPRKtWNjDZX12Fqs_XJke7gIs1NW7pqrJt4WzHhBmCzgLSiEisVMS9GDTiGFbrsfy4TfGEB0IUcrNOCrwEQcR1cBgmlkgnY0gmlwhKwS7yWKbXVsdGlhZGRyc4wACgSsEu8lBm5O3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIGD4bZrr90n0_yyy0EtwUw81I_jEhXcsxraEcTPaYCooN0Y3CCbk2DdWRwgm5PhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node2_2024-10-06_04-35-55__c3882081-9d2d-4f35-b171-b4483daa5e4a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.82.231
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['63941', '63942', '63943', '63944', '63945']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 63941:63941 -p 63942:63942 -p 63943:63943 -p 63944:63944 -p 63945:63945 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63943 --rest-port=63941 --tcp-port=63942 --discv5-udp-port=63944 --rest-address=0.0.0.0 --nat=extip:172.18.82.231 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=de4596bc5a9ce2587aa052df620dd9351ac4ae1dc30e01bdfdbee5ece5fbeb61 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63945 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.82.231 waku 5d2ee5f58f3c064927677c650692069a34463f62100f608f416bbfdb0a8def69
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5d2ee5f58f3c. Setting up logs at ./log/docker/publishing_node2_2024-10-06_04-35-55__c3882081-9d2d-4f35-b171-b4483daa5e4a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 63941
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63941/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63941/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.82.231/tcp/63942/p2p/16Uiu2HAmKauDSdGctaTTe7nmUq6cUpoc19wL4Jh1SD2Azu5qn9VV","/ip4/172.18.82.231/tcp/63943/ws/p2p/16Uiu2HAmKauDSdGctaTTe7nmUq6cUpoc19wL4Jh1SD2Azu5qn9VV"],"enrUri":"enr:-LO4QLhMTtU47ezmbQaZA5a5ARyueCYB7D5tm5GSTNV2ZxUNeXuXjBWsTPQP84eraFSWQRuPqS4-WbTnw_xZpQKGilcBgmlkgnY0gmlwhKwSUueKbXVsdGlhZGRyc4wACgSsElLnBvnH3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNm9a3Cfn62VXU0sUL4nnizHqIvnmE7ja3UbwXNPjXonIN0Y3CC-caDdWRwgvnIhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63941/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.239.37/tcp/28237/p2p/16Uiu2HAkuqLA8D9BhLxFVhwdsyZsiuxCZyunvL5gPDtYqU6JvXUM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-10-06_04-35-55__c3882081-9d2d-4f35-b171-b4483daa5e4a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.177.66
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['60307', '60308', '60309', '60310', '60311']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 60307:60307 -p 60308:60308 -p 60309:60309 -p 60310:60310 -p 60311:60311 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60309 --rest-port=60307 --tcp-port=60308 --discv5-udp-port=60310 --rest-address=0.0.0.0 --nat=extip:172.18.177.66 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ddae5a7eecd15cdb6fc7f6ce019d3e0ddc5aecc943f1970aadcabcecc8d4eb3d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60311 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QPRKtWNjDZX12Fqs_XJke7gIs1NW7pqrJt4WzHhBmCzgLSiEisVMS9GDTiGFbrsfy4TfGEB0IUcrNOCrwEQcR1cBgmlkgnY0gmlwhKwS7yWKbXVsdGlhZGRyc4wACgSsEu8lBm5O3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIGD4bZrr90n0_yyy0EtwUw81I_jEhXcsxraEcTPaYCooN0Y3CCbk2DdWRwgm5PhXdha3UyCw --storenode=/ip4/172.18.239.37/tcp/28237/p2p/16Uiu2HAkuqLA8D9BhLxFVhwdsyZsiuxCZyunvL5gPDtYqU6JvXUM --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.239.37/tcp/28237/p2p/16Uiu2HAkuqLA8D9BhLxFVhwdsyZsiuxCZyunvL5gPDtYqU6JvXUM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.177.66 waku 7aeda935f411e2bc6a6f68cb2a81c0d97de2e18f52b79671a9af21f58cd687b4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7aeda935f411. Setting up logs at ./log/docker/store_node1_2024-10-06_04-35-55__c3882081-9d2d-4f35-b171-b4483daa5e4a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 60307
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60307/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60307/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.177.66/tcp/60308/p2p/16Uiu2HAm6PqaUXmgwmCveipKUarYajwLkYviULxoTE8ofokQuVP3","/ip4/172.18.177.66/tcp/60309/ws/p2p/16Uiu2HAm6PqaUXmgwmCveipKUarYajwLkYviULxoTE8ofokQuVP3"],"enrUri":"enr:-LO4QLV3wLqtGEJOmnUzGWNiZkPk2iH_uFEW73TGdS6TNaKLJZRlX70V_xVAEFid-4gelNneOMOqWlxeukjgwThBTRcBgmlkgnY0gmlwhKwSsUKKbXVsdGlhZGRyc4wACgSsErFCBuuV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKi-D89C49eTMmYAYpwg5cuzs0HvrdEuzHGM-KLmj8p3oN0Y3CC65SDdWRwguuWhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60307/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.239.37/tcp/28237/p2p/16Uiu2HAkuqLA8D9BhLxFVhwdsyZsiuxCZyunvL5gPDtYqU6JvXUM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60307/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.82.231/tcp/63942/p2p/16Uiu2HAmKauDSdGctaTTe7nmUq6cUpoc19wL4Jh1SD2Azu5qn9VV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28236/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63941/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60307/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728189359914870016}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28236/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"8OYG+y5eimF6rly138xrwEvWZnnAg10vefNqIGA2Kh4="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60307/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"a16ea4b838e1389c551e","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"8OYG+y5eimF6rly138xrwEvWZnnAg10vefNqIGA2Kh4="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3cc1875132c0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5d2ee5f58f3c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7aeda935f411
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.