[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_content_topics with id: 2024-10-06_04-18-22__e0fd8fbc-3200-45a7-bcd1-0becaa945677
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-06_04-18-22__e0fd8fbc-3200-45a7-bcd1-0becaa945677__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.84.183
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['49508', '49509', '49510', '49511', '49512']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 49508:49508 -p 49509:49509 -p 49510:49510 -p 49511:49511 -p 49512:49512 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49510 --rest-port=49508 --tcp-port=49509 --discv5-udp-port=49511 --rest-address=0.0.0.0 --nat=extip:172.18.84.183 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4ab0f93bd1b114ef2fdcfc5465b6d73bd4dfa6a1cb5ae5cec7385aae946ea4fb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49512 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.84.183 waku 0e12c599810f8d0947994a2e0937bb49c47757a56dcb5bbb073ee73b85b97cf0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 0e12c599810f. Setting up logs at ./log/docker/receiving_node1_2024-10-06_04-18-22__e0fd8fbc-3200-45a7-bcd1-0becaa945677__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 49508
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49508/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49508/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.183/tcp/49509/p2p/16Uiu2HAmMNQciWP9YkJvhc1jNHzDJ3nVMYyff8TVoUXPkD4zkz7S","/ip4/172.18.84.183/tcp/49510/ws/p2p/16Uiu2HAmMNQciWP9YkJvhc1jNHzDJ3nVMYyff8TVoUXPkD4zkz7S"],"enrUri":"enr:-LO4QIc_PLtCXRqWIFpDHnXXMmj4JoCYotuTjuG3QYJHbwFsH-7Eb9joBG3q5-rGDIdUhDABu9WowEMUeQzrh8yiARgBgmlkgnY0gmlwhKwSVLeKbXVsdGlhZGRyc4wACgSsElS3BsFm3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOBeb8HiL9snNAjMuR4DvZ5hIqJbTGQKX9m62Q2GU3pIYN0Y3CCwWWDdWRwgsFnhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-06_04-18-22__e0fd8fbc-3200-45a7-bcd1-0becaa945677__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.197.11
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['11510', '11511', '11512', '11513', '11514']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 11510:11510 -p 11511:11511 -p 11512:11512 -p 11513:11513 -p 11514:11514 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11512 --rest-port=11510 --tcp-port=11511 --discv5-udp-port=11513 --rest-address=0.0.0.0 --nat=extip:172.18.197.11 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eda1a04ce6c37cfdb4bafefe5ba1de3aeaedcaaf0cd1fd09fa0f8fe6d257b8fa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11514 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.197.11 waku 181fde72fbac7b55ce3092873eda67e50c8c1e546cdc5d7dd8fcf7d8dd3409e3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 181fde72fbac. Setting up logs at ./log/docker/receiving_node2_2024-10-06_04-18-22__e0fd8fbc-3200-45a7-bcd1-0becaa945677__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 11510
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11510/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11510/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.197.11/tcp/11511/p2p/16Uiu2HAmML9B3rdzNC61SwT551zanaHBaL9sFinwdyZTGavpXvAg","/ip4/172.18.197.11/tcp/11512/ws/p2p/16Uiu2HAmML9B3rdzNC61SwT551zanaHBaL9sFinwdyZTGavpXvAg"],"enrUri":"enr:-LO4QBZz81zzIJ8_3mBIWFjkm5THojoODQj0ABd4iSg0cea9Aipi8xsw7J4uwopbBFvPKWZ3bFQeINP7t1-QiK1tvk4BgmlkgnY0gmlwhKwSxQuKbXVsdGlhZGRyc4wACgSsEsULBiz43QOCcnOFAAMBAACJc2VjcDI1NmsxoQOA5R-pCKY7ginfw18giXWeST9tURKoFlZlGoaGv6OxJYN0Y3CCLPeDdWRwgiz5hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11510/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.84.183/tcp/49509/p2p/16Uiu2HAmMNQciWP9YkJvhc1jNHzDJ3nVMYyff8TVoUXPkD4zkz7S"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-06_04-18-22__e0fd8fbc-3200-45a7-bcd1-0becaa945677__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.22.8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['38297', '38298', '38299', '38300', '38301']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 38297:38297 -p 38298:38298 -p 38299:38299 -p 38300:38300 -p 38301:38301 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38299 --rest-port=38297 --tcp-port=38298 --discv5-udp-port=38300 --rest-address=0.0.0.0 --nat=extip:172.18.22.8 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=135c56a1324f5bbf6e64ccd7ca0d3c1cbbbbdc2a3e9df505bb250f75feaba5c7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38301 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QIc_PLtCXRqWIFpDHnXXMmj4JoCYotuTjuG3QYJHbwFsH-7Eb9joBG3q5-rGDIdUhDABu9WowEMUeQzrh8yiARgBgmlkgnY0gmlwhKwSVLeKbXVsdGlhZGRyc4wACgSsElS3BsFm3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOBeb8HiL9snNAjMuR4DvZ5hIqJbTGQKX9m62Q2GU3pIYN0Y3CCwWWDdWRwgsFnhXdha3UyCQ --lightpushnode=/ip4/172.18.84.183/tcp/49509/p2p/16Uiu2HAmMNQciWP9YkJvhc1jNHzDJ3nVMYyff8TVoUXPkD4zkz7S --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.22.8 waku a9f3da9920daf84a0f17425ca14af704be4d8c98561afb7970f1e98632f75ba3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a9f3da9920da. Setting up logs at ./log/docker/lightpush_node1_2024-10-06_04-18-22__e0fd8fbc-3200-45a7-bcd1-0becaa945677__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 38297
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38297/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38297/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.22.8/tcp/38298/p2p/16Uiu2HAmJ7BqznaGT3LteSTH2HTfADCEH7yf1d2Sa5nkK5wbhonR","/ip4/172.18.22.8/tcp/38299/ws/p2p/16Uiu2HAmJ7BqznaGT3LteSTH2HTfADCEH7yf1d2Sa5nkK5wbhonR"],"enrUri":"enr:-LO4QApemPj2ZJNHutK67MMS7wz3WOxJ-_ifL6UqVQO9uU7jLMf-cH6QN98bRNReXZhxd6NNLqmaokhJLZ0Z_QWPPx0BgmlkgnY0gmlwhKwSFgiKbXVsdGlhZGRyc4wACgSsEhYIBpWb3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNRAIh2GAPj9Kdxkwv6dNuPCu6wUvF3JR9PTKQzgCTD4oN0Y3CClZqDdWRwgpWchXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38297/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.84.183/tcp/49509/p2p/16Uiu2HAmMNQciWP9YkJvhc1jNHzDJ3nVMYyff8TVoUXPkD4zkz7S"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38297/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.197.11/tcp/11511/p2p/16Uiu2HAmML9B3rdzNC61SwT551zanaHBaL9sFinwdyZTGavpXvAg"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49508/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11510/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic Empty string
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38297/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "", "timestamp": 1728188307447403008}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:38297/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A dictionary
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38297/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": {"key": "YWFh"}, "timestamp": 1728188307451421696}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:38297/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic An integer
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38297/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": 1234567890, "timestamp": 1728188307454875648}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:38297/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A list
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38297/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": ["YWFh"], "timestamp": 1728188307459198720}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:38297/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A bool
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38297/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": true, "timestamp": 1728188307462770176}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:38297/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0e12c599810f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 181fde72fbac
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a9f3da9920da
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.