[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-12-12_04-14-59__87592634-9577-4008-a02b-84c588e4677b
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-12_04-14-59__87592634-9577-4008-a02b-84c588e4677b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.249.31
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['14181', '14182', '14183', '14184', '14185']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 14181:14181 -p 14182:14182 -p 14183:14183 -p 14184:14184 -p 14185:14185 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14183 --rest-port=14181 --tcp-port=14182 --discv5-udp-port=14184 --rest-address=0.0.0.0 --nat=extip:172.18.249.31 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fbbd3fb8d37f1fdbece4f34f305dc9967d9b88beacdaf64b7d7ae604eb1bc72e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14185 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.249.31 waku e7f871f5599acec5272781dad5a78e8f091a87c214562a8e3c979b55639f74a8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e7f871f5599a. Setting up logs at ./log/docker/receiving_node1_2024-12-12_04-14-59__87592634-9577-4008-a02b-84c588e4677b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 14181
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2617e2546746. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14181/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14181/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.249.31/tcp/14182/p2p/16Uiu2HAmG4moQasYiQVTtMsZJ6oK1JYpwXpSwHu9fu2NP78jJDXi","/ip4/172.18.249.31/tcp/14183/ws/p2p/16Uiu2HAmG4moQasYiQVTtMsZJ6oK1JYpwXpSwHu9fu2NP78jJDXi"],"enrUri":"enr:-L24QAqUjhUG3LDWm9yYDTKr0y2PploiC2Qrv9drRYPxK0l9Byav0se5ezC0MhpTNPXtxVZDWw6lNnMhARI6kZz9KQICgmlkgnY0gmlwhKwS-R-KbXVsdGlhZGRyc5YACASsEvkfBjdmAAoErBL5HwY3Z90DgnJzhQADAQAAiXNlY3AyNTZrMaEDMqrPadrVhKtVqakH257pJ8obXe616pzkl5kflDxNmM2DdGNwgjdmg3VkcII3aIV3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-12_04-14-59__87592634-9577-4008-a02b-84c588e4677b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.250.20
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10188', '10189', '10190', '10191', '10192']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10188:10188 -p 10189:10189 -p 10190:10190 -p 10191:10191 -p 10192:10192 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10190 --rest-port=10188 --tcp-port=10189 --discv5-udp-port=10191 --rest-address=0.0.0.0 --nat=extip:172.18.250.20 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b8eb7cf8a85791641f7fcbb40ad66e9fede98b2e9c6f49fce198e929cfbb6dbb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10192 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.250.20 waku 393ba7c9e5677c2a4962941739f5e81998ccc30b8215d77cd5341bfecf800e60
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 393ba7c9e567. Setting up logs at ./log/docker/receiving_node2_2024-12-12_04-14-59__87592634-9577-4008-a02b-84c588e4677b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 10188
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10188/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10188/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.250.20/tcp/10189/p2p/16Uiu2HAmDYVathkLLMbYn9sgabqeK8yLvg2uP1qVuMGzmV2J6aDJ","/ip4/172.18.250.20/tcp/10190/ws/p2p/16Uiu2HAmDYVathkLLMbYn9sgabqeK8yLvg2uP1qVuMGzmV2J6aDJ"],"enrUri":"enr:-L24QOVhnTF6UoSGTWj9XrzVzRQzl_VRNIEN8jac_IJEYYK_GzghV-UEHvj2MmYOUdETqjToZpyxixRJjptT64nFM9MCgmlkgnY0gmlwhKwS-hSKbXVsdGlhZGRyc5YACASsEvoUBifNAAoErBL6FAYnzt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDTGtRaT3-B2ZStIOJLAjn_bTEFmoaumGGOUEAYzjduWDdGNwgifNg3VkcIInz4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10188/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.249.31/tcp/14182/p2p/16Uiu2HAmG4moQasYiQVTtMsZJ6oK1JYpwXpSwHu9fu2NP78jJDXi"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-12_04-14-59__87592634-9577-4008-a02b-84c588e4677b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.54.8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['64312', '64313', '64314', '64315', '64316']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 64312:64312 -p 64313:64313 -p 64314:64314 -p 64315:64315 -p 64316:64316 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64314 --rest-port=64312 --tcp-port=64313 --discv5-udp-port=64315 --rest-address=0.0.0.0 --nat=extip:172.18.54.8 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ede8cbf5cf327458f5fe7b9efed2a6abd2ea82d534e8b4a74ae1db9bad93fddb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64316 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QAqUjhUG3LDWm9yYDTKr0y2PploiC2Qrv9drRYPxK0l9Byav0se5ezC0MhpTNPXtxVZDWw6lNnMhARI6kZz9KQICgmlkgnY0gmlwhKwS-R-KbXVsdGlhZGRyc5YACASsEvkfBjdmAAoErBL5HwY3Z90DgnJzhQADAQAAiXNlY3AyNTZrMaEDMqrPadrVhKtVqakH257pJ8obXe616pzkl5kflDxNmM2DdGNwgjdmg3VkcII3aIV3YWt1Mg0 --lightpushnode=/ip4/172.18.249.31/tcp/14182/p2p/16Uiu2HAmG4moQasYiQVTtMsZJ6oK1JYpwXpSwHu9fu2NP78jJDXi --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.54.8 waku 0842683bfc1984147c72740bdd594a5c2243cd804452a4b54d8fc5147e680e78
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0842683bfc19. Setting up logs at ./log/docker/lightpush_node1_2024-12-12_04-14-59__87592634-9577-4008-a02b-84c588e4677b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 64312
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64312/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64312/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.54.8/tcp/64313/p2p/16Uiu2HAkzHxP8H4aucVT6CAmi4FUfdER6RQCJU9sz6gcC7kYRQFu","/ip4/172.18.54.8/tcp/64314/ws/p2p/16Uiu2HAkzHxP8H4aucVT6CAmi4FUfdER6RQCJU9sz6gcC7kYRQFu"],"enrUri":"enr:-L24QGSgn3nGx7YJjmgRDxF0GYiewTox9srhJVe6P13DfHUUVnmmHIeOeRzpN7V1MTg3tyatHjauZ6rBQoBT9KSuVUACgmlkgnY0gmlwhKwSNgiKbXVsdGlhZGRyc5YACASsEjYIBvs5AAoErBI2CAb7Ot0DgnJzhQADAQAAiXNlY3AyNTZrMaECSFBVk8yuJRR2C2-5RE6KyL7-qrnMIomxc4_OkYai6iyDdGNwgvs5g3VkcIL7O4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64312/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.249.31/tcp/14182/p2p/16Uiu2HAmG4moQasYiQVTtMsZJ6oK1JYpwXpSwHu9fu2NP78jJDXi"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64312/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.250.20/tcp/10189/p2p/16Uiu2HAmDYVathkLLMbYn9sgabqeK8yLvg2uP1qVuMGzmV2J6aDJ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14181/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10188/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64312/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733976903421262080}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14181/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1733976903421262080,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10188/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1733976903421262080,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e7f871f5599a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 393ba7c9e567
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e7f871f5599a. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0842683bfc19
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 393ba7c9e567. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.