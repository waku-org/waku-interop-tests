[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_relay_no_subscription with id: 2024-09-14_04-25-31__d72996e9-5d26-4b73-b641-f3622ff20a50
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.relay:relay.py:34 Running fixture setup: setup_main_relay_nodes
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-14_04-25-31__d72996e9-5d26-4b73-b641-f3622ff20a50__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.94.51
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['45753', '45754', '45755', '45756', '45757']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 45753:45753 -p 45754:45754 -p 45755:45755 -p 45756:45756 -p 45757:45757 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45755 --rest-port=45753 --tcp-port=45754 --discv5-udp-port=45756 --rest-address=0.0.0.0 --nat=extip:172.18.94.51 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8fd90d4dc3ffa70f16aa1d506f2cea12aa2abaf5b9fde72ecdf917ab9feaef0c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45757 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.94.51 waku 9ee221f20145ebf04c42c302ec4357ea3dce9411069bfb1fda7a7f08e198f692
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 9ee221f20145. Setting up logs at ./log/docker/node1_2024-09-14_04-25-31__d72996e9-5d26-4b73-b641-f3622ff20a50__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 45753
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45753/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45753/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.94.51/tcp/45754/p2p/16Uiu2HAmFLavnGfTJTbG7EmhQQ2qM8E3Dif5MW9BAVPs1bpFutQu","/ip4/172.18.94.51/tcp/45755/ws/p2p/16Uiu2HAmFLavnGfTJTbG7EmhQQ2qM8E3Dif5MW9BAVPs1bpFutQu"],"enrUri":"enr:-LO4QMMfeqw9FOoYixj0989Nw0UZFLVSQr7kHdWnLg81FQIQIwFxpnl_71YDzPYfvwYzUWiuZCONWtd00aQFehabqWUBgmlkgnY0gmlwhKwSXjOKbXVsdGlhZGRyc4wACgSsEl4zBrK73QOCcnOFAAMBAACJc2VjcDI1NmsxoQMn3B9LN8N-hRC0HaY8uTzHAk2bPqsI6keXYyGyHaH9doN0Y3CCsrqDdWRwgrK8hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-14_04-25-31__d72996e9-5d26-4b73-b641-f3622ff20a50__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.211.177
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['40633', '40634', '40635', '40636', '40637']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 40633:40633 -p 40634:40634 -p 40635:40635 -p 40636:40636 -p 40637:40637 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40635 --rest-port=40633 --tcp-port=40634 --discv5-udp-port=40636 --rest-address=0.0.0.0 --nat=extip:172.18.211.177 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7fbb6caf4e862f7fff5751c9de5679aed252f6aefc4dbb3cdb4cdad70dd585d5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40637 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QMMfeqw9FOoYixj0989Nw0UZFLVSQr7kHdWnLg81FQIQIwFxpnl_71YDzPYfvwYzUWiuZCONWtd00aQFehabqWUBgmlkgnY0gmlwhKwSXjOKbXVsdGlhZGRyc4wACgSsEl4zBrK73QOCcnOFAAMBAACJc2VjcDI1NmsxoQMn3B9LN8N-hRC0HaY8uTzHAk2bPqsI6keXYyGyHaH9doN0Y3CCsrqDdWRwgrK8hXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.211.177 waku a17d6286ced83cd7f3311d37a8e3acb329ee2bba11b2d3ee97e0c65d275117ff
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a17d6286ced8. Setting up logs at ./log/docker/node2_2024-09-14_04-25-31__d72996e9-5d26-4b73-b641-f3622ff20a50__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 40633
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40633/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40633/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.211.177/tcp/40634/p2p/16Uiu2HAmBK3obQQ2aEuqqr6xwo9LzbPT2CK2LkhBjgwnudLxW5Se","/ip4/172.18.211.177/tcp/40635/ws/p2p/16Uiu2HAmBK3obQQ2aEuqqr6xwo9LzbPT2CK2LkhBjgwnudLxW5Se"],"enrUri":"enr:-LO4QAaEg0NZt7umAJ5fvh23h7x1uGLSTO7Nr8jh3n7ueckwFo_ec4PJ3v0v9YB5gmNlZ6Z61f-A7ti0tfcpkx-LrO4BgmlkgnY0gmlwhKwS07GKbXVsdGlhZGRyc4wACgSsEtOxBp673QOCcnOFAAMBAACJc2VjcDI1NmsxoQLsCJoPeAjHnjLQE6wXKERKFlk8-XN9mJY5OHkRC0QyN4N0Y3CCnrqDdWRwgp68hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40633/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.94.51/tcp/45754/p2p/16Uiu2HAmFLavnGfTJTbG7EmhQQ2qM8E3Dif5MW9BAVPs1bpFutQu"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45753/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:45753/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/3/1'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9ee221f20145
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a17d6286ced8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.