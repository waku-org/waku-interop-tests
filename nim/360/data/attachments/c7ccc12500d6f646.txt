[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_lightpushing_node with id: 2024-09-14_04-12-10__15910e88-94c0-4eaa-8e0e-35230372709a
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-14_04-12-10__15910e88-94c0-4eaa-8e0e-35230372709a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-14_04-12-10__15910e88-94c0-4eaa-8e0e-35230372709a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-09-14_04-12-10__15910e88-94c0-4eaa-8e0e-35230372709a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.133.90
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['35222', '35223', '35224', '35225', '35226']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 35222:35222 -p 35223:35223 -p 35224:35224 -p 35225:35225 -p 35226:35226 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35224 --rest-port=35222 --tcp-port=35223 --discv5-udp-port=35225 --rest-address=0.0.0.0 --nat=extip:172.18.133.90 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=748f1df7cf08ccf6db3ec7b78634c8d12eff481aeddd601cc7c598b6fbdbf9de --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35226 --metrics-logging=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.133.90 waku 11e543124833526db40f38300aef03744ef64d5ce55c3fb6a17445251504f0a9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 11e543124833. Setting up logs at ./log/docker/node1_2024-09-14_04-12-10__15910e88-94c0-4eaa-8e0e-35230372709a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 35222
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35222/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35222/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.133.90/tcp/35223/p2p/16Uiu2HAmPMP8YtFt88uha6ughJSPYMV5nRxcWK7XuxmN9MLyhAXJ","/ip4/172.18.133.90/tcp/35224/ws/p2p/16Uiu2HAmPMP8YtFt88uha6ughJSPYMV5nRxcWK7XuxmN9MLyhAXJ"],"enrUri":"enr:-LO4QHUL0y0fqK6lSINtWt0qdM8YMoG4BVQhWYdWrmEvKTrnCyDTefBef3QAjkbagITxuREEbevn6cNpWoO6SZwIJ0MBgmlkgnY0gmlwhKwShVqKbXVsdGlhZGRyc4wACgSsEoVaBomY3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOe7dwFZoMBJK9jOHOI7tsTWaBy3Mq118fH5pJ5A7rjwYN0Y3CCiZeDdWRwgomZhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.156.189
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['12120', '12121', '12122', '12123', '12124']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 12120:12120 -p 12121:12121 -p 12122:12122 -p 12123:12123 -p 12124:12124 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12122 --rest-port=12120 --tcp-port=12121 --discv5-udp-port=12123 --rest-address=0.0.0.0 --nat=extip:172.18.156.189 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dd736cbae5a18d7c859df7e60f7bf110df3181d7acf6c2d5dd53f04272f09cb7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12124 --metrics-logging=true --lightpush=true --filter=true --relay=true --discv5-bootstrap-node=enr:-LO4QHUL0y0fqK6lSINtWt0qdM8YMoG4BVQhWYdWrmEvKTrnCyDTefBef3QAjkbagITxuREEbevn6cNpWoO6SZwIJ0MBgmlkgnY0gmlwhKwShVqKbXVsdGlhZGRyc4wACgSsEoVaBomY3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOe7dwFZoMBJK9jOHOI7tsTWaBy3Mq118fH5pJ5A7rjwYN0Y3CCiZeDdWRwgomZhXdha3UyCQ --lightpushnode=/ip4/172.18.133.90/tcp/35223/p2p/16Uiu2HAmPMP8YtFt88uha6ughJSPYMV5nRxcWK7XuxmN9MLyhAXJ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.156.189 waku 9fef1ce2ec18bb3fa2209e9ac0938c6959475a182e6b070e0ba1180c3a580946
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 9fef1ce2ec18. Setting up logs at ./log/docker/node2_2024-09-14_04-12-10__15910e88-94c0-4eaa-8e0e-35230372709a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 12120
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12120/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12120/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.156.189/tcp/12121/p2p/16Uiu2HAmL7Qb2XPixicAF5Q53SLK7A2ckqueDfZMyeDKKepx9uAJ","/ip4/172.18.156.189/tcp/12122/ws/p2p/16Uiu2HAmL7Qb2XPixicAF5Q53SLK7A2ckqueDfZMyeDKKepx9uAJ"],"enrUri":"enr:-LO4QE6P8gQvSr5As7v_jeqvtwEbqMtGK5G3LeYJJ4ox-KJOPC-EIyD1pqvVQN_qz9zEP6J93ytW1Uhx1Tz9t2XfDf0BgmlkgnY0gmlwhKwSnL2KbXVsdGlhZGRyc4wACgSsEpy9Bi9a3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNuxlBwOhKQwHyeW1HSXPVpwim97nKy_ZeXTe-5ceBHu4N0Y3CCL1mDdWRwgi9bhXdha3UyDQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.122.185
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['42226', '42227', '42228', '42229', '42230']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 42226:42226 -p 42227:42227 -p 42228:42228 -p 42229:42229 -p 42230:42230 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42228 --rest-port=42226 --tcp-port=42227 --discv5-udp-port=42229 --rest-address=0.0.0.0 --nat=extip:172.18.122.185 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=de88a66963bd1321d8aad3916fb025d850ebbd04af48f36aceeef1eb84bc7bf2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42230 --metrics-logging=true --relay=false --filternode=/ip4/172.18.156.189/tcp/12121/p2p/16Uiu2HAmL7Qb2XPixicAF5Q53SLK7A2ckqueDfZMyeDKKepx9uAJ --discv5-bootstrap-node=enr:-LO4QE6P8gQvSr5As7v_jeqvtwEbqMtGK5G3LeYJJ4ox-KJOPC-EIyD1pqvVQN_qz9zEP6J93ytW1Uhx1Tz9t2XfDf0BgmlkgnY0gmlwhKwSnL2KbXVsdGlhZGRyc4wACgSsEpy9Bi9a3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNuxlBwOhKQwHyeW1HSXPVpwim97nKy_ZeXTe-5ceBHu4N0Y3CCL1mDdWRwgi9bhXdha3UyDQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.122.185 waku bd15f5c45c33611946bc4b311cbf92386de39448e896c3e3eb37768eec44d60c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID bd15f5c45c33. Setting up logs at ./log/docker/node3_2024-09-14_04-12-10__15910e88-94c0-4eaa-8e0e-35230372709a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 42226
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42226/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42226/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.122.185/tcp/42227/p2p/16Uiu2HAm1kQCkJRpXPVhJTKN1hKNKbrRg9DvNhWQcjWFkW2Uuzky","/ip4/172.18.122.185/tcp/42228/ws/p2p/16Uiu2HAm1kQCkJRpXPVhJTKN1hKNKbrRg9DvNhWQcjWFkW2Uuzky"],"enrUri":"enr:-LO4QOa9ImQQrSKG1Rav8pNYS3odaMwlraxd87QQvCbAbqfmMEH9ZzTBBhX5aXFLQ2RGTnzrEVayYGwqarVA6MtI-fwBgmlkgnY0gmlwhKwSermKbXVsdGlhZGRyc4wACgSsEnq5BqT03QOCcnOFAAMBAACJc2VjcDI1NmsxoQJd8lF2Ak8xR2gNhmXSYGwBZeVAj2Z5ANu_SnjQW7lGKoN0Y3CCpPODdWRwgqT1hXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35222/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12120/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42226/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35222/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35222/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.156.189/tcp/12121/p2p/16Uiu2HAmL7Qb2XPixicAF5Q53SLK7A2ckqueDfZMyeDKKepx9uAJ","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12120/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.133.90/tcp/35223/p2p/16Uiu2HAmPMP8YtFt88uha6ughJSPYMV5nRxcWK7XuxmN9MLyhAXJ","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.122.185/tcp/42227/p2p/16Uiu2HAm1kQCkJRpXPVhJTKN1hKNKbrRg9DvNhWQcjWFkW2Uuzky","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42226/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.156.189/tcp/12121/p2p/16Uiu2HAmL7Qb2XPixicAF5Q53SLK7A2ckqueDfZMyeDKKepx9uAJ","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35222/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1726287167067925504}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42226/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1726287167067925504,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 11e543124833
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9fef1ce2ec18
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id bd15f5c45c33
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.