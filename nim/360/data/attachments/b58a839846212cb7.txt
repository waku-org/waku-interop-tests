[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter with id: 2024-09-14_04-11-41__b70ffece-3a61-4d37-a73b-360b88aa8eec
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-14_04-11-41__b70ffece-3a61-4d37-a73b-360b88aa8eec__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.203.121
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['61864', '61865', '61866', '61867', '61868']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 61864:61864 -p 61865:61865 -p 61866:61866 -p 61867:61867 -p 61868:61868 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61866 --rest-port=61864 --tcp-port=61865 --discv5-udp-port=61867 --rest-address=0.0.0.0 --nat=extip:172.18.203.121 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bada6d8d8cf8bede6f9aa8404b3497a7c8a8ba53ac4d4ea9baca8f2eb48ad9ec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61868 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.203.121 waku 93c81517f2263512efb18e5d85dbeec433b1461ec382dec0f1945db2556719a1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 93c81517f226. Setting up logs at ./log/docker/node1_2024-09-14_04-11-41__b70ffece-3a61-4d37-a73b-360b88aa8eec__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 61864
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61864/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61864/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.203.121/tcp/61865/p2p/16Uiu2HAmEwVSW9AcmdRPhEvTbjHWSQ1hm7vS2DvT2oyPDXbUUNHN","/ip4/172.18.203.121/tcp/61866/ws/p2p/16Uiu2HAmEwVSW9AcmdRPhEvTbjHWSQ1hm7vS2DvT2oyPDXbUUNHN"],"enrUri":"enr:-LO4QOQNBtrecOK7dl2q3GGX3g660r764O302hEhbQKmM1oRdZO_Z0aPjph0JWKtMoApWKeE5hm1Kxfib44OLx_dfCcBgmlkgnY0gmlwhKwSy3mKbXVsdGlhZGRyc4wACgSsEst5BvGq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMh8Y8P6DYod-lTVSdLBbYo7_xivW-v9jsvMWiintq5UYN0Y3CC8amDdWRwgvGrhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-14_04-11-41__b70ffece-3a61-4d37-a73b-360b88aa8eec__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.250.251
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['14806', '14807', '14808', '14809', '14810']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 14806:14806 -p 14807:14807 -p 14808:14808 -p 14809:14809 -p 14810:14810 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14808 --rest-port=14806 --tcp-port=14807 --discv5-udp-port=14809 --rest-address=0.0.0.0 --nat=extip:172.18.250.251 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5db3f1efddd9ac35efcc72c5dfb8368c7fabcee4ce6d4e9affca1eaa2d40dfda --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14810 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QOQNBtrecOK7dl2q3GGX3g660r764O302hEhbQKmM1oRdZO_Z0aPjph0JWKtMoApWKeE5hm1Kxfib44OLx_dfCcBgmlkgnY0gmlwhKwSy3mKbXVsdGlhZGRyc4wACgSsEst5BvGq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMh8Y8P6DYod-lTVSdLBbYo7_xivW-v9jsvMWiintq5UYN0Y3CC8amDdWRwgvGrhXdha3UyBQ --filternode=/ip4/172.18.203.121/tcp/61865/p2p/16Uiu2HAmEwVSW9AcmdRPhEvTbjHWSQ1hm7vS2DvT2oyPDXbUUNHN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.250.251 waku 91a66dc77c19dd66bb098276acb19dcb8b64f0dd3ddb1d0a6f35f21b5061ab08
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 91a66dc77c19. Setting up logs at ./log/docker/node1_2024-09-14_04-11-41__b70ffece-3a61-4d37-a73b-360b88aa8eec__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 14806
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14806/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14806/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.250.251/tcp/14807/p2p/16Uiu2HAm4KwTaiKLrciA67ZLj6ciVLJKYKF8xU35qxUjSRStAfJM","/ip4/172.18.250.251/tcp/14808/ws/p2p/16Uiu2HAm4KwTaiKLrciA67ZLj6ciVLJKYKF8xU35qxUjSRStAfJM"],"enrUri":"enr:-LO4QEkTIMbGFHTPDSADIr8ilZfFraePmD5J0KpUXltVw_VNQ35OhQZTvadDO1mZVaKv4_8CX5FHkppVP2hkwWvHWnIBgmlkgnY0gmlwhKwS-vuKbXVsdGlhZGRyc4wACgSsEvr7BjnY3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKEQTMkOLm4OEtnZuLcl6TRwK4XHNdcdIidlnZ4TU95_oN0Y3CCOdeDdWRwgjnZhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61864/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14806/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "d8f3af88-8299-4413-9d65-2626cbaf1fc2", "contentFilters": ["/test/1/waku-relay/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"d8f3af88-8299-4413-9d65-2626cbaf1fc2","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61864/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14806/filter/v2/messages/%2Ftest%2F1%2Fwaku-relay%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1726287108364151296,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 93c81517f226
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 91a66dc77c19
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.