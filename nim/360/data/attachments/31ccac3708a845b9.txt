[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_receiving_nodes__relay_node1_forwards_lightpushed_message_to_relay_node2 with id: 2024-09-14_04-18-04__662e47d7-33e3-4960-bb37-1784fa710f67
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-14_04-18-04__662e47d7-33e3-4960-bb37-1784fa710f67__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.1.237
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['26578', '26579', '26580', '26581', '26582']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 26578:26578 -p 26579:26579 -p 26580:26580 -p 26581:26581 -p 26582:26582 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26580 --rest-port=26578 --tcp-port=26579 --discv5-udp-port=26581 --rest-address=0.0.0.0 --nat=extip:172.18.1.237 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9dcd61beaacdce711b5b18e3b4495bdc5d2aff85a0d21d94bc3d118b09beae16 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26582 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.1.237 waku d19a01a6514cec043575135b8263591b7f63a0c1f4afb91bbc5cfcb5843e6650
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d19a01a6514c. Setting up logs at ./log/docker/receiving_node1_2024-09-14_04-18-04__662e47d7-33e3-4960-bb37-1784fa710f67__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 26578
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26578/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26578/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.1.237/tcp/26579/p2p/16Uiu2HAmRDoRGoRJ9k2juXwZ7frPFXSA2mkdZdy4B5QBcHsV9Qaa","/ip4/172.18.1.237/tcp/26580/ws/p2p/16Uiu2HAmRDoRGoRJ9k2juXwZ7frPFXSA2mkdZdy4B5QBcHsV9Qaa"],"enrUri":"enr:-LO4QBFt29F8Zb4G_-BIvHRTszzXdIpDCummoyC2Yb0bEfsbXUjjSTtBFj4r9wiFWWCPDzBdCx5RgZPi1JTlm7aQSc4BgmlkgnY0gmlwhKwSAe2KbXVsdGlhZGRyc4wACgSsEgHtBmfU3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO6tAy7L0nEfW3SggruBrZZWPsRWcjR_229mfemNnixl4N0Y3CCZ9ODdWRwgmfVhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-14_04-18-04__662e47d7-33e3-4960-bb37-1784fa710f67__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.253.139
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['6090', '6091', '6092', '6093', '6094']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 6090:6090 -p 6091:6091 -p 6092:6092 -p 6093:6093 -p 6094:6094 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6092 --rest-port=6090 --tcp-port=6091 --discv5-udp-port=6093 --rest-address=0.0.0.0 --nat=extip:172.18.253.139 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b1edac94ffaaaaa3bbbfa69e7b4f28c29738f6c79eb2dcd6dc818fea37ad7adb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6094 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.253.139 waku 1c8416e57e78a877bd7fe0ba59c36269ff0e4d8e871a203f4383bee89e047bc9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 1c8416e57e78. Setting up logs at ./log/docker/receiving_node2_2024-09-14_04-18-04__662e47d7-33e3-4960-bb37-1784fa710f67__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 6090
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6090/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6090/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.253.139/tcp/6091/p2p/16Uiu2HAmJ7EjAH3wF9dirUBqi6h9byFjKuT4L6uQgTYh24DCQqcE","/ip4/172.18.253.139/tcp/6092/ws/p2p/16Uiu2HAmJ7EjAH3wF9dirUBqi6h9byFjKuT4L6uQgTYh24DCQqcE"],"enrUri":"enr:-LO4QMBc88SVzHcDgRckn_9GIbYn3aV4a2RwCov-_yOsjqjuP3LACwk3J6s8Cl9wwj8TfwpmtaciWQjpIi-R_xis4oUBgmlkgnY0gmlwhKwS_YuKbXVsdGlhZGRyc4wACgSsEv2LBhfM3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNRA8q5NviZt6CuwnyrxFvIiGcU1fJgRAGgbKjFRRpmw4N0Y3CCF8uDdWRwghfNhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6090/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.1.237/tcp/26579/p2p/16Uiu2HAmRDoRGoRJ9k2juXwZ7frPFXSA2mkdZdy4B5QBcHsV9Qaa"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-14_04-18-04__662e47d7-33e3-4960-bb37-1784fa710f67__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.23.51
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['2135', '2136', '2137', '2138', '2139']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 2135:2135 -p 2136:2136 -p 2137:2137 -p 2138:2138 -p 2139:2139 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2137 --rest-port=2135 --tcp-port=2136 --discv5-udp-port=2138 --rest-address=0.0.0.0 --nat=extip:172.18.23.51 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ddbbacbcab1a95a875fa117a2c3f9a4593a0de7fa6812a6b3f51b9bdeeacb40e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2139 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QBFt29F8Zb4G_-BIvHRTszzXdIpDCummoyC2Yb0bEfsbXUjjSTtBFj4r9wiFWWCPDzBdCx5RgZPi1JTlm7aQSc4BgmlkgnY0gmlwhKwSAe2KbXVsdGlhZGRyc4wACgSsEgHtBmfU3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO6tAy7L0nEfW3SggruBrZZWPsRWcjR_229mfemNnixl4N0Y3CCZ9ODdWRwgmfVhXdha3UyCQ --lightpushnode=/ip4/172.18.1.237/tcp/26579/p2p/16Uiu2HAmRDoRGoRJ9k2juXwZ7frPFXSA2mkdZdy4B5QBcHsV9Qaa --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.23.51 waku 1944797996b14890bb55ab295ffb2beec6542765be89f13404b1b8321283fdb0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 1944797996b1. Setting up logs at ./log/docker/lightpush_node1_2024-09-14_04-18-04__662e47d7-33e3-4960-bb37-1784fa710f67__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 2135
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2135/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2135/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.23.51/tcp/2136/p2p/16Uiu2HAmUVwRJejMHfY7o8pLRm7nc2YnrdAh3o3ZXzEHwLcfA9f2","/ip4/172.18.23.51/tcp/2137/ws/p2p/16Uiu2HAmUVwRJejMHfY7o8pLRm7nc2YnrdAh3o3ZXzEHwLcfA9f2"],"enrUri":"enr:-LO4QKznOar5xWPa2o86JOLFbFf5l1cTZInjZzxkkfu0A67dLhFsZfnm_eVybaVIZUwt21bqxukVGJl096AlViJW7AIBgmlkgnY0gmlwhKwSFzOKbXVsdGlhZGRyc4wACgSsEhczBghZ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPraXMf8e-ox3IWXb8754xAHpD3ubsFcKzD6qiiu-BGJYN0Y3CCCFiDdWRwgghahXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2135/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.1.237/tcp/26579/p2p/16Uiu2HAmRDoRGoRJ9k2juXwZ7frPFXSA2mkdZdy4B5QBcHsV9Qaa"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2135/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.253.139/tcp/6091/p2p/16Uiu2HAmJ7EjAH3wF9dirUBqi6h9byFjKuT4L6uQgTYh24DCQqcE"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26578/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6090/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2135/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726287491600176128}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26578/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726287491600176128,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6090/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726287491600176128,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d19a01a6514c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1c8416e57e78
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1944797996b1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.