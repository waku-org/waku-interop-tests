[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publishing_node_restarts with id: 2025-01-17_04-11-55__4e1388f1-2c64-4cdf-8c0c-eb3c7b19280a
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-17_04-11-55__4e1388f1-2c64-4cdf-8c0c-eb3c7b19280a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.178.136
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['59489', '59490', '59491', '59492', '59493']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 59489:59489 -p 59490:59490 -p 59491:59491 -p 59492:59492 -p 59493:59493 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59491 --rest-port=59489 --tcp-port=59490 --discv5-udp-port=59492 --rest-address=0.0.0.0 --nat=extip:172.18.178.136 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0d1a5aabe5fab1bbf2fe8cff7fcc69c384541adefdece4e0c0f4a8e9584b0c6d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59493 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.178.136 waku 12c7f8f9256cf15361d1f7897f4d6f0d0dada966ed2d27ba82e660566df9dcae
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 12c7f8f9256c. Setting up logs at ./log/docker/publishing_node1_2025-01-17_04-11-55__4e1388f1-2c64-4cdf-8c0c-eb3c7b19280a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 59489
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 36aef7de9015. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59489/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59489/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.178.136/tcp/59490/p2p/16Uiu2HAkwjvw3W7HgHm2L6RaotaxUR37qFX3jQWRwyoJ4m9dHG9z","/ip4/172.18.178.136/tcp/59491/ws/p2p/16Uiu2HAkwjvw3W7HgHm2L6RaotaxUR37qFX3jQWRwyoJ4m9dHG9z"],"enrUri":"enr:-L24QLGASwKHuZilH0AeH6ZOtCwsKC0DdEJG-aRirJs-ob6XEJvYckmAog3WMkGqainfwsvm-FfIMxHUM-Is5n_VYXYCgmlkgnY0gmlwhKwSsoiKbXVsdGlhZGRyc5YACASsErKIBuhiAAoErBKyiAboY90DgnJzhQADAQAAiXNlY3AyNTZrMaECImS8QQ4WmRNfW_R0vli3-J-GtFHaFbDDGQbXVlnzTGWDdGNwguhig3VkcILoZIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-17_04-11-55__4e1388f1-2c64-4cdf-8c0c-eb3c7b19280a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.211.187
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['53506', '53507', '53508', '53509', '53510']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 53506:53506 -p 53507:53507 -p 53508:53508 -p 53509:53509 -p 53510:53510 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53508 --rest-port=53506 --tcp-port=53507 --discv5-udp-port=53509 --rest-address=0.0.0.0 --nat=extip:172.18.211.187 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fb4cd4e36cff906e5734eecc45fbecdbfb017b0cee8fb3efebf94346e2ce204c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53510 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLGASwKHuZilH0AeH6ZOtCwsKC0DdEJG-aRirJs-ob6XEJvYckmAog3WMkGqainfwsvm-FfIMxHUM-Is5n_VYXYCgmlkgnY0gmlwhKwSsoiKbXVsdGlhZGRyc5YACASsErKIBuhiAAoErBKyiAboY90DgnJzhQADAQAAiXNlY3AyNTZrMaECImS8QQ4WmRNfW_R0vli3-J-GtFHaFbDDGQbXVlnzTGWDdGNwguhig3VkcILoZIV3YWt1MgM --storenode=/ip4/172.18.178.136/tcp/59490/p2p/16Uiu2HAkwjvw3W7HgHm2L6RaotaxUR37qFX3jQWRwyoJ4m9dHG9z --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.211.187 waku 52294c5fe3efa0bb3c0aac1a04fef1df43569f2e010bf118147bdf4d3867c979
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 52294c5fe3ef. Setting up logs at ./log/docker/store_node1_2025-01-17_04-11-55__4e1388f1-2c64-4cdf-8c0c-eb3c7b19280a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 53506
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53506/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53506/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.211.187/tcp/53507/p2p/16Uiu2HAmNhtz28qnhrPzh2k4R5xhrh9KLsfD6v5BC99PQHiTkBC6","/ip4/172.18.211.187/tcp/53508/ws/p2p/16Uiu2HAmNhtz28qnhrPzh2k4R5xhrh9KLsfD6v5BC99PQHiTkBC6"],"enrUri":"enr:-L24QFFPuGaj2FV5U4iUO2qX8zUSgbrqFcjKP8tE_HJEK9cKTLr6bWrHWKwElXmPu0V6lV49Ah5s5spJR9Xc3MXIoKICgmlkgnY0gmlwhKwS07uKbXVsdGlhZGRyc5YACASsEtO7BtEDAAoErBLTuwbRBN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDlVOLJIwOfWIMJx1BgXnIdGHKkRbI9Qvtpj2Sfc8RyGODdGNwgtEDg3VkcILRBYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53506/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.178.136/tcp/59490/p2p/16Uiu2HAkwjvw3W7HgHm2L6RaotaxUR37qFX3jQWRwyoJ4m9dHG9z"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59489/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53506/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59489/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59489/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 12c7f8f9256c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 52294c5fe3ef
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 12c7f8f9256c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-17_04-11-55__4e1388f1-2c64-4cdf-8c0c-eb3c7b19280a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-17_04-11-55__4e1388f1-2c64-4cdf-8c0c-eb3c7b19280a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publishing_node_restarts with id: 2025-01-17_04-12-00__202a82b1-6946-491b-a67d-4f48ce59fada
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-17_04-12-00__202a82b1-6946-491b-a67d-4f48ce59fada__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.110.235
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['56299', '56300', '56301', '56302', '56303']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 56299:56299 -p 56300:56300 -p 56301:56301 -p 56302:56302 -p 56303:56303 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56301 --rest-port=56299 --tcp-port=56300 --discv5-udp-port=56302 --rest-address=0.0.0.0 --nat=extip:172.18.110.235 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3b68d5e7950dc8f78d96ea44cee5babc1a47ddda85b2d8b478e2c66f229aa4b2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56303 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.110.235 waku ff4cd207bf61521a9ce80aa3082b3203a1322fd1c4e07481c45d37560ac167dc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ff4cd207bf61. Setting up logs at ./log/docker/publishing_node1_2025-01-17_04-12-00__202a82b1-6946-491b-a67d-4f48ce59fada__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 56299
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 52294c5fe3ef. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56299/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56299/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.110.235/tcp/56300/p2p/16Uiu2HAm8rTqWyssHVQeBdPhzqLhFfzamEV6ZLoVxE6CSmjoWYPM","/ip4/172.18.110.235/tcp/56301/ws/p2p/16Uiu2HAm8rTqWyssHVQeBdPhzqLhFfzamEV6ZLoVxE6CSmjoWYPM"],"enrUri":"enr:-L24QIYJ0yAw_foUNXrBHZYeC2y1B4NOVAvP_byskTdFg9iMcju7kL1Opz5asGkC7EW83Ol-G7oERiTEva_4xgdoovQCgmlkgnY0gmlwhKwSbuuKbXVsdGlhZGRyc5YACASsEm7rBtvsAAoErBJu6wbb7d0DgnJzhQADAQAAiXNlY3AyNTZrMaECx4G4chEwu64HVYShhSPGpZH1aFC4oXfcA8QdapMBipSDdGNwgtvsg3VkcILb7oV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-17_04-12-00__202a82b1-6946-491b-a67d-4f48ce59fada__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.129.158
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['64086', '64087', '64088', '64089', '64090']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 64086:64086 -p 64087:64087 -p 64088:64088 -p 64089:64089 -p 64090:64090 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64088 --rest-port=64086 --tcp-port=64087 --discv5-udp-port=64089 --rest-address=0.0.0.0 --nat=extip:172.18.129.158 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=20a1821ffa9a69cdfd8720fe343a3fcea469cc8e3c6ee1e9bc322fea9befaf3c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64090 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QIYJ0yAw_foUNXrBHZYeC2y1B4NOVAvP_byskTdFg9iMcju7kL1Opz5asGkC7EW83Ol-G7oERiTEva_4xgdoovQCgmlkgnY0gmlwhKwSbuuKbXVsdGlhZGRyc5YACASsEm7rBtvsAAoErBJu6wbb7d0DgnJzhQADAQAAiXNlY3AyNTZrMaECx4G4chEwu64HVYShhSPGpZH1aFC4oXfcA8QdapMBipSDdGNwgtvsg3VkcILb7oV3YWt1MgM --storenode=/ip4/172.18.110.235/tcp/56300/p2p/16Uiu2HAm8rTqWyssHVQeBdPhzqLhFfzamEV6ZLoVxE6CSmjoWYPM --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.129.158 waku 01683abd1de0bc9a82d3c5b44a28aac30fe19fbcfbc33ef617df665a08b1e947
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 01683abd1de0. Setting up logs at ./log/docker/store_node1_2025-01-17_04-12-00__202a82b1-6946-491b-a67d-4f48ce59fada__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 64086
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64086/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64086/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.129.158/tcp/64087/p2p/16Uiu2HAkzV9FNWxmBB4cqaFoGMiDKXC9AxjNBfbUYUgbrjoZfEew","/ip4/172.18.129.158/tcp/64088/ws/p2p/16Uiu2HAkzV9FNWxmBB4cqaFoGMiDKXC9AxjNBfbUYUgbrjoZfEew"],"enrUri":"enr:-L24QACByNvuU3bbSSubG_O0oXpUNeWrnV6oAKmFlPZWm9G-Xi7Jh3vbJzUNu9Dkvke7e3MACx8Usg7kFN7V1xT_9HsCgmlkgnY0gmlwhKwSgZ6KbXVsdGlhZGRyc5YACASsEoGeBvpXAAoErBKBngb6WN0DgnJzhQADAQAAiXNlY3AyNTZrMaECSy4Cfy1HBbkOoa-Zq8XuKmCSJWRWEQkKBseB6ehzjxyDdGNwgvpXg3VkcIL6WYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64086/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.110.235/tcp/56300/p2p/16Uiu2HAm8rTqWyssHVQeBdPhzqLhFfzamEV6ZLoVxE6CSmjoWYPM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56299/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64086/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56299/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56299/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ff4cd207bf61
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 01683abd1de0
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ff4cd207bf61. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-17_04-12-00__202a82b1-6946-491b-a67d-4f48ce59fada__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-17_04-12-00__202a82b1-6946-491b-a67d-4f48ce59fada__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publishing_node_restarts with id: 2025-01-17_04-12-14__2d383b0f-8d0f-4ead-b497-a0f35964bfee
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-17_04-12-14__2d383b0f-8d0f-4ead-b497-a0f35964bfee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.71.130
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['3162', '3163', '3164', '3165', '3166']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 3162:3162 -p 3163:3163 -p 3164:3164 -p 3165:3165 -p 3166:3166 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3164 --rest-port=3162 --tcp-port=3163 --discv5-udp-port=3165 --rest-address=0.0.0.0 --nat=extip:172.18.71.130 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3ae8a00ed1a1ddf9e0d3c3d615e20c27aa5fae81aeecbddbbe4baabfdfee4ce2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3166 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.71.130 waku 2cdf8d7c67da1a55ad2718eb70ca69866e6aeeadf06d4e8ed863aad3f41e0120
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2cdf8d7c67da. Setting up logs at ./log/docker/publishing_node1_2025-01-17_04-12-14__2d383b0f-8d0f-4ead-b497-a0f35964bfee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 3162
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 01683abd1de0. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3162/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3162/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.71.130/tcp/3163/p2p/16Uiu2HAmKsuvWcqHY7KKJr2VqH73bGptbHLjhMsxqBLkGEWjHsYf","/ip4/172.18.71.130/tcp/3164/ws/p2p/16Uiu2HAmKsuvWcqHY7KKJr2VqH73bGptbHLjhMsxqBLkGEWjHsYf"],"enrUri":"enr:-L24QN0BeHDm65LGhPbtPjWONNxMk456skHb0ppI3VYErrmYfRu9eLOFnpUV5KiV6buEcSYujZGF8VvahXdDRnoQEgsCgmlkgnY0gmlwhKwSR4KKbXVsdGlhZGRyc5YACASsEkeCBgxbAAoErBJHggYMXN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDa1FaZxnO-4vco8M4D3m0_gmpgFJnXRnFtr6gxhYiUjSDdGNwggxbg3VkcIIMXYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-17_04-12-14__2d383b0f-8d0f-4ead-b497-a0f35964bfee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.152.61
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['62086', '62087', '62088', '62089', '62090']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 62086:62086 -p 62087:62087 -p 62088:62088 -p 62089:62089 -p 62090:62090 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62088 --rest-port=62086 --tcp-port=62087 --discv5-udp-port=62089 --rest-address=0.0.0.0 --nat=extip:172.18.152.61 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=19dd55238b8d8fdf35ab7cfccdc6cadcd82b5e2787d4a91efe884d7fc6cf4dc7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62090 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QN0BeHDm65LGhPbtPjWONNxMk456skHb0ppI3VYErrmYfRu9eLOFnpUV5KiV6buEcSYujZGF8VvahXdDRnoQEgsCgmlkgnY0gmlwhKwSR4KKbXVsdGlhZGRyc5YACASsEkeCBgxbAAoErBJHggYMXN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDa1FaZxnO-4vco8M4D3m0_gmpgFJnXRnFtr6gxhYiUjSDdGNwggxbg3VkcIIMXYV3YWt1MgM --storenode=/ip4/172.18.71.130/tcp/3163/p2p/16Uiu2HAmKsuvWcqHY7KKJr2VqH73bGptbHLjhMsxqBLkGEWjHsYf --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.152.61 waku dd7460a4fe378117797f057d3a551337769ed1604955e70b13e20d89c014ccc5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID dd7460a4fe37. Setting up logs at ./log/docker/store_node1_2025-01-17_04-12-14__2d383b0f-8d0f-4ead-b497-a0f35964bfee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 62086
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62086/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62086/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.152.61/tcp/62087/p2p/16Uiu2HAmAHhcUf1pDLJ7qDoMUVJLbWo14LzxbzfHWxh7occbNy5s","/ip4/172.18.152.61/tcp/62088/ws/p2p/16Uiu2HAmAHhcUf1pDLJ7qDoMUVJLbWo14LzxbzfHWxh7occbNy5s"],"enrUri":"enr:-L24QF3eXwZmxILvJmA0ooR37OnOSIvbfMkyicd4xQrcKQ0Eal9HJ9H9DrW93LBdNBMMstOa9a8RK0mnW9vn1GcHMgQCgmlkgnY0gmlwhKwSmD2KbXVsdGlhZGRyc5YACASsEpg9BvKHAAoErBKYPQbyiN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3NSA1uY5vW47u8uuoWJqGwniIJIPT1FUJQ7eGZGCLwKDdGNwgvKHg3VkcILyiYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62086/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.71.130/tcp/3163/p2p/16Uiu2HAmKsuvWcqHY7KKJr2VqH73bGptbHLjhMsxqBLkGEWjHsYf"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3162/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62086/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3162/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3162/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2cdf8d7c67da
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id dd7460a4fe37
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2cdf8d7c67da. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-17_04-12-14__2d383b0f-8d0f-4ead-b497-a0f35964bfee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-17_04-12-14__2d383b0f-8d0f-4ead-b497-a0f35964bfee__wakuorg_nwaku:latest.log