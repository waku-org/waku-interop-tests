[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_get_store_duplicate_messages with id: 2025-01-17_04-04-43__af3e8561-caf6-4415-a5f4-42a9459d2848
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-17_04-04-43__af3e8561-caf6-4415-a5f4-42a9459d2848__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.200.17
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['9126', '9127', '9128', '9129', '9130']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 9126:9126 -p 9127:9127 -p 9128:9128 -p 9129:9129 -p 9130:9130 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9128 --rest-port=9126 --tcp-port=9127 --discv5-udp-port=9129 --rest-address=0.0.0.0 --nat=extip:172.18.200.17 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f22e9540b7d9cd08bcb9be6c1a5c63b0e3fdf89c3edaeb17166cadb52084a7ac --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9130 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.200.17 waku e90328a725d0d4ecdcacb472699585158975c419ff5753bcf44673757197e3f8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e90328a725d0. Setting up logs at ./log/docker/publishing_node1_2025-01-17_04-04-43__af3e8561-caf6-4415-a5f4-42a9459d2848__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 9126
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d78ce2c90c98. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9126/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9126/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.200.17/tcp/9127/p2p/16Uiu2HAkzwv68ytFw2rVaA62HNPvx5TpjVL9dZksSTKqPhAmWrJq","/ip4/172.18.200.17/tcp/9128/ws/p2p/16Uiu2HAkzwv68ytFw2rVaA62HNPvx5TpjVL9dZksSTKqPhAmWrJq"],"enrUri":"enr:-L24QF10eU4bMjTzghGkTH3k_Da5x3SeEllOmIOgocl-m6M5YuLKsib37J1qbi8F8XHkv3y_bMNojmNUakr6XpWa7HcCgmlkgnY0gmlwhKwSyBGKbXVsdGlhZGRyc5YACASsEsgRBiOnAAoErBLIEQYjqN0DgnJzhQADAQAAiXNlY3AyNTZrMaECUgnP_JCAUqfl5r8z7_bBkZQYz2L9_pjSzt1K7SWndNaDdGNwgiOng3VkcIIjqYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-17_04-04-43__af3e8561-caf6-4415-a5f4-42a9459d2848__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.158.140
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['30117', '30118', '30119', '30120', '30121']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 30117:30117 -p 30118:30118 -p 30119:30119 -p 30120:30120 -p 30121:30121 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30119 --rest-port=30117 --tcp-port=30118 --discv5-udp-port=30120 --rest-address=0.0.0.0 --nat=extip:172.18.158.140 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aafc65ac1b0ed24be60038aedbaf1c0658acac209fac7d4436edb214dbf82a7e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30121 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QF10eU4bMjTzghGkTH3k_Da5x3SeEllOmIOgocl-m6M5YuLKsib37J1qbi8F8XHkv3y_bMNojmNUakr6XpWa7HcCgmlkgnY0gmlwhKwSyBGKbXVsdGlhZGRyc5YACASsEsgRBiOnAAoErBLIEQYjqN0DgnJzhQADAQAAiXNlY3AyNTZrMaECUgnP_JCAUqfl5r8z7_bBkZQYz2L9_pjSzt1K7SWndNaDdGNwgiOng3VkcIIjqYV3YWt1MgM --storenode=/ip4/172.18.200.17/tcp/9127/p2p/16Uiu2HAkzwv68ytFw2rVaA62HNPvx5TpjVL9dZksSTKqPhAmWrJq --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.158.140 waku 4780906a7f86f2afb7a653caf63f482008ee11a04019acc70d792f6c86bb499b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4780906a7f86. Setting up logs at ./log/docker/store_node1_2025-01-17_04-04-43__af3e8561-caf6-4415-a5f4-42a9459d2848__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 30117
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30117/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30117/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.158.140/tcp/30118/p2p/16Uiu2HAmEfUqLMnJQevb1AwHrshHbxYzhqVw3cofPGsEyKQkKmN4","/ip4/172.18.158.140/tcp/30119/ws/p2p/16Uiu2HAmEfUqLMnJQevb1AwHrshHbxYzhqVw3cofPGsEyKQkKmN4"],"enrUri":"enr:-L24QAHF4nrrVpLFChNYGShkIzLzD0wxKGSH6crkc3JVwpIONsOGZWz5bAt_FDXhSH3XUUOQiLlKBKxhtf965LH1U-gCgmlkgnY0gmlwhKwSnoyKbXVsdGlhZGRyc5YACASsEp6MBnWmAAoErBKejAZ1p90DgnJzhQADAQAAiXNlY3AyNTZrMaEDHdeUjV1No_cqIfiVExXwDaDaUw-sM0WyJrPoHgYpqlWDdGNwgnWmg3VkcIJ1qIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30117/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.200.17/tcp/9127/p2p/16Uiu2HAkzwv68ytFw2rVaA62HNPvx5TpjVL9dZksSTKqPhAmWrJq"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9126/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30117/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9126/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9126/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9126/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e90328a725d0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4780906a7f86
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e90328a725d0. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-17_04-04-43__af3e8561-caf6-4415-a5f4-42a9459d2848__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-17_04-04-43__af3e8561-caf6-4415-a5f4-42a9459d2848__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_get_store_duplicate_messages with id: 2025-01-17_04-04-49__795b2de3-a440-4451-b879-bd7e589bfb4b
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-17_04-04-49__795b2de3-a440-4451-b879-bd7e589bfb4b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.116.105
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['28786', '28787', '28788', '28789', '28790']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 28786:28786 -p 28787:28787 -p 28788:28788 -p 28789:28789 -p 28790:28790 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28788 --rest-port=28786 --tcp-port=28787 --discv5-udp-port=28789 --rest-address=0.0.0.0 --nat=extip:172.18.116.105 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=edca38df96cacaf7fcea3eef97d66ede9142cc8cdc7dba81026b4bfbaaad0d38 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28790 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.116.105 waku 038d2232a4ad36df2cce43cf65981029d514b12838557daa36fa86ebdb85843c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 038d2232a4ad. Setting up logs at ./log/docker/publishing_node1_2025-01-17_04-04-49__795b2de3-a440-4451-b879-bd7e589bfb4b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 28786
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4780906a7f86. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28786/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28786/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.116.105/tcp/28787/p2p/16Uiu2HAkyH4S7Z1cWjjs7uE7oKASUSZe1d2oan3rqSs98tpyG3LW","/ip4/172.18.116.105/tcp/28788/ws/p2p/16Uiu2HAkyH4S7Z1cWjjs7uE7oKASUSZe1d2oan3rqSs98tpyG3LW"],"enrUri":"enr:-L24QBeSsPMrTbd6-r8YJopxhcRYY3XP0zaLq5M3LvdheiF4IyvXx2YMyztuqFivUs6qpoqHHTxVH0nCvA3p_EWP9KACgmlkgnY0gmlwhKwSdGmKbXVsdGlhZGRyc5YACASsEnRpBnBzAAoErBJ0aQZwdN0DgnJzhQADAQAAiXNlY3AyNTZrMaECOTnotR6rDG6cisUcMkOEcFeBqqIaTPRf0Y8n9tW8MyuDdGNwgnBzg3VkcIJwdYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-17_04-04-49__795b2de3-a440-4451-b879-bd7e589bfb4b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.19.230
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['52475', '52476', '52477', '52478', '52479']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 52475:52475 -p 52476:52476 -p 52477:52477 -p 52478:52478 -p 52479:52479 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52477 --rest-port=52475 --tcp-port=52476 --discv5-udp-port=52478 --rest-address=0.0.0.0 --nat=extip:172.18.19.230 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0f32954bfe67f0b4e6fc2cb60ae5b0e3cdbb9031ff6e601cbeff7d6f65abb2b9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52479 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QBeSsPMrTbd6-r8YJopxhcRYY3XP0zaLq5M3LvdheiF4IyvXx2YMyztuqFivUs6qpoqHHTxVH0nCvA3p_EWP9KACgmlkgnY0gmlwhKwSdGmKbXVsdGlhZGRyc5YACASsEnRpBnBzAAoErBJ0aQZwdN0DgnJzhQADAQAAiXNlY3AyNTZrMaECOTnotR6rDG6cisUcMkOEcFeBqqIaTPRf0Y8n9tW8MyuDdGNwgnBzg3VkcIJwdYV3YWt1MgM --storenode=/ip4/172.18.116.105/tcp/28787/p2p/16Uiu2HAkyH4S7Z1cWjjs7uE7oKASUSZe1d2oan3rqSs98tpyG3LW --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.19.230 waku 364a633ab9289342735de7e47d2e5057ff2556aae18992ec88b38eac44254902
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 364a633ab928. Setting up logs at ./log/docker/store_node1_2025-01-17_04-04-49__795b2de3-a440-4451-b879-bd7e589bfb4b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 52475
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52475/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52475/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.19.230/tcp/52476/p2p/16Uiu2HAmRe82De9RhqrhoAsTh1CG7cEtLBt8fGAwZymYeNeeZoLC","/ip4/172.18.19.230/tcp/52477/ws/p2p/16Uiu2HAmRe82De9RhqrhoAsTh1CG7cEtLBt8fGAwZymYeNeeZoLC"],"enrUri":"enr:-L24QNlpVG-vdWlUhhJWH_AkjYczvKl-svPsa1quLiw-wi3gCXCZmhs5X4wuf3d-SjOLs5qLkbDj0nR2l0W6fP6RSCkCgmlkgnY0gmlwhKwSE-aKbXVsdGlhZGRyc5YACASsEhPmBsz8AAoErBIT5gbM_d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDwO8F6Bu2mMc4DSUgeXXzFsiwUelRbaXQlTunKozESAGDdGNwgsz8g3VkcILM_oV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52475/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.116.105/tcp/28787/p2p/16Uiu2HAkyH4S7Z1cWjjs7uE7oKASUSZe1d2oan3rqSs98tpyG3LW"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28786/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52475/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28786/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28786/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28786/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 038d2232a4ad
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 364a633ab928
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 038d2232a4ad. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-17_04-04-49__795b2de3-a440-4451-b879-bd7e589bfb4b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-17_04-04-49__795b2de3-a440-4451-b879-bd7e589bfb4b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_get_store_duplicate_messages with id: 2025-01-17_04-04-54__9e2e02fd-6fdc-419b-a5bc-3f24d9ac9567
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-17_04-04-54__9e2e02fd-6fdc-419b-a5bc-3f24d9ac9567__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.77.164
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['57392', '57393', '57394', '57395', '57396']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 57392:57392 -p 57393:57393 -p 57394:57394 -p 57395:57395 -p 57396:57396 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57394 --rest-port=57392 --tcp-port=57393 --discv5-udp-port=57395 --rest-address=0.0.0.0 --nat=extip:172.18.77.164 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2e7c742cc7d8415a9bd3ecbcffc2659ab9bc9f81c316eefacac8bf531f1a830b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57396 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.77.164 waku 182aeb59fae23bdc9bee7b942b7e9f2b231fdb20879df87933fe40e63ff3f77b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 182aeb59fae2. Setting up logs at ./log/docker/publishing_node1_2025-01-17_04-04-54__9e2e02fd-6fdc-419b-a5bc-3f24d9ac9567__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 57392
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 364a633ab928. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57392/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57392/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.77.164/tcp/57393/p2p/16Uiu2HAm4bxtzrt98JyyKYSLSZFRjFUzkxQao2C1ywqk6JmgXw9Y","/ip4/172.18.77.164/tcp/57394/ws/p2p/16Uiu2HAm4bxtzrt98JyyKYSLSZFRjFUzkxQao2C1ywqk6JmgXw9Y"],"enrUri":"enr:-L24QObPdynZpa1Ia5-dIyV1ZYVD7RqDAWGpsxD_j--uVGXfPRRmAuODD0enM44IiHhUQimzid9NKU96NKEoDXbILG4CgmlkgnY0gmlwhKwSTaSKbXVsdGlhZGRyc5YACASsEk2kBuAxAAoErBJNpAbgMt0DgnJzhQADAQAAiXNlY3AyNTZrMaECiFwecNG77dwtCUDhgJhMCX4xvQaM9nbfWOJi3Niy7ueDdGNwguAxg3VkcILgM4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-17_04-04-54__9e2e02fd-6fdc-419b-a5bc-3f24d9ac9567__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.130.44
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['54019', '54020', '54021', '54022', '54023']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 54019:54019 -p 54020:54020 -p 54021:54021 -p 54022:54022 -p 54023:54023 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54021 --rest-port=54019 --tcp-port=54020 --discv5-udp-port=54022 --rest-address=0.0.0.0 --nat=extip:172.18.130.44 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9cff7e1dabbddfc1dcce6bb79eef13f7c6447a0e9f3b1ed5fd284740c047b4e2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54023 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QObPdynZpa1Ia5-dIyV1ZYVD7RqDAWGpsxD_j--uVGXfPRRmAuODD0enM44IiHhUQimzid9NKU96NKEoDXbILG4CgmlkgnY0gmlwhKwSTaSKbXVsdGlhZGRyc5YACASsEk2kBuAxAAoErBJNpAbgMt0DgnJzhQADAQAAiXNlY3AyNTZrMaECiFwecNG77dwtCUDhgJhMCX4xvQaM9nbfWOJi3Niy7ueDdGNwguAxg3VkcILgM4V3YWt1MgM --storenode=/ip4/172.18.77.164/tcp/57393/p2p/16Uiu2HAm4bxtzrt98JyyKYSLSZFRjFUzkxQao2C1ywqk6JmgXw9Y --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.130.44 waku 3610272f2228df40f0e234157dbe14dfb62d8e76a13bb342511a9cf934ae87e2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3610272f2228. Setting up logs at ./log/docker/store_node1_2025-01-17_04-04-54__9e2e02fd-6fdc-419b-a5bc-3f24d9ac9567__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 54019
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54019/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54019/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.130.44/tcp/54020/p2p/16Uiu2HAmNE877AAN6ukmiJ8uGMHH8ieC3zJjwouuTBPjufWD8vGJ","/ip4/172.18.130.44/tcp/54021/ws/p2p/16Uiu2HAmNE877AAN6ukmiJ8uGMHH8ieC3zJjwouuTBPjufWD8vGJ"],"enrUri":"enr:-L24QAImCQ5vNF5wHkQ-ofDMg9pdnCavZpK9EuT_UTkPAmspbQsjWj0D5NvkmdPIBI3DdLBH01HQ0xhKJREKPbEoLncCgmlkgnY0gmlwhKwSgiyKbXVsdGlhZGRyc5YACASsEoIsBtMEAAoErBKCLAbTBd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDjjYeQH9EYuqhBUomYi7JMZqMO6jZirRPFvb0nU4GsGODdGNwgtMEg3VkcILTBoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54019/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.77.164/tcp/57393/p2p/16Uiu2HAm4bxtzrt98JyyKYSLSZFRjFUzkxQao2C1ywqk6JmgXw9Y"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57392/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54019/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57392/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57392/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57392/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 182aeb59fae2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 3610272f2228
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 182aeb59fae2. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-17_04-04-54__9e2e02fd-6fdc-419b-a5bc-3f24d9ac9567__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-17_04-04-54__9e2e02fd-6fdc-419b-a5bc-3f24d9ac9567__wakuorg_nwaku:latest.log