[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_relaying_node with id: 2025-01-17_04-02-21__afa6a906-d391-491c-a4cc-f46966b392ba
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-17_04-02-21__afa6a906-d391-491c-a4cc-f46966b392ba__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-17_04-02-21__afa6a906-d391-491c-a4cc-f46966b392ba__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-17_04-02-21__afa6a906-d391-491c-a4cc-f46966b392ba__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:33 Network waku created
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.152.168
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['22015', '22016', '22017', '22018', '22019']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 22015:22015 -p 22016:22016 -p 22017:22017 -p 22018:22018 -p 22019:22019 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22017 --rest-port=22015 --tcp-port=22016 --discv5-udp-port=22018 --rest-address=0.0.0.0 --nat=extip:172.18.152.168 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ca5eaaa101e5918e1deeb12f17a60ffcd63f48dfb197c6b3ffc7c6066c66d1fd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22019 --metrics-logging=true --filter=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.152.168 waku fe7b8db655905368b081e76a010e93696b95e6515a1a803b39cc78813a212053
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fe7b8db65590. Setting up logs at ./log/docker/node1_2025-01-17_04-02-21__afa6a906-d391-491c-a4cc-f46966b392ba__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 22015
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22015/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22015/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.152.168/tcp/22016/p2p/16Uiu2HAm5dEpC15r4MxByDzwcvkbeBS2et7KMed7xpCcLTWYRpmj","/ip4/172.18.152.168/tcp/22017/ws/p2p/16Uiu2HAm5dEpC15r4MxByDzwcvkbeBS2et7KMed7xpCcLTWYRpmj"],"enrUri":"enr:-L24QE6xF8SWLewPXA32A4BtYBclem0-uSf-sCmq1PG5_3X4L1fQjGL7bfTK6hdjS6h0b_ag92MnjY6X7fwcHK6ghssCgmlkgnY0gmlwhKwSmKiKbXVsdGlhZGRyc5YACASsEpioBlYAAAoErBKYqAZWAd0DgnJzhQADAQAAiXNlY3AyNTZrMaECl4tiWSCjQqxXQr18AEG48NM0z1w_KuHjWrid81GSjo6DdGNwglYAg3VkcIJWAoV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.113.48
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['63049', '63050', '63051', '63052', '63053']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 63049:63049 -p 63050:63050 -p 63051:63051 -p 63052:63052 -p 63053:63053 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63051 --rest-port=63049 --tcp-port=63050 --discv5-udp-port=63052 --rest-address=0.0.0.0 --nat=extip:172.18.113.48 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=609ca0cb64e8b30ca4d95756cd4a0c2daf74da0d89de6def5ad6778c31e7483b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63053 --metrics-logging=true --filter=true --relay=true --discv5-bootstrap-node=enr:-L24QE6xF8SWLewPXA32A4BtYBclem0-uSf-sCmq1PG5_3X4L1fQjGL7bfTK6hdjS6h0b_ag92MnjY6X7fwcHK6ghssCgmlkgnY0gmlwhKwSmKiKbXVsdGlhZGRyc5YACASsEpioBlYAAAoErBKYqAZWAd0DgnJzhQADAQAAiXNlY3AyNTZrMaECl4tiWSCjQqxXQr18AEG48NM0z1w_KuHjWrid81GSjo6DdGNwglYAg3VkcIJWAoV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.113.48 waku aaa3ffa402abeb512c4bdc55e2eaf20688bdbf2c276b3ff480d4e94379bcd31f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID aaa3ffa402ab. Setting up logs at ./log/docker/node2_2025-01-17_04-02-21__afa6a906-d391-491c-a4cc-f46966b392ba__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 63049
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63049/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63049/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.113.48/tcp/63050/p2p/16Uiu2HAmSmjJyNhfeYtanSAwjKEwCD858Thfi1FZNQ7oNjKchHR9","/ip4/172.18.113.48/tcp/63051/ws/p2p/16Uiu2HAmSmjJyNhfeYtanSAwjKEwCD858Thfi1FZNQ7oNjKchHR9"],"enrUri":"enr:-L24QBh1NxAewgpRjYhqNmk_7EVMTk_EtCmguh2U5r-KPBNmXbGLmucXU5YEmovso8AcUBYqbwp9tfVK8nbTkavPpnMCgmlkgnY0gmlwhKwScTCKbXVsdGlhZGRyc5YACASsEnEwBvZKAAoErBJxMAb2S90DgnJzhQADAQAAiXNlY3AyNTZrMaED0b2tScYLRhxZv68JCdgEdT94rDva9DSbIQ5734HYrWiDdGNwgvZKg3VkcIL2TIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.41.148
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['26424', '26425', '26426', '26427', '26428']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 26424:26424 -p 26425:26425 -p 26426:26426 -p 26427:26427 -p 26428:26428 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26426 --rest-port=26424 --tcp-port=26425 --discv5-udp-port=26427 --rest-address=0.0.0.0 --nat=extip:172.18.41.148 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e34070d01919f5b0ebe5cdfc70cfdeb96a9660dd7c9ba17cbb9df14993f8dc20 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26428 --metrics-logging=true --relay=false --filternode=/ip4/172.18.113.48/tcp/63050/p2p/16Uiu2HAmSmjJyNhfeYtanSAwjKEwCD858Thfi1FZNQ7oNjKchHR9 --discv5-bootstrap-node=enr:-L24QBh1NxAewgpRjYhqNmk_7EVMTk_EtCmguh2U5r-KPBNmXbGLmucXU5YEmovso8AcUBYqbwp9tfVK8nbTkavPpnMCgmlkgnY0gmlwhKwScTCKbXVsdGlhZGRyc5YACASsEnEwBvZKAAoErBJxMAb2S90DgnJzhQADAQAAiXNlY3AyNTZrMaED0b2tScYLRhxZv68JCdgEdT94rDva9DSbIQ5734HYrWiDdGNwgvZKg3VkcIL2TIV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.41.148 waku 15e193bccd2c243563c912596882e152676783e34af23aa01c22ee92ee4b3510
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 15e193bccd2c. Setting up logs at ./log/docker/node3_2025-01-17_04-02-21__afa6a906-d391-491c-a4cc-f46966b392ba__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 26424
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26424/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26424/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.41.148/tcp/26425/p2p/16Uiu2HAkucNAraCR453t3rGpyZ9swdNCTnkKTgocYxANApM2qh7K","/ip4/172.18.41.148/tcp/26426/ws/p2p/16Uiu2HAkucNAraCR453t3rGpyZ9swdNCTnkKTgocYxANApM2qh7K"],"enrUri":"enr:-L24QLD4sfXEXppab2uHRAQZGnGKmjHRtU7Pz3UGp1vmJDWYLEsYqMAbIJ1Nv3Rkb_GcCIyhgaEL3qV9u6q2e9iZwhkCgmlkgnY0gmlwhKwSKZSKbXVsdGlhZGRyc5YACASsEimUBmc5AAoErBIplAZnOt0DgnJzhQADAQAAiXNlY3AyNTZrMaECAr1Ae6_s5inGoRwEbPqgasxAqBX-7ZTpgtJNGYeRG16DdGNwgmc5g3VkcIJnO4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22015/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63049/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26424/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22015/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.113.48/tcp/63050/p2p/16Uiu2HAmSmjJyNhfeYtanSAwjKEwCD858Thfi1FZNQ7oNjKchHR9","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63049/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.152.168/tcp/22016/p2p/16Uiu2HAm5dEpC15r4MxByDzwcvkbeBS2et7KMed7xpCcLTWYRpmj","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.41.148/tcp/26425/p2p/16Uiu2HAkucNAraCR453t3rGpyZ9swdNCTnkKTgocYxANApM2qh7K","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26424/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.113.48/tcp/63050/p2p/16Uiu2HAmSmjJyNhfeYtanSAwjKEwCD858Thfi1FZNQ7oNjKchHR9","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22015/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26424/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1737086577836679936,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id fe7b8db65590
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id aaa3ffa402ab
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fe7b8db65590. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 15e193bccd2c
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container aaa3ffa402ab. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.