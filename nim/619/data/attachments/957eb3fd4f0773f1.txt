[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_not_stored_when_ephemeral_true with id: 2025-01-17_04-02-26__5bb891df-9c02-4f91-bd80-fd6811b13613
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-17_04-02-26__5bb891df-9c02-4f91-bd80-fd6811b13613__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-17_04-02-26__5bb891df-9c02-4f91-bd80-fd6811b13613__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-17_04-02-26__5bb891df-9c02-4f91-bd80-fd6811b13613__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:389 Start 3 nodes 
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:33 Network waku created
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.246.188
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10355', '10356', '10357', '10358', '10359']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10355:10355 -p 10356:10356 -p 10357:10357 -p 10358:10358 -p 10359:10359 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10357 --rest-port=10355 --tcp-port=10356 --discv5-udp-port=10358 --rest-address=0.0.0.0 --nat=extip:172.18.246.188 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cf4abcf30887dbe6adbfc7d572e3da0ab5db5de6e5c5fd6c49daada0ae651b56 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10359 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.246.188 waku 298d27e2f5e22f2a711ca9d492dc7e5e116a725635703173f4f7365bafed3a84
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 298d27e2f5e2. Setting up logs at ./log/docker/node1_2025-01-17_04-02-26__5bb891df-9c02-4f91-bd80-fd6811b13613__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 10355
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10355/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10355/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.246.188/tcp/10356/p2p/16Uiu2HAmGP8G1ph5QL1Pcs7ij2VWBVAsLre8GEHemSAtyU3oFWy7","/ip4/172.18.246.188/tcp/10357/ws/p2p/16Uiu2HAmGP8G1ph5QL1Pcs7ij2VWBVAsLre8GEHemSAtyU3oFWy7"],"enrUri":"enr:-L24QKhTUB86YERmUZ5Y0OzO9zRW_VkPpPzkr6GGzPY4HCxqSkAX1uxvTkfOWoOuPvCvOlGfeOtulWvOzAkgrxVl0SACgmlkgnY0gmlwhKwS9ryKbXVsdGlhZGRyc5YACASsEva8Bih0AAoErBL2vAYodd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDN15lxjdWekhsr962cxc3lFFfbYeizS-rHqu792wnYdqDdGNwgih0g3VkcIIodoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.181.88
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5867', '5868', '5869', '5870', '5871']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5867:5867 -p 5868:5868 -p 5869:5869 -p 5870:5870 -p 5871:5871 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5869 --rest-port=5867 --tcp-port=5868 --discv5-udp-port=5870 --rest-address=0.0.0.0 --nat=extip:172.18.181.88 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4c9edc35e4a66bfdecf96a79ebead52fdfc5e58ad0af08acdae0bbbe8cb36ed2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5871 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QKhTUB86YERmUZ5Y0OzO9zRW_VkPpPzkr6GGzPY4HCxqSkAX1uxvTkfOWoOuPvCvOlGfeOtulWvOzAkgrxVl0SACgmlkgnY0gmlwhKwS9ryKbXVsdGlhZGRyc5YACASsEva8Bih0AAoErBL2vAYodd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDN15lxjdWekhsr962cxc3lFFfbYeizS-rHqu792wnYdqDdGNwgih0g3VkcIIodoV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.181.88 waku d1ab220709d0d29d2a93f11325d31a5ff692626b0fd99a677379f78f5914366f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d1ab220709d0. Setting up logs at ./log/docker/node2_2025-01-17_04-02-26__5bb891df-9c02-4f91-bd80-fd6811b13613__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 5867
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5867/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5867/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.181.88/tcp/5868/p2p/16Uiu2HAm4AXB8NUuBeYphc6rAoSq1ZMtnPsfdtyjARGdDEw6Hj12","/ip4/172.18.181.88/tcp/5869/ws/p2p/16Uiu2HAm4AXB8NUuBeYphc6rAoSq1ZMtnPsfdtyjARGdDEw6Hj12"],"enrUri":"enr:-L24QB_tVuJuNUNsUUEJSCUpoQTZXUNwwjTcInOryNkDrRbMW1J9g_jiXkGnqUphgou4BTj1a1A7rsxfF8PhwUs6rq0CgmlkgnY0gmlwhKwStViKbXVsdGlhZGRyc5YACASsErVYBhbsAAoErBK1WAYW7d0DgnJzhQADAQAAiXNlY3AyNTZrMaECgdeDy_anmKBpOQyt58ZaeQCdgoYyCZqR796Fd-FCXLmDdGNwghbsg3VkcIIW7oV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.199.19
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['42938', '42939', '42940', '42941', '42942']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 42938:42938 -p 42939:42939 -p 42940:42940 -p 42941:42941 -p 42942:42942 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42940 --rest-port=42938 --tcp-port=42939 --discv5-udp-port=42941 --rest-address=0.0.0.0 --nat=extip:172.18.199.19 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f1ad2c1b86a9dd4ca63c0d811ea6e5dec038eeba6ea84db482f5eac8ed1d25fc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42942 --metrics-logging=true --relay=false --storenode=/ip4/172.18.181.88/tcp/5868/p2p/16Uiu2HAm4AXB8NUuBeYphc6rAoSq1ZMtnPsfdtyjARGdDEw6Hj12 --discv5-bootstrap-node=enr:-L24QB_tVuJuNUNsUUEJSCUpoQTZXUNwwjTcInOryNkDrRbMW1J9g_jiXkGnqUphgou4BTj1a1A7rsxfF8PhwUs6rq0CgmlkgnY0gmlwhKwStViKbXVsdGlhZGRyc5YACASsErVYBhbsAAoErBK1WAYW7d0DgnJzhQADAQAAiXNlY3AyNTZrMaECgdeDy_anmKBpOQyt58ZaeQCdgoYyCZqR796Fd-FCXLmDdGNwghbsg3VkcIIW7oV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.199.19 waku 0b98b6686fb0b0d420e09a92d43c881ce6ef94d6069e5d96af539b7177836559
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0b98b6686fb0. Setting up logs at ./log/docker/node3_2025-01-17_04-02-26__5bb891df-9c02-4f91-bd80-fd6811b13613__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 42938
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42938/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42938/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.199.19/tcp/42939/p2p/16Uiu2HAkueJyPs8yS7vm6WR5HnzLMcSQVSfzExf1eG2PdJWdV7H7","/ip4/172.18.199.19/tcp/42940/ws/p2p/16Uiu2HAkueJyPs8yS7vm6WR5HnzLMcSQVSfzExf1eG2PdJWdV7H7"],"enrUri":"enr:-L24QM4TZdGCR1z-0ydAEVh4YBqGOiZg4D72VgpTtKI9Syo1WMM2hGHkDExoGyYxcFn91FvF4WQC3cB2AkwmjnARCe4CgmlkgnY0gmlwhKwSxxOKbXVsdGlhZGRyc5YACASsEscTBqe7AAoErBLHEwanvN0DgnJzhQADAQAAiXNlY3AyNTZrMaECAzzMSANYQNlhYZbP4327lRh5O3ZtGHABBKk9ipKGUH6DdGNwgqe7g3VkcIKnvYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:394 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10355/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5867/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10355/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.181.88/tcp/5868/p2p/16Uiu2HAm4AXB8NUuBeYphc6rAoSq1ZMtnPsfdtyjARGdDEw6Hj12","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5867/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.246.188/tcp/10356/p2p/16Uiu2HAmGP8G1ph5QL1Pcs7ij2VWBVAsLre8GEHemSAtyU3oFWy7","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:399 Node1 publish message with flag ephemeral = True
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10355/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": true}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:404 Node3 makes store request to get messages
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42938/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"8e3bce62995125dbbee0","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:408 Response for store when ephemeral = true is strPeer wakuorg/nwaku:latest couldn't find any messages. Actual response: {'requestId': '8e3bce62995125dbbee0', 'statusCode': 200, 'statusDesc': 'OK', 'messages': []}
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:410 Message isn't stored as ephemeral = True
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 298d27e2f5e2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d1ab220709d0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0b98b6686fb0
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 298d27e2f5e2. Exiting log stream.
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d1ab220709d0. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.