[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_stored_when_ephemeral_false with id: 2025-01-17_04-04-53__73de84dc-4e56-4ac4-8e03-5ab57553e140
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-17_04-04-53__73de84dc-4e56-4ac4-8e03-5ab57553e140__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-17_04-04-53__73de84dc-4e56-4ac4-8e03-5ab57553e140__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-17_04-04-53__73de84dc-4e56-4ac4-8e03-5ab57553e140__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:414 Start 3 nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.62.186
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['35604', '35605', '35606', '35607', '35608']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 35604:35604 -p 35605:35605 -p 35606:35606 -p 35607:35607 -p 35608:35608 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35606 --rest-port=35604 --tcp-port=35605 --discv5-udp-port=35607 --rest-address=0.0.0.0 --nat=extip:172.18.62.186 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9ccc08ddfeebd46d6fef111f071b39e0cb05ae73aecf5acbcd038e7446737c0f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35608 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.62.186 waku 06be676911ee13cf91865062dd132b402c8bcfacd94f82f451d4a3668906d043
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 06be676911ee. Setting up logs at ./log/docker/node1_2025-01-17_04-04-53__73de84dc-4e56-4ac4-8e03-5ab57553e140__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 35604
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1af1dee9e2ac. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35604/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35604/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.62.186/tcp/35605/p2p/16Uiu2HAmGLjQYVdYyCpBUdQJdWvtSEiBEqH52sUyt5SMfeL3sFfq","/ip4/172.18.62.186/tcp/35606/ws/p2p/16Uiu2HAmGLjQYVdYyCpBUdQJdWvtSEiBEqH52sUyt5SMfeL3sFfq"],"enrUri":"enr:-L24QLwZXZm1SYxcmcNWTNQu2CyCA4dgmjzsiW4C0ljJ0hrIEah9HBUKxntHiB4ZqXolA5a6jkq5mqp09vRjeioPUJECgmlkgnY0gmlwhKwSPrqKbXVsdGlhZGRyc5YACASsEj66BosVAAoErBI-ugaLFt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDNsFlYcSVFP5Tl2_XWL40-qTLPTzeXjexYRLN3bkfLdSDdGNwgosVg3VkcIKLF4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.69.229
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['34071', '34072', '34073', '34074', '34075']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 34071:34071 -p 34072:34072 -p 34073:34073 -p 34074:34074 -p 34075:34075 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34073 --rest-port=34071 --tcp-port=34072 --discv5-udp-port=34074 --rest-address=0.0.0.0 --nat=extip:172.18.69.229 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cdee3d6b1fafefcd45c2857ac2af0e4ce4417bcbffcb4d4a4cc8f7bbbdcf89cb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34075 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QLwZXZm1SYxcmcNWTNQu2CyCA4dgmjzsiW4C0ljJ0hrIEah9HBUKxntHiB4ZqXolA5a6jkq5mqp09vRjeioPUJECgmlkgnY0gmlwhKwSPrqKbXVsdGlhZGRyc5YACASsEj66BosVAAoErBI-ugaLFt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDNsFlYcSVFP5Tl2_XWL40-qTLPTzeXjexYRLN3bkfLdSDdGNwgosVg3VkcIKLF4V3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.69.229 waku 2399b4f9b2a8203ebaebd6251e703966d0fa4aa3ae9f2201b640b334b25e6916
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2399b4f9b2a8. Setting up logs at ./log/docker/node2_2025-01-17_04-04-53__73de84dc-4e56-4ac4-8e03-5ab57553e140__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 34071
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34071/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34071/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.69.229/tcp/34072/p2p/16Uiu2HAmG1EfX3u5UeoTGzFgstqeSnm8Xs6znz7yQQZ39t2nACai","/ip4/172.18.69.229/tcp/34073/ws/p2p/16Uiu2HAmG1EfX3u5UeoTGzFgstqeSnm8Xs6znz7yQQZ39t2nACai"],"enrUri":"enr:-L24QM61q7khV-ThMqan095orRBqVL5KynF6XMMlRTN3ToinGSpNpvOyK6b1k9Nk19z4jTURDM49NQF8iLc3w975RG8CgmlkgnY0gmlwhKwSReWKbXVsdGlhZGRyc5YACASsEkXlBoUYAAoErBJF5QaFGd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDMcLcuBq9wREjr0_HWRQCxvBulE415t8LhBzHrullzceDdGNwgoUYg3VkcIKFGoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.166.53
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['11537', '11538', '11539', '11540', '11541']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 11537:11537 -p 11538:11538 -p 11539:11539 -p 11540:11540 -p 11541:11541 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11539 --rest-port=11537 --tcp-port=11538 --discv5-udp-port=11540 --rest-address=0.0.0.0 --nat=extip:172.18.166.53 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=adcbad8cbecbfeed5a7aeb62b38ea2aac6c4badafee7bddf5ecbb1e2c5fc967b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11541 --metrics-logging=true --relay=false --storenode=/ip4/172.18.69.229/tcp/34072/p2p/16Uiu2HAmG1EfX3u5UeoTGzFgstqeSnm8Xs6znz7yQQZ39t2nACai --discv5-bootstrap-node=enr:-L24QM61q7khV-ThMqan095orRBqVL5KynF6XMMlRTN3ToinGSpNpvOyK6b1k9Nk19z4jTURDM49NQF8iLc3w975RG8CgmlkgnY0gmlwhKwSReWKbXVsdGlhZGRyc5YACASsEkXlBoUYAAoErBJF5QaFGd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDMcLcuBq9wREjr0_HWRQCxvBulE415t8LhBzHrullzceDdGNwgoUYg3VkcIKFGoV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.166.53 waku 4e95a6f972057180ee7e0677d62865fe33503f9ef93f5c45206693b2b6091990
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4e95a6f97205. Setting up logs at ./log/docker/node3_2025-01-17_04-04-53__73de84dc-4e56-4ac4-8e03-5ab57553e140__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 11537
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11537/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11537/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.166.53/tcp/11538/p2p/16Uiu2HAkyuFQQMSugAMMMfMruh7CyvU3Qnbk3rYxLVbv34VDbYTy","/ip4/172.18.166.53/tcp/11539/ws/p2p/16Uiu2HAkyuFQQMSugAMMMfMruh7CyvU3Qnbk3rYxLVbv34VDbYTy"],"enrUri":"enr:-L24QC0O9IOSeWx7jblHreiXnUUbNUijyCwr8Zvef90S2X0vL6pyvQFiIUCC122rW6H88d-TL34MF3idS0vmHLPZMHMCgmlkgnY0gmlwhKwSpjWKbXVsdGlhZGRyc5YACASsEqY1Bi0SAAoErBKmNQYtE90DgnJzhQADAQAAiXNlY3AyNTZrMaECQn84-DN6Wn9pU3vfkXW3FORbM6CuF19XDb-gi0JLGciDdGNwgi0Sg3VkcIItFIV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:419 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35604/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34071/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35604/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.69.229/tcp/34072/p2p/16Uiu2HAmG1EfX3u5UeoTGzFgstqeSnm8Xs6znz7yQQZ39t2nACai","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34071/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.62.186/tcp/35605/p2p/16Uiu2HAmGLjQYVdYyCpBUdQJdWvtSEiBEqH52sUyt5SMfeL3sFfq","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:424 Node1 publish message with ephemeral = false
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35604/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:428 Check if message is stored 
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11537/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"70794922f044daf09e40","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 06be676911ee
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2399b4f9b2a8
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 06be676911ee. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4e95a6f97205
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2399b4f9b2a8. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2025-01-17_04-04-53__73de84dc-4e56-4ac4-8e03-5ab57553e140__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2025-01-17_04-04-53__73de84dc-4e56-4ac4-8e03-5ab57553e140__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node3_2025-01-17_04-04-53__73de84dc-4e56-4ac4-8e03-5ab57553e140__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_stored_when_ephemeral_false with id: 2025-01-17_04-05-34__937f3499-498b-4aa2-acad-bd63244ba6a3
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-17_04-05-34__937f3499-498b-4aa2-acad-bd63244ba6a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-17_04-05-34__937f3499-498b-4aa2-acad-bd63244ba6a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-17_04-05-34__937f3499-498b-4aa2-acad-bd63244ba6a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:414 Start 3 nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.168.140
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['16684', '16685', '16686', '16687', '16688']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 16684:16684 -p 16685:16685 -p 16686:16686 -p 16687:16687 -p 16688:16688 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16686 --rest-port=16684 --tcp-port=16685 --discv5-udp-port=16687 --rest-address=0.0.0.0 --nat=extip:172.18.168.140 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cd2d64795b9bab18e24f38acfe9dbbfe45dafe064d13ad5ec7b464930cbbff5a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16688 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.168.140 waku 4ec968db256729ff76d27ea2a65b0689088c16463112f95f564d9d290cde6d63
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4ec968db2567. Setting up logs at ./log/docker/node1_2025-01-17_04-05-34__937f3499-498b-4aa2-acad-bd63244ba6a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 16684
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4e95a6f97205. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16684/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16684/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.168.140/tcp/16685/p2p/16Uiu2HAmJ85s8zDM1g45dfFLZEoAEX5sFWk27JHPfjtJ6JLDkKpH","/ip4/172.18.168.140/tcp/16686/ws/p2p/16Uiu2HAmJ85s8zDM1g45dfFLZEoAEX5sFWk27JHPfjtJ6JLDkKpH"],"enrUri":"enr:-L24QKnaF6FLj7i1MKCyTHHRt5wy4WZf4Y6GuLtrH62xah0LD6XPc7AN_UJUdIewoe1HrjdKFhkf3aMyBj2ioJcNi7sCgmlkgnY0gmlwhKwSqIyKbXVsdGlhZGRyc5YACASsEqiMBkEtAAoErBKojAZBLt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDUTtaFYJkluVnqbdmNj24UqOdVrCYh-Q9HvX7JQSJaVaDdGNwgkEtg3VkcIJBL4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.28.9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['55611', '55612', '55613', '55614', '55615']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 55611:55611 -p 55612:55612 -p 55613:55613 -p 55614:55614 -p 55615:55615 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55613 --rest-port=55611 --tcp-port=55612 --discv5-udp-port=55614 --rest-address=0.0.0.0 --nat=extip:172.18.28.9 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ffaeb0cafeaddbea5f99bcb90d7cb1ff9cbdce68df5fac2b99dcc9dc96bc7d1d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55615 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QKnaF6FLj7i1MKCyTHHRt5wy4WZf4Y6GuLtrH62xah0LD6XPc7AN_UJUdIewoe1HrjdKFhkf3aMyBj2ioJcNi7sCgmlkgnY0gmlwhKwSqIyKbXVsdGlhZGRyc5YACASsEqiMBkEtAAoErBKojAZBLt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDUTtaFYJkluVnqbdmNj24UqOdVrCYh-Q9HvX7JQSJaVaDdGNwgkEtg3VkcIJBL4V3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.28.9 waku 47005a366f76265e9865d9003a08b28b27c58b86687b9db21a2449874c5153de
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 47005a366f76. Setting up logs at ./log/docker/node2_2025-01-17_04-05-34__937f3499-498b-4aa2-acad-bd63244ba6a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 55611
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55611/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55611/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.28.9/tcp/55612/p2p/16Uiu2HAmPSJNtk3dYNmHW1sVEEaX4rcYFq7dpdGqMyGHgzcTMX3j","/ip4/172.18.28.9/tcp/55613/ws/p2p/16Uiu2HAmPSJNtk3dYNmHW1sVEEaX4rcYFq7dpdGqMyGHgzcTMX3j"],"enrUri":"enr:-L24QIvIvZbzT4UZtvyzctkLBmxdDoKwcVaqsFsUrNfrFknBGZ9evBoSC1tE4OsWx9rHMuuWCwwjrewRLA5HhCQCJFwCgmlkgnY0gmlwhKwSHAmKbXVsdGlhZGRyc5YACASsEhwJBtk8AAoErBIcCQbZPd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDoDBjvAoRHGQuYd5aX5l8Hc4gIoPveUv4eomZ-7sxkjaDdGNwgtk8g3VkcILZPoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.141.142
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['58452', '58453', '58454', '58455', '58456']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 58452:58452 -p 58453:58453 -p 58454:58454 -p 58455:58455 -p 58456:58456 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58454 --rest-port=58452 --tcp-port=58453 --discv5-udp-port=58455 --rest-address=0.0.0.0 --nat=extip:172.18.141.142 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d126e180beac0ed62ddcb8dc618eededa9b4fda25cc5ad1eac2dc9f0988b9162 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58456 --metrics-logging=true --relay=false --storenode=/ip4/172.18.28.9/tcp/55612/p2p/16Uiu2HAmPSJNtk3dYNmHW1sVEEaX4rcYFq7dpdGqMyGHgzcTMX3j --discv5-bootstrap-node=enr:-L24QIvIvZbzT4UZtvyzctkLBmxdDoKwcVaqsFsUrNfrFknBGZ9evBoSC1tE4OsWx9rHMuuWCwwjrewRLA5HhCQCJFwCgmlkgnY0gmlwhKwSHAmKbXVsdGlhZGRyc5YACASsEhwJBtk8AAoErBIcCQbZPd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDoDBjvAoRHGQuYd5aX5l8Hc4gIoPveUv4eomZ-7sxkjaDdGNwgtk8g3VkcILZPoV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.141.142 waku 8432d5daae1ed0f3e7163cf9fcb6b289dd719ac696d1742485fee0bc582f9637
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8432d5daae1e. Setting up logs at ./log/docker/node3_2025-01-17_04-05-34__937f3499-498b-4aa2-acad-bd63244ba6a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 58452
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58452/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58452/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.141.142/tcp/58453/p2p/16Uiu2HAmVJXyqsBseQi8bFgPeGcgsmM4sGEqYeQNiP84iGJGmFuX","/ip4/172.18.141.142/tcp/58454/ws/p2p/16Uiu2HAmVJXyqsBseQi8bFgPeGcgsmM4sGEqYeQNiP84iGJGmFuX"],"enrUri":"enr:-L24QD-RGNcZM0TBHm2CYgQJ9RS6YB33NLIQogYfT5OT0yzjecsxOytjWqNg4vgfKpP3zIZ7FVztqE5cY9AI6B3xi60CgmlkgnY0gmlwhKwSjY6KbXVsdGlhZGRyc5YACASsEo2OBuRVAAoErBKNjgbkVt0DgnJzhQADAQAAiXNlY3AyNTZrMaED91k-w8Jq7jjdP1gkZ52kRCE_LCIjlM8NsbUFpZ2hK46DdGNwguRVg3VkcILkV4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:419 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16684/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55611/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16684/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.28.9/tcp/55612/p2p/16Uiu2HAmPSJNtk3dYNmHW1sVEEaX4rcYFq7dpdGqMyGHgzcTMX3j","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55611/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.168.140/tcp/16685/p2p/16Uiu2HAmJ85s8zDM1g45dfFLZEoAEX5sFWk27JHPfjtJ6JLDkKpH","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:424 Node1 publish message with ephemeral = false
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16684/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:428 Check if message is stored 
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58452/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"4a5df5728fff4ad77762","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4ec968db2567
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 47005a366f76
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4ec968db2567. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 8432d5daae1e
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 47005a366f76. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node3_2025-01-17_04-05-34__937f3499-498b-4aa2-acad-bd63244ba6a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2025-01-17_04-05-34__937f3499-498b-4aa2-acad-bd63244ba6a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2025-01-17_04-05-34__937f3499-498b-4aa2-acad-bd63244ba6a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_stored_when_ephemeral_false with id: 2025-01-17_04-06-14__ebc28410-8f4e-4b75-87fb-f794f665225d
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-17_04-06-14__ebc28410-8f4e-4b75-87fb-f794f665225d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-17_04-06-14__ebc28410-8f4e-4b75-87fb-f794f665225d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-17_04-06-14__ebc28410-8f4e-4b75-87fb-f794f665225d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:414 Start 3 nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.110.183
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['49590', '49591', '49592', '49593', '49594']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 49590:49590 -p 49591:49591 -p 49592:49592 -p 49593:49593 -p 49594:49594 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49592 --rest-port=49590 --tcp-port=49591 --discv5-udp-port=49593 --rest-address=0.0.0.0 --nat=extip:172.18.110.183 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fe2ceca7fb4c7cbb869d6f8d5acedb75d4ebe9cd06ae745e5c3cbcaf12aecdc1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49594 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.110.183 waku 26d8f7afe00e058eaa595d12acb2fad4bcc283c9722351f5c34e55188b8c5cc6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 26d8f7afe00e. Setting up logs at ./log/docker/node1_2025-01-17_04-06-14__ebc28410-8f4e-4b75-87fb-f794f665225d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 49590
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 8432d5daae1e. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49590/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49590/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.110.183/tcp/49591/p2p/16Uiu2HAm59bd1ie5GGoZjA6EWiVvSaZ2ewdfQHRKvgYk8PppgZ59","/ip4/172.18.110.183/tcp/49592/ws/p2p/16Uiu2HAm59bd1ie5GGoZjA6EWiVvSaZ2ewdfQHRKvgYk8PppgZ59"],"enrUri":"enr:-L24QKqvlsal8ZktlXsC4_zpHPyVZU-GfDbnQNubKJX0aQGvCxq7X5dHr0vOX9IHb2k9mbtefaihsHQalvMDnLi01-ECgmlkgnY0gmlwhKwSbreKbXVsdGlhZGRyc5YACASsEm63BsG3AAoErBJutwbBuN0DgnJzhQADAQAAiXNlY3AyNTZrMaECkHal_SLlFxXCiV3YAYeyy2KOS6_Q6EG0JJTbRHdHB9iDdGNwgsG3g3VkcILBuYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.138.114
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['12075', '12076', '12077', '12078', '12079']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 12075:12075 -p 12076:12076 -p 12077:12077 -p 12078:12078 -p 12079:12079 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12077 --rest-port=12075 --tcp-port=12076 --discv5-udp-port=12078 --rest-address=0.0.0.0 --nat=extip:172.18.138.114 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1fcb3a8dfa6ced2cc58ebb7b6a9c7b9646a7ee6f3a26bebb5a7746ae7eea3386 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12079 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QKqvlsal8ZktlXsC4_zpHPyVZU-GfDbnQNubKJX0aQGvCxq7X5dHr0vOX9IHb2k9mbtefaihsHQalvMDnLi01-ECgmlkgnY0gmlwhKwSbreKbXVsdGlhZGRyc5YACASsEm63BsG3AAoErBJutwbBuN0DgnJzhQADAQAAiXNlY3AyNTZrMaECkHal_SLlFxXCiV3YAYeyy2KOS6_Q6EG0JJTbRHdHB9iDdGNwgsG3g3VkcILBuYV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.138.114 waku 715dc6236b7f70415beb25e9fd524c4d20a7ab5692d5fc1ea4c881bdda4d80e7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 715dc6236b7f. Setting up logs at ./log/docker/node2_2025-01-17_04-06-14__ebc28410-8f4e-4b75-87fb-f794f665225d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 12075
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12075/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12075/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.138.114/tcp/12076/p2p/16Uiu2HAkvRpAf8xNzQUyUCA3mAh9dNgMpJnkjvLdzfeghU8LLdJe","/ip4/172.18.138.114/tcp/12077/ws/p2p/16Uiu2HAkvRpAf8xNzQUyUCA3mAh9dNgMpJnkjvLdzfeghU8LLdJe"],"enrUri":"enr:-L24QBlje0IDhbhTaWqKKpPyNWUtRDFknu41DCkZoe4EIzLzLTBRBXlahROyH3z_836OE4gEyUj7EJ38AqT4V26lecICgmlkgnY0gmlwhKwSinKKbXVsdGlhZGRyc5YACASsEopyBi8sAAoErBKKcgYvLd0DgnJzhQADAQAAiXNlY3AyNTZrMaECDuTxwdZ3CQQutEfG6g-9rjlFbQGy4ina_WmREIQvM1eDdGNwgi8sg3VkcIIvLoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.48.118
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['17317', '17318', '17319', '17320', '17321']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 17317:17317 -p 17318:17318 -p 17319:17319 -p 17320:17320 -p 17321:17321 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17319 --rest-port=17317 --tcp-port=17318 --discv5-udp-port=17320 --rest-address=0.0.0.0 --nat=extip:172.18.48.118 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=27ce3f97dbec4eefef3b6d9c5df3dea65cbc0f97c056b76bcac76d0914f53819 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17321 --metrics-logging=true --relay=false --storenode=/ip4/172.18.138.114/tcp/12076/p2p/16Uiu2HAkvRpAf8xNzQUyUCA3mAh9dNgMpJnkjvLdzfeghU8LLdJe --discv5-bootstrap-node=enr:-L24QBlje0IDhbhTaWqKKpPyNWUtRDFknu41DCkZoe4EIzLzLTBRBXlahROyH3z_836OE4gEyUj7EJ38AqT4V26lecICgmlkgnY0gmlwhKwSinKKbXVsdGlhZGRyc5YACASsEopyBi8sAAoErBKKcgYvLd0DgnJzhQADAQAAiXNlY3AyNTZrMaECDuTxwdZ3CQQutEfG6g-9rjlFbQGy4ina_WmREIQvM1eDdGNwgi8sg3VkcIIvLoV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.48.118 waku fa44a1cc27b8018fb11b625d4e29f3ca7700b4f7174b8ee5a2276ad1a5b9b71c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fa44a1cc27b8. Setting up logs at ./log/docker/node3_2025-01-17_04-06-14__ebc28410-8f4e-4b75-87fb-f794f665225d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 17317
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17317/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17317/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.48.118/tcp/17318/p2p/16Uiu2HAm7WgVrnTmytYgiN7upDE5sqBu9dsv85SD8o2Q44e9V2C9","/ip4/172.18.48.118/tcp/17319/ws/p2p/16Uiu2HAm7WgVrnTmytYgiN7upDE5sqBu9dsv85SD8o2Q44e9V2C9"],"enrUri":"enr:-L24QMvt1a3Ex1T0fH6RnZDF1fPm4swj15lNPiFLzh8yN818B5-uyz5iusFJL9twVx6mr5ce5DUTja4nVfd_WEpwaggCgmlkgnY0gmlwhKwSMHaKbXVsdGlhZGRyc5YACASsEjB2BkOmAAoErBIwdgZDp90DgnJzhQADAQAAiXNlY3AyNTZrMaECs5S7uMKIfCDeAWtlOBMzqFNQFBFIkDHOsqxM09QHZ-qDdGNwgkOmg3VkcIJDqIV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:419 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49590/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12075/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49590/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.138.114/tcp/12076/p2p/16Uiu2HAkvRpAf8xNzQUyUCA3mAh9dNgMpJnkjvLdzfeghU8LLdJe","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12075/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.110.183/tcp/49591/p2p/16Uiu2HAm59bd1ie5GGoZjA6EWiVvSaZ2ewdfQHRKvgYk8PppgZ59","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:424 Node1 publish message with ephemeral = false
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49590/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:428 Check if message is stored 
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17317/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"38fc41ff87ec5f3c1230","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 26d8f7afe00e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 715dc6236b7f
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 26d8f7afe00e. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id fa44a1cc27b8
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 715dc6236b7f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2025-01-17_04-06-14__ebc28410-8f4e-4b75-87fb-f794f665225d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node3_2025-01-17_04-06-14__ebc28410-8f4e-4b75-87fb-f794f665225d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2025-01-17_04-06-14__ebc28410-8f4e-4b75-87fb-f794f665225d__wakuorg_nwaku:latest.log