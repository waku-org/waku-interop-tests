[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2025-01-17_04-06-27__c56a1e91-a1f3-43d9-87a4-7e0895858f4b
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-17_04-06-27__c56a1e91-a1f3-43d9-87a4-7e0895858f4b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.205.185
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['31083', '31084', '31085', '31086', '31087']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 31083:31083 -p 31084:31084 -p 31085:31085 -p 31086:31086 -p 31087:31087 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31085 --rest-port=31083 --tcp-port=31084 --discv5-udp-port=31086 --rest-address=0.0.0.0 --nat=extip:172.18.205.185 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1b4d154f3dde6bcbbf5efb3cf110a7ddd89ccacb7cf10ceeb623da9fc7fddc18 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31087 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.205.185 waku 67769d1202c87f6334e890c1d893d7432c8b6618e72253aa277194ec52beee7d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 67769d1202c8. Setting up logs at ./log/docker/receiving_node1_2025-01-17_04-06-27__c56a1e91-a1f3-43d9-87a4-7e0895858f4b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 31083
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 8145d790064a. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31083/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31083/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.205.185/tcp/31084/p2p/16Uiu2HAm7gbH8rFEdVmAmK93CVjSMmxSUxWiANP9yWYAYmvnjspV","/ip4/172.18.205.185/tcp/31085/ws/p2p/16Uiu2HAm7gbH8rFEdVmAmK93CVjSMmxSUxWiANP9yWYAYmvnjspV"],"enrUri":"enr:-L24QCXF4OVoBcDnBDpBeMOm9_ElH2TFqCVjXJd_Eq3keT_Pbht8S4xMH20r_p_cDdtnzczHyLneP33GLU9ikZVcLeYCgmlkgnY0gmlwhKwSzbmKbXVsdGlhZGRyc5YACASsEs25BnlsAAoErBLNuQZ5bd0DgnJzhQADAQAAiXNlY3AyNTZrMaECth6jy7Lz7_xLLvOtSh8N0BgmN1OU61JZwgOcrGgxJ8qDdGNwgnlsg3VkcIJ5boV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-17_04-06-27__c56a1e91-a1f3-43d9-87a4-7e0895858f4b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.231.66
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['25123', '25124', '25125', '25126', '25127']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 25123:25123 -p 25124:25124 -p 25125:25125 -p 25126:25126 -p 25127:25127 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25125 --rest-port=25123 --tcp-port=25124 --discv5-udp-port=25126 --rest-address=0.0.0.0 --nat=extip:172.18.231.66 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bbcdc463faacc443ef8ffea21c61fb2fe4827f5fdaf1487ca7eb1fdafc0d0dec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25127 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.231.66 waku e367b6f6462df95362a70e0bc497d97b743eb2ce11192d70c68612710086805c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e367b6f6462d. Setting up logs at ./log/docker/receiving_node2_2025-01-17_04-06-27__c56a1e91-a1f3-43d9-87a4-7e0895858f4b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 25123
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25123/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25123/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.231.66/tcp/25124/p2p/16Uiu2HAmD7ZwA1uXd4tYSwYKj3aGDhQvcd52cG4EjLFjwbRKZNXo","/ip4/172.18.231.66/tcp/25125/ws/p2p/16Uiu2HAmD7ZwA1uXd4tYSwYKj3aGDhQvcd52cG4EjLFjwbRKZNXo"],"enrUri":"enr:-L24QOyJvwHENRsZ0z1iJ9YBmscE-6eap_okCfPKpbv0v-SFB_30tShGRMtTuRl8GekRKfx3B1yzn72W2_L2LsrhoLACgmlkgnY0gmlwhKwS50KKbXVsdGlhZGRyc5YACASsEudCBmIkAAoErBLnQgZiJd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDBs8TEODPDmLGwvXpO-z7yPW3QhEqC8SVI3aqJdT0X46DdGNwgmIkg3VkcIJiJoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25123/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.205.185/tcp/31084/p2p/16Uiu2HAm7gbH8rFEdVmAmK93CVjSMmxSUxWiANP9yWYAYmvnjspV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-17_04-06-27__c56a1e91-a1f3-43d9-87a4-7e0895858f4b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.63.225
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['29321', '29322', '29323', '29324', '29325']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 29321:29321 -p 29322:29322 -p 29323:29323 -p 29324:29324 -p 29325:29325 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29323 --rest-port=29321 --tcp-port=29322 --discv5-udp-port=29324 --rest-address=0.0.0.0 --nat=extip:172.18.63.225 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=12765accbfb1ececcc3b1e533779b55bcab476588eb8eefc5aba257b3fea9aa9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29325 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QCXF4OVoBcDnBDpBeMOm9_ElH2TFqCVjXJd_Eq3keT_Pbht8S4xMH20r_p_cDdtnzczHyLneP33GLU9ikZVcLeYCgmlkgnY0gmlwhKwSzbmKbXVsdGlhZGRyc5YACASsEs25BnlsAAoErBLNuQZ5bd0DgnJzhQADAQAAiXNlY3AyNTZrMaECth6jy7Lz7_xLLvOtSh8N0BgmN1OU61JZwgOcrGgxJ8qDdGNwgnlsg3VkcIJ5boV3YWt1Mgk --lightpushnode=/ip4/172.18.205.185/tcp/31084/p2p/16Uiu2HAm7gbH8rFEdVmAmK93CVjSMmxSUxWiANP9yWYAYmvnjspV --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.63.225 waku 24e1c827478e262fc22da801cf395b5326a186ebed81d18d2514719cd83f2e3b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 24e1c827478e. Setting up logs at ./log/docker/lightpush_node1_2025-01-17_04-06-27__c56a1e91-a1f3-43d9-87a4-7e0895858f4b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 29321
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29321/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29321/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.63.225/tcp/29322/p2p/16Uiu2HAkumJ6fWp6Y1eQ2cPDBJK4tiA1b1YL8WskRWbxSQfXA4Hs","/ip4/172.18.63.225/tcp/29323/ws/p2p/16Uiu2HAkumJ6fWp6Y1eQ2cPDBJK4tiA1b1YL8WskRWbxSQfXA4Hs"],"enrUri":"enr:-L24QAPheZaApcppmXBDZ6U6_edOahSF5QaYpuvuxGN8fTyecHn6ec-X5GJp4PIycvyGrMgwRR_jOLWJAAjgrM-97G4CgmlkgnY0gmlwhKwSP-GKbXVsdGlhZGRyc5YACASsEj_hBnKKAAoErBI_4QZyi90DgnJzhQADAQAAiXNlY3AyNTZrMaECBQbf6Ze9jUgrqdS9bvrfwzA8PNTW9RxP3cj_zSUaGYaDdGNwgnKKg3VkcIJyjIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29321/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.205.185/tcp/31084/p2p/16Uiu2HAm7gbH8rFEdVmAmK93CVjSMmxSUxWiANP9yWYAYmvnjspV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29321/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.231.66/tcp/25124/p2p/16Uiu2HAmD7ZwA1uXd4tYSwYKj3aGDhQvcd52cG4EjLFjwbRKZNXo"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31083/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25123/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29321/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1737086791816046080}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:29321/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29321/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1737086791823938304}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:29321/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29321/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1737086791829458944}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:29321/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29321/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1737086791835001856}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:29321/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 67769d1202c8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e367b6f6462d
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 67769d1202c8. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 24e1c827478e
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e367b6f6462d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.