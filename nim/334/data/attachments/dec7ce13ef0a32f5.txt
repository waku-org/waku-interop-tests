[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2024-08-27_04-38-17__07f7a522-9b75-4779-a8ae-d564dc53779e
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-08-27_04-38-17__07f7a522-9b75-4779-a8ae-d564dc53779e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.21.184
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['41491', '41492', '41493', '41494', '41495']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 41491:41491 -p 41492:41492 -p 41493:41493 -p 41494:41494 -p 41495:41495 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41493 --rest-port=41491 --tcp-port=41492 --discv5-udp-port=41494 --rest-address=0.0.0.0 --nat=extip:172.18.21.184 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=adecb2ceffae294ca4bd8e79d3d1ae30ff2aebe3d376eb02cbfbd845efdfe519 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41495 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.21.184 waku c336838c1658f672f7170379f92d5abc8fd58d5d973dca1902839d0d3a868a91
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID c336838c1658. Setting up logs at ./log/docker/publishing_node1_2024-08-27_04-38-17__07f7a522-9b75-4779-a8ae-d564dc53779e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 41491
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41491/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41491/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.21.184/tcp/41492/p2p/16Uiu2HAmBwg9x3fN2swPx2Q6ye9iJDVDtEr3DgAwHVkosWUPMzZZ","/ip4/172.18.21.184/tcp/41493/ws/p2p/16Uiu2HAmBwg9x3fN2swPx2Q6ye9iJDVDtEr3DgAwHVkosWUPMzZZ"],"enrUri":"enr:-LO4QDU5lwYQF3x1OX1VGUIiHiXzYcysh_dbve9ikoIMoIXiHuy7sXKZwJrE02Rh_A54FLfZGjvTbPvAEKbeGW2bvjwBgmlkgnY0gmlwhKwSFbiKbXVsdGlhZGRyc4wACgSsEhW4BqIV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL1apzzill16wIahYhL0OcOCmz9GyTBpoHG53fGZhtFBIN0Y3CCohSDdWRwgqIWhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/publishing_node2_2024-08-27_04-38-17__07f7a522-9b75-4779-a8ae-d564dc53779e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.150.55
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['52958', '52959', '52960', '52961', '52962']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 52958:52958 -p 52959:52959 -p 52960:52960 -p 52961:52961 -p 52962:52962 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52960 --rest-port=52958 --tcp-port=52959 --discv5-udp-port=52961 --rest-address=0.0.0.0 --nat=extip:172.18.150.55 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f8eb1326efeefe2c6306399f881bbc65f2efc7d2ffa2bd4b4565ad94ef49e7fe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52962 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.150.55 waku 0f17a4eaf2e27d9b48713437628991558cfcc1fb8b734dae608c9ee02e72c64a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 0f17a4eaf2e2. Setting up logs at ./log/docker/publishing_node2_2024-08-27_04-38-17__07f7a522-9b75-4779-a8ae-d564dc53779e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 52958
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52958/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52958/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.150.55/tcp/52959/p2p/16Uiu2HAmJvTsc63L7iyU4rdR1r3wS2Jemnity1CoPsn5BqELoMJB","/ip4/172.18.150.55/tcp/52960/ws/p2p/16Uiu2HAmJvTsc63L7iyU4rdR1r3wS2Jemnity1CoPsn5BqELoMJB"],"enrUri":"enr:-LO4QCiVeZ4UeQc-CmA4UlLsOl3ExeMT0mLPVboXBKX9lRs2IRCCHexiZ74iiRzeNfHv_X618g_ac3DvT1NJ1dARYvABgmlkgnY0gmlwhKwSljeKbXVsdGlhZGRyc4wACgSsEpY3Bs7g3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNdHPQlcy1kX0YEQBzv13qXL-eU5nTheg4xsbAgeW2SNIN0Y3CCzt-DdWRwgs7hhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52958/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.21.184/tcp/41492/p2p/16Uiu2HAmBwg9x3fN2swPx2Q6ye9iJDVDtEr3DgAwHVkosWUPMzZZ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/store_node1_2024-08-27_04-38-17__07f7a522-9b75-4779-a8ae-d564dc53779e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.192.126
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['31413', '31414', '31415', '31416', '31417']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 31413:31413 -p 31414:31414 -p 31415:31415 -p 31416:31416 -p 31417:31417 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31415 --rest-port=31413 --tcp-port=31414 --discv5-udp-port=31416 --rest-address=0.0.0.0 --nat=extip:172.18.192.126 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dfa1ab4b9189357ab74ed6432ec2d49cf2a362ebc74c4e4a7f1c1c2b75db5fdb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31417 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QDU5lwYQF3x1OX1VGUIiHiXzYcysh_dbve9ikoIMoIXiHuy7sXKZwJrE02Rh_A54FLfZGjvTbPvAEKbeGW2bvjwBgmlkgnY0gmlwhKwSFbiKbXVsdGlhZGRyc4wACgSsEhW4BqIV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL1apzzill16wIahYhL0OcOCmz9GyTBpoHG53fGZhtFBIN0Y3CCohSDdWRwgqIWhXdha3UyCw --storenode=/ip4/172.18.21.184/tcp/41492/p2p/16Uiu2HAmBwg9x3fN2swPx2Q6ye9iJDVDtEr3DgAwHVkosWUPMzZZ --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.21.184/tcp/41492/p2p/16Uiu2HAmBwg9x3fN2swPx2Q6ye9iJDVDtEr3DgAwHVkosWUPMzZZ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.192.126 waku 308f9e11525b3411217cb7a51ee93f8e3fb5180907310369fbeb586ba09f8c73
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 308f9e11525b. Setting up logs at ./log/docker/store_node1_2024-08-27_04-38-17__07f7a522-9b75-4779-a8ae-d564dc53779e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 31413
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31413/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31413/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.192.126/tcp/31414/p2p/16Uiu2HAm5YRbNCDWKsNHXRiDoPq2Dzrwdaad73SQLFg3FaeQFU1F","/ip4/172.18.192.126/tcp/31415/ws/p2p/16Uiu2HAm5YRbNCDWKsNHXRiDoPq2Dzrwdaad73SQLFg3FaeQFU1F"],"enrUri":"enr:-LO4QF4NdhHGWZPGYVxb3wLHa98sl6sesOXTEvTO-m4-wvNkBfX5QvlcITc4LYoMBh4_NpXgeCvAVsb8yzsaT2GX6LEBgmlkgnY0gmlwhKwSwH6KbXVsdGlhZGRyc4wACgSsEsB-Bnq33QOCcnOFAAMBAACJc2VjcDI1NmsxoQKWT6r4zNGuyDI9Mo2XDKnHRNcfzJ-czVkrNFzZ9mj22oN0Y3CCeraDdWRwgnq4hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31413/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.21.184/tcp/41492/p2p/16Uiu2HAmBwg9x3fN2swPx2Q6ye9iJDVDtEr3DgAwHVkosWUPMzZZ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31413/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.150.55/tcp/52959/p2p/16Uiu2HAmJvTsc63L7iyU4rdR1r3wS2Jemnity1CoPsn5BqELoMJB"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41491/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52958/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31413/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724733502458480384}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:216 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41491/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"l3LzciLUlJcX1dHtW3CQo1ozeCYvzI1lOyXPBOfQoTc="}]}'
[35mDEBUG   [0m src.steps.store:store.py:216 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31413/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"babce3329c836b85b649","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"l3LzciLUlJcX1dHtW3CQo1ozeCYvzI1lOyXPBOfQoTc="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id c336838c1658
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 0f17a4eaf2e2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 308f9e11525b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.