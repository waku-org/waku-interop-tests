[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_from_all_subscribed_content_topics with id: 2024-08-27_04-20-21__aeae4ab6-73b0-43ca-894e-e08e6a1bd07d
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-27_04-20-21__aeae4ab6-73b0-43ca-894e-e08e6a1bd07d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.224.84
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['2743', '2744', '2745', '2746', '2747']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 2743:2743 -p 2744:2744 -p 2745:2745 -p 2746:2746 -p 2747:2747 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2745 --rest-port=2743 --tcp-port=2744 --discv5-udp-port=2746 --rest-address=0.0.0.0 --nat=extip:172.18.224.84 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6ef85de3a510fffd0ea494cadb643fbebd18bf3aecfb441cb43a7fcf6b8475cb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2747 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.224.84 waku 25aac2046ce2f8c6bf9adf50734b7dd23ebdf9b770aa3a1fcb6bf2d2419a1318
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 25aac2046ce2. Setting up logs at ./log/docker/node1_2024-08-27_04-20-21__aeae4ab6-73b0-43ca-894e-e08e6a1bd07d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 2743
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2743/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2743/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.224.84/tcp/2744/p2p/16Uiu2HAmKHyHojLDEph6JF8gRWthmbq8HqeS43ro3mES8PWGFU6G","/ip4/172.18.224.84/tcp/2745/ws/p2p/16Uiu2HAmKHyHojLDEph6JF8gRWthmbq8HqeS43ro3mES8PWGFU6G"],"enrUri":"enr:-LO4QAuFMer4V_lbNgH6TgWpZnU6WtlNm0n5TpSsp4TjukB-NuVMiam1hASs1TLLJwxwu4qzCSJ_l6GQqOKuFFIa6zUBgmlkgnY0gmlwhKwS4FSKbXVsdGlhZGRyc4wACgSsEuBUBgq53QOCcnOFAAMBAACJc2VjcDI1NmsxoQNin2myp-No_hmK5RSonrFx4BMqgvJEY8PYDTjv2CgnPYN0Y3CCCriDdWRwggq6hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-27_04-20-21__aeae4ab6-73b0-43ca-894e-e08e6a1bd07d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.106.14
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['44676', '44677', '44678', '44679', '44680']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 44676:44676 -p 44677:44677 -p 44678:44678 -p 44679:44679 -p 44680:44680 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44678 --rest-port=44676 --tcp-port=44677 --discv5-udp-port=44679 --rest-address=0.0.0.0 --nat=extip:172.18.106.14 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f919f2b4a4e31d77b37ef2d339ef89fd5fc91e15aba83cab8a402651ee27a7bc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44680 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QAuFMer4V_lbNgH6TgWpZnU6WtlNm0n5TpSsp4TjukB-NuVMiam1hASs1TLLJwxwu4qzCSJ_l6GQqOKuFFIa6zUBgmlkgnY0gmlwhKwS4FSKbXVsdGlhZGRyc4wACgSsEuBUBgq53QOCcnOFAAMBAACJc2VjcDI1NmsxoQNin2myp-No_hmK5RSonrFx4BMqgvJEY8PYDTjv2CgnPYN0Y3CCCriDdWRwggq6hXdha3UyBQ --filternode=/ip4/172.18.224.84/tcp/2744/p2p/16Uiu2HAmKHyHojLDEph6JF8gRWthmbq8HqeS43ro3mES8PWGFU6G
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.106.14 waku d75f6b865f476ad6e35315c2aedfff74563e3b4999d0df46189025b0f1de7df0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID d75f6b865f47. Setting up logs at ./log/docker/node2_2024-08-27_04-20-21__aeae4ab6-73b0-43ca-894e-e08e6a1bd07d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 44676
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44676/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44676/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.106.14/tcp/44677/p2p/16Uiu2HAmFtGMiYz7GzxQkS74YmGQgGVeKLcrSQBsoXYo2tz1jS8o","/ip4/172.18.106.14/tcp/44678/ws/p2p/16Uiu2HAmFtGMiYz7GzxQkS74YmGQgGVeKLcrSQBsoXYo2tz1jS8o"],"enrUri":"enr:-LO4QG3SfDt-as46cCCK5AoPZY1rTfHAkGGCLavVdg9obINIQWPRjFLhWOI13x7EJ8h1Mxe6KblyywmL8mqL9RZyPYoBgmlkgnY0gmlwhKwSag6KbXVsdGlhZGRyc4wACgSsEmoOBq6G3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMv-bX8m8IqVTFF8mZWehlk9sxl4aOT-8FlGhazosRKuIN0Y3CCroWDdWRwgq6HhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44676/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.224.84/tcp/2744/p2p/16Uiu2HAmKHyHojLDEph6JF8gRWthmbq8HqeS43ro3mES8PWGFU6G"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2743/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44676/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "14003095-fa67-4652-a30e-3771ea854e5b", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"14003095-fa67-4652-a30e-3771ea854e5b","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2743/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44676/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "369f6041-ea21-4d4f-9cfe-d28dd006be0d", "contentFilters": ["Hello World!", "1234567890"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"369f6041-ea21-4d4f-9cfe-d28dd006be0d","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2743/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44676/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1724732424900259584,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:44676/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["Hello World!", "1234567890"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2743/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44676/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:44676/filter/v2/messages/1234567890. Response content: b'Not subscribed to topic: 1234567890'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 25aac2046ce2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id d75f6b865f47
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.