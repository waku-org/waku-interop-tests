[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_extra_field with id: 2024-08-27_04-20-14__6c8ee5fa-719e-4017-95ae-f49dc7f7aefd
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-27_04-20-14__6c8ee5fa-719e-4017-95ae-f49dc7f7aefd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.251.24
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['12924', '12925', '12926', '12927', '12928']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 12924:12924 -p 12925:12925 -p 12926:12926 -p 12927:12927 -p 12928:12928 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12926 --rest-port=12924 --tcp-port=12925 --discv5-udp-port=12927 --rest-address=0.0.0.0 --nat=extip:172.18.251.24 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cd77dddccbbbec2e3543cbc4eafdb339ddaafac4a1d651f12907d5aafa33d962 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12928 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.251.24 waku 2327ce1b63434d2f3d90fe570ba3658e1dbde6aa6c4ad0a118414f07f7431270
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 2327ce1b6343. Setting up logs at ./log/docker/node1_2024-08-27_04-20-14__6c8ee5fa-719e-4017-95ae-f49dc7f7aefd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 12924
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12924/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12924/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.251.24/tcp/12925/p2p/16Uiu2HAmFbaSSTnnvuKCG26oLma3unRTCnVj8W7tC9uQc6QGzRMw","/ip4/172.18.251.24/tcp/12926/ws/p2p/16Uiu2HAmFbaSSTnnvuKCG26oLma3unRTCnVj8W7tC9uQc6QGzRMw"],"enrUri":"enr:-LO4QPNPGDqzLJx9QwsnS7dNWqB_riKln1M4YEQzQBuzIMlbEXtAaTdx6CUwH9aIMkql3k73ag_howXQ_c8obtQmgOgBgmlkgnY0gmlwhKwS-xiKbXVsdGlhZGRyc4wACgSsEvsYBjJ-3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMrs0goKRQzn8VJM5W7MfxSjYoHAvm1dq5MJ94rUQy-FoN0Y3CCMn2DdWRwgjJ_hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-27_04-20-14__6c8ee5fa-719e-4017-95ae-f49dc7f7aefd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.220.175
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['25205', '25206', '25207', '25208', '25209']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 25205:25205 -p 25206:25206 -p 25207:25207 -p 25208:25208 -p 25209:25209 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25207 --rest-port=25205 --tcp-port=25206 --discv5-udp-port=25208 --rest-address=0.0.0.0 --nat=extip:172.18.220.175 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8aab47b6cc49733a364a436d7af0fb3f122bd95ccfaa7b5decab80d7a1ddcae7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25209 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QPNPGDqzLJx9QwsnS7dNWqB_riKln1M4YEQzQBuzIMlbEXtAaTdx6CUwH9aIMkql3k73ag_howXQ_c8obtQmgOgBgmlkgnY0gmlwhKwS-xiKbXVsdGlhZGRyc4wACgSsEvsYBjJ-3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMrs0goKRQzn8VJM5W7MfxSjYoHAvm1dq5MJ94rUQy-FoN0Y3CCMn2DdWRwgjJ_hXdha3UyBQ --filternode=/ip4/172.18.251.24/tcp/12925/p2p/16Uiu2HAmFbaSSTnnvuKCG26oLma3unRTCnVj8W7tC9uQc6QGzRMw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.220.175 waku 8385d77a63d2506927815455d624799ef74c8d30b29c93fe942a8f1cd755a737
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 8385d77a63d2. Setting up logs at ./log/docker/node2_2024-08-27_04-20-14__6c8ee5fa-719e-4017-95ae-f49dc7f7aefd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 25205
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25205/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25205/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.220.175/tcp/25206/p2p/16Uiu2HAmCqUTP7XzpaZowqZS86hCZ7WpKyQg6GwicjK531KX1xMm","/ip4/172.18.220.175/tcp/25207/ws/p2p/16Uiu2HAmCqUTP7XzpaZowqZS86hCZ7WpKyQg6GwicjK531KX1xMm"],"enrUri":"enr:-LO4QLC87JOnfhqD8wzqvxS62425k-4pk12F77S4ErPUgrCKAZBodxQfR_8PzFDVr666J4mIWQKJd95BbK7opPZBTyUBgmlkgnY0gmlwhKwS3K-KbXVsdGlhZGRyc4wACgSsEtyvBmJ33QOCcnOFAAMBAACJc2VjcDI1NmsxoQMCr5Yor5VD38dGdQZn5Nnwse8XsTXdft3CUiy6CxVBkIN0Y3CCYnaDdWRwgmJ4hXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25205/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.251.24/tcp/12925/p2p/16Uiu2HAmFbaSSTnnvuKCG26oLma3unRTCnVj8W7tC9uQc6QGzRMw"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12924/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25205/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "690a703f-1210-4ce3-a20d-45c80871c81a", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"690a703f-1210-4ce3-a20d-45c80871c81a","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:25205/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1", "extraField": "extraValue"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:25205/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 2327ce1b6343
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 8385d77a63d2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.