[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2024-08-27_04-22-57__b70dfe12-522d-41e7-9a4a-4a601c304ba1
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-27_04-22-57__b70dfe12-522d-41e7-9a4a-4a601c304ba1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.133.208
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['61876', '61877', '61878', '61879', '61880']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 61876:61876 -p 61877:61877 -p 61878:61878 -p 61879:61879 -p 61880:61880 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61878 --rest-port=61876 --tcp-port=61877 --discv5-udp-port=61879 --rest-address=0.0.0.0 --nat=extip:172.18.133.208 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f07ff682ee96f7b23979ee6af44c59caf6bcaeeafdb525bcc9358a2f4f6148c4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61880 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.133.208 waku f93a486415ca6ad565fe37d55367eb857866d5c9ba6354c32c7a592a5b7125e4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID f93a486415ca. Setting up logs at ./log/docker/receiving_node1_2024-08-27_04-22-57__b70dfe12-522d-41e7-9a4a-4a601c304ba1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 61876
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61876/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61876/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.133.208/tcp/61877/p2p/16Uiu2HAm2nLZTo4uHSRk79SS11hy66Qos9yV4To7e3aPfE4LgDhc","/ip4/172.18.133.208/tcp/61878/ws/p2p/16Uiu2HAm2nLZTo4uHSRk79SS11hy66Qos9yV4To7e3aPfE4LgDhc"],"enrUri":"enr:-LO4QLkM7HLgDRjZ7MqMFdq6E9wQfoYLQ4cdeT3_EAQYfJU5Yu4jQF3XNNv5K-zuhiVi6wrqzM-hS4pxm1u-NCXMQvABgmlkgnY0gmlwhKwShdCKbXVsdGlhZGRyc4wACgSsEoXQBvG23QOCcnOFAAMBAACJc2VjcDI1NmsxoQJtTQw7avCY7_7emkuqIBE902oxQHKIm6ECbyxhy-E8S4N0Y3CC8bWDdWRwgvG3hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-27_04-22-57__b70dfe12-522d-41e7-9a4a-4a601c304ba1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.216.205
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['48540', '48541', '48542', '48543', '48544']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 48540:48540 -p 48541:48541 -p 48542:48542 -p 48543:48543 -p 48544:48544 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48542 --rest-port=48540 --tcp-port=48541 --discv5-udp-port=48543 --rest-address=0.0.0.0 --nat=extip:172.18.216.205 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=caae7607afdaa62315ee721d43c613e81ecd28f070f4bfedd2ddd0acef7aebfb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48544 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.216.205 waku 3553c824c58b34dce663c06672c981001e7b0db298e9f396ab1c2ce37c36ca13
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 3553c824c58b. Setting up logs at ./log/docker/receiving_node2_2024-08-27_04-22-57__b70dfe12-522d-41e7-9a4a-4a601c304ba1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 48540
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48540/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48540/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.216.205/tcp/48541/p2p/16Uiu2HAmJnji4HEUvBtXG77Bj6LFggrV3cPJzNPigLthPj6q7BuU","/ip4/172.18.216.205/tcp/48542/ws/p2p/16Uiu2HAmJnji4HEUvBtXG77Bj6LFggrV3cPJzNPigLthPj6q7BuU"],"enrUri":"enr:-LO4QJnEXnQ7r0ND2HkBcEV4Sb8phclcSi9uziIRxFkCMvXWDPcNHvSTsDGfWunorHVQOKKO298mwt-0YnGdFhaLjpUBgmlkgnY0gmlwhKwS2M2KbXVsdGlhZGRyc4wACgSsEtjNBr2e3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNbIjZbsHbQ1C_9ODeCg0Y0auy6p9pzWd4mKbhfFjmi24N0Y3CCvZ2DdWRwgr2fhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48540/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.133.208/tcp/61877/p2p/16Uiu2HAm2nLZTo4uHSRk79SS11hy66Qos9yV4To7e3aPfE4LgDhc"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-27_04-22-57__b70dfe12-522d-41e7-9a4a-4a601c304ba1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.114.143
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['14500', '14501', '14502', '14503', '14504']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 14500:14500 -p 14501:14501 -p 14502:14502 -p 14503:14503 -p 14504:14504 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14502 --rest-port=14500 --tcp-port=14501 --discv5-udp-port=14503 --rest-address=0.0.0.0 --nat=extip:172.18.114.143 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a7b41cca26a1070fe3edcfb6200db9eb23bf9429ac52d7ff9ba8e3eec916ddc3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14504 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QLkM7HLgDRjZ7MqMFdq6E9wQfoYLQ4cdeT3_EAQYfJU5Yu4jQF3XNNv5K-zuhiVi6wrqzM-hS4pxm1u-NCXMQvABgmlkgnY0gmlwhKwShdCKbXVsdGlhZGRyc4wACgSsEoXQBvG23QOCcnOFAAMBAACJc2VjcDI1NmsxoQJtTQw7avCY7_7emkuqIBE902oxQHKIm6ECbyxhy-E8S4N0Y3CC8bWDdWRwgvG3hXdha3UyCQ --lightpushnode=/ip4/172.18.133.208/tcp/61877/p2p/16Uiu2HAm2nLZTo4uHSRk79SS11hy66Qos9yV4To7e3aPfE4LgDhc --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.114.143 waku e5a8e3d1c724c8ae2f702c7023bb29b040ac010a5cf7673dbcfa53bf68427fda
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e5a8e3d1c724. Setting up logs at ./log/docker/lightpush_node1_2024-08-27_04-22-57__b70dfe12-522d-41e7-9a4a-4a601c304ba1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 14500
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14500/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14500/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.114.143/tcp/14501/p2p/16Uiu2HAmLpkBVHzzbDVRB6LnZ2aPaW2fXDsGSn9zBgq1C7AGC326","/ip4/172.18.114.143/tcp/14502/ws/p2p/16Uiu2HAmLpkBVHzzbDVRB6LnZ2aPaW2fXDsGSn9zBgq1C7AGC326"],"enrUri":"enr:-LO4QFAfKlc_8NXzE7aT5_e5_3aIrCoUR8JPepv6qTwa1ZyjNGeRyWSFXP76rD9GtGGuTwP6D7Owxdvge7ksq-DmPWYBgmlkgnY0gmlwhKwSco-KbXVsdGlhZGRyc4wACgSsEnKPBjim3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN5XUhW9RA0pzXDP_sggNxevdtMxCaJsA8JRT2AFhbVz4N0Y3CCOKWDdWRwgjinhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14500/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.133.208/tcp/61877/p2p/16Uiu2HAm2nLZTo4uHSRk79SS11hy66Qos9yV4To7e3aPfE4LgDhc"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14500/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.216.205/tcp/48541/p2p/16Uiu2HAmJnji4HEUvBtXG77Bj6LFggrV3cPJzNPigLthPj6q7BuU"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61876/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48540/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14500/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724732582350022400}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:14500/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14500/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724732582354927616}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:14500/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14500/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724732582358876416}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:14500/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14500/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724732582363088896}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:14500/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id f93a486415ca
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 3553c824c58b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id e5a8e3d1c724
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.