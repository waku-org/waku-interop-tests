[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2024-08-27_04-23-37__3d97b40c-3372-497e-b5c7-792d12ceb275
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-27_04-23-37__3d97b40c-3372-497e-b5c7-792d12ceb275__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.241.116
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['46045', '46046', '46047', '46048', '46049']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 46045:46045 -p 46046:46046 -p 46047:46047 -p 46048:46048 -p 46049:46049 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46047 --rest-port=46045 --tcp-port=46046 --discv5-udp-port=46048 --rest-address=0.0.0.0 --nat=extip:172.18.241.116 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d05ff3eb7b3e51c480ec9e3f089bb02ccb3fcff6fb7cfb3e32df6debc313eecb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46049 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.241.116 waku 9e3edd21004e861da779353e1d90a564003ec2482ca6f6adb14543babe9574a8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 9e3edd21004e. Setting up logs at ./log/docker/receiving_node1_2024-08-27_04-23-37__3d97b40c-3372-497e-b5c7-792d12ceb275__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 46045
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46045/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46045/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.241.116/tcp/46046/p2p/16Uiu2HAm8nst6c2DJJDwia3wnT215sEVtN2pFQGdZTJt4VbGm7HJ","/ip4/172.18.241.116/tcp/46047/ws/p2p/16Uiu2HAm8nst6c2DJJDwia3wnT215sEVtN2pFQGdZTJt4VbGm7HJ"],"enrUri":"enr:-LO4QP7Tmb5ODuTzN_TtqlCqw2L83Fz-zrw_pomcNa36fytfQ2hZblcjG73TMGsxMjqi7LkC4Zf6B17_KbWzVN40fkABgmlkgnY0gmlwhKwS8XSKbXVsdGlhZGRyc4wACgSsEvF0BrPf3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLGlpWdVDTh2UEV9GMBLKC1dEI15K-u0YMml2Gggsz4GYN0Y3CCs96DdWRwgrPghXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-27_04-23-37__3d97b40c-3372-497e-b5c7-792d12ceb275__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.123.164
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['18106', '18107', '18108', '18109', '18110']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 18106:18106 -p 18107:18107 -p 18108:18108 -p 18109:18109 -p 18110:18110 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18108 --rest-port=18106 --tcp-port=18107 --discv5-udp-port=18109 --rest-address=0.0.0.0 --nat=extip:172.18.123.164 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f3ac5fe35be9bdf22fefbe6b5c9aabe0f59a25bfb5c907f1e4200fe796a02e35 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18110 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.123.164 waku 935b493b005c9b885735dce966b13abfe60c2d4d5c45bb142e0e1c75814ab23e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 935b493b005c. Setting up logs at ./log/docker/receiving_node2_2024-08-27_04-23-37__3d97b40c-3372-497e-b5c7-792d12ceb275__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 18106
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18106/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18106/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.123.164/tcp/18107/p2p/16Uiu2HAmAjMYB86Gpn2ihsrEctXVABQhxJj36EAFeGRfpXtZS3jc","/ip4/172.18.123.164/tcp/18108/ws/p2p/16Uiu2HAmAjMYB86Gpn2ihsrEctXVABQhxJj36EAFeGRfpXtZS3jc"],"enrUri":"enr:-LO4QASE4ymnl5eOYzz7NSx0ocqIpZnP70pmyjX3ZwzB3XLWbdk-doiI_O-04Ovo3-WETf7oCJkOTbAp-ydZD2U74iEBgmlkgnY0gmlwhKwSe6SKbXVsdGlhZGRyc4wACgSsEnukBka83QOCcnOFAAMBAACJc2VjcDI1NmsxoQLjZugH4DyCh1Jh8azCTaVeo_X9nrrwKBXR8qg1jI-lt4N0Y3CCRruDdWRwgka9hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18106/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.241.116/tcp/46046/p2p/16Uiu2HAm8nst6c2DJJDwia3wnT215sEVtN2pFQGdZTJt4VbGm7HJ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-27_04-23-37__3d97b40c-3372-497e-b5c7-792d12ceb275__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.195.176
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['31945', '31946', '31947', '31948', '31949']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 31945:31945 -p 31946:31946 -p 31947:31947 -p 31948:31948 -p 31949:31949 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31947 --rest-port=31945 --tcp-port=31946 --discv5-udp-port=31948 --rest-address=0.0.0.0 --nat=extip:172.18.195.176 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7baddf7c2de3e7f9f4cf67d7f1fcef7cb1ebf11046d66ecda3e097b305aa9157 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31949 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QP7Tmb5ODuTzN_TtqlCqw2L83Fz-zrw_pomcNa36fytfQ2hZblcjG73TMGsxMjqi7LkC4Zf6B17_KbWzVN40fkABgmlkgnY0gmlwhKwS8XSKbXVsdGlhZGRyc4wACgSsEvF0BrPf3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLGlpWdVDTh2UEV9GMBLKC1dEI15K-u0YMml2Gggsz4GYN0Y3CCs96DdWRwgrPghXdha3UyCQ --lightpushnode=/ip4/172.18.241.116/tcp/46046/p2p/16Uiu2HAm8nst6c2DJJDwia3wnT215sEVtN2pFQGdZTJt4VbGm7HJ --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.195.176 waku 5326547962ff98282b9d73a29cd80340f6acb73cd00dc4969d041dea47eed30b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 5326547962ff. Setting up logs at ./log/docker/lightpush_node1_2024-08-27_04-23-37__3d97b40c-3372-497e-b5c7-792d12ceb275__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 31945
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31945/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31945/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.195.176/tcp/31946/p2p/16Uiu2HAm5Kn6ExsDunav6eeGeg4GnkSgg37QJoU2SzVubVKPYqs3","/ip4/172.18.195.176/tcp/31947/ws/p2p/16Uiu2HAm5Kn6ExsDunav6eeGeg4GnkSgg37QJoU2SzVubVKPYqs3"],"enrUri":"enr:-LO4QGDKFGdS3jfLjQ2PQronZUgyfhlyx8jtOjMeykVDVDxSZN5Lq0cJUTxx5hm_7vvSzL5eCE9tjd3RrxBCxAgyV8sBgmlkgnY0gmlwhKwSw7CKbXVsdGlhZGRyc4wACgSsEsOwBnzL3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKTEktZg2cZIrlnSUSQxYBFwNqGPc0Y6VfCjCVdVG6tjoN0Y3CCfMqDdWRwgnzMhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31945/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.241.116/tcp/46046/p2p/16Uiu2HAm8nst6c2DJJDwia3wnT215sEVtN2pFQGdZTJt4VbGm7HJ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31945/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.123.164/tcp/18107/p2p/16Uiu2HAmAjMYB86Gpn2ihsrEctXVABQhxJj36EAFeGRfpXtZS3jc"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46045/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18106/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31945/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724732622921366528, "extraField": "extraValue"}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:31945/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 9e3edd21004e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 935b493b005c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 5326547962ff
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.