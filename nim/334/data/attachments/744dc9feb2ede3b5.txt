[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_no_timestamp with id: 2024-08-27_04-23-10__0d74aabb-739b-4346-974d-f181dba0f194
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-27_04-23-10__0d74aabb-739b-4346-974d-f181dba0f194__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.186.49
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['14572', '14573', '14574', '14575', '14576']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 14572:14572 -p 14573:14573 -p 14574:14574 -p 14575:14575 -p 14576:14576 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14574 --rest-port=14572 --tcp-port=14573 --discv5-udp-port=14575 --rest-address=0.0.0.0 --nat=extip:172.18.186.49 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3109092d7fc5ffac431078d82256e4cfb1e2f13fa1ef8f0bef0d5cb90efa4bcc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14576 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.186.49 waku 6287bef285e24deaade4ceca428addf404bb436f3d0aed9499ed27e13e68b931
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 6287bef285e2. Setting up logs at ./log/docker/receiving_node1_2024-08-27_04-23-10__0d74aabb-739b-4346-974d-f181dba0f194__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 14572
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14572/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14572/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.186.49/tcp/14573/p2p/16Uiu2HAmDkkfVwfQHXwQtQC8VTKfwgG9yvcu7vsaF54ss9XUK5FC","/ip4/172.18.186.49/tcp/14574/ws/p2p/16Uiu2HAmDkkfVwfQHXwQtQC8VTKfwgG9yvcu7vsaF54ss9XUK5FC"],"enrUri":"enr:-LO4QE2-Kv1GaPrdrYBX_7V6HBCx65EDBaln8HWbmyOegOFVaSV2eNtBCWAHzlaNNSCr4jTNNUz2uzXouSZoYjWOXQIBgmlkgnY0gmlwhKwSujGKbXVsdGlhZGRyc4wACgSsEroxBjju3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMQVbJqFma3xONO-DkVxrsWonmtSsuD9T_ETidclMkHB4N0Y3CCOO2DdWRwgjjvhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-27_04-23-10__0d74aabb-739b-4346-974d-f181dba0f194__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.184.133
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['41101', '41102', '41103', '41104', '41105']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 41101:41101 -p 41102:41102 -p 41103:41103 -p 41104:41104 -p 41105:41105 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41103 --rest-port=41101 --tcp-port=41102 --discv5-udp-port=41104 --rest-address=0.0.0.0 --nat=extip:172.18.184.133 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=702e3aa0a014e908f5abc5cbceeec54daf884f94d5bdee754c0ffd71383a1c83 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41105 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.184.133 waku 79d3ece688442b58363d5b0d62be56cf8e995bbbf118da8ef54b3f10a88ec7c9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 79d3ece68844. Setting up logs at ./log/docker/receiving_node2_2024-08-27_04-23-10__0d74aabb-739b-4346-974d-f181dba0f194__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 41101
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41101/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41101/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.184.133/tcp/41102/p2p/16Uiu2HAmMqR3BfRzFh63emhrZp6PN7NDCcRab79zgdXgSA4FVxLc","/ip4/172.18.184.133/tcp/41103/ws/p2p/16Uiu2HAmMqR3BfRzFh63emhrZp6PN7NDCcRab79zgdXgSA4FVxLc"],"enrUri":"enr:-LO4QHkA9QFJbaUNRQZWxl6nT-hG3BGSH8Vz3VNId8tsD2f6WD0_zzL5vz5rQtFA8jAWS0xFmMvrPxAA8mmut-x_3CgBgmlkgnY0gmlwhKwSuIWKbXVsdGlhZGRyc4wACgSsEriFBqCP3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOIZOex7fcoAHSfsiRE25gAMYW7PJKdRkCt_wJ36GtVDYN0Y3CCoI6DdWRwgqCQhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41101/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.186.49/tcp/14573/p2p/16Uiu2HAmDkkfVwfQHXwQtQC8VTKfwgG9yvcu7vsaF54ss9XUK5FC"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-27_04-23-10__0d74aabb-739b-4346-974d-f181dba0f194__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.21.3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['9451', '9452', '9453', '9454', '9455']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 9451:9451 -p 9452:9452 -p 9453:9453 -p 9454:9454 -p 9455:9455 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9453 --rest-port=9451 --tcp-port=9452 --discv5-udp-port=9454 --rest-address=0.0.0.0 --nat=extip:172.18.21.3 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5cd19f1af0a06fac73fcb013b30ab91838b0e8883afbaf8da34934b1d09d4b36 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9455 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QE2-Kv1GaPrdrYBX_7V6HBCx65EDBaln8HWbmyOegOFVaSV2eNtBCWAHzlaNNSCr4jTNNUz2uzXouSZoYjWOXQIBgmlkgnY0gmlwhKwSujGKbXVsdGlhZGRyc4wACgSsEroxBjju3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMQVbJqFma3xONO-DkVxrsWonmtSsuD9T_ETidclMkHB4N0Y3CCOO2DdWRwgjjvhXdha3UyCQ --lightpushnode=/ip4/172.18.186.49/tcp/14573/p2p/16Uiu2HAmDkkfVwfQHXwQtQC8VTKfwgG9yvcu7vsaF54ss9XUK5FC --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.21.3 waku f1a87a5bcc8b93677dba945308747b26140332df69fa676d558ad71e357b8eb3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID f1a87a5bcc8b. Setting up logs at ./log/docker/lightpush_node1_2024-08-27_04-23-10__0d74aabb-739b-4346-974d-f181dba0f194__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 9451
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9451/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9451/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.21.3/tcp/9452/p2p/16Uiu2HAmR6isNfN5e3kxcSxUokuk9BCx6WzGs9UWrGvz9fnd4Aev","/ip4/172.18.21.3/tcp/9453/ws/p2p/16Uiu2HAmR6isNfN5e3kxcSxUokuk9BCx6WzGs9UWrGvz9fnd4Aev"],"enrUri":"enr:-LO4QPUXgJUSFzEK27dR7pCcM2MwhbeEGvLo3FDcrmoCCD23TXDgXWdV3EW19JqIBNrlGURu444LWK6ltmP9DvSSZKIBgmlkgnY0gmlwhKwSFQOKbXVsdGlhZGRyc4wACgSsEhUDBiTt3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO449biDhigezQp6sIRgIPgpuBsjg3RtwFlCukZT85BM4N0Y3CCJOyDdWRwgiTuhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9451/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.186.49/tcp/14573/p2p/16Uiu2HAmDkkfVwfQHXwQtQC8VTKfwgG9yvcu7vsaF54ss9XUK5FC"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9451/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.184.133/tcp/41102/p2p/16Uiu2HAmMqR3BfRzFh63emhrZp6PN7NDCcRab79zgdXgSA4FVxLc"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14572/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41101/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9451/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14572/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724732595530172928,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41101/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724732595530172928,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 6287bef285e2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 79d3ece68844
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id f1a87a5bcc8b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.