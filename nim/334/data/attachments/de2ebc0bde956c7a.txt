[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_sender_uses_auto_api_receiver_uses_regular_api with id: 2024-08-27_04-30-58__8e7967d7-90be-4d3e-b0a7-f11e104ef930
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-27_04-30-58__8e7967d7-90be-4d3e-b0a7-f11e104ef930__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.206.174
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['42790', '42791', '42792', '42793', '42794']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 42790:42790 -p 42791:42791 -p 42792:42792 -p 42793:42793 -p 42794:42794 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42792 --rest-port=42790 --tcp-port=42791 --discv5-udp-port=42793 --rest-address=0.0.0.0 --nat=extip:172.18.206.174 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=b5bb29579fe7ff2fd975d728effa2a5eeeb680b8a292ecdbc6a95ab3e48a96f3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42794 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.206.174 waku 56f99ad12cac47f66d5769ac757d6d181dc7d0f3b39153b808591b046b3bc16f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 56f99ad12cac. Setting up logs at ./log/docker/node1_2024-08-27_04-30-58__8e7967d7-90be-4d3e-b0a7-f11e104ef930__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 42790
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42790/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42790/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.206.174/tcp/42791/p2p/16Uiu2HAmKkKHE22zd7yrdYfnC27BAsL3ApWqwcCNneZDrqxmkG3D","/ip4/172.18.206.174/tcp/42792/ws/p2p/16Uiu2HAmKkKHE22zd7yrdYfnC27BAsL3ApWqwcCNneZDrqxmkG3D"],"enrUri":"enr:-LO4QHtaSyq3ehV6Xc6M3xYhSUEcMWcDWzzcZAIomCzef2ilWLqP_Bt4Z3u165pCIpfELlvnFHvH5gLQbVViEIXbfw0BgmlkgnY0gmlwhKwSzq6KbXVsdGlhZGRyc4wACgSsEs6uBqco3QOCcnOFAAIBAACJc2VjcDI1NmsxoQNpXx3dX1nRmtHuakQJsnuBuX_hslAcfkUWNKrpcQBU9IN0Y3CCpyeDdWRwgqcphXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-27_04-30-58__8e7967d7-90be-4d3e-b0a7-f11e104ef930__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.220.117
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['64925', '64926', '64927', '64928', '64929']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 64925:64925 -p 64926:64926 -p 64927:64927 -p 64928:64928 -p 64929:64929 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64927 --rest-port=64925 --tcp-port=64926 --discv5-udp-port=64928 --rest-address=0.0.0.0 --nat=extip:172.18.220.117 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=0f5fd12c4decde3aeb4dc5a7dfca9daa884c8e7907d5ecaadff466cf3c5f6a05 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64929 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QHtaSyq3ehV6Xc6M3xYhSUEcMWcDWzzcZAIomCzef2ilWLqP_Bt4Z3u165pCIpfELlvnFHvH5gLQbVViEIXbfw0BgmlkgnY0gmlwhKwSzq6KbXVsdGlhZGRyc4wACgSsEs6uBqco3QOCcnOFAAIBAACJc2VjcDI1NmsxoQNpXx3dX1nRmtHuakQJsnuBuX_hslAcfkUWNKrpcQBU9IN0Y3CCpyeDdWRwgqcphXdha3UyBQ --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.220.117 waku 8f4ba944e918ef5eaaa6832721a76879589fcc617ddfdee5b4bf8f737e9f4452
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 8f4ba944e918. Setting up logs at ./log/docker/node2_2024-08-27_04-30-58__8e7967d7-90be-4d3e-b0a7-f11e104ef930__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 64925
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64925/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64925/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.220.117/tcp/64926/p2p/16Uiu2HAm9GBbwsfCXjvCH6UkNXjZQN38sEY7xq18F6qwpyH5yn2Q","/ip4/172.18.220.117/tcp/64927/ws/p2p/16Uiu2HAm9GBbwsfCXjvCH6UkNXjZQN38sEY7xq18F6qwpyH5yn2Q"],"enrUri":"enr:-LO4QNGepcsGul8V9cWK5uECr_T_iCRNu7Z5kBUAPHdc8TqhLreBZaXNICCilspG8nYUURrCsBCFKYVviKnDdn2kRfIBgmlkgnY0gmlwhKwS3HWKbXVsdGlhZGRyc4wACgSsEtx1Bv2f3QOCcnOFAAIBAACJc2VjcDI1NmsxoQLNlU3YyP2fccd1JJr2s4fxS8E2DfxwwssnwFLQq8zsJYN0Y3CC_Z6DdWRwgv2ghXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64925/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.206.174/tcp/42791/p2p/16Uiu2HAmKkKHE22zd7yrdYfnC27BAsL3ApWqwcCNneZDrqxmkG3D"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42790/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64925/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42790/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64925/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724733062141040384,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 56f99ad12cac
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 8f4ba944e918
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.