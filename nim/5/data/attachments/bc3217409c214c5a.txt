[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_only_store with id: 2024-05-06_07-51-52__e9145821-e548-4e6c-b743-24e0643a1d7f
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-06_07-51-52__e9145821-e548-4e6c-b743-24e0643a1d7f__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.105.121
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['20310', '20311', '20312', '20313', '20314']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 20310:20310 -p 20311:20311 -p 20312:20312 -p 20313:20313 -p 20314:20314 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20312 --rest-port=20310 --tcp-port=20311 --discv5-udp-port=20313 --rest-address=0.0.0.0 --nat=extip:172.18.105.121 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20314 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.105.121 waku 9704df56b169f792e7255950a4422860387485e04d509368306c606c34151eda
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 9704df56b169. Setting up logs at ./log/docker/publishing_node1_2024-05-06_07-51-52__e9145821-e548-4e6c-b743-24e0643a1d7f__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 20310
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20310/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.105.121/tcp/20311/p2p/16Uiu2HAmGRKp8nsN5J3zBStmbPBzMyMeaeHAtdce3ru6YtXDrUhq","/ip4/172.18.105.121/tcp/20312/ws/p2p/16Uiu2HAmGRKp8nsN5J3zBStmbPBzMyMeaeHAtdce3ru6YtXDrUhq"],"enrUri":"enr:-LO4QKkx5EXtHHF-2iqpC16quzVfXaQIBSrbGQyelPPV_yagYI4a1jxxhbJ656kg1aTF04tgo0QT_MxJ1tXpaq05YYwBgmlkgnY0gmlwhKwSaXmKbXVsdGlhZGRyc4wACgSsEml5Bk9Y3QOCcnOFAAABAACJc2VjcDI1NmsxoQM37p-C-qJoPL8R0cA-Ro3nQTV1s5-JnkBooGqXCcBIdIN0Y3CCT1eDdWRwgk9ZhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-06_07-51-52__e9145821-e548-4e6c-b743-24e0643a1d7f__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.253.1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['63121', '63122', '63123', '63124', '63125']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 63121:63121 -p 63122:63122 -p 63123:63123 -p 63124:63124 -p 63125:63125 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63123 --rest-port=63121 --tcp-port=63122 --discv5-udp-port=63124 --rest-address=0.0.0.0 --nat=extip:172.18.253.1 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63125 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QKkx5EXtHHF-2iqpC16quzVfXaQIBSrbGQyelPPV_yagYI4a1jxxhbJ656kg1aTF04tgo0QT_MxJ1tXpaq05YYwBgmlkgnY0gmlwhKwSaXmKbXVsdGlhZGRyc4wACgSsEml5Bk9Y3QOCcnOFAAABAACJc2VjcDI1NmsxoQM37p-C-qJoPL8R0cA-Ro3nQTV1s5-JnkBooGqXCcBIdIN0Y3CCT1eDdWRwgk9ZhXdha3UyAw --storenode=/ip4/172.18.105.121/tcp/20311/p2p/16Uiu2HAmGRKp8nsN5J3zBStmbPBzMyMeaeHAtdce3ru6YtXDrUhq --store=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.253.1 waku ad6f653be03e4adbb22582c842c50770a7fe7b03717c7e2a39afff5aa7d42333
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID ad6f653be03e. Setting up logs at ./log/docker/store_node1_2024-05-06_07-51-52__e9145821-e548-4e6c-b743-24e0643a1d7f__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 63121
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63121/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.253.1/tcp/63122/p2p/16Uiu2HAmH1hQsw221vUFgqJqDBqGgdH1EieyUA26zR2UsU2EFiT6","/ip4/172.18.253.1/tcp/63123/ws/p2p/16Uiu2HAmH1hQsw221vUFgqJqDBqGgdH1EieyUA26zR2UsU2EFiT6"],"enrUri":"enr:-LO4QCjs9vIUIgefDtWhbWN2rCKFxNDgsZ7YBHuS2b-Y-DEOEHvJC_9QmqktU2E2TCZ1L-7wlEq_lNrlWylO-JIUIaUBgmlkgnY0gmlwhKwS_QGKbXVsdGlhZGRyc4wACgSsEv0BBvaT3QOCcnOFAAABAACJc2VjcDI1NmsxoQNAvMrumENqQTMUmlf1nMGBi5usQ068efZvIhJxHYiRDYN0Y3CC9pKDdWRwgvaUhXdha3UyAg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63121/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.105.121/tcp/20311/p2p/16Uiu2HAmGRKp8nsN5J3zBStmbPBzMyMeaeHAtdce3ru6YtXDrUhq"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20310/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20310/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20310/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714981915316891904,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 9704df56b169
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id ad6f653be03e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-06_07-51-52__e9145821-e548-4e6c-b743-24e0643a1d7f__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-06_07-51-52__e9145821-e548-4e6c-b743-24e0643a1d7f__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_only_store with id: 2024-05-06_07-51-59__0af9dfcd-714d-44d8-ada2-0548240f4e35
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-06_07-51-59__0af9dfcd-714d-44d8-ada2-0548240f4e35__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.196.130
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['53851', '53852', '53853', '53854', '53855']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 53851:53851 -p 53852:53852 -p 53853:53853 -p 53854:53854 -p 53855:53855 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53853 --rest-port=53851 --tcp-port=53852 --discv5-udp-port=53854 --rest-address=0.0.0.0 --nat=extip:172.18.196.130 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53855 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.196.130 waku 3230a9e6ed4bc0f115435f2b64583ea0b489fcf3d8b9983edb0babc687925358
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 3230a9e6ed4b. Setting up logs at ./log/docker/publishing_node1_2024-05-06_07-51-59__0af9dfcd-714d-44d8-ada2-0548240f4e35__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 53851
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53851/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.196.130/tcp/53852/p2p/16Uiu2HAmUC8WAtQuMpNfe5sZos2sNsvRYduW6SLgHPQ1yyUfNqeU","/ip4/172.18.196.130/tcp/53853/ws/p2p/16Uiu2HAmUC8WAtQuMpNfe5sZos2sNsvRYduW6SLgHPQ1yyUfNqeU"],"enrUri":"enr:-LO4QI8YUfxoe0cvWkU7FL3eq9lloYE7EpHG53H6mA2gIocmBJUCPnmS5sEdfyyTBlma7fIeHHdUjfzHaFM1kuq_vb4BgmlkgnY0gmlwhKwSxIKKbXVsdGlhZGRyc4wACgSsEsSCBtJd3QOCcnOFAAABAACJc2VjcDI1NmsxoQPm2YcaciOhy60tetsWBcjsd9sINuv32jZ5_MDK3LikxYN0Y3CC0lyDdWRwgtJehXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-06_07-51-59__0af9dfcd-714d-44d8-ada2-0548240f4e35__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.55.47
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['37524', '37525', '37526', '37527', '37528']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 37524:37524 -p 37525:37525 -p 37526:37526 -p 37527:37527 -p 37528:37528 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37526 --rest-port=37524 --tcp-port=37525 --discv5-udp-port=37527 --rest-address=0.0.0.0 --nat=extip:172.18.55.47 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37528 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QI8YUfxoe0cvWkU7FL3eq9lloYE7EpHG53H6mA2gIocmBJUCPnmS5sEdfyyTBlma7fIeHHdUjfzHaFM1kuq_vb4BgmlkgnY0gmlwhKwSxIKKbXVsdGlhZGRyc4wACgSsEsSCBtJd3QOCcnOFAAABAACJc2VjcDI1NmsxoQPm2YcaciOhy60tetsWBcjsd9sINuv32jZ5_MDK3LikxYN0Y3CC0lyDdWRwgtJehXdha3UyAw --storenode=/ip4/172.18.196.130/tcp/53852/p2p/16Uiu2HAmUC8WAtQuMpNfe5sZos2sNsvRYduW6SLgHPQ1yyUfNqeU --store=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.55.47 waku 31f2bbe4a0377d8f632905e6414116e5eb51e938abe4d9b4b47da00c46c96316
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 31f2bbe4a037. Setting up logs at ./log/docker/store_node1_2024-05-06_07-51-59__0af9dfcd-714d-44d8-ada2-0548240f4e35__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 37524
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37524/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.55.47/tcp/37525/p2p/16Uiu2HAmLrhNiPfiKiAA7TVs1a5kbsqA8A83H3NgqxQVFducPy5d","/ip4/172.18.55.47/tcp/37526/ws/p2p/16Uiu2HAmLrhNiPfiKiAA7TVs1a5kbsqA8A83H3NgqxQVFducPy5d"],"enrUri":"enr:-LO4QPJnuCOKBCFF5Lgd86m7ShSGa9gc3wbnYfRD-8_mQS6jKy2Y3mJ1Vr9zsaSG3HxS2DEW0zDp1FgQ4JfNcnZNrDQBgmlkgnY0gmlwhKwSNy-KbXVsdGlhZGRyc4wACgSsEjcvBpKW3QOCcnOFAAABAACJc2VjcDI1NmsxoQN53UVbsWnJ1WfsM1ZGtln0NcpQso-EeniHSmoF51gADIN0Y3CCkpWDdWRwgpKXhXdha3UyAg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37524/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.196.130/tcp/53852/p2p/16Uiu2HAmUC8WAtQuMpNfe5sZos2sNsvRYduW6SLgHPQ1yyUfNqeU"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53851/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53851/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53851/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714981922262137088,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 3230a9e6ed4b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 31f2bbe4a037
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-06_07-51-59__0af9dfcd-714d-44d8-ada2-0548240f4e35__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-06_07-51-59__0af9dfcd-714d-44d8-ada2-0548240f4e35__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_only_store with id: 2024-05-06_07-52-06__0cbeadac-9eea-4de4-bec7-7c24c870a739
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-06_07-52-06__0cbeadac-9eea-4de4-bec7-7c24c870a739__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.159.28
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['63585', '63586', '63587', '63588', '63589']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 63585:63585 -p 63586:63586 -p 63587:63587 -p 63588:63588 -p 63589:63589 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63587 --rest-port=63585 --tcp-port=63586 --discv5-udp-port=63588 --rest-address=0.0.0.0 --nat=extip:172.18.159.28 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63589 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.159.28 waku 341c4ea25dad5e4cebc591682cbe029e3e14e216186fdb375f00dca84357f911
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 341c4ea25dad. Setting up logs at ./log/docker/publishing_node1_2024-05-06_07-52-06__0cbeadac-9eea-4de4-bec7-7c24c870a739__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 63585
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63585/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.159.28/tcp/63586/p2p/16Uiu2HAmQeoUPsPhUsee9VQddZag7MjVewVrzXr3p5TyHZB8NvFn","/ip4/172.18.159.28/tcp/63587/ws/p2p/16Uiu2HAmQeoUPsPhUsee9VQddZag7MjVewVrzXr3p5TyHZB8NvFn"],"enrUri":"enr:-LO4QKskGZMXJ_Q9NOvvucMjsafjFDmsn9j1eqoGDEtizYHbWTpziV-gbYo0j5XF-fMug2sjKI5nUVX9RY2pxtDVjIYBgmlkgnY0gmlwhKwSnxyKbXVsdGlhZGRyc4wACgSsEp8cBvhj3QOCcnOFAAABAACJc2VjcDI1NmsxoQOyP_Gi7Eje6UXSBujp7Iz3k514AKkUvk_bO9ci3PTIxYN0Y3CC-GKDdWRwgvhkhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-06_07-52-06__0cbeadac-9eea-4de4-bec7-7c24c870a739__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.244.95
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['14158', '14159', '14160', '14161', '14162']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 14158:14158 -p 14159:14159 -p 14160:14160 -p 14161:14161 -p 14162:14162 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14160 --rest-port=14158 --tcp-port=14159 --discv5-udp-port=14161 --rest-address=0.0.0.0 --nat=extip:172.18.244.95 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14162 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QKskGZMXJ_Q9NOvvucMjsafjFDmsn9j1eqoGDEtizYHbWTpziV-gbYo0j5XF-fMug2sjKI5nUVX9RY2pxtDVjIYBgmlkgnY0gmlwhKwSnxyKbXVsdGlhZGRyc4wACgSsEp8cBvhj3QOCcnOFAAABAACJc2VjcDI1NmsxoQOyP_Gi7Eje6UXSBujp7Iz3k514AKkUvk_bO9ci3PTIxYN0Y3CC-GKDdWRwgvhkhXdha3UyAw --storenode=/ip4/172.18.159.28/tcp/63586/p2p/16Uiu2HAmQeoUPsPhUsee9VQddZag7MjVewVrzXr3p5TyHZB8NvFn --store=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.244.95 waku 2ec9c18b70ccc339299abefa437cb48e77c16f853062a22f4f9bffa135b4e4cd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 2ec9c18b70cc. Setting up logs at ./log/docker/store_node1_2024-05-06_07-52-06__0cbeadac-9eea-4de4-bec7-7c24c870a739__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 14158
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14158/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.244.95/tcp/14159/p2p/16Uiu2HAmQsRdwvLo5QVTEJNHHpfAxoNm982mXb3fK9NjohAYsPU7","/ip4/172.18.244.95/tcp/14160/ws/p2p/16Uiu2HAmQsRdwvLo5QVTEJNHHpfAxoNm982mXb3fK9NjohAYsPU7"],"enrUri":"enr:-LO4QPwzfE-MtM2gQEnbHQPsL8_ykn138_r0B84iWwlwpKl6R2KPfsX9mwTXQrPP1d9-G8E0ezSPYX2RLXu6trq23tgBgmlkgnY0gmlwhKwS9F-KbXVsdGlhZGRyc4wACgSsEvRfBjdQ3QOCcnOFAAABAACJc2VjcDI1NmsxoQO1e84e0uB14DyTuaaLcbRAiQ75rBzMJEIKsByt38vznIN0Y3CCN0-DdWRwgjdRhXdha3UyAg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14158/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.159.28/tcp/63586/p2p/16Uiu2HAmQeoUPsPhUsee9VQddZag7MjVewVrzXr3p5TyHZB8NvFn"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63585/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63585/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63585/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714981929877335040,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 341c4ea25dad
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 2ec9c18b70cc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-06_07-52-06__0cbeadac-9eea-4de4-bec7-7c24c870a739__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-06_07-52-06__0cbeadac-9eea-4de4-bec7-7c24c870a739__harbor.status.im_wakuorg_nwaku:latest.log