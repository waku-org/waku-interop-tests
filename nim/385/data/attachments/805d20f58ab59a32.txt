[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_retrieve_messages_without_subscribing_via_api with id: 2024-10-08_04-27-25__0b842caa-f1fc-4691-9d49-2857a2b9db24
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-08_04-27-25__0b842caa-f1fc-4691-9d49-2857a2b9db24__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.97.108
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['21035', '21036', '21037', '21038', '21039']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 21035:21035 -p 21036:21036 -p 21037:21037 -p 21038:21038 -p 21039:21039 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21037 --rest-port=21035 --tcp-port=21036 --discv5-udp-port=21038 --rest-address=0.0.0.0 --nat=extip:172.18.97.108 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=a0a10fc7daf23d2bea8c25071feed626ebaf428aa9c9aec51fec7cd282daabca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21039 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.97.108 waku 4f1d00d62647acef436318515d37ea2228d1dca64a507993f3fc2d6b0b434dcb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4f1d00d62647. Setting up logs at ./log/docker/node1_2024-10-08_04-27-25__0b842caa-f1fc-4691-9d49-2857a2b9db24__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 21035
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21035/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21035/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.97.108/tcp/21036/p2p/16Uiu2HAkw5dKdFNMms3RfDqnpgYgJhPwcau6oSVhvYqJm847x2Na","/ip4/172.18.97.108/tcp/21037/ws/p2p/16Uiu2HAkw5dKdFNMms3RfDqnpgYgJhPwcau6oSVhvYqJm847x2Na"],"enrUri":"enr:-LO4QPQf-odq1zXAxtEHBBod1Sq1NIrd06KynQpfAcZ0FxyFAJdJ9YHiIqbEGmv1c6T7h13lo-MFHEaIQBDY861twnEBgmlkgnY0gmlwhKwSYWyKbXVsdGlhZGRyc4wACgSsEmFsBlIt3QOCcnOFAAIBAACJc2VjcDI1NmsxoQIYlMCPZn0tTMDgp_8JHJMtK7EUJHJEZr9cVgWc9zHOn4N0Y3CCUiyDdWRwglIuhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-08_04-27-25__0b842caa-f1fc-4691-9d49-2857a2b9db24__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.212.62
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['51933', '51934', '51935', '51936', '51937']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 51933:51933 -p 51934:51934 -p 51935:51935 -p 51936:51936 -p 51937:51937 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51935 --rest-port=51933 --tcp-port=51934 --discv5-udp-port=51936 --rest-address=0.0.0.0 --nat=extip:172.18.212.62 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=541be0f0c18c49a0b6fe5ca3dcca654dad9afbbf17de7f1fef9af0ebe4daeb2f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51937 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QPQf-odq1zXAxtEHBBod1Sq1NIrd06KynQpfAcZ0FxyFAJdJ9YHiIqbEGmv1c6T7h13lo-MFHEaIQBDY861twnEBgmlkgnY0gmlwhKwSYWyKbXVsdGlhZGRyc4wACgSsEmFsBlIt3QOCcnOFAAIBAACJc2VjcDI1NmsxoQIYlMCPZn0tTMDgp_8JHJMtK7EUJHJEZr9cVgWc9zHOn4N0Y3CCUiyDdWRwglIuhXdha3UyBQ --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.212.62 waku f5e885e48473f1f66046e8715080a39b1ed57f3f8b9ba5e8b0e452ee1c98fc98
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f5e885e48473. Setting up logs at ./log/docker/node2_2024-10-08_04-27-25__0b842caa-f1fc-4691-9d49-2857a2b9db24__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 51933
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51933/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51933/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.212.62/tcp/51934/p2p/16Uiu2HAmS1udvFQofimGZTHzRSdiTBckbxYU57gFvif2bsEB5iiG","/ip4/172.18.212.62/tcp/51935/ws/p2p/16Uiu2HAmS1udvFQofimGZTHzRSdiTBckbxYU57gFvif2bsEB5iiG"],"enrUri":"enr:-LO4QFUbm0_NEHam9vGIgatoDasszor69DLcfFBl4ZwzdGENM1rvHUioGYkZ_6ctFT4N_tlbcIogo4w1ONIpadpEX-MBgmlkgnY0gmlwhKwS1D6KbXVsdGlhZGRyc4wACgSsEtQ-Bsrf3QOCcnOFAAIBAACJc2VjcDI1NmsxoQPGg8w1zeqGorWvtHdnPAP9yF6pcpOGkSgANtB4qKiu_YN0Y3CCyt6DdWRwgsrghXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51933/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.97.108/tcp/21036/p2p/16Uiu2HAkw5dKdFNMms3RfDqnpgYgJhPwcau6oSVhvYqJm847x2Na"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21035/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21035/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728361649646467328,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51933/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728361649646467328,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4f1d00d62647
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f5e885e48473
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.