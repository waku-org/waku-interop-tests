[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-10-08_04-42-11__f1ff6395-9312-4a6b-837a-5425cbcad65c
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-10-08_04-42-11__f1ff6395-9312-4a6b-837a-5425cbcad65c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.221.169
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['31686', '31687', '31688', '31689', '31690']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 31686:31686 -p 31687:31687 -p 31688:31688 -p 31689:31689 -p 31690:31690 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31688 --rest-port=31686 --tcp-port=31687 --discv5-udp-port=31689 --rest-address=0.0.0.0 --nat=extip:172.18.221.169 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2f4e31bb9becbb0d42dba5deead7ba7cb4749782923adbaa74b82cacccb3a69e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31690 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.221.169 waku f269d6fec139aa1bde0c193c20112de9317615887305ace7b87e898a98a24580
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f269d6fec139. Setting up logs at ./log/docker/publishing_node1_2024-10-08_04-42-11__f1ff6395-9312-4a6b-837a-5425cbcad65c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 31686
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31686/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31686/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.221.169/tcp/31687/p2p/16Uiu2HAm9Fqpw8TwLKsg1bQ6CzT2Q6RzZRrbVTV33W2uh2WtADno","/ip4/172.18.221.169/tcp/31688/ws/p2p/16Uiu2HAm9Fqpw8TwLKsg1bQ6CzT2Q6RzZRrbVTV33W2uh2WtADno"],"enrUri":"enr:-LO4QFJvkH2WusIw6Jr9CjA1TjiUJkHcIeZ3rj_Doo7LKQ1iVLYSV5jJ2D2zzs9mIOD3y8jUNUDwA-Zt9RxpY5QitTcBgmlkgnY0gmlwhKwS3amKbXVsdGlhZGRyc4wACgSsEt2pBnvI3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLNfvF1kuKyZfrdlGd0e_1_4HqkJWrYNTEqDWDWpAj9CIN0Y3CCe8eDdWRwgnvJhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-10-08_04-42-11__f1ff6395-9312-4a6b-837a-5425cbcad65c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.135.93
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['62278', '62279', '62280', '62281', '62282']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 62278:62278 -p 62279:62279 -p 62280:62280 -p 62281:62281 -p 62282:62282 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62280 --rest-port=62278 --tcp-port=62279 --discv5-udp-port=62281 --rest-address=0.0.0.0 --nat=extip:172.18.135.93 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=09c7bba8f744e3b8be0888c0c495b88934d244a2e6323dcec98cabdf9adf07b3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62282 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QFJvkH2WusIw6Jr9CjA1TjiUJkHcIeZ3rj_Doo7LKQ1iVLYSV5jJ2D2zzs9mIOD3y8jUNUDwA-Zt9RxpY5QitTcBgmlkgnY0gmlwhKwS3amKbXVsdGlhZGRyc4wACgSsEt2pBnvI3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLNfvF1kuKyZfrdlGd0e_1_4HqkJWrYNTEqDWDWpAj9CIN0Y3CCe8eDdWRwgnvJhXdha3UyAQ --storenode=/ip4/172.18.221.169/tcp/31687/p2p/16Uiu2HAm9Fqpw8TwLKsg1bQ6CzT2Q6RzZRrbVTV33W2uh2WtADno --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.135.93 waku c0d4e1a3d61e0e6820d0c27a9809447c1d1f6013d8b68ed1a445a21c6a59656d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c0d4e1a3d61e. Setting up logs at ./log/docker/store_node1_2024-10-08_04-42-11__f1ff6395-9312-4a6b-837a-5425cbcad65c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 62278
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62278/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62278/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.135.93/tcp/62279/p2p/16Uiu2HAkvCwEk99i6a7pmBp6DcnJaLfLNtVnwgdbiqHoLPxVBdXa","/ip4/172.18.135.93/tcp/62280/ws/p2p/16Uiu2HAkvCwEk99i6a7pmBp6DcnJaLfLNtVnwgdbiqHoLPxVBdXa"],"enrUri":"enr:-LO4QHGV3-aSzYvuyuqc5nsHmfFRVMYj6ea2exTKADCkC4rYIQk7LB4swskaQ06OlKl-agNkVY4OtTXPSV02klhVg8ABgmlkgnY0gmlwhKwSh12KbXVsdGlhZGRyc4wACgSsEoddBvNI3QOCcnOFAAMBAACJc2VjcDI1NmsxoQILmGNwUFJ1gTHWaoqoFxiAJSvx75YywamGtic2oLYfrYN0Y3CC80eDdWRwgvNJhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62278/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.221.169/tcp/31687/p2p/16Uiu2HAm9Fqpw8TwLKsg1bQ6CzT2Q6RzZRrbVTV33W2uh2WtADno"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31686/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62278/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31686/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62278/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"StQyaTaAaEIXM4+JzRSIx7vGs8s4PqeQvqDA62afFck="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f269d6fec139
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c0d4e1a3d61e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.