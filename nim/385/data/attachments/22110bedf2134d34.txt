[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_pubsub_topic[/waku/2/rs/5/0] with id: 2024-10-08_04-30-31__379374f0-df94-4f98-b691-fd69ae322b98
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-08_04-30-31__379374f0-df94-4f98-b691-fd69ae322b98__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.207.224
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['10700', '10701', '10702', '10703', '10704']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 10700:10700 -p 10701:10701 -p 10702:10702 -p 10703:10703 -p 10704:10704 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10702 --rest-port=10700 --tcp-port=10701 --discv5-udp-port=10703 --rest-address=0.0.0.0 --nat=extip:172.18.207.224 --peer-exchange=true --discv5-discovery=true --cluster-id=5 --nodekey=46f8792c7a6cc53829c6befb9d92ece1f19f1fdcdd2f9ef8ee177e7b3259b7c4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10704 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/5/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.207.224 waku afb6a3e14b41f13bde77b5d9cae1ec01401d115bf5af7588687c250b4d914de8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID afb6a3e14b41. Setting up logs at ./log/docker/node1_2024-10-08_04-30-31__379374f0-df94-4f98-b691-fd69ae322b98__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 10700
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10700/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10700/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.207.224/tcp/10701/p2p/16Uiu2HAmCEQJSN8Qh4bMaoiPw7iYbo2MMDnvXvbiyJFQrwyaLpZh","/ip4/172.18.207.224/tcp/10702/ws/p2p/16Uiu2HAmCEQJSN8Qh4bMaoiPw7iYbo2MMDnvXvbiyJFQrwyaLpZh"],"enrUri":"enr:-LO4QPs2X5ZWAMXQwd1LyYpU2-M5Nf-vPIEFQsNN9OWftL23d-fe-sQ3kUAhg4pmMqhB-rz6WmcrEZEPW3n9LMKlnocBgmlkgnY0gmlwhKwSz-CKbXVsdGlhZGRyc4wACgSsEs_gBinO3QOCcnOFAAUBAACJc2VjcDI1NmsxoQL5s4-h9-WrrFfpJrhwOcdtBQ6ZyB6ddZ3F5uo1ZS2XDIN0Y3CCKc2DdWRwginPhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-08_04-30-31__379374f0-df94-4f98-b691-fd69ae322b98__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.29.84
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['57039', '57040', '57041', '57042', '57043']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 57039:57039 -p 57040:57040 -p 57041:57041 -p 57042:57042 -p 57043:57043 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57041 --rest-port=57039 --tcp-port=57040 --discv5-udp-port=57042 --rest-address=0.0.0.0 --nat=extip:172.18.29.84 --peer-exchange=true --discv5-discovery=true --cluster-id=5 --nodekey=3becaf728df1c7fea57ff6ea38e54e26acbcfdfbc801ef5727aadbc4c1db2de1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57043 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QPs2X5ZWAMXQwd1LyYpU2-M5Nf-vPIEFQsNN9OWftL23d-fe-sQ3kUAhg4pmMqhB-rz6WmcrEZEPW3n9LMKlnocBgmlkgnY0gmlwhKwSz-CKbXVsdGlhZGRyc4wACgSsEs_gBinO3QOCcnOFAAUBAACJc2VjcDI1NmsxoQL5s4-h9-WrrFfpJrhwOcdtBQ6ZyB6ddZ3F5uo1ZS2XDIN0Y3CCKc2DdWRwginPhXdha3UyBQ --pubsub-topic=/waku/2/rs/5/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.29.84 waku 41345d59b1946e8c16775b4df6aeb23868ab76c13102d45be1cb5da096a8117d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 41345d59b194. Setting up logs at ./log/docker/node2_2024-10-08_04-30-31__379374f0-df94-4f98-b691-fd69ae322b98__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 57039
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57039/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57039/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.29.84/tcp/57040/p2p/16Uiu2HAmFYmzQhgN1ThsX6szzHjX2yGXSKCtHdaLS1sRSWXWWBTs","/ip4/172.18.29.84/tcp/57041/ws/p2p/16Uiu2HAmFYmzQhgN1ThsX6szzHjX2yGXSKCtHdaLS1sRSWXWWBTs"],"enrUri":"enr:-LO4QCtWVmiGVqfmoWmvcUhwM0JH7M-s2Q2zd1_oV-wPAsiVaqhxwaCYl3Bnwy-tVKQyPcHAFRAD67E4pmEZ8zrByvgBgmlkgnY0gmlwhKwSHVSKbXVsdGlhZGRyc4wACgSsEh1UBt7R3QOCcnOFAAUBAACJc2VjcDI1NmsxoQMq-5m1HzSEsO7WuSdwyWRfF98KHkyLCIovFgTtmB1jVoN0Y3CC3tCDdWRwgt7ShXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57039/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.207.224/tcp/10701/p2p/16Uiu2HAmCEQJSN8Qh4bMaoiPw7iYbo2MMDnvXvbiyJFQrwyaLpZh"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10700/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/5/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57039/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/5/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10700/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10700/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728361836461939456,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57039/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728361836461939456,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id afb6a3e14b41
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 41345d59b194
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.