[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_content_topics with id: 2024-12-04_04-14-22__20f0e741-55e0-4911-a924-b4e4e6398f22
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-04_04-14-22__20f0e741-55e0-4911-a924-b4e4e6398f22__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.15.59
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['13049', '13050', '13051', '13052', '13053']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 13049:13049 -p 13050:13050 -p 13051:13051 -p 13052:13052 -p 13053:13053 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13051 --rest-port=13049 --tcp-port=13050 --discv5-udp-port=13052 --rest-address=0.0.0.0 --nat=extip:172.18.15.59 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4dc7be9a7688ae8baac5dc7e7f82e2c7617ab92e87ca17baa1cbfb31940eaefa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13053 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.15.59 waku b034d83a6f06fec6a4955907f375b5c8ed522b8dd79f31d3cbb3b5ab7d74da15
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 36d95ca2c7f5. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b034d83a6f06. Setting up logs at ./log/docker/receiving_node1_2024-12-04_04-14-22__20f0e741-55e0-4911-a924-b4e4e6398f22__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 13049
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13049/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13049/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.15.59/tcp/13050/p2p/16Uiu2HAkv9cqXXkqW5rqKs8rFhxsQ4bXNJFmRr8pvrenQGjWhtXd","/ip4/172.18.15.59/tcp/13051/ws/p2p/16Uiu2HAkv9cqXXkqW5rqKs8rFhxsQ4bXNJFmRr8pvrenQGjWhtXd"],"enrUri":"enr:-L24QGuisNGb3TfvkbndUi04JI9zUphmqwNGHQcfTWsKID_ied2y4kHvV2vz-9qW0XFTlXm8E2hC9sJiQQphgPbyWpgCgmlkgnY0gmlwhKwSDzuKbXVsdGlhZGRyc5YACASsEg87BjL6AAoErBIPOwYy-90DgnJzhQADAQAAiXNlY3AyNTZrMaECCr7XOWMTuf6_ewSd9c_XvJa2Icn1ung0ewcqvWRq3KyDdGNwgjL6g3VkcIIy_IV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-04_04-14-22__20f0e741-55e0-4911-a924-b4e4e6398f22__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.43.189
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['53802', '53803', '53804', '53805', '53806']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 53802:53802 -p 53803:53803 -p 53804:53804 -p 53805:53805 -p 53806:53806 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53804 --rest-port=53802 --tcp-port=53803 --discv5-udp-port=53805 --rest-address=0.0.0.0 --nat=extip:172.18.43.189 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c1ee214d78cc39aeae7ffbdf79dbe027a338bb2b1712bea8b54bdbce1be2c3c9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53806 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.43.189 waku 458a54a517d5a0e4aea17976c03f6b97660e8a83b03b00c5175e6a9d9f1a4862
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 458a54a517d5. Setting up logs at ./log/docker/receiving_node2_2024-12-04_04-14-22__20f0e741-55e0-4911-a924-b4e4e6398f22__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 53802
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53802/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53802/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.43.189/tcp/53803/p2p/16Uiu2HAmC1qfWZLroje4dsG7Thmhd8qXrnvKTMsZQteUUpUcEoEY","/ip4/172.18.43.189/tcp/53804/ws/p2p/16Uiu2HAmC1qfWZLroje4dsG7Thmhd8qXrnvKTMsZQteUUpUcEoEY"],"enrUri":"enr:-L24QJ-lJug0aiju2_eDLV8M4h6uX7_Fmuz2iMZXi_zZ8tWIBB3FDDKjb7Tqrlks8FJ3zz0FdtDLGPM6zHG4NLFbnG4CgmlkgnY0gmlwhKwSK72KbXVsdGlhZGRyc5YACASsEiu9BtIrAAoErBIrvQbSLN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC9nuwXlaJZj676ibYg_CFv3K0dFNq7lGeo0hBoZcShuGDdGNwgtIrg3VkcILSLYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53802/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.15.59/tcp/13050/p2p/16Uiu2HAkv9cqXXkqW5rqKs8rFhxsQ4bXNJFmRr8pvrenQGjWhtXd"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-04_04-14-22__20f0e741-55e0-4911-a924-b4e4e6398f22__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.137.25
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['14547', '14548', '14549', '14550', '14551']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 14547:14547 -p 14548:14548 -p 14549:14549 -p 14550:14550 -p 14551:14551 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14549 --rest-port=14547 --tcp-port=14548 --discv5-udp-port=14550 --rest-address=0.0.0.0 --nat=extip:172.18.137.25 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3dedeeb0fa9e7cabfa68659feea217fd75da5b1c6ba6ce7fbb1b73f560f67d22 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14551 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QGuisNGb3TfvkbndUi04JI9zUphmqwNGHQcfTWsKID_ied2y4kHvV2vz-9qW0XFTlXm8E2hC9sJiQQphgPbyWpgCgmlkgnY0gmlwhKwSDzuKbXVsdGlhZGRyc5YACASsEg87BjL6AAoErBIPOwYy-90DgnJzhQADAQAAiXNlY3AyNTZrMaECCr7XOWMTuf6_ewSd9c_XvJa2Icn1ung0ewcqvWRq3KyDdGNwgjL6g3VkcIIy_IV3YWt1Mgk --lightpushnode=/ip4/172.18.15.59/tcp/13050/p2p/16Uiu2HAkv9cqXXkqW5rqKs8rFhxsQ4bXNJFmRr8pvrenQGjWhtXd --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.137.25 waku d1e57de594085872d9da2b088a99bc0cbfa331843bbe553185055c700592594f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d1e57de59408. Setting up logs at ./log/docker/lightpush_node1_2024-12-04_04-14-22__20f0e741-55e0-4911-a924-b4e4e6398f22__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 14547
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14547/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14547/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.137.25/tcp/14548/p2p/16Uiu2HAm7rN6MWpSNgT3WAByovdTSAgDkFnuVSkBPV8gkmxpguLW","/ip4/172.18.137.25/tcp/14549/ws/p2p/16Uiu2HAm7rN6MWpSNgT3WAByovdTSAgDkFnuVSkBPV8gkmxpguLW"],"enrUri":"enr:-L24QBZ1N2Qa7DiO-vU3Ez_TmyNd9Xfg9c-dU6kP4qeJqppmIf_ncrKTAZQnXLnW4l6FPVkZ3-PbO9Ws3mKFgA9EEboCgmlkgnY0gmlwhKwSiRmKbXVsdGlhZGRyc5YACASsEokZBjjUAAoErBKJGQY41d0DgnJzhQADAQAAiXNlY3AyNTZrMaECuJ-J4KRJMXnJFQH9HGNl4tUTeCuEjHJHpmuQAVUMSqODdGNwgjjUg3VkcII41oV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14547/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.15.59/tcp/13050/p2p/16Uiu2HAkv9cqXXkqW5rqKs8rFhxsQ4bXNJFmRr8pvrenQGjWhtXd"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14547/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.43.189/tcp/53803/p2p/16Uiu2HAmC1qfWZLroje4dsG7Thmhd8qXrnvKTMsZQteUUpUcEoEY"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13049/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53802/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic Empty string
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14547/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "", "timestamp": 1733285667512879104}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:14547/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A dictionary
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14547/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": {"key": "YWFh"}, "timestamp": 1733285667519500544}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:14547/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic An integer
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14547/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": 1234567890, "timestamp": 1733285667530946560}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:14547/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A list
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14547/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": ["YWFh"], "timestamp": 1733285667534260736}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:14547/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A bool
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14547/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": true, "timestamp": 1733285667537212672}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:14547/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b034d83a6f06
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 458a54a517d5
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b034d83a6f06. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d1e57de59408
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 458a54a517d5. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.