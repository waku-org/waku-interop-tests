[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_pubsub_topics with id: 2024-12-04_04-14-46__39776f22-2bf1-4003-8c08-f4905b3abba2
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-04_04-14-46__39776f22-2bf1-4003-8c08-f4905b3abba2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.180.234
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5328', '5329', '5330', '5331', '5332']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5328:5328 -p 5329:5329 -p 5330:5330 -p 5331:5331 -p 5332:5332 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5330 --rest-port=5328 --tcp-port=5329 --discv5-udp-port=5331 --rest-address=0.0.0.0 --nat=extip:172.18.180.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bcbf30af613a17aada5fb0fbda5ed0e8b80dec5af7886342be8fd1d0c24d05e2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5332 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.180.234 waku 9d7f9bd430751223e8f25c2c766074123240c6a7481d1f0fc0923f40c3f48fe2
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 56759ca7c316. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9d7f9bd43075. Setting up logs at ./log/docker/receiving_node1_2024-12-04_04-14-46__39776f22-2bf1-4003-8c08-f4905b3abba2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 5328
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5328/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5328/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.180.234/tcp/5329/p2p/16Uiu2HAmRE7rAMifGnxZuuBR9qV4zcXk8eUbL1KhzmrWocEXH4TR","/ip4/172.18.180.234/tcp/5330/ws/p2p/16Uiu2HAmRE7rAMifGnxZuuBR9qV4zcXk8eUbL1KhzmrWocEXH4TR"],"enrUri":"enr:-L24QNSopSW8hrBs3sI9lXk71BaJDShJ0RUgRzdOvYsYHYXCIIcUJrscJwfEh4_RQW8i2oR0bImOwkwvKW8tmdrm4A0CgmlkgnY0gmlwhKwStOqKbXVsdGlhZGRyc5YACASsErTqBhTRAAoErBK06gYU0t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDusjjOe4KDfQK6nWbI43UP5v0MPkZentzvyerfbNynaiDdGNwghTRg3VkcIIU04V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-04_04-14-46__39776f22-2bf1-4003-8c08-f4905b3abba2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.162.68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['12082', '12083', '12084', '12085', '12086']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 12082:12082 -p 12083:12083 -p 12084:12084 -p 12085:12085 -p 12086:12086 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12084 --rest-port=12082 --tcp-port=12083 --discv5-udp-port=12085 --rest-address=0.0.0.0 --nat=extip:172.18.162.68 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=edc97a92c72b9dd4fa28fff9ab9acc9face991fcfcc62f8876fdc8450d5b2aef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12086 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.162.68 waku 6871a482fc0bf32f8180939c9eea0ab96792fc00dddb288f7f4e0ea6f5f26d3d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6871a482fc0b. Setting up logs at ./log/docker/receiving_node2_2024-12-04_04-14-46__39776f22-2bf1-4003-8c08-f4905b3abba2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 12082
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12082/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12082/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.162.68/tcp/12083/p2p/16Uiu2HAkwypGgN1YzcZ4zaBGBcJ32Mcwvprd8eg8QU8tVnjPVoMx","/ip4/172.18.162.68/tcp/12084/ws/p2p/16Uiu2HAkwypGgN1YzcZ4zaBGBcJ32Mcwvprd8eg8QU8tVnjPVoMx"],"enrUri":"enr:-L24QPWGwl8vh3tDlKAwtoZh61afm37IMXO-uHkLTxV0AKhyW0hWO0SJ01hYmP77VA4eiN0cKnnlqa_0XYT3L4hz1y4CgmlkgnY0gmlwhKwSokSKbXVsdGlhZGRyc5YACASsEqJEBi8zAAoErBKiRAYvNN0DgnJzhQADAQAAiXNlY3AyNTZrMaECJfNVpdhTiA3mWuteGZtZyHDNB4eBP6t5f1dTCC-SpXeDdGNwgi8zg3VkcIIvNYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12082/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.180.234/tcp/5329/p2p/16Uiu2HAmRE7rAMifGnxZuuBR9qV4zcXk8eUbL1KhzmrWocEXH4TR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-04_04-14-46__39776f22-2bf1-4003-8c08-f4905b3abba2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.69.47
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['33107', '33108', '33109', '33110', '33111']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 33107:33107 -p 33108:33108 -p 33109:33109 -p 33110:33110 -p 33111:33111 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33109 --rest-port=33107 --tcp-port=33108 --discv5-udp-port=33110 --rest-address=0.0.0.0 --nat=extip:172.18.69.47 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d03d5dafa0dbbcafeeab7ebd1edffc02b530a1bffdd11cafaf56ae100cc8b83a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33111 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QNSopSW8hrBs3sI9lXk71BaJDShJ0RUgRzdOvYsYHYXCIIcUJrscJwfEh4_RQW8i2oR0bImOwkwvKW8tmdrm4A0CgmlkgnY0gmlwhKwStOqKbXVsdGlhZGRyc5YACASsErTqBhTRAAoErBK06gYU0t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDusjjOe4KDfQK6nWbI43UP5v0MPkZentzvyerfbNynaiDdGNwghTRg3VkcIIU04V3YWt1Mgk --lightpushnode=/ip4/172.18.180.234/tcp/5329/p2p/16Uiu2HAmRE7rAMifGnxZuuBR9qV4zcXk8eUbL1KhzmrWocEXH4TR --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.69.47 waku 2384b25a9f7448171e764375fd1c94ddd1884678eee80487afdecdb040490f1d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2384b25a9f74. Setting up logs at ./log/docker/lightpush_node1_2024-12-04_04-14-46__39776f22-2bf1-4003-8c08-f4905b3abba2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 33107
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33107/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33107/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.69.47/tcp/33108/p2p/16Uiu2HAm8pdY3tDaJrvBU1qZuYgjrZ8kDEvvK2rDSWu5o5HJZXPD","/ip4/172.18.69.47/tcp/33109/ws/p2p/16Uiu2HAm8pdY3tDaJrvBU1qZuYgjrZ8kDEvvK2rDSWu5o5HJZXPD"],"enrUri":"enr:-L24QB5GOWpb17iUAZdOnyM6dUXR1FUBdz-MNjM23UXfL4zbJ8Xi6TEEW4mAX4d62r5x4Dy9mMPqtWxiqwiehL8Mp2wCgmlkgnY0gmlwhKwSRS-KbXVsdGlhZGRyc5YACASsEkUvBoFUAAoErBJFLwaBVd0DgnJzhQADAQAAiXNlY3AyNTZrMaECxwmGf8gJKIRy03mngKLtxB9BYwiGR4ebMpnfQrShUFCDdGNwgoFUg3VkcIKBVoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33107/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.180.234/tcp/5329/p2p/16Uiu2HAmRE7rAMifGnxZuuBR9qV4zcXk8eUbL1KhzmrWocEXH4TR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33107/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.162.68/tcp/12083/p2p/16Uiu2HAkwypGgN1YzcZ4zaBGBcJ32Mcwvprd8eg8QU8tVnjPVoMx"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5328/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12082/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33107/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733285692087068160}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:33107/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 9d7f9bd43075
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 6871a482fc0b
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9d7f9bd43075. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2384b25a9f74
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6871a482fc0b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.