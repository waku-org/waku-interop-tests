[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_pubsub_topic_also_in_docker_flags[/waku/2/rs/2/0] with id: 2024-12-04_04-22-41__29bfd2db-1257-4dc1-8152-b5daeff24ce4
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-04_04-22-41__29bfd2db-1257-4dc1-8152-b5daeff24ce4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.225.42
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['32632', '32633', '32634', '32635', '32636']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 32632:32632 -p 32633:32633 -p 32634:32634 -p 32635:32635 -p 32636:32636 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32634 --rest-port=32632 --tcp-port=32633 --discv5-udp-port=32635 --rest-address=0.0.0.0 --nat=extip:172.18.225.42 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=8eda0bc308e91add40a4efe7fce1aa1e239aaf72886e4acd937bee68e35a25c9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32636 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0 --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.225.42 waku 56406faf16de47cd7e7249c84af88ddc99a210562a6387e6e749f5a5127bae93
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 56406faf16de. Setting up logs at ./log/docker/node1_2024-12-04_04-22-41__29bfd2db-1257-4dc1-8152-b5daeff24ce4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 32632
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d171902193b1. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32632/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32632/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.225.42/tcp/32633/p2p/16Uiu2HAm2MZj5iATPaGD3KtF6Y9XPJoKiZHyh5G3sB5nYeGziEBR","/ip4/172.18.225.42/tcp/32634/ws/p2p/16Uiu2HAm2MZj5iATPaGD3KtF6Y9XPJoKiZHyh5G3sB5nYeGziEBR"],"enrUri":"enr:-L24QBuWGpHni15CWCwwDDJdz5t7RSOgUfB1erOxxP-bG2wjB3cavEl9EJtLP_9LvHeAg73HTCL9PZpJWPYLvX_Lkw8CgmlkgnY0gmlwhKwS4SqKbXVsdGlhZGRyc5YACASsEuEqBn95AAoErBLhKgZ_et0DgnJzhQACAQAAiXNlY3AyNTZrMaECZvRqCtAY2TabiBdNUYi7g3U7y7XulJOknglKVlUbhEiDdGNwgn95g3VkcIJ_e4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-04_04-22-41__29bfd2db-1257-4dc1-8152-b5daeff24ce4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.92.60
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37141', '37142', '37143', '37144', '37145']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37141:37141 -p 37142:37142 -p 37143:37143 -p 37144:37144 -p 37145:37145 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37143 --rest-port=37141 --tcp-port=37142 --discv5-udp-port=37144 --rest-address=0.0.0.0 --nat=extip:172.18.92.60 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=c0cfa43fc5efe6ee9dd3a3b830fccd82bb27415ab0bf7e56f9a4fdd66d40d5df --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37145 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QBuWGpHni15CWCwwDDJdz5t7RSOgUfB1erOxxP-bG2wjB3cavEl9EJtLP_9LvHeAg73HTCL9PZpJWPYLvX_Lkw8CgmlkgnY0gmlwhKwS4SqKbXVsdGlhZGRyc5YACASsEuEqBn95AAoErBLhKgZ_et0DgnJzhQACAQAAiXNlY3AyNTZrMaECZvRqCtAY2TabiBdNUYi7g3U7y7XulJOknglKVlUbhEiDdGNwgn95g3VkcIJ_e4V3YWt1MgU --pubsub-topic=/waku/2/rs/2/0 --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.30.59
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['22776', '22777', '22778', '22779', '22780']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 22776:22776 -p 22777:22777 -p 22778:22778 -p 22779:22779 -p 22780:22780 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22778 --rest-port=22776 --tcp-port=22777 --discv5-udp-port=22779 --rest-address=0.0.0.0 --nat=extip:172.18.30.59 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=efbc6d7d0cd9f7990dc35e513fcb3eb6870f4571bfd7ab9ea78f1b663d45b846 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22780 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QBuWGpHni15CWCwwDDJdz5t7RSOgUfB1erOxxP-bG2wjB3cavEl9EJtLP_9LvHeAg73HTCL9PZpJWPYLvX_Lkw8CgmlkgnY0gmlwhKwS4SqKbXVsdGlhZGRyc5YACASsEuEqBn95AAoErBLhKgZ_et0DgnJzhQACAQAAiXNlY3AyNTZrMaECZvRqCtAY2TabiBdNUYi7g3U7y7XulJOknglKVlUbhEiDdGNwgn95g3VkcIJ_e4V3YWt1MgU --pubsub-topic=/waku/2/rs/2/0 --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.30.59 waku 89b77ee5e4d767820b99aacfedb2496cff8f579c65825f7aeb65d2b84b13bd10
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 89b77ee5e4d7. Setting up logs at ./log/docker/node2_2024-12-04_04-22-41__29bfd2db-1257-4dc1-8152-b5daeff24ce4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 22776
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22776/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22776/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.30.59/tcp/22777/p2p/16Uiu2HAmHdVTkF8ERzbDZdDSMma2xEeuW4x8xkFZHXaNZKg7LrLp","/ip4/172.18.30.59/tcp/22778/ws/p2p/16Uiu2HAmHdVTkF8ERzbDZdDSMma2xEeuW4x8xkFZHXaNZKg7LrLp"],"enrUri":"enr:-L24QIToJqSG-BszwGj_0_-VLf5UkKQtGfWbkFlu89xyBGdHMnNJqmG9ekmUQ5Md-xEQZE8UzDMJUrTh2DoQyOsaJNUCgmlkgnY0gmlwhKwSHjuKbXVsdGlhZGRyc5YACASsEh47Blj5AAoErBIeOwZY-t0DgnJzhQACAQAAiXNlY3AyNTZrMaEDSegwdSFSgnP4MpTgvB9nLHwUQMZlOPq6KVNpvB2G-pmDdGNwglj5g3VkcIJY-4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22776/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.225.42/tcp/32633/p2p/16Uiu2HAm2MZj5iATPaGD3KtF6Y9XPJoKiZHyh5G3sB5nYeGziEBR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32632/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22776/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32632/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32632/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1733286165020356352,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22776/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1733286165020356352,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 56406faf16de
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 89b77ee5e4d7
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 56406faf16de. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.