[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_version with id: 2024-12-04_04-15-00__5efa7186-781a-4122-87b5-54cca6954912
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-04_04-15-00__5efa7186-781a-4122-87b5-54cca6954912__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.206.224
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['9790', '9791', '9792', '9793', '9794']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 9790:9790 -p 9791:9791 -p 9792:9792 -p 9793:9793 -p 9794:9794 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9792 --rest-port=9790 --tcp-port=9791 --discv5-udp-port=9793 --rest-address=0.0.0.0 --nat=extip:172.18.206.224 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dc1fbd1d934c6da964b67ec6f04c44aee8c40c9bb6da4d0dcdc49ff321a850c1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9794 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.206.224 waku 8b3efe3e9b191b571425b6b7b4202165905826f791c9d66eca8c6ad1c8418089
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8b3efe3e9b19. Setting up logs at ./log/docker/receiving_node1_2024-12-04_04-15-00__5efa7186-781a-4122-87b5-54cca6954912__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 9790
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 776df085fcac. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9790/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9790/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.206.224/tcp/9791/p2p/16Uiu2HAm7hQVcp4VMJh4vdEs73iCgVWk4exQK8kPLeNHpewnZN9Q","/ip4/172.18.206.224/tcp/9792/ws/p2p/16Uiu2HAm7hQVcp4VMJh4vdEs73iCgVWk4exQK8kPLeNHpewnZN9Q"],"enrUri":"enr:-L24QAhCRx9Qwpb4PNnZCx2-N1oWmVhNX7dUTIqr_C-A3z99EMgaNq_qGxFHqiwWsP-C6qPtb5xT0PujQ9yWOJ17xZECgmlkgnY0gmlwhKwSzuCKbXVsdGlhZGRyc5YACASsEs7gBiY_AAoErBLO4AYmQN0DgnJzhQADAQAAiXNlY3AyNTZrMaECtlQGt0CouTtbwXw8oWs8B8Uawf0Fu0k2b9yfOcokqSuDdGNwgiY_g3VkcIImQYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-04_04-15-00__5efa7186-781a-4122-87b5-54cca6954912__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.23.58
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10634', '10635', '10636', '10637', '10638']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10634:10634 -p 10635:10635 -p 10636:10636 -p 10637:10637 -p 10638:10638 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10636 --rest-port=10634 --tcp-port=10635 --discv5-udp-port=10637 --rest-address=0.0.0.0 --nat=extip:172.18.23.58 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a9647af9e01e47806bb925afcc72eeaff1253147e325dcac8edabd3b7d7ba5f1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10638 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.23.58 waku 52d7baf3c0093e8b786023a7ce4ae989a18752e527c7f18fd643e3eb4fdcf899
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 52d7baf3c009. Setting up logs at ./log/docker/receiving_node2_2024-12-04_04-15-00__5efa7186-781a-4122-87b5-54cca6954912__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 10634
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10634/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10634/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.23.58/tcp/10635/p2p/16Uiu2HAm1JDpjSzSJetjCLjEpdVfmcLyfYEAn3YikUQQeZeDsoKG","/ip4/172.18.23.58/tcp/10636/ws/p2p/16Uiu2HAm1JDpjSzSJetjCLjEpdVfmcLyfYEAn3YikUQQeZeDsoKG"],"enrUri":"enr:-L24QBSHJeG6MM6972fxqcFw92FIrXKtSxwSo1u8jOYBQ7U1Upe-zrDcffFk65FQvE_kMNv9wPM7Jw7qf4ofJv901iwCgmlkgnY0gmlwhKwSFzqKbXVsdGlhZGRyc5YACASsEhc6BimLAAoErBIXOgYpjN0DgnJzhQADAQAAiXNlY3AyNTZrMaECVz17IEAgNRaVPC8O0ZjMbeCPKSo7If6eNqXTKXmA5suDdGNwgimLg3VkcIIpjYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10634/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.206.224/tcp/9791/p2p/16Uiu2HAm7hQVcp4VMJh4vdEs73iCgVWk4exQK8kPLeNHpewnZN9Q"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-04_04-15-00__5efa7186-781a-4122-87b5-54cca6954912__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.7.24
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['11071', '11072', '11073', '11074', '11075']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 11071:11071 -p 11072:11072 -p 11073:11073 -p 11074:11074 -p 11075:11075 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11073 --rest-port=11071 --tcp-port=11072 --discv5-udp-port=11074 --rest-address=0.0.0.0 --nat=extip:172.18.7.24 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=975fc72ce6ef5960c3aaa1b8b881ccca67bcacaab6a2eeac55e5b68c339feda8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11075 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QAhCRx9Qwpb4PNnZCx2-N1oWmVhNX7dUTIqr_C-A3z99EMgaNq_qGxFHqiwWsP-C6qPtb5xT0PujQ9yWOJ17xZECgmlkgnY0gmlwhKwSzuCKbXVsdGlhZGRyc5YACASsEs7gBiY_AAoErBLO4AYmQN0DgnJzhQADAQAAiXNlY3AyNTZrMaECtlQGt0CouTtbwXw8oWs8B8Uawf0Fu0k2b9yfOcokqSuDdGNwgiY_g3VkcIImQYV3YWt1Mgk --lightpushnode=/ip4/172.18.206.224/tcp/9791/p2p/16Uiu2HAm7hQVcp4VMJh4vdEs73iCgVWk4exQK8kPLeNHpewnZN9Q --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.7.24 waku 027aefb458b170d8f9a4c6216da575373645108d18e209abae31d204b0c00bb8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 027aefb458b1. Setting up logs at ./log/docker/lightpush_node1_2024-12-04_04-15-00__5efa7186-781a-4122-87b5-54cca6954912__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 11071
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11071/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11071/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.7.24/tcp/11072/p2p/16Uiu2HAmFfJg7MvTGqyjZ3mzDvSzi23tiyX7nDCvJwLzMz3oAnjJ","/ip4/172.18.7.24/tcp/11073/ws/p2p/16Uiu2HAmFfJg7MvTGqyjZ3mzDvSzi23tiyX7nDCvJwLzMz3oAnjJ"],"enrUri":"enr:-L24QIQVoaaqKvLSv-mL4TwQhl8z9S8A5U0n3WgEuRTq0bmHASH59t4iNoopOZuYny-zOV8qtFUxICLUrZijL3z3pbcCgmlkgnY0gmlwhKwSBxiKbXVsdGlhZGRyc5YACASsEgcYBitAAAoErBIHGAYrQd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDLKfHxP4Zy1h3JE86mXeXbDWjtp1z3om3Bkn5xOYdVbGDdGNwgitAg3VkcIIrQoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11071/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.206.224/tcp/9791/p2p/16Uiu2HAm7hQVcp4VMJh4vdEs73iCgVWk4exQK8kPLeNHpewnZN9Q"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11071/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.23.58/tcp/10635/p2p/16Uiu2HAm1JDpjSzSJetjCLjEpdVfmcLyfYEAn3YikUQQeZeDsoKG"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9790/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10634/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11071/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733285705370638592, "version": 10}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9790/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1733285705370638592,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10634/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1733285705370638592,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 8b3efe3e9b19
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 52d7baf3c009
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 8b3efe3e9b19. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 027aefb458b1
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 52d7baf3c009. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.