[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-11-07_09-05-41__27580511-9646-4305-90b2-34b5539c574e
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-07_09-05-41__27580511-9646-4305-90b2-34b5539c574e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.221.245
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10503', '10504', '10505', '10506', '10507']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10503:10503 -p 10504:10504 -p 10505:10505 -p 10506:10506 -p 10507:10507 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10505 --rest-port=10503 --tcp-port=10504 --discv5-udp-port=10506 --rest-address=0.0.0.0 --nat=extip:172.18.221.245 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5e3899d2c5bde7ba7bb0ad305e34fba1f3ae4ac562fb305fcbcff1eceb5a423b --max-connections=1000 --filter-subscription-timeout=600 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10507 --metrics-logging=true --lightpush=true --relay=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 85e4b2b64bf0. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.221.245 waku 6df6e4f578b191abbaff9e1b22f9e2ead2cdb01b4f23f437f2e4bcfefcb7132e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6df6e4f578b1. Setting up logs at ./log/docker/receiving_node1_2024-11-07_09-05-41__27580511-9646-4305-90b2-34b5539c574e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 10503
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10503/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10503/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.221.245/tcp/10504/p2p/16Uiu2HAmKcoPAShkiQoyoJJw1TxvSPBVGkk9K7KgLi3ZVHhkqDau","/ip4/172.18.221.245/tcp/10505/ws/p2p/16Uiu2HAmKcoPAShkiQoyoJJw1TxvSPBVGkk9K7KgLi3ZVHhkqDau"],"enrUri":"enr:-L24QFa0A9-XhYrglAnQzXcRbA2w_AqdKiFTo08xVJkAxK3od-_UVXfv1O5Uh-sG-0NH59I_Y8_Gi762LyKDYw7N9FoCgmlkgnY0gmlwhKwS3fWKbXVsdGlhZGRyc5YACASsEt31BikIAAoErBLd9QYpCd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDZ3I-40OoiyHGQZmxp-PmfOGaei-avYRQ00ngvpMBiY6DdGNwgikIg3VkcIIpCoV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-07_09-05-41__27580511-9646-4305-90b2-34b5539c574e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.23.109
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['62063', '62064', '62065', '62066', '62067']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 62063:62063 -p 62064:62064 -p 62065:62065 -p 62066:62066 -p 62067:62067 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62065 --rest-port=62063 --tcp-port=62064 --discv5-udp-port=62066 --rest-address=0.0.0.0 --nat=extip:172.18.23.109 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2f68f6845dfc158ccb52c5d02ae72ebef8ab2635d63066d66ebcdf733c82c9f6 --max-connections=1000 --filter-subscription-timeout=600 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62067 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.23.109 waku a5da5f1b24c4dba0520edbb2233af43e541c40662d82be14581a7f547cb96456
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a5da5f1b24c4. Setting up logs at ./log/docker/receiving_node2_2024-11-07_09-05-41__27580511-9646-4305-90b2-34b5539c574e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 62063
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62063/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62063/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.23.109/tcp/62064/p2p/16Uiu2HAm24b7RM9GMwPU2E4SLoV3tBDje5eszUGyurAbJf2bghdh","/ip4/172.18.23.109/tcp/62065/ws/p2p/16Uiu2HAm24b7RM9GMwPU2E4SLoV3tBDje5eszUGyurAbJf2bghdh"],"enrUri":"enr:-L24QJJgpoX6N15hjG3nz9BWw23evc31xD_8nYD6YPtg4jkqA_E_K4PbsI7PxlV16euT6BlByd5A8iqWGcwTIQ4DCUECgmlkgnY0gmlwhKwSF22KbXVsdGlhZGRyc5YACASsEhdtBvJwAAoErBIXbQbycd0DgnJzhQADAQAAiXNlY3AyNTZrMaECYpsbTmT2YBKG2sxtEHpufAhYQI1Aj7yYN3Nc5Ykws8iDdGNwgvJwg3VkcILycoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62063/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.221.245/tcp/10504/p2p/16Uiu2HAmKcoPAShkiQoyoJJw1TxvSPBVGkk9K7KgLi3ZVHhkqDau"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-07_09-05-41__27580511-9646-4305-90b2-34b5539c574e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.168.190
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['41982', '41983', '41984', '41985', '41986']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 41982:41982 -p 41983:41983 -p 41984:41984 -p 41985:41985 -p 41986:41986 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41984 --rest-port=41982 --tcp-port=41983 --discv5-udp-port=41985 --rest-address=0.0.0.0 --nat=extip:172.18.168.190 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4ced9d3adf9be18ef494fec2db45f15c40ccaf4c1bcd25bf5908fa71125c9a34 --max-connections=1000 --filter-subscription-timeout=600 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41986 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFa0A9-XhYrglAnQzXcRbA2w_AqdKiFTo08xVJkAxK3od-_UVXfv1O5Uh-sG-0NH59I_Y8_Gi762LyKDYw7N9FoCgmlkgnY0gmlwhKwS3fWKbXVsdGlhZGRyc5YACASsEt31BikIAAoErBLd9QYpCd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDZ3I-40OoiyHGQZmxp-PmfOGaei-avYRQ00ngvpMBiY6DdGNwgikIg3VkcIIpCoV3YWt1Mgk --lightpushnode=/ip4/172.18.221.245/tcp/10504/p2p/16Uiu2HAmKcoPAShkiQoyoJJw1TxvSPBVGkk9K7KgLi3ZVHhkqDau --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.168.190 waku ded9e3c43deddd178b6298a1933060acddb1d590ab9ca0a0ea45d3c04abaf4ff
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ded9e3c43ded. Setting up logs at ./log/docker/lightpush_node1_2024-11-07_09-05-41__27580511-9646-4305-90b2-34b5539c574e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 41982
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41982/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41982/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.168.190/tcp/41983/p2p/16Uiu2HAmLyK8aFQb3ozhc3chPyBoZ89nGGBsmrCFQZthLTcJ46cj","/ip4/172.18.168.190/tcp/41984/ws/p2p/16Uiu2HAmLyK8aFQb3ozhc3chPyBoZ89nGGBsmrCFQZthLTcJ46cj"],"enrUri":"enr:-L24QAFi2QJNKt5GM1DT3ImpzMyBPi6FV2JYKGxDlUugnUdycsSnEL_fG0ho5vYPqfbNmjWh_JCf8ezW5_piUo7iyooCgmlkgnY0gmlwhKwSqL6KbXVsdGlhZGRyc5YACASsEqi-BqP_AAoErBKovgakAN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDe48veZs8lsFRO8TEzSqMsfxOzaydqGucJSmeB2_rIzSDdGNwgqP_g3VkcIKkAYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41982/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.221.245/tcp/10504/p2p/16Uiu2HAmKcoPAShkiQoyoJJw1TxvSPBVGkk9K7KgLi3ZVHhkqDau"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41982/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.23.109/tcp/62064/p2p/16Uiu2HAm24b7RM9GMwPU2E4SLoV3tBDje5eszUGyurAbJf2bghdh"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10503/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62063/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41982/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730970346866979072, "version": 2.1}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:41982/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 6df6e4f578b1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id a5da5f1b24c4
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6df6e4f578b1. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id ded9e3c43ded
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a5da5f1b24c4. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.