[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_content_topic[/myapp/1/latest/proto] with id: 2024-09-06_09-47-02__23e63092-050d-4944-9dfa-ec67178700d2
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-06_09-47-02__23e63092-050d-4944-9dfa-ec67178700d2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.69.33
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['26162', '26163', '26164', '26165', '26166']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 26162:26162 -p 26163:26163 -p 26164:26164 -p 26165:26165 -p 26166:26166 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26164 --rest-port=26162 --tcp-port=26163 --discv5-udp-port=26165 --rest-address=0.0.0.0 --nat=extip:172.18.69.33 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=efe7713eeea95db90abd6df5e5aacf8b0a8eedccfa0dcb0efa09bd039114d2b8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26166 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.69.33 waku 477205529cf0e33bd8c48c34fddf565691898dc23de6c023e350f824bd7fcdef
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 477205529cf0. Setting up logs at ./log/docker/node1_2024-09-06_09-47-02__23e63092-050d-4944-9dfa-ec67178700d2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 26162
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26162/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26162/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.69.33/tcp/26163/p2p/16Uiu2HAkv7MvtkVMbMbW22LdQKoxTMZtV3VJ1ppMRGq6hRE6FJ77","/ip4/172.18.69.33/tcp/26164/ws/p2p/16Uiu2HAkv7MvtkVMbMbW22LdQKoxTMZtV3VJ1ppMRGq6hRE6FJ77"],"enrUri":"enr:-LO4QDAZ3TZ6i2Ke16exdNCn7Or_hyC_FcnVSjYuMiykcncuTcCzjlUfedidHRuv3fuYtDtrM8Mj8i8H6eE7Aan0VJkBgmlkgnY0gmlwhKwSRSGKbXVsdGlhZGRyc4wACgSsEkUhBmY03QOCcnOFAAIBAACJc2VjcDI1NmsxoQIKKtK6Nxf8K5BA-lvOjAR-bvct-pWbU8JRnPdkviikZoN0Y3CCZjODdWRwgmY1hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-06_09-47-02__23e63092-050d-4944-9dfa-ec67178700d2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.184.69
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['42941', '42942', '42943', '42944', '42945']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 42941:42941 -p 42942:42942 -p 42943:42943 -p 42944:42944 -p 42945:42945 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42943 --rest-port=42941 --tcp-port=42942 --discv5-udp-port=42944 --rest-address=0.0.0.0 --nat=extip:172.18.184.69 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=59f7a9f42f9cc35398c5dc868f06c554aabdb47a87f88dd3dcdb26a14f8becfe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42945 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QDAZ3TZ6i2Ke16exdNCn7Or_hyC_FcnVSjYuMiykcncuTcCzjlUfedidHRuv3fuYtDtrM8Mj8i8H6eE7Aan0VJkBgmlkgnY0gmlwhKwSRSGKbXVsdGlhZGRyc4wACgSsEkUhBmY03QOCcnOFAAIBAACJc2VjcDI1NmsxoQIKKtK6Nxf8K5BA-lvOjAR-bvct-pWbU8JRnPdkviikZoN0Y3CCZjODdWRwgmY1hXdha3UyBQ --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.184.69 waku 76fd10247100a8f61dced45912491e89e664b5e9bd0448b365ee6a169d1fcbd6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 76fd10247100. Setting up logs at ./log/docker/node2_2024-09-06_09-47-02__23e63092-050d-4944-9dfa-ec67178700d2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 42941
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42941/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42941/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.184.69/tcp/42942/p2p/16Uiu2HAkububgMXk2twoLoJUCS1psNk5z9eGRaMJC9bnq4o4MpTS","/ip4/172.18.184.69/tcp/42943/ws/p2p/16Uiu2HAkububgMXk2twoLoJUCS1psNk5z9eGRaMJC9bnq4o4MpTS"],"enrUri":"enr:-LO4QC6O_W1xK71WtT-8hilhX-_oNDd2lTdSyV0YZ-67pndybXui4jmuWaym5Tu7xt4XvklJRR3mxQb5N-2QkN0wNFIBgmlkgnY0gmlwhKwSuEWKbXVsdGlhZGRyc4wACgSsErhFBqe_3QOCcnOFAAIBAACJc2VjcDI1NmsxoQICnzTyp_f4_X0B5w38Mx7qSQRudCbB0g265WOmDLw4aYN0Y3CCp76DdWRwgqfAhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42941/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.69.33/tcp/26163/p2p/16Uiu2HAkv7MvtkVMbMbW22LdQKoxTMZtV3VJ1ppMRGq6hRE6FJ77"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26162/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42941/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26162/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26162/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725616025206130176,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42941/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725616025206130176,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 477205529cf0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 76fd10247100
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.