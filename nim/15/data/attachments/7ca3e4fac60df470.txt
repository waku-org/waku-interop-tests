[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-05-06_12-45-13__609b83de-93bc-43af-bf82-f52c11b9fabe
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-06_12-45-13__609b83de-93bc-43af-bf82-f52c11b9fabe__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.140.137
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['19913', '19914', '19915', '19916', '19917']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 19913:19913 -p 19914:19914 -p 19915:19915 -p 19916:19916 -p 19917:19917 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19915 --rest-port=19913 --tcp-port=19914 --discv5-udp-port=19916 --rest-address=0.0.0.0 --nat=extip:172.18.140.137 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19917 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.140.137 waku 00b89dfd4e0edb62c343027cafbefc530b9dcaaffd724e618f8ed7be0d1eb793
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 00b89dfd4e0e. Setting up logs at ./log/docker/publishing_node1_2024-05-06_12-45-13__609b83de-93bc-43af-bf82-f52c11b9fabe__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 19913
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19913/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.140.137/tcp/19914/p2p/16Uiu2HAm9Ucmjpx3Qf2FYoF4sSRQYJ14hNNWeZqaSZtUVwS4kDaQ","/ip4/172.18.140.137/tcp/19915/ws/p2p/16Uiu2HAm9Ucmjpx3Qf2FYoF4sSRQYJ14hNNWeZqaSZtUVwS4kDaQ"],"enrUri":"enr:-LO4QHyKkFNWjZVTvGURnBK6FlJ8ywNMXUc3-0z9LU-txQ-ZLwo9jcDwSSTxYrXwVQqL1LjeaD5E53cB7rpPVSk6mD8BgmlkgnY0gmlwhKwSjImKbXVsdGlhZGRyc4wACgSsEoyJBk3L3QOCcnOFAAABAACJc2VjcDI1NmsxoQLQxLt3OI3QsdcoTMEnvUb5LGnYevgwMdZXnmv0HDbmSYN0Y3CCTcqDdWRwgk3MhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-06_12-45-13__609b83de-93bc-43af-bf82-f52c11b9fabe__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.92.114
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['62493', '62494', '62495', '62496', '62497']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 62493:62493 -p 62494:62494 -p 62495:62495 -p 62496:62496 -p 62497:62497 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62495 --rest-port=62493 --tcp-port=62494 --discv5-udp-port=62496 --rest-address=0.0.0.0 --nat=extip:172.18.92.114 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62497 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QHyKkFNWjZVTvGURnBK6FlJ8ywNMXUc3-0z9LU-txQ-ZLwo9jcDwSSTxYrXwVQqL1LjeaD5E53cB7rpPVSk6mD8BgmlkgnY0gmlwhKwSjImKbXVsdGlhZGRyc4wACgSsEoyJBk3L3QOCcnOFAAABAACJc2VjcDI1NmsxoQLQxLt3OI3QsdcoTMEnvUb5LGnYevgwMdZXnmv0HDbmSYN0Y3CCTcqDdWRwgk3MhXdha3UyAQ --storenode=/ip4/172.18.140.137/tcp/19914/p2p/16Uiu2HAm9Ucmjpx3Qf2FYoF4sSRQYJ14hNNWeZqaSZtUVwS4kDaQ --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.92.114 waku 3adb9078e5e52b44369a09ee57c80a245e1888e23c878e0cdc111a47ac0af10d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 3adb9078e5e5. Setting up logs at ./log/docker/store_node1_2024-05-06_12-45-13__609b83de-93bc-43af-bf82-f52c11b9fabe__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 62493
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62493/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.92.114/tcp/62494/p2p/16Uiu2HAmNPKGQqCCvEnL2eHqfmRQXZMg73hkgg1zZgMrgZqdsaxb","/ip4/172.18.92.114/tcp/62495/ws/p2p/16Uiu2HAmNPKGQqCCvEnL2eHqfmRQXZMg73hkgg1zZgMrgZqdsaxb"],"enrUri":"enr:-LO4QBZ1ZpKINVUYLaP9Gp5bO9Oo3PsyEmz95b4uPNusgTo6PgKMZpX8hPJRDw8o18aPbKih9_UWEuFLkAA4Pp3h9agBgmlkgnY0gmlwhKwSXHKKbXVsdGlhZGRyc4wACgSsElxyBvQf3QOCcnOFAAABAACJc2VjcDI1NmsxoQOQkPbvL8RGcyB6nJFrY3WnctUxrxr8HuSXj1Tm6ZfkzIN0Y3CC9B6DdWRwgvQghXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62493/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.140.137/tcp/19914/p2p/16Uiu2HAm9Ucmjpx3Qf2FYoF4sSRQYJ14hNNWeZqaSZtUVwS4kDaQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19913/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62493/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19913/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62493/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714999525280505600,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 00b89dfd4e0e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 3adb9078e5e5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-06_12-45-13__609b83de-93bc-43af-bf82-f52c11b9fabe__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-06_12-45-13__609b83de-93bc-43af-bf82-f52c11b9fabe__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-05-06_12-45-29__810d8cd5-d544-4719-8d3b-87e13f3510bf
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-06_12-45-29__810d8cd5-d544-4719-8d3b-87e13f3510bf__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.159.144
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['33970', '33971', '33972', '33973', '33974']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 33970:33970 -p 33971:33971 -p 33972:33972 -p 33973:33973 -p 33974:33974 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33972 --rest-port=33970 --tcp-port=33971 --discv5-udp-port=33973 --rest-address=0.0.0.0 --nat=extip:172.18.159.144 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33974 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.159.144 waku f2404b61b876066227d9b97851b169372f31469b2a2436de80927f98eee826c7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID f2404b61b876. Setting up logs at ./log/docker/publishing_node1_2024-05-06_12-45-29__810d8cd5-d544-4719-8d3b-87e13f3510bf__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 33970
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33970/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.159.144/tcp/33971/p2p/16Uiu2HAmJfA7CFCeVMJfdnq5WKXEWrUWDGsU5aQwTXWKY98tpab7","/ip4/172.18.159.144/tcp/33972/ws/p2p/16Uiu2HAmJfA7CFCeVMJfdnq5WKXEWrUWDGsU5aQwTXWKY98tpab7"],"enrUri":"enr:-LO4QLX-Xlyz7HkAkw0VeWaqHMRwWcd3g1Qs4cO67qVUFNcaGptfjGakOxV4oORnRSOOHKMj0e8ClDnhpjqLrMyy7toBgmlkgnY0gmlwhKwSn5CKbXVsdGlhZGRyc4wACgSsEp-QBoS03QOCcnOFAAABAACJc2VjcDI1NmsxoQNZMSdgGaOydegkeZxa37XJCj-OJGi9utkrgjjcHPLbxoN0Y3CChLODdWRwgoS1hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-06_12-45-29__810d8cd5-d544-4719-8d3b-87e13f3510bf__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.255.113
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['42858', '42859', '42860', '42861', '42862']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 42858:42858 -p 42859:42859 -p 42860:42860 -p 42861:42861 -p 42862:42862 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42860 --rest-port=42858 --tcp-port=42859 --discv5-udp-port=42861 --rest-address=0.0.0.0 --nat=extip:172.18.255.113 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42862 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QLX-Xlyz7HkAkw0VeWaqHMRwWcd3g1Qs4cO67qVUFNcaGptfjGakOxV4oORnRSOOHKMj0e8ClDnhpjqLrMyy7toBgmlkgnY0gmlwhKwSn5CKbXVsdGlhZGRyc4wACgSsEp-QBoS03QOCcnOFAAABAACJc2VjcDI1NmsxoQNZMSdgGaOydegkeZxa37XJCj-OJGi9utkrgjjcHPLbxoN0Y3CChLODdWRwgoS1hXdha3UyAQ --storenode=/ip4/172.18.159.144/tcp/33971/p2p/16Uiu2HAmJfA7CFCeVMJfdnq5WKXEWrUWDGsU5aQwTXWKY98tpab7 --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.255.113 waku c4675a294a2c8af83671e2a83bc104089fd2daa234435f54bcc5b9c61db2730f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID c4675a294a2c. Setting up logs at ./log/docker/store_node1_2024-05-06_12-45-29__810d8cd5-d544-4719-8d3b-87e13f3510bf__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 42858
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42858/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.255.113/tcp/42859/p2p/16Uiu2HAm6amFEUDBpUv1aCmYSxLFzZFz48Gq8BzHtDVneQd3pu9x","/ip4/172.18.255.113/tcp/42860/ws/p2p/16Uiu2HAm6amFEUDBpUv1aCmYSxLFzZFz48Gq8BzHtDVneQd3pu9x"],"enrUri":"enr:-LO4QJN0z_lyb-eDA7v4lh-ereFN3_g6U8qAG67tGmjmkSd9OFrwVEqTqe4T2UXmuSPDX31HIZ5hGoyr3oX1JnksMSgBgmlkgnY0gmlwhKwS_3GKbXVsdGlhZGRyc4wACgSsEv9xBqds3QOCcnOFAAABAACJc2VjcDI1NmsxoQKlxLzsWd2zlAvUliTMySeWXMCDnGGflvlnKQyPoRWAj4N0Y3CCp2uDdWRwgqdthXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42858/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.159.144/tcp/33971/p2p/16Uiu2HAmJfA7CFCeVMJfdnq5WKXEWrUWDGsU5aQwTXWKY98tpab7"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33970/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42858/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33970/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42858/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714999542040275968,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id f2404b61b876
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id c4675a294a2c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-06_12-45-29__810d8cd5-d544-4719-8d3b-87e13f3510bf__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-06_12-45-29__810d8cd5-d544-4719-8d3b-87e13f3510bf__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-05-06_12-45-46__379f7ff7-7e6b-4914-bd13-c4f0a7e1a3df
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-06_12-45-46__379f7ff7-7e6b-4914-bd13-c4f0a7e1a3df__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.86.80
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['62808', '62809', '62810', '62811', '62812']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 62808:62808 -p 62809:62809 -p 62810:62810 -p 62811:62811 -p 62812:62812 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62810 --rest-port=62808 --tcp-port=62809 --discv5-udp-port=62811 --rest-address=0.0.0.0 --nat=extip:172.18.86.80 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62812 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.86.80 waku 159d5835176d86d71eaea1e7b5521502197e82d8252895b717a5f9f248ab0b64
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 159d5835176d. Setting up logs at ./log/docker/publishing_node1_2024-05-06_12-45-46__379f7ff7-7e6b-4914-bd13-c4f0a7e1a3df__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 62808
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62808/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.86.80/tcp/62809/p2p/16Uiu2HAmLjSXKTBySByzVR5WbwEiX2itnnou6sJzKBGJLTwWVRsW","/ip4/172.18.86.80/tcp/62810/ws/p2p/16Uiu2HAmLjSXKTBySByzVR5WbwEiX2itnnou6sJzKBGJLTwWVRsW"],"enrUri":"enr:-LO4QKKpdbrS-z6Mz36QphYH_rsvW5xa8msOgArU5nuN59VyWQZyo2xR4zZTkem_QaRTuAL4fWZvXSCu3FXmv_01su8BgmlkgnY0gmlwhKwSVlCKbXVsdGlhZGRyc4wACgSsElZQBvVa3QOCcnOFAAABAACJc2VjcDI1NmsxoQN4AWmWvymGG7QtRRyYDyXd7HpS9x4LsR5pvXsFcw5WwYN0Y3CC9VmDdWRwgvVbhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-06_12-45-46__379f7ff7-7e6b-4914-bd13-c4f0a7e1a3df__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.62.198
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['19691', '19692', '19693', '19694', '19695']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 19691:19691 -p 19692:19692 -p 19693:19693 -p 19694:19694 -p 19695:19695 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19693 --rest-port=19691 --tcp-port=19692 --discv5-udp-port=19694 --rest-address=0.0.0.0 --nat=extip:172.18.62.198 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19695 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QKKpdbrS-z6Mz36QphYH_rsvW5xa8msOgArU5nuN59VyWQZyo2xR4zZTkem_QaRTuAL4fWZvXSCu3FXmv_01su8BgmlkgnY0gmlwhKwSVlCKbXVsdGlhZGRyc4wACgSsElZQBvVa3QOCcnOFAAABAACJc2VjcDI1NmsxoQN4AWmWvymGG7QtRRyYDyXd7HpS9x4LsR5pvXsFcw5WwYN0Y3CC9VmDdWRwgvVbhXdha3UyAQ --storenode=/ip4/172.18.86.80/tcp/62809/p2p/16Uiu2HAmLjSXKTBySByzVR5WbwEiX2itnnou6sJzKBGJLTwWVRsW --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.62.198 waku 5ce70d05a972110a527aaa2f9d429783c357446f9374adce7ea1dd319e43544e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 5ce70d05a972. Setting up logs at ./log/docker/store_node1_2024-05-06_12-45-46__379f7ff7-7e6b-4914-bd13-c4f0a7e1a3df__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 19691
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19691/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.62.198/tcp/19692/p2p/16Uiu2HAm9Ah68EJSqPaFDfmyD4G4NBtUiADgd8iLweNaU5Uzxopv","/ip4/172.18.62.198/tcp/19693/ws/p2p/16Uiu2HAm9Ah68EJSqPaFDfmyD4G4NBtUiADgd8iLweNaU5Uzxopv"],"enrUri":"enr:-LO4QFWYlqW0VhiEQWpnOaADOrAD14F14qNaE3T-WsLdIFfSDo49hxRKOy5YuQi4WxfpVa6YyDFy22KK6vw1ZOTi-bYBgmlkgnY0gmlwhKwSPsaKbXVsdGlhZGRyc4wACgSsEj7GBkzt3QOCcnOFAAABAACJc2VjcDI1NmsxoQLMLSiytnmEpJZ9v6zbhzJnutQVMS53HNRH99VRnZFh24N0Y3CCTOyDdWRwgkzuhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19691/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.86.80/tcp/62809/p2p/16Uiu2HAmLjSXKTBySByzVR5WbwEiX2itnnou6sJzKBGJLTwWVRsW"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62808/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19691/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62808/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19691/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714999558016243200,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 159d5835176d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 5ce70d05a972
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-06_12-45-46__379f7ff7-7e6b-4914-bd13-c4f0a7e1a3df__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-06_12-45-46__379f7ff7-7e6b-4914-bd13-c4f0a7e1a3df__harbor.status.im_wakuorg_nwaku:latest.log