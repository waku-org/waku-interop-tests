[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_only_store with id: 2024-05-06_12-44-23__70ca1717-d150-4cde-bf88-e335f3267f44
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-06_12-44-23__70ca1717-d150-4cde-bf88-e335f3267f44__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.189.200
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['40380', '40381', '40382', '40383', '40384']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 40380:40380 -p 40381:40381 -p 40382:40382 -p 40383:40383 -p 40384:40384 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40382 --rest-port=40380 --tcp-port=40381 --discv5-udp-port=40383 --rest-address=0.0.0.0 --nat=extip:172.18.189.200 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40384 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.189.200 waku 1f2ebe2277f757cec0c94df7e28c1812882bb9131a3e839d3aced93013e64955
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 1f2ebe2277f7. Setting up logs at ./log/docker/publishing_node1_2024-05-06_12-44-23__70ca1717-d150-4cde-bf88-e335f3267f44__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 40380
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40380/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.189.200/tcp/40381/p2p/16Uiu2HAmTRvMe6iB4LQ3bfD2ZH6RiVAVsX2tjif1M4fRnhhDeb5S","/ip4/172.18.189.200/tcp/40382/ws/p2p/16Uiu2HAmTRvMe6iB4LQ3bfD2ZH6RiVAVsX2tjif1M4fRnhhDeb5S"],"enrUri":"enr:-LO4QGx8fhndoIs87KPCI6JqsFo8h__-GBCmlAgGWo_14KmNXmwDxcGGmQy0W-irDPJM88RPC0T4gmbbkSEGC8CbSf0BgmlkgnY0gmlwhKwSvciKbXVsdGlhZGRyc4wACgSsEr3IBp2-3QOCcnOFAAABAACJc2VjcDI1NmsxoQPbhjzGD-_Jnpt0BAACNQYCy4Hgi9DK19E5A8DV_4-X0YN0Y3CCnb2DdWRwgp2_hXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-06_12-44-23__70ca1717-d150-4cde-bf88-e335f3267f44__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.165.137
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['57892', '57893', '57894', '57895', '57896']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 57892:57892 -p 57893:57893 -p 57894:57894 -p 57895:57895 -p 57896:57896 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57894 --rest-port=57892 --tcp-port=57893 --discv5-udp-port=57895 --rest-address=0.0.0.0 --nat=extip:172.18.165.137 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57896 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QGx8fhndoIs87KPCI6JqsFo8h__-GBCmlAgGWo_14KmNXmwDxcGGmQy0W-irDPJM88RPC0T4gmbbkSEGC8CbSf0BgmlkgnY0gmlwhKwSvciKbXVsdGlhZGRyc4wACgSsEr3IBp2-3QOCcnOFAAABAACJc2VjcDI1NmsxoQPbhjzGD-_Jnpt0BAACNQYCy4Hgi9DK19E5A8DV_4-X0YN0Y3CCnb2DdWRwgp2_hXdha3UyAw --storenode=/ip4/172.18.189.200/tcp/40381/p2p/16Uiu2HAmTRvMe6iB4LQ3bfD2ZH6RiVAVsX2tjif1M4fRnhhDeb5S --store=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.165.137 waku 360bab10c79ff81af76a2beb05e83f3101dfa2a7fc31fde1be5d82808a7fafff
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 360bab10c79f. Setting up logs at ./log/docker/store_node1_2024-05-06_12-44-23__70ca1717-d150-4cde-bf88-e335f3267f44__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 57892
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57892/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.165.137/tcp/57893/p2p/16Uiu2HAmQMRVuaNnaEjVgdtHEYU4PfRkkzB6mNR9nReUuZvD6T7f","/ip4/172.18.165.137/tcp/57894/ws/p2p/16Uiu2HAmQMRVuaNnaEjVgdtHEYU4PfRkkzB6mNR9nReUuZvD6T7f"],"enrUri":"enr:-LO4QMec9shLhqglFah8KHW_p-gHWuH4Zs5Fzsj2Ln9oGkSCbHm8EaqujlW9Z660iydB415-895J4ORMY5_4JRm0jDEBgmlkgnY0gmlwhKwSpYmKbXVsdGlhZGRyc4wACgSsEqWJBuIm3QOCcnOFAAABAACJc2VjcDI1NmsxoQOtzDlhJGZgssCw9fzL0pC8W5QjjXWQE7rabkccggWf0oN0Y3CC4iWDdWRwguInhXdha3UyAg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57892/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.189.200/tcp/40381/p2p/16Uiu2HAmTRvMe6iB4LQ3bfD2ZH6RiVAVsX2tjif1M4fRnhhDeb5S"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40380/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40380/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40380/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714999467131483136,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 1f2ebe2277f7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 360bab10c79f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-06_12-44-23__70ca1717-d150-4cde-bf88-e335f3267f44__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-06_12-44-23__70ca1717-d150-4cde-bf88-e335f3267f44__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_only_store with id: 2024-05-06_12-44-30__302aac56-8568-4828-a067-e7cdf035412e
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-06_12-44-30__302aac56-8568-4828-a067-e7cdf035412e__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.106.226
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['38403', '38404', '38405', '38406', '38407']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 38403:38403 -p 38404:38404 -p 38405:38405 -p 38406:38406 -p 38407:38407 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38405 --rest-port=38403 --tcp-port=38404 --discv5-udp-port=38406 --rest-address=0.0.0.0 --nat=extip:172.18.106.226 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38407 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.106.226 waku b328fb0d71157f420f2acf7666a6f4d4f21784b7d1d9108030fa2b6c0831b065
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID b328fb0d7115. Setting up logs at ./log/docker/publishing_node1_2024-05-06_12-44-30__302aac56-8568-4828-a067-e7cdf035412e__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 38403
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38403/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.106.226/tcp/38404/p2p/16Uiu2HAmErzn2VgMUVb81tgoGYxghWjnXThrkhpnPwhELMkKt266","/ip4/172.18.106.226/tcp/38405/ws/p2p/16Uiu2HAmErzn2VgMUVb81tgoGYxghWjnXThrkhpnPwhELMkKt266"],"enrUri":"enr:-LO4QLMJVgmweZ0s3ioCUFHAJRw2ukRrK4A3gLQzNRbFea_PKkH2cbG06du7zWWB9tMXrFL845WHxpjxIVgTqIIff0EBgmlkgnY0gmlwhKwSauKKbXVsdGlhZGRyc4wACgSsEmriBpYF3QOCcnOFAAABAACJc2VjcDI1NmsxoQMgytNnsWD13ccYowXAgQRlfoXEecygnQjrrOq68Jmqw4N0Y3CClgSDdWRwgpYGhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-06_12-44-30__302aac56-8568-4828-a067-e7cdf035412e__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.124.68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['52107', '52108', '52109', '52110', '52111']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 52107:52107 -p 52108:52108 -p 52109:52109 -p 52110:52110 -p 52111:52111 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52109 --rest-port=52107 --tcp-port=52108 --discv5-udp-port=52110 --rest-address=0.0.0.0 --nat=extip:172.18.124.68 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52111 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QLMJVgmweZ0s3ioCUFHAJRw2ukRrK4A3gLQzNRbFea_PKkH2cbG06du7zWWB9tMXrFL845WHxpjxIVgTqIIff0EBgmlkgnY0gmlwhKwSauKKbXVsdGlhZGRyc4wACgSsEmriBpYF3QOCcnOFAAABAACJc2VjcDI1NmsxoQMgytNnsWD13ccYowXAgQRlfoXEecygnQjrrOq68Jmqw4N0Y3CClgSDdWRwgpYGhXdha3UyAw --storenode=/ip4/172.18.106.226/tcp/38404/p2p/16Uiu2HAmErzn2VgMUVb81tgoGYxghWjnXThrkhpnPwhELMkKt266 --store=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.124.68 waku 67944f41af53694ce61e614df331d8c640f69f4c2622b842c2550d631d0097b4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 67944f41af53. Setting up logs at ./log/docker/store_node1_2024-05-06_12-44-30__302aac56-8568-4828-a067-e7cdf035412e__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 52107
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52107/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.124.68/tcp/52108/p2p/16Uiu2HAmL4jxaxtii8fciQ7vS9oq2v99K734ArjiYMxzFh6mgMSb","/ip4/172.18.124.68/tcp/52109/ws/p2p/16Uiu2HAmL4jxaxtii8fciQ7vS9oq2v99K734ArjiYMxzFh6mgMSb"],"enrUri":"enr:-LO4QDIOegKLUX05Vt2AI0P37ltPYLx9k_uk9vsIX0AtNLz1b5lwjbQskUNrogaO1XIEfd6pY5diC6K9q6_O-VK7eagBgmlkgnY0gmlwhKwSfESKbXVsdGlhZGRyc4wACgSsEnxEBsuN3QOCcnOFAAABAACJc2VjcDI1NmsxoQNuF3m3FuJGOmstcKRxab3_cHYnclLoUDg1fqLTePqHlIN0Y3CCy4yDdWRwgsuOhXdha3UyAg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52107/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.106.226/tcp/38404/p2p/16Uiu2HAmErzn2VgMUVb81tgoGYxghWjnXThrkhpnPwhELMkKt266"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38403/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38403/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38403/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714999474004183552,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id b328fb0d7115
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 67944f41af53
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-06_12-44-30__302aac56-8568-4828-a067-e7cdf035412e__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-06_12-44-30__302aac56-8568-4828-a067-e7cdf035412e__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_only_store with id: 2024-05-06_12-44-37__8c3421b2-bec5-4be4-b528-aac5d04f7f08
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-06_12-44-37__8c3421b2-bec5-4be4-b528-aac5d04f7f08__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.107.9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['18126', '18127', '18128', '18129', '18130']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 18126:18126 -p 18127:18127 -p 18128:18128 -p 18129:18129 -p 18130:18130 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18128 --rest-port=18126 --tcp-port=18127 --discv5-udp-port=18129 --rest-address=0.0.0.0 --nat=extip:172.18.107.9 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18130 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.107.9 waku 557edb94b734bc955fd73eede5be5f9ab0e0c7de65a7cd5ad99ce3931d79a051
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 557edb94b734. Setting up logs at ./log/docker/publishing_node1_2024-05-06_12-44-37__8c3421b2-bec5-4be4-b528-aac5d04f7f08__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 18126
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18126/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.107.9/tcp/18127/p2p/16Uiu2HAmUWsFyTARju9oQmF2vSALJxJTrBBe2KVx2Y5ixUocq7eQ","/ip4/172.18.107.9/tcp/18128/ws/p2p/16Uiu2HAmUWsFyTARju9oQmF2vSALJxJTrBBe2KVx2Y5ixUocq7eQ"],"enrUri":"enr:-LO4QF97yTCUab5-GRMFug9QL-fKo-7ewPWZSY6UrdtRORtyZ6EIyzZaW0BIUx0D0DapPBeHOIGiyQYk3FUt0DJAhMwBgmlkgnY0gmlwhKwSawmKbXVsdGlhZGRyc4wACgSsEmsJBkbQ3QOCcnOFAAABAACJc2VjcDI1NmsxoQPrplNnNLrD4OEMofXEY4V1vsJssmvbWK9oLNTbFnTaAYN0Y3CCRs-DdWRwgkbRhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-06_12-44-37__8c3421b2-bec5-4be4-b528-aac5d04f7f08__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.191.216
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['41396', '41397', '41398', '41399', '41400']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 41396:41396 -p 41397:41397 -p 41398:41398 -p 41399:41399 -p 41400:41400 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41398 --rest-port=41396 --tcp-port=41397 --discv5-udp-port=41399 --rest-address=0.0.0.0 --nat=extip:172.18.191.216 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41400 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QF97yTCUab5-GRMFug9QL-fKo-7ewPWZSY6UrdtRORtyZ6EIyzZaW0BIUx0D0DapPBeHOIGiyQYk3FUt0DJAhMwBgmlkgnY0gmlwhKwSawmKbXVsdGlhZGRyc4wACgSsEmsJBkbQ3QOCcnOFAAABAACJc2VjcDI1NmsxoQPrplNnNLrD4OEMofXEY4V1vsJssmvbWK9oLNTbFnTaAYN0Y3CCRs-DdWRwgkbRhXdha3UyAw --storenode=/ip4/172.18.107.9/tcp/18127/p2p/16Uiu2HAmUWsFyTARju9oQmF2vSALJxJTrBBe2KVx2Y5ixUocq7eQ --store=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.191.216 waku c4ca896cd7ecd6c99717e5fde52902b1f5e118080f6631f7ab894e00f53e4a42
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID c4ca896cd7ec. Setting up logs at ./log/docker/store_node1_2024-05-06_12-44-37__8c3421b2-bec5-4be4-b528-aac5d04f7f08__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 41396
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41396/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.191.216/tcp/41397/p2p/16Uiu2HAmBZ2SmdKCA64uXA4PhCaZdBWwyqCatyQU6FFxhzxCtshU","/ip4/172.18.191.216/tcp/41398/ws/p2p/16Uiu2HAmBZ2SmdKCA64uXA4PhCaZdBWwyqCatyQU6FFxhzxCtshU"],"enrUri":"enr:-LO4QMM0c1xKpgsbGsMTh9cXfamqsJQY5baer7HRv4vEHqxuZiz0oZ53DP82V6WYCW4VR8INBBRtqT0hSTOcSEPsWMoBgmlkgnY0gmlwhKwSv9iKbXVsdGlhZGRyc4wACgSsEr_YBqG23QOCcnOFAAABAACJc2VjcDI1NmsxoQLvnTJLjXBHQXYE4QLNtW1hGXqLvvcsN8ZYpkyQws4ge4N0Y3CCobWDdWRwgqG3hXdha3UyAg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41396/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.107.9/tcp/18127/p2p/16Uiu2HAmUWsFyTARju9oQmF2vSALJxJTrBBe2KVx2Y5ixUocq7eQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18126/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18126/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18126/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714999481663661824,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 557edb94b734
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id c4ca896cd7ec
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-06_12-44-37__8c3421b2-bec5-4be4-b528-aac5d04f7f08__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-06_12-44-37__8c3421b2-bec5-4be4-b528-aac5d04f7f08__harbor.status.im_wakuorg_nwaku:latest.log