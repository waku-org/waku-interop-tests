[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2024-11-23_04-39-17__934e136c-eb7c-4ce8-91ad-d752d803c343
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-11-23_04-39-17__934e136c-eb7c-4ce8-91ad-d752d803c343__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.130.223
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['57331', '57332', '57333', '57334', '57335']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 57331:57331 -p 57332:57332 -p 57333:57333 -p 57334:57334 -p 57335:57335 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57333 --rest-port=57331 --tcp-port=57332 --discv5-udp-port=57334 --rest-address=0.0.0.0 --nat=extip:172.18.130.223 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f0baed3ea8fdcb66394a079fcdb52e1cd1bfaae90360a34f410c42bcc286fbe1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57335 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.130.223 waku 85354111fb16b9309adb2a78a0d9bf9d383d18d42aba3f6819e2caea921088e1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 85354111fb16. Setting up logs at ./log/docker/publishing_node1_2024-11-23_04-39-17__934e136c-eb7c-4ce8-91ad-d752d803c343__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 57331
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 48eae65e2366. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57331/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57331/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.130.223/tcp/57332/p2p/16Uiu2HAmGyYqymU2b2oCWuZn1mVurGemTzE64J4CtPvY3XfGXLTE","/ip4/172.18.130.223/tcp/57333/ws/p2p/16Uiu2HAmGyYqymU2b2oCWuZn1mVurGemTzE64J4CtPvY3XfGXLTE"],"enrUri":"enr:-L24QCNpnnjCBNJQTQfOPLrZHrG5Yz6PY0bYNuG3wTpM_28kfuyaaKRGArmlcpc_eTlwSc_d380I4R_9pI0fZnyWeQUCgmlkgnY0gmlwhKwSgt-KbXVsdGlhZGRyc5YACASsEoLfBt_0AAoErBKC3wbf9d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDQC_xr6G7fjWip5pACD29OrN1va4gL9Y2DKn1sRzrW32DdGNwgt_0g3VkcILf9oV3YWt1Mgs"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node2_2024-11-23_04-39-17__934e136c-eb7c-4ce8-91ad-d752d803c343__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.216.160
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['35367', '35368', '35369', '35370', '35371']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 35367:35367 -p 35368:35368 -p 35369:35369 -p 35370:35370 -p 35371:35371 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35369 --rest-port=35367 --tcp-port=35368 --discv5-udp-port=35370 --rest-address=0.0.0.0 --nat=extip:172.18.216.160 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=da3d305dbde6ed0eecd82cc107eb10bffafdd31600f6889e41e46dea6ce7c8a9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35371 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.216.160 waku 6c4b1c309f2a847595469f6fccfe27d6eaab59972a02b4bb5d18f5bf4b041f84
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6c4b1c309f2a. Setting up logs at ./log/docker/publishing_node2_2024-11-23_04-39-17__934e136c-eb7c-4ce8-91ad-d752d803c343__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 35367
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35367/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35367/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.216.160/tcp/35368/p2p/16Uiu2HAmGaUTBWifwEcoaZGSxXiPyfUxf5YtXPFDNsHuiG3aUWPH","/ip4/172.18.216.160/tcp/35369/ws/p2p/16Uiu2HAmGaUTBWifwEcoaZGSxXiPyfUxf5YtXPFDNsHuiG3aUWPH"],"enrUri":"enr:-L24QCUGfZQ3n_FQbxh1bwmN0IbD-T4vTELbk9jXnxvAG48OYwDIxo5CDtLLT2tM3_xeGO-mt0nRORsA4LO-VLl4n_UCgmlkgnY0gmlwhKwS2KCKbXVsdGlhZGRyc5YACASsEtigBoooAAoErBLYoAaKKd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDOkaeRDmYU6cSsWJHifmk-eVt2ogFsQOjeZbZEt27zuiDdGNwgooog3VkcIKKKoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35367/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.130.223/tcp/57332/p2p/16Uiu2HAmGyYqymU2b2oCWuZn1mVurGemTzE64J4CtPvY3XfGXLTE"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-11-23_04-39-17__934e136c-eb7c-4ce8-91ad-d752d803c343__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.19.109
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['22836', '22837', '22838', '22839', '22840']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 22836:22836 -p 22837:22837 -p 22838:22838 -p 22839:22839 -p 22840:22840 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22838 --rest-port=22836 --tcp-port=22837 --discv5-udp-port=22839 --rest-address=0.0.0.0 --nat=extip:172.18.19.109 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6ed2f7c771cee6636a7b90d7ecbafb2ecfd9aced2ff3e905fca5a8ce723dfc75 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22840 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QCNpnnjCBNJQTQfOPLrZHrG5Yz6PY0bYNuG3wTpM_28kfuyaaKRGArmlcpc_eTlwSc_d380I4R_9pI0fZnyWeQUCgmlkgnY0gmlwhKwSgt-KbXVsdGlhZGRyc5YACASsEoLfBt_0AAoErBKC3wbf9d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDQC_xr6G7fjWip5pACD29OrN1va4gL9Y2DKn1sRzrW32DdGNwgt_0g3VkcILf9oV3YWt1Mgs --storenode=/ip4/172.18.130.223/tcp/57332/p2p/16Uiu2HAmGyYqymU2b2oCWuZn1mVurGemTzE64J4CtPvY3XfGXLTE --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.130.223/tcp/57332/p2p/16Uiu2HAmGyYqymU2b2oCWuZn1mVurGemTzE64J4CtPvY3XfGXLTE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.19.109 waku 64c536bfb6c6a9d0e44247ac740ee6b1dcb1fc3978ca74910393eec03efc4419
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 64c536bfb6c6. Setting up logs at ./log/docker/store_node1_2024-11-23_04-39-17__934e136c-eb7c-4ce8-91ad-d752d803c343__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 22836
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22836/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22836/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.19.109/tcp/22837/p2p/16Uiu2HAmLKroBtDouZy5dSgvUsL9uh5hevvLSdC6HcXEvDzZhWzS","/ip4/172.18.19.109/tcp/22838/ws/p2p/16Uiu2HAmLKroBtDouZy5dSgvUsL9uh5hevvLSdC6HcXEvDzZhWzS"],"enrUri":"enr:-L24QHalJeblTQSNjNW9k58CGvG6YHUCfGlbK4-XzN9gC4o-ShPWiBipA6JSp7INKwA9ly1KKWIxaFeCXTU4lh2xnwACgmlkgnY0gmlwhKwSE22KbXVsdGlhZGRyc5YACASsEhNtBlk1AAoErBITbQZZNt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDcfbrVzaqpZXZkW7BKcVdEbMUx7fmwG0C01XhNZuWX3eDdGNwglk1g3VkcIJZN4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22836/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.130.223/tcp/57332/p2p/16Uiu2HAmGyYqymU2b2oCWuZn1mVurGemTzE64J4CtPvY3XfGXLTE"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22836/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.216.160/tcp/35368/p2p/16Uiu2HAmGaUTBWifwEcoaZGSxXiPyfUxf5YtXPFDNsHuiG3aUWPH"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57331/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35367/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22836/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1732336762244605440}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57331/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"DrS0o9iGfUWJScYdR4TtMbYXiLEEgA27o2Bs90a6M+0="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22836/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"3d7677fe0a81ec1f7db6","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"DrS0o9iGfUWJScYdR4TtMbYXiLEEgA27o2Bs90a6M+0="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 85354111fb16
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 6c4b1c309f2a
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 85354111fb16. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 64c536bfb6c6
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6c4b1c309f2a. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.