[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2024-11-10_04-03-45__cf7725ed-2744-4288-a47b-a7af73a5ee08
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-10_04-03-45__cf7725ed-2744-4288-a47b-a7af73a5ee08__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-10_04-03-45__cf7725ed-2744-4288-a47b-a7af73a5ee08__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-10_04-03-45__cf7725ed-2744-4288-a47b-a7af73a5ee08__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.239.8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['60822', '60823', '60824', '60825', '60826']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 60822:60822 -p 60823:60823 -p 60824:60824 -p 60825:60825 -p 60826:60826 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60824 --rest-port=60822 --tcp-port=60823 --discv5-udp-port=60825 --rest-address=0.0.0.0 --nat=extip:172.18.239.8 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ea7a75b0cc01aa0ee1e73db09cfbf7fff70815b00da89fa1f898cee9af651b39 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60826 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.239.8 waku ca9cdd2ee0cbe479662bd1031161c280fa4e4d514c0cfb567f0afd7b34200933
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ca9cdd2ee0cb. Setting up logs at ./log/docker/node1_2024-11-10_04-03-45__cf7725ed-2744-4288-a47b-a7af73a5ee08__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 60822
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container dd9c82e531e5. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60822/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60822/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.239.8/tcp/60823/p2p/16Uiu2HAm2HQsUApstdffu365qkdf1gv7Y4UaBGwwykC6Svjopo9o","/ip4/172.18.239.8/tcp/60824/ws/p2p/16Uiu2HAm2HQsUApstdffu365qkdf1gv7Y4UaBGwwykC6Svjopo9o"],"enrUri":"enr:-L24QM_NPWIE5ha3RaLyX5TmqdQVaHi3e2ApXLRw2UC19HDVUGaZgv88SEabpw0AQlLyu-_NZAd0OnctB3MR2Cnbop4CgmlkgnY0gmlwhKwS7wiKbXVsdGlhZGRyc5YACASsEu8IBu2XAAoErBLvCAbtmN0DgnJzhQADAQAAiXNlY3AyNTZrMaECZeQUAsCFw83VPXWD1UkdjFGsmzwPwezCGARefwKtUa6DdGNwgu2Xg3VkcILtmYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.217.179
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['44661', '44662', '44663', '44664', '44665']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 44661:44661 -p 44662:44662 -p 44663:44663 -p 44664:44664 -p 44665:44665 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44663 --rest-port=44661 --tcp-port=44662 --discv5-udp-port=44664 --rest-address=0.0.0.0 --nat=extip:172.18.217.179 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c1f9085f61c8ec0d2afef7dfcfbec6cee5d38ca6eb9c1b129efaaaac6f18c6c7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44665 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QM_NPWIE5ha3RaLyX5TmqdQVaHi3e2ApXLRw2UC19HDVUGaZgv88SEabpw0AQlLyu-_NZAd0OnctB3MR2Cnbop4CgmlkgnY0gmlwhKwS7wiKbXVsdGlhZGRyc5YACASsEu8IBu2XAAoErBLvCAbtmN0DgnJzhQADAQAAiXNlY3AyNTZrMaECZeQUAsCFw83VPXWD1UkdjFGsmzwPwezCGARefwKtUa6DdGNwgu2Xg3VkcILtmYV3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.217.179 waku 0e86a0eb3a60a618906ac08a6f60f0c75ebc4cb4cb1c8a35cd1f977c4326c377
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0e86a0eb3a60. Setting up logs at ./log/docker/node2_2024-11-10_04-03-45__cf7725ed-2744-4288-a47b-a7af73a5ee08__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 44661
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44661/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44661/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.217.179/tcp/44662/p2p/16Uiu2HAmPhJbMKfQZaojRTqkffpxL91e52ZZCThWqJ2HMNiFfsrJ","/ip4/172.18.217.179/tcp/44663/ws/p2p/16Uiu2HAmPhJbMKfQZaojRTqkffpxL91e52ZZCThWqJ2HMNiFfsrJ"],"enrUri":"enr:-L24QLh-Hc7cGaixg5hTXY2LwHd6OSXOrxgL-WArAG_9SnSqX3_I9MXxDmffBo5ydAlnU43vzpydbmHAZGr8AduzH_8CgmlkgnY0gmlwhKwS2bOKbXVsdGlhZGRyc5YACASsEtmzBq52AAoErBLZswaud90DgnJzhQADAQAAiXNlY3AyNTZrMaEDpAhYN31nBlnOFKGFRgtrI5R9XOhZe3I47D2xGyIu_uODdGNwgq52g3VkcIKueIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.174.236
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['63912', '63913', '63914', '63915', '63916']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 63912:63912 -p 63913:63913 -p 63914:63914 -p 63915:63915 -p 63916:63916 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63914 --rest-port=63912 --tcp-port=63913 --discv5-udp-port=63915 --rest-address=0.0.0.0 --nat=extip:172.18.174.236 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8edf8bcebad15e2efcaed67f0befecc2ac1df4a2edb0c9ffdb998dae4a0e0df0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63916 --metrics-logging=true --relay=false --storenode=/ip4/172.18.217.179/tcp/44662/p2p/16Uiu2HAmPhJbMKfQZaojRTqkffpxL91e52ZZCThWqJ2HMNiFfsrJ --discv5-bootstrap-node=enr:-L24QLh-Hc7cGaixg5hTXY2LwHd6OSXOrxgL-WArAG_9SnSqX3_I9MXxDmffBo5ydAlnU43vzpydbmHAZGr8AduzH_8CgmlkgnY0gmlwhKwS2bOKbXVsdGlhZGRyc5YACASsEtmzBq52AAoErBLZswaud90DgnJzhQADAQAAiXNlY3AyNTZrMaEDpAhYN31nBlnOFKGFRgtrI5R9XOhZe3I47D2xGyIu_uODdGNwgq52g3VkcIKueIV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.174.236 waku 3d16d15a45b79101d03311cc3d9e81c8a11c278f97bd05e545aa4df6bcecbfc0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3d16d15a45b7. Setting up logs at ./log/docker/node3_2024-11-10_04-03-45__cf7725ed-2744-4288-a47b-a7af73a5ee08__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 63912
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63912/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63912/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.174.236/tcp/63913/p2p/16Uiu2HAkv9vBMkqxT6zH4T7fsPf1pQvf5TPZ6H7U2nUfuhmEvxdT","/ip4/172.18.174.236/tcp/63914/ws/p2p/16Uiu2HAkv9vBMkqxT6zH4T7fsPf1pQvf5TPZ6H7U2nUfuhmEvxdT"],"enrUri":"enr:-L24QI_vx9jh0LIR4qqypiidmLhpDy71jSIyici5WQ23k9WDDSEeCmIrwuY5GovPpljz8yF3sn2Q6rVNGTHTVkGyeosCgmlkgnY0gmlwhKwSruyKbXVsdGlhZGRyc5YACASsEq7sBvmpAAoErBKu7Ab5qt0DgnJzhQADAQAAiXNlY3AyNTZrMaECCtJzBOAZAs2f4OroB6nVLR0BFMXtiEMxxPugx8ln8paDdGNwgvmpg3VkcIL5q4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60822/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44661/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60822/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.217.179/tcp/44662/p2p/16Uiu2HAmPhJbMKfQZaojRTqkffpxL91e52ZZCThWqJ2HMNiFfsrJ","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44661/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.239.8/tcp/60823/p2p/16Uiu2HAm2HQsUApstdffu365qkdf1gv7Y4UaBGwwykC6Svjopo9o","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60822/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63912/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"3211d6b0488800083465","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"2fYX3HELyrlD0a0ytTs17s77Sobzyw2CdZD8t6b1m3o="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ca9cdd2ee0cb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0e86a0eb3a60
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ca9cdd2ee0cb. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3d16d15a45b7
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0e86a0eb3a60. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.