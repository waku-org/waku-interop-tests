[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_payload with id: 2024-11-10_04-11-14__fa2bb0dc-d439-4e8c-9870-d5c533c3b85a
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-10_04-11-14__fa2bb0dc-d439-4e8c-9870-d5c533c3b85a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.105.200
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['61376', '61377', '61378', '61379', '61380']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 61376:61376 -p 61377:61377 -p 61378:61378 -p 61379:61379 -p 61380:61380 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61378 --rest-port=61376 --tcp-port=61377 --discv5-udp-port=61379 --rest-address=0.0.0.0 --nat=extip:172.18.105.200 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5bef772f5d9c6626cbdf7a3aba2a59db8ff2b3fbdf1b220f88c06bfecfefacaa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61380 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.105.200 waku 541794ed85bd04b35dad6c6b5208f0c038271c75dc9b02fc6569b0acac97297c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 541794ed85bd. Setting up logs at ./log/docker/receiving_node1_2024-11-10_04-11-14__fa2bb0dc-d439-4e8c-9870-d5c533c3b85a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 61376
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4bae2d953331. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61376/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61376/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.105.200/tcp/61377/p2p/16Uiu2HAm5DZov8T9A3bw7Ngn2XNqkVQzKV33Pd2xNRd4VQFofs8t","/ip4/172.18.105.200/tcp/61378/ws/p2p/16Uiu2HAm5DZov8T9A3bw7Ngn2XNqkVQzKV33Pd2xNRd4VQFofs8t"],"enrUri":"enr:-L24QHZhMId9tPAXCcwLiHtVsUC5NY-aZot3vBJsPituCU8aJ4b4iyfo37ajWEvwWwHraeCbxVAhmEGDC6ZT_Bibd9MCgmlkgnY0gmlwhKwSaciKbXVsdGlhZGRyc5YACASsEmnIBu_BAAoErBJpyAbvwt0DgnJzhQADAQAAiXNlY3AyNTZrMaECkXrsO9Tsrugj0DJ4xaTv10-KsYAg45H57JJHRPsWlSGDdGNwgu_Bg3VkcILvw4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-10_04-11-14__fa2bb0dc-d439-4e8c-9870-d5c533c3b85a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.121.86
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['43682', '43683', '43684', '43685', '43686']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 43682:43682 -p 43683:43683 -p 43684:43684 -p 43685:43685 -p 43686:43686 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43684 --rest-port=43682 --tcp-port=43683 --discv5-udp-port=43685 --rest-address=0.0.0.0 --nat=extip:172.18.121.86 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=626daa39cbcc6d2feec69d4c32e6dc98e2ab4dacd7cced0bd559d0fbff64ec0b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43686 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.121.86 waku d3e39f2c490f7eb3d387c45ef3c443f47fc0b7dc42199ecab75a2ab7cb03cfd3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d3e39f2c490f. Setting up logs at ./log/docker/receiving_node2_2024-11-10_04-11-14__fa2bb0dc-d439-4e8c-9870-d5c533c3b85a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 43682
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43682/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43682/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.121.86/tcp/43683/p2p/16Uiu2HAkua3314ukAs3kJn3bsqBmK3YMewWx8PyVu6V8CokCV5PD","/ip4/172.18.121.86/tcp/43684/ws/p2p/16Uiu2HAkua3314ukAs3kJn3bsqBmK3YMewWx8PyVu6V8CokCV5PD"],"enrUri":"enr:-L24QMwS1MXN3mDd_k7Lr-bnq9MTCig_Olnloj9YK4xk5JM6ZzV3M5HUHNvHtnE6HjReoUefmIUeSj19vQvccJE6P_oCgmlkgnY0gmlwhKwSeVaKbXVsdGlhZGRyc5YACASsEnlWBqqjAAoErBJ5VgaqpN0DgnJzhQADAQAAiXNlY3AyNTZrMaECAiR0LAipboUVWI-G_-l77Ij7OQumQTkEHbu8jlTKDYiDdGNwgqqjg3VkcIKqpYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43682/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.105.200/tcp/61377/p2p/16Uiu2HAm5DZov8T9A3bw7Ngn2XNqkVQzKV33Pd2xNRd4VQFofs8t"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-10_04-11-14__fa2bb0dc-d439-4e8c-9870-d5c533c3b85a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.88.103
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['55596', '55597', '55598', '55599', '55600']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 55596:55596 -p 55597:55597 -p 55598:55598 -p 55599:55599 -p 55600:55600 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55598 --rest-port=55596 --tcp-port=55597 --discv5-udp-port=55599 --rest-address=0.0.0.0 --nat=extip:172.18.88.103 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f28a1ac3eb43b4463eeada12d2b2c123209d0f6edbbfa6717ade1cec9da28a75 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55600 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QHZhMId9tPAXCcwLiHtVsUC5NY-aZot3vBJsPituCU8aJ4b4iyfo37ajWEvwWwHraeCbxVAhmEGDC6ZT_Bibd9MCgmlkgnY0gmlwhKwSaciKbXVsdGlhZGRyc5YACASsEmnIBu_BAAoErBJpyAbvwt0DgnJzhQADAQAAiXNlY3AyNTZrMaECkXrsO9Tsrugj0DJ4xaTv10-KsYAg45H57JJHRPsWlSGDdGNwgu_Bg3VkcILvw4V3YWt1Mgk --lightpushnode=/ip4/172.18.105.200/tcp/61377/p2p/16Uiu2HAm5DZov8T9A3bw7Ngn2XNqkVQzKV33Pd2xNRd4VQFofs8t --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.88.103 waku 21d96449f8081e27ee613f5bfc409f1fc7c0b8b14109285acd3300b7feb5a3f0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 21d96449f808. Setting up logs at ./log/docker/lightpush_node1_2024-11-10_04-11-14__fa2bb0dc-d439-4e8c-9870-d5c533c3b85a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 55596
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55596/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55596/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.88.103/tcp/55597/p2p/16Uiu2HAm5XQbh51yx4ovdBDBorR4hvYc8EXFMoJdjuRA63sGkgXB","/ip4/172.18.88.103/tcp/55598/ws/p2p/16Uiu2HAm5XQbh51yx4ovdBDBorR4hvYc8EXFMoJdjuRA63sGkgXB"],"enrUri":"enr:-L24QGy_HqNQkAJ3q3PTWYs6bbspXlKdPk-COIDA6WFECtGiAYyp8goFD_57ZmFkHeksslT2RETtwtieJ5Sq7aq9QVICgmlkgnY0gmlwhKwSWGeKbXVsdGlhZGRyc5YACASsElhnBtktAAoErBJYZwbZLt0DgnJzhQADAQAAiXNlY3AyNTZrMaEClgz2cuadCtxkWSrkua5sqUQff4vxzRCU4FkIq2EWozqDdGNwgtktg3VkcILZL4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55596/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.105.200/tcp/61377/p2p/16Uiu2HAm5DZov8T9A3bw7Ngn2XNqkVQzKV33Pd2xNRd4VQFofs8t"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55596/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.121.86/tcp/43683/p2p/16Uiu2HAkua3314ukAs3kJn3bsqBmK3YMewWx8PyVu6V8CokCV5PD"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61376/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43682/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55596/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1731211879834021376}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:55596/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 541794ed85bd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d3e39f2c490f
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 541794ed85bd. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 21d96449f808
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d3e39f2c490f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.