[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2024-11-10_04-12-40__8cdf4545-74d7-435e-a1a0-931ba023e73f
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-10_04-12-40__8cdf4545-74d7-435e-a1a0-931ba023e73f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.185.24
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['31909', '31910', '31911', '31912', '31913']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 31909:31909 -p 31910:31910 -p 31911:31911 -p 31912:31912 -p 31913:31913 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31911 --rest-port=31909 --tcp-port=31910 --discv5-udp-port=31912 --rest-address=0.0.0.0 --nat=extip:172.18.185.24 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eec2e7bd7ef24f001eeb0fbba819fe0fe647bec4d7edb9baa78af32dcc1dbdef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31913 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.185.24 waku ca1906094a89d58189688f60e31ac6992553eee90e3bc1c440dcce0668ae9bdf
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3e4dfbfe84d7. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ca1906094a89. Setting up logs at ./log/docker/receiving_node1_2024-11-10_04-12-40__8cdf4545-74d7-435e-a1a0-931ba023e73f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 31909
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31909/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31909/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.185.24/tcp/31910/p2p/16Uiu2HAmQqYTR3znAz7RQjetCy5tdW1AqjF4p9P6ADZbvbkRoRGT","/ip4/172.18.185.24/tcp/31911/ws/p2p/16Uiu2HAmQqYTR3znAz7RQjetCy5tdW1AqjF4p9P6ADZbvbkRoRGT"],"enrUri":"enr:-L24QN544hHxdMeDmwgQK7hTr-giyJZMVA38y64gfXHvUoZIKizt-7s4snPSzSYh7OKiYGObOJcHErMf2xR_eWr_TsACgmlkgnY0gmlwhKwSuRiKbXVsdGlhZGRyc5YACASsErkYBnymAAoErBK5GAZ8p90DgnJzhQADAQAAiXNlY3AyNTZrMaEDtQBaZ23Cyu2Tf5UCwXykNhJ4AiJTrLNuyV0NtX93GHCDdGNwgnymg3VkcIJ8qIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-10_04-12-40__8cdf4545-74d7-435e-a1a0-931ba023e73f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.31.183
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['4170', '4171', '4172', '4173', '4174']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 4170:4170 -p 4171:4171 -p 4172:4172 -p 4173:4173 -p 4174:4174 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4172 --rest-port=4170 --tcp-port=4171 --discv5-udp-port=4173 --rest-address=0.0.0.0 --nat=extip:172.18.31.183 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6a4f23996c669c723ba8ae114aad77c6daa6f55a6ad6cd3cebe98c3f2ab7c8e6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4174 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.31.183 waku fc412689f4bf6523787c51eb9982f97629d8a3115998d88beac4a78e22b0ed21
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fc412689f4bf. Setting up logs at ./log/docker/receiving_node2_2024-11-10_04-12-40__8cdf4545-74d7-435e-a1a0-931ba023e73f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 4170
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4170/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4170/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.31.183/tcp/4171/p2p/16Uiu2HAm67nH19gNP5pQVf571jGfdCsgifUksV1AXh67SeiB3aiy","/ip4/172.18.31.183/tcp/4172/ws/p2p/16Uiu2HAm67nH19gNP5pQVf571jGfdCsgifUksV1AXh67SeiB3aiy"],"enrUri":"enr:-L24QE-SO7COE2PYUOmbn5RZY-2M2HpoOrjetXcoxjyFt-_Jay-hC22bzWZgrO6ijKp86DgW8INzJCpgHOkFTKzN6PACgmlkgnY0gmlwhKwSH7eKbXVsdGlhZGRyc5YACASsEh-3BhBLAAoErBIftwYQTN0DgnJzhQADAQAAiXNlY3AyNTZrMaECnts4qpSeqMba5Bp6dcy-oOp8UVJFFzyPwVr7Lv1xPnaDdGNwghBLg3VkcIIQTYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4170/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.185.24/tcp/31910/p2p/16Uiu2HAmQqYTR3znAz7RQjetCy5tdW1AqjF4p9P6ADZbvbkRoRGT"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-10_04-12-40__8cdf4545-74d7-435e-a1a0-931ba023e73f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.8.228
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['20862', '20863', '20864', '20865', '20866']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 20862:20862 -p 20863:20863 -p 20864:20864 -p 20865:20865 -p 20866:20866 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20864 --rest-port=20862 --tcp-port=20863 --discv5-udp-port=20865 --rest-address=0.0.0.0 --nat=extip:172.18.8.228 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fbdb83c5b626ee7527ec38b90822fbbece4caa234f7a141ad259efea5f5a02cd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20866 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QN544hHxdMeDmwgQK7hTr-giyJZMVA38y64gfXHvUoZIKizt-7s4snPSzSYh7OKiYGObOJcHErMf2xR_eWr_TsACgmlkgnY0gmlwhKwSuRiKbXVsdGlhZGRyc5YACASsErkYBnymAAoErBK5GAZ8p90DgnJzhQADAQAAiXNlY3AyNTZrMaEDtQBaZ23Cyu2Tf5UCwXykNhJ4AiJTrLNuyV0NtX93GHCDdGNwgnymg3VkcIJ8qIV3YWt1Mgk --lightpushnode=/ip4/172.18.185.24/tcp/31910/p2p/16Uiu2HAmQqYTR3znAz7RQjetCy5tdW1AqjF4p9P6ADZbvbkRoRGT --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.8.228 waku 426ec222523f9c979bcb18454503b728d4c99b8ddacae3709e64cf3644eef9e1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 426ec222523f. Setting up logs at ./log/docker/lightpush_node1_2024-11-10_04-12-40__8cdf4545-74d7-435e-a1a0-931ba023e73f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 20862
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20862/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20862/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.8.228/tcp/20863/p2p/16Uiu2HAm9KxsJmRGYLzTkTE9jyzWcDvLxsqBSaTdGxmfdB4wJvmD","/ip4/172.18.8.228/tcp/20864/ws/p2p/16Uiu2HAm9KxsJmRGYLzTkTE9jyzWcDvLxsqBSaTdGxmfdB4wJvmD"],"enrUri":"enr:-L24QBV2I8hKG7FQsMhlFS6MgOTQHzwCQ_zHSjPeTKi8Cd1hDVls_0Ii_U4aiR6WDXFSt2cBY3RSNIwcWj9GESqIhZkCgmlkgnY0gmlwhKwSCOSKbXVsdGlhZGRyc5YACASsEgjkBlF_AAoErBII5AZRgN0DgnJzhQADAQAAiXNlY3AyNTZrMaECzo06RZUe11-8KibsicyRWvvQUGSa_jeEyBYpT1Qcq-CDdGNwglF_g3VkcIJRgYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20862/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.185.24/tcp/31910/p2p/16Uiu2HAmQqYTR3znAz7RQjetCy5tdW1AqjF4p9P6ADZbvbkRoRGT"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20862/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.31.183/tcp/4171/p2p/16Uiu2HAm67nH19gNP5pQVf571jGfdCsgifUksV1AXh67SeiB3aiy"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31909/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4170/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20862/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1731211966316364032, "extraField": "extraValue"}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:20862/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ca1906094a89
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id fc412689f4bf
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ca1906094a89. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 426ec222523f
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fc412689f4bf. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.