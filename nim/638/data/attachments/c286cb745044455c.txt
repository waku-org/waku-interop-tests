[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_payloads with id: 2025-02-03_04-03-15__eaca669c-0be0-4a3a-9fbd-594d7ad40d46
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-03_04-03-15__eaca669c-0be0-4a3a-9fbd-594d7ad40d46__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.176.234
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['22196', '22197', '22198', '22199', '22200']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 22196:22196 -p 22197:22197 -p 22198:22198 -p 22199:22199 -p 22200:22200 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22198 --rest-port=22196 --tcp-port=22197 --discv5-udp-port=22199 --rest-address=0.0.0.0 --nat=extip:172.18.176.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=65f13a2abc8ea2cbe58bcb9058bbcb9d1d11a85ed1e940fa4d7b66c93015888e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22200 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.176.234 waku 71cd63cf666feed5f475adbd41c478641975969927ceea9b0cba0bc9057fafb2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 71cd63cf666f. Setting up logs at ./log/docker/receiving_node1_2025-02-03_04-03-15__eaca669c-0be0-4a3a-9fbd-594d7ad40d46__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 22196
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e67c7ca22770. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22196/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22196/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.176.234/tcp/22197/p2p/16Uiu2HAmAMhS7QKV14brGLRLVnnM2aFL3wQoubFinNUrmr6TDeqc","/ip4/172.18.176.234/tcp/22198/ws/p2p/16Uiu2HAmAMhS7QKV14brGLRLVnnM2aFL3wQoubFinNUrmr6TDeqc"],"enrUri":"enr:-L24QDOWtj8RrwCXM4v1UPctmE--d_3dts52y2qZVmaKGCsYYXK8QtfzLk9CEE6hmdRiJ43tQSZkkggUpBeSktY_0s4CgmlkgnY0gmlwhKwSsOqKbXVsdGlhZGRyc5YACASsErDqBla1AAoErBKw6gZWtt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3dqf2i0Gegn8O387wY7DAIWG5bZElBqlM9zwI5945heDdGNwgla1g3VkcIJWt4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-03_04-03-15__eaca669c-0be0-4a3a-9fbd-594d7ad40d46__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.25.33
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['40100', '40101', '40102', '40103', '40104']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 40100:40100 -p 40101:40101 -p 40102:40102 -p 40103:40103 -p 40104:40104 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40102 --rest-port=40100 --tcp-port=40101 --discv5-udp-port=40103 --rest-address=0.0.0.0 --nat=extip:172.18.25.33 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b0dbb6a6fb44a6d67c7dfe39a519eda94dcd9bb692ac7b9ee0aaf5b2fcea0c4a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40104 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.25.33 waku d4a0d266cbd0e66d4fd75671cac633545403fc296dbaf4fd5871acac7ea0731b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d4a0d266cbd0. Setting up logs at ./log/docker/receiving_node2_2025-02-03_04-03-15__eaca669c-0be0-4a3a-9fbd-594d7ad40d46__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 40100
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40100/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40100/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.25.33/tcp/40101/p2p/16Uiu2HAky2cpew4k2eBHNwMWgKScd6fcNBdqCbSnzcaTmbUSLrpR","/ip4/172.18.25.33/tcp/40102/ws/p2p/16Uiu2HAky2cpew4k2eBHNwMWgKScd6fcNBdqCbSnzcaTmbUSLrpR"],"enrUri":"enr:-L24QMNAj7px8UfgVFQ01ZEXdtRhUFilnS1OfLTTuiJrEfMDOXmyZ75gMo6um4n_tO9TD4dXjjcLJ2ek3sYc8VCdAAwCgmlkgnY0gmlwhKwSGSGKbXVsdGlhZGRyc5YACASsEhkhBpylAAoErBIZIQacpt0DgnJzhQADAQAAiXNlY3AyNTZrMaECNYbRnrWC9xToWQjCIK4c0YflJoI8kppW6ytoICoe6IqDdGNwgpylg3VkcIKcp4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40100/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.176.234/tcp/22197/p2p/16Uiu2HAmAMhS7QKV14brGLRLVnnM2aFL3wQoubFinNUrmr6TDeqc"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-03_04-03-15__eaca669c-0be0-4a3a-9fbd-594d7ad40d46__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.52.202
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['44336', '44337', '44338', '44339', '44340']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 44336:44336 -p 44337:44337 -p 44338:44338 -p 44339:44339 -p 44340:44340 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44338 --rest-port=44336 --tcp-port=44337 --discv5-udp-port=44339 --rest-address=0.0.0.0 --nat=extip:172.18.52.202 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4b9cc2eedf40adda34fcfac1e2dce4ebbe0fc30d2abfef893be19dfe86bd7b6a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44340 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QDOWtj8RrwCXM4v1UPctmE--d_3dts52y2qZVmaKGCsYYXK8QtfzLk9CEE6hmdRiJ43tQSZkkggUpBeSktY_0s4CgmlkgnY0gmlwhKwSsOqKbXVsdGlhZGRyc5YACASsErDqBla1AAoErBKw6gZWtt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3dqf2i0Gegn8O387wY7DAIWG5bZElBqlM9zwI5945heDdGNwgla1g3VkcIJWt4V3YWt1Mgk --lightpushnode=/ip4/172.18.176.234/tcp/22197/p2p/16Uiu2HAmAMhS7QKV14brGLRLVnnM2aFL3wQoubFinNUrmr6TDeqc --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.52.202 waku 3fac67e5c097c2f575869bd2a637e539b173400b5fd4f5834cc404e9acd5bd52
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3fac67e5c097. Setting up logs at ./log/docker/lightpush_node1_2025-02-03_04-03-15__eaca669c-0be0-4a3a-9fbd-594d7ad40d46__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 44336
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44336/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44336/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.52.202/tcp/44337/p2p/16Uiu2HAmKHz7HreMeUzUVDrh9pjMvLKHCoF3t9Wka2pVDvWNGbk5","/ip4/172.18.52.202/tcp/44338/ws/p2p/16Uiu2HAmKHz7HreMeUzUVDrh9pjMvLKHCoF3t9Wka2pVDvWNGbk5"],"enrUri":"enr:-L24QIQx95ft7mdHTvwQMrE5h3jqdkfwuOqfV_36CARz__YUEKfG6uoOPt0QKMKpRk0UXsfEFRKylaZFfG8nBW_eaU8CgmlkgnY0gmlwhKwSNMqKbXVsdGlhZGRyc5YACASsEjTKBq0xAAoErBI0ygatMt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDYqBWrjedHL5NcG-9r5u40vUBw5WMyfOGc8566yidvZKDdGNwgq0xg3VkcIKtM4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44336/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.176.234/tcp/22197/p2p/16Uiu2HAmAMhS7QKV14brGLRLVnnM2aFL3wQoubFinNUrmr6TDeqc"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44336/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.25.33/tcp/40101/p2p/16Uiu2HAky2cpew4k2eBHNwMWgKScd6fcNBdqCbSnzcaTmbUSLrpR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22196/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40100/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload Empty string
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44336/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738555399962409216}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:44336/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload Unecoded text
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44336/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "Hello World!", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738555399967333376}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:44336/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A dictionary
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44336/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": {"key": "YWFh"}, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738555399970336000}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:44336/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload An integer
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44336/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": 1234567890, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738555399973380608}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:44336/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A list
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44336/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": ["YWFh"], "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738555399976622592}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:44336/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A bool
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44336/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": true, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738555399980048128}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:44336/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 71cd63cf666f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d4a0d266cbd0
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 71cd63cf666f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 3fac67e5c097
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d4a0d266cbd0. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.