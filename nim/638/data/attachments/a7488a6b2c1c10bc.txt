[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_stored_when_ephemeral_false with id: 2025-02-03_04-03-06__af73e004-1362-4c72-acf8-7f4b6047a461
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-02-03_04-03-06__af73e004-1362-4c72-acf8-7f4b6047a461__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-02-03_04-03-06__af73e004-1362-4c72-acf8-7f4b6047a461__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-02-03_04-03-06__af73e004-1362-4c72-acf8-7f4b6047a461__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:414 Start 3 nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.30.174
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['34202', '34203', '34204', '34205', '34206']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 34202:34202 -p 34203:34203 -p 34204:34204 -p 34205:34205 -p 34206:34206 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34204 --rest-port=34202 --tcp-port=34203 --discv5-udp-port=34205 --rest-address=0.0.0.0 --nat=extip:172.18.30.174 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=df66db5879b9e4a1c674e12db8ec18d10def9a7cdfe49971ff4cb5fda9bce6cf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34206 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.30.174 waku d51dfeab19192359500edefb0e642714aea0bf014e8895a49a7aa16ff3798ec5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d51dfeab1919. Setting up logs at ./log/docker/node1_2025-02-03_04-03-06__af73e004-1362-4c72-acf8-7f4b6047a461__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 34202
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 15dd721401c4. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34202/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34202/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.30.174/tcp/34203/p2p/16Uiu2HAmMQeudMjQasvPv7GgNWfLHbmGpfSTCBbK7vhaF4NyNBFZ","/ip4/172.18.30.174/tcp/34204/ws/p2p/16Uiu2HAmMQeudMjQasvPv7GgNWfLHbmGpfSTCBbK7vhaF4NyNBFZ"],"enrUri":"enr:-L24QIYU25sA0KERxANb-R3OuRqnJoyqQGL15dQ8SYClnmHEBfFKTvshuWEaU2nxy0Lbn2nGQHMOpPwfO1qaOJJ7NWkCgmlkgnY0gmlwhKwSHq6KbXVsdGlhZGRyc5YACASsEh6uBoWbAAoErBIergaFnN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDgg0RPny15WnA99qZKJgKsAsiomtb1PXqZBGhQZDqKFyDdGNwgoWbg3VkcIKFnYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.138.110
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['16088', '16089', '16090', '16091', '16092']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 16088:16088 -p 16089:16089 -p 16090:16090 -p 16091:16091 -p 16092:16092 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16090 --rest-port=16088 --tcp-port=16089 --discv5-udp-port=16091 --rest-address=0.0.0.0 --nat=extip:172.18.138.110 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dedd2cc5d7ba4e1e96c130a1ffcda783debfcf4aa32bd5438dcbc94b64d8235d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16092 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QIYU25sA0KERxANb-R3OuRqnJoyqQGL15dQ8SYClnmHEBfFKTvshuWEaU2nxy0Lbn2nGQHMOpPwfO1qaOJJ7NWkCgmlkgnY0gmlwhKwSHq6KbXVsdGlhZGRyc5YACASsEh6uBoWbAAoErBIergaFnN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDgg0RPny15WnA99qZKJgKsAsiomtb1PXqZBGhQZDqKFyDdGNwgoWbg3VkcIKFnYV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.138.110 waku 7d1344e08012ecf2cea37d6391f612e344af76a7b65fb60e99bf3b00db4fe71a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7d1344e08012. Setting up logs at ./log/docker/node2_2025-02-03_04-03-06__af73e004-1362-4c72-acf8-7f4b6047a461__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 16088
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16088/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16088/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.138.110/tcp/16089/p2p/16Uiu2HAmTB6UZrC6L4mUnPvANEgzkH5DBgyy1P4gC7afpYmjztzw","/ip4/172.18.138.110/tcp/16090/ws/p2p/16Uiu2HAmTB6UZrC6L4mUnPvANEgzkH5DBgyy1P4gC7afpYmjztzw"],"enrUri":"enr:-L24QKwT30ShNInxLEsC34w59ZR--LTejiNsVapNubqxlBB5NsufdoMMXvNOH4WqoJEmiRdCd_pTR7deyVMid58jJ6cCgmlkgnY0gmlwhKwSim6KbXVsdGlhZGRyc5YACASsEopuBj7ZAAoErBKKbgY-2t0DgnJzhQADAQAAiXNlY3AyNTZrMaED17n3ox4bm-9HdP8wVMMbvD9197O9hIVQXyPQY--l6ZSDdGNwgj7Zg3VkcII-24V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.253.166
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['40492', '40493', '40494', '40495', '40496']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 40492:40492 -p 40493:40493 -p 40494:40494 -p 40495:40495 -p 40496:40496 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40494 --rest-port=40492 --tcp-port=40493 --discv5-udp-port=40495 --rest-address=0.0.0.0 --nat=extip:172.18.253.166 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0ec7309ae7e7a477a4d6e5424d8eed5ee0ab964f29f8511edde1a6fecbddf3cd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40496 --metrics-logging=true --relay=false --storenode=/ip4/172.18.138.110/tcp/16089/p2p/16Uiu2HAmTB6UZrC6L4mUnPvANEgzkH5DBgyy1P4gC7afpYmjztzw --discv5-bootstrap-node=enr:-L24QKwT30ShNInxLEsC34w59ZR--LTejiNsVapNubqxlBB5NsufdoMMXvNOH4WqoJEmiRdCd_pTR7deyVMid58jJ6cCgmlkgnY0gmlwhKwSim6KbXVsdGlhZGRyc5YACASsEopuBj7ZAAoErBKKbgY-2t0DgnJzhQADAQAAiXNlY3AyNTZrMaED17n3ox4bm-9HdP8wVMMbvD9197O9hIVQXyPQY--l6ZSDdGNwgj7Zg3VkcII-24V3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.253.166 waku 4577ea146123e0870ad32bfe64ae332fe2f6107cb2bde82cd573383c78819a21
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4577ea146123. Setting up logs at ./log/docker/node3_2025-02-03_04-03-06__af73e004-1362-4c72-acf8-7f4b6047a461__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 40492
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40492/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40492/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.253.166/tcp/40493/p2p/16Uiu2HAmJMtMVMHRAU8U2nDUfWoVES6SCsrJTTG2gh4VQs8n9FPS","/ip4/172.18.253.166/tcp/40494/ws/p2p/16Uiu2HAmJMtMVMHRAU8U2nDUfWoVES6SCsrJTTG2gh4VQs8n9FPS"],"enrUri":"enr:-L24QE0W1xQjRJVPrUjTf-p_3C9oWfIMjceAUnHLda53FArESOqyN3n0x5-E3DFhq1IR6mqkOe8uwfIuvkiJb6S_uo0CgmlkgnY0gmlwhKwS_aaKbXVsdGlhZGRyc5YACASsEv2mBp4tAAoErBL9pgaeLt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVMR3rIAK-QM4VLcFIOeEhOz8Z73esvILQBHble957X2DdGNwgp4tg3VkcIKeL4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:419 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34202/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16088/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34202/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.138.110/tcp/16089/p2p/16Uiu2HAmTB6UZrC6L4mUnPvANEgzkH5DBgyy1P4gC7afpYmjztzw","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16088/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.30.174/tcp/34203/p2p/16Uiu2HAmMQeudMjQasvPv7GgNWfLHbmGpfSTCBbK7vhaF4NyNBFZ","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:424 Node1 publish message with ephemeral = false
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34202/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:428 Check if message is stored 
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40492/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"e9b820ac8ba98e1c6a42","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xb89c5351936d4c7430694ef6f80d53a8dc4b4772582e66bd48052c5e15406d9b"}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d51dfeab1919
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 7d1344e08012
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d51dfeab1919. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4577ea146123
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7d1344e08012. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.