{"uid":"63069a8585e12851","name":"test_publish_with_extra_field","fullName":"tests.relay.test_publish.TestRelayPublish#test_publish_with_extra_field","historyId":"90204d781fe82afb699d3ea3d09948cc","time":{"start":1738555465824,"stop":1738555465827,"duration":3},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1738555353375,"stop":1738555353375,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors","time":{"start":1738555463093,"stop":1738555463093,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1738555463093,"stop":1738555463094,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1738555463093,"stop":1738555463093,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1738555463093,"stop":1738555463093,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1738555463093,"stop":1738555463093,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_relay_nodes","time":{"start":1738555463094,"stop":1738555465698,"duration":2604},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1738555465694,"stop":1738555465698,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.relay.test_publish.TestRelayPublish object at 0x7f8b4ee9f470>, <src.node.waku_node.WakuNode object at 0x7f8b4ee5bad0>, ['/ip4/172.18.184.171/tcp/48197/p2p/16Uiu2HAmC5Gq1uGEg1WDTd6CN7z7mifKE7mFHMwQH1sECwqLi8iu'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"relay_setup","time":{"start":1738555463094,"stop":1738555463094,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1738555463094,"stop":1738555463094,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"subscribe_main_relay_nodes","time":{"start":1738555465698,"stop":1738555465708,"duration":10},"status":"passed","steps":[{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1738555465698,"stop":1738555465708,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7f8b4eab9e50>, <src.node.waku_node.WakuNode object at 0x7f8b4ee5bad0>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"relay_warm_up","time":{"start":1738555465708,"stop":1738555465824,"duration":116},"status":"passed","steps":[{"name":"wait_for_published_message_to_reach_relay_peer","time":{"start":1738555465708,"stop":1738555465823,"duration":115},"status":"passed","steps":[{"name":"check_published_message_reaches_relay_peer","time":{"start":1738555465709,"stop":1738555465823,"duration":114},"status":"passed","steps":[{"name":"assert_received_message","time":{"start":1738555465820,"stop":1738555465820,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1738555465708461568}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1738555465823,"stop":1738555465823,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1738555465708461568}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1738555465708461568}"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"timeout_duration","value":"120"},{"name":"time_between_retries","value":"1"},{"name":"pubsub_topic","value":"None"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"status":"passed","steps":[{"name":"create_message","time":{"start":1738555465824,"stop":1738555465824,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"extraField","value":"'extraValue'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_published_message_reaches_relay_peer","time":{"start":1738555465824,"stop":1738555465827,"duration":3},"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:48196/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1 with response: b'Invalid content body, could not decode. Unable to deserialize data'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/relay.py\", line 120, in check_published_message_reaches_relay_peer\n    sender.send_relay_message(message, pubsub_topic)\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 343, in send_relay_message\n    return self._api.send_relay_message(message, pubsub_topic)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 51, in send_relay_message\n    return self.rest_call(\"post\", f\"relay/v1/messages/{quote(pubsub_topic, safe='')}\", json.dumps(message))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[],"attachments":[],"parameters":[{"name":"message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1738555465824182016, 'extraField': 'extraValue'}"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"6ee7ef8afa428ad8","name":"log","source":"6ee7ef8afa428ad8.txt","type":"text/plain","size":27860}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1738555465829,"stop":1738555465829,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1738555465830,"stop":1738555468387,"duration":2557},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors::0","time":{"start":1738555468388,"stop":1738555468402,"duration":14},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1738555468403,"stop":1738555468403,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1738555585524,"stop":1738555585524,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')"},{"name":"parentSuite","value":"tests.relay"},{"name":"suite","value":"test_publish"},{"name":"subSuite","value":"TestRelayPublish"},{"name":"host","value":"fv-az1695-508"},{"name":"thread","value":"1930-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.relay.test_publish"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"67ff4fe4c5dc62e3","status":"failed","statusDetails":"AssertionError: Found errors {'crash': [], 'fatal': [], 'panic': [], 'abort': ['DBG 2025-02-03 04:04:19.328+00:00 Waku node ENR updated successfully with new multiaddress topics=\"wakunode waku\" tid=1 file=waku.nim:363 enr=enr:-L24QAiUE_-BHPp1Go0yxQuK32PcYO5ldZcOonDUqk64wmrybswrlcuPcwVT8QPHVafSMoPuYaEwMyDDPxvon2NV32ACgmlkgnY0gmlwhKwSeJSKbXVsdGlhZGRyc5YACASsEniUBuhFAAoErBJ4lAboRt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDFeIX9508xZ5zJ058PuTX9KQfHdwnC7vw3NIVePKhOamDdGNwguhFg3VkcILoR4V3YWt1MgE record=\"(2, id: \\\\\"v4\\\\\", ip: 172.18.120.148, multiaddrs: 0x000804AC12789406E845000A04AC12789406E846DD03, rs: 0x0003010000, secp256k1: 0x0315E217F79D3CC59E73274E7C3EE4D7F4A41F1DDC270BBBF0DCD21578F2A139A9, tcp: 59461, udp: 59463, waku2: 0x01)\"', 'INF 2025-02-03 04:04:19.330+00:00 Discv5: discoverable ENR                   topics=\"waku discv5\" tid=1 file=waku_discv5.nim:332 enrUri=enr:-L24QMkPGjIPUvuezgARRFdMNZcTVA0Pd-tOg2lPyLWofds8Xa_Up5PVebs80vRzE1GI94eOti3sh5rRx_zP61baQzoDgmlkgnY0gmlwhKwSeJSKbXVsdGlhZGRyc5YACASsEniUBuhFAAoErBJ4lAboRt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDFeIX9508xZ5zJ058PuTX9KQfHdwnC7vw3NIVePKhOamDdGNwguhFg3VkcILoR4V3YWt1MgE enr=\"(3, id: \\\\\"v4\\\\\", ip: 172.18.120.148, multiaddrs: 0x000804AC12789406E845000A04AC12789406E846DD03, rs: 0x0003010000, secp256k1: 0x0315E217F79D3CC59E73274E7C3EE4D7F4A41F1DDC270BBBF0DCD21578F2A139A9, tcp: 59461, udp: 59463, waku2: 0x01)\"', 'DBG 2025-02-03 04:04:19.332+00:00 ENR updated successfully                   topics=\"waku discv5\" tid=1 file=waku_discv5.nim:302 enrUri=enr:-L24QLFjdFmuWQMLkzo09dzcEGRFnibZMA9Wa0E4Cu6hh6JQNTbKzzu2dG6e9SFa-hYVI69X5uI5KMw0Ou1X0MRT_WsEgmlkgnY0gmlwhKwSeJSKbXVsdGlhZGRyc5YACASsEniUBuhFAAoErBJ4lAboRt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDFeIX9508xZ5zJ058PuTX9KQfHdwnC7vw3NIVePKhOamDdGNwguhFg3VkcILoR4V3YWt1MgE enr=\"(4, id: \\\\\"v4\\\\\", ip: 172.18.120.148, multiaddrs: 0x000804AC12789406E845000A04AC12789406E846DD03, rs: 0x0003010000, secp256k1: 0x0315E217F79D3CC59E73274E7C3EE4D7F4A41F1DDC270BBBF0DCD21578F2A139A9, tcp: 59461, udp: 59463, waku2: 0x01)\"', 'DBG 2025-02-03 04:04:20.396+00:00 ENR updated successfully                   topics=\"waku discv5\" tid=1 file=waku_discv5.nim:302 enrUri=enr:-L-4QMRRVdMEy0JGlazPxXbx-NQQT83OErTaHc0PD2s8bgeBCZQpqTo9VFlLhEbco0SBLpUUCDf4_u5pbTwbrpGIQmcFgmlkgnY0gmlwhKwSeJSKbXVsdGlhZGRyc5YACASsEniUBuhFAAoErBJ4lAboRt0DgnJzhwADAgAAAAGJc2VjcDI1NmsxoQMV4hf3nTzFnnMnTnw-5Nf0pB8d3CcLu_Dc0hV48qE5qYN0Y3CC6EWDdWRwguhHhXdha3UyAQ enr=\"(5, id: \\\\\"v4\\\\\", ip: 172.18.120.148, multiaddrs: 0x000804AC12789406E845000A04AC12789406E846DD03, rs: 0x00030200000001, secp256k1: 0x0315E217F79D3CC59E73274E7C3EE4D7F4A41F1DDC270BBBF0DCD21578F2A139A9, tcp: 59461, udp: 59463, waku2: 0x01)\"'], 'segfault': [], 'corrupt': [], 'terminated': [], 'unhandled': [], 'stacktrace': [], 'deadlock': [], 'SIGSEGV': [], 'SIGABRT': [], 'stack overflow': [], 'index out of bounds': [], 'nil pointer dereference': [], 'goroutine exit': [], 'nil pointer': [], 'runtime error': [], 'goexit': [], 'race condition': [], 'double free': []}","time":{"start":1738555460513,"stop":1738555460517,"duration":4}}],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":0,"passed":3,"unknown":0,"total":3},"items":[{"uid":"e90e30445c967825","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/637//#testresult/e90e30445c967825","status":"passed","time":{"start":1738469032442,"stop":1738469032446,"duration":4}},{"uid":"d6ea477557433245","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/636//#testresult/d6ea477557433245","status":"passed","time":{"start":1738382643785,"stop":1738382643789,"duration":4}}]},"tags":["@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')"]},"source":"63069a8585e12851.json","parameterValues":[]}