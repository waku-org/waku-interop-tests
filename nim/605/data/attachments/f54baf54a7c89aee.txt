[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_retrieve_messages_without_subscribing_via_api with id: 2025-01-05_18-40-15__a8906dae-ab3d-4a26-8e65-05a2812b8d24
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-05_18-40-15__a8906dae-ab3d-4a26-8e65-05a2812b8d24__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.137.186
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['58555', '58556', '58557', '58558', '58559']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 58555:58555 -p 58556:58556 -p 58557:58557 -p 58558:58558 -p 58559:58559 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58557 --rest-port=58555 --tcp-port=58556 --discv5-udp-port=58558 --rest-address=0.0.0.0 --nat=extip:172.18.137.186 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=6d535da3a0fdb8ca8bb1b6d3f7ebc81753eaeaca3db8dc4f2c6d377f2c7d1ec8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58559 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.137.186 waku d254630de1eef1e445d03e819572bf2b7d647abf501602e69da117db8a18c3c3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d254630de1ee. Setting up logs at ./log/docker/node1_2025-01-05_18-40-15__a8906dae-ab3d-4a26-8e65-05a2812b8d24__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 58555
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c67b66afd504. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58555/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58555/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.137.186/tcp/58556/p2p/16Uiu2HAmGrinYuB4m1Ceao3hWBsiGosNtWUyhby8hYKDJRmFw4qE","/ip4/172.18.137.186/tcp/58557/ws/p2p/16Uiu2HAmGrinYuB4m1Ceao3hWBsiGosNtWUyhby8hYKDJRmFw4qE"],"enrUri":"enr:-L24QCphURf5xFmudObVi051YcbeYOhEA9U_U_3_QIofVYJLcT5rxoaSIQgllepsFU_ad0i3fcvCscVrLifpSvMmTqcCgmlkgnY0gmlwhKwSibqKbXVsdGlhZGRyc5YACASsEom6BuS8AAoErBKJugbkvd0DgnJzhQACAQAAiXNlY3AyNTZrMaEDPnAeXZmvJFqHiEEq99DnH8sa5-WB33WBIaJ_svRwuamDdGNwguS8g3VkcILkvoV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-05_18-40-15__a8906dae-ab3d-4a26-8e65-05a2812b8d24__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.118.174
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['36084', '36085', '36086', '36087', '36088']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 36084:36084 -p 36085:36085 -p 36086:36086 -p 36087:36087 -p 36088:36088 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36086 --rest-port=36084 --tcp-port=36085 --discv5-udp-port=36087 --rest-address=0.0.0.0 --nat=extip:172.18.118.174 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=d6fefddf4e5da5bdc2d9fead9b5178de108a619ad160bd7c9f6dcdaeba6a0aeb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36088 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QCphURf5xFmudObVi051YcbeYOhEA9U_U_3_QIofVYJLcT5rxoaSIQgllepsFU_ad0i3fcvCscVrLifpSvMmTqcCgmlkgnY0gmlwhKwSibqKbXVsdGlhZGRyc5YACASsEom6BuS8AAoErBKJugbkvd0DgnJzhQACAQAAiXNlY3AyNTZrMaEDPnAeXZmvJFqHiEEq99DnH8sa5-WB33WBIaJ_svRwuamDdGNwguS8g3VkcILkvoV3YWt1MgU --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.118.174 waku aa7ea0dba0ec57ae347071fc05437add9dbe84ba90b3ab90a28b1b77d1d27f70
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID aa7ea0dba0ec. Setting up logs at ./log/docker/node2_2025-01-05_18-40-15__a8906dae-ab3d-4a26-8e65-05a2812b8d24__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 36084
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36084/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36084/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.118.174/tcp/36085/p2p/16Uiu2HAkywtmY5g63aeDh4qfXs4FpA8YWAgBgCAi36hiz9cbTx4L","/ip4/172.18.118.174/tcp/36086/ws/p2p/16Uiu2HAkywtmY5g63aeDh4qfXs4FpA8YWAgBgCAi36hiz9cbTx4L"],"enrUri":"enr:-L24QMsfW5bRJaN2ChK2gKWanbytnNQAHzYYXF7ceeqpmSEtHy7A-oG6mzVsWtzO8mQdpeNytK5fGUxxxmqSfWZM6JsCgmlkgnY0gmlwhKwSdq6KbXVsdGlhZGRyc5YACASsEnauBoz1AAoErBJ2rgaM9t0DgnJzhQACAQAAiXNlY3AyNTZrMaECQyyh1nutwnJKP4XVCewlR4rZOtaScNp_1-PArmScgg2DdGNwgoz1g3VkcIKM94V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36084/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.137.186/tcp/58556/p2p/16Uiu2HAmGrinYuB4m1Ceao3hWBsiGosNtWUyhby8hYKDJRmFw4qE"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58555/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58555/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1736102417951329280,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36084/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1736102417951329280,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d254630de1ee
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id aa7ea0dba0ec
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d254630de1ee. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.