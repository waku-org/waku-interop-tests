[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2024-12-05_08-09-39__a103bf29-7ac1-401d-ae07-500a5acd7707
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-05_08-09-39__a103bf29-7ac1-401d-ae07-500a5acd7707__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.101.149
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['3092', '3093', '3094', '3095', '3096']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 3092:3092 -p 3093:3093 -p 3094:3094 -p 3095:3095 -p 3096:3096 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3094 --rest-port=3092 --tcp-port=3093 --discv5-udp-port=3095 --rest-address=0.0.0.0 --nat=extip:172.18.101.149 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=288aaebc0decb116053c7ebbf521babf36eed67960a9febcab9decffc3e6c50b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3096 --metrics-logging=true --lightpush=true --relay=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 91f5315e1fc9. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.101.149 waku 2c20cd3616de21e5915995fa947bb8fa39d168fed2aa7ac50dcfde787c0d928f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2c20cd3616de. Setting up logs at ./log/docker/receiving_node1_2024-12-05_08-09-39__a103bf29-7ac1-401d-ae07-500a5acd7707__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 3092
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3092/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3092/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.101.149/tcp/3093/p2p/16Uiu2HAmHYvVpR9wsZJoy3ygPbzXu33kriGhMUQzHqMSAbmnf4At","/ip4/172.18.101.149/tcp/3094/ws/p2p/16Uiu2HAmHYvVpR9wsZJoy3ygPbzXu33kriGhMUQzHqMSAbmnf4At"],"enrUri":"enr:-L24QIIGE7-2hq-EAxfn4fbn7mi9ssQtjHZFNjQvJPW6AR3fMZVo3kR4m45AuoGzWEOwp4owXI5IojDWyrhXrhnBk5QCgmlkgnY0gmlwhKwSZZWKbXVsdGlhZGRyc5YACASsEmWVBgwVAAoErBJllQYMFt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDSLyX3Y2l-RnCjXprTLjBg7yf881o5RS05wprGB5JMumDdGNwggwVg3VkcIIMF4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-05_08-09-39__a103bf29-7ac1-401d-ae07-500a5acd7707__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.221.60
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['31944', '31945', '31946', '31947', '31948']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 31944:31944 -p 31945:31945 -p 31946:31946 -p 31947:31947 -p 31948:31948 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31946 --rest-port=31944 --tcp-port=31945 --discv5-udp-port=31947 --rest-address=0.0.0.0 --nat=extip:172.18.221.60 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f041edaedeaac1d66b6c4bb1fcc9a3ba8b3d681e520bd32da782bd68c890a3df --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31948 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.221.60 waku 60e99ed4c140137139bbe2dd1ba64ae675c4627f11235a2191cbc25a3a560dbe
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 60e99ed4c140. Setting up logs at ./log/docker/receiving_node2_2024-12-05_08-09-39__a103bf29-7ac1-401d-ae07-500a5acd7707__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 31944
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31944/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31944/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.221.60/tcp/31945/p2p/16Uiu2HAm5PFaLb9v1PYXev8116ELH4iiDpYSqmuSKXwdWm8uCiJw","/ip4/172.18.221.60/tcp/31946/ws/p2p/16Uiu2HAm5PFaLb9v1PYXev8116ELH4iiDpYSqmuSKXwdWm8uCiJw"],"enrUri":"enr:-L24QKrOxGQzEBNbHPe_OAC9b746ChEWUm6l4I8cuVFIh-doLw5jqzBtzzD1t_dyxobHh31P25aqWMJjR55xSNAXHXQCgmlkgnY0gmlwhKwS3TyKbXVsdGlhZGRyc5YACASsEt08BnzJAAoErBLdPAZ8yt0DgnJzhQADAQAAiXNlY3AyNTZrMaECk_YdDsrotfrWO0gXmd7WlGax1ePAh2kWT4VgEpB32KyDdGNwgnzJg3VkcIJ8y4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31944/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.101.149/tcp/3093/p2p/16Uiu2HAmHYvVpR9wsZJoy3ygPbzXu33kriGhMUQzHqMSAbmnf4At"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-05_08-09-39__a103bf29-7ac1-401d-ae07-500a5acd7707__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.166.137
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['63421', '63422', '63423', '63424', '63425']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 63421:63421 -p 63422:63422 -p 63423:63423 -p 63424:63424 -p 63425:63425 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63423 --rest-port=63421 --tcp-port=63422 --discv5-udp-port=63424 --rest-address=0.0.0.0 --nat=extip:172.18.166.137 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=112a47aa4cfc794e5b1a2806bfa3ccd5ff055fa66d3aa6ad9808da9afaa84ce5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63425 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QIIGE7-2hq-EAxfn4fbn7mi9ssQtjHZFNjQvJPW6AR3fMZVo3kR4m45AuoGzWEOwp4owXI5IojDWyrhXrhnBk5QCgmlkgnY0gmlwhKwSZZWKbXVsdGlhZGRyc5YACASsEmWVBgwVAAoErBJllQYMFt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDSLyX3Y2l-RnCjXprTLjBg7yf881o5RS05wprGB5JMumDdGNwggwVg3VkcIIMF4V3YWt1Mgk --lightpushnode=/ip4/172.18.101.149/tcp/3093/p2p/16Uiu2HAmHYvVpR9wsZJoy3ygPbzXu33kriGhMUQzHqMSAbmnf4At --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.166.137 waku ee5417dea79df32b139327da4caf78f9f09cc449c8fbb634c08e7f6abc6c20de
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ee5417dea79d. Setting up logs at ./log/docker/lightpush_node1_2024-12-05_08-09-39__a103bf29-7ac1-401d-ae07-500a5acd7707__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 63421
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63421/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63421/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.166.137/tcp/63422/p2p/16Uiu2HAmL73XqToYAYkHJGGUtSNtMPhSouRs53DNmTb7vuGvx1cs","/ip4/172.18.166.137/tcp/63423/ws/p2p/16Uiu2HAmL73XqToYAYkHJGGUtSNtMPhSouRs53DNmTb7vuGvx1cs"],"enrUri":"enr:-L24QAZoSwcOyXVurtcH0BtwK_40iH6VmBtp1gE_c0INpF6UQzufhdGTnU6_AoavF0ndXmcVZlkh1cXoF3xD9v-IPqoCgmlkgnY0gmlwhKwSpomKbXVsdGlhZGRyc5YACASsEqaJBve-AAoErBKmiQb3v90DgnJzhQADAQAAiXNlY3AyNTZrMaEDbq6B2hXcpqvfSZOm8n3y0IsjrbZZu4VLoyBgKm7IouiDdGNwgve-g3VkcIL3wIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63421/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.101.149/tcp/3093/p2p/16Uiu2HAmHYvVpR9wsZJoy3ygPbzXu33kriGhMUQzHqMSAbmnf4At"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63421/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.221.60/tcp/31945/p2p/16Uiu2HAm5PFaLb9v1PYXev8116ELH4iiDpYSqmuSKXwdWm8uCiJw"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3092/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31944/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63421/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733386185412664320}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63421/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63421/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733386185421234944}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63421/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63421/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733386185426147840}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63421/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63421/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733386185430622720}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63421/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2c20cd3616de
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 60e99ed4c140
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2c20cd3616de. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ee5417dea79d
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 60e99ed4c140. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.