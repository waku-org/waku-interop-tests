[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush with id: 2024-12-05_07-57-43__eb27d5a2-df1b-495f-8739-c03c4d276dd1
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-05_07-57-43__eb27d5a2-df1b-495f-8739-c03c4d276dd1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.235.188
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['62452', '62453', '62454', '62455', '62456']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 62452:62452 -p 62453:62453 -p 62454:62454 -p 62455:62455 -p 62456:62456 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62454 --rest-port=62452 --tcp-port=62453 --discv5-udp-port=62455 --rest-address=0.0.0.0 --nat=extip:172.18.235.188 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cd12a5a8c383b1dace8cf6cf103b097cdaa147b54a48c7c28fc1bbb3d2df56fc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62456 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.235.188 waku cbb96eb71b63742e0f4659b0841ed20ca2ae1761d3316ab8c97a89371855e64d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID cbb96eb71b63. Setting up logs at ./log/docker/node1_2024-12-05_07-57-43__eb27d5a2-df1b-495f-8739-c03c4d276dd1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 62452
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b51c44102d27. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62452/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62452/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.235.188/tcp/62453/p2p/16Uiu2HAm2Q9TzFyxqjvFB3Nagk8NgBE5Bxgc1rWkuiWmw8snkuVp","/ip4/172.18.235.188/tcp/62454/ws/p2p/16Uiu2HAm2Q9TzFyxqjvFB3Nagk8NgBE5Bxgc1rWkuiWmw8snkuVp"],"enrUri":"enr:-L24QE6hZFQpPQGPzCqSa01OINMxDcJdK6tNwC9KAVhHkKjZaveyPwNXgJbB4yukj51zxvxBPHOSV1cUnfW0aWoVFZkCgmlkgnY0gmlwhKwS67yKbXVsdGlhZGRyc5YACASsEuu8BvP1AAoErBLrvAbz9t0DgnJzhQADAQAAiXNlY3AyNTZrMaECZ525uzCaK-HXm7LRFpbgaiVjcFL58yjqvpvnXxnZkF-DdGNwgvP1g3VkcILz94V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-05_07-57-43__eb27d5a2-df1b-495f-8739-c03c4d276dd1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.191.177
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['22986', '22987', '22988', '22989', '22990']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 22986:22986 -p 22987:22987 -p 22988:22988 -p 22989:22989 -p 22990:22990 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22988 --rest-port=22986 --tcp-port=22987 --discv5-udp-port=22989 --rest-address=0.0.0.0 --nat=extip:172.18.191.177 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c82c0d5952ea29836b652caee3a0eabf7bae8d74aeb078f750bc2cee1fbfe4da --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22990 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QE6hZFQpPQGPzCqSa01OINMxDcJdK6tNwC9KAVhHkKjZaveyPwNXgJbB4yukj51zxvxBPHOSV1cUnfW0aWoVFZkCgmlkgnY0gmlwhKwS67yKbXVsdGlhZGRyc5YACASsEuu8BvP1AAoErBLrvAbz9t0DgnJzhQADAQAAiXNlY3AyNTZrMaECZ525uzCaK-HXm7LRFpbgaiVjcFL58yjqvpvnXxnZkF-DdGNwgvP1g3VkcILz94V3YWt1Mgk
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.191.177 waku 4e7db132c22831e4cf4ece83856dc84cc6fc8f93b8e2d17ffbc3b7d06d540bfb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4e7db132c228. Setting up logs at ./log/docker/node1_2024-12-05_07-57-43__eb27d5a2-df1b-495f-8739-c03c4d276dd1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 22986
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22986/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22986/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.191.177/tcp/22987/p2p/16Uiu2HAmGgbuRb1scfE35VL868XZas7kY6M3VkqB7YyhKydLofvD","/ip4/172.18.191.177/tcp/22988/ws/p2p/16Uiu2HAmGgbuRb1scfE35VL868XZas7kY6M3VkqB7YyhKydLofvD"],"enrUri":"enr:-L24QKLq4qjhGNlUjS0qdhor1KvD4-1My58gGH4uDgg50KJiN0e_B6Lx2MoxX0Z2WjBS16aCwjWWbbUbcGoiWC8B-40CgmlkgnY0gmlwhKwSv7GKbXVsdGlhZGRyc5YACASsEr-xBlnLAAoErBK_sQZZzN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDO9iHlEC9NwdHiqRr_1-IkWsGK7qhLfKuKf1UrPHwtEaDdGNwglnLg3VkcIJZzYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-05_07-57-43__eb27d5a2-df1b-495f-8739-c03c4d276dd1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.139.26
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['31875', '31876', '31877', '31878', '31879']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 31875:31875 -p 31876:31876 -p 31877:31877 -p 31878:31878 -p 31879:31879 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31877 --rest-port=31875 --tcp-port=31876 --discv5-udp-port=31878 --rest-address=0.0.0.0 --nat=extip:172.18.139.26 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b7acd259fafddce3baed20dbc8dd6202baf39761799d75aec4f68eeea63cc05a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31879 --metrics-logging=true --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QE6hZFQpPQGPzCqSa01OINMxDcJdK6tNwC9KAVhHkKjZaveyPwNXgJbB4yukj51zxvxBPHOSV1cUnfW0aWoVFZkCgmlkgnY0gmlwhKwS67yKbXVsdGlhZGRyc5YACASsEuu8BvP1AAoErBLrvAbz9t0DgnJzhQADAQAAiXNlY3AyNTZrMaECZ525uzCaK-HXm7LRFpbgaiVjcFL58yjqvpvnXxnZkF-DdGNwgvP1g3VkcILz94V3YWt1Mgk --lightpushnode=/ip4/172.18.235.188/tcp/62453/p2p/16Uiu2HAm2Q9TzFyxqjvFB3Nagk8NgBE5Bxgc1rWkuiWmw8snkuVp
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.139.26 waku 47f4cb54e0e589b99ced10ebd70edfb5d44a95e42e229588c1efa4e9f06e3a60
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 47f4cb54e0e5. Setting up logs at ./log/docker/node1_2024-12-05_07-57-43__eb27d5a2-df1b-495f-8739-c03c4d276dd1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 31875
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31875/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31875/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.139.26/tcp/31876/p2p/16Uiu2HAmJP7tfiq47dDimdPcGtXpo1UrZNeafr4jrmhhBbJh6aqP","/ip4/172.18.139.26/tcp/31877/ws/p2p/16Uiu2HAmJP7tfiq47dDimdPcGtXpo1UrZNeafr4jrmhhBbJh6aqP"],"enrUri":"enr:-L24QDfR8oQU793l8EagthhgvXqJftJtYIc81rGy7tceGM1DUxw1kdtVO3Ur1TSqE26QtSJ3Jdlskv9binLKpnEWxfYCgmlkgnY0gmlwhKwSixqKbXVsdGlhZGRyc5YACASsEosaBnyEAAoErBKLGgZ8hd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVRVa8kivbbaRfXAY7ai6ZO71FDpZCRd1k_vk709ixwKDdGNwgnyEg3VkcIJ8hoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62452/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22986/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31875/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1733385468172632832}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62452/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1733385468172632832,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22986/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1733385468172632832,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id cbb96eb71b63
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4e7db132c228
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container cbb96eb71b63. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 47f4cb54e0e5
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4e7db132c228. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.