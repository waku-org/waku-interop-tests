[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_message_relayed_while_store_node_is_paused with id: 2024-12-05_08-29-35__5ab020fc-6e25-481f-b51d-a5c19a72160d
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-12-05_08-29-35__5ab020fc-6e25-481f-b51d-a5c19a72160d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.66.83
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['55602', '55603', '55604', '55605', '55606']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 55602:55602 -p 55603:55603 -p 55604:55604 -p 55605:55605 -p 55606:55606 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55604 --rest-port=55602 --tcp-port=55603 --discv5-udp-port=55605 --rest-address=0.0.0.0 --nat=extip:172.18.66.83 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e2bdada2e0bf8d33aead7eeaceddc1baedfe5c14abb1b883cfff2e7e116a84ab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55606 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.66.83 waku ac5d84041870680225a427285451097358c01d013a7c4ace4a4aaf59f5b64ddb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ac5d84041870. Setting up logs at ./log/docker/publishing_node1_2024-12-05_08-29-35__5ab020fc-6e25-481f-b51d-a5c19a72160d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 55602
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3c03e06987aa. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55602/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55602/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.66.83/tcp/55603/p2p/16Uiu2HAmM9YfQapwsbbVzZNSPpRGaEbNrrpciFwvsYETC5Uneb2t","/ip4/172.18.66.83/tcp/55604/ws/p2p/16Uiu2HAmM9YfQapwsbbVzZNSPpRGaEbNrrpciFwvsYETC5Uneb2t"],"enrUri":"enr:-L24QBXsfYtO7GjX1pZ2N7ajJzzf0Wz3YkVYqmUO4v4qTi-kas_Uu6O_Pb50IjJSSMVnI9U61Zo4CiKCu4ZmQPtcj3YCgmlkgnY0gmlwhKwSQlOKbXVsdGlhZGRyc5YACASsEkJTBtkzAAoErBJCUwbZNN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDfi5LNSg8Ymp41fNSSkcuZ3_G-uD2HsGmpHcfR_IbLy2DdGNwgtkzg3VkcILZNYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-12-05_08-29-35__5ab020fc-6e25-481f-b51d-a5c19a72160d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.168.140
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['38212', '38213', '38214', '38215', '38216']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 38212:38212 -p 38213:38213 -p 38214:38214 -p 38215:38215 -p 38216:38216 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38214 --rest-port=38212 --tcp-port=38213 --discv5-udp-port=38215 --rest-address=0.0.0.0 --nat=extip:172.18.168.140 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=664e38ef1f2acdb3fdb1a2eba8b90bf6b9e216a14e0cfcc30602bfa5838d4d6b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38216 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QBXsfYtO7GjX1pZ2N7ajJzzf0Wz3YkVYqmUO4v4qTi-kas_Uu6O_Pb50IjJSSMVnI9U61Zo4CiKCu4ZmQPtcj3YCgmlkgnY0gmlwhKwSQlOKbXVsdGlhZGRyc5YACASsEkJTBtkzAAoErBJCUwbZNN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDfi5LNSg8Ymp41fNSSkcuZ3_G-uD2HsGmpHcfR_IbLy2DdGNwgtkzg3VkcILZNYV3YWt1MgM --storenode=/ip4/172.18.66.83/tcp/55603/p2p/16Uiu2HAmM9YfQapwsbbVzZNSPpRGaEbNrrpciFwvsYETC5Uneb2t --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.168.140 waku e691e192dcf4e53ea0670a1449fae52f1d33e70a8abe29716b633dd8198f8f37
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e691e192dcf4. Setting up logs at ./log/docker/store_node1_2024-12-05_08-29-35__5ab020fc-6e25-481f-b51d-a5c19a72160d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 38212
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38212/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38212/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.168.140/tcp/38213/p2p/16Uiu2HAm6CYjwCvieWZA9G5kmpZ3JGQu2fsUDFeBGpPXaEzY1VWN","/ip4/172.18.168.140/tcp/38214/ws/p2p/16Uiu2HAm6CYjwCvieWZA9G5kmpZ3JGQu2fsUDFeBGpPXaEzY1VWN"],"enrUri":"enr:-L24QFTW0Y8tqyet3RtrBF3lmTImGNu2V4OYNlmpZuXGZ1HlTMc6x3HXM772N3EEJlDL2rtzmUjtwCpGr9Rk3BnnNz4CgmlkgnY0gmlwhKwSqIyKbXVsdGlhZGRyc5YACASsEqiMBpVFAAoErBKojAaVRt0DgnJzhQADAQAAiXNlY3AyNTZrMaECoBPSEc0qxFqSC7_a5JjEHo9mvw8Z90ZJUCCK2omuVeeDdGNwgpVFg3VkcIKVR4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38212/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.66.83/tcp/55603/p2p/16Uiu2HAmM9YfQapwsbbVzZNSPpRGaEbNrrpciFwvsYETC5Uneb2t"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55602/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38212/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55602/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55602/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"yi9eiK7z+ORseVwrqJsn+LT8X0FCfKOBl6h3goVtcdA="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38212/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"yi9eiK7z+ORseVwrqJsn+LT8X0FCfKOBl6h3goVtcdA="}]}'
[35mDEBUG   [0m src.node.waku_node:waku_node.py:254 Pausing container with id e691e192dcf4
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55602/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.node.waku_node:waku_node.py:259 Unpause container with id e691e192dcf4
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38212/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38212/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.168.140/tcp/38213/p2p/16Uiu2HAm6CYjwCvieWZA9G5kmpZ3JGQu2fsUDFeBGpPXaEzY1VWN","/ip4/172.18.168.140/tcp/38214/ws/p2p/16Uiu2HAm6CYjwCvieWZA9G5kmpZ3JGQu2fsUDFeBGpPXaEzY1VWN"],"enrUri":"enr:-L24QFTW0Y8tqyet3RtrBF3lmTImGNu2V4OYNlmpZuXGZ1HlTMc6x3HXM772N3EEJlDL2rtzmUjtwCpGr9Rk3BnnNz4CgmlkgnY0gmlwhKwSqIyKbXVsdGlhZGRyc5YACASsEqiMBpVFAAoErBKojAaVRt0DgnJzhQADAQAAiXNlY3AyNTZrMaECoBPSEc0qxFqSC7_a5JjEHo9mvw8Z90ZJUCCK2omuVeeDdGNwgpVFg3VkcIKVR4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55602/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"yi9eiK7z+ORseVwrqJsn+LT8X0FCfKOBl6h3goVtcdA="},{"messageHash":"40ur6h859awa47yO/Y+o6ZBgaB0W7u2AFqGm5KUYnb4="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38212/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"yi9eiK7z+ORseVwrqJsn+LT8X0FCfKOBl6h3goVtcdA="},{"messageHash":"40ur6h859awa47yO/Y+o6ZBgaB0W7u2AFqGm5KUYnb4="}]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55602/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"yi9eiK7z+ORseVwrqJsn+LT8X0FCfKOBl6h3goVtcdA="},{"messageHash":"40ur6h859awa47yO/Y+o6ZBgaB0W7u2AFqGm5KUYnb4="}]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38212/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"yi9eiK7z+ORseVwrqJsn+LT8X0FCfKOBl6h3goVtcdA="},{"messageHash":"40ur6h859awa47yO/Y+o6ZBgaB0W7u2AFqGm5KUYnb4="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ac5d84041870
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e691e192dcf4
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ac5d84041870. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.