[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_restarts with id: 2024-06-24_04-25-45__ae78b4cf-eb6a-4fb6-ba11-3a1ad9644e8d
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:27 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:65 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-06-24_04-25-45__ae78b4cf-eb6a-4fb6-ba11-3a1ad9644e8d__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:69 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.63.225
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['39021', '39022', '39023', '39024', '39025']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:410 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:139 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:141 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 39021:39021 -p 39022:39022 -p 39023:39023 -p 39024:39024 -p 39025:39025 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39023 --rest-port=39021 --tcp-port=39022 --discv5-udp-port=39024 --rest-address=0.0.0.0 --nat=extip:172.18.63.225 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39025 --metrics-logging=true --store=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.63.225 waku 1f136584d222a131d27c8f69554f0265405b0bdfc08d245671000610593491a7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 1f136584d222. Setting up logs at ./log/docker/publishing_node1_2024-06-24_04-25-45__ae78b4cf-eb6a-4fb6-ba11-3a1ad9644e8d__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:153 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 39021
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39021/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:256 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39021/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.63.225/tcp/39022/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.63.225/tcp/39023/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QDW_9XWlXB3FEJ68uRrlMhkDeoEjyO-ga0d8UpLLk_2bB-sx1usgoe0CjlM0jH5S7EWLbf_Bw9BkGr806xJuiMwBgmlkgnY0gmlwhKwSP-GKbXVsdGlhZGRyc4wACgSsEj_hBphv3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCmG6DdWRwgphwhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:261 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:65 WakuNode instance initialized with log path ./log/docker/store_node1_2024-06-24_04-25-45__ae78b4cf-eb6a-4fb6-ba11-3a1ad9644e8d__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:69 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.156.242
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['11190', '11191', '11192', '11193', '11194']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:410 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:139 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:141 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 11190:11190 -p 11191:11191 -p 11192:11192 -p 11193:11193 -p 11194:11194 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11192 --rest-port=11190 --tcp-port=11191 --discv5-udp-port=11193 --rest-address=0.0.0.0 --nat=extip:172.18.156.242 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11194 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QDW_9XWlXB3FEJ68uRrlMhkDeoEjyO-ga0d8UpLLk_2bB-sx1usgoe0CjlM0jH5S7EWLbf_Bw9BkGr806xJuiMwBgmlkgnY0gmlwhKwSP-GKbXVsdGlhZGRyc4wACgSsEj_hBphv3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCmG6DdWRwgphwhXdha3UyAw --storenode=/ip4/172.18.63.225/tcp/39022/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.156.242 waku 7c3cbddf9fb743390985ca83ddf111fc4fb99a60866f63373d257ef987f5fcd5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 7c3cbddf9fb7. Setting up logs at ./log/docker/store_node1_2024-06-24_04-25-45__ae78b4cf-eb6a-4fb6-ba11-3a1ad9644e8d__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:153 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 11190
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11190/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:256 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11190/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.156.242/tcp/11191/p2p/16Uiu2HAm7sYhhq135AePAv7RQNXvQobG35vQR3eLiY6pABfMyg3n","/ip4/172.18.156.242/tcp/11192/ws/p2p/16Uiu2HAm7sYhhq135AePAv7RQNXvQobG35vQR3eLiY6pABfMyg3n"],"enrUri":"enr:-LO4QO_U6aukExNl3u_KWigm2-k-oUnihDkIgoaIg3vFASiVSKfq5u8VyiWJ-49HNXDJHZ6wYqa9KjaJaGerrtXO-q8BgmlkgnY0gmlwhKwSnPKKbXVsdGlhZGRyc4wACgSsEpzyBiu43QOCcnOFAAABAACJc2VjcDI1NmsxoQK47R2WhW8Z8XkEu2y1c2AOyr-wTHu9BP7C-_9gsle23YN0Y3CCK7eDdWRwgiu5hXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:261 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11190/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.63.225/tcp/39022/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39021/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11190/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:127 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39021/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.01 seconds
[35mDEBUG   [0m src.steps.store:store.py:209 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39021/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"5y4jkV9ElyL4a7yWJE/aWf5n+1HfHKXTBa4yftGN9Fw="}]}'
[35mDEBUG   [0m src.steps.store:store.py:209 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11190/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"5y4jkV9ElyL4a7yWJE/aWf5n+1HfHKXTBa4yftGN9Fw="}]}'
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Restarting container with id 7c3cbddf9fb7
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11190/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11190/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:256 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11190/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.156.242/tcp/11191/p2p/16Uiu2HAm2pxagMdoSLtiicq2T6PbqBochbvoEJKwasdcDjN1WDJp","/ip4/172.18.156.242/tcp/11192/ws/p2p/16Uiu2HAm2pxagMdoSLtiicq2T6PbqBochbvoEJKwasdcDjN1WDJp"],"enrUri":"enr:-LO4QGBwhzkzmEXxjraxWUbxYzctPvZOT6_PZjy_wPau8g4eVUNYB_MJUY2WGTPwdIayCF0vxVRTfzfFGrBPyHQJ1SQBgmlkgnY0gmlwhKwSnPKKbXVsdGlhZGRyc4wACgSsEpzyBiu43QOCcnOFAAABAACJc2VjcDI1NmsxoQJt-PA-CX3qggNEp7AQtaNkFzedgfTCiCsuw9_jCyVd4YN0Y3CCK7eDdWRwgiu5hXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:261 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11190/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:127 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39021/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.01 seconds
[35mDEBUG   [0m src.steps.store:store.py:209 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39021/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"5y4jkV9ElyL4a7yWJE/aWf5n+1HfHKXTBa4yftGN9Fw="},{"messageHash":"85YVGOgAu9MKc+S1OJUk1KX2tNR3DxaXbsw9pTDXWnk="}]}'
[35mDEBUG   [0m src.steps.store:store.py:209 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11190/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"5y4jkV9ElyL4a7yWJE/aWf5n+1HfHKXTBa4yftGN9Fw="},{"messageHash":"85YVGOgAu9MKc+S1OJUk1KX2tNR3DxaXbsw9pTDXWnk="}]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39021/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"5y4jkV9ElyL4a7yWJE/aWf5n+1HfHKXTBa4yftGN9Fw="},{"messageHash":"85YVGOgAu9MKc+S1OJUk1KX2tNR3DxaXbsw9pTDXWnk="}]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11190/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"5y4jkV9ElyL4a7yWJE/aWf5n+1HfHKXTBa4yftGN9Fw="},{"messageHash":"85YVGOgAu9MKc+S1OJUk1KX2tNR3DxaXbsw9pTDXWnk="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:200 Stopping container with id 1f136584d222
[35mDEBUG   [0m src.node.waku_node:waku_node.py:207 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:200 Stopping container with id 7c3cbddf9fb7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:207 Container stopped.