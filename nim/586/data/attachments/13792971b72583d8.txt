[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_ephemeral with id: 2024-12-27_10-40-52__7f203fcd-6755-4536-b492-9dd3f03ed7e0
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-27_10-40-52__7f203fcd-6755-4536-b492-9dd3f03ed7e0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.8.9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['21825', '21826', '21827', '21828', '21829']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 21825:21825 -p 21826:21826 -p 21827:21827 -p 21828:21828 -p 21829:21829 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21827 --rest-port=21825 --tcp-port=21826 --discv5-udp-port=21828 --rest-address=0.0.0.0 --nat=extip:172.18.8.9 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b5a67aa2b2f1efde599ba5e7a75acbe729fa3cd5bd0ec49b6de9ec602bbb61df --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21829 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.8.9 waku 148bb4af4f100e3fa47b58bda2ed3ab56be0086136ef97180dc12be598415ada
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 148bb4af4f10. Setting up logs at ./log/docker/receiving_node1_2024-12-27_10-40-52__7f203fcd-6755-4536-b492-9dd3f03ed7e0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 21825
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f53af16c3121. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21825/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21825/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.8.9/tcp/21826/p2p/16Uiu2HAmSdgdsnjSn2H7CuVVkLqoGtYGfkKDxejn51jTthhc44qE","/ip4/172.18.8.9/tcp/21827/ws/p2p/16Uiu2HAmSdgdsnjSn2H7CuVVkLqoGtYGfkKDxejn51jTthhc44qE"],"enrUri":"enr:-L24QJbPE9_fyQcTk5k3baQ6Ex4v7k5MWJ_l6DRcvYfuh5_qD92o9nbB0--Rm0Nx4TlIUVyD4nr4cBriQ4Wukmmi2FQCgmlkgnY0gmlwhKwSCAmKbXVsdGlhZGRyc5YACASsEggJBlVCAAoErBIICQZVQ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDz64BwNrmaKyrenrAzhntHKL-RDfxcT-Hde9ZD-fc6oGDdGNwglVCg3VkcIJVRIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-27_10-40-52__7f203fcd-6755-4536-b492-9dd3f03ed7e0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.239.186
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['60365', '60366', '60367', '60368', '60369']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 60365:60365 -p 60366:60366 -p 60367:60367 -p 60368:60368 -p 60369:60369 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60367 --rest-port=60365 --tcp-port=60366 --discv5-udp-port=60368 --rest-address=0.0.0.0 --nat=extip:172.18.239.186 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aa19c4c8e4eac70ac7cd19856e2ccf08bd12d7c1d74b61b4e75b27504805d6aa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60369 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.239.186 waku 4b28b383c55051664fed302ae5b1ce4eec90774665fdb30248cf22b0c64143f9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4b28b383c550. Setting up logs at ./log/docker/receiving_node2_2024-12-27_10-40-52__7f203fcd-6755-4536-b492-9dd3f03ed7e0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 60365
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60365/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60365/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.239.186/tcp/60366/p2p/16Uiu2HAmHDvG1aagM7mWxi6k4yEBimMA2FmdFcStPTnAWVsqt2du","/ip4/172.18.239.186/tcp/60367/ws/p2p/16Uiu2HAmHDvG1aagM7mWxi6k4yEBimMA2FmdFcStPTnAWVsqt2du"],"enrUri":"enr:-L24QEmNs3EKoa9zsoq3h_fXUOpC7EZt36xCPfE-e36xv7EtVeSQqqDK1Mvo_l6JURYmPqWejYH0YJ5xZy8pxjcW_rcCgmlkgnY0gmlwhKwS77qKbXVsdGlhZGRyc5YACASsEu-6BuvOAAoErBLvugbrz90DgnJzhQADAQAAiXNlY3AyNTZrMaEDQ95J5qIqvxbS-SL6rvK1tqGPxTsmnud29tbd3oNkGjiDdGNwguvOg3VkcILr0IV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60365/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.8.9/tcp/21826/p2p/16Uiu2HAmSdgdsnjSn2H7CuVVkLqoGtYGfkKDxejn51jTthhc44qE"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-27_10-40-52__7f203fcd-6755-4536-b492-9dd3f03ed7e0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.24.126
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['36756', '36757', '36758', '36759', '36760']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 36756:36756 -p 36757:36757 -p 36758:36758 -p 36759:36759 -p 36760:36760 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36758 --rest-port=36756 --tcp-port=36757 --discv5-udp-port=36759 --rest-address=0.0.0.0 --nat=extip:172.18.24.126 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7ef74b8ba3bbadd8bca8aaf1cbbdb692b03a0b6aef7a4e6d2f80630eaca3a61c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36760 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJbPE9_fyQcTk5k3baQ6Ex4v7k5MWJ_l6DRcvYfuh5_qD92o9nbB0--Rm0Nx4TlIUVyD4nr4cBriQ4Wukmmi2FQCgmlkgnY0gmlwhKwSCAmKbXVsdGlhZGRyc5YACASsEggJBlVCAAoErBIICQZVQ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDz64BwNrmaKyrenrAzhntHKL-RDfxcT-Hde9ZD-fc6oGDdGNwglVCg3VkcIJVRIV3YWt1Mgk --lightpushnode=/ip4/172.18.8.9/tcp/21826/p2p/16Uiu2HAmSdgdsnjSn2H7CuVVkLqoGtYGfkKDxejn51jTthhc44qE --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.24.126 waku 605c89147266447877a459955334fed803158685ac0f4734a7787ede780369ed
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 605c89147266. Setting up logs at ./log/docker/lightpush_node1_2024-12-27_10-40-52__7f203fcd-6755-4536-b492-9dd3f03ed7e0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 36756
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36756/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36756/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.24.126/tcp/36757/p2p/16Uiu2HAm3hbHeJe54Uvgh5p71HfDP3fPE3MUnMH7kECZw48y2KYf","/ip4/172.18.24.126/tcp/36758/ws/p2p/16Uiu2HAm3hbHeJe54Uvgh5p71HfDP3fPE3MUnMH7kECZw48y2KYf"],"enrUri":"enr:-L24QNEi_EsPLfiV-W6iTdsTq2Vl6C0O-Rd6vEKzjcxTpqkpQTCIpGGsZ8EFTa1QlyQQjvJz6OZvHoW6X4aK9qiFthwCgmlkgnY0gmlwhKwSGH6KbXVsdGlhZGRyc5YACASsEhh-Bo-VAAoErBIYfgaPlt0DgnJzhQADAQAAiXNlY3AyNTZrMaECevF7mtBBiR0pPsTdRc_NJ11KiMAB2zlOZtkj4uw79HyDdGNwgo-Vg3VkcIKPl4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36756/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.8.9/tcp/21826/p2p/16Uiu2HAmSdgdsnjSn2H7CuVVkLqoGtYGfkKDxejn51jTthhc44qE"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36756/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.239.186/tcp/60366/p2p/16Uiu2HAmHDvG1aagM7mWxi6k4yEBimMA2FmdFcStPTnAWVsqt2du"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21825/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60365/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:214 Running test with Ephemeral True
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36756/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1735296056444079104, "ephemeral": true}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21825/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735296056444079104,"ephemeral":true}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60365/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735296056444079104,"ephemeral":true}]'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:214 Running test with Ephemeral False
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36756/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1735296056558327552, "ephemeral": false}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21825/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735296056558327552,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60365/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735296056558327552,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 148bb4af4f10
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4b28b383c550
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 148bb4af4f10. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 605c89147266
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4b28b383c550. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.