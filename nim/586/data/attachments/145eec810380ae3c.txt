[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_receiving_nodes__relay_node1_forwards_lightpushed_message_to_relay_node2 with id: 2024-12-27_10-40-06__11e84086-6a96-4990-903c-f53b6c7729f9
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-27_10-40-06__11e84086-6a96-4990-903c-f53b6c7729f9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.203.44
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['18972', '18973', '18974', '18975', '18976']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 18972:18972 -p 18973:18973 -p 18974:18974 -p 18975:18975 -p 18976:18976 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18974 --rest-port=18972 --tcp-port=18973 --discv5-udp-port=18975 --rest-address=0.0.0.0 --nat=extip:172.18.203.44 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6fdc72da6fecedb8a10b4d22dd2eb48665c31584a89a7fb4cbb012b9da3928ce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18976 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.203.44 waku 0c554a115c48a702c0d26654ccbc576a8c65c7adfa8d03c1bc77019acf871b70
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0c554a115c48. Setting up logs at ./log/docker/receiving_node1_2024-12-27_10-40-06__11e84086-6a96-4990-903c-f53b6c7729f9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 18972
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 69c28a548f5c. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18972/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18972/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.203.44/tcp/18973/p2p/16Uiu2HAmJuXGmMKctuH7R5a1QWWdhfF3LiPog8mqg4j9JopAAmbo","/ip4/172.18.203.44/tcp/18974/ws/p2p/16Uiu2HAmJuXGmMKctuH7R5a1QWWdhfF3LiPog8mqg4j9JopAAmbo"],"enrUri":"enr:-L24QBAPrKyOVDIsn25cxqfiwfCp8IceMC1v8xG11EwKmhP9RiwesC0B4khJ01B-XqqiDeLQk7yZbsr5ZQN51uZJjAQCgmlkgnY0gmlwhKwSyyyKbXVsdGlhZGRyc5YACASsEsssBkodAAoErBLLLAZKHt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDXN83bCsWIJIw95yb3vaFDCoz1JYZkGhyKLPmOEY5BWqDdGNwgkodg3VkcIJKH4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-27_10-40-06__11e84086-6a96-4990-903c-f53b6c7729f9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.121.130
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['65210', '65211', '65212', '65213', '65214']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 65210:65210 -p 65211:65211 -p 65212:65212 -p 65213:65213 -p 65214:65214 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65212 --rest-port=65210 --tcp-port=65211 --discv5-udp-port=65213 --rest-address=0.0.0.0 --nat=extip:172.18.121.130 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b964d5aafdb5033dbd5a0b7db4566ffeb2aba7efd6f91905dfd471cc3fef66ec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65214 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.121.130 waku a8264c8445bdb6d7b912015bb61abba634612536fdb4c8b1d193067c0ec543f9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a8264c8445bd. Setting up logs at ./log/docker/receiving_node2_2024-12-27_10-40-06__11e84086-6a96-4990-903c-f53b6c7729f9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 65210
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65210/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65210/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.121.130/tcp/65211/p2p/16Uiu2HAmRKqbTxc9YWnAuBASmjHAxRyZVRjfSEo9Qo1fdJjgQkzY","/ip4/172.18.121.130/tcp/65212/ws/p2p/16Uiu2HAmRKqbTxc9YWnAuBASmjHAxRyZVRjfSEo9Qo1fdJjgQkzY"],"enrUri":"enr:-L24QC8Vzrc46rKEgfulMUDp7hubQDipfh6Pc7w6jLS2DRw9ErP1CJg0WlN8pEI8xgaxGd8cNM-2zpgvqA7TAJ4tvCICgmlkgnY0gmlwhKwSeYKKbXVsdGlhZGRyc5YACASsEnmCBv67AAoErBJ5ggb-vN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDvD_-pCfZHSTN42O_yhCUvfD7ZgXK8vnHqO1rUgwpX52DdGNwgv67g3VkcIL-vYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65210/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.203.44/tcp/18973/p2p/16Uiu2HAmJuXGmMKctuH7R5a1QWWdhfF3LiPog8mqg4j9JopAAmbo"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-27_10-40-06__11e84086-6a96-4990-903c-f53b6c7729f9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.91.81
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['21233', '21234', '21235', '21236', '21237']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 21233:21233 -p 21234:21234 -p 21235:21235 -p 21236:21236 -p 21237:21237 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21235 --rest-port=21233 --tcp-port=21234 --discv5-udp-port=21236 --rest-address=0.0.0.0 --nat=extip:172.18.91.81 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=52dac9b5ab012c1e0de17baa87b2b5e96dfe61bf87344ddfe1b19ddd8a4a8fde --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21237 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QBAPrKyOVDIsn25cxqfiwfCp8IceMC1v8xG11EwKmhP9RiwesC0B4khJ01B-XqqiDeLQk7yZbsr5ZQN51uZJjAQCgmlkgnY0gmlwhKwSyyyKbXVsdGlhZGRyc5YACASsEsssBkodAAoErBLLLAZKHt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDXN83bCsWIJIw95yb3vaFDCoz1JYZkGhyKLPmOEY5BWqDdGNwgkodg3VkcIJKH4V3YWt1Mgk --lightpushnode=/ip4/172.18.203.44/tcp/18973/p2p/16Uiu2HAmJuXGmMKctuH7R5a1QWWdhfF3LiPog8mqg4j9JopAAmbo --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.91.81 waku 467f04738b52115f6ef9c2b071c98f8644efbd408e89d6eedd26d29beba17767
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 467f04738b52. Setting up logs at ./log/docker/lightpush_node1_2024-12-27_10-40-06__11e84086-6a96-4990-903c-f53b6c7729f9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 21233
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21233/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21233/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.91.81/tcp/21234/p2p/16Uiu2HAmFvxjn6nQJPtB3eF73gkAeHEBZB6KJwuBPryyLGdSkBmn","/ip4/172.18.91.81/tcp/21235/ws/p2p/16Uiu2HAmFvxjn6nQJPtB3eF73gkAeHEBZB6KJwuBPryyLGdSkBmn"],"enrUri":"enr:-L24QA4wB2nYWDyL797KkfYe-CAlrsLkdkzvuAb_cSjNRXgONlyldw5yHK2fin11cw4GhWpoGB2jrBq98f745lJqKGYCgmlkgnY0gmlwhKwSW1GKbXVsdGlhZGRyc5YACASsEltRBlLyAAoErBJbUQZS890DgnJzhQADAQAAiXNlY3AyNTZrMaEDMKqH3c87Di95-5MM1iUwUz_tmtxHYtlqMiZ7p1NKxJWDdGNwglLyg3VkcIJS9IV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21233/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.203.44/tcp/18973/p2p/16Uiu2HAmJuXGmMKctuH7R5a1QWWdhfF3LiPog8mqg4j9JopAAmbo"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21233/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.121.130/tcp/65211/p2p/16Uiu2HAmRKqbTxc9YWnAuBASmjHAxRyZVRjfSEo9Qo1fdJjgQkzY"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18972/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65210/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21233/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1735296010513561088}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18972/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735296010513561088,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65210/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735296010513561088,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0c554a115c48
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a8264c8445bd
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0c554a115c48. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 467f04738b52
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a8264c8445bd. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.