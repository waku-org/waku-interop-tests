[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_message_relayed_while_store_node_is_stopped_without_removing with id: 2025-01-06_04-24-13__75be6b4a-541f-4d8a-b7a9-e39ebf941ee3
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-06_04-24-13__75be6b4a-541f-4d8a-b7a9-e39ebf941ee3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.30.82
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['57231', '57232', '57233', '57234', '57235']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 57231:57231 -p 57232:57232 -p 57233:57233 -p 57234:57234 -p 57235:57235 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57233 --rest-port=57231 --tcp-port=57232 --discv5-udp-port=57234 --rest-address=0.0.0.0 --nat=extip:172.18.30.82 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=80ceccac37fbadaf1cebcb7eac4d968a01710cad33b75cafecfacd6dff5dc4b2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57235 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.30.82 waku 55ecce5599098ff2912d2dc5042b69dade262ce48a0b7fbdf02a3e3460ca7803
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 55ecce559909. Setting up logs at ./log/docker/publishing_node1_2025-01-06_04-24-13__75be6b4a-541f-4d8a-b7a9-e39ebf941ee3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 57231
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 32826a23535f. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57231/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57231/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.30.82/tcp/57232/p2p/16Uiu2HAkuq1hkZuxSLeCY6JkHHwUZu82uG2Tx2Ugx4xSPT9p1dRU","/ip4/172.18.30.82/tcp/57233/ws/p2p/16Uiu2HAkuq1hkZuxSLeCY6JkHHwUZu82uG2Tx2Ugx4xSPT9p1dRU"],"enrUri":"enr:-L24QODh0eZEH8XGjG8alY_9GsAIR0rnc8Hga3JihTYnp6bnU9q9_EgWFS78H1E4aLoTVXxso-OIxLY2iO2d2ihrRpICgmlkgnY0gmlwhKwSHlKKbXVsdGlhZGRyc5YACASsEh5SBt-QAAoErBIeUgbfkd0DgnJzhQADAQAAiXNlY3AyNTZrMaECBfqo8qr4YVJDXR4YpHw82fgFue-ssvJ9Zcf8KXC9XguDdGNwgt-Qg3VkcILfkoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-06_04-24-13__75be6b4a-541f-4d8a-b7a9-e39ebf941ee3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.74.239
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['40202', '40203', '40204', '40205', '40206']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 40202:40202 -p 40203:40203 -p 40204:40204 -p 40205:40205 -p 40206:40206 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40204 --rest-port=40202 --tcp-port=40203 --discv5-udp-port=40205 --rest-address=0.0.0.0 --nat=extip:172.18.74.239 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ee819fd5852c202dbbbbca1aa4edfbe3d0c4edb7d79ecf4f8303acd463bc5e54 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40206 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QODh0eZEH8XGjG8alY_9GsAIR0rnc8Hga3JihTYnp6bnU9q9_EgWFS78H1E4aLoTVXxso-OIxLY2iO2d2ihrRpICgmlkgnY0gmlwhKwSHlKKbXVsdGlhZGRyc5YACASsEh5SBt-QAAoErBIeUgbfkd0DgnJzhQADAQAAiXNlY3AyNTZrMaECBfqo8qr4YVJDXR4YpHw82fgFue-ssvJ9Zcf8KXC9XguDdGNwgt-Qg3VkcILfkoV3YWt1MgM --storenode=/ip4/172.18.30.82/tcp/57232/p2p/16Uiu2HAkuq1hkZuxSLeCY6JkHHwUZu82uG2Tx2Ugx4xSPT9p1dRU --store=false --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.74.239 waku 85db0623d4941566e6f615f4e0fb4b3e0f7699bd43832b4b3a85144036022a40
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 85db0623d494. Setting up logs at ./log/docker/store_node1_2025-01-06_04-24-13__75be6b4a-541f-4d8a-b7a9-e39ebf941ee3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 40202
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40202/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40202/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.74.239/tcp/40203/p2p/16Uiu2HAm8igRZc6J8FNqham62hSAhEKVVCo3KcQq1zrdKmG2S6bc","/ip4/172.18.74.239/tcp/40204/ws/p2p/16Uiu2HAm8igRZc6J8FNqham62hSAhEKVVCo3KcQq1zrdKmG2S6bc"],"enrUri":"enr:-L24QEj30AbVIU8bxg2pwI3PRhP_S5DQdLITcIqDG4rtfmqQPI3V08nk51URBH_oX3STELMIvAoP5VTwgi94EZK0PLICgmlkgnY0gmlwhKwSSu-KbXVsdGlhZGRyc5YACASsEkrvBp0LAAoErBJK7wadDN0DgnJzhQADAQAAiXNlY3AyNTZrMaECxYNOYSB9LjesEToNMpj9cFzRemCsY-q4vhdILol1uuODdGNwgp0Lg3VkcIKdDYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40202/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.30.82/tcp/57232/p2p/16Uiu2HAkuq1hkZuxSLeCY6JkHHwUZu82uG2Tx2Ugx4xSPT9p1dRU"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57231/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57231/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57231/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"R/h7ZJydi6jcYkL4e4ayKIT7XXL91j6t+FUVcsPeINE="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40202/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"d01b83fa2a4a4acb8510","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"R/h7ZJydi6jcYkL4e4ayKIT7XXL91j6t+FUVcsPeINE="}]}'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57231/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40202/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40202/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40202/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.74.239/tcp/40203/p2p/16Uiu2HAm8igRZc6J8FNqham62hSAhEKVVCo3KcQq1zrdKmG2S6bc","/ip4/172.18.74.239/tcp/40204/ws/p2p/16Uiu2HAm8igRZc6J8FNqham62hSAhEKVVCo3KcQq1zrdKmG2S6bc"],"enrUri":"enr:-L24QEj30AbVIU8bxg2pwI3PRhP_S5DQdLITcIqDG4rtfmqQPI3V08nk51URBH_oX3STELMIvAoP5VTwgi94EZK0PLICgmlkgnY0gmlwhKwSSu-KbXVsdGlhZGRyc5YACASsEkrvBp0LAAoErBJK7wadDN0DgnJzhQADAQAAiXNlY3AyNTZrMaECxYNOYSB9LjesEToNMpj9cFzRemCsY-q4vhdILol1uuODdGNwgp0Lg3VkcIKdDYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57231/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"R/h7ZJydi6jcYkL4e4ayKIT7XXL91j6t+FUVcsPeINE="},{"messageHash":"MYoFSlQnHIqFZoMU3xFK0th+ntI/ruwRUn2xg+52Pxw="}]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40202/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"8e60aa003bb01ea59378","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"R/h7ZJydi6jcYkL4e4ayKIT7XXL91j6t+FUVcsPeINE="},{"messageHash":"MYoFSlQnHIqFZoMU3xFK0th+ntI/ruwRUn2xg+52Pxw="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 55ecce559909
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 85db0623d494
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 55ecce559909. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.