[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2025-01-06_04-12-42__bc70da8a-e822-4e9d-be20-c4176f15c1c6
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-06_04-12-42__bc70da8a-e822-4e9d-be20-c4176f15c1c6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.199.167
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['18904', '18905', '18906', '18907', '18908']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 18904:18904 -p 18905:18905 -p 18906:18906 -p 18907:18907 -p 18908:18908 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18906 --rest-port=18904 --tcp-port=18905 --discv5-udp-port=18907 --rest-address=0.0.0.0 --nat=extip:172.18.199.167 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ba89ff3fe630d240a284f6e92ad040207abf12b0a76e3a2b999e2bfb8be7da26 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18908 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.199.167 waku 870f501b9be5a062ecf522cdbf8a7a2cd896865c2ffb6abfc6d21b86c9b0ec7c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 870f501b9be5. Setting up logs at ./log/docker/receiving_node1_2025-01-06_04-12-42__bc70da8a-e822-4e9d-be20-c4176f15c1c6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 18904
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container af78e271277d. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18904/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18904/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.199.167/tcp/18905/p2p/16Uiu2HAm5SRM2FVEzWhHdsfy2nXSHdtTpGEFcRr54g2jnJ2qsEqS","/ip4/172.18.199.167/tcp/18906/ws/p2p/16Uiu2HAm5SRM2FVEzWhHdsfy2nXSHdtTpGEFcRr54g2jnJ2qsEqS"],"enrUri":"enr:-L24QAwn1-alcXIbvmneocYUHQDk9pUX70APzEtyQhWXWqpYcGEAjcA5DpuubPsiGpUWMd-qZ73_OLJKmhz5kE1V6BACgmlkgnY0gmlwhKwSx6eKbXVsdGlhZGRyc5YACASsEsenBknZAAoErBLHpwZJ2t0DgnJzhQADAQAAiXNlY3AyNTZrMaEClMXnQ2yfJZ3tkwTyYlXi0nCEgt_yKTdyuOPX7rSXdP2DdGNwgknZg3VkcIJJ24V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-06_04-12-42__bc70da8a-e822-4e9d-be20-c4176f15c1c6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.46.63
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['31217', '31218', '31219', '31220', '31221']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 31217:31217 -p 31218:31218 -p 31219:31219 -p 31220:31220 -p 31221:31221 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31219 --rest-port=31217 --tcp-port=31218 --discv5-udp-port=31220 --rest-address=0.0.0.0 --nat=extip:172.18.46.63 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=47ff495be712cfabceddcdc4e29dba73d22acedd15a3f7ebbed66cffb42986d8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31221 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.46.63 waku 016737d8bb6c14426a4b0589f645a00d3754e4dbbc1671d8f95ac76261b56011
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 016737d8bb6c. Setting up logs at ./log/docker/receiving_node2_2025-01-06_04-12-42__bc70da8a-e822-4e9d-be20-c4176f15c1c6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 31217
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31217/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31217/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.46.63/tcp/31218/p2p/16Uiu2HAmTKYKzuc8txVLoknEGYiEp1EtQzY1ovX6Edgc3F6D7tyx","/ip4/172.18.46.63/tcp/31219/ws/p2p/16Uiu2HAmTKYKzuc8txVLoknEGYiEp1EtQzY1ovX6Edgc3F6D7tyx"],"enrUri":"enr:-L24QEZ5hZYz31tOWf2kh3zEKapejpAA5ReuLe06lmk6o0EAZZfjygMd_wfHLfo-pHyxVoiaOkFl4z0mFS4Qk6vRKL8CgmlkgnY0gmlwhKwSLj-KbXVsdGlhZGRyc5YACASsEi4_BnnyAAoErBIuPwZ5890DgnJzhQADAQAAiXNlY3AyNTZrMaED2ePYVl0HKc1xo-_cy0aLxp6ybprJPKSB01eMcxZ7HmODdGNwgnnyg3VkcIJ59IV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31217/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.199.167/tcp/18905/p2p/16Uiu2HAm5SRM2FVEzWhHdsfy2nXSHdtTpGEFcRr54g2jnJ2qsEqS"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-06_04-12-42__bc70da8a-e822-4e9d-be20-c4176f15c1c6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.139.247
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['61371', '61372', '61373', '61374', '61375']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 61371:61371 -p 61372:61372 -p 61373:61373 -p 61374:61374 -p 61375:61375 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61373 --rest-port=61371 --tcp-port=61372 --discv5-udp-port=61374 --rest-address=0.0.0.0 --nat=extip:172.18.139.247 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=13ee19537bfc2ad7e66be4ba6bcbf96bb7da2bf8e2d5e2305dbd53d54ce94cec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61375 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QAwn1-alcXIbvmneocYUHQDk9pUX70APzEtyQhWXWqpYcGEAjcA5DpuubPsiGpUWMd-qZ73_OLJKmhz5kE1V6BACgmlkgnY0gmlwhKwSx6eKbXVsdGlhZGRyc5YACASsEsenBknZAAoErBLHpwZJ2t0DgnJzhQADAQAAiXNlY3AyNTZrMaEClMXnQ2yfJZ3tkwTyYlXi0nCEgt_yKTdyuOPX7rSXdP2DdGNwgknZg3VkcIJJ24V3YWt1Mgk --lightpushnode=/ip4/172.18.199.167/tcp/18905/p2p/16Uiu2HAm5SRM2FVEzWhHdsfy2nXSHdtTpGEFcRr54g2jnJ2qsEqS --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.139.247 waku fece5f4d45c4238d4e7125379364acf911715d0aea4336eeca8ea852ddf3fe2c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fece5f4d45c4. Setting up logs at ./log/docker/lightpush_node1_2025-01-06_04-12-42__bc70da8a-e822-4e9d-be20-c4176f15c1c6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 61371
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61371/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61371/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.139.247/tcp/61372/p2p/16Uiu2HAmFPw8TVLAf6DMCiVCoTSMkyxGB9phPaSuLNBrRdDnxxvB","/ip4/172.18.139.247/tcp/61373/ws/p2p/16Uiu2HAmFPw8TVLAf6DMCiVCoTSMkyxGB9phPaSuLNBrRdDnxxvB"],"enrUri":"enr:-L24QKWRpjDzrD-dftzqOX7srSKXWNxtwF57ta1LxtFsAfonWp8WeWtz-BIMt6gY1u9zG80qT8kTIiBSfNRq9xggjJ8CgmlkgnY0gmlwhKwSi_eKbXVsdGlhZGRyc5YACASsEov3Bu-8AAoErBKL9wbvvd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDKLe01HGSRSq1obMt6Z_aeYmNcCzlU1VSJ19DYbXyCrCDdGNwgu-8g3VkcILvvoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61371/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.199.167/tcp/18905/p2p/16Uiu2HAm5SRM2FVEzWhHdsfy2nXSHdtTpGEFcRr54g2jnJ2qsEqS"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61371/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.46.63/tcp/31218/p2p/16Uiu2HAmTKYKzuc8txVLoknEGYiEp1EtQzY1ovX6Edgc3F6D7tyx"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18904/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31217/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61371/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1736136766908401152, "extraField": "extraValue"}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:61371/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 870f501b9be5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 016737d8bb6c
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 870f501b9be5. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id fece5f4d45c4
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 016737d8bb6c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.