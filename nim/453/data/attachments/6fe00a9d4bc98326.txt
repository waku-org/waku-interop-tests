[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-11-18_04-16-02__a0cb4bab-95df-43b8-81bd-04e31cc4426b
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-18_04-16-02__a0cb4bab-95df-43b8-81bd-04e31cc4426b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.187.194
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['51451', '51452', '51453', '51454', '51455']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 51451:51451 -p 51452:51452 -p 51453:51453 -p 51454:51454 -p 51455:51455 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51453 --rest-port=51451 --tcp-port=51452 --discv5-udp-port=51454 --rest-address=0.0.0.0 --nat=extip:172.18.187.194 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e409fb5ecfdc4f0e4bea292b43ead8f88d3e97cfd8e49dc2aa26baacbf8d29c3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51455 --metrics-logging=true --lightpush=true --relay=true --filter=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b15ca65cd476. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.187.194 waku fd71b810d018f22f141a8158cf613ae6c9950afe738777c4bfff8fd6d86c4540
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fd71b810d018. Setting up logs at ./log/docker/receiving_node1_2024-11-18_04-16-02__a0cb4bab-95df-43b8-81bd-04e31cc4426b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 51451
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51451/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51451/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.187.194/tcp/51452/p2p/16Uiu2HAmEwG2FkyiZzDhATqGjb88Tfj2vQ1h826kyz3mREwuAMUq","/ip4/172.18.187.194/tcp/51453/ws/p2p/16Uiu2HAmEwG2FkyiZzDhATqGjb88Tfj2vQ1h826kyz3mREwuAMUq"],"enrUri":"enr:-L24QOzZfNj06OlSNo9rw6DgT_WRH_q3zDOfKgCHKD_ljKbbXelCWJsD93XpVxi9Exc64rN4ZnEn3CTQZ4jQaal5V24CgmlkgnY0gmlwhKwSu8KKbXVsdGlhZGRyc5YACASsErvCBsj8AAoErBK7wgbI_d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDIeJjEP2xfmJQGfBaysevTBQyPGDvm7GfGaTvAlkAsMaDdGNwgsj8g3VkcILI_oV3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-18_04-16-02__a0cb4bab-95df-43b8-81bd-04e31cc4426b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.9.185
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['64510', '64511', '64512', '64513', '64514']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 64510:64510 -p 64511:64511 -p 64512:64512 -p 64513:64513 -p 64514:64514 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64512 --rest-port=64510 --tcp-port=64511 --discv5-udp-port=64513 --rest-address=0.0.0.0 --nat=extip:172.18.9.185 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=68af7f6a46ec457dba1eee5f6d3f8a79a9a015d0d8ceec9cb105ed7f4947750d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64514 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.9.185 waku e9d7fb635c4f1dd273a02c092b750870454c36139b3a81d0971097764d5384f1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e9d7fb635c4f. Setting up logs at ./log/docker/receiving_node2_2024-11-18_04-16-02__a0cb4bab-95df-43b8-81bd-04e31cc4426b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 64510
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64510/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64510/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.185/tcp/64511/p2p/16Uiu2HAkuodq664VtzcMGGZoysJs7PuSZh5LQzj4GRJjYnLb2n6o","/ip4/172.18.9.185/tcp/64512/ws/p2p/16Uiu2HAkuodq664VtzcMGGZoysJs7PuSZh5LQzj4GRJjYnLb2n6o"],"enrUri":"enr:-L24QJ2GeaMf3IvCuJ6PFfSaJcZ5VNZL0DpiJFhRk2Tu2IrEVctapu4q3xZTQX6VY0qCliSSbEpJmvMZAiXu1r4lm04CgmlkgnY0gmlwhKwSCbmKbXVsdGlhZGRyc5YACASsEgm5Bvv_AAoErBIJuQb8AN0DgnJzhQADAQAAiXNlY3AyNTZrMaECBaBYwKbUz7psiKsJ4rI1TEopfyKkU4QxCA7Pb3AmDIyDdGNwgvv_g3VkcIL8AYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64510/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.187.194/tcp/51452/p2p/16Uiu2HAmEwG2FkyiZzDhATqGjb88Tfj2vQ1h826kyz3mREwuAMUq"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-18_04-16-02__a0cb4bab-95df-43b8-81bd-04e31cc4426b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.100.63
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['32036', '32037', '32038', '32039', '32040']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 32036:32036 -p 32037:32037 -p 32038:32038 -p 32039:32039 -p 32040:32040 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32038 --rest-port=32036 --tcp-port=32037 --discv5-udp-port=32039 --rest-address=0.0.0.0 --nat=extip:172.18.100.63 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3b7c229f2d37bd958eebcf1c5afb9c0edcdbbefcb3dff7d3c7eb3de5cfbe9ee8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32040 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QOzZfNj06OlSNo9rw6DgT_WRH_q3zDOfKgCHKD_ljKbbXelCWJsD93XpVxi9Exc64rN4ZnEn3CTQZ4jQaal5V24CgmlkgnY0gmlwhKwSu8KKbXVsdGlhZGRyc5YACASsErvCBsj8AAoErBK7wgbI_d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDIeJjEP2xfmJQGfBaysevTBQyPGDvm7GfGaTvAlkAsMaDdGNwgsj8g3VkcILI_oV3YWt1Mg0 --lightpushnode=/ip4/172.18.187.194/tcp/51452/p2p/16Uiu2HAmEwG2FkyiZzDhATqGjb88Tfj2vQ1h826kyz3mREwuAMUq --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.100.63 waku ca450d225826025de5ea49c36df9ab36ad9495b3c9e1e4ba0f681e395461bdbc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ca450d225826. Setting up logs at ./log/docker/lightpush_node1_2024-11-18_04-16-02__a0cb4bab-95df-43b8-81bd-04e31cc4426b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 32036
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32036/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32036/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.100.63/tcp/32037/p2p/16Uiu2HAkxPybNvX97n2vfBqL3TGHAwsAs9Vhafshyj14fwbaTUnG","/ip4/172.18.100.63/tcp/32038/ws/p2p/16Uiu2HAkxPybNvX97n2vfBqL3TGHAwsAs9Vhafshyj14fwbaTUnG"],"enrUri":"enr:-L24QF_fI4QTZTMh0u1tn5Y_HKoy9WJH0krrpMN7W5zTlWM8OZ4yyKdSf1oKX26YmWJQMrhHRcNQw79fIBIfVwu0a70CgmlkgnY0gmlwhKwSZD-KbXVsdGlhZGRyc5YACASsEmQ_Bn0lAAoErBJkPwZ9Jt0DgnJzhQADAQAAiXNlY3AyNTZrMaECLCPQmjkVPYJMD5zZhvb3DtP6DTg97O2zoQLrlmWE7u2DdGNwgn0lg3VkcIJ9J4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32036/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.187.194/tcp/51452/p2p/16Uiu2HAmEwG2FkyiZzDhATqGjb88Tfj2vQ1h826kyz3mREwuAMUq"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32036/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.9.185/tcp/64511/p2p/16Uiu2HAkuodq664VtzcMGGZoysJs7PuSZh5LQzj4GRJjYnLb2n6o"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51451/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64510/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32036/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1731903367504174592}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51451/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1731903367504174592,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64510/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1731903367504174592,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id fd71b810d018
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id e9d7fb635c4f
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fd71b810d018. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id ca450d225826
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e9d7fb635c4f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.