[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_content_topics with id: 2024-11-18_04-14-10__2576c3e3-c3c2-4584-974d-c3ff8829cfdd
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-18_04-14-10__2576c3e3-c3c2-4584-974d-c3ff8829cfdd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.200.209
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['16973', '16974', '16975', '16976', '16977']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 16973:16973 -p 16974:16974 -p 16975:16975 -p 16976:16976 -p 16977:16977 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16975 --rest-port=16973 --tcp-port=16974 --discv5-udp-port=16976 --rest-address=0.0.0.0 --nat=extip:172.18.200.209 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=77ae205fb5b4abbacef81ce75d0494ebc52c8fc1038c5be8f1fcddf94deb09dc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16977 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.200.209 waku e767fbda9a98d2efdbbfdf6b386a80ffff17782dea9cc280fca6bd8afaa278c2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e767fbda9a98. Setting up logs at ./log/docker/receiving_node1_2024-11-18_04-14-10__2576c3e3-c3c2-4584-974d-c3ff8829cfdd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 16973
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 31eadb0328a5. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16973/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16973/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.200.209/tcp/16974/p2p/16Uiu2HAkzCC5rAX2omsdEYtbBzamQGGeqdkEwvGsXqJNShgCMXd7","/ip4/172.18.200.209/tcp/16975/ws/p2p/16Uiu2HAkzCC5rAX2omsdEYtbBzamQGGeqdkEwvGsXqJNShgCMXd7"],"enrUri":"enr:-L24QLGlF5-fdgihyoseAJ-1XBZJ9Sml9_6X6HEyDObnCTdpUf0Fa0eZf-J9EpwKHSPWtK1y_BUhPRVi5rfRng7lp7cCgmlkgnY0gmlwhKwSyNGKbXVsdGlhZGRyc5YACASsEsjRBkJOAAoErBLI0QZCT90DgnJzhQADAQAAiXNlY3AyNTZrMaECRtZXqwlRJ9na63jVw6EKUlRz8LgpoFYJjlpSa7Rr2BaDdGNwgkJOg3VkcIJCUIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-18_04-14-10__2576c3e3-c3c2-4584-974d-c3ff8829cfdd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.62.253
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['44422', '44423', '44424', '44425', '44426']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 44422:44422 -p 44423:44423 -p 44424:44424 -p 44425:44425 -p 44426:44426 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44424 --rest-port=44422 --tcp-port=44423 --discv5-udp-port=44425 --rest-address=0.0.0.0 --nat=extip:172.18.62.253 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2fa1ace96fcb7450fcfbc1c35b0f3aebbdfe01b3fb1c2ebde35deeb2872e8e84 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44426 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.62.253 waku b05a165c4eca8077dd5fa262435361f04dc5be9f8a83dea87bf9915139bcb3b6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b05a165c4eca. Setting up logs at ./log/docker/receiving_node2_2024-11-18_04-14-10__2576c3e3-c3c2-4584-974d-c3ff8829cfdd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 44422
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44422/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44422/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.62.253/tcp/44423/p2p/16Uiu2HAmPRSWu62Bw8cPH2bh62W8obL4Z29EYhi3enBFemmhwLn4","/ip4/172.18.62.253/tcp/44424/ws/p2p/16Uiu2HAmPRSWu62Bw8cPH2bh62W8obL4Z29EYhi3enBFemmhwLn4"],"enrUri":"enr:-L24QMCVfEfBvrlAGlAlorp5GtznwWhXPFkpQcWpX-oeyKUfDTOE30TvdwjOK09YnOkXfYBM8b1-j3wnOPAKMdfSz_ICgmlkgnY0gmlwhKwSPv2KbXVsdGlhZGRyc5YACASsEj79Bq2HAAoErBI-_QatiN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDn_gCrv2NRn0zMB1WcbqsuPostFIY-ubQDgI13wvIr9GDdGNwgq2Hg3VkcIKtiYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44422/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.200.209/tcp/16974/p2p/16Uiu2HAkzCC5rAX2omsdEYtbBzamQGGeqdkEwvGsXqJNShgCMXd7"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-18_04-14-10__2576c3e3-c3c2-4584-974d-c3ff8829cfdd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.215.165
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8884', '8885', '8886', '8887', '8888']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8884:8884 -p 8885:8885 -p 8886:8886 -p 8887:8887 -p 8888:8888 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8886 --rest-port=8884 --tcp-port=8885 --discv5-udp-port=8887 --rest-address=0.0.0.0 --nat=extip:172.18.215.165 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f7b2f7a599f706f5f9db52916af1c1bdd73dc86dc01d9e0655cec67725d9737a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8888 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLGlF5-fdgihyoseAJ-1XBZJ9Sml9_6X6HEyDObnCTdpUf0Fa0eZf-J9EpwKHSPWtK1y_BUhPRVi5rfRng7lp7cCgmlkgnY0gmlwhKwSyNGKbXVsdGlhZGRyc5YACASsEsjRBkJOAAoErBLI0QZCT90DgnJzhQADAQAAiXNlY3AyNTZrMaECRtZXqwlRJ9na63jVw6EKUlRz8LgpoFYJjlpSa7Rr2BaDdGNwgkJOg3VkcIJCUIV3YWt1Mgk --lightpushnode=/ip4/172.18.200.209/tcp/16974/p2p/16Uiu2HAkzCC5rAX2omsdEYtbBzamQGGeqdkEwvGsXqJNShgCMXd7 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.215.165 waku 31db2e577b72304016f18a9360bc2b7bd7c7ffc9221e207f5405541b83152a0c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 31db2e577b72. Setting up logs at ./log/docker/lightpush_node1_2024-11-18_04-14-10__2576c3e3-c3c2-4584-974d-c3ff8829cfdd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 8884
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8884/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8884/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.215.165/tcp/8885/p2p/16Uiu2HAmC84woDXy25WTaZZXnbk7cjoUuQfbwrxrceKhYCKxTdjq","/ip4/172.18.215.165/tcp/8886/ws/p2p/16Uiu2HAmC84woDXy25WTaZZXnbk7cjoUuQfbwrxrceKhYCKxTdjq"],"enrUri":"enr:-L24QIbJqOuwCQQawKQWo0QH8QGiypLecKR7fGFre-sHq1mVAFo8AQmaBB1HHx4MzXcRefwuCIoxrV6RCcbO7mOR5SACgmlkgnY0gmlwhKwS16WKbXVsdGlhZGRyc5YACASsEtelBiK1AAoErBLXpQYitt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-BQwwd9VYavDDlgKuszFK0VS8CdDCf4hGs6jey-gIMSDdGNwgiK1g3VkcIIit4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8884/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.200.209/tcp/16974/p2p/16Uiu2HAkzCC5rAX2omsdEYtbBzamQGGeqdkEwvGsXqJNShgCMXd7"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8884/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.62.253/tcp/44423/p2p/16Uiu2HAmPRSWu62Bw8cPH2bh62W8obL4Z29EYhi3enBFemmhwLn4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16973/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44422/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic Empty string
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8884/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "", "timestamp": 1731903255308791040}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:8884/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A dictionary
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8884/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": {"key": "YWFh"}, "timestamp": 1731903255313574912}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:8884/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic An integer
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8884/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": 1234567890, "timestamp": 1731903255318420736}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:8884/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A list
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8884/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": ["YWFh"], "timestamp": 1731903255322922496}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:8884/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A bool
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8884/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": true, "timestamp": 1731903255327299840}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:8884/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id e767fbda9a98
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id b05a165c4eca
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e767fbda9a98. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 31db2e577b72
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b05a165c4eca. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.