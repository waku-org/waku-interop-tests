[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_pubsub_topic_list_instead_of_string with id: 2024-11-18_04-11-40__e167c086-be30-4f41-9b8c-3aaa55ba829e
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-18_04-11-40__e167c086-be30-4f41-9b8c-3aaa55ba829e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.109.78
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8520', '8521', '8522', '8523', '8524']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8520:8520 -p 8521:8521 -p 8522:8522 -p 8523:8523 -p 8524:8524 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8522 --rest-port=8520 --tcp-port=8521 --discv5-udp-port=8523 --rest-address=0.0.0.0 --nat=extip:172.18.109.78 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4b6cc016a6e84b727feb50fe15c9d4db089eb0f05de6aafc06078befdedfb91b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8524 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.109.78 waku 3403c806e6f4dd9b6b861b2abd2279e3540fc97f08ad242f4506afb1a2b8ec31
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3403c806e6f4. Setting up logs at ./log/docker/node1_2024-11-18_04-11-40__e167c086-be30-4f41-9b8c-3aaa55ba829e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 8520
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 27b8d3fa3e8e. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8520/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8520/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.109.78/tcp/8521/p2p/16Uiu2HAmRC1YWRtSkmtjqx1XJBoaYWmbLbptkeHKEQ4biaKQhqL7","/ip4/172.18.109.78/tcp/8522/ws/p2p/16Uiu2HAmRC1YWRtSkmtjqx1XJBoaYWmbLbptkeHKEQ4biaKQhqL7"],"enrUri":"enr:-L24QKwcGHEaH6gZpIyU-n4V8PwwfF4aCpOnYcqqx0PWHrbuexQEoU9GN8370FLvUCS-5XWITEo_oyRsT7gTff70MzECgmlkgnY0gmlwhKwSbU6KbXVsdGlhZGRyc5YACASsEm1OBiFJAAoErBJtTgYhSt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDuj6Y_GhDUlihNu7Y-nX6-LBhfVbZfQFBMJK3sr7Zk8SDdGNwgiFJg3VkcIIhS4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-18_04-11-40__e167c086-be30-4f41-9b8c-3aaa55ba829e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.0.244
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['54554', '54555', '54556', '54557', '54558']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 54554:54554 -p 54555:54555 -p 54556:54556 -p 54557:54557 -p 54558:54558 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54556 --rest-port=54554 --tcp-port=54555 --discv5-udp-port=54557 --rest-address=0.0.0.0 --nat=extip:172.18.0.244 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eadee10246b5bbc1b0ae16093739adddb68aef8b99950146f191f6eccdacff47 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54558 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QKwcGHEaH6gZpIyU-n4V8PwwfF4aCpOnYcqqx0PWHrbuexQEoU9GN8370FLvUCS-5XWITEo_oyRsT7gTff70MzECgmlkgnY0gmlwhKwSbU6KbXVsdGlhZGRyc5YACASsEm1OBiFJAAoErBJtTgYhSt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDuj6Y_GhDUlihNu7Y-nX6-LBhfVbZfQFBMJK3sr7Zk8SDdGNwgiFJg3VkcIIhS4V3YWt1MgU --filternode=/ip4/172.18.109.78/tcp/8521/p2p/16Uiu2HAmRC1YWRtSkmtjqx1XJBoaYWmbLbptkeHKEQ4biaKQhqL7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.0.244 waku 792e01b0161a9f5474ae92b6706a8bd248215972776fbadae719b2762192a991
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 792e01b0161a. Setting up logs at ./log/docker/node2_2024-11-18_04-11-40__e167c086-be30-4f41-9b8c-3aaa55ba829e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 54554
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54554/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54554/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.0.244/tcp/54555/p2p/16Uiu2HAm4bEsszn1GMeM69GGR8YoGizpmHe4WhwREHKo4a93TnhJ","/ip4/172.18.0.244/tcp/54556/ws/p2p/16Uiu2HAm4bEsszn1GMeM69GGR8YoGizpmHe4WhwREHKo4a93TnhJ"],"enrUri":"enr:-L24QHqzp7sSTp7iYa7V2vbjC7KSLC-I8ewvhw6DKw0EXQieX3X7M-tmYLnaahhlctK2QF8oaQ3rcjCdQVAO3IadNUcCgmlkgnY0gmlwhKwSAPSKbXVsdGlhZGRyc5YACASsEgD0BtUbAAoErBIA9AbVHN0DgnJzhQADAQAAiXNlY3AyNTZrMaECiCybiMPBZt6DxjkJuQE6QI6NBZag2kCy49p1yY4dP2WDdGNwgtUbg3VkcILVHYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54554/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.109.78/tcp/8521/p2p/16Uiu2HAmRC1YWRtSkmtjqx1XJBoaYWmbLbptkeHKEQ4biaKQhqL7"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8520/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54554/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "555a5d5a-9c5a-4eae-ba76-578fed0ec9cc", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"555a5d5a-9c5a-4eae-ba76-578fed0ec9cc","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:54554/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": ["/waku/2/rs/3/1"]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:54554/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 3403c806e6f4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 792e01b0161a
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3403c806e6f4. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.