[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-11-18_04-15-01__a5c06e1d-020b-424a-b53e-560abcba32f3
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-18_04-15-01__a5c06e1d-020b-424a-b53e-560abcba32f3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.192.206
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['43663', '43664', '43665', '43666', '43667']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 43663:43663 -p 43664:43664 -p 43665:43665 -p 43666:43666 -p 43667:43667 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43665 --rest-port=43663 --tcp-port=43664 --discv5-udp-port=43666 --rest-address=0.0.0.0 --nat=extip:172.18.192.206 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9b73cf61a4f2bc13cc6fc709ffe6fc82c1cd38c84f251e204755b1e918d520f0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43667 --metrics-logging=true --lightpush=true --relay=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 73a4b4cf19aa. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.192.206 waku 215a4a040ef9737cac678b45739d2172c4d7ef12e47cabbbbef966b367aceadb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 215a4a040ef9. Setting up logs at ./log/docker/receiving_node1_2024-11-18_04-15-01__a5c06e1d-020b-424a-b53e-560abcba32f3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 43663
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43663/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43663/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.192.206/tcp/43664/p2p/16Uiu2HAkvC7TPaiBxcn1cwvbh4ByjmfKJyzU3oHv2xo6SPFeXxTn","/ip4/172.18.192.206/tcp/43665/ws/p2p/16Uiu2HAkvC7TPaiBxcn1cwvbh4ByjmfKJyzU3oHv2xo6SPFeXxTn"],"enrUri":"enr:-L24QBGdDlA8qiDuyTTPmoxq3aL6nuVdds7FxeHmqvpfczbiBfv8iEFSs-TievfPv2cvj4liK3wX-LPqFZAbfVEHx8QCgmlkgnY0gmlwhKwSwM6KbXVsdGlhZGRyc5YACASsEsDOBqqQAAoErBLAzgaqkd0DgnJzhQADAQAAiXNlY3AyNTZrMaECC2JcdngDZhAIesU0pst80AIyjUD6DZXiiwM5Oc3WUI2DdGNwgqqQg3VkcIKqkoV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-18_04-15-01__a5c06e1d-020b-424a-b53e-560abcba32f3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.55.246
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['51086', '51087', '51088', '51089', '51090']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 51086:51086 -p 51087:51087 -p 51088:51088 -p 51089:51089 -p 51090:51090 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51088 --rest-port=51086 --tcp-port=51087 --discv5-udp-port=51089 --rest-address=0.0.0.0 --nat=extip:172.18.55.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ed005a9ab1a6bbdbfa5dde7bebea1a1d3db716627f1dfc6aa834d6bb2777ebbf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51090 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.55.246 waku 76a9469fa197fdd53a99731bddff0da5af467b9a3890716a2881321ec7f20f22
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 76a9469fa197. Setting up logs at ./log/docker/receiving_node2_2024-11-18_04-15-01__a5c06e1d-020b-424a-b53e-560abcba32f3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 51086
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51086/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51086/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.55.246/tcp/51087/p2p/16Uiu2HAkwcyxW7ifHXK7ttJAxtSfo2g4BCRVt95kjTv4MKMD77tG","/ip4/172.18.55.246/tcp/51088/ws/p2p/16Uiu2HAkwcyxW7ifHXK7ttJAxtSfo2g4BCRVt95kjTv4MKMD77tG"],"enrUri":"enr:-L24QBW3oR3zAvPph4WNXJzkhrKVVQuG_Reni27G9iYdELpOeqbnbeAvr7qm5dZLPNPY-ptd1QHlZbwrr0O0HoDff8ECgmlkgnY0gmlwhKwSN_aKbXVsdGlhZGRyc5YACASsEjf2BsePAAoErBI39gbHkN0DgnJzhQADAQAAiXNlY3AyNTZrMaECIJ0XGviK2Qs0D4EnTRpxTrVlkM3n4d_jC8xaLdRulCWDdGNwgsePg3VkcILHkYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51086/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.192.206/tcp/43664/p2p/16Uiu2HAkvC7TPaiBxcn1cwvbh4ByjmfKJyzU3oHv2xo6SPFeXxTn"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-18_04-15-01__a5c06e1d-020b-424a-b53e-560abcba32f3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.122.246
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['34554', '34555', '34556', '34557', '34558']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 34554:34554 -p 34555:34555 -p 34556:34556 -p 34557:34557 -p 34558:34558 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34556 --rest-port=34554 --tcp-port=34555 --discv5-udp-port=34557 --rest-address=0.0.0.0 --nat=extip:172.18.122.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aee0c0012a12359eb56cfa6fca2deaacb9bfacdadde9feb05cbf92c994ccd25c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34558 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QBGdDlA8qiDuyTTPmoxq3aL6nuVdds7FxeHmqvpfczbiBfv8iEFSs-TievfPv2cvj4liK3wX-LPqFZAbfVEHx8QCgmlkgnY0gmlwhKwSwM6KbXVsdGlhZGRyc5YACASsEsDOBqqQAAoErBLAzgaqkd0DgnJzhQADAQAAiXNlY3AyNTZrMaECC2JcdngDZhAIesU0pst80AIyjUD6DZXiiwM5Oc3WUI2DdGNwgqqQg3VkcIKqkoV3YWt1Mgk --lightpushnode=/ip4/172.18.192.206/tcp/43664/p2p/16Uiu2HAkvC7TPaiBxcn1cwvbh4ByjmfKJyzU3oHv2xo6SPFeXxTn --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.122.246 waku f9609f587c2274d9ea2756150b4be80b73e3733dc27963254079aec07f792b35
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f9609f587c22. Setting up logs at ./log/docker/lightpush_node1_2024-11-18_04-15-01__a5c06e1d-020b-424a-b53e-560abcba32f3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 34554
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34554/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34554/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.122.246/tcp/34555/p2p/16Uiu2HAm3VB2rPazM2y3MhBcbabWwRUdnCKZkYRAiMK3oYfZ1QmP","/ip4/172.18.122.246/tcp/34556/ws/p2p/16Uiu2HAm3VB2rPazM2y3MhBcbabWwRUdnCKZkYRAiMK3oYfZ1QmP"],"enrUri":"enr:-L24QEeQ05tJas7AVjoLL_TOiNACkWBOfXzW3RFmDwZefHE7eyM-uLPvjYO_Lkxd5Focv17eygJKVEEmjUijc40cgQICgmlkgnY0gmlwhKwSevaKbXVsdGlhZGRyc5YACASsEnr2Bob7AAoErBJ69gaG_N0DgnJzhQADAQAAiXNlY3AyNTZrMaECd8MWfu7xaBvFntB2-foiRmq10Ls1Vf0c6dJ3Wy7t8sqDdGNwgob7g3VkcIKG_YV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34554/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.192.206/tcp/43664/p2p/16Uiu2HAkvC7TPaiBxcn1cwvbh4ByjmfKJyzU3oHv2xo6SPFeXxTn"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34554/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.55.246/tcp/51087/p2p/16Uiu2HAkwcyxW7ifHXK7ttJAxtSfo2g4BCRVt95kjTv4MKMD77tG"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43663/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51086/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34554/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1731903306325441280, "version": 2.1}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:34554/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 215a4a040ef9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 76a9469fa197
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 215a4a040ef9. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id f9609f587c22
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 76a9469fa197. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.