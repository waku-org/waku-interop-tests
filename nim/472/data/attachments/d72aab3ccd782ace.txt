[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-11-30_04-16-17__0bae9092-f031-4bf8-be18-12363cb4b71e
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-30_04-16-17__0bae9092-f031-4bf8-be18-12363cb4b71e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.5.189
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5247', '5248', '5249', '5250', '5251']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5247:5247 -p 5248:5248 -p 5249:5249 -p 5250:5250 -p 5251:5251 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5249 --rest-port=5247 --tcp-port=5248 --discv5-udp-port=5250 --rest-address=0.0.0.0 --nat=extip:172.18.5.189 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b7a8d00ea735fbbebac7889cca03bf74d95c4479b899dff71d64c5d8b38d1db0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5251 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.5.189 waku 10bdc7247a54c84c8d1978014a2bc5115787411641f3865e0faa047b4441acec
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 10bdc7247a54. Setting up logs at ./log/docker/receiving_node1_2024-11-30_04-16-17__0bae9092-f031-4bf8-be18-12363cb4b71e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 5247
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 89edb7c0d809. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5247/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5247/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.5.189/tcp/5248/p2p/16Uiu2HAm42LJ3StnwDrNMVJdSDNhsmvgPFVgj2XmVQcfzhtFr9bJ","/ip4/172.18.5.189/tcp/5249/ws/p2p/16Uiu2HAm42LJ3StnwDrNMVJdSDNhsmvgPFVgj2XmVQcfzhtFr9bJ"],"enrUri":"enr:-L24QNa0bX-rgznkF3lyCY_7OE6WfeopJu5mjJ7df52qDKsBDgt_DPYQNcOgCrDE2bBgnQSFFLXhiVPuuEZJbeEPDq4CgmlkgnY0gmlwhKwSBb2KbXVsdGlhZGRyc5YACASsEgW9BhSAAAoErBIFvQYUgd0DgnJzhQADAQAAiXNlY3AyNTZrMaECf76Qv-KbPBbN9h4OIVnS6Wedo5DppkW0scKH3QJp2M2DdGNwghSAg3VkcIIUgoV3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-30_04-16-17__0bae9092-f031-4bf8-be18-12363cb4b71e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.70.140
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['45546', '45547', '45548', '45549', '45550']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 45546:45546 -p 45547:45547 -p 45548:45548 -p 45549:45549 -p 45550:45550 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45548 --rest-port=45546 --tcp-port=45547 --discv5-udp-port=45549 --rest-address=0.0.0.0 --nat=extip:172.18.70.140 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b5647f57a9e37db5f75af132523442f7f0c7401efbbcce79dd51dac1baaa570f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45550 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.70.140 waku 77e4f90148a6ef38921011a48038bc71dbfe895d47dc95a3f037f07fa93c9bf5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 77e4f90148a6. Setting up logs at ./log/docker/receiving_node2_2024-11-30_04-16-17__0bae9092-f031-4bf8-be18-12363cb4b71e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 45546
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45546/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45546/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.70.140/tcp/45547/p2p/16Uiu2HAmFLLXY17kXsqAWGscTckMwvJ1GqiomnV5sF7pUgou9JDE","/ip4/172.18.70.140/tcp/45548/ws/p2p/16Uiu2HAmFLLXY17kXsqAWGscTckMwvJ1GqiomnV5sF7pUgou9JDE"],"enrUri":"enr:-L24QFCxVvZDeae6qi5nJDcIizDj4b89d443Iuz63irzW3KlZwXdyFxYenbkejDt7usvL4uy3sujGsAq5asmUCPI1toCgmlkgnY0gmlwhKwSRoyKbXVsdGlhZGRyc5YACASsEkaMBrHrAAoErBJGjAax7N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJ8vW1qZTcynAomYPNtRp2vaYSfUChFrZYW66L_H9f6mDdGNwgrHrg3VkcIKx7YV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45546/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.5.189/tcp/5248/p2p/16Uiu2HAm42LJ3StnwDrNMVJdSDNhsmvgPFVgj2XmVQcfzhtFr9bJ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-30_04-16-17__0bae9092-f031-4bf8-be18-12363cb4b71e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.49.20
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['27227', '27228', '27229', '27230', '27231']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 27227:27227 -p 27228:27228 -p 27229:27229 -p 27230:27230 -p 27231:27231 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27229 --rest-port=27227 --tcp-port=27228 --discv5-udp-port=27230 --rest-address=0.0.0.0 --nat=extip:172.18.49.20 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4bd1a55d9a8b90dfb6859e74e3e6b6a93ccc85f1fffd9eb67a37eaac0bad37db --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27231 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QNa0bX-rgznkF3lyCY_7OE6WfeopJu5mjJ7df52qDKsBDgt_DPYQNcOgCrDE2bBgnQSFFLXhiVPuuEZJbeEPDq4CgmlkgnY0gmlwhKwSBb2KbXVsdGlhZGRyc5YACASsEgW9BhSAAAoErBIFvQYUgd0DgnJzhQADAQAAiXNlY3AyNTZrMaECf76Qv-KbPBbN9h4OIVnS6Wedo5DppkW0scKH3QJp2M2DdGNwghSAg3VkcIIUgoV3YWt1Mg0 --lightpushnode=/ip4/172.18.5.189/tcp/5248/p2p/16Uiu2HAm42LJ3StnwDrNMVJdSDNhsmvgPFVgj2XmVQcfzhtFr9bJ --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.49.20 waku 5ad6f75a00ec620c1c3e407d086a05565afe4a72388c8a367d3195cdca8ba36e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5ad6f75a00ec. Setting up logs at ./log/docker/lightpush_node1_2024-11-30_04-16-17__0bae9092-f031-4bf8-be18-12363cb4b71e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 27227
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27227/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27227/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.49.20/tcp/27228/p2p/16Uiu2HAmTAN3aMWGGPvZ3D4fzhNstadWfJvRgLjrhJDDtte7qHCF","/ip4/172.18.49.20/tcp/27229/ws/p2p/16Uiu2HAmTAN3aMWGGPvZ3D4fzhNstadWfJvRgLjrhJDDtte7qHCF"],"enrUri":"enr:-L24QFhAQPThufS611bYKQgUf41uePj8miizlZP57cdiO3y6XEwmnGrAhF9PUgKtiOwaYyVM0j-lK6Fao4wclu7i0uECgmlkgnY0gmlwhKwSMRSKbXVsdGlhZGRyc5YACASsEjEUBmpcAAoErBIxFAZqXd0DgnJzhQADAQAAiXNlY3AyNTZrMaED14n9lpUrmAWhzurdfwVsZTS1ooW_6OlXYsj1-15QGQyDdGNwgmpcg3VkcIJqXoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27227/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.5.189/tcp/5248/p2p/16Uiu2HAm42LJ3StnwDrNMVJdSDNhsmvgPFVgj2XmVQcfzhtFr9bJ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27227/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.70.140/tcp/45547/p2p/16Uiu2HAmFLLXY17kXsqAWGscTckMwvJ1GqiomnV5sF7pUgou9JDE"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5247/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45546/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27227/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1732940182722981376}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5247/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732940182722981376,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45546/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732940182722981376,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 10bdc7247a54
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 77e4f90148a6
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 10bdc7247a54. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5ad6f75a00ec
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 77e4f90148a6. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.