[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush with id: 2024-10-16_04-02-24__76b07772-8c15-4153-a32f-42ad5f3109c5
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-16_04-02-24__76b07772-8c15-4153-a32f-42ad5f3109c5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.228.84
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['2705', '2706', '2707', '2708', '2709']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 2705:2705 -p 2706:2706 -p 2707:2707 -p 2708:2708 -p 2709:2709 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2707 --rest-port=2705 --tcp-port=2706 --discv5-udp-port=2708 --rest-address=0.0.0.0 --nat=extip:172.18.228.84 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=af4dae1fe46ef07ac8508a10add8fda9ee1c16e3eacdbb6f9ef506d1bdd7c266 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2709 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.228.84 waku bad9d71a57bd2003f80dbdc62961b9d8aa88f6e96e40f120a91fe6ffb15408a2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID bad9d71a57bd. Setting up logs at ./log/docker/node1_2024-10-16_04-02-24__76b07772-8c15-4153-a32f-42ad5f3109c5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 2705
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2705/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2705/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.228.84/tcp/2706/p2p/16Uiu2HAmCNZ2QYvcQNSVbJDQkCeZDvhqAm5VTEDZrt5ei2m5xJDc","/ip4/172.18.228.84/tcp/2707/ws/p2p/16Uiu2HAmCNZ2QYvcQNSVbJDQkCeZDvhqAm5VTEDZrt5ei2m5xJDc"],"enrUri":"enr:-LO4QHgKi-UjbyxsNJ_7qVXasGPOcERK_VxIFTjSVf-647B2RgcG9vM1YcWgCg7TO7JZYzsXs0vDhZOmrTGEI7PLlJ8BgmlkgnY0gmlwhKwS5FSKbXVsdGlhZGRyc4wACgSsEuRUBgqT3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL7yhJDfacQm2Nnr4-YCAD0ESGbGJx6nRDmWV5VYcVCV4N0Y3CCCpKDdWRwggqUhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-16_04-02-24__76b07772-8c15-4153-a32f-42ad5f3109c5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.59.231
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['50723', '50724', '50725', '50726', '50727']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 50723:50723 -p 50724:50724 -p 50725:50725 -p 50726:50726 -p 50727:50727 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50725 --rest-port=50723 --tcp-port=50724 --discv5-udp-port=50726 --rest-address=0.0.0.0 --nat=extip:172.18.59.231 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1a668fa54d1f8f62fffccf3dd81cfcc16f86f34b3a6671111ed0cef24e195bcf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50727 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-LO4QHgKi-UjbyxsNJ_7qVXasGPOcERK_VxIFTjSVf-647B2RgcG9vM1YcWgCg7TO7JZYzsXs0vDhZOmrTGEI7PLlJ8BgmlkgnY0gmlwhKwS5FSKbXVsdGlhZGRyc4wACgSsEuRUBgqT3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL7yhJDfacQm2Nnr4-YCAD0ESGbGJx6nRDmWV5VYcVCV4N0Y3CCCpKDdWRwggqUhXdha3UyCQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.59.231 waku 5d565fa0efd48df394fb55fe1663cd7e3953a665c8884014c2377187c697a679
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5d565fa0efd4. Setting up logs at ./log/docker/node1_2024-10-16_04-02-24__76b07772-8c15-4153-a32f-42ad5f3109c5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 50723
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50723/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50723/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.59.231/tcp/50724/p2p/16Uiu2HAm9T4d63vSWe32GBwgWQtKjiZ3jadmmFCDx6aY6DYmLsFS","/ip4/172.18.59.231/tcp/50725/ws/p2p/16Uiu2HAm9T4d63vSWe32GBwgWQtKjiZ3jadmmFCDx6aY6DYmLsFS"],"enrUri":"enr:-LO4QPjJx55yev4GBLK6xod-hoohllUXUQ2OWxlSdETxjWe2HcvJTkXKQsy3htIq5QYrsvihLU5_32s0cUE7317LSEwBgmlkgnY0gmlwhKwSO-eKbXVsdGlhZGRyc4wACgSsEjvnBsYl3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLQXszg6_5dc9HyflVufoR8GE0m0h_LZT7qAr1UKlKm5YN0Y3CCxiSDdWRwgsYmhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-16_04-02-24__76b07772-8c15-4153-a32f-42ad5f3109c5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.149.120
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['8810', '8811', '8812', '8813', '8814']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 8810:8810 -p 8811:8811 -p 8812:8812 -p 8813:8813 -p 8814:8814 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8812 --rest-port=8810 --tcp-port=8811 --discv5-udp-port=8813 --rest-address=0.0.0.0 --nat=extip:172.18.149.120 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ee699b8d5400daf9ac78fff228bdcbb910cceeef1151e95e0a6d9b6dbadeb3fd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8814 --metrics-logging=true --lightpush=true --relay=false --discv5-bootstrap-node=enr:-LO4QHgKi-UjbyxsNJ_7qVXasGPOcERK_VxIFTjSVf-647B2RgcG9vM1YcWgCg7TO7JZYzsXs0vDhZOmrTGEI7PLlJ8BgmlkgnY0gmlwhKwS5FSKbXVsdGlhZGRyc4wACgSsEuRUBgqT3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL7yhJDfacQm2Nnr4-YCAD0ESGbGJx6nRDmWV5VYcVCV4N0Y3CCCpKDdWRwggqUhXdha3UyCQ --lightpushnode=/ip4/172.18.228.84/tcp/2706/p2p/16Uiu2HAmCNZ2QYvcQNSVbJDQkCeZDvhqAm5VTEDZrt5ei2m5xJDc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.149.120 waku ba88ac141c6c80edb07a658d1c28627e04965ca067f5b01ff901a068dbca64eb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ba88ac141c6c. Setting up logs at ./log/docker/node1_2024-10-16_04-02-24__76b07772-8c15-4153-a32f-42ad5f3109c5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 8810
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8810/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8810/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.149.120/tcp/8811/p2p/16Uiu2HAkxzUYQDsKBqmF5HAHdguUcgsGBLKotXNHiRCgeCpfb8GZ","/ip4/172.18.149.120/tcp/8812/ws/p2p/16Uiu2HAkxzUYQDsKBqmF5HAHdguUcgsGBLKotXNHiRCgeCpfb8GZ"],"enrUri":"enr:-LO4QDwZmGg7uIZJ3cFhk9piRdh-U2pjZQx3UyoHA5smdGhjeqaWxgOex66iBpX3a2cIDmatwMDOCVotlhk0S2vrD6ABgmlkgnY0gmlwhKwSlXiKbXVsdGlhZGRyc4wACgSsEpV4BiJs3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI0-ktyqQreR6qG2MEYjtBuz0355cuF3g3Bfl1v_dMX0oN0Y3CCImuDdWRwgiJthXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2705/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50723/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8810/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1729051351407768832}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2705/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1729051351407768832,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50723/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1729051351407768832,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id bad9d71a57bd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5d565fa0efd4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ba88ac141c6c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.