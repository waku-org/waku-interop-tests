[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2024-10-16_04-28-39__8df87410-abc9-4ba0-883d-830c782cd38e
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-10-16_04-28-39__8df87410-abc9-4ba0-883d-830c782cd38e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.188.177
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['29991', '29992', '29993', '29994', '29995']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 29991:29991 -p 29992:29992 -p 29993:29993 -p 29994:29994 -p 29995:29995 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29993 --rest-port=29991 --tcp-port=29992 --discv5-udp-port=29994 --rest-address=0.0.0.0 --nat=extip:172.18.188.177 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ab1ceab4f66afbda9bc5ad8ccda2ceba8cc5a1cfaddf2ece79cfff2e8a05b184 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29995 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.188.177 waku 857df6828f43e6e5d82bf216b202d5152c7000be4b3512234a02118ca28c9867
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 857df6828f43. Setting up logs at ./log/docker/publishing_node1_2024-10-16_04-28-39__8df87410-abc9-4ba0-883d-830c782cd38e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 29991
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29991/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29991/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.188.177/tcp/29992/p2p/16Uiu2HAmCJeSkaT9w1dBWicZLuAwpSBVq5ZUxpJ7uAbRA5jrLFNc","/ip4/172.18.188.177/tcp/29993/ws/p2p/16Uiu2HAmCJeSkaT9w1dBWicZLuAwpSBVq5ZUxpJ7uAbRA5jrLFNc"],"enrUri":"enr:-LO4QMp3sLKU_-f_7nq1M8oiWCGHbbSGeRzzI5NFHNHnat96GsJLtRFbMnn1vy2IcfrGVWgRTLzRIisGKNvWCxqzHIIBgmlkgnY0gmlwhKwSvLGKbXVsdGlhZGRyc4wACgSsEryxBnUp3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL6yeBQyBJEmT4gDo4SmPse3drlmqzP5sYPMiFjHXRBpYN0Y3CCdSiDdWRwgnUqhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node2_2024-10-16_04-28-39__8df87410-abc9-4ba0-883d-830c782cd38e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.124.76
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['18741', '18742', '18743', '18744', '18745']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 18741:18741 -p 18742:18742 -p 18743:18743 -p 18744:18744 -p 18745:18745 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18743 --rest-port=18741 --tcp-port=18742 --discv5-udp-port=18744 --rest-address=0.0.0.0 --nat=extip:172.18.124.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ef1a7d9aed0084e2ecf81cbadbacb342aece64ec97bb0cf89ea1f7662b13e8e6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18745 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.124.76 waku e4d10c4f9e09739b4a707b6e0d4ebeef0254e66224ee68f8de5903a368bf510f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e4d10c4f9e09. Setting up logs at ./log/docker/publishing_node2_2024-10-16_04-28-39__8df87410-abc9-4ba0-883d-830c782cd38e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 18741
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18741/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18741/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.124.76/tcp/18742/p2p/16Uiu2HAmCwsr9SE4MUajjRqnsDNUk2akwLRuc2iymVgG8h3kxbVL","/ip4/172.18.124.76/tcp/18743/ws/p2p/16Uiu2HAmCwsr9SE4MUajjRqnsDNUk2akwLRuc2iymVgG8h3kxbVL"],"enrUri":"enr:-LO4QPBJgdU07HCsbmxjAOL7pyNZL8jGOqKbPjwAkujBAbFDI_Z4womRhlFb72lOXhw3l1367_So7d64ZnRCSarvZzsBgmlkgnY0gmlwhKwSfEyKbXVsdGlhZGRyc4wACgSsEnxMBkk33QOCcnOFAAMBAACJc2VjcDI1NmsxoQMEU4V5Ni3uZGRw6PScgJT02-nbFMpaGM0CKNsuw8ZZO4N0Y3CCSTaDdWRwgkk4hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18741/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.188.177/tcp/29992/p2p/16Uiu2HAmCJeSkaT9w1dBWicZLuAwpSBVq5ZUxpJ7uAbRA5jrLFNc"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-10-16_04-28-39__8df87410-abc9-4ba0-883d-830c782cd38e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.217.60
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['24042', '24043', '24044', '24045', '24046']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 24042:24042 -p 24043:24043 -p 24044:24044 -p 24045:24045 -p 24046:24046 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24044 --rest-port=24042 --tcp-port=24043 --discv5-udp-port=24045 --rest-address=0.0.0.0 --nat=extip:172.18.217.60 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d15fad9b1a56bfd503f5ffbad44f321cdfbb0eca593b421cd03b1bfc8d8b37ec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24046 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QMp3sLKU_-f_7nq1M8oiWCGHbbSGeRzzI5NFHNHnat96GsJLtRFbMnn1vy2IcfrGVWgRTLzRIisGKNvWCxqzHIIBgmlkgnY0gmlwhKwSvLGKbXVsdGlhZGRyc4wACgSsEryxBnUp3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL6yeBQyBJEmT4gDo4SmPse3drlmqzP5sYPMiFjHXRBpYN0Y3CCdSiDdWRwgnUqhXdha3UyCw --storenode=/ip4/172.18.188.177/tcp/29992/p2p/16Uiu2HAmCJeSkaT9w1dBWicZLuAwpSBVq5ZUxpJ7uAbRA5jrLFNc --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.188.177/tcp/29992/p2p/16Uiu2HAmCJeSkaT9w1dBWicZLuAwpSBVq5ZUxpJ7uAbRA5jrLFNc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.217.60 waku fd82564a2fe2f59a9eabe234f6bf52fd0fec43ad68e5b8dd330f370620bf2e31
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID fd82564a2fe2. Setting up logs at ./log/docker/store_node1_2024-10-16_04-28-39__8df87410-abc9-4ba0-883d-830c782cd38e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 24042
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24042/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24042/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.217.60/tcp/24043/p2p/16Uiu2HAkwJu3AtZSpP1DaNfCCQrPJ57CADFgZsEp3md5fv7UgraG","/ip4/172.18.217.60/tcp/24044/ws/p2p/16Uiu2HAkwJu3AtZSpP1DaNfCCQrPJ57CADFgZsEp3md5fv7UgraG"],"enrUri":"enr:-LO4QJxEewe8Muvl_XMXdzG0Ba5OSVwAmlerDul3V2RXAv_KVZUUrsyVytNJwbJu0cjzf2J_AtAnoGKTxmSkW_AQNzMBgmlkgnY0gmlwhKwS2TyKbXVsdGlhZGRyc4wACgSsEtk8Bl3s3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIb-xK8Ttpjdl5ym1-HYEMzEF9Lvwc9NxBLp_JuyXogNYN0Y3CCXeuDdWRwgl3thXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24042/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.188.177/tcp/29992/p2p/16Uiu2HAmCJeSkaT9w1dBWicZLuAwpSBVq5ZUxpJ7uAbRA5jrLFNc"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24042/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.124.76/tcp/18742/p2p/16Uiu2HAmCwsr9SE4MUajjRqnsDNUk2akwLRuc2iymVgG8h3kxbVL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29991/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18741/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24042/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1729052925761850624}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29991/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"STQ0YKZOZ1niDaVI9yoooq/WMMKJ3FrC9GHRGOLRZ4w="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24042/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"a230cc7614f4da79734a","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"STQ0YKZOZ1niDaVI9yoooq/WMMKJ3FrC9GHRGOLRZ4w="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 857df6828f43
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e4d10c4f9e09
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id fd82564a2fe2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.