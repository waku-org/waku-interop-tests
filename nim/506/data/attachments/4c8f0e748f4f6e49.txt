[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_version with id: 2024-12-07_04-14-46__a08cf7ee-41d9-4cb3-85e5-eb9e7b0f8742
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-07_04-14-46__a08cf7ee-41d9-4cb3-85e5-eb9e7b0f8742__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.42.231
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['47332', '47333', '47334', '47335', '47336']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 47332:47332 -p 47333:47333 -p 47334:47334 -p 47335:47335 -p 47336:47336 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47334 --rest-port=47332 --tcp-port=47333 --discv5-udp-port=47335 --rest-address=0.0.0.0 --nat=extip:172.18.42.231 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d10a934f7b6d744862bde30aee80087277f1cfdad2344211bf7ba75f76abbeaf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47336 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.42.231 waku cbc80bc02e04071ccec124b654c2064c2c8a5a4bbddb8ef2004ae8992c754951
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID cbc80bc02e04. Setting up logs at ./log/docker/receiving_node1_2024-12-07_04-14-46__a08cf7ee-41d9-4cb3-85e5-eb9e7b0f8742__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 47332
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container db904dc2bd1e. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47332/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47332/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.42.231/tcp/47333/p2p/16Uiu2HAm4Hxc4yvuV7MWbBKZEo5VmB9VSkGnmRjq6TNcR7vFGRvD","/ip4/172.18.42.231/tcp/47334/ws/p2p/16Uiu2HAm4Hxc4yvuV7MWbBKZEo5VmB9VSkGnmRjq6TNcR7vFGRvD"],"enrUri":"enr:-L24QMWUW68bukD_6rqalJf4nsvousMO8JJEhW0rR7cunp-rT0BP3peFuNOrPVAijoBYUd0T3eMgnPr0a84qADhojo0CgmlkgnY0gmlwhKwSKueKbXVsdGlhZGRyc5YACASsEirnBrjlAAoErBIq5wa45t0DgnJzhQADAQAAiXNlY3AyNTZrMaECg79VldpkJefa1GkhZbu4pZnvontuBixLDC6TQ67NF0aDdGNwgrjlg3VkcIK454V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-07_04-14-46__a08cf7ee-41d9-4cb3-85e5-eb9e7b0f8742__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.163.243
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['3165', '3166', '3167', '3168', '3169']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 3165:3165 -p 3166:3166 -p 3167:3167 -p 3168:3168 -p 3169:3169 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3167 --rest-port=3165 --tcp-port=3166 --discv5-udp-port=3168 --rest-address=0.0.0.0 --nat=extip:172.18.163.243 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c6c0b5adcedc814a3d426bd3c314ddb8e0dd4e1dcadbd527e929deaadecba7d9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3169 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.163.243 waku 86113a3c14b39d407c394d1c3236324e97d60e4060635a9b5096ae91bdd0af15
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 86113a3c14b3. Setting up logs at ./log/docker/receiving_node2_2024-12-07_04-14-46__a08cf7ee-41d9-4cb3-85e5-eb9e7b0f8742__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 3165
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3165/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3165/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.163.243/tcp/3166/p2p/16Uiu2HAkxywfGAW1Bauo7RiUe6sd18Sj9cDS1UzkZsKudT576e9L","/ip4/172.18.163.243/tcp/3167/ws/p2p/16Uiu2HAkxywfGAW1Bauo7RiUe6sd18Sj9cDS1UzkZsKudT576e9L"],"enrUri":"enr:-L24QBuKoU9dB1m3BcE2nxE9mfWFJ_jvlO7lO6ZmgFnAJgNwQgAKKIvoKM6zxJDPfeW8vnlq8Jc29MOOXuo0JjwtSC4CgmlkgnY0gmlwhKwSo_OKbXVsdGlhZGRyc5YACASsEqPzBgxeAAoErBKj8wYMX90DgnJzhQADAQAAiXNlY3AyNTZrMaECNNdgbPGAP_lrCzliPzhFkWy2z3xmV9RICDbSg7I37D-DdGNwggxeg3VkcIIMYIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3165/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.42.231/tcp/47333/p2p/16Uiu2HAm4Hxc4yvuV7MWbBKZEo5VmB9VSkGnmRjq6TNcR7vFGRvD"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-07_04-14-46__a08cf7ee-41d9-4cb3-85e5-eb9e7b0f8742__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.0.166
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['56057', '56058', '56059', '56060', '56061']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 56057:56057 -p 56058:56058 -p 56059:56059 -p 56060:56060 -p 56061:56061 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56059 --rest-port=56057 --tcp-port=56058 --discv5-udp-port=56060 --rest-address=0.0.0.0 --nat=extip:172.18.0.166 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c3a15ceffc9dd7b5efd9aa755f71f60efbcef68e9c3e2ec6ded13cb8017fc35d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56061 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMWUW68bukD_6rqalJf4nsvousMO8JJEhW0rR7cunp-rT0BP3peFuNOrPVAijoBYUd0T3eMgnPr0a84qADhojo0CgmlkgnY0gmlwhKwSKueKbXVsdGlhZGRyc5YACASsEirnBrjlAAoErBIq5wa45t0DgnJzhQADAQAAiXNlY3AyNTZrMaECg79VldpkJefa1GkhZbu4pZnvontuBixLDC6TQ67NF0aDdGNwgrjlg3VkcIK454V3YWt1Mgk --lightpushnode=/ip4/172.18.42.231/tcp/47333/p2p/16Uiu2HAm4Hxc4yvuV7MWbBKZEo5VmB9VSkGnmRjq6TNcR7vFGRvD --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.0.166 waku c8e070bb1853aa77ed8827ac52ac995e1df34d55f445f27d86087b183a6accd4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c8e070bb1853. Setting up logs at ./log/docker/lightpush_node1_2024-12-07_04-14-46__a08cf7ee-41d9-4cb3-85e5-eb9e7b0f8742__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 56057
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56057/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56057/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.0.166/tcp/56058/p2p/16Uiu2HAmTPyhADeCbSq56sa5tjtkYpvgPD9ujGrLwxoZTQyFg4JZ","/ip4/172.18.0.166/tcp/56059/ws/p2p/16Uiu2HAmTPyhADeCbSq56sa5tjtkYpvgPD9ujGrLwxoZTQyFg4JZ"],"enrUri":"enr:-L24QMrkwwuGDVjbONlf3OzfpLuxPF5QwbTI8xrx9_15Gdj3db_ujhy5wNxbkUSj_oRozxAAN1bk2zDlmbqyfMIc5FcCgmlkgnY0gmlwhKwSAKaKbXVsdGlhZGRyc5YACASsEgCmBtr6AAoErBIApgba-90DgnJzhQADAQAAiXNlY3AyNTZrMaED2wbZMdK-b6XOCKsoE5mdfckX0uu5FV1dv8IlmXZJgh6DdGNwgtr6g3VkcILa_IV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56057/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.42.231/tcp/47333/p2p/16Uiu2HAm4Hxc4yvuV7MWbBKZEo5VmB9VSkGnmRjq6TNcR7vFGRvD"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56057/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.163.243/tcp/3166/p2p/16Uiu2HAkxywfGAW1Bauo7RiUe6sd18Sj9cDS1UzkZsKudT576e9L"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47332/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3165/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56057/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733544891935896064, "version": 10}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47332/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1733544891935896064,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3165/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1733544891935896064,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id cbc80bc02e04
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 86113a3c14b3
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container cbc80bc02e04. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c8e070bb1853
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 86113a3c14b3. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.