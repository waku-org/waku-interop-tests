[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_no_timestamp with id: 2024-12-07_04-14-45__fa874064-8ae8-4c45-a4e6-54769c18bff6
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-07_04-14-45__fa874064-8ae8-4c45-a4e6-54769c18bff6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.63.79
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['36097', '36098', '36099', '36100', '36101']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 36097:36097 -p 36098:36098 -p 36099:36099 -p 36100:36100 -p 36101:36101 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36099 --rest-port=36097 --tcp-port=36098 --discv5-udp-port=36100 --rest-address=0.0.0.0 --nat=extip:172.18.63.79 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d16fe5c2adedc94a5d7e7dffebf5f9f7e7e4f74db4bcccb6615955e5d6bfdb10 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36101 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.63.79 waku 137e046f0c48892983a790e8751c2a5d29801ea012698917e1633763eff48099
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 137e046f0c48. Setting up logs at ./log/docker/receiving_node1_2024-12-07_04-14-45__fa874064-8ae8-4c45-a4e6-54769c18bff6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 36097
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 8f4f9f7e83c8. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36097/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36097/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.63.79/tcp/36098/p2p/16Uiu2HAmKX2XmBeDp4UBoUqrEEvbJE6FPtzEhx1wxtQ5FESzqegi","/ip4/172.18.63.79/tcp/36099/ws/p2p/16Uiu2HAmKX2XmBeDp4UBoUqrEEvbJE6FPtzEhx1wxtQ5FESzqegi"],"enrUri":"enr:-L24QFMxfwohTEAmSCbyMtEplAmFLLlKhAnYvmOekt3PI1-JV72Lj7Tu3HgvJlNTmFnPmqkXPcXl4L1mbWw30AhbCb4CgmlkgnY0gmlwhKwSP0-KbXVsdGlhZGRyc5YACASsEj9PBo0CAAoErBI_TwaNA90DgnJzhQADAQAAiXNlY3AyNTZrMaEDZfegqVMIeGFrbFUgL14lnrIg_DEDrglWpRi53YmVviODdGNwgo0Cg3VkcIKNBIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-07_04-14-45__fa874064-8ae8-4c45-a4e6-54769c18bff6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.222.225
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['36237', '36238', '36239', '36240', '36241']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 36237:36237 -p 36238:36238 -p 36239:36239 -p 36240:36240 -p 36241:36241 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36239 --rest-port=36237 --tcp-port=36238 --discv5-udp-port=36240 --rest-address=0.0.0.0 --nat=extip:172.18.222.225 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2ced25bea3c1f0697bad0da4e45aebec9cfc81cebecebe4b6c80ada5d41661df --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36241 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.222.225 waku 8560c35cde0851ad0036fcb6e5c90e58cc5a63efd21466aabcc067a66588a5c0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8560c35cde08. Setting up logs at ./log/docker/receiving_node2_2024-12-07_04-14-45__fa874064-8ae8-4c45-a4e6-54769c18bff6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 36237
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36237/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36237/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.222.225/tcp/36238/p2p/16Uiu2HAm1NrbqqRFtHq2qxzDY7qmweh7wDvr9CqnEribwde7wKEq","/ip4/172.18.222.225/tcp/36239/ws/p2p/16Uiu2HAm1NrbqqRFtHq2qxzDY7qmweh7wDvr9CqnEribwde7wKEq"],"enrUri":"enr:-L24QPt5RkxDH9S4Eb89-PExJWI0vwRGMqEryypDgLrd6YYWVQkgDh9Ee3vxDwKlxhd4ELxSd2Z2lg4PN8IInWaZEpUCgmlkgnY0gmlwhKwS3uGKbXVsdGlhZGRyc5YACASsEt7hBo2OAAoErBLe4QaNj90DgnJzhQADAQAAiXNlY3AyNTZrMaECWG1jkc-aWBrTSszi4903RL7QMlmnx-Avj3q3x8vRwpqDdGNwgo2Og3VkcIKNkIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36237/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.63.79/tcp/36098/p2p/16Uiu2HAmKX2XmBeDp4UBoUqrEEvbJE6FPtzEhx1wxtQ5FESzqegi"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-07_04-14-45__fa874064-8ae8-4c45-a4e6-54769c18bff6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.47.236
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['43171', '43172', '43173', '43174', '43175']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 43171:43171 -p 43172:43172 -p 43173:43173 -p 43174:43174 -p 43175:43175 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43173 --rest-port=43171 --tcp-port=43172 --discv5-udp-port=43174 --rest-address=0.0.0.0 --nat=extip:172.18.47.236 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c79a2ab1ca550f4d42b2bcd62de18bfdae6deb9fa3b5bf0970b3adaef63fd302 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43175 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFMxfwohTEAmSCbyMtEplAmFLLlKhAnYvmOekt3PI1-JV72Lj7Tu3HgvJlNTmFnPmqkXPcXl4L1mbWw30AhbCb4CgmlkgnY0gmlwhKwSP0-KbXVsdGlhZGRyc5YACASsEj9PBo0CAAoErBI_TwaNA90DgnJzhQADAQAAiXNlY3AyNTZrMaEDZfegqVMIeGFrbFUgL14lnrIg_DEDrglWpRi53YmVviODdGNwgo0Cg3VkcIKNBIV3YWt1Mgk --lightpushnode=/ip4/172.18.63.79/tcp/36098/p2p/16Uiu2HAmKX2XmBeDp4UBoUqrEEvbJE6FPtzEhx1wxtQ5FESzqegi --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.47.236 waku a6bf3da39cad9bcb94bec4de14b30569ecdc7323e3b68fe5caf8d15dba5523d4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a6bf3da39cad. Setting up logs at ./log/docker/lightpush_node1_2024-12-07_04-14-45__fa874064-8ae8-4c45-a4e6-54769c18bff6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 43171
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43171/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43171/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.47.236/tcp/43172/p2p/16Uiu2HAmG7bXRCavFU88SWpnJ3R1M6iWGwYg5kwtZEfWQHXCnRfu","/ip4/172.18.47.236/tcp/43173/ws/p2p/16Uiu2HAmG7bXRCavFU88SWpnJ3R1M6iWGwYg5kwtZEfWQHXCnRfu"],"enrUri":"enr:-L24QI0AUHKymE97j22Bs9UteHG3c9t0Kz1obnoH75fM6lG8JBc7ax8iOK15B0unHvpH_WhoCcOkeWPZuG3KVUYSigECgmlkgnY0gmlwhKwSL-yKbXVsdGlhZGRyc5YACASsEi_sBqikAAoErBIv7Aaopd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDM2PvE1dUeQv0yQ_kEo3Rmie2z01xSj6BIhrqQJwDCCiDdGNwgqikg3VkcIKopoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43171/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.63.79/tcp/36098/p2p/16Uiu2HAmKX2XmBeDp4UBoUqrEEvbJE6FPtzEhx1wxtQ5FESzqegi"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43171/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.222.225/tcp/36238/p2p/16Uiu2HAm1NrbqqRFtHq2qxzDY7qmweh7wDvr9CqnEribwde7wKEq"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36097/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36237/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43171/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36097/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1733544891739239936,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36237/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1733544891739239936,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 137e046f0c48
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 8560c35cde08
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 137e046f0c48. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a6bf3da39cad
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 8560c35cde08. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.