[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_from_all_subscribed_content_topics with id: 2024-12-07_04-12-02__57cde7f3-c8ec-46a2-85d9-47313955212c
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-07_04-12-02__57cde7f3-c8ec-46a2-85d9-47313955212c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.98.140
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['55374', '55375', '55376', '55377', '55378']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 55374:55374 -p 55375:55375 -p 55376:55376 -p 55377:55377 -p 55378:55378 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55376 --rest-port=55374 --tcp-port=55375 --discv5-udp-port=55377 --rest-address=0.0.0.0 --nat=extip:172.18.98.140 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=adb4cf67b44fdec9bed4ea4eecb924ddedbcbcae06fce62035afeea039d7fb67 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55378 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.98.140 waku 1f4a9602ecad1294cc614dddc1403ed63f9cf9c636d6ec5521f92b07a1593d80
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1f4a9602ecad. Setting up logs at ./log/docker/node1_2024-12-07_04-12-02__57cde7f3-c8ec-46a2-85d9-47313955212c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 55374
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6297d8323eeb. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55374/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55374/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.98.140/tcp/55375/p2p/16Uiu2HAkvmteAPCXNmotJA7cSNq7orQYrpfAxRG89kQ2JiERuP37","/ip4/172.18.98.140/tcp/55376/ws/p2p/16Uiu2HAkvmteAPCXNmotJA7cSNq7orQYrpfAxRG89kQ2JiERuP37"],"enrUri":"enr:-L24QIjAyVorc4yHFq1Wb6VTavuOvi--EXz8PXGHWl6Tp9ofHQCqSb7RPHM95XBI9LQGhw2Tf6dmBOxBHOCO0gUObp8CgmlkgnY0gmlwhKwSYoyKbXVsdGlhZGRyc5YACASsEmKMBthPAAoErBJijAbYUN0DgnJzhQADAQAAiXNlY3AyNTZrMaECFAmemvRBtd9vUdUnzW3O7N2DCNfGMSUw36HVEairChKDdGNwgthPg3VkcILYUYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-07_04-12-02__57cde7f3-c8ec-46a2-85d9-47313955212c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.87.77
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['24746', '24747', '24748', '24749', '24750']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 24746:24746 -p 24747:24747 -p 24748:24748 -p 24749:24749 -p 24750:24750 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24748 --rest-port=24746 --tcp-port=24747 --discv5-udp-port=24749 --rest-address=0.0.0.0 --nat=extip:172.18.87.77 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=785dcc6abc2f7a4dbd2991bfd76acde979aca1b75dc51731c0da14c1d334ccdf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24750 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QIjAyVorc4yHFq1Wb6VTavuOvi--EXz8PXGHWl6Tp9ofHQCqSb7RPHM95XBI9LQGhw2Tf6dmBOxBHOCO0gUObp8CgmlkgnY0gmlwhKwSYoyKbXVsdGlhZGRyc5YACASsEmKMBthPAAoErBJijAbYUN0DgnJzhQADAQAAiXNlY3AyNTZrMaECFAmemvRBtd9vUdUnzW3O7N2DCNfGMSUw36HVEairChKDdGNwgthPg3VkcILYUYV3YWt1MgU --filternode=/ip4/172.18.98.140/tcp/55375/p2p/16Uiu2HAkvmteAPCXNmotJA7cSNq7orQYrpfAxRG89kQ2JiERuP37
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.87.77 waku f1eabf534ecf4c636757c11203ac4050800b039fd5200725faba5e794c731490
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f1eabf534ecf. Setting up logs at ./log/docker/node2_2024-12-07_04-12-02__57cde7f3-c8ec-46a2-85d9-47313955212c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 24746
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24746/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24746/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.87.77/tcp/24747/p2p/16Uiu2HAkwPvpKvzYXKFuPFRokvejznT3tHMZcG3kacddnBwJr31k","/ip4/172.18.87.77/tcp/24748/ws/p2p/16Uiu2HAkwPvpKvzYXKFuPFRokvejznT3tHMZcG3kacddnBwJr31k"],"enrUri":"enr:-L24QDCbSlW1UWNEJxQml_DHQC3z91IgV98EVSPxFuB2QcdwQWZxGBuF-iZJ4rA7eMg8vQ8uq98V0VwNsp6u1GfnsygCgmlkgnY0gmlwhKwSV02KbXVsdGlhZGRyc5YACASsEldNBmCrAAoErBJXTQZgrN0DgnJzhQADAQAAiXNlY3AyNTZrMaECHUT8_Y-t982CR1163Isx9tUmd6x7d0hWrURoUBHV0OuDdGNwgmCrg3VkcIJgrYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24746/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.98.140/tcp/55375/p2p/16Uiu2HAkvmteAPCXNmotJA7cSNq7orQYrpfAxRG89kQ2JiERuP37"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55374/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24746/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "28499fce-48d0-4026-be18-6b3cfaae2fd5", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"28499fce-48d0-4026-be18-6b3cfaae2fd5","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55374/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24746/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "6d67b71f-ae6d-4353-a0e7-3c37ba89efa6", "contentFilters": ["Hello World!", "1234567890"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"6d67b71f-ae6d-4353-a0e7-3c37ba89efa6","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55374/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24746/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1733544725825021440,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:24746/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["Hello World!", "1234567890"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55374/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24746/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:24746/filter/v2/messages/1234567890. Response content: b'Not subscribed to topic: 1234567890'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1f4a9602ecad
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f1eabf534ecf
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1f4a9602ecad. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.