[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_to_pubsub_topics_from_multiple_clusters with id: 2024-12-07_04-10-49__c1ae709b-128f-4fb5-a919-bf1a54d853af
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-07_04-10-49__c1ae709b-128f-4fb5-a919-bf1a54d853af__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.231.160
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['57034', '57035', '57036', '57037', '57038']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 57034:57034 -p 57035:57035 -p 57036:57036 -p 57037:57037 -p 57038:57038 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57036 --rest-port=57034 --tcp-port=57035 --discv5-udp-port=57037 --rest-address=0.0.0.0 --nat=extip:172.18.231.160 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d12dd9b7c79bfe03dad78ecea9bdfdab8fdd0cdbad4cd8f3ee8fe4b7f59ce73a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57038 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.231.160 waku aa40c84fb50bf2e5ead04dcc3d9ce8523842a4816ce407cf8e5e004e6c666b8c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID aa40c84fb50b. Setting up logs at ./log/docker/node1_2024-12-07_04-10-49__c1ae709b-128f-4fb5-a919-bf1a54d853af__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 57034
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 625c1f695f96. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57034/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57034/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.231.160/tcp/57035/p2p/16Uiu2HAkzpNw3LXnQHQyBhes5855MrhjsBP7Pfuzw4X5kkN29zCD","/ip4/172.18.231.160/tcp/57036/ws/p2p/16Uiu2HAkzpNw3LXnQHQyBhes5855MrhjsBP7Pfuzw4X5kkN29zCD"],"enrUri":"enr:-L24QL1AuD3xw0eoB-RvElNyl0pfC7NRuOlO7uQsqB6a-vv3Oa2L0_T2NB8Ck_6iRIqc4f-GhfmZXL98B8nVgNq5AT8CgmlkgnY0gmlwhKwS56CKbXVsdGlhZGRyc5YACASsEuegBt7LAAoErBLnoAbezN0DgnJzhQADAQAAiXNlY3AyNTZrMaECUBuEgtNPDAmCvY_9X1KM8YyLL2sXMi_FCYXlR3avoD6DdGNwgt7Lg3VkcILezYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-07_04-10-49__c1ae709b-128f-4fb5-a919-bf1a54d853af__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.197.54
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['18320', '18321', '18322', '18323', '18324']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 18320:18320 -p 18321:18321 -p 18322:18322 -p 18323:18323 -p 18324:18324 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18322 --rest-port=18320 --tcp-port=18321 --discv5-udp-port=18323 --rest-address=0.0.0.0 --nat=extip:172.18.197.54 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a20dedff21bef6f3d0c6d64a924d9beddb518393ba51ba0aa13aa46ceddfd51f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18324 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QL1AuD3xw0eoB-RvElNyl0pfC7NRuOlO7uQsqB6a-vv3Oa2L0_T2NB8Ck_6iRIqc4f-GhfmZXL98B8nVgNq5AT8CgmlkgnY0gmlwhKwS56CKbXVsdGlhZGRyc5YACASsEuegBt7LAAoErBLnoAbezN0DgnJzhQADAQAAiXNlY3AyNTZrMaECUBuEgtNPDAmCvY_9X1KM8YyLL2sXMi_FCYXlR3avoD6DdGNwgt7Lg3VkcILezYV3YWt1MgU --filternode=/ip4/172.18.231.160/tcp/57035/p2p/16Uiu2HAkzpNw3LXnQHQyBhes5855MrhjsBP7Pfuzw4X5kkN29zCD
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.197.54 waku c29d651d516d5abb4dd7f89e10ca574b6411b4f79773fae3e3f9e11730201999
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c29d651d516d. Setting up logs at ./log/docker/node2_2024-12-07_04-10-49__c1ae709b-128f-4fb5-a919-bf1a54d853af__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 18320
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18320/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18320/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.197.54/tcp/18321/p2p/16Uiu2HAm5Rrn32ny7S7eRRdGDL5JDuerU2HyEHhrDmQnrpoxYXLp","/ip4/172.18.197.54/tcp/18322/ws/p2p/16Uiu2HAm5Rrn32ny7S7eRRdGDL5JDuerU2HyEHhrDmQnrpoxYXLp"],"enrUri":"enr:-L24QOkbxTX8LljPM5StqNOuU33g66rHGDGUx6yUsuQEcZDNad-K_9YIoPLpuNn2fJfji9uhjfcoj2W3opauDCLbP_8CgmlkgnY0gmlwhKwSxTaKbXVsdGlhZGRyc5YACASsEsU2BkeRAAoErBLFNgZHkt0DgnJzhQADAQAAiXNlY3AyNTZrMaEClKET6fDXYgHOzAXP93EjhDBffpPWmv2FXBAxyZSzNf2DdGNwgkeRg3VkcIJHk4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18320/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.231.160/tcp/57035/p2p/16Uiu2HAkzpNw3LXnQHQyBhes5855MrhjsBP7Pfuzw4X5kkN29zCD"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57034/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18320/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "7618d3c1-89cd-476a-b6c6-2e0d854bf1bf", "contentFilters": ["/waku/2/rs/3/1"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"7618d3c1-89cd-476a-b6c6-2e0d854bf1bf","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57034/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/1", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18320/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/1","version":0,"timestamp":1733544652246327552,"ephemeral":false}]'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/2/2
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57034/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18320/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "16a43431-e192-48e5-ad9a-cc68662de8f1", "contentFilters": ["/waku/2/rs/2/2"], "pubsubTopic": "/waku/2/rs/2/2"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"16a43431-e192-48e5-ad9a-cc68662de8f1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57034/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/2/2", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18320/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/2/2","version":0,"timestamp":1733544652392856064,"ephemeral":false}]'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/3/9
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57034/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18320/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "a0de23f6-795d-4f3c-a7f4-d1c64b91374b", "contentFilters": ["/waku/2/rs/3/9"], "pubsubTopic": "/waku/2/rs/3/9"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"a0de23f6-795d-4f3c-a7f4-d1c64b91374b","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57034/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/9", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18320/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/9","version":0,"timestamp":1733544652522155776,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id aa40c84fb50b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c29d651d516d
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container aa40c84fb50b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.