2025-02-16 04:05:04.480 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:05:04.481 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_from_non_existing_pubsub_topic with id: 2025-02-16_04-05-04__ec3e26ad-e151-4014-9962-dddaffcc09b4
2025-02-16 04:05:04.481 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:05:04.481 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-16 04:05:04.481 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-16 04:05:04.487 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:05:04.487 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-16_04-05-04__ec3e26ad-e151-4014-9962-dddaffcc09b4__wakuorg_nwaku:latest.log
2025-02-16 04:05:04.487 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:05:04.487 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:05:04.489 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:05:04.489 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.202.193
2025-02-16 04:05:04.489 DEBUG [src.node.docker_mananger] Generated ports ['49349', '49350', '49351', '49352', '49353']
2025-02-16 04:05:04.489 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:05:04.489 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:05:04.489 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:05:04.490 DEBUG [src.node.docker_mananger] docker run -i -t -p 49349:49349 -p 49350:49350 -p 49351:49351 -p 49352:49352 -p 49353:49353 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49351 --rest-port=49349 --tcp-port=49350 --discv5-udp-port=49352 --rest-address=0.0.0.0 --nat=extip:172.18.202.193 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ad84fd1ddccf9032af5127fbf03b8dfef43ff7bc0440ca9db47eadcb039c7f22 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49353 --metrics-logging=true --relay=true --filter=true
2025-02-16 04:05:04.707 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.202.193 waku 24763e0ae0ba0d9fa90e2bbd8e751cf5252931ad30fccf9caef0b9c258581c73
2025-02-16 04:05:04.753 DEBUG [src.node.docker_mananger] Container started with ID 24763e0ae0ba. Setting up logs at ./log/docker/node1_2025-02-16_04-05-04__ec3e26ad-e151-4014-9962-dddaffcc09b4__wakuorg_nwaku:latest.log
2025-02-16 04:05:04.754 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49349
2025-02-16 04:05:04.754 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:05:05.287 ERROR [src.node.docker_mananger] Max retries reached for container cf27b335dfcf. Exiting log stream.
2025-02-16 04:05:05.755 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49349/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:05.758 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:05:05.758 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:05:05.758 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49349/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:05.760 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.202.193/tcp/49350/p2p/16Uiu2HAmR3viiBpp9jG22i3fA33NDLnTifM78rgqXFzrmh6hoovn","/ip4/172.18.202.193/tcp/49351/ws/p2p/16Uiu2HAmR3viiBpp9jG22i3fA33NDLnTifM78rgqXFzrmh6hoovn"],"enrUri":"enr:-L24QP6zQ82bZ8M0Au42kFPTxAymShXgiVaDBGsmOFLFcxXPL8j8Qm_2iqePLmFTFj_1AmV1IF3Ay7nMbgTsuKb2gDICgmlkgnY0gmlwhKwSysGKbXVsdGlhZGRyc5YACASsEsrBBsDGAAoErBLKwQbAx90DgnJzhQADAQAAiXNlY3AyNTZrMaEDuCx_G2Lq9t0PUUo_RVIXS4DCrcTpBf7a2c6hT7KLfXeDdGNwgsDGg3VkcILAyIV3YWt1MgU"}'
2025-02-16 04:05:05.761 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:05:05.761 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-16 04:05:05.767 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:05:05.767 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-16_04-05-04__ec3e26ad-e151-4014-9962-dddaffcc09b4__wakuorg_nwaku:latest.log
2025-02-16 04:05:05.767 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:05:05.767 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:05:05.769 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:05:05.769 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.59.172
2025-02-16 04:05:05.769 DEBUG [src.node.docker_mananger] Generated ports ['26618', '26619', '26620', '26621', '26622']
2025-02-16 04:05:05.769 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:05:05.769 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:05:05.769 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:05:05.769 DEBUG [src.node.docker_mananger] docker run -i -t -p 26618:26618 -p 26619:26619 -p 26620:26620 -p 26621:26621 -p 26622:26622 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26620 --rest-port=26618 --tcp-port=26619 --discv5-udp-port=26621 --rest-address=0.0.0.0 --nat=extip:172.18.59.172 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=36f8dbeaf5fcd6acbba8e2ab4a6c1e4bfa4fdfc4da7d737c4eecc44358dcdee2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26622 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QP6zQ82bZ8M0Au42kFPTxAymShXgiVaDBGsmOFLFcxXPL8j8Qm_2iqePLmFTFj_1AmV1IF3Ay7nMbgTsuKb2gDICgmlkgnY0gmlwhKwSysGKbXVsdGlhZGRyc5YACASsEsrBBsDGAAoErBLKwQbAx90DgnJzhQADAQAAiXNlY3AyNTZrMaEDuCx_G2Lq9t0PUUo_RVIXS4DCrcTpBf7a2c6hT7KLfXeDdGNwgsDGg3VkcILAyIV3YWt1MgU --filternode=/ip4/172.18.202.193/tcp/49350/p2p/16Uiu2HAmR3viiBpp9jG22i3fA33NDLnTifM78rgqXFzrmh6hoovn
2025-02-16 04:05:05.999 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.59.172 waku c865733fc6e0b34954b0d04c6cdc175895166129b7aec0127174f57c1dbd6db6
2025-02-16 04:05:06.046 DEBUG [src.node.docker_mananger] Container started with ID c865733fc6e0. Setting up logs at ./log/docker/node2_2025-02-16_04-05-04__ec3e26ad-e151-4014-9962-dddaffcc09b4__wakuorg_nwaku:latest.log
2025-02-16 04:05:06.047 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26618
2025-02-16 04:05:06.047 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:05:07.047 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26618/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:07.050 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:05:07.050 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:05:07.050 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26618/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:07.053 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.59.172/tcp/26619/p2p/16Uiu2HAmQyhkeCAbCnbXnDNPDYJfHkymw7Wprpqshqm8pu1ZPWYe","/ip4/172.18.59.172/tcp/26620/ws/p2p/16Uiu2HAmQyhkeCAbCnbXnDNPDYJfHkymw7Wprpqshqm8pu1ZPWYe"],"enrUri":"enr:-L24QJynEjIZ-35KmVjLoZQSYalQRuvsXdWkQ2biwuS8gkj2fDT1jhvYwgFlSUTYRYpBlfdHaWFVmTbltf8W5vF85aECgmlkgnY0gmlwhKwSO6yKbXVsdGlhZGRyc5YACASsEjusBmf7AAoErBI7rAZn_N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDtxeDA7xU3RdQIeYzKITrvn_itg4TEyFvXjqpPgTsdy-DdGNwgmf7g3VkcIJn_YV3YWt1MgA"}'
2025-02-16 04:05:07.053 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:05:07.053 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26618/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.202.193/tcp/49350/p2p/16Uiu2HAmR3viiBpp9jG22i3fA33NDLnTifM78rgqXFzrmh6hoovn"]'
2025-02-16 04:05:07.088 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:07.090 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-16 04:05:07.091 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49349/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:05:07.110 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:07.111 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26618/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "8c3e49e2-2323-41d1-8b83-d94f46532142", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-16 04:05:07.124 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"8c3e49e2-2323-41d1-8b83-d94f46532142","statusDesc":"OK"}'
2025-02-16 04:05:07.125 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:26618/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/waku/2/rs/3/1"], "pubsubTopic": "/waku/2/rs/3/9"}'
2025-02-16 04:05:07.132 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:26618/filter/v2/subscriptions. Response content: b'{"requestId":"1","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
2025-02-16 04:05:07.133 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49349/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:07.140 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:07.140 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-16 04:05:07.241 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-16 04:05:07.241 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26618/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:07.244 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1739678707133564928,"ephemeral":false}]'
2025-02-16 04:05:07.246 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:05:07.247 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:05:07.247 DEBUG [src.node.waku_node] Stopping container with id 24763e0ae0ba
2025-02-16 04:05:08.329 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:05:08.331 DEBUG [src.node.waku_node] Stopping container with id c865733fc6e0
2025-02-16 04:05:09.141 ERROR [src.node.docker_mananger] Max retries reached for container 24763e0ae0ba. Exiting log stream.
2025-02-16 04:05:09.823 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:05:09.825 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:05:09.830 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:05:09.834 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
