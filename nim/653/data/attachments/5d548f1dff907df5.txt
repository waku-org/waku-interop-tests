2025-02-16 04:05:01.456 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:05:01.456 DEBUG [tests.conftest] Running test: test_light_push_with_payload_less_than_150_kb with id: 2025-02-16_04-05-01__6fb844c1-e75f-4bc8-9417-f56c489730ac
2025-02-16 04:05:01.456 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:05:01.456 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-16 04:05:01.463 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:05:01.463 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-16_04-05-01__6fb844c1-e75f-4bc8-9417-f56c489730ac__wakuorg_nwaku:latest.log
2025-02-16 04:05:01.463 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:05:01.463 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:05:01.464 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:05:01.464 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.84.0
2025-02-16 04:05:01.465 DEBUG [src.node.docker_mananger] Generated ports ['1219', '1220', '1221', '1222', '1223']
2025-02-16 04:05:01.465 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:05:01.465 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:05:01.465 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:05:01.465 DEBUG [src.node.docker_mananger] docker run -i -t -p 1219:1219 -p 1220:1220 -p 1221:1221 -p 1222:1222 -p 1223:1223 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1221 --rest-port=1219 --tcp-port=1220 --discv5-udp-port=1222 --rest-address=0.0.0.0 --nat=extip:172.18.84.0 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bb1ff019ac31cc0962de16e82bff3eabb79ceaf4834b74acebad17240dcf64fb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1223 --metrics-logging=true --lightpush=true --relay=true
2025-02-16 04:05:01.693 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.84.0 waku b68fa7ffa414a167fbcdcbf366b2562ebcd1c26333db8ca39476893ce049522b
2025-02-16 04:05:01.744 DEBUG [src.node.docker_mananger] Container started with ID b68fa7ffa414. Setting up logs at ./log/docker/receiving_node1_2025-02-16_04-05-01__6fb844c1-e75f-4bc8-9417-f56c489730ac__wakuorg_nwaku:latest.log
2025-02-16 04:05:01.746 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 1219
2025-02-16 04:05:01.746 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:05:02.263 ERROR [src.node.docker_mananger] Max retries reached for container 4d87a4cdb200. Exiting log stream.
2025-02-16 04:05:02.746 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1219/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:02.749 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:05:02.749 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:05:02.749 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1219/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:02.752 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.0/tcp/1220/p2p/16Uiu2HAmKTMcZuiqZbcF9vsZmqXaKuWrTuuJk9ERuWi5QwRwMuGh","/ip4/172.18.84.0/tcp/1221/ws/p2p/16Uiu2HAmKTMcZuiqZbcF9vsZmqXaKuWrTuuJk9ERuWi5QwRwMuGh"],"enrUri":"enr:-L24QKAuQA4olmaKibU0aT4G7loupgSaxpDiT3HulAgTJH27V7Z97CZnWbF3K0xYi9YEZI-N71h157nCpURmfcbwLpkCgmlkgnY0gmlwhKwSVACKbXVsdGlhZGRyc5YACASsElQABgTEAAoErBJUAAYExd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDZQbho3ranWaL2C8v3nSdDdelQGeYT0brGNjTlwGoB16DdGNwggTEg3VkcIIExoV3YWt1Mgk"}'
2025-02-16 04:05:02.752 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:05:02.758 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:05:02.758 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-16_04-05-01__6fb844c1-e75f-4bc8-9417-f56c489730ac__wakuorg_nwaku:latest.log
2025-02-16 04:05:02.758 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:05:02.758 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:05:02.760 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:05:02.760 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.219.112
2025-02-16 04:05:02.760 DEBUG [src.node.docker_mananger] Generated ports ['64438', '64439', '64440', '64441', '64442']
2025-02-16 04:05:02.760 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:05:02.760 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:05:02.760 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:05:02.761 DEBUG [src.node.docker_mananger] docker run -i -t -p 64438:64438 -p 64439:64439 -p 64440:64440 -p 64441:64441 -p 64442:64442 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64440 --rest-port=64438 --tcp-port=64439 --discv5-udp-port=64441 --rest-address=0.0.0.0 --nat=extip:172.18.219.112 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9f27e5e9b9d90f35ac57db05dcf1ee7d49aa4ca10c3e5fccd9108ad29f040f6b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64442 --metrics-logging=true --lightpush=false --relay=true
2025-02-16 04:05:03.003 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.219.112 waku 270bdedf02da0846d62ef8d04eed3e671efb45226b671714d4634fe71df2fd61
2025-02-16 04:05:03.060 DEBUG [src.node.docker_mananger] Container started with ID 270bdedf02da. Setting up logs at ./log/docker/receiving_node2_2025-02-16_04-05-01__6fb844c1-e75f-4bc8-9417-f56c489730ac__wakuorg_nwaku:latest.log
2025-02-16 04:05:03.060 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 64438
2025-02-16 04:05:03.061 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:05:04.062 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64438/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:04.064 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:05:04.064 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:05:04.065 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64438/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:04.067 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.219.112/tcp/64439/p2p/16Uiu2HAkuyhmseKDxZVWTWR2aFKTdGEMvuJc9JEpYA3moEud8qVD","/ip4/172.18.219.112/tcp/64440/ws/p2p/16Uiu2HAkuyhmseKDxZVWTWR2aFKTdGEMvuJc9JEpYA3moEud8qVD"],"enrUri":"enr:-L24QNlea5IdZ4eHtShAbYLa2284ugSWzOSE0--docxO-hv1GSIShSpb-ZM1WLGrdSAnmOaoXyKgosPXjAsqQ-FdGtwCgmlkgnY0gmlwhKwS23CKbXVsdGlhZGRyc5YACASsEttwBvu3AAoErBLbcAb7uN0DgnJzhQADAQAAiXNlY3AyNTZrMaECCDSda-OM1ICiKQxTvgVcNTaARNx3uE6MdNjQG0EsrzyDdGNwgvu3g3VkcIL7uYV3YWt1MgE"}'
2025-02-16 04:05:04.067 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:05:04.067 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64438/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.84.0/tcp/1220/p2p/16Uiu2HAmKTMcZuiqZbcF9vsZmqXaKuWrTuuJk9ERuWi5QwRwMuGh"]'
2025-02-16 04:05:04.107 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:04.115 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:05:04.115 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-16_04-05-01__6fb844c1-e75f-4bc8-9417-f56c489730ac__wakuorg_nwaku:latest.log
2025-02-16 04:05:04.116 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:05:04.116 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:05:04.117 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:05:04.117 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.194.67
2025-02-16 04:05:04.117 DEBUG [src.node.docker_mananger] Generated ports ['11813', '11814', '11815', '11816', '11817']
2025-02-16 04:05:04.118 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:05:04.118 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:05:04.118 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:05:04.118 DEBUG [src.node.docker_mananger] docker run -i -t -p 11813:11813 -p 11814:11814 -p 11815:11815 -p 11816:11816 -p 11817:11817 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11815 --rest-port=11813 --tcp-port=11814 --discv5-udp-port=11816 --rest-address=0.0.0.0 --nat=extip:172.18.194.67 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e7bc5a1790fde4a2dd16fa35ee8632ad8c8b349f06a777cddc4deb2452e5ad5e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11817 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QKAuQA4olmaKibU0aT4G7loupgSaxpDiT3HulAgTJH27V7Z97CZnWbF3K0xYi9YEZI-N71h157nCpURmfcbwLpkCgmlkgnY0gmlwhKwSVACKbXVsdGlhZGRyc5YACASsElQABgTEAAoErBJUAAYExd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDZQbho3ranWaL2C8v3nSdDdelQGeYT0brGNjTlwGoB16DdGNwggTEg3VkcIIExoV3YWt1Mgk --lightpushnode=/ip4/172.18.84.0/tcp/1220/p2p/16Uiu2HAmKTMcZuiqZbcF9vsZmqXaKuWrTuuJk9ERuWi5QwRwMuGh --lightpush=true --relay=false
2025-02-16 04:05:04.360 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.194.67 waku 8365e80b0c83bc9e9063c40abd35d2185e5f4811e14a70cf118d74b5c9cd8c52
2025-02-16 04:05:04.408 DEBUG [src.node.docker_mananger] Container started with ID 8365e80b0c83. Setting up logs at ./log/docker/lightpush_node1_2025-02-16_04-05-01__6fb844c1-e75f-4bc8-9417-f56c489730ac__wakuorg_nwaku:latest.log
2025-02-16 04:05:04.409 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11813
2025-02-16 04:05:04.409 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:05:05.409 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11813/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:05.412 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:05:05.412 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:05:05.413 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11813/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:05.415 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.194.67/tcp/11814/p2p/16Uiu2HAmTnKeEPiRjLp8HjfE1nvBtVhFsKHo9SoEct63jGgg6XGo","/ip4/172.18.194.67/tcp/11815/ws/p2p/16Uiu2HAmTnKeEPiRjLp8HjfE1nvBtVhFsKHo9SoEct63jGgg6XGo"],"enrUri":"enr:-L24QPoc5Fw9vslufmY8WhAgSC74RQHnWMDcg5ndhzuuH_uCL5sBF8_pKRCKSzKd-kL8QNhArchvc8u506qYdzHbuJwCgmlkgnY0gmlwhKwSwkOKbXVsdGlhZGRyc5YACASsEsJDBi4mAAoErBLCQwYuJ90DgnJzhQADAQAAiXNlY3AyNTZrMaED4MAu5p2jebuePzqtfyVFNy4Jh3m0m2fEw7D6DAvIyCSDdGNwgi4mg3VkcIIuKIV3YWt1Mgg"}'
2025-02-16 04:05:05.415 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:05:05.415 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11813/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.84.0/tcp/1220/p2p/16Uiu2HAmKTMcZuiqZbcF9vsZmqXaKuWrTuuJk9ERuWi5QwRwMuGh"]'
2025-02-16 04:05:05.449 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:05.449 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11813/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.219.112/tcp/64439/p2p/16Uiu2HAkuyhmseKDxZVWTWR2aFKTdGEMvuJc9JEpYA3moEud8qVD"]'
2025-02-16 04:05:05.479 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:05.483 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1219/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:05:05.492 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:05.492 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64438/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:05:05.496 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:05.497 DEBUG [tests.light_push.test_publish] Running test with payload length of 143360 bytes
2025-02-16 04:05:05.499 DEBUG [src.steps.light_push] Lightpushing message
2025-02-16 04:05:05.500 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-16 04:05:05.655 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:05.655 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-16 04:05:05.756 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-16 04:05:05.756 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1219/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:05.761 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-16 04:05:05.763 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-16 04:05:05.763 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64438/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:05.768 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-16 04:05:05.772 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:05:05.773 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:05:05.773 DEBUG [src.node.waku_node] Stopping container with id b68fa7ffa414
2025-02-16 04:05:07.242 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:05:07.244 DEBUG [src.node.waku_node] Stopping container with id 270bdedf02da
2025-02-16 04:05:08.078 ERROR [src.node.docker_mananger] Max retries reached for container b68fa7ffa414. Exiting log stream.
2025-02-16 04:05:08.763 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:05:08.764 DEBUG [src.node.waku_node] Stopping container with id 8365e80b0c83
2025-02-16 04:05:09.599 ERROR [src.node.docker_mananger] Max retries reached for container 270bdedf02da. Exiting log stream.
2025-02-16 04:05:10.262 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:05:10.263 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:05:10.277 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:05:10.292 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:05:10.316 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
