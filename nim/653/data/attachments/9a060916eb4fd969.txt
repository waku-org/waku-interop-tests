2025-02-16 04:04:18.534 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:04:18.534 DEBUG [tests.conftest] Running test: test_light_push_with_with_large_meta with id: 2025-02-16_04-04-18__bcfcaf36-0ca0-48e2-8873-e8056fbf332d
2025-02-16 04:04:18.534 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:04:18.535 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-16 04:04:18.542 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:04:18.542 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-16_04-04-18__bcfcaf36-0ca0-48e2-8873-e8056fbf332d__wakuorg_nwaku:latest.log
2025-02-16 04:04:18.542 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:04:18.542 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:04:18.543 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:04:18.543 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.187.79
2025-02-16 04:04:18.544 DEBUG [src.node.docker_mananger] Generated ports ['53576', '53577', '53578', '53579', '53580']
2025-02-16 04:04:18.544 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:04:18.544 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:04:18.544 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:04:18.544 DEBUG [src.node.docker_mananger] docker run -i -t -p 53576:53576 -p 53577:53577 -p 53578:53578 -p 53579:53579 -p 53580:53580 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53578 --rest-port=53576 --tcp-port=53577 --discv5-udp-port=53579 --rest-address=0.0.0.0 --nat=extip:172.18.187.79 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5d44c21e52936cd56afba373ab3721d11ccfbc3197be3ffaae18d6b682b7aadb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53580 --metrics-logging=true --lightpush=true --relay=true
2025-02-16 04:04:18.788 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.187.79 waku 0a92256c95f19535bc150d08ab4f18bfbe0684a59c201b790b6884e1ae11ee56
2025-02-16 04:04:18.840 DEBUG [src.node.docker_mananger] Container started with ID 0a92256c95f1. Setting up logs at ./log/docker/receiving_node1_2025-02-16_04-04-18__bcfcaf36-0ca0-48e2-8873-e8056fbf332d__wakuorg_nwaku:latest.log
2025-02-16 04:04:18.841 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53576
2025-02-16 04:04:18.843 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:04:19.272 ERROR [src.node.docker_mananger] Max retries reached for container 0eb1169c2965. Exiting log stream.
2025-02-16 04:04:19.843 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53576/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:19.846 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:04:19.846 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:04:19.846 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53576/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:19.849 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.187.79/tcp/53577/p2p/16Uiu2HAmLf6T7EaoNSSwdhwdiYJsZu6CVs8EoTFcoYp8e7igjpCc","/ip4/172.18.187.79/tcp/53578/ws/p2p/16Uiu2HAmLf6T7EaoNSSwdhwdiYJsZu6CVs8EoTFcoYp8e7igjpCc"],"enrUri":"enr:-L24QPPmdb3Zqgw6fb4P1bUDFmXy6LaZGcRaVELRASk81PPhVV9ugrHbVFIGGoEfWWPnpWnPVGptjvzVatbYm_6TipYCgmlkgnY0gmlwhKwSu0-KbXVsdGlhZGRyc5YACASsErtPBtFJAAoErBK7TwbRSt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDduRkn7aGshPZLa_3O-ghcU_8sEQ9WzGig5dVwauEPd2DdGNwgtFJg3VkcILRS4V3YWt1Mgk"}'
2025-02-16 04:04:19.849 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:04:19.855 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:04:19.856 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-16_04-04-18__bcfcaf36-0ca0-48e2-8873-e8056fbf332d__wakuorg_nwaku:latest.log
2025-02-16 04:04:19.856 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:04:19.856 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:04:19.857 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:04:19.857 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.89.223
2025-02-16 04:04:19.858 DEBUG [src.node.docker_mananger] Generated ports ['18201', '18202', '18203', '18204', '18205']
2025-02-16 04:04:19.858 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:04:19.858 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:04:19.858 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:04:19.858 DEBUG [src.node.docker_mananger] docker run -i -t -p 18201:18201 -p 18202:18202 -p 18203:18203 -p 18204:18204 -p 18205:18205 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18203 --rest-port=18201 --tcp-port=18202 --discv5-udp-port=18204 --rest-address=0.0.0.0 --nat=extip:172.18.89.223 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=85d365f2ab159a00b78f8bdcc93ebf0361df5f0f9dff9fdef3c3d45112d74e1f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18205 --metrics-logging=true --lightpush=false --relay=true
2025-02-16 04:04:20.082 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.89.223 waku 5810fc1ec1f677327ae91250fb5d77cc51f45d0867cedce652a7aea9fd475448
2025-02-16 04:04:20.132 DEBUG [src.node.docker_mananger] Container started with ID 5810fc1ec1f6. Setting up logs at ./log/docker/receiving_node2_2025-02-16_04-04-18__bcfcaf36-0ca0-48e2-8873-e8056fbf332d__wakuorg_nwaku:latest.log
2025-02-16 04:04:20.132 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18201
2025-02-16 04:04:20.133 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:04:21.133 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18201/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:21.136 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:04:21.136 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:04:21.136 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18201/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:21.139 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.89.223/tcp/18202/p2p/16Uiu2HAmKQfJsTha1rgNERmkZ1pEg5jmsuGrK4eqj7Ew1topidH2","/ip4/172.18.89.223/tcp/18203/ws/p2p/16Uiu2HAmKQfJsTha1rgNERmkZ1pEg5jmsuGrK4eqj7Ew1topidH2"],"enrUri":"enr:-L24QO7-c5zQc4Fw5CBpdMnyRCSN_LJDl87m30C7kf54k7mUG4Ta8bzdbeUAeyoi3IFyoaGC_mZOSUJQ-KKnBbQ4bqYCgmlkgnY0gmlwhKwSWd-KbXVsdGlhZGRyc5YACASsElnfBkcaAAoErBJZ3wZHG90DgnJzhQADAQAAiXNlY3AyNTZrMaEDZFYliYbIgpqGmrbG6XK37Xl-8BBwo5hyN9Mx61YlZImDdGNwgkcag3VkcIJHHIV3YWt1MgE"}'
2025-02-16 04:04:21.139 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:04:21.139 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18201/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.187.79/tcp/53577/p2p/16Uiu2HAmLf6T7EaoNSSwdhwdiYJsZu6CVs8EoTFcoYp8e7igjpCc"]'
2025-02-16 04:04:21.179 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:21.189 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:04:21.189 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-16_04-04-18__bcfcaf36-0ca0-48e2-8873-e8056fbf332d__wakuorg_nwaku:latest.log
2025-02-16 04:04:21.189 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:04:21.189 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:04:21.191 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:04:21.191 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.214.116
2025-02-16 04:04:21.191 DEBUG [src.node.docker_mananger] Generated ports ['30156', '30157', '30158', '30159', '30160']
2025-02-16 04:04:21.191 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:04:21.191 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:04:21.191 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:04:21.192 DEBUG [src.node.docker_mananger] docker run -i -t -p 30156:30156 -p 30157:30157 -p 30158:30158 -p 30159:30159 -p 30160:30160 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30158 --rest-port=30156 --tcp-port=30157 --discv5-udp-port=30159 --rest-address=0.0.0.0 --nat=extip:172.18.214.116 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1dc7842bbebadfb91d852cfa6643a824588b02be8d1b3a3702cbe612cab8adb9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30160 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QPPmdb3Zqgw6fb4P1bUDFmXy6LaZGcRaVELRASk81PPhVV9ugrHbVFIGGoEfWWPnpWnPVGptjvzVatbYm_6TipYCgmlkgnY0gmlwhKwSu0-KbXVsdGlhZGRyc5YACASsErtPBtFJAAoErBK7TwbRSt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDduRkn7aGshPZLa_3O-ghcU_8sEQ9WzGig5dVwauEPd2DdGNwgtFJg3VkcILRS4V3YWt1Mgk --lightpushnode=/ip4/172.18.187.79/tcp/53577/p2p/16Uiu2HAmLf6T7EaoNSSwdhwdiYJsZu6CVs8EoTFcoYp8e7igjpCc --lightpush=true --relay=false
2025-02-16 04:04:21.426 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.214.116 waku d60d893dbba00d9dc256bff3122b32fed564eb998339451185d2f95c21a04058
2025-02-16 04:04:21.472 DEBUG [src.node.docker_mananger] Container started with ID d60d893dbba0. Setting up logs at ./log/docker/lightpush_node1_2025-02-16_04-04-18__bcfcaf36-0ca0-48e2-8873-e8056fbf332d__wakuorg_nwaku:latest.log
2025-02-16 04:04:21.473 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 30156
2025-02-16 04:04:21.473 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:04:22.473 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30156/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:22.476 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:04:22.476 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:04:22.477 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30156/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:22.479 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.214.116/tcp/30157/p2p/16Uiu2HAmHRskb3Zmf2CSzwrBNY4N3NXMfn6jQigrsz7g7VbNgTMR","/ip4/172.18.214.116/tcp/30158/ws/p2p/16Uiu2HAmHRskb3Zmf2CSzwrBNY4N3NXMfn6jQigrsz7g7VbNgTMR"],"enrUri":"enr:-L24QEGkqSk-Jor5baJA5KdIbcjuVnRZ92RptTz4uyEVYz6zLqCwgz-giGpY7GHFXiGzsaerQ55vWcYJBujSQ7AEbNUCgmlkgnY0gmlwhKwS1nSKbXVsdGlhZGRyc5YACASsEtZ0BnXNAAoErBLWdAZ1zt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDRu5sYox7ELVtwAch8_4_BIlVOKN8ldH7AGAtGA_q3PCDdGNwgnXNg3VkcIJ1z4V3YWt1Mgg"}'
2025-02-16 04:04:22.479 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:04:22.479 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30156/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.187.79/tcp/53577/p2p/16Uiu2HAmLf6T7EaoNSSwdhwdiYJsZu6CVs8EoTFcoYp8e7igjpCc"]'
2025-02-16 04:04:22.515 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:22.516 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30156/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.89.223/tcp/18202/p2p/16Uiu2HAmKQfJsTha1rgNERmkZ1pEg5jmsuGrK4eqj7Ew1topidH2"]'
2025-02-16 04:04:22.540 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:22.543 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53576/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:04:22.550 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:22.551 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18201/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:04:22.558 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:22.561 DEBUG [src.steps.light_push] Lightpushing message
2025-02-16 04:04:22.561 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30156/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739678662561180416, "meta": "YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYQ=="}}'
2025-02-16 04:04:22.571 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:30156/lightpush/v1/message. Response content: b'Failed to request a message push: decode_rpc_failure: (kind: InvalidLengthField, field: "meta")'
2025-02-16 04:04:22.573 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:04:22.574 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:04:22.574 DEBUG [src.node.waku_node] Stopping container with id 0a92256c95f1
2025-02-16 04:04:23.249 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:04:23.249 DEBUG [src.node.waku_node] Stopping container with id 5810fc1ec1f6
2025-02-16 04:04:24.061 ERROR [src.node.docker_mananger] Max retries reached for container 0a92256c95f1. Exiting log stream.
2025-02-16 04:04:24.749 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:04:24.749 DEBUG [src.node.waku_node] Stopping container with id d60d893dbba0
2025-02-16 04:04:25.562 ERROR [src.node.docker_mananger] Max retries reached for container 5810fc1ec1f6. Exiting log stream.
2025-02-16 04:04:26.256 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:04:26.257 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:04:26.265 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:04:26.272 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:04:26.278 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
