2025-02-16 04:02:20.843 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:02:20.843 DEBUG [tests.conftest] Running test: test_relay_receiving_node_not_connected_directly_to_relaying_node with id: 2025-02-16_04-02-20__7c09db36-2939-436d-b5e9-0d7834a93336
2025-02-16 04:02:20.844 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:02:20.844 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-16 04:02:20.844 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-16 04:02:20.853 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:02:20.853 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-16_04-02-20__7c09db36-2939-436d-b5e9-0d7834a93336__wakuorg_nwaku:latest.log
2025-02-16 04:02:20.858 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:02:20.859 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-16_04-02-20__7c09db36-2939-436d-b5e9-0d7834a93336__wakuorg_nwaku:latest.log
2025-02-16 04:02:20.864 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:02:20.864 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-16_04-02-20__7c09db36-2939-436d-b5e9-0d7834a93336__wakuorg_nwaku:latest.log
2025-02-16 04:02:20.864 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-16 04:02:20.864 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-16 04:02:20.865 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:02:20.865 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:02:20.929 DEBUG [src.node.docker_mananger] Network waku created
2025-02-16 04:02:20.930 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.246.209
2025-02-16 04:02:20.930 DEBUG [src.node.docker_mananger] Generated ports ['61204', '61205', '61206', '61207', '61208']
2025-02-16 04:02:20.930 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:02:20.930 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:02:20.930 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:02:20.930 DEBUG [src.node.docker_mananger] docker run -i -t -p 61204:61204 -p 61205:61205 -p 61206:61206 -p 61207:61207 -p 61208:61208 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61206 --rest-port=61204 --tcp-port=61205 --discv5-udp-port=61207 --rest-address=0.0.0.0 --nat=extip:172.18.246.209 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=68c3adb8196cfcaf260bb0e694839415b8fce08dec9fbf40d5fad5efb3e0eeb3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61208 --metrics-logging=true --relay=true
2025-02-16 04:02:23.956 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.246.209 waku 0a03667797c1fb888a6d8f7322a18c05914144ded24ba3114c7d0dea2182afb0
2025-02-16 04:02:24.006 DEBUG [src.node.docker_mananger] Container started with ID 0a03667797c1. Setting up logs at ./log/docker/node1_2025-02-16_04-02-20__7c09db36-2939-436d-b5e9-0d7834a93336__wakuorg_nwaku:latest.log
2025-02-16 04:02:24.007 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61204
2025-02-16 04:02:24.007 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:02:25.008 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61204/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:25.010 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:02:25.011 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:02:25.011 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61204/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:25.013 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.246.209/tcp/61205/p2p/16Uiu2HAmRxdZjHJSP6hTPVhgCTZgkcjE9zZToLCf7oFGZ9HK6HzB","/ip4/172.18.246.209/tcp/61206/ws/p2p/16Uiu2HAmRxdZjHJSP6hTPVhgCTZgkcjE9zZToLCf7oFGZ9HK6HzB"],"enrUri":"enr:-L24QAoX7FH2CW6r9bU8UVD_F-axWunuqrVLJ2C-si8jf1XhW1VHGonB84pOWY_KaPU4VdfqHAyAC79jDdcxfai9xi0CgmlkgnY0gmlwhKwS9tGKbXVsdGlhZGRyc5YACASsEvbRBu8VAAoErBL20QbvFt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDxazh4V-eilSQmEGo3d8JpZ-EHEH1fCQTCDkAmhCQTByDdGNwgu8Vg3VkcILvF4V3YWt1MgE"}'
2025-02-16 04:02:25.013 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:02:25.013 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:02:25.014 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:02:25.015 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:02:25.015 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.187.110
2025-02-16 04:02:25.015 DEBUG [src.node.docker_mananger] Generated ports ['38244', '38245', '38246', '38247', '38248']
2025-02-16 04:02:25.016 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:02:25.016 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:02:25.016 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:02:25.016 DEBUG [src.node.docker_mananger] docker run -i -t -p 38244:38244 -p 38245:38245 -p 38246:38246 -p 38247:38247 -p 38248:38248 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38246 --rest-port=38244 --tcp-port=38245 --discv5-udp-port=38247 --rest-address=0.0.0.0 --nat=extip:172.18.187.110 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=df7eebc8b28f1ebc9dfbf5bb0ae1c1bb100bfcbefbaf95a3fba9f39ffb59a789 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38248 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QAoX7FH2CW6r9bU8UVD_F-axWunuqrVLJ2C-si8jf1XhW1VHGonB84pOWY_KaPU4VdfqHAyAC79jDdcxfai9xi0CgmlkgnY0gmlwhKwS9tGKbXVsdGlhZGRyc5YACASsEvbRBu8VAAoErBL20QbvFt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDxazh4V-eilSQmEGo3d8JpZ-EHEH1fCQTCDkAmhCQTByDdGNwgu8Vg3VkcILvF4V3YWt1MgE
2025-02-16 04:02:25.237 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.187.110 waku 83dfbabe1ed6d2c45accf0319f906a453f224b6a7119b560cecb94e8c6b58b3d
2025-02-16 04:02:25.287 DEBUG [src.node.docker_mananger] Container started with ID 83dfbabe1ed6. Setting up logs at ./log/docker/node2_2025-02-16_04-02-20__7c09db36-2939-436d-b5e9-0d7834a93336__wakuorg_nwaku:latest.log
2025-02-16 04:02:25.287 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38244
2025-02-16 04:02:25.287 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:02:26.289 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38244/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:26.294 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:02:26.295 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:02:26.295 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38244/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:26.298 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.187.110/tcp/38245/p2p/16Uiu2HAkxYTtKqimxYgwPYMTtvqbzRMXGU94BjLz6Gowp5gA4hZ9","/ip4/172.18.187.110/tcp/38246/ws/p2p/16Uiu2HAkxYTtKqimxYgwPYMTtvqbzRMXGU94BjLz6Gowp5gA4hZ9"],"enrUri":"enr:-L24QDMgDOF272otjwNZ1MHUX0X728FUhPhbHmA4kY8L00lJBs9RrFdBv05lhmjiso9kEeVLjhM4vJuB6ndzuZOyk4oCgmlkgnY0gmlwhKwSu26KbXVsdGlhZGRyc5YACASsErtuBpVlAAoErBK7bgaVZt0DgnJzhQADAQAAiXNlY3AyNTZrMaECLlBzjzIh_d3xuwKDxU0xRkbHXgI54_U8U1wp82ukYNCDdGNwgpVlg3VkcIKVZ4V3YWt1MgE"}'
2025-02-16 04:02:26.298 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:02:26.299 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:02:26.299 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:02:26.300 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:02:26.300 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.136.12
2025-02-16 04:02:26.300 DEBUG [src.node.docker_mananger] Generated ports ['52111', '52112', '52113', '52114', '52115']
2025-02-16 04:02:26.300 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:02:26.301 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:02:26.301 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:02:26.301 DEBUG [src.node.docker_mananger] docker run -i -t -p 52111:52111 -p 52112:52112 -p 52113:52113 -p 52114:52114 -p 52115:52115 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52113 --rest-port=52111 --tcp-port=52112 --discv5-udp-port=52114 --rest-address=0.0.0.0 --nat=extip:172.18.136.12 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6307241b2ccbb7af8a2cbf032363cd9cbafed658ef9ab76c4bf6f90a6995d94b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52115 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QDMgDOF272otjwNZ1MHUX0X728FUhPhbHmA4kY8L00lJBs9RrFdBv05lhmjiso9kEeVLjhM4vJuB6ndzuZOyk4oCgmlkgnY0gmlwhKwSu26KbXVsdGlhZGRyc5YACASsErtuBpVlAAoErBK7bgaVZt0DgnJzhQADAQAAiXNlY3AyNTZrMaECLlBzjzIh_d3xuwKDxU0xRkbHXgI54_U8U1wp82ukYNCDdGNwgpVlg3VkcIKVZ4V3YWt1MgE
2025-02-16 04:02:26.525 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.136.12 waku b450d95ed77d2b3e1981068509c40eec2c38718d33978ccadfbd53ce2a16a630
2025-02-16 04:02:26.574 DEBUG [src.node.docker_mananger] Container started with ID b450d95ed77d. Setting up logs at ./log/docker/node3_2025-02-16_04-02-20__7c09db36-2939-436d-b5e9-0d7834a93336__wakuorg_nwaku:latest.log
2025-02-16 04:02:26.574 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 52111
2025-02-16 04:02:26.574 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:02:27.575 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52111/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:27.581 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:02:27.581 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:02:27.581 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52111/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:27.584 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.12/tcp/52112/p2p/16Uiu2HAm29UW377d9Riih6jXUqPiEKrk5qzbtLf9todQvxocenJ9","/ip4/172.18.136.12/tcp/52113/ws/p2p/16Uiu2HAm29UW377d9Riih6jXUqPiEKrk5qzbtLf9todQvxocenJ9"],"enrUri":"enr:-L24QJGHnRwdJrRwciFW4HIGj-agWVSrOW4Y3XSxVlJuI_D6dsOqWi1-cJuytF1R5DFijm6eXACImYTiqaLsS9Nc7GkCgmlkgnY0gmlwhKwSiAyKbXVsdGlhZGRyc5YACASsEogMBsuQAAoErBKIDAbLkd0DgnJzhQADAQAAiXNlY3AyNTZrMaECY9uJZJ-8FiYBnlc8-b7G3IFyRUiRL6u-_R4Ouy0_2i6DdGNwgsuQg3VkcILLkoV3YWt1MgE"}'
2025-02-16 04:02:27.585 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:02:27.586 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61204/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:02:27.589 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:02:27.590 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38244/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:02:27.597 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:02:27.597 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52111/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:02:27.604 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:02:27.604 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61204/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:27.607 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.187.110/tcp/38245/p2p/16Uiu2HAkxYTtKqimxYgwPYMTtvqbzRMXGU94BjLz6Gowp5gA4hZ9","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-16 04:02:27.608 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38244/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:27.610 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.246.209/tcp/61205/p2p/16Uiu2HAmRxdZjHJSP6hTPVhgCTZgkcjE9zZToLCf7oFGZ9HK6HzB","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.136.12/tcp/52112/p2p/16Uiu2HAm29UW377d9Riih6jXUqPiEKrk5qzbtLf9todQvxocenJ9","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-16 04:02:27.610 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52111/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:27.613 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.187.110/tcp/38245/p2p/16Uiu2HAkxYTtKqimxYgwPYMTtvqbzRMXGU94BjLz6Gowp5gA4hZ9","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
2025-02-16 04:02:27.613 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-16 04:02:57.614 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61204/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:02:57.622 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:02:57.623 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:02:58.623 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-16 04:02:58.623 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52111/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:58.626 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1739678577614314496,"ephemeral":false,"proof":""}]'
2025-02-16 04:02:58.630 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:02:58.631 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:02:58.631 DEBUG [src.node.waku_node] Stopping container with id 0a03667797c1
2025-02-16 04:02:59.779 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:02:59.779 DEBUG [src.node.waku_node] Stopping container with id 83dfbabe1ed6
2025-02-16 04:03:00.591 ERROR [src.node.docker_mananger] Max retries reached for container 0a03667797c1. Exiting log stream.
2025-02-16 04:03:00.973 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:03:00.973 DEBUG [src.node.waku_node] Stopping container with id b450d95ed77d
2025-02-16 04:03:01.786 ERROR [src.node.docker_mananger] Max retries reached for container 83dfbabe1ed6. Exiting log stream.
2025-02-16 04:03:02.451 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:03:02.452 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:03:02.469 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:03:02.484 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:03:02.498 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
