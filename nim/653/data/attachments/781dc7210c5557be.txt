2025-02-16 04:04:29.251 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:04:29.251 DEBUG [tests.conftest] Running test: test_message_light_pushed_on_different_pubsub_topic_is_not_retrieved with id: 2025-02-16_04-04-29__c5ea417f-8351-4f75-8340-2080b33af0d3
2025-02-16 04:04:29.251 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:04:29.252 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-16 04:04:29.258 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:04:29.258 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-16_04-04-29__c5ea417f-8351-4f75-8340-2080b33af0d3__wakuorg_nwaku:latest.log
2025-02-16 04:04:29.258 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:04:29.258 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:04:29.259 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:04:29.259 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.161.4
2025-02-16 04:04:29.260 DEBUG [src.node.docker_mananger] Generated ports ['18809', '18810', '18811', '18812', '18813']
2025-02-16 04:04:29.260 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:04:29.260 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:04:29.260 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:04:29.260 DEBUG [src.node.docker_mananger] docker run -i -t -p 18809:18809 -p 18810:18810 -p 18811:18811 -p 18812:18812 -p 18813:18813 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18811 --rest-port=18809 --tcp-port=18810 --discv5-udp-port=18812 --rest-address=0.0.0.0 --nat=extip:172.18.161.4 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=724e8e9c7bbebd33bb29e3043de7080947560e58a7debadef980aba49e0e3251 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18813 --metrics-logging=true --lightpush=true --relay=true
2025-02-16 04:04:29.481 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.161.4 waku 31564e6ebce91ee52df2fa4862846592b0ad10e86287d405dfb9c0f4e9a4003e
2025-02-16 04:04:29.534 DEBUG [src.node.docker_mananger] Container started with ID 31564e6ebce9. Setting up logs at ./log/docker/receiving_node1_2025-02-16_04-04-29__c5ea417f-8351-4f75-8340-2080b33af0d3__wakuorg_nwaku:latest.log
2025-02-16 04:04:29.535 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18809
2025-02-16 04:04:29.535 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:04:30.058 ERROR [src.node.docker_mananger] Max retries reached for container 6832fcd90656. Exiting log stream.
2025-02-16 04:04:30.536 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18809/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:30.539 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:04:30.540 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:04:30.540 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18809/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:30.542 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.161.4/tcp/18810/p2p/16Uiu2HAmFqt5sH8HwPNab33q46akFrhmjwFR6UCpCGUodXq23A6H","/ip4/172.18.161.4/tcp/18811/ws/p2p/16Uiu2HAmFqt5sH8HwPNab33q46akFrhmjwFR6UCpCGUodXq23A6H"],"enrUri":"enr:-L24QOA_2Gswsds19BBESaHhVidmWdd2ajT-TO2AYiwYL7uPfX2bNaic38hwLPHzoGRWBlL4OdXunOGFz7h98mGs-50CgmlkgnY0gmlwhKwSoQSKbXVsdGlhZGRyc5YACASsEqEEBkl6AAoErBKhBAZJe90DgnJzhQADAQAAiXNlY3AyNTZrMaEDL11dY754BLBePm2Ms-TZeMeZ3BZ6PZ8xKI8Ckk5bzFaDdGNwgkl6g3VkcIJJfIV3YWt1Mgk"}'
2025-02-16 04:04:30.542 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:04:30.549 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:04:30.549 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-16_04-04-29__c5ea417f-8351-4f75-8340-2080b33af0d3__wakuorg_nwaku:latest.log
2025-02-16 04:04:30.549 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:04:30.549 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:04:30.550 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:04:30.551 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.87.240
2025-02-16 04:04:30.551 DEBUG [src.node.docker_mananger] Generated ports ['34970', '34971', '34972', '34973', '34974']
2025-02-16 04:04:30.551 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:04:30.551 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:04:30.551 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:04:30.551 DEBUG [src.node.docker_mananger] docker run -i -t -p 34970:34970 -p 34971:34971 -p 34972:34972 -p 34973:34973 -p 34974:34974 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34972 --rest-port=34970 --tcp-port=34971 --discv5-udp-port=34973 --rest-address=0.0.0.0 --nat=extip:172.18.87.240 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cd53bdddb88a746b99ea1fe0b21cc5bd198bce196078fe26489f29f79b8e425d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34974 --metrics-logging=true --lightpush=false --relay=true
2025-02-16 04:04:30.782 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.87.240 waku e389b16dc2df84780196458a9f7990c597e394d706827f1bbe0a03b5450b605d
2025-02-16 04:04:30.836 DEBUG [src.node.docker_mananger] Container started with ID e389b16dc2df. Setting up logs at ./log/docker/receiving_node2_2025-02-16_04-04-29__c5ea417f-8351-4f75-8340-2080b33af0d3__wakuorg_nwaku:latest.log
2025-02-16 04:04:30.837 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 34970
2025-02-16 04:04:30.837 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:04:31.837 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34970/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:31.840 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:04:31.840 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:04:31.840 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34970/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:31.843 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.87.240/tcp/34971/p2p/16Uiu2HAmJH2nGDZWUXKztC7UAPHSXCawb3eyshe3i5joCZMWKJTW","/ip4/172.18.87.240/tcp/34972/ws/p2p/16Uiu2HAmJH2nGDZWUXKztC7UAPHSXCawb3eyshe3i5joCZMWKJTW"],"enrUri":"enr:-L24QLzOFTAU-bMA8uC3FkKsGdAzLsEPqdfloMzX-hCScY0wCwJ3HJi-ryjcUZ2cWes32vrYiy38Xg91CrG-MZ3z9xMCgmlkgnY0gmlwhKwSV_CKbXVsdGlhZGRyc5YACASsElfwBoibAAoErBJX8AaInN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDU4YXjnInfpANftZ34Uh65VP3HCzKTSalDjt5gBL2jQWDdGNwgoibg3VkcIKInYV3YWt1MgE"}'
2025-02-16 04:04:31.843 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:04:31.843 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34970/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.161.4/tcp/18810/p2p/16Uiu2HAmFqt5sH8HwPNab33q46akFrhmjwFR6UCpCGUodXq23A6H"]'
2025-02-16 04:04:31.883 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:31.891 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:04:31.892 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-16_04-04-29__c5ea417f-8351-4f75-8340-2080b33af0d3__wakuorg_nwaku:latest.log
2025-02-16 04:04:31.892 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:04:31.892 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:04:31.893 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:04:31.894 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.102.8
2025-02-16 04:04:31.894 DEBUG [src.node.docker_mananger] Generated ports ['40214', '40215', '40216', '40217', '40218']
2025-02-16 04:04:31.894 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:04:31.894 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:04:31.894 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:04:31.894 DEBUG [src.node.docker_mananger] docker run -i -t -p 40214:40214 -p 40215:40215 -p 40216:40216 -p 40217:40217 -p 40218:40218 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40216 --rest-port=40214 --tcp-port=40215 --discv5-udp-port=40217 --rest-address=0.0.0.0 --nat=extip:172.18.102.8 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=65629da97cd1ad61b8c5b91ea821cda781afe7cd0ddd3890148ab9cd852a3a16 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40218 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QOA_2Gswsds19BBESaHhVidmWdd2ajT-TO2AYiwYL7uPfX2bNaic38hwLPHzoGRWBlL4OdXunOGFz7h98mGs-50CgmlkgnY0gmlwhKwSoQSKbXVsdGlhZGRyc5YACASsEqEEBkl6AAoErBKhBAZJe90DgnJzhQADAQAAiXNlY3AyNTZrMaEDL11dY754BLBePm2Ms-TZeMeZ3BZ6PZ8xKI8Ckk5bzFaDdGNwgkl6g3VkcIJJfIV3YWt1Mgk --lightpushnode=/ip4/172.18.161.4/tcp/18810/p2p/16Uiu2HAmFqt5sH8HwPNab33q46akFrhmjwFR6UCpCGUodXq23A6H --lightpush=true --relay=false
2025-02-16 04:04:32.129 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.102.8 waku d27942b9e53040ecdbe1e3c3dc30f0961b037b3b6836864e31dac47bf08476f0
2025-02-16 04:04:32.174 DEBUG [src.node.docker_mananger] Container started with ID d27942b9e530. Setting up logs at ./log/docker/lightpush_node1_2025-02-16_04-04-29__c5ea417f-8351-4f75-8340-2080b33af0d3__wakuorg_nwaku:latest.log
2025-02-16 04:04:32.174 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40214
2025-02-16 04:04:32.175 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:04:33.175 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40214/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:33.178 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:04:33.178 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:04:33.178 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40214/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:33.180 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.102.8/tcp/40215/p2p/16Uiu2HAmQYc73yLqXZ1bZbEGwS5n2k5rZ8eS66QJs3AziYGvDFoQ","/ip4/172.18.102.8/tcp/40216/ws/p2p/16Uiu2HAmQYc73yLqXZ1bZbEGwS5n2k5rZ8eS66QJs3AziYGvDFoQ"],"enrUri":"enr:-L24QP1prlOB279WuTomgdHBUdu276PkiUylHyromFGzFka7cA4VPPNw3VlBPNUn29A2QMNRCQfAqCFKyeVFEBvbsT0CgmlkgnY0gmlwhKwSZgiKbXVsdGlhZGRyc5YACASsEmYIBp0XAAoErBJmCAadGN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDsKma74oQcmSjq8ezymR6cc5D9a71Qlsd11P3-smF0EuDdGNwgp0Xg3VkcIKdGYV3YWt1Mgg"}'
2025-02-16 04:04:33.181 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:04:33.181 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40214/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.161.4/tcp/18810/p2p/16Uiu2HAmFqt5sH8HwPNab33q46akFrhmjwFR6UCpCGUodXq23A6H"]'
2025-02-16 04:04:33.217 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:33.218 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40214/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.87.240/tcp/34971/p2p/16Uiu2HAmJH2nGDZWUXKztC7UAPHSXCawb3eyshe3i5joCZMWKJTW"]'
2025-02-16 04:04:33.246 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:33.248 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18809/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:04:33.253 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:33.253 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34970/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:04:33.260 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:33.263 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18809/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
2025-02-16 04:04:33.273 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:33.273 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34970/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
2025-02-16 04:04:33.287 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:33.288 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40214/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739678673288090624}}'
2025-02-16 04:04:33.299 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:33.300 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-16 04:04:33.400 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18809/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:33.402 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-16 04:04:33.404 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:04:33.405 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:04:33.405 DEBUG [src.node.waku_node] Stopping container with id 31564e6ebce9
2025-02-16 04:04:34.000 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:04:34.001 DEBUG [src.node.waku_node] Stopping container with id e389b16dc2df
2025-02-16 04:04:34.813 ERROR [src.node.docker_mananger] Max retries reached for container 31564e6ebce9. Exiting log stream.
2025-02-16 04:04:35.444 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:04:35.444 DEBUG [src.node.waku_node] Stopping container with id d27942b9e530
2025-02-16 04:04:36.256 ERROR [src.node.docker_mananger] Max retries reached for container e389b16dc2df. Exiting log stream.
2025-02-16 04:04:36.919 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:04:36.920 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:04:36.931 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:04:36.940 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:04:36.946 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
