2025-02-16 04:05:19.655 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:05:19.655 DEBUG [tests.conftest] Running test: test_time_filter_invalid_start_time with id: 2025-02-16_04-05-19__c6a7482f-e71b-4af3-b9b6-d1aa6ea93caf
2025-02-16 04:05:19.655 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:05:19.655 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-16 04:05:19.656 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-16 04:05:19.661 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:05:19.661 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-16_04-05-19__c6a7482f-e71b-4af3-b9b6-d1aa6ea93caf__wakuorg_nwaku:latest.log
2025-02-16 04:05:19.662 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:05:19.662 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:05:19.663 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:05:19.663 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.173.140
2025-02-16 04:05:19.663 DEBUG [src.node.docker_mananger] Generated ports ['40100', '40101', '40102', '40103', '40104']
2025-02-16 04:05:19.663 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:05:19.664 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:05:19.664 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:05:19.664 DEBUG [src.node.docker_mananger] docker run -i -t -p 40100:40100 -p 40101:40101 -p 40102:40102 -p 40103:40103 -p 40104:40104 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40102 --rest-port=40100 --tcp-port=40101 --discv5-udp-port=40103 --rest-address=0.0.0.0 --nat=extip:172.18.173.140 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3cfddbdfc5202e853dbabd4bad1822dff2ccc593e1d3b349fbbf8eb10282fd8e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40104 --metrics-logging=true --store=true --relay=true
2025-02-16 04:05:19.736 ERROR [src.node.docker_mananger] Max retries reached for container 370fe7f8ac83. Exiting log stream.
2025-02-16 04:05:19.885 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.173.140 waku c1d158b7da0b4498b197417245c197ce55bdf7419f6165668c2e57eba8e43a86
2025-02-16 04:05:19.937 DEBUG [src.node.docker_mananger] Container started with ID c1d158b7da0b. Setting up logs at ./log/docker/publishing_node1_2025-02-16_04-05-19__c6a7482f-e71b-4af3-b9b6-d1aa6ea93caf__wakuorg_nwaku:latest.log
2025-02-16 04:05:19.937 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40100
2025-02-16 04:05:19.938 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:05:20.460 ERROR [src.node.docker_mananger] Max retries reached for container 56b47f631b3b. Exiting log stream.
2025-02-16 04:05:20.938 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40100/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:20.940 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:05:20.941 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:05:20.941 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40100/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:20.943 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.173.140/tcp/40101/p2p/16Uiu2HAm5HcNSsk1BN4tXpddcKefd7WhP5KHWxtpyeMqoYQiJ2jd","/ip4/172.18.173.140/tcp/40102/ws/p2p/16Uiu2HAm5HcNSsk1BN4tXpddcKefd7WhP5KHWxtpyeMqoYQiJ2jd"],"enrUri":"enr:-L24QMAmh0EsNgsoq7FZwIT1ToSgvXHSGHjV7uzpcWhOrVcNELKNw5JPFLed2e1fc5peJvKSXNnwp-grrvdVifycwB0CgmlkgnY0gmlwhKwSrYyKbXVsdGlhZGRyc5YACASsEq2MBpylAAoErBKtjAacpt0DgnJzhQADAQAAiXNlY3AyNTZrMaECkoQkQA27zFAw8gvNAUexVdICdSfmYouMCf57T4LjvSSDdGNwgpylg3VkcIKcp4V3YWt1MgM"}'
2025-02-16 04:05:20.943 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:05:20.949 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:05:20.949 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-16_04-05-19__c6a7482f-e71b-4af3-b9b6-d1aa6ea93caf__wakuorg_nwaku:latest.log
2025-02-16 04:05:20.949 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:05:20.949 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:05:20.950 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:05:20.951 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.63.107
2025-02-16 04:05:20.951 DEBUG [src.node.docker_mananger] Generated ports ['50514', '50515', '50516', '50517', '50518']
2025-02-16 04:05:20.951 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:05:20.951 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:05:20.951 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:05:20.951 DEBUG [src.node.docker_mananger] docker run -i -t -p 50514:50514 -p 50515:50515 -p 50516:50516 -p 50517:50517 -p 50518:50518 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50516 --rest-port=50514 --tcp-port=50515 --discv5-udp-port=50517 --rest-address=0.0.0.0 --nat=extip:172.18.63.107 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9064a8c5c3c0e8b1359decddcaf8f3f7edaeeb4817c6dea37becd96960610cbf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50518 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMAmh0EsNgsoq7FZwIT1ToSgvXHSGHjV7uzpcWhOrVcNELKNw5JPFLed2e1fc5peJvKSXNnwp-grrvdVifycwB0CgmlkgnY0gmlwhKwSrYyKbXVsdGlhZGRyc5YACASsEq2MBpylAAoErBKtjAacpt0DgnJzhQADAQAAiXNlY3AyNTZrMaECkoQkQA27zFAw8gvNAUexVdICdSfmYouMCf57T4LjvSSDdGNwgpylg3VkcIKcp4V3YWt1MgM --storenode=/ip4/172.18.173.140/tcp/40101/p2p/16Uiu2HAm5HcNSsk1BN4tXpddcKefd7WhP5KHWxtpyeMqoYQiJ2jd --store=true --relay=true
2025-02-16 04:05:21.167 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.63.107 waku a92803f7859dab2b8b97418ced739b81184db9898264a7a5971673102e8ae032
2025-02-16 04:05:21.220 DEBUG [src.node.docker_mananger] Container started with ID a92803f7859d. Setting up logs at ./log/docker/store_node1_2025-02-16_04-05-19__c6a7482f-e71b-4af3-b9b6-d1aa6ea93caf__wakuorg_nwaku:latest.log
2025-02-16 04:05:21.220 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 50514
2025-02-16 04:05:21.220 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:05:22.221 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50514/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:22.223 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:05:22.224 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:05:22.224 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50514/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:22.226 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.63.107/tcp/50515/p2p/16Uiu2HAmAGA7sSjJpuR1PALPjSffBXxyuqKptfnv3YNULcVbeBu3","/ip4/172.18.63.107/tcp/50516/ws/p2p/16Uiu2HAmAGA7sSjJpuR1PALPjSffBXxyuqKptfnv3YNULcVbeBu3"],"enrUri":"enr:-L24QDu6vQ_ebpW-RDWcZp4IegbR7MrUsWZOXN-r_04o9CtBNKZxiQ4C-P4F-q-uKyUiTxIiolhhLh77rQNOHyyI_QMCgmlkgnY0gmlwhKwSP2uKbXVsdGlhZGRyc5YACASsEj9rBsVTAAoErBI_awbFVN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3G9QHoqEmfFntZqwMiAb1FjV19HFnbLqhIDi8D0HC9qDdGNwgsVTg3VkcILFVYV3YWt1MgM"}'
2025-02-16 04:05:22.226 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:05:22.226 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50514/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.173.140/tcp/40101/p2p/16Uiu2HAm5HcNSsk1BN4tXpddcKefd7WhP5KHWxtpyeMqoYQiJ2jd"]'
2025-02-16 04:05:31.216 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:31.217 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40100/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:05:31.219 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:31.219 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50514/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:05:31.222 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:31.223 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:31.224 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40100/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:31.229 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:31.229 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:31.430 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:31.431 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40100/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:31.436 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:31.437 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:31.637 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:31.638 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40100/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:31.642 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:31.643 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:31.844 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:31.844 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40100/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:31.849 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:31.850 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:32.051 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:32.051 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40100/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:32.056 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:32.057 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:32.258 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:32.258 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40100/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:32.262 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:32.263 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:32.463 DEBUG [tests.store.test_time_filter] inquering stored messages with start time abc
2025-02-16 04:05:32.463 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40100/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:32.466 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:40100/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true. Response content: b'time parsing error: invalid integer: abc'
2025-02-16 04:05:32.466 DEBUG [tests.store.test_time_filter] invalid start_time cause error Error: 400 Client Error: Bad Request for url: http://127.0.0.1:40100/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true with response: b'time parsing error: invalid integer: abc'
2025-02-16 04:05:32.468 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:05:32.469 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:05:32.469 DEBUG [src.node.waku_node] Stopping container with id c1d158b7da0b
2025-02-16 04:05:33.477 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:05:33.477 DEBUG [src.node.waku_node] Stopping container with id a92803f7859d
2025-02-16 04:05:34.288 ERROR [src.node.docker_mananger] Max retries reached for container c1d158b7da0b. Exiting log stream.
2025-02-16 04:05:34.951 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:05:34.952 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:05:34.959 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:05:34.966 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
