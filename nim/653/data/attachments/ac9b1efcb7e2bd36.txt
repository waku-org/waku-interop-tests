2025-02-16 04:04:07.258 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:04:07.258 DEBUG [tests.conftest] Running test: test_filter_ping_on_unsubscribed_peer with id: 2025-02-16_04-04-07__7f43fbba-0aae-4b33-b951-ce923ff722f0
2025-02-16 04:04:07.258 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:04:07.259 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-16 04:04:07.259 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-16 04:04:07.265 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:04:07.265 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-16_04-04-07__7f43fbba-0aae-4b33-b951-ce923ff722f0__wakuorg_nwaku:latest.log
2025-02-16 04:04:07.265 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:04:07.265 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:04:07.266 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:04:07.267 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.80.80
2025-02-16 04:04:07.267 DEBUG [src.node.docker_mananger] Generated ports ['57793', '57794', '57795', '57796', '57797']
2025-02-16 04:04:07.267 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:04:07.267 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:04:07.267 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:04:07.267 DEBUG [src.node.docker_mananger] docker run -i -t -p 57793:57793 -p 57794:57794 -p 57795:57795 -p 57796:57796 -p 57797:57797 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57795 --rest-port=57793 --tcp-port=57794 --discv5-udp-port=57796 --rest-address=0.0.0.0 --nat=extip:172.18.80.80 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=62c8a642296d163bbb71dc0eacbe0efed47e4d8d22cf3db67920ac1cdc8abaac --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57797 --metrics-logging=true --relay=true --filter=true
2025-02-16 04:04:07.492 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.80.80 waku 066939e6d174a332bb5c962611087f4c4363e73a9bdd3650096f181d619ee7d6
2025-02-16 04:04:07.549 DEBUG [src.node.docker_mananger] Container started with ID 066939e6d174. Setting up logs at ./log/docker/node1_2025-02-16_04-04-07__7f43fbba-0aae-4b33-b951-ce923ff722f0__wakuorg_nwaku:latest.log
2025-02-16 04:04:07.550 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57793
2025-02-16 04:04:07.550 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:04:08.034 ERROR [src.node.docker_mananger] Max retries reached for container 2ae4b38b0ff2. Exiting log stream.
2025-02-16 04:04:08.551 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57793/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:08.553 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:04:08.554 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:04:08.554 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57793/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:08.556 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.80.80/tcp/57794/p2p/16Uiu2HAm3rLemq2JmxCEB6hZscNC8FBCniMZfh1hqsQLMAZQUPTt","/ip4/172.18.80.80/tcp/57795/ws/p2p/16Uiu2HAm3rLemq2JmxCEB6hZscNC8FBCniMZfh1hqsQLMAZQUPTt"],"enrUri":"enr:-L24QGFsgoKDndrY5Xe80tg9RQpJUAOxuMhQKgGkUEYjeZA3MLqd2oWQPNb5lfU3h7TcBhAsc-NM0Zgnpvz7DAO24HkCgmlkgnY0gmlwhKwSUFCKbXVsdGlhZGRyc5YACASsElBQBuHCAAoErBJQUAbhw90DgnJzhQADAQAAiXNlY3AyNTZrMaECfS8pVsRqPsugGhmx3B7Myx0GD615qWfMtnlxeWmCZReDdGNwguHCg3VkcILhxIV3YWt1MgU"}'
2025-02-16 04:04:08.556 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:04:08.557 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-16 04:04:08.563 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:04:08.563 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-16_04-04-07__7f43fbba-0aae-4b33-b951-ce923ff722f0__wakuorg_nwaku:latest.log
2025-02-16 04:04:08.563 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:04:08.563 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:04:08.564 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:04:08.564 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.155.40
2025-02-16 04:04:08.565 DEBUG [src.node.docker_mananger] Generated ports ['48186', '48187', '48188', '48189', '48190']
2025-02-16 04:04:08.565 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:04:08.565 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:04:08.565 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:04:08.565 DEBUG [src.node.docker_mananger] docker run -i -t -p 48186:48186 -p 48187:48187 -p 48188:48188 -p 48189:48189 -p 48190:48190 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48188 --rest-port=48186 --tcp-port=48187 --discv5-udp-port=48189 --rest-address=0.0.0.0 --nat=extip:172.18.155.40 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cd4afdf75f3a9fc5feafd1fef69effc816db0867e4aa13c5a998a602fd551eba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48190 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QGFsgoKDndrY5Xe80tg9RQpJUAOxuMhQKgGkUEYjeZA3MLqd2oWQPNb5lfU3h7TcBhAsc-NM0Zgnpvz7DAO24HkCgmlkgnY0gmlwhKwSUFCKbXVsdGlhZGRyc5YACASsElBQBuHCAAoErBJQUAbhw90DgnJzhQADAQAAiXNlY3AyNTZrMaECfS8pVsRqPsugGhmx3B7Myx0GD615qWfMtnlxeWmCZReDdGNwguHCg3VkcILhxIV3YWt1MgU --filternode=/ip4/172.18.80.80/tcp/57794/p2p/16Uiu2HAm3rLemq2JmxCEB6hZscNC8FBCniMZfh1hqsQLMAZQUPTt
2025-02-16 04:04:08.794 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.155.40 waku 94f9bdd529d8a989a423bf8b36f531711713a273abb4cc58f1a646e4d84ce97d
2025-02-16 04:04:08.843 DEBUG [src.node.docker_mananger] Container started with ID 94f9bdd529d8. Setting up logs at ./log/docker/node2_2025-02-16_04-04-07__7f43fbba-0aae-4b33-b951-ce923ff722f0__wakuorg_nwaku:latest.log
2025-02-16 04:04:08.843 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 48186
2025-02-16 04:04:08.844 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:04:09.844 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48186/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:09.847 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:04:09.847 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:04:09.847 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48186/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:09.849 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.155.40/tcp/48187/p2p/16Uiu2HAm6jJSpnHULjL6vCfbPquyU2o4gpypN18iRsYL4C88CVjb","/ip4/172.18.155.40/tcp/48188/ws/p2p/16Uiu2HAm6jJSpnHULjL6vCfbPquyU2o4gpypN18iRsYL4C88CVjb"],"enrUri":"enr:-L24QIG8UetbaUM3pwwgnbVB2G4J6m78ZxZGdDHu7poMkZaPbkwv2-RmDek504KFIG4Weqio-NyRiHz1azmdSk_9S1sCgmlkgnY0gmlwhKwSmyiKbXVsdGlhZGRyc5YACASsEpsoBrw7AAoErBKbKAa8PN0DgnJzhQADAQAAiXNlY3AyNTZrMaECp_SpiLbcwHtcUbQhVLAe6zGKYOxf6WrHLeCdtt9-AV6DdGNwgrw7g3VkcIK8PYV3YWt1MgA"}'
2025-02-16 04:04:09.849 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:04:09.850 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48186/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.80.80/tcp/57794/p2p/16Uiu2HAm3rLemq2JmxCEB6hZscNC8FBCniMZfh1hqsQLMAZQUPTt"]'
2025-02-16 04:04:09.888 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:09.888 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-16 04:04:09.889 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57793/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:04:09.906 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:09.907 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48186/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "182da29a-938e-4c0d-8e3f-3dcc6383bec0", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-16 04:04:09.922 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"182da29a-938e-4c0d-8e3f-3dcc6383bec0","statusDesc":"OK"}'
2025-02-16 04:04:09.924 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48186/filter/v2/subscriptions/1e1bfb64-80f1-4138-97b6-55dc73020f53" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:09.931 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1e1bfb64-80f1-4138-97b6-55dc73020f53","statusDesc":"OK"}'
2025-02-16 04:04:09.931 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:48186/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-16 04:04:09.939 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"12345","statusDesc":"OK"}'
2025-02-16 04:04:09.939 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48186/filter/v2/subscriptions/529029e9-5c94-478e-9eec-e8482972a209" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:09.946 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:48186/filter/v2/subscriptions/529029e9-5c94-478e-9eec-e8482972a209. Response content: b'{"requestId":"529029e9-5c94-478e-9eec-e8482972a209","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
2025-02-16 04:04:09.949 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:04:09.950 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:04:09.951 DEBUG [src.node.waku_node] Stopping container with id 066939e6d174
2025-02-16 04:04:10.750 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:04:10.750 DEBUG [src.node.waku_node] Stopping container with id 94f9bdd529d8
2025-02-16 04:04:11.561 ERROR [src.node.docker_mananger] Max retries reached for container 066939e6d174. Exiting log stream.
2025-02-16 04:04:11.779 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:04:11.781 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:04:11.787 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:04:11.791 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
