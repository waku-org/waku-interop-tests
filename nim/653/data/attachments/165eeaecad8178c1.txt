2025-02-16 04:07:04.622 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:07:04.623 DEBUG [tests.conftest] Running test: test_main_node_only_lightpush__peer_only_lightpush with id: 2025-02-16_04-07-04__471beb21-da7d-4e95-b5f5-8d1c5ed92d03
2025-02-16 04:07:04.623 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:07:04.623 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-16 04:07:04.630 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:07:04.630 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-16_04-07-04__471beb21-da7d-4e95-b5f5-8d1c5ed92d03__wakuorg_nwaku:latest.log
2025-02-16 04:07:04.630 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:07:04.630 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:07:04.631 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:07:04.632 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.33.224
2025-02-16 04:07:04.632 DEBUG [src.node.docker_mananger] Generated ports ['25804', '25805', '25806', '25807', '25808']
2025-02-16 04:07:04.632 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:07:04.632 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:07:04.632 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:07:04.632 DEBUG [src.node.docker_mananger] docker run -i -t -p 25804:25804 -p 25805:25805 -p 25806:25806 -p 25807:25807 -p 25808:25808 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25806 --rest-port=25804 --tcp-port=25805 --discv5-udp-port=25807 --rest-address=0.0.0.0 --nat=extip:172.18.33.224 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e3b6c316cd77aa5af52a9a6250d4675d0640a8dc28e93e8bfeefbeddea23f8bf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25808 --metrics-logging=true --lightpush=true --relay=false
2025-02-16 04:07:04.859 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.33.224 waku a3c51d69ff2043b96db439d55bb31395fab673f80a5fa6f9c52bfc7eca75682e
2025-02-16 04:07:04.905 DEBUG [src.node.docker_mananger] Container started with ID a3c51d69ff20. Setting up logs at ./log/docker/receiving_node1_2025-02-16_04-07-04__471beb21-da7d-4e95-b5f5-8d1c5ed92d03__wakuorg_nwaku:latest.log
2025-02-16 04:07:04.906 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 25804
2025-02-16 04:07:04.906 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:07:05.423 ERROR [src.node.docker_mananger] Max retries reached for container cf1cc3f29d4e. Exiting log stream.
2025-02-16 04:07:05.907 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25804/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:07:05.910 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:07:05.910 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:07:05.911 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25804/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:07:05.913 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.33.224/tcp/25805/p2p/16Uiu2HAmJ5fdu1QJzMhXpTxmiJntsVN7Npi8HkLqgHtu735L3Rkj","/ip4/172.18.33.224/tcp/25806/ws/p2p/16Uiu2HAmJ5fdu1QJzMhXpTxmiJntsVN7Npi8HkLqgHtu735L3Rkj"],"enrUri":"enr:-L24QAlHLxuaSYvHidmCl07mO2xBYYUeKuwWWS7EzJm5tBjfaTvkX-g3vT-zHR_MmcHph_il6LcoZwMagDLDFjfiyTMCgmlkgnY0gmlwhKwSIeCKbXVsdGlhZGRyc5YACASsEiHgBmTNAAoErBIh4AZkzt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDUJzLlb8p-OGCSTRhogstrwgorqsgW1tv5QR-Q4cXLciDdGNwgmTNg3VkcIJkz4V3YWt1Mgg"}'
2025-02-16 04:07:05.913 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:07:05.920 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:07:05.920 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-16_04-07-04__471beb21-da7d-4e95-b5f5-8d1c5ed92d03__wakuorg_nwaku:latest.log
2025-02-16 04:07:05.920 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:07:05.920 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:07:05.922 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:07:05.922 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.249.131
2025-02-16 04:07:05.922 DEBUG [src.node.docker_mananger] Generated ports ['31550', '31551', '31552', '31553', '31554']
2025-02-16 04:07:05.922 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:07:05.922 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:07:05.922 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:07:05.922 DEBUG [src.node.docker_mananger] docker run -i -t -p 31550:31550 -p 31551:31551 -p 31552:31552 -p 31553:31553 -p 31554:31554 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31552 --rest-port=31550 --tcp-port=31551 --discv5-udp-port=31553 --rest-address=0.0.0.0 --nat=extip:172.18.249.131 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5a6bab713eba799ba040b0e867aed7441b169aa5b37c31a8b0e8d87ffa4ce1dc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31554 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QAlHLxuaSYvHidmCl07mO2xBYYUeKuwWWS7EzJm5tBjfaTvkX-g3vT-zHR_MmcHph_il6LcoZwMagDLDFjfiyTMCgmlkgnY0gmlwhKwSIeCKbXVsdGlhZGRyc5YACASsEiHgBmTNAAoErBIh4AZkzt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDUJzLlb8p-OGCSTRhogstrwgorqsgW1tv5QR-Q4cXLciDdGNwgmTNg3VkcIJkz4V3YWt1Mgg --lightpushnode=/ip4/172.18.33.224/tcp/25805/p2p/16Uiu2HAmJ5fdu1QJzMhXpTxmiJntsVN7Npi8HkLqgHtu735L3Rkj --lightpush=true --relay=false
2025-02-16 04:07:06.157 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.249.131 waku 547ea06ca3840dadb25d6f23bf55ede4307769f0ca0ab42035e96d1698d52ba0
2025-02-16 04:07:06.205 DEBUG [src.node.docker_mananger] Container started with ID 547ea06ca384. Setting up logs at ./log/docker/lightpush_node1_2025-02-16_04-07-04__471beb21-da7d-4e95-b5f5-8d1c5ed92d03__wakuorg_nwaku:latest.log
2025-02-16 04:07:06.205 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 31550
2025-02-16 04:07:06.206 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:07:07.207 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31550/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:07:07.210 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:07:07.210 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:07:07.211 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31550/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:07:07.213 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.249.131/tcp/31551/p2p/16Uiu2HAmAWnXPyK5Zm484AwugG4GcoiNpqM3LGufRgUE18oZbsEE","/ip4/172.18.249.131/tcp/31552/ws/p2p/16Uiu2HAmAWnXPyK5Zm484AwugG4GcoiNpqM3LGufRgUE18oZbsEE"],"enrUri":"enr:-L24QH_ecBuQu9yaEwdU7ytGz1lK4KBAkollw98FxGOqB6jfTiTPO0VKVngDPanIFldrUlsAaqMI-gLyHODEMXqQiLoCgmlkgnY0gmlwhKwS-YOKbXVsdGlhZGRyc5YACASsEvmDBns_AAoErBL5gwZ7QN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC4C6bt1O1D2iWlQTpAlQKiJ-xVp3cJKljuJxqsEVlBNeDdGNwgns_g3VkcIJ7QYV3YWt1Mgg"}'
2025-02-16 04:07:07.213 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:07:07.213 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31550/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.33.224/tcp/25805/p2p/16Uiu2HAmJ5fdu1QJzMhXpTxmiJntsVN7Npi8HkLqgHtu735L3Rkj"]'
2025-02-16 04:07:07.254 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:07:07.256 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31550/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739678827255998208}}'
2025-02-16 04:07:07.278 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:31550/lightpush/v1/message. Response content: b'Failed to request a message push: no waku relay found'
2025-02-16 04:07:07.280 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:07:07.281 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:07:07.281 DEBUG [src.node.waku_node] Stopping container with id a3c51d69ff20
2025-02-16 04:07:08.391 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:07:08.392 DEBUG [src.node.waku_node] Stopping container with id 547ea06ca384
2025-02-16 04:07:09.204 ERROR [src.node.docker_mananger] Max retries reached for container a3c51d69ff20. Exiting log stream.
2025-02-16 04:07:09.896 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:07:09.897 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:07:09.902 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:07:09.905 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
