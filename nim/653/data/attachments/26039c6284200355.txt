2025-02-16 04:02:29.220 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:02:29.221 DEBUG [tests.conftest] Running test: test_lightpush with id: 2025-02-16_04-02-29__c7ad83b3-c127-41a8-97e1-88a5e191342b
2025-02-16 04:02:29.221 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:02:29.221 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-16 04:02:29.221 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-16 04:02:29.222 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-16 04:02:29.222 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-16 04:02:29.228 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:02:29.228 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-16_04-02-29__c7ad83b3-c127-41a8-97e1-88a5e191342b__wakuorg_nwaku:latest.log
2025-02-16 04:02:29.228 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:02:29.229 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:02:29.230 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:02:29.230 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.93.35
2025-02-16 04:02:29.230 DEBUG [src.node.docker_mananger] Generated ports ['29029', '29030', '29031', '29032', '29033']
2025-02-16 04:02:29.230 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:02:29.230 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:02:29.230 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:02:29.231 DEBUG [src.node.docker_mananger] docker run -i -t -p 29029:29029 -p 29030:29030 -p 29031:29031 -p 29032:29032 -p 29033:29033 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29031 --rest-port=29029 --tcp-port=29030 --discv5-udp-port=29032 --rest-address=0.0.0.0 --nat=extip:172.18.93.35 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2b8b5faf9f3cc0aef1dcc4cbf75bcfa1d9a7081c56eb999adbdc2d8641ba8cc0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29033 --metrics-logging=true --lightpush=true --relay=true
2025-02-16 04:02:29.449 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.93.35 waku afb22a5b2241f8953e3ea728bb6a8c2cbe0ae86553214be1ae1a681ee9975378
2025-02-16 04:02:29.499 DEBUG [src.node.docker_mananger] Container started with ID afb22a5b2241. Setting up logs at ./log/docker/node1_2025-02-16_04-02-29__c7ad83b3-c127-41a8-97e1-88a5e191342b__wakuorg_nwaku:latest.log
2025-02-16 04:02:29.500 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29029
2025-02-16 04:02:29.500 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:02:30.029 ERROR [src.node.docker_mananger] Max retries reached for container 81f2fbb6b13f. Exiting log stream.
2025-02-16 04:02:30.501 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29029/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:30.504 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:02:30.505 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:02:30.505 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29029/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:30.507 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.93.35/tcp/29030/p2p/16Uiu2HAmEnFH9ZwkYacunYARrxzZhthHrCd8dtdenJgsnxJjRvoB","/ip4/172.18.93.35/tcp/29031/ws/p2p/16Uiu2HAmEnFH9ZwkYacunYARrxzZhthHrCd8dtdenJgsnxJjRvoB"],"enrUri":"enr:-L24QPjprSMZZV8J2I13tWSOkAFRBlYr4Y4CCEeobfvilUEKX_pOkV0eQWX4khbzA90l6VvtO6WytYC0ZS3PY9qOzAMCgmlkgnY0gmlwhKwSXSOKbXVsdGlhZGRyc5YACASsEl0jBnFmAAoErBJdIwZxZ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDH5NRv_daH9ZcaRx1DDloXUWtyfruL_f05LGkt0SG3yqDdGNwgnFmg3VkcIJxaIV3YWt1Mgk"}'
2025-02-16 04:02:30.507 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:02:30.513 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:02:30.514 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-16_04-02-29__c7ad83b3-c127-41a8-97e1-88a5e191342b__wakuorg_nwaku:latest.log
2025-02-16 04:02:30.514 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:02:30.514 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:02:30.515 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:02:30.515 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.175.93
2025-02-16 04:02:30.515 DEBUG [src.node.docker_mananger] Generated ports ['28317', '28318', '28319', '28320', '28321']
2025-02-16 04:02:30.516 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:02:30.516 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:02:30.516 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:02:30.516 DEBUG [src.node.docker_mananger] docker run -i -t -p 28317:28317 -p 28318:28318 -p 28319:28319 -p 28320:28320 -p 28321:28321 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28319 --rest-port=28317 --tcp-port=28318 --discv5-udp-port=28320 --rest-address=0.0.0.0 --nat=extip:172.18.175.93 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a6fab9859af1f56e0e6c0d97a57dbebef432cb1d6472ce088f75fea1e9fcbeb9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28321 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QPjprSMZZV8J2I13tWSOkAFRBlYr4Y4CCEeobfvilUEKX_pOkV0eQWX4khbzA90l6VvtO6WytYC0ZS3PY9qOzAMCgmlkgnY0gmlwhKwSXSOKbXVsdGlhZGRyc5YACASsEl0jBnFmAAoErBJdIwZxZ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDH5NRv_daH9ZcaRx1DDloXUWtyfruL_f05LGkt0SG3yqDdGNwgnFmg3VkcIJxaIV3YWt1Mgk
2025-02-16 04:02:30.743 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.175.93 waku 112e04bf556192770eca150841b5a096bfbc46424f4ee0e3941f3e06d4af959f
2025-02-16 04:02:30.793 DEBUG [src.node.docker_mananger] Container started with ID 112e04bf5561. Setting up logs at ./log/docker/node1_2025-02-16_04-02-29__c7ad83b3-c127-41a8-97e1-88a5e191342b__wakuorg_nwaku:latest.log
2025-02-16 04:02:30.793 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28317
2025-02-16 04:02:30.793 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:02:31.794 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28317/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:31.800 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:02:31.801 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:02:31.801 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28317/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:31.805 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.175.93/tcp/28318/p2p/16Uiu2HAmTtD1Vg5NUtyyoLxee7Mfqr1WGCkszDQ62vr5WEoCpNhs","/ip4/172.18.175.93/tcp/28319/ws/p2p/16Uiu2HAmTtD1Vg5NUtyyoLxee7Mfqr1WGCkszDQ62vr5WEoCpNhs"],"enrUri":"enr:-L24QGNSaRE4DcpK76Dgc-4_DcpGSUkvlHch-rmHdCvZfJbNWdZ0TvxwfhZ_ZOxYlfvwchQq-EXcl1RQ8CWW1B-RJRwCgmlkgnY0gmlwhKwSr12KbXVsdGlhZGRyc5YACASsEq9dBm6eAAoErBKvXQZun90DgnJzhQADAQAAiXNlY3AyNTZrMaED4kIq7BaCfTotWw1q_7K8MB60-UWSMf-zCcvln1CziL6DdGNwgm6eg3VkcIJuoIV3YWt1MgE"}'
2025-02-16 04:02:31.805 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:02:31.815 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:02:31.815 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-16_04-02-29__c7ad83b3-c127-41a8-97e1-88a5e191342b__wakuorg_nwaku:latest.log
2025-02-16 04:02:31.816 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:02:31.816 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:02:31.817 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:02:31.817 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.97.253
2025-02-16 04:02:31.817 DEBUG [src.node.docker_mananger] Generated ports ['18454', '18455', '18456', '18457', '18458']
2025-02-16 04:02:31.817 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:02:31.818 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:02:31.818 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:02:31.818 DEBUG [src.node.docker_mananger] docker run -i -t -p 18454:18454 -p 18455:18455 -p 18456:18456 -p 18457:18457 -p 18458:18458 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18456 --rest-port=18454 --tcp-port=18455 --discv5-udp-port=18457 --rest-address=0.0.0.0 --nat=extip:172.18.97.253 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fade86ceb38dfb66b8a8ee2fdcab20e4f0aab679cc501e514c5b21581ffe3935 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18458 --metrics-logging=true --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QPjprSMZZV8J2I13tWSOkAFRBlYr4Y4CCEeobfvilUEKX_pOkV0eQWX4khbzA90l6VvtO6WytYC0ZS3PY9qOzAMCgmlkgnY0gmlwhKwSXSOKbXVsdGlhZGRyc5YACASsEl0jBnFmAAoErBJdIwZxZ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDH5NRv_daH9ZcaRx1DDloXUWtyfruL_f05LGkt0SG3yqDdGNwgnFmg3VkcIJxaIV3YWt1Mgk --lightpushnode=/ip4/172.18.93.35/tcp/29030/p2p/16Uiu2HAmEnFH9ZwkYacunYARrxzZhthHrCd8dtdenJgsnxJjRvoB
2025-02-16 04:02:32.055 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.97.253 waku 6e16d41e23289cef2585d62202461063f4f8e6ab584a2e928a02afcd08bb7b46
2025-02-16 04:02:32.100 DEBUG [src.node.docker_mananger] Container started with ID 6e16d41e2328. Setting up logs at ./log/docker/node1_2025-02-16_04-02-29__c7ad83b3-c127-41a8-97e1-88a5e191342b__wakuorg_nwaku:latest.log
2025-02-16 04:02:32.100 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18454
2025-02-16 04:02:32.100 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:02:33.101 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18454/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:33.103 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:02:33.104 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:02:33.104 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18454/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:33.106 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.97.253/tcp/18455/p2p/16Uiu2HAmCKowQoSuphUZcmvioSrzfb4vzZN2RHesGwhAsc54PYGq","/ip4/172.18.97.253/tcp/18456/ws/p2p/16Uiu2HAmCKowQoSuphUZcmvioSrzfb4vzZN2RHesGwhAsc54PYGq"],"enrUri":"enr:-L24QA2-5hriKP-NJsxIJPhZbtyfWceFv1Rb1yCypLDL6JwJYCCCpEpYq6U3Km1Ud4OvRBKhvPr31pBLb2dNiwY6JPECgmlkgnY0gmlwhKwSYf2KbXVsdGlhZGRyc5YACASsEmH9BkgXAAoErBJh_QZIGN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-xYxLBTylA0C5AZCSdqXRWy4b7pt1Xcx2E3Ei5J1aNKDdGNwgkgXg3VkcIJIGYV3YWt1Mgg"}'
2025-02-16 04:02:33.106 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:02:33.107 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29029/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:02:33.110 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:02:33.111 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28317/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:02:33.116 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:02:33.118 DEBUG [src.steps.light_push] Lightpushing message
2025-02-16 04:02:33.118 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18454/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1739678553117996544}}'
2025-02-16 04:02:33.162 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:02:33.164 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-16 04:02:33.264 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-16 04:02:33.264 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29029/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:33.267 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739678553117996544,"ephemeral":false,"proof":""}]'
2025-02-16 04:02:33.268 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-16 04:02:33.268 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28317/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:33.271 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739678553117996544,"ephemeral":false,"proof":""}]'
2025-02-16 04:02:33.274 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:02:33.275 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:02:33.275 DEBUG [src.node.waku_node] Stopping container with id afb22a5b2241
2025-02-16 04:02:33.984 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:02:33.985 DEBUG [src.node.waku_node] Stopping container with id 112e04bf5561
2025-02-16 04:02:34.796 ERROR [src.node.docker_mananger] Max retries reached for container afb22a5b2241. Exiting log stream.
2025-02-16 04:02:35.482 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:02:35.484 DEBUG [src.node.waku_node] Stopping container with id 6e16d41e2328
2025-02-16 04:02:36.310 ERROR [src.node.docker_mananger] Max retries reached for container 112e04bf5561. Exiting log stream.
2025-02-16 04:02:36.958 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:02:36.959 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:02:36.969 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:02:36.979 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:02:36.989 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
