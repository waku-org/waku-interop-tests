2025-02-16 04:03:57.735 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:03:57.735 DEBUG [tests.conftest] Running test: test_light_push_with_missing_pubsub_topics with id: 2025-02-16_04-03-57__755b82d9-5362-4cf8-b4e3-5b2b8f5d1694
2025-02-16 04:03:57.735 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:03:57.735 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-16 04:03:57.742 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:03:57.742 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-16_04-03-57__755b82d9-5362-4cf8-b4e3-5b2b8f5d1694__wakuorg_nwaku:latest.log
2025-02-16 04:03:57.742 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:03:57.742 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:03:57.743 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:03:57.744 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.177.213
2025-02-16 04:03:57.744 DEBUG [src.node.docker_mananger] Generated ports ['45678', '45679', '45680', '45681', '45682']
2025-02-16 04:03:57.744 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:03:57.744 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:03:57.744 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:03:57.744 DEBUG [src.node.docker_mananger] docker run -i -t -p 45678:45678 -p 45679:45679 -p 45680:45680 -p 45681:45681 -p 45682:45682 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45680 --rest-port=45678 --tcp-port=45679 --discv5-udp-port=45681 --rest-address=0.0.0.0 --nat=extip:172.18.177.213 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e29f1fd94bd2fd16d0d7fa9ebde6ef7ab1d1e3bd2b0fd5ca7ec69adef3689e3e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45682 --metrics-logging=true --lightpush=true --relay=true
2025-02-16 04:03:57.966 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.177.213 waku f5714c7d9c5c8f43a24cb396dc63a857e82377109d4d8c1e4b76ddadb3cf3d56
2025-02-16 04:03:58.015 DEBUG [src.node.docker_mananger] Container started with ID f5714c7d9c5c. Setting up logs at ./log/docker/receiving_node1_2025-02-16_04-03-57__755b82d9-5362-4cf8-b4e3-5b2b8f5d1694__wakuorg_nwaku:latest.log
2025-02-16 04:03:58.016 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45678
2025-02-16 04:03:58.016 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:03:58.393 ERROR [src.node.docker_mananger] Max retries reached for container d6d211d24c9c. Exiting log stream.
2025-02-16 04:03:59.017 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45678/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:03:59.020 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:03:59.020 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:03:59.020 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45678/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:03:59.022 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.177.213/tcp/45679/p2p/16Uiu2HAmF1DwGeqReczjs2ctVJowUzTc3kyyHRdafVMkKY84KNTo","/ip4/172.18.177.213/tcp/45680/ws/p2p/16Uiu2HAmF1DwGeqReczjs2ctVJowUzTc3kyyHRdafVMkKY84KNTo"],"enrUri":"enr:-L24QCy3g-jwSULTpGaWDWH8ArIiB0eOAOjY9mUjuVHEBgAoQ27w0D2himk33YfCgHpP3czATL_oO9CQvyY-wtHQQZUCgmlkgnY0gmlwhKwSsdWKbXVsdGlhZGRyc5YACASsErHVBrJvAAoErBKx1QaycN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDIuZaBKGzmkzJSgBXFiFFC0JAgnwRBj581tkBqD5_0SaDdGNwgrJvg3VkcIKycYV3YWt1Mgk"}'
2025-02-16 04:03:59.022 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:03:59.029 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:03:59.029 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-16_04-03-57__755b82d9-5362-4cf8-b4e3-5b2b8f5d1694__wakuorg_nwaku:latest.log
2025-02-16 04:03:59.029 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:03:59.029 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:03:59.031 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:03:59.031 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.3.155
2025-02-16 04:03:59.031 DEBUG [src.node.docker_mananger] Generated ports ['54412', '54413', '54414', '54415', '54416']
2025-02-16 04:03:59.031 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:03:59.031 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:03:59.031 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:03:59.031 DEBUG [src.node.docker_mananger] docker run -i -t -p 54412:54412 -p 54413:54413 -p 54414:54414 -p 54415:54415 -p 54416:54416 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54414 --rest-port=54412 --tcp-port=54413 --discv5-udp-port=54415 --rest-address=0.0.0.0 --nat=extip:172.18.3.155 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8df870c81dad1ba2a3da41b112a2b74810acae82c6daf5bbdcc1cbc48d5e443b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54416 --metrics-logging=true --lightpush=false --relay=true
2025-02-16 04:03:59.257 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.3.155 waku b4433caed275b4cc87d623b4a83bf4f6a20e524d44977d4a406ff1fb62d7bc2b
2025-02-16 04:03:59.302 DEBUG [src.node.docker_mananger] Container started with ID b4433caed275. Setting up logs at ./log/docker/receiving_node2_2025-02-16_04-03-57__755b82d9-5362-4cf8-b4e3-5b2b8f5d1694__wakuorg_nwaku:latest.log
2025-02-16 04:03:59.303 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 54412
2025-02-16 04:03:59.303 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:04:00.303 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54412/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:00.306 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:04:00.306 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:04:00.306 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54412/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:00.308 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.3.155/tcp/54413/p2p/16Uiu2HAmHqVobzjUMswDh393okXVEeHCPGR82Jaiy3ihnJETH2Pi","/ip4/172.18.3.155/tcp/54414/ws/p2p/16Uiu2HAmHqVobzjUMswDh393okXVEeHCPGR82Jaiy3ihnJETH2Pi"],"enrUri":"enr:-L24QGu5q6GlU64i8yndkIYQagGTguIbY-Lfzkv0lKJyaW8LZclR-lmVNa9K0iIo0Rx2SWTXtIODJyCOZVKM_L6GXXICgmlkgnY0gmlwhKwSA5uKbXVsdGlhZGRyc5YACASsEgObBtSNAAoErBIDmwbUjt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDTPuLzqAZZTczBIDTO_7Ou5TGf5os0ZFw9k2XJPAhLkmDdGNwgtSNg3VkcILUj4V3YWt1MgE"}'
2025-02-16 04:04:00.308 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:04:00.309 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54412/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.177.213/tcp/45679/p2p/16Uiu2HAmF1DwGeqReczjs2ctVJowUzTc3kyyHRdafVMkKY84KNTo"]'
2025-02-16 04:04:00.344 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:00.360 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:04:00.361 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-16_04-03-57__755b82d9-5362-4cf8-b4e3-5b2b8f5d1694__wakuorg_nwaku:latest.log
2025-02-16 04:04:00.362 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:04:00.363 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:04:00.367 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:04:00.368 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.187.24
2025-02-16 04:04:00.369 DEBUG [src.node.docker_mananger] Generated ports ['52360', '52361', '52362', '52363', '52364']
2025-02-16 04:04:00.369 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:04:00.369 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:04:00.369 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:04:00.370 DEBUG [src.node.docker_mananger] docker run -i -t -p 52360:52360 -p 52361:52361 -p 52362:52362 -p 52363:52363 -p 52364:52364 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52362 --rest-port=52360 --tcp-port=52361 --discv5-udp-port=52363 --rest-address=0.0.0.0 --nat=extip:172.18.187.24 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c7ce79ee33d23b06649bcdf9049cb4dfc80ccebc2cd1abcd9d82ee8466a22d01 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52364 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QCy3g-jwSULTpGaWDWH8ArIiB0eOAOjY9mUjuVHEBgAoQ27w0D2himk33YfCgHpP3czATL_oO9CQvyY-wtHQQZUCgmlkgnY0gmlwhKwSsdWKbXVsdGlhZGRyc5YACASsErHVBrJvAAoErBKx1QaycN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDIuZaBKGzmkzJSgBXFiFFC0JAgnwRBj581tkBqD5_0SaDdGNwgrJvg3VkcIKycYV3YWt1Mgk --lightpushnode=/ip4/172.18.177.213/tcp/45679/p2p/16Uiu2HAmF1DwGeqReczjs2ctVJowUzTc3kyyHRdafVMkKY84KNTo --lightpush=true --relay=false
2025-02-16 04:04:00.595 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.187.24 waku 7378ea0478ff29c6a3d111a1d4b3cfc95be2d37ae3a140b43ae31255c6867372
2025-02-16 04:04:00.644 DEBUG [src.node.docker_mananger] Container started with ID 7378ea0478ff. Setting up logs at ./log/docker/lightpush_node1_2025-02-16_04-03-57__755b82d9-5362-4cf8-b4e3-5b2b8f5d1694__wakuorg_nwaku:latest.log
2025-02-16 04:04:00.644 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 52360
2025-02-16 04:04:00.644 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:04:01.645 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52360/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:01.647 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:04:01.648 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:04:01.648 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52360/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:01.650 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.187.24/tcp/52361/p2p/16Uiu2HAmGfN9Sr4RedNmEXxTFRwzHquJTiS6WYRM953SNC35LKA3","/ip4/172.18.187.24/tcp/52362/ws/p2p/16Uiu2HAmGfN9Sr4RedNmEXxTFRwzHquJTiS6WYRM953SNC35LKA3"],"enrUri":"enr:-L24QNtrlJS7EkUhGWXHjZhxQ81fScdTIzYmZse4y9cvDkCndii-xwUNnfJNG7Fvi8z4m4b6au-96wmZ2Vbu1iwURyMCgmlkgnY0gmlwhKwSuxiKbXVsdGlhZGRyc5YACASsErsYBsyJAAoErBK7GAbMit0DgnJzhQADAQAAiXNlY3AyNTZrMaEDO4dkbaZjTWh-KivXr80dMxAMXWEnsDD_VPgivyN0PUyDdGNwgsyJg3VkcILMi4V3YWt1Mgg"}'
2025-02-16 04:04:01.650 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:04:01.650 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52360/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.177.213/tcp/45679/p2p/16Uiu2HAmF1DwGeqReczjs2ctVJowUzTc3kyyHRdafVMkKY84KNTo"]'
2025-02-16 04:04:01.689 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:01.690 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52360/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.3.155/tcp/54413/p2p/16Uiu2HAmHqVobzjUMswDh393okXVEeHCPGR82Jaiy3ihnJETH2Pi"]'
2025-02-16 04:04:01.715 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:01.716 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45678/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:04:01.722 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:01.724 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54412/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:04:01.730 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:01.732 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52360/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739678641732239360}}'
2025-02-16 04:04:01.740 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:52360/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
2025-02-16 04:04:01.742 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:04:01.742 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:04:01.743 DEBUG [src.node.waku_node] Stopping container with id f5714c7d9c5c
2025-02-16 04:04:02.499 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:04:02.500 DEBUG [src.node.waku_node] Stopping container with id b4433caed275
2025-02-16 04:04:03.313 ERROR [src.node.docker_mananger] Max retries reached for container f5714c7d9c5c. Exiting log stream.
2025-02-16 04:04:04.020 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:04:04.021 DEBUG [src.node.waku_node] Stopping container with id 7378ea0478ff
2025-02-16 04:04:04.832 ERROR [src.node.docker_mananger] Max retries reached for container b4433caed275. Exiting log stream.
2025-02-16 04:04:05.520 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:04:05.522 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:04:05.529 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:04:05.536 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:04:05.542 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
