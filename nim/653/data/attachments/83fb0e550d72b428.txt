2025-02-16 04:07:16.594 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:07:16.594 DEBUG [tests.conftest] Running test: test_store_with_long_string_pubsub_topic with id: 2025-02-16_04-07-16__7f351a43-04c0-4158-b581-5abdd79e4eb4
2025-02-16 04:07:16.594 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:07:16.595 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-16 04:07:16.595 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-16 04:07:16.601 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:07:16.601 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-16_04-07-16__7f351a43-04c0-4158-b581-5abdd79e4eb4__wakuorg_nwaku:latest.log
2025-02-16 04:07:16.602 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:07:16.602 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:07:16.603 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:07:16.603 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.0.40
2025-02-16 04:07:16.603 DEBUG [src.node.docker_mananger] Generated ports ['40284', '40285', '40286', '40287', '40288']
2025-02-16 04:07:16.603 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:07:16.604 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:07:16.604 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:07:16.604 DEBUG [src.node.docker_mananger] docker run -i -t -p 40284:40284 -p 40285:40285 -p 40286:40286 -p 40287:40287 -p 40288:40288 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40286 --rest-port=40284 --tcp-port=40285 --discv5-udp-port=40287 --rest-address=0.0.0.0 --nat=extip:172.18.0.40 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ea0a5fcfe0f9acbbfddeb84accf0ffac0dfce784be5044fb65cce7ccae91ebe3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40288 --metrics-logging=true --store=true --relay=true
2025-02-16 04:07:16.827 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.0.40 waku 13a912b95f092abeb2ef4b027edd2257ccbe2400d7bb4212adac030689089aad
2025-02-16 04:07:16.877 DEBUG [src.node.docker_mananger] Container started with ID 13a912b95f09. Setting up logs at ./log/docker/publishing_node1_2025-02-16_04-07-16__7f351a43-04c0-4158-b581-5abdd79e4eb4__wakuorg_nwaku:latest.log
2025-02-16 04:07:16.880 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40284
2025-02-16 04:07:16.881 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:07:17.401 ERROR [src.node.docker_mananger] Max retries reached for container 2291200c3d6d. Exiting log stream.
2025-02-16 04:07:17.881 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40284/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:07:17.884 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:07:17.884 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:07:17.884 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40284/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:07:17.886 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.0.40/tcp/40285/p2p/16Uiu2HAmMGboFRtT4ehrWTFJba8ifLDp3mtzCsvKueUAaNw6PCJh","/ip4/172.18.0.40/tcp/40286/ws/p2p/16Uiu2HAmMGboFRtT4ehrWTFJba8ifLDp3mtzCsvKueUAaNw6PCJh"],"enrUri":"enr:-L24QGSzoodfeLmLHVG2bqFJ3mh5TsHSuJvL9owt-RBPc6d0OIGwTuRFiLe3w_1a_lfOp8ImCIQumi3_oZxYe_NtmeQCgmlkgnY0gmlwhKwSACiKbXVsdGlhZGRyc5YACASsEgAoBp1dAAoErBIAKAadXt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDf_zniSWdFw07y4BAZs_98Ww3VZpfzSUubnl1FGAJfc6DdGNwgp1dg3VkcIKdX4V3YWt1MgM"}'
2025-02-16 04:07:17.886 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:07:17.893 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:07:17.893 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-16_04-07-16__7f351a43-04c0-4158-b581-5abdd79e4eb4__wakuorg_nwaku:latest.log
2025-02-16 04:07:17.893 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:07:17.893 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:07:17.895 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:07:17.895 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.134.232
2025-02-16 04:07:17.895 DEBUG [src.node.docker_mananger] Generated ports ['24040', '24041', '24042', '24043', '24044']
2025-02-16 04:07:17.895 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:07:17.895 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:07:17.896 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:07:17.896 DEBUG [src.node.docker_mananger] docker run -i -t -p 24040:24040 -p 24041:24041 -p 24042:24042 -p 24043:24043 -p 24044:24044 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24042 --rest-port=24040 --tcp-port=24041 --discv5-udp-port=24043 --rest-address=0.0.0.0 --nat=extip:172.18.134.232 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5fa53acfb0ffece42a5ac36cc3a2efc4baabb8c78bbb2ecac65cb0b5cb4a8bec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24044 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QGSzoodfeLmLHVG2bqFJ3mh5TsHSuJvL9owt-RBPc6d0OIGwTuRFiLe3w_1a_lfOp8ImCIQumi3_oZxYe_NtmeQCgmlkgnY0gmlwhKwSACiKbXVsdGlhZGRyc5YACASsEgAoBp1dAAoErBIAKAadXt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDf_zniSWdFw07y4BAZs_98Ww3VZpfzSUubnl1FGAJfc6DdGNwgp1dg3VkcIKdX4V3YWt1MgM --storenode=/ip4/172.18.0.40/tcp/40285/p2p/16Uiu2HAmMGboFRtT4ehrWTFJba8ifLDp3mtzCsvKueUAaNw6PCJh --store=true --relay=true
2025-02-16 04:07:18.125 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.134.232 waku 9f6fcabf99311d52167615e98b8ae0f10af654af3fe79f593deae58fd53e89fc
2025-02-16 04:07:18.173 DEBUG [src.node.docker_mananger] Container started with ID 9f6fcabf9931. Setting up logs at ./log/docker/store_node1_2025-02-16_04-07-16__7f351a43-04c0-4158-b581-5abdd79e4eb4__wakuorg_nwaku:latest.log
2025-02-16 04:07:18.175 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 24040
2025-02-16 04:07:18.175 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:07:19.175 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24040/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:07:19.178 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:07:19.178 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:07:19.179 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24040/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:07:19.181 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.134.232/tcp/24041/p2p/16Uiu2HAm7joEWuXk8X5Ed2F7D8FUN8mqF3kmcTekKKddseS1KFXU","/ip4/172.18.134.232/tcp/24042/ws/p2p/16Uiu2HAm7joEWuXk8X5Ed2F7D8FUN8mqF3kmcTekKKddseS1KFXU"],"enrUri":"enr:-L24QJ2ZgKVpQ9dIHv-n8Wqca9JQh7gkZAnxpjR2-gJvDTtGCdU9394uiydjgVdHDkhrAb2bUNV5SuZJ2V_SUzM0NjICgmlkgnY0gmlwhKwShuiKbXVsdGlhZGRyc5YACASsEoboBl3pAAoErBKG6AZd6t0DgnJzhQADAQAAiXNlY3AyNTZrMaECtvDmTeqg5JJ1Ud2hbPI3EIxKfCWqotWzqVtfxGRtWo-DdGNwgl3pg3VkcIJd64V3YWt1MgM"}'
2025-02-16 04:07:19.181 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:07:19.181 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24040/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.0.40/tcp/40285/p2p/16Uiu2HAmMGboFRtT4ehrWTFJba8ifLDp3mtzCsvKueUAaNw6PCJh"]'
2025-02-16 04:07:19.184 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:07:19.184 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40284/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:07:19.187 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:07:19.187 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24040/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:07:19.189 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:07:19.189 DEBUG [src.steps.store] Relaying message
2025-02-16 04:07:19.190 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40284/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:07:19.195 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:07:19.195 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:07:19.396 DEBUG [src.steps.store] Relaying message
2025-02-16 04:07:19.397 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40284/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:07:19.402 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:07:19.403 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:07:19.604 DEBUG [src.steps.store] Relaying message
2025-02-16 04:07:19.604 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40284/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:07:19.611 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:07:19.611 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:07:19.813 DEBUG [src.steps.store] Relaying message
2025-02-16 04:07:19.813 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40284/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:07:19.819 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:07:19.819 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:07:20.021 DEBUG [src.steps.store] Relaying message
2025-02-16 04:07:20.021 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40284/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:07:20.027 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:07:20.028 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:07:20.229 DEBUG [src.steps.store] Relaying message
2025-02-16 04:07:20.229 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40284/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:07:20.235 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:07:20.236 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:07:20.437 DEBUG [src.steps.store] Relaying message
2025-02-16 04:07:20.437 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40284/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:07:20.443 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:07:20.444 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:07:20.645 DEBUG [src.steps.store] Relaying message
2025-02-16 04:07:20.645 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40284/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:07:20.651 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:07:20.651 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:07:20.979 DEBUG [tests.store.test_topics] Trying to get stored msg with url topic size million 
2025-02-16 04:07:20.980 DEBUG [src.steps.store] Relaying message
2025-02-16 04:07:20.980 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40284/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:07:20.986 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:07:20.986 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:07:21.188 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-16 04:07:21.407 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-16 04:07:26.097 ERROR [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-16 04:07:26.101 ERROR [tests.store.test_topics] store request with very long pubsub topic wasn't accepted 
2025-02-16 04:07:26.104 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:07:26.105 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:07:26.105 DEBUG [src.node.waku_node] Stopping container with id 13a912b95f09
2025-02-16 04:07:27.419 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:07:27.419 DEBUG [src.node.waku_node] Stopping container with id 9f6fcabf9931
2025-02-16 04:07:28.232 ERROR [src.node.docker_mananger] Max retries reached for container 13a912b95f09. Exiting log stream.
2025-02-16 04:07:28.567 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:07:28.568 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:07:28.578 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:07:28.585 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
