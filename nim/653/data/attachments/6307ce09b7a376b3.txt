2025-02-16 04:06:56.778 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:06:56.778 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_version with id: 2025-02-16_04-06-56__c27d6b6a-89ed-4e36-9924-3d1fd04084c4
2025-02-16 04:06:56.778 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:06:56.778 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-16 04:06:56.785 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:06:56.785 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-16_04-06-56__c27d6b6a-89ed-4e36-9924-3d1fd04084c4__wakuorg_nwaku:latest.log
2025-02-16 04:06:56.785 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:06:56.785 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:06:56.787 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:06:56.787 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.214.197
2025-02-16 04:06:56.787 DEBUG [src.node.docker_mananger] Generated ports ['14627', '14628', '14629', '14630', '14631']
2025-02-16 04:06:56.787 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:06:56.787 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:06:56.788 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:06:56.788 DEBUG [src.node.docker_mananger] docker run -i -t -p 14627:14627 -p 14628:14628 -p 14629:14629 -p 14630:14630 -p 14631:14631 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14629 --rest-port=14627 --tcp-port=14628 --discv5-udp-port=14630 --rest-address=0.0.0.0 --nat=extip:172.18.214.197 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c62fed4e0e5a4bad1caed39ccc83e5cd5a3dff9fd4a884c08ff350b11be6cf7e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14631 --metrics-logging=true --lightpush=true --relay=true
2025-02-16 04:06:57.029 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.214.197 waku 0a91a6e3ed6a75c90c09b0d362593cf5459c3f93fd04f49fb47988f33f8de38e
2025-02-16 04:06:57.075 DEBUG [src.node.docker_mananger] Container started with ID 0a91a6e3ed6a. Setting up logs at ./log/docker/receiving_node1_2025-02-16_04-06-56__c27d6b6a-89ed-4e36-9924-3d1fd04084c4__wakuorg_nwaku:latest.log
2025-02-16 04:06:57.076 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14627
2025-02-16 04:06:57.076 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:06:57.558 ERROR [src.node.docker_mananger] Max retries reached for container 9e8f740ee12e. Exiting log stream.
2025-02-16 04:06:58.077 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14627/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:06:58.080 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:06:58.080 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:06:58.080 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14627/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:06:58.082 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.214.197/tcp/14628/p2p/16Uiu2HAkuTopfAxHkSjty6irBcVPVBPupbr4NeHfyrPNjZZ9WgpX","/ip4/172.18.214.197/tcp/14629/ws/p2p/16Uiu2HAkuTopfAxHkSjty6irBcVPVBPupbr4NeHfyrPNjZZ9WgpX"],"enrUri":"enr:-L24QL72EHSksQj0vFJ_CnOrtJw2oVntXr81QFDXKaydH-75PGeQkSJ7K09_5wYv83MwKg1_qpggWg4BsYN_ZteIZ_sCgmlkgnY0gmlwhKwS1sWKbXVsdGlhZGRyc5YACASsEtbFBjkkAAoErBLWxQY5Jd0DgnJzhQADAQAAiXNlY3AyNTZrMaECAIwHd6gR37Ph-HycZ7gCgLMLv3ZEexw4lsgPk0AlNEiDdGNwgjkkg3VkcII5JoV3YWt1Mgk"}'
2025-02-16 04:06:58.083 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:06:58.089 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:06:58.089 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-16_04-06-56__c27d6b6a-89ed-4e36-9924-3d1fd04084c4__wakuorg_nwaku:latest.log
2025-02-16 04:06:58.089 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:06:58.090 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:06:58.091 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:06:58.091 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.37.246
2025-02-16 04:06:58.091 DEBUG [src.node.docker_mananger] Generated ports ['22358', '22359', '22360', '22361', '22362']
2025-02-16 04:06:58.091 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:06:58.091 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:06:58.091 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:06:58.092 DEBUG [src.node.docker_mananger] docker run -i -t -p 22358:22358 -p 22359:22359 -p 22360:22360 -p 22361:22361 -p 22362:22362 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22360 --rest-port=22358 --tcp-port=22359 --discv5-udp-port=22361 --rest-address=0.0.0.0 --nat=extip:172.18.37.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bbdc8dcd12b41defbe7d2a1b4e5ccdb9edb0f3aac127ff2a01e93f84dd48c9d4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22362 --metrics-logging=true --lightpush=false --relay=true
2025-02-16 04:06:58.317 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.37.246 waku 18e289c0bbbe17314fc053c46f8599c1b764dc55045acdabb874ad15698c4c6f
2025-02-16 04:06:58.365 DEBUG [src.node.docker_mananger] Container started with ID 18e289c0bbbe. Setting up logs at ./log/docker/receiving_node2_2025-02-16_04-06-56__c27d6b6a-89ed-4e36-9924-3d1fd04084c4__wakuorg_nwaku:latest.log
2025-02-16 04:06:58.365 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22358
2025-02-16 04:06:58.365 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:06:59.366 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22358/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:06:59.368 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:06:59.369 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:06:59.369 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22358/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:06:59.371 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.37.246/tcp/22359/p2p/16Uiu2HAmHpw5xGMyjdW5ivoZDSavdRUVESSLRvuS1SrQtLiLHCMJ","/ip4/172.18.37.246/tcp/22360/ws/p2p/16Uiu2HAmHpw5xGMyjdW5ivoZDSavdRUVESSLRvuS1SrQtLiLHCMJ"],"enrUri":"enr:-L24QEYLFnaAvvxpM5lU4reMXUNuILhY6ry4I8zrYKLILm5zFw_MMgyspEm_SoMadWupcoT9pNwhR52BMj-obre6sqgCgmlkgnY0gmlwhKwSJfaKbXVsdGlhZGRyc5YACASsEiX2BldXAAoErBIl9gZXWN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDTNaNN9_4uIyRde8v8TDkmWuJk1pxiGxzvYK5o0p3mbWDdGNwgldXg3VkcIJXWYV3YWt1MgE"}'
2025-02-16 04:06:59.371 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:06:59.371 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22358/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.214.197/tcp/14628/p2p/16Uiu2HAkuTopfAxHkSjty6irBcVPVBPupbr4NeHfyrPNjZZ9WgpX"]'
2025-02-16 04:06:59.408 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:06:59.419 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:06:59.420 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-16_04-06-56__c27d6b6a-89ed-4e36-9924-3d1fd04084c4__wakuorg_nwaku:latest.log
2025-02-16 04:06:59.420 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:06:59.420 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:06:59.422 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:06:59.422 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.96.89
2025-02-16 04:06:59.422 DEBUG [src.node.docker_mananger] Generated ports ['46215', '46216', '46217', '46218', '46219']
2025-02-16 04:06:59.422 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:06:59.422 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:06:59.422 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:06:59.422 DEBUG [src.node.docker_mananger] docker run -i -t -p 46215:46215 -p 46216:46216 -p 46217:46217 -p 46218:46218 -p 46219:46219 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46217 --rest-port=46215 --tcp-port=46216 --discv5-udp-port=46218 --rest-address=0.0.0.0 --nat=extip:172.18.96.89 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7be69c5c066eca0cdce5d8c386fd0b86c04dcd7a2ca2b3cbb6cbf0ec27bbe6bf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46219 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QL72EHSksQj0vFJ_CnOrtJw2oVntXr81QFDXKaydH-75PGeQkSJ7K09_5wYv83MwKg1_qpggWg4BsYN_ZteIZ_sCgmlkgnY0gmlwhKwS1sWKbXVsdGlhZGRyc5YACASsEtbFBjkkAAoErBLWxQY5Jd0DgnJzhQADAQAAiXNlY3AyNTZrMaECAIwHd6gR37Ph-HycZ7gCgLMLv3ZEexw4lsgPk0AlNEiDdGNwgjkkg3VkcII5JoV3YWt1Mgk --lightpushnode=/ip4/172.18.214.197/tcp/14628/p2p/16Uiu2HAkuTopfAxHkSjty6irBcVPVBPupbr4NeHfyrPNjZZ9WgpX --lightpush=true --relay=false
2025-02-16 04:06:59.663 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.96.89 waku cf1cc3f29d4e6603e3c5f22b41ec75ecb17061ff197ffdbba4d277e6409a7f4b
2025-02-16 04:06:59.712 DEBUG [src.node.docker_mananger] Container started with ID cf1cc3f29d4e. Setting up logs at ./log/docker/lightpush_node1_2025-02-16_04-06-56__c27d6b6a-89ed-4e36-9924-3d1fd04084c4__wakuorg_nwaku:latest.log
2025-02-16 04:06:59.713 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46215
2025-02-16 04:06:59.713 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:07:00.713 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46215/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:07:00.716 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:07:00.717 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:07:00.717 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46215/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:07:00.719 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.96.89/tcp/46216/p2p/16Uiu2HAm1dowUHMvSkC3T3axmPWmpEpDprpGH1NWduMtwLUwe4Fe","/ip4/172.18.96.89/tcp/46217/ws/p2p/16Uiu2HAm1dowUHMvSkC3T3axmPWmpEpDprpGH1NWduMtwLUwe4Fe"],"enrUri":"enr:-L24QIYzENXuUSjkb5WXM1kS__rtwFJRAEPkSLfd3q8YOSabP6FrV7iVLfdvAhaoU4lfX28m4gst8q5DPFUJsQPqv6ACgmlkgnY0gmlwhKwSYFmKbXVsdGlhZGRyc5YACASsEmBZBrSIAAoErBJgWQa0id0DgnJzhQADAQAAiXNlY3AyNTZrMaECXEIXdJIrujPo62lgeKCPaGMAsngts8K0x3P6lLSMxIWDdGNwgrSIg3VkcIK0ioV3YWt1Mgg"}'
2025-02-16 04:07:00.719 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:07:00.719 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46215/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.214.197/tcp/14628/p2p/16Uiu2HAkuTopfAxHkSjty6irBcVPVBPupbr4NeHfyrPNjZZ9WgpX"]'
2025-02-16 04:07:00.759 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:07:00.761 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46215/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.37.246/tcp/22359/p2p/16Uiu2HAmHpw5xGMyjdW5ivoZDSavdRUVESSLRvuS1SrQtLiLHCMJ"]'
2025-02-16 04:07:00.790 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:07:00.791 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14627/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:07:00.797 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:07:00.798 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22358/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:07:00.803 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:07:00.805 DEBUG [src.steps.light_push] Lightpushing message
2025-02-16 04:07:00.806 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46215/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739678820805495296, "version": 2.1}}'
2025-02-16 04:07:00.810 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:46215/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data: '
2025-02-16 04:07:00.815 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:07:00.816 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:07:00.816 DEBUG [src.node.waku_node] Stopping container with id 0a91a6e3ed6a
2025-02-16 04:07:01.593 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:07:01.593 DEBUG [src.node.waku_node] Stopping container with id 18e289c0bbbe
2025-02-16 04:07:02.406 ERROR [src.node.docker_mananger] Max retries reached for container 0a91a6e3ed6a. Exiting log stream.
2025-02-16 04:07:03.109 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:07:03.110 DEBUG [src.node.waku_node] Stopping container with id cf1cc3f29d4e
2025-02-16 04:07:03.922 ERROR [src.node.docker_mananger] Max retries reached for container 18e289c0bbbe. Exiting log stream.
2025-02-16 04:07:04.597 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:07:04.598 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:07:04.606 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:07:04.614 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:07:04.619 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
