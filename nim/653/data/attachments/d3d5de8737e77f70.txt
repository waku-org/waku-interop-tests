2025-02-16 04:07:19.137 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:07:19.137 DEBUG [tests.conftest] Running test: test_publishing_node_paused_and_unpaused with id: 2025-02-16_04-07-19__1e7f80e3-4736-4a4c-854e-a8e2eefb8447
2025-02-16 04:07:19.137 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:07:19.138 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-16 04:07:19.138 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-16 04:07:19.144 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:07:19.144 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-16_04-07-19__1e7f80e3-4736-4a4c-854e-a8e2eefb8447__wakuorg_nwaku:latest.log
2025-02-16 04:07:19.144 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:07:19.145 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:07:19.146 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:07:19.146 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.45.63
2025-02-16 04:07:19.146 DEBUG [src.node.docker_mananger] Generated ports ['53446', '53447', '53448', '53449', '53450']
2025-02-16 04:07:19.146 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:07:19.147 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:07:19.147 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:07:19.147 DEBUG [src.node.docker_mananger] docker run -i -t -p 53446:53446 -p 53447:53447 -p 53448:53448 -p 53449:53449 -p 53450:53450 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53448 --rest-port=53446 --tcp-port=53447 --discv5-udp-port=53449 --rest-address=0.0.0.0 --nat=extip:172.18.45.63 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7482a4dd3cfcb1a3c2b8ec0bc8f8ce310e1defa9cc8c91eadbc17cdb07a0d80c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53450 --metrics-logging=true --store=true --relay=true
2025-02-16 04:07:19.532 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:07:19.533 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:07:19.534 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:07:19.534 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.102.112
2025-02-16 04:07:19.534 DEBUG [src.node.docker_mananger] Generated ports ['22475', '22476', '22477', '22478', '22479']
2025-02-16 04:07:19.535 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:07:19.535 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:07:19.535 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:07:19.535 DEBUG [src.node.docker_mananger] docker run -i -t -p 22475:22475 -p 22476:22476 -p 22477:22477 -p 22478:22478 -p 22479:22479 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22477 --rest-port=22475 --tcp-port=22476 --discv5-udp-port=22478 --rest-address=0.0.0.0 --nat=extip:172.18.102.112 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3d521eec92822a7dc5fbebe5cc2c52d0b7dccd8d1c8ad33fc37eb2eadbbf4a6a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22479 --metrics-logging=true --store=true --relay=true
2025-02-16 04:07:19.759 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.102.112 waku 49d024337d33a25b0d0ac4b98b058bc2fde313b65cfb4d946e15de1fbab0935a
2025-02-16 04:07:19.808 DEBUG [src.node.docker_mananger] Container started with ID 49d024337d33. Setting up logs at ./log/docker/publishing_node1_2025-02-16_04-07-19__1e7f80e3-4736-4a4c-854e-a8e2eefb8447__wakuorg_nwaku:latest.log
2025-02-16 04:07:19.810 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22475
2025-02-16 04:07:19.810 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:07:19.944 ERROR [src.node.docker_mananger] Max retries reached for container fcdcd95949f7. Exiting log stream.
2025-02-16 04:07:20.810 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22475/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:07:20.813 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:07:20.813 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:07:20.814 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22475/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:07:20.816 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.102.112/tcp/22476/p2p/16Uiu2HAmVhGcQwmwpZE5vJVxwevMtqk6MZ66eZHUWhcNXZWXuk7y","/ip4/172.18.102.112/tcp/22477/ws/p2p/16Uiu2HAmVhGcQwmwpZE5vJVxwevMtqk6MZ66eZHUWhcNXZWXuk7y"],"enrUri":"enr:-L24QNUXwsU7XL_UeD26DQWEzMe5rzrxmpOiopA_QY4sHZ6JISeowBok6GKFeVrTYhhCvackASXB8x2BSppzsJvrd9oCgmlkgnY0gmlwhKwSZnCKbXVsdGlhZGRyc5YACASsEmZwBlfMAAoErBJmcAZXzd0DgnJzhQADAQAAiXNlY3AyNTZrMaED_Sw5t8FtuYqZvJNhzEk0tTQxITOeJSsf2VzrkKOQX8CDdGNwglfMg3VkcIJXzoV3YWt1MgM"}'
2025-02-16 04:07:20.816 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:07:20.823 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:07:20.823 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-16_04-07-19__1e7f80e3-4736-4a4c-854e-a8e2eefb8447__wakuorg_nwaku:latest.log
2025-02-16 04:07:20.823 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:07:20.823 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:07:20.824 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:07:20.824 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.208.148
2025-02-16 04:07:20.825 DEBUG [src.node.docker_mananger] Generated ports ['29698', '29699', '29700', '29701', '29702']
2025-02-16 04:07:20.825 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:07:20.825 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:07:20.825 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:07:20.825 DEBUG [src.node.docker_mananger] docker run -i -t -p 29698:29698 -p 29699:29699 -p 29700:29700 -p 29701:29701 -p 29702:29702 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29700 --rest-port=29698 --tcp-port=29699 --discv5-udp-port=29701 --rest-address=0.0.0.0 --nat=extip:172.18.208.148 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b0db0f91e0f4f07f16b9ceacf0d0c9e7d340b1c0db23a5b517e6afef1ed60a2c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29702 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QNUXwsU7XL_UeD26DQWEzMe5rzrxmpOiopA_QY4sHZ6JISeowBok6GKFeVrTYhhCvackASXB8x2BSppzsJvrd9oCgmlkgnY0gmlwhKwSZnCKbXVsdGlhZGRyc5YACASsEmZwBlfMAAoErBJmcAZXzd0DgnJzhQADAQAAiXNlY3AyNTZrMaED_Sw5t8FtuYqZvJNhzEk0tTQxITOeJSsf2VzrkKOQX8CDdGNwglfMg3VkcIJXzoV3YWt1MgM --storenode=/ip4/172.18.102.112/tcp/22476/p2p/16Uiu2HAmVhGcQwmwpZE5vJVxwevMtqk6MZ66eZHUWhcNXZWXuk7y --store=true --relay=true
2025-02-16 04:07:21.063 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.208.148 waku aad4846458396be9aa41113c187a66958e256679073c0e5054ca9333ea730b7a
2025-02-16 04:07:21.114 DEBUG [src.node.docker_mananger] Container started with ID aad484645839. Setting up logs at ./log/docker/store_node1_2025-02-16_04-07-19__1e7f80e3-4736-4a4c-854e-a8e2eefb8447__wakuorg_nwaku:latest.log
2025-02-16 04:07:21.114 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29698
2025-02-16 04:07:21.115 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:07:22.115 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29698/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:07:22.118 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:07:22.118 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:07:22.118 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29698/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:07:22.120 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.208.148/tcp/29699/p2p/16Uiu2HAmPuZeFkjjaP59ALWcc7TCLPsKdLc8vnnWCCxnCuPSRrnx","/ip4/172.18.208.148/tcp/29700/ws/p2p/16Uiu2HAmPuZeFkjjaP59ALWcc7TCLPsKdLc8vnnWCCxnCuPSRrnx"],"enrUri":"enr:-L24QPSQJfV9tfcdnNmEUxaPB6lXd5hJ-UZ0BRWcRNm7I0rMWpudluW9GkWr1gSygnUivi9-Z4lpChruyqu88Ev4lxoCgmlkgnY0gmlwhKwS0JSKbXVsdGlhZGRyc5YACASsEtCUBnQDAAoErBLQlAZ0BN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDpyxU22k8EJ47AyB-tlD1DlVmWULM1Fd5wKZ8E_n8k92DdGNwgnQDg3VkcIJ0BYV3YWt1MgM"}'
2025-02-16 04:07:22.121 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:07:22.121 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29698/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.102.112/tcp/22476/p2p/16Uiu2HAmVhGcQwmwpZE5vJVxwevMtqk6MZ66eZHUWhcNXZWXuk7y"]'
2025-02-16 04:07:22.123 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:07:22.124 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22475/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:07:22.126 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:07:22.126 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29698/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:07:22.128 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:07:22.129 DEBUG [src.steps.store] Relaying message
2025-02-16 04:07:22.130 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22475/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:07:22.135 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:07:22.135 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:07:22.337 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-16 04:07:22.337 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22475/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:07:22.340 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x57ccc30e423063a452cedcf910e8f73bd5f1ff6b9b5470ba9c78db45e39c2726"}]}'
2025-02-16 04:07:22.341 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-16 04:07:22.341 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29698/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:07:22.344 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x57ccc30e423063a452cedcf910e8f73bd5f1ff6b9b5470ba9c78db45e39c2726"}]}'
2025-02-16 04:07:22.344 DEBUG [src.node.waku_node] Pausing container with id 49d024337d33
2025-02-16 04:07:22.353 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:07:23.353 DEBUG [src.node.waku_node] Unpause container with id 49d024337d33
2025-02-16 04:07:23.362 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22475/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:07:23.366 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:07:23.366 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:07:23.366 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22475/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:07:23.368 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.102.112/tcp/22476/p2p/16Uiu2HAmVhGcQwmwpZE5vJVxwevMtqk6MZ66eZHUWhcNXZWXuk7y","/ip4/172.18.102.112/tcp/22477/ws/p2p/16Uiu2HAmVhGcQwmwpZE5vJVxwevMtqk6MZ66eZHUWhcNXZWXuk7y"],"enrUri":"enr:-L24QNUXwsU7XL_UeD26DQWEzMe5rzrxmpOiopA_QY4sHZ6JISeowBok6GKFeVrTYhhCvackASXB8x2BSppzsJvrd9oCgmlkgnY0gmlwhKwSZnCKbXVsdGlhZGRyc5YACASsEmZwBlfMAAoErBJmcAZXzd0DgnJzhQADAQAAiXNlY3AyNTZrMaED_Sw5t8FtuYqZvJNhzEk0tTQxITOeJSsf2VzrkKOQX8CDdGNwglfMg3VkcIJXzoV3YWt1MgM"}'
2025-02-16 04:07:23.368 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:07:23.369 DEBUG [src.steps.store] Relaying message
2025-02-16 04:07:23.369 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22475/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:07:23.374 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:07:23.374 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:07:23.575 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-16 04:07:23.575 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22475/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:07:23.578 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x57ccc30e423063a452cedcf910e8f73bd5f1ff6b9b5470ba9c78db45e39c2726"},{"messageHash":"0x985735e7af7305d42d03b6cec17f3eedfa09320e0f7bce6404b3a29be3b027e3"}]}'
2025-02-16 04:07:23.579 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-16 04:07:23.579 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29698/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:07:23.582 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x57ccc30e423063a452cedcf910e8f73bd5f1ff6b9b5470ba9c78db45e39c2726"},{"messageHash":"0x985735e7af7305d42d03b6cec17f3eedfa09320e0f7bce6404b3a29be3b027e3"}]}'
2025-02-16 04:07:23.582 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22475/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:07:23.585 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x57ccc30e423063a452cedcf910e8f73bd5f1ff6b9b5470ba9c78db45e39c2726"},{"messageHash":"0x985735e7af7305d42d03b6cec17f3eedfa09320e0f7bce6404b3a29be3b027e3"}]}'
2025-02-16 04:07:23.585 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29698/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:07:23.588 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x57ccc30e423063a452cedcf910e8f73bd5f1ff6b9b5470ba9c78db45e39c2726"},{"messageHash":"0x985735e7af7305d42d03b6cec17f3eedfa09320e0f7bce6404b3a29be3b027e3"}]}'
2025-02-16 04:07:23.590 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:07:23.591 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:07:23.591 DEBUG [src.node.waku_node] Stopping container with id 49d024337d33
2025-02-16 04:07:24.340 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:07:24.340 DEBUG [src.node.waku_node] Stopping container with id aad484645839
2025-02-16 04:07:25.151 ERROR [src.node.docker_mananger] Max retries reached for container 49d024337d33. Exiting log stream.
2025-02-16 04:07:25.828 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:07:25.830 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:07:25.835 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:07:25.841 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
