2025-02-16 04:05:42.087 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:05:42.087 DEBUG [tests.conftest] Running test: test_time_filter_big_timestamp with id: 2025-02-16_04-05-42__ee8a5d8d-2619-4ac8-aeba-3d1381d63748
2025-02-16 04:05:42.088 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:05:42.088 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-16 04:05:42.089 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-16 04:05:42.096 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:05:42.096 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-16_04-05-42__ee8a5d8d-2619-4ac8-aeba-3d1381d63748__wakuorg_nwaku:latest.log
2025-02-16 04:05:42.097 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:05:42.097 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:05:42.099 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:05:42.100 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.213.135
2025-02-16 04:05:42.100 DEBUG [src.node.docker_mananger] Generated ports ['44541', '44542', '44543', '44544', '44545']
2025-02-16 04:05:42.100 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:05:42.100 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:05:42.100 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:05:42.101 DEBUG [src.node.docker_mananger] docker run -i -t -p 44541:44541 -p 44542:44542 -p 44543:44543 -p 44544:44544 -p 44545:44545 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44543 --rest-port=44541 --tcp-port=44542 --discv5-udp-port=44544 --rest-address=0.0.0.0 --nat=extip:172.18.213.135 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=746103e60a3b4db06bc2dad7c3bfe7da83fd78aec3782b4a9dc32dd535ea1d91 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44545 --metrics-logging=true --store=true --relay=true
2025-02-16 04:05:42.330 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.213.135 waku 34e904f36c26f7216ea9d870a977d4cd5236b74bb02672913b71b4daf73327be
2025-02-16 04:05:42.377 DEBUG [src.node.docker_mananger] Container started with ID 34e904f36c26. Setting up logs at ./log/docker/publishing_node1_2025-02-16_04-05-42__ee8a5d8d-2619-4ac8-aeba-3d1381d63748__wakuorg_nwaku:latest.log
2025-02-16 04:05:42.378 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44541
2025-02-16 04:05:42.379 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:05:42.929 ERROR [src.node.docker_mananger] Max retries reached for container 58182439a517. Exiting log stream.
2025-02-16 04:05:43.379 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44541/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:43.382 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:05:43.382 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:05:43.382 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44541/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:43.385 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.213.135/tcp/44542/p2p/16Uiu2HAmVFwE5HMaA5afrwy85GPdpv2aEQeCSeiBhyczXwXAURad","/ip4/172.18.213.135/tcp/44543/ws/p2p/16Uiu2HAmVFwE5HMaA5afrwy85GPdpv2aEQeCSeiBhyczXwXAURad"],"enrUri":"enr:-L24QADDDdyK0clHDHP7-SidhqrxTx6v51DsGBJiV9E9pu0SAMYPoLJFh-NbBTAZe5ott06V9Frw89swBkxBp02_VyQCgmlkgnY0gmlwhKwS1YeKbXVsdGlhZGRyc5YACASsEtWHBq3-AAoErBLVhwat_90DgnJzhQADAQAAiXNlY3AyNTZrMaED9q7JT26k8s1XBQtzq42DmyMWHUGH4CpXxKh1AvFgtwaDdGNwgq3-g3VkcIKuAIV3YWt1MgM"}'
2025-02-16 04:05:43.385 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:05:43.392 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:05:43.392 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-16_04-05-42__ee8a5d8d-2619-4ac8-aeba-3d1381d63748__wakuorg_nwaku:latest.log
2025-02-16 04:05:43.392 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:05:43.392 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:05:43.393 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:05:43.393 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.79.114
2025-02-16 04:05:43.394 DEBUG [src.node.docker_mananger] Generated ports ['2597', '2598', '2599', '2600', '2601']
2025-02-16 04:05:43.394 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:05:43.394 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:05:43.394 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:05:43.394 DEBUG [src.node.docker_mananger] docker run -i -t -p 2597:2597 -p 2598:2598 -p 2599:2599 -p 2600:2600 -p 2601:2601 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2599 --rest-port=2597 --tcp-port=2598 --discv5-udp-port=2600 --rest-address=0.0.0.0 --nat=extip:172.18.79.114 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d4a64aafacbfb0d54c36ccc61ca5ce7451edbcfd37dd4a3aed3d63ae2afd2fda --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2601 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QADDDdyK0clHDHP7-SidhqrxTx6v51DsGBJiV9E9pu0SAMYPoLJFh-NbBTAZe5ott06V9Frw89swBkxBp02_VyQCgmlkgnY0gmlwhKwS1YeKbXVsdGlhZGRyc5YACASsEtWHBq3-AAoErBLVhwat_90DgnJzhQADAQAAiXNlY3AyNTZrMaED9q7JT26k8s1XBQtzq42DmyMWHUGH4CpXxKh1AvFgtwaDdGNwgq3-g3VkcIKuAIV3YWt1MgM --storenode=/ip4/172.18.213.135/tcp/44542/p2p/16Uiu2HAmVFwE5HMaA5afrwy85GPdpv2aEQeCSeiBhyczXwXAURad --store=true --relay=true
2025-02-16 04:05:43.632 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.79.114 waku 52fd8bc21056daf33a03abd63ea7d9ab65acf00c655fbdd754cf7297f45e6b1d
2025-02-16 04:05:43.681 DEBUG [src.node.docker_mananger] Container started with ID 52fd8bc21056. Setting up logs at ./log/docker/store_node1_2025-02-16_04-05-42__ee8a5d8d-2619-4ac8-aeba-3d1381d63748__wakuorg_nwaku:latest.log
2025-02-16 04:05:43.681 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2597
2025-02-16 04:05:43.682 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:05:44.683 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2597/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:44.686 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:05:44.686 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:05:44.686 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2597/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:44.689 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.79.114/tcp/2598/p2p/16Uiu2HAm27Zs7HbXLuqHvnRqN2oG28yto3S4CkJXg7iLrnhQDVEB","/ip4/172.18.79.114/tcp/2599/ws/p2p/16Uiu2HAm27Zs7HbXLuqHvnRqN2oG28yto3S4CkJXg7iLrnhQDVEB"],"enrUri":"enr:-L24QB1dEYXHmy_hnqp-16QB2KJvH5_693Y94DzFU9xTTfm7BPi-2w6iO5hN5nMOCahNzuKDVQlpJQRtzV1w-0OgFWUCgmlkgnY0gmlwhKwST3KKbXVsdGlhZGRyc5YACASsEk9yBgomAAoErBJPcgYKJ90DgnJzhQADAQAAiXNlY3AyNTZrMaECY15we9M-4SGWbIw4lN3PyBp5pgTLg3isCiU0x58FovyDdGNwggomg3VkcIIKKIV3YWt1MgM"}'
2025-02-16 04:05:44.689 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:05:44.689 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2597/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.213.135/tcp/44542/p2p/16Uiu2HAmVFwE5HMaA5afrwy85GPdpv2aEQeCSeiBhyczXwXAURad"]'
2025-02-16 04:05:44.692 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:44.692 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44541/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:05:44.694 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:44.695 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2597/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:05:44.697 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:44.698 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:44.698 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44541/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:44.704 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:44.704 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:44.905 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:44.905 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44541/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:44.912 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:44.912 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:45.113 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:45.113 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44541/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:45.119 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:45.119 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:45.320 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:45.320 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44541/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:45.326 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:45.327 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:45.528 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:45.529 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44541/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:45.535 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:45.535 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:45.737 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:45.737 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44541/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:45.742 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:45.743 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:45.943 DEBUG [tests.store.test_time_filter] inquering stored messages with start time 1739678741698065920 after end time 2430878745943385088
2025-02-16 04:05:45.943 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44541/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739678741698065920&endTime=2430878745943385088&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:45.947 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x1550bee1d2f30f451529bd33baa1d1513687b91cc669a9b35e004c991706384c","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739678741698065920,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x0700fca3f4b5628464bd16aecbe300e13a6fd3b6f7c89d96c094eb961f17bdec","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739678743698072832,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x6c0769dbc2343b0e4e7c2581dbed2cd2ecce282c19519cdf1a07952355ce6de2","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739678744598074880,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0xcea21ca80969e10f81be5889f10b7b8b7c801bf62016a807389bd50e25481f98","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739678744798077184,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0xd3368c468b8f2b4a7bf2b2e5eb8de0f944f53d57390ca4a7888c3ce02e89b535","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739678746698079232,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0xe3e2f46e1e47d833f7f7ff7ffd53534b821da4439523b592c43888d9e890ba5e","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739678754698080000,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
2025-02-16 04:05:45.947 DEBUG [tests.store.test_time_filter] number of messages stored for start time 1739678741698065920 and end time = 2430878745943385088 is  6
2025-02-16 04:05:45.948 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2597/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739678741698065920&endTime=2430878745943385088&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:45.951 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x1550bee1d2f30f451529bd33baa1d1513687b91cc669a9b35e004c991706384c","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739678741698065920,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x0700fca3f4b5628464bd16aecbe300e13a6fd3b6f7c89d96c094eb961f17bdec","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739678743698072832,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x6c0769dbc2343b0e4e7c2581dbed2cd2ecce282c19519cdf1a07952355ce6de2","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739678744598074880,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0xcea21ca80969e10f81be5889f10b7b8b7c801bf62016a807389bd50e25481f98","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739678744798077184,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0xd3368c468b8f2b4a7bf2b2e5eb8de0f944f53d57390ca4a7888c3ce02e89b535","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739678746698079232,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0xe3e2f46e1e47d833f7f7ff7ffd53534b821da4439523b592c43888d9e890ba5e","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739678754698080000,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
2025-02-16 04:05:45.951 DEBUG [tests.store.test_time_filter] number of messages stored for start time 1739678741698065920 and end time = 2430878745943385088 is  6
2025-02-16 04:05:45.953 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:05:45.954 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:05:45.955 DEBUG [src.node.waku_node] Stopping container with id 34e904f36c26
2025-02-16 04:05:46.567 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:05:46.567 DEBUG [src.node.waku_node] Stopping container with id 52fd8bc21056
2025-02-16 04:05:47.379 ERROR [src.node.docker_mananger] Max retries reached for container 34e904f36c26. Exiting log stream.
2025-02-16 04:05:47.671 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:05:47.672 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:05:47.679 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:05:47.686 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
