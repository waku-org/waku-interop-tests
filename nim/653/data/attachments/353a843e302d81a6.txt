2025-02-16 04:02:21.009 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:02:21.010 DEBUG [tests.conftest] Running test: test_filter with id: 2025-02-16_04-02-21__770632c0-9a79-459c-8c29-7c4d1029f943
2025-02-16 04:02:21.010 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:02:21.010 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-16 04:02:21.011 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-16 04:02:21.011 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-16 04:02:21.011 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-16 04:02:21.020 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:02:21.020 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-16_04-02-21__770632c0-9a79-459c-8c29-7c4d1029f943__wakuorg_nwaku:latest.log
2025-02-16 04:02:21.020 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:02:21.020 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:02:21.088 DEBUG [src.node.docker_mananger] Network waku created
2025-02-16 04:02:21.088 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.100.234
2025-02-16 04:02:21.088 DEBUG [src.node.docker_mananger] Generated ports ['23755', '23756', '23757', '23758', '23759']
2025-02-16 04:02:21.088 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:02:21.089 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:02:21.089 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:02:21.089 DEBUG [src.node.docker_mananger] docker run -i -t -p 23755:23755 -p 23756:23756 -p 23757:23757 -p 23758:23758 -p 23759:23759 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23757 --rest-port=23755 --tcp-port=23756 --discv5-udp-port=23758 --rest-address=0.0.0.0 --nat=extip:172.18.100.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=879cb4ca1d6ee69c0af7d9818dcc72451dbf8cddb68ade6621fdac11f2dd2f09 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23759 --metrics-logging=true --relay=true --filter=true
2025-02-16 04:02:24.062 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.100.234 waku 7034ec3e1ed303d9701d8d05f7babd0240e8c259ba2ab52410776caa3d9f603a
2025-02-16 04:02:24.113 DEBUG [src.node.docker_mananger] Container started with ID 7034ec3e1ed3. Setting up logs at ./log/docker/node1_2025-02-16_04-02-21__770632c0-9a79-459c-8c29-7c4d1029f943__wakuorg_nwaku:latest.log
2025-02-16 04:02:24.114 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23755
2025-02-16 04:02:24.114 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:02:25.116 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23755/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:25.118 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:02:25.119 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:02:25.119 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23755/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:25.121 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.100.234/tcp/23756/p2p/16Uiu2HAmNtJ8o8kDEjCzrYfqdnj4oLTe5dYcRFt66ZPEzVSpsdpr","/ip4/172.18.100.234/tcp/23757/ws/p2p/16Uiu2HAmNtJ8o8kDEjCzrYfqdnj4oLTe5dYcRFt66ZPEzVSpsdpr"],"enrUri":"enr:-L24QODgbtjeaEDQNtcLpInQyAHEmVQ-Xd67RJ3Ke5nfVeOtVH9J2qEwj-VfmsDSFp6IQEwAliNc4bSQRWNfNXgKHtwCgmlkgnY0gmlwhKwSZOqKbXVsdGlhZGRyc5YACASsEmTqBlzMAAoErBJk6gZczd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDl_2HZPDFs810X6YAarYehsz9XyN16tjSibAat3lMiMeDdGNwglzMg3VkcIJczoV3YWt1MgU"}'
2025-02-16 04:02:25.121 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:02:25.127 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:02:25.127 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-16_04-02-21__770632c0-9a79-459c-8c29-7c4d1029f943__wakuorg_nwaku:latest.log
2025-02-16 04:02:25.127 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:02:25.127 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:02:25.129 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:02:25.129 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.121.58
2025-02-16 04:02:25.129 DEBUG [src.node.docker_mananger] Generated ports ['52045', '52046', '52047', '52048', '52049']
2025-02-16 04:02:25.129 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:02:25.129 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:02:25.129 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:02:25.129 DEBUG [src.node.docker_mananger] docker run -i -t -p 52045:52045 -p 52046:52046 -p 52047:52047 -p 52048:52048 -p 52049:52049 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52047 --rest-port=52045 --tcp-port=52046 --discv5-udp-port=52048 --rest-address=0.0.0.0 --nat=extip:172.18.121.58 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7f13ef2bdceda18d4d18b6c6f74dfa41c4b2eeebcaddefb7aef157f9fb4ec11f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52049 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QODgbtjeaEDQNtcLpInQyAHEmVQ-Xd67RJ3Ke5nfVeOtVH9J2qEwj-VfmsDSFp6IQEwAliNc4bSQRWNfNXgKHtwCgmlkgnY0gmlwhKwSZOqKbXVsdGlhZGRyc5YACASsEmTqBlzMAAoErBJk6gZczd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDl_2HZPDFs810X6YAarYehsz9XyN16tjSibAat3lMiMeDdGNwglzMg3VkcIJczoV3YWt1MgU --filternode=/ip4/172.18.100.234/tcp/23756/p2p/16Uiu2HAmNtJ8o8kDEjCzrYfqdnj4oLTe5dYcRFt66ZPEzVSpsdpr
2025-02-16 04:02:25.355 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.121.58 waku 81f2fbb6b13f4d4084f4d2b6eb1ad9404851e30a6238c01cd414e84e8ce5eee2
2025-02-16 04:02:25.402 DEBUG [src.node.docker_mananger] Container started with ID 81f2fbb6b13f. Setting up logs at ./log/docker/node1_2025-02-16_04-02-21__770632c0-9a79-459c-8c29-7c4d1029f943__wakuorg_nwaku:latest.log
2025-02-16 04:02:25.402 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 52045
2025-02-16 04:02:25.402 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:02:26.404 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52045/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:26.407 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:02:26.407 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:02:26.407 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52045/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:26.409 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.121.58/tcp/52046/p2p/16Uiu2HAm9MHSG5NCCNFBVpEG1fJbq9qstime3bffkS4P76PcCzXY","/ip4/172.18.121.58/tcp/52047/ws/p2p/16Uiu2HAm9MHSG5NCCNFBVpEG1fJbq9qstime3bffkS4P76PcCzXY"],"enrUri":"enr:-L24QBrrXr6Srp7OPgKwaBqtgiNuqSsgTE5mzr0eygs2OYm6QbPr4V4YSwIqdOuLi9HAnBjs_Gvh6iBHpbcxUZiR4_oCgmlkgnY0gmlwhKwSeTqKbXVsdGlhZGRyc5YACASsEnk6BstOAAoErBJ5OgbLT90DgnJzhQADAQAAiXNlY3AyNTZrMaECzuPNs9QaW6vXa5BaLG20L5n0pzoZVTDdDV-T5hxPVteDdGNwgstOg3VkcILLUIV3YWt1MgA"}'
2025-02-16 04:02:26.410 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:02:26.410 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23755/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:02:26.425 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:02:26.426 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52045/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "132be1f1-7ef9-4b0a-931d-d94e8603ec51", "contentFilters": ["/test/1/waku-relay/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-16 04:02:26.468 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"132be1f1-7ef9-4b0a-931d-d94e8603ec51","statusDesc":"OK"}'
2025-02-16 04:02:26.469 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23755/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:02:26.480 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:02:26.480 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-16 04:02:26.580 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-16 04:02:26.581 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52045/filter/v2/messages/%2Ftest%2F1%2Fwaku-relay%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:26.583 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739678546469756416,"ephemeral":false}]'
2025-02-16 04:02:26.587 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:02:26.587 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:02:26.588 DEBUG [src.node.waku_node] Stopping container with id 7034ec3e1ed3
2025-02-16 04:02:27.695 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:02:27.695 DEBUG [src.node.waku_node] Stopping container with id 81f2fbb6b13f
2025-02-16 04:02:28.521 ERROR [src.node.docker_mananger] Max retries reached for container 7034ec3e1ed3. Exiting log stream.
2025-02-16 04:02:29.198 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:02:29.198 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:02:29.208 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:02:29.217 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
