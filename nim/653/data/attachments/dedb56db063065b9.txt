2025-02-16 04:05:34.977 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:05:34.978 DEBUG [tests.conftest] Running test: test_store_without_pubsub_topic_and_content_topic with id: 2025-02-16_04-05-34__9a1d13fd-a69e-4ab3-9cf4-d7193721eca4
2025-02-16 04:05:34.978 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:05:34.979 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-16 04:05:34.979 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-16 04:05:34.987 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:05:34.988 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-16_04-05-34__9a1d13fd-a69e-4ab3-9cf4-d7193721eca4__wakuorg_nwaku:latest.log
2025-02-16 04:05:34.988 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:05:34.988 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:05:34.990 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:05:34.991 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.132.151
2025-02-16 04:05:34.991 DEBUG [src.node.docker_mananger] Generated ports ['13269', '13270', '13271', '13272', '13273']
2025-02-16 04:05:34.991 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:05:34.991 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:05:34.991 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:05:34.992 DEBUG [src.node.docker_mananger] docker run -i -t -p 13269:13269 -p 13270:13270 -p 13271:13271 -p 13272:13272 -p 13273:13273 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13271 --rest-port=13269 --tcp-port=13270 --discv5-udp-port=13272 --rest-address=0.0.0.0 --nat=extip:172.18.132.151 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=de59aebc50fc703ecb0db2d0af3b043ae8ff816ab7fce5c2d2d79cea42cc5cfc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13273 --metrics-logging=true --store=true --relay=true
2025-02-16 04:05:35.219 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.132.151 waku e5d82300531acb36f6b7b57410fcd91c37e1ed947516ff80f13d9e4dcc8de2de
2025-02-16 04:05:35.263 DEBUG [src.node.docker_mananger] Container started with ID e5d82300531a. Setting up logs at ./log/docker/publishing_node1_2025-02-16_04-05-34__9a1d13fd-a69e-4ab3-9cf4-d7193721eca4__wakuorg_nwaku:latest.log
2025-02-16 04:05:35.265 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 13269
2025-02-16 04:05:35.265 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:05:35.815 ERROR [src.node.docker_mananger] Max retries reached for container a92803f7859d. Exiting log stream.
2025-02-16 04:05:36.265 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13269/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:36.268 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:05:36.269 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:05:36.269 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13269/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:36.271 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.132.151/tcp/13270/p2p/16Uiu2HAm6e4cNsN4dgPjgJPW47qb8yDMSgz23gxschJ6PkohosZ1","/ip4/172.18.132.151/tcp/13271/ws/p2p/16Uiu2HAm6e4cNsN4dgPjgJPW47qb8yDMSgz23gxschJ6PkohosZ1"],"enrUri":"enr:-L24QDcOrkVByYoFF8E34LFiLXfnF087PXUeY4IK0bk-TCUuHIEjSRhTFqq5Gft1KdsJ13X7zHe79ITJnYoFjqbwOgUCgmlkgnY0gmlwhKwShJeKbXVsdGlhZGRyc5YACASsEoSXBjPWAAoErBKElwYz190DgnJzhQADAQAAiXNlY3AyNTZrMaECpp0dVX3R61kXBxDqTbhTvhDTFxEh2_4Ia2wjByLo43iDdGNwgjPWg3VkcIIz2IV3YWt1MgM"}'
2025-02-16 04:05:36.271 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:05:36.277 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:05:36.277 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-16_04-05-34__9a1d13fd-a69e-4ab3-9cf4-d7193721eca4__wakuorg_nwaku:latest.log
2025-02-16 04:05:36.278 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:05:36.278 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:05:36.279 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:05:36.279 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.71.123
2025-02-16 04:05:36.279 DEBUG [src.node.docker_mananger] Generated ports ['16578', '16579', '16580', '16581', '16582']
2025-02-16 04:05:36.279 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:05:36.279 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:05:36.280 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:05:36.280 DEBUG [src.node.docker_mananger] docker run -i -t -p 16578:16578 -p 16579:16579 -p 16580:16580 -p 16581:16581 -p 16582:16582 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16580 --rest-port=16578 --tcp-port=16579 --discv5-udp-port=16581 --rest-address=0.0.0.0 --nat=extip:172.18.71.123 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e1d0c4d2ccc3553bfaa2cd0e8e4465baf82fa0a511fcdbd8ccbfbe7d71aeb2ad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16582 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QDcOrkVByYoFF8E34LFiLXfnF087PXUeY4IK0bk-TCUuHIEjSRhTFqq5Gft1KdsJ13X7zHe79ITJnYoFjqbwOgUCgmlkgnY0gmlwhKwShJeKbXVsdGlhZGRyc5YACASsEoSXBjPWAAoErBKElwYz190DgnJzhQADAQAAiXNlY3AyNTZrMaECpp0dVX3R61kXBxDqTbhTvhDTFxEh2_4Ia2wjByLo43iDdGNwgjPWg3VkcIIz2IV3YWt1MgM --storenode=/ip4/172.18.132.151/tcp/13270/p2p/16Uiu2HAm6e4cNsN4dgPjgJPW47qb8yDMSgz23gxschJ6PkohosZ1 --store=true --relay=true
2025-02-16 04:05:36.490 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.71.123 waku 2157f0309c48dec61e7d185d5ca7dea4897dff14b8348c416bcef2e6ecff2075
2025-02-16 04:05:36.539 DEBUG [src.node.docker_mananger] Container started with ID 2157f0309c48. Setting up logs at ./log/docker/store_node1_2025-02-16_04-05-34__9a1d13fd-a69e-4ab3-9cf4-d7193721eca4__wakuorg_nwaku:latest.log
2025-02-16 04:05:36.540 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 16578
2025-02-16 04:05:36.541 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:05:37.541 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16578/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:37.544 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:05:37.544 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:05:37.544 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16578/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:37.546 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.71.123/tcp/16579/p2p/16Uiu2HAm12XeP9abFwmHJCJbS1YnYBPcSkYhDNSv3Yz3Fgi6ArA9","/ip4/172.18.71.123/tcp/16580/ws/p2p/16Uiu2HAm12XeP9abFwmHJCJbS1YnYBPcSkYhDNSv3Yz3Fgi6ArA9"],"enrUri":"enr:-L24QGVOatWx224ROnFJRwDDsKfbxdJZZaGoLNKNzbilP9B7TyNO5n4w4sVX0Zh36AxEQ-mfdZOyUvmna15MAi3PcLUCgmlkgnY0gmlwhKwSR3uKbXVsdGlhZGRyc5YACASsEkd7BkDDAAoErBJHewZAxN0DgnJzhQADAQAAiXNlY3AyNTZrMaECUzhWwrLXa_SfMzTCLg-Ciz-xG-NjLAS-KAgzjxVbOA6DdGNwgkDDg3VkcIJAxYV3YWt1MgM"}'
2025-02-16 04:05:37.546 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:05:37.547 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16578/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.132.151/tcp/13270/p2p/16Uiu2HAm6e4cNsN4dgPjgJPW47qb8yDMSgz23gxschJ6PkohosZ1"]'
2025-02-16 04:05:37.549 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:37.549 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13269/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:05:37.552 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:37.552 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16578/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:05:37.554 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:37.554 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:37.554 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13269/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:37.560 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:37.561 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:37.762 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:37.762 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13269/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:37.767 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:37.767 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:37.968 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:37.969 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13269/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:37.974 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:37.974 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:38.175 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:38.175 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13269/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:38.180 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:38.181 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:38.382 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:38.382 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13269/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:38.387 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:38.388 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:38.589 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:38.589 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13269/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:38.594 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:38.594 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:38.795 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:38.795 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13269/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:38.799 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:38.801 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:39.001 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:39.002 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13269/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:39.007 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:39.007 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:39.208 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13269/store/v3/messages?pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:39.211 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x01ae0cf5c7711ad7bf213d085a7ce0485008089111d5f22e91b651fc3f329191"},{"messageHash":"0x7144c38911762e68c7282f75078a2ab568d5ef2c98ed08f5a74bca7ea9d533e8"},{"messageHash":"0xa454a7dc503b3b6825baa288e750d19f0d7b61378eda8be071706d59d698aa8b"},{"messageHash":"0x44248d4b5f0e7a5b81a8d5852b5675fa194df94d6374ae82771a3bbc22185ad4"},{"messageHash":"0x3e9f8f60758e8b0052fbbd88695cbde887dd86cae56158f4c350d0f0acf4dbf3"},{"messageHash":"0xea98c4670c876ccb01564849bf0116381afe04972f2e8306e711ba8e7700cc4c"},{"messageHash":"0xd203fbca35660aedec4464da4b64e6a591f5119b46626c0080559985fdf78eed"},{"messageHash":"0x757d8420782ba2f30274a8bc477dab8952cf711e8d40957b6a7dee7fe0c8e71d"}]}'
2025-02-16 04:05:39.211 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16578/store/v3/messages?pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:39.214 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x01ae0cf5c7711ad7bf213d085a7ce0485008089111d5f22e91b651fc3f329191"},{"messageHash":"0x7144c38911762e68c7282f75078a2ab568d5ef2c98ed08f5a74bca7ea9d533e8"},{"messageHash":"0xa454a7dc503b3b6825baa288e750d19f0d7b61378eda8be071706d59d698aa8b"},{"messageHash":"0x44248d4b5f0e7a5b81a8d5852b5675fa194df94d6374ae82771a3bbc22185ad4"},{"messageHash":"0x3e9f8f60758e8b0052fbbd88695cbde887dd86cae56158f4c350d0f0acf4dbf3"},{"messageHash":"0xea98c4670c876ccb01564849bf0116381afe04972f2e8306e711ba8e7700cc4c"},{"messageHash":"0xd203fbca35660aedec4464da4b64e6a591f5119b46626c0080559985fdf78eed"},{"messageHash":"0x757d8420782ba2f30274a8bc477dab8952cf711e8d40957b6a7dee7fe0c8e71d"}]}'
2025-02-16 04:05:39.217 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:05:39.218 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:05:39.218 DEBUG [src.node.waku_node] Stopping container with id e5d82300531a
2025-02-16 04:05:39.758 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:05:39.758 DEBUG [src.node.waku_node] Stopping container with id 2157f0309c48
2025-02-16 04:05:40.569 ERROR [src.node.docker_mananger] Max retries reached for container e5d82300531a. Exiting log stream.
2025-02-16 04:05:41.230 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:05:41.232 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:05:41.239 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:05:41.246 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
