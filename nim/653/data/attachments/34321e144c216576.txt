2025-02-16 04:02:26.164 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:02:26.164 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2025-02-16_04-02-26__46051e45-ada4-4fa1-8bce-8ad39727d02a
2025-02-16 04:02:26.165 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:02:26.165 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-16 04:02:26.165 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-16 04:02:26.174 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:02:26.174 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-16_04-02-26__46051e45-ada4-4fa1-8bce-8ad39727d02a__wakuorg_nwaku:latest.log
2025-02-16 04:02:26.180 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:02:26.180 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-16_04-02-26__46051e45-ada4-4fa1-8bce-8ad39727d02a__wakuorg_nwaku:latest.log
2025-02-16 04:02:26.186 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:02:26.186 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-16_04-02-26__46051e45-ada4-4fa1-8bce-8ad39727d02a__wakuorg_nwaku:latest.log
2025-02-16 04:02:26.186 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-16 04:02:26.187 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-16 04:02:26.188 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:02:26.188 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:02:26.250 DEBUG [src.node.docker_mananger] Network waku created
2025-02-16 04:02:26.250 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.24.159
2025-02-16 04:02:26.250 DEBUG [src.node.docker_mananger] Generated ports ['38542', '38543', '38544', '38545', '38546']
2025-02-16 04:02:26.250 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:02:26.250 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:02:26.250 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:02:26.250 DEBUG [src.node.docker_mananger] docker run -i -t -p 38542:38542 -p 38543:38543 -p 38544:38544 -p 38545:38545 -p 38546:38546 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38544 --rest-port=38542 --tcp-port=38543 --discv5-udp-port=38545 --rest-address=0.0.0.0 --nat=extip:172.18.24.159 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ad825153a1bdce72acde9bc54bbac3fe4fc38d5d3badb421abe10bf3bd7ff243 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38546 --metrics-logging=true --lightpush=true
2025-02-16 04:02:29.348 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.24.159 waku 44d6077a26e4aa0cb173856c9897bdcdfac776db62c280f944fd9f11889358c9
2025-02-16 04:02:29.399 DEBUG [src.node.docker_mananger] Container started with ID 44d6077a26e4. Setting up logs at ./log/docker/node1_2025-02-16_04-02-26__46051e45-ada4-4fa1-8bce-8ad39727d02a__wakuorg_nwaku:latest.log
2025-02-16 04:02:29.400 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38542
2025-02-16 04:02:29.400 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:02:30.400 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38542/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:30.403 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:02:30.404 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:02:30.404 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38542/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:30.406 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.24.159/tcp/38543/p2p/16Uiu2HAm4hq5ByaWeBNoXC6DLjZLhSNif4RRVgrKhGiAzXhmP6nH","/ip4/172.18.24.159/tcp/38544/ws/p2p/16Uiu2HAm4hq5ByaWeBNoXC6DLjZLhSNif4RRVgrKhGiAzXhmP6nH"],"enrUri":"enr:-L24QPdlpZPchGTri3K5KTg3QzHN3C1XZVFR1L4T7_IWEVIHILtwsyiOB8FB4JbVvuVLAF1sLowX8FnTa6YtX7yj334CgmlkgnY0gmlwhKwSGJ-KbXVsdGlhZGRyc5YACASsEhifBpaPAAoErBIYnwaWkN0DgnJzhQADAQAAiXNlY3AyNTZrMaECidzBvu4C0TUOsegypbQqQnYkCccNTH63ZN-3iA9S7CaDdGNwgpaPg3VkcIKWkYV3YWt1Mgk"}'
2025-02-16 04:02:30.406 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:02:30.407 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:02:30.407 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:02:30.408 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:02:30.408 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.96.148
2025-02-16 04:02:30.408 DEBUG [src.node.docker_mananger] Generated ports ['23616', '23617', '23618', '23619', '23620']
2025-02-16 04:02:30.409 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:02:30.409 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:02:30.409 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:02:30.409 DEBUG [src.node.docker_mananger] docker run -i -t -p 23616:23616 -p 23617:23617 -p 23618:23618 -p 23619:23619 -p 23620:23620 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23618 --rest-port=23616 --tcp-port=23617 --discv5-udp-port=23619 --rest-address=0.0.0.0 --nat=extip:172.18.96.148 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=50b1becffb09c4cf3ccaaadb199229bf519636bf52e5578dd069f5d2dff9efab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23620 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QPdlpZPchGTri3K5KTg3QzHN3C1XZVFR1L4T7_IWEVIHILtwsyiOB8FB4JbVvuVLAF1sLowX8FnTa6YtX7yj334CgmlkgnY0gmlwhKwSGJ-KbXVsdGlhZGRyc5YACASsEhifBpaPAAoErBIYnwaWkN0DgnJzhQADAQAAiXNlY3AyNTZrMaECidzBvu4C0TUOsegypbQqQnYkCccNTH63ZN-3iA9S7CaDdGNwgpaPg3VkcIKWkYV3YWt1Mgk --lightpushnode=/ip4/172.18.24.159/tcp/38543/p2p/16Uiu2HAm4hq5ByaWeBNoXC6DLjZLhSNif4RRVgrKhGiAzXhmP6nH
2025-02-16 04:02:30.641 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.96.148 waku af0c900daa5722fe50f000157a29177348a82f047923eb19e60a54a127c1ae54
2025-02-16 04:02:30.695 DEBUG [src.node.docker_mananger] Container started with ID af0c900daa57. Setting up logs at ./log/docker/node2_2025-02-16_04-02-26__46051e45-ada4-4fa1-8bce-8ad39727d02a__wakuorg_nwaku:latest.log
2025-02-16 04:02:30.696 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23616
2025-02-16 04:02:30.697 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:02:31.698 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23616/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:31.701 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:02:31.701 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:02:31.701 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23616/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:31.704 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.96.148/tcp/23617/p2p/16Uiu2HAkzWULW6hBdn9VHfWathQWx5FiFYYWRX1HPxB6HvGKuNYs","/ip4/172.18.96.148/tcp/23618/ws/p2p/16Uiu2HAkzWULW6hBdn9VHfWathQWx5FiFYYWRX1HPxB6HvGKuNYs"],"enrUri":"enr:-L24QEXwmHIDfZGD0GbDE11AnSDMscHIWm5-XHbetSvkZEx5KpadooGNQulJ-Uwdqquo_gOARUQ1eeBfxLWlqb_HGSICgmlkgnY0gmlwhKwSYJSKbXVsdGlhZGRyc5YACASsEmCUBlxBAAoErBJglAZcQt0DgnJzhQADAQAAiXNlY3AyNTZrMaECS4UsiDWUdt5zf-35yEiRXI9zr4ttotmtw8fFYbGr4wyDdGNwglxBg3VkcIJcQ4V3YWt1Mgs"}'
2025-02-16 04:02:31.704 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:02:31.704 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:02:31.704 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:02:31.706 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:02:31.706 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.19.163
2025-02-16 04:02:31.706 DEBUG [src.node.docker_mananger] Generated ports ['14539', '14540', '14541', '14542', '14543']
2025-02-16 04:02:31.706 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:02:31.706 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:02:31.707 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:02:31.707 DEBUG [src.node.docker_mananger] docker run -i -t -p 14539:14539 -p 14540:14540 -p 14541:14541 -p 14542:14542 -p 14543:14543 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14541 --rest-port=14539 --tcp-port=14540 --discv5-udp-port=14542 --rest-address=0.0.0.0 --nat=extip:172.18.19.163 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c0dbd0f24b0e6d36fed8bb8bb1d16e1c1a4ca2a45f168afeb1da09bd66b30592 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14543 --metrics-logging=true --relay=false --storenode=/ip4/172.18.96.148/tcp/23617/p2p/16Uiu2HAkzWULW6hBdn9VHfWathQWx5FiFYYWRX1HPxB6HvGKuNYs --discv5-bootstrap-node=enr:-L24QEXwmHIDfZGD0GbDE11AnSDMscHIWm5-XHbetSvkZEx5KpadooGNQulJ-Uwdqquo_gOARUQ1eeBfxLWlqb_HGSICgmlkgnY0gmlwhKwSYJSKbXVsdGlhZGRyc5YACASsEmCUBlxBAAoErBJglAZcQt0DgnJzhQADAQAAiXNlY3AyNTZrMaECS4UsiDWUdt5zf-35yEiRXI9zr4ttotmtw8fFYbGr4wyDdGNwglxBg3VkcIJcQ4V3YWt1Mgs
2025-02-16 04:02:31.928 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.19.163 waku 9569f6c13833e3a56ea9c48ce05c66ff88f250b9cc2c2d83e8fe72e1c9ca7b49
2025-02-16 04:02:31.987 DEBUG [src.node.docker_mananger] Container started with ID 9569f6c13833. Setting up logs at ./log/docker/node3_2025-02-16_04-02-26__46051e45-ada4-4fa1-8bce-8ad39727d02a__wakuorg_nwaku:latest.log
2025-02-16 04:02:31.987 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14539
2025-02-16 04:02:31.987 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:02:32.988 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14539/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:32.992 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:02:32.992 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:02:32.992 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14539/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:32.994 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.19.163/tcp/14540/p2p/16Uiu2HAmHeQvbvEtsGBdvtKsVnarGo3SzHYBuQPm2nm2RaTWQdB6","/ip4/172.18.19.163/tcp/14541/ws/p2p/16Uiu2HAmHeQvbvEtsGBdvtKsVnarGo3SzHYBuQPm2nm2RaTWQdB6"],"enrUri":"enr:-L24QLyfofhLYCCwxFBuCFbia-i64FS60GjugFcX3phx0CLXL4nzcJ-Et8uMWJ4zPpn9PHAHO9juCmOTiVaM--teGg8CgmlkgnY0gmlwhKwSE6OKbXVsdGlhZGRyc5YACASsEhOjBjjMAAoErBITowY4zd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDSiSj4Fez4ZN6U_WLJXVhtPRQwjH1Ess-wVBDunW3IUGDdGNwgjjMg3VkcII4zoV3YWt1MgA"}'
2025-02-16 04:02:32.994 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:02:32.995 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38542/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:02:32.999 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:02:32.999 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23616/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:02:33.005 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:02:33.006 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38542/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:33.010 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.96.148/tcp/23617/p2p/16Uiu2HAkzWULW6hBdn9VHfWathQWx5FiFYYWRX1HPxB6HvGKuNYs","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-16 04:02:33.010 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23616/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:33.012 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.24.159/tcp/38543/p2p/16Uiu2HAm4hq5ByaWeBNoXC6DLjZLhSNif4RRVgrKhGiAzXhmP6nH","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
2025-02-16 04:02:33.012 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-16 04:03:03.013 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38542/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1739678583013315328}}'
2025-02-16 04:03:03.025 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:03:03.026 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:03:04.026 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-16 04:03:04.027 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14539/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:03:04.071 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"98cccb14a0477126c840","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x6c7b05d3c2bd1451873c5ce2674fae8fb0511a5206bb766a7f1937171dc8b1ef"}]}'
2025-02-16 04:03:04.079 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:03:04.080 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:03:04.080 DEBUG [src.node.waku_node] Stopping container with id 44d6077a26e4
2025-02-16 04:03:05.253 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:03:05.253 DEBUG [src.node.waku_node] Stopping container with id af0c900daa57
2025-02-16 04:03:06.096 ERROR [src.node.docker_mananger] Max retries reached for container 44d6077a26e4. Exiting log stream.
2025-02-16 04:03:06.458 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:03:06.458 DEBUG [src.node.waku_node] Stopping container with id 9569f6c13833
2025-02-16 04:03:07.314 ERROR [src.node.docker_mananger] Max retries reached for container af0c900daa57. Exiting log stream.
2025-02-16 04:03:07.539 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:03:07.540 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:03:07.559 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:03:07.587 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:03:07.591 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
