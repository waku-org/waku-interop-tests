2025-02-16 04:04:16.556 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:04:16.556 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_no_request_id with id: 2025-02-16_04-04-16__cc21bf2b-8194-4051-b487-b6b88c494fc4
2025-02-16 04:04:16.557 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:04:16.557 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-16 04:04:16.557 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-16 04:04:16.563 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:04:16.563 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-16_04-04-16__cc21bf2b-8194-4051-b487-b6b88c494fc4__wakuorg_nwaku:latest.log
2025-02-16 04:04:16.564 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:04:16.564 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:04:16.565 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:04:16.565 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.118.34
2025-02-16 04:04:16.565 DEBUG [src.node.docker_mananger] Generated ports ['27364', '27365', '27366', '27367', '27368']
2025-02-16 04:04:16.566 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:04:16.566 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:04:16.566 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:04:16.566 DEBUG [src.node.docker_mananger] docker run -i -t -p 27364:27364 -p 27365:27365 -p 27366:27366 -p 27367:27367 -p 27368:27368 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27366 --rest-port=27364 --tcp-port=27365 --discv5-udp-port=27367 --rest-address=0.0.0.0 --nat=extip:172.18.118.34 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=41aac10d83c66f5b60c859efc92be5c9ed7e688390b7977d06bb9f5ce6ba4a12 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27368 --metrics-logging=true --relay=true --filter=true
2025-02-16 04:04:16.800 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.118.34 waku cdda5fcc048e76c4fc078d06e8bb2a18ad8aab46f86592ee10d63906c6e6d38d
2025-02-16 04:04:16.850 DEBUG [src.node.docker_mananger] Container started with ID cdda5fcc048e. Setting up logs at ./log/docker/node1_2025-02-16_04-04-16__cc21bf2b-8194-4051-b487-b6b88c494fc4__wakuorg_nwaku:latest.log
2025-02-16 04:04:16.851 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27364
2025-02-16 04:04:16.851 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:04:17.311 ERROR [src.node.docker_mananger] Max retries reached for container 2cab3f62bec5. Exiting log stream.
2025-02-16 04:04:17.851 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27364/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:17.854 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:04:17.854 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:04:17.855 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27364/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:17.857 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.118.34/tcp/27365/p2p/16Uiu2HAmRxciHzjmAczbub6XdBfLuFZaAVUhTsg7WUa73qVCCmQs","/ip4/172.18.118.34/tcp/27366/ws/p2p/16Uiu2HAmRxciHzjmAczbub6XdBfLuFZaAVUhTsg7WUa73qVCCmQs"],"enrUri":"enr:-L24QL2NfY3Yr4pbiy0fpKWdJ0LsBIg0kOyA9mWshOiJcAqyaw0pwQogEePf1OY57VT2IeKs1N9sfZG-uuWEueK5UicCgmlkgnY0gmlwhKwSdiKKbXVsdGlhZGRyc5YACASsEnYiBmrlAAoErBJ2IgZq5t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDxavrKSX0_RoMKxITEDZq-sjfjCXWfG_RxHyKqJtvaYCDdGNwgmrlg3VkcIJq54V3YWt1MgU"}'
2025-02-16 04:04:17.857 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:04:17.857 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-16 04:04:17.864 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:04:17.864 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-16_04-04-16__cc21bf2b-8194-4051-b487-b6b88c494fc4__wakuorg_nwaku:latest.log
2025-02-16 04:04:17.864 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:04:17.864 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:04:17.865 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:04:17.866 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.149.201
2025-02-16 04:04:17.866 DEBUG [src.node.docker_mananger] Generated ports ['4113', '4114', '4115', '4116', '4117']
2025-02-16 04:04:17.866 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:04:17.866 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:04:17.866 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:04:17.866 DEBUG [src.node.docker_mananger] docker run -i -t -p 4113:4113 -p 4114:4114 -p 4115:4115 -p 4116:4116 -p 4117:4117 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4115 --rest-port=4113 --tcp-port=4114 --discv5-udp-port=4116 --rest-address=0.0.0.0 --nat=extip:172.18.149.201 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5be55f56ff56d1fca0d1d82f67b3cf13abbae4691ae6d0b7f0fa5f7cbf8d2e19 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4117 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QL2NfY3Yr4pbiy0fpKWdJ0LsBIg0kOyA9mWshOiJcAqyaw0pwQogEePf1OY57VT2IeKs1N9sfZG-uuWEueK5UicCgmlkgnY0gmlwhKwSdiKKbXVsdGlhZGRyc5YACASsEnYiBmrlAAoErBJ2IgZq5t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDxavrKSX0_RoMKxITEDZq-sjfjCXWfG_RxHyKqJtvaYCDdGNwgmrlg3VkcIJq54V3YWt1MgU --filternode=/ip4/172.18.118.34/tcp/27365/p2p/16Uiu2HAmRxciHzjmAczbub6XdBfLuFZaAVUhTsg7WUa73qVCCmQs
2025-02-16 04:04:18.091 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.149.201 waku 8f0a85913f917d2aa09ffb50530009ceed81ebff68eaabd6767d5686fa16c3a7
2025-02-16 04:04:18.135 DEBUG [src.node.docker_mananger] Container started with ID 8f0a85913f91. Setting up logs at ./log/docker/node2_2025-02-16_04-04-16__cc21bf2b-8194-4051-b487-b6b88c494fc4__wakuorg_nwaku:latest.log
2025-02-16 04:04:18.136 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 4113
2025-02-16 04:04:18.136 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:04:19.136 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4113/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:19.139 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:04:19.140 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:04:19.140 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4113/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:19.142 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.149.201/tcp/4114/p2p/16Uiu2HAmUFYJehzAgvcW5x4xXZyhciNc2wGuNAXBq5FF7wRrn27f","/ip4/172.18.149.201/tcp/4115/ws/p2p/16Uiu2HAmUFYJehzAgvcW5x4xXZyhciNc2wGuNAXBq5FF7wRrn27f"],"enrUri":"enr:-L24QOHnfbj4vYTOF7r7PRCSVbzkbiYcM4_cTPyO5FgWKNkXeGQrDCJmf16C7-xluFKkCptyC2aL3u9ye7gPxaU3nxQCgmlkgnY0gmlwhKwSlcmKbXVsdGlhZGRyc5YACASsEpXJBhASAAoErBKVyQYQE90DgnJzhQADAQAAiXNlY3AyNTZrMaED57kutpETzYbEsQd6cbBaFdcW6T-gHr0vpRlb8r836T6DdGNwghASg3VkcIIQFIV3YWt1MgA"}'
2025-02-16 04:04:19.142 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:04:19.143 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4113/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.118.34/tcp/27365/p2p/16Uiu2HAmRxciHzjmAczbub6XdBfLuFZaAVUhTsg7WUa73qVCCmQs"]'
2025-02-16 04:04:19.179 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:19.180 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-16 04:04:19.182 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27364/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:04:19.198 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:19.199 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4113/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "bc600d72-76cb-4456-a0aa-0cab3da53342", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-16 04:04:19.211 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"bc600d72-76cb-4456-a0aa-0cab3da53342","statusDesc":"OK"}'
2025-02-16 04:04:19.213 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:4113/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-16 04:04:19.215 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:4113/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2025-02-16 04:04:19.218 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:04:19.218 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:04:19.219 DEBUG [src.node.waku_node] Stopping container with id cdda5fcc048e
2025-02-16 04:04:20.323 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:04:20.325 DEBUG [src.node.waku_node] Stopping container with id 8f0a85913f91
2025-02-16 04:04:21.151 ERROR [src.node.docker_mananger] Max retries reached for container cdda5fcc048e. Exiting log stream.
2025-02-16 04:04:21.827 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:04:21.828 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:04:21.837 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:04:21.842 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
