2025-02-16 04:04:48.000 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:04:48.000 DEBUG [tests.conftest] Running test: test_get_store_messages_with_wrong_typo_content_topic with id: 2025-02-16_04-04-48__10c309a3-762a-4bb7-9dcb-01e102622f92
2025-02-16 04:04:48.001 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:04:48.001 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-16 04:04:48.001 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-16 04:04:48.007 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:04:48.008 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-16_04-04-48__10c309a3-762a-4bb7-9dcb-01e102622f92__wakuorg_nwaku:latest.log
2025-02-16 04:04:48.008 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:04:48.008 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:04:48.009 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:04:48.009 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.186.59
2025-02-16 04:04:48.010 DEBUG [src.node.docker_mananger] Generated ports ['11813', '11814', '11815', '11816', '11817']
2025-02-16 04:04:48.010 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:04:48.010 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:04:48.010 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:04:48.010 DEBUG [src.node.docker_mananger] docker run -i -t -p 11813:11813 -p 11814:11814 -p 11815:11815 -p 11816:11816 -p 11817:11817 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11815 --rest-port=11813 --tcp-port=11814 --discv5-udp-port=11816 --rest-address=0.0.0.0 --nat=extip:172.18.186.59 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d09037dd3117d8e96ffec31efc3ebd3a890174c8ebd4f6eb4daf69ee8bc9ec0e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11817 --metrics-logging=true --store=true --relay=true
2025-02-16 04:04:48.243 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.186.59 waku 494398319c2ff91f40cc270289097e5262a783f65e6603ded8ad53168b3dd9af
2025-02-16 04:04:48.293 DEBUG [src.node.docker_mananger] Container started with ID 494398319c2f. Setting up logs at ./log/docker/publishing_node1_2025-02-16_04-04-48__10c309a3-762a-4bb7-9dcb-01e102622f92__wakuorg_nwaku:latest.log
2025-02-16 04:04:48.294 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11813
2025-02-16 04:04:48.294 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:04:48.789 ERROR [src.node.docker_mananger] Max retries reached for container 08393fe11a34. Exiting log stream.
2025-02-16 04:04:49.295 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11813/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:49.298 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:04:49.298 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:04:49.298 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11813/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:49.300 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.186.59/tcp/11814/p2p/16Uiu2HAmHAb2zuYfh358K4BiPCwPDWD6j2ZYZ1rkwopCL6g74nrw","/ip4/172.18.186.59/tcp/11815/ws/p2p/16Uiu2HAmHAb2zuYfh358K4BiPCwPDWD6j2ZYZ1rkwopCL6g74nrw"],"enrUri":"enr:-L24QJDpBLMxnD-U4hIre3nrPksEgPRn0CHYeWjSd3L7J2aVd2kmPF5jVir0efPV_6yMD505K8AzCuIDww76GQ2vnZACgmlkgnY0gmlwhKwSujuKbXVsdGlhZGRyc5YACASsEro7Bi4mAAoErBK6OwYuJ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDQwPPKQnJhSlCz-VxBbZ3ORXsUH-_T3-PYU70-4pHcpyDdGNwgi4mg3VkcIIuKIV3YWt1MgM"}'
2025-02-16 04:04:49.301 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:04:49.307 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:04:49.308 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-16_04-04-48__10c309a3-762a-4bb7-9dcb-01e102622f92__wakuorg_nwaku:latest.log
2025-02-16 04:04:49.308 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:04:49.308 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:04:49.309 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:04:49.309 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.213.151
2025-02-16 04:04:49.310 DEBUG [src.node.docker_mananger] Generated ports ['57044', '57045', '57046', '57047', '57048']
2025-02-16 04:04:49.310 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:04:49.310 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:04:49.310 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:04:49.310 DEBUG [src.node.docker_mananger] docker run -i -t -p 57044:57044 -p 57045:57045 -p 57046:57046 -p 57047:57047 -p 57048:57048 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57046 --rest-port=57044 --tcp-port=57045 --discv5-udp-port=57047 --rest-address=0.0.0.0 --nat=extip:172.18.213.151 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=06fe6fe41faf6f52bb7baa7ec46a6d92bdb30defff39cf6a88dcfdd0dac44650 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57048 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJDpBLMxnD-U4hIre3nrPksEgPRn0CHYeWjSd3L7J2aVd2kmPF5jVir0efPV_6yMD505K8AzCuIDww76GQ2vnZACgmlkgnY0gmlwhKwSujuKbXVsdGlhZGRyc5YACASsEro7Bi4mAAoErBK6OwYuJ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDQwPPKQnJhSlCz-VxBbZ3ORXsUH-_T3-PYU70-4pHcpyDdGNwgi4mg3VkcIIuKIV3YWt1MgM --storenode=/ip4/172.18.186.59/tcp/11814/p2p/16Uiu2HAmHAb2zuYfh358K4BiPCwPDWD6j2ZYZ1rkwopCL6g74nrw --store=true --relay=true
2025-02-16 04:04:49.539 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.213.151 waku 40ef4cf5fe6f58c96a379e3eda86611254689acefbfb830eef5af9253e5aa081
2025-02-16 04:04:49.592 DEBUG [src.node.docker_mananger] Container started with ID 40ef4cf5fe6f. Setting up logs at ./log/docker/store_node1_2025-02-16_04-04-48__10c309a3-762a-4bb7-9dcb-01e102622f92__wakuorg_nwaku:latest.log
2025-02-16 04:04:49.593 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57044
2025-02-16 04:04:49.593 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:04:50.594 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57044/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:50.597 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:04:50.597 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:04:50.597 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57044/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:50.600 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.213.151/tcp/57045/p2p/16Uiu2HAm1HG7faTbbiCnvUMMXmgqDG2RPxscCoVLgCGacBMfzN55","/ip4/172.18.213.151/tcp/57046/ws/p2p/16Uiu2HAm1HG7faTbbiCnvUMMXmgqDG2RPxscCoVLgCGacBMfzN55"],"enrUri":"enr:-L24QDd5Qut3Dt9xNYGD3l8Dm1KNVd46RcvWYCnkas85XBalBAYZEzvqUqqV59z7KhE_HbJ_bovoqaO4O8rWTE-uurQCgmlkgnY0gmlwhKwS1ZeKbXVsdGlhZGRyc5YACASsEtWXBt7VAAoErBLVlwbe1t0DgnJzhQADAQAAiXNlY3AyNTZrMaECVv593iUxiXYG1vajBIhpC54hc5yGEP8OIFPUDOKMMaiDdGNwgt7Vg3VkcILe14V3YWt1MgM"}'
2025-02-16 04:04:50.600 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:04:50.600 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57044/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.186.59/tcp/11814/p2p/16Uiu2HAmHAb2zuYfh358K4BiPCwPDWD6j2ZYZ1rkwopCL6g74nrw"]'
2025-02-16 04:04:50.603 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:50.603 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11813/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:04:50.605 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:50.606 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57044/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:04:50.608 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:50.609 DEBUG [tests.store.test_api_flags] Trying to publish msg with content topic /myapp/1/latest/protoo
2025-02-16 04:04:50.609 DEBUG [src.steps.store] Relaying message
2025-02-16 04:04:50.609 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11813/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/protoo", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:04:50.614 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:50.615 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:04:50.816 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57044/store/v3/messages?includeData=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fprotoo&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:50.819 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xe360c087c12271bbdf1153cd32def3fe00c3ea0e7b4a8249f06ad143080b4512","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/protoo","version":0,"timestamp":1739678690609362688,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
2025-02-16 04:04:50.819 DEBUG [tests.store.test_api_flags] stored content topic is /myapp/1/latest/protoo
2025-02-16 04:04:50.821 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:04:50.822 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:04:50.822 DEBUG [src.node.waku_node] Stopping container with id 494398319c2f
2025-02-16 04:04:52.037 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:04:52.037 DEBUG [src.node.waku_node] Stopping container with id 40ef4cf5fe6f
2025-02-16 04:04:52.849 ERROR [src.node.docker_mananger] Max retries reached for container 494398319c2f. Exiting log stream.
2025-02-16 04:04:53.525 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:04:53.526 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:04:53.532 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:04:53.538 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
