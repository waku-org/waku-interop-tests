2025-02-16 04:05:34.902 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:05:34.903 DEBUG [tests.conftest] Running test: test_invalid_page_size with id: 2025-02-16_04-05-34__d68d094c-5d9a-49a1-94e5-af9bcd7092dc
2025-02-16 04:05:34.903 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:05:34.903 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-16 04:05:34.903 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-16 04:05:34.909 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:05:34.909 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-16_04-05-34__d68d094c-5d9a-49a1-94e5-af9bcd7092dc__wakuorg_nwaku:latest.log
2025-02-16 04:05:34.910 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:05:34.910 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:05:34.911 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:05:34.911 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.131.55
2025-02-16 04:05:34.911 DEBUG [src.node.docker_mananger] Generated ports ['1581', '1582', '1583', '1584', '1585']
2025-02-16 04:05:34.911 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:05:34.912 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:05:34.912 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:05:34.912 DEBUG [src.node.docker_mananger] docker run -i -t -p 1581:1581 -p 1582:1582 -p 1583:1583 -p 1584:1584 -p 1585:1585 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1583 --rest-port=1581 --tcp-port=1582 --discv5-udp-port=1584 --rest-address=0.0.0.0 --nat=extip:172.18.131.55 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ef08fb89cfa153b6f6d0fefcd236c0bc2ad6cdd8bc0dce312f78be5abe3a5e2f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1585 --metrics-logging=true --store=true --relay=true
2025-02-16 04:05:35.147 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.131.55 waku 3d7c1abbcc99241804c8a67e0e9b50df61f8d1f714ade1f0f05962381524dba1
2025-02-16 04:05:35.193 DEBUG [src.node.docker_mananger] Container started with ID 3d7c1abbcc99. Setting up logs at ./log/docker/publishing_node1_2025-02-16_04-05-34__d68d094c-5d9a-49a1-94e5-af9bcd7092dc__wakuorg_nwaku:latest.log
2025-02-16 04:05:35.194 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 1581
2025-02-16 04:05:35.194 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:05:35.705 ERROR [src.node.docker_mananger] Max retries reached for container a988731b4815. Exiting log stream.
2025-02-16 04:05:36.196 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1581/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:36.199 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:05:36.200 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:05:36.200 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1581/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:36.202 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.131.55/tcp/1582/p2p/16Uiu2HAm3RtPQ7a5R19zzEZr5dbX5M2ZgEMGC7WUWsVaT3vnRrBg","/ip4/172.18.131.55/tcp/1583/ws/p2p/16Uiu2HAm3RtPQ7a5R19zzEZr5dbX5M2ZgEMGC7WUWsVaT3vnRrBg"],"enrUri":"enr:-L24QMFMe8NjozTs6uya15DCkTFyMQTpl4COb9K9tDirITe-T7y4Jgvv6fegFYd-oiApHM7oOVajqjZVvvp7v4Yn4icCgmlkgnY0gmlwhKwSgzeKbXVsdGlhZGRyc5YACASsEoM3BgYuAAoErBKDNwYGL90DgnJzhQADAQAAiXNlY3AyNTZrMaECduuGJ-tw7tJJvLsCf9NeNi-90qU0LvyF2DB59w8bln-DdGNwggYug3VkcIIGMIV3YWt1MgM"}'
2025-02-16 04:05:36.203 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:05:36.209 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:05:36.209 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-16_04-05-34__d68d094c-5d9a-49a1-94e5-af9bcd7092dc__wakuorg_nwaku:latest.log
2025-02-16 04:05:36.210 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:05:36.210 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:05:36.211 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:05:36.211 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.138.51
2025-02-16 04:05:36.211 DEBUG [src.node.docker_mananger] Generated ports ['60785', '60786', '60787', '60788', '60789']
2025-02-16 04:05:36.212 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:05:36.212 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:05:36.212 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:05:36.212 DEBUG [src.node.docker_mananger] docker run -i -t -p 60785:60785 -p 60786:60786 -p 60787:60787 -p 60788:60788 -p 60789:60789 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60787 --rest-port=60785 --tcp-port=60786 --discv5-udp-port=60788 --rest-address=0.0.0.0 --nat=extip:172.18.138.51 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=78c1f0ed0df42dd8bbff7671d7db0b4daba8dc57bcfabe69b385adfff558e2fc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60789 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMFMe8NjozTs6uya15DCkTFyMQTpl4COb9K9tDirITe-T7y4Jgvv6fegFYd-oiApHM7oOVajqjZVvvp7v4Yn4icCgmlkgnY0gmlwhKwSgzeKbXVsdGlhZGRyc5YACASsEoM3BgYuAAoErBKDNwYGL90DgnJzhQADAQAAiXNlY3AyNTZrMaECduuGJ-tw7tJJvLsCf9NeNi-90qU0LvyF2DB59w8bln-DdGNwggYug3VkcIIGMIV3YWt1MgM --storenode=/ip4/172.18.131.55/tcp/1582/p2p/16Uiu2HAm3RtPQ7a5R19zzEZr5dbX5M2ZgEMGC7WUWsVaT3vnRrBg --store=true --relay=true
2025-02-16 04:05:36.440 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.138.51 waku 58182439a51780a82f463b04e7fbc3d30a27a1e77f9c2f5c002165a9620ea81d
2025-02-16 04:05:36.492 DEBUG [src.node.docker_mananger] Container started with ID 58182439a517. Setting up logs at ./log/docker/store_node1_2025-02-16_04-05-34__d68d094c-5d9a-49a1-94e5-af9bcd7092dc__wakuorg_nwaku:latest.log
2025-02-16 04:05:36.494 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 60785
2025-02-16 04:05:36.494 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:05:37.494 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60785/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:37.497 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:05:37.498 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:05:37.498 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60785/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:37.500 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.138.51/tcp/60786/p2p/16Uiu2HAmHSR7g8SKaCxDSQFCUAZWi6hys9XVF6uexrfhCJqbk4vg","/ip4/172.18.138.51/tcp/60787/ws/p2p/16Uiu2HAmHSR7g8SKaCxDSQFCUAZWi6hys9XVF6uexrfhCJqbk4vg"],"enrUri":"enr:-L24QCsS4qChX1Uvpaol9LbV-CVY6pY4YPihCp25w4Qi3hyQT8zD_nPWt7i4UQNVRksoZbNQjp-1ohAJU1tEG5CVoZACgmlkgnY0gmlwhKwSijOKbXVsdGlhZGRyc5YACASsEoozBu1yAAoErBKKMwbtc90DgnJzhQADAQAAiXNlY3AyNTZrMaEDRxHi5AguC_ugKaJdfUkbV9nxuhxyEH6wzj3bwzLIcC2DdGNwgu1yg3VkcILtdIV3YWt1MgM"}'
2025-02-16 04:05:37.500 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:05:37.500 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60785/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.131.55/tcp/1582/p2p/16Uiu2HAm3RtPQ7a5R19zzEZr5dbX5M2ZgEMGC7WUWsVaT3vnRrBg"]'
2025-02-16 04:05:37.503 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:37.503 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1581/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:05:37.506 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:37.506 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60785/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:05:37.508 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:37.509 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:37.509 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1581/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:37.516 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:37.517 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:37.718 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:37.718 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1581/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:37.725 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:37.725 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:37.926 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:37.926 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1581/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:37.932 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:37.933 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:38.133 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:38.134 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1581/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:38.140 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:38.140 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:38.341 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:38.342 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1581/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV80", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:38.348 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:38.348 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:38.549 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:38.549 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1581/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV81", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:38.556 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:38.556 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:38.757 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:38.757 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1581/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV82", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:38.763 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:38.763 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:38.964 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:38.964 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1581/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV83", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:38.971 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:38.971 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:39.172 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:39.172 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1581/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV84", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:39.178 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:39.179 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:39.380 DEBUG [src.steps.store] Relaying message
2025-02-16 04:05:39.380 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1581/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV85", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:39.386 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:39.387 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:05:39.588 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1581/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:39.591 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:1581/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true. Response content: b'page size parsing error: invalid integer: $2'
2025-02-16 04:05:39.591 DEBUG [tests.store.test_page_size] the invalid page_size $2 wasn't accepted 
2025-02-16 04:05:39.592 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60785/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:39.594 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:60785/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true. Response content: b'page size parsing error: invalid integer: $2'
2025-02-16 04:05:39.595 DEBUG [tests.store.test_page_size] the invalid page_size $2 wasn't accepted 
2025-02-16 04:05:39.596 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:05:39.597 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:05:39.597 DEBUG [src.node.waku_node] Stopping container with id 3d7c1abbcc99
2025-02-16 04:05:40.549 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:05:40.550 DEBUG [src.node.waku_node] Stopping container with id 58182439a517
2025-02-16 04:05:41.362 ERROR [src.node.docker_mananger] Max retries reached for container 3d7c1abbcc99. Exiting log stream.
2025-02-16 04:05:42.059 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:05:42.061 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:05:42.068 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:05:42.077 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
