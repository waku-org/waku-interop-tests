2025-02-16 04:05:10.152 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:05:10.152 DEBUG [tests.conftest] Running test: test_publish_after_node1_restarts with id: 2025-02-16_04-05-10__ca785a5c-5142-4e06-912f-c448a6d84c5c
2025-02-16 04:05:10.152 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:05:10.153 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-16 04:05:10.153 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-16 04:05:10.159 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:05:10.159 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-16_04-05-10__ca785a5c-5142-4e06-912f-c448a6d84c5c__wakuorg_nwaku:latest.log
2025-02-16 04:05:10.159 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:05:10.159 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:05:10.161 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:05:10.161 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.233.81
2025-02-16 04:05:10.161 DEBUG [src.node.docker_mananger] Generated ports ['31937', '31938', '31939', '31940', '31941']
2025-02-16 04:05:10.161 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:05:10.161 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:05:10.161 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:05:10.161 DEBUG [src.node.docker_mananger] docker run -i -t -p 31937:31937 -p 31938:31938 -p 31939:31939 -p 31940:31940 -p 31941:31941 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31939 --rest-port=31937 --tcp-port=31938 --discv5-udp-port=31940 --rest-address=0.0.0.0 --nat=extip:172.18.233.81 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c1364d540a0d10a2fbfc4554ce01179ced3f07f4f6765a8bba91ec66e3aadefc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31941 --metrics-logging=true --relay=true
2025-02-16 04:05:10.386 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.233.81 waku 30570bfeb01d081f026f4cbb0a39b51e5797ed8a6d0ddce4493b977a87e83bea
2025-02-16 04:05:10.432 DEBUG [src.node.docker_mananger] Container started with ID 30570bfeb01d. Setting up logs at ./log/docker/node1_2025-02-16_04-05-10__ca785a5c-5142-4e06-912f-c448a6d84c5c__wakuorg_nwaku:latest.log
2025-02-16 04:05:10.432 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 31937
2025-02-16 04:05:10.433 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:05:10.954 ERROR [src.node.docker_mananger] Max retries reached for container 427614db0bf7. Exiting log stream.
2025-02-16 04:05:11.433 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31937/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:11.436 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:05:11.436 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:05:11.436 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31937/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:11.438 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.233.81/tcp/31938/p2p/16Uiu2HAm9VPPZjjQEjowbixEHJY5reAW5RnabpQ39ujXMcFsRt5o","/ip4/172.18.233.81/tcp/31939/ws/p2p/16Uiu2HAm9VPPZjjQEjowbixEHJY5reAW5RnabpQ39ujXMcFsRt5o"],"enrUri":"enr:-L24QHKsjQuWfKtjUjyMD5JrcH04t3lDRT3MdP9Hea0vefslB9RfpR17FR4xDS0OGF8eJOPYnZ2Hdyk1atvEf_HE5XgCgmlkgnY0gmlwhKwS6VGKbXVsdGlhZGRyc5YACASsEulRBnzCAAoErBLpUQZ8w90DgnJzhQADAQAAiXNlY3AyNTZrMaEC0Pcugf_G50VOGE1PIx8eHgMht5orhQUqQ2g70FP0DaKDdGNwgnzCg3VkcIJ8xIV3YWt1MgE"}'
2025-02-16 04:05:11.439 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:05:11.445 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:05:11.445 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-16_04-05-10__ca785a5c-5142-4e06-912f-c448a6d84c5c__wakuorg_nwaku:latest.log
2025-02-16 04:05:11.445 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:05:11.445 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:05:11.447 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:05:11.447 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.91.216
2025-02-16 04:05:11.447 DEBUG [src.node.docker_mananger] Generated ports ['36995', '36996', '36997', '36998', '36999']
2025-02-16 04:05:11.447 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:05:11.447 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:05:11.447 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:05:11.447 DEBUG [src.node.docker_mananger] docker run -i -t -p 36995:36995 -p 36996:36996 -p 36997:36997 -p 36998:36998 -p 36999:36999 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36997 --rest-port=36995 --tcp-port=36996 --discv5-udp-port=36998 --rest-address=0.0.0.0 --nat=extip:172.18.91.216 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=20cefc2cec1f58df3a4dbc98af6fc72ff069fe3ce4acaac02926a9a46ec156ce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36999 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QHKsjQuWfKtjUjyMD5JrcH04t3lDRT3MdP9Hea0vefslB9RfpR17FR4xDS0OGF8eJOPYnZ2Hdyk1atvEf_HE5XgCgmlkgnY0gmlwhKwS6VGKbXVsdGlhZGRyc5YACASsEulRBnzCAAoErBLpUQZ8w90DgnJzhQADAQAAiXNlY3AyNTZrMaEC0Pcugf_G50VOGE1PIx8eHgMht5orhQUqQ2g70FP0DaKDdGNwgnzCg3VkcIJ8xIV3YWt1MgE
2025-02-16 04:05:11.682 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.91.216 waku ee5676604660a3fc82e70ad333de9ab3e4c57037c08edb3eecd87f6732ace63f
2025-02-16 04:05:11.732 DEBUG [src.node.docker_mananger] Container started with ID ee5676604660. Setting up logs at ./log/docker/node2_2025-02-16_04-05-10__ca785a5c-5142-4e06-912f-c448a6d84c5c__wakuorg_nwaku:latest.log
2025-02-16 04:05:11.733 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36995
2025-02-16 04:05:11.734 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:05:12.734 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36995/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:12.742 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:05:12.743 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:05:12.744 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36995/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:12.748 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.91.216/tcp/36996/p2p/16Uiu2HAkxjSRwGvg3iEgHRPk2qNp2TnMMfGJnYnp7Z8yxpWF53qY","/ip4/172.18.91.216/tcp/36997/ws/p2p/16Uiu2HAkxjSRwGvg3iEgHRPk2qNp2TnMMfGJnYnp7Z8yxpWF53qY"],"enrUri":"enr:-L24QJMJD0IdGJ6_TtWxeRG2RmQXs6bggHTe8g2-4DpJ1Ss0Wju1BDhjhzW8gLEyPWNebMYQN7Ps3Zl2QBp8cm7yu-gCgmlkgnY0gmlwhKwSW9iKbXVsdGlhZGRyc5YACASsElvYBpCEAAoErBJb2AaQhd0DgnJzhQADAQAAiXNlY3AyNTZrMaECMSAx9Tr3ar1Ql5vNvx02LATetYsO3g0rPwSWITAgjSeDdGNwgpCEg3VkcIKQhoV3YWt1MgE"}'
2025-02-16 04:05:12.748 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:05:12.749 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36995/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.233.81/tcp/31938/p2p/16Uiu2HAm9VPPZjjQEjowbixEHJY5reAW5RnabpQ39ujXMcFsRt5o"]'
2025-02-16 04:05:12.752 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:12.753 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2025-02-16 04:05:12.753 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31937/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:05:12.757 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:12.757 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36995/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:05:12.764 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:12.765 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31937/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:12.770 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:12.771 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-16 04:05:12.871 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-16 04:05:12.871 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31937/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:12.874 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739678712765023232,"ephemeral":false,"proof":""}]'
2025-02-16 04:05:12.876 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-16 04:05:12.876 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36995/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:12.878 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739678712765023232,"ephemeral":false,"proof":""}]'
2025-02-16 04:05:12.879 INFO [src.steps.relay] WARM UP successful!!
2025-02-16 04:05:12.880 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31937/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:12.885 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:12.885 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-16 04:05:12.986 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-16 04:05:12.986 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31937/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:12.989 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739678712880764416,"ephemeral":false,"proof":""}]'
2025-02-16 04:05:12.990 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-16 04:05:12.990 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36995/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:12.992 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739678712880764416,"ephemeral":false,"proof":""}]'
2025-02-16 04:05:12.994 DEBUG [src.node.waku_node] Restarting container with id 30570bfeb01d
2025-02-16 04:05:14.166 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31937/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:14.270 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31937/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:14.273 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:05:14.273 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:05:14.273 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31937/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:14.276 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.233.81/tcp/31938/p2p/16Uiu2HAm9VPPZjjQEjowbixEHJY5reAW5RnabpQ39ujXMcFsRt5o","/ip4/172.18.233.81/tcp/31939/ws/p2p/16Uiu2HAm9VPPZjjQEjowbixEHJY5reAW5RnabpQ39ujXMcFsRt5o"],"enrUri":"enr:-L24QHKsjQuWfKtjUjyMD5JrcH04t3lDRT3MdP9Hea0vefslB9RfpR17FR4xDS0OGF8eJOPYnZ2Hdyk1atvEf_HE5XgCgmlkgnY0gmlwhKwS6VGKbXVsdGlhZGRyc5YACASsEulRBnzCAAoErBLpUQZ8w90DgnJzhQADAQAAiXNlY3AyNTZrMaEC0Pcugf_G50VOGE1PIx8eHgMht5orhQUqQ2g70FP0DaKDdGNwgnzCg3VkcIJ8xIV3YWt1MgE"}'
2025-02-16 04:05:14.276 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:05:14.276 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31937/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:05:14.294 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:14.294 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36995/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:05:14.297 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:14.297 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31937/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:14.300 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:14.300 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-16 04:05:14.401 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-16 04:05:14.401 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31937/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:14.403 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739678714297859328,"ephemeral":false,"proof":""}]'
2025-02-16 04:05:14.405 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-16 04:05:14.405 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36995/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:14.408 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-16 04:05:15.408 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31937/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:05:15.412 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:15.412 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36995/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:05:15.414 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:15.415 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31937/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:15.417 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:15.418 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-16 04:05:15.518 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-16 04:05:15.518 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31937/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:15.521 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739678715415132672,"ephemeral":false,"proof":""}]'
2025-02-16 04:05:15.522 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-16 04:05:15.522 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36995/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:15.524 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-16 04:05:16.525 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31937/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:05:16.528 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:16.529 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36995/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:05:16.531 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:16.532 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31937/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:16.535 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:16.535 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-16 04:05:16.635 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-16 04:05:16.635 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31937/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:16.638 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739678716532001536,"ephemeral":false,"proof":""}]'
2025-02-16 04:05:16.639 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-16 04:05:16.640 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36995/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:16.642 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-16 04:05:17.643 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31937/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:05:17.646 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:17.646 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36995/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:05:17.648 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:17.649 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31937/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:17.651 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:17.652 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-16 04:05:17.752 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-16 04:05:17.752 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31937/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:17.754 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739678717649097984,"ephemeral":false,"proof":""}]'
2025-02-16 04:05:17.756 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-16 04:05:17.756 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36995/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:17.758 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-16 04:05:18.759 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31937/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:05:18.775 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:18.776 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36995/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:05:18.781 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:18.781 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31937/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:18.786 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:18.787 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-16 04:05:18.887 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-16 04:05:18.887 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31937/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:18.890 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739678718781695488,"ephemeral":false,"proof":""}]'
2025-02-16 04:05:18.891 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-16 04:05:18.892 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36995/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:18.894 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739678718781695488,"ephemeral":false,"proof":""}]'
2025-02-16 04:05:18.897 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:05:18.898 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:05:18.898 DEBUG [src.node.waku_node] Stopping container with id 30570bfeb01d
2025-02-16 04:05:19.708 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:05:19.708 DEBUG [src.node.waku_node] Stopping container with id ee5676604660
2025-02-16 04:05:20.524 ERROR [src.node.docker_mananger] Max retries reached for container 30570bfeb01d. Exiting log stream.
2025-02-16 04:05:21.205 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:05:21.206 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:05:21.228 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:05:21.238 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
