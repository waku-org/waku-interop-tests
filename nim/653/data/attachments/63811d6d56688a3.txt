2025-02-16 04:02:22.106 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:02:22.107 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2025-02-16_04-02-22__381971a2-f6d1-46ac-945a-1a047eb5b421
2025-02-16 04:02:22.107 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:02:22.107 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-16 04:02:22.107 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-16 04:02:22.115 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:02:22.116 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-16_04-02-22__381971a2-f6d1-46ac-945a-1a047eb5b421__wakuorg_nwaku:latest.log
2025-02-16 04:02:22.121 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:02:22.121 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-16_04-02-22__381971a2-f6d1-46ac-945a-1a047eb5b421__wakuorg_nwaku:latest.log
2025-02-16 04:02:22.127 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:02:22.127 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-16_04-02-22__381971a2-f6d1-46ac-945a-1a047eb5b421__wakuorg_nwaku:latest.log
2025-02-16 04:02:22.127 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-16 04:02:22.127 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-16 04:02:22.128 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:02:22.128 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:02:22.194 DEBUG [src.node.docker_mananger] Network waku created
2025-02-16 04:02:22.194 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.104.175
2025-02-16 04:02:22.194 DEBUG [src.node.docker_mananger] Generated ports ['42942', '42943', '42944', '42945', '42946']
2025-02-16 04:02:22.195 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:02:22.195 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:02:22.195 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:02:22.195 DEBUG [src.node.docker_mananger] docker run -i -t -p 42942:42942 -p 42943:42943 -p 42944:42944 -p 42945:42945 -p 42946:42946 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42944 --rest-port=42942 --tcp-port=42943 --discv5-udp-port=42945 --rest-address=0.0.0.0 --nat=extip:172.18.104.175 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0aac9cba22c8a5fe9d2efd11adec9dbbfde0dee1870f91ffa1b4ff6deea2da76 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42946 --metrics-logging=true --relay=true
2025-02-16 04:02:24.418 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.104.175 waku ec3fa48b3ebbaac3611cf48da0d5e94693fb6719263410754a24ebd14101c2e4
2025-02-16 04:02:24.472 DEBUG [src.node.docker_mananger] Container started with ID ec3fa48b3ebb. Setting up logs at ./log/docker/node1_2025-02-16_04-02-22__381971a2-f6d1-46ac-945a-1a047eb5b421__wakuorg_nwaku:latest.log
2025-02-16 04:02:24.473 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42942
2025-02-16 04:02:24.473 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:02:25.473 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42942/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:25.476 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:02:25.477 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:02:25.477 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42942/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:25.479 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.175/tcp/42943/p2p/16Uiu2HAkxhimWEBUn6KE6HXpxkTFhVbPFQNXUDDgcuW8zMvQt1zA","/ip4/172.18.104.175/tcp/42944/ws/p2p/16Uiu2HAkxhimWEBUn6KE6HXpxkTFhVbPFQNXUDDgcuW8zMvQt1zA"],"enrUri":"enr:-L24QLo913tJY9kUYY5Q4BLBOX2JfKlnQ0jAjWzmUqx8FnXfW4wj8UETjgK36nfYMMEAzyqMd0aKjmHMLfYikqvHKscCgmlkgnY0gmlwhKwSaK-KbXVsdGlhZGRyc5YACASsEmivBqe_AAoErBJorwanwN0DgnJzhQADAQAAiXNlY3AyNTZrMaECMK-BmrBQjyyis2fo7bROpSeFJOK62ryBYbiynvO37fuDdGNwgqe_g3VkcIKnwYV3YWt1MgE"}'
2025-02-16 04:02:25.479 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:02:25.479 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:02:25.479 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:02:25.481 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:02:25.481 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.126.15
2025-02-16 04:02:25.481 DEBUG [src.node.docker_mananger] Generated ports ['59897', '59898', '59899', '59900', '59901']
2025-02-16 04:02:25.481 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:02:25.481 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:02:25.481 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:02:25.481 DEBUG [src.node.docker_mananger] docker run -i -t -p 59897:59897 -p 59898:59898 -p 59899:59899 -p 59900:59900 -p 59901:59901 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59899 --rest-port=59897 --tcp-port=59898 --discv5-udp-port=59900 --rest-address=0.0.0.0 --nat=extip:172.18.126.15 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5fe3facea58cb340d6eb6ccf1ec2aed3ddf34daceacaeb9a818cdb4c42b5aa39 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59901 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QLo913tJY9kUYY5Q4BLBOX2JfKlnQ0jAjWzmUqx8FnXfW4wj8UETjgK36nfYMMEAzyqMd0aKjmHMLfYikqvHKscCgmlkgnY0gmlwhKwSaK-KbXVsdGlhZGRyc5YACASsEmivBqe_AAoErBJorwanwN0DgnJzhQADAQAAiXNlY3AyNTZrMaECMK-BmrBQjyyis2fo7bROpSeFJOK62ryBYbiynvO37fuDdGNwgqe_g3VkcIKnwYV3YWt1MgE
2025-02-16 04:02:25.713 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.126.15 waku 9687607a01393bf69d2616e79be8dbbf7d28f878ad0f1ab20cacf9ea49de08d2
2025-02-16 04:02:25.760 DEBUG [src.node.docker_mananger] Container started with ID 9687607a0139. Setting up logs at ./log/docker/node2_2025-02-16_04-02-22__381971a2-f6d1-46ac-945a-1a047eb5b421__wakuorg_nwaku:latest.log
2025-02-16 04:02:25.762 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 59897
2025-02-16 04:02:25.762 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:02:26.762 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59897/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:26.765 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:02:26.766 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:02:26.767 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59897/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:26.775 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.126.15/tcp/59898/p2p/16Uiu2HAmU9b1RbzEZCfMhjGJd1iUcZWsfpdKeUm4w8oaYdCtLNG4","/ip4/172.18.126.15/tcp/59899/ws/p2p/16Uiu2HAmU9b1RbzEZCfMhjGJd1iUcZWsfpdKeUm4w8oaYdCtLNG4"],"enrUri":"enr:-L24QLug93w_IDAyv5e4xmCNTrahY-DGcIP9Towavk9iFBKTCDT80JoUd2E-nxcemCp-0xrRQbyXw8fNwMcgR_YPOcwCgmlkgnY0gmlwhKwSfg-KbXVsdGlhZGRyc5YACASsEn4PBun6AAoErBJ-Dwbp-90DgnJzhQADAQAAiXNlY3AyNTZrMaED5jLBAGNvnTzNMz1vh7KMJ3K1kjdZzVFRRQbtKDcZ_-WDdGNwgun6g3VkcILp_IV3YWt1MgM"}'
2025-02-16 04:02:26.775 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:02:26.776 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:02:26.776 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:02:26.779 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:02:26.780 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.104.163
2025-02-16 04:02:26.780 DEBUG [src.node.docker_mananger] Generated ports ['37260', '37261', '37262', '37263', '37264']
2025-02-16 04:02:26.781 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:02:26.782 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:02:26.784 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:02:26.785 DEBUG [src.node.docker_mananger] docker run -i -t -p 37260:37260 -p 37261:37261 -p 37262:37262 -p 37263:37263 -p 37264:37264 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37262 --rest-port=37260 --tcp-port=37261 --discv5-udp-port=37263 --rest-address=0.0.0.0 --nat=extip:172.18.104.163 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9b58cf89a17a19eab2fba9fef05c4d2af1a7df8c94fe7ceccdb8baadd1f5bcba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37264 --metrics-logging=true --relay=false --storenode=/ip4/172.18.126.15/tcp/59898/p2p/16Uiu2HAmU9b1RbzEZCfMhjGJd1iUcZWsfpdKeUm4w8oaYdCtLNG4 --discv5-bootstrap-node=enr:-L24QLug93w_IDAyv5e4xmCNTrahY-DGcIP9Towavk9iFBKTCDT80JoUd2E-nxcemCp-0xrRQbyXw8fNwMcgR_YPOcwCgmlkgnY0gmlwhKwSfg-KbXVsdGlhZGRyc5YACASsEn4PBun6AAoErBJ-Dwbp-90DgnJzhQADAQAAiXNlY3AyNTZrMaED5jLBAGNvnTzNMz1vh7KMJ3K1kjdZzVFRRQbtKDcZ_-WDdGNwgun6g3VkcILp_IV3YWt1MgM
2025-02-16 04:02:27.033 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.104.163 waku e8b16e8d86313425e2bf0d8c7e4be9dc90ce4f425affebda1d38fe6f71c88a41
2025-02-16 04:02:27.086 DEBUG [src.node.docker_mananger] Container started with ID e8b16e8d8631. Setting up logs at ./log/docker/node3_2025-02-16_04-02-22__381971a2-f6d1-46ac-945a-1a047eb5b421__wakuorg_nwaku:latest.log
2025-02-16 04:02:27.086 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37260
2025-02-16 04:02:27.086 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:02:28.087 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37260/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:28.091 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:02:28.091 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:02:28.091 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37260/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:28.093 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.163/tcp/37261/p2p/16Uiu2HAkxffJrNQbRf6QsM35mrXhAVBwn1pJju6WhGKpXn9LkLu2","/ip4/172.18.104.163/tcp/37262/ws/p2p/16Uiu2HAkxffJrNQbRf6QsM35mrXhAVBwn1pJju6WhGKpXn9LkLu2"],"enrUri":"enr:-L24QJ600zCZXdrpV-8hYYRlbZROW9zKjBGlOaeL2rqUfp_Wdeo5pUAloep-o3DGSH2W8l2YK_oPPieST8cy8Pj95pQCgmlkgnY0gmlwhKwSaKOKbXVsdGlhZGRyc5YACASsEmijBpGNAAoErBJoowaRjt0DgnJzhQADAQAAiXNlY3AyNTZrMaECMChu1YcRw2OBtUmk_iCnCy4Ybi6FkHuRaKeBB-H3Mp2DdGNwgpGNg3VkcIKRj4V3YWt1MgA"}'
2025-02-16 04:02:28.094 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:02:28.094 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42942/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:02:28.098 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:02:28.099 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59897/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:02:28.104 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:02:28.105 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42942/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:28.109 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.126.15/tcp/59898/p2p/16Uiu2HAmU9b1RbzEZCfMhjGJd1iUcZWsfpdKeUm4w8oaYdCtLNG4","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-16 04:02:28.109 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59897/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:28.111 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.104.175/tcp/42943/p2p/16Uiu2HAkxhimWEBUn6KE6HXpxkTFhVbPFQNXUDDgcuW8zMvQt1zA","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
2025-02-16 04:02:28.112 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-16 04:02:58.112 DEBUG [src.steps.store] Relaying message
2025-02-16 04:02:58.113 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42942/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:02:58.118 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:02:58.118 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-16 04:02:58.319 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-16 04:02:58.320 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37260/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:02:58.362 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"0510da3b5b9ee996beb2","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xe5c3dc76e87292ce45103892567e443db345b617790c34bb10071bdd859415ca"}]}'
2025-02-16 04:02:58.370 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:02:58.371 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:02:58.371 DEBUG [src.node.waku_node] Stopping container with id ec3fa48b3ebb
2025-02-16 04:02:59.098 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:02:59.099 DEBUG [src.node.waku_node] Stopping container with id 9687607a0139
2025-02-16 04:02:59.912 ERROR [src.node.docker_mananger] Max retries reached for container ec3fa48b3ebb. Exiting log stream.
2025-02-16 04:03:00.547 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:03:00.547 DEBUG [src.node.waku_node] Stopping container with id e8b16e8d8631
2025-02-16 04:03:01.360 ERROR [src.node.docker_mananger] Max retries reached for container 9687607a0139. Exiting log stream.
2025-02-16 04:03:01.956 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:03:01.957 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:03:01.966 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:03:01.979 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:03:01.983 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
