2025-02-16 04:03:31.997 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:03:31.998 DEBUG [tests.conftest] Running test: test_light_push_with_missing_content_topic with id: 2025-02-16_04-03-31__a2f311f1-59d7-45ca-a007-fac8ffc5cc1f
2025-02-16 04:03:31.998 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:03:31.998 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-16 04:03:32.004 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:03:32.005 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-16_04-03-31__a2f311f1-59d7-45ca-a007-fac8ffc5cc1f__wakuorg_nwaku:latest.log
2025-02-16 04:03:32.005 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:03:32.005 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:03:32.006 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:03:32.006 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.64.127
2025-02-16 04:03:32.006 DEBUG [src.node.docker_mananger] Generated ports ['20525', '20526', '20527', '20528', '20529']
2025-02-16 04:03:32.007 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:03:32.007 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:03:32.007 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:03:32.007 DEBUG [src.node.docker_mananger] docker run -i -t -p 20525:20525 -p 20526:20526 -p 20527:20527 -p 20528:20528 -p 20529:20529 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20527 --rest-port=20525 --tcp-port=20526 --discv5-udp-port=20528 --rest-address=0.0.0.0 --nat=extip:172.18.64.127 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f8dd456b4aecfb655ea0d7b3864fbcaaab643db5caa1567c4fc0a9ef6e89e16d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20529 --metrics-logging=true --lightpush=true --relay=true
2025-02-16 04:03:32.250 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.64.127 waku 3ff5ff9f1785a9ba529bf7b45c91f588cb99612c283b023918ff9cb53de92861
2025-02-16 04:03:32.291 DEBUG [src.node.docker_mananger] Container started with ID 3ff5ff9f1785. Setting up logs at ./log/docker/receiving_node1_2025-02-16_04-03-31__a2f311f1-59d7-45ca-a007-fac8ffc5cc1f__wakuorg_nwaku:latest.log
2025-02-16 04:03:32.292 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20525
2025-02-16 04:03:32.293 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:03:32.742 ERROR [src.node.docker_mananger] Max retries reached for container 87ce04c618df. Exiting log stream.
2025-02-16 04:03:33.293 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20525/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:03:33.296 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:03:33.296 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:03:33.297 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20525/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:03:33.299 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.64.127/tcp/20526/p2p/16Uiu2HAkziY6wFbFVkc5zSBb7izURzSgmWMYAoakebS5tcZsbnQV","/ip4/172.18.64.127/tcp/20527/ws/p2p/16Uiu2HAkziY6wFbFVkc5zSBb7izURzSgmWMYAoakebS5tcZsbnQV"],"enrUri":"enr:-L24QH5ivnf9povlaumrIV5Kd5WUGcs1R1NBNDpxUNstRSofGHu-v3ijU18g4rPfGMNiOr7oJIw1rgVky0t_FkscHqMCgmlkgnY0gmlwhKwSQH-KbXVsdGlhZGRyc5YACASsEkB_BlAuAAoErBJAfwZQL90DgnJzhQADAQAAiXNlY3AyNTZrMaECTpxm6aePxDP99EyQK9vOjwk0SvPISXkvk4hfmbAGj1aDdGNwglAug3VkcIJQMIV3YWt1Mgk"}'
2025-02-16 04:03:33.299 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:03:33.306 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:03:33.306 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-16_04-03-31__a2f311f1-59d7-45ca-a007-fac8ffc5cc1f__wakuorg_nwaku:latest.log
2025-02-16 04:03:33.306 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:03:33.306 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:03:33.307 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:03:33.307 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.154.26
2025-02-16 04:03:33.308 DEBUG [src.node.docker_mananger] Generated ports ['12142', '12143', '12144', '12145', '12146']
2025-02-16 04:03:33.308 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:03:33.308 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:03:33.308 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:03:33.308 DEBUG [src.node.docker_mananger] docker run -i -t -p 12142:12142 -p 12143:12143 -p 12144:12144 -p 12145:12145 -p 12146:12146 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12144 --rest-port=12142 --tcp-port=12143 --discv5-udp-port=12145 --rest-address=0.0.0.0 --nat=extip:172.18.154.26 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cec2cbcd4fe6fb10688c7e13dab3ea5de1e1ee7e1c7c7dfd43e37ed3fb68d9fd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12146 --metrics-logging=true --lightpush=false --relay=true
2025-02-16 04:03:33.532 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.154.26 waku e05e996b410166f2f38789d33f86abf4549334fe228d93a3d94c2a74a99eadcc
2025-02-16 04:03:33.581 DEBUG [src.node.docker_mananger] Container started with ID e05e996b4101. Setting up logs at ./log/docker/receiving_node2_2025-02-16_04-03-31__a2f311f1-59d7-45ca-a007-fac8ffc5cc1f__wakuorg_nwaku:latest.log
2025-02-16 04:03:33.582 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 12142
2025-02-16 04:03:33.582 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:03:34.582 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12142/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:03:34.585 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:03:34.585 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:03:34.585 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12142/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:03:34.587 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.154.26/tcp/12143/p2p/16Uiu2HAmKFYekii6Zt8soVtcBA7tWtpeHyVRHBsu9x375MnXFmKP","/ip4/172.18.154.26/tcp/12144/ws/p2p/16Uiu2HAmKFYekii6Zt8soVtcBA7tWtpeHyVRHBsu9x375MnXFmKP"],"enrUri":"enr:-L24QLYafxXCb0uxycrBzGByo0MB89Kh74ymUlYMnXh56695DJQ7WPEGyZyPAq3nwWwfKRsXCzv6MAWRjUF4KhvfHrICgmlkgnY0gmlwhKwSmhqKbXVsdGlhZGRyc5YACASsEpoaBi9vAAoErBKaGgYvcN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDYgBkXbOZkRddSSSzMpsg4jPTfn2XmQR-6adBc0MrhoqDdGNwgi9vg3VkcIIvcYV3YWt1MgE"}'
2025-02-16 04:03:34.587 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:03:34.588 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12142/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.64.127/tcp/20526/p2p/16Uiu2HAkziY6wFbFVkc5zSBb7izURzSgmWMYAoakebS5tcZsbnQV"]'
2025-02-16 04:03:34.623 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:03:34.632 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:03:34.632 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-16_04-03-31__a2f311f1-59d7-45ca-a007-fac8ffc5cc1f__wakuorg_nwaku:latest.log
2025-02-16 04:03:34.632 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:03:34.632 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:03:34.633 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:03:34.634 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.209.160
2025-02-16 04:03:34.634 DEBUG [src.node.docker_mananger] Generated ports ['46395', '46396', '46397', '46398', '46399']
2025-02-16 04:03:34.634 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:03:34.634 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:03:34.634 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:03:34.634 DEBUG [src.node.docker_mananger] docker run -i -t -p 46395:46395 -p 46396:46396 -p 46397:46397 -p 46398:46398 -p 46399:46399 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46397 --rest-port=46395 --tcp-port=46396 --discv5-udp-port=46398 --rest-address=0.0.0.0 --nat=extip:172.18.209.160 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=da87fd7e0d7acaa3c2cab77c0c91cbd8587a353cfd8a61bff860bafeaf7dca5c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46399 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QH5ivnf9povlaumrIV5Kd5WUGcs1R1NBNDpxUNstRSofGHu-v3ijU18g4rPfGMNiOr7oJIw1rgVky0t_FkscHqMCgmlkgnY0gmlwhKwSQH-KbXVsdGlhZGRyc5YACASsEkB_BlAuAAoErBJAfwZQL90DgnJzhQADAQAAiXNlY3AyNTZrMaECTpxm6aePxDP99EyQK9vOjwk0SvPISXkvk4hfmbAGj1aDdGNwglAug3VkcIJQMIV3YWt1Mgk --lightpushnode=/ip4/172.18.64.127/tcp/20526/p2p/16Uiu2HAkziY6wFbFVkc5zSBb7izURzSgmWMYAoakebS5tcZsbnQV --lightpush=true --relay=false
2025-02-16 04:03:34.873 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.209.160 waku 2baa751e820455ab136b72745dcd48ac293fe422bfccd768b7e5a900991ca9dd
2025-02-16 04:03:34.921 DEBUG [src.node.docker_mananger] Container started with ID 2baa751e8204. Setting up logs at ./log/docker/lightpush_node1_2025-02-16_04-03-31__a2f311f1-59d7-45ca-a007-fac8ffc5cc1f__wakuorg_nwaku:latest.log
2025-02-16 04:03:34.922 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46395
2025-02-16 04:03:34.922 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:03:35.923 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46395/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:03:35.926 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:03:35.926 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:03:35.926 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46395/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:03:35.928 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.209.160/tcp/46396/p2p/16Uiu2HAm84VSNVvBedGhnxCBQUyYNaSbJELykpYB6ZoUqYa4tyE5","/ip4/172.18.209.160/tcp/46397/ws/p2p/16Uiu2HAm84VSNVvBedGhnxCBQUyYNaSbJELykpYB6ZoUqYa4tyE5"],"enrUri":"enr:-L24QNn1x21u2YrKcl6P3Js9C0amktM1KCRcyV3TYpv4X4wUdaA-7bIsmzMHzMX9DpSaG-VDZfSzzEpX_8RddHLVKY4CgmlkgnY0gmlwhKwS0aCKbXVsdGlhZGRyc5YACASsEtGgBrU8AAoErBLRoAa1Pd0DgnJzhQADAQAAiXNlY3AyNTZrMaECu7rQPg1KlIsuA6xI0a4oj9PTRGX1nrLiFeg86NSisl6DdGNwgrU8g3VkcIK1PoV3YWt1Mgg"}'
2025-02-16 04:03:35.928 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:03:35.929 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46395/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.64.127/tcp/20526/p2p/16Uiu2HAkziY6wFbFVkc5zSBb7izURzSgmWMYAoakebS5tcZsbnQV"]'
2025-02-16 04:03:35.964 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:03:35.968 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46395/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.154.26/tcp/12143/p2p/16Uiu2HAmKFYekii6Zt8soVtcBA7tWtpeHyVRHBsu9x375MnXFmKP"]'
2025-02-16 04:03:35.995 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:03:35.996 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20525/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:03:36.005 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:03:36.006 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12142/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 04:03:36.011 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:03:36.014 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46395/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "timestamp": 1739678616014007296}}'
2025-02-16 04:03:36.017 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:46395/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data: '
2025-02-16 04:03:36.019 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:03:36.020 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:03:36.020 DEBUG [src.node.waku_node] Stopping container with id 3ff5ff9f1785
2025-02-16 04:03:36.775 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:03:36.775 DEBUG [src.node.waku_node] Stopping container with id e05e996b4101
2025-02-16 04:03:37.586 ERROR [src.node.docker_mananger] Max retries reached for container 3ff5ff9f1785. Exiting log stream.
2025-02-16 04:03:38.288 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:03:38.288 DEBUG [src.node.waku_node] Stopping container with id 2baa751e8204
2025-02-16 04:03:39.099 ERROR [src.node.docker_mananger] Max retries reached for container e05e996b4101. Exiting log stream.
2025-02-16 04:03:39.803 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:03:39.804 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:03:39.814 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:03:39.822 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:03:39.828 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
