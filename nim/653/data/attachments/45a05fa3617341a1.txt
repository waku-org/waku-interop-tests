2025-02-16 04:05:37.062 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:05:37.063 DEBUG [tests.conftest] Running test: test_relay_unsubscribe_with_invalid_pubsub_topic_format with id: 2025-02-16_04-05-37__db5d79cc-11ac-409e-b4c7-adea65657bc9
2025-02-16 04:05:37.063 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:05:37.063 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-16 04:05:37.063 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-16 04:05:37.069 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:05:37.069 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-16_04-05-37__db5d79cc-11ac-409e-b4c7-adea65657bc9__wakuorg_nwaku:latest.log
2025-02-16 04:05:37.070 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:05:37.070 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:05:37.071 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:05:37.071 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.64.53
2025-02-16 04:05:37.071 DEBUG [src.node.docker_mananger] Generated ports ['1134', '1135', '1136', '1137', '1138']
2025-02-16 04:05:37.072 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:05:37.072 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:05:37.072 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:05:37.072 DEBUG [src.node.docker_mananger] docker run -i -t -p 1134:1134 -p 1135:1135 -p 1136:1136 -p 1137:1137 -p 1138:1138 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1136 --rest-port=1134 --tcp-port=1135 --discv5-udp-port=1137 --rest-address=0.0.0.0 --nat=extip:172.18.64.53 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=477a7d682aed8fbccd4dfc0cdeac00f88987c97b8d43da1b622ed6afbce4ea92 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1138 --metrics-logging=true --relay=true
2025-02-16 04:05:37.297 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.64.53 waku 2c521658cdb7b26f14eb6db062bab4ba670b3ce0b72fb7c67c07b0feefe71e25
2025-02-16 04:05:37.351 DEBUG [src.node.docker_mananger] Container started with ID 2c521658cdb7. Setting up logs at ./log/docker/node1_2025-02-16_04-05-37__db5d79cc-11ac-409e-b4c7-adea65657bc9__wakuorg_nwaku:latest.log
2025-02-16 04:05:37.351 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 1134
2025-02-16 04:05:37.352 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:05:37.865 ERROR [src.node.docker_mananger] Max retries reached for container 0796d8d2b07c. Exiting log stream.
2025-02-16 04:05:38.352 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1134/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:38.355 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:05:38.355 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:05:38.355 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1134/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:38.357 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.64.53/tcp/1135/p2p/16Uiu2HAmGgHEtGGyzcP3LnMFSByJpeK7pLCo66AB711rakij9cZZ","/ip4/172.18.64.53/tcp/1136/ws/p2p/16Uiu2HAmGgHEtGGyzcP3LnMFSByJpeK7pLCo66AB711rakij9cZZ"],"enrUri":"enr:-L24QKNYKbNtbyPq1gac_Zle_T-6MNWB2rVKzHz4HXFjrrzEIDs48dbzcS1FhESwoIKBl4gPgPh7DbBbvQn8so4L7YACgmlkgnY0gmlwhKwSQDWKbXVsdGlhZGRyc5YACASsEkA1BgRvAAoErBJANQYEcN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDO8Ns9JN0r7nCRzoofdfVg5Ezl5EhCJQXJK1HSMrkyAyDdGNwggRvg3VkcIIEcYV3YWt1MgE"}'
2025-02-16 04:05:38.357 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:05:38.363 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:05:38.364 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-16_04-05-37__db5d79cc-11ac-409e-b4c7-adea65657bc9__wakuorg_nwaku:latest.log
2025-02-16 04:05:38.364 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:05:38.364 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:05:38.365 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:05:38.365 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.214.128
2025-02-16 04:05:38.365 DEBUG [src.node.docker_mananger] Generated ports ['18939', '18940', '18941', '18942', '18943']
2025-02-16 04:05:38.366 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:05:38.366 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:05:38.366 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:05:38.366 DEBUG [src.node.docker_mananger] docker run -i -t -p 18939:18939 -p 18940:18940 -p 18941:18941 -p 18942:18942 -p 18943:18943 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18941 --rest-port=18939 --tcp-port=18940 --discv5-udp-port=18942 --rest-address=0.0.0.0 --nat=extip:172.18.214.128 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=df034e51dc2cc88ddbee3ab602b622b4b46df762eeca5f0bec99d05bc8a585cb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18943 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QKNYKbNtbyPq1gac_Zle_T-6MNWB2rVKzHz4HXFjrrzEIDs48dbzcS1FhESwoIKBl4gPgPh7DbBbvQn8so4L7YACgmlkgnY0gmlwhKwSQDWKbXVsdGlhZGRyc5YACASsEkA1BgRvAAoErBJANQYEcN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDO8Ns9JN0r7nCRzoofdfVg5Ezl5EhCJQXJK1HSMrkyAyDdGNwggRvg3VkcIIEcYV3YWt1MgE
2025-02-16 04:05:38.590 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.214.128 waku 1ea47f1f6c080526c352d6c57341198bec01931e51fc4eab71e427d09f0ed9ee
2025-02-16 04:05:38.638 DEBUG [src.node.docker_mananger] Container started with ID 1ea47f1f6c08. Setting up logs at ./log/docker/node2_2025-02-16_04-05-37__db5d79cc-11ac-409e-b4c7-adea65657bc9__wakuorg_nwaku:latest.log
2025-02-16 04:05:38.638 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18939
2025-02-16 04:05:38.639 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:05:39.640 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18939/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:39.653 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:05:39.655 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:05:39.657 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18939/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:39.666 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.214.128/tcp/18940/p2p/16Uiu2HAmEX2rDvQXVwdcwFF4vo28YcrLZL6eS4K98Qy4NyX734Ew","/ip4/172.18.214.128/tcp/18941/ws/p2p/16Uiu2HAmEX2rDvQXVwdcwFF4vo28YcrLZL6eS4K98Qy4NyX734Ew"],"enrUri":"enr:-L24QBMtPt_LfY87EepMG83XcuD5x-qUPG_aMYPtXgbBTTWWcu35w3XFi630XvBFOGD7btc9si9D5cjtlkohhUqjjkACgmlkgnY0gmlwhKwS1oCKbXVsdGlhZGRyc5YACASsEtaABkn8AAoErBLWgAZJ_d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDG62Nh18Ch13X4hM1cXNb8aKCfrH8PMkd8b-oB74_N4SDdGNwgkn8g3VkcIJJ_oV3YWt1MgE"}'
2025-02-16 04:05:39.666 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:05:39.668 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18939/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.64.53/tcp/1135/p2p/16Uiu2HAmGgHEtGGyzcP3LnMFSByJpeK7pLCo66AB711rakij9cZZ"]'
2025-02-16 04:05:39.671 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:39.672 DEBUG [tests.relay.test_subscribe] Running test with payload /test/2/rs/0/1
2025-02-16 04:05:39.673 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:1134/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/test/2/rs/0/1"'
2025-02-16 04:05:39.675 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:1134/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data: '
2025-02-16 04:05:39.676 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/3/rs/0/1
2025-02-16 04:05:39.676 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:1134/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/3/rs/0/1"'
2025-02-16 04:05:39.678 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:1134/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data: '
2025-02-16 04:05:39.679 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/test/0/1
2025-02-16 04:05:39.679 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:1134/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/test/0/1"'
2025-02-16 04:05:39.682 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:1134/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data: '
2025-02-16 04:05:39.682 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/rs/3/b
2025-02-16 04:05:39.683 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:1134/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/rs/3/b"'
2025-02-16 04:05:39.685 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:1134/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data: '
2025-02-16 04:05:39.685 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/rs/0
2025-02-16 04:05:39.686 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:1134/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/rs/0"'
2025-02-16 04:05:39.688 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:1134/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data: '
2025-02-16 04:05:39.690 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:05:39.691 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:05:39.691 DEBUG [src.node.waku_node] Stopping container with id 2c521658cdb7
2025-02-16 04:05:40.519 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:05:40.519 DEBUG [src.node.waku_node] Stopping container with id 1ea47f1f6c08
2025-02-16 04:05:41.331 ERROR [src.node.docker_mananger] Max retries reached for container 2c521658cdb7. Exiting log stream.
2025-02-16 04:05:41.587 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:05:41.588 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:05:41.593 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:05:41.598 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
