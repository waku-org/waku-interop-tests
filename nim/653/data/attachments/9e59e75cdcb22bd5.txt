2025-02-16 04:05:35.227 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:05:35.228 DEBUG [tests.conftest] Running test: test_publish_on_multiple_pubsub_topics_and_only_after_fetch_them with id: 2025-02-16_04-05-35__c187f6c7-fb12-4f21-94f7-8ae2ed06ea63
2025-02-16 04:05:35.228 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:05:35.228 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-16 04:05:35.228 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-16 04:05:35.235 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:05:35.235 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-16_04-05-35__c187f6c7-fb12-4f21-94f7-8ae2ed06ea63__wakuorg_nwaku:latest.log
2025-02-16 04:05:35.235 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:05:35.236 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:05:35.237 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:05:35.237 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.255.167
2025-02-16 04:05:35.237 DEBUG [src.node.docker_mananger] Generated ports ['19849', '19850', '19851', '19852', '19853']
2025-02-16 04:05:35.237 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:05:35.237 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:05:35.238 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:05:35.238 DEBUG [src.node.docker_mananger] docker run -i -t -p 19849:19849 -p 19850:19850 -p 19851:19851 -p 19852:19852 -p 19853:19853 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19851 --rest-port=19849 --tcp-port=19850 --discv5-udp-port=19852 --rest-address=0.0.0.0 --nat=extip:172.18.255.167 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=537fe2ab3e9bf85b96f74fcbb9ff1beeabdd5f9df1db2ed16b0a8cf270dfea6b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19853 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
2025-02-16 04:05:35.479 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.255.167 waku 2c63b726d45b900990f702bb59bd3da5182ed47fa7d7385d8cb4cb5aefe6df6a
2025-02-16 04:05:35.527 DEBUG [src.node.docker_mananger] Container started with ID 2c63b726d45b. Setting up logs at ./log/docker/node1_2025-02-16_04-05-35__c187f6c7-fb12-4f21-94f7-8ae2ed06ea63__wakuorg_nwaku:latest.log
2025-02-16 04:05:35.530 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 19849
2025-02-16 04:05:35.530 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:05:36.026 ERROR [src.node.docker_mananger] Max retries reached for container 1daf22dca9be. Exiting log stream.
2025-02-16 04:05:36.531 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19849/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:36.533 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:05:36.534 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:05:36.534 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19849/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:36.536 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.255.167/tcp/19850/p2p/16Uiu2HAkvwj81GJy9dxDnfmHZGEu7ieAE32JZpQq9XdpmrioUS4a","/ip4/172.18.255.167/tcp/19851/ws/p2p/16Uiu2HAkvwj81GJy9dxDnfmHZGEu7ieAE32JZpQq9XdpmrioUS4a"],"enrUri":"enr:-L24QJnsCfQSy3u-KIm9RBJUj_8G16A8_UI8IOE7xn5sKONyMX3KSHS7JxBBzdReUBejnbDJZG57S_VpFWckmhtieT0CgmlkgnY0gmlwhKwS_6eKbXVsdGlhZGRyc5YACASsEv-nBk2KAAoErBL_pwZNi90DgnJzhQACAQAAiXNlY3AyNTZrMaECFo6p1HyLZETAlMGUt596N3_gmzRBPgYI03uchR5fSkuDdGNwgk2Kg3VkcIJNjIV3YWt1MgU"}'
2025-02-16 04:05:36.536 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:05:36.543 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:05:36.544 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-16_04-05-35__c187f6c7-fb12-4f21-94f7-8ae2ed06ea63__wakuorg_nwaku:latest.log
2025-02-16 04:05:36.544 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:05:36.544 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:05:36.545 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:05:36.545 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.184.224
2025-02-16 04:05:36.545 DEBUG [src.node.docker_mananger] Generated ports ['15583', '15584', '15585', '15586', '15587']
2025-02-16 04:05:36.546 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:05:36.546 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:05:36.546 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:05:36.546 DEBUG [src.node.docker_mananger] docker run -i -t -p 15583:15583 -p 15584:15584 -p 15585:15585 -p 15586:15586 -p 15587:15587 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15585 --rest-port=15583 --tcp-port=15584 --discv5-udp-port=15586 --rest-address=0.0.0.0 --nat=extip:172.18.184.224 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=017f1b73ecf91813fcfd6ceac0cbadb44feae4ecd28b66bdd1e47e0beddddcc4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15587 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QJnsCfQSy3u-KIm9RBJUj_8G16A8_UI8IOE7xn5sKONyMX3KSHS7JxBBzdReUBejnbDJZG57S_VpFWckmhtieT0CgmlkgnY0gmlwhKwS_6eKbXVsdGlhZGRyc5YACASsEv-nBk2KAAoErBL_pwZNi90DgnJzhQACAQAAiXNlY3AyNTZrMaECFo6p1HyLZETAlMGUt596N3_gmzRBPgYI03uchR5fSkuDdGNwgk2Kg3VkcIJNjIV3YWt1MgU --pubsub-topic=/waku/2/rs/2/0
2025-02-16 04:05:36.786 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.184.224 waku 9ed89560db934ea4417d7e08d37b5f5ebcb0ad0c80349d0e83c6eb0afe012b6e
2025-02-16 04:05:36.834 DEBUG [src.node.docker_mananger] Container started with ID 9ed89560db93. Setting up logs at ./log/docker/node2_2025-02-16_04-05-35__c187f6c7-fb12-4f21-94f7-8ae2ed06ea63__wakuorg_nwaku:latest.log
2025-02-16 04:05:36.834 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15583
2025-02-16 04:05:36.834 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:05:37.835 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15583/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:37.845 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:05:37.845 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:05:37.846 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15583/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:37.852 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.184.224/tcp/15584/p2p/16Uiu2HAmCtZboxLSMeo9fG5kT4sMn4LYN8VjzNndw4HCD2fQirvv","/ip4/172.18.184.224/tcp/15585/ws/p2p/16Uiu2HAmCtZboxLSMeo9fG5kT4sMn4LYN8VjzNndw4HCD2fQirvv"],"enrUri":"enr:-L24QI2aWOVHngp5xYD0GzMlbuJv8IYZAO0T28zbebbLEguLIM6xOnsM5p_Z-uZ5j0XdQJ-Mkl-H-hAvtDMIRxikdhcCgmlkgnY0gmlwhKwSuOCKbXVsdGlhZGRyc5YACASsErjgBjzgAAoErBK44AY84d0DgnJzhQACAQAAiXNlY3AyNTZrMaEDA3ollX5gZ50krtBXeANa6W-2oWESDjj4gUjSeXRJTfODdGNwgjzgg3VkcII84oV3YWt1MgE"}'
2025-02-16 04:05:37.853 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:05:37.854 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15583/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.255.167/tcp/19850/p2p/16Uiu2HAkvwj81GJy9dxDnfmHZGEu7ieAE32JZpQq9XdpmrioUS4a"]'
2025-02-16 04:05:37.858 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:37.859 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19849/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0", "/waku/2/rs/2/1", "/waku/2/rs/2/2", "/waku/2/rs/2/3", "/waku/2/rs/2/4", "/waku/2/rs/2/5", "/waku/2/rs/2/6", "/waku/2/rs/2/7"]'
2025-02-16 04:05:37.869 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:37.870 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15583/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0", "/waku/2/rs/2/1", "/waku/2/rs/2/2", "/waku/2/rs/2/3", "/waku/2/rs/2/4", "/waku/2/rs/2/5", "/waku/2/rs/2/6", "/waku/2/rs/2/7"]'
2025-02-16 04:05:37.890 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:37.893 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19849/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzA=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:37.904 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:37.905 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19849/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzE=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:37.911 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:37.912 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19849/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzI=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:37.916 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:37.917 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19849/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F3" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzM=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:37.923 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:37.923 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19849/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F4" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzQ=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:37.929 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:37.930 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19849/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F5" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzU=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:37.936 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:37.936 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19849/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F6" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzY=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:37.942 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:37.943 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19849/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F7" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzc=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 04:05:37.948 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:05:37.949 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-16 04:05:38.049 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15583/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:38.052 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzA=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739678737893330688,"ephemeral":false,"proof":""}]'
2025-02-16 04:05:38.053 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15583/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:38.055 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzE=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739678737905159680,"ephemeral":false,"proof":""}]'
2025-02-16 04:05:38.055 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15583/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:38.057 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzI=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739678737912092416,"ephemeral":false,"proof":""}]'
2025-02-16 04:05:38.058 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15583/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F3" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:38.060 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzM=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739678737917391104,"ephemeral":false,"proof":""}]'
2025-02-16 04:05:38.060 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15583/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F4" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:38.062 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzQ=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739678737923659776,"ephemeral":false,"proof":""}]'
2025-02-16 04:05:38.063 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15583/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F5" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:38.065 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzU=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739678737930337280,"ephemeral":false,"proof":""}]'
2025-02-16 04:05:38.065 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15583/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F6" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:38.067 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzY=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739678737936599040,"ephemeral":false,"proof":""}]'
2025-02-16 04:05:38.067 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15583/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F7" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:05:38.069 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzc=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739678737943724032,"ephemeral":false,"proof":""}]'
2025-02-16 04:05:38.071 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:05:38.072 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:05:38.072 DEBUG [src.node.waku_node] Stopping container with id 2c63b726d45b
2025-02-16 04:05:39.150 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:05:39.151 DEBUG [src.node.waku_node] Stopping container with id 9ed89560db93
2025-02-16 04:05:39.963 ERROR [src.node.docker_mananger] Max retries reached for container 2c63b726d45b. Exiting log stream.
2025-02-16 04:05:40.681 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:05:40.682 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:05:40.692 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:05:40.701 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
