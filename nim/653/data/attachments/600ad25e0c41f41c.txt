2025-02-16 04:04:19.110 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 04:04:19.110 DEBUG [tests.conftest] Running test: test_filter_ping_on_subscribed_peer with id: 2025-02-16_04-04-19__be2722e1-53c7-439f-bcb2-d3986b8a225a
2025-02-16 04:04:19.111 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 04:04:19.111 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-16 04:04:19.111 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-16 04:04:19.117 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:04:19.118 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-16_04-04-19__be2722e1-53c7-439f-bcb2-d3986b8a225a__wakuorg_nwaku:latest.log
2025-02-16 04:04:19.118 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:04:19.118 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:04:19.119 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:04:19.119 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.255.187
2025-02-16 04:04:19.119 DEBUG [src.node.docker_mananger] Generated ports ['4838', '4839', '4840', '4841', '4842']
2025-02-16 04:04:19.120 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:04:19.120 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:04:19.120 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:04:19.120 DEBUG [src.node.docker_mananger] docker run -i -t -p 4838:4838 -p 4839:4839 -p 4840:4840 -p 4841:4841 -p 4842:4842 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4840 --rest-port=4838 --tcp-port=4839 --discv5-udp-port=4841 --rest-address=0.0.0.0 --nat=extip:172.18.255.187 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dbd58a75ab72b2c32d454e7d9c7d7cde3dfe2c637d9063bdac1ec891eda8cbb9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4842 --metrics-logging=true --relay=true --filter=true
2025-02-16 04:04:19.351 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.255.187 waku a5ccc549a70765ab4c6bb9db9a4827b24af3901c5659954d79db1925f2fe7a1e
2025-02-16 04:04:19.406 DEBUG [src.node.docker_mananger] Container started with ID a5ccc549a707. Setting up logs at ./log/docker/node1_2025-02-16_04-04-19__be2722e1-53c7-439f-bcb2-d3986b8a225a__wakuorg_nwaku:latest.log
2025-02-16 04:04:19.406 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 4838
2025-02-16 04:04:19.406 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:04:19.883 ERROR [src.node.docker_mananger] Max retries reached for container 8770121356be. Exiting log stream.
2025-02-16 04:04:20.408 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4838/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:20.411 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:04:20.411 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:04:20.412 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4838/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:20.414 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.255.187/tcp/4839/p2p/16Uiu2HAmJy6LqtJgk7oF1HwuWdbqHaPXuAJK7ekEpQEDCKWdbx1P","/ip4/172.18.255.187/tcp/4840/ws/p2p/16Uiu2HAmJy6LqtJgk7oF1HwuWdbqHaPXuAJK7ekEpQEDCKWdbx1P"],"enrUri":"enr:-L24QCV6H-XbgfV2Ok8Kaak6HSduyGooQNdL0DgDkLC9fBZBbW11-zmxhRL1Dt_IbO2WAOslIVSOuf_Yw3tztrdx_DcCgmlkgnY0gmlwhKwS_7uKbXVsdGlhZGRyc5YACASsEv-7BhLnAAoErBL_uwYS6N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDXclaBVgBdsXtBoBHZVVrxfFkqZu_1sh1iKqFsGepO4KDdGNwghLng3VkcIIS6YV3YWt1MgU"}'
2025-02-16 04:04:20.414 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:04:20.414 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-16 04:04:20.421 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 04:04:20.421 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-16_04-04-19__be2722e1-53c7-439f-bcb2-d3986b8a225a__wakuorg_nwaku:latest.log
2025-02-16 04:04:20.421 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 04:04:20.421 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 04:04:20.422 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 04:04:20.423 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.130.105
2025-02-16 04:04:20.423 DEBUG [src.node.docker_mananger] Generated ports ['45752', '45753', '45754', '45755', '45756']
2025-02-16 04:04:20.423 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 04:04:20.423 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 04:04:20.423 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 04:04:20.423 DEBUG [src.node.docker_mananger] docker run -i -t -p 45752:45752 -p 45753:45753 -p 45754:45754 -p 45755:45755 -p 45756:45756 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45754 --rest-port=45752 --tcp-port=45753 --discv5-udp-port=45755 --rest-address=0.0.0.0 --nat=extip:172.18.130.105 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=da1ebe4f0d9b3c0b56efc437aabb07acfeabd9abb84d56525df0a8e352364b3c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45756 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QCV6H-XbgfV2Ok8Kaak6HSduyGooQNdL0DgDkLC9fBZBbW11-zmxhRL1Dt_IbO2WAOslIVSOuf_Yw3tztrdx_DcCgmlkgnY0gmlwhKwS_7uKbXVsdGlhZGRyc5YACASsEv-7BhLnAAoErBL_uwYS6N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDXclaBVgBdsXtBoBHZVVrxfFkqZu_1sh1iKqFsGepO4KDdGNwghLng3VkcIIS6YV3YWt1MgU --filternode=/ip4/172.18.255.187/tcp/4839/p2p/16Uiu2HAmJy6LqtJgk7oF1HwuWdbqHaPXuAJK7ekEpQEDCKWdbx1P
2025-02-16 04:04:20.645 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.130.105 waku 3609779b2e28b2ac4f927b133e64e8b8bab0eea6f0d96db788ae323a29f322bb
2025-02-16 04:04:20.689 DEBUG [src.node.docker_mananger] Container started with ID 3609779b2e28. Setting up logs at ./log/docker/node2_2025-02-16_04-04-19__be2722e1-53c7-439f-bcb2-d3986b8a225a__wakuorg_nwaku:latest.log
2025-02-16 04:04:20.689 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45752
2025-02-16 04:04:20.690 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 04:04:21.690 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45752/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:21.693 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 04:04:21.693 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 04:04:21.693 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45752/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:21.696 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.130.105/tcp/45753/p2p/16Uiu2HAmLpeEuSg28vC4qnrYPedgRyYU77RmcD51aWmNMzDdVsvm","/ip4/172.18.130.105/tcp/45754/ws/p2p/16Uiu2HAmLpeEuSg28vC4qnrYPedgRyYU77RmcD51aWmNMzDdVsvm"],"enrUri":"enr:-L24QMT_Wlz0Hl9aSlyvcopKXDwrgI99GQOIwww1_YQrOrVNI8-qb2mPbFUl5QdvxEb7EwdicItb7Gu9qlyKXTWf1pgCgmlkgnY0gmlwhKwSgmmKbXVsdGlhZGRyc5YACASsEoJpBrK5AAoErBKCaQayut0DgnJzhQADAQAAiXNlY3AyNTZrMaEDeVaQoQXfX-xU1lEzzUVqKEL9E_QRTvSvMRuRcyADkpaDdGNwgrK5g3VkcIKyu4V3YWt1MgA"}'
2025-02-16 04:04:21.696 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 04:04:21.696 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45752/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.255.187/tcp/4839/p2p/16Uiu2HAmJy6LqtJgk7oF1HwuWdbqHaPXuAJK7ekEpQEDCKWdbx1P"]'
2025-02-16 04:04:21.732 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:21.733 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-16 04:04:21.733 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4838/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 04:04:21.755 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 04:04:21.757 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45752/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "626ad2fc-1295-4535-8831-1ca93889e2e3", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-16 04:04:21.769 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"626ad2fc-1295-4535-8831-1ca93889e2e3","statusDesc":"OK"}'
2025-02-16 04:04:21.770 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45752/filter/v2/subscriptions/c55c32a7-b1f6-4c8e-b315-efc895c6753c" -H "Content-Type: application/json" -d 'None'
2025-02-16 04:04:21.777 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"c55c32a7-b1f6-4c8e-b315-efc895c6753c","statusDesc":"OK"}'
2025-02-16 04:04:21.779 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 04:04:21.780 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 04:04:21.780 DEBUG [src.node.waku_node] Stopping container with id a5ccc549a707
2025-02-16 04:04:22.873 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:04:22.874 DEBUG [src.node.waku_node] Stopping container with id 3609779b2e28
2025-02-16 04:04:23.687 ERROR [src.node.docker_mananger] Max retries reached for container a5ccc549a707. Exiting log stream.
2025-02-16 04:04:24.380 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 04:04:24.381 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 04:04:24.386 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 04:04:24.391 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
