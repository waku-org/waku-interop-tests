{"uid":"2350f9218fa65053","name":"test_metrics_after_relay_publish","fullName":"tests.metrics.test_metrics.TestMetrics#test_metrics_after_relay_publish","historyId":"3cfc90d3bb649759bb636ccc254f23e5","time":{"start":1739678683275,"stop":1739678688837,"duration":5562},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1739678633193,"stop":1739678633193,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors","time":{"start":1739678680545,"stop":1739678680545,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1739678680545,"stop":1739678680545,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1739678680546,"stop":1739678680546,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1739678680546,"stop":1739678680546,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1739678680546,"stop":1739678680546,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1739678680546,"stop":1739678680546,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"filter_setup","time":{"start":1739678680546,"stop":1739678680547,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"light_push_setup","time":{"start":1739678680547,"stop":1739678680547,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_relay_nodes","time":{"start":1739678680547,"stop":1739678683148,"duration":2601},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1739678683144,"stop":1739678683148,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.metrics.test_metrics.TestMetrics object at 0x7f66c1ee35c0>, <src.node.waku_node.WakuNode object at 0x7f66c1ec3a70>, ['/ip4/172.18.190.98/tcp/61494/p2p/16Uiu2HAmCYQFjyjesxUWBtVABDn5i6suQ2BnkidJ3nHDxuAsQZfo'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"relay_setup","time":{"start":1739678680547,"stop":1739678680547,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"store_setup","time":{"start":1739678680547,"stop":1739678680547,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"subscribe_main_relay_nodes","time":{"start":1739678683148,"stop":1739678683160,"duration":12},"status":"passed","steps":[{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1739678683148,"stop":1739678683160,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7f66c09a1550>, <src.node.waku_node.WakuNode object at 0x7f66c1ec3a70>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"relay_warm_up","time":{"start":1739678683160,"stop":1739678683274,"duration":114},"status":"passed","steps":[{"name":"wait_for_published_message_to_reach_relay_peer","time":{"start":1739678683160,"stop":1739678683274,"duration":114},"status":"passed","steps":[{"name":"check_published_message_reaches_relay_peer","time":{"start":1739678683160,"stop":1739678683274,"duration":114},"status":"passed","steps":[{"name":"assert_received_message","time":{"start":1739678683270,"stop":1739678683270,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1739678683159957760}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1739678683274,"stop":1739678683274,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1739678683159957760}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1739678683159957760}"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"timeout_duration","value":"120"},{"name":"time_between_retries","value":"1"},{"name":"pubsub_topic","value":"None"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"status":"passed","steps":[{"name":"create_message","time":{"start":1739678683275,"stop":1739678683275,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_metric","time":{"start":1739678688784,"stop":1739678688788,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f66c09a1550>"},{"name":"metric_name","value":"'libp2p_peers'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1739678688788,"stop":1739678688791,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f66c09a1550>"},{"name":"metric_name","value":"'libp2p_pubsub_peers'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1739678688791,"stop":1739678688795,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f66c09a1550>"},{"name":"metric_name","value":"'libp2p_pubsub_topics'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1739678688795,"stop":1739678688798,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f66c09a1550>"},{"name":"metric_name","value":"'libp2p_pubsub_subscriptions_total'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1739678688798,"stop":1739678688801,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f66c09a1550>"},{"name":"metric_name","value":"'libp2p_gossipsub_peers_per_topic_mesh{topic=\"other\"}'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1739678688802,"stop":1739678688804,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f66c09a1550>"},{"name":"metric_name","value":"'waku_peer_store_size'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1739678688805,"stop":1739678688808,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f66c09a1550>"},{"name":"metric_name","value":"'waku_histogram_message_size_count'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1739678688808,"stop":1739678688811,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f66c09a1550>"},{"name":"metric_name","value":"'waku_node_messages_total{type=\"relay\"}'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1739678688811,"stop":1739678688814,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f66c1ec3a70>"},{"name":"metric_name","value":"'libp2p_peers'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1739678688814,"stop":1739678688818,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f66c1ec3a70>"},{"name":"metric_name","value":"'libp2p_pubsub_peers'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1739678688818,"stop":1739678688821,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f66c1ec3a70>"},{"name":"metric_name","value":"'libp2p_pubsub_topics'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1739678688821,"stop":1739678688824,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f66c1ec3a70>"},{"name":"metric_name","value":"'libp2p_pubsub_subscriptions_total'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1739678688824,"stop":1739678688827,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f66c1ec3a70>"},{"name":"metric_name","value":"'libp2p_gossipsub_peers_per_topic_mesh{topic=\"other\"}'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1739678688827,"stop":1739678688830,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f66c1ec3a70>"},{"name":"metric_name","value":"'waku_peer_store_size'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1739678688830,"stop":1739678688833,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f66c1ec3a70>"},{"name":"metric_name","value":"'waku_histogram_message_size_count'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_metric","time":{"start":1739678688833,"stop":1739678688836,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f66c1ec3a70>"},{"name":"metric_name","value":"'waku_node_messages_total{type=\"relay\"}'"},{"name":"expected_value","value":"1"},{"name":"exact","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"78df9d6f77d28540","name":"log","source":"78df9d6f77d28540.txt","type":"text/plain","size":16705},{"uid":"8dc5e1048c583fc7","name":"stderr","source":"8dc5e1048c583fc7.txt","type":"text/plain","size":16360}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":17,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1739678688839,"stop":1739678688839,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1739678688839,"stop":1739678691836,"duration":2997},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors::0","time":{"start":1739678691837,"stop":1739678691850,"duration":13},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1739678691851,"stop":1739678691851,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1739678769307,"stop":1739678769307,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')"},{"name":"parentSuite","value":"tests.metrics"},{"name":"suite","value":"test_metrics"},{"name":"subSuite","value":"TestMetrics"},{"name":"host","value":"fv-az1914-423"},{"name":"thread","value":"1998-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.metrics.test_metrics"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":0,"passed":18,"unknown":0,"total":18},"items":[{"uid":"fcde7941a91f3e4e","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/652//#testresult/fcde7941a91f3e4e","status":"passed","time":{"start":1739592189535,"stop":1739592195098,"duration":5563}},{"uid":"7770b9c3cef70461","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/651//#testresult/7770b9c3cef70461","status":"passed","time":{"start":1739505792815,"stop":1739505798376,"duration":5561}},{"uid":"24f407d07f60837b","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/650//#testresult/24f407d07f60837b","status":"passed","time":{"start":1739419394998,"stop":1739419400559,"duration":5561}},{"uid":"5280379459f0d595","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/649//#testresult/5280379459f0d595","status":"passed","time":{"start":1739332996334,"stop":1739333001897,"duration":5563}},{"uid":"cab50d71c2f59504","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/648//#testresult/cab50d71c2f59504","status":"passed","time":{"start":1739286283268,"stop":1739286288832,"duration":5564}},{"uid":"a0e94a21ad3f7626","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/647//#testresult/a0e94a21ad3f7626","status":"passed","time":{"start":1739246637915,"stop":1739246643477,"duration":5562}},{"uid":"c36c5ed8f0041d7","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/646//#testresult/c36c5ed8f0041d7","status":"passed","time":{"start":1739160194631,"stop":1739160200196,"duration":5565}},{"uid":"986e5c0d83d59d48","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/645//#testresult/986e5c0d83d59d48","status":"passed","time":{"start":1739073825685,"stop":1739073831249,"duration":5564}},{"uid":"7de4d5fd894196b3","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/644//#testresult/7de4d5fd894196b3","status":"passed","time":{"start":1738987429502,"stop":1738987435073,"duration":5571}},{"uid":"6baa9a9a62f320dd","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/643//#testresult/6baa9a9a62f320dd","status":"passed","time":{"start":1738900996855,"stop":1738901002418,"duration":5563}},{"uid":"bba8fedc24b04757","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/642//#testresult/bba8fedc24b04757","status":"passed","time":{"start":1738814598414,"stop":1738814603976,"duration":5562}},{"uid":"8ec2a3710936314a","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/641//#testresult/8ec2a3710936314a","status":"passed","time":{"start":1738728233878,"stop":1738728239443,"duration":5565}},{"uid":"d0aa7304222dcd1d","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/640//#testresult/d0aa7304222dcd1d","status":"passed","time":{"start":1738688953824,"stop":1738688959387,"duration":5563}},{"uid":"d8d74c1236e8519","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/639//#testresult/d8d74c1236e8519","status":"passed","time":{"start":1738641788637,"stop":1738641794200,"duration":5563}},{"uid":"269fd248f0329432","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/638//#testresult/269fd248f0329432","status":"passed","time":{"start":1738555398776,"stop":1738555404341,"duration":5565}},{"uid":"7f1a30533b0ba494","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/637//#testresult/7f1a30533b0ba494","status":"passed","time":{"start":1738468983458,"stop":1738468989020,"duration":5562}},{"uid":"9612ed5688dceaf5","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/636//#testresult/9612ed5688dceaf5","status":"passed","time":{"start":1738382593698,"stop":1738382599262,"duration":5564}}]},"tags":["@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')"]},"source":"2350f9218fa65053.json","parameterValues":[]}