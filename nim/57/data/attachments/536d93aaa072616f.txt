[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_filter_get_message_with_ephemeral with id: 2024-02-09_04-10-10__5122f6e2-4f07-4be3-91dc-6268013f8bae
[35mDEBUG   [0m src.steps.filter:filter.py:27 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:33 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:21 WakuNode instance initialized with log path ./log/docker/node1_2024-02-09_04-10-10__5122f6e2-4f07-4be3-91dc-6268013f8bae__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:25 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated random external IP 172.18.119.121
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:66 Generated ports ['54741', '54742', '54743', '54744', '54745']
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:42 Starting container with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:43 Using args ['--listen-address=0.0.0.0', '--rest=true', '--rest-admin=true', '--websocket-support=true', '--log-level=TRACE', '--rest-relay-cache-capacity=100', '--websocket-port=54743', '--rest-port=54741', '--tcp-port=54742', '--discv5-udp-port=54744', '--rest-address=0.0.0.0', '--nat=extip:172.18.119.121', '--peer-exchange=true', '--discv5-discovery=true', '--cluster-id=0', '--metrics-server=true', '--metrics-server-address=0.0.0.0', '--metrics-server-port=54745', '--metrics-logging=true', '--relay=true', '--filter=true', '--nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68']
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 Container started with ID c0c31d929b80. Setting up logs at ./log/docker/node1_2024-02-09_04-10-10__5122f6e2-4f07-4be3-91dc-6268013f8bae__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:78 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 54741
[35mDEBUG   [0m src.libs.common:common.py:33 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:11 GET call: http://127.0.0.1:54741/debug/v1/info with payload: None
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.119.121/tcp/54742/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.119.121/tcp/54743/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-Kq4QHSwOh-J3mhr-DdwTTdtqhN6SbwdttFTt69DOIrEm-trDRYfnfYi6n1gsTaRX6k0qk8ZtkxxoKu4maiXXFa0x2kBgmlkgnY0gmlwhKwSd3mKbXVsdGlhZGRyc4wACgSsEnd5BtXX3QOJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CC1daDdWRwgtXYhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:113 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:38 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:21 WakuNode instance initialized with log path ./log/docker/node2_2024-02-09_04-10-10__5122f6e2-4f07-4be3-91dc-6268013f8bae__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:25 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated random external IP 172.18.241.50
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:66 Generated ports ['1924', '1925', '1926', '1927', '1928']
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:42 Starting container with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:43 Using args ['--listen-address=0.0.0.0', '--rest=true', '--rest-admin=true', '--websocket-support=true', '--log-level=TRACE', '--rest-relay-cache-capacity=100', '--websocket-port=1926', '--rest-port=1924', '--tcp-port=1925', '--discv5-udp-port=1927', '--rest-address=0.0.0.0', '--nat=extip:172.18.241.50', '--peer-exchange=true', '--discv5-discovery=true', '--cluster-id=0', '--metrics-server=true', '--metrics-server-address=0.0.0.0', '--metrics-server-port=1928', '--metrics-logging=true', '--relay=false', '--filter=true', '--discv5-bootstrap-node=enr:-Kq4QHSwOh-J3mhr-DdwTTdtqhN6SbwdttFTt69DOIrEm-trDRYfnfYi6n1gsTaRX6k0qk8ZtkxxoKu4maiXXFa0x2kBgmlkgnY0gmlwhKwSd3mKbXVsdGlhZGRyc4wACgSsEnd5BtXX3QOJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CC1daDdWRwgtXYhXdha3UyBQ', '--filternode=/ip4/172.18.119.121/tcp/54742/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip']
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 Container started with ID d0877c41bde9. Setting up logs at ./log/docker/node2_2024-02-09_04-10-10__5122f6e2-4f07-4be3-91dc-6268013f8bae__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:78 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 1924
[35mDEBUG   [0m src.libs.common:common.py:33 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:11 GET call: http://127.0.0.1:1924/debug/v1/info with payload: None
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.241.50/tcp/1925/p2p/16Uiu2HAmTdQyKUep5677k7nEWFUMzBjTiA3AhPrXu6e4gJ5xhKGM","/ip4/172.18.241.50/tcp/1926/ws/p2p/16Uiu2HAmTdQyKUep5677k7nEWFUMzBjTiA3AhPrXu6e4gJ5xhKGM"],"enrUri":"enr:-Kq4QEj9Zn7NMtKT7SWSN0C0CCUzP-HN6t1CCaAMsnqhcSFNb_NMt0pTBqeQmb6a8_eMpAhHfaqGkqK6jIAIPEYsw2YBgmlkgnY0gmlwhKwS8TKKbXVsdGlhZGRyc4wACgSsEvEyBgeG3QOJc2VjcDI1NmsxoQPed_tHLjn-cg459y2ND6-ayZIlUBvhn4x7xsNk1o5n8oN0Y3CCB4WDdWRwggeHhXdha3UyBA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:113 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:45 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:11 POST call: http://127.0.0.1:54741/relay/v1/subscriptions with payload: ["/waku/2/rs/0/1"]
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:11 POST call: http://127.0.0.1:1924/filter/v2/subscriptions with payload: {"requestId": "8246bcd0-b541-4dc6-b78f-44bb4aeeb062", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/0/1"}
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"8246bcd0-b541-4dc6-b78f-44bb4aeeb062","statusCode":0,"statusDesc":""}'
[35mDEBUG   [0m tests.filter.test_get_messages:test_get_messages.py:50 Running test with Ephemeral True
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:11 POST call: http://127.0.0.1:54741/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1 with payload: {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1707451813921875456, "ephemeral": true}
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:54741/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[1m[31mERROR   [0m tests.filter.test_get_messages:test_get_messages.py:54 Massage with Ephemeral True failed: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:54741/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1 with response: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.filter.test_get_messages:test_get_messages.py:50 Running test with Ephemeral False
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:11 POST call: http://127.0.0.1:54741/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1 with payload: {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1707451813928710400, "ephemeral": false}
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:54741/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[1m[31mERROR   [0m tests.filter.test_get_messages:test_get_messages.py:54 Massage with Ephemeral False failed: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:54741/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1 with response: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:90 Stopping container with id c0c31d929b80
[35mDEBUG   [0m src.node.waku_node:waku_node.py:93 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:90 Stopping container with id d0877c41bde9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:93 Container stopped.