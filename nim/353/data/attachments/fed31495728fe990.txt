[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_multiple_lightpush_nodes with id: 2024-09-10_13-42-36__3e8f91d7-709c-406b-99fd-7f3690ccd814
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-10_13-42-36__3e8f91d7-709c-406b-99fd-7f3690ccd814__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.9.8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['62973', '62974', '62975', '62976', '62977']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 62973:62973 -p 62974:62974 -p 62975:62975 -p 62976:62976 -p 62977:62977 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62975 --rest-port=62973 --tcp-port=62974 --discv5-udp-port=62976 --rest-address=0.0.0.0 --nat=extip:172.18.9.8 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dfb3a8aa0cf6dd3aeffaec30e0f38c1d5a3d733eeffb1a3619b701c617d1921c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62977 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.9.8 waku 777f753f56fdfbd5f1576dfaa481156d1cb8946bc689d3757851dbe864d9e595
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 777f753f56fd. Setting up logs at ./log/docker/receiving_node1_2024-09-10_13-42-36__3e8f91d7-709c-406b-99fd-7f3690ccd814__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 62973
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62973/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62973/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.8/tcp/62974/p2p/16Uiu2HAmGrMWs9JxDihsErSLPmjpDGjfSZmeHLzvZogSMhUUwaye","/ip4/172.18.9.8/tcp/62975/ws/p2p/16Uiu2HAmGrMWs9JxDihsErSLPmjpDGjfSZmeHLzvZogSMhUUwaye"],"enrUri":"enr:-LO4QHUPqRpdofum9ULxBpxsTmZLjCbDOIe6BM6iF7mh_ua4SLCnRBUkNL80SFHiyjQ41QmaIstFbFO09gszOUzzwmoBgmlkgnY0gmlwhKwSCQiKbXVsdGlhZGRyc4wACgSsEgkIBvX_3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM-WBFr-icIF57DPVMqiry4LpEoleFZ-Wao8i9L2GoueYN0Y3CC9f6DdWRwgvYAhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-10_13-42-36__3e8f91d7-709c-406b-99fd-7f3690ccd814__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.241.168
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['64121', '64122', '64123', '64124', '64125']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 64121:64121 -p 64122:64122 -p 64123:64123 -p 64124:64124 -p 64125:64125 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64123 --rest-port=64121 --tcp-port=64122 --discv5-udp-port=64124 --rest-address=0.0.0.0 --nat=extip:172.18.241.168 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=efee1a783ecfdf8dec52b9ea654f37afefe5be0d2f6ca2f500f0f5aa8d8c3813 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64125 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.241.168 waku 1c88f874ac6a407c86938d5edad1596da97fa205c4f7f01364fdd5c9b7da1d33
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 1c88f874ac6a. Setting up logs at ./log/docker/receiving_node2_2024-09-10_13-42-36__3e8f91d7-709c-406b-99fd-7f3690ccd814__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 64121
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64121/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64121/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.241.168/tcp/64122/p2p/16Uiu2HAmSCmij92vEJrwcZK1tzq8Wb8db6siMaVKnWoqRAHseFjL","/ip4/172.18.241.168/tcp/64123/ws/p2p/16Uiu2HAmSCmij92vEJrwcZK1tzq8Wb8db6siMaVKnWoqRAHseFjL"],"enrUri":"enr:-LO4QI-yPgx4TXO7Y-uB2pmQJtT3d7p8-H8p_Z4fzymh3hstDGTVsnIfhEuGlTxNX-IV7w0XIyasTTP6s9W0o_il8ycBgmlkgnY0gmlwhKwS8aiKbXVsdGlhZGRyc4wACgSsEvGoBvp73QOCcnOFAAMBAACJc2VjcDI1NmsxoQPJTDwVxL029HstpWvJwYxSfF5gnejGlZTTlxCN4mj8t4N0Y3CC-nqDdWRwgvp8hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64121/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.9.8/tcp/62974/p2p/16Uiu2HAmGrMWs9JxDihsErSLPmjpDGjfSZmeHLzvZogSMhUUwaye"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-10_13-42-36__3e8f91d7-709c-406b-99fd-7f3690ccd814__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.148.37
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['20456', '20457', '20458', '20459', '20460']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 20456:20456 -p 20457:20457 -p 20458:20458 -p 20459:20459 -p 20460:20460 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20458 --rest-port=20456 --tcp-port=20457 --discv5-udp-port=20459 --rest-address=0.0.0.0 --nat=extip:172.18.148.37 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ff7cdb8aafab7293edbcec58fa405b51ddfa441e9dafdd653dfa39ecfbfc16ed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20460 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QHUPqRpdofum9ULxBpxsTmZLjCbDOIe6BM6iF7mh_ua4SLCnRBUkNL80SFHiyjQ41QmaIstFbFO09gszOUzzwmoBgmlkgnY0gmlwhKwSCQiKbXVsdGlhZGRyc4wACgSsEgkIBvX_3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM-WBFr-icIF57DPVMqiry4LpEoleFZ-Wao8i9L2GoueYN0Y3CC9f6DdWRwgvYAhXdha3UyCQ --lightpushnode=/ip4/172.18.9.8/tcp/62974/p2p/16Uiu2HAmGrMWs9JxDihsErSLPmjpDGjfSZmeHLzvZogSMhUUwaye --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.148.37 waku cec734a50c13ac850e98145ce53ca6f6bba3c242c3ed68c9a6e2c12e77e3463e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID cec734a50c13. Setting up logs at ./log/docker/lightpush_node1_2024-09-10_13-42-36__3e8f91d7-709c-406b-99fd-7f3690ccd814__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 20456
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20456/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20456/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.148.37/tcp/20457/p2p/16Uiu2HAkzYPJ42Xbfxhge5f159V7UFNYy1gmnvW4JSeupB11Vj1d","/ip4/172.18.148.37/tcp/20458/ws/p2p/16Uiu2HAkzYPJ42Xbfxhge5f159V7UFNYy1gmnvW4JSeupB11Vj1d"],"enrUri":"enr:-LO4QBRvLoZy7KdACbbedyk6063mnhZffKartvKng1nZrL05L9VWiCrA4n01k4biW9zBP5ZeEzJ8U12nFO-Ig_FYu1MBgmlkgnY0gmlwhKwSlCWKbXVsdGlhZGRyc4wACgSsEpQlBk_q3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJMAqJhhKXRtMWcSb1fzjaBlJn6PDsJfBvaVD-TnktibIN0Y3CCT-mDdWRwgk_rhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20456/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.9.8/tcp/62974/p2p/16Uiu2HAmGrMWs9JxDihsErSLPmjpDGjfSZmeHLzvZogSMhUUwaye"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20456/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.241.168/tcp/64122/p2p/16Uiu2HAmSCmij92vEJrwcZK1tzq8Wb8db6siMaVKnWoqRAHseFjL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node2_2024-09-10_13-42-36__3e8f91d7-709c-406b-99fd-7f3690ccd814__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.121.87
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['47418', '47419', '47420', '47421', '47422']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 47418:47418 -p 47419:47419 -p 47420:47420 -p 47421:47421 -p 47422:47422 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47420 --rest-port=47418 --tcp-port=47419 --discv5-udp-port=47421 --rest-address=0.0.0.0 --nat=extip:172.18.121.87 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b704b0b28bc58a3f50d564825635de73cddae65de9f14c6afb35ef80deba73b3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47422 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QHUPqRpdofum9ULxBpxsTmZLjCbDOIe6BM6iF7mh_ua4SLCnRBUkNL80SFHiyjQ41QmaIstFbFO09gszOUzzwmoBgmlkgnY0gmlwhKwSCQiKbXVsdGlhZGRyc4wACgSsEgkIBvX_3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM-WBFr-icIF57DPVMqiry4LpEoleFZ-Wao8i9L2GoueYN0Y3CC9f6DdWRwgvYAhXdha3UyCQ --lightpushnode=/ip4/172.18.9.8/tcp/62974/p2p/16Uiu2HAmGrMWs9JxDihsErSLPmjpDGjfSZmeHLzvZogSMhUUwaye --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.121.87 waku d00ab1cd5f2a5a2867b87eb3cc2d3df5a36cfacdc6bce8511d7d52f8e86efdb9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d00ab1cd5f2a. Setting up logs at ./log/docker/lightpush_node2_2024-09-10_13-42-36__3e8f91d7-709c-406b-99fd-7f3690ccd814__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 47418
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47418/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47418/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.121.87/tcp/47419/p2p/16Uiu2HAm4ELVvmk9yFxksNwDCvavU4QyhqHWrm1ruYDV54MaPtQN","/ip4/172.18.121.87/tcp/47420/ws/p2p/16Uiu2HAm4ELVvmk9yFxksNwDCvavU4QyhqHWrm1ruYDV54MaPtQN"],"enrUri":"enr:-LO4QPEAXAz_YstnEMC7a-Vcdw0URU1sPaVWguGBNfatYm0mPEbAHu0kX3-2F0fzI5I1or2gqkRrtBpGfNC8oUs5ijkBgmlkgnY0gmlwhKwSeVeKbXVsdGlhZGRyc4wACgSsEnlXBrk83QOCcnOFAAMBAACJc2VjcDI1NmsxoQKC0cRPGNyA0_t416NQ-jo8bQjf1WKEjUGSJxstnKifN4N0Y3CCuTuDdWRwgrk9hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47418/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.9.8/tcp/62974/p2p/16Uiu2HAmGrMWs9JxDihsErSLPmjpDGjfSZmeHLzvZogSMhUUwaye"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47418/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.241.168/tcp/64122/p2p/16Uiu2HAmSCmij92vEJrwcZK1tzq8Wb8db6siMaVKnWoqRAHseFjL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node3_2024-09-10_13-42-36__3e8f91d7-709c-406b-99fd-7f3690ccd814__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.105.46
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['13832', '13833', '13834', '13835', '13836']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 13832:13832 -p 13833:13833 -p 13834:13834 -p 13835:13835 -p 13836:13836 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13834 --rest-port=13832 --tcp-port=13833 --discv5-udp-port=13835 --rest-address=0.0.0.0 --nat=extip:172.18.105.46 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=da2decc9f03dfe2c32f67344bbfd8c7cb0bbbdc0f51acb3f9ea8b7f96ebdf5e9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13836 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QHUPqRpdofum9ULxBpxsTmZLjCbDOIe6BM6iF7mh_ua4SLCnRBUkNL80SFHiyjQ41QmaIstFbFO09gszOUzzwmoBgmlkgnY0gmlwhKwSCQiKbXVsdGlhZGRyc4wACgSsEgkIBvX_3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM-WBFr-icIF57DPVMqiry4LpEoleFZ-Wao8i9L2GoueYN0Y3CC9f6DdWRwgvYAhXdha3UyCQ --lightpushnode=/ip4/172.18.9.8/tcp/62974/p2p/16Uiu2HAmGrMWs9JxDihsErSLPmjpDGjfSZmeHLzvZogSMhUUwaye --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.105.46 waku 15b1cedba0e951ade7cff2b3a7d48b98ff8b26eb8b00b6f8a6b3618d3fb39de2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 15b1cedba0e9. Setting up logs at ./log/docker/lightpush_node3_2024-09-10_13-42-36__3e8f91d7-709c-406b-99fd-7f3690ccd814__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 13832
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13832/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13832/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.105.46/tcp/13833/p2p/16Uiu2HAmD5uxjnrt25TwtjkSXGAKzc6btYMyp9oPaH3k3C3xFwyh","/ip4/172.18.105.46/tcp/13834/ws/p2p/16Uiu2HAmD5uxjnrt25TwtjkSXGAKzc6btYMyp9oPaH3k3C3xFwyh"],"enrUri":"enr:-LO4QLqv5lMmgCYQ2nj8OePSV_udmLzJ_H4QIHHxfY2rERw9GF-IQg4X5RTfx0nd0aT0T2-2rmJb2CdIsveGYn6VqlEBgmlkgnY0gmlwhKwSaS6KbXVsdGlhZGRyc4wACgSsEmkuBjYK3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMGYo7KgqM8ZsRTywY1aIysJ1mw0gaS2oJXP-SyDKcbEIN0Y3CCNgmDdWRwgjYLhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13832/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.9.8/tcp/62974/p2p/16Uiu2HAmGrMWs9JxDihsErSLPmjpDGjfSZmeHLzvZogSMhUUwaye"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13832/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.241.168/tcp/64122/p2p/16Uiu2HAmSCmij92vEJrwcZK1tzq8Wb8db6siMaVKnWoqRAHseFjL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node4_2024-09-10_13-42-36__3e8f91d7-709c-406b-99fd-7f3690ccd814__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.33.132
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['31871', '31872', '31873', '31874', '31875']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 31871:31871 -p 31872:31872 -p 31873:31873 -p 31874:31874 -p 31875:31875 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31873 --rest-port=31871 --tcp-port=31872 --discv5-udp-port=31874 --rest-address=0.0.0.0 --nat=extip:172.18.33.132 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ba542e9c4d4ef1b71f7f9ab483804ba8e164ed0abdcd8aecc90cdbc7de8ec5f9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31875 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QHUPqRpdofum9ULxBpxsTmZLjCbDOIe6BM6iF7mh_ua4SLCnRBUkNL80SFHiyjQ41QmaIstFbFO09gszOUzzwmoBgmlkgnY0gmlwhKwSCQiKbXVsdGlhZGRyc4wACgSsEgkIBvX_3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM-WBFr-icIF57DPVMqiry4LpEoleFZ-Wao8i9L2GoueYN0Y3CC9f6DdWRwgvYAhXdha3UyCQ --lightpushnode=/ip4/172.18.9.8/tcp/62974/p2p/16Uiu2HAmGrMWs9JxDihsErSLPmjpDGjfSZmeHLzvZogSMhUUwaye --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.33.132 waku a5b836d8c803bb2ad7085d6e8c4d93af3e6fd68cb933d718b6d7e6bc8fdab929
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a5b836d8c803. Setting up logs at ./log/docker/lightpush_node4_2024-09-10_13-42-36__3e8f91d7-709c-406b-99fd-7f3690ccd814__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 31871
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31871/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31871/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.33.132/tcp/31872/p2p/16Uiu2HAm6xm89c5TcJ9Arv7SibPw7SfJ2qLa14jtq3U4pBdJQK6H","/ip4/172.18.33.132/tcp/31873/ws/p2p/16Uiu2HAm6xm89c5TcJ9Arv7SibPw7SfJ2qLa14jtq3U4pBdJQK6H"],"enrUri":"enr:-LO4QIiF1dW6FMWmoPPKec_GofURiswkqM8UJRn9tJ0b4ILgSuZAHl2ecTAcsTwqaBIKmowBzBj7u5xm7Vwhx-unePgBgmlkgnY0gmlwhKwSIYSKbXVsdGlhZGRyc4wACgSsEiGEBnyB3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKrZ2CvwfO-CbbPqyt7w2oVG2yx5_lmZaASWtX19P704oN0Y3CCfICDdWRwgnyChXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31871/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.9.8/tcp/62974/p2p/16Uiu2HAmGrMWs9JxDihsErSLPmjpDGjfSZmeHLzvZogSMhUUwaye"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31871/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.241.168/tcp/64122/p2p/16Uiu2HAmSCmij92vEJrwcZK1tzq8Wb8db6siMaVKnWoqRAHseFjL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62973/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64121/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20456/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725975767370490624}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62973/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725975767370490624,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64121/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725975767370490624,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47418/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725975767490125312}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62973/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725975767490125312,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64121/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725975767490125312,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13832/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725975767613224960}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62973/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725975767613224960,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64121/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725975767613224960,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31871/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725975767736622080}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62973/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725975767736622080,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64121/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725975767736622080,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 777f753f56fd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1c88f874ac6a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id cec734a50c13
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d00ab1cd5f2a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 15b1cedba0e9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a5b836d8c803
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.