[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_with_extra_field with id: 2024-09-10_13-38-16__baa14a84-72de-4f73-b0c2-69f1753c8a90
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-10_13-38-16__baa14a84-72de-4f73-b0c2-69f1753c8a90__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.156.198
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['11934', '11935', '11936', '11937', '11938']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 11934:11934 -p 11935:11935 -p 11936:11936 -p 11937:11937 -p 11938:11938 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11936 --rest-port=11934 --tcp-port=11935 --discv5-udp-port=11937 --rest-address=0.0.0.0 --nat=extip:172.18.156.198 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5ebbaeaa0bd688feced8c7ad737dec2fcd2b9dadf3b591b4a79062f6a5436f4e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11938 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.156.198 waku c65077b7bc455473e628d3b695368c2f71ccc482fcc8fa3d847a611ea5452f68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c65077b7bc45. Setting up logs at ./log/docker/node1_2024-09-10_13-38-16__baa14a84-72de-4f73-b0c2-69f1753c8a90__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 11934
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11934/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11934/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.156.198/tcp/11935/p2p/16Uiu2HAkyuRT76n4sre8ntMWcHw6hYfguWYgXEBbZNoswauWK5WX","/ip4/172.18.156.198/tcp/11936/ws/p2p/16Uiu2HAkyuRT76n4sre8ntMWcHw6hYfguWYgXEBbZNoswauWK5WX"],"enrUri":"enr:-LO4QNwkgoDV3WoGY-P8FyFQXU4CiHaiOM5zuP2KdVeXgBzNUVvouD0OUk41VzOWc7s3c_xACmPyaZkUygq_24jMkfMBgmlkgnY0gmlwhKwSnMaKbXVsdGlhZGRyc4wACgSsEpzGBi6g3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJCipUO69-5nvXDkw2Y83tua37AUYyhhsedNE20La-ooIN0Y3CCLp-DdWRwgi6hhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-10_13-38-16__baa14a84-72de-4f73-b0c2-69f1753c8a90__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.41.99
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['48040', '48041', '48042', '48043', '48044']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 48040:48040 -p 48041:48041 -p 48042:48042 -p 48043:48043 -p 48044:48044 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48042 --rest-port=48040 --tcp-port=48041 --discv5-udp-port=48043 --rest-address=0.0.0.0 --nat=extip:172.18.41.99 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0def92267afa5c4aab32e42f64ed0bbca8aff53ca0fc6f45acee241a10e5b0b3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48044 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QNwkgoDV3WoGY-P8FyFQXU4CiHaiOM5zuP2KdVeXgBzNUVvouD0OUk41VzOWc7s3c_xACmPyaZkUygq_24jMkfMBgmlkgnY0gmlwhKwSnMaKbXVsdGlhZGRyc4wACgSsEpzGBi6g3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJCipUO69-5nvXDkw2Y83tua37AUYyhhsedNE20La-ooIN0Y3CCLp-DdWRwgi6hhXdha3UyBQ --filternode=/ip4/172.18.156.198/tcp/11935/p2p/16Uiu2HAkyuRT76n4sre8ntMWcHw6hYfguWYgXEBbZNoswauWK5WX
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.41.99 waku f8eeddee8dfa87e874b26edf1c49d3bafcf6c7e86cf2c7c59c128d9783e1c154
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f8eeddee8dfa. Setting up logs at ./log/docker/node2_2024-09-10_13-38-16__baa14a84-72de-4f73-b0c2-69f1753c8a90__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 48040
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48040/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48040/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.41.99/tcp/48041/p2p/16Uiu2HAkvhEVFJeidTFssXn2AZKbTYyftSHWyadEhYsGc9pKri5S","/ip4/172.18.41.99/tcp/48042/ws/p2p/16Uiu2HAkvhEVFJeidTFssXn2AZKbTYyftSHWyadEhYsGc9pKri5S"],"enrUri":"enr:-LO4QItCCcKIBe2GB5ud0H0oRoK0skFatAf2dtAreLPqgE7nayq9a44OTI1QHZk_AMeIadxNBVjZZC8XkhKc0JRzPtQBgmlkgnY0gmlwhKwSKWOKbXVsdGlhZGRyc4wACgSsEiljBruq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIS2CfhH5QJIV0rONkzi01giBps1-UgGeP3Xctd5-txbYN0Y3CCu6mDdWRwgrurhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48040/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.156.198/tcp/11935/p2p/16Uiu2HAkyuRT76n4sre8ntMWcHw6hYfguWYgXEBbZNoswauWK5WX"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11934/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48040/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "f1820347-a8b1-4b7f-b35e-b822a43e908b", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"f1820347-a8b1-4b7f-b35e-b822a43e908b","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11934/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "extraField": "extraValue"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:11934/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c65077b7bc45
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f8eeddee8dfa
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.