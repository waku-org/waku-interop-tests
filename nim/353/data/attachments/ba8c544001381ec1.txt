[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_invalid_content_topic_format with id: 2024-09-10_13-40-27__b00dbb54-0f4d-4e01-bf36-5beaa9cbb7ce
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-10_13-40-27__b00dbb54-0f4d-4e01-bf36-5beaa9cbb7ce__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.186.228
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['44632', '44633', '44634', '44635', '44636']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 44632:44632 -p 44633:44633 -p 44634:44634 -p 44635:44635 -p 44636:44636 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44634 --rest-port=44632 --tcp-port=44633 --discv5-udp-port=44635 --rest-address=0.0.0.0 --nat=extip:172.18.186.228 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a8e8c5d3dccf57faf7ad7af72eff310883d4b9af9d16480bfb2f76dfba9cfcae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44636 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.186.228 waku 4f064568de10bae841ee9b256f1615dccef924f8c310059919b749e4dcf43c34
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4f064568de10. Setting up logs at ./log/docker/node1_2024-09-10_13-40-27__b00dbb54-0f4d-4e01-bf36-5beaa9cbb7ce__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 44632
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44632/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44632/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.186.228/tcp/44633/p2p/16Uiu2HAm9frB4KgQMWK8mgtmy47pakCuS6FVAbeb5CaAS2wnvxTg","/ip4/172.18.186.228/tcp/44634/ws/p2p/16Uiu2HAm9frB4KgQMWK8mgtmy47pakCuS6FVAbeb5CaAS2wnvxTg"],"enrUri":"enr:-LO4QKk_Ww6oIeRhiAS0V1ajdazt31g1J08dvyim-OkeCGJDGX9v1ZLs5Pmd8H-xGcstHWW_G2jJl19BOxC-3ttdby4BgmlkgnY0gmlwhKwSuuSKbXVsdGlhZGRyc4wACgSsErrkBq5a3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLTpUZiDh49L90PEsak_2h56E-sTpYW5Fe7qfEksZp6X4N0Y3CCrlmDdWRwgq5bhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-10_13-40-27__b00dbb54-0f4d-4e01-bf36-5beaa9cbb7ce__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.203.55
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['6100', '6101', '6102', '6103', '6104']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 6100:6100 -p 6101:6101 -p 6102:6102 -p 6103:6103 -p 6104:6104 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6102 --rest-port=6100 --tcp-port=6101 --discv5-udp-port=6103 --rest-address=0.0.0.0 --nat=extip:172.18.203.55 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dbc283fdcaad11fdc7cf52146a67d032e48ba12ed99d0ce2d0f59cdcddbc7e71 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6104 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QKk_Ww6oIeRhiAS0V1ajdazt31g1J08dvyim-OkeCGJDGX9v1ZLs5Pmd8H-xGcstHWW_G2jJl19BOxC-3ttdby4BgmlkgnY0gmlwhKwSuuSKbXVsdGlhZGRyc4wACgSsErrkBq5a3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLTpUZiDh49L90PEsak_2h56E-sTpYW5Fe7qfEksZp6X4N0Y3CCrlmDdWRwgq5bhXdha3UyBQ --filternode=/ip4/172.18.186.228/tcp/44633/p2p/16Uiu2HAm9frB4KgQMWK8mgtmy47pakCuS6FVAbeb5CaAS2wnvxTg
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.203.55 waku 420ddc4b94406907a531c136a9ae5a43834cb4d0f048c84919f2a3d934879ac2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 420ddc4b9440. Setting up logs at ./log/docker/node2_2024-09-10_13-40-27__b00dbb54-0f4d-4e01-bf36-5beaa9cbb7ce__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 6100
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6100/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6100/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.203.55/tcp/6101/p2p/16Uiu2HAmSiPqo3zqMhLbtA1kq1eHL7trC2P2rjdideBVaVr9cWCv","/ip4/172.18.203.55/tcp/6102/ws/p2p/16Uiu2HAmSiPqo3zqMhLbtA1kq1eHL7trC2P2rjdideBVaVr9cWCv"],"enrUri":"enr:-LO4QEsYtDHM0DqbmaIesWoVyzjyaXULQUhhAGSs-zOOwvxDcULuiEIX8xfcREmdO3k4WyILpDbNuJ_6dkJ1gh0ZKcEBgmlkgnY0gmlwhKwSyzeKbXVsdGlhZGRyc4wACgSsEss3BhfW3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPQ4uvY-04DKL6HlXJ6hJF9fqZZOsJx2bm3FF53FQNM34N0Y3CCF9WDdWRwghfXhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6100/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.186.228/tcp/44633/p2p/16Uiu2HAm9frB4KgQMWK8mgtmy47pakCuS6FVAbeb5CaAS2wnvxTg"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44632/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6100/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "ae734632-7de4-4004-bad9-89e8839fbb03", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"ae734632-7de4-4004-bad9-89e8839fbb03","statusDesc":"OK"}'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:133 Running test with contetn topic Empty string
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6100/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": [{"description": "Empty string", "value": ""}], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:6100/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:133 Running test with contetn topic A dictionary
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6100/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": [{"description": "A dictionary", "value": {"key": "YWFh"}}], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:6100/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:133 Running test with contetn topic An integer
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6100/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": [{"description": "An integer", "value": 1234567890}], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:6100/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:133 Running test with contetn topic A list
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6100/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": [{"description": "A list", "value": ["YWFh"]}], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:6100/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:133 Running test with contetn topic A bool
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6100/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": [{"description": "A bool", "value": true}], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:6100/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4f064568de10
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 420ddc4b9440
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.