[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_payload with id: 2024-09-10_13-43-02__57c79470-8a41-45ee-a4ac-1f7753702156
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-10_13-43-02__57c79470-8a41-45ee-a4ac-1f7753702156__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.135.134
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['35680', '35681', '35682', '35683', '35684']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 35680:35680 -p 35681:35681 -p 35682:35682 -p 35683:35683 -p 35684:35684 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35682 --rest-port=35680 --tcp-port=35681 --discv5-udp-port=35683 --rest-address=0.0.0.0 --nat=extip:172.18.135.134 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bed20fc3d6f2f18dad61b7cfd4dc9f948eca074cefd96e0c6fd7df7cda02bdab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35684 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.135.134 waku 14f1b945963d7c63c8a3f0fbc2cae226b4aeee79534655a792c6fed7a779c735
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 14f1b945963d. Setting up logs at ./log/docker/receiving_node1_2024-09-10_13-43-02__57c79470-8a41-45ee-a4ac-1f7753702156__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 35680
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35680/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35680/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.135.134/tcp/35681/p2p/16Uiu2HAm5Ymj6H3Z6Y43nDf5m3NwFYi3qzLvgNvMQgpcADMXtqrc","/ip4/172.18.135.134/tcp/35682/ws/p2p/16Uiu2HAm5Ymj6H3Z6Y43nDf5m3NwFYi3qzLvgNvMQgpcADMXtqrc"],"enrUri":"enr:-LO4QJ_RDKK64DYhvUBQbTp69_HoahrvjRFIdk5ih8C0CleLZWK1ENiv0SJwckI302oed-b7DxpYSf1J_4khLiKuo80BgmlkgnY0gmlwhKwSh4aKbXVsdGlhZGRyc4wACgSsEoeGBoti3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKWZm669A0RJhjb4scFS3IXicmsJ5j507x7leJLQs621YN0Y3CCi2GDdWRwgotjhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-10_13-43-02__57c79470-8a41-45ee-a4ac-1f7753702156__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.125.150
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['35509', '35510', '35511', '35512', '35513']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 35509:35509 -p 35510:35510 -p 35511:35511 -p 35512:35512 -p 35513:35513 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35511 --rest-port=35509 --tcp-port=35510 --discv5-udp-port=35512 --rest-address=0.0.0.0 --nat=extip:172.18.125.150 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3fe94f0ccbf29afb7bbbdc8ee05caedc0ab375daccf79160deff154a1ef502c2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35513 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.125.150 waku a382ec145b341b2e68da47b6aaa19e988fab3a028c09add213c515986c12d7a3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a382ec145b34. Setting up logs at ./log/docker/receiving_node2_2024-09-10_13-43-02__57c79470-8a41-45ee-a4ac-1f7753702156__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 35509
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35509/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35509/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.125.150/tcp/35510/p2p/16Uiu2HAmCWM6geKWCibTGAAuhmqUcDHzJ4EdNKiqK56K2n6aEKNB","/ip4/172.18.125.150/tcp/35511/ws/p2p/16Uiu2HAmCWM6geKWCibTGAAuhmqUcDHzJ4EdNKiqK56K2n6aEKNB"],"enrUri":"enr:-LO4QHOETKAbOxFCYedPGBTgfIKOodntUOnJU2zun01FFfd1ArFd7FzefLnsHHUq2wZ7qM0sDSSOTo9QjOhSlhpyk8gBgmlkgnY0gmlwhKwSfZaKbXVsdGlhZGRyc4wACgSsEn2WBoq33QOCcnOFAAMBAACJc2VjcDI1NmsxoQL9yTuWL2oe3D_rwBPkgVhAEKa6wXYQnIHcxk94iCkYTIN0Y3CCiraDdWRwgoq4hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35509/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.135.134/tcp/35681/p2p/16Uiu2HAm5Ymj6H3Z6Y43nDf5m3NwFYi3qzLvgNvMQgpcADMXtqrc"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-10_13-43-02__57c79470-8a41-45ee-a4ac-1f7753702156__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.59.47
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['62342', '62343', '62344', '62345', '62346']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 62342:62342 -p 62343:62343 -p 62344:62344 -p 62345:62345 -p 62346:62346 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62344 --rest-port=62342 --tcp-port=62343 --discv5-udp-port=62345 --rest-address=0.0.0.0 --nat=extip:172.18.59.47 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1ce65dae8c97d2d0bb7b610ab5244d8db6bc8df53ad1a1cc806fcaa37dbadcea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62346 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QJ_RDKK64DYhvUBQbTp69_HoahrvjRFIdk5ih8C0CleLZWK1ENiv0SJwckI302oed-b7DxpYSf1J_4khLiKuo80BgmlkgnY0gmlwhKwSh4aKbXVsdGlhZGRyc4wACgSsEoeGBoti3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKWZm669A0RJhjb4scFS3IXicmsJ5j507x7leJLQs621YN0Y3CCi2GDdWRwgotjhXdha3UyCQ --lightpushnode=/ip4/172.18.135.134/tcp/35681/p2p/16Uiu2HAm5Ymj6H3Z6Y43nDf5m3NwFYi3qzLvgNvMQgpcADMXtqrc --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.59.47 waku c61f87384550cce2c4335d3718d17e568edc6f7ee74af727fe674a32d772953d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c61f87384550. Setting up logs at ./log/docker/lightpush_node1_2024-09-10_13-43-02__57c79470-8a41-45ee-a4ac-1f7753702156__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 62342
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62342/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62342/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.59.47/tcp/62343/p2p/16Uiu2HAmUETQ4k5VF1VYkwK6aDdG1CW55MgPKTPbBjvZwRNsEncV","/ip4/172.18.59.47/tcp/62344/ws/p2p/16Uiu2HAmUETQ4k5VF1VYkwK6aDdG1CW55MgPKTPbBjvZwRNsEncV"],"enrUri":"enr:-LO4QGigdrj4JZ114RQkX5qOHW82JgeLnx_d9J25SkRuOEtCbpwdV_Xt9n5VgLJN9zFLmjRvw7b8OQ7EY6lVyViD9jMBgmlkgnY0gmlwhKwSOy-KbXVsdGlhZGRyc4wACgSsEjsvBvOI3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPncg2_QUc8t-aKJyTAoaBKNGcHbqr-XUf_NvheCMcFpoN0Y3CC84eDdWRwgvOJhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62342/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.135.134/tcp/35681/p2p/16Uiu2HAm5Ymj6H3Z6Y43nDf5m3NwFYi3qzLvgNvMQgpcADMXtqrc"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62342/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.125.150/tcp/35510/p2p/16Uiu2HAmCWM6geKWCibTGAAuhmqUcDHzJ4EdNKiqK56K2n6aEKNB"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35680/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35509/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62342/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1725975788126084096}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:62342/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 14f1b945963d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a382ec145b34
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c61f87384550
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.