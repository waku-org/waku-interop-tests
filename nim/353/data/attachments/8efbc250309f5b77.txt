[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_no_timestamp with id: 2024-09-10_13-43-59__9a2e93e4-0481-46f1-8c3e-9227a5164317
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-10_13-43-59__9a2e93e4-0481-46f1-8c3e-9227a5164317__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.244.237
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['32788', '32789', '32790', '32791', '32792']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 32788:32788 -p 32789:32789 -p 32790:32790 -p 32791:32791 -p 32792:32792 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32790 --rest-port=32788 --tcp-port=32789 --discv5-udp-port=32791 --rest-address=0.0.0.0 --nat=extip:172.18.244.237 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9266ebfa6b3e0dbdddc0109cb57f6b78edb5301c10ccbbb8c8fde3aaac327eeb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32792 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.244.237 waku dddb7f3f646b02d78dd5f7bc1e7d9752d4bac532e9fa4040e11d73275de053e2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID dddb7f3f646b. Setting up logs at ./log/docker/receiving_node1_2024-09-10_13-43-59__9a2e93e4-0481-46f1-8c3e-9227a5164317__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 32788
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32788/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32788/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.244.237/tcp/32789/p2p/16Uiu2HAmKiyeZ2Bo1dcKxtL61g2osxhB2uCAWteiMnpnYP9coAfh","/ip4/172.18.244.237/tcp/32790/ws/p2p/16Uiu2HAmKiyeZ2Bo1dcKxtL61g2osxhB2uCAWteiMnpnYP9coAfh"],"enrUri":"enr:-LO4QKYcgR6p4Y8XgDeftevq8hGI-AU4OsZH7Hxu8p0XwN4XPg6BrtdsKkbpnzF55Ed_HHig75NpLPXHr52fiin9VEMBgmlkgnY0gmlwhKwS9O2KbXVsdGlhZGRyc4wACgSsEvTtBoAW3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNpB1ZqL7rRx7DugOyWmXXPNS0zu2upjW-MVSwLP0ZOaIN0Y3CCgBWDdWRwgoAXhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-10_13-43-59__9a2e93e4-0481-46f1-8c3e-9227a5164317__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.98.243
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['8253', '8254', '8255', '8256', '8257']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 8253:8253 -p 8254:8254 -p 8255:8255 -p 8256:8256 -p 8257:8257 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8255 --rest-port=8253 --tcp-port=8254 --discv5-udp-port=8256 --rest-address=0.0.0.0 --nat=extip:172.18.98.243 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2aef3d1e5adefafcbfe8e2b1653cfcbe1dfdb3ca45bfebf10de6d7cfb5fe6abe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8257 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.98.243 waku ddaa3cdb3828752c1ffd93a2dd3b74597759f98ee5e84d0eda142069fa19d4a9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ddaa3cdb3828. Setting up logs at ./log/docker/receiving_node2_2024-09-10_13-43-59__9a2e93e4-0481-46f1-8c3e-9227a5164317__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 8253
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8253/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8253/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.98.243/tcp/8254/p2p/16Uiu2HAm7Pt45cjwP5BWUdFmMbbxvHSGQ9r8TBABm6MCPfx8UMcA","/ip4/172.18.98.243/tcp/8255/ws/p2p/16Uiu2HAm7Pt45cjwP5BWUdFmMbbxvHSGQ9r8TBABm6MCPfx8UMcA"],"enrUri":"enr:-LO4QJWxhFuOOtCpfEbPED6XYL-MH28lNms5DJxuRFX1U0hDCWckn1SiRunZ2ZJznWNSoNTUAIAJ22d8Dc54JlW7SfUBgmlkgnY0gmlwhKwSYvOKbXVsdGlhZGRyc4wACgSsEmLzBiA_3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKx1rvHju4VKTXWmEVJRJ-j7WawTuD_rvvfvTb0dKxNT4N0Y3CCID6DdWRwgiBAhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8253/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.244.237/tcp/32789/p2p/16Uiu2HAmKiyeZ2Bo1dcKxtL61g2osxhB2uCAWteiMnpnYP9coAfh"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-10_13-43-59__9a2e93e4-0481-46f1-8c3e-9227a5164317__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.16.66
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['39977', '39978', '39979', '39980', '39981']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 39977:39977 -p 39978:39978 -p 39979:39979 -p 39980:39980 -p 39981:39981 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39979 --rest-port=39977 --tcp-port=39978 --discv5-udp-port=39980 --rest-address=0.0.0.0 --nat=extip:172.18.16.66 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fca0fa58badc1c2de13dc41c0fe593e30a1e7056dcccc6cebec7dbcffcaabae8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39981 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QKYcgR6p4Y8XgDeftevq8hGI-AU4OsZH7Hxu8p0XwN4XPg6BrtdsKkbpnzF55Ed_HHig75NpLPXHr52fiin9VEMBgmlkgnY0gmlwhKwS9O2KbXVsdGlhZGRyc4wACgSsEvTtBoAW3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNpB1ZqL7rRx7DugOyWmXXPNS0zu2upjW-MVSwLP0ZOaIN0Y3CCgBWDdWRwgoAXhXdha3UyCQ --lightpushnode=/ip4/172.18.244.237/tcp/32789/p2p/16Uiu2HAmKiyeZ2Bo1dcKxtL61g2osxhB2uCAWteiMnpnYP9coAfh --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.16.66 waku d49fc415aa343fc3202c7b8f2f45e0b7e1c3154d5b7fa561e37129a738fd3e29
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d49fc415aa34. Setting up logs at ./log/docker/lightpush_node1_2024-09-10_13-43-59__9a2e93e4-0481-46f1-8c3e-9227a5164317__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 39977
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39977/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39977/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.16.66/tcp/39978/p2p/16Uiu2HAmNhuawbvf8PBWWPhRAGjP6zi2dNMPduBkVxatcLRydUZY","/ip4/172.18.16.66/tcp/39979/ws/p2p/16Uiu2HAmNhuawbvf8PBWWPhRAGjP6zi2dNMPduBkVxatcLRydUZY"],"enrUri":"enr:-LO4QLiDT44-nxQhnl8LNASCjhTS9fu1rbQtf9qWKz7hl_D5TuyevNPgopSorTF5m07yJMtCGLaiqQ4yf9JrPzb708cBgmlkgnY0gmlwhKwSEEKKbXVsdGlhZGRyc4wACgSsEhBCBpwr3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOVVDltSs7MGvg4Mcotd0eur1Pb0eGlARUAUKg_VIb5i4N0Y3CCnCqDdWRwgpwshXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39977/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.244.237/tcp/32789/p2p/16Uiu2HAmKiyeZ2Bo1dcKxtL61g2osxhB2uCAWteiMnpnYP9coAfh"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39977/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.98.243/tcp/8254/p2p/16Uiu2HAm7Pt45cjwP5BWUdFmMbbxvHSGQ9r8TBABm6MCPfx8UMcA"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32788/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8253/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39977/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32788/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725975845555973120,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8253/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725975845555973120,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id dddb7f3f646b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ddaa3cdb3828
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d49fc415aa34
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.