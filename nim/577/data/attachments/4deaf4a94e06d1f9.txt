[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_from_all_subscribed_content_topics with id: 2024-12-25_19-37-30__61d88a1e-36dd-4c17-ab02-975583887ad4
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-25_19-37-30__61d88a1e-36dd-4c17-ab02-975583887ad4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.120.164
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['30129', '30130', '30131', '30132', '30133']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 30129:30129 -p 30130:30130 -p 30131:30131 -p 30132:30132 -p 30133:30133 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30131 --rest-port=30129 --tcp-port=30130 --discv5-udp-port=30132 --rest-address=0.0.0.0 --nat=extip:172.18.120.164 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2e6573c7c42e2f0cfcfb2cfebd1caceedeecda5ebabf4fbdcd59e7e0a439ebda --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30133 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.120.164 waku beb93331dc349e4e71f66ccb303c88c5a032eab5ab1cea186fd82783831e4d74
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID beb93331dc34. Setting up logs at ./log/docker/node1_2024-12-25_19-37-30__61d88a1e-36dd-4c17-ab02-975583887ad4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 30129
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30129/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30129/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.120.164/tcp/30130/p2p/16Uiu2HAm4MZP3GWNSReN6VM65NQDorGGrRd3M4qHYKJR1KpgTdr4","/ip4/172.18.120.164/tcp/30131/ws/p2p/16Uiu2HAm4MZP3GWNSReN6VM65NQDorGGrRd3M4qHYKJR1KpgTdr4"],"enrUri":"enr:-L24QE-nqH0kHDFWshCTURsF_crfRj6VP7xHTDB9LyKcgktDS7hJdh8R5mYhGIXReOoQTn4LVnnqfDr3ThEfS_Jnaa0CgmlkgnY0gmlwhKwSeKSKbXVsdGlhZGRyc5YACASsEnikBnWyAAoErBJ4pAZ1s90DgnJzhQADAQAAiXNlY3AyNTZrMaEChKtluXtgKiKZS3EiZ7Npp-SysWlMXnhXhsEtzuAHhI2DdGNwgnWyg3VkcIJ1tIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-25_19-37-30__61d88a1e-36dd-4c17-ab02-975583887ad4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.183.55
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['26774', '26775', '26776', '26777', '26778']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 26774:26774 -p 26775:26775 -p 26776:26776 -p 26777:26777 -p 26778:26778 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26776 --rest-port=26774 --tcp-port=26775 --discv5-udp-port=26777 --rest-address=0.0.0.0 --nat=extip:172.18.183.55 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8dd3b2c3cbf7c74b9df099fea7f989cf65ee75d1ef0fa4d25f4b995a95dde540 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26778 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QE-nqH0kHDFWshCTURsF_crfRj6VP7xHTDB9LyKcgktDS7hJdh8R5mYhGIXReOoQTn4LVnnqfDr3ThEfS_Jnaa0CgmlkgnY0gmlwhKwSeKSKbXVsdGlhZGRyc5YACASsEnikBnWyAAoErBJ4pAZ1s90DgnJzhQADAQAAiXNlY3AyNTZrMaEChKtluXtgKiKZS3EiZ7Npp-SysWlMXnhXhsEtzuAHhI2DdGNwgnWyg3VkcIJ1tIV3YWt1MgU --filternode=/ip4/172.18.120.164/tcp/30130/p2p/16Uiu2HAm4MZP3GWNSReN6VM65NQDorGGrRd3M4qHYKJR1KpgTdr4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.183.55 waku 935ac33f82c073f711fcaf352ba402b289bed908d3a143eb542d8709ed5bf626
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 935ac33f82c0. Setting up logs at ./log/docker/node2_2024-12-25_19-37-30__61d88a1e-36dd-4c17-ab02-975583887ad4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 26774
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26774/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26774/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.183.55/tcp/26775/p2p/16Uiu2HAmMGqFtrtbd1phb9aqipcviwhYvfiynK1UQonwRaoZuQzY","/ip4/172.18.183.55/tcp/26776/ws/p2p/16Uiu2HAmMGqFtrtbd1phb9aqipcviwhYvfiynK1UQonwRaoZuQzY"],"enrUri":"enr:-L24QOmIT3vgMYzETj9pwtUGywcb4ZhlbVNYMibmlPxEvU3yTUyxTwCMFHXvq4eXn3grO_D-wpaKO3KdBBfVB8dYfh0CgmlkgnY0gmlwhKwStzeKbXVsdGlhZGRyc5YACASsErc3BmiXAAoErBK3NwZomN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDgAwffwHm2TUIgB-S4eem8zFNFmxdlu-quYc_dGY5YmWDdGNwgmiXg3VkcIJomYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26774/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.120.164/tcp/30130/p2p/16Uiu2HAm4MZP3GWNSReN6VM65NQDorGGrRd3M4qHYKJR1KpgTdr4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30129/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26774/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "d10d6a83-e71a-42c1-a2f3-f863c0c56cd3", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"d10d6a83-e71a-42c1-a2f3-f863c0c56cd3","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30129/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26774/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "fb8101cf-a4ff-4d42-9105-49b22ecf7a2a", "contentFilters": ["Hello World!", "1234567890"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"fb8101cf-a4ff-4d42-9105-49b22ecf7a2a","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30129/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26774/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1735155455875701504,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:26774/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["Hello World!", "1234567890"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30129/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26774/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:26774/filter/v2/messages/1234567890. Response content: b'Not subscribed to topic: 1234567890'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id beb93331dc34
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 935ac33f82c0
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container beb93331dc34. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.