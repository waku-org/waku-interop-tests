[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_relaying_node with id: 2024-12-25_19-37-30__d5544074-d087-48fc-bcff-40b1fa4c0d86
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-25_19-37-30__d5544074-d087-48fc-bcff-40b1fa4c0d86__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-25_19-37-30__d5544074-d087-48fc-bcff-40b1fa4c0d86__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-25_19-37-30__d5544074-d087-48fc-bcff-40b1fa4c0d86__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.219.74
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['22319', '22320', '22321', '22322', '22323']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 22319:22319 -p 22320:22320 -p 22321:22321 -p 22322:22322 -p 22323:22323 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22321 --rest-port=22319 --tcp-port=22320 --discv5-udp-port=22322 --rest-address=0.0.0.0 --nat=extip:172.18.219.74 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=384edf56fedc9aeaeb7cfdf98cdbf4c1eb5b1cfc2ceb7d7f01e704da15c62cab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22323 --metrics-logging=true --filter=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.219.74 waku 2ef43835f595eeca768e85724af02a4ae96a3c0fb58911c0ba036054d919e511
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2ef43835f595. Setting up logs at ./log/docker/node1_2024-12-25_19-37-30__d5544074-d087-48fc-bcff-40b1fa4c0d86__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 22319
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22319/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22319/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.219.74/tcp/22320/p2p/16Uiu2HAm2KGx6q9ixXhKDmz2yVFcvn98DsE7yPipJNcs87iiX7hv","/ip4/172.18.219.74/tcp/22321/ws/p2p/16Uiu2HAm2KGx6q9ixXhKDmz2yVFcvn98DsE7yPipJNcs87iiX7hv"],"enrUri":"enr:-L24QOzkMvrqmuhfrn000-I3_ALDhijdUGK4LdmtKhP4KojdTLbZJfzohCYsFTYU4DYK2vlVjSgHrMwVPiFHa7Gl7rICgmlkgnY0gmlwhKwS20qKbXVsdGlhZGRyc5YACASsEttKBlcwAAoErBLbSgZXMd0DgnJzhQADAQAAiXNlY3AyNTZrMaECZl5I0kFR6fdEpebXsWHBMUzcUWgvlVw0VbF8aXcY0f2DdGNwglcwg3VkcIJXMoV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.134.160
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5134', '5135', '5136', '5137', '5138']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5134:5134 -p 5135:5135 -p 5136:5136 -p 5137:5137 -p 5138:5138 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5136 --rest-port=5134 --tcp-port=5135 --discv5-udp-port=5137 --rest-address=0.0.0.0 --nat=extip:172.18.134.160 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4b708e90a618ac7dac78decce00a8ca9a5a2c0b0a3f04caf763f4be6ed7aaa14 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5138 --metrics-logging=true --filter=true --relay=true --discv5-bootstrap-node=enr:-L24QOzkMvrqmuhfrn000-I3_ALDhijdUGK4LdmtKhP4KojdTLbZJfzohCYsFTYU4DYK2vlVjSgHrMwVPiFHa7Gl7rICgmlkgnY0gmlwhKwS20qKbXVsdGlhZGRyc5YACASsEttKBlcwAAoErBLbSgZXMd0DgnJzhQADAQAAiXNlY3AyNTZrMaECZl5I0kFR6fdEpebXsWHBMUzcUWgvlVw0VbF8aXcY0f2DdGNwglcwg3VkcIJXMoV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.134.160 waku 081ed9f0e3a5a596800d2539611b2044671c8f8a9f39ffc89d9b856ce5f38f03
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 081ed9f0e3a5. Setting up logs at ./log/docker/node2_2024-12-25_19-37-30__d5544074-d087-48fc-bcff-40b1fa4c0d86__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 5134
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5134/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5134/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.134.160/tcp/5135/p2p/16Uiu2HAmBTkPcuFq91d6vUo8f4a5NuCGj5FMp3jvLTGSn2zAJ1vt","/ip4/172.18.134.160/tcp/5136/ws/p2p/16Uiu2HAmBTkPcuFq91d6vUo8f4a5NuCGj5FMp3jvLTGSn2zAJ1vt"],"enrUri":"enr:-L24QLsWOLghefXGAqRiOqsjO_Z9vr0ME9ojes3BmQ39V-nONm84Zuf7I_DAcfzjPh70okV67vK4aPwUtSMbkbN2SeMCgmlkgnY0gmlwhKwShqCKbXVsdGlhZGRyc5YACASsEoagBhQPAAoErBKGoAYUEN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC7kMjxlL8uSKhyfc0KVG1YG8wIfnFHsJlmhejDBs33M2DdGNwghQPg3VkcIIUEYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.96.78
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['7558', '7559', '7560', '7561', '7562']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 7558:7558 -p 7559:7559 -p 7560:7560 -p 7561:7561 -p 7562:7562 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7560 --rest-port=7558 --tcp-port=7559 --discv5-udp-port=7561 --rest-address=0.0.0.0 --nat=extip:172.18.96.78 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c4a1c4ec3340bef8c3decf100b972ea3c8fc1fa76de4aad06e771a9acfb2bd8e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7562 --metrics-logging=true --relay=false --filternode=/ip4/172.18.134.160/tcp/5135/p2p/16Uiu2HAmBTkPcuFq91d6vUo8f4a5NuCGj5FMp3jvLTGSn2zAJ1vt --discv5-bootstrap-node=enr:-L24QLsWOLghefXGAqRiOqsjO_Z9vr0ME9ojes3BmQ39V-nONm84Zuf7I_DAcfzjPh70okV67vK4aPwUtSMbkbN2SeMCgmlkgnY0gmlwhKwShqCKbXVsdGlhZGRyc5YACASsEoagBhQPAAoErBKGoAYUEN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC7kMjxlL8uSKhyfc0KVG1YG8wIfnFHsJlmhejDBs33M2DdGNwghQPg3VkcIIUEYV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.96.78 waku 4df29fa3ad3502ff48664bfc4bb33a768522451a730bfd56323a4c6ae2d31508
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4df29fa3ad35. Setting up logs at ./log/docker/node3_2024-12-25_19-37-30__d5544074-d087-48fc-bcff-40b1fa4c0d86__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 7558
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7558/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7558/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.96.78/tcp/7559/p2p/16Uiu2HAkxCUF1EHoejrmH6tSNvKtSYZhCQ1vCMmnCXfVxLE2b8Jn","/ip4/172.18.96.78/tcp/7560/ws/p2p/16Uiu2HAkxCUF1EHoejrmH6tSNvKtSYZhCQ1vCMmnCXfVxLE2b8Jn"],"enrUri":"enr:-L24QEy_kMiS93astCwsBMm9LJ1svokVCr0GKakF51hWjifeZQIYH8aMfVfGugzUDmjZntdr_cxP7rdrBhah_VoSPjACgmlkgnY0gmlwhKwSYE6KbXVsdGlhZGRyc5YACASsEmBOBh2HAAoErBJgTgYdiN0DgnJzhQADAQAAiXNlY3AyNTZrMaECKTE9BSA7gBZjtxBdlB_fme7XyC7YHLyCsI8zcryz78ODdGNwgh2Hg3VkcIIdiYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22319/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5134/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7558/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22319/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.134.160/tcp/5135/p2p/16Uiu2HAmBTkPcuFq91d6vUo8f4a5NuCGj5FMp3jvLTGSn2zAJ1vt","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5134/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.219.74/tcp/22320/p2p/16Uiu2HAm2KGx6q9ixXhKDmz2yVFcvn98DsE7yPipJNcs87iiX7hv","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.96.78/tcp/7559/p2p/16Uiu2HAkxCUF1EHoejrmH6tSNvKtSYZhCQ1vCMmnCXfVxLE2b8Jn","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7558/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.134.160/tcp/5135/p2p/16Uiu2HAmBTkPcuFq91d6vUo8f4a5NuCGj5FMp3jvLTGSn2zAJ1vt","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22319/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7558/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1735155488162367232,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2ef43835f595
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 081ed9f0e3a5
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2ef43835f595. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4df29fa3ad35
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 081ed9f0e3a5. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.