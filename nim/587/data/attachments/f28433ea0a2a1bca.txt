[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_full__peer_full with id: 2024-12-27_11-02-17__473d689c-a11a-450a-bab5-2bfb933fd16e
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-27_11-02-17__473d689c-a11a-450a-bab5-2bfb933fd16e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.120.246
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8022', '8023', '8024', '8025', '8026']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8022:8022 -p 8023:8023 -p 8024:8024 -p 8025:8025 -p 8026:8026 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8024 --rest-port=8022 --tcp-port=8023 --discv5-udp-port=8025 --rest-address=0.0.0.0 --nat=extip:172.18.120.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c835cb01f39f99b21cf4fdea8fd3fbda1dfe1c91ebba15ef3dc0cdecde588a29 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8026 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.120.246 waku cad443907ee2a0d7f456357a32f9f541050f307fed7d1c6149c48f7d4ef8db8a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID cad443907ee2. Setting up logs at ./log/docker/receiving_node1_2024-12-27_11-02-17__473d689c-a11a-450a-bab5-2bfb933fd16e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 8022
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2951ac71502d. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8022/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8022/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.120.246/tcp/8023/p2p/16Uiu2HAkywHRiGtbtZ29TBoqYxu7q1muUSMvP1oLg1sB3vr6r8k4","/ip4/172.18.120.246/tcp/8024/ws/p2p/16Uiu2HAkywHRiGtbtZ29TBoqYxu7q1muUSMvP1oLg1sB3vr6r8k4"],"enrUri":"enr:-L24QEGyCejryURqKupcnjx1werJYtX9I4hOhBRRIZ_GyTolE7bRstJdLZ0O2fzdwpnYUajipQjLLMxfjbbX60wA-ZACgmlkgnY0gmlwhKwSePaKbXVsdGlhZGRyc5YACASsEnj2Bh9XAAoErBJ49gYfWN0DgnJzhQADAQAAiXNlY3AyNTZrMaECQwSry_qyqCquJilA72duTFdp9J0yWCuzLZFRyFK8UpWDdGNwgh9Xg3VkcIIfWYV3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-27_11-02-17__473d689c-a11a-450a-bab5-2bfb933fd16e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.97.136
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10484', '10485', '10486', '10487', '10488']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10484:10484 -p 10485:10485 -p 10486:10486 -p 10487:10487 -p 10488:10488 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10486 --rest-port=10484 --tcp-port=10485 --discv5-udp-port=10487 --rest-address=0.0.0.0 --nat=extip:172.18.97.136 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cddbdfbd0cc996e15eedc0a5a268a041bedd054671c46aed469bd8a96f9e6cfa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10488 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QEGyCejryURqKupcnjx1werJYtX9I4hOhBRRIZ_GyTolE7bRstJdLZ0O2fzdwpnYUajipQjLLMxfjbbX60wA-ZACgmlkgnY0gmlwhKwSePaKbXVsdGlhZGRyc5YACASsEnj2Bh9XAAoErBJ49gYfWN0DgnJzhQADAQAAiXNlY3AyNTZrMaECQwSry_qyqCquJilA72duTFdp9J0yWCuzLZFRyFK8UpWDdGNwgh9Xg3VkcIIfWYV3YWt1Mg0 --lightpushnode=/ip4/172.18.120.246/tcp/8023/p2p/16Uiu2HAkywHRiGtbtZ29TBoqYxu7q1muUSMvP1oLg1sB3vr6r8k4 --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.97.136 waku 114d7fa642c181f32464e9e1ccf7863b40460709a3b4f8b45d8b1ea2a385de0d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 114d7fa642c1. Setting up logs at ./log/docker/lightpush_node1_2024-12-27_11-02-17__473d689c-a11a-450a-bab5-2bfb933fd16e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 10484
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10484/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10484/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.97.136/tcp/10485/p2p/16Uiu2HAmDsWuX2dZqY8bF3w2raXtcWjipbRWBcYx7Xor69r9naw1","/ip4/172.18.97.136/tcp/10486/ws/p2p/16Uiu2HAmDsWuX2dZqY8bF3w2raXtcWjipbRWBcYx7Xor69r9naw1"],"enrUri":"enr:-L24QMN-l3HQFwHkHSt0I5W0ZdNAJX4yEZ3vEy7mHD3ZlOIvAu95uHqywKCwj3uxVPHIeFteg40IJ2tuLr4djIzTRg4CgmlkgnY0gmlwhKwSYYiKbXVsdGlhZGRyc5YACASsEmGIBij1AAoErBJhiAYo9t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDEhE0vuLiNyrR9bQsz09qP5u0goA60ZVgysNL0jrRXoiDdGNwgij1g3VkcIIo94V3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10484/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.120.246/tcp/8023/p2p/16Uiu2HAkywHRiGtbtZ29TBoqYxu7q1muUSMvP1oLg1sB3vr6r8k4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8022/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10484/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.5 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10484/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1735297349203437056}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8022/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735297349203437056,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10484/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735297349203437056,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id cad443907ee2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 114d7fa642c1
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container cad443907ee2. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.