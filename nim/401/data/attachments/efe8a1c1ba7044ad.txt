[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_to_pubsub_topic_from_another_cluster_id with id: 2024-10-23_08-05-01__d0d287b4-215a-4931-9023-4088785628b7
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-23_08-05-01__d0d287b4-215a-4931-9023-4088785628b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.225.190
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['62245', '62246', '62247', '62248', '62249']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 62245:62245 -p 62246:62246 -p 62247:62247 -p 62248:62248 -p 62249:62249 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62247 --rest-port=62245 --tcp-port=62246 --discv5-udp-port=62248 --rest-address=0.0.0.0 --nat=extip:172.18.225.190 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=acc6becfbc967e8b89fdbaac9402c2eed467112be67e55afb1bfab60deaa952b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62249 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.225.190 waku 854c8593bc154f1b90fef0acc13dad1640589424781e07046c2cfd8e86058681
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 854c8593bc15. Setting up logs at ./log/docker/node1_2024-10-23_08-05-01__d0d287b4-215a-4931-9023-4088785628b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 62245
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62245/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62245/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.225.190/tcp/62246/p2p/16Uiu2HAmQ3qhEd48t7PkMwUyPBoQjEzFKaEPH4cFh7rJzz2E6X1W","/ip4/172.18.225.190/tcp/62247/ws/p2p/16Uiu2HAmQ3qhEd48t7PkMwUyPBoQjEzFKaEPH4cFh7rJzz2E6X1W"],"enrUri":"enr:-LO4QM7dnKvStQDqbjC3ah9La53eQWJAO-3ZGh7pqwYJCzAFD8XKJnewzJMKGF2RSAPAh3IG9Td7dMFzNAB71cicvesBgmlkgnY0gmlwhKwS4b6KbXVsdGlhZGRyc4wACgSsEuG-BvMn3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOpSyCXNUEEIxXziToa500Y-EWiSnW22NTk7Wi5NyeKTYN0Y3CC8yaDdWRwgvMohXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-23_08-05-01__d0d287b4-215a-4931-9023-4088785628b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.201.128
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['4449', '4450', '4451', '4452', '4453']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 4449:4449 -p 4450:4450 -p 4451:4451 -p 4452:4452 -p 4453:4453 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4451 --rest-port=4449 --tcp-port=4450 --discv5-udp-port=4452 --rest-address=0.0.0.0 --nat=extip:172.18.201.128 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=efbe1b8a0bf62eecdd7e9aedfa5720187dcf3efbaeee5d30b74ed2dac0c64d3c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4453 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QM7dnKvStQDqbjC3ah9La53eQWJAO-3ZGh7pqwYJCzAFD8XKJnewzJMKGF2RSAPAh3IG9Td7dMFzNAB71cicvesBgmlkgnY0gmlwhKwS4b6KbXVsdGlhZGRyc4wACgSsEuG-BvMn3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOpSyCXNUEEIxXziToa500Y-EWiSnW22NTk7Wi5NyeKTYN0Y3CC8yaDdWRwgvMohXdha3UyBQ --filternode=/ip4/172.18.225.190/tcp/62246/p2p/16Uiu2HAmQ3qhEd48t7PkMwUyPBoQjEzFKaEPH4cFh7rJzz2E6X1W
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.201.128 waku 7b09d9f9538157f13675ffaa01a3c7387c3283321c4f2864d1eab6e6ccb6e9b2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7b09d9f95381. Setting up logs at ./log/docker/node2_2024-10-23_08-05-01__d0d287b4-215a-4931-9023-4088785628b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 4449
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4449/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4449/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.201.128/tcp/4450/p2p/16Uiu2HAmUpUE6LpJT6r3kBpa5RkSCNx3MWMrow92MoipdFzArRce","/ip4/172.18.201.128/tcp/4451/ws/p2p/16Uiu2HAmUpUE6LpJT6r3kBpa5RkSCNx3MWMrow92MoipdFzArRce"],"enrUri":"enr:-LO4QBZCqeH7RPann_kM2PPQU7gG-hGystD57Yz-VP5FxfzYbAwwsZIqS2zituAOnSDYC1TIVhalfypcxKNXiTMcdCoBgmlkgnY0gmlwhKwSyYCKbXVsdGlhZGRyc4wACgSsEsmABhFj3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPwKLzM0SoBysltY2Q1q5NdpqNeNpLntQaJTiT1ZA19y4N0Y3CCEWKDdWRwghFkhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4449/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.225.190/tcp/62246/p2p/16Uiu2HAmQ3qhEd48t7PkMwUyPBoQjEzFKaEPH4cFh7rJzz2E6X1W"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62245/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4449/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "f38c7325-f11f-47b1-9d9f-de3bf4005495", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/2/2"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"f38c7325-f11f-47b1-9d9f-de3bf4005495","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62245/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4449/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1729670705361048576,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 854c8593bc15
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7b09d9f95381
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.