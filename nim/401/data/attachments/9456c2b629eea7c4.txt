[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_meta with id: 2024-10-23_08-09-49__5c519ce3-9c9e-409b-8c42-8235ad607f60
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-23_08-09-49__5c519ce3-9c9e-409b-8c42-8235ad607f60__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.161.48
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['38667', '38668', '38669', '38670', '38671']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 38667:38667 -p 38668:38668 -p 38669:38669 -p 38670:38670 -p 38671:38671 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38669 --rest-port=38667 --tcp-port=38668 --discv5-udp-port=38670 --rest-address=0.0.0.0 --nat=extip:172.18.161.48 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f077a7e3db4a5f3be6b99e96ec844cf31b1c7febcd8d921fc3a3a4eed0fac0ce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38671 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.161.48 waku 263d80508ce84329176dc218ea20b973ee34411ed0433aa5832e8a00b3fb1cf1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 263d80508ce8. Setting up logs at ./log/docker/receiving_node1_2024-10-23_08-09-49__5c519ce3-9c9e-409b-8c42-8235ad607f60__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 38667
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38667/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38667/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.161.48/tcp/38668/p2p/16Uiu2HAkw9qJc2UEBWjGzCo2hFdee1HfgXqG8cbTK2PaPyp6VjZL","/ip4/172.18.161.48/tcp/38669/ws/p2p/16Uiu2HAkw9qJc2UEBWjGzCo2hFdee1HfgXqG8cbTK2PaPyp6VjZL"],"enrUri":"enr:-LO4QH-_lzHWYke3o-1gBYpph57cUcKMEVP5jOkInxpDLzoQO8mkNizqIcauH3gy63ju3dVCWB8lYIlDpfhA1Hj3q2cBgmlkgnY0gmlwhKwSoTCKbXVsdGlhZGRyc4wACgSsEqEwBpcN3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIZqJ-7980Q3SHCxnZU8eArkV1_tMeXz2UHkS5qWzqbS4N0Y3CClwyDdWRwgpcOhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-23_08-09-49__5c519ce3-9c9e-409b-8c42-8235ad607f60__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.212.175
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['35438', '35439', '35440', '35441', '35442']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 35438:35438 -p 35439:35439 -p 35440:35440 -p 35441:35441 -p 35442:35442 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35440 --rest-port=35438 --tcp-port=35439 --discv5-udp-port=35441 --rest-address=0.0.0.0 --nat=extip:172.18.212.175 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ebfa8f2e0d443bf235af4af5dc82a59f8da8516aeeb5b540f901fb520fc3ecac --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35442 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.212.175 waku 870d6799795b82b832ac0aa5409b59f24b21f9d57224bc313d5717d844c1e984
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 870d6799795b. Setting up logs at ./log/docker/receiving_node2_2024-10-23_08-09-49__5c519ce3-9c9e-409b-8c42-8235ad607f60__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 35438
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35438/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35438/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.212.175/tcp/35439/p2p/16Uiu2HAmFpt6c3WCn4T7hZCZv5G58FjRoXnZP5SvsUTJCJPgdXuL","/ip4/172.18.212.175/tcp/35440/ws/p2p/16Uiu2HAmFpt6c3WCn4T7hZCZv5G58FjRoXnZP5SvsUTJCJPgdXuL"],"enrUri":"enr:-LO4QLRnslo7XZSXtv8sUsY6HB66BEjfyYLW4YiHxxa078AHZadiAkwSCbtRIyiXi9F4LIq2jPv9KujIfyrqN6AWujsBgmlkgnY0gmlwhKwS1K-KbXVsdGlhZGRyc4wACgSsEtSvBopw3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMvG8xh3aJTlptQdtY4nhReAdE26YTHUrTCLq9D2Fe7o4N0Y3CCim-DdWRwgopxhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35438/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.161.48/tcp/38668/p2p/16Uiu2HAkw9qJc2UEBWjGzCo2hFdee1HfgXqG8cbTK2PaPyp6VjZL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-23_08-09-49__5c519ce3-9c9e-409b-8c42-8235ad607f60__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.65.11
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['20137', '20138', '20139', '20140', '20141']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 20137:20137 -p 20138:20138 -p 20139:20139 -p 20140:20140 -p 20141:20141 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20139 --rest-port=20137 --tcp-port=20138 --discv5-udp-port=20140 --rest-address=0.0.0.0 --nat=extip:172.18.65.11 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=888347da0310324cbd823f72e7af3fc1e5a4c1a848b5a9eb0d9aa0ee69b7a1f2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20141 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QH-_lzHWYke3o-1gBYpph57cUcKMEVP5jOkInxpDLzoQO8mkNizqIcauH3gy63ju3dVCWB8lYIlDpfhA1Hj3q2cBgmlkgnY0gmlwhKwSoTCKbXVsdGlhZGRyc4wACgSsEqEwBpcN3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIZqJ-7980Q3SHCxnZU8eArkV1_tMeXz2UHkS5qWzqbS4N0Y3CClwyDdWRwgpcOhXdha3UyCQ --lightpushnode=/ip4/172.18.161.48/tcp/38668/p2p/16Uiu2HAkw9qJc2UEBWjGzCo2hFdee1HfgXqG8cbTK2PaPyp6VjZL --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.65.11 waku 9fc665b2556e851b9ec8dc5eeea506b0c15c35d19e5c3f6bb16f4b2a0939e39a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 9fc665b2556e. Setting up logs at ./log/docker/lightpush_node1_2024-10-23_08-09-49__5c519ce3-9c9e-409b-8c42-8235ad607f60__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 20137
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20137/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20137/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.65.11/tcp/20138/p2p/16Uiu2HAkxLsicYqELpY6bieHAPJv3CS1ZSBfHAEb2pqC8p9T6ztg","/ip4/172.18.65.11/tcp/20139/ws/p2p/16Uiu2HAkxLsicYqELpY6bieHAPJv3CS1ZSBfHAEb2pqC8p9T6ztg"],"enrUri":"enr:-LO4QBZJWVq7bfdHefHBaY4MpeYyLjJWS7naEE-W7LX079K_PBio5BDkHHieTqKEvrwq52s6Qzc79f5p138sKmunnHIBgmlkgnY0gmlwhKwSQQuKbXVsdGlhZGRyc4wACgSsEkELBk6r3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIrWG3jPJv5XzfQxj4L9T9W-5iAotce4K8xxgWVrmRaYYN0Y3CCTqqDdWRwgk6shXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20137/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.161.48/tcp/38668/p2p/16Uiu2HAkw9qJc2UEBWjGzCo2hFdee1HfgXqG8cbTK2PaPyp6VjZL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20137/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.212.175/tcp/35439/p2p/16Uiu2HAmFpt6c3WCn4T7hZCZv5G58FjRoXnZP5SvsUTJCJPgdXuL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38667/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35438/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20137/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1729670995202434560, "meta": "Light push works!!"}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:20137/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 263d80508ce8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 870d6799795b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9fc665b2556e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.