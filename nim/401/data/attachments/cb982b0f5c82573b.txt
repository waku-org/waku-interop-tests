[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_content_topic[/app/29/sometopic/someencoding] with id: 2024-10-23_08-18-52__6bca3ab2-94ce-4202-a2ed-6dbd64bc6d93
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-23_08-18-52__6bca3ab2-94ce-4202-a2ed-6dbd64bc6d93__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.249.245
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['48347', '48348', '48349', '48350', '48351']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 48347:48347 -p 48348:48348 -p 48349:48349 -p 48350:48350 -p 48351:48351 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48349 --rest-port=48347 --tcp-port=48348 --discv5-udp-port=48350 --rest-address=0.0.0.0 --nat=extip:172.18.249.245 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=f3eadaefee19e180d357cfc1b6aebdde9cbbf80e887e28fabaf18c6bdfde20ad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48351 --metrics-logging=true --relay=true --filter=true --content-topic=/app/29/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.249.245 waku f1e584aed9162a379ae8f486d21a32ed43b09862f9fc971610169fd352d01401
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f1e584aed916. Setting up logs at ./log/docker/node1_2024-10-23_08-18-52__6bca3ab2-94ce-4202-a2ed-6dbd64bc6d93__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 48347
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48347/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48347/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.249.245/tcp/48348/p2p/16Uiu2HAkxZcGRjHa8ZyWUBZrhonEjGSVHLpRzWFKgSzFwnDo2Rt2","/ip4/172.18.249.245/tcp/48349/ws/p2p/16Uiu2HAkxZcGRjHa8ZyWUBZrhonEjGSVHLpRzWFKgSzFwnDo2Rt2"],"enrUri":"enr:-LO4QNQshnRbHtmJ_eXdNPLKzuBIi0bUVwGEL3uPL_KiuuzzBK2PI055i6KsCiLwrOH2Nkln8GZtTGfotG1a-kqzAwYBgmlkgnY0gmlwhKwS-fWKbXVsdGlhZGRyc4wACgSsEvn1Brzd3QOCcnOFAAIBAACJc2VjcDI1NmsxoQIum4I6uv93gq8kPL_S9wB_wFoUHOUJTr_RTNIazzhBt4N0Y3CCvNyDdWRwgrzehXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-23_08-18-52__6bca3ab2-94ce-4202-a2ed-6dbd64bc6d93__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.150.214
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['26177', '26178', '26179', '26180', '26181']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 26177:26177 -p 26178:26178 -p 26179:26179 -p 26180:26180 -p 26181:26181 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26179 --rest-port=26177 --tcp-port=26178 --discv5-udp-port=26180 --rest-address=0.0.0.0 --nat=extip:172.18.150.214 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=8b2ecde398dbca5e8ecad3e3af2d50da9ce58ac0ac7b11059d91815ef2a0e8cf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26181 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QNQshnRbHtmJ_eXdNPLKzuBIi0bUVwGEL3uPL_KiuuzzBK2PI055i6KsCiLwrOH2Nkln8GZtTGfotG1a-kqzAwYBgmlkgnY0gmlwhKwS-fWKbXVsdGlhZGRyc4wACgSsEvn1Brzd3QOCcnOFAAIBAACJc2VjcDI1NmsxoQIum4I6uv93gq8kPL_S9wB_wFoUHOUJTr_RTNIazzhBt4N0Y3CCvNyDdWRwgrzehXdha3UyBQ --content-topic=/app/29/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.150.214 waku 85dbe054ee7cce26bfc2ef0d8ae312108f5c29d87bd514ce4c56eac2ee09b561
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 85dbe054ee7c. Setting up logs at ./log/docker/node2_2024-10-23_08-18-52__6bca3ab2-94ce-4202-a2ed-6dbd64bc6d93__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 26177
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26177/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26177/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.150.214/tcp/26178/p2p/16Uiu2HAmTTVdihuyYt9tENo885uNReyveRvbBsXZ2fkd5nDrgsJh","/ip4/172.18.150.214/tcp/26179/ws/p2p/16Uiu2HAmTTVdihuyYt9tENo885uNReyveRvbBsXZ2fkd5nDrgsJh"],"enrUri":"enr:-LO4QOdZRziBrkE-tVKL5E6SLui8qDKFigw57MUI9HgU0LskFMzMl6uPYih4MHn9Rw_oKkyoa60lpfnXDcCYDMDwLN8BgmlkgnY0gmlwhKwSltaKbXVsdGlhZGRyc4wACgSsEpbWBmZD3QOCcnOFAAIBAACJc2VjcDI1NmsxoQPb7XHkcDWCEYILIT9fEj7O4gyEC0p-WR5onQDjcn6Z8oN0Y3CCZkKDdWRwgmZEhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26177/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.249.245/tcp/48348/p2p/16Uiu2HAkxZcGRjHa8ZyWUBZrhonEjGSVHLpRzWFKgSzFwnDo2Rt2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48347/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/29/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26177/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/29/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48347/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48347/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/29/sometopic/someencoding","version":0,"timestamp":1729671537267795200,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26177/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/29/sometopic/someencoding","version":0,"timestamp":1729671537267795200,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f1e584aed916
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 85dbe054ee7c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.