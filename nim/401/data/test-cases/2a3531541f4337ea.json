{"uid":"2a3531541f4337ea","name":"test_publish_after_node1_restarts","fullName":"tests.relay.test_publish.TestRelayPublish#test_publish_after_node1_restarts","historyId":"ac4c595ebfa5f8d963dda5d51f886384","time":{"start":1729671285760,"stop":1729671291456,"duration":5696},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1729670460168,"stop":1729670460168,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors","time":{"start":1729671280646,"stop":1729671280646,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1729671280646,"stop":1729671280646,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1729671280646,"stop":1729671280646,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1729671280647,"stop":1729671280648,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1729671280647,"stop":1729671280647,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1729671280647,"stop":1729671280647,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"relay_setup","time":{"start":1729671280648,"stop":1729671280648,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_relay_nodes","time":{"start":1729671280648,"stop":1729671285579,"duration":4931},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1729671285504,"stop":1729671285579,"duration":75},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.relay.test_publish.TestRelayPublish object at 0x7f5642100260>, <src.node.waku_node.WakuNode object at 0x7f56421002c0>, ['/ip4/172.18.250.227/tcp/6794/p2p/16Uiu2HAm4bASVwee3N1MavRxu2A5SJ88poiuNTNNzjY1BWrHu8xw'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_main_relay_nodes","time":{"start":1729671285579,"stop":1729671285613,"duration":34},"status":"passed","steps":[{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1729671285579,"stop":1729671285613,"duration":34},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7f564109f020>, <src.node.waku_node.WakuNode object at 0x7f56421002c0>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"relay_warm_up","time":{"start":1729671285613,"stop":1729671285759,"duration":146},"status":"passed","steps":[{"name":"wait_for_published_message_to_reach_relay_peer","time":{"start":1729671285613,"stop":1729671285759,"duration":146},"status":"passed","steps":[{"name":"check_published_message_reaches_relay_peer","time":{"start":1729671285613,"stop":1729671285759,"duration":146},"status":"passed","steps":[{"name":"assert_received_message","time":{"start":1729671285754,"stop":1729671285754,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1729671285613082624}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1729671285759,"stop":1729671285759,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1729671285613082624}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1729671285613082624}"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"timeout_duration","value":"120"},{"name":"time_between_retries","value":"1"},{"name":"pubsub_topic","value":"None"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"status":"passed","steps":[{"name":"check_published_message_reaches_relay_peer","time":{"start":1729671285760,"stop":1729671285882,"duration":122},"status":"passed","steps":[{"name":"create_message","time":{"start":1729671285760,"stop":1729671285760,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1729671285876,"stop":1729671285876,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1729671285760332544}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1729671285882,"stop":1729671285882,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1729671285760332544}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"None"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_and_publish_with_retry","time":{"start":1729671290113,"stop":1729671291456,"duration":1343},"status":"passed","steps":[{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1729671290113,"stop":1729671290214,"duration":101},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7f564109f020>, <src.node.waku_node.WakuNode object at 0x7f56421002c0>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_published_message_reaches_relay_peer","time":{"start":1729671290215,"stop":1729671290330,"duration":115},"status":"failed","statusMessage":"AssertionError: Peer NODE_2:wakuorg/nwaku:latest couldn't find any messages\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/relay.py\", line 125, in check_published_message_reaches_relay_peer\n    assert get_messages_response, f\"Peer NODE_{index + 1}:{peer.image} couldn't find any messages\"\n           ^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"create_message","time":{"start":1729671290215,"stop":1729671290215,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1729671290326,"stop":1729671290327,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1729671290214644992}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"None"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1729671291331,"stop":1729671291337,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7f564109f020>, <src.node.waku_node.WakuNode object at 0x7f56421002c0>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_published_message_reaches_relay_peer","time":{"start":1729671291337,"stop":1729671291456,"duration":119},"status":"passed","steps":[{"name":"create_message","time":{"start":1729671291338,"stop":1729671291338,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1729671291450,"stop":1729671291450,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1729671291337611520}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1729671291455,"stop":1729671291456,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1729671291337611520}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"None"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<tests.relay.test_publish.TestRelayPublish object at 0x7f5642100260>, [<src.node.waku_node.WakuNode object at 0x7f564109f020>, <src.node.waku_node.WakuNode object at 0x7f56421002c0>], ['/waku/2/rs/3/1'])"}],"shouldDisplayMessage":false,"stepsCount":9,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"d10895ee5e5ceb47","name":"log","source":"d10895ee5e5ceb47.txt","type":"text/plain","size":19094}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":14,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1729671291458,"stop":1729671291463,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1729671291464,"stop":1729671297662,"duration":6198},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors::0","time":{"start":1729671297663,"stop":1729671297687,"duration":24},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1729671297687,"stop":1729671297687,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1729672597175,"stop":1729672597175,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"flaky(reruns=5)"},{"name":"tag","value":"@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')"},{"name":"parentSuite","value":"tests.relay"},{"name":"suite","value":"test_publish"},{"name":"subSuite","value":"TestRelayPublish"},{"name":"host","value":"fv-az1393-92"},{"name":"thread","value":"2156-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.relay.test_publish"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":0,"passed":87,"unknown":0,"total":87},"items":[{"uid":"69ac1f6148a7f2b7","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/394//#testresult/69ac1f6148a7f2b7","status":"passed","time":{"start":1729138525567,"stop":1729138530994,"duration":5427}},{"uid":"62b99f13df3b1d98","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/393//#testresult/62b99f13df3b1d98","status":"passed","time":{"start":1729051965388,"stop":1729051970864,"duration":5476}},{"uid":"2b0cb3674469624a","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/392//#testresult/2b0cb3674469624a","status":"passed","time":{"start":1728966204216,"stop":1728966209786,"duration":5570}},{"uid":"5767f43b4c9386c6","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/391//#testresult/5767f43b4c9386c6","status":"passed","time":{"start":1728879964359,"stop":1728879969496,"duration":5137}},{"uid":"d8e54531cf25b1ed","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/390//#testresult/d8e54531cf25b1ed","status":"passed","time":{"start":1728793515809,"stop":1728793520983,"duration":5174}},{"uid":"7ce80ef80182b4c8","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/389//#testresult/7ce80ef80182b4c8","status":"passed","time":{"start":1728707131880,"stop":1728707137311,"duration":5431}},{"uid":"14e80eb57cd1bbc","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/388//#testresult/14e80eb57cd1bbc","status":"passed","time":{"start":1728620744313,"stop":1728620749863,"duration":5550}},{"uid":"bb7ae19b8dffda4a","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/387//#testresult/bb7ae19b8dffda4a","status":"passed","time":{"start":1728534344782,"stop":1728534350223,"duration":5441}},{"uid":"5e905902de30f398","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/385//#testresult/5e905902de30f398","status":"passed","time":{"start":1728361549234,"stop":1728361554472,"duration":5238}},{"uid":"661ea87a894ef21d","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/384//#testresult/661ea87a894ef21d","status":"passed","time":{"start":1728275003563,"stop":1728275009677,"duration":6114}},{"uid":"218b509030101ba3","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/383//#testresult/218b509030101ba3","status":"passed","time":{"start":1728188536117,"stop":1728188542085,"duration":5968}},{"uid":"771a5ce8604b6860","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/382//#testresult/771a5ce8604b6860","status":"passed","time":{"start":1728102169211,"stop":1728102174479,"duration":5268}},{"uid":"5e77c76ecfc757e","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/381//#testresult/5e77c76ecfc757e","status":"passed","time":{"start":1728015789563,"stop":1728015794912,"duration":5349}},{"uid":"6037a3780a21a54f","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/380//#testresult/6037a3780a21a54f","status":"passed","time":{"start":1727941702927,"stop":1727941708288,"duration":5361}},{"uid":"904b0b3182ab7b8f","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/379//#testresult/904b0b3182ab7b8f","status":"passed","time":{"start":1727929420301,"stop":1727929426307,"duration":6006}},{"uid":"d86a46e1bbd56a5e","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/378//#testresult/d86a46e1bbd56a5e","status":"passed","time":{"start":1727842972365,"stop":1727842978181,"duration":5816}},{"uid":"85980149fd603bd8","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/377//#testresult/85980149fd603bd8","status":"passed","time":{"start":1727756598964,"stop":1727756604081,"duration":5117}},{"uid":"f6708c41f7542845","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/376//#testresult/f6708c41f7542845","status":"passed","time":{"start":1727670222826,"stop":1727670228835,"duration":6009}},{"uid":"2635006b6bb1a7ec","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/375//#testresult/2635006b6bb1a7ec","status":"passed","time":{"start":1727583745932,"stop":1727583751106,"duration":5174}},{"uid":"8437bb3736e55444","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/374//#testresult/8437bb3736e55444","status":"passed","time":{"start":1727497323670,"stop":1727497329223,"duration":5553}}]},"tags":["@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')","flaky(reruns=5)"]},"source":"2a3531541f4337ea.json","parameterValues":[]}