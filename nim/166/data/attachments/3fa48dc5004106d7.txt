[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_relay_and_store with id: 2024-04-26_04-20-35__ce83c4d7-f4aa-4ef1-972d-edcd0f4cbc43
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-04-26_04-20-35__ce83c4d7-f4aa-4ef1-972d-edcd0f4cbc43__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.175.56
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['56337', '56338', '56339', '56340', '56341']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:313 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:113 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 56337:56337 -p 56338:56338 -p 56339:56339 -p 56340:56340 -p 56341:56341 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56339 --rest-port=56337 --tcp-port=56338 --discv5-udp-port=56340 --rest-address=0.0.0.0 --nat=extip:172.18.175.56 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56341 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.175.56 waku ffe0b32de81949487370490c986ab3fc343c94b8d6cde9a8f877e3d36ed90823
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID ffe0b32de819. Setting up logs at ./log/docker/publishing_node1_2024-04-26_04-20-35__ce83c4d7-f4aa-4ef1-972d-edcd0f4cbc43__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:119 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 56337
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56337/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.175.56/tcp/56338/p2p/16Uiu2HAmAw8YoYq72rUS4QgGQejXQzeBUetNaemrmTyVHKdaV6Qf","/ip4/172.18.175.56/tcp/56339/ws/p2p/16Uiu2HAmAw8YoYq72rUS4QgGQejXQzeBUetNaemrmTyVHKdaV6Qf"],"enrUri":"enr:-LO4QCmy34Bagy9h0KXEOVjT7Q9tj7NTJTbVdHMntZ6Arl-aIGx_i8g5KbXvSA85V5y3ts5UHPf6BmIVFghNzibALsEBgmlkgnY0gmlwhKwSrziKbXVsdGlhZGRyc4wACgSsEq84BtwT3QOCcnOFAAABAACJc2VjcDI1NmsxoQLmazBt1DBjzHj5HKIF-Z4xCpFfJYKyePa5HONoyvL5gIN0Y3CC3BKDdWRwgtwUhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:189 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-04-26_04-20-35__ce83c4d7-f4aa-4ef1-972d-edcd0f4cbc43__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.36.55
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['6397', '6398', '6399', '6400', '6401']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:313 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:113 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 6397:6397 -p 6398:6398 -p 6399:6399 -p 6400:6400 -p 6401:6401 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6399 --rest-port=6397 --tcp-port=6398 --discv5-udp-port=6400 --rest-address=0.0.0.0 --nat=extip:172.18.36.55 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6401 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QCmy34Bagy9h0KXEOVjT7Q9tj7NTJTbVdHMntZ6Arl-aIGx_i8g5KbXvSA85V5y3ts5UHPf6BmIVFghNzibALsEBgmlkgnY0gmlwhKwSrziKbXVsdGlhZGRyc4wACgSsEq84BtwT3QOCcnOFAAABAACJc2VjcDI1NmsxoQLmazBt1DBjzHj5HKIF-Z4xCpFfJYKyePa5HONoyvL5gIN0Y3CC3BKDdWRwgtwUhXdha3UyAw --storenode=/ip4/172.18.175.56/tcp/56338/p2p/16Uiu2HAmAw8YoYq72rUS4QgGQejXQzeBUetNaemrmTyVHKdaV6Qf --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.36.55 waku 59dfa219327e7e960572dbcb2b24c1bb15052446ebb970599b161e5a89d0a361
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 59dfa219327e. Setting up logs at ./log/docker/store_node1_2024-04-26_04-20-35__ce83c4d7-f4aa-4ef1-972d-edcd0f4cbc43__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:119 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 6397
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6397/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.36.55/tcp/6398/p2p/16Uiu2HAm48sEqvyELgYaYUK6YQq3a4iFrJNBwJUNwFa5HNNiemoK","/ip4/172.18.36.55/tcp/6399/ws/p2p/16Uiu2HAm48sEqvyELgYaYUK6YQq3a4iFrJNBwJUNwFa5HNNiemoK"],"enrUri":"enr:-LO4QJLghiSgjn7QR9G8Un--Uc7KaByBNGF8z2Dl625TarSWZaefKkdcOjCGpXKmvI4GQY8_rUufwV_GCvoE59qa3JMBgmlkgnY0gmlwhKwSJDeKbXVsdGlhZGRyc4wACgSsEiQ3Bhj_3QOCcnOFAAABAACJc2VjcDI1NmsxoQKBawosUYVlMiNJIS4gmNEHgILWk-YHn4wwpnvQFVBzZoN0Y3CCGP6DdWRwghkAhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:189 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6397/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.175.56/tcp/56338/p2p/16Uiu2HAmAw8YoYq72rUS4QgGQejXQzeBUetNaemrmTyVHKdaV6Qf"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56337/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6397/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56337/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56337/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714105247647304448,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Stopping container with id ffe0b32de819
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Stopping container with id 59dfa219327e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-04-26_04-20-35__ce83c4d7-f4aa-4ef1-972d-edcd0f4cbc43__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-04-26_04-20-35__ce83c4d7-f4aa-4ef1-972d-edcd0f4cbc43__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_relay_and_store with id: 2024-04-26_04-20-51__53a3e611-dada-4f2f-85d2-81ffbb268c6f
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-04-26_04-20-51__53a3e611-dada-4f2f-85d2-81ffbb268c6f__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.36.9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['11299', '11300', '11301', '11302', '11303']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:313 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:113 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 11299:11299 -p 11300:11300 -p 11301:11301 -p 11302:11302 -p 11303:11303 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11301 --rest-port=11299 --tcp-port=11300 --discv5-udp-port=11302 --rest-address=0.0.0.0 --nat=extip:172.18.36.9 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11303 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.36.9 waku d47c43ffca514b04157973d89213af724f068bf081b0a9f0ef51b881e59b06dd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID d47c43ffca51. Setting up logs at ./log/docker/publishing_node1_2024-04-26_04-20-51__53a3e611-dada-4f2f-85d2-81ffbb268c6f__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:119 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 11299
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11299/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.36.9/tcp/11300/p2p/16Uiu2HAm7v6TVpm1F5kihEzSbzKiHnxMpkTaG6BcPfsDFSEz6fPJ","/ip4/172.18.36.9/tcp/11301/ws/p2p/16Uiu2HAm7v6TVpm1F5kihEzSbzKiHnxMpkTaG6BcPfsDFSEz6fPJ"],"enrUri":"enr:-LO4QA0c6vZXb1LT1ARK1gB82Z1uLbXhPE-AbKg2-8UED8KLK-FakUQ32G5ZlwRJvmVodlrqlVMkM8SjfihInQo8g0wBgmlkgnY0gmlwhKwSJAmKbXVsdGlhZGRyc4wACgSsEiQJBiwl3QOCcnOFAAABAACJc2VjcDI1NmsxoQK5lC7IlrD4OLcykjY4ie-_EGYRQTQ0V6gW7qusoPyEHYN0Y3CCLCSDdWRwgiwmhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:189 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-04-26_04-20-51__53a3e611-dada-4f2f-85d2-81ffbb268c6f__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.180.132
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['16604', '16605', '16606', '16607', '16608']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:313 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:113 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 16604:16604 -p 16605:16605 -p 16606:16606 -p 16607:16607 -p 16608:16608 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16606 --rest-port=16604 --tcp-port=16605 --discv5-udp-port=16607 --rest-address=0.0.0.0 --nat=extip:172.18.180.132 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16608 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QA0c6vZXb1LT1ARK1gB82Z1uLbXhPE-AbKg2-8UED8KLK-FakUQ32G5ZlwRJvmVodlrqlVMkM8SjfihInQo8g0wBgmlkgnY0gmlwhKwSJAmKbXVsdGlhZGRyc4wACgSsEiQJBiwl3QOCcnOFAAABAACJc2VjcDI1NmsxoQK5lC7IlrD4OLcykjY4ie-_EGYRQTQ0V6gW7qusoPyEHYN0Y3CCLCSDdWRwgiwmhXdha3UyAw --storenode=/ip4/172.18.36.9/tcp/11300/p2p/16Uiu2HAm7v6TVpm1F5kihEzSbzKiHnxMpkTaG6BcPfsDFSEz6fPJ --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.180.132 waku d0bed9f2f77816c7ce7e0d89405da22af92a3e680a39d8c5e070bc897e0b0638
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID d0bed9f2f778. Setting up logs at ./log/docker/store_node1_2024-04-26_04-20-51__53a3e611-dada-4f2f-85d2-81ffbb268c6f__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:119 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 16604
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16604/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.180.132/tcp/16605/p2p/16Uiu2HAm7fKKt33okhXSAD5XUKBSww7k4PwvFKk9H6dGmwTu4nrr","/ip4/172.18.180.132/tcp/16606/ws/p2p/16Uiu2HAm7fKKt33okhXSAD5XUKBSww7k4PwvFKk9H6dGmwTu4nrr"],"enrUri":"enr:-LO4QH9yNBdiRu9tPbs-P8hK79XZXhIHUu-baDmxeY1QERXqPrIHHw4SseiJjYEFO74g41KVHIlFTj8JKhCx-ucgG7YBgmlkgnY0gmlwhKwStISKbXVsdGlhZGRyc4wACgSsErSEBkDe3QOCcnOFAAABAACJc2VjcDI1NmsxoQK1ywVxqxrSgcSRXLbqOhBZvpoFjToZyNHycGLz9-9tF4N0Y3CCQN2DdWRwgkDfhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:189 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16604/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.36.9/tcp/11300/p2p/16Uiu2HAm7v6TVpm1F5kihEzSbzKiHnxMpkTaG6BcPfsDFSEz6fPJ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11299/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16604/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11299/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11299/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714105263646448384,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Stopping container with id d47c43ffca51
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Stopping container with id d0bed9f2f778
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-04-26_04-20-51__53a3e611-dada-4f2f-85d2-81ffbb268c6f__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-04-26_04-20-51__53a3e611-dada-4f2f-85d2-81ffbb268c6f__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_relay_and_store with id: 2024-04-26_04-21-07__491753cf-e4b4-4c00-bcdf-99c5bd450782
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-04-26_04-21-07__491753cf-e4b4-4c00-bcdf-99c5bd450782__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.155.194
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['18667', '18668', '18669', '18670', '18671']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:313 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:113 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 18667:18667 -p 18668:18668 -p 18669:18669 -p 18670:18670 -p 18671:18671 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18669 --rest-port=18667 --tcp-port=18668 --discv5-udp-port=18670 --rest-address=0.0.0.0 --nat=extip:172.18.155.194 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18671 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.155.194 waku 5d30f7a23d8d796589bcc1b224c1fe35fec6d3b2e2bc8ce880cdd95fe07fe730
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 5d30f7a23d8d. Setting up logs at ./log/docker/publishing_node1_2024-04-26_04-21-07__491753cf-e4b4-4c00-bcdf-99c5bd450782__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:119 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 18667
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18667/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.155.194/tcp/18668/p2p/16Uiu2HAmJrpUGXZsC6QFw2oVzbrNHCU7ckZEwep1LPpmxuLrybaE","/ip4/172.18.155.194/tcp/18669/ws/p2p/16Uiu2HAmJrpUGXZsC6QFw2oVzbrNHCU7ckZEwep1LPpmxuLrybaE"],"enrUri":"enr:-LO4QPlPThL4UxHiaMEgSEfI7iSjNPQeTvoBdZzeupNnPRbxdkP_sz5MAiADMPySOs0jDTOfKhIqp7sbpPWeW6xExzUBgmlkgnY0gmlwhKwSm8KKbXVsdGlhZGRyc4wACgSsEpvCBkjt3QOCcnOFAAABAACJc2VjcDI1NmsxoQNcLeuXZmK8bn_mx8mVHECRZ7vCVjTb7CSSWJ50kjDCf4N0Y3CCSOyDdWRwgkjuhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:189 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-04-26_04-21-07__491753cf-e4b4-4c00-bcdf-99c5bd450782__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.0.165
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['48029', '48030', '48031', '48032', '48033']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:313 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:113 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 48029:48029 -p 48030:48030 -p 48031:48031 -p 48032:48032 -p 48033:48033 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48031 --rest-port=48029 --tcp-port=48030 --discv5-udp-port=48032 --rest-address=0.0.0.0 --nat=extip:172.18.0.165 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48033 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QPlPThL4UxHiaMEgSEfI7iSjNPQeTvoBdZzeupNnPRbxdkP_sz5MAiADMPySOs0jDTOfKhIqp7sbpPWeW6xExzUBgmlkgnY0gmlwhKwSm8KKbXVsdGlhZGRyc4wACgSsEpvCBkjt3QOCcnOFAAABAACJc2VjcDI1NmsxoQNcLeuXZmK8bn_mx8mVHECRZ7vCVjTb7CSSWJ50kjDCf4N0Y3CCSOyDdWRwgkjuhXdha3UyAw --storenode=/ip4/172.18.155.194/tcp/18668/p2p/16Uiu2HAmJrpUGXZsC6QFw2oVzbrNHCU7ckZEwep1LPpmxuLrybaE --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.0.165 waku d5327eea4346c55ef1c7fbb491d8fc2f0c1517d05476a669e91d03ccc7779560
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID d5327eea4346. Setting up logs at ./log/docker/store_node1_2024-04-26_04-21-07__491753cf-e4b4-4c00-bcdf-99c5bd450782__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:119 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 48029
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48029/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.0.165/tcp/48030/p2p/16Uiu2HAmFWezFXJY1D4YkY4mzqr8U4jF9LrkyTVA2QtBGSDePk2T","/ip4/172.18.0.165/tcp/48031/ws/p2p/16Uiu2HAmFWezFXJY1D4YkY4mzqr8U4jF9LrkyTVA2QtBGSDePk2T"],"enrUri":"enr:-LO4QNl3axIGzXW-kTktBWS8vu69mrZLxohXULm7tm_EqUEnAjhB2bGcNSvT0z3eq3aDDio73wQ-W85onekkC1sz6fUBgmlkgnY0gmlwhKwSAKWKbXVsdGlhZGRyc4wACgSsEgClBruf3QOCcnOFAAABAACJc2VjcDI1NmsxoQMqcIVSlTzYW3QDtVHUAJC5-RhUuC-4-V_pDwotXKkBYIN0Y3CCu56DdWRwgrughXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:189 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48029/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.155.194/tcp/18668/p2p/16Uiu2HAmJrpUGXZsC6QFw2oVzbrNHCU7ckZEwep1LPpmxuLrybaE"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18667/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48029/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18667/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18667/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714105279204539648,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Stopping container with id 5d30f7a23d8d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Stopping container with id d5327eea4346
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-04-26_04-21-07__491753cf-e4b4-4c00-bcdf-99c5bd450782__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-04-26_04-21-07__491753cf-e4b4-4c00-bcdf-99c5bd450782__harbor.status.im_wakuorg_nwaku:latest.log