[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_2_lightpush_nodes_and_1_receiving_node with id: 2024-04-26_04-13-58__2f67e8cf-96ab-4bf3-a0d6-7294d1a81aeb
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-04-26_04-13-58__2f67e8cf-96ab-4bf3-a0d6-7294d1a81aeb__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.67.163
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['57435', '57436', '57437', '57438', '57439']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:313 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:113 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 57435:57435 -p 57436:57436 -p 57437:57437 -p 57438:57438 -p 57439:57439 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57437 --rest-port=57435 --tcp-port=57436 --discv5-udp-port=57438 --rest-address=0.0.0.0 --nat=extip:172.18.67.163 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57439 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.67.163 waku 0c9342ddf540925a846ffd779f13970d264738011e3dcd281c8905c6636964f0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 0c9342ddf540. Setting up logs at ./log/docker/receiving_node1_2024-04-26_04-13-58__2f67e8cf-96ab-4bf3-a0d6-7294d1a81aeb__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:119 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 57435
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57435/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.67.163/tcp/57436/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.67.163/tcp/57437/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QELbbibcZVuMIgXDkFO75B9ey_eDfFscxBWjTuInp4htPglG6zvRcPoSXqq9BW6qZ2FYO2IMQWd83YOoAck4nu8BgmlkgnY0gmlwhKwSQ6OKbXVsdGlhZGRyc4wACgSsEkOjBuBd3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CC4FyDdWRwguBehXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:189 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-04-26_04-13-58__2f67e8cf-96ab-4bf3-a0d6-7294d1a81aeb__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.80.175
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['42564', '42565', '42566', '42567', '42568']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:313 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:113 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 42564:42564 -p 42565:42565 -p 42566:42566 -p 42567:42567 -p 42568:42568 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42566 --rest-port=42564 --tcp-port=42565 --discv5-udp-port=42567 --rest-address=0.0.0.0 --nat=extip:172.18.80.175 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42568 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QELbbibcZVuMIgXDkFO75B9ey_eDfFscxBWjTuInp4htPglG6zvRcPoSXqq9BW6qZ2FYO2IMQWd83YOoAck4nu8BgmlkgnY0gmlwhKwSQ6OKbXVsdGlhZGRyc4wACgSsEkOjBuBd3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CC4FyDdWRwguBehXdha3UyCQ --lightpushnode=/ip4/172.18.67.163/tcp/57436/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.80.175 waku 56739e3888ad3fec84327bb536e2751bf3904c0f123aec7d348b362e161cf6c2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 56739e3888ad. Setting up logs at ./log/docker/lightpush_node1_2024-04-26_04-13-58__2f67e8cf-96ab-4bf3-a0d6-7294d1a81aeb__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:119 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 42564
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42564/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.80.175/tcp/42565/p2p/16Uiu2HAm2FAzzWUL2hWTz4MuENZVFjkCYfBVJivhAe3y5EMjvwb8","/ip4/172.18.80.175/tcp/42566/ws/p2p/16Uiu2HAm2FAzzWUL2hWTz4MuENZVFjkCYfBVJivhAe3y5EMjvwb8"],"enrUri":"enr:-LO4QJVqCKSphIvLn12g2wNj4HhYgww30ZnMPhTlw8RMOwSvFzwHco5Z2APvVHy0DeuvD1Cy9F5R4oVlAzuQ2NMqR-MBgmlkgnY0gmlwhKwSUK-KbXVsdGlhZGRyc4wACgSsElCvBqZG3QOCcnOFAAABAACJc2VjcDI1NmsxoQJlUTu9e21lH073y-S9QSqEHPtLZsJtg5bFBABaJWZv-4N0Y3CCpkWDdWRwgqZHhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:189 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42564/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.67.163/tcp/57436/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/lightpush_node2_2024-04-26_04-13-58__2f67e8cf-96ab-4bf3-a0d6-7294d1a81aeb__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.254.162
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['28661', '28662', '28663', '28664', '28665']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:313 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:113 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 28661:28661 -p 28662:28662 -p 28663:28663 -p 28664:28664 -p 28665:28665 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28663 --rest-port=28661 --tcp-port=28662 --discv5-udp-port=28664 --rest-address=0.0.0.0 --nat=extip:172.18.254.162 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28665 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QELbbibcZVuMIgXDkFO75B9ey_eDfFscxBWjTuInp4htPglG6zvRcPoSXqq9BW6qZ2FYO2IMQWd83YOoAck4nu8BgmlkgnY0gmlwhKwSQ6OKbXVsdGlhZGRyc4wACgSsEkOjBuBd3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CC4FyDdWRwguBehXdha3UyCQ --lightpushnode=/ip4/172.18.67.163/tcp/57436/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.254.162 waku 29a68a30978d0d41316960397c14e8130ad5d5a343f28296281d5429b0ab95e5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 29a68a30978d. Setting up logs at ./log/docker/lightpush_node2_2024-04-26_04-13-58__2f67e8cf-96ab-4bf3-a0d6-7294d1a81aeb__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:119 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 28661
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28661/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.254.162/tcp/28662/p2p/16Uiu2HAkvhTr5upFmp7qPoDvsQYqdTYqzaVAaEPrHSDzf8QLgJsr","/ip4/172.18.254.162/tcp/28663/ws/p2p/16Uiu2HAkvhTr5upFmp7qPoDvsQYqdTYqzaVAaEPrHSDzf8QLgJsr"],"enrUri":"enr:-LO4QEr0KHXEBIUjY3nRdX9z7VaOC5Z135JmdCUShCvw4LF3avZlQ9pCPjAMdhnMjfyP8Bpc4e0F_z9GkJkwGEJt0IQBgmlkgnY0gmlwhKwS_qKKbXVsdGlhZGRyc4wACgSsEv6iBm_33QOCcnOFAAABAACJc2VjcDI1NmsxoQIS50LbcocaWlDBWaqMELAn2hwITJXrrc_KEoZHmV-wUYN0Y3CCb_aDdWRwgm_4hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:189 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28661/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.67.163/tcp/57436/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57435/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42564/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/0/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1714104844265508352}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:harbor.status.im/wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57435/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1714104844265508352,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28661/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/0/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1714104844377866752}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:harbor.status.im/wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57435/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1714104844377866752,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Stopping container with id 0c9342ddf540
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Stopping container with id 56739e3888ad
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Stopping container with id 29a68a30978d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Container stopped.