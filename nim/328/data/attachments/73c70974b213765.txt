[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_sender_uses_auto_api_receiver_uses_regular_api with id: 2024-08-23_04-28-42__a1c78d0b-db6f-47cc-98b2-2fc707b6037e
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-23_04-28-42__a1c78d0b-db6f-47cc-98b2-2fc707b6037e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.126.151
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['56083', '56084', '56085', '56086', '56087']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 56083:56083 -p 56084:56084 -p 56085:56085 -p 56086:56086 -p 56087:56087 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56085 --rest-port=56083 --tcp-port=56084 --discv5-udp-port=56086 --rest-address=0.0.0.0 --nat=extip:172.18.126.151 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=d2d66ea3aab0aec1c9ecd62647ccf20a92bbccacabdfc8e2ad3ae5bebb5cce8f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56087 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.126.151 waku 18dab780f38f8e1e67815b1eb8e2fdfcb2bdcfaec202908631912cdadf46d84f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 18dab780f38f. Setting up logs at ./log/docker/node1_2024-08-23_04-28-42__a1c78d0b-db6f-47cc-98b2-2fc707b6037e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 56083
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56083/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56083/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.126.151/tcp/56084/p2p/16Uiu2HAmAPpTWfpSJxt3TcyRFaiKm8RZSMXfEDruNcG1o5a7bw9x","/ip4/172.18.126.151/tcp/56085/ws/p2p/16Uiu2HAmAPpTWfpSJxt3TcyRFaiKm8RZSMXfEDruNcG1o5a7bw9x"],"enrUri":"enr:-LO4QPII1iRQY-Hs0iHpgGoHCkjVKwYUGHqU3cS5EXjo4_Pqf0f8oAQI2MWjVAe1_3u8jLsBQmjFs53XzqA1pMj-Ga0BgmlkgnY0gmlwhKwSfpeKbXVsdGlhZGRyc4wACgSsEn6XBtsV3QOCcnOFAAIBAACJc2VjcDI1NmsxoQLeZbpwqvjPmAY8WCKVZJYEWc9dBmg79SpqRhNJ1e5u74N0Y3CC2xSDdWRwgtsWhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-23_04-28-42__a1c78d0b-db6f-47cc-98b2-2fc707b6037e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.228.225
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['29345', '29346', '29347', '29348', '29349']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 29345:29345 -p 29346:29346 -p 29347:29347 -p 29348:29348 -p 29349:29349 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29347 --rest-port=29345 --tcp-port=29346 --discv5-udp-port=29348 --rest-address=0.0.0.0 --nat=extip:172.18.228.225 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=15cfcebd57dd1fbc85d59ad1a9d1af95f07267f7e777fbcefe422c8b73ceec4d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29349 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QPII1iRQY-Hs0iHpgGoHCkjVKwYUGHqU3cS5EXjo4_Pqf0f8oAQI2MWjVAe1_3u8jLsBQmjFs53XzqA1pMj-Ga0BgmlkgnY0gmlwhKwSfpeKbXVsdGlhZGRyc4wACgSsEn6XBtsV3QOCcnOFAAIBAACJc2VjcDI1NmsxoQLeZbpwqvjPmAY8WCKVZJYEWc9dBmg79SpqRhNJ1e5u74N0Y3CC2xSDdWRwgtsWhXdha3UyBQ --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.228.225 waku a4e01c75e5d0dc4ffaa5598875305c87486180d83d3a097929590c151b34e376
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID a4e01c75e5d0. Setting up logs at ./log/docker/node2_2024-08-23_04-28-42__a1c78d0b-db6f-47cc-98b2-2fc707b6037e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 29345
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29345/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29345/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.228.225/tcp/29346/p2p/16Uiu2HAmCqPAxNmJWy2jMBa9wbsyY4EtH9JCe1anhWoybUorvEEX","/ip4/172.18.228.225/tcp/29347/ws/p2p/16Uiu2HAmCqPAxNmJWy2jMBa9wbsyY4EtH9JCe1anhWoybUorvEEX"],"enrUri":"enr:-LO4QIgEN2LFL-e-66855IKpdZHxHNn7FCV-ExwWiy4wiImpekZ8G-cYp0b_sGicDK0pn2q5EZiQLNsmMD-7j13x4SMBgmlkgnY0gmlwhKwS5OGKbXVsdGlhZGRyc4wACgSsEuThBnKj3QOCcnOFAAIBAACJc2VjcDI1NmsxoQMCqZzg8S-9nJKY6g2TyElBH9ED3PRdTuvCQ6Xe9A3QvIN0Y3CCcqKDdWRwgnKkhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29345/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.126.151/tcp/56084/p2p/16Uiu2HAmAPpTWfpSJxt3TcyRFaiKm8RZSMXfEDruNcG1o5a7bw9x"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56083/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29345/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56083/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29345/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724387325590552064,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 18dab780f38f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id a4e01c75e5d0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.