[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_with_extra_field with id: 2024-08-23_04-15-22__a6c2dda3-6c59-49ed-8bff-df0eed5c9886
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-23_04-15-22__a6c2dda3-6c59-49ed-8bff-df0eed5c9886__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.173.27
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['57095', '57096', '57097', '57098', '57099']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 57095:57095 -p 57096:57096 -p 57097:57097 -p 57098:57098 -p 57099:57099 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57097 --rest-port=57095 --tcp-port=57096 --discv5-udp-port=57098 --rest-address=0.0.0.0 --nat=extip:172.18.173.27 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eb54ab0bf3a6ad38b2abf9351d8fcc80af1f1d7eec14ce0feab26cba95a8bf91 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57099 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.173.27 waku 2cc913281ff7de34fff635c4ca5cdeaa416f2bc2d6c8911d8cddee82c485d8e1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 2cc913281ff7. Setting up logs at ./log/docker/node1_2024-08-23_04-15-22__a6c2dda3-6c59-49ed-8bff-df0eed5c9886__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 57095
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57095/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57095/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.173.27/tcp/57096/p2p/16Uiu2HAmM4DreWC5kRD3UNHbFhDVcaHJP6TEpkWgJaAqoK7peTyz","/ip4/172.18.173.27/tcp/57097/ws/p2p/16Uiu2HAmM4DreWC5kRD3UNHbFhDVcaHJP6TEpkWgJaAqoK7peTyz"],"enrUri":"enr:-LO4QBgd8gDQm1u2zsa8_maYK1McAco_MRREdsp9tMyGcEtOAKH5QFPHxJ6wP8SX9c8hk5StxkCXLPy0h33N9GIVjcwBgmlkgnY0gmlwhKwSrRuKbXVsdGlhZGRyc4wACgSsEq0bBt8J3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN80SAgBRhvWogZBdTpW-wFrM_8KZWU7W_t-g6111X7iYN0Y3CC3wiDdWRwgt8KhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-23_04-15-22__a6c2dda3-6c59-49ed-8bff-df0eed5c9886__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.202.175
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['48698', '48699', '48700', '48701', '48702']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 48698:48698 -p 48699:48699 -p 48700:48700 -p 48701:48701 -p 48702:48702 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48700 --rest-port=48698 --tcp-port=48699 --discv5-udp-port=48701 --rest-address=0.0.0.0 --nat=extip:172.18.202.175 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ea405ff4b8331f0c5063d91a5395ad0a7e07dab3fe33b5a11801debfbeaadd4c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48702 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QBgd8gDQm1u2zsa8_maYK1McAco_MRREdsp9tMyGcEtOAKH5QFPHxJ6wP8SX9c8hk5StxkCXLPy0h33N9GIVjcwBgmlkgnY0gmlwhKwSrRuKbXVsdGlhZGRyc4wACgSsEq0bBt8J3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN80SAgBRhvWogZBdTpW-wFrM_8KZWU7W_t-g6111X7iYN0Y3CC3wiDdWRwgt8KhXdha3UyBQ --filternode=/ip4/172.18.173.27/tcp/57096/p2p/16Uiu2HAmM4DreWC5kRD3UNHbFhDVcaHJP6TEpkWgJaAqoK7peTyz
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.202.175 waku 39098b44821deb56c9465a3397109185f8a4d821e593c115f9d24cb21d4f9e61
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 39098b44821d. Setting up logs at ./log/docker/node2_2024-08-23_04-15-22__a6c2dda3-6c59-49ed-8bff-df0eed5c9886__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 48698
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48698/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48698/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.202.175/tcp/48699/p2p/16Uiu2HAmRLEWuU8uBLQqo8r9oretiyfUtVB6D7V8F9EGVc4XeMg2","/ip4/172.18.202.175/tcp/48700/ws/p2p/16Uiu2HAmRLEWuU8uBLQqo8r9oretiyfUtVB6D7V8F9EGVc4XeMg2"],"enrUri":"enr:-LO4QHchiLfKxYXcS1t9VpnvFh8CegdgOfNW58B6hg8O-njyH8s539tzasWWQW9-W8U7BrX9vy1wBKkHctBe-UEy_cABgmlkgnY0gmlwhKwSyq-KbXVsdGlhZGRyc4wACgSsEsqvBr483QOCcnOFAAMBAACJc2VjcDI1NmsxoQO8Wel3L4bBJamcFCkVXL-ecX8Vwl5hxkUqVVAcUNVh74N0Y3CCvjuDdWRwgr49hXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48698/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.173.27/tcp/57096/p2p/16Uiu2HAmM4DreWC5kRD3UNHbFhDVcaHJP6TEpkWgJaAqoK7peTyz"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57095/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48698/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "04fe8849-9e4f-4f26-91ed-61dcb4098239", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"04fe8849-9e4f-4f26-91ed-61dcb4098239","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57095/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "extraField": "extraValue"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:57095/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 2cc913281ff7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 39098b44821d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.