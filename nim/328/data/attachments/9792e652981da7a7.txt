[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_with_extra_field with id: 2024-08-23_04-18-49__f7c58902-ed21-4e38-ab03-cd32d6c90b6f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-23_04-18-49__f7c58902-ed21-4e38-ab03-cd32d6c90b6f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.172.156
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['40783', '40784', '40785', '40786', '40787']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 40783:40783 -p 40784:40784 -p 40785:40785 -p 40786:40786 -p 40787:40787 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40785 --rest-port=40783 --tcp-port=40784 --discv5-udp-port=40786 --rest-address=0.0.0.0 --nat=extip:172.18.172.156 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aba33a3bffee7bd8e36125dc8ac6bc94c6f2392fadff13607efe6dbeda3dd3ad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40787 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.172.156 waku e5fa0ec40853da6a69340d02f05ba73f669ddb9fb657a95241e2b835d5d220ef
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e5fa0ec40853. Setting up logs at ./log/docker/node1_2024-08-23_04-18-49__f7c58902-ed21-4e38-ab03-cd32d6c90b6f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 40783
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40783/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40783/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.172.156/tcp/40784/p2p/16Uiu2HAkuzzhpJhK3V762zPbTn7t5BeHbaCrCjU2C5gfiJM6tYPd","/ip4/172.18.172.156/tcp/40785/ws/p2p/16Uiu2HAkuzzhpJhK3V762zPbTn7t5BeHbaCrCjU2C5gfiJM6tYPd"],"enrUri":"enr:-LO4QDFvEH2JNOKHZQ3g79f8ueUVUcjCOaBbY2EozRZcmS0iaOWdj90bEyi59eelNGnVDEuhzDd9ql0bET-0qaPLrJgBgmlkgnY0gmlwhKwSrJyKbXVsdGlhZGRyc4wACgSsEqycBp9R3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIIiVauPmJy3kUXH76u7P8KULDVy4dNqCmrpS_ghFyRBIN0Y3CCn1CDdWRwgp9ShXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-23_04-18-49__f7c58902-ed21-4e38-ab03-cd32d6c90b6f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.224.188
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['19036', '19037', '19038', '19039', '19040']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 19036:19036 -p 19037:19037 -p 19038:19038 -p 19039:19039 -p 19040:19040 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19038 --rest-port=19036 --tcp-port=19037 --discv5-udp-port=19039 --rest-address=0.0.0.0 --nat=extip:172.18.224.188 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=daf1b20b2db4f0bdaafbc3a9fe96ef657d232ab356e08b7c0bcd01bc24d25ca0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19040 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QDFvEH2JNOKHZQ3g79f8ueUVUcjCOaBbY2EozRZcmS0iaOWdj90bEyi59eelNGnVDEuhzDd9ql0bET-0qaPLrJgBgmlkgnY0gmlwhKwSrJyKbXVsdGlhZGRyc4wACgSsEqycBp9R3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIIiVauPmJy3kUXH76u7P8KULDVy4dNqCmrpS_ghFyRBIN0Y3CCn1CDdWRwgp9ShXdha3UyBQ --filternode=/ip4/172.18.172.156/tcp/40784/p2p/16Uiu2HAkuzzhpJhK3V762zPbTn7t5BeHbaCrCjU2C5gfiJM6tYPd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.224.188 waku 113d731fd88f18a2b947ed097931c623f5d3191c62bac84eb9fa588c55279d40
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 113d731fd88f. Setting up logs at ./log/docker/node2_2024-08-23_04-18-49__f7c58902-ed21-4e38-ab03-cd32d6c90b6f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 19036
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19036/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19036/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.224.188/tcp/19037/p2p/16Uiu2HAmUJHLgcqrTZzc4NsVJVHBwxjFFLLef1KoZG6RxTy1K9YU","/ip4/172.18.224.188/tcp/19038/ws/p2p/16Uiu2HAmUJHLgcqrTZzc4NsVJVHBwxjFFLLef1KoZG6RxTy1K9YU"],"enrUri":"enr:-LO4QK0h1ZQjvsiZs3su_59jRMo4LSx8-ISkmsOxwh2SuWv3JLT5yefqcpFx-yxiIbVBgad_Ge8lYfHG04eSDYGDs10BgmlkgnY0gmlwhKwS4LyKbXVsdGlhZGRyc4wACgSsEuC8Bkpe3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPobQEEvgYG-XCnZ5ju3iZ9L2oI8Ph8kirdc7adcY98EYN0Y3CCSl2DdWRwgkpfhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19036/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.172.156/tcp/40784/p2p/16Uiu2HAkuzzhpJhK3V762zPbTn7t5BeHbaCrCjU2C5gfiJM6tYPd"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40783/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19036/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "98718ed2-e53d-4249-9d56-1227db1a8a1f", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"98718ed2-e53d-4249-9d56-1227db1a8a1f","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:19036/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1", "extraField": "extraValue"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:19036/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id e5fa0ec40853
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 113d731fd88f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.