[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_content_topics with id: 2024-08-23_04-20-23__630c727b-ae25-4a42-92eb-7aed61941740
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-23_04-20-23__630c727b-ae25-4a42-92eb-7aed61941740__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.92.55
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['60838', '60839', '60840', '60841', '60842']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 60838:60838 -p 60839:60839 -p 60840:60840 -p 60841:60841 -p 60842:60842 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60840 --rest-port=60838 --tcp-port=60839 --discv5-udp-port=60841 --rest-address=0.0.0.0 --nat=extip:172.18.92.55 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=103b5a9126ba0672990af50fcaf3d4ef6b25cba16dcebf92bbefc1edfb7d14ae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60842 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.92.55 waku 69d25591662b9d7ddb5258035196e4e155a12e0a464a9b81d420bad053e84106
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 69d25591662b. Setting up logs at ./log/docker/receiving_node1_2024-08-23_04-20-23__630c727b-ae25-4a42-92eb-7aed61941740__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 60838
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60838/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60838/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.92.55/tcp/60839/p2p/16Uiu2HAm9tLNQmYAgGAKGn9tpYmah8AA11GGcZj9tBdbXDLtK8g5","/ip4/172.18.92.55/tcp/60840/ws/p2p/16Uiu2HAm9tLNQmYAgGAKGn9tpYmah8AA11GGcZj9tBdbXDLtK8g5"],"enrUri":"enr:-LO4QFCmdOVOsIuVZcyy939l9RsOxqMGC1FlVTSKyciOm9ctXsCC74Lh7z4DmYFKabWBLJ-kcTss8NwiZummPin3ZDoBgmlkgnY0gmlwhKwSXDeKbXVsdGlhZGRyc4wACgSsElw3Bu2o3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLW2CArOWnOFmNQX7nLITZY84JUJg-kWrA0S97XC1RgtoN0Y3CC7aeDdWRwgu2phXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-23_04-20-23__630c727b-ae25-4a42-92eb-7aed61941740__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.244.9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['1651', '1652', '1653', '1654', '1655']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 1651:1651 -p 1652:1652 -p 1653:1653 -p 1654:1654 -p 1655:1655 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1653 --rest-port=1651 --tcp-port=1652 --discv5-udp-port=1654 --rest-address=0.0.0.0 --nat=extip:172.18.244.9 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9b7c29d0f1ecbf34eda65ba00da747efc9e0db7c8d356c2edaeadeed5d7ff496 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1655 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.244.9 waku 45c74ee32c0f03e09e0513720cf2fdf539100e4ac27045e72c3a231ed9abd224
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 45c74ee32c0f. Setting up logs at ./log/docker/receiving_node2_2024-08-23_04-20-23__630c727b-ae25-4a42-92eb-7aed61941740__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 1651
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1651/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1651/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.244.9/tcp/1652/p2p/16Uiu2HAkySDNHqxXb2KV1dY5Xd31aneUpLJGFdJ2oAJuwCGCCh2B","/ip4/172.18.244.9/tcp/1653/ws/p2p/16Uiu2HAkySDNHqxXb2KV1dY5Xd31aneUpLJGFdJ2oAJuwCGCCh2B"],"enrUri":"enr:-LO4QLRygdN0iNqRF6IJLX3eCYq0d5rafA0kD-JN3BEvyRyONtSkJGCeJH61oA1qaacZ8EfEy-r2HYQ95hIB5YATZHUBgmlkgnY0gmlwhKwS9AmKbXVsdGlhZGRyc4wACgSsEvQJBgZ13QOCcnOFAAMBAACJc2VjcDI1NmsxoQI7kjz0nw7HoE1hEI9aCq-Ta0p8lpnnXmvqGNoM7sxvbIN0Y3CCBnSDdWRwggZ2hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1651/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.92.55/tcp/60839/p2p/16Uiu2HAm9tLNQmYAgGAKGn9tpYmah8AA11GGcZj9tBdbXDLtK8g5"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-23_04-20-23__630c727b-ae25-4a42-92eb-7aed61941740__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.243.250
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['13683', '13684', '13685', '13686', '13687']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 13683:13683 -p 13684:13684 -p 13685:13685 -p 13686:13686 -p 13687:13687 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13685 --rest-port=13683 --tcp-port=13684 --discv5-udp-port=13686 --rest-address=0.0.0.0 --nat=extip:172.18.243.250 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ca8dcefb363ac7c5e3cc69b5ce1dcfcc7367bc6ab0b2feb51197d76aee909eb8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13687 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QFCmdOVOsIuVZcyy939l9RsOxqMGC1FlVTSKyciOm9ctXsCC74Lh7z4DmYFKabWBLJ-kcTss8NwiZummPin3ZDoBgmlkgnY0gmlwhKwSXDeKbXVsdGlhZGRyc4wACgSsElw3Bu2o3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLW2CArOWnOFmNQX7nLITZY84JUJg-kWrA0S97XC1RgtoN0Y3CC7aeDdWRwgu2phXdha3UyCQ --lightpushnode=/ip4/172.18.92.55/tcp/60839/p2p/16Uiu2HAm9tLNQmYAgGAKGn9tpYmah8AA11GGcZj9tBdbXDLtK8g5 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.243.250 waku de640c2e4610b742a2ccd9a235ad72bee9dc266743874884220fcc2d9035ef6a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID de640c2e4610. Setting up logs at ./log/docker/lightpush_node1_2024-08-23_04-20-23__630c727b-ae25-4a42-92eb-7aed61941740__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 13683
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13683/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13683/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.243.250/tcp/13684/p2p/16Uiu2HAmNYnGd5KJEzjZAm7p3DgnucShYRrFse2kWJpTRzJW8dRK","/ip4/172.18.243.250/tcp/13685/ws/p2p/16Uiu2HAmNYnGd5KJEzjZAm7p3DgnucShYRrFse2kWJpTRzJW8dRK"],"enrUri":"enr:-LO4QOU4c7lXS6btoDcX_7TYPeqXyNvBemaVN7-rPoIJaIBCRKCOwOrJ4kJnQLrTxHW5_1QzGasmwiR_4L5RL5AX3koBgmlkgnY0gmlwhKwS8_qKbXVsdGlhZGRyc4wACgSsEvP6BjV13QOCcnOFAAMBAACJc2VjcDI1NmsxoQOS_bmYYqwqAiaEmUUofHIetliz1LXHOTX0kTD62D0cWoN0Y3CCNXSDdWRwgjV2hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13683/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.92.55/tcp/60839/p2p/16Uiu2HAm9tLNQmYAgGAKGn9tpYmah8AA11GGcZj9tBdbXDLtK8g5"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13683/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.244.9/tcp/1652/p2p/16Uiu2HAkySDNHqxXb2KV1dY5Xd31aneUpLJGFdJ2oAJuwCGCCh2B"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60838/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1651/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic Empty string
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13683/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "", "timestamp": 1724386828247016960}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13683/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A dictionary
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13683/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": {"key": "YWFh"}, "timestamp": 1724386828254267648}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13683/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic An integer
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13683/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": 1234567890, "timestamp": 1724386828260176384}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13683/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A list
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13683/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": ["YWFh"], "timestamp": 1724386828265719808}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13683/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A bool
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13683/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": true, "timestamp": 1724386828270224640}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13683/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 69d25591662b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 45c74ee32c0f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id de640c2e4610
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.