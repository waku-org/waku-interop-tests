[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_version with id: 2025-02-05_04-08-34__208036d1-ed2f-4694-8738-042b32c933e4
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-05_04-08-34__208036d1-ed2f-4694-8738-042b32c933e4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.215.19
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['9064', '9065', '9066', '9067', '9068']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 9064:9064 -p 9065:9065 -p 9066:9066 -p 9067:9067 -p 9068:9068 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9066 --rest-port=9064 --tcp-port=9065 --discv5-udp-port=9067 --rest-address=0.0.0.0 --nat=extip:172.18.215.19 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1f5ed1e8b3d9cd20b26d9ab0d2fb6ea1be1e7c68bc8bff6ed559cbc190e86ea1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9068 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.215.19 waku fc8146a10a5c88e969bea3b855c947b174d5d6b717b7ccef90ba5c5a67d4ab0c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fc8146a10a5c. Setting up logs at ./log/docker/receiving_node1_2025-02-05_04-08-34__208036d1-ed2f-4694-8738-042b32c933e4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 9064
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 8b8a952b841d. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9064/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9064/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.215.19/tcp/9065/p2p/16Uiu2HAmVK8GMQ2acwpF6D5mCa6Y5zWwtqBnY9ED3KPcXDu3kHSi","/ip4/172.18.215.19/tcp/9066/ws/p2p/16Uiu2HAmVK8GMQ2acwpF6D5mCa6Y5zWwtqBnY9ED3KPcXDu3kHSi"],"enrUri":"enr:-L24QIwvuA_tE5RiHHEeQ8EJUpYb62lOlLIhps0bmcloI1csCN5UfzrB2PPMpE8fFd7pdEcxpYQPsIyzUZ_abxqJPMUCgmlkgnY0gmlwhKwS1xOKbXVsdGlhZGRyc5YACASsEtcTBiNpAAoErBLXEwYjat0DgnJzhQADAQAAiXNlY3AyNTZrMaED94ACzRApayn5tjw3pfxrpcXBiHkNMLiY0Un1MggLmGuDdGNwgiNpg3VkcIIja4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-05_04-08-34__208036d1-ed2f-4694-8738-042b32c933e4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.205.41
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['47463', '47464', '47465', '47466', '47467']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 47463:47463 -p 47464:47464 -p 47465:47465 -p 47466:47466 -p 47467:47467 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47465 --rest-port=47463 --tcp-port=47464 --discv5-udp-port=47466 --rest-address=0.0.0.0 --nat=extip:172.18.205.41 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=adc1ddb084cfacab7eccee2cf3e6befe5ebde8cfdeadda5cc4a5cbcebd5d354b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47467 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.205.41 waku a6c495b85ef994673ed9d33e52c516d8b5832f256de1f7c75cc05efd81278bca
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a6c495b85ef9. Setting up logs at ./log/docker/receiving_node2_2025-02-05_04-08-34__208036d1-ed2f-4694-8738-042b32c933e4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 47463
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47463/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47463/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.205.41/tcp/47464/p2p/16Uiu2HAkw2879mNtKoDQL1ugjC6i7NrizSSgJtuJLTvuPDtaxyyk","/ip4/172.18.205.41/tcp/47465/ws/p2p/16Uiu2HAkw2879mNtKoDQL1ugjC6i7NrizSSgJtuJLTvuPDtaxyyk"],"enrUri":"enr:-L24QEP_RMW_d3O8oSj8gM61J9zkl9cNBHYeDHlty7TEhnImAwzmIe5VT8g979ftmn31tOPBRxxw-RuFXxdb2B0vkGgCgmlkgnY0gmlwhKwSzSmKbXVsdGlhZGRyc5YACASsEs0pBrloAAoErBLNKQa5ad0DgnJzhQADAQAAiXNlY3AyNTZrMaECF6755vMH8o6hkzur2GwFf4INbCG_vgduefY_L96AgUODdGNwgrlog3VkcIK5aoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47463/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.215.19/tcp/9065/p2p/16Uiu2HAmVK8GMQ2acwpF6D5mCa6Y5zWwtqBnY9ED3KPcXDu3kHSi"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-05_04-08-34__208036d1-ed2f-4694-8738-042b32c933e4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.41.31
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5969', '5970', '5971', '5972', '5973']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5969:5969 -p 5970:5970 -p 5971:5971 -p 5972:5972 -p 5973:5973 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5971 --rest-port=5969 --tcp-port=5970 --discv5-udp-port=5972 --rest-address=0.0.0.0 --nat=extip:172.18.41.31 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bbdfead4aadab0df2cd5d2bf1e44ab680ce8d4e1e41ec80f1fbf62fe0b51d4aa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5973 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QIwvuA_tE5RiHHEeQ8EJUpYb62lOlLIhps0bmcloI1csCN5UfzrB2PPMpE8fFd7pdEcxpYQPsIyzUZ_abxqJPMUCgmlkgnY0gmlwhKwS1xOKbXVsdGlhZGRyc5YACASsEtcTBiNpAAoErBLXEwYjat0DgnJzhQADAQAAiXNlY3AyNTZrMaED94ACzRApayn5tjw3pfxrpcXBiHkNMLiY0Un1MggLmGuDdGNwgiNpg3VkcIIja4V3YWt1Mgk --lightpushnode=/ip4/172.18.215.19/tcp/9065/p2p/16Uiu2HAmVK8GMQ2acwpF6D5mCa6Y5zWwtqBnY9ED3KPcXDu3kHSi --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.41.31 waku 5d357a7586357dad18997faaa7b38a684a1add218b9e703dba9e05d947aea495
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5d357a758635. Setting up logs at ./log/docker/lightpush_node1_2025-02-05_04-08-34__208036d1-ed2f-4694-8738-042b32c933e4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 5969
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5969/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5969/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.41.31/tcp/5970/p2p/16Uiu2HAmBkuRSsEY3sPDWV3cxiCwzgEmQDHhVkD5tLpzV8Nvo3AP","/ip4/172.18.41.31/tcp/5971/ws/p2p/16Uiu2HAmBkuRSsEY3sPDWV3cxiCwzgEmQDHhVkD5tLpzV8Nvo3AP"],"enrUri":"enr:-L24QC5nJKOFu6Ft5jLm3jHC_ToCzwbj0BSxPGow1U1RSJK7EHrQwQ9rCakTAdMdyb-GGY3vVN8U-LkZiOfeMcNGitQCgmlkgnY0gmlwhKwSKR-KbXVsdGlhZGRyc5YACASsEikfBhdSAAoErBIpHwYXU90DgnJzhQADAQAAiXNlY3AyNTZrMaEC8qg5tv6iO_y_6OqE3PhKyq7pA5hTbSHupVhZKo9q3siDdGNwghdSg3VkcIIXVIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5969/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.215.19/tcp/9065/p2p/16Uiu2HAmVK8GMQ2acwpF6D5mCa6Y5zWwtqBnY9ED3KPcXDu3kHSi"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5969/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.205.41/tcp/47464/p2p/16Uiu2HAkw2879mNtKoDQL1ugjC6i7NrizSSgJtuJLTvuPDtaxyyk"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9064/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47463/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5969/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738728518481516288, "version": 10}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9064/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1738728518481516288,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47463/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1738728518481516288,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id fc8146a10a5c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a6c495b85ef9
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fc8146a10a5c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5d357a758635
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a6c495b85ef9. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.