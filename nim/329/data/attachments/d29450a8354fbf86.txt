[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-08-24_04-21-40__af20d36c-96eb-433a-b137-a14f4d15bed3
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-24_04-21-40__af20d36c-96eb-433a-b137-a14f4d15bed3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.95.153
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['54431', '54432', '54433', '54434', '54435']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 54431:54431 -p 54432:54432 -p 54433:54433 -p 54434:54434 -p 54435:54435 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54433 --rest-port=54431 --tcp-port=54432 --discv5-udp-port=54434 --rest-address=0.0.0.0 --nat=extip:172.18.95.153 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f3fd61da06dda5dc78db9cb7e27eba3dfebfd604c1dee28d04d7b62ffc5bbf6b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54435 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.95.153 waku 4701f603488df29b9ee44347e4ddb601ed2c8cb446d25de07f7e92d34581e916
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 4701f603488d. Setting up logs at ./log/docker/receiving_node1_2024-08-24_04-21-40__af20d36c-96eb-433a-b137-a14f4d15bed3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 54431
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54431/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54431/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.95.153/tcp/54432/p2p/16Uiu2HAkuydMwVxgDsb4h8dggmy6UkTVAra4crtqDmBMZSZd8z8d","/ip4/172.18.95.153/tcp/54433/ws/p2p/16Uiu2HAkuydMwVxgDsb4h8dggmy6UkTVAra4crtqDmBMZSZd8z8d"],"enrUri":"enr:-LO4QKoJlyzqS9rbdRlX8wgNze6Xvp2jHLibMfLuaJFVgWFBYhXjAlpVy9QwQwzsOEr5yHBIMU-4bdOExbP022ryjysBgmlkgnY0gmlwhKwSX5mKbXVsdGlhZGRyc4wACgSsEl-ZBtSh3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIIL6Ai2fw5I0_XF_adlZR0StU4L57yp2xBeCermeHkVoN0Y3CC1KCDdWRwgtSihXdha3UyDQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-24_04-21-40__af20d36c-96eb-433a-b137-a14f4d15bed3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.2.63
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['33182', '33183', '33184', '33185', '33186']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 33182:33182 -p 33183:33183 -p 33184:33184 -p 33185:33185 -p 33186:33186 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33184 --rest-port=33182 --tcp-port=33183 --discv5-udp-port=33185 --rest-address=0.0.0.0 --nat=extip:172.18.2.63 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=94b9b4e18ebcc5edf71885ee1ffbd9b98e9cb8008c08df9fbb7298e2f24ce053 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33186 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.2.63 waku ac428d41667a4e15249101603f433b7d138e7511673738af5a462b28598bc202
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID ac428d41667a. Setting up logs at ./log/docker/receiving_node2_2024-08-24_04-21-40__af20d36c-96eb-433a-b137-a14f4d15bed3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 33182
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33182/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33182/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.2.63/tcp/33183/p2p/16Uiu2HAkud63d26XuQw3goedX4gMxqqVPD9JcXiuSX9H9VE9efTS","/ip4/172.18.2.63/tcp/33184/ws/p2p/16Uiu2HAkud63d26XuQw3goedX4gMxqqVPD9JcXiuSX9H9VE9efTS"],"enrUri":"enr:-LO4QOVLeXDi0Z8E1KEXRmZ-xvAxNYSx0Eju-NOrAwI1zFLgZwcMzE-NortHB3fPC5ULZE4rK_heZFw2tuU-amu5CzUBgmlkgnY0gmlwhKwSAj-KbXVsdGlhZGRyc4wACgSsEgI_BoGg3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIC7Jm1DcOptPMXz9O76lBCY5_6HBnk3qQXz8pSx1ylvYN0Y3CCgZ-DdWRwgoGhhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33182/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.95.153/tcp/54432/p2p/16Uiu2HAkuydMwVxgDsb4h8dggmy6UkTVAra4crtqDmBMZSZd8z8d"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-24_04-21-40__af20d36c-96eb-433a-b137-a14f4d15bed3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.97.20
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['1304', '1305', '1306', '1307', '1308']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 1304:1304 -p 1305:1305 -p 1306:1306 -p 1307:1307 -p 1308:1308 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1306 --rest-port=1304 --tcp-port=1305 --discv5-udp-port=1307 --rest-address=0.0.0.0 --nat=extip:172.18.97.20 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b72a81dc45e23f22968c79a5a5725bc2cfa2869e3aae72cac1eecf6d6dacb8e6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1308 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QKoJlyzqS9rbdRlX8wgNze6Xvp2jHLibMfLuaJFVgWFBYhXjAlpVy9QwQwzsOEr5yHBIMU-4bdOExbP022ryjysBgmlkgnY0gmlwhKwSX5mKbXVsdGlhZGRyc4wACgSsEl-ZBtSh3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIIL6Ai2fw5I0_XF_adlZR0StU4L57yp2xBeCermeHkVoN0Y3CC1KCDdWRwgtSihXdha3UyDQ --lightpushnode=/ip4/172.18.95.153/tcp/54432/p2p/16Uiu2HAkuydMwVxgDsb4h8dggmy6UkTVAra4crtqDmBMZSZd8z8d --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.97.20 waku 9ea0e769ef941122f56781e1d2fb8e453daf0697a88f1e254454878725e48398
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 9ea0e769ef94. Setting up logs at ./log/docker/lightpush_node1_2024-08-24_04-21-40__af20d36c-96eb-433a-b137-a14f4d15bed3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 1304
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1304/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1304/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.97.20/tcp/1305/p2p/16Uiu2HAmHQ9LTqiHa3siU2Gixj8tRXJH6MEKWEYuDtJQZc8iV2k3","/ip4/172.18.97.20/tcp/1306/ws/p2p/16Uiu2HAmHQ9LTqiHa3siU2Gixj8tRXJH6MEKWEYuDtJQZc8iV2k3"],"enrUri":"enr:-LO4QIEu6EMUMrVW1ylOjrhjyTj_JQwkesfKVufevUnEe2snT6eHCQRARJPuopmN4G599WtuH2m3isIdwfcjyXtTnqABgmlkgnY0gmlwhKwSYRSKbXVsdGlhZGRyc4wACgSsEmEUBgUa3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNGfOH55cb0dPBp9gEl-RsT_nr79SposxQiXybx68Wp9IN0Y3CCBRmDdWRwggUbhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1304/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.95.153/tcp/54432/p2p/16Uiu2HAkuydMwVxgDsb4h8dggmy6UkTVAra4crtqDmBMZSZd8z8d"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1304/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.2.63/tcp/33183/p2p/16Uiu2HAkud63d26XuQw3goedX4gMxqqVPD9JcXiuSX9H9VE9efTS"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54431/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33182/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1304/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724473304830046976}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54431/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724473304830046976,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33182/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724473304830046976,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 4701f603488d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id ac428d41667a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 9ea0e769ef94
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.