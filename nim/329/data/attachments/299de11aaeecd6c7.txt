[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2024-08-24_04-20-56__b25732ce-5f1c-4c8a-9d4f-42a606636ad8
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-24_04-20-56__b25732ce-5f1c-4c8a-9d4f-42a606636ad8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.239.166
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['12853', '12854', '12855', '12856', '12857']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 12853:12853 -p 12854:12854 -p 12855:12855 -p 12856:12856 -p 12857:12857 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12855 --rest-port=12853 --tcp-port=12854 --discv5-udp-port=12856 --rest-address=0.0.0.0 --nat=extip:172.18.239.166 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=246a97e101f030cfdd07441399967ff4b4b32dea779cf171f5e1c4054a7c6293 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12857 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.239.166 waku 118969dcc0b73a1fd9cf2d366ba559e47f8b2fe81394da25fd5e1a1da1d5c337
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 118969dcc0b7. Setting up logs at ./log/docker/receiving_node1_2024-08-24_04-20-56__b25732ce-5f1c-4c8a-9d4f-42a606636ad8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 12853
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12853/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12853/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.239.166/tcp/12854/p2p/16Uiu2HAkvYYBni7thrYCU38VaoguLP4giHUyeCHomNpPCQBxWdNv","/ip4/172.18.239.166/tcp/12855/ws/p2p/16Uiu2HAkvYYBni7thrYCU38VaoguLP4giHUyeCHomNpPCQBxWdNv"],"enrUri":"enr:-LO4QF3J7uEKtI4brQcaqEDbW8SjdBJsUwtyEebhe38CQoAXGp5PKzg-NUHIcXTwAQbU0kUISwA60VDi0hNa1cCOAmkBgmlkgnY0gmlwhKwS76aKbXVsdGlhZGRyc4wACgSsEu-mBjI33QOCcnOFAAMBAACJc2VjcDI1NmsxoQIQnfDY6Ds6-pYdKBw63YyMEXaRYekal6Tc4aEQN9vuf4N0Y3CCMjaDdWRwgjI4hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-24_04-20-56__b25732ce-5f1c-4c8a-9d4f-42a606636ad8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.96.139
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['36947', '36948', '36949', '36950', '36951']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 36947:36947 -p 36948:36948 -p 36949:36949 -p 36950:36950 -p 36951:36951 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36949 --rest-port=36947 --tcp-port=36948 --discv5-udp-port=36950 --rest-address=0.0.0.0 --nat=extip:172.18.96.139 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cabaac6edfbfc89b0e1142d95dafeec7e71fcabbeb91d6ff2d5fd1d0ab8ab103 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36951 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.96.139 waku d67ee84b9a325466964af7503f795fb6be2ef0c6a768e95bc0840aaf940e5dbf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID d67ee84b9a32. Setting up logs at ./log/docker/receiving_node2_2024-08-24_04-20-56__b25732ce-5f1c-4c8a-9d4f-42a606636ad8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 36947
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36947/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36947/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.96.139/tcp/36948/p2p/16Uiu2HAkwQkfwLZjJbTyLsXV8KSjz8UPa4V18aE8s3DJT43fvtFF","/ip4/172.18.96.139/tcp/36949/ws/p2p/16Uiu2HAkwQkfwLZjJbTyLsXV8KSjz8UPa4V18aE8s3DJT43fvtFF"],"enrUri":"enr:-LO4QCNvJZYUyDx3meQQXnx6yNthaLZV9TAAwUTeGijAzOBMTFb-LMhU091B0C_jHGtaUuDKDEisGIu_bYXG0xKcjy8BgmlkgnY0gmlwhKwSYIuKbXVsdGlhZGRyc4wACgSsEmCLBpBV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIdexk07MSKU5YH70lFMwWu1jOlB7-6HwpbtXsMBm4cDoN0Y3CCkFSDdWRwgpBWhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36947/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.239.166/tcp/12854/p2p/16Uiu2HAkvYYBni7thrYCU38VaoguLP4giHUyeCHomNpPCQBxWdNv"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-24_04-20-56__b25732ce-5f1c-4c8a-9d4f-42a606636ad8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.58.232
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['21032', '21033', '21034', '21035', '21036']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 21032:21032 -p 21033:21033 -p 21034:21034 -p 21035:21035 -p 21036:21036 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21034 --rest-port=21032 --tcp-port=21033 --discv5-udp-port=21035 --rest-address=0.0.0.0 --nat=extip:172.18.58.232 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b605a8cdcab0cad2ae23b1dc3aed86eda5b3b1847655ffb6c59dce42d8d61fbb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21036 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QF3J7uEKtI4brQcaqEDbW8SjdBJsUwtyEebhe38CQoAXGp5PKzg-NUHIcXTwAQbU0kUISwA60VDi0hNa1cCOAmkBgmlkgnY0gmlwhKwS76aKbXVsdGlhZGRyc4wACgSsEu-mBjI33QOCcnOFAAMBAACJc2VjcDI1NmsxoQIQnfDY6Ds6-pYdKBw63YyMEXaRYekal6Tc4aEQN9vuf4N0Y3CCMjaDdWRwgjI4hXdha3UyCQ --lightpushnode=/ip4/172.18.239.166/tcp/12854/p2p/16Uiu2HAkvYYBni7thrYCU38VaoguLP4giHUyeCHomNpPCQBxWdNv --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.58.232 waku 07b539f110628a888e083f38bc0037ff2ad9a0d11d267f9d196a0fdd8691a5e4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 07b539f11062. Setting up logs at ./log/docker/lightpush_node1_2024-08-24_04-20-56__b25732ce-5f1c-4c8a-9d4f-42a606636ad8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 21032
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21032/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21032/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.58.232/tcp/21033/p2p/16Uiu2HAkzhVV18TLzdxnu5jmNctcS8Dt7N3iE8HtNUF6xfEN2Ms8","/ip4/172.18.58.232/tcp/21034/ws/p2p/16Uiu2HAkzhVV18TLzdxnu5jmNctcS8Dt7N3iE8HtNUF6xfEN2Ms8"],"enrUri":"enr:-LO4QDwQrToLEH0WA1QAGph2auajQP_GyGx6ctyxJdpiuoNjDqxDV00hBnLeOcphbAW8PG1gU_2X_beuiCdBJBclnfwBgmlkgnY0gmlwhKwSOuiKbXVsdGlhZGRyc4wACgSsEjroBlIq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJOV9v5Wp0hkAQzgNS1mUEMEw7n_peue96DgX94giobw4N0Y3CCUimDdWRwglIrhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21032/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.239.166/tcp/12854/p2p/16Uiu2HAkvYYBni7thrYCU38VaoguLP4giHUyeCHomNpPCQBxWdNv"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21032/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.96.139/tcp/36948/p2p/16Uiu2HAkwQkfwLZjJbTyLsXV8KSjz8UPa4V18aE8s3DJT43fvtFF"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12853/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36947/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21032/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724473262005687040, "extraField": "extraValue"}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:21032/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 118969dcc0b7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id d67ee84b9a32
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 07b539f11062
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.