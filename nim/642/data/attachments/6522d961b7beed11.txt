2025-02-06 04:04:15.342 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 04:04:15.343 DEBUG [tests.conftest] Running test: test_filter_subscribe_with_invalid_pubsub_topic_format with id: 2025-02-06_04-04-15__c2e06e02-3e04-44bd-8939-b1832a86eda6
2025-02-06 04:04:15.343 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 04:04:15.344 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-06 04:04:15.344 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-06 04:04:15.351 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:04:15.351 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_04-04-15__c2e06e02-3e04-44bd-8939-b1832a86eda6__wakuorg_nwaku:latest.log
2025-02-06 04:04:15.351 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:04:15.351 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:04:15.353 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:04:15.354 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.244.123
2025-02-06 04:04:15.354 DEBUG [src.node.docker_mananger] Generated ports ['2142', '2143', '2144', '2145', '2146']
2025-02-06 04:04:15.354 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:04:15.354 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:04:15.354 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:04:15.354 DEBUG [src.node.docker_mananger] docker run -i -t -p 2142:2142 -p 2143:2143 -p 2144:2144 -p 2145:2145 -p 2146:2146 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2144 --rest-port=2142 --tcp-port=2143 --discv5-udp-port=2145 --rest-address=0.0.0.0 --nat=extip:172.18.244.123 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=adff7da81cbefadd5171baad2ba7adadfedcd6e484d4f89a1d79ff7cba9ddf9a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2146 --metrics-logging=true --relay=true --filter=true
2025-02-06 04:04:15.576 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.244.123 waku f8d143146c003f28225c50c37797c341b45cc80de82a1e02b7b694c8b65a47aa
2025-02-06 04:04:15.625 DEBUG [src.node.docker_mananger] Container started with ID f8d143146c00. Setting up logs at ./log/docker/node1_2025-02-06_04-04-15__c2e06e02-3e04-44bd-8939-b1832a86eda6__wakuorg_nwaku:latest.log
2025-02-06 04:04:15.626 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2142
2025-02-06 04:04:15.626 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:04:16.170 ERROR [src.node.docker_mananger] Max retries reached for container a4d39b0d4b81. Exiting log stream.
2025-02-06 04:04:16.626 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2142/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:16.629 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:04:16.630 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:04:16.630 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2142/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:16.632 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.244.123/tcp/2143/p2p/16Uiu2HAm6V2e9TxjcfzVMcgLox5ni7FzKHm5qBx8ihNVY15LnuYF","/ip4/172.18.244.123/tcp/2144/ws/p2p/16Uiu2HAm6V2e9TxjcfzVMcgLox5ni7FzKHm5qBx8ihNVY15LnuYF"],"enrUri":"enr:-L24QAzH4XwXzPpEqPDSb4vN0B-Vybb0sNvnwUBVPnCGWzdDPhzcDAZmPa8CzuQeEnnLfMjrR4VwnB5aUqRKEuiKVZsCgmlkgnY0gmlwhKwS9HuKbXVsdGlhZGRyc5YACASsEvR7BghfAAoErBL0ewYIYN0DgnJzhQADAQAAiXNlY3AyNTZrMaECpEypDsKxDvgZLNuXBtYXHnRHqeOVP50umYz_azN69ZyDdGNwgghfg3VkcIIIYYV3YWt1MgU"}'
2025-02-06 04:04:16.632 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:04:16.632 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-06 04:04:16.638 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:04:16.638 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_04-04-15__c2e06e02-3e04-44bd-8939-b1832a86eda6__wakuorg_nwaku:latest.log
2025-02-06 04:04:16.639 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:04:16.639 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:04:16.640 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:04:16.640 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.41.134
2025-02-06 04:04:16.640 DEBUG [src.node.docker_mananger] Generated ports ['4249', '4250', '4251', '4252', '4253']
2025-02-06 04:04:16.640 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:04:16.640 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:04:16.641 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:04:16.641 DEBUG [src.node.docker_mananger] docker run -i -t -p 4249:4249 -p 4250:4250 -p 4251:4251 -p 4252:4252 -p 4253:4253 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4251 --rest-port=4249 --tcp-port=4250 --discv5-udp-port=4252 --rest-address=0.0.0.0 --nat=extip:172.18.41.134 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b7dcbfed35ad4dacbe45dd6d7ab4b0469d7d6a4d7eee02aabd869b0cfdfac4fb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4253 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QAzH4XwXzPpEqPDSb4vN0B-Vybb0sNvnwUBVPnCGWzdDPhzcDAZmPa8CzuQeEnnLfMjrR4VwnB5aUqRKEuiKVZsCgmlkgnY0gmlwhKwS9HuKbXVsdGlhZGRyc5YACASsEvR7BghfAAoErBL0ewYIYN0DgnJzhQADAQAAiXNlY3AyNTZrMaECpEypDsKxDvgZLNuXBtYXHnRHqeOVP50umYz_azN69ZyDdGNwgghfg3VkcIIIYYV3YWt1MgU --filternode=/ip4/172.18.244.123/tcp/2143/p2p/16Uiu2HAm6V2e9TxjcfzVMcgLox5ni7FzKHm5qBx8ihNVY15LnuYF
2025-02-06 04:04:16.863 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.41.134 waku 090e00bdf6a13adcc045b50eaac5e79fa6809b380bf51ff829dfcdd598f794b8
2025-02-06 04:04:16.908 DEBUG [src.node.docker_mananger] Container started with ID 090e00bdf6a1. Setting up logs at ./log/docker/node2_2025-02-06_04-04-15__c2e06e02-3e04-44bd-8939-b1832a86eda6__wakuorg_nwaku:latest.log
2025-02-06 04:04:16.909 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 4249
2025-02-06 04:04:16.910 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:04:17.910 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4249/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:17.913 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:04:17.913 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:04:17.913 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4249/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:17.915 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.41.134/tcp/4250/p2p/16Uiu2HAm9rdi3sfUvjwXfu1oxSMzLbKcLHt8QcNXLXDBQQnatDVK","/ip4/172.18.41.134/tcp/4251/ws/p2p/16Uiu2HAm9rdi3sfUvjwXfu1oxSMzLbKcLHt8QcNXLXDBQQnatDVK"],"enrUri":"enr:-L24QK_7x5qS3E9-xgic2ZIXEptCG_mw3W5fPnD8Npvj_licJ6J3PWG8GYvk2DtFJTNDUaBfU_gN2PD-b-J8X4Se2poCgmlkgnY0gmlwhKwSKYaKbXVsdGlhZGRyc5YACASsEimGBhCaAAoErBIphgYQm90DgnJzhQADAQAAiXNlY3AyNTZrMaEC1miRofRmyQP1pJus5i3ecSGjpfa1jt-ETK2l_AscaYKDdGNwghCag3VkcIIQnIV3YWt1MgA"}'
2025-02-06 04:04:17.916 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:04:17.916 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4249/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.244.123/tcp/2143/p2p/16Uiu2HAm6V2e9TxjcfzVMcgLox5ni7FzKHm5qBx8ihNVY15LnuYF"]'
2025-02-06 04:04:17.950 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:17.952 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-06 04:04:17.952 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2142/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 04:04:17.968 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:17.969 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4249/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "6d17cac3-cd73-4957-85d1-0ecd59006aac", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-06 04:04:17.981 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"6d17cac3-cd73-4957-85d1-0ecd59006aac","statusDesc":"OK"}'
2025-02-06 04:04:17.982 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4249/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": ["/waku/2/rs/3/1"]}'
2025-02-06 04:04:17.984 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:4249/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
2025-02-06 04:04:17.987 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 04:04:17.988 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 04:04:17.988 DEBUG [src.node.waku_node] Stopping container with id f8d143146c00
2025-02-06 04:04:19.118 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:04:19.119 DEBUG [src.node.waku_node] Stopping container with id 090e00bdf6a1
2025-02-06 04:04:19.930 ERROR [src.node.docker_mananger] Max retries reached for container f8d143146c00. Exiting log stream.
2025-02-06 04:04:20.594 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:04:20.595 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 04:04:20.600 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:04:20.604 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
