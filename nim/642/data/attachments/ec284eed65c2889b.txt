2025-02-06 04:03:39.685 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 04:03:39.686 DEBUG [tests.conftest] Running test: test_light_push_with_missing_content_topic with id: 2025-02-06_04-03-39__8471fd69-384d-4661-a5ed-67d59cbd3c10
2025-02-06 04:03:39.686 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 04:03:39.686 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-06 04:03:39.693 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:03:39.693 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-06_04-03-39__8471fd69-384d-4661-a5ed-67d59cbd3c10__wakuorg_nwaku:latest.log
2025-02-06 04:03:39.693 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:03:39.693 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:03:39.695 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:03:39.695 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.189.53
2025-02-06 04:03:39.695 DEBUG [src.node.docker_mananger] Generated ports ['51285', '51286', '51287', '51288', '51289']
2025-02-06 04:03:39.695 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:03:39.695 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:03:39.695 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:03:39.695 DEBUG [src.node.docker_mananger] docker run -i -t -p 51285:51285 -p 51286:51286 -p 51287:51287 -p 51288:51288 -p 51289:51289 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51287 --rest-port=51285 --tcp-port=51286 --discv5-udp-port=51288 --rest-address=0.0.0.0 --nat=extip:172.18.189.53 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ed2b01ebb93a4cbb71a0e0d1c33c136dfb5c3f64fe58cda7040effd0af2bc0c6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51289 --metrics-logging=true --lightpush=true --relay=true
2025-02-06 04:03:39.919 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.189.53 waku d1bd79bfb9fa235cd1cd9544237671c8fc6fbac3de006338515b9390aa42217a
2025-02-06 04:03:39.966 DEBUG [src.node.docker_mananger] Container started with ID d1bd79bfb9fa. Setting up logs at ./log/docker/receiving_node1_2025-02-06_04-03-39__8471fd69-384d-4661-a5ed-67d59cbd3c10__wakuorg_nwaku:latest.log
2025-02-06 04:03:39.967 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 51285
2025-02-06 04:03:39.967 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:03:40.437 ERROR [src.node.docker_mananger] Max retries reached for container 2b93c9d4011a. Exiting log stream.
2025-02-06 04:03:40.968 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51285/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:03:40.971 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:03:40.971 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:03:40.971 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51285/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:03:40.974 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.189.53/tcp/51286/p2p/16Uiu2HAm6qyAQYmrTZDVGXU9mkh7b3JX9tAiCDyhuPmMDXh4mYtZ","/ip4/172.18.189.53/tcp/51287/ws/p2p/16Uiu2HAm6qyAQYmrTZDVGXU9mkh7b3JX9tAiCDyhuPmMDXh4mYtZ"],"enrUri":"enr:-L24QMyT2mMOcV3HgWmn8yA9Ia5vZBMSMR2DnpL3ugiSn5uKXbhJxVCsJ7uTDn8-4-CmmzOj0RdCCRqSZMgNtY3pIK0CgmlkgnY0gmlwhKwSvTWKbXVsdGlhZGRyc5YACASsEr01BshWAAoErBK9NQbIV90DgnJzhQADAQAAiXNlY3AyNTZrMaECqansqlPuiwOiq_6kwxHlk_9NFcGBdGUd5bHGjqskR5qDdGNwgshWg3VkcILIWIV3YWt1Mgk"}'
2025-02-06 04:03:40.974 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:03:40.980 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:03:40.981 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-06_04-03-39__8471fd69-384d-4661-a5ed-67d59cbd3c10__wakuorg_nwaku:latest.log
2025-02-06 04:03:40.981 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:03:40.981 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:03:40.982 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:03:40.982 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.135.245
2025-02-06 04:03:40.983 DEBUG [src.node.docker_mananger] Generated ports ['26827', '26828', '26829', '26830', '26831']
2025-02-06 04:03:40.983 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:03:40.983 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:03:40.983 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:03:40.983 DEBUG [src.node.docker_mananger] docker run -i -t -p 26827:26827 -p 26828:26828 -p 26829:26829 -p 26830:26830 -p 26831:26831 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26829 --rest-port=26827 --tcp-port=26828 --discv5-udp-port=26830 --rest-address=0.0.0.0 --nat=extip:172.18.135.245 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=73c9fd425b5fb6b8cffbb5e80e41d1f74164afab53af39277ffb8e2dfe2cffd8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26831 --metrics-logging=true --lightpush=false --relay=true
2025-02-06 04:03:41.217 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.135.245 waku 82f32e5a69d7bae5576a2cdaa8134a1396e35984601ff1cbdaa1a2b4b4e2387e
2025-02-06 04:03:41.267 DEBUG [src.node.docker_mananger] Container started with ID 82f32e5a69d7. Setting up logs at ./log/docker/receiving_node2_2025-02-06_04-03-39__8471fd69-384d-4661-a5ed-67d59cbd3c10__wakuorg_nwaku:latest.log
2025-02-06 04:03:41.267 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26827
2025-02-06 04:03:41.268 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:03:42.268 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26827/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:03:42.271 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:03:42.271 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:03:42.272 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26827/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:03:42.274 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.135.245/tcp/26828/p2p/16Uiu2HAkyHYsfZfDvcqYkFoVLfrYHj1ssTQWS58RGWYNA7kVkSR3","/ip4/172.18.135.245/tcp/26829/ws/p2p/16Uiu2HAkyHYsfZfDvcqYkFoVLfrYHj1ssTQWS58RGWYNA7kVkSR3"],"enrUri":"enr:-L24QAY4hbxyH8p9Pcuh77FOADCzJfUOILV-Cct9iW9y8KX4Qd1gprRKb_pl-feWSqDuQkmum3i2nwIfNRsqHaOVz0kCgmlkgnY0gmlwhKwSh_WKbXVsdGlhZGRyc5YACASsEof1BmjMAAoErBKH9QZozd0DgnJzhQADAQAAiXNlY3AyNTZrMaECOVoRHNiPma8uxu7nRwLKIOprgxwy8JU5T6NgUkQbbU6DdGNwgmjMg3VkcIJozoV3YWt1MgE"}'
2025-02-06 04:03:42.274 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:03:42.274 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26827/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.189.53/tcp/51286/p2p/16Uiu2HAm6qyAQYmrTZDVGXU9mkh7b3JX9tAiCDyhuPmMDXh4mYtZ"]'
2025-02-06 04:03:42.315 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:03:42.325 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:03:42.325 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-06_04-03-39__8471fd69-384d-4661-a5ed-67d59cbd3c10__wakuorg_nwaku:latest.log
2025-02-06 04:03:42.325 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:03:42.325 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:03:42.327 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:03:42.327 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.149.44
2025-02-06 04:03:42.327 DEBUG [src.node.docker_mananger] Generated ports ['60033', '60034', '60035', '60036', '60037']
2025-02-06 04:03:42.327 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:03:42.328 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:03:42.328 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:03:42.328 DEBUG [src.node.docker_mananger] docker run -i -t -p 60033:60033 -p 60034:60034 -p 60035:60035 -p 60036:60036 -p 60037:60037 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60035 --rest-port=60033 --tcp-port=60034 --discv5-udp-port=60036 --rest-address=0.0.0.0 --nat=extip:172.18.149.44 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=416e82a458675e5cd6a4475edb9baddbcacecadfabd9a6701ec6cebcb0dedc74 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60037 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMyT2mMOcV3HgWmn8yA9Ia5vZBMSMR2DnpL3ugiSn5uKXbhJxVCsJ7uTDn8-4-CmmzOj0RdCCRqSZMgNtY3pIK0CgmlkgnY0gmlwhKwSvTWKbXVsdGlhZGRyc5YACASsEr01BshWAAoErBK9NQbIV90DgnJzhQADAQAAiXNlY3AyNTZrMaECqansqlPuiwOiq_6kwxHlk_9NFcGBdGUd5bHGjqskR5qDdGNwgshWg3VkcILIWIV3YWt1Mgk --lightpushnode=/ip4/172.18.189.53/tcp/51286/p2p/16Uiu2HAm6qyAQYmrTZDVGXU9mkh7b3JX9tAiCDyhuPmMDXh4mYtZ --lightpush=true --relay=false
2025-02-06 04:03:42.573 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.149.44 waku f03b1128a44931206d9e2a179178a0b27c47478bbad01baccc11e5954a5a2ca7
2025-02-06 04:03:42.620 DEBUG [src.node.docker_mananger] Container started with ID f03b1128a449. Setting up logs at ./log/docker/lightpush_node1_2025-02-06_04-03-39__8471fd69-384d-4661-a5ed-67d59cbd3c10__wakuorg_nwaku:latest.log
2025-02-06 04:03:42.621 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 60033
2025-02-06 04:03:42.622 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:03:43.622 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60033/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:03:43.625 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:03:43.625 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:03:43.626 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60033/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:03:43.628 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.149.44/tcp/60034/p2p/16Uiu2HAm24fon4A4x6gDeqRTkM6KCXdCB7UXQfKu9aMZU35c68iw","/ip4/172.18.149.44/tcp/60035/ws/p2p/16Uiu2HAm24fon4A4x6gDeqRTkM6KCXdCB7UXQfKu9aMZU35c68iw"],"enrUri":"enr:-L24QPbMCNXKQcZyPaX7_ix78y2AyMBqk3l4fXFI-asXvqPTHTeMkxzPPLhi-xNxu9fvD01BeLveQSEVSEFEdiRGsMQCgmlkgnY0gmlwhKwSlSyKbXVsdGlhZGRyc5YACASsEpUsBuqCAAoErBKVLAbqg90DgnJzhQADAQAAiXNlY3AyNTZrMaECYqBqjmDSU7OOtwqpmVP0ZcNVFHPy-zYMNYIrt89om_SDdGNwguqCg3VkcILqhIV3YWt1Mgg"}'
2025-02-06 04:03:43.628 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:03:43.628 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60033/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.189.53/tcp/51286/p2p/16Uiu2HAm6qyAQYmrTZDVGXU9mkh7b3JX9tAiCDyhuPmMDXh4mYtZ"]'
2025-02-06 04:03:43.664 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:03:43.665 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60033/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.135.245/tcp/26828/p2p/16Uiu2HAkyHYsfZfDvcqYkFoVLfrYHj1ssTQWS58RGWYNA7kVkSR3"]'
2025-02-06 04:03:43.693 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:03:43.695 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51285/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 04:03:43.702 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:03:43.703 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26827/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 04:03:43.709 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:03:43.712 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60033/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "timestamp": 1738814623712179456}}'
2025-02-06 04:03:43.715 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:60033/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-06 04:03:43.717 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 04:03:43.718 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 04:03:43.718 DEBUG [src.node.waku_node] Stopping container with id d1bd79bfb9fa
2025-02-06 04:03:44.487 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:03:44.488 DEBUG [src.node.waku_node] Stopping container with id 82f32e5a69d7
2025-02-06 04:03:45.301 ERROR [src.node.docker_mananger] Max retries reached for container d1bd79bfb9fa. Exiting log stream.
2025-02-06 04:03:46.000 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:03:46.001 DEBUG [src.node.waku_node] Stopping container with id f03b1128a449
2025-02-06 04:03:46.813 ERROR [src.node.docker_mananger] Max retries reached for container 82f32e5a69d7. Exiting log stream.
2025-02-06 04:03:47.505 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:03:47.507 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 04:03:47.513 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:03:47.519 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:03:47.524 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
