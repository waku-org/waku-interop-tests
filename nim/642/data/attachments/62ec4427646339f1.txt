2025-02-06 04:06:12.884 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 04:06:12.884 DEBUG [tests.conftest] Running test: test_time_filter_matches_one_message with id: 2025-02-06_04-06-12__ee04ce33-18dd-45d9-9b6f-b3bd2f0b5666
2025-02-06 04:06:12.884 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 04:06:12.885 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-06 04:06:12.885 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-06 04:06:12.894 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:06:12.895 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-06_04-06-12__ee04ce33-18dd-45d9-9b6f-b3bd2f0b5666__wakuorg_nwaku:latest.log
2025-02-06 04:06:12.896 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:06:12.896 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:06:12.898 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:06:12.898 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.92.76
2025-02-06 04:06:12.898 DEBUG [src.node.docker_mananger] Generated ports ['24227', '24228', '24229', '24230', '24231']
2025-02-06 04:06:12.899 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:06:12.899 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:06:12.899 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:06:12.899 DEBUG [src.node.docker_mananger] docker run -i -t -p 24227:24227 -p 24228:24228 -p 24229:24229 -p 24230:24230 -p 24231:24231 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24229 --rest-port=24227 --tcp-port=24228 --discv5-udp-port=24230 --rest-address=0.0.0.0 --nat=extip:172.18.92.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b82bdc4eafcaeaaf93fcaacf005270fafbae9cd3159236befd73600db4c33d7f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24231 --metrics-logging=true --store=true --relay=true
2025-02-06 04:06:12.942 ERROR [src.node.docker_mananger] Max retries reached for container e2a4e27588b7. Exiting log stream.
2025-02-06 04:06:13.133 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.92.76 waku 2809db280cf5509c2c5601297e59da256558f735813078e963fa0ea4c9fff011
2025-02-06 04:06:13.189 DEBUG [src.node.docker_mananger] Container started with ID 2809db280cf5. Setting up logs at ./log/docker/publishing_node1_2025-02-06_04-06-12__ee04ce33-18dd-45d9-9b6f-b3bd2f0b5666__wakuorg_nwaku:latest.log
2025-02-06 04:06:13.190 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 24227
2025-02-06 04:06:13.191 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:06:13.717 ERROR [src.node.docker_mananger] Max retries reached for container b5c5fe1d6469. Exiting log stream.
2025-02-06 04:06:14.192 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24227/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:14.195 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:06:14.195 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:06:14.195 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24227/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:14.197 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.92.76/tcp/24228/p2p/16Uiu2HAmAMDWe8qKuhxMAhWPh7S7kt2wDUUvqnUwqorh4hbaE4rc","/ip4/172.18.92.76/tcp/24229/ws/p2p/16Uiu2HAmAMDWe8qKuhxMAhWPh7S7kt2wDUUvqnUwqorh4hbaE4rc"],"enrUri":"enr:-L24QGLEiHzWKNO48rPhFM1BLBYTJt45Mq-wOA9PSXR-C3qDR2EMCFx7jvvopB7S5iD8jy_0IAm7CBanhWytfrvUtM4CgmlkgnY0gmlwhKwSXEyKbXVsdGlhZGRyc5YACASsElxMBl6kAAoErBJcTAZepd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3bsNk3eM57Pl3n5CUbXPgHwWX6Jvmp5I7JLhtvmDSIGDdGNwgl6kg3VkcIJepoV3YWt1MgM"}'
2025-02-06 04:06:14.197 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:06:14.204 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:06:14.204 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-06_04-06-12__ee04ce33-18dd-45d9-9b6f-b3bd2f0b5666__wakuorg_nwaku:latest.log
2025-02-06 04:06:14.205 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:06:14.205 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:06:14.206 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:06:14.206 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.140.115
2025-02-06 04:06:14.206 DEBUG [src.node.docker_mananger] Generated ports ['49399', '49400', '49401', '49402', '49403']
2025-02-06 04:06:14.206 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:06:14.207 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:06:14.207 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:06:14.207 DEBUG [src.node.docker_mananger] docker run -i -t -p 49399:49399 -p 49400:49400 -p 49401:49401 -p 49402:49402 -p 49403:49403 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49401 --rest-port=49399 --tcp-port=49400 --discv5-udp-port=49402 --rest-address=0.0.0.0 --nat=extip:172.18.140.115 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9375f3dca09cadbba2d7f3bac8aa6c9baf4bed30cffcce98df5bb1c275bcf39e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49403 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QGLEiHzWKNO48rPhFM1BLBYTJt45Mq-wOA9PSXR-C3qDR2EMCFx7jvvopB7S5iD8jy_0IAm7CBanhWytfrvUtM4CgmlkgnY0gmlwhKwSXEyKbXVsdGlhZGRyc5YACASsElxMBl6kAAoErBJcTAZepd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3bsNk3eM57Pl3n5CUbXPgHwWX6Jvmp5I7JLhtvmDSIGDdGNwgl6kg3VkcIJepoV3YWt1MgM --storenode=/ip4/172.18.92.76/tcp/24228/p2p/16Uiu2HAmAMDWe8qKuhxMAhWPh7S7kt2wDUUvqnUwqorh4hbaE4rc --store=true --relay=true
2025-02-06 04:06:14.438 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.140.115 waku f58c0e1a352ce547ff494ca9b362ae3462de09777cefa61d2bf8fb6a0be24afe
2025-02-06 04:06:14.489 DEBUG [src.node.docker_mananger] Container started with ID f58c0e1a352c. Setting up logs at ./log/docker/store_node1_2025-02-06_04-06-12__ee04ce33-18dd-45d9-9b6f-b3bd2f0b5666__wakuorg_nwaku:latest.log
2025-02-06 04:06:14.491 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49399
2025-02-06 04:06:14.491 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:06:15.492 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49399/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:15.495 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:06:15.496 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:06:15.496 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49399/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:15.498 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.140.115/tcp/49400/p2p/16Uiu2HAmAxhjRSMH1yBcoYougafpY8CagWkUZk4y7TGYSqkmbzre","/ip4/172.18.140.115/tcp/49401/ws/p2p/16Uiu2HAmAxhjRSMH1yBcoYougafpY8CagWkUZk4y7TGYSqkmbzre"],"enrUri":"enr:-L24QOcuBLA3_a2YyciwmDXJf6MStu-88PMzdD5Z_aCF_UxebjgFMfbswX2kHILzmciorekLO4GN2akrj166qls6df4CgmlkgnY0gmlwhKwSjHOKbXVsdGlhZGRyc5YACASsEoxzBsD4AAoErBKMcwbA-d0DgnJzhQADAQAAiXNlY3AyNTZrMaEC5tJKS5BJkwLkgSpbYle4MDmyHoS601PBinM_It74IbODdGNwgsD4g3VkcILA-oV3YWt1MgM"}'
2025-02-06 04:06:15.498 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:06:15.499 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49399/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.92.76/tcp/24228/p2p/16Uiu2HAmAMDWe8qKuhxMAhWPh7S7kt2wDUUvqnUwqorh4hbaE4rc"]'
2025-02-06 04:06:15.501 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:15.502 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24227/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 04:06:15.504 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:15.504 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49399/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 04:06:15.507 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:15.508 DEBUG [src.steps.store] Relaying message
2025-02-06 04:06:15.508 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24227/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:15.513 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:15.514 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:06:15.716 DEBUG [src.steps.store] Relaying message
2025-02-06 04:06:15.716 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24227/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:15.723 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:15.724 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:06:15.925 DEBUG [src.steps.store] Relaying message
2025-02-06 04:06:15.925 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24227/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:15.931 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:15.931 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:06:16.132 DEBUG [src.steps.store] Relaying message
2025-02-06 04:06:16.133 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24227/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:16.139 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:16.139 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:06:16.340 DEBUG [src.steps.store] Relaying message
2025-02-06 04:06:16.340 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24227/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:16.346 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:16.347 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:06:16.548 DEBUG [src.steps.store] Relaying message
2025-02-06 04:06:16.549 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24227/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:16.559 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:16.559 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:06:16.760 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24227/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1738814772507783008&endTime=1738814772507983008&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:16.764 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x398eb292ddc733d27664511f460f2a7bfbb94a5f91ccd4ded2e21c0fca3b9a1c"}]}'
2025-02-06 04:06:16.764 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49399/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1738814772507783008&endTime=1738814772507983008&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:16.767 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x398eb292ddc733d27664511f460f2a7bfbb94a5f91ccd4ded2e21c0fca3b9a1c"}]}'
2025-02-06 04:06:16.769 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 04:06:16.770 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 04:06:16.770 DEBUG [src.node.waku_node] Stopping container with id 2809db280cf5
2025-02-06 04:06:17.725 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:06:17.726 DEBUG [src.node.waku_node] Stopping container with id f58c0e1a352c
2025-02-06 04:06:18.558 ERROR [src.node.docker_mananger] Max retries reached for container 2809db280cf5. Exiting log stream.
2025-02-06 04:06:19.235 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:06:19.237 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 04:06:19.248 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:06:19.254 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
