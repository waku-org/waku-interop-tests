2025-02-06 04:02:24.197 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 04:02:24.197 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2025-02-06_04-02-24__e9e74c34-1d84-401e-802d-06ae4d54716d
2025-02-06 04:02:24.197 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 04:02:24.198 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-06 04:02:24.198 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-06 04:02:24.206 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:02:24.206 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_04-02-24__e9e74c34-1d84-401e-802d-06ae4d54716d__wakuorg_nwaku:latest.log
2025-02-06 04:02:24.212 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:02:24.212 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_04-02-24__e9e74c34-1d84-401e-802d-06ae4d54716d__wakuorg_nwaku:latest.log
2025-02-06 04:02:24.218 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:02:24.218 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-06_04-02-24__e9e74c34-1d84-401e-802d-06ae4d54716d__wakuorg_nwaku:latest.log
2025-02-06 04:02:24.218 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-06 04:02:24.219 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-06 04:02:24.220 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:02:24.220 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:02:24.292 DEBUG [src.node.docker_mananger] Network waku created
2025-02-06 04:02:24.292 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.229.131
2025-02-06 04:02:24.292 DEBUG [src.node.docker_mananger] Generated ports ['35408', '35409', '35410', '35411', '35412']
2025-02-06 04:02:24.292 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:02:24.292 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:02:24.293 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:02:24.293 DEBUG [src.node.docker_mananger] docker run -i -t -p 35408:35408 -p 35409:35409 -p 35410:35410 -p 35411:35411 -p 35412:35412 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35410 --rest-port=35408 --tcp-port=35409 --discv5-udp-port=35411 --rest-address=0.0.0.0 --nat=extip:172.18.229.131 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4dddbfaa45fd52bfa657787da4ecb2ebcdbfcb1112fc1ff4fc049af3edcee053 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35412 --metrics-logging=true --relay=true
2025-02-06 04:02:27.947 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.229.131 waku 72cbbd642703677635dc55998115d0aad90d0422fee1309ca27e9f988adc358d
2025-02-06 04:02:28.001 DEBUG [src.node.docker_mananger] Container started with ID 72cbbd642703. Setting up logs at ./log/docker/node1_2025-02-06_04-02-24__e9e74c34-1d84-401e-802d-06ae4d54716d__wakuorg_nwaku:latest.log
2025-02-06 04:02:28.002 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 35408
2025-02-06 04:02:28.002 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:02:29.002 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35408/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:02:29.005 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:02:29.005 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:02:29.006 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35408/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:02:29.008 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.229.131/tcp/35409/p2p/16Uiu2HAm35txk2sCkA31MZbA5m3PEnQm1k3vdQmkpQyRyUDDda14","/ip4/172.18.229.131/tcp/35410/ws/p2p/16Uiu2HAm35txk2sCkA31MZbA5m3PEnQm1k3vdQmkpQyRyUDDda14"],"enrUri":"enr:-L24QOR3gqzRc5a00PpJQF97bUQIy4SZanns11lHmngo-6vVFfIY7Fd9k7aDPU78Y45qQf9WQB2MPN3C0e4ih2mzI78CgmlkgnY0gmlwhKwS5YOKbXVsdGlhZGRyc5YACASsEuWDBopRAAoErBLlgwaKUt0DgnJzhQADAQAAiXNlY3AyNTZrMaECccyO0fvXmo220YMsR7iq_5k8uPV-EUfIIY7UkxZSoEeDdGNwgopRg3VkcIKKU4V3YWt1MgE"}'
2025-02-06 04:02:29.008 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:02:29.008 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:02:29.008 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:02:29.010 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:02:29.010 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.133.196
2025-02-06 04:02:29.010 DEBUG [src.node.docker_mananger] Generated ports ['3666', '3667', '3668', '3669', '3670']
2025-02-06 04:02:29.010 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:02:29.011 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:02:29.011 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:02:29.011 DEBUG [src.node.docker_mananger] docker run -i -t -p 3666:3666 -p 3667:3667 -p 3668:3668 -p 3669:3669 -p 3670:3670 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3668 --rest-port=3666 --tcp-port=3667 --discv5-udp-port=3669 --rest-address=0.0.0.0 --nat=extip:172.18.133.196 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=caebfbcdeb75f1de95f052faf4dadd09cc0e33a7ec1e623005afa45ceeae5cdc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3670 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QOR3gqzRc5a00PpJQF97bUQIy4SZanns11lHmngo-6vVFfIY7Fd9k7aDPU78Y45qQf9WQB2MPN3C0e4ih2mzI78CgmlkgnY0gmlwhKwS5YOKbXVsdGlhZGRyc5YACASsEuWDBopRAAoErBLlgwaKUt0DgnJzhQADAQAAiXNlY3AyNTZrMaECccyO0fvXmo220YMsR7iq_5k8uPV-EUfIIY7UkxZSoEeDdGNwgopRg3VkcIKKU4V3YWt1MgE
2025-02-06 04:02:29.260 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.133.196 waku 9a900aec77f556b2462fc154567c1c5d37cd094a3365439d45d43064ddb5fd72
2025-02-06 04:02:29.309 DEBUG [src.node.docker_mananger] Container started with ID 9a900aec77f5. Setting up logs at ./log/docker/node2_2025-02-06_04-02-24__e9e74c34-1d84-401e-802d-06ae4d54716d__wakuorg_nwaku:latest.log
2025-02-06 04:02:29.312 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 3666
2025-02-06 04:02:29.312 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:02:30.312 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3666/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:02:30.316 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:02:30.317 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:02:30.317 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3666/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:02:30.322 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.133.196/tcp/3667/p2p/16Uiu2HAkuhKRRY1Ho7jE2Fg8epoSd9m2a43oUbmkr9v6fYEvFYXK","/ip4/172.18.133.196/tcp/3668/ws/p2p/16Uiu2HAkuhKRRY1Ho7jE2Fg8epoSd9m2a43oUbmkr9v6fYEvFYXK"],"enrUri":"enr:-L24QKgppscerKRM5KpEGs5RqX_Dv-DECB26c0c9CWXEMqT7PzyGVUL3QwJPGsNlWR-bVIWFWNW279AijY3-79oJGZoCgmlkgnY0gmlwhKwShcSKbXVsdGlhZGRyc5YACASsEoXEBg5TAAoErBKFxAYOVN0DgnJzhQADAQAAiXNlY3AyNTZrMaECBAIMPo67lXZ_nf8FctTl3Nn7X4P_YMiVhtiXIwFsKZqDdGNwgg5Tg3VkcIIOVYV3YWt1MgM"}'
2025-02-06 04:02:30.324 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:02:30.326 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:02:30.329 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:02:30.334 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:02:30.337 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.100.208
2025-02-06 04:02:30.340 DEBUG [src.node.docker_mananger] Generated ports ['22157', '22158', '22159', '22160', '22161']
2025-02-06 04:02:30.341 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:02:30.341 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:02:30.341 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:02:30.341 DEBUG [src.node.docker_mananger] docker run -i -t -p 22157:22157 -p 22158:22158 -p 22159:22159 -p 22160:22160 -p 22161:22161 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22159 --rest-port=22157 --tcp-port=22158 --discv5-udp-port=22160 --rest-address=0.0.0.0 --nat=extip:172.18.100.208 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b87fbfa53d445c604c1ccb4fe5f6b704eef5c79ebafebfb7ac6c3b9ad158ab3b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22161 --metrics-logging=true --relay=false --storenode=/ip4/172.18.133.196/tcp/3667/p2p/16Uiu2HAkuhKRRY1Ho7jE2Fg8epoSd9m2a43oUbmkr9v6fYEvFYXK --discv5-bootstrap-node=enr:-L24QKgppscerKRM5KpEGs5RqX_Dv-DECB26c0c9CWXEMqT7PzyGVUL3QwJPGsNlWR-bVIWFWNW279AijY3-79oJGZoCgmlkgnY0gmlwhKwShcSKbXVsdGlhZGRyc5YACASsEoXEBg5TAAoErBKFxAYOVN0DgnJzhQADAQAAiXNlY3AyNTZrMaECBAIMPo67lXZ_nf8FctTl3Nn7X4P_YMiVhtiXIwFsKZqDdGNwgg5Tg3VkcIIOVYV3YWt1MgM
2025-02-06 04:02:30.578 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.100.208 waku b82cb3ef3ed623f78e2c36813197214d020534ab3c5cb4227042c03382e44858
2025-02-06 04:02:30.629 DEBUG [src.node.docker_mananger] Container started with ID b82cb3ef3ed6. Setting up logs at ./log/docker/node3_2025-02-06_04-02-24__e9e74c34-1d84-401e-802d-06ae4d54716d__wakuorg_nwaku:latest.log
2025-02-06 04:02:30.630 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22157
2025-02-06 04:02:30.630 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:02:31.631 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22157/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:02:31.634 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:02:31.635 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:02:31.635 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22157/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:02:31.637 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.100.208/tcp/22158/p2p/16Uiu2HAmVVcF449iTX2BYmPMTbG4pd9r2phs6sncSN6AArRGt2SQ","/ip4/172.18.100.208/tcp/22159/ws/p2p/16Uiu2HAmVVcF449iTX2BYmPMTbG4pd9r2phs6sncSN6AArRGt2SQ"],"enrUri":"enr:-L24QMbR5e7P9IKHgkU6VCEdZICL8ocOy-oCbOKOSngSUuXIEjXyqN-RuuxX_nlAm3j7encVSDsmRGwSs4t1z3O3xH4CgmlkgnY0gmlwhKwSZNCKbXVsdGlhZGRyc5YACASsEmTQBlaOAAoErBJk0AZWj90DgnJzhQADAQAAiXNlY3AyNTZrMaED-i90Ep5j8ZlI4b8cFKWcdTuNMZtM_V9G-vVaJN1jG42DdGNwglaOg3VkcIJWkIV3YWt1MgA"}'
2025-02-06 04:02:31.637 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:02:31.637 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35408/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 04:02:31.642 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:02:31.642 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3666/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 04:02:31.647 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:02:31.648 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35408/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:02:31.652 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.133.196/tcp/3667/p2p/16Uiu2HAkuhKRRY1Ho7jE2Fg8epoSd9m2a43oUbmkr9v6fYEvFYXK","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-06 04:02:31.653 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3666/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:02:31.655 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.229.131/tcp/35409/p2p/16Uiu2HAm35txk2sCkA31MZbA5m3PEnQm1k3vdQmkpQyRyUDDda14","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
2025-02-06 04:02:31.655 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-06 04:03:01.656 DEBUG [src.steps.store] Relaying message
2025-02-06 04:03:01.656 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35408/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:03:01.661 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:03:01.662 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:03:01.863 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-06 04:03:01.863 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22157/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:03:01.904 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"f901e217ac3cec4cde3f","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x40a4c98f370147d77b8f303ed1b9188704ce135e74a4a14c2898f46f3d6e2f9e"}]}'
2025-02-06 04:03:01.914 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 04:03:01.915 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 04:03:01.916 DEBUG [src.node.waku_node] Stopping container with id 72cbbd642703
2025-02-06 04:03:02.454 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:03:02.454 DEBUG [src.node.waku_node] Stopping container with id 9a900aec77f5
2025-02-06 04:03:03.267 ERROR [src.node.docker_mananger] Max retries reached for container 72cbbd642703. Exiting log stream.
2025-02-06 04:03:03.883 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:03:03.883 DEBUG [src.node.waku_node] Stopping container with id b82cb3ef3ed6
2025-02-06 04:03:04.734 ERROR [src.node.docker_mananger] Max retries reached for container 9a900aec77f5. Exiting log stream.
2025-02-06 04:03:05.379 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:03:05.380 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 04:03:05.389 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:03:05.411 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:03:05.415 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
