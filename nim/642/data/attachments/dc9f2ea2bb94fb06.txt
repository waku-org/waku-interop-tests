2025-02-06 04:04:10.356 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 04:04:10.357 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_very_large_request_id with id: 2025-02-06_04-04-10__79515e1f-7924-4d18-96cb-d6f1039c1d7f
2025-02-06 04:04:10.357 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 04:04:10.357 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-06 04:04:10.357 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-06 04:04:10.363 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:04:10.363 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_04-04-10__79515e1f-7924-4d18-96cb-d6f1039c1d7f__wakuorg_nwaku:latest.log
2025-02-06 04:04:10.363 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:04:10.363 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:04:10.365 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:04:10.365 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.177.118
2025-02-06 04:04:10.365 DEBUG [src.node.docker_mananger] Generated ports ['9418', '9419', '9420', '9421', '9422']
2025-02-06 04:04:10.365 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:04:10.365 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:04:10.365 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:04:10.366 DEBUG [src.node.docker_mananger] docker run -i -t -p 9418:9418 -p 9419:9419 -p 9420:9420 -p 9421:9421 -p 9422:9422 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9420 --rest-port=9418 --tcp-port=9419 --discv5-udp-port=9421 --rest-address=0.0.0.0 --nat=extip:172.18.177.118 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e614bc9eafd3f74173e44f9e4f3600f86d8f7bc2b38e62b0a8de4ba74c6911aa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9422 --metrics-logging=true --relay=true --filter=true
2025-02-06 04:04:10.594 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.177.118 waku 14da58144481e30ff84a410a3d4aceb38a0b0d506745c97ae7fff49931fc60c8
2025-02-06 04:04:10.641 DEBUG [src.node.docker_mananger] Container started with ID 14da58144481. Setting up logs at ./log/docker/node1_2025-02-06_04-04-10__79515e1f-7924-4d18-96cb-d6f1039c1d7f__wakuorg_nwaku:latest.log
2025-02-06 04:04:10.642 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9418
2025-02-06 04:04:10.643 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:04:11.162 ERROR [src.node.docker_mananger] Max retries reached for container 0e5722cc38e9. Exiting log stream.
2025-02-06 04:04:11.643 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9418/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:11.646 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:04:11.646 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:04:11.646 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9418/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:11.648 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.177.118/tcp/9419/p2p/16Uiu2HAm4VZguSTF7hre1AwRH1fcuz3wLtHRHoYxXJZJ8XkNeyYY","/ip4/172.18.177.118/tcp/9420/ws/p2p/16Uiu2HAm4VZguSTF7hre1AwRH1fcuz3wLtHRHoYxXJZJ8XkNeyYY"],"enrUri":"enr:-L24QJbnh620Ne9ZsXGaYRPhNdt88Kb7KT3fprYt0q3BGqVMW2Pk-Xy4XY9SWdj3vuEM_KdOW9mzTMjuzwqlVFLmcUgCgmlkgnY0gmlwhKwSsXaKbXVsdGlhZGRyc5YACASsErF2BiTLAAoErBKxdgYkzN0DgnJzhQADAQAAiXNlY3AyNTZrMaEChrhkYV9Sbp8auzYsGM2DkccCbvVKWiggxRyeNexRPP2DdGNwgiTLg3VkcIIkzYV3YWt1MgU"}'
2025-02-06 04:04:11.649 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:04:11.649 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-06 04:04:11.655 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:04:11.655 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_04-04-10__79515e1f-7924-4d18-96cb-d6f1039c1d7f__wakuorg_nwaku:latest.log
2025-02-06 04:04:11.655 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:04:11.655 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:04:11.656 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:04:11.657 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.77.2
2025-02-06 04:04:11.657 DEBUG [src.node.docker_mananger] Generated ports ['6898', '6899', '6900', '6901', '6902']
2025-02-06 04:04:11.657 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:04:11.657 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:04:11.657 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:04:11.657 DEBUG [src.node.docker_mananger] docker run -i -t -p 6898:6898 -p 6899:6899 -p 6900:6900 -p 6901:6901 -p 6902:6902 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6900 --rest-port=6898 --tcp-port=6899 --discv5-udp-port=6901 --rest-address=0.0.0.0 --nat=extip:172.18.77.2 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1baed8185d92a8dfa2ed321cd2fe5b6cdb44c0b96fd9ce28adfc486b93f8cddf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6902 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QJbnh620Ne9ZsXGaYRPhNdt88Kb7KT3fprYt0q3BGqVMW2Pk-Xy4XY9SWdj3vuEM_KdOW9mzTMjuzwqlVFLmcUgCgmlkgnY0gmlwhKwSsXaKbXVsdGlhZGRyc5YACASsErF2BiTLAAoErBKxdgYkzN0DgnJzhQADAQAAiXNlY3AyNTZrMaEChrhkYV9Sbp8auzYsGM2DkccCbvVKWiggxRyeNexRPP2DdGNwgiTLg3VkcIIkzYV3YWt1MgU --filternode=/ip4/172.18.177.118/tcp/9419/p2p/16Uiu2HAm4VZguSTF7hre1AwRH1fcuz3wLtHRHoYxXJZJ8XkNeyYY
2025-02-06 04:04:11.886 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.77.2 waku de025f89e0856dc34d743336f940a783bb1295fdc46a52483f5c669b3db1a195
2025-02-06 04:04:11.934 DEBUG [src.node.docker_mananger] Container started with ID de025f89e085. Setting up logs at ./log/docker/node2_2025-02-06_04-04-10__79515e1f-7924-4d18-96cb-d6f1039c1d7f__wakuorg_nwaku:latest.log
2025-02-06 04:04:11.934 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6898
2025-02-06 04:04:11.934 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:04:12.935 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6898/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:12.938 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:04:12.938 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:04:12.938 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6898/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:12.940 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.77.2/tcp/6899/p2p/16Uiu2HAm8uDmo9MEPi6rEsKNLm3hu6WdNok5jokNq4DEKC4jgr3n","/ip4/172.18.77.2/tcp/6900/ws/p2p/16Uiu2HAm8uDmo9MEPi6rEsKNLm3hu6WdNok5jokNq4DEKC4jgr3n"],"enrUri":"enr:-L24QNMLe4olqJOD1Q-gwpj4TkdCcmGZotDQeO5xkAgxiGdzGb4NbmlsrjiLxujWfEBCLVuTh97rpOldIeoDaZKxJBMCgmlkgnY0gmlwhKwSTQKKbXVsdGlhZGRyc5YACASsEk0CBhrzAAoErBJNAgYa9N0DgnJzhQADAQAAiXNlY3AyNTZrMaECyDaPfkXLLwFExC90Ixw3o-SABeYq91GtI3MVxgtvSN2DdGNwghrzg3VkcIIa9YV3YWt1MgA"}'
2025-02-06 04:04:12.940 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:04:12.941 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6898/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.177.118/tcp/9419/p2p/16Uiu2HAm4VZguSTF7hre1AwRH1fcuz3wLtHRHoYxXJZJ8XkNeyYY"]'
2025-02-06 04:04:12.976 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:12.979 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-06 04:04:12.980 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9418/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 04:04:12.999 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:13.001 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6898/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "90df072e-66e1-4da7-93b8-097df9313488", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-06 04:04:13.011 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"90df072e-66e1-4da7-93b8-097df9313488","statusDesc":"OK"}'
2025-02-06 04:04:13.013 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9418/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:13.020 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:13.020 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:04:13.120 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-06 04:04:13.120 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6898/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:13.123 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1738814653013019392,"ephemeral":false}]'
2025-02-06 04:04:13.124 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:6898/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345678901234567890123456789012345678901234567890", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-06 04:04:13.132 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"12345678901234567890123456789012345678901234567890","statusDesc":"OK"}'
2025-02-06 04:04:13.133 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9418/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:13.136 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:13.136 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:04:13.236 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-06 04:04:13.237 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6898/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:13.239 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:6898/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto. Response content: b'Not subscribed to topic: /test/1/waku-filter/proto'
2025-02-06 04:04:13.242 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 04:04:13.243 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 04:04:13.243 DEBUG [src.node.waku_node] Stopping container with id 14da58144481
2025-02-06 04:04:13.974 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:04:13.974 DEBUG [src.node.waku_node] Stopping container with id de025f89e085
2025-02-06 04:04:14.786 ERROR [src.node.docker_mananger] Max retries reached for container 14da58144481. Exiting log stream.
2025-02-06 04:04:15.443 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:04:15.444 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 04:04:15.449 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:04:15.453 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
