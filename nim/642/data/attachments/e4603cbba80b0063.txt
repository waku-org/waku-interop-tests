2025-02-06 04:03:57.398 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 04:03:57.398 DEBUG [tests.conftest] Running test: test_light_push_with_missing_pubsub_topics with id: 2025-02-06_04-03-57__74b538fa-cf49-4697-860a-0f9638aeeddd
2025-02-06 04:03:57.398 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 04:03:57.399 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-06 04:03:57.405 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:03:57.405 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-06_04-03-57__74b538fa-cf49-4697-860a-0f9638aeeddd__wakuorg_nwaku:latest.log
2025-02-06 04:03:57.406 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:03:57.406 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:03:57.407 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:03:57.407 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.133.59
2025-02-06 04:03:57.407 DEBUG [src.node.docker_mananger] Generated ports ['17348', '17349', '17350', '17351', '17352']
2025-02-06 04:03:57.407 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:03:57.408 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:03:57.408 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:03:57.408 DEBUG [src.node.docker_mananger] docker run -i -t -p 17348:17348 -p 17349:17349 -p 17350:17350 -p 17351:17351 -p 17352:17352 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17350 --rest-port=17348 --tcp-port=17349 --discv5-udp-port=17351 --rest-address=0.0.0.0 --nat=extip:172.18.133.59 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=daf7c476dab6f1cbbaf31baede5ddc12fee5eb0ca63fb9ad7ab1386cfaec7a2d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17352 --metrics-logging=true --lightpush=true --relay=true
2025-02-06 04:03:57.639 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.133.59 waku a4f7b2459ad7d568e2fe7d81b83b750ed4f1216d8aab4f5bd5dc0cabc61c139a
2025-02-06 04:03:57.689 DEBUG [src.node.docker_mananger] Container started with ID a4f7b2459ad7. Setting up logs at ./log/docker/receiving_node1_2025-02-06_04-03-57__74b538fa-cf49-4697-860a-0f9638aeeddd__wakuorg_nwaku:latest.log
2025-02-06 04:03:57.690 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17348
2025-02-06 04:03:57.690 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:03:58.081 ERROR [src.node.docker_mananger] Max retries reached for container f903cc6d1ac5. Exiting log stream.
2025-02-06 04:03:58.691 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17348/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:03:58.694 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:03:58.694 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:03:58.694 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17348/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:03:58.696 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.133.59/tcp/17349/p2p/16Uiu2HAkvnPxn1snvUdaDmRc7TvABBHGqnh6P1XRJqY5xtKBFZnF","/ip4/172.18.133.59/tcp/17350/ws/p2p/16Uiu2HAkvnPxn1snvUdaDmRc7TvABBHGqnh6P1XRJqY5xtKBFZnF"],"enrUri":"enr:-L24QJ93oY6IZFs4wZir0_tXkHY4fN0wNazi36tG_KqyS22uHkTsvWwxMo0j_Hwiw5ZO-nEGMju-OcIi96AswfJn8q0CgmlkgnY0gmlwhKwShTuKbXVsdGlhZGRyc5YACASsEoU7BkPFAAoErBKFOwZDxt0DgnJzhQADAQAAiXNlY3AyNTZrMaECFCrF2OtFf5tNt-9_h4JVSGC8nRI4bOabDchrv12qFxCDdGNwgkPFg3VkcIJDx4V3YWt1Mgk"}'
2025-02-06 04:03:58.696 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:03:58.703 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:03:58.703 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-06_04-03-57__74b538fa-cf49-4697-860a-0f9638aeeddd__wakuorg_nwaku:latest.log
2025-02-06 04:03:58.703 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:03:58.703 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:03:58.705 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:03:58.705 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.189.161
2025-02-06 04:03:58.705 DEBUG [src.node.docker_mananger] Generated ports ['39596', '39597', '39598', '39599', '39600']
2025-02-06 04:03:58.705 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:03:58.705 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:03:58.706 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:03:58.706 DEBUG [src.node.docker_mananger] docker run -i -t -p 39596:39596 -p 39597:39597 -p 39598:39598 -p 39599:39599 -p 39600:39600 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39598 --rest-port=39596 --tcp-port=39597 --discv5-udp-port=39599 --rest-address=0.0.0.0 --nat=extip:172.18.189.161 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5adddbe3eaec6a72003d24aec2b0d964ccecff4be3cebceb1cd547fde832ab3b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39600 --metrics-logging=true --lightpush=false --relay=true
2025-02-06 04:03:58.933 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.189.161 waku ca635233402160eb3e8f8d2c97d44dccd9833708ceac2c26dee90075f5852e69
2025-02-06 04:03:58.988 DEBUG [src.node.docker_mananger] Container started with ID ca6352334021. Setting up logs at ./log/docker/receiving_node2_2025-02-06_04-03-57__74b538fa-cf49-4697-860a-0f9638aeeddd__wakuorg_nwaku:latest.log
2025-02-06 04:03:58.988 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 39596
2025-02-06 04:03:58.988 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:03:59.989 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39596/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:03:59.991 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:03:59.992 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:03:59.992 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39596/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:03:59.994 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.189.161/tcp/39597/p2p/16Uiu2HAkyroLNopZ6SNFXc5Kx77EYBnWLTVa1TWVqMhAvtmCefar","/ip4/172.18.189.161/tcp/39598/ws/p2p/16Uiu2HAkyroLNopZ6SNFXc5Kx77EYBnWLTVa1TWVqMhAvtmCefar"],"enrUri":"enr:-L24QPaRNFOFdSkuNDssHJiwL4Qtto4ISrf8zFqCApL2Wsw4Jz2xFOF77IoK17eyC-zk_tpQLGfd1_UnYeTIdzyn378CgmlkgnY0gmlwhKwSvaGKbXVsdGlhZGRyc5YACASsEr2hBpqtAAoErBK9oQaart0DgnJzhQADAQAAiXNlY3AyNTZrMaECQd6ViU8IG2Gdj8FS0Dz-DY8zdNdW6BqKow6tBDqVHjuDdGNwgpqtg3VkcIKar4V3YWt1MgE"}'
2025-02-06 04:03:59.994 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:03:59.995 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39596/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.133.59/tcp/17349/p2p/16Uiu2HAkvnPxn1snvUdaDmRc7TvABBHGqnh6P1XRJqY5xtKBFZnF"]'
2025-02-06 04:04:00.037 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:00.050 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:04:00.052 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-06_04-03-57__74b538fa-cf49-4697-860a-0f9638aeeddd__wakuorg_nwaku:latest.log
2025-02-06 04:04:00.054 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:04:00.054 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:04:00.057 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:04:00.057 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.62.55
2025-02-06 04:04:00.057 DEBUG [src.node.docker_mananger] Generated ports ['28536', '28537', '28538', '28539', '28540']
2025-02-06 04:04:00.058 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:04:00.058 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:04:00.058 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:04:00.058 DEBUG [src.node.docker_mananger] docker run -i -t -p 28536:28536 -p 28537:28537 -p 28538:28538 -p 28539:28539 -p 28540:28540 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28538 --rest-port=28536 --tcp-port=28537 --discv5-udp-port=28539 --rest-address=0.0.0.0 --nat=extip:172.18.62.55 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5be8dbb71a1bdcdc85629a3d42c9fbea6185d841faafdb76f2b16ba28a997055 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28540 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJ93oY6IZFs4wZir0_tXkHY4fN0wNazi36tG_KqyS22uHkTsvWwxMo0j_Hwiw5ZO-nEGMju-OcIi96AswfJn8q0CgmlkgnY0gmlwhKwShTuKbXVsdGlhZGRyc5YACASsEoU7BkPFAAoErBKFOwZDxt0DgnJzhQADAQAAiXNlY3AyNTZrMaECFCrF2OtFf5tNt-9_h4JVSGC8nRI4bOabDchrv12qFxCDdGNwgkPFg3VkcIJDx4V3YWt1Mgk --lightpushnode=/ip4/172.18.133.59/tcp/17349/p2p/16Uiu2HAkvnPxn1snvUdaDmRc7TvABBHGqnh6P1XRJqY5xtKBFZnF --lightpush=true --relay=false
2025-02-06 04:04:00.299 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.62.55 waku 33e94ad795a24201b648cfab3bef005235033c21881305c29b8562a5b04a3444
2025-02-06 04:04:00.350 DEBUG [src.node.docker_mananger] Container started with ID 33e94ad795a2. Setting up logs at ./log/docker/lightpush_node1_2025-02-06_04-03-57__74b538fa-cf49-4697-860a-0f9638aeeddd__wakuorg_nwaku:latest.log
2025-02-06 04:04:00.350 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28536
2025-02-06 04:04:00.350 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:04:01.351 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28536/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:01.354 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:04:01.354 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:04:01.354 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28536/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:01.357 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.62.55/tcp/28537/p2p/16Uiu2HAmR7Y8EJVD11vTgND9uabiJSR6xdDXvvW1jakDAHtXoKXR","/ip4/172.18.62.55/tcp/28538/ws/p2p/16Uiu2HAmR7Y8EJVD11vTgND9uabiJSR6xdDXvvW1jakDAHtXoKXR"],"enrUri":"enr:-L24QGCHRP3LgVyh69EmcT7uRqS-M_p7EBaZ9WelvtFXnE-NM1edo-3ix17lMly0eip1ylv8oqmWHuAdauwHTbm_u54CgmlkgnY0gmlwhKwSPjeKbXVsdGlhZGRyc5YACASsEj43Bm95AAoErBI-NwZvet0DgnJzhQADAQAAiXNlY3AyNTZrMaEDuRlFpltv6vhsDEmBvSn07qetXfw1LdjOjY3ZWWkP3dyDdGNwgm95g3VkcIJve4V3YWt1Mgg"}'
2025-02-06 04:04:01.357 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:04:01.357 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28536/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.133.59/tcp/17349/p2p/16Uiu2HAkvnPxn1snvUdaDmRc7TvABBHGqnh6P1XRJqY5xtKBFZnF"]'
2025-02-06 04:04:01.395 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:01.397 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28536/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.189.161/tcp/39597/p2p/16Uiu2HAkyroLNopZ6SNFXc5Kx77EYBnWLTVa1TWVqMhAvtmCefar"]'
2025-02-06 04:04:01.427 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:01.429 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17348/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 04:04:01.435 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:01.435 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39596/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 04:04:01.442 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:01.445 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28536/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738814641445303552}}'
2025-02-06 04:04:01.453 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:28536/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
2025-02-06 04:04:01.455 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 04:04:01.456 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 04:04:01.456 DEBUG [src.node.waku_node] Stopping container with id a4f7b2459ad7
2025-02-06 04:04:02.193 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:04:02.193 DEBUG [src.node.waku_node] Stopping container with id ca6352334021
2025-02-06 04:04:03.006 ERROR [src.node.docker_mananger] Max retries reached for container a4f7b2459ad7. Exiting log stream.
2025-02-06 04:04:03.691 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:04:03.692 DEBUG [src.node.waku_node] Stopping container with id 33e94ad795a2
2025-02-06 04:04:04.504 ERROR [src.node.docker_mananger] Max retries reached for container ca6352334021. Exiting log stream.
2025-02-06 04:04:04.998 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:04:04.999 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 04:04:05.006 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:04:05.013 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:04:05.018 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
