2025-02-06 04:05:18.213 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 04:05:18.213 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_meta with id: 2025-02-06_04-05-18__ecdb60a6-e8a5-4e5c-b123-4ba7fbff6d5f
2025-02-06 04:05:18.213 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 04:05:18.213 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-06 04:05:18.219 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:05:18.220 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-06_04-05-18__ecdb60a6-e8a5-4e5c-b123-4ba7fbff6d5f__wakuorg_nwaku:latest.log
2025-02-06 04:05:18.220 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:05:18.220 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:05:18.221 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:05:18.221 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.17.52
2025-02-06 04:05:18.221 DEBUG [src.node.docker_mananger] Generated ports ['41415', '41416', '41417', '41418', '41419']
2025-02-06 04:05:18.221 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:05:18.222 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:05:18.222 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:05:18.222 DEBUG [src.node.docker_mananger] docker run -i -t -p 41415:41415 -p 41416:41416 -p 41417:41417 -p 41418:41418 -p 41419:41419 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41417 --rest-port=41415 --tcp-port=41416 --discv5-udp-port=41418 --rest-address=0.0.0.0 --nat=extip:172.18.17.52 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6c2f402efab13fe90f4edbff3f58ef046a03d025cba6accb60de70bebce71bba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41419 --metrics-logging=true --lightpush=true --relay=true
2025-02-06 04:05:18.453 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.17.52 waku 8c72dfc81c55b53ec920be201052b92423d1269f88bd4abcf96bed9832a1a1b7
2025-02-06 04:05:18.499 DEBUG [src.node.docker_mananger] Container started with ID 8c72dfc81c55. Setting up logs at ./log/docker/receiving_node1_2025-02-06_04-05-18__ecdb60a6-e8a5-4e5c-b123-4ba7fbff6d5f__wakuorg_nwaku:latest.log
2025-02-06 04:05:18.500 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 41415
2025-02-06 04:05:18.500 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:05:18.997 ERROR [src.node.docker_mananger] Max retries reached for container 0dffd6f33578. Exiting log stream.
2025-02-06 04:05:19.500 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41415/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:05:19.503 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:05:19.503 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:05:19.503 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41415/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:05:19.506 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.17.52/tcp/41416/p2p/16Uiu2HAmPQGMrWm9bLNVTq9UK85SG83iHcHJRWLatfWtkHncMt9z","/ip4/172.18.17.52/tcp/41417/ws/p2p/16Uiu2HAmPQGMrWm9bLNVTq9UK85SG83iHcHJRWLatfWtkHncMt9z"],"enrUri":"enr:-L24QKMS4UEL-Ig-HDf6870m4zxP1FCOlIEALFFgAQogvt95Jl2YdVd4BitKc9D-kyxEeT5J-4lG_4kOhtDVjzUStwsCgmlkgnY0gmlwhKwSETSKbXVsdGlhZGRyc5YACASsEhE0BqHIAAoErBIRNAahyd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDn6ryQe5pT3V7MrbSxzzdd-k-FfKk5ogeCE1AIHgiriWDdGNwgqHIg3VkcIKhyoV3YWt1Mgk"}'
2025-02-06 04:05:19.506 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:05:19.512 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:05:19.512 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-06_04-05-18__ecdb60a6-e8a5-4e5c-b123-4ba7fbff6d5f__wakuorg_nwaku:latest.log
2025-02-06 04:05:19.513 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:05:19.513 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:05:19.514 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:05:19.514 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.163.71
2025-02-06 04:05:19.514 DEBUG [src.node.docker_mananger] Generated ports ['44213', '44214', '44215', '44216', '44217']
2025-02-06 04:05:19.514 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:05:19.515 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:05:19.515 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:05:19.515 DEBUG [src.node.docker_mananger] docker run -i -t -p 44213:44213 -p 44214:44214 -p 44215:44215 -p 44216:44216 -p 44217:44217 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44215 --rest-port=44213 --tcp-port=44214 --discv5-udp-port=44216 --rest-address=0.0.0.0 --nat=extip:172.18.163.71 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=482aced59e44a0a0cb6ecf8503d613c3dd94ab9ffcdbabadedda579bab25b782 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44217 --metrics-logging=true --lightpush=false --relay=true
2025-02-06 04:05:19.737 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.163.71 waku 35dd0e07269450f0dafdbe4b75a97503d24838496516048ba564f5372936a64d
2025-02-06 04:05:19.783 DEBUG [src.node.docker_mananger] Container started with ID 35dd0e072694. Setting up logs at ./log/docker/receiving_node2_2025-02-06_04-05-18__ecdb60a6-e8a5-4e5c-b123-4ba7fbff6d5f__wakuorg_nwaku:latest.log
2025-02-06 04:05:19.784 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44213
2025-02-06 04:05:19.784 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:05:20.784 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44213/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:05:20.787 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:05:20.787 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:05:20.787 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44213/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:05:20.789 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.163.71/tcp/44214/p2p/16Uiu2HAmSqf9XafoYGs8Pmb8YDNswzH9t2gygjka3Cy8Cshd5Hbs","/ip4/172.18.163.71/tcp/44215/ws/p2p/16Uiu2HAmSqf9XafoYGs8Pmb8YDNswzH9t2gygjka3Cy8Cshd5Hbs"],"enrUri":"enr:-L24QMYnrp-8xS5hyDEdWN3xrx2XucxBZ4fxnlyyouh2H2X2WOVvZMcRu3i19QicNzUPOH_i11ww1ldofDIpnxIH-goCgmlkgnY0gmlwhKwSo0eKbXVsdGlhZGRyc5YACASsEqNHBqy2AAoErBKjRwast90DgnJzhQADAQAAiXNlY3AyNTZrMaED0r9LD30R6abK_v-lmymaP_doEWv5wy2Dw9CqQqeUqQaDdGNwgqy2g3VkcIKsuIV3YWt1MgE"}'
2025-02-06 04:05:20.789 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:05:20.790 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44213/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.17.52/tcp/41416/p2p/16Uiu2HAmPQGMrWm9bLNVTq9UK85SG83iHcHJRWLatfWtkHncMt9z"]'
2025-02-06 04:05:20.828 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:05:20.838 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:05:20.838 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-06_04-05-18__ecdb60a6-e8a5-4e5c-b123-4ba7fbff6d5f__wakuorg_nwaku:latest.log
2025-02-06 04:05:20.838 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:05:20.838 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:05:20.839 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:05:20.840 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.227.24
2025-02-06 04:05:20.840 DEBUG [src.node.docker_mananger] Generated ports ['36931', '36932', '36933', '36934', '36935']
2025-02-06 04:05:20.840 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:05:20.840 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:05:20.840 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:05:20.840 DEBUG [src.node.docker_mananger] docker run -i -t -p 36931:36931 -p 36932:36932 -p 36933:36933 -p 36934:36934 -p 36935:36935 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36933 --rest-port=36931 --tcp-port=36932 --discv5-udp-port=36934 --rest-address=0.0.0.0 --nat=extip:172.18.227.24 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=db7db58df6ac1dbe7ccc1bf268dbc42cd9b6e9af77bb89bedd1ed86bd7ef55cf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36935 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QKMS4UEL-Ig-HDf6870m4zxP1FCOlIEALFFgAQogvt95Jl2YdVd4BitKc9D-kyxEeT5J-4lG_4kOhtDVjzUStwsCgmlkgnY0gmlwhKwSETSKbXVsdGlhZGRyc5YACASsEhE0BqHIAAoErBIRNAahyd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDn6ryQe5pT3V7MrbSxzzdd-k-FfKk5ogeCE1AIHgiriWDdGNwgqHIg3VkcIKhyoV3YWt1Mgk --lightpushnode=/ip4/172.18.17.52/tcp/41416/p2p/16Uiu2HAmPQGMrWm9bLNVTq9UK85SG83iHcHJRWLatfWtkHncMt9z --lightpush=true --relay=false
2025-02-06 04:05:21.068 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.227.24 waku 5745abbc872528b9d5328bf96aeebf67b0259f69362ccb0ee0579ba57acd048e
2025-02-06 04:05:21.113 DEBUG [src.node.docker_mananger] Container started with ID 5745abbc8725. Setting up logs at ./log/docker/lightpush_node1_2025-02-06_04-05-18__ecdb60a6-e8a5-4e5c-b123-4ba7fbff6d5f__wakuorg_nwaku:latest.log
2025-02-06 04:05:21.114 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36931
2025-02-06 04:05:21.114 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:05:22.115 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36931/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:05:22.118 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:05:22.118 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:05:22.118 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36931/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:05:22.120 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.227.24/tcp/36932/p2p/16Uiu2HAmCux5bFDRu1pjy4udDAnovt7bi1fXSbFK5Q7TFk2USCt1","/ip4/172.18.227.24/tcp/36933/ws/p2p/16Uiu2HAmCux5bFDRu1pjy4udDAnovt7bi1fXSbFK5Q7TFk2USCt1"],"enrUri":"enr:-L24QEc0hq_LTNLq-8ZOHRy76GGDWuqAYfpEd9u2jdP-M_q1JixiE3hs7f3TbAZ-yWxmS8eX4GaTGTsGT5vGiZG29IACgmlkgnY0gmlwhKwS4xiKbXVsdGlhZGRyc5YACASsEuMYBpBEAAoErBLjGAaQRd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDA9UlCiK4ItErguFSvv7n5r8XFUjJnA2nwAPMiZzIshKDdGNwgpBEg3VkcIKQRoV3YWt1Mgg"}'
2025-02-06 04:05:22.120 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:05:22.121 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36931/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.17.52/tcp/41416/p2p/16Uiu2HAmPQGMrWm9bLNVTq9UK85SG83iHcHJRWLatfWtkHncMt9z"]'
2025-02-06 04:05:22.158 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:05:22.159 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36931/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.163.71/tcp/44214/p2p/16Uiu2HAmSqf9XafoYGs8Pmb8YDNswzH9t2gygjka3Cy8Cshd5Hbs"]'
2025-02-06 04:05:22.194 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:05:22.196 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41415/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 04:05:22.203 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:05:22.204 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44213/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 04:05:22.207 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:05:22.211 DEBUG [src.steps.light_push] Lightpushing message
2025-02-06 04:05:22.212 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36931/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738814722211554304, "meta": "Light push works!!"}}'
2025-02-06 04:05:22.215 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:36931/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
2025-02-06 04:05:22.217 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 04:05:22.218 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 04:05:22.218 DEBUG [src.node.waku_node] Stopping container with id 8c72dfc81c55
2025-02-06 04:05:23.001 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:05:23.002 DEBUG [src.node.waku_node] Stopping container with id 35dd0e072694
2025-02-06 04:05:23.813 ERROR [src.node.docker_mananger] Max retries reached for container 8c72dfc81c55. Exiting log stream.
2025-02-06 04:05:24.461 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:05:24.461 DEBUG [src.node.waku_node] Stopping container with id 5745abbc8725
2025-02-06 04:05:25.272 ERROR [src.node.docker_mananger] Max retries reached for container 35dd0e072694. Exiting log stream.
2025-02-06 04:05:25.963 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:05:25.963 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 04:05:25.971 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:05:25.977 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:05:25.982 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
