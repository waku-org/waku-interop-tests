2025-02-06 04:06:49.716 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 04:06:49.716 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_all_from_90_content_topics with id: 2025-02-06_04-06-49__17347a83-a732-4abd-8c24-29e5b137382c
2025-02-06 04:06:49.716 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 04:06:49.717 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-06 04:06:49.717 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-06 04:06:49.723 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:06:49.723 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_04-06-49__17347a83-a732-4abd-8c24-29e5b137382c__wakuorg_nwaku:latest.log
2025-02-06 04:06:49.723 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:06:49.724 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:06:49.725 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:06:49.725 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.157.227
2025-02-06 04:06:49.725 DEBUG [src.node.docker_mananger] Generated ports ['37349', '37350', '37351', '37352', '37353']
2025-02-06 04:06:49.726 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:06:49.726 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:06:49.726 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:06:49.726 DEBUG [src.node.docker_mananger] docker run -i -t -p 37349:37349 -p 37350:37350 -p 37351:37351 -p 37352:37352 -p 37353:37353 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37351 --rest-port=37349 --tcp-port=37350 --discv5-udp-port=37352 --rest-address=0.0.0.0 --nat=extip:172.18.157.227 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=03989a1c58e5217ff1fcbf31f3bea906be6ebfbf5d90d1dce20bafae955b7f42 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37353 --metrics-logging=true --relay=true --filter=true
2025-02-06 04:06:49.947 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.157.227 waku ccb8762b0986abc6caa85ed71d6f16b53b8318100a563f31c3446409c2093c23
2025-02-06 04:06:50.000 DEBUG [src.node.docker_mananger] Container started with ID ccb8762b0986. Setting up logs at ./log/docker/node1_2025-02-06_04-06-49__17347a83-a732-4abd-8c24-29e5b137382c__wakuorg_nwaku:latest.log
2025-02-06 04:06:50.000 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37349
2025-02-06 04:06:50.001 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:06:50.523 ERROR [src.node.docker_mananger] Max retries reached for container 0b78cbec150e. Exiting log stream.
2025-02-06 04:06:51.002 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37349/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:51.005 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:06:51.005 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:06:51.005 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37349/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:51.008 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.157.227/tcp/37350/p2p/16Uiu2HAmGV9jRg1Zdwca4fGZYviqFad93cFMTm55tTxCY87cgTWZ","/ip4/172.18.157.227/tcp/37351/ws/p2p/16Uiu2HAmGV9jRg1Zdwca4fGZYviqFad93cFMTm55tTxCY87cgTWZ"],"enrUri":"enr:-L24QNGmt_8jLa9Ex8dkgOeA1IYpxdQWYNOJ8PxKx5XqqkipMnsogI-j2oySEg7UKdCaAGIC7cWFq6fDatzMSWJnBSsCgmlkgnY0gmlwhKwSneOKbXVsdGlhZGRyc5YACASsEp3jBpHmAAoErBKd4waR590DgnJzhQADAQAAiXNlY3AyNTZrMaEDOOmMKHZkDjm5oPxAofMQXfqwO5qT4V7lng045mIxlaKDdGNwgpHmg3VkcIKR6IV3YWt1MgU"}'
2025-02-06 04:06:51.008 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:06:51.008 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-06 04:06:51.014 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:06:51.014 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_04-06-49__17347a83-a732-4abd-8c24-29e5b137382c__wakuorg_nwaku:latest.log
2025-02-06 04:06:51.015 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:06:51.015 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:06:51.016 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:06:51.016 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.225.90
2025-02-06 04:06:51.016 DEBUG [src.node.docker_mananger] Generated ports ['35840', '35841', '35842', '35843', '35844']
2025-02-06 04:06:51.016 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:06:51.017 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:06:51.017 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:06:51.017 DEBUG [src.node.docker_mananger] docker run -i -t -p 35840:35840 -p 35841:35841 -p 35842:35842 -p 35843:35843 -p 35844:35844 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35842 --rest-port=35840 --tcp-port=35841 --discv5-udp-port=35843 --rest-address=0.0.0.0 --nat=extip:172.18.225.90 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8e970ffca6dd0d4c8deccaf6c8da7bdab1bea037a16ab72da35cacf44d68cc37 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35844 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QNGmt_8jLa9Ex8dkgOeA1IYpxdQWYNOJ8PxKx5XqqkipMnsogI-j2oySEg7UKdCaAGIC7cWFq6fDatzMSWJnBSsCgmlkgnY0gmlwhKwSneOKbXVsdGlhZGRyc5YACASsEp3jBpHmAAoErBKd4waR590DgnJzhQADAQAAiXNlY3AyNTZrMaEDOOmMKHZkDjm5oPxAofMQXfqwO5qT4V7lng045mIxlaKDdGNwgpHmg3VkcIKR6IV3YWt1MgU --filternode=/ip4/172.18.157.227/tcp/37350/p2p/16Uiu2HAmGV9jRg1Zdwca4fGZYviqFad93cFMTm55tTxCY87cgTWZ
2025-02-06 04:06:51.241 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.225.90 waku 2b9564504596c8fcb47d80144d98bcb05b275df8d091e57bcd6aa4c1a583f1da
2025-02-06 04:06:51.289 DEBUG [src.node.docker_mananger] Container started with ID 2b9564504596. Setting up logs at ./log/docker/node2_2025-02-06_04-06-49__17347a83-a732-4abd-8c24-29e5b137382c__wakuorg_nwaku:latest.log
2025-02-06 04:06:51.289 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 35840
2025-02-06 04:06:51.290 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:06:52.290 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35840/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:52.293 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:06:52.293 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:06:52.293 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35840/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:52.296 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.225.90/tcp/35841/p2p/16Uiu2HAmG1gnpeEdySjDre5qz4zNNJ6HAp6SwmfrAjbAciEMPgiK","/ip4/172.18.225.90/tcp/35842/ws/p2p/16Uiu2HAmG1gnpeEdySjDre5qz4zNNJ6HAp6SwmfrAjbAciEMPgiK"],"enrUri":"enr:-L24QN39i7YtNoGK_NJVb-E1Nz4RWkCA3mldh3xcJDKCCqrrNLoJ1efrr2_J-_YF82v0NBt9dAqnjy2oke1_iTr6uoUCgmlkgnY0gmlwhKwS4VqKbXVsdGlhZGRyc5YACASsEuFaBowBAAoErBLhWgaMAt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDMeBnIYQ6lYWbJquN6sN904_fhEMaVedFZz5vMRY0NGiDdGNwgowBg3VkcIKMA4V3YWt1MgA"}'
2025-02-06 04:06:52.296 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:06:52.296 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35840/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.157.227/tcp/37350/p2p/16Uiu2HAmGV9jRg1Zdwca4fGZYviqFad93cFMTm55tTxCY87cgTWZ"]'
2025-02-06 04:06:52.332 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:52.337 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37349/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 04:06:52.353 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:52.354 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35840/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "9ebd71f8-641c-48b4-a193-7453a1a9f9e2", "contentFilters": ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-06 04:06:52.369 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"9ebd71f8-641c-48b4-a193-7453a1a9f9e2","statusDesc":"OK"}'
2025-02-06 04:06:52.369 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37349/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 04:06:52.371 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:52.372 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35840/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "6dd937e9-0ab8-412b-b24d-1ba91a0af9c3", "contentFilters": ["31", "32", "33", "34", "35", "36", "37", "38", "39", "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "50", "51", "52", "53", "54", "55", "56", "57", "58", "59", "60"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-06 04:06:52.387 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"6dd937e9-0ab8-412b-b24d-1ba91a0af9c3","statusDesc":"OK"}'
2025-02-06 04:06:52.388 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37349/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 04:06:52.390 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:52.390 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35840/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "7cf27faf-409d-4f39-a755-90c8bf4c04f6", "contentFilters": ["61", "62", "63", "64", "65", "66", "67", "68", "69", "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", "80", "81", "82", "83", "84", "85", "86", "87", "88", "89", "90"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-06 04:06:52.411 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"7cf27faf-409d-4f39-a755-90c8bf4c04f6","statusDesc":"OK"}'
2025-02-06 04:06:52.412 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37349/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "2", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:52.436 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:52.436 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:06:52.536 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-06 04:06:52.536 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35840/filter/v2/messages/2" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:52.539 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"2","version":0,"timestamp":1738814812411888384,"ephemeral":false}]'
2025-02-06 04:06:52.541 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37349/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "52", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:52.563 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:52.563 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:06:52.663 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-06 04:06:52.664 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35840/filter/v2/messages/52" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:52.666 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"52","version":0,"timestamp":1738814812541011200,"ephemeral":false}]'
2025-02-06 04:06:52.668 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37349/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "76", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:52.689 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:52.689 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:06:52.790 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-06 04:06:52.790 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35840/filter/v2/messages/76" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:52.793 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"76","version":0,"timestamp":1738814812668098560,"ephemeral":false}]'
2025-02-06 04:06:52.794 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:35840/filter/v2/subscriptions/all" -H "Content-Type: application/json" -d '{"requestId": "1"}'
2025-02-06 04:06:52.804 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
2025-02-06 04:06:52.805 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37349/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "7", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:52.808 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:52.808 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:06:52.909 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-06 04:06:52.909 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35840/filter/v2/messages/7" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:52.911 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:35840/filter/v2/messages/7. Response content: b'Not subscribed to topic: 7'
2025-02-06 04:06:52.913 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37349/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "40", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:52.917 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:52.917 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:06:53.017 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-06 04:06:53.017 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35840/filter/v2/messages/40" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:53.020 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:35840/filter/v2/messages/40. Response content: b'Not subscribed to topic: 40'
2025-02-06 04:06:53.021 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37349/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "69", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:53.025 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:53.025 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:06:53.125 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-06 04:06:53.126 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35840/filter/v2/messages/69" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:53.128 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:35840/filter/v2/messages/69. Response content: b'Not subscribed to topic: 69'
2025-02-06 04:06:53.131 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 04:06:53.132 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 04:06:53.132 DEBUG [src.node.waku_node] Stopping container with id ccb8762b0986
2025-02-06 04:06:54.591 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:06:54.591 DEBUG [src.node.waku_node] Stopping container with id 2b9564504596
2025-02-06 04:06:55.403 ERROR [src.node.docker_mananger] Max retries reached for container ccb8762b0986. Exiting log stream.
2025-02-06 04:06:56.070 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:06:56.071 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 04:06:56.078 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:06:56.083 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
