2025-02-06 04:05:06.829 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 04:05:06.830 DEBUG [tests.conftest] Running test: test_publish_with_no_timestamp with id: 2025-02-06_04-05-06__5503b54d-7604-45bb-8629-d66317c6fd53
2025-02-06 04:05:06.830 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 04:05:06.830 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-06 04:05:06.830 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-06 04:05:06.837 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:05:06.837 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_04-05-06__5503b54d-7604-45bb-8629-d66317c6fd53__wakuorg_nwaku:latest.log
2025-02-06 04:05:06.837 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:05:06.837 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:05:06.839 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:05:06.839 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.152.104
2025-02-06 04:05:06.839 DEBUG [src.node.docker_mananger] Generated ports ['59960', '59961', '59962', '59963', '59964']
2025-02-06 04:05:06.839 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:05:06.839 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:05:06.839 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:05:06.839 DEBUG [src.node.docker_mananger] docker run -i -t -p 59960:59960 -p 59961:59961 -p 59962:59962 -p 59963:59963 -p 59964:59964 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59962 --rest-port=59960 --tcp-port=59961 --discv5-udp-port=59963 --rest-address=0.0.0.0 --nat=extip:172.18.152.104 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d5a30dd8eea8ebf42ea21e2cfef00d7ce4f6cac97aec19abcdc9a0dce8a41d79 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59964 --metrics-logging=true --relay=true
2025-02-06 04:05:07.066 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.152.104 waku 20ce7cd11d4ebd07a7e0b9d52627a595b3944d9f0255c26d06b33ad0266c01ab
2025-02-06 04:05:07.121 DEBUG [src.node.docker_mananger] Container started with ID 20ce7cd11d4e. Setting up logs at ./log/docker/node1_2025-02-06_04-05-06__5503b54d-7604-45bb-8629-d66317c6fd53__wakuorg_nwaku:latest.log
2025-02-06 04:05:07.122 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 59960
2025-02-06 04:05:07.122 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:05:07.637 ERROR [src.node.docker_mananger] Max retries reached for container c9a87091ba53. Exiting log stream.
2025-02-06 04:05:08.122 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59960/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:05:08.125 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:05:08.125 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:05:08.125 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59960/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:05:08.127 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.152.104/tcp/59961/p2p/16Uiu2HAkxWi3TYQG9adkFufSs3EqNmBLmTW84VofNzurV2kG2iTt","/ip4/172.18.152.104/tcp/59962/ws/p2p/16Uiu2HAkxWi3TYQG9adkFufSs3EqNmBLmTW84VofNzurV2kG2iTt"],"enrUri":"enr:-L24QO6vVYEiaZWh5Tewb9ifCA6k6i_8PvgOYRMPr1f9SLOCURj15pq7W8vmr0-5DZ9K1rW7YnWXHMS31IY3_np93UcCgmlkgnY0gmlwhKwSmGiKbXVsdGlhZGRyc5YACASsEphoBuo5AAoErBKYaAbqOt0DgnJzhQADAQAAiXNlY3AyNTZrMaECLd1MNKsKOaPln7m-_9nlhM-i2Kc8REfkCav2OOyMEhODdGNwguo5g3VkcILqO4V3YWt1MgE"}'
2025-02-06 04:05:08.128 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:05:08.134 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:05:08.134 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_04-05-06__5503b54d-7604-45bb-8629-d66317c6fd53__wakuorg_nwaku:latest.log
2025-02-06 04:05:08.134 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:05:08.134 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:05:08.136 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:05:08.136 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.192.228
2025-02-06 04:05:08.136 DEBUG [src.node.docker_mananger] Generated ports ['12944', '12945', '12946', '12947', '12948']
2025-02-06 04:05:08.136 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:05:08.136 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:05:08.136 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:05:08.136 DEBUG [src.node.docker_mananger] docker run -i -t -p 12944:12944 -p 12945:12945 -p 12946:12946 -p 12947:12947 -p 12948:12948 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12946 --rest-port=12944 --tcp-port=12945 --discv5-udp-port=12947 --rest-address=0.0.0.0 --nat=extip:172.18.192.228 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f3d49fb61f2ffde2dc7cc3c44ec790f3c2d4f5fa864c84c7220fddda573f2fe2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12948 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QO6vVYEiaZWh5Tewb9ifCA6k6i_8PvgOYRMPr1f9SLOCURj15pq7W8vmr0-5DZ9K1rW7YnWXHMS31IY3_np93UcCgmlkgnY0gmlwhKwSmGiKbXVsdGlhZGRyc5YACASsEphoBuo5AAoErBKYaAbqOt0DgnJzhQADAQAAiXNlY3AyNTZrMaECLd1MNKsKOaPln7m-_9nlhM-i2Kc8REfkCav2OOyMEhODdGNwguo5g3VkcILqO4V3YWt1MgE
2025-02-06 04:05:08.363 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.192.228 waku 3e4bebd293ca65a248038f4cbe7986e0de086484a169c8372b818a0f5b370be4
2025-02-06 04:05:08.410 DEBUG [src.node.docker_mananger] Container started with ID 3e4bebd293ca. Setting up logs at ./log/docker/node2_2025-02-06_04-05-06__5503b54d-7604-45bb-8629-d66317c6fd53__wakuorg_nwaku:latest.log
2025-02-06 04:05:08.411 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 12944
2025-02-06 04:05:08.412 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:05:09.412 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12944/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:05:09.422 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:05:09.423 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:05:09.423 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12944/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:05:09.433 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.192.228/tcp/12945/p2p/16Uiu2HAmLAT4iqBB7M6C9PKGuCaF2cNaWQm6bwSTLCGEvjgv6mV1","/ip4/172.18.192.228/tcp/12946/ws/p2p/16Uiu2HAmLAT4iqBB7M6C9PKGuCaF2cNaWQm6bwSTLCGEvjgv6mV1"],"enrUri":"enr:-L24QBnRq7W9J1pfhATPUk2LE5iOYkoMF4X5qtTbuN0kGsfQft-F6h2_aL0EP5LHSiv9tcoRzsf5lN7m9IRMy_Lv2v4CgmlkgnY0gmlwhKwSwOSKbXVsdGlhZGRyc5YACASsEsDkBjKRAAoErBLA5AYykt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDb43bow0ana5b7qRzm3uM1gYR07m7eHOffs6wk0v81QCDdGNwgjKRg3VkcIIyk4V3YWt1MgE"}'
2025-02-06 04:05:09.433 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:05:09.434 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12944/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.152.104/tcp/59961/p2p/16Uiu2HAkxWi3TYQG9adkFufSs3EqNmBLmTW84VofNzurV2kG2iTt"]'
2025-02-06 04:05:09.439 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:05:09.440 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2025-02-06 04:05:09.440 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59960/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 04:05:09.445 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:05:09.445 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12944/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 04:05:09.451 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:05:09.453 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59960/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:05:09.460 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:05:09.460 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:05:09.561 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-06 04:05:09.561 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59960/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:05:09.564 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738814709453772032,"ephemeral":false}]'
2025-02-06 04:05:09.565 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-06 04:05:09.565 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12944/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:05:09.568 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738814709453772032,"ephemeral":false}]'
2025-02-06 04:05:09.569 INFO [src.steps.relay] WARM UP successful!!
2025-02-06 04:05:09.570 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59960/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto"}'
2025-02-06 04:05:09.575 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:05:09.576 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:05:09.676 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-06 04:05:09.676 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59960/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:05:09.679 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738814709572174080,"ephemeral":false}]'
2025-02-06 04:05:09.680 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-06 04:05:09.681 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12944/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:05:09.684 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738814709572174080,"ephemeral":false}]'
2025-02-06 04:05:09.688 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 04:05:09.690 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 04:05:09.690 DEBUG [src.node.waku_node] Stopping container with id 20ce7cd11d4e
2025-02-06 04:05:10.620 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:05:10.622 DEBUG [src.node.waku_node] Stopping container with id 3e4bebd293ca
2025-02-06 04:05:11.434 ERROR [src.node.docker_mananger] Max retries reached for container 20ce7cd11d4e. Exiting log stream.
2025-02-06 04:05:12.127 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:05:12.129 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 04:05:12.134 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:05:12.139 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
