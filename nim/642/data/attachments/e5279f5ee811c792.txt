2025-02-06 04:04:34.024 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 04:04:34.024 DEBUG [tests.conftest] Running test: test_unsubscribe_from_non_subscribed_content_topics with id: 2025-02-06_04-04-34__c3c55863-405d-409e-ac7c-f53dd604ecdd
2025-02-06 04:04:34.024 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 04:04:34.025 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-06 04:04:34.025 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-06 04:04:34.032 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:04:34.032 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_04-04-34__c3c55863-405d-409e-ac7c-f53dd604ecdd__wakuorg_nwaku:latest.log
2025-02-06 04:04:34.033 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:04:34.033 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:04:34.035 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:04:34.036 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.184.193
2025-02-06 04:04:34.036 DEBUG [src.node.docker_mananger] Generated ports ['5072', '5073', '5074', '5075', '5076']
2025-02-06 04:04:34.036 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:04:34.036 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:04:34.036 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:04:34.036 DEBUG [src.node.docker_mananger] docker run -i -t -p 5072:5072 -p 5073:5073 -p 5074:5074 -p 5075:5075 -p 5076:5076 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5074 --rest-port=5072 --tcp-port=5073 --discv5-udp-port=5075 --rest-address=0.0.0.0 --nat=extip:172.18.184.193 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=94affa5a0dd8e9ab5cea3ead617e7d8de3c7d0d5f1a5b7abecbc2a8a39119c9e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5076 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2025-02-06 04:04:34.274 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.184.193 waku 1ed84d6787f8bb79b275914691f9a02a2c3468e7ba1b0155b52af221cfcb3d88
2025-02-06 04:04:34.322 DEBUG [src.node.docker_mananger] Container started with ID 1ed84d6787f8. Setting up logs at ./log/docker/node1_2025-02-06_04-04-34__c3c55863-405d-409e-ac7c-f53dd604ecdd__wakuorg_nwaku:latest.log
2025-02-06 04:04:34.322 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 5072
2025-02-06 04:04:34.323 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:04:34.821 ERROR [src.node.docker_mananger] Max retries reached for container d7ff5191f30b. Exiting log stream.
2025-02-06 04:04:35.325 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5072/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:35.328 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:04:35.328 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:04:35.328 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5072/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:35.331 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.184.193/tcp/5073/p2p/16Uiu2HAmRY4BAyk9E2c8KCoFgNVJ3ZTPSdBrBv4R4tKVw2MjFZNf","/ip4/172.18.184.193/tcp/5074/ws/p2p/16Uiu2HAmRY4BAyk9E2c8KCoFgNVJ3ZTPSdBrBv4R4tKVw2MjFZNf"],"enrUri":"enr:-L24QKGhuVCvUcwGSvxUN2lAz5afUzTzqBHRAetWPFFGe4MGLUoMJ_4NkwPFaq3Gu35BSNA71AT5SHNUZ3GFIUVWSEACgmlkgnY0gmlwhKwSuMGKbXVsdGlhZGRyc5YACASsErjBBhPRAAoErBK4wQYT0t0DgnJzhQACAQAAiXNlY3AyNTZrMaEDv2EwoW9O306s-QFtsvudirfZJpTanCwemNYh22wa_fiDdGNwghPRg3VkcIIT04V3YWt1MgU"}'
2025-02-06 04:04:35.331 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:04:35.338 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:04:35.338 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_04-04-34__c3c55863-405d-409e-ac7c-f53dd604ecdd__wakuorg_nwaku:latest.log
2025-02-06 04:04:35.338 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:04:35.338 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:04:35.340 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:04:35.340 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.2.4
2025-02-06 04:04:35.340 DEBUG [src.node.docker_mananger] Generated ports ['61113', '61114', '61115', '61116', '61117']
2025-02-06 04:04:35.340 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:04:35.340 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:04:35.340 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:04:35.340 DEBUG [src.node.docker_mananger] docker run -i -t -p 61113:61113 -p 61114:61114 -p 61115:61115 -p 61116:61116 -p 61117:61117 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61115 --rest-port=61113 --tcp-port=61114 --discv5-udp-port=61116 --rest-address=0.0.0.0 --nat=extip:172.18.2.4 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=991ef21ce53b108ee9ab97ffdad3969452faac2516cae146fd041efde334ca0f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61117 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QKGhuVCvUcwGSvxUN2lAz5afUzTzqBHRAetWPFFGe4MGLUoMJ_4NkwPFaq3Gu35BSNA71AT5SHNUZ3GFIUVWSEACgmlkgnY0gmlwhKwSuMGKbXVsdGlhZGRyc5YACASsErjBBhPRAAoErBK4wQYT0t0DgnJzhQACAQAAiXNlY3AyNTZrMaEDv2EwoW9O306s-QFtsvudirfZJpTanCwemNYh22wa_fiDdGNwghPRg3VkcIIT04V3YWt1MgU --content-topic=/myapp/1/latest/proto
2025-02-06 04:04:35.576 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.2.4 waku 50fe23ef99ef709a74c17aebb001ce569c28a1d72810159200afac225b273475
2025-02-06 04:04:35.626 DEBUG [src.node.docker_mananger] Container started with ID 50fe23ef99ef. Setting up logs at ./log/docker/node2_2025-02-06_04-04-34__c3c55863-405d-409e-ac7c-f53dd604ecdd__wakuorg_nwaku:latest.log
2025-02-06 04:04:35.626 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61113
2025-02-06 04:04:35.626 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:04:36.627 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61113/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:36.636 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:04:36.636 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:04:36.637 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61113/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:36.644 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.2.4/tcp/61114/p2p/16Uiu2HAmFezBrtFfrFLjH4AUqNdvZBt6S6pPamAoeXpRZJvsxrdd","/ip4/172.18.2.4/tcp/61115/ws/p2p/16Uiu2HAmFezBrtFfrFLjH4AUqNdvZBt6S6pPamAoeXpRZJvsxrdd"],"enrUri":"enr:-L24QLQkePu6enTdaEYOGG9qiq__yezW5KA5fqsRX8J1VKTtP8vtwtD3zQye_l-RRl_-1XVBZ9duPKentS5lxqeGxeoCgmlkgnY0gmlwhKwSAgSKbXVsdGlhZGRyc5YACASsEgIEBu66AAoErBICBAbuu90DgnJzhQACAQAAiXNlY3AyNTZrMaEDLJLggJHC3Op-IA4WAeV9U4dL-9RrUpJL1yy-Wq0IikiDdGNwgu66g3VkcILuvIV3YWt1MgE"}'
2025-02-06 04:04:36.644 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:04:36.645 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61113/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.184.193/tcp/5073/p2p/16Uiu2HAmRY4BAyk9E2c8KCoFgNVJ3ZTPSdBrBv4R4tKVw2MjFZNf"]'
2025-02-06 04:04:36.649 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:36.650 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:5072/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-06 04:04:36.655 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:36.656 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:61113/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-06 04:04:36.661 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:36.662 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5072/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:36.665 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:36.665 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:04:36.766 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-06 04:04:36.766 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5072/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:36.769 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:5072/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto. Response content: b'/myapp/1/latest/proto'
2025-02-06 04:04:36.771 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5072/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:36.774 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:36.774 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:04:36.875 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-06 04:04:36.875 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5072/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:36.878 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:5072/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js. Response content: b'/waku/2/content/test.js'
2025-02-06 04:04:36.880 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5072/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:36.884 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:36.884 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:04:36.984 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-06 04:04:36.985 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5072/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:36.988 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:5072/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding. Response content: b'/app/22/sometopic/someencoding'
2025-02-06 04:04:36.989 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5072/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:36.992 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:36.993 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:04:37.093 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-06 04:04:37.093 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5072/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:37.096 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:5072/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto. Response content: b'/toychat/2/huilong/proto'
2025-02-06 04:04:37.098 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5072/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:37.101 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:37.102 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:04:37.202 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-06 04:04:37.202 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5072/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:37.205 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:5072/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor. Response content: b'/statusim/1/community/cbor'
2025-02-06 04:04:37.207 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5072/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:37.210 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:37.210 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:04:37.310 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-06 04:04:37.311 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5072/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:37.314 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:5072/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding. Response content: b'/app/27/sometopic/someencoding'
2025-02-06 04:04:37.316 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5072/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:37.318 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:37.319 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:04:37.419 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-06 04:04:37.420 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5072/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:37.422 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:5072/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding. Response content: b'/app/29/sometopic/someencoding'
2025-02-06 04:04:37.424 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5072/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:37.427 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:37.427 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:04:37.527 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-06 04:04:37.528 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5072/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:37.531 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:5072/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding. Response content: b'/app/20/sometopic/someencoding'
2025-02-06 04:04:37.533 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 04:04:37.535 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 04:04:37.535 DEBUG [src.node.waku_node] Stopping container with id 1ed84d6787f8
2025-02-06 04:04:38.823 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:04:38.823 DEBUG [src.node.waku_node] Stopping container with id 50fe23ef99ef
2025-02-06 04:04:39.636 ERROR [src.node.docker_mananger] Max retries reached for container 1ed84d6787f8. Exiting log stream.
2025-02-06 04:04:40.357 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:04:40.358 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 04:04:40.363 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:04:40.369 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
