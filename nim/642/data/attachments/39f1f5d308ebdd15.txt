2025-02-06 04:08:17.479 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 04:08:17.480 DEBUG [tests.conftest] Running test: test_store_with_empty_and_valid_hash with id: 2025-02-06_04-08-17__b688ddd1-32a6-4d18-aedf-4b40a054faec
2025-02-06 04:08:17.480 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 04:08:17.481 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-06 04:08:17.481 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-06 04:08:17.490 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:08:17.491 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-06_04-08-17__b688ddd1-32a6-4d18-aedf-4b40a054faec__wakuorg_nwaku:latest.log
2025-02-06 04:08:17.491 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:08:17.491 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:08:17.494 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:08:17.495 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.214.42
2025-02-06 04:08:17.495 DEBUG [src.node.docker_mananger] Generated ports ['18102', '18103', '18104', '18105', '18106']
2025-02-06 04:08:17.495 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:08:17.495 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:08:17.495 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:08:17.495 DEBUG [src.node.docker_mananger] docker run -i -t -p 18102:18102 -p 18103:18103 -p 18104:18104 -p 18105:18105 -p 18106:18106 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18104 --rest-port=18102 --tcp-port=18103 --discv5-udp-port=18105 --rest-address=0.0.0.0 --nat=extip:172.18.214.42 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1e311f9f41fdba24e81831c0f9d426a6bc8ff7f6eeaa8e5bcbdbdab075c2d9da --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18106 --metrics-logging=true --store=true --relay=true
2025-02-06 04:08:17.730 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.214.42 waku 64d05b3bc2b570ebc9c123622bc85b45bc43598125360ceef10f02b855ea05a5
2025-02-06 04:08:17.783 DEBUG [src.node.docker_mananger] Container started with ID 64d05b3bc2b5. Setting up logs at ./log/docker/publishing_node1_2025-02-06_04-08-17__b688ddd1-32a6-4d18-aedf-4b40a054faec__wakuorg_nwaku:latest.log
2025-02-06 04:08:17.784 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18102
2025-02-06 04:08:17.785 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:08:18.313 ERROR [src.node.docker_mananger] Max retries reached for container f211452dcc36. Exiting log stream.
2025-02-06 04:08:18.785 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18102/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:08:18.788 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:08:18.789 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:08:18.789 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18102/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:08:18.791 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.214.42/tcp/18103/p2p/16Uiu2HAm7iUk9LVgDzCFzTzv3V7cCpZ3pcWGvsQyMfw56ep366sU","/ip4/172.18.214.42/tcp/18104/ws/p2p/16Uiu2HAm7iUk9LVgDzCFzTzv3V7cCpZ3pcWGvsQyMfw56ep366sU"],"enrUri":"enr:-L24QMdKtGQPrYSsEOgmZMAw502VBxLh6O1ViK9UlbrP2OwyA1jDRd3TEkyGr-AQ8r-7PB5dz8ciqcbV61e0ykljfXgCgmlkgnY0gmlwhKwS1iqKbXVsdGlhZGRyc5YACASsEtYqBka3AAoErBLWKgZGuN0DgnJzhQADAQAAiXNlY3AyNTZrMaECtpppvVs1PWQUAiixN79vYH8ABMnMEq1U7kxxO0uC1iuDdGNwgka3g3VkcIJGuYV3YWt1MgM"}'
2025-02-06 04:08:18.791 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:08:18.799 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:08:18.799 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-06_04-08-17__b688ddd1-32a6-4d18-aedf-4b40a054faec__wakuorg_nwaku:latest.log
2025-02-06 04:08:18.799 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:08:18.799 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:08:18.801 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:08:18.801 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.248.40
2025-02-06 04:08:18.801 DEBUG [src.node.docker_mananger] Generated ports ['42447', '42448', '42449', '42450', '42451']
2025-02-06 04:08:18.801 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:08:18.801 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:08:18.801 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:08:18.802 DEBUG [src.node.docker_mananger] docker run -i -t -p 42447:42447 -p 42448:42448 -p 42449:42449 -p 42450:42450 -p 42451:42451 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42449 --rest-port=42447 --tcp-port=42448 --discv5-udp-port=42450 --rest-address=0.0.0.0 --nat=extip:172.18.248.40 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f0c627bd6e57ee3debdd4309cf20ca5ceab1a9880d1f2e48340ebc0cb8aa5bf5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42451 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMdKtGQPrYSsEOgmZMAw502VBxLh6O1ViK9UlbrP2OwyA1jDRd3TEkyGr-AQ8r-7PB5dz8ciqcbV61e0ykljfXgCgmlkgnY0gmlwhKwS1iqKbXVsdGlhZGRyc5YACASsEtYqBka3AAoErBLWKgZGuN0DgnJzhQADAQAAiXNlY3AyNTZrMaECtpppvVs1PWQUAiixN79vYH8ABMnMEq1U7kxxO0uC1iuDdGNwgka3g3VkcIJGuYV3YWt1MgM --storenode=/ip4/172.18.214.42/tcp/18103/p2p/16Uiu2HAm7iUk9LVgDzCFzTzv3V7cCpZ3pcWGvsQyMfw56ep366sU --store=true --relay=true
2025-02-06 04:08:19.048 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.248.40 waku 7cdf5b17090aa4ef691ee530a3b3d92dd7f8fc21574dd11eba1bc3c4bf3a20db
2025-02-06 04:08:19.100 DEBUG [src.node.docker_mananger] Container started with ID 7cdf5b17090a. Setting up logs at ./log/docker/store_node1_2025-02-06_04-08-17__b688ddd1-32a6-4d18-aedf-4b40a054faec__wakuorg_nwaku:latest.log
2025-02-06 04:08:19.102 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42447
2025-02-06 04:08:19.102 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:08:20.102 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42447/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:08:20.106 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:08:20.106 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:08:20.106 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42447/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:08:20.108 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.248.40/tcp/42448/p2p/16Uiu2HAmPp16dNygWCLNN9b5U7a3XT3Xafkjqs4BrLugsJTVQAwg","/ip4/172.18.248.40/tcp/42449/ws/p2p/16Uiu2HAmPp16dNygWCLNN9b5U7a3XT3Xafkjqs4BrLugsJTVQAwg"],"enrUri":"enr:-L24QPNjyc7y_Li9NFR56rR6xPV8XHTo5XA5C_4Bh20WUa2RGBVKrLvOYFmzR62cfnmQJkb1CUugPVsNHvYUIGumArgCgmlkgnY0gmlwhKwS-CiKbXVsdGlhZGRyc5YACASsEvgoBqXQAAoErBL4KAal0d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDpb-g2ytpMOrwgxziBQAiFuaZWwPtTEXq39KY9y_oVn-DdGNwgqXQg3VkcIKl0oV3YWt1MgM"}'
2025-02-06 04:08:20.108 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:08:20.109 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42447/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.214.42/tcp/18103/p2p/16Uiu2HAm7iUk9LVgDzCFzTzv3V7cCpZ3pcWGvsQyMfw56ep366sU"]'
2025-02-06 04:08:20.112 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:08:20.112 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18102/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 04:08:20.114 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:08:20.114 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42447/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 04:08:20.117 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:08:20.118 DEBUG [src.steps.store] Relaying message
2025-02-06 04:08:20.118 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18102/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:08:20.124 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:08:20.124 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:08:20.325 DEBUG [src.steps.store] Relaying message
2025-02-06 04:08:20.326 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18102/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:08:20.332 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:08:20.332 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:08:20.533 DEBUG [src.steps.store] Relaying message
2025-02-06 04:08:20.534 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18102/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:08:20.540 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:08:20.540 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:08:20.741 DEBUG [src.steps.store] Relaying message
2025-02-06 04:08:20.742 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18102/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:08:20.747 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:08:20.748 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:08:20.949 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18102/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0xc5abac93c58af8fcd7415818ce75488ee2598678227151096ba19e4773621e19%2C&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:08:20.952 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xc5abac93c58af8fcd7415818ce75488ee2598678227151096ba19e4773621e19"}]}'
2025-02-06 04:08:20.953 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42447/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0xc5abac93c58af8fcd7415818ce75488ee2598678227151096ba19e4773621e19%2C&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:08:20.955 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xc5abac93c58af8fcd7415818ce75488ee2598678227151096ba19e4773621e19"}]}'
2025-02-06 04:08:20.957 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 04:08:20.958 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 04:08:20.958 DEBUG [src.node.waku_node] Stopping container with id 64d05b3bc2b5
2025-02-06 04:08:21.654 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:08:21.654 DEBUG [src.node.waku_node] Stopping container with id 7cdf5b17090a
2025-02-06 04:08:22.484 ERROR [src.node.docker_mananger] Max retries reached for container 64d05b3bc2b5. Exiting log stream.
2025-02-06 04:08:22.736 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:08:22.737 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 04:08:22.747 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:08:22.753 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
