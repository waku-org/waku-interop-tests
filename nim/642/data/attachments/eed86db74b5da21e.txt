2025-02-06 04:03:31.978 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 04:03:31.979 DEBUG [tests.conftest] Running test: test_publish_without_subscribing_via_api_works with id: 2025-02-06_04-03-31__33bf4c6f-26b3-45f5-a8ec-16d43d18fa27
2025-02-06 04:03:31.979 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 04:03:31.979 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-06 04:03:31.980 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-06 04:03:31.987 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:03:31.987 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_04-03-31__33bf4c6f-26b3-45f5-a8ec-16d43d18fa27__wakuorg_nwaku:latest.log
2025-02-06 04:03:31.987 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:03:31.987 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:03:31.989 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:03:31.989 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.255.2
2025-02-06 04:03:31.989 DEBUG [src.node.docker_mananger] Generated ports ['2676', '2677', '2678', '2679', '2680']
2025-02-06 04:03:31.989 DEBUG [src.node.waku_node] Cluster id was resolved to: 2
2025-02-06 04:03:31.990 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:03:31.990 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:03:31.990 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:03:31.990 DEBUG [src.node.docker_mananger] docker run -i -t -p 2676:2676 -p 2677:2677 -p 2678:2678 -p 2679:2679 -p 2680:2680 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2678 --rest-port=2676 --tcp-port=2677 --discv5-udp-port=2679 --rest-address=0.0.0.0 --nat=extip:172.18.255.2 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=cecbef2dede67c2f0cfb71096ebbed570bc3adcfd004e49cdeeaea42e8c7f10d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2680 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
2025-02-06 04:03:32.220 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.255.2 waku f4a3a5c47b3957ff693d6e7689dc41be924ae49c89c5058371c2a20612e19959
2025-02-06 04:03:32.263 DEBUG [src.node.docker_mananger] Container started with ID f4a3a5c47b39. Setting up logs at ./log/docker/node1_2025-02-06_04-03-31__33bf4c6f-26b3-45f5-a8ec-16d43d18fa27__wakuorg_nwaku:latest.log
2025-02-06 04:03:32.263 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2676
2025-02-06 04:03:32.263 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:03:32.782 ERROR [src.node.docker_mananger] Max retries reached for container 8af0f52d3e3b. Exiting log stream.
2025-02-06 04:03:33.265 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2676/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:03:33.268 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:03:33.268 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:03:33.268 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2676/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:03:33.270 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.255.2/tcp/2677/p2p/16Uiu2HAm9e7siir6XU5zFUZ8GoZ5LELd3SfwXm3Y7hGhS8u9yTnq","/ip4/172.18.255.2/tcp/2678/ws/p2p/16Uiu2HAm9e7siir6XU5zFUZ8GoZ5LELd3SfwXm3Y7hGhS8u9yTnq"],"enrUri":"enr:-L24QPng8hdLEZRRSFTQ-bLa5FwXssNAbAljuJCyWVOicJDTZ-Szb_1kNuQEtrO2UkAQpO-qoO5ropoBAssEbIeuDsgCgmlkgnY0gmlwhKwS_wKKbXVsdGlhZGRyc5YACASsEv8CBgp1AAoErBL_AgYKdt0DgnJzhQACAQAAiXNlY3AyNTZrMaEC0zPd16lcCYDlbLeIfLSo34T0w_5736EmeiiJnDGnJgqDdGNwggp1g3VkcIIKd4V3YWt1MgU"}'
2025-02-06 04:03:33.270 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:03:33.277 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:03:33.277 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_04-03-31__33bf4c6f-26b3-45f5-a8ec-16d43d18fa27__wakuorg_nwaku:latest.log
2025-02-06 04:03:33.277 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:03:33.277 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:03:33.278 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:03:33.278 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.172.150
2025-02-06 04:03:33.279 DEBUG [src.node.docker_mananger] Generated ports ['47515', '47516', '47517', '47518', '47519']
2025-02-06 04:03:33.279 DEBUG [src.node.waku_node] Cluster id was resolved to: 2
2025-02-06 04:03:33.279 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:03:33.279 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:03:33.279 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:03:33.279 DEBUG [src.node.docker_mananger] docker run -i -t -p 47515:47515 -p 47516:47516 -p 47517:47517 -p 47518:47518 -p 47519:47519 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47517 --rest-port=47515 --tcp-port=47516 --discv5-udp-port=47518 --rest-address=0.0.0.0 --nat=extip:172.18.172.150 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=0ef1abcedc16f4beaa18acea16ddb9fdf6acbaf8ef5a666a1ffc9cbdbe20ba3e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47519 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QPng8hdLEZRRSFTQ-bLa5FwXssNAbAljuJCyWVOicJDTZ-Szb_1kNuQEtrO2UkAQpO-qoO5ropoBAssEbIeuDsgCgmlkgnY0gmlwhKwS_wKKbXVsdGlhZGRyc5YACASsEv8CBgp1AAoErBL_AgYKdt0DgnJzhQACAQAAiXNlY3AyNTZrMaEC0zPd16lcCYDlbLeIfLSo34T0w_5736EmeiiJnDGnJgqDdGNwggp1g3VkcIIKd4V3YWt1MgU --pubsub-topic=/waku/2/rs/2/0
2025-02-06 04:03:33.508 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.172.150 waku 810d157b09ee268670c2354b1613ef7437dba741a367905b8237680f9712bf9d
2025-02-06 04:03:33.556 DEBUG [src.node.docker_mananger] Container started with ID 810d157b09ee. Setting up logs at ./log/docker/node2_2025-02-06_04-03-31__33bf4c6f-26b3-45f5-a8ec-16d43d18fa27__wakuorg_nwaku:latest.log
2025-02-06 04:03:33.557 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 47515
2025-02-06 04:03:33.558 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:03:34.558 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47515/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:03:34.563 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:03:34.565 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:03:34.566 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47515/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:03:34.572 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.172.150/tcp/47516/p2p/16Uiu2HAmKBtki3AS99B4pjHTmnmLMttA1vb69rdWWbMnwEFcxGSn","/ip4/172.18.172.150/tcp/47517/ws/p2p/16Uiu2HAmKBtki3AS99B4pjHTmnmLMttA1vb69rdWWbMnwEFcxGSn"],"enrUri":"enr:-L24QOphaKy15QB5LeEhrKDv_FOyVoDFWSDvlPTUeFn39oYaGiAVJBiPMoSsLLb_21-cFHHZIy1sQ31zpKyuUetEv7QCgmlkgnY0gmlwhKwSrJaKbXVsdGlhZGRyc5YACASsEqyWBrmcAAoErBKslga5nd0DgnJzhQACAQAAiXNlY3AyNTZrMaEDYRDMiIs36Xeujroh8oo8Aj_27NHwmga0V8SYI6tCvruDdGNwgrmcg3VkcIK5noV3YWt1MgE"}'
2025-02-06 04:03:34.572 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:03:34.573 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47515/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.255.2/tcp/2677/p2p/16Uiu2HAm9e7siir6XU5zFUZ8GoZ5LELd3SfwXm3Y7hGhS8u9yTnq"]'
2025-02-06 04:03:34.576 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:03:34.576 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2676/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:03:34.581 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:03:34.582 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47515/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:03:34.587 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:03:34.589 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 04:03:34.590 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 04:03:34.590 DEBUG [src.node.waku_node] Stopping container with id f4a3a5c47b39
2025-02-06 04:03:35.758 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:03:35.759 DEBUG [src.node.waku_node] Stopping container with id 810d157b09ee
2025-02-06 04:03:36.572 ERROR [src.node.docker_mananger] Max retries reached for container f4a3a5c47b39. Exiting log stream.
2025-02-06 04:03:37.259 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:03:37.260 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 04:03:37.265 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:03:37.270 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
