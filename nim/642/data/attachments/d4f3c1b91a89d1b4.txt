2025-02-06 04:10:35.722 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 04:10:35.723 DEBUG [tests.conftest] Running test: test_time_filter_start_time_after_end_time with id: 2025-02-06_04-10-35__1578b023-36e0-46e4-9b32-eec75633c775
2025-02-06 04:10:35.723 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 04:10:35.723 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-06 04:10:35.723 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-06 04:10:35.729 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:10:35.729 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-06_04-10-35__1578b023-36e0-46e4-9b32-eec75633c775__wakuorg_nwaku:latest.log
2025-02-06 04:10:35.730 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:10:35.730 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:10:35.731 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:10:35.731 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.112.0
2025-02-06 04:10:35.731 DEBUG [src.node.docker_mananger] Generated ports ['1947', '1948', '1949', '1950', '1951']
2025-02-06 04:10:35.731 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:10:35.731 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:10:35.731 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:10:35.732 DEBUG [src.node.docker_mananger] docker run -i -t -p 1947:1947 -p 1948:1948 -p 1949:1949 -p 1950:1950 -p 1951:1951 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1949 --rest-port=1947 --tcp-port=1948 --discv5-udp-port=1950 --rest-address=0.0.0.0 --nat=extip:172.18.112.0 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cbedefbcf3d0eb84ddad707deb20ac64055b9cdfb4c58fde7bfdbba5ee6c4a5c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1951 --metrics-logging=true --store=true --relay=true
2025-02-06 04:10:35.961 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.112.0 waku 6989e0cceaf86085a7c201a1a958a74723cdf1378320d3ab7f6691bf6122d532
2025-02-06 04:10:35.999 ERROR [src.node.docker_mananger] Max retries reached for container 0029ca2bfc17. Exiting log stream.
2025-02-06 04:10:36.009 DEBUG [src.node.docker_mananger] Container started with ID 6989e0cceaf8. Setting up logs at ./log/docker/publishing_node1_2025-02-06_04-10-35__1578b023-36e0-46e4-9b32-eec75633c775__wakuorg_nwaku:latest.log
2025-02-06 04:10:36.009 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 1947
2025-02-06 04:10:36.009 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:10:36.527 ERROR [src.node.docker_mananger] Max retries reached for container 6da57900ab47. Exiting log stream.
2025-02-06 04:10:37.010 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1947/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:10:37.012 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:10:37.013 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:10:37.013 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1947/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:10:37.015 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.112.0/tcp/1948/p2p/16Uiu2HAmJ7WXYjWQtS9WcdBBZBmDc2696ASPdmyWwVymXwkTduWF","/ip4/172.18.112.0/tcp/1949/ws/p2p/16Uiu2HAmJ7WXYjWQtS9WcdBBZBmDc2696ASPdmyWwVymXwkTduWF"],"enrUri":"enr:-L24QKY0RsWNRE-2Lmtqwb_jisxheZF98YolC82EirVCpa5-T-VaFU3ruKMakJ_q6kYHTYaZKJxrOVAzqUWmy-9yGMICgmlkgnY0gmlwhKwScACKbXVsdGlhZGRyc5YACASsEnAABgecAAoErBJwAAYHnd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDURWoISJL7HM4_SqsTkdiOw100GUQ6-du8yIo4QIlDZCDdGNwggecg3VkcIIHnoV3YWt1MgM"}'
2025-02-06 04:10:37.015 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:10:37.021 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:10:37.021 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-06_04-10-35__1578b023-36e0-46e4-9b32-eec75633c775__wakuorg_nwaku:latest.log
2025-02-06 04:10:37.022 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:10:37.022 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:10:37.023 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:10:37.023 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.153.5
2025-02-06 04:10:37.023 DEBUG [src.node.docker_mananger] Generated ports ['29487', '29488', '29489', '29490', '29491']
2025-02-06 04:10:37.023 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:10:37.024 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:10:37.024 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:10:37.024 DEBUG [src.node.docker_mananger] docker run -i -t -p 29487:29487 -p 29488:29488 -p 29489:29489 -p 29490:29490 -p 29491:29491 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29489 --rest-port=29487 --tcp-port=29488 --discv5-udp-port=29490 --rest-address=0.0.0.0 --nat=extip:172.18.153.5 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=046fc9e62c320ee90db754ae04a54adc0ad38d3b0d6ed2ae19eee3c844c7d927 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29491 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QKY0RsWNRE-2Lmtqwb_jisxheZF98YolC82EirVCpa5-T-VaFU3ruKMakJ_q6kYHTYaZKJxrOVAzqUWmy-9yGMICgmlkgnY0gmlwhKwScACKbXVsdGlhZGRyc5YACASsEnAABgecAAoErBJwAAYHnd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDURWoISJL7HM4_SqsTkdiOw100GUQ6-du8yIo4QIlDZCDdGNwggecg3VkcIIHnoV3YWt1MgM --storenode=/ip4/172.18.112.0/tcp/1948/p2p/16Uiu2HAmJ7WXYjWQtS9WcdBBZBmDc2696ASPdmyWwVymXwkTduWF --store=true --relay=true
2025-02-06 04:10:37.252 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.153.5 waku 2db806fc57d9eb643d8ec1b7b33c87798012877bb696699648aa04acab886eb4
2025-02-06 04:10:37.304 DEBUG [src.node.docker_mananger] Container started with ID 2db806fc57d9. Setting up logs at ./log/docker/store_node1_2025-02-06_04-10-35__1578b023-36e0-46e4-9b32-eec75633c775__wakuorg_nwaku:latest.log
2025-02-06 04:10:37.304 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29487
2025-02-06 04:10:37.304 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:10:38.305 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29487/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:10:38.307 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:10:38.307 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:10:38.307 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29487/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:10:38.309 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.153.5/tcp/29488/p2p/16Uiu2HAmSCxNFzGPj11YXiTrVKFGnPNiMz6bNEZFhZninrmDqVPd","/ip4/172.18.153.5/tcp/29489/ws/p2p/16Uiu2HAmSCxNFzGPj11YXiTrVKFGnPNiMz6bNEZFhZninrmDqVPd"],"enrUri":"enr:-L24QNylGrhAHNaCJvtNxomqPCCVktUD9Uv8FvlRzMXs42UMK18MgSLOfyoOo2wqU7KKwVXC1iCfkfLufWV-pLzPo5sCgmlkgnY0gmlwhKwSmQWKbXVsdGlhZGRyc5YACASsEpkFBnMwAAoErBKZBQZzMd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDyVhF_wzADk3rrSMOunOckbTv0msJBKJGDpd2CnkdlpCDdGNwgnMwg3VkcIJzMoV3YWt1MgM"}'
2025-02-06 04:10:38.310 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:10:38.310 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29487/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.112.0/tcp/1948/p2p/16Uiu2HAmJ7WXYjWQtS9WcdBBZBmDc2696ASPdmyWwVymXwkTduWF"]'
2025-02-06 04:10:47.302 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:10:47.302 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1947/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 04:10:47.305 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:10:47.305 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29487/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 04:10:47.307 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:10:47.309 DEBUG [src.steps.store] Relaying message
2025-02-06 04:10:47.309 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1947/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:10:47.314 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:10:47.315 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:10:47.515 DEBUG [src.steps.store] Relaying message
2025-02-06 04:10:47.515 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1947/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:10:47.521 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:10:47.521 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:10:47.722 DEBUG [src.steps.store] Relaying message
2025-02-06 04:10:47.722 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1947/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:10:47.728 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:10:47.728 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:10:47.929 DEBUG [src.steps.store] Relaying message
2025-02-06 04:10:47.929 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1947/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:10:47.934 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:10:47.935 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:10:48.135 DEBUG [src.steps.store] Relaying message
2025-02-06 04:10:48.136 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1947/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:10:48.141 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:10:48.142 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:10:48.342 DEBUG [src.steps.store] Relaying message
2025-02-06 04:10:48.342 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1947/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:10:48.348 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:10:48.348 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:10:48.549 DEBUG [tests.store.test_time_filter] inquering stored messages with start time 1738815049308806912 after end time 1738815044308794112
2025-02-06 04:10:48.549 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1947/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1738815049308806912&endTime=1738815044308794112&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:10:48.552 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:1947/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1738815049308806912&endTime=1738815044308794112&pageSize=20&ascending=true. Response content: b'error in handleSelfStoreRequest: BAD_RESPONSE: archive error: INVALID_QUERY: startTime should be before endTime'
2025-02-06 04:10:48.553 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29487/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1738815049308806912&endTime=1738815044308794112&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:10:48.555 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:29487/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1738815049308806912&endTime=1738815044308794112&pageSize=20&ascending=true. Response content: b'error in handleSelfStoreRequest: BAD_RESPONSE: archive error: INVALID_QUERY: startTime should be before endTime'
2025-02-06 04:10:48.557 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 04:10:48.558 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 04:10:48.558 DEBUG [src.node.waku_node] Stopping container with id 6989e0cceaf8
2025-02-06 04:10:49.539 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:10:49.539 DEBUG [src.node.waku_node] Stopping container with id 2db806fc57d9
2025-02-06 04:10:50.369 ERROR [src.node.docker_mananger] Max retries reached for container 6989e0cceaf8. Exiting log stream.
2025-02-06 04:10:51.043 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:10:51.044 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 04:10:51.058 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:10:51.064 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
