2025-02-06 04:04:50.501 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 04:04:50.502 DEBUG [tests.conftest] Running test: test_filter_ping_without_request_id with id: 2025-02-06_04-04-50__8d100899-e143-4acd-9b4e-1bf2f54a9b6d
2025-02-06 04:04:50.502 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 04:04:50.503 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-06 04:04:50.503 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-06 04:04:50.511 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:04:50.511 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_04-04-50__8d100899-e143-4acd-9b4e-1bf2f54a9b6d__wakuorg_nwaku:latest.log
2025-02-06 04:04:50.512 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:04:50.512 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:04:50.514 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:04:50.515 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.94.149
2025-02-06 04:04:50.516 DEBUG [src.node.docker_mananger] Generated ports ['58509', '58510', '58511', '58512', '58513']
2025-02-06 04:04:50.516 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:04:50.516 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:04:50.516 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:04:50.517 DEBUG [src.node.docker_mananger] docker run -i -t -p 58509:58509 -p 58510:58510 -p 58511:58511 -p 58512:58512 -p 58513:58513 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58511 --rest-port=58509 --tcp-port=58510 --discv5-udp-port=58512 --rest-address=0.0.0.0 --nat=extip:172.18.94.149 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d8f1effe5afee2a54e33903bbfd76970f9adb7b1de25a76f5b04bfcad2aaf86c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58513 --metrics-logging=true --relay=true --filter=true
2025-02-06 04:04:50.733 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.94.149 waku d6366b725b3bbe334a124ce8ec249fb694026ffc8bc62826b8f797cf492ee67b
2025-02-06 04:04:50.784 DEBUG [src.node.docker_mananger] Container started with ID d6366b725b3b. Setting up logs at ./log/docker/node1_2025-02-06_04-04-50__8d100899-e143-4acd-9b4e-1bf2f54a9b6d__wakuorg_nwaku:latest.log
2025-02-06 04:04:50.785 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58509
2025-02-06 04:04:50.786 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:04:51.327 ERROR [src.node.docker_mananger] Max retries reached for container ce8babd68e4f. Exiting log stream.
2025-02-06 04:04:51.786 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58509/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:51.789 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:04:51.789 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:04:51.789 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58509/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:51.791 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.94.149/tcp/58510/p2p/16Uiu2HAky6DGZKjqnnm2gD4JkZYdMoSifEJFcP1UzQwMVmzjd8Ex","/ip4/172.18.94.149/tcp/58511/ws/p2p/16Uiu2HAky6DGZKjqnnm2gD4JkZYdMoSifEJFcP1UzQwMVmzjd8Ex"],"enrUri":"enr:-L24QGr6-8laVe4yubXA7VKmC9kCCu4xvPAVM59_2Q9Sq0XNXVlVsLx7daDh6DHAsMG5m7DHxJQcetVuF9eAFoCbz0gCgmlkgnY0gmlwhKwSXpWKbXVsdGlhZGRyc5YACASsEl6VBuSOAAoErBJelQbkj90DgnJzhQADAQAAiXNlY3AyNTZrMaECNnKCmdE0x6Uq_cV9mGW06RrwOr9ukIvM5Lk9qjxFvwWDdGNwguSOg3VkcILkkIV3YWt1MgU"}'
2025-02-06 04:04:51.791 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:04:51.792 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-06 04:04:51.798 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:04:51.798 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_04-04-50__8d100899-e143-4acd-9b4e-1bf2f54a9b6d__wakuorg_nwaku:latest.log
2025-02-06 04:04:51.798 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:04:51.798 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:04:51.799 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:04:51.799 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.242.239
2025-02-06 04:04:51.799 DEBUG [src.node.docker_mananger] Generated ports ['30690', '30691', '30692', '30693', '30694']
2025-02-06 04:04:51.800 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:04:51.800 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:04:51.800 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:04:51.800 DEBUG [src.node.docker_mananger] docker run -i -t -p 30690:30690 -p 30691:30691 -p 30692:30692 -p 30693:30693 -p 30694:30694 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30692 --rest-port=30690 --tcp-port=30691 --discv5-udp-port=30693 --rest-address=0.0.0.0 --nat=extip:172.18.242.239 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=17aabaf1864bacdb779dcbac0de4eebcdef174bba9c8cf7af0ecf32f8c43ddaf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30694 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QGr6-8laVe4yubXA7VKmC9kCCu4xvPAVM59_2Q9Sq0XNXVlVsLx7daDh6DHAsMG5m7DHxJQcetVuF9eAFoCbz0gCgmlkgnY0gmlwhKwSXpWKbXVsdGlhZGRyc5YACASsEl6VBuSOAAoErBJelQbkj90DgnJzhQADAQAAiXNlY3AyNTZrMaECNnKCmdE0x6Uq_cV9mGW06RrwOr9ukIvM5Lk9qjxFvwWDdGNwguSOg3VkcILkkIV3YWt1MgU --filternode=/ip4/172.18.94.149/tcp/58510/p2p/16Uiu2HAky6DGZKjqnnm2gD4JkZYdMoSifEJFcP1UzQwMVmzjd8Ex
2025-02-06 04:04:52.027 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.242.239 waku cccd732b0ae9375bb2482930e1478faef93ba220df5058153b7128b0ea120dfb
2025-02-06 04:04:52.075 DEBUG [src.node.docker_mananger] Container started with ID cccd732b0ae9. Setting up logs at ./log/docker/node2_2025-02-06_04-04-50__8d100899-e143-4acd-9b4e-1bf2f54a9b6d__wakuorg_nwaku:latest.log
2025-02-06 04:04:52.076 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 30690
2025-02-06 04:04:52.076 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:04:53.077 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30690/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:53.080 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:04:53.080 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:04:53.080 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30690/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:53.082 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.242.239/tcp/30691/p2p/16Uiu2HAkwRk869dHqUSCXbPfow9bhXnKkBNy4GmWDcaNaq17XGbB","/ip4/172.18.242.239/tcp/30692/ws/p2p/16Uiu2HAkwRk869dHqUSCXbPfow9bhXnKkBNy4GmWDcaNaq17XGbB"],"enrUri":"enr:-L24QPTqgs_Zil1P_k6g5BGZbB5cTtDXTO25f86UIonBc9TOU7K9mKTzfCutjeB3WvjyhoIKL2hhnDzCI13PV56AwU8CgmlkgnY0gmlwhKwS8u-KbXVsdGlhZGRyc5YACASsEvLvBnfjAAoErBLy7wZ35N0DgnJzhQADAQAAiXNlY3AyNTZrMaECHbwO8y2OrJhoqBVFTheQNYbZy6s5zBbNIBTOUG0zHWqDdGNwgnfjg3VkcIJ35YV3YWt1MgA"}'
2025-02-06 04:04:53.083 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:04:53.083 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30690/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.94.149/tcp/58510/p2p/16Uiu2HAky6DGZKjqnnm2gD4JkZYdMoSifEJFcP1UzQwMVmzjd8Ex"]'
2025-02-06 04:04:53.118 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:53.119 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-06 04:04:53.121 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58509/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 04:04:53.140 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:53.141 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30690/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "ae43a460-7aa3-46a1-bf78-dc15271697e8", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-06 04:04:53.153 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"ae43a460-7aa3-46a1-bf78-dc15271697e8","statusDesc":"OK"}'
2025-02-06 04:04:53.154 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30690/filter/v2/subscriptions/" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:53.160 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusDesc":"OK"}'
2025-02-06 04:04:53.162 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 04:04:53.162 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 04:04:53.163 DEBUG [src.node.waku_node] Stopping container with id d6366b725b3b
2025-02-06 04:04:54.260 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:04:54.260 DEBUG [src.node.waku_node] Stopping container with id cccd732b0ae9
2025-02-06 04:04:55.072 ERROR [src.node.docker_mananger] Max retries reached for container d6366b725b3b. Exiting log stream.
2025-02-06 04:04:55.538 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:04:55.539 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 04:04:55.543 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:04:55.548 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
