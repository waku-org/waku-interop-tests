2025-02-06 04:04:15.457 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 04:04:15.458 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_invalid_request_id with id: 2025-02-06_04-04-15__1f6253be-a206-47fd-9b02-f10b16168a6b
2025-02-06 04:04:15.458 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 04:04:15.458 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-06 04:04:15.458 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-06 04:04:15.464 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:04:15.465 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_04-04-15__1f6253be-a206-47fd-9b02-f10b16168a6b__wakuorg_nwaku:latest.log
2025-02-06 04:04:15.465 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:04:15.465 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:04:15.466 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:04:15.466 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.53.223
2025-02-06 04:04:15.467 DEBUG [src.node.docker_mananger] Generated ports ['23503', '23504', '23505', '23506', '23507']
2025-02-06 04:04:15.467 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:04:15.467 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:04:15.467 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:04:15.467 DEBUG [src.node.docker_mananger] docker run -i -t -p 23503:23503 -p 23504:23504 -p 23505:23505 -p 23506:23506 -p 23507:23507 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23505 --rest-port=23503 --tcp-port=23504 --discv5-udp-port=23506 --rest-address=0.0.0.0 --nat=extip:172.18.53.223 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=83672faa6d3a10892aeb94115da929adb92ea70dc2e1c3ab566ebafecde5c3d5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23507 --metrics-logging=true --relay=true --filter=true
2025-02-06 04:04:15.691 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.53.223 waku 971b0451a92779a0578e7fc3f5ef6e0422f343fa7e4117cf621b1a6881162dfa
2025-02-06 04:04:15.738 DEBUG [src.node.docker_mananger] Container started with ID 971b0451a927. Setting up logs at ./log/docker/node1_2025-02-06_04-04-15__1f6253be-a206-47fd-9b02-f10b16168a6b__wakuorg_nwaku:latest.log
2025-02-06 04:04:15.739 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23503
2025-02-06 04:04:15.740 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:04:16.263 ERROR [src.node.docker_mananger] Max retries reached for container de025f89e085. Exiting log stream.
2025-02-06 04:04:16.742 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23503/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:16.745 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:04:16.745 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:04:16.745 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23503/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:16.747 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.53.223/tcp/23504/p2p/16Uiu2HAmJAwT4Ronc7pEG83mA4WGQkp8KZbBCo7ifgNgjiUwMiL5","/ip4/172.18.53.223/tcp/23505/ws/p2p/16Uiu2HAmJAwT4Ronc7pEG83mA4WGQkp8KZbBCo7ifgNgjiUwMiL5"],"enrUri":"enr:-L24QF0haKhc0WAtaWm-wyCG6GPoK7w5e32ePE5qCZrkbEZ6eVfqpGhju9GjWLBEC_MwNYEuphTB-ALi4UFeGEzLer0CgmlkgnY0gmlwhKwSNd-KbXVsdGlhZGRyc5YACASsEjXfBlvQAAoErBI13wZb0d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDUfaUS6i6hWzHq8gQ8AnXXWIWE42k_VKN2PyUGRr_sbaDdGNwglvQg3VkcIJb0oV3YWt1MgU"}'
2025-02-06 04:04:16.748 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:04:16.748 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-06 04:04:16.754 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:04:16.754 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_04-04-15__1f6253be-a206-47fd-9b02-f10b16168a6b__wakuorg_nwaku:latest.log
2025-02-06 04:04:16.754 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:04:16.754 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:04:16.756 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:04:16.756 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.180.11
2025-02-06 04:04:16.756 DEBUG [src.node.docker_mananger] Generated ports ['23353', '23354', '23355', '23356', '23357']
2025-02-06 04:04:16.756 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:04:16.756 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:04:16.756 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:04:16.756 DEBUG [src.node.docker_mananger] docker run -i -t -p 23353:23353 -p 23354:23354 -p 23355:23355 -p 23356:23356 -p 23357:23357 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23355 --rest-port=23353 --tcp-port=23354 --discv5-udp-port=23356 --rest-address=0.0.0.0 --nat=extip:172.18.180.11 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bfceab33bb02a4fd1f2cd0fcd73ed4d2ddeb7503dceec3c87c7f362b95ef1ce7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23357 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QF0haKhc0WAtaWm-wyCG6GPoK7w5e32ePE5qCZrkbEZ6eVfqpGhju9GjWLBEC_MwNYEuphTB-ALi4UFeGEzLer0CgmlkgnY0gmlwhKwSNd-KbXVsdGlhZGRyc5YACASsEjXfBlvQAAoErBI13wZb0d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDUfaUS6i6hWzHq8gQ8AnXXWIWE42k_VKN2PyUGRr_sbaDdGNwglvQg3VkcIJb0oV3YWt1MgU --filternode=/ip4/172.18.53.223/tcp/23504/p2p/16Uiu2HAmJAwT4Ronc7pEG83mA4WGQkp8KZbBCo7ifgNgjiUwMiL5
2025-02-06 04:04:16.978 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.180.11 waku 21003e6c829cfdf0ebc628e4bc23c482934b742199a089c79378fb4e566e58d3
2025-02-06 04:04:17.036 DEBUG [src.node.docker_mananger] Container started with ID 21003e6c829c. Setting up logs at ./log/docker/node2_2025-02-06_04-04-15__1f6253be-a206-47fd-9b02-f10b16168a6b__wakuorg_nwaku:latest.log
2025-02-06 04:04:17.037 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23353
2025-02-06 04:04:17.037 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:04:18.037 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23353/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:18.040 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:04:18.041 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:04:18.041 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23353/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:18.043 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.180.11/tcp/23354/p2p/16Uiu2HAmGFgsAeFDFN2CvkQEzzVU1QaQ1ZQeZR6XZNTvFWgsLCKd","/ip4/172.18.180.11/tcp/23355/ws/p2p/16Uiu2HAmGFgsAeFDFN2CvkQEzzVU1QaQ1ZQeZR6XZNTvFWgsLCKd"],"enrUri":"enr:-L24QJnbon5xfZAhGPwQamXV39_B7werRQ__oRoA2oBUcagxP0p6AsEOwA9MhVMMvK0EpMm-R6YwhvXNvopUp44KfqsCgmlkgnY0gmlwhKwStAuKbXVsdGlhZGRyc5YACASsErQLBls6AAoErBK0CwZbO90DgnJzhQADAQAAiXNlY3AyNTZrMaEDNXaebzIjmV1TqQBVnTlm8bu_0B6TQhkU-2YKpPxl83yDdGNwgls6g3VkcIJbPIV3YWt1MgA"}'
2025-02-06 04:04:18.043 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:04:18.043 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23353/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.53.223/tcp/23504/p2p/16Uiu2HAmJAwT4Ronc7pEG83mA4WGQkp8KZbBCo7ifgNgjiUwMiL5"]'
2025-02-06 04:04:18.079 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:18.081 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-06 04:04:18.081 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23503/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 04:04:18.099 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:18.100 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23353/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "406b05a7-cd31-4f9e-857e-2c43db0dc1e9", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-06 04:04:18.111 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"406b05a7-cd31-4f9e-857e-2c43db0dc1e9","statusDesc":"OK"}'
2025-02-06 04:04:18.114 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:23353/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-06 04:04:18.116 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:23353/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
2025-02-06 04:04:18.118 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 04:04:18.119 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 04:04:18.120 DEBUG [src.node.waku_node] Stopping container with id 971b0451a927
2025-02-06 04:04:19.234 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:04:19.235 DEBUG [src.node.waku_node] Stopping container with id 21003e6c829c
2025-02-06 04:04:20.045 ERROR [src.node.docker_mananger] Max retries reached for container 971b0451a927. Exiting log stream.
2025-02-06 04:04:20.717 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:04:20.719 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 04:04:20.723 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:04:20.726 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
