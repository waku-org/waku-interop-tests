2025-02-06 04:02:29.925 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 04:02:29.925 DEBUG [tests.conftest] Running test: test_lightpush with id: 2025-02-06_04-02-29__e6e6f541-8f68-433b-b94d-f753c358db33
2025-02-06 04:02:29.925 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 04:02:29.925 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-06 04:02:29.926 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-06 04:02:29.926 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-06 04:02:29.926 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-06 04:02:29.932 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:02:29.933 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_04-02-29__e6e6f541-8f68-433b-b94d-f753c358db33__wakuorg_nwaku:latest.log
2025-02-06 04:02:29.933 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:02:29.933 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:02:29.934 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:02:29.934 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.143.150
2025-02-06 04:02:29.934 DEBUG [src.node.docker_mananger] Generated ports ['22006', '22007', '22008', '22009', '22010']
2025-02-06 04:02:29.935 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:02:29.935 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:02:29.935 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:02:29.935 DEBUG [src.node.docker_mananger] docker run -i -t -p 22006:22006 -p 22007:22007 -p 22008:22008 -p 22009:22009 -p 22010:22010 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22008 --rest-port=22006 --tcp-port=22007 --discv5-udp-port=22009 --rest-address=0.0.0.0 --nat=extip:172.18.143.150 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9d4daba087cdef44d57744e9f3c0c0e6bfd9426af9ead05bc35e4d4e4c31e397 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22010 --metrics-logging=true --lightpush=true --relay=true
2025-02-06 04:02:30.159 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.143.150 waku 91d2c20995aed9b8c50ff4551582ddf2c93410f37777f54a6271e84e253d36d9
2025-02-06 04:02:30.213 DEBUG [src.node.docker_mananger] Container started with ID 91d2c20995ae. Setting up logs at ./log/docker/node1_2025-02-06_04-02-29__e6e6f541-8f68-433b-b94d-f753c358db33__wakuorg_nwaku:latest.log
2025-02-06 04:02:30.214 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22006
2025-02-06 04:02:30.214 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:02:30.730 ERROR [src.node.docker_mananger] Max retries reached for container f163e01c5cf4. Exiting log stream.
2025-02-06 04:02:31.215 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22006/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:02:31.218 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:02:31.218 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:02:31.219 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22006/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:02:31.221 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.143.150/tcp/22007/p2p/16Uiu2HAm4oRp7pibSdrimoyePRTiCKGB17fG9Ekx7gcojJG15Apo","/ip4/172.18.143.150/tcp/22008/ws/p2p/16Uiu2HAm4oRp7pibSdrimoyePRTiCKGB17fG9Ekx7gcojJG15Apo"],"enrUri":"enr:-L24QHFGmUIHvagCb0rz32cw_Zq8WS3oq690NIV6zTGshu1XKmMDXAguAF8o8P6AoONX9XxmV1k7gJdFX_-IPN98EUACgmlkgnY0gmlwhKwSj5aKbXVsdGlhZGRyc5YACASsEo-WBlX3AAoErBKPlgZV-N0DgnJzhQADAQAAiXNlY3AyNTZrMaECi0vxEWorvgXDi7zDnyVqaRUjgqZ63UHu-HKV4qgmKViDdGNwglX3g3VkcIJV-YV3YWt1Mgk"}'
2025-02-06 04:02:31.221 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:02:31.227 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:02:31.227 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_04-02-29__e6e6f541-8f68-433b-b94d-f753c358db33__wakuorg_nwaku:latest.log
2025-02-06 04:02:31.227 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:02:31.227 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:02:31.229 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:02:31.229 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.31.123
2025-02-06 04:02:31.229 DEBUG [src.node.docker_mananger] Generated ports ['50267', '50268', '50269', '50270', '50271']
2025-02-06 04:02:31.229 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:02:31.229 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:02:31.229 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:02:31.229 DEBUG [src.node.docker_mananger] docker run -i -t -p 50267:50267 -p 50268:50268 -p 50269:50269 -p 50270:50270 -p 50271:50271 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50269 --rest-port=50267 --tcp-port=50268 --discv5-udp-port=50270 --rest-address=0.0.0.0 --nat=extip:172.18.31.123 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=85d8e9af8342d7eedf2eed1f2eb305b8ed43ec63b513b9cb84d04efeafea80e7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50271 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QHFGmUIHvagCb0rz32cw_Zq8WS3oq690NIV6zTGshu1XKmMDXAguAF8o8P6AoONX9XxmV1k7gJdFX_-IPN98EUACgmlkgnY0gmlwhKwSj5aKbXVsdGlhZGRyc5YACASsEo-WBlX3AAoErBKPlgZV-N0DgnJzhQADAQAAiXNlY3AyNTZrMaECi0vxEWorvgXDi7zDnyVqaRUjgqZ63UHu-HKV4qgmKViDdGNwglX3g3VkcIJV-YV3YWt1Mgk
2025-02-06 04:02:31.457 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.31.123 waku f4e0e3f6a98b97533d4dba92de305b1d2d325d0081863888b0a56bc305acdbad
2025-02-06 04:02:31.501 DEBUG [src.node.docker_mananger] Container started with ID f4e0e3f6a98b. Setting up logs at ./log/docker/node1_2025-02-06_04-02-29__e6e6f541-8f68-433b-b94d-f753c358db33__wakuorg_nwaku:latest.log
2025-02-06 04:02:31.502 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 50267
2025-02-06 04:02:31.502 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:02:32.503 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50267/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:02:32.509 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:02:32.510 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:02:32.510 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50267/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:02:32.516 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.31.123/tcp/50268/p2p/16Uiu2HAmQHAw5Ye4YyQjHCfFwBoZc4BL52QktR9f64uEXMrNg38c","/ip4/172.18.31.123/tcp/50269/ws/p2p/16Uiu2HAmQHAw5Ye4YyQjHCfFwBoZc4BL52QktR9f64uEXMrNg38c"],"enrUri":"enr:-L24QIWt8XSBB5G0SvlHbiRKDu6UcwRFzmaClsySSnkovSPUWCNHnncXUJ2jU0OCpWUE2xjMMastv9u8RofBh_I1tm4CgmlkgnY0gmlwhKwSH3uKbXVsdGlhZGRyc5YACASsEh97BsRcAAoErBIfewbEXd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDrLVuWrP4lfTQzJGBTTXmP_9QY29WwrCNhUm9lt20LwmDdGNwgsRcg3VkcILEXoV3YWt1MgE"}'
2025-02-06 04:02:32.516 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:02:32.524 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:02:32.524 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_04-02-29__e6e6f541-8f68-433b-b94d-f753c358db33__wakuorg_nwaku:latest.log
2025-02-06 04:02:32.524 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:02:32.524 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:02:32.526 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:02:32.526 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.26.235
2025-02-06 04:02:32.526 DEBUG [src.node.docker_mananger] Generated ports ['43894', '43895', '43896', '43897', '43898']
2025-02-06 04:02:32.526 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:02:32.526 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:02:32.526 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:02:32.526 DEBUG [src.node.docker_mananger] docker run -i -t -p 43894:43894 -p 43895:43895 -p 43896:43896 -p 43897:43897 -p 43898:43898 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43896 --rest-port=43894 --tcp-port=43895 --discv5-udp-port=43897 --rest-address=0.0.0.0 --nat=extip:172.18.26.235 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8a5afbc2dd26c5d183b1edc9b347a9fbcc2a1e8fb29a1ed0d9e0ac464efe3b79 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43898 --metrics-logging=true --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QHFGmUIHvagCb0rz32cw_Zq8WS3oq690NIV6zTGshu1XKmMDXAguAF8o8P6AoONX9XxmV1k7gJdFX_-IPN98EUACgmlkgnY0gmlwhKwSj5aKbXVsdGlhZGRyc5YACASsEo-WBlX3AAoErBKPlgZV-N0DgnJzhQADAQAAiXNlY3AyNTZrMaECi0vxEWorvgXDi7zDnyVqaRUjgqZ63UHu-HKV4qgmKViDdGNwglX3g3VkcIJV-YV3YWt1Mgk --lightpushnode=/ip4/172.18.143.150/tcp/22007/p2p/16Uiu2HAm4oRp7pibSdrimoyePRTiCKGB17fG9Ekx7gcojJG15Apo
2025-02-06 04:02:32.759 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.26.235 waku 8d9ee3bed8dd67a9e2ba57ef1340ed7bea1f473b9283292943eb2efd936e15d5
2025-02-06 04:02:32.812 DEBUG [src.node.docker_mananger] Container started with ID 8d9ee3bed8dd. Setting up logs at ./log/docker/node1_2025-02-06_04-02-29__e6e6f541-8f68-433b-b94d-f753c358db33__wakuorg_nwaku:latest.log
2025-02-06 04:02:32.813 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 43894
2025-02-06 04:02:32.813 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:02:33.813 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43894/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:02:33.816 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:02:33.816 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:02:33.817 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43894/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:02:33.819 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.26.235/tcp/43895/p2p/16Uiu2HAmG7MsTwxjMwmkX7qCidynFJr8pDsgJnsjBwV5x1hecAvF","/ip4/172.18.26.235/tcp/43896/ws/p2p/16Uiu2HAmG7MsTwxjMwmkX7qCidynFJr8pDsgJnsjBwV5x1hecAvF"],"enrUri":"enr:-L24QJd08xC8kU_8y8wCH6WLFNbUrY6BD8n9-0zkqPmMi7VqLsGraNooxNvlfmIF-c7QDx2CrX8SkAnPq7yA3Lm8gi8CgmlkgnY0gmlwhKwSGuuKbXVsdGlhZGRyc5YACASsEhrrBqt3AAoErBIa6wareN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDM1R-ryHoO3zIKCdFM-krVpJQQxaTJAMDU6lVJ2wjX5yDdGNwgqt3g3VkcIKreYV3YWt1Mgg"}'
2025-02-06 04:02:33.819 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:02:33.819 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22006/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 04:02:33.823 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:02:33.823 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50267/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 04:02:33.829 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:02:33.830 DEBUG [src.steps.light_push] Lightpushing message
2025-02-06 04:02:33.830 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43894/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1738814553830473728}}'
2025-02-06 04:02:33.877 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:02:33.878 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:02:33.979 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-06 04:02:33.979 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22006/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:02:33.982 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738814553830473728,"ephemeral":false}]'
2025-02-06 04:02:33.983 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-06 04:02:33.983 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50267/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:02:33.986 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738814553830473728,"ephemeral":false}]'
2025-02-06 04:02:33.988 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 04:02:33.989 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 04:02:33.989 DEBUG [src.node.waku_node] Stopping container with id 91d2c20995ae
2025-02-06 04:02:34.699 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:02:34.699 DEBUG [src.node.waku_node] Stopping container with id f4e0e3f6a98b
2025-02-06 04:02:35.511 ERROR [src.node.docker_mananger] Max retries reached for container 91d2c20995ae. Exiting log stream.
2025-02-06 04:02:36.216 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:02:36.217 DEBUG [src.node.waku_node] Stopping container with id 8d9ee3bed8dd
2025-02-06 04:02:37.028 ERROR [src.node.docker_mananger] Max retries reached for container f4e0e3f6a98b. Exiting log stream.
2025-02-06 04:02:37.715 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:02:37.716 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 04:02:37.723 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:02:37.730 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:02:37.737 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
