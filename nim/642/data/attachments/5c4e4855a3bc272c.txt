2025-02-06 04:07:11.775 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 04:07:11.775 DEBUG [tests.conftest] Running test: test_store_lightpushed_message with id: 2025-02-06_04-07-11__fa6f8a97-5f77-45e8-9144-514c087d3ec5
2025-02-06 04:07:11.776 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 04:07:11.776 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-06 04:07:11.782 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:07:11.783 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-06_04-07-11__fa6f8a97-5f77-45e8-9144-514c087d3ec5__wakuorg_nwaku:latest.log
2025-02-06 04:07:11.783 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:07:11.783 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:07:11.784 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:07:11.784 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.126.117
2025-02-06 04:07:11.784 DEBUG [src.node.docker_mananger] Generated ports ['28496', '28497', '28498', '28499', '28500']
2025-02-06 04:07:11.785 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:07:11.785 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:07:11.785 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:07:11.785 DEBUG [src.node.docker_mananger] docker run -i -t -p 28496:28496 -p 28497:28497 -p 28498:28498 -p 28499:28499 -p 28500:28500 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28498 --rest-port=28496 --tcp-port=28497 --discv5-udp-port=28499 --rest-address=0.0.0.0 --nat=extip:172.18.126.117 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=66a8ea50dcfbc4771d6a1826ba16bacb1c2c39c89ea85ffac5cbab28a7b9d4e9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28500 --metrics-logging=true --store=true --relay=true --lightpush=true
2025-02-06 04:07:12.013 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.126.117 waku eb467760a430fc6e69f68f82be7489ee857d52cc00a8fc710ce9c4b636d45a31
2025-02-06 04:07:12.064 DEBUG [src.node.docker_mananger] Container started with ID eb467760a430. Setting up logs at ./log/docker/publishing_node1_2025-02-06_04-07-11__fa6f8a97-5f77-45e8-9144-514c087d3ec5__wakuorg_nwaku:latest.log
2025-02-06 04:07:12.066 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28496
2025-02-06 04:07:12.066 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:07:12.578 ERROR [src.node.docker_mananger] Max retries reached for container 3b02e7bd3111. Exiting log stream.
2025-02-06 04:07:13.066 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28496/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:07:13.069 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:07:13.069 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:07:13.069 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28496/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:07:13.071 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.126.117/tcp/28497/p2p/16Uiu2HAmDS5KWyZZmJNfhvXiBLVjqTtjcSaza7MKc6TfxXVJRWgx","/ip4/172.18.126.117/tcp/28498/ws/p2p/16Uiu2HAmDS5KWyZZmJNfhvXiBLVjqTtjcSaza7MKc6TfxXVJRWgx"],"enrUri":"enr:-L24QO_XQYjo2wPIXoKPnBZtxc5eUgoCGFuvJJ24mesvPmS8fKtr2S6AC8Lt2ojimFcOwToSXHWYED1JEO1IoPWiykQCgmlkgnY0gmlwhKwSfnWKbXVsdGlhZGRyc5YACASsEn51Bm9RAAoErBJ-dQZvUt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDC4zBYF1tA0ZvIM3_cIRrsqc-83_CwGdqHqAgw00zCHGDdGNwgm9Rg3VkcIJvU4V3YWt1Mgs"}'
2025-02-06 04:07:13.072 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:07:13.078 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:07:13.078 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node2_2025-02-06_04-07-11__fa6f8a97-5f77-45e8-9144-514c087d3ec5__wakuorg_nwaku:latest.log
2025-02-06 04:07:13.079 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:07:13.079 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:07:13.080 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:07:13.080 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.213.97
2025-02-06 04:07:13.080 DEBUG [src.node.docker_mananger] Generated ports ['30742', '30743', '30744', '30745', '30746']
2025-02-06 04:07:13.081 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:07:13.081 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:07:13.081 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:07:13.081 DEBUG [src.node.docker_mananger] docker run -i -t -p 30742:30742 -p 30743:30743 -p 30744:30744 -p 30745:30745 -p 30746:30746 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30744 --rest-port=30742 --tcp-port=30743 --discv5-udp-port=30745 --rest-address=0.0.0.0 --nat=extip:172.18.213.97 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=62f0a2fc0b79fefece384cd5dc1ce1eada8b6e2e68a7a488f50ddabc78d8aecf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30746 --metrics-logging=true --store=false --relay=true
2025-02-06 04:07:13.306 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.213.97 waku 627705324fc29747632f0013b30c63055f41ff4fa60228cd1a43dbb5f56564cb
2025-02-06 04:07:13.356 DEBUG [src.node.docker_mananger] Container started with ID 627705324fc2. Setting up logs at ./log/docker/publishing_node2_2025-02-06_04-07-11__fa6f8a97-5f77-45e8-9144-514c087d3ec5__wakuorg_nwaku:latest.log
2025-02-06 04:07:13.356 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 30742
2025-02-06 04:07:13.356 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:07:14.357 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30742/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:07:14.359 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:07:14.360 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:07:14.360 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30742/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:07:14.362 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.213.97/tcp/30743/p2p/16Uiu2HAmDqXKGC2HuQ254M55i173s4NPBT3YqpaYJocPtq4xo3Cn","/ip4/172.18.213.97/tcp/30744/ws/p2p/16Uiu2HAmDqXKGC2HuQ254M55i173s4NPBT3YqpaYJocPtq4xo3Cn"],"enrUri":"enr:-L24QOWVtj649vB2vtei-GmdYLo3K4Q2dfdJIopzfnMI9mDkZQxKGnp08DVcdqDrCJsgvtfzar855iLfcG1fNdz6D80CgmlkgnY0gmlwhKwS1WGKbXVsdGlhZGRyc5YACASsEtVhBngXAAoErBLVYQZ4GN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDEY6B3wnD4bheya6IeI2WMCiNDJny0SjfCree0BVF9vODdGNwgngXg3VkcIJ4GYV3YWt1MgE"}'
2025-02-06 04:07:14.362 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:07:14.363 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30742/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.126.117/tcp/28497/p2p/16Uiu2HAmDS5KWyZZmJNfhvXiBLVjqTtjcSaza7MKc6TfxXVJRWgx"]'
2025-02-06 04:07:14.401 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:07:14.409 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:07:14.409 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-06_04-07-11__fa6f8a97-5f77-45e8-9144-514c087d3ec5__wakuorg_nwaku:latest.log
2025-02-06 04:07:14.409 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:07:14.409 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:07:14.411 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:07:14.411 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.61.143
2025-02-06 04:07:14.411 DEBUG [src.node.docker_mananger] Generated ports ['23078', '23079', '23080', '23081', '23082']
2025-02-06 04:07:14.411 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:07:14.411 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:07:14.411 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:07:14.412 DEBUG [src.node.docker_mananger] docker run -i -t -p 23078:23078 -p 23079:23079 -p 23080:23080 -p 23081:23081 -p 23082:23082 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23080 --rest-port=23078 --tcp-port=23079 --discv5-udp-port=23081 --rest-address=0.0.0.0 --nat=extip:172.18.61.143 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ecdefbb1c33fe93eab8cb25d1ebc482b7ef791ab057aec5a51765c1e8e0cf168 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23082 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QO_XQYjo2wPIXoKPnBZtxc5eUgoCGFuvJJ24mesvPmS8fKtr2S6AC8Lt2ojimFcOwToSXHWYED1JEO1IoPWiykQCgmlkgnY0gmlwhKwSfnWKbXVsdGlhZGRyc5YACASsEn51Bm9RAAoErBJ-dQZvUt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDC4zBYF1tA0ZvIM3_cIRrsqc-83_CwGdqHqAgw00zCHGDdGNwgm9Rg3VkcIJvU4V3YWt1Mgs --storenode=/ip4/172.18.126.117/tcp/28497/p2p/16Uiu2HAmDS5KWyZZmJNfhvXiBLVjqTtjcSaza7MKc6TfxXVJRWgx --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.126.117/tcp/28497/p2p/16Uiu2HAmDS5KWyZZmJNfhvXiBLVjqTtjcSaza7MKc6TfxXVJRWgx
2025-02-06 04:07:14.660 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.61.143 waku c164378de4fe2a2c44d79413517f1cdaaa93d11ac2a4464b735f5bf7d44fe6c7
2025-02-06 04:07:14.705 DEBUG [src.node.docker_mananger] Container started with ID c164378de4fe. Setting up logs at ./log/docker/store_node1_2025-02-06_04-07-11__fa6f8a97-5f77-45e8-9144-514c087d3ec5__wakuorg_nwaku:latest.log
2025-02-06 04:07:14.705 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23078
2025-02-06 04:07:14.706 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:07:15.706 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23078/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:07:15.708 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:07:15.709 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:07:15.709 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23078/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:07:15.711 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.61.143/tcp/23079/p2p/16Uiu2HAmSg73eEUwE7kCTsfFHMKKpfMnBiVj6dJfmta8uBsgj1UU","/ip4/172.18.61.143/tcp/23080/ws/p2p/16Uiu2HAmSg73eEUwE7kCTsfFHMKKpfMnBiVj6dJfmta8uBsgj1UU"],"enrUri":"enr:-L24QNF73mxPIlUJ31nNp-Y0cOWUnCKpr-4qy1y45IRXBZhOWo22Ia-fzEC4DQvSPil-drnF1uDI-Fy9GablPowGDWQCgmlkgnY0gmlwhKwSPY-KbXVsdGlhZGRyc5YACASsEj2PBlonAAoErBI9jwZaKN0DgnJzhQADAQAAiXNlY3AyNTZrMaED0EzEx9swXVLT5oBM9k9n9oOQKBnI531UbuX_gIZaNPmDdGNwglong3VkcIJaKYV3YWt1Mgg"}'
2025-02-06 04:07:15.711 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:07:15.711 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23078/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.126.117/tcp/28497/p2p/16Uiu2HAmDS5KWyZZmJNfhvXiBLVjqTtjcSaza7MKc6TfxXVJRWgx"]'
2025-02-06 04:07:15.747 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:07:15.749 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23078/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.213.97/tcp/30743/p2p/16Uiu2HAmDqXKGC2HuQ254M55i173s4NPBT3YqpaYJocPtq4xo3Cn"]'
2025-02-06 04:07:15.778 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:07:15.779 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28496/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 04:07:15.788 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:07:15.789 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30742/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 04:07:15.795 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:07:15.796 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23078/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738814835796383488}}'
2025-02-06 04:07:15.806 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:07:15.807 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:07:16.007 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-06 04:07:16.008 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28496/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:07:16.010 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xb8b1534ac8c38d696aeeb975249bb5c6461aa1e78f554c6b2c5c15763e6da6db"}]}'
2025-02-06 04:07:16.011 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-06 04:07:16.011 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23078/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:07:16.019 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"f50d0a5751023211dbc6","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xb8b1534ac8c38d696aeeb975249bb5c6461aa1e78f554c6b2c5c15763e6da6db"}]}'
2025-02-06 04:07:16.020 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 04:07:16.021 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 04:07:16.021 DEBUG [src.node.waku_node] Stopping container with id eb467760a430
2025-02-06 04:07:16.599 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:07:16.599 DEBUG [src.node.waku_node] Stopping container with id 627705324fc2
2025-02-06 04:07:17.410 ERROR [src.node.docker_mananger] Max retries reached for container eb467760a430. Exiting log stream.
2025-02-06 04:07:18.113 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:07:18.114 DEBUG [src.node.waku_node] Stopping container with id c164378de4fe
2025-02-06 04:07:18.925 ERROR [src.node.docker_mananger] Max retries reached for container 627705324fc2. Exiting log stream.
2025-02-06 04:07:19.605 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:07:19.606 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 04:07:19.613 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:07:19.620 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:07:19.626 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
