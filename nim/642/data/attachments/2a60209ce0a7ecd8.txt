2025-02-06 04:06:01.528 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 04:06:01.528 DEBUG [tests.conftest] Running test: test_relay_subscribe_with_multiple_overlapping_pubsub_topics with id: 2025-02-06_04-06-01__b15b5078-df95-441f-aa49-2840acf24baf
2025-02-06 04:06:01.528 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 04:06:01.529 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-06 04:06:01.529 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-06 04:06:01.535 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:06:01.535 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_04-06-01__b15b5078-df95-441f-aa49-2840acf24baf__wakuorg_nwaku:latest.log
2025-02-06 04:06:01.535 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:06:01.535 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:06:01.536 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:06:01.536 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.57.188
2025-02-06 04:06:01.537 DEBUG [src.node.docker_mananger] Generated ports ['27603', '27604', '27605', '27606', '27607']
2025-02-06 04:06:01.537 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:06:01.537 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:06:01.537 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:06:01.537 DEBUG [src.node.docker_mananger] docker run -i -t -p 27603:27603 -p 27604:27604 -p 27605:27605 -p 27606:27606 -p 27607:27607 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27605 --rest-port=27603 --tcp-port=27604 --discv5-udp-port=27606 --rest-address=0.0.0.0 --nat=extip:172.18.57.188 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7ddb6dde1a5f9fecebacd6e0f5bcabec3158a4cc45fac960ccdbb498eb9ceaed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27607 --metrics-logging=true --relay=true
2025-02-06 04:06:01.758 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.57.188 waku c38a1eabc0ca522685cc820d3156252600e3119f544cf9daec6ea50309825506
2025-02-06 04:06:01.810 DEBUG [src.node.docker_mananger] Container started with ID c38a1eabc0ca. Setting up logs at ./log/docker/node1_2025-02-06_04-06-01__b15b5078-df95-441f-aa49-2840acf24baf__wakuorg_nwaku:latest.log
2025-02-06 04:06:01.811 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27603
2025-02-06 04:06:01.811 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:06:02.329 ERROR [src.node.docker_mananger] Max retries reached for container 27b3afdcba1d. Exiting log stream.
2025-02-06 04:06:02.812 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27603/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:02.814 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:06:02.814 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:06:02.814 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27603/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:02.817 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.57.188/tcp/27604/p2p/16Uiu2HAm1EsojT9ytE3XG4aDVDjioR4EZchcGhB5prVMN8WAJFzT","/ip4/172.18.57.188/tcp/27605/ws/p2p/16Uiu2HAm1EsojT9ytE3XG4aDVDjioR4EZchcGhB5prVMN8WAJFzT"],"enrUri":"enr:-L24QNxXgj04idAnaqEuH_69Q-jxFc6hxeusczPIjmV7rn8XbW5gOyH4KnoP3kMk26TJjEQ6G6I0-SEEcNfgwUxlxLsCgmlkgnY0gmlwhKwSObyKbXVsdGlhZGRyc5YACASsEjm8BmvUAAoErBI5vAZr1d0DgnJzhQADAQAAiXNlY3AyNTZrMaECVmIa3ygN8Uf1uU2TSjSfL8LBkIrwL9DmIGKT3x1rOpSDdGNwgmvUg3VkcIJr1oV3YWt1MgE"}'
2025-02-06 04:06:02.817 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:06:02.823 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:06:02.823 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_04-06-01__b15b5078-df95-441f-aa49-2840acf24baf__wakuorg_nwaku:latest.log
2025-02-06 04:06:02.823 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:06:02.823 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:06:02.824 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:06:02.825 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.150.255
2025-02-06 04:06:02.825 DEBUG [src.node.docker_mananger] Generated ports ['6370', '6371', '6372', '6373', '6374']
2025-02-06 04:06:02.825 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:06:02.825 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:06:02.825 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:06:02.825 DEBUG [src.node.docker_mananger] docker run -i -t -p 6370:6370 -p 6371:6371 -p 6372:6372 -p 6373:6373 -p 6374:6374 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6372 --rest-port=6370 --tcp-port=6371 --discv5-udp-port=6373 --rest-address=0.0.0.0 --nat=extip:172.18.150.255 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ca92ba8bffc2bdce790c88af80bfdffbcd6cb56afebaeb0bc77cae4b5806b3cc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6374 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QNxXgj04idAnaqEuH_69Q-jxFc6hxeusczPIjmV7rn8XbW5gOyH4KnoP3kMk26TJjEQ6G6I0-SEEcNfgwUxlxLsCgmlkgnY0gmlwhKwSObyKbXVsdGlhZGRyc5YACASsEjm8BmvUAAoErBI5vAZr1d0DgnJzhQADAQAAiXNlY3AyNTZrMaECVmIa3ygN8Uf1uU2TSjSfL8LBkIrwL9DmIGKT3x1rOpSDdGNwgmvUg3VkcIJr1oV3YWt1MgE
2025-02-06 04:06:03.048 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.150.255 waku 61e628d669a28a13e3ae98537dba2da75ff5db5babbc908ae69be4676b39c5dc
2025-02-06 04:06:03.093 DEBUG [src.node.docker_mananger] Container started with ID 61e628d669a2. Setting up logs at ./log/docker/node2_2025-02-06_04-06-01__b15b5078-df95-441f-aa49-2840acf24baf__wakuorg_nwaku:latest.log
2025-02-06 04:06:03.094 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6370
2025-02-06 04:06:03.094 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:06:04.095 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6370/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:04.111 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:06:04.111 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:06:04.112 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6370/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:04.117 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.150.255/tcp/6371/p2p/16Uiu2HAmTQnVnPWpBEQgaiPY93JUKHv7qhiFhxMoH876eRQmRyK5","/ip4/172.18.150.255/tcp/6372/ws/p2p/16Uiu2HAmTQnVnPWpBEQgaiPY93JUKHv7qhiFhxMoH876eRQmRyK5"],"enrUri":"enr:-L24QE-xnuvmz4ObiW9s3GVTFgwfw79RWPiyqlc8fQFJiXNNNt1i7sO2NKT_Q5sLgRKLjsY8vID9Wz78KRyrpJeIeNACgmlkgnY0gmlwhKwSlv-KbXVsdGlhZGRyc5YACASsEpb_BhjjAAoErBKW_wYY5N0DgnJzhQADAQAAiXNlY3AyNTZrMaED2zvFC1551qEM7Uuk3tj0bIWS-L2MHiSIJNXAz6ZfP1iDdGNwghjjg3VkcIIY5YV3YWt1MgE"}'
2025-02-06 04:06:04.117 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:06:04.118 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6370/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.57.188/tcp/27604/p2p/16Uiu2HAm1EsojT9ytE3XG4aDVDjioR4EZchcGhB5prVMN8WAJFzT"]'
2025-02-06 04:06:04.121 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:04.122 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27603/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9"]'
2025-02-06 04:06:04.126 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:04.127 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6370/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9"]'
2025-02-06 04:06:04.134 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:04.134 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27603/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25"]'
2025-02-06 04:06:04.143 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:04.143 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6370/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25"]'
2025-02-06 04:06:04.148 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:04.149 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27603/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:04.154 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:04.155 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:06:04.255 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-06 04:06:04.255 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27603/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:04.258 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738814764148894464,"ephemeral":false}]'
2025-02-06 04:06:04.259 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-06 04:06:04.259 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6370/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:04.261 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738814764148894464,"ephemeral":false}]'
2025-02-06 04:06:04.263 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27603/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:04.267 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:04.268 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:06:04.368 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-06 04:06:04.368 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27603/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:04.370 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738814764263260672,"ephemeral":false}]'
2025-02-06 04:06:04.372 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-06 04:06:04.372 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6370/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:04.374 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738814764263260672,"ephemeral":false}]'
2025-02-06 04:06:04.375 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27603/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:04.380 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:04.380 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:06:04.480 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-06 04:06:04.480 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27603/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:04.483 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738814764375848960,"ephemeral":false}]'
2025-02-06 04:06:04.484 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-06 04:06:04.484 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6370/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:04.486 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738814764375848960,"ephemeral":false}]'
2025-02-06 04:06:04.487 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27603/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F25" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:04.492 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:04.493 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:06:04.593 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-06 04:06:04.593 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27603/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F25" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:04.595 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738814764487746304,"ephemeral":false}]'
2025-02-06 04:06:04.596 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-06 04:06:04.597 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6370/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F25" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:04.599 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738814764487746304,"ephemeral":false}]'
2025-02-06 04:06:04.601 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 04:06:04.602 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 04:06:04.602 DEBUG [src.node.waku_node] Stopping container with id c38a1eabc0ca
2025-02-06 04:06:05.306 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:06:05.307 DEBUG [src.node.waku_node] Stopping container with id 61e628d669a2
2025-02-06 04:06:06.117 ERROR [src.node.docker_mananger] Max retries reached for container c38a1eabc0ca. Exiting log stream.
2025-02-06 04:06:06.774 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:06:06.776 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 04:06:06.782 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:06:06.788 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
