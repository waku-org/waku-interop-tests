2025-02-06 04:06:09.827 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 04:06:09.827 DEBUG [tests.conftest] Running test: test_publish_on_multiple_content_topics_and_only_after_fetch_them[content_topic_list1] with id: 2025-02-06_04-06-09__96d4382d-89bf-4c06-8626-44950fc440b0
2025-02-06 04:06:09.828 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 04:06:09.828 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-06 04:06:09.828 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-06 04:06:09.835 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:06:09.835 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_04-06-09__96d4382d-89bf-4c06-8626-44950fc440b0__wakuorg_nwaku:latest.log
2025-02-06 04:06:09.835 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:06:09.835 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:06:09.837 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:06:09.837 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.84.26
2025-02-06 04:06:09.837 DEBUG [src.node.docker_mananger] Generated ports ['7052', '7053', '7054', '7055', '7056']
2025-02-06 04:06:09.837 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:06:09.837 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:06:09.838 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:06:09.838 DEBUG [src.node.docker_mananger] docker run -i -t -p 7052:7052 -p 7053:7053 -p 7054:7054 -p 7055:7055 -p 7056:7056 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7054 --rest-port=7052 --tcp-port=7053 --discv5-udp-port=7055 --rest-address=0.0.0.0 --nat=extip:172.18.84.26 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=17a628b5d80a0fefbb1ceae093dccf2abd721b274cd23cabf769ee3dceda9c42 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7056 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2025-02-06 04:06:10.074 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.84.26 waku 5a9130af8c21bec8e8a7d09cc69a298e2b81dc5404507e7c78f9a0fc49d68e5e
2025-02-06 04:06:10.125 DEBUG [src.node.docker_mananger] Container started with ID 5a9130af8c21. Setting up logs at ./log/docker/node1_2025-02-06_04-06-09__96d4382d-89bf-4c06-8626-44950fc440b0__wakuorg_nwaku:latest.log
2025-02-06 04:06:10.126 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7052
2025-02-06 04:06:10.126 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:06:10.630 ERROR [src.node.docker_mananger] Max retries reached for container 564bfbe28c9f. Exiting log stream.
2025-02-06 04:06:11.127 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7052/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:11.130 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:06:11.130 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:06:11.130 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7052/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:11.132 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.26/tcp/7053/p2p/16Uiu2HAmVBygTHoph2QG1Y1i4JrDtFHyL2xnNEcQPU2q5WPUAyn6","/ip4/172.18.84.26/tcp/7054/ws/p2p/16Uiu2HAmVBygTHoph2QG1Y1i4JrDtFHyL2xnNEcQPU2q5WPUAyn6"],"enrUri":"enr:-L24QDnX8Dl9Wad-WA9iMT5LTgWA3E1f-g2AIYmd2j6koyBhTQ09r5uXkf767zWzLaBlVr50roxrDVGeeE22dtDmvssCgmlkgnY0gmlwhKwSVBqKbXVsdGlhZGRyc5YACASsElQaBhuNAAoErBJUGgYbjt0DgnJzhQACAQAAiXNlY3AyNTZrMaED9as9IjsKfUB8x3cOTLC4ugOyUpojbRz3fbwNBqXaBy-DdGNwghuNg3VkcIIbj4V3YWt1MgU"}'
2025-02-06 04:06:11.132 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:06:11.139 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:06:11.139 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_04-06-09__96d4382d-89bf-4c06-8626-44950fc440b0__wakuorg_nwaku:latest.log
2025-02-06 04:06:11.139 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:06:11.139 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:06:11.141 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:06:11.141 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.226.138
2025-02-06 04:06:11.141 DEBUG [src.node.docker_mananger] Generated ports ['20521', '20522', '20523', '20524', '20525']
2025-02-06 04:06:11.141 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:06:11.141 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:06:11.141 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:06:11.141 DEBUG [src.node.docker_mananger] docker run -i -t -p 20521:20521 -p 20522:20522 -p 20523:20523 -p 20524:20524 -p 20525:20525 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20523 --rest-port=20521 --tcp-port=20522 --discv5-udp-port=20524 --rest-address=0.0.0.0 --nat=extip:172.18.226.138 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=574cb2ba3ab7538b36e5fc990c4007fede5c5eccb4171bb0bbe7a84d574ec623 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20525 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QDnX8Dl9Wad-WA9iMT5LTgWA3E1f-g2AIYmd2j6koyBhTQ09r5uXkf767zWzLaBlVr50roxrDVGeeE22dtDmvssCgmlkgnY0gmlwhKwSVBqKbXVsdGlhZGRyc5YACASsElQaBhuNAAoErBJUGgYbjt0DgnJzhQACAQAAiXNlY3AyNTZrMaED9as9IjsKfUB8x3cOTLC4ugOyUpojbRz3fbwNBqXaBy-DdGNwghuNg3VkcIIbj4V3YWt1MgU --content-topic=/myapp/1/latest/proto
2025-02-06 04:06:11.364 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.226.138 waku 2f3a6c48c4581a585cd9bd683e804363d74a222815cd7f43e7c0f133b38c4404
2025-02-06 04:06:11.416 DEBUG [src.node.docker_mananger] Container started with ID 2f3a6c48c458. Setting up logs at ./log/docker/node2_2025-02-06_04-06-09__96d4382d-89bf-4c06-8626-44950fc440b0__wakuorg_nwaku:latest.log
2025-02-06 04:06:11.416 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20521
2025-02-06 04:06:11.416 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:06:12.417 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20521/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:12.427 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:06:12.429 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:06:12.430 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20521/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:12.435 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.226.138/tcp/20522/p2p/16Uiu2HAmRZuWnCrPgeXXmWJJFpgoy5zC7hAZPY6DShgrdEgFgPgg","/ip4/172.18.226.138/tcp/20523/ws/p2p/16Uiu2HAmRZuWnCrPgeXXmWJJFpgoy5zC7hAZPY6DShgrdEgFgPgg"],"enrUri":"enr:-L24QN5KPAtkBmpC_dk6xvgAl3G_EyhoSfmGze1fHW-7UoePe_6_5DFKVlbDAI4g1DCXi4KPYfmn8BeVeMtyLGajuCcCgmlkgnY0gmlwhKwS4oqKbXVsdGlhZGRyc5YACASsEuKKBlAqAAoErBLiigZQK90DgnJzhQACAQAAiXNlY3AyNTZrMaEDv9qOt8w4fvJ101imSUaVmJuiC2KBBDtGb8V5ZAEbYq2DdGNwglAqg3VkcIJQLIV3YWt1MgE"}'
2025-02-06 04:06:12.435 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:06:12.435 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20521/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.84.26/tcp/7053/p2p/16Uiu2HAmVBygTHoph2QG1Y1i4JrDtFHyL2xnNEcQPU2q5WPUAyn6"]'
2025-02-06 04:06:12.438 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:12.438 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7052/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-06 04:06:12.449 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:12.449 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20521/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-06 04:06:12.468 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:12.469 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7052/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L215YXBwLzEvbGF0ZXN0L3Byb3Rv", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:12.481 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:12.482 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7052/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9jb250ZW50L3Rlc3QuanM=", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:12.489 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:12.490 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7052/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yMi9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:12.495 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:12.496 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7052/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L3RveWNoYXQvMi9odWlsb25nL3Byb3Rv", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:12.501 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:12.503 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7052/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L3N0YXR1c2ltLzEvY29tbXVuaXR5L2Nib3I=", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:12.508 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:12.508 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7052/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yNy9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:12.513 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:12.514 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7052/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yOS9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:12.519 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:12.520 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7052/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yMC9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:06:12.525 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:06:12.526 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 04:06:12.626 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20521/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:12.629 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L215YXBwLzEvbGF0ZXN0L3Byb3Rv","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738814772469088256,"ephemeral":false}]'
2025-02-06 04:06:12.629 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20521/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:12.631 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9jb250ZW50L3Rlc3QuanM=","contentTopic":"/waku/2/content/test.js","version":0,"timestamp":1738814772481910784,"ephemeral":false}]'
2025-02-06 04:06:12.631 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20521/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:12.634 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yMi9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/22/sometopic/someencoding","version":0,"timestamp":1738814772490076416,"ephemeral":false}]'
2025-02-06 04:06:12.634 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20521/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:12.636 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3RveWNoYXQvMi9odWlsb25nL3Byb3Rv","contentTopic":"/toychat/2/huilong/proto","version":0,"timestamp":1738814772496286976,"ephemeral":false}]'
2025-02-06 04:06:12.637 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20521/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:12.639 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3N0YXR1c2ltLzEvY29tbXVuaXR5L2Nib3I=","contentTopic":"/statusim/1/community/cbor","version":0,"timestamp":1738814772502912512,"ephemeral":false}]'
2025-02-06 04:06:12.639 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20521/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:12.641 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yNy9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/27/sometopic/someencoding","version":0,"timestamp":1738814772508583168,"ephemeral":false}]'
2025-02-06 04:06:12.642 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20521/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:12.644 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yOS9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/29/sometopic/someencoding","version":0,"timestamp":1738814772514523392,"ephemeral":false}]'
2025-02-06 04:06:12.644 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20521/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:06:12.646 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yMC9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/20/sometopic/someencoding","version":0,"timestamp":1738814772519894016,"ephemeral":false}]'
2025-02-06 04:06:12.648 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 04:06:12.649 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 04:06:12.649 DEBUG [src.node.waku_node] Stopping container with id 5a9130af8c21
2025-02-06 04:06:13.743 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:06:13.744 DEBUG [src.node.waku_node] Stopping container with id 2f3a6c48c458
2025-02-06 04:06:14.557 ERROR [src.node.docker_mananger] Max retries reached for container 5a9130af8c21. Exiting log stream.
2025-02-06 04:06:15.267 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:06:15.270 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 04:06:15.279 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:06:15.287 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
