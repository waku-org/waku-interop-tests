2025-02-06 04:04:53.189 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 04:04:53.189 DEBUG [tests.conftest] Running test: test_passing_invalid_cursor with id: 2025-02-06_04-04-53__bfa05284-7288-4e36-9433-07e75d485dbb
2025-02-06 04:04:53.190 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 04:04:53.190 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-06 04:04:53.190 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-06 04:04:53.197 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:04:53.197 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-06_04-04-53__bfa05284-7288-4e36-9433-07e75d485dbb__wakuorg_nwaku:latest.log
2025-02-06 04:04:53.197 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:04:53.197 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:04:53.199 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:04:53.199 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.204.15
2025-02-06 04:04:53.199 DEBUG [src.node.docker_mananger] Generated ports ['14703', '14704', '14705', '14706', '14707']
2025-02-06 04:04:53.199 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:04:53.199 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:04:53.200 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:04:53.200 DEBUG [src.node.docker_mananger] docker run -i -t -p 14703:14703 -p 14704:14704 -p 14705:14705 -p 14706:14706 -p 14707:14707 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14705 --rest-port=14703 --tcp-port=14704 --discv5-udp-port=14706 --rest-address=0.0.0.0 --nat=extip:172.18.204.15 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b7bdfcd811d30b6d2fedb4fd719bb1a983bb2cdd9774bcc152e134a91fc6a96f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14707 --metrics-logging=true --store=true --relay=true
2025-02-06 04:04:53.423 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.204.15 waku 8d97d993d1cbb980b2468f1b60abd2e20f6947d058ac9bef4be5c39c5c05397b
2025-02-06 04:04:53.475 DEBUG [src.node.docker_mananger] Container started with ID 8d97d993d1cb. Setting up logs at ./log/docker/publishing_node1_2025-02-06_04-04-53__bfa05284-7288-4e36-9433-07e75d485dbb__wakuorg_nwaku:latest.log
2025-02-06 04:04:53.476 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14703
2025-02-06 04:04:53.476 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:04:53.990 ERROR [src.node.docker_mananger] Max retries reached for container b9e7d17cd62e. Exiting log stream.
2025-02-06 04:04:54.476 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14703/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:54.479 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:04:54.480 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:04:54.480 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14703/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:54.482 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.204.15/tcp/14704/p2p/16Uiu2HAmCL2gFgNGTvLDusgwAXUXNiSMgLk5noC8oG3e3no33EJF","/ip4/172.18.204.15/tcp/14705/ws/p2p/16Uiu2HAmCL2gFgNGTvLDusgwAXUXNiSMgLk5noC8oG3e3no33EJF"],"enrUri":"enr:-L24QCwUauknqYKasSfkMSlgrCEoitei4kX27s9MHrh66BHOW0SEdxZV7FhLSP8TS8zJMzM-BWmQ59EISPYC4rOGeV4CgmlkgnY0gmlwhKwSzA-KbXVsdGlhZGRyc5YACASsEswPBjlwAAoErBLMDwY5cd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-ySYgiyc2-qfrjh3gz-flPz0lGd_eV5l2Vbp7PIdAyyDdGNwgjlwg3VkcII5coV3YWt1MgM"}'
2025-02-06 04:04:54.482 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:04:54.489 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:04:54.489 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-06_04-04-53__bfa05284-7288-4e36-9433-07e75d485dbb__wakuorg_nwaku:latest.log
2025-02-06 04:04:54.490 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:04:54.490 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:04:54.491 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:04:54.491 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.161.198
2025-02-06 04:04:54.491 DEBUG [src.node.docker_mananger] Generated ports ['15733', '15734', '15735', '15736', '15737']
2025-02-06 04:04:54.492 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:04:54.492 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:04:54.492 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:04:54.492 DEBUG [src.node.docker_mananger] docker run -i -t -p 15733:15733 -p 15734:15734 -p 15735:15735 -p 15736:15736 -p 15737:15737 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15735 --rest-port=15733 --tcp-port=15734 --discv5-udp-port=15736 --rest-address=0.0.0.0 --nat=extip:172.18.161.198 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=affad89e07c5dbff10edd8b5016a06cdcce5c6eaefcbffc4adc0cddf4ba94784 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15737 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QCwUauknqYKasSfkMSlgrCEoitei4kX27s9MHrh66BHOW0SEdxZV7FhLSP8TS8zJMzM-BWmQ59EISPYC4rOGeV4CgmlkgnY0gmlwhKwSzA-KbXVsdGlhZGRyc5YACASsEswPBjlwAAoErBLMDwY5cd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-ySYgiyc2-qfrjh3gz-flPz0lGd_eV5l2Vbp7PIdAyyDdGNwgjlwg3VkcII5coV3YWt1MgM --storenode=/ip4/172.18.204.15/tcp/14704/p2p/16Uiu2HAmCL2gFgNGTvLDusgwAXUXNiSMgLk5noC8oG3e3no33EJF --store=true --relay=true
2025-02-06 04:04:54.725 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.161.198 waku 35908592986a2f0e129dd31043eef05019a85d0d198a0222b70edd7ea51738d5
2025-02-06 04:04:54.772 DEBUG [src.node.docker_mananger] Container started with ID 35908592986a. Setting up logs at ./log/docker/store_node1_2025-02-06_04-04-53__bfa05284-7288-4e36-9433-07e75d485dbb__wakuorg_nwaku:latest.log
2025-02-06 04:04:54.773 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15733
2025-02-06 04:04:54.773 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:04:55.773 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15733/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:55.777 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:04:55.777 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:04:55.777 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15733/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:55.779 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.161.198/tcp/15734/p2p/16Uiu2HAmDRgktdYJ48gpxZd8pQSnfHvnn6tdPNvCPHRQAGeBoDBo","/ip4/172.18.161.198/tcp/15735/ws/p2p/16Uiu2HAmDRgktdYJ48gpxZd8pQSnfHvnn6tdPNvCPHRQAGeBoDBo"],"enrUri":"enr:-L24QIr3jM2zJpxeX64Rn6eO7WMJrkj3lV68Nswk61rZiRtAKLZvtemJscmNFn66HN6s353D11-ikaKLCh7vGmKdysICgmlkgnY0gmlwhKwSocaKbXVsdGlhZGRyc5YACASsEqHGBj12AAoErBKhxgY9d90DgnJzhQADAQAAiXNlY3AyNTZrMaEDC3M-bJkwpwpPrI-XYHROuXlRvLnFkIu9ftmOOJdk-VKDdGNwgj12g3VkcII9eIV3YWt1MgM"}'
2025-02-06 04:04:55.779 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:04:55.780 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15733/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.204.15/tcp/14704/p2p/16Uiu2HAmCL2gFgNGTvLDusgwAXUXNiSMgLk5noC8oG3e3no33EJF"]'
2025-02-06 04:04:55.782 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:55.783 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14703/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 04:04:55.785 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:55.785 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15733/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 04:04:55.787 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:55.788 DEBUG [src.steps.store] Relaying message
2025-02-06 04:04:55.788 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:55.795 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:55.795 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:04:55.996 DEBUG [src.steps.store] Relaying message
2025-02-06 04:04:55.996 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:56.002 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:56.002 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:04:56.203 DEBUG [src.steps.store] Relaying message
2025-02-06 04:04:56.203 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:56.210 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:56.211 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:04:56.411 DEBUG [src.steps.store] Relaying message
2025-02-06 04:04:56.412 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:56.418 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:56.419 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:04:56.619 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14703/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0x74657374&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:56.622 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:14703/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0x74657374&pageSize=100&ascending=true. Response content: b'waku message hash parsing error: invalid hash length: 4'
2025-02-06 04:04:56.623 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15733/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0x74657374&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:56.625 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:15733/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0x74657374&pageSize=100&ascending=true. Response content: b'waku message hash parsing error: invalid hash length: 4'
2025-02-06 04:04:56.627 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 04:04:56.628 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 04:04:56.629 DEBUG [src.node.waku_node] Stopping container with id 8d97d993d1cb
2025-02-06 04:04:57.326 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:04:57.327 DEBUG [src.node.waku_node] Stopping container with id 35908592986a
2025-02-06 04:04:58.142 ERROR [src.node.docker_mananger] Max retries reached for container 8d97d993d1cb. Exiting log stream.
2025-02-06 04:04:58.820 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:04:58.820 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 04:04:58.827 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:04:58.832 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
