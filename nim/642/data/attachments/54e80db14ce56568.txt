2025-02-06 04:05:49.813 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 04:05:49.813 DEBUG [tests.conftest] Running test: test_store_with_not_valid_content_topic with id: 2025-02-06_04-05-49__beb044ff-c296-4b08-a3ad-dbaac7e13f0d
2025-02-06 04:05:49.813 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 04:05:49.814 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-06 04:05:49.814 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-06 04:05:49.820 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:05:49.820 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-06_04-05-49__beb044ff-c296-4b08-a3ad-dbaac7e13f0d__wakuorg_nwaku:latest.log
2025-02-06 04:05:49.820 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:05:49.820 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:05:49.822 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:05:49.822 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.159.252
2025-02-06 04:05:49.822 DEBUG [src.node.docker_mananger] Generated ports ['27178', '27179', '27180', '27181', '27182']
2025-02-06 04:05:49.822 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:05:49.822 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:05:49.822 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:05:49.822 DEBUG [src.node.docker_mananger] docker run -i -t -p 27178:27178 -p 27179:27179 -p 27180:27180 -p 27181:27181 -p 27182:27182 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27180 --rest-port=27178 --tcp-port=27179 --discv5-udp-port=27181 --rest-address=0.0.0.0 --nat=extip:172.18.159.252 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ab0be2e73caa00fac53c6e93ab72c78c5a6cf02c3809dbdccde4096ed96f5586 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27182 --metrics-logging=true --store=true --relay=true
2025-02-06 04:05:50.052 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.159.252 waku 5575ea847c5c4f591ae7c732077a28f4dd8dacf71edb0e0680b5c4650d180707
2025-02-06 04:05:50.099 DEBUG [src.node.docker_mananger] Container started with ID 5575ea847c5c. Setting up logs at ./log/docker/publishing_node1_2025-02-06_04-05-49__beb044ff-c296-4b08-a3ad-dbaac7e13f0d__wakuorg_nwaku:latest.log
2025-02-06 04:05:50.101 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27178
2025-02-06 04:05:50.102 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:05:50.619 ERROR [src.node.docker_mananger] Max retries reached for container c3767d7a11ee. Exiting log stream.
2025-02-06 04:05:51.102 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27178/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:05:51.105 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:05:51.105 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:05:51.105 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27178/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:05:51.107 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.159.252/tcp/27179/p2p/16Uiu2HAmSyQQDTSmF1KjQjaXGYeDS9vBWQgFuuKBdxDcbEXibGp5","/ip4/172.18.159.252/tcp/27180/ws/p2p/16Uiu2HAmSyQQDTSmF1KjQjaXGYeDS9vBWQgFuuKBdxDcbEXibGp5"],"enrUri":"enr:-L24QOTo1kOAX7Uwhl05HVEUdwVud-WRtec-4CkH1uFK6H5gdPTlY3mDs-nNYUXbUlsRGLvJ8_yVnSgq-6BPalLcpIwCgmlkgnY0gmlwhKwSn_yKbXVsdGlhZGRyc5YACASsEp_8BmorAAoErBKf_AZqLN0DgnJzhQADAQAAiXNlY3AyNTZrMaED1LtD9NsdC5-ihywBBdpFAm_ou3j0G9RMlJngpu_rFqaDdGNwgmorg3VkcIJqLYV3YWt1MgM"}'
2025-02-06 04:05:51.107 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:05:51.114 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:05:51.114 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-06_04-05-49__beb044ff-c296-4b08-a3ad-dbaac7e13f0d__wakuorg_nwaku:latest.log
2025-02-06 04:05:51.114 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:05:51.114 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:05:51.116 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:05:51.116 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.45.125
2025-02-06 04:05:51.116 DEBUG [src.node.docker_mananger] Generated ports ['64427', '64428', '64429', '64430', '64431']
2025-02-06 04:05:51.116 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:05:51.116 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:05:51.117 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:05:51.117 DEBUG [src.node.docker_mananger] docker run -i -t -p 64427:64427 -p 64428:64428 -p 64429:64429 -p 64430:64430 -p 64431:64431 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64429 --rest-port=64427 --tcp-port=64428 --discv5-udp-port=64430 --rest-address=0.0.0.0 --nat=extip:172.18.45.125 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=75f76affced30b0d1a6ec5e6ccafbfdbe83c2afa0dc1aa9bab293a0b819a93c8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64431 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QOTo1kOAX7Uwhl05HVEUdwVud-WRtec-4CkH1uFK6H5gdPTlY3mDs-nNYUXbUlsRGLvJ8_yVnSgq-6BPalLcpIwCgmlkgnY0gmlwhKwSn_yKbXVsdGlhZGRyc5YACASsEp_8BmorAAoErBKf_AZqLN0DgnJzhQADAQAAiXNlY3AyNTZrMaED1LtD9NsdC5-ihywBBdpFAm_ou3j0G9RMlJngpu_rFqaDdGNwgmorg3VkcIJqLYV3YWt1MgM --storenode=/ip4/172.18.159.252/tcp/27179/p2p/16Uiu2HAmSyQQDTSmF1KjQjaXGYeDS9vBWQgFuuKBdxDcbEXibGp5 --store=true --relay=true
2025-02-06 04:05:51.341 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.45.125 waku 46608df167df57e193039fe4f87e7308f8442bd60c4f7dd2885a3a20e9da1b7d
2025-02-06 04:05:51.392 DEBUG [src.node.docker_mananger] Container started with ID 46608df167df. Setting up logs at ./log/docker/store_node1_2025-02-06_04-05-49__beb044ff-c296-4b08-a3ad-dbaac7e13f0d__wakuorg_nwaku:latest.log
2025-02-06 04:05:51.392 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 64427
2025-02-06 04:05:51.392 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:05:52.394 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64427/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:05:52.397 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:05:52.397 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:05:52.397 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64427/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:05:52.399 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.125/tcp/64428/p2p/16Uiu2HAmG9aV6nVhF4Hx422hHU1AYSk6nzLtrX7bowS6qi9tDrBD","/ip4/172.18.45.125/tcp/64429/ws/p2p/16Uiu2HAmG9aV6nVhF4Hx422hHU1AYSk6nzLtrX7bowS6qi9tDrBD"],"enrUri":"enr:-L24QHX8hQMh9Gszst3NpfOOpYccoAI8CIGFDP5UiDC4SR4FdE_8MXruGoXzb4__a375Hm9GPl35dGF5vrOcaWSbnIkCgmlkgnY0gmlwhKwSLX2KbXVsdGlhZGRyc5YACASsEi19BvusAAoErBItfQb7rd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDM-XrbHi2rnVW-kbdMBviD8G77RynDZj1NnSnsFHuNoSDdGNwgvusg3VkcIL7roV3YWt1MgM"}'
2025-02-06 04:05:52.399 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:05:52.400 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64427/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.159.252/tcp/27179/p2p/16Uiu2HAmSyQQDTSmF1KjQjaXGYeDS9vBWQgFuuKBdxDcbEXibGp5"]'
2025-02-06 04:05:52.402 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:05:52.403 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27178/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 04:05:52.405 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:05:52.405 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64427/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 04:05:52.407 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:05:52.408 DEBUG [src.steps.store] Relaying message
2025-02-06 04:05:52.408 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27178/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:05:52.414 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:05:52.414 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:05:52.616 DEBUG [src.steps.store] Relaying message
2025-02-06 04:05:52.616 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27178/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:05:52.621 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:05:52.621 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:05:52.822 DEBUG [src.steps.store] Relaying message
2025-02-06 04:05:52.822 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27178/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:05:52.827 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:05:52.828 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:05:53.029 DEBUG [src.steps.store] Relaying message
2025-02-06 04:05:53.029 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27178/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:05:53.035 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:05:53.036 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:05:53.237 DEBUG [src.steps.store] Relaying message
2025-02-06 04:05:53.237 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27178/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:05:53.243 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:05:53.243 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:05:53.444 DEBUG [src.steps.store] Relaying message
2025-02-06 04:05:53.444 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27178/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:05:53.450 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:05:53.450 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:05:53.651 DEBUG [src.steps.store] Relaying message
2025-02-06 04:05:53.651 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27178/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:05:53.657 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:05:53.657 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:05:53.858 DEBUG [src.steps.store] Relaying message
2025-02-06 04:05:53.858 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27178/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:05:53.864 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:05:53.864 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:05:54.066 DEBUG [tests.store.test_topics] trying to find stored messages with wrong content_topic =##
2025-02-06 04:05:54.066 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27178/store/v3/messages?includeData=true&contentTopics=%23%23&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:05:54.069 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-06 04:05:54.069 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64427/store/v3/messages?includeData=true&contentTopics=%23%23&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:05:54.072 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-06 04:05:54.072 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27178/store/v3/messages?includeData=true&contentTopics=%20&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:05:54.075 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-06 04:05:54.075 DEBUG [tests.store.test_topics]  response for invalid content_topic {'requestId': '', 'statusCode': 200, 'statusDesc': 'OK', 'messages': []}
2025-02-06 04:05:54.078 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 04:05:54.079 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 04:05:54.079 DEBUG [src.node.waku_node] Stopping container with id 5575ea847c5c
2025-02-06 04:05:54.623 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:05:54.623 DEBUG [src.node.waku_node] Stopping container with id 46608df167df
2025-02-06 04:05:55.435 ERROR [src.node.docker_mananger] Max retries reached for container 5575ea847c5c. Exiting log stream.
2025-02-06 04:05:56.127 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:05:56.130 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 04:05:56.136 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:05:56.142 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
