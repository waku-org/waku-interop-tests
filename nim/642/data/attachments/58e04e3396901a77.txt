2025-02-06 04:04:09.705 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 04:04:09.706 DEBUG [tests.conftest] Running test: test_invalid_page_size with id: 2025-02-06_04-04-09__b80023bd-a794-49ab-9eff-010c2ff6f9f8
2025-02-06 04:04:09.706 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 04:04:09.706 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-06 04:04:09.706 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-06 04:04:09.713 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:04:09.713 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-06_04-04-09__b80023bd-a794-49ab-9eff-010c2ff6f9f8__wakuorg_nwaku:latest.log
2025-02-06 04:04:09.713 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:04:09.713 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:04:09.715 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:04:09.715 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.241.197
2025-02-06 04:04:09.715 DEBUG [src.node.docker_mananger] Generated ports ['2537', '2538', '2539', '2540', '2541']
2025-02-06 04:04:09.715 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:04:09.715 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:04:09.715 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:04:09.715 DEBUG [src.node.docker_mananger] docker run -i -t -p 2537:2537 -p 2538:2538 -p 2539:2539 -p 2540:2540 -p 2541:2541 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2539 --rest-port=2537 --tcp-port=2538 --discv5-udp-port=2540 --rest-address=0.0.0.0 --nat=extip:172.18.241.197 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=216ba31b2f1eee52517cc7cf8fd0f58de52c32aacef59be891b38cbfa2965612 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2541 --metrics-logging=true --store=true --relay=true
2025-02-06 04:04:09.941 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.241.197 waku 6c25fe25c5dd991f877ec9809e353e294b331a882fd4f134c224f4b69719be14
2025-02-06 04:04:09.992 DEBUG [src.node.docker_mananger] Container started with ID 6c25fe25c5dd. Setting up logs at ./log/docker/publishing_node1_2025-02-06_04-04-09__b80023bd-a794-49ab-9eff-010c2ff6f9f8__wakuorg_nwaku:latest.log
2025-02-06 04:04:09.993 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2537
2025-02-06 04:04:09.993 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:04:10.512 ERROR [src.node.docker_mananger] Max retries reached for container e43513ae237a. Exiting log stream.
2025-02-06 04:04:10.993 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2537/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:10.996 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:04:10.997 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:04:10.997 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2537/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:10.999 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.241.197/tcp/2538/p2p/16Uiu2HAm1qNhdP6PBY71DxHtbYieifvxztETS8uGAa5L6RnfH6iz","/ip4/172.18.241.197/tcp/2539/ws/p2p/16Uiu2HAm1qNhdP6PBY71DxHtbYieifvxztETS8uGAa5L6RnfH6iz"],"enrUri":"enr:-L24QA3E2asqB-zOnxN2q9AV9AqjFDBhaJ2gl06MR_6vDkCUNbPq5AH1LR-Tz7Yocoz8pqSiDHfs1Xw2QFdCoEYJyF8CgmlkgnY0gmlwhKwS8cWKbXVsdGlhZGRyc5YACASsEvHFBgnqAAoErBLxxQYJ690DgnJzhQADAQAAiXNlY3AyNTZrMaECXziGHGqEa7fmIdRFBrL40M503zEkixc2l7BLU7r-DLeDdGNwggnqg3VkcIIJ7IV3YWt1MgM"}'
2025-02-06 04:04:10.999 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:04:11.006 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:04:11.006 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-06_04-04-09__b80023bd-a794-49ab-9eff-010c2ff6f9f8__wakuorg_nwaku:latest.log
2025-02-06 04:04:11.006 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:04:11.006 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:04:11.008 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:04:11.008 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.252.79
2025-02-06 04:04:11.008 DEBUG [src.node.docker_mananger] Generated ports ['22426', '22427', '22428', '22429', '22430']
2025-02-06 04:04:11.008 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:04:11.008 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:04:11.008 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:04:11.009 DEBUG [src.node.docker_mananger] docker run -i -t -p 22426:22426 -p 22427:22427 -p 22428:22428 -p 22429:22429 -p 22430:22430 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22428 --rest-port=22426 --tcp-port=22427 --discv5-udp-port=22429 --rest-address=0.0.0.0 --nat=extip:172.18.252.79 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9affac0daee2cb8acedf72c9f6c9fefdb1a4adfda87ad3d48f398fffb35d1b6b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22430 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QA3E2asqB-zOnxN2q9AV9AqjFDBhaJ2gl06MR_6vDkCUNbPq5AH1LR-Tz7Yocoz8pqSiDHfs1Xw2QFdCoEYJyF8CgmlkgnY0gmlwhKwS8cWKbXVsdGlhZGRyc5YACASsEvHFBgnqAAoErBLxxQYJ690DgnJzhQADAQAAiXNlY3AyNTZrMaECXziGHGqEa7fmIdRFBrL40M503zEkixc2l7BLU7r-DLeDdGNwggnqg3VkcIIJ7IV3YWt1MgM --storenode=/ip4/172.18.241.197/tcp/2538/p2p/16Uiu2HAm1qNhdP6PBY71DxHtbYieifvxztETS8uGAa5L6RnfH6iz --store=true --relay=true
2025-02-06 04:04:11.236 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.252.79 waku 310c117f819c3e8bc0e433025d1c71ddaf4cf8cdb161c1a9f753aca4f7b673be
2025-02-06 04:04:11.280 DEBUG [src.node.docker_mananger] Container started with ID 310c117f819c. Setting up logs at ./log/docker/store_node1_2025-02-06_04-04-09__b80023bd-a794-49ab-9eff-010c2ff6f9f8__wakuorg_nwaku:latest.log
2025-02-06 04:04:11.282 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22426
2025-02-06 04:04:11.282 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:04:12.282 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22426/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:12.286 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:04:12.286 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:04:12.286 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22426/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:12.288 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.252.79/tcp/22427/p2p/16Uiu2HAmB8z3xGVEwusKh3taihFdEgimFbVNnd1d5AuBAboQkiWx","/ip4/172.18.252.79/tcp/22428/ws/p2p/16Uiu2HAmB8z3xGVEwusKh3taihFdEgimFbVNnd1d5AuBAboQkiWx"],"enrUri":"enr:-L24QFW8vh0TFsc4QlyLk6ZlvUUhnQuTMzCSQ1ROgWd917h7X5499UVxzZjk-OCjIbNKYq93IXhHu4SABubDgDJzCIACgmlkgnY0gmlwhKwS_E-KbXVsdGlhZGRyc5YACASsEvxPBlebAAoErBL8TwZXnN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC6XSNA30C5bL8GfoZxdpGZbh2xw8R6xg4V26dk10JnnWDdGNwglebg3VkcIJXnYV3YWt1MgM"}'
2025-02-06 04:04:12.288 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:04:12.289 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22426/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.241.197/tcp/2538/p2p/16Uiu2HAm1qNhdP6PBY71DxHtbYieifvxztETS8uGAa5L6RnfH6iz"]'
2025-02-06 04:04:12.291 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:12.292 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2537/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 04:04:12.294 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:12.294 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22426/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 04:04:12.297 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:12.298 DEBUG [src.steps.store] Relaying message
2025-02-06 04:04:12.298 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2537/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:12.304 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:12.304 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:04:12.505 DEBUG [src.steps.store] Relaying message
2025-02-06 04:04:12.505 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2537/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:12.511 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:12.512 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:04:12.712 DEBUG [src.steps.store] Relaying message
2025-02-06 04:04:12.713 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2537/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:12.719 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:12.720 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:04:12.921 DEBUG [src.steps.store] Relaying message
2025-02-06 04:04:12.921 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2537/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:12.928 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:12.929 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:04:13.130 DEBUG [src.steps.store] Relaying message
2025-02-06 04:04:13.130 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2537/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV80", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:13.137 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:13.137 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:04:13.338 DEBUG [src.steps.store] Relaying message
2025-02-06 04:04:13.338 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2537/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV81", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:13.344 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:13.344 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:04:13.545 DEBUG [src.steps.store] Relaying message
2025-02-06 04:04:13.546 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2537/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV82", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:13.552 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:13.552 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:04:13.753 DEBUG [src.steps.store] Relaying message
2025-02-06 04:04:13.753 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2537/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV83", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:13.760 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:13.760 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:04:13.961 DEBUG [src.steps.store] Relaying message
2025-02-06 04:04:13.961 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2537/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV84", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:13.968 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:13.968 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:04:14.170 DEBUG [src.steps.store] Relaying message
2025-02-06 04:04:14.170 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2537/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV85", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 04:04:14.176 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:04:14.176 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 04:04:14.377 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2537/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:14.380 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:2537/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true. Response content: b'page size parsing error: invalid integer: $2'
2025-02-06 04:04:14.380 DEBUG [tests.store.test_page_size] the invalid page_size $2 wasn't accepted 
2025-02-06 04:04:14.381 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22426/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:04:14.383 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:22426/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true. Response content: b'page size parsing error: invalid integer: $2'
2025-02-06 04:04:14.384 DEBUG [tests.store.test_page_size] the invalid page_size $2 wasn't accepted 
2025-02-06 04:04:14.386 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 04:04:14.387 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 04:04:14.387 DEBUG [src.node.waku_node] Stopping container with id 6c25fe25c5dd
2025-02-06 04:04:15.525 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:04:15.525 DEBUG [src.node.waku_node] Stopping container with id 310c117f819c
2025-02-06 04:04:16.281 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:04:16.283 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 04:04:16.289 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:04:16.295 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
