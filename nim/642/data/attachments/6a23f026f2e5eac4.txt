2025-02-06 04:02:53.553 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 04:02:53.553 DEBUG [tests.conftest] Running test: test_light_push_with_with_large_meta with id: 2025-02-06_04-02-53__771ec4d7-01a8-4e0e-a416-b6d9218e410e
2025-02-06 04:02:53.553 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 04:02:53.554 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-06 04:02:53.560 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:02:53.560 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-06_04-02-53__771ec4d7-01a8-4e0e-a416-b6d9218e410e__wakuorg_nwaku:latest.log
2025-02-06 04:02:53.560 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:02:53.560 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:02:53.561 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:02:53.562 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.126.103
2025-02-06 04:02:53.562 DEBUG [src.node.docker_mananger] Generated ports ['32033', '32034', '32035', '32036', '32037']
2025-02-06 04:02:53.562 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:02:53.562 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:02:53.562 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:02:53.562 DEBUG [src.node.docker_mananger] docker run -i -t -p 32033:32033 -p 32034:32034 -p 32035:32035 -p 32036:32036 -p 32037:32037 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32035 --rest-port=32033 --tcp-port=32034 --discv5-udp-port=32036 --rest-address=0.0.0.0 --nat=extip:172.18.126.103 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=58efac681c99c505db9df7d3acaacca86bfc9c8bc471ac51b323caefefc9e50b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32037 --metrics-logging=true --lightpush=true --relay=true
2025-02-06 04:02:53.785 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.126.103 waku 34cc3a82b4494b3a99bc9eea47d1683b03a970236f9927bf64a76fec17ad595d
2025-02-06 04:02:53.842 DEBUG [src.node.docker_mananger] Container started with ID 34cc3a82b449. Setting up logs at ./log/docker/receiving_node1_2025-02-06_04-02-53__771ec4d7-01a8-4e0e-a416-b6d9218e410e__wakuorg_nwaku:latest.log
2025-02-06 04:02:53.842 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32033
2025-02-06 04:02:53.842 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:02:54.336 ERROR [src.node.docker_mananger] Max retries reached for container a7353da7d197. Exiting log stream.
2025-02-06 04:02:54.843 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32033/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:02:54.846 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:02:54.846 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:02:54.846 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32033/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:02:54.848 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.126.103/tcp/32034/p2p/16Uiu2HAmEQ3WnyJL2bYQFRtNmuxfTBgwoXo1uG2iQ3VR7WiZqLJA","/ip4/172.18.126.103/tcp/32035/ws/p2p/16Uiu2HAmEQ3WnyJL2bYQFRtNmuxfTBgwoXo1uG2iQ3VR7WiZqLJA"],"enrUri":"enr:-L24QKHwJZRgS3wS9oU1cJCfGmfI8bU5YLeULy-NE7leJf1_R7fQzeoJpZ2OsCLVU40N0q9X0G3O5CqOlcscI8Tot0gCgmlkgnY0gmlwhKwSfmeKbXVsdGlhZGRyc5YACASsEn5nBn0iAAoErBJ-ZwZ9I90DgnJzhQADAQAAiXNlY3AyNTZrMaEDGeM9NYPHiYKGDCc8ySdPx96snGmqqFWpg7cMh0Nise-DdGNwgn0ig3VkcIJ9JIV3YWt1Mgk"}'
2025-02-06 04:02:54.849 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:02:54.855 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:02:54.855 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-06_04-02-53__771ec4d7-01a8-4e0e-a416-b6d9218e410e__wakuorg_nwaku:latest.log
2025-02-06 04:02:54.855 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:02:54.855 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:02:54.857 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:02:54.857 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.232.43
2025-02-06 04:02:54.857 DEBUG [src.node.docker_mananger] Generated ports ['2707', '2708', '2709', '2710', '2711']
2025-02-06 04:02:54.857 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:02:54.857 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:02:54.857 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:02:54.857 DEBUG [src.node.docker_mananger] docker run -i -t -p 2707:2707 -p 2708:2708 -p 2709:2709 -p 2710:2710 -p 2711:2711 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2709 --rest-port=2707 --tcp-port=2708 --discv5-udp-port=2710 --rest-address=0.0.0.0 --nat=extip:172.18.232.43 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a3fea8bc4bc70813b4a8ecd513dfb8b406e5b7cfdff7f81e9415bfd5cb6ecfb3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2711 --metrics-logging=true --lightpush=false --relay=true
2025-02-06 04:02:55.090 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.232.43 waku 43027ceee2eeb336d5dc8ac5253558591a6c2262ff7f7222b434ecccb182f2c9
2025-02-06 04:02:55.139 DEBUG [src.node.docker_mananger] Container started with ID 43027ceee2ee. Setting up logs at ./log/docker/receiving_node2_2025-02-06_04-02-53__771ec4d7-01a8-4e0e-a416-b6d9218e410e__wakuorg_nwaku:latest.log
2025-02-06 04:02:55.140 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2707
2025-02-06 04:02:55.140 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:02:56.140 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2707/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:02:56.144 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:02:56.144 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:02:56.144 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2707/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:02:56.146 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.232.43/tcp/2708/p2p/16Uiu2HAkzqp8uz2mKZaarZ9YrZDbYDfFfYA8njNbpEyprfHcBpXv","/ip4/172.18.232.43/tcp/2709/ws/p2p/16Uiu2HAkzqp8uz2mKZaarZ9YrZDbYDfFfYA8njNbpEyprfHcBpXv"],"enrUri":"enr:-L24QIphSCrHXGyRyhNvXU6o7TyxN2gEsc_Ct6xXJ8vz1w1IG-AwKnAZYXl2jgPlMWlmFKyprjhTOpY8HAjKV9MQFvMCgmlkgnY0gmlwhKwS6CuKbXVsdGlhZGRyc5YACASsEugrBgqUAAoErBLoKwYKld0DgnJzhQADAQAAiXNlY3AyNTZrMaECUHmY9PBopFGpV_jVyJYZ7Q6H1uIQ2WZ61wEoMSa5tF2DdGNwggqUg3VkcIIKloV3YWt1MgE"}'
2025-02-06 04:02:56.146 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:02:56.147 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2707/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.126.103/tcp/32034/p2p/16Uiu2HAmEQ3WnyJL2bYQFRtNmuxfTBgwoXo1uG2iQ3VR7WiZqLJA"]'
2025-02-06 04:02:56.186 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:02:56.194 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 04:02:56.194 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-06_04-02-53__771ec4d7-01a8-4e0e-a416-b6d9218e410e__wakuorg_nwaku:latest.log
2025-02-06 04:02:56.195 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 04:02:56.195 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 04:02:56.196 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 04:02:56.196 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.98.165
2025-02-06 04:02:56.196 DEBUG [src.node.docker_mananger] Generated ports ['17833', '17834', '17835', '17836', '17837']
2025-02-06 04:02:56.197 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 04:02:56.197 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 04:02:56.197 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 04:02:56.197 DEBUG [src.node.docker_mananger] docker run -i -t -p 17833:17833 -p 17834:17834 -p 17835:17835 -p 17836:17836 -p 17837:17837 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17835 --rest-port=17833 --tcp-port=17834 --discv5-udp-port=17836 --rest-address=0.0.0.0 --nat=extip:172.18.98.165 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ddc65cbbe562fc2bb6f0df4a856dd12aa4e7d0dcc08c25b93ba6d0e33dba8e40 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17837 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QKHwJZRgS3wS9oU1cJCfGmfI8bU5YLeULy-NE7leJf1_R7fQzeoJpZ2OsCLVU40N0q9X0G3O5CqOlcscI8Tot0gCgmlkgnY0gmlwhKwSfmeKbXVsdGlhZGRyc5YACASsEn5nBn0iAAoErBJ-ZwZ9I90DgnJzhQADAQAAiXNlY3AyNTZrMaEDGeM9NYPHiYKGDCc8ySdPx96snGmqqFWpg7cMh0Nise-DdGNwgn0ig3VkcIJ9JIV3YWt1Mgk --lightpushnode=/ip4/172.18.126.103/tcp/32034/p2p/16Uiu2HAmEQ3WnyJL2bYQFRtNmuxfTBgwoXo1uG2iQ3VR7WiZqLJA --lightpush=true --relay=false
2025-02-06 04:02:56.434 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.98.165 waku ea5792847a735e6e75d6a6924a8d333764815997f48e23b9df42034f8fd15b77
2025-02-06 04:02:56.479 DEBUG [src.node.docker_mananger] Container started with ID ea5792847a73. Setting up logs at ./log/docker/lightpush_node1_2025-02-06_04-02-53__771ec4d7-01a8-4e0e-a416-b6d9218e410e__wakuorg_nwaku:latest.log
2025-02-06 04:02:56.479 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17833
2025-02-06 04:02:56.480 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 04:02:57.480 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17833/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:02:57.483 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 04:02:57.483 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 04:02:57.483 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17833/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 04:02:57.485 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.98.165/tcp/17834/p2p/16Uiu2HAmAFufecP5qg8u7Q7FFva2YFntjVy7AGoToipVA5VCBSkN","/ip4/172.18.98.165/tcp/17835/ws/p2p/16Uiu2HAmAFufecP5qg8u7Q7FFva2YFntjVy7AGoToipVA5VCBSkN"],"enrUri":"enr:-L24QM84DjCxai3zpvPCbyUbTOwI-N36q3jta_dIhVOjEcC2Ij_58xVU5XxRHUupQGFVqYLvx6L8LjZvZTauWA8O_a4CgmlkgnY0gmlwhKwSYqWKbXVsdGlhZGRyc5YACASsEmKlBkWqAAoErBJipQZFq90DgnJzhQADAQAAiXNlY3AyNTZrMaEC3F740Lgx6Xp4ZsxmFLisTfZVBzctHhcpjXxM0ZY6EpeDdGNwgkWqg3VkcIJFrIV3YWt1Mgg"}'
2025-02-06 04:02:57.486 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 04:02:57.486 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17833/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.126.103/tcp/32034/p2p/16Uiu2HAmEQ3WnyJL2bYQFRtNmuxfTBgwoXo1uG2iQ3VR7WiZqLJA"]'
2025-02-06 04:02:57.525 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:02:57.525 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17833/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.232.43/tcp/2708/p2p/16Uiu2HAkzqp8uz2mKZaarZ9YrZDbYDfFfYA8njNbpEyprfHcBpXv"]'
2025-02-06 04:02:57.553 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:02:57.554 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32033/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 04:02:57.558 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:02:57.560 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2707/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 04:02:57.565 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 04:02:57.569 DEBUG [src.steps.light_push] Lightpushing message
2025-02-06 04:02:57.569 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17833/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738814577569052416, "meta": "YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYQ=="}}'
2025-02-06 04:02:57.583 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17833/lightpush/v1/message. Response content: b'Failed to request a message push: decode_rpc_failure: (kind: InvalidLengthField, field: "meta")'
2025-02-06 04:02:57.586 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 04:02:57.587 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 04:02:57.587 DEBUG [src.node.waku_node] Stopping container with id 34cc3a82b449
2025-02-06 04:02:58.317 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:02:58.318 DEBUG [src.node.waku_node] Stopping container with id 43027ceee2ee
2025-02-06 04:02:59.130 ERROR [src.node.docker_mananger] Max retries reached for container 34cc3a82b449. Exiting log stream.
2025-02-06 04:02:59.824 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:02:59.825 DEBUG [src.node.waku_node] Stopping container with id ea5792847a73
2025-02-06 04:03:00.637 ERROR [src.node.docker_mananger] Max retries reached for container 43027ceee2ee. Exiting log stream.
2025-02-06 04:03:01.356 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 04:03:01.357 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 04:03:01.363 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:03:01.370 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 04:03:01.375 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
