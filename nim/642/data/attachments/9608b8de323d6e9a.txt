[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2025-02-06_04-07-11__fa6f8a97-5f77-45e8-9144-514c087d3ec5
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-06_04-07-11__fa6f8a97-5f77-45e8-9144-514c087d3ec5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.126.117
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['28496', '28497', '28498', '28499', '28500']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 28496:28496 -p 28497:28497 -p 28498:28498 -p 28499:28499 -p 28500:28500 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28498 --rest-port=28496 --tcp-port=28497 --discv5-udp-port=28499 --rest-address=0.0.0.0 --nat=extip:172.18.126.117 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=66a8ea50dcfbc4771d6a1826ba16bacb1c2c39c89ea85ffac5cbab28a7b9d4e9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28500 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.126.117 waku eb467760a430fc6e69f68f82be7489ee857d52cc00a8fc710ce9c4b636d45a31
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID eb467760a430. Setting up logs at ./log/docker/publishing_node1_2025-02-06_04-07-11__fa6f8a97-5f77-45e8-9144-514c087d3ec5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 28496
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3b02e7bd3111. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28496/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28496/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.126.117/tcp/28497/p2p/16Uiu2HAmDS5KWyZZmJNfhvXiBLVjqTtjcSaza7MKc6TfxXVJRWgx","/ip4/172.18.126.117/tcp/28498/ws/p2p/16Uiu2HAmDS5KWyZZmJNfhvXiBLVjqTtjcSaza7MKc6TfxXVJRWgx"],"enrUri":"enr:-L24QO_XQYjo2wPIXoKPnBZtxc5eUgoCGFuvJJ24mesvPmS8fKtr2S6AC8Lt2ojimFcOwToSXHWYED1JEO1IoPWiykQCgmlkgnY0gmlwhKwSfnWKbXVsdGlhZGRyc5YACASsEn51Bm9RAAoErBJ-dQZvUt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDC4zBYF1tA0ZvIM3_cIRrsqc-83_CwGdqHqAgw00zCHGDdGNwgm9Rg3VkcIJvU4V3YWt1Mgs"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node2_2025-02-06_04-07-11__fa6f8a97-5f77-45e8-9144-514c087d3ec5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.213.97
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['30742', '30743', '30744', '30745', '30746']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 30742:30742 -p 30743:30743 -p 30744:30744 -p 30745:30745 -p 30746:30746 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30744 --rest-port=30742 --tcp-port=30743 --discv5-udp-port=30745 --rest-address=0.0.0.0 --nat=extip:172.18.213.97 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=62f0a2fc0b79fefece384cd5dc1ce1eada8b6e2e68a7a488f50ddabc78d8aecf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30746 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.213.97 waku 627705324fc29747632f0013b30c63055f41ff4fa60228cd1a43dbb5f56564cb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 627705324fc2. Setting up logs at ./log/docker/publishing_node2_2025-02-06_04-07-11__fa6f8a97-5f77-45e8-9144-514c087d3ec5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 30742
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30742/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30742/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.213.97/tcp/30743/p2p/16Uiu2HAmDqXKGC2HuQ254M55i173s4NPBT3YqpaYJocPtq4xo3Cn","/ip4/172.18.213.97/tcp/30744/ws/p2p/16Uiu2HAmDqXKGC2HuQ254M55i173s4NPBT3YqpaYJocPtq4xo3Cn"],"enrUri":"enr:-L24QOWVtj649vB2vtei-GmdYLo3K4Q2dfdJIopzfnMI9mDkZQxKGnp08DVcdqDrCJsgvtfzar855iLfcG1fNdz6D80CgmlkgnY0gmlwhKwS1WGKbXVsdGlhZGRyc5YACASsEtVhBngXAAoErBLVYQZ4GN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDEY6B3wnD4bheya6IeI2WMCiNDJny0SjfCree0BVF9vODdGNwgngXg3VkcIJ4GYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30742/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.126.117/tcp/28497/p2p/16Uiu2HAmDS5KWyZZmJNfhvXiBLVjqTtjcSaza7MKc6TfxXVJRWgx"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-06_04-07-11__fa6f8a97-5f77-45e8-9144-514c087d3ec5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.61.143
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['23078', '23079', '23080', '23081', '23082']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 23078:23078 -p 23079:23079 -p 23080:23080 -p 23081:23081 -p 23082:23082 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23080 --rest-port=23078 --tcp-port=23079 --discv5-udp-port=23081 --rest-address=0.0.0.0 --nat=extip:172.18.61.143 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ecdefbb1c33fe93eab8cb25d1ebc482b7ef791ab057aec5a51765c1e8e0cf168 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23082 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QO_XQYjo2wPIXoKPnBZtxc5eUgoCGFuvJJ24mesvPmS8fKtr2S6AC8Lt2ojimFcOwToSXHWYED1JEO1IoPWiykQCgmlkgnY0gmlwhKwSfnWKbXVsdGlhZGRyc5YACASsEn51Bm9RAAoErBJ-dQZvUt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDC4zBYF1tA0ZvIM3_cIRrsqc-83_CwGdqHqAgw00zCHGDdGNwgm9Rg3VkcIJvU4V3YWt1Mgs --storenode=/ip4/172.18.126.117/tcp/28497/p2p/16Uiu2HAmDS5KWyZZmJNfhvXiBLVjqTtjcSaza7MKc6TfxXVJRWgx --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.126.117/tcp/28497/p2p/16Uiu2HAmDS5KWyZZmJNfhvXiBLVjqTtjcSaza7MKc6TfxXVJRWgx
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.61.143 waku c164378de4fe2a2c44d79413517f1cdaaa93d11ac2a4464b735f5bf7d44fe6c7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c164378de4fe. Setting up logs at ./log/docker/store_node1_2025-02-06_04-07-11__fa6f8a97-5f77-45e8-9144-514c087d3ec5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 23078
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23078/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23078/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.61.143/tcp/23079/p2p/16Uiu2HAmSg73eEUwE7kCTsfFHMKKpfMnBiVj6dJfmta8uBsgj1UU","/ip4/172.18.61.143/tcp/23080/ws/p2p/16Uiu2HAmSg73eEUwE7kCTsfFHMKKpfMnBiVj6dJfmta8uBsgj1UU"],"enrUri":"enr:-L24QNF73mxPIlUJ31nNp-Y0cOWUnCKpr-4qy1y45IRXBZhOWo22Ia-fzEC4DQvSPil-drnF1uDI-Fy9GablPowGDWQCgmlkgnY0gmlwhKwSPY-KbXVsdGlhZGRyc5YACASsEj2PBlonAAoErBI9jwZaKN0DgnJzhQADAQAAiXNlY3AyNTZrMaED0EzEx9swXVLT5oBM9k9n9oOQKBnI531UbuX_gIZaNPmDdGNwglong3VkcIJaKYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23078/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.126.117/tcp/28497/p2p/16Uiu2HAmDS5KWyZZmJNfhvXiBLVjqTtjcSaza7MKc6TfxXVJRWgx"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23078/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.213.97/tcp/30743/p2p/16Uiu2HAmDqXKGC2HuQ254M55i173s4NPBT3YqpaYJocPtq4xo3Cn"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28496/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30742/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23078/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738814835796383488}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28496/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xb8b1534ac8c38d696aeeb975249bb5c6461aa1e78f554c6b2c5c15763e6da6db"}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23078/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"f50d0a5751023211dbc6","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xb8b1534ac8c38d696aeeb975249bb5c6461aa1e78f554c6b2c5c15763e6da6db"}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id eb467760a430
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 627705324fc2
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container eb467760a430. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c164378de4fe
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 627705324fc2. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.