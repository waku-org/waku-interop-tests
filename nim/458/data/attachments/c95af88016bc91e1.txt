[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_time_filter_small_timestamp with id: 2024-11-22_04-38-47__4fbd7886-30af-4c6f-a8be-af02b04b08ee
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-11-22_04-38-47__4fbd7886-30af-4c6f-a8be-af02b04b08ee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.233.39
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['49627', '49628', '49629', '49630', '49631']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 49627:49627 -p 49628:49628 -p 49629:49629 -p 49630:49630 -p 49631:49631 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49629 --rest-port=49627 --tcp-port=49628 --discv5-udp-port=49630 --rest-address=0.0.0.0 --nat=extip:172.18.233.39 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5c8bacdeaf5683bd45fa37c18b5fbd72b571c08474e711c4e082d0305f9d8db7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49631 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.233.39 waku 8360f7218aa113de914c26e53180c101ac58dc1082ba75e0eade4bb3c35db17d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8360f7218aa1. Setting up logs at ./log/docker/publishing_node1_2024-11-22_04-38-47__4fbd7886-30af-4c6f-a8be-af02b04b08ee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 49627
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2091334cd59a. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49627/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49627/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.233.39/tcp/49628/p2p/16Uiu2HAmHrbAqMebufSkULeXNkFy7rz8LhLvTXpGzqJxN8WK4mHC","/ip4/172.18.233.39/tcp/49629/ws/p2p/16Uiu2HAmHrbAqMebufSkULeXNkFy7rz8LhLvTXpGzqJxN8WK4mHC"],"enrUri":"enr:-L24QPGDyIN9KTZ9cd5ebppy6HHEutuQHdQwB7nolJD9wxUDJahP7VrMjLzpdU56IpcANrAMQB8dxsrvkPICk7XLQ9ACgmlkgnY0gmlwhKwS6SeKbXVsdGlhZGRyc5YACASsEuknBsHcAAoErBLpJwbB3d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDTUMxv8BTrBYjvem3tDmXX793PheBZHdCxmZbbWc2o9ODdGNwgsHcg3VkcILB3oV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-11-22_04-38-47__4fbd7886-30af-4c6f-a8be-af02b04b08ee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.6.184
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['15650', '15651', '15652', '15653', '15654']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 15650:15650 -p 15651:15651 -p 15652:15652 -p 15653:15653 -p 15654:15654 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15652 --rest-port=15650 --tcp-port=15651 --discv5-udp-port=15653 --rest-address=0.0.0.0 --nat=extip:172.18.6.184 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b9fcf44f1ade9ccc26176e6fb2ebeef9f6fea2fd8fa733cd3ffc95f5347bad5c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15654 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QPGDyIN9KTZ9cd5ebppy6HHEutuQHdQwB7nolJD9wxUDJahP7VrMjLzpdU56IpcANrAMQB8dxsrvkPICk7XLQ9ACgmlkgnY0gmlwhKwS6SeKbXVsdGlhZGRyc5YACASsEuknBsHcAAoErBLpJwbB3d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDTUMxv8BTrBYjvem3tDmXX793PheBZHdCxmZbbWc2o9ODdGNwgsHcg3VkcILB3oV3YWt1MgM --storenode=/ip4/172.18.233.39/tcp/49628/p2p/16Uiu2HAmHrbAqMebufSkULeXNkFy7rz8LhLvTXpGzqJxN8WK4mHC --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.6.184 waku 5a01050c04fb7027c53a3fabf8ed2b21fc89312430ca019ad04310d63a87168d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5a01050c04fb. Setting up logs at ./log/docker/store_node1_2024-11-22_04-38-47__4fbd7886-30af-4c6f-a8be-af02b04b08ee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 15650
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15650/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15650/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.6.184/tcp/15651/p2p/16Uiu2HAmLN5moENrwEu5XYNgZZDbwcu7mBRJEZK3MRUGdZM8nq6e","/ip4/172.18.6.184/tcp/15652/ws/p2p/16Uiu2HAmLN5moENrwEu5XYNgZZDbwcu7mBRJEZK3MRUGdZM8nq6e"],"enrUri":"enr:-L24QGZNa-i9FXury1sKXuCgX21he_Ag_9m_T7xEde2Dm-diaagcj8lcrGS0W2lPntu9zDNICWxAdevW3dDyk9NBrFcCgmlkgnY0gmlwhKwSBriKbXVsdGlhZGRyc5YACASsEga4Bj0jAAoErBIGuAY9JN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDcojAwbTCYH_oT14jwVx5LANIPkp4RrLiDtzv5k5By_-DdGNwgj0jg3VkcII9JYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15650/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.233.39/tcp/49628/p2p/16Uiu2HAmHrbAqMebufSkULeXNkFy7rz8LhLvTXpGzqJxN8WK4mHC"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49627/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15650/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49627/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49627/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49627/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49627/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49627/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49627/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:218 inquering stored messages with start time 1732250336809523968 after end time 1732250349809539073
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49627/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1732250336809523968&endTime=1732250349809539073&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"3zdPfMyuG/bIQhJ3Pq3OqjNh1JCHi//J/KmBoAIHZS4=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732250336809523968,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"1tJSsAuiNtO+z83kn6VjPxV74RfyJNS5yA3NHGJ5hhQ=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732250338809530880,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"GeAM2XCJ+N06ww6lKMeFIHzhWXBw8YaPRHXMaZlHYow=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732250339709532928,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"URQ70gWAJC8biuAuHbfak6o4mabD8ujzAMvuNpCWAOY=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732250339909534976,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"M219R0b76jQGITeQFlS+kNYClU5u5mCN9mkY92r2SU8=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732250341809537024,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"kO5vyKbDee+WxYtWH6S7MBtx0vIDifdWCuP6Gk98ev4=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732250349809539072,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:221 number of messages stored for start time 1732250336809523968 and end time = 1732250349809539073 is  6
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15650/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1732250336809523968&endTime=1732250349809539073&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"3zdPfMyuG/bIQhJ3Pq3OqjNh1JCHi//J/KmBoAIHZS4=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732250336809523968,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"1tJSsAuiNtO+z83kn6VjPxV74RfyJNS5yA3NHGJ5hhQ=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732250338809530880,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"GeAM2XCJ+N06ww6lKMeFIHzhWXBw8YaPRHXMaZlHYow=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732250339709532928,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"URQ70gWAJC8biuAuHbfak6o4mabD8ujzAMvuNpCWAOY=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732250339909534976,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"M219R0b76jQGITeQFlS+kNYClU5u5mCN9mkY92r2SU8=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732250341809537024,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"kO5vyKbDee+WxYtWH6S7MBtx0vIDifdWCuP6Gk98ev4=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732250349809539072,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:221 number of messages stored for start time 1732250336809523968 and end time = 1732250349809539073 is  6
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 8360f7218aa1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 5a01050c04fb
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 8360f7218aa1. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.