[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2024-11-22_04-03-00__f166ba04-e48a-44ef-8d53-a4a9d6699d89
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-22_04-03-00__f166ba04-e48a-44ef-8d53-a4a9d6699d89__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-22_04-03-00__f166ba04-e48a-44ef-8d53-a4a9d6699d89__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-22_04-03-00__f166ba04-e48a-44ef-8d53-a4a9d6699d89__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.152.59
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['34151', '34152', '34153', '34154', '34155']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 34151:34151 -p 34152:34152 -p 34153:34153 -p 34154:34154 -p 34155:34155 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34153 --rest-port=34151 --tcp-port=34152 --discv5-udp-port=34154 --rest-address=0.0.0.0 --nat=extip:172.18.152.59 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fc67ce7d6df01ab7b4de2c67bf47003eed473cc87f9b46b038c7dd92e6af88cb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34155 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.152.59 waku 808b60e991fd589cc725d8d6cfa9b7400b51b0b56297621468c89bc615fea896
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 808b60e991fd. Setting up logs at ./log/docker/node1_2024-11-22_04-03-00__f166ba04-e48a-44ef-8d53-a4a9d6699d89__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 34151
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 673ac5734071. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34151/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34151/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.152.59/tcp/34152/p2p/16Uiu2HAmFaMJw88CYMAnuHYmey5QLxzieDdtgf3U3f2h11oW4Fr7","/ip4/172.18.152.59/tcp/34153/ws/p2p/16Uiu2HAmFaMJw88CYMAnuHYmey5QLxzieDdtgf3U3f2h11oW4Fr7"],"enrUri":"enr:-L24QEVxOUNPUczZhIlaLKlKMO5woMqVJwavN9ul_vXbsoR9bu00IfOBfP01uZhjCMC7fgLOfg6JSYAJm1_0IYpBPBcCgmlkgnY0gmlwhKwSmDuKbXVsdGlhZGRyc5YACASsEpg7BoVoAAoErBKYOwaFad0DgnJzhQADAQAAiXNlY3AyNTZrMaEDK2LbB18Kcs-icHYaYLKNH9xAGzgGLBbSNneilLdbKSCDdGNwgoVog3VkcIKFaoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.11.154
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['24489', '24490', '24491', '24492', '24493']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 24489:24489 -p 24490:24490 -p 24491:24491 -p 24492:24492 -p 24493:24493 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24491 --rest-port=24489 --tcp-port=24490 --discv5-udp-port=24492 --rest-address=0.0.0.0 --nat=extip:172.18.11.154 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4ec8e9de13c5a4deb03b404fcb1dee94decbccb6ceef3b18e8e6aa1f2ac24e27 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24493 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QEVxOUNPUczZhIlaLKlKMO5woMqVJwavN9ul_vXbsoR9bu00IfOBfP01uZhjCMC7fgLOfg6JSYAJm1_0IYpBPBcCgmlkgnY0gmlwhKwSmDuKbXVsdGlhZGRyc5YACASsEpg7BoVoAAoErBKYOwaFad0DgnJzhQADAQAAiXNlY3AyNTZrMaEDK2LbB18Kcs-icHYaYLKNH9xAGzgGLBbSNneilLdbKSCDdGNwgoVog3VkcIKFaoV3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.11.154 waku 27c0a3df109f7d7f806e7bed8831f94040cdbdab147131740acfe661318bc876
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 27c0a3df109f. Setting up logs at ./log/docker/node2_2024-11-22_04-03-00__f166ba04-e48a-44ef-8d53-a4a9d6699d89__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 24489
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24489/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24489/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.11.154/tcp/24490/p2p/16Uiu2HAmHWss6NQ5DVrGUZDXghWvk4tJxEYQX8GR7B5dv7u2Hvic","/ip4/172.18.11.154/tcp/24491/ws/p2p/16Uiu2HAmHWss6NQ5DVrGUZDXghWvk4tJxEYQX8GR7B5dv7u2Hvic"],"enrUri":"enr:-L24QKiK5zdEFE5avre5jNDb5AEBqolGsgxMXzAUBw30BqLNVTgG4Ff3rKju0TwE3c8K2uWyc0SqQ0EjnAKPfH5i6T0CgmlkgnY0gmlwhKwSC5qKbXVsdGlhZGRyc5YACASsEguaBl-qAAoErBILmgZfq90DgnJzhQADAQAAiXNlY3AyNTZrMaEDSDZ0SbroCtZoRpkGzie8Cj96dj5s11RQbea_R_sLq_GDdGNwgl-qg3VkcIJfrIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.231.81
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['50722', '50723', '50724', '50725', '50726']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 50722:50722 -p 50723:50723 -p 50724:50724 -p 50725:50725 -p 50726:50726 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50724 --rest-port=50722 --tcp-port=50723 --discv5-udp-port=50725 --rest-address=0.0.0.0 --nat=extip:172.18.231.81 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=514a6ccf0b17ca7dee4aa9f8c3fdd6ea9eb844e4d5cebdabc9e5faa38e81fefb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50726 --metrics-logging=true --relay=false --storenode=/ip4/172.18.11.154/tcp/24490/p2p/16Uiu2HAmHWss6NQ5DVrGUZDXghWvk4tJxEYQX8GR7B5dv7u2Hvic --discv5-bootstrap-node=enr:-L24QKiK5zdEFE5avre5jNDb5AEBqolGsgxMXzAUBw30BqLNVTgG4Ff3rKju0TwE3c8K2uWyc0SqQ0EjnAKPfH5i6T0CgmlkgnY0gmlwhKwSC5qKbXVsdGlhZGRyc5YACASsEguaBl-qAAoErBILmgZfq90DgnJzhQADAQAAiXNlY3AyNTZrMaEDSDZ0SbroCtZoRpkGzie8Cj96dj5s11RQbea_R_sLq_GDdGNwgl-qg3VkcIJfrIV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.231.81 waku 418f3f90720e295af7e3583382cbf927109ac4577c686c3d4a75395c4f5ed703
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 418f3f90720e. Setting up logs at ./log/docker/node3_2024-11-22_04-03-00__f166ba04-e48a-44ef-8d53-a4a9d6699d89__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 50722
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50722/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50722/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.231.81/tcp/50723/p2p/16Uiu2HAmUiwFbWTVa3LjyEfkPeHmfzd8PPCDvSjXHwoRPB6zpinc","/ip4/172.18.231.81/tcp/50724/ws/p2p/16Uiu2HAmUiwFbWTVa3LjyEfkPeHmfzd8PPCDvSjXHwoRPB6zpinc"],"enrUri":"enr:-L24QEfI5Kqo5DaVrk3iHTVy-CMZWHrNko_o4BBZdEbEYPR0e3umos77GwPvD8r-dLZvCvJLj8pqFvXphSf2vrdcz0UCgmlkgnY0gmlwhKwS51GKbXVsdGlhZGRyc5YACASsEudRBsYjAAoErBLnUQbGJN0DgnJzhQADAQAAiXNlY3AyNTZrMaED7r3PmdobgJCZrtHpYSFIz0E-WB5oLmEt2nEOxtXPyKGDdGNwgsYjg3VkcILGJYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34151/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24489/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34151/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.11.154/tcp/24490/p2p/16Uiu2HAmHWss6NQ5DVrGUZDXghWvk4tJxEYQX8GR7B5dv7u2Hvic","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24489/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.152.59/tcp/34152/p2p/16Uiu2HAmFaMJw88CYMAnuHYmey5QLxzieDdtgf3U3f2h11oW4Fr7","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34151/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50722/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"c7a3326e3a7b17d84162","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"gWkYrDtRSwhYiy3JHMmS5GEhYWbBQxOHzfce1oGjGTc="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 808b60e991fd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 27c0a3df109f
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 808b60e991fd. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 418f3f90720e
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 27c0a3df109f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.