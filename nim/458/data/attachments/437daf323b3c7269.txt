[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_retrieve_messages_without_subscribing_via_api with id: 2024-11-22_04-21-25__7d63b288-0c7a-47f9-9cbc-ebe57f55d0a4
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-22_04-21-25__7d63b288-0c7a-47f9-9cbc-ebe57f55d0a4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.245.13
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['61733', '61734', '61735', '61736', '61737']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 61733:61733 -p 61734:61734 -p 61735:61735 -p 61736:61736 -p 61737:61737 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61735 --rest-port=61733 --tcp-port=61734 --discv5-udp-port=61736 --rest-address=0.0.0.0 --nat=extip:172.18.245.13 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=8dbd0d98ee0f7ff24f343de7adfd3d09cb37b1d6ffa9eae77d74d834b71df5eb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61737 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container df4e7e249a02. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.245.13 waku ea2f73540fa30618b3375aff2372eea14f6b6f0d010a5bb2ee8d315c7a6ddacf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ea2f73540fa3. Setting up logs at ./log/docker/node1_2024-11-22_04-21-25__7d63b288-0c7a-47f9-9cbc-ebe57f55d0a4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 61733
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61733/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61733/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.245.13/tcp/61734/p2p/16Uiu2HAmDNJyg9q2k7y1EZasKaqDMDCgN8zo3EVSYndDd3LvPc5w","/ip4/172.18.245.13/tcp/61735/ws/p2p/16Uiu2HAmDNJyg9q2k7y1EZasKaqDMDCgN8zo3EVSYndDd3LvPc5w"],"enrUri":"enr:-L24QKEd0GZ5MIJrgjddOgIF7CPsbytAWrmalrq2kdvJkPEsLE9C-Ai2i2KDZkqojgT-ZlZgD22MsmfqWBFZtklQDoUCgmlkgnY0gmlwhKwS9Q2KbXVsdGlhZGRyc5YACASsEvUNBvEmAAoErBL1DQbxJ90DgnJzhQACAQAAiXNlY3AyNTZrMaEDCpXgC6Og2E3k_FAJK39iGxnL486lRPqLXKHinORnEiqDdGNwgvEmg3VkcILxKIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-22_04-21-25__7d63b288-0c7a-47f9-9cbc-ebe57f55d0a4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.255.39
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37307', '37308', '37309', '37310', '37311']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37307:37307 -p 37308:37308 -p 37309:37309 -p 37310:37310 -p 37311:37311 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37309 --rest-port=37307 --tcp-port=37308 --discv5-udp-port=37310 --rest-address=0.0.0.0 --nat=extip:172.18.255.39 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=49694e4ce4a1a8ef03b7dc1cd48b47fbcbee6c5dac406cf22f8b2ff6de2da95f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37311 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QKEd0GZ5MIJrgjddOgIF7CPsbytAWrmalrq2kdvJkPEsLE9C-Ai2i2KDZkqojgT-ZlZgD22MsmfqWBFZtklQDoUCgmlkgnY0gmlwhKwS9Q2KbXVsdGlhZGRyc5YACASsEvUNBvEmAAoErBL1DQbxJ90DgnJzhQACAQAAiXNlY3AyNTZrMaEDCpXgC6Og2E3k_FAJK39iGxnL486lRPqLXKHinORnEiqDdGNwgvEmg3VkcILxKIV3YWt1MgU --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.255.39 waku d82f3e9828df508d93f39d573109d569df6b660d901e24c64fc8f6ab97f0d5a7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d82f3e9828df. Setting up logs at ./log/docker/node2_2024-11-22_04-21-25__7d63b288-0c7a-47f9-9cbc-ebe57f55d0a4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 37307
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37307/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37307/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.255.39/tcp/37308/p2p/16Uiu2HAkxrWoeFeQykyiZz8LJijUXPh4CMBJkfaK92MgA23jk9dw","/ip4/172.18.255.39/tcp/37309/ws/p2p/16Uiu2HAkxrWoeFeQykyiZz8LJijUXPh4CMBJkfaK92MgA23jk9dw"],"enrUri":"enr:-L24QA40f9K4jLu1mjUhHE2IPy_-iqsC8yLy10khJ0z1oCTcMoMkBdSQwxfZoU55bG_E-9qRs7vTe6HIk-eMQpFalR8CgmlkgnY0gmlwhKwS_yeKbXVsdGlhZGRyc5YACASsEv8nBpG8AAoErBL_JwaRvd0DgnJzhQACAQAAiXNlY3AyNTZrMaECMvA08FYzKO9unL46SHX3t7O6iKGN49w8sh8gpD-bHdaDdGNwgpG8g3VkcIKRvoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37307/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.245.13/tcp/61734/p2p/16Uiu2HAmDNJyg9q2k7y1EZasKaqDMDCgN8zo3EVSYndDd3LvPc5w"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61733/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61733/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732249289884075520,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37307/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732249289884075520,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id ea2f73540fa3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id d82f3e9828df
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ea2f73540fa3. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.