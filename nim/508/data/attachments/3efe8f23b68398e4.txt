[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_with_meta with id: 2024-12-09_04-09-46__d0c097c8-d014-4001-8129-80c9e8159572
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-09_04-09-46__d0c097c8-d014-4001-8129-80c9e8159572__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.64.88
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['6864', '6865', '6866', '6867', '6868']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 6864:6864 -p 6865:6865 -p 6866:6866 -p 6867:6867 -p 6868:6868 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6866 --rest-port=6864 --tcp-port=6865 --discv5-udp-port=6867 --rest-address=0.0.0.0 --nat=extip:172.18.64.88 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f78c8cc6760d59d9167ecda14271a6bcac57ae13fecfd1a48c5fcdfd0a5e7e67 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6868 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.64.88 waku e670ed7658b1ed597fe5937c5be0ef041d26582a68d569548cf7715941d3fb19
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e670ed7658b1. Setting up logs at ./log/docker/node1_2024-12-09_04-09-46__d0c097c8-d014-4001-8129-80c9e8159572__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 6864
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 650d8f26da96. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6864/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6864/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.64.88/tcp/6865/p2p/16Uiu2HAkvbfW3vCTQotoiGcFQTXmfHQEXQScvJgxT1nKN1L3DimZ","/ip4/172.18.64.88/tcp/6866/ws/p2p/16Uiu2HAkvbfW3vCTQotoiGcFQTXmfHQEXQScvJgxT1nKN1L3DimZ"],"enrUri":"enr:-L24QKr6ij69sHopU-78yzoVVG658qF3pPAepoaMOr6WrItCMGMaHau9eNUOFVNnU_0T_XC3_PY8KJg8V7P9xbPCZ_4CgmlkgnY0gmlwhKwSQFiKbXVsdGlhZGRyc5YACASsEkBYBhrRAAoErBJAWAYa0t0DgnJzhQADAQAAiXNlY3AyNTZrMaECEWr0RUVpjx5W88r6xehz0XJyxyFSpLR-9AYqTMz8lDyDdGNwghrRg3VkcIIa04V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-09_04-09-46__d0c097c8-d014-4001-8129-80c9e8159572__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.30.114
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['23926', '23927', '23928', '23929', '23930']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 23926:23926 -p 23927:23927 -p 23928:23928 -p 23929:23929 -p 23930:23930 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23928 --rest-port=23926 --tcp-port=23927 --discv5-udp-port=23929 --rest-address=0.0.0.0 --nat=extip:172.18.30.114 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dbdaaf5938fabfadba7b5c1fc712a42eb8fbfdbc2bab26867a662e61594debc7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23930 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QKr6ij69sHopU-78yzoVVG658qF3pPAepoaMOr6WrItCMGMaHau9eNUOFVNnU_0T_XC3_PY8KJg8V7P9xbPCZ_4CgmlkgnY0gmlwhKwSQFiKbXVsdGlhZGRyc5YACASsEkBYBhrRAAoErBJAWAYa0t0DgnJzhQADAQAAiXNlY3AyNTZrMaECEWr0RUVpjx5W88r6xehz0XJyxyFSpLR-9AYqTMz8lDyDdGNwghrRg3VkcIIa04V3YWt1MgU --filternode=/ip4/172.18.64.88/tcp/6865/p2p/16Uiu2HAkvbfW3vCTQotoiGcFQTXmfHQEXQScvJgxT1nKN1L3DimZ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.30.114 waku 7b8d8238d718675f1dba39cb315eb28dc72bc14dada3bfe4e491fa7b956c9024
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7b8d8238d718. Setting up logs at ./log/docker/node2_2024-12-09_04-09-46__d0c097c8-d014-4001-8129-80c9e8159572__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 23926
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23926/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23926/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.30.114/tcp/23927/p2p/16Uiu2HAmB2mU3FNptwMV6SCsVy1jWo7JKYg2BQCSgMQMMPuEq2zq","/ip4/172.18.30.114/tcp/23928/ws/p2p/16Uiu2HAmB2mU3FNptwMV6SCsVy1jWo7JKYg2BQCSgMQMMPuEq2zq"],"enrUri":"enr:-L24QPICb_CEYw_xrN9unNKOWjVDbjOrjaL7GK7dLMdT6b7xWG0MB9vbZp4L-0HxKkA5sZNlKBrRvP0SiiqWCwpA8F8CgmlkgnY0gmlwhKwSHnKKbXVsdGlhZGRyc5YACASsEh5yBl13AAoErBIecgZdeN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC59zWHU5jxkF2D8x4o52WNHqNXqaKiU0062MQkssY7Y6DdGNwgl13g3VkcIJdeYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23926/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.64.88/tcp/6865/p2p/16Uiu2HAkvbfW3vCTQotoiGcFQTXmfHQEXQScvJgxT1nKN1L3DimZ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6864/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23926/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "6d59e8ab-7a53-44b3-8f3e-2218b2cc79a1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"6d59e8ab-7a53-44b3-8f3e-2218b2cc79a1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6864/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "meta": "RmlsdGVyIHdvcmtzISE="}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23926/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1733717389186676992,"meta":"RmlsdGVyIHdvcmtzISE=","ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e670ed7658b1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 7b8d8238d718
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e670ed7658b1. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.