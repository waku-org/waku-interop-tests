[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_only_lightpush with id: 2024-06-17_13-03-45__e1fc83db-2ec9-4ff1-8524-39faca7c69e8
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-06-17_13-03-45__e1fc83db-2ec9-4ff1-8524-39faca7c69e8__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.177.112
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['32424', '32425', '32426', '32427', '32428']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:373 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:120 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 32424:32424 -p 32425:32425 -p 32426:32426 -p 32427:32427 -p 32428:32428 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32426 --rest-port=32424 --tcp-port=32425 --discv5-udp-port=32427 --rest-address=0.0.0.0 --nat=extip:172.18.177.112 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32428 --metrics-logging=true --lightpush=true --relay=false --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.177.112 waku cc5575691afd44348d4c1d8e78dc104dfc376948b1b9c625259af06671ae67dc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID cc5575691afd. Setting up logs at ./log/docker/receiving_node1_2024-06-17_13-03-45__e1fc83db-2ec9-4ff1-8524-39faca7c69e8__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:134 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 32424
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32424/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:225 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32424/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.177.112/tcp/32425/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.177.112/tcp/32426/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QIThd8MIgHpyBkiIKKYa0LdrSoN2oZG8_0DHuEoLIxifGQrVFA-qy4p2MurGDzvEpDYrXoVugeD_x0Uz30dcFHcBgmlkgnY0gmlwhKwSsXCKbXVsdGlhZGRyc4wACgSsErFwBn6q3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCfqmDdWRwgn6rhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:230 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-06-17_13-03-45__e1fc83db-2ec9-4ff1-8524-39faca7c69e8__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.145.190
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['39152', '39153', '39154', '39155', '39156']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:373 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:120 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 39152:39152 -p 39153:39153 -p 39154:39154 -p 39155:39155 -p 39156:39156 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39154 --rest-port=39152 --tcp-port=39153 --discv5-udp-port=39155 --rest-address=0.0.0.0 --nat=extip:172.18.145.190 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39156 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QIThd8MIgHpyBkiIKKYa0LdrSoN2oZG8_0DHuEoLIxifGQrVFA-qy4p2MurGDzvEpDYrXoVugeD_x0Uz30dcFHcBgmlkgnY0gmlwhKwSsXCKbXVsdGlhZGRyc4wACgSsErFwBn6q3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCfqmDdWRwgn6rhXdha3UyCA --lightpushnode=/ip4/172.18.177.112/tcp/32425/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.145.190 waku ceb1d17f3a94b4193aa9a4d27ad6450f3916f607592c6ba7cd3ef0e6da066c9a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID ceb1d17f3a94. Setting up logs at ./log/docker/lightpush_node1_2024-06-17_13-03-45__e1fc83db-2ec9-4ff1-8524-39faca7c69e8__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:134 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 39152
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39152/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:225 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39152/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.145.190/tcp/39153/p2p/16Uiu2HAkwxWdVCey4Ebv8BPgjSj5AgLxFPusRWGrVmT1h6W2bj64","/ip4/172.18.145.190/tcp/39154/ws/p2p/16Uiu2HAkwxWdVCey4Ebv8BPgjSj5AgLxFPusRWGrVmT1h6W2bj64"],"enrUri":"enr:-LO4QAEIMAMVLEamvfSoPYGjJ3X4aINV4W9ZcsAAfZUMgUkWTs8yLit7LzZ8OIvIwiOZQBQOIR53dVqAd2vzyXc6Mk8BgmlkgnY0gmlwhKwSkb6KbXVsdGlhZGRyc4wACgSsEpG-Bpjy3QOCcnOFAAABAACJc2VjcDI1NmsxoQIlnc6Fy4AD9Q9J3ohlPUTrpuM6uE0RCMAOq2o2vg0pzYN0Y3CCmPGDdWRwgpjzhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:230 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39152/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.177.112/tcp/32425/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39152/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/0/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1718629430019021056}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:39152/lightpush/v1/message. Response content: b'Failed to request a message push: no waku relay found'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:181 Stopping container with id cc5575691afd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:188 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:181 Stopping container with id ceb1d17f3a94
[35mDEBUG   [0m src.node.waku_node:waku_node.py:188 Container stopped.