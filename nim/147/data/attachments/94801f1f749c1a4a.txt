[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_2_receiving_nodes__relay_node1_forwards_lightpushed_message_to_relay_node2 with id: 2024-04-14_04-37-22__1c8ac955-fb0e-46bf-acaf-e736332ecf11
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-04-14_04-37-22__1c8ac955-fb0e-46bf-acaf-e736332ecf11__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.191.104
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['12815', '12816', '12817', '12818', '12819']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:297 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 12815:12815 -p 12816:12816 -p 12817:12817 -p 12818:12818 -p 12819:12819 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12817 --rest-port=12815 --tcp-port=12816 --discv5-udp-port=12818 --rest-address=0.0.0.0 --nat=extip:172.18.191.104 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12819 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.191.104 waku a79226c353f4a8799e99c2a96171ce05be784d687bc51546a853ba8f8a31f4ac
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID a79226c353f4. Setting up logs at ./log/docker/receiving_node1_2024-04-14_04-37-22__1c8ac955-fb0e-46bf-acaf-e736332ecf11__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 12815
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12815/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.191.104/tcp/12816/p2p/16Uiu2HAkxXghXWTRmGEhUPQuxgAYuNvu8qx7fBBZqC2xwo8KqSKt","/ip4/172.18.191.104/tcp/12817/ws/p2p/16Uiu2HAkxXghXWTRmGEhUPQuxgAYuNvu8qx7fBBZqC2xwo8KqSKt"],"enrUri":"enr:-LO4QK74_Ix78cfJrAUWv8w_3j2bsHr8UR9QrIYTMiyAxysFKMY4eZl93AW6WwORoMZZ9ylIGDxhIaFGhsr-z2y7VDsBgmlkgnY0gmlwhKwSv2iKbXVsdGlhZGRyc4wACgSsEr9oBjIR3QOCcnOFAAABAACJc2VjcDI1NmsxoQIuHVv1z58gDjzyoyyMZozixLyt8YHJbxVs6gmsPP4KS4N0Y3CCMhCDdWRwgjIShXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-04-14_04-37-22__1c8ac955-fb0e-46bf-acaf-e736332ecf11__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.17.129
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['17625', '17626', '17627', '17628', '17629']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:297 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 17625:17625 -p 17626:17626 -p 17627:17627 -p 17628:17628 -p 17629:17629 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17627 --rest-port=17625 --tcp-port=17626 --discv5-udp-port=17628 --rest-address=0.0.0.0 --nat=extip:172.18.17.129 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17629 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.17.129 waku 7b30d3d9827248dd25c1360cbd2eeff85e24889a8f0af8463a7bc4392b5d2ab6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 7b30d3d98272. Setting up logs at ./log/docker/receiving_node2_2024-04-14_04-37-22__1c8ac955-fb0e-46bf-acaf-e736332ecf11__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 17625
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17625/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.17.129/tcp/17626/p2p/16Uiu2HAmPBy1guHENvELQrUiUAqDh4vr7pyWjmngmTdiP1pXxuFS","/ip4/172.18.17.129/tcp/17627/ws/p2p/16Uiu2HAmPBy1guHENvELQrUiUAqDh4vr7pyWjmngmTdiP1pXxuFS"],"enrUri":"enr:-LO4QLU02zUiq6N5kItP-jDJDXLw2RsN6seFwRdEvkNqrxe6MaM1e0rM5JvdCaD_1_XpNB4wCtaf97LEiIKiLGBzC6UBgmlkgnY0gmlwhKwSEYGKbXVsdGlhZGRyc4wACgSsEhGBBkTb3QOCcnOFAAABAACJc2VjcDI1NmsxoQOchFyMkOXY7klUTLbi19aSfaMZ2xc5qmUwyvtz8yA9bYN0Y3CCRNqDdWRwgkTchXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17625/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.191.104/tcp/12816/p2p/16Uiu2HAkxXghXWTRmGEhUPQuxgAYuNvu8qx7fBBZqC2xwo8KqSKt"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-04-14_04-37-22__1c8ac955-fb0e-46bf-acaf-e736332ecf11__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.136.120
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['32680', '32681', '32682', '32683', '32684']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:297 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 32680:32680 -p 32681:32681 -p 32682:32682 -p 32683:32683 -p 32684:32684 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32682 --rest-port=32680 --tcp-port=32681 --discv5-udp-port=32683 --rest-address=0.0.0.0 --nat=extip:172.18.136.120 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32684 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QK74_Ix78cfJrAUWv8w_3j2bsHr8UR9QrIYTMiyAxysFKMY4eZl93AW6WwORoMZZ9ylIGDxhIaFGhsr-z2y7VDsBgmlkgnY0gmlwhKwSv2iKbXVsdGlhZGRyc4wACgSsEr9oBjIR3QOCcnOFAAABAACJc2VjcDI1NmsxoQIuHVv1z58gDjzyoyyMZozixLyt8YHJbxVs6gmsPP4KS4N0Y3CCMhCDdWRwgjIShXdha3UyCQ --lightpushnode=/ip4/172.18.191.104/tcp/12816/p2p/16Uiu2HAkxXghXWTRmGEhUPQuxgAYuNvu8qx7fBBZqC2xwo8KqSKt --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.136.120 waku 79e7dfa44d44d5572682952e7787c1e2c365f0ca1f114d71405d4ab5f69efeb4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 79e7dfa44d44. Setting up logs at ./log/docker/lightpush_node1_2024-04-14_04-37-22__1c8ac955-fb0e-46bf-acaf-e736332ecf11__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 32680
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32680/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.120/tcp/32681/p2p/16Uiu2HAmGLgd6xB5nDa1CKuWSQc6sWPbyg6Wy6DbMWswP2snuWoD","/ip4/172.18.136.120/tcp/32682/ws/p2p/16Uiu2HAmGLgd6xB5nDa1CKuWSQc6sWPbyg6Wy6DbMWswP2snuWoD"],"enrUri":"enr:-LO4QAbolaK17l54zMb57g8HfkTEy2NRAbtN9_bd3AEsNTelL0qBpEYUWZPSB89TKr0HkRfGQR1L9-UZm6ikTMrukekBgmlkgnY0gmlwhKwSiHiKbXVsdGlhZGRyc4wACgSsEoh4Bn-q3QOCcnOFAAABAACJc2VjcDI1NmsxoQM2vj-uxZ1NqlwnFYA5ExNImoiZa8XchrQwgJTfl3hn_IN0Y3CCf6mDdWRwgn-rhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32680/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.191.104/tcp/12816/p2p/16Uiu2HAkxXghXWTRmGEhUPQuxgAYuNvu8qx7fBBZqC2xwo8KqSKt"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32680/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.17.129/tcp/17626/p2p/16Uiu2HAmPBy1guHENvELQrUiUAqDh4vr7pyWjmngmTdiP1pXxuFS"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12815/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17625/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:127 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32680/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/0/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1713069447811460608}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:131 Checking that peer NODE_1:harbor.status.im/wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12815/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1713069447811460608,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:131 Checking that peer NODE_2:harbor.status.im/wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17625/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1713069447811460608,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id a79226c353f4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id 7b30d3d98272
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id 79e7dfa44d44
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.