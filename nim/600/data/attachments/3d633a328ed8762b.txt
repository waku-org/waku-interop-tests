[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_repeated_filter_requestID with id: 2025-01-02_04-04-55__64971880-35d7-45ae-a809-9ae1141908b5
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-02_04-04-55__64971880-35d7-45ae-a809-9ae1141908b5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-02_04-04-55__64971880-35d7-45ae-a809-9ae1141908b5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-02_04-04-55__64971880-35d7-45ae-a809-9ae1141908b5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:348 Create 3 nodes
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:349 Start 3 nodes with their corresponding config
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.42.92
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['35236', '35237', '35238', '35239', '35240']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 35236:35236 -p 35237:35237 -p 35238:35238 -p 35239:35239 -p 35240:35240 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35238 --rest-port=35236 --tcp-port=35237 --discv5-udp-port=35239 --rest-address=0.0.0.0 --nat=extip:172.18.42.92 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dbb23df17e7c1e9ef3d4d0efc0ff0cffd9a33de2c7cc5507ea22e467d33fec72 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35240 --metrics-logging=true --relay=true --store=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container adfb0dd7423c. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.42.92 waku cd1c468cdc74d9bd31ed031c57ae22ca6ca442f7dbd56050d01f02a3534f7fe9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID cd1c468cdc74. Setting up logs at ./log/docker/node1_2025-01-02_04-04-55__64971880-35d7-45ae-a809-9ae1141908b5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 35236
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35236/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35236/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.42.92/tcp/35237/p2p/16Uiu2HAmJUNfbVnREYpE9LVWrA5t3eQfSsi4KuDEQJjPwxY43Bde","/ip4/172.18.42.92/tcp/35238/ws/p2p/16Uiu2HAmJUNfbVnREYpE9LVWrA5t3eQfSsi4KuDEQJjPwxY43Bde"],"enrUri":"enr:-L24QCmv1iUYAmkpw7wi3DyeiaWZJonVl22OVCKnyXSzFTEmNTbi4tMA7TAx0Wu-TZyyCiuVDmCXZJWkhz1BbIJrugUCgmlkgnY0gmlwhKwSKlyKbXVsdGlhZGRyc5YACASsEipcBomlAAoErBIqXAaJpt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVm33CpW_nqHB21lS5-XFtAtnH6Ykvf8pgo2SXIgY2lWDdGNwgomlg3VkcIKJp4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.202.89
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['47486', '47487', '47488', '47489', '47490']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 47486:47486 -p 47487:47487 -p 47488:47488 -p 47489:47489 -p 47490:47490 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47488 --rest-port=47486 --tcp-port=47487 --discv5-udp-port=47489 --rest-address=0.0.0.0 --nat=extip:172.18.202.89 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f0f1327e16fcdda7f351e7fae1fcfab9aa0efa49a0f2d4bdacbcbbfacedb6af2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47490 --metrics-logging=true --relay=true --store=true --filter=true --discv5-bootstrap-node=enr:-L24QCmv1iUYAmkpw7wi3DyeiaWZJonVl22OVCKnyXSzFTEmNTbi4tMA7TAx0Wu-TZyyCiuVDmCXZJWkhz1BbIJrugUCgmlkgnY0gmlwhKwSKlyKbXVsdGlhZGRyc5YACASsEipcBomlAAoErBIqXAaJpt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVm33CpW_nqHB21lS5-XFtAtnH6Ykvf8pgo2SXIgY2lWDdGNwgomlg3VkcIKJp4V3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.202.89 waku 2b39451c8047c2b1bcac53947cfb802613841cd2f33be6d0709c35d31a76ba68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2b39451c8047. Setting up logs at ./log/docker/node2_2025-01-02_04-04-55__64971880-35d7-45ae-a809-9ae1141908b5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 47486
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47486/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47486/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.202.89/tcp/47487/p2p/16Uiu2HAmSrwUXvQ5UxKWpVYFj3ATX9iiCveK7zafYARWWTay8vVU","/ip4/172.18.202.89/tcp/47488/ws/p2p/16Uiu2HAmSrwUXvQ5UxKWpVYFj3ATX9iiCveK7zafYARWWTay8vVU"],"enrUri":"enr:-L24QNfuRY9rVJx_7n3FUj1rvlznDuXkkF73i7vHznnD4cjGJcp3scs0r18tzoEB0-e2_uzMp800Dl_8Pqrf6smyyc4CgmlkgnY0gmlwhKwSylmKbXVsdGlhZGRyc5YACASsEspZBrl_AAoErBLKWQa5gN0DgnJzhQADAQAAiXNlY3AyNTZrMaED0xNV9kXUoFvuiWS2PsKFBMXxxNMFPyeBhHPX86nOFx-DdGNwgrl_g3VkcIK5gYV3YWt1Mgc"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.55.100
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['16543', '16544', '16545', '16546', '16547']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 16543:16543 -p 16544:16544 -p 16545:16545 -p 16546:16546 -p 16547:16547 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16545 --rest-port=16543 --tcp-port=16544 --discv5-udp-port=16546 --rest-address=0.0.0.0 --nat=extip:172.18.55.100 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e9aaab7a7cfebe21fdcf4e4abba72e0c723507fd0377e4a2bba3c9eff00c3697 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16547 --metrics-logging=true --relay=true --filternode=/ip4/172.18.202.89/tcp/47487/p2p/16Uiu2HAmSrwUXvQ5UxKWpVYFj3ATX9iiCveK7zafYARWWTay8vVU --store=false --pubsub-topic=/waku/2/rs/3/1 --discv5-bootstrap-node=enr:-L24QNfuRY9rVJx_7n3FUj1rvlznDuXkkF73i7vHznnD4cjGJcp3scs0r18tzoEB0-e2_uzMp800Dl_8Pqrf6smyyc4CgmlkgnY0gmlwhKwSylmKbXVsdGlhZGRyc5YACASsEspZBrl_AAoErBLKWQa5gN0DgnJzhQADAQAAiXNlY3AyNTZrMaED0xNV9kXUoFvuiWS2PsKFBMXxxNMFPyeBhHPX86nOFx-DdGNwgrl_g3VkcIK5gYV3YWt1Mgc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.55.100 waku 9acc8d0d5adb12ddf1cfd179cb8c400b0bf22d3fdd11feccb4af2c140bc62f32
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9acc8d0d5adb. Setting up logs at ./log/docker/node3_2025-01-02_04-04-55__64971880-35d7-45ae-a809-9ae1141908b5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 16543
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16543/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16543/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.55.100/tcp/16544/p2p/16Uiu2HAkvhWGWAUtgg586mtHwgbCXP9hDKDGRiwyCjNsh9uAwhFY","/ip4/172.18.55.100/tcp/16545/ws/p2p/16Uiu2HAkvhWGWAUtgg586mtHwgbCXP9hDKDGRiwyCjNsh9uAwhFY"],"enrUri":"enr:-L24QG-sq5paYmA28eP0f-DSdYHWCcAlGEDHHtzhIhGtKcaYV0LVskzg29wXuPg2eRfRhmYH0MExKRgvfPlfly2ftI8CgmlkgnY0gmlwhKwSN2SKbXVsdGlhZGRyc5YACASsEjdkBkCgAAoErBI3ZAZAod0DgnJzhQADAQABiXNlY3AyNTZrMaECEun_pBRoc1HFBBulOdAXK9iXfzPnz-Qg5K93DwGfOWuDdGNwgkCgg3VkcIJAooV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:360 Subscribe nodes to relay  pubsub topics
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35236/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47486/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:364 Wait for all nodes auto connection
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35236/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.202.89/tcp/47487/p2p/16Uiu2HAmSrwUXvQ5UxKWpVYFj3ATX9iiCveK7zafYARWWTay8vVU","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47486/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.42.92/tcp/35237/p2p/16Uiu2HAmJUNfbVnREYpE9LVWrA5t3eQfSsi4KuDEQJjPwxY43Bde","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:368 Node3 subscribe to filter for pubsubtopic  /waku/2/rs/3/1 2 times with same request id
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16543/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16543/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:377 Node1 publish message for topic /waku/2/rs/3/1
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35236/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 5 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16543/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:381 Response for node 3 is []
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16543/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:385 Response for node3 using same request ID is []
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id cd1c468cdc74
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2b39451c8047
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container cd1c468cdc74. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 9acc8d0d5adb
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2b39451c8047. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.