[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_meta with id: 2025-01-02_04-12-14__83c17c02-ed0c-4678-b815-011064cdf414
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-02_04-12-14__83c17c02-ed0c-4678-b815-011064cdf414__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.104.190
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8708', '8709', '8710', '8711', '8712']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8708:8708 -p 8709:8709 -p 8710:8710 -p 8711:8711 -p 8712:8712 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8710 --rest-port=8708 --tcp-port=8709 --discv5-udp-port=8711 --rest-address=0.0.0.0 --nat=extip:172.18.104.190 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=28ed0eb666e2e62114baf5b8da7b3185827bd5c43befb973f62d36a28cb73af5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8712 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.104.190 waku ca6cde4287b266357d8c97d259027cce444d6d3cdcbc856df281dc1de12e138e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ca6cde4287b2. Setting up logs at ./log/docker/receiving_node1_2025-01-02_04-12-14__83c17c02-ed0c-4678-b815-011064cdf414__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 8708
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 69ce96eb72a3. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8708/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8708/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.190/tcp/8709/p2p/16Uiu2HAm48UfhGwGMu47ijtaXTHDzjrZSJHPmHb62xZsbFE3RuE8","/ip4/172.18.104.190/tcp/8710/ws/p2p/16Uiu2HAm48UfhGwGMu47ijtaXTHDzjrZSJHPmHb62xZsbFE3RuE8"],"enrUri":"enr:-L24QOGwVmf55K-LlgP7vg_50YdTm2QFkP2MEeyLRziJfxDfMacbp9utFNBRVOe_SVvqhX9vQsbTlsgfiJWoVbVHxbICgmlkgnY0gmlwhKwSaL6KbXVsdGlhZGRyc5YACASsEmi-BiIFAAoErBJovgYiBt0DgnJzhQADAQAAiXNlY3AyNTZrMaECgVGEnN_rMtERr1w_Jj-bktWFWNGnQXCeZVZrP0ayl8mDdGNwgiIFg3VkcIIiB4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-02_04-12-14__83c17c02-ed0c-4678-b815-011064cdf414__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.135.246
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['3112', '3113', '3114', '3115', '3116']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 3112:3112 -p 3113:3113 -p 3114:3114 -p 3115:3115 -p 3116:3116 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3114 --rest-port=3112 --tcp-port=3113 --discv5-udp-port=3115 --rest-address=0.0.0.0 --nat=extip:172.18.135.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ee661bac6ec5c1cfbceb922ca9ebbddca7ad28afccdac325cf7b4cd4341ff8ca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3116 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.135.246 waku fbaf05ca5316c6f23a6e43ae779dbdf1dc1427e42d9c9a17c5eedb6bcfe1d9d2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fbaf05ca5316. Setting up logs at ./log/docker/receiving_node2_2025-01-02_04-12-14__83c17c02-ed0c-4678-b815-011064cdf414__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 3112
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3112/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3112/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.135.246/tcp/3113/p2p/16Uiu2HAmKz3QwssTCzo8pKsXC1GDLe2dEGs3ZAdHXApeBx5mMDBD","/ip4/172.18.135.246/tcp/3114/ws/p2p/16Uiu2HAmKz3QwssTCzo8pKsXC1GDLe2dEGs3ZAdHXApeBx5mMDBD"],"enrUri":"enr:-L24QCGwIND6cXmh8omIKmDiaFVRpoC22Y-hbASYqyTltnuSSksHhiHskHnznXXtd5bCuN1PUj6LnqM24DxXK9bO8XUCgmlkgnY0gmlwhKwSh_aKbXVsdGlhZGRyc5YACASsEof2BgwpAAoErBKH9gYMKt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDbONOqL-0wX9mXiN5iXDe_XSaCAeCq1FulKXr7ljMgCCDdGNwggwpg3VkcIIMK4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3112/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.104.190/tcp/8709/p2p/16Uiu2HAm48UfhGwGMu47ijtaXTHDzjrZSJHPmHb62xZsbFE3RuE8"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-02_04-12-14__83c17c02-ed0c-4678-b815-011064cdf414__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.172.118
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['41279', '41280', '41281', '41282', '41283']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 41279:41279 -p 41280:41280 -p 41281:41281 -p 41282:41282 -p 41283:41283 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41281 --rest-port=41279 --tcp-port=41280 --discv5-udp-port=41282 --rest-address=0.0.0.0 --nat=extip:172.18.172.118 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0aaca6de5d78cf6beebfd11f89882219ef7e8e2fc47594ab99d4d4db2ca188a7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41283 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QOGwVmf55K-LlgP7vg_50YdTm2QFkP2MEeyLRziJfxDfMacbp9utFNBRVOe_SVvqhX9vQsbTlsgfiJWoVbVHxbICgmlkgnY0gmlwhKwSaL6KbXVsdGlhZGRyc5YACASsEmi-BiIFAAoErBJovgYiBt0DgnJzhQADAQAAiXNlY3AyNTZrMaECgVGEnN_rMtERr1w_Jj-bktWFWNGnQXCeZVZrP0ayl8mDdGNwgiIFg3VkcIIiB4V3YWt1Mgk --lightpushnode=/ip4/172.18.104.190/tcp/8709/p2p/16Uiu2HAm48UfhGwGMu47ijtaXTHDzjrZSJHPmHb62xZsbFE3RuE8 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.172.118 waku 9368da55d8fd4e43323219b3d3c8de0986a23be82d16611be41d15ca447fb77c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9368da55d8fd. Setting up logs at ./log/docker/lightpush_node1_2025-01-02_04-12-14__83c17c02-ed0c-4678-b815-011064cdf414__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 41279
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41279/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41279/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.172.118/tcp/41280/p2p/16Uiu2HAmULYrv3ejBZ8inyV2E6MdLys8S1y1vyRJx39hSFxQ4GtS","/ip4/172.18.172.118/tcp/41281/ws/p2p/16Uiu2HAmULYrv3ejBZ8inyV2E6MdLys8S1y1vyRJx39hSFxQ4GtS"],"enrUri":"enr:-L24QDdas-WnxHt1pI9dAaXJzNveXwkKYslB9WROUjJFQxExQmA49FdH_G6SKlr3p31O3_VqPOizyAhlBSIU9kZl-3ICgmlkgnY0gmlwhKwSrHaKbXVsdGlhZGRyc5YACASsEqx2BqFAAAoErBKsdgahQd0DgnJzhQADAQAAiXNlY3AyNTZrMaED6QG3K7fZXD29ZNSF18Jpuf1F15kwk44WP0hXSMOP9wuDdGNwgqFAg3VkcIKhQoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41279/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.104.190/tcp/8709/p2p/16Uiu2HAm48UfhGwGMu47ijtaXTHDzjrZSJHPmHb62xZsbFE3RuE8"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41279/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.135.246/tcp/3113/p2p/16Uiu2HAmKz3QwssTCzo8pKsXC1GDLe2dEGs3ZAdHXApeBx5mMDBD"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8708/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3112/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41279/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1735791138828869376, "meta": "Light push works!!"}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:41279/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ca6cde4287b2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id fbaf05ca5316
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ca6cde4287b2. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 9368da55d8fd
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fbaf05ca5316. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.