[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_stored_when_ephemeral_false with id: 2025-01-02_04-06-54__f07a447c-2fff-4a87-a7f6-13293cfed02e
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-02_04-06-54__f07a447c-2fff-4a87-a7f6-13293cfed02e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-02_04-06-54__f07a447c-2fff-4a87-a7f6-13293cfed02e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-02_04-06-54__f07a447c-2fff-4a87-a7f6-13293cfed02e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:414 Start 3 nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.145.213
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['34884', '34885', '34886', '34887', '34888']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 34884:34884 -p 34885:34885 -p 34886:34886 -p 34887:34887 -p 34888:34888 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34886 --rest-port=34884 --tcp-port=34885 --discv5-udp-port=34887 --rest-address=0.0.0.0 --nat=extip:172.18.145.213 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b3f26ecd80ce87a5d37a50ddcba0e2cb60ae376703c5cdab9edd723f4c8bd84b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34888 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.145.213 waku 95660afe42d15a056c9883ea73eff1b41902a91f2fd198a726c3478a3853ca07
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 95660afe42d1. Setting up logs at ./log/docker/node1_2025-01-02_04-06-54__f07a447c-2fff-4a87-a7f6-13293cfed02e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 34884
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7e452396f393. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34884/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34884/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.145.213/tcp/34885/p2p/16Uiu2HAm4k1MhM5k6BNjLZ6XzqHQvcFc9LDJqVVaRgRP3xz4XNBp","/ip4/172.18.145.213/tcp/34886/ws/p2p/16Uiu2HAm4k1MhM5k6BNjLZ6XzqHQvcFc9LDJqVVaRgRP3xz4XNBp"],"enrUri":"enr:-L24QNVgdS6cgJSk4XLOUrJcht9jMgqGBmx3k6Shy9NQRN1AD0jV_jAqDsMiZ4DQBdPhNBPhD4dpykEaQJy6vjlnoSQCgmlkgnY0gmlwhKwSkdWKbXVsdGlhZGRyc5YACASsEpHVBohFAAoErBKR1QaIRt0DgnJzhQADAQAAiXNlY3AyNTZrMaECimuMGYATHD9v5lyXDUf4mrJyC3VJAqkO0dXKk_IUfaeDdGNwgohFg3VkcIKIR4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.70.161
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['43067', '43068', '43069', '43070', '43071']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 43067:43067 -p 43068:43068 -p 43069:43069 -p 43070:43070 -p 43071:43071 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43069 --rest-port=43067 --tcp-port=43068 --discv5-udp-port=43070 --rest-address=0.0.0.0 --nat=extip:172.18.70.161 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a29d72529d103d98efcf945154ee8adcc9fcd11b5cd3ecdcd2efdd4948659bad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43071 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QNVgdS6cgJSk4XLOUrJcht9jMgqGBmx3k6Shy9NQRN1AD0jV_jAqDsMiZ4DQBdPhNBPhD4dpykEaQJy6vjlnoSQCgmlkgnY0gmlwhKwSkdWKbXVsdGlhZGRyc5YACASsEpHVBohFAAoErBKR1QaIRt0DgnJzhQADAQAAiXNlY3AyNTZrMaECimuMGYATHD9v5lyXDUf4mrJyC3VJAqkO0dXKk_IUfaeDdGNwgohFg3VkcIKIR4V3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.70.161 waku 19209c393e0e98673c2215c33b8d29c48514442f8110bb34b9a2a4b5e906a0f2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 19209c393e0e. Setting up logs at ./log/docker/node2_2025-01-02_04-06-54__f07a447c-2fff-4a87-a7f6-13293cfed02e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 43067
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43067/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43067/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.70.161/tcp/43068/p2p/16Uiu2HAm8YHLHpNTHU1p1XtKekG1Wqe4xda8DRpdfEEJZuLQbbSH","/ip4/172.18.70.161/tcp/43069/ws/p2p/16Uiu2HAm8YHLHpNTHU1p1XtKekG1Wqe4xda8DRpdfEEJZuLQbbSH"],"enrUri":"enr:-L24QKvvPzmjAdLpdsuh6LWNl-t5JnHdDeQQEIDDU1db_xqVQDw6nKE4Yd2oIjQYKUG8ubyLLM7_AntE8qos500wPlQCgmlkgnY0gmlwhKwSRqGKbXVsdGlhZGRyc5YACASsEkahBqg8AAoErBJGoQaoPd0DgnJzhQADAQAAiXNlY3AyNTZrMaECwtljnQUk94jm96zFXjk1Gs9HwZm0ID3SoVn5009-YSKDdGNwgqg8g3VkcIKoPoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.35.202
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['24335', '24336', '24337', '24338', '24339']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 24335:24335 -p 24336:24336 -p 24337:24337 -p 24338:24338 -p 24339:24339 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24337 --rest-port=24335 --tcp-port=24336 --discv5-udp-port=24338 --rest-address=0.0.0.0 --nat=extip:172.18.35.202 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=caedf77abd1352f37ee4db996ddb68daafec721e62203f5993cd5169feaf5b8d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24339 --metrics-logging=true --relay=false --storenode=/ip4/172.18.70.161/tcp/43068/p2p/16Uiu2HAm8YHLHpNTHU1p1XtKekG1Wqe4xda8DRpdfEEJZuLQbbSH --discv5-bootstrap-node=enr:-L24QKvvPzmjAdLpdsuh6LWNl-t5JnHdDeQQEIDDU1db_xqVQDw6nKE4Yd2oIjQYKUG8ubyLLM7_AntE8qos500wPlQCgmlkgnY0gmlwhKwSRqGKbXVsdGlhZGRyc5YACASsEkahBqg8AAoErBJGoQaoPd0DgnJzhQADAQAAiXNlY3AyNTZrMaECwtljnQUk94jm96zFXjk1Gs9HwZm0ID3SoVn5009-YSKDdGNwgqg8g3VkcIKoPoV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.35.202 waku 1e4de2411b17021918e9041216c804d261fde78745ffe19ebf0626440a01ecf4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1e4de2411b17. Setting up logs at ./log/docker/node3_2025-01-02_04-06-54__f07a447c-2fff-4a87-a7f6-13293cfed02e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 24335
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24335/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24335/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.35.202/tcp/24336/p2p/16Uiu2HAkzRN3Wu2e95cQpwxYgDuzpG2aWmtMoF565t9JPxmccL1q","/ip4/172.18.35.202/tcp/24337/ws/p2p/16Uiu2HAkzRN3Wu2e95cQpwxYgDuzpG2aWmtMoF565t9JPxmccL1q"],"enrUri":"enr:-L24QOV4MVNvbWP1KC9xHpDbm0DpL16KbGXK1mKD--FHWcPHeW1RNSwJojk5WAfYYUr-BG02-qL_OzzMMs9VfdnXHKYCgmlkgnY0gmlwhKwSI8qKbXVsdGlhZGRyc5YACASsEiPKBl8QAAoErBIjygZfEd0DgnJzhQADAQAAiXNlY3AyNTZrMaECSjYnkAzWU_4Ya9hYcmZy0H4851tziBDt9LOz1D9oCcSDdGNwgl8Qg3VkcIJfEoV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:419 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34884/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43067/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34884/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.70.161/tcp/43068/p2p/16Uiu2HAm8YHLHpNTHU1p1XtKekG1Wqe4xda8DRpdfEEJZuLQbbSH","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43067/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.145.213/tcp/34885/p2p/16Uiu2HAm4k1MhM5k6BNjLZ6XzqHQvcFc9LDJqVVaRgRP3xz4XNBp","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:424 Node1 publish message with ephemeral = false
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34884/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:428 Check if message is stored 
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24335/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"4dc25eb4ce6bfe4dc422","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"WB6/RFU1HD2Ps+veBlIP5nNqz7SKNff0fQO33S+Blwo="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 95660afe42d1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 19209c393e0e
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 95660afe42d1. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1e4de2411b17
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 19209c393e0e. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.