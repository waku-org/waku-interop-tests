[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_works_with_auto_sharding with id: 2025-01-02_04-15-19__d5efbe5e-965a-4be7-8d19-27a844748728
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-02_04-15-19__d5efbe5e-965a-4be7-8d19-27a844748728__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.214.133
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['14536', '14537', '14538', '14539', '14540']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 14536:14536 -p 14537:14537 -p 14538:14538 -p 14539:14539 -p 14540:14540 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14538 --rest-port=14536 --tcp-port=14537 --discv5-udp-port=14539 --rest-address=0.0.0.0 --nat=extip:172.18.214.133 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ebd4ce22dd4bcc8ff6edd9cdb566db616620da93ccceceabc2c9bf8e95b4accb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14540 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto --pubsub-topic=/waku/2/rs/2/0 --num-shards-in-network=1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.214.133 waku 5011791bcbce2b8f171081b57f80f923fbcb8c16d13f5204875b0cfb199bbfa6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5011791bcbce. Setting up logs at ./log/docker/node1_2025-01-02_04-15-19__d5efbe5e-965a-4be7-8d19-27a844748728__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 14536
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 84f7bf66d7ad. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14536/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14536/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.214.133/tcp/14537/p2p/16Uiu2HAmUw7fxWSHBMNp537E2g1fRqPZSbx9YSLbEzGJxmoGbUH8","/ip4/172.18.214.133/tcp/14538/ws/p2p/16Uiu2HAmUw7fxWSHBMNp537E2g1fRqPZSbx9YSLbEzGJxmoGbUH8"],"enrUri":"enr:-L24QAW7_EY-Hkt5Zde9WhBEMjYd0wuKd761RYJxTAipdzugCikBYJ4UxYO5-tzvgbD9uchWdhCxL8xOL1YYBZToleYCgmlkgnY0gmlwhKwS1oWKbXVsdGlhZGRyc5YACASsEtaFBjjJAAoErBLWhQY4yt0DgnJzhQACAQAAiXNlY3AyNTZrMaED8dyQB_8nN0zGoK1hsNl3h7YRp7PZRd-PHhQcdMcWvfODdGNwgjjJg3VkcII4y4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-02_04-15-19__d5efbe5e-965a-4be7-8d19-27a844748728__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.246.33
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['3460', '3461', '3462', '3463', '3464']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 3460:3460 -p 3461:3461 -p 3462:3462 -p 3463:3463 -p 3464:3464 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3462 --rest-port=3460 --tcp-port=3461 --discv5-udp-port=3463 --rest-address=0.0.0.0 --nat=extip:172.18.246.33 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=e0cbd4fb304b83c26ab1a3dea8aaaffb7e7c73ae62e397e1bd0eb924fa2c9de8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3464 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QAW7_EY-Hkt5Zde9WhBEMjYd0wuKd761RYJxTAipdzugCikBYJ4UxYO5-tzvgbD9uchWdhCxL8xOL1YYBZToleYCgmlkgnY0gmlwhKwS1oWKbXVsdGlhZGRyc5YACASsEtaFBjjJAAoErBLWhQY4yt0DgnJzhQACAQAAiXNlY3AyNTZrMaED8dyQB_8nN0zGoK1hsNl3h7YRp7PZRd-PHhQcdMcWvfODdGNwgjjJg3VkcII4y4V3YWt1MgU --filternode=/ip4/172.18.214.133/tcp/14537/p2p/16Uiu2HAmUw7fxWSHBMNp537E2g1fRqPZSbx9YSLbEzGJxmoGbUH8 --content-topic=/myapp/1/latest/proto --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.246.33 waku 341975c042721ce696c7d82fc97b30abe6ff9420224d28ba71d1d741c3952813
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 341975c04272. Setting up logs at ./log/docker/node2_2025-01-02_04-15-19__d5efbe5e-965a-4be7-8d19-27a844748728__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 3460
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3460/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3460/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.246.33/tcp/3461/p2p/16Uiu2HAmBFHvoDAeUYJLMdBV6ZCBZcNGqrcyXTciNKg5PbsEfrsc","/ip4/172.18.246.33/tcp/3462/ws/p2p/16Uiu2HAmBFHvoDAeUYJLMdBV6ZCBZcNGqrcyXTciNKg5PbsEfrsc"],"enrUri":"enr:-L24QGciAhWnHrNsnGHRxV69rPINJxambYhDhZmRF77X3GPpY4ISB5K0U5zAXRBku2_5nrNS3w2Bx3TdhkwEUwEWDyACgmlkgnY0gmlwhKwS9iGKbXVsdGlhZGRyc5YACASsEvYhBg2FAAoErBL2IQYNht0DgnJzhQACAQAAiXNlY3AyNTZrMaEC6xI_tFLju85bi2tlwPKO4wzXNhQhKAnQrX4NZC8biduDdGNwgg2Fg3VkcIINh4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3460/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.214.133/tcp/14537/p2p/16Uiu2HAmUw7fxWSHBMNp537E2g1fRqPZSbx9YSLbEzGJxmoGbUH8"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14536/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3460/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "d5b8fda8-7b33-4423-8bf7-efdbd28b3c93", "contentFilters": ["/myapp/1/latest/proto"], "pubsubTopic": "/waku/2/rs/2/0"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"d5b8fda8-7b33-4423-8bf7-efdbd28b3c93","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14536/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:186 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3460/filter/v2/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735791321999670784,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5011791bcbce
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 341975c04272
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5011791bcbce. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.