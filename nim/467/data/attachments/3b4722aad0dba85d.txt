[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-11-27_15-10-54__bf791b8b-165e-445e-aaa7-0a17b959f269
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-27_15-10-54__bf791b8b-165e-445e-aaa7-0a17b959f269__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.50.130
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['14532', '14533', '14534', '14535', '14536']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 14532:14532 -p 14533:14533 -p 14534:14534 -p 14535:14535 -p 14536:14536 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14534 --rest-port=14532 --tcp-port=14533 --discv5-udp-port=14535 --rest-address=0.0.0.0 --nat=extip:172.18.50.130 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6341636a38bdc9e1eb6ea1fb6755ddda112c5fbabafc4b9cffadc4d86b55db61 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14536 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.50.130 waku 62e4b42c6c305f23bb871f948685f1b073fe0fad86629e81934f49286d31139f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 62e4b42c6c30. Setting up logs at ./log/docker/receiving_node1_2024-11-27_15-10-54__bf791b8b-165e-445e-aaa7-0a17b959f269__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 14532
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container eeadc8c1df80. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14532/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14532/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.50.130/tcp/14533/p2p/16Uiu2HAm3P2A2awvNZMU6hsikMuZgQfAhEcW4jMJkYNt4bAe5V93","/ip4/172.18.50.130/tcp/14534/ws/p2p/16Uiu2HAm3P2A2awvNZMU6hsikMuZgQfAhEcW4jMJkYNt4bAe5V93"],"enrUri":"enr:-L24QKLsEC2mc7dJ8rsFViKew_mlZ6P61E322MqENmr8m5fiUoA_uRFGktmfkUAufguOY6kyR540TehsTjaHK8jvwEwCgmlkgnY0gmlwhKwSMoKKbXVsdGlhZGRyc5YACASsEjKCBjjFAAoErBIyggY4xt0DgnJzhQADAQAAiXNlY3AyNTZrMaECdi-RC01pJpUX9gpRw5LtvYaBUfiRTdfM9QbkY9qsjVKDdGNwgjjFg3VkcII4x4V3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-27_15-10-54__bf791b8b-165e-445e-aaa7-0a17b959f269__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.212.96
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['28802', '28803', '28804', '28805', '28806']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 28802:28802 -p 28803:28803 -p 28804:28804 -p 28805:28805 -p 28806:28806 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28804 --rest-port=28802 --tcp-port=28803 --discv5-udp-port=28805 --rest-address=0.0.0.0 --nat=extip:172.18.212.96 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d1eaea19afc4e9d5ef4aaac6d09716bcb2d2a1bb142baf122db0e149b97dab0a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28806 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.212.96 waku 1471c43d8fa474196f35657248072c8f55ca2bc2727b728c96d3c8ffd352c0ba
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1471c43d8fa4. Setting up logs at ./log/docker/receiving_node2_2024-11-27_15-10-54__bf791b8b-165e-445e-aaa7-0a17b959f269__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 28802
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28802/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28802/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.212.96/tcp/28803/p2p/16Uiu2HAkxTnjneKqysVJtsEXRwUmonqdUwG4rzkSEfaNHQUSMG34","/ip4/172.18.212.96/tcp/28804/ws/p2p/16Uiu2HAkxTnjneKqysVJtsEXRwUmonqdUwG4rzkSEfaNHQUSMG34"],"enrUri":"enr:-L24QPFu77g7ST7Kjx_Ove7grTt01gBbehWG7bUaQqYa-7syciVSf4nU1Hz64XFcLHcTfS1hwmL63m6R1KcUjU-oTLICgmlkgnY0gmlwhKwS1GCKbXVsdGlhZGRyc5YACASsEtRgBnCDAAoErBLUYAZwhN0DgnJzhQADAQAAiXNlY3AyNTZrMaECLR3dQZYp0VFppNYF4RpJsy9vf_-SJuGL-WIDHZecdeODdGNwgnCDg3VkcIJwhYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28802/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.50.130/tcp/14533/p2p/16Uiu2HAm3P2A2awvNZMU6hsikMuZgQfAhEcW4jMJkYNt4bAe5V93"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-27_15-10-54__bf791b8b-165e-445e-aaa7-0a17b959f269__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.241.69
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['46048', '46049', '46050', '46051', '46052']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 46048:46048 -p 46049:46049 -p 46050:46050 -p 46051:46051 -p 46052:46052 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46050 --rest-port=46048 --tcp-port=46049 --discv5-udp-port=46051 --rest-address=0.0.0.0 --nat=extip:172.18.241.69 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=05d29dd00ceddbfbfc8e2b160411dd57dfbfbc24b58f1e56db3bf4bdf8af565c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46052 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QKLsEC2mc7dJ8rsFViKew_mlZ6P61E322MqENmr8m5fiUoA_uRFGktmfkUAufguOY6kyR540TehsTjaHK8jvwEwCgmlkgnY0gmlwhKwSMoKKbXVsdGlhZGRyc5YACASsEjKCBjjFAAoErBIyggY4xt0DgnJzhQADAQAAiXNlY3AyNTZrMaECdi-RC01pJpUX9gpRw5LtvYaBUfiRTdfM9QbkY9qsjVKDdGNwgjjFg3VkcII4x4V3YWt1Mg0 --lightpushnode=/ip4/172.18.50.130/tcp/14533/p2p/16Uiu2HAm3P2A2awvNZMU6hsikMuZgQfAhEcW4jMJkYNt4bAe5V93 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.241.69 waku 713a762f9494c985379f74f3a09975b8b567eb5e44fe99ade02b34bac2bac2b6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 713a762f9494. Setting up logs at ./log/docker/lightpush_node1_2024-11-27_15-10-54__bf791b8b-165e-445e-aaa7-0a17b959f269__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 46048
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46048/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46048/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.241.69/tcp/46049/p2p/16Uiu2HAm7JJCrQsHnsJ3WPrnupyKxbCrkvSM9RWjV2yUjKoyFHqr","/ip4/172.18.241.69/tcp/46050/ws/p2p/16Uiu2HAm7JJCrQsHnsJ3WPrnupyKxbCrkvSM9RWjV2yUjKoyFHqr"],"enrUri":"enr:-L24QNQF8jRti52RiiXmW39MNEJ-9OYRR3dk5Su7QtmkwKgQNwbwGzWuvmm6pF4iVGZiZRW6UdhkAA8W1HCiKevmGC8CgmlkgnY0gmlwhKwS8UWKbXVsdGlhZGRyc5YACASsEvFFBrPhAAoErBLxRQaz4t0DgnJzhQADAQAAiXNlY3AyNTZrMaECsGiOetBNQI8m7coXyU-Khgp-aNVIji9nj8z91CUkIkGDdGNwgrPhg3VkcIKz44V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46048/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.50.130/tcp/14533/p2p/16Uiu2HAm3P2A2awvNZMU6hsikMuZgQfAhEcW4jMJkYNt4bAe5V93"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46048/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.212.96/tcp/28803/p2p/16Uiu2HAkxTnjneKqysVJtsEXRwUmonqdUwG4rzkSEfaNHQUSMG34"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14532/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28802/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46048/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1732720259227951872}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14532/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732720259227951872,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28802/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732720259227951872,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 62e4b42c6c30
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1471c43d8fa4
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 62e4b42c6c30. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 713a762f9494
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1471c43d8fa4. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.