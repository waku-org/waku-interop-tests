[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_with_meta with id: 2024-09-20_04-13-58__04d74f1f-b5cd-495a-a8fb-34ad4c6c3556
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-20_04-13-58__04d74f1f-b5cd-495a-a8fb-34ad4c6c3556__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.235.202
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['13528', '13529', '13530', '13531', '13532']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 13528:13528 -p 13529:13529 -p 13530:13530 -p 13531:13531 -p 13532:13532 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13530 --rest-port=13528 --tcp-port=13529 --discv5-udp-port=13531 --rest-address=0.0.0.0 --nat=extip:172.18.235.202 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=be3c134cf9aecba5ec6c0d59e4491afd725f3ce8cf9199d206d4d4e0fbdfc8c3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13532 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.235.202 waku e15e97be0b16996342561e6794fcf674698600d9c4dbc87bcd5805b21da39423
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e15e97be0b16. Setting up logs at ./log/docker/node1_2024-09-20_04-13-58__04d74f1f-b5cd-495a-a8fb-34ad4c6c3556__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 13528
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13528/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13528/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.235.202/tcp/13529/p2p/16Uiu2HAmShaKCVkYcBwuNhpovnGJkPHBsmBHU8b6EQVvT9ncyrvs","/ip4/172.18.235.202/tcp/13530/ws/p2p/16Uiu2HAmShaKCVkYcBwuNhpovnGJkPHBsmBHU8b6EQVvT9ncyrvs"],"enrUri":"enr:-LO4QPNtchLx62LG77b88Eg5YYA2BatAzjNfh5f6oYRcQGvAa_i68b5DcD35SCu2j1dtpqWRghdFruHMEAxh7U0OX08BgmlkgnY0gmlwhKwS68qKbXVsdGlhZGRyc4wACgSsEuvKBjTa3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPQrS6HE4mK3gBXjj_5O1yqW52rWHKzuR50ZxDWd0MjKIN0Y3CCNNmDdWRwgjTbhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-20_04-13-58__04d74f1f-b5cd-495a-a8fb-34ad4c6c3556__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.61.75
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['39035', '39036', '39037', '39038', '39039']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 39035:39035 -p 39036:39036 -p 39037:39037 -p 39038:39038 -p 39039:39039 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39037 --rest-port=39035 --tcp-port=39036 --discv5-udp-port=39038 --rest-address=0.0.0.0 --nat=extip:172.18.61.75 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b18b18fa31653befd7f5f9b8a7fb5d343b56eb0c00d1ce1becb3d8998acd2ec2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39039 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QPNtchLx62LG77b88Eg5YYA2BatAzjNfh5f6oYRcQGvAa_i68b5DcD35SCu2j1dtpqWRghdFruHMEAxh7U0OX08BgmlkgnY0gmlwhKwS68qKbXVsdGlhZGRyc4wACgSsEuvKBjTa3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPQrS6HE4mK3gBXjj_5O1yqW52rWHKzuR50ZxDWd0MjKIN0Y3CCNNmDdWRwgjTbhXdha3UyBQ --filternode=/ip4/172.18.235.202/tcp/13529/p2p/16Uiu2HAmShaKCVkYcBwuNhpovnGJkPHBsmBHU8b6EQVvT9ncyrvs
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.61.75 waku 3846b1338a61279a023f82494c3c818872fa35dc3ad700d4122579ea6e115776
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3846b1338a61. Setting up logs at ./log/docker/node2_2024-09-20_04-13-58__04d74f1f-b5cd-495a-a8fb-34ad4c6c3556__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 39035
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39035/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39035/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.61.75/tcp/39036/p2p/16Uiu2HAm3KgkATPjKJgkcL8ghTrVPjadYdFZ5qE1sH9WCixUBB75","/ip4/172.18.61.75/tcp/39037/ws/p2p/16Uiu2HAm3KgkATPjKJgkcL8ghTrVPjadYdFZ5qE1sH9WCixUBB75"],"enrUri":"enr:-LO4QII8M9OogJXRodQQAh9n7l2hWuMuJ5JPjVhD-wNjBSqGXYWDgVufa2NY_X7m-LfuZmf9O1D2JudUKgkDBYwaRfgBgmlkgnY0gmlwhKwSPUuKbXVsdGlhZGRyc4wACgSsEj1LBph93QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ1VOAkGQ2X6yp5RMqMHqAOMr2ulqBcPbHY0rHxZ7fBKIN0Y3CCmHyDdWRwgph-hXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39035/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.235.202/tcp/13529/p2p/16Uiu2HAmShaKCVkYcBwuNhpovnGJkPHBsmBHU8b6EQVvT9ncyrvs"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13528/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39035/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "24afa867-ed60-4dff-8d33-9523d17b9096", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"24afa867-ed60-4dff-8d33-9523d17b9096","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13528/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "meta": "RmlsdGVyIHdvcmtzISE="}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39035/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1726805641884679168,"meta":"RmlsdGVyIHdvcmtzISE=","ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e15e97be0b16
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3846b1338a61
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.