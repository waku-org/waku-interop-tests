[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_only_relay with id: 2024-10-07_04-20-41__e565990e-0273-4685-9c88-d665e487b8da
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-07_04-20-41__e565990e-0273-4685-9c88-d665e487b8da__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.123.40
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['20244', '20245', '20246', '20247', '20248']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 20244:20244 -p 20245:20245 -p 20246:20246 -p 20247:20247 -p 20248:20248 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20246 --rest-port=20244 --tcp-port=20245 --discv5-udp-port=20247 --rest-address=0.0.0.0 --nat=extip:172.18.123.40 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=68058a4129d3b5b0f7ce58596b9dcfb42ac06abadc1489d698bc67b44b7ee94e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20248 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.123.40 waku e7c1c054b188cbca65b17016e360385ad22c2d4486299d80bdf01e403ae8e12b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e7c1c054b188. Setting up logs at ./log/docker/receiving_node1_2024-10-07_04-20-41__e565990e-0273-4685-9c88-d665e487b8da__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 20244
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20244/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20244/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.123.40/tcp/20245/p2p/16Uiu2HAmJyygEURjZqsGKN2WrGTDDSEVRWKa3wVphpTgvxk6zDdb","/ip4/172.18.123.40/tcp/20246/ws/p2p/16Uiu2HAmJyygEURjZqsGKN2WrGTDDSEVRWKa3wVphpTgvxk6zDdb"],"enrUri":"enr:-LO4QLUE7VBoeyubCvDQG1O-l179jNdJNYBNC5rhBaLuqzbPOubVYYzZPjh31lM4pHwe6Z2JfwPJy9A80bYNVuLk1NIBgmlkgnY0gmlwhKwSeyiKbXVsdGlhZGRyc4wACgSsEnsoBk8W3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNeA2VBASNWLL0LZXsrDpyk8V3ZLsobgJu2S-xvbs53UoN0Y3CCTxWDdWRwgk8XhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20244/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-07_04-20-41__e565990e-0273-4685-9c88-d665e487b8da__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.135.113
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['38546', '38547', '38548', '38549', '38550']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 38546:38546 -p 38547:38547 -p 38548:38548 -p 38549:38549 -p 38550:38550 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38548 --rest-port=38546 --tcp-port=38547 --discv5-udp-port=38549 --rest-address=0.0.0.0 --nat=extip:172.18.135.113 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a74bbdb13bcfee84babc62285dcadec7d992abe077a7946bca5dcd0886aadabb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38550 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QLUE7VBoeyubCvDQG1O-l179jNdJNYBNC5rhBaLuqzbPOubVYYzZPjh31lM4pHwe6Z2JfwPJy9A80bYNVuLk1NIBgmlkgnY0gmlwhKwSeyiKbXVsdGlhZGRyc4wACgSsEnsoBk8W3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNeA2VBASNWLL0LZXsrDpyk8V3ZLsobgJu2S-xvbs53UoN0Y3CCTxWDdWRwgk8XhXdha3UyAQ --lightpushnode=/ip4/172.18.123.40/tcp/20245/p2p/16Uiu2HAmJyygEURjZqsGKN2WrGTDDSEVRWKa3wVphpTgvxk6zDdb --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.135.113 waku 8a8a3d39d809ba1a2e69d3929dde2a6326bbd5fab5299c9e8c3a195b1263beff
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 8a8a3d39d809. Setting up logs at ./log/docker/lightpush_node1_2024-10-07_04-20-41__e565990e-0273-4685-9c88-d665e487b8da__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 38546
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38546/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38546/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.135.113/tcp/38547/p2p/16Uiu2HAm3ep6GvRL2tVAf4DLfxjcpAYYiM3srz5JDUVAnFTfUkNm","/ip4/172.18.135.113/tcp/38548/ws/p2p/16Uiu2HAm3ep6GvRL2tVAf4DLfxjcpAYYiM3srz5JDUVAnFTfUkNm"],"enrUri":"enr:-LO4QMPrxLQ8ooRYo_ns8DVONPlWd5nT05I359laIV5aqN46ByGFSJwdmc8bhgKbAOX_4gShgQxDr602pfcPILWCyegBgmlkgnY0gmlwhKwSh3GKbXVsdGlhZGRyc4wACgSsEodxBpaU3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ6OzfJlEhlEUe3WBDf-XWJVh77QY6cQDGdFIvSufRL0oN0Y3CClpODdWRwgpaVhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38546/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.123.40/tcp/20245/p2p/16Uiu2HAmJyygEURjZqsGKN2WrGTDDSEVRWKa3wVphpTgvxk6zDdb"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38546/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728274844962473472}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:38546/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e7c1c054b188
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 8a8a3d39d809
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.