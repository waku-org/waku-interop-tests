[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_with_extra_field with id: 2024-10-07_04-17-56__b2c43414-0f11-4c8a-b554-1bd34dcb1c7f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-07_04-17-56__b2c43414-0f11-4c8a-b554-1bd34dcb1c7f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.90.208
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['29266', '29267', '29268', '29269', '29270']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 29266:29266 -p 29267:29267 -p 29268:29268 -p 29269:29269 -p 29270:29270 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29268 --rest-port=29266 --tcp-port=29267 --discv5-udp-port=29269 --rest-address=0.0.0.0 --nat=extip:172.18.90.208 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3bd2f74ac1ac483eb2becd2fa99f34d3b3e7dba6da19204375a0b3ca496b3bb8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29270 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.90.208 waku 72e63b1bcf5c0a018008ad2c4001d1fcd6e8039f300a4aa2cac2bb7c205a8f55
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 72e63b1bcf5c. Setting up logs at ./log/docker/node1_2024-10-07_04-17-56__b2c43414-0f11-4c8a-b554-1bd34dcb1c7f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 29266
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29266/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29266/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.90.208/tcp/29267/p2p/16Uiu2HAmV1dnngq7AAPnxmMjs2C8axChPie7Ti7MACmAvwdE3NSN","/ip4/172.18.90.208/tcp/29268/ws/p2p/16Uiu2HAmV1dnngq7AAPnxmMjs2C8axChPie7Ti7MACmAvwdE3NSN"],"enrUri":"enr:-LO4QPOGB83BCTXzCO8zABq6t5BZcerAm5b4wpdVqs6ShLgVDI7MmhgHVFDLy1hnoSL6WlpYh2jJhn2ILz_8FSFfT6EBgmlkgnY0gmlwhKwSWtCKbXVsdGlhZGRyc4wACgSsElrQBnJU3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPzBPCsV6FBeXXUiH5Wg3rIGxPNPQKGr24ztcII4MQVU4N0Y3CCclODdWRwgnJVhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-07_04-17-56__b2c43414-0f11-4c8a-b554-1bd34dcb1c7f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.54.75
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['40665', '40666', '40667', '40668', '40669']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 40665:40665 -p 40666:40666 -p 40667:40667 -p 40668:40668 -p 40669:40669 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40667 --rest-port=40665 --tcp-port=40666 --discv5-udp-port=40668 --rest-address=0.0.0.0 --nat=extip:172.18.54.75 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6792f677b9be7ebb5cf181eeeb0aa2f06e0e4a0a0c710ac436eaa5edefbceeda --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40669 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QPOGB83BCTXzCO8zABq6t5BZcerAm5b4wpdVqs6ShLgVDI7MmhgHVFDLy1hnoSL6WlpYh2jJhn2ILz_8FSFfT6EBgmlkgnY0gmlwhKwSWtCKbXVsdGlhZGRyc4wACgSsElrQBnJU3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPzBPCsV6FBeXXUiH5Wg3rIGxPNPQKGr24ztcII4MQVU4N0Y3CCclODdWRwgnJVhXdha3UyBQ --filternode=/ip4/172.18.90.208/tcp/29267/p2p/16Uiu2HAmV1dnngq7AAPnxmMjs2C8axChPie7Ti7MACmAvwdE3NSN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.54.75 waku 306b3e9b9e493ac32538f78d0c898504a3e47796ef7923627d308c1394325988
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 306b3e9b9e49. Setting up logs at ./log/docker/node2_2024-10-07_04-17-56__b2c43414-0f11-4c8a-b554-1bd34dcb1c7f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 40665
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40665/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40665/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.54.75/tcp/40666/p2p/16Uiu2HAmUiDKVgUPzvrCwCEiLFdVA8cbtDmxuD9RuKcr6x3CVha8","/ip4/172.18.54.75/tcp/40667/ws/p2p/16Uiu2HAmUiDKVgUPzvrCwCEiLFdVA8cbtDmxuD9RuKcr6x3CVha8"],"enrUri":"enr:-LO4QP3ldqSXItPAPkhSkB0J-sZ30Rhw-D_5nbaUaK_YmpHkKzNPwOXR-Iohn2tRsMHTRxJ9TOXYbcK7FGPmuTv4bD0BgmlkgnY0gmlwhKwSNkuKbXVsdGlhZGRyc4wACgSsEjZLBp7b3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPujmW8t2ZbwZ8ao36a7i3RtZwokXu3CgejtHrJ_4J_sYN0Y3CCntqDdWRwgp7chXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40665/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.90.208/tcp/29267/p2p/16Uiu2HAmV1dnngq7AAPnxmMjs2C8axChPie7Ti7MACmAvwdE3NSN"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29266/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40665/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "88e2a8c0-e4e7-4167-9be2-06eeb611df84", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"88e2a8c0-e4e7-4167-9be2-06eeb611df84","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:40665/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1", "extraField": "extraValue"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:40665/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 72e63b1bcf5c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 306b3e9b9e49
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.