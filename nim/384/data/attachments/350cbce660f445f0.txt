[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_invalid_request_id with id: 2024-10-07_04-17-18__51b84e7b-245c-4929-b223-187b7d79ba0c
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-07_04-17-18__51b84e7b-245c-4929-b223-187b7d79ba0c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.245.55
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['56464', '56465', '56466', '56467', '56468']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 56464:56464 -p 56465:56465 -p 56466:56466 -p 56467:56467 -p 56468:56468 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56466 --rest-port=56464 --tcp-port=56465 --discv5-udp-port=56467 --rest-address=0.0.0.0 --nat=extip:172.18.245.55 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b219e3fc19686afaff4ab3203e68ae2e7e974d45c37cad2de68c7fbdcd76d3ce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56468 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.245.55 waku 890b591473bb5d9fb4563d4de9a6cabb501952d2d4e9a24d2bfb882b2d9e9ebe
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 890b591473bb. Setting up logs at ./log/docker/node1_2024-10-07_04-17-18__51b84e7b-245c-4929-b223-187b7d79ba0c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 56464
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56464/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56464/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.245.55/tcp/56465/p2p/16Uiu2HAkzeUsWaDcm8bEupUagg6FVRo4F1H6BVu3B4UjNdyWAZ2X","/ip4/172.18.245.55/tcp/56466/ws/p2p/16Uiu2HAkzeUsWaDcm8bEupUagg6FVRo4F1H6BVu3B4UjNdyWAZ2X"],"enrUri":"enr:-LO4QMdOrPUjIiUucDeQdl2fGa-owf7ONxRHv7X8YO8oKP5OMo6ijZXvhzqHbHk-F89g68l_9gnRb0pcaWFIdYS1F8EBgmlkgnY0gmlwhKwS9TeKbXVsdGlhZGRyc4wACgSsEvU3BtyS3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJNkmzIBWvwuOli5VkMR_IUYU_0TlVc3MIlYTbTYNyHkIN0Y3CC3JGDdWRwgtyThXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-07_04-17-18__51b84e7b-245c-4929-b223-187b7d79ba0c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.100.243
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['60527', '60528', '60529', '60530', '60531']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 60527:60527 -p 60528:60528 -p 60529:60529 -p 60530:60530 -p 60531:60531 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60529 --rest-port=60527 --tcp-port=60528 --discv5-udp-port=60530 --rest-address=0.0.0.0 --nat=extip:172.18.100.243 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bb0a214dc63a9b9f9e1617c8ee8b6fa459788d1cef1dd4d4a5eea5cd7c9ae44f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60531 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QMdOrPUjIiUucDeQdl2fGa-owf7ONxRHv7X8YO8oKP5OMo6ijZXvhzqHbHk-F89g68l_9gnRb0pcaWFIdYS1F8EBgmlkgnY0gmlwhKwS9TeKbXVsdGlhZGRyc4wACgSsEvU3BtyS3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJNkmzIBWvwuOli5VkMR_IUYU_0TlVc3MIlYTbTYNyHkIN0Y3CC3JGDdWRwgtyThXdha3UyBQ --filternode=/ip4/172.18.245.55/tcp/56465/p2p/16Uiu2HAkzeUsWaDcm8bEupUagg6FVRo4F1H6BVu3B4UjNdyWAZ2X
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.100.243 waku 2cbda3f05c7f517acf847f72f893d10e29d839ffd514b35ba5e7dcccf97170b0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2cbda3f05c7f. Setting up logs at ./log/docker/node2_2024-10-07_04-17-18__51b84e7b-245c-4929-b223-187b7d79ba0c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 60527
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60527/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60527/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.100.243/tcp/60528/p2p/16Uiu2HAkvRZ1ZW9H5PZbyDSqYT2FDeHTwowidWXknxrbwiowNn7t","/ip4/172.18.100.243/tcp/60529/ws/p2p/16Uiu2HAkvRZ1ZW9H5PZbyDSqYT2FDeHTwowidWXknxrbwiowNn7t"],"enrUri":"enr:-LO4QAlsjCRZSJeexp2ljuANBoDWuVnhabPdyRsnHt5w5HbPJkMc_uyOZfOhTwavTaCIPbpOnj4lrfnsD0O9GIh_pN0BgmlkgnY0gmlwhKwSZPOKbXVsdGlhZGRyc4wACgSsEmTzBuxx3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIO0850Sr_-1-DNN6qw69ViEx73UYKiLjPI2zmVLjjBi4N0Y3CC7HCDdWRwguxyhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60527/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.245.55/tcp/56465/p2p/16Uiu2HAkzeUsWaDcm8bEupUagg6FVRo4F1H6BVu3B4UjNdyWAZ2X"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56464/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60527/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "27963a36-9b9c-484d-a963-7d56365e9ca6", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"27963a36-9b9c-484d-a963-7d56365e9ca6","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:60527/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:60527/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 890b591473bb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2cbda3f05c7f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.