[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_relay_receiving_node_not_connected_directly_to_relaying_node with id: 2024-10-28_04-02-35__2d23a6ef-1ce8-4d1b-b6a4-b7ea68c5ac41
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-28_04-02-35__2d23a6ef-1ce8-4d1b-b6a4-b7ea68c5ac41__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-28_04-02-35__2d23a6ef-1ce8-4d1b-b6a4-b7ea68c5ac41__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-10-28_04-02-35__2d23a6ef-1ce8-4d1b-b6a4-b7ea68c5ac41__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.57.105
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['53794', '53795', '53796', '53797', '53798']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 53794:53794 -p 53795:53795 -p 53796:53796 -p 53797:53797 -p 53798:53798 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53796 --rest-port=53794 --tcp-port=53795 --discv5-udp-port=53797 --rest-address=0.0.0.0 --nat=extip:172.18.57.105 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cea15fc5271ead76f30f4a69dfac78b1510b7058bfdb0ebda0d7c93a10e7b3da --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53798 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.57.105 waku e1c203f435221aeab66a95d77e6d5092a8b5507eb1a822a20ab82fab67999cda
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e1c203f43522. Setting up logs at ./log/docker/node1_2024-10-28_04-02-35__2d23a6ef-1ce8-4d1b-b6a4-b7ea68c5ac41__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 53794
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1016ad5203b7. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53794/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53794/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.57.105/tcp/53795/p2p/16Uiu2HAmJWQe8zMKxQGhHp2XX7yDBHiSi2fYjoFowPADt6AQtKYo","/ip4/172.18.57.105/tcp/53796/ws/p2p/16Uiu2HAmJWQe8zMKxQGhHp2XX7yDBHiSi2fYjoFowPADt6AQtKYo"],"enrUri":"enr:-LO4QNCGNUAOba8eThWxzLNE8SgmgUOUzjoitdFpVqfab5OtJfpvkcw3e5GEVSgIsEZa8mTno9qlcWH0Wwyf6CFd65wBgmlkgnY0gmlwhKwSOWmKbXVsdGlhZGRyc4wACgSsEjlpBtIk3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNW81wQdGYPZHzNhLqprn3ia4ROHfrUmph2WOkxr59thIN0Y3CC0iODdWRwgtIlhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.230.35
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['13965', '13966', '13967', '13968', '13969']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 13965:13965 -p 13966:13966 -p 13967:13967 -p 13968:13968 -p 13969:13969 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13967 --rest-port=13965 --tcp-port=13966 --discv5-udp-port=13968 --rest-address=0.0.0.0 --nat=extip:172.18.230.35 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d5dfb81abd8d01c28f44509accd425891ba3ddee51fe8cce56411d43d2a0cebe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13969 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QNCGNUAOba8eThWxzLNE8SgmgUOUzjoitdFpVqfab5OtJfpvkcw3e5GEVSgIsEZa8mTno9qlcWH0Wwyf6CFd65wBgmlkgnY0gmlwhKwSOWmKbXVsdGlhZGRyc4wACgSsEjlpBtIk3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNW81wQdGYPZHzNhLqprn3ia4ROHfrUmph2WOkxr59thIN0Y3CC0iODdWRwgtIlhXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.230.35 waku bc9cde61cb4ea82b083dbd09ed9d13fdfd611071f3e33c8fb35aeb093a173f1b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID bc9cde61cb4e. Setting up logs at ./log/docker/node2_2024-10-28_04-02-35__2d23a6ef-1ce8-4d1b-b6a4-b7ea68c5ac41__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 13965
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13965/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13965/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.230.35/tcp/13966/p2p/16Uiu2HAmF9xETqC8ug5QiFiXrzn7W5ddBva436G9BWJ4nvDZx4Sf","/ip4/172.18.230.35/tcp/13967/ws/p2p/16Uiu2HAmF9xETqC8ug5QiFiXrzn7W5ddBva436G9BWJ4nvDZx4Sf"],"enrUri":"enr:-LO4QLnGTPY1TNbY6Uw0OikYyOR7X0ltzfKMXlMglcTLUeVCHJEBvlAFPlG74zAuRCTaR9ZeI4ly32UMfNTZDJIRx4MBgmlkgnY0gmlwhKwS5iOKbXVsdGlhZGRyc4wACgSsEuYjBjaP3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMlItKk1M-n10QzuxAGtxluaMOdOX7lFIHIcbDcmWc2FIN0Y3CCNo6DdWRwgjaQhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.190.24
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['7582', '7583', '7584', '7585', '7586']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 7582:7582 -p 7583:7583 -p 7584:7584 -p 7585:7585 -p 7586:7586 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7584 --rest-port=7582 --tcp-port=7583 --discv5-udp-port=7585 --rest-address=0.0.0.0 --nat=extip:172.18.190.24 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ff84817dd9d04ccd1dd3b6852ce0df9e66de6835d9aed0df8b4ecf9e6f79ced3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7586 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QLnGTPY1TNbY6Uw0OikYyOR7X0ltzfKMXlMglcTLUeVCHJEBvlAFPlG74zAuRCTaR9ZeI4ly32UMfNTZDJIRx4MBgmlkgnY0gmlwhKwS5iOKbXVsdGlhZGRyc4wACgSsEuYjBjaP3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMlItKk1M-n10QzuxAGtxluaMOdOX7lFIHIcbDcmWc2FIN0Y3CCNo6DdWRwgjaQhXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.190.24 waku 03c39aa1bd1ede47b9b276463b1f62b861b4643d5404c72822b3615221d29501
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 03c39aa1bd1e. Setting up logs at ./log/docker/node3_2024-10-28_04-02-35__2d23a6ef-1ce8-4d1b-b6a4-b7ea68c5ac41__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 7582
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7582/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7582/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.190.24/tcp/7583/p2p/16Uiu2HAmDn5AZdgRZjYcofFJHpbVks69XzKF2GjAYRh8vhqZiF7p","/ip4/172.18.190.24/tcp/7584/ws/p2p/16Uiu2HAmDn5AZdgRZjYcofFJHpbVks69XzKF2GjAYRh8vhqZiF7p"],"enrUri":"enr:-LO4QPqpxCXAskrPlNUvzs_G6qFSb9pp9T9EauAtqDkqW4J-RkkY4t6erFdeYlQY-5V_FMaDe9sRDquMF7UGMOTv9QYBgmlkgnY0gmlwhKwSvhiKbXVsdGlhZGRyc4wACgSsEr4YBh2g3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMQrDJuaifiIKmWudpM_JjbqFb5lRzjcbYWkoSf-px_a4N0Y3CCHZ-DdWRwgh2hhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53794/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13965/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7582/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53794/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.230.35/tcp/13966/p2p/16Uiu2HAmF9xETqC8ug5QiFiXrzn7W5ddBva436G9BWJ4nvDZx4Sf","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13965/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.57.105/tcp/53795/p2p/16Uiu2HAmJWQe8zMKxQGhHp2XX7yDBHiSi2fYjoFowPADt6AQtKYo","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.190.24/tcp/7583/p2p/16Uiu2HAmDn5AZdgRZjYcofFJHpbVks69XzKF2GjAYRh8vhqZiF7p","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7582/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.230.35/tcp/13966/p2p/16Uiu2HAmF9xETqC8ug5QiFiXrzn7W5ddBva436G9BWJ4nvDZx4Sf","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53794/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7582/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1730088190179294208,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e1c203f43522
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id bc9cde61cb4e
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e1c203f43522. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 03c39aa1bd1e
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container bc9cde61cb4e. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.