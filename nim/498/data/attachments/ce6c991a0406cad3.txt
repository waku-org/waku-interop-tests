[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_version with id: 2024-12-03_04-15-06__ece24e2b-8837-4681-993f-997b54e0d513
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-03_04-15-06__ece24e2b-8837-4681-993f-997b54e0d513__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.57.46
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['29163', '29164', '29165', '29166', '29167']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 29163:29163 -p 29164:29164 -p 29165:29165 -p 29166:29166 -p 29167:29167 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29165 --rest-port=29163 --tcp-port=29164 --discv5-udp-port=29166 --rest-address=0.0.0.0 --nat=extip:172.18.57.46 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7a9b608fbedcbf854c020e7b72b2ff9e9a57ecd39b1f282dbdedd5f92af681b4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29167 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.57.46 waku 8f0c82e3b7fdc9acb4747537ca6f57de7b127ab4958e271061dcc2272187cda9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8f0c82e3b7fd. Setting up logs at ./log/docker/receiving_node1_2024-12-03_04-15-06__ece24e2b-8837-4681-993f-997b54e0d513__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 29163
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e5ce82c921d7. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29163/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29163/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.57.46/tcp/29164/p2p/16Uiu2HAkwJVKqAZer4A65zi1RwNizKJpzyBLykEC7MwjRnmqyvT6","/ip4/172.18.57.46/tcp/29165/ws/p2p/16Uiu2HAkwJVKqAZer4A65zi1RwNizKJpzyBLykEC7MwjRnmqyvT6"],"enrUri":"enr:-L24QPZms_5k8qUyAd429ced4MmZ8UGet7CRdZkk2bq2M5ViTIqJ61MrR0VL4DC0su5fOcDIcPDsppXmUI9eTEQLj84CgmlkgnY0gmlwhKwSOS6KbXVsdGlhZGRyc5YACASsEjkuBnHsAAoErBI5LgZx7d0DgnJzhQADAQAAiXNlY3AyNTZrMaECG-BC1lMOnC9a5yCEw-zcG6R37Lx9hO6HMowXGQUuTN2DdGNwgnHsg3VkcIJx7oV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-03_04-15-06__ece24e2b-8837-4681-993f-997b54e0d513__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.81.205
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['30871', '30872', '30873', '30874', '30875']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 30871:30871 -p 30872:30872 -p 30873:30873 -p 30874:30874 -p 30875:30875 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30873 --rest-port=30871 --tcp-port=30872 --discv5-udp-port=30874 --rest-address=0.0.0.0 --nat=extip:172.18.81.205 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=966ce1eb10db2b681f3d530f31ef168be345a2a9c25a5bf2e5beb3c4e449e9a9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30875 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.81.205 waku eb127dd836b20e122c1bdf2f49c9bb3a1851b2915b26625bf2179f0cdf7acfe7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID eb127dd836b2. Setting up logs at ./log/docker/receiving_node2_2024-12-03_04-15-06__ece24e2b-8837-4681-993f-997b54e0d513__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 30871
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30871/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30871/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.81.205/tcp/30872/p2p/16Uiu2HAmCcr3PYhE4cfs9cFRKAWjPi5H66P1UvXn3QcS4Jyy8FJP","/ip4/172.18.81.205/tcp/30873/ws/p2p/16Uiu2HAmCcr3PYhE4cfs9cFRKAWjPi5H66P1UvXn3QcS4Jyy8FJP"],"enrUri":"enr:-L24QF97QOzR7TtfgmsbORriKzyM1Qm44JOYOgMXfn4qyQkOPB8pKOzYOTti30s5f17kuyM3YPiaw26abXS3TvyyGSUCgmlkgnY0gmlwhKwSUc2KbXVsdGlhZGRyc5YACASsElHNBniYAAoErBJRzQZ4md0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_3NxnBiyJe-zTwTALOH4DlN2KYTwJP8YuZEUFGyfdkCDdGNwgniYg3VkcIJ4moV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30871/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.57.46/tcp/29164/p2p/16Uiu2HAkwJVKqAZer4A65zi1RwNizKJpzyBLykEC7MwjRnmqyvT6"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-03_04-15-06__ece24e2b-8837-4681-993f-997b54e0d513__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.171.166
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['53542', '53543', '53544', '53545', '53546']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 53542:53542 -p 53543:53543 -p 53544:53544 -p 53545:53545 -p 53546:53546 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53544 --rest-port=53542 --tcp-port=53543 --discv5-udp-port=53545 --rest-address=0.0.0.0 --nat=extip:172.18.171.166 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=10cb3efeb39fbfde814969674e5a469d2ae5f1c425e357a1c47d49f55e2ee62a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53546 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QPZms_5k8qUyAd429ced4MmZ8UGet7CRdZkk2bq2M5ViTIqJ61MrR0VL4DC0su5fOcDIcPDsppXmUI9eTEQLj84CgmlkgnY0gmlwhKwSOS6KbXVsdGlhZGRyc5YACASsEjkuBnHsAAoErBI5LgZx7d0DgnJzhQADAQAAiXNlY3AyNTZrMaECG-BC1lMOnC9a5yCEw-zcG6R37Lx9hO6HMowXGQUuTN2DdGNwgnHsg3VkcIJx7oV3YWt1Mgk --lightpushnode=/ip4/172.18.57.46/tcp/29164/p2p/16Uiu2HAkwJVKqAZer4A65zi1RwNizKJpzyBLykEC7MwjRnmqyvT6 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.171.166 waku 9986e45f9db9251495d25967e20ef526b178dda0ce8a02b186ed32b7e2343dbd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9986e45f9db9. Setting up logs at ./log/docker/lightpush_node1_2024-12-03_04-15-06__ece24e2b-8837-4681-993f-997b54e0d513__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 53542
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53542/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53542/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.171.166/tcp/53543/p2p/16Uiu2HAkzih5pTVnxA5NexdE3BCLsTtim4vSaTVdoPC149UwihhM","/ip4/172.18.171.166/tcp/53544/ws/p2p/16Uiu2HAkzih5pTVnxA5NexdE3BCLsTtim4vSaTVdoPC149UwihhM"],"enrUri":"enr:-L24QNytMtuE4j_efQaVW5nC7HXWyfos0Kn_ZFZttMBfU6t4Ob7qA2JYmbxgcjccGZC0IvR8xKh1nXA9cI-F3k5Z4LICgmlkgnY0gmlwhKwSq6aKbXVsdGlhZGRyc5YACASsEqumBtEnAAoErBKrpgbRKN0DgnJzhQADAQAAiXNlY3AyNTZrMaECTqaOenyrv9LupCIVx36TPFC2hypAAQjnyjeO7J0Ax-yDdGNwgtEng3VkcILRKYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53542/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.57.46/tcp/29164/p2p/16Uiu2HAkwJVKqAZer4A65zi1RwNizKJpzyBLykEC7MwjRnmqyvT6"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53542/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.81.205/tcp/30872/p2p/16Uiu2HAmCcr3PYhE4cfs9cFRKAWjPi5H66P1UvXn3QcS4Jyy8FJP"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29163/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30871/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53542/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733199311198818304, "version": 10}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29163/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1733199311198818304,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30871/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1733199311198818304,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 8f0c82e3b7fd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id eb127dd836b2
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 8f0c82e3b7fd. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 9986e45f9db9
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container eb127dd836b2. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.