[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_cant_retrieve_messages_on_not_subscribed_content_topic with id: 2024-08-26_15-07-09__b9f20a43-2da5-4328-a06c-65db8fbaebe8
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-26_15-07-09__b9f20a43-2da5-4328-a06c-65db8fbaebe8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.118.52
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['4797', '4798', '4799', '4800', '4801']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 4797:4797 -p 4798:4798 -p 4799:4799 -p 4800:4800 -p 4801:4801 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4799 --rest-port=4797 --tcp-port=4798 --discv5-udp-port=4800 --rest-address=0.0.0.0 --nat=extip:172.18.118.52 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=fb616ec19ff163d268dd1917f0ac43e32cf1bebfcb1cc05fbe6d9fd9b1da6dec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4801 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.118.52 waku 3bdad9e49bcf51fe8264cce2caf5ebb8bf70c3ea76179557d43764ccf4c832cd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3bdad9e49bcf. Setting up logs at ./log/docker/node1_2024-08-26_15-07-09__b9f20a43-2da5-4328-a06c-65db8fbaebe8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 4797
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4797/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4797/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.118.52/tcp/4798/p2p/16Uiu2HAmRLJCyF14BRQtbbKnokbTPRhWNHsyKiWSx1XY9hXD3ywa","/ip4/172.18.118.52/tcp/4799/ws/p2p/16Uiu2HAmRLJCyF14BRQtbbKnokbTPRhWNHsyKiWSx1XY9hXD3ywa"],"enrUri":"enr:-LO4QDYeegpj6mljyoTaQgQD-oc--wUWbcBiI381xD3Tw7oIM31dQ3kPVy8YeDngsZXpPCf9SUFEDW7AwaUNbgBkkI4BgmlkgnY0gmlwhKwSdjSKbXVsdGlhZGRyc4wACgSsEnY0BhK_3QOCcnOFAAIBAACJc2VjcDI1NmsxoQO8XhXMXdkhVHG4enBFPbhBGt25qGuR0VRyqwo6MqbnDYN0Y3CCEr6DdWRwghLAhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-08-26_15-07-09__b9f20a43-2da5-4328-a06c-65db8fbaebe8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.240.132
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['49207', '49208', '49209', '49210', '49211']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 49207:49207 -p 49208:49208 -p 49209:49209 -p 49210:49210 -p 49211:49211 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49209 --rest-port=49207 --tcp-port=49208 --discv5-udp-port=49210 --rest-address=0.0.0.0 --nat=extip:172.18.240.132 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=b21a5b9fcd4ca28daeaebe7bd8576f2e78fda697b375c417068c4b2d8a8adfb0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49211 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QDYeegpj6mljyoTaQgQD-oc--wUWbcBiI381xD3Tw7oIM31dQ3kPVy8YeDngsZXpPCf9SUFEDW7AwaUNbgBkkI4BgmlkgnY0gmlwhKwSdjSKbXVsdGlhZGRyc4wACgSsEnY0BhK_3QOCcnOFAAIBAACJc2VjcDI1NmsxoQO8XhXMXdkhVHG4enBFPbhBGt25qGuR0VRyqwo6MqbnDYN0Y3CCEr6DdWRwghLAhXdha3UyBQ --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.240.132 waku 76f5c0954d202edd931f7c4fab11de82ef8615728f4fc59ae1a98639be8f73d2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 76f5c0954d20. Setting up logs at ./log/docker/node2_2024-08-26_15-07-09__b9f20a43-2da5-4328-a06c-65db8fbaebe8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 49207
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49207/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49207/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.240.132/tcp/49208/p2p/16Uiu2HAmSpjkccfHVnHpjaAzxYpcG5LKEfMchS6A8mn5MHq5UymQ","/ip4/172.18.240.132/tcp/49209/ws/p2p/16Uiu2HAmSpjkccfHVnHpjaAzxYpcG5LKEfMchS6A8mn5MHq5UymQ"],"enrUri":"enr:-LO4QCq0F5hlrPLVVtg8fhE7FOP-z9nY1v9z1xnBt18k4PQ9TZlSqFBsU_VYvto9kOKZVCAw3BUBZBJhN1Aw3G04_f4BgmlkgnY0gmlwhKwS8ISKbXVsdGlhZGRyc4wACgSsEvCEBsA53QOCcnOFAAIBAACJc2VjcDI1NmsxoQPSgutSPqGFXpL_KinDv7GQblecGQ1sCWRSKy_S_LjyZ4N0Y3CCwDiDdWRwgsA6hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49207/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.118.52/tcp/4798/p2p/16Uiu2HAmRLJCyF14BRQtbbKnokbTPRhWNHsyKiWSx1XY9hXD3ywa"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4797/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49207/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4797/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4797/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:4797/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto. Response content: b'/toychat/2/huilong/proto'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3bdad9e49bcf
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 76f5c0954d20
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['DBG 2024-08-26 15:07:13.648+00:00 Received error response from handler       tid=1 file=serverprivate.nim:314 status=404 meth=GET peer=172.17.0.1:36072 uri=/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto error_status="404 Not Found" error_content_type=text/plain error_message=/toychat/2/huilong/proto']
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_cant_retrieve_messages_on_not_subscribed_content_topic with id: 2024-08-26_15-07-19__f7361765-386e-402a-815e-261e8a8745ca
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-26_15-07-19__f7361765-386e-402a-815e-261e8a8745ca__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.63.66
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['55097', '55098', '55099', '55100', '55101']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 55097:55097 -p 55098:55098 -p 55099:55099 -p 55100:55100 -p 55101:55101 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55099 --rest-port=55097 --tcp-port=55098 --discv5-udp-port=55100 --rest-address=0.0.0.0 --nat=extip:172.18.63.66 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=a267124c4ef5dcc40eba840d78ca0a8a62e3c4a4bbeeb4dcebc6e7afa1ce3aba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55101 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.63.66 waku a4d1ec35d076384024d4e8cd12253066aad6bee40d0dc8acadf92998921e8e10
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a4d1ec35d076. Setting up logs at ./log/docker/node1_2024-08-26_15-07-19__f7361765-386e-402a-815e-261e8a8745ca__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 55097
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55097/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55097/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.63.66/tcp/55098/p2p/16Uiu2HAmTwofV6UtY64T1PLGKHHvmF5T3456h47HdvSh7fitLnET","/ip4/172.18.63.66/tcp/55099/ws/p2p/16Uiu2HAmTwofV6UtY64T1PLGKHHvmF5T3456h47HdvSh7fitLnET"],"enrUri":"enr:-LO4QHuvmWbOYn2fNW3hb36wOYmkXobtmY-UAeRnBQbqqbTsC5LqaBRE9Csj53NonLR-fMUunIAk92Ht533KoQbYU74BgmlkgnY0gmlwhKwSP0KKbXVsdGlhZGRyc4wACgSsEj9CBtc73QOCcnOFAAIBAACJc2VjcDI1NmsxoQPjLhg5ZfAnsRVJ4GLsWeg3qnleyW2d_SRqylUdnzDGqIN0Y3CC1zqDdWRwgtc8hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-08-26_15-07-19__f7361765-386e-402a-815e-261e8a8745ca__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.252.160
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['38724', '38725', '38726', '38727', '38728']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 38724:38724 -p 38725:38725 -p 38726:38726 -p 38727:38727 -p 38728:38728 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38726 --rest-port=38724 --tcp-port=38725 --discv5-udp-port=38727 --rest-address=0.0.0.0 --nat=extip:172.18.252.160 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=7ea52ca59387b75d7cbca6ce9f634ef6f592ed76b4b3053b0d846ff74bb7db08 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38728 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QHuvmWbOYn2fNW3hb36wOYmkXobtmY-UAeRnBQbqqbTsC5LqaBRE9Csj53NonLR-fMUunIAk92Ht533KoQbYU74BgmlkgnY0gmlwhKwSP0KKbXVsdGlhZGRyc4wACgSsEj9CBtc73QOCcnOFAAIBAACJc2VjcDI1NmsxoQPjLhg5ZfAnsRVJ4GLsWeg3qnleyW2d_SRqylUdnzDGqIN0Y3CC1zqDdWRwgtc8hXdha3UyBQ --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.252.160 waku 87b087680ebd84424197964feb6fb2655285a2c2fce89b61773d705af5c4e5be
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 87b087680ebd. Setting up logs at ./log/docker/node2_2024-08-26_15-07-19__f7361765-386e-402a-815e-261e8a8745ca__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 38724
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38724/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38724/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.252.160/tcp/38725/p2p/16Uiu2HAmDnBE5NN6RznRQDeuTGrfToxFrwKzEwYpeSmC3JsyLrqT","/ip4/172.18.252.160/tcp/38726/ws/p2p/16Uiu2HAmDnBE5NN6RznRQDeuTGrfToxFrwKzEwYpeSmC3JsyLrqT"],"enrUri":"enr:-LO4QCTjk3ftzdidnK4Qm00lFWEQiO2HeSZsdaBrGwvX77B5aRFkPDLKhCxO_HJskZfiGt3CeT0ekPb-MQJEG2--ZTcBgmlkgnY0gmlwhKwS_KCKbXVsdGlhZGRyc4wACgSsEvygBpdG3QOCcnOFAAIBAACJc2VjcDI1NmsxoQMQswy5CLzGcvBNWwH58F4ZCrrbX9pAtblozasGBDJS1oN0Y3CCl0WDdWRwgpdHhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38724/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.63.66/tcp/55098/p2p/16Uiu2HAmTwofV6UtY64T1PLGKHHvmF5T3456h47HdvSh7fitLnET"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55097/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38724/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55097/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55097/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:55097/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto. Response content: b'/toychat/2/huilong/proto'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a4d1ec35d076
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 87b087680ebd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['DBG 2024-08-26 15:07:22.731+00:00 Received error response from handler       tid=1 file=serverprivate.nim:314 status=404 meth=GET peer=172.17.0.1:53748 uri=/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto error_status="404 Not Found" error_content_type=text/plain error_message=/toychat/2/huilong/proto']
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_cant_retrieve_messages_on_not_subscribed_content_topic with id: 2024-08-26_15-07-27__e5f5a299-bdf1-4738-9369-6e613c1ddee7
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-26_15-07-27__e5f5a299-bdf1-4738-9369-6e613c1ddee7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.48.81
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['53624', '53625', '53626', '53627', '53628']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 53624:53624 -p 53625:53625 -p 53626:53626 -p 53627:53627 -p 53628:53628 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53626 --rest-port=53624 --tcp-port=53625 --discv5-udp-port=53627 --rest-address=0.0.0.0 --nat=extip:172.18.48.81 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=75e68ed24fa0cbccce0d8cd9ae7d9b3a3ba94af8c923fae2fe19efad79c1bbd4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53628 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.48.81 waku 76ff19ed48767faf9ce48bedf67e999a69a84a022d92bb66f49b7fc8b1461d0f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 76ff19ed4876. Setting up logs at ./log/docker/node1_2024-08-26_15-07-27__e5f5a299-bdf1-4738-9369-6e613c1ddee7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 53624
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53624/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53624/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.48.81/tcp/53625/p2p/16Uiu2HAkzD8tSk7QoWmK8boHy5Z7e1RfBjKxmHtEeYPWPHFuik7o","/ip4/172.18.48.81/tcp/53626/ws/p2p/16Uiu2HAkzD8tSk7QoWmK8boHy5Z7e1RfBjKxmHtEeYPWPHFuik7o"],"enrUri":"enr:-LO4QNAtqnLdbc50zErH0Xm4QPCB34bIVylK8mpj8nBZehISfOXUR0L_ScCWbYPFNFfHR5AWGqbUlesmNCFU9sMtKBABgmlkgnY0gmlwhKwSMFGKbXVsdGlhZGRyc4wACgSsEjBRBtF63QOCcnOFAAIBAACJc2VjcDI1NmsxoQJHFE8P3d3Hre4eboj299KKTKNQzeQY9I6urX8-8il0_oN0Y3CC0XmDdWRwgtF7hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-08-26_15-07-27__e5f5a299-bdf1-4738-9369-6e613c1ddee7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.126.251
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['3673', '3674', '3675', '3676', '3677']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 3673:3673 -p 3674:3674 -p 3675:3675 -p 3676:3676 -p 3677:3677 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3675 --rest-port=3673 --tcp-port=3674 --discv5-udp-port=3676 --rest-address=0.0.0.0 --nat=extip:172.18.126.251 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=2c477afa4b37c02fd7873bf0f7fd8a2bba17d2f791715d1b820e9c675d0c8dac --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3677 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QNAtqnLdbc50zErH0Xm4QPCB34bIVylK8mpj8nBZehISfOXUR0L_ScCWbYPFNFfHR5AWGqbUlesmNCFU9sMtKBABgmlkgnY0gmlwhKwSMFGKbXVsdGlhZGRyc4wACgSsEjBRBtF63QOCcnOFAAIBAACJc2VjcDI1NmsxoQJHFE8P3d3Hre4eboj299KKTKNQzeQY9I6urX8-8il0_oN0Y3CC0XmDdWRwgtF7hXdha3UyBQ --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.126.251 waku 04c238d9aba901479a14eaece1d1b142ff5cb832331163ff539c91ca664fe830
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 04c238d9aba9. Setting up logs at ./log/docker/node2_2024-08-26_15-07-27__e5f5a299-bdf1-4738-9369-6e613c1ddee7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 3673
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3673/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3673/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.126.251/tcp/3674/p2p/16Uiu2HAm1a4umZiDRVeKY8F1niFubRfxZyW8Bms3e9YJDL2X4kfw","/ip4/172.18.126.251/tcp/3675/ws/p2p/16Uiu2HAm1a4umZiDRVeKY8F1niFubRfxZyW8Bms3e9YJDL2X4kfw"],"enrUri":"enr:-LO4QFnLpUkl1UsS2NmGNc51FkoPkAZCxoKnUyT23JsruLRHYATv2-Vo2N3yf-49K8s-iNOl4d0x36W6CV5nyfMocYUBgmlkgnY0gmlwhKwSfvuKbXVsdGlhZGRyc4wACgSsEn77Bg5b3QOCcnOFAAIBAACJc2VjcDI1NmsxoQJbTLIdRxobLYLZNkWMn1oYpYCGt6BE3S5Ohy0Q3AU9loN0Y3CCDlqDdWRwgg5chXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3673/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.48.81/tcp/53625/p2p/16Uiu2HAkzD8tSk7QoWmK8boHy5Z7e1RfBjKxmHtEeYPWPHFuik7o"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53624/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3673/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53624/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53624/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:53624/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto. Response content: b'/toychat/2/huilong/proto'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 76ff19ed4876
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 04c238d9aba9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['DBG 2024-08-26 15:07:31.117+00:00 Received error response from handler       tid=1 file=serverprivate.nim:314 status=404 meth=GET peer=172.17.0.1:38452 uri=/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto error_status="404 Not Found" error_content_type=text/plain error_message=/toychat/2/huilong/proto']