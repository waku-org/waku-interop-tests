[35mDEBUG   [0m src.postgres_setup:postgres_setup.py:36 Postgres container started
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_on_empty_postgress_db with id: 2024-08-26_15-14-37__57127226-64d0-4033-9b2d-d2101c6879ac
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-08-26_15-14-37__57127226-64d0-4033-9b2d-d2101c6879ac__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.155.88
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['38337', '38338', '38339', '38340', '38341']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 38337:38337 -p 38338:38338 -p 38339:38339 -p 38340:38340 -p 38341:38341 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38339 --rest-port=38337 --tcp-port=38338 --discv5-udp-port=38340 --rest-address=0.0.0.0 --nat=extip:172.18.155.88 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4cecddc43fb416b08f0ab91fa5da6f63f7d70fc0de15c96dd65d9ab29e04a251 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38341 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.155.88 waku 4493a2735380109436d9f3e4ffbf41dce4955d6f06c4a0964685210178029eb2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4493a2735380. Setting up logs at ./log/docker/publishing_node1_2024-08-26_15-14-37__57127226-64d0-4033-9b2d-d2101c6879ac__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 38337
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38337/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Initializing","protocolsHealth":[]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38337/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Initializing","protocolsHealth":[]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38337/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38337/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.155.88/tcp/38338/p2p/16Uiu2HAkveywzdnXPpRbo3scqjCEskAFS1uBZa1CBkHXrdQtq32A","/ip4/172.18.155.88/tcp/38339/ws/p2p/16Uiu2HAkveywzdnXPpRbo3scqjCEskAFS1uBZa1CBkHXrdQtq32A"],"enrUri":"enr:-LO4QBxC41bByDGHl3__aKiMggEtLrgigcvN2SSi4Em-A1aob_rwaiTkeTRKSgYqqQ895IALWCOyIUgywWvYTM8ZFpIBgmlkgnY0gmlwhKwSm1iKbXVsdGlhZGRyc4wACgSsEptYBpXD3QOCcnOFAAMBAACJc2VjcDI1NmsxoQISRI4W9INKlfgDIu_yTNOJEhKa6Vj6POt-2g2WpQ3bG4N0Y3CClcKDdWRwgpXEhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-08-26_15-14-37__57127226-64d0-4033-9b2d-d2101c6879ac__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.104.26
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['32435', '32436', '32437', '32438', '32439']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 32435:32435 -p 32436:32436 -p 32437:32437 -p 32438:32438 -p 32439:32439 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32437 --rest-port=32435 --tcp-port=32436 --discv5-udp-port=32438 --rest-address=0.0.0.0 --nat=extip:172.18.104.26 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d0b6218bf47d5c0ed6965cef77ffabea9e29c72e239532fde8ebe86d8b6e27dd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32439 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QBxC41bByDGHl3__aKiMggEtLrgigcvN2SSi4Em-A1aob_rwaiTkeTRKSgYqqQ895IALWCOyIUgywWvYTM8ZFpIBgmlkgnY0gmlwhKwSm1iKbXVsdGlhZGRyc4wACgSsEptYBpXD3QOCcnOFAAMBAACJc2VjcDI1NmsxoQISRI4W9INKlfgDIu_yTNOJEhKa6Vj6POt-2g2WpQ3bG4N0Y3CClcKDdWRwgpXEhXdha3UyAw --storenode=/ip4/172.18.155.88/tcp/38338/p2p/16Uiu2HAkveywzdnXPpRbo3scqjCEskAFS1uBZa1CBkHXrdQtq32A --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.104.26 waku 39e12a80f9be0ec76138e8bc6921c6a884b9e38bee3ba0860d72c541fc4151bc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 39e12a80f9be. Setting up logs at ./log/docker/store_node1_2024-08-26_15-14-37__57127226-64d0-4033-9b2d-d2101c6879ac__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 32435
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32435/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32435/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.26/tcp/32436/p2p/16Uiu2HAmDpiXekgdKwNQVWtzmeUDwxVQoXA6CD3jLwupkqwwrabA","/ip4/172.18.104.26/tcp/32437/ws/p2p/16Uiu2HAmDpiXekgdKwNQVWtzmeUDwxVQoXA6CD3jLwupkqwwrabA"],"enrUri":"enr:-LO4QP9hkoxL5KRSXbih-i7Z3uwHQcJJjXiKXgV9aFF7W_F_Xw-ypU3CuA1mi-21DaZV2owg5N1yUIRgrVu8dsyzVQgBgmlkgnY0gmlwhKwSaBqKbXVsdGlhZGRyc4wACgSsEmgaBn613QOCcnOFAAMBAACJc2VjcDI1NmsxoQMRWZsTQ2bgQovl8qJdh9oX8mPnWcMh85EDRFxsvEeCqYN0Y3CCfrSDdWRwgn62hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32435/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.155.88/tcp/38338/p2p/16Uiu2HAkveywzdnXPpRbo3scqjCEskAFS1uBZa1CBkHXrdQtq32A"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38337/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32435/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38337/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:216 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38337/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"AhJqYX9C/ii3pLFwP0z3EHxM5S4QGNRcuH8fFnsyuN4="}]}'
[35mDEBUG   [0m src.steps.store:store.py:216 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32435/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"65cd74a7b51780378f06","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"AhJqYX9C/ii3pLFwP0z3EHxM5S4QGNRcuH8fFnsyuN4="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4493a2735380
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 39e12a80f9be
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'fault': ['DBG 2024-08-26 15:14:40.862+00:00 executing migration statement              topics="waku archive migration" tid=1 file=migrations.nim:88 statement="ALTER TABLE messages ADD meta VARCHAR default null;"', 'DBG 2024-08-26 15:14:40.862+00:00 migration statement executed succesfully   topics="waku archive migration" tid=1 file=migrations.nim:95 statement="ALTER TABLE messages ADD meta VARCHAR default null;"', 'DBG 2024-08-26 15:14:40.884+00:00 performWriteQueryWithLock                  tid=1 file=postgres_driver.nim:1101 queryToProtect="CREATE TABLE IF NOT EXISTS messages_1724685280_1724688000 (LIKE messages INCLUDING DEFAULTS INCLUDING CONSTRAINTS);"', 'DBG 2024-08-26 15:14:40.896+00:00 new partition added                        tid=1 file=postgres_driver.nim:1212 query="CREATE TABLE IF NOT EXISTS messages_1724685280_1724688000 (LIKE messages INCLUDING DEFAULTS INCLUDING CONSTRAINTS);"']
[35mDEBUG   [0m src.postgres_setup:postgres_setup.py:44 Postgres container stopped and removed.
[35mDEBUG   [0m src.postgres_setup:postgres_setup.py:36 Postgres container started
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_on_empty_postgress_db with id: 2024-08-26_15-14-55__67415f32-c5ed-4d3a-b936-ff8be69eb009
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-08-26_15-14-55__67415f32-c5ed-4d3a-b936-ff8be69eb009__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.88.105
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['4610', '4611', '4612', '4613', '4614']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 4610:4610 -p 4611:4611 -p 4612:4612 -p 4613:4613 -p 4614:4614 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4612 --rest-port=4610 --tcp-port=4611 --discv5-udp-port=4613 --rest-address=0.0.0.0 --nat=extip:172.18.88.105 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eeecefc8f1e2cdca83dabe67411351da0c29012f311fdc7d19fa7fb542cb66db --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4614 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.88.105 waku aab437dad70f49817bf954745cdf9c3e848842b339edb1d3eda3ea63b85ac001
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID aab437dad70f. Setting up logs at ./log/docker/publishing_node1_2024-08-26_15-14-55__67415f32-c5ed-4d3a-b936-ff8be69eb009__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 4610
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4610/health" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.waku_node:waku_node.py:183 REST service did not become ready in time: HTTPConnectionPool(host='127.0.0.1', port=4610): Read timed out. (read timeout=20)
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.215.82
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['22694', '22695', '22696', '22697', '22698']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 22694:22694 -p 22695:22695 -p 22696:22696 -p 22697:22697 -p 22698:22698 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22696 --rest-port=22694 --tcp-port=22695 --discv5-udp-port=22697 --rest-address=0.0.0.0 --nat=extip:172.18.215.82 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c1f56d803af43b92ddbebede9cbfcb7a0fae84fc9f83eab218a26a3aa09aebae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22698 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.215.82 waku bcef68b8fcd519f218258c3bfc03af5570f010a2c4d3e7f7c135ef92ac4277ca
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID bcef68b8fcd5. Setting up logs at ./log/docker/publishing_node1_2024-08-26_15-14-55__67415f32-c5ed-4d3a-b936-ff8be69eb009__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 22694
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22694/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Initializing","protocolsHealth":[]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22694/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Initializing","protocolsHealth":[]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22694/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22694/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.215.82/tcp/22695/p2p/16Uiu2HAmFKbddrKyaXRZKYqMLhPra58CjsHGzytt3SZNr9Xw87eZ","/ip4/172.18.215.82/tcp/22696/ws/p2p/16Uiu2HAmFKbddrKyaXRZKYqMLhPra58CjsHGzytt3SZNr9Xw87eZ"],"enrUri":"enr:-LO4QJ5z9pTb7AQGj_BZoDl3V-Vr_mYtGa2z-FHAP5xiIckeUGHxz1wiZH0l_n4W_l4swVkmOweX0jtUbH1hwWL1SIYBgmlkgnY0gmlwhKwS11KKbXVsdGlhZGRyc4wACgSsEtdSBlio3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMnm1aAJkkozXPEA2JGeuOqJlIOkOtHP7nZH4c5LbImEoN0Y3CCWKeDdWRwgliphXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-08-26_15-14-55__67415f32-c5ed-4d3a-b936-ff8be69eb009__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.107.145
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['40103', '40104', '40105', '40106', '40107']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 40103:40103 -p 40104:40104 -p 40105:40105 -p 40106:40106 -p 40107:40107 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40105 --rest-port=40103 --tcp-port=40104 --discv5-udp-port=40106 --rest-address=0.0.0.0 --nat=extip:172.18.107.145 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1b17e523dd542a42e06caeda1aaedc3e6ec29fcccb4be7e8dedbba8ff86dc9b8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40107 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QJ5z9pTb7AQGj_BZoDl3V-Vr_mYtGa2z-FHAP5xiIckeUGHxz1wiZH0l_n4W_l4swVkmOweX0jtUbH1hwWL1SIYBgmlkgnY0gmlwhKwS11KKbXVsdGlhZGRyc4wACgSsEtdSBlio3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMnm1aAJkkozXPEA2JGeuOqJlIOkOtHP7nZH4c5LbImEoN0Y3CCWKeDdWRwgliphXdha3UyAw --storenode=/ip4/172.18.215.82/tcp/22695/p2p/16Uiu2HAmFKbddrKyaXRZKYqMLhPra58CjsHGzytt3SZNr9Xw87eZ --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.107.145 waku 3867e5bb1c86392b5d810001f429801ede9c3e9935f8efa5de56c6e22cf74d5d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3867e5bb1c86. Setting up logs at ./log/docker/store_node1_2024-08-26_15-14-55__67415f32-c5ed-4d3a-b936-ff8be69eb009__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 40103
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40103/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40103/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.107.145/tcp/40104/p2p/16Uiu2HAm798tjrDF5gmDQFfQzDnsNx1Q6X1dsecq3obnk2ewDg91","/ip4/172.18.107.145/tcp/40105/ws/p2p/16Uiu2HAm798tjrDF5gmDQFfQzDnsNx1Q6X1dsecq3obnk2ewDg91"],"enrUri":"enr:-LO4QN3oGUD1VEzR4u59ecF3DZxzo1RsO7husinstlGelmZGHd_0wf-eGjtby96LM4ipuNbRbduKneSbarn4eZ-pXZsBgmlkgnY0gmlwhKwSa5GKbXVsdGlhZGRyc4wACgSsEmuRBpyp3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKuD8zB4aR_E5UXZhBsZNMEMTeN5HYRPd4U3KBPrqwwbIN0Y3CCnKiDdWRwgpyqhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40103/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.215.82/tcp/22695/p2p/16Uiu2HAmFKbddrKyaXRZKYqMLhPra58CjsHGzytt3SZNr9Xw87eZ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22694/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40103/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22694/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:216 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22694/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"AhJqYX9C/ii3pLFwP0z3EHxM5S4QGNRcuH8fFnsyuN4="},{"messageHash":"DKW/oUDXH7HCqNlsJFfGrnPFIb4VTToJqFyuPDCiMXo="}]}'
[35mDEBUG   [0m src.steps.store:store.py:216 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40103/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"830c3222c7fe282fe066","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"AhJqYX9C/ii3pLFwP0z3EHxM5S4QGNRcuH8fFnsyuN4="},{"messageHash":"DKW/oUDXH7HCqNlsJFfGrnPFIb4VTToJqFyuPDCiMXo="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id bcef68b8fcd5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3867e5bb1c86
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['ERR 2024-08-26 15:15:20.338+00:00 failed to release lock analyzeTableLoop    tid=1 file=postgres_driver.nim:1543 error="could not release advisory lock"']
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'fault': ['DBG 2024-08-26 15:15:20.328+00:00 performWriteQueryWithLock                  tid=1 file=postgres_driver.nim:1101 queryToProtect="CREATE TABLE IF NOT EXISTS messages_1724688000_1724691600 (LIKE messages INCLUDING DEFAULTS INCLUDING CONSTRAINTS);"', 'DBG 2024-08-26 15:15:20.359+00:00 new partition added                        tid=1 file=postgres_driver.nim:1212 query="CREATE TABLE IF NOT EXISTS messages_1724688000_1724691600 (LIKE messages INCLUDING DEFAULTS INCLUDING CONSTRAINTS);"']
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-08-26_15-14-55__67415f32-c5ed-4d3a-b936-ff8be69eb009__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-08-26_15-14-55__67415f32-c5ed-4d3a-b936-ff8be69eb009__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_on_empty_postgress_db with id: 2024-08-26_15-15-33__43aa565f-7a3d-425a-b808-d1c287b123ba
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-08-26_15-15-33__43aa565f-7a3d-425a-b808-d1c287b123ba__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.173.53
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['59009', '59010', '59011', '59012', '59013']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 59009:59009 -p 59010:59010 -p 59011:59011 -p 59012:59012 -p 59013:59013 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59011 --rest-port=59009 --tcp-port=59010 --discv5-udp-port=59012 --rest-address=0.0.0.0 --nat=extip:172.18.173.53 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e61dd9a4ffcb0b2e27cc1e0cbb1ed09fdf5d918daf54d8c23ceb7e904f0bbfe5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59013 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.173.53 waku 29b83b57cdb19a3bea684e93d49a896081cf1b312fa0a044bb93967d871e7e4f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 29b83b57cdb1. Setting up logs at ./log/docker/publishing_node1_2024-08-26_15-15-33__43aa565f-7a3d-425a-b808-d1c287b123ba__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 59009
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59009/health" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.waku_node:waku_node.py:183 REST service did not become ready in time: HTTPConnectionPool(host='127.0.0.1', port=59009): Read timed out. (read timeout=20)
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.171.90
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['61935', '61936', '61937', '61938', '61939']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 61935:61935 -p 61936:61936 -p 61937:61937 -p 61938:61938 -p 61939:61939 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61937 --rest-port=61935 --tcp-port=61936 --discv5-udp-port=61938 --rest-address=0.0.0.0 --nat=extip:172.18.171.90 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5a987fcf5cddc444a5cc2b1ff5b5bffdf9e93aca72bb6ba0b371af8793dbe8cd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61939 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.171.90 waku 1a42847eae8707c04cdc5b64b3b7d779001f110ccb61695cb9e9343407571f3d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 1a42847eae87. Setting up logs at ./log/docker/publishing_node1_2024-08-26_15-15-33__43aa565f-7a3d-425a-b808-d1c287b123ba__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 61935
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61935/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61935/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.171.90/tcp/61936/p2p/16Uiu2HAmNcFyCJuWWzkdn89wYA1Bvv9o7esNnGZUmbVJnPAtD78c","/ip4/172.18.171.90/tcp/61937/ws/p2p/16Uiu2HAmNcFyCJuWWzkdn89wYA1Bvv9o7esNnGZUmbVJnPAtD78c"],"enrUri":"enr:-LO4QLVu-M1E_3S2cKNc-ztig6UW-JXOcQQYerPQfy01mkH_UNH433u1DAOpSdWlkLfvoX9aaaVQftIGeLpyLsJnPjoBgmlkgnY0gmlwhKwSq1qKbXVsdGlhZGRyc4wACgSsEqtaBvHx3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOT4cmROubDbQmNp-CuvX5QNkIboOZ16-DqydifpXdKQYN0Y3CC8fCDdWRwgvHyhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-08-26_15-15-33__43aa565f-7a3d-425a-b808-d1c287b123ba__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.102.8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['9514', '9515', '9516', '9517', '9518']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 9514:9514 -p 9515:9515 -p 9516:9516 -p 9517:9517 -p 9518:9518 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9516 --rest-port=9514 --tcp-port=9515 --discv5-udp-port=9517 --rest-address=0.0.0.0 --nat=extip:172.18.102.8 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ddbdaccfc1d272c5a1b79fcae0cb2b3d14dd07efdbdeeaf4dc44bd51123efcf1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9518 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QLVu-M1E_3S2cKNc-ztig6UW-JXOcQQYerPQfy01mkH_UNH433u1DAOpSdWlkLfvoX9aaaVQftIGeLpyLsJnPjoBgmlkgnY0gmlwhKwSq1qKbXVsdGlhZGRyc4wACgSsEqtaBvHx3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOT4cmROubDbQmNp-CuvX5QNkIboOZ16-DqydifpXdKQYN0Y3CC8fCDdWRwgvHyhXdha3UyAw --storenode=/ip4/172.18.171.90/tcp/61936/p2p/16Uiu2HAmNcFyCJuWWzkdn89wYA1Bvv9o7esNnGZUmbVJnPAtD78c --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.102.8 waku c683605d67cc571f9cea337d8d0cf5c792784d71315a79edc7249d854464df71
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c683605d67cc. Setting up logs at ./log/docker/store_node1_2024-08-26_15-15-33__43aa565f-7a3d-425a-b808-d1c287b123ba__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 9514
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9514/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9514/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.102.8/tcp/9515/p2p/16Uiu2HAmUoWJgbcMLy9wkUWQPVT4piLsv4fP2ZwzCJqxYggQNDyr","/ip4/172.18.102.8/tcp/9516/ws/p2p/16Uiu2HAmUoWJgbcMLy9wkUWQPVT4piLsv4fP2ZwzCJqxYggQNDyr"],"enrUri":"enr:-LO4QGIX9altep9UvnOL7UiLAQMaPPnD2um1u6JJS-hPzB9aepgeedNOLP0Mismr4N9AEydrv1E_XzONS4iyqPz0lFEBgmlkgnY0gmlwhKwSZgiKbXVsdGlhZGRyc4wACgSsEmYIBiUs3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPv6YHxiAUaw1vWRYqcK_KNYvQAM45xo0ca3XM6OPdD6YN0Y3CCJSuDdWRwgiUthXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9514/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.171.90/tcp/61936/p2p/16Uiu2HAmNcFyCJuWWzkdn89wYA1Bvv9o7esNnGZUmbVJnPAtD78c"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61935/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9514/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61935/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:216 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61935/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"AhJqYX9C/ii3pLFwP0z3EHxM5S4QGNRcuH8fFnsyuN4="},{"messageHash":"DKW/oUDXH7HCqNlsJFfGrnPFIb4VTToJqFyuPDCiMXo="},{"messageHash":"pQZrGL5ZgLFVvoQOWHccjiSGJ7jpxEyPNNaREmImdi0="}]}'
[35mDEBUG   [0m src.steps.store:store.py:216 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9514/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"c8ef513a3ad44805a845","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"AhJqYX9C/ii3pLFwP0z3EHxM5S4QGNRcuH8fFnsyuN4="},{"messageHash":"DKW/oUDXH7HCqNlsJFfGrnPFIb4VTToJqFyuPDCiMXo="},{"messageHash":"pQZrGL5ZgLFVvoQOWHccjiSGJ7jpxEyPNNaREmImdi0="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1a42847eae87
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c683605d67cc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['ERR 2024-08-26 15:15:56.385+00:00 failed to release lock analyzeTableLoop    tid=1 file=postgres_driver.nim:1543 error="could not release advisory lock"']
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-08-26_15-15-33__43aa565f-7a3d-425a-b808-d1c287b123ba__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-08-26_15-15-33__43aa565f-7a3d-425a-b808-d1c287b123ba__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.postgres_setup:postgres_setup.py:44 Postgres container stopped and removed.