[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-08-26_14-58-13__dab6daf0-ce92-470e-bd95-c7c01c313109
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_14-58-13__dab6daf0-ce92-470e-bd95-c7c01c313109__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.127.80
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['20162', '20163', '20164', '20165', '20166']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 20162:20162 -p 20163:20163 -p 20164:20164 -p 20165:20165 -p 20166:20166 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20164 --rest-port=20162 --tcp-port=20163 --discv5-udp-port=20165 --rest-address=0.0.0.0 --nat=extip:172.18.127.80 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7e69361260bdd8dac3faefe3ce1cdea784a8e1bd2c9ccf80bdebc3cc1410ad6c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20166 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.127.80 waku 3029eb8be1870624ff953589ad53ce28b1b2d22993cff59b723dcbd91c59007b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3029eb8be187. Setting up logs at ./log/docker/receiving_node1_2024-08-26_14-58-13__dab6daf0-ce92-470e-bd95-c7c01c313109__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 20162
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20162/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20162/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.127.80/tcp/20163/p2p/16Uiu2HAmGspNtFm6xkMi951HT2s4WLqBvC9pM1fqtRt26CbRc66T","/ip4/172.18.127.80/tcp/20164/ws/p2p/16Uiu2HAmGspNtFm6xkMi951HT2s4WLqBvC9pM1fqtRt26CbRc66T"],"enrUri":"enr:-LO4QNZUBQjBhH__EjcdDuEvhsW6uCkMejEqPfVxS7K0jDjbbsAjZBvAsT1DLlkJZ66H8Dkponf582xtuYdkBFJCP1QBgmlkgnY0gmlwhKwSf1CKbXVsdGlhZGRyc4wACgSsEn9QBk7E3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM-uAWzymumCRHLeST0Knd3PLx6FgWGeOWxeIKNAlnPaIN0Y3CCTsODdWRwgk7FhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-26_14-58-13__dab6daf0-ce92-470e-bd95-c7c01c313109__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.5.137
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['64656', '64657', '64658', '64659', '64660']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 64656:64656 -p 64657:64657 -p 64658:64658 -p 64659:64659 -p 64660:64660 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64658 --rest-port=64656 --tcp-port=64657 --discv5-udp-port=64659 --rest-address=0.0.0.0 --nat=extip:172.18.5.137 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1ab1b52992c3cee57c07d4fddeec7ee25fedb2fe339afdc694edfc23bbfe636a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64660 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.5.137 waku 85d4543600399ee1fea62a02db6a4c8fe14a660b54f45ca8aaf31796dade7236
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 85d454360039. Setting up logs at ./log/docker/receiving_node2_2024-08-26_14-58-13__dab6daf0-ce92-470e-bd95-c7c01c313109__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 64656
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64656/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64656/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.5.137/tcp/64657/p2p/16Uiu2HAmAuiypKfWawZNd6tRhP4SekgZCh4nursECEfYvcVgoVaH","/ip4/172.18.5.137/tcp/64658/ws/p2p/16Uiu2HAmAuiypKfWawZNd6tRhP4SekgZCh4nursECEfYvcVgoVaH"],"enrUri":"enr:-LO4QGh0oNZSBjvwvc-GmQo8lRPNEIgkcOVGyXKjdoNXTTeJVjw_E1-PqBruX18_LAZfKVEACtRPaDlITvDbsWS0o6IBgmlkgnY0gmlwhKwSBYmKbXVsdGlhZGRyc4wACgSsEgWJBvyS3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLmDvWIYsiMCKKGrDtuSqv9L9BR343qfBmw_nBTfNsj2oN0Y3CC_JGDdWRwgvyThXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64656/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.127.80/tcp/20163/p2p/16Uiu2HAmGspNtFm6xkMi951HT2s4WLqBvC9pM1fqtRt26CbRc66T"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_14-58-13__dab6daf0-ce92-470e-bd95-c7c01c313109__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.32.192
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['31476', '31477', '31478', '31479', '31480']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 31476:31476 -p 31477:31477 -p 31478:31478 -p 31479:31479 -p 31480:31480 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31478 --rest-port=31476 --tcp-port=31477 --discv5-udp-port=31479 --rest-address=0.0.0.0 --nat=extip:172.18.32.192 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2e3eed7daecf0aabbef13ca92d03a344feb958ba23bcd10aeeb4c72e60bf86f4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31480 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QNZUBQjBhH__EjcdDuEvhsW6uCkMejEqPfVxS7K0jDjbbsAjZBvAsT1DLlkJZ66H8Dkponf582xtuYdkBFJCP1QBgmlkgnY0gmlwhKwSf1CKbXVsdGlhZGRyc4wACgSsEn9QBk7E3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM-uAWzymumCRHLeST0Knd3PLx6FgWGeOWxeIKNAlnPaIN0Y3CCTsODdWRwgk7FhXdha3UyCQ --lightpushnode=/ip4/172.18.127.80/tcp/20163/p2p/16Uiu2HAmGspNtFm6xkMi951HT2s4WLqBvC9pM1fqtRt26CbRc66T --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.32.192 waku f868dd76d929dff2f48cd990c0f407a35a1081ea64cbfb8b6f6330165e6edacc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f868dd76d929. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_14-58-13__dab6daf0-ce92-470e-bd95-c7c01c313109__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 31476
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31476/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31476/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.32.192/tcp/31477/p2p/16Uiu2HAm8yTg5XB7dEKKDHP14Je243iTgEJNTHFVKk3KcudyXEbd","/ip4/172.18.32.192/tcp/31478/ws/p2p/16Uiu2HAm8yTg5XB7dEKKDHP14Je243iTgEJNTHFVKk3KcudyXEbd"],"enrUri":"enr:-LO4QBtAooszw-ddsRU3xeV0zEbkpUNKC24zRhu7BTMAIXMQGfwcJ4Hsj9ZXEXP4AdhcDoH9ScDkDZM0h1yObpLjKk8BgmlkgnY0gmlwhKwSIMCKbXVsdGlhZGRyc4wACgSsEiDABnr23QOCcnOFAAMBAACJc2VjcDI1NmsxoQLJTJol_-lZWuBjHpOtfY7A7yMhtXioJTNPEW9a5UCf3IN0Y3CCevWDdWRwgnr3hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31476/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.127.80/tcp/20163/p2p/16Uiu2HAmGspNtFm6xkMi951HT2s4WLqBvC9pM1fqtRt26CbRc66T"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31476/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.5.137/tcp/64657/p2p/16Uiu2HAmAuiypKfWawZNd6tRhP4SekgZCh4nursECEfYvcVgoVaH"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20162/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64656/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31476/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724684299861102592, "version": 2.1}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:31476/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3029eb8be187
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 85d454360039
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f868dd76d929
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['DBG 2024-08-26 14:58:19.863+00:00 Received error response from handler       tid=1 file=serverprivate.nim:314 status=400 meth=POST peer=172.17.0.1:41834 uri=/lightpush/v1/message error_status="400 Bad Request" error_content_type=text/plain error_message="Invalid content body, could not decode. Unable to deserialize data"']
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-08-26_14-58-28__a107acbd-f1e0-4d3d-93ae-6d2298ef9915
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_14-58-28__a107acbd-f1e0-4d3d-93ae-6d2298ef9915__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.215.218
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['60852', '60853', '60854', '60855', '60856']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 60852:60852 -p 60853:60853 -p 60854:60854 -p 60855:60855 -p 60856:60856 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60854 --rest-port=60852 --tcp-port=60853 --discv5-udp-port=60855 --rest-address=0.0.0.0 --nat=extip:172.18.215.218 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ebb19be67b1ff630df34e0c1be0d530d2a63327dc7e1be6ddf10ebe8f8d1ac6e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60856 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.215.218 waku 9a55cf33fcd96af5db6d5aba1e57b6da7553751fecd0247ebf297d51d204b84c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 9a55cf33fcd9. Setting up logs at ./log/docker/receiving_node1_2024-08-26_14-58-28__a107acbd-f1e0-4d3d-93ae-6d2298ef9915__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 60852
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60852/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60852/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.215.218/tcp/60853/p2p/16Uiu2HAmFbKyjcJHtXsfkt2jkXaAvveHEcpksi5fRWqxoQxWeAAQ","/ip4/172.18.215.218/tcp/60854/ws/p2p/16Uiu2HAmFbKyjcJHtXsfkt2jkXaAvveHEcpksi5fRWqxoQxWeAAQ"],"enrUri":"enr:-LO4QOwSNv4xEG3l8ltK6w-YhrbQw9e_tW0mjCF1krkIVZZYAEaLSzcMsUCQf8ZV5yEG7OlKqVjUlmvfPeCrIESQeJUBgmlkgnY0gmlwhKwS19qKbXVsdGlhZGRyc4wACgSsEtfaBu223QOCcnOFAAMBAACJc2VjcDI1NmsxoQMrou5xH83qdvZURgMzNGKPRcV-2VLI_nqPkaDj4MC-HYN0Y3CC7bWDdWRwgu23hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-26_14-58-28__a107acbd-f1e0-4d3d-93ae-6d2298ef9915__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.160.221
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['55392', '55393', '55394', '55395', '55396']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 55392:55392 -p 55393:55393 -p 55394:55394 -p 55395:55395 -p 55396:55396 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55394 --rest-port=55392 --tcp-port=55393 --discv5-udp-port=55395 --rest-address=0.0.0.0 --nat=extip:172.18.160.221 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c6c0fcb18ed21dbe7a24ad710a74c388876ac24ed86d5231ceb8eacde4e9b4ae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55396 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.160.221 waku 16382f88f97e287aa83859340dba2a593e6209d7f96450286346dea075cb6760
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 16382f88f97e. Setting up logs at ./log/docker/receiving_node2_2024-08-26_14-58-28__a107acbd-f1e0-4d3d-93ae-6d2298ef9915__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 55392
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55392/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55392/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.160.221/tcp/55393/p2p/16Uiu2HAm8gZMBTjaK8xN4a2YLz66PaPScKU4CptnUMgmuLK9sKw5","/ip4/172.18.160.221/tcp/55394/ws/p2p/16Uiu2HAm8gZMBTjaK8xN4a2YLz66PaPScKU4CptnUMgmuLK9sKw5"],"enrUri":"enr:-LO4QG9gWyuHV4L0Or6oT486dfclGLo3fWq1WaohdxfcZHrLfemOXB3PjZthSyEqIABGIlu-aP8Q_ItsOClfHwb-yecBgmlkgnY0gmlwhKwSoN2KbXVsdGlhZGRyc4wACgSsEqDdBthi3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLE-CTqhiNWXyUq6zAgvqZY68beJrpKAOXCtTBNAve1GIN0Y3CC2GGDdWRwgthjhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55392/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.215.218/tcp/60853/p2p/16Uiu2HAmFbKyjcJHtXsfkt2jkXaAvveHEcpksi5fRWqxoQxWeAAQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_14-58-28__a107acbd-f1e0-4d3d-93ae-6d2298ef9915__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.179.183
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['55776', '55777', '55778', '55779', '55780']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 55776:55776 -p 55777:55777 -p 55778:55778 -p 55779:55779 -p 55780:55780 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55778 --rest-port=55776 --tcp-port=55777 --discv5-udp-port=55779 --rest-address=0.0.0.0 --nat=extip:172.18.179.183 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dde2ab0f20ee203ccf28ef1a8ae905e71aa1da9c11076049ec7caf99a2e9053f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55780 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QOwSNv4xEG3l8ltK6w-YhrbQw9e_tW0mjCF1krkIVZZYAEaLSzcMsUCQf8ZV5yEG7OlKqVjUlmvfPeCrIESQeJUBgmlkgnY0gmlwhKwS19qKbXVsdGlhZGRyc4wACgSsEtfaBu223QOCcnOFAAMBAACJc2VjcDI1NmsxoQMrou5xH83qdvZURgMzNGKPRcV-2VLI_nqPkaDj4MC-HYN0Y3CC7bWDdWRwgu23hXdha3UyCQ --lightpushnode=/ip4/172.18.215.218/tcp/60853/p2p/16Uiu2HAmFbKyjcJHtXsfkt2jkXaAvveHEcpksi5fRWqxoQxWeAAQ --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.179.183 waku 5128cccd66bac1da548a94d5f3451df6f7087f0af7d8e19fa27add10af8501eb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5128cccd66ba. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_14-58-28__a107acbd-f1e0-4d3d-93ae-6d2298ef9915__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 55776
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55776/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55776/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.179.183/tcp/55777/p2p/16Uiu2HAkzw6RzXtNNJDijftCqVBLTkD2fGw31hUMEdAXZeYAuQTb","/ip4/172.18.179.183/tcp/55778/ws/p2p/16Uiu2HAkzw6RzXtNNJDijftCqVBLTkD2fGw31hUMEdAXZeYAuQTb"],"enrUri":"enr:-LO4QIdMXFpVbttE3mMP0z2HZYBqvXpzuaM0kU0NEon0fS0VXGhRMgSBhkRJijcrSKtZowFjVgWSej8UpJEUdVCb3PMBgmlkgnY0gmlwhKwSs7eKbXVsdGlhZGRyc4wACgSsErO3Btni3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJR0-z80f-wpboh8JXnUQcKJDKaHuDJDW0okWhfj7bPkoN0Y3CC2eGDdWRwgtnjhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55776/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.215.218/tcp/60853/p2p/16Uiu2HAmFbKyjcJHtXsfkt2jkXaAvveHEcpksi5fRWqxoQxWeAAQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55776/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.160.221/tcp/55393/p2p/16Uiu2HAm8gZMBTjaK8xN4a2YLz66PaPScKU4CptnUMgmuLK9sKw5"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60852/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55392/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55776/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724684314200815360, "version": 2.1}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:55776/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9a55cf33fcd9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 16382f88f97e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5128cccd66ba
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['DBG 2024-08-26 14:58:34.206+00:00 Received error response from handler       tid=1 file=serverprivate.nim:314 status=400 meth=POST peer=172.17.0.1:45772 uri=/lightpush/v1/message error_status="400 Bad Request" error_content_type=text/plain error_message="Invalid content body, could not decode. Unable to deserialize data"']
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-08-26_14-58-41__3f8fdb31-dd25-46bf-b024-a05dd119c52f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_14-58-41__3f8fdb31-dd25-46bf-b024-a05dd119c52f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.145.122
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['3124', '3125', '3126', '3127', '3128']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 3124:3124 -p 3125:3125 -p 3126:3126 -p 3127:3127 -p 3128:3128 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3126 --rest-port=3124 --tcp-port=3125 --discv5-udp-port=3127 --rest-address=0.0.0.0 --nat=extip:172.18.145.122 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=edd1fda16decd87d60968896fefaa19f2d3bbca09af47f0f2ef4c63ee72dccaf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3128 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.145.122 waku ef0539a7d13f092632ecc54fb80cbabaecdea2584570cf2c899b25175e560e7e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ef0539a7d13f. Setting up logs at ./log/docker/receiving_node1_2024-08-26_14-58-41__3f8fdb31-dd25-46bf-b024-a05dd119c52f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 3124
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3124/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3124/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.145.122/tcp/3125/p2p/16Uiu2HAmNsXsxvwesqknFV6pS8BRVX2Dgotri5fZhLUnezFzJj5k","/ip4/172.18.145.122/tcp/3126/ws/p2p/16Uiu2HAmNsXsxvwesqknFV6pS8BRVX2Dgotri5fZhLUnezFzJj5k"],"enrUri":"enr:-LO4QE6LggCSiErQtL015dtoK49JgocbFS3gsAIHg4byFy_ncbFUz50_o-9M9j3WZvQ7cbKYyrqtdiadv7EhLYBDlT8BgmlkgnY0gmlwhKwSkXqKbXVsdGlhZGRyc4wACgSsEpF6Bgw23QOCcnOFAAMBAACJc2VjcDI1NmsxoQOXy30hqC9voj_KWif8EniFYX2ZTigmqDVbOe4nJAw8s4N0Y3CCDDWDdWRwggw3hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-26_14-58-41__3f8fdb31-dd25-46bf-b024-a05dd119c52f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.53.159
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['48194', '48195', '48196', '48197', '48198']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 48194:48194 -p 48195:48195 -p 48196:48196 -p 48197:48197 -p 48198:48198 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48196 --rest-port=48194 --tcp-port=48195 --discv5-udp-port=48197 --rest-address=0.0.0.0 --nat=extip:172.18.53.159 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3dcbbdc4a8133cedef964b6f31b8a7dd99909c62a11dd5fbe4ba20e4cbcff792 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48198 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.53.159 waku a34f2e91c8537ce9677df952bece294ca0d68528d8c17b97b788ae2218a7e345
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a34f2e91c853. Setting up logs at ./log/docker/receiving_node2_2024-08-26_14-58-41__3f8fdb31-dd25-46bf-b024-a05dd119c52f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 48194
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48194/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48194/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.53.159/tcp/48195/p2p/16Uiu2HAm3Te53exgAkjLm5g31aJ1dd78KJH7TMaYPJqNdtbte2LC","/ip4/172.18.53.159/tcp/48196/ws/p2p/16Uiu2HAm3Te53exgAkjLm5g31aJ1dd78KJH7TMaYPJqNdtbte2LC"],"enrUri":"enr:-LO4QNxzSk6Z9Yx_rwLo-Tee_-T2EXMU05tBYbA-HOKTtnxHCNSxnOqMDfFR08eeBbJPdI0cfYdGDe7mrpFMJeFa5UsBgmlkgnY0gmlwhKwSNZ-KbXVsdGlhZGRyc4wACgSsEjWfBrxE3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ3Xn9-3_tAUx_n9_TbvUIPzWKSzfQdsJOr8l0CjYVkdYN0Y3CCvEODdWRwgrxFhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48194/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.145.122/tcp/3125/p2p/16Uiu2HAmNsXsxvwesqknFV6pS8BRVX2Dgotri5fZhLUnezFzJj5k"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_14-58-41__3f8fdb31-dd25-46bf-b024-a05dd119c52f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.183.56
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['19340', '19341', '19342', '19343', '19344']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 19340:19340 -p 19341:19341 -p 19342:19342 -p 19343:19343 -p 19344:19344 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19342 --rest-port=19340 --tcp-port=19341 --discv5-udp-port=19343 --rest-address=0.0.0.0 --nat=extip:172.18.183.56 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=034feecdbccc6ffb45cd9cb37f4a23d6a4cf766a6db5f43d539d3f5c831bff88 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19344 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QE6LggCSiErQtL015dtoK49JgocbFS3gsAIHg4byFy_ncbFUz50_o-9M9j3WZvQ7cbKYyrqtdiadv7EhLYBDlT8BgmlkgnY0gmlwhKwSkXqKbXVsdGlhZGRyc4wACgSsEpF6Bgw23QOCcnOFAAMBAACJc2VjcDI1NmsxoQOXy30hqC9voj_KWif8EniFYX2ZTigmqDVbOe4nJAw8s4N0Y3CCDDWDdWRwggw3hXdha3UyCQ --lightpushnode=/ip4/172.18.145.122/tcp/3125/p2p/16Uiu2HAmNsXsxvwesqknFV6pS8BRVX2Dgotri5fZhLUnezFzJj5k --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.183.56 waku 9991a3a4d4a04cb420c04f96e9df8cc2f2ccb17104aa9adedd2f0a000f206473
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 9991a3a4d4a0. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_14-58-41__3f8fdb31-dd25-46bf-b024-a05dd119c52f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 19340
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19340/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19340/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.183.56/tcp/19341/p2p/16Uiu2HAkuo5B16FmfdVFbKeicDn2mkxZyTMCE3TRiTgAYaZcfmC3","/ip4/172.18.183.56/tcp/19342/ws/p2p/16Uiu2HAkuo5B16FmfdVFbKeicDn2mkxZyTMCE3TRiTgAYaZcfmC3"],"enrUri":"enr:-LO4QFz3ob5gJzQ2RNBafI2aMuiVmCv91gpj200yroFrIfm9MxTBlnWyNTKzSX5aDulmqu6CNMNM46evaoP-tv_IUWYBgmlkgnY0gmlwhKwStziKbXVsdGlhZGRyc4wACgSsErc4BkuO3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIFe2vzz3iPWsjol3oPZ-kkBZW0c0CS3OTd6EG-2p9mkIN0Y3CCS42DdWRwgkuPhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19340/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.145.122/tcp/3125/p2p/16Uiu2HAmNsXsxvwesqknFV6pS8BRVX2Dgotri5fZhLUnezFzJj5k"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19340/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.53.159/tcp/48195/p2p/16Uiu2HAm3Te53exgAkjLm5g31aJ1dd78KJH7TMaYPJqNdtbte2LC"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3124/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48194/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19340/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724684327233711104, "version": 2.1}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:19340/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ef0539a7d13f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a34f2e91c853
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9991a3a4d4a0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['DBG 2024-08-26 14:58:47.238+00:00 Received error response from handler       tid=1 file=serverprivate.nim:314 status=400 meth=POST peer=172.17.0.1:37334 uri=/lightpush/v1/message error_status="400 Bad Request" error_content_type=text/plain error_message="Invalid content body, could not decode. Unable to deserialize data"']