[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-08-26_14-58-13__dab6daf0-ce92-470e-bd95-c7c01c313109
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_14-58-13__dab6daf0-ce92-470e-bd95-c7c01c313109__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.127.80
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['20162', '20163', '20164', '20165', '20166']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 20162:20162 -p 20163:20163 -p 20164:20164 -p 20165:20165 -p 20166:20166 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20164 --rest-port=20162 --tcp-port=20163 --discv5-udp-port=20165 --rest-address=0.0.0.0 --nat=extip:172.18.127.80 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7e69361260bdd8dac3faefe3ce1cdea784a8e1bd2c9ccf80bdebc3cc1410ad6c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20166 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.127.80 waku 3029eb8be1870624ff953589ad53ce28b1b2d22993cff59b723dcbd91c59007b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3029eb8be187. Setting up logs at ./log/docker/receiving_node1_2024-08-26_14-58-13__dab6daf0-ce92-470e-bd95-c7c01c313109__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 20162
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20162/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20162/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.127.80/tcp/20163/p2p/16Uiu2HAmGspNtFm6xkMi951HT2s4WLqBvC9pM1fqtRt26CbRc66T","/ip4/172.18.127.80/tcp/20164/ws/p2p/16Uiu2HAmGspNtFm6xkMi951HT2s4WLqBvC9pM1fqtRt26CbRc66T"],"enrUri":"enr:-LO4QNZUBQjBhH__EjcdDuEvhsW6uCkMejEqPfVxS7K0jDjbbsAjZBvAsT1DLlkJZ66H8Dkponf582xtuYdkBFJCP1QBgmlkgnY0gmlwhKwSf1CKbXVsdGlhZGRyc4wACgSsEn9QBk7E3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM-uAWzymumCRHLeST0Knd3PLx6FgWGeOWxeIKNAlnPaIN0Y3CCTsODdWRwgk7FhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-26_14-58-13__dab6daf0-ce92-470e-bd95-c7c01c313109__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.5.137
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['64656', '64657', '64658', '64659', '64660']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 64656:64656 -p 64657:64657 -p 64658:64658 -p 64659:64659 -p 64660:64660 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64658 --rest-port=64656 --tcp-port=64657 --discv5-udp-port=64659 --rest-address=0.0.0.0 --nat=extip:172.18.5.137 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1ab1b52992c3cee57c07d4fddeec7ee25fedb2fe339afdc694edfc23bbfe636a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64660 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.5.137 waku 85d4543600399ee1fea62a02db6a4c8fe14a660b54f45ca8aaf31796dade7236
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 85d454360039. Setting up logs at ./log/docker/receiving_node2_2024-08-26_14-58-13__dab6daf0-ce92-470e-bd95-c7c01c313109__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 64656
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64656/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64656/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.5.137/tcp/64657/p2p/16Uiu2HAmAuiypKfWawZNd6tRhP4SekgZCh4nursECEfYvcVgoVaH","/ip4/172.18.5.137/tcp/64658/ws/p2p/16Uiu2HAmAuiypKfWawZNd6tRhP4SekgZCh4nursECEfYvcVgoVaH"],"enrUri":"enr:-LO4QGh0oNZSBjvwvc-GmQo8lRPNEIgkcOVGyXKjdoNXTTeJVjw_E1-PqBruX18_LAZfKVEACtRPaDlITvDbsWS0o6IBgmlkgnY0gmlwhKwSBYmKbXVsdGlhZGRyc4wACgSsEgWJBvyS3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLmDvWIYsiMCKKGrDtuSqv9L9BR343qfBmw_nBTfNsj2oN0Y3CC_JGDdWRwgvyThXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64656/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.127.80/tcp/20163/p2p/16Uiu2HAmGspNtFm6xkMi951HT2s4WLqBvC9pM1fqtRt26CbRc66T"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_14-58-13__dab6daf0-ce92-470e-bd95-c7c01c313109__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.32.192
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['31476', '31477', '31478', '31479', '31480']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 31476:31476 -p 31477:31477 -p 31478:31478 -p 31479:31479 -p 31480:31480 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31478 --rest-port=31476 --tcp-port=31477 --discv5-udp-port=31479 --rest-address=0.0.0.0 --nat=extip:172.18.32.192 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2e3eed7daecf0aabbef13ca92d03a344feb958ba23bcd10aeeb4c72e60bf86f4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31480 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QNZUBQjBhH__EjcdDuEvhsW6uCkMejEqPfVxS7K0jDjbbsAjZBvAsT1DLlkJZ66H8Dkponf582xtuYdkBFJCP1QBgmlkgnY0gmlwhKwSf1CKbXVsdGlhZGRyc4wACgSsEn9QBk7E3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM-uAWzymumCRHLeST0Knd3PLx6FgWGeOWxeIKNAlnPaIN0Y3CCTsODdWRwgk7FhXdha3UyCQ --lightpushnode=/ip4/172.18.127.80/tcp/20163/p2p/16Uiu2HAmGspNtFm6xkMi951HT2s4WLqBvC9pM1fqtRt26CbRc66T --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.32.192 waku f868dd76d929dff2f48cd990c0f407a35a1081ea64cbfb8b6f6330165e6edacc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f868dd76d929. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_14-58-13__dab6daf0-ce92-470e-bd95-c7c01c313109__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 31476
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31476/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31476/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.32.192/tcp/31477/p2p/16Uiu2HAm8yTg5XB7dEKKDHP14Je243iTgEJNTHFVKk3KcudyXEbd","/ip4/172.18.32.192/tcp/31478/ws/p2p/16Uiu2HAm8yTg5XB7dEKKDHP14Je243iTgEJNTHFVKk3KcudyXEbd"],"enrUri":"enr:-LO4QBtAooszw-ddsRU3xeV0zEbkpUNKC24zRhu7BTMAIXMQGfwcJ4Hsj9ZXEXP4AdhcDoH9ScDkDZM0h1yObpLjKk8BgmlkgnY0gmlwhKwSIMCKbXVsdGlhZGRyc4wACgSsEiDABnr23QOCcnOFAAMBAACJc2VjcDI1NmsxoQLJTJol_-lZWuBjHpOtfY7A7yMhtXioJTNPEW9a5UCf3IN0Y3CCevWDdWRwgnr3hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31476/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.127.80/tcp/20163/p2p/16Uiu2HAmGspNtFm6xkMi951HT2s4WLqBvC9pM1fqtRt26CbRc66T"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31476/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.5.137/tcp/64657/p2p/16Uiu2HAmAuiypKfWawZNd6tRhP4SekgZCh4nursECEfYvcVgoVaH"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20162/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64656/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31476/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724684299861102592, "version": 2.1}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:31476/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3029eb8be187
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 85d454360039
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f868dd76d929
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['DBG 2024-08-26 14:58:19.863+00:00 Received error response from handler       tid=1 file=serverprivate.nim:314 status=400 meth=POST peer=172.17.0.1:41834 uri=/lightpush/v1/message error_status="400 Bad Request" error_content_type=text/plain error_message="Invalid content body, could not decode. Unable to deserialize data"']