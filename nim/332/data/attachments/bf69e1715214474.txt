[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_only_relay with id: 2024-08-26_15-00-19__341dba95-29e5-4420-a290-390b843e7126
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_15-00-19__341dba95-29e5-4420-a290-390b843e7126__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.39.187
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['15503', '15504', '15505', '15506', '15507']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 15503:15503 -p 15504:15504 -p 15505:15505 -p 15506:15506 -p 15507:15507 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15505 --rest-port=15503 --tcp-port=15504 --discv5-udp-port=15506 --rest-address=0.0.0.0 --nat=extip:172.18.39.187 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6f5befcf9deba7fec7ac565d0cc2ffd0db0bada9b2b16f4a1e6a46b4c16e7f6a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15507 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.39.187 waku 69f84d631b1343ab21bdc6aa4e45d1c5f93973f033a0c88a22a4de02c3882e9f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 69f84d631b13. Setting up logs at ./log/docker/receiving_node1_2024-08-26_15-00-19__341dba95-29e5-4420-a290-390b843e7126__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 15503
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15503/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15503/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.39.187/tcp/15504/p2p/16Uiu2HAkytJRnpR8y62wtnziT3uQv97KQocgcfGWVjtqsym1aizd","/ip4/172.18.39.187/tcp/15505/ws/p2p/16Uiu2HAkytJRnpR8y62wtnziT3uQv97KQocgcfGWVjtqsym1aizd"],"enrUri":"enr:-LO4QC47sSLL8Mwww51Gst7W5mOR9mGiUjHWM2pNCKejjP6lQHyTvs8FHn-GqjWbv3A_rKrn2e_0TK-hfA9uXVSqju4BgmlkgnY0gmlwhKwSJ7uKbXVsdGlhZGRyc4wACgSsEie7BjyR3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJCQQ-WJSVmOXy_cdY8j7U_3LkHUPWdlpmvNqfl8po_eoN0Y3CCPJCDdWRwgjyShXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15503/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_15-00-19__341dba95-29e5-4420-a290-390b843e7126__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.192.174
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['11841', '11842', '11843', '11844', '11845']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 11841:11841 -p 11842:11842 -p 11843:11843 -p 11844:11844 -p 11845:11845 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11843 --rest-port=11841 --tcp-port=11842 --discv5-udp-port=11844 --rest-address=0.0.0.0 --nat=extip:172.18.192.174 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c5c781bf3a5cf14d0940f1592e83deb591e5ee6c18b43edddd8fbdbf548ebf70 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11845 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QC47sSLL8Mwww51Gst7W5mOR9mGiUjHWM2pNCKejjP6lQHyTvs8FHn-GqjWbv3A_rKrn2e_0TK-hfA9uXVSqju4BgmlkgnY0gmlwhKwSJ7uKbXVsdGlhZGRyc4wACgSsEie7BjyR3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJCQQ-WJSVmOXy_cdY8j7U_3LkHUPWdlpmvNqfl8po_eoN0Y3CCPJCDdWRwgjyShXdha3UyAQ --lightpushnode=/ip4/172.18.39.187/tcp/15504/p2p/16Uiu2HAkytJRnpR8y62wtnziT3uQv97KQocgcfGWVjtqsym1aizd --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.192.174 waku beeffd77dbb98d13f07796ca844e14dad2d57fe8b5ce1e7d6f79e096958d6672
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID beeffd77dbb9. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_15-00-19__341dba95-29e5-4420-a290-390b843e7126__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 11841
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11841/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11841/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.192.174/tcp/11842/p2p/16Uiu2HAmSgF94foa3dkFMsJ3ZUt3Vhru9PW9T2fw1oiMA5R6AgfG","/ip4/172.18.192.174/tcp/11843/ws/p2p/16Uiu2HAmSgF94foa3dkFMsJ3ZUt3Vhru9PW9T2fw1oiMA5R6AgfG"],"enrUri":"enr:-LO4QJktSOyEosOnwgggL1TaIR3bZ9OKbFa0xYE-ARtpAcMGKjI1oNPa0PSidSIHtNFa38VhKJbqA2kWBW39QSEWwBIBgmlkgnY0gmlwhKwSwK6KbXVsdGlhZGRyc4wACgSsEsCuBi5D3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPQVeuEjyPRuDyktXMGSWl1zffDSwwaeSA7sjvnL4_KX4N0Y3CCLkKDdWRwgi5EhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11841/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.39.187/tcp/15504/p2p/16Uiu2HAkytJRnpR8y62wtnziT3uQv97KQocgcfGWVjtqsym1aizd"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11841/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724684422489811712}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:11841/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 69f84d631b13
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id beeffd77dbb9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['DBG 2024-08-26 15:00:22.495+00:00 Error dialing                              topics="libp2p dialer" tid=1 file=dialer.nim:330 conn=16U*m1aizd:66cc9886a2ea7ebc317380fc err="Unable to select sub-protocol @[\\"/vac/waku/lightpush/2.0.0-beta1\\"]"', 'DBG 2024-08-26 15:00:22.496+00:00 Received error response from handler       tid=1 file=serverprivate.nim:314 status=503 meth=POST peer=172.17.0.1:58440 uri=/lightpush/v1/message error_status="503 Service Unavailable" error_content_type=text/plain error_message="Failed to request a message push: dial_failure"']