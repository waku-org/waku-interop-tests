[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_pubsub_topics with id: 2024-08-26_14-56-54__5f281e7d-05cc-4e7a-8cf6-a1884b424f79
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_14-56-54__5f281e7d-05cc-4e7a-8cf6-a1884b424f79__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.75.163
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['7034', '7035', '7036', '7037', '7038']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 7034:7034 -p 7035:7035 -p 7036:7036 -p 7037:7037 -p 7038:7038 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7036 --rest-port=7034 --tcp-port=7035 --discv5-udp-port=7037 --rest-address=0.0.0.0 --nat=extip:172.18.75.163 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=055fbad8ab6c1c552fe60b3fb1ac368f84bff9acb5d4d3e17bd8f497fb20923a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7038 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.75.163 waku d5217b4fac5996d76c7cb0a64ad383205328e288a94c063df5467236165ffa18
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d5217b4fac59. Setting up logs at ./log/docker/receiving_node1_2024-08-26_14-56-54__5f281e7d-05cc-4e7a-8cf6-a1884b424f79__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 7034
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7034/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7034/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.75.163/tcp/7035/p2p/16Uiu2HAkzYfdNmwyiqVwFo5wWX1EeZbcwhUZAQ6ESvkVeFMsoqew","/ip4/172.18.75.163/tcp/7036/ws/p2p/16Uiu2HAkzYfdNmwyiqVwFo5wWX1EeZbcwhUZAQ6ESvkVeFMsoqew"],"enrUri":"enr:-LO4QK1ddXl7WyW8xULcJwf1_A6agbKSy7OqgQz_9e_rdgSaTKE9STfyq_I90twZUR_4goIl1VW5DdKWhARH_tJEQvgBgmlkgnY0gmlwhKwSS6OKbXVsdGlhZGRyc4wACgSsEkujBht83QOCcnOFAAMBAACJc2VjcDI1NmsxoQJMFRot5gQRj0VyEybaXDkeZUAa9XkW9fE_nVuRMf5SKIN0Y3CCG3uDdWRwght9hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-26_14-56-54__5f281e7d-05cc-4e7a-8cf6-a1884b424f79__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.224.223
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['3614', '3615', '3616', '3617', '3618']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 3614:3614 -p 3615:3615 -p 3616:3616 -p 3617:3617 -p 3618:3618 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3616 --rest-port=3614 --tcp-port=3615 --discv5-udp-port=3617 --rest-address=0.0.0.0 --nat=extip:172.18.224.223 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9ed76cb8e139ecacbc4ad3b185ebac330cbff5384b8c9acd9ca5ba3cfb2c28df --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3618 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.224.223 waku 6968817ae20856969e1452a6851ada376152cad4a3c1a2e00191abe273d58d5c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 6968817ae208. Setting up logs at ./log/docker/receiving_node2_2024-08-26_14-56-54__5f281e7d-05cc-4e7a-8cf6-a1884b424f79__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 3614
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3614/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3614/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.224.223/tcp/3615/p2p/16Uiu2HAmMGn6VvysvEEDmUYYTDK9GLB9E9PL7BNra31MnUuVSgeo","/ip4/172.18.224.223/tcp/3616/ws/p2p/16Uiu2HAmMGn6VvysvEEDmUYYTDK9GLB9E9PL7BNra31MnUuVSgeo"],"enrUri":"enr:-LO4QOSJMcNNuKjAcGHjyD3QDERhOzkg0amz9QEqGAHfuCx3UlynJcMm-WCv6XOl6g2jQ3mR_Zm13vgUR3f8367GW5oBgmlkgnY0gmlwhKwS4N-KbXVsdGlhZGRyc4wACgSsEuDfBg4g3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOACIw5_eMdc_ewkRb41tzkURH6nfCIa_NqlGLXI6b-dIN0Y3CCDh-DdWRwgg4hhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3614/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.75.163/tcp/7035/p2p/16Uiu2HAkzYfdNmwyiqVwFo5wWX1EeZbcwhUZAQ6ESvkVeFMsoqew"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_14-56-54__5f281e7d-05cc-4e7a-8cf6-a1884b424f79__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.126.49
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['57745', '57746', '57747', '57748', '57749']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 57745:57745 -p 57746:57746 -p 57747:57747 -p 57748:57748 -p 57749:57749 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57747 --rest-port=57745 --tcp-port=57746 --discv5-udp-port=57748 --rest-address=0.0.0.0 --nat=extip:172.18.126.49 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9f19b8b041cdb991a14db9c5c500e3b06cd740bc10de7b25da0b568dac66d727 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57749 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QK1ddXl7WyW8xULcJwf1_A6agbKSy7OqgQz_9e_rdgSaTKE9STfyq_I90twZUR_4goIl1VW5DdKWhARH_tJEQvgBgmlkgnY0gmlwhKwSS6OKbXVsdGlhZGRyc4wACgSsEkujBht83QOCcnOFAAMBAACJc2VjcDI1NmsxoQJMFRot5gQRj0VyEybaXDkeZUAa9XkW9fE_nVuRMf5SKIN0Y3CCG3uDdWRwght9hXdha3UyCQ --lightpushnode=/ip4/172.18.75.163/tcp/7035/p2p/16Uiu2HAkzYfdNmwyiqVwFo5wWX1EeZbcwhUZAQ6ESvkVeFMsoqew --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.126.49 waku 3a99051e7718ba0d59f8e064d86531bb429df6f9dadb8365f0cc1772e5aab485
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3a99051e7718. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_14-56-54__5f281e7d-05cc-4e7a-8cf6-a1884b424f79__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 57745
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57745/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57745/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.126.49/tcp/57746/p2p/16Uiu2HAm1QroosxuZGsQgnXFixi6BmZjoK3V5X2o7RqUQNKf7PQx","/ip4/172.18.126.49/tcp/57747/ws/p2p/16Uiu2HAm1QroosxuZGsQgnXFixi6BmZjoK3V5X2o7RqUQNKf7PQx"],"enrUri":"enr:-LO4QCK0xDqAqEHi__DcZeDew5s7NODsccuHvc4pZMzoObnfYl6uj_y8VVAP915r4d9NVubMj3Ty06lZBfsFqfuYuf8BgmlkgnY0gmlwhKwSfjGKbXVsdGlhZGRyc4wACgSsEn4xBuGT3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJY8Mip7ylDNI3ER5OZZphnWrdindMxaUTbfNaqeu8Y1YN0Y3CC4ZKDdWRwguGUhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57745/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.75.163/tcp/7035/p2p/16Uiu2HAkzYfdNmwyiqVwFo5wWX1EeZbcwhUZAQ6ESvkVeFMsoqew"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57745/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.224.223/tcp/3615/p2p/16Uiu2HAmMGn6VvysvEEDmUYYTDK9GLB9E9PL7BNra31MnUuVSgeo"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7034/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3614/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57745/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724684220403718912}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:57745/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0xabc55d6c61963f5d28ce36995f2f6fabaf47fae69d086f6cdbba547701fe94a6'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d5217b4fac59
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 6968817ae208
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3a99051e7718
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['ERR 2024-08-26 14:57:00.408+00:00 failed to push message                     topics="waku lightpush" tid=1 file=protocol.nim:60 error="Lightpush request has not been published to any peers. msg_hash: 0xabc55d6c61963f5d28ce36995f2f6fabaf47fae69d086f6cdbba547701fe94a6"']