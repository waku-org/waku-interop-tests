[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush_with_a_single_receiving_node with id: 2024-08-26_15-00-41__669dfde2-a51f-460c-a7f4-c55bfcf682b7
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_15-00-41__669dfde2-a51f-460c-a7f4-c55bfcf682b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.159.204
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['51239', '51240', '51241', '51242', '51243']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 51239:51239 -p 51240:51240 -p 51241:51241 -p 51242:51242 -p 51243:51243 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51241 --rest-port=51239 --tcp-port=51240 --discv5-udp-port=51242 --rest-address=0.0.0.0 --nat=extip:172.18.159.204 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e70fedac9c31f294fe7ddf2c39ed53e6a6ea8c12af7cb14bee3abf2c3d8bfae4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51243 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.159.204 waku 51b7b8ec43a9866258b97c37fa4c8c2133e3f7e0a277023094768f2e2aa55268
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 51b7b8ec43a9. Setting up logs at ./log/docker/receiving_node1_2024-08-26_15-00-41__669dfde2-a51f-460c-a7f4-c55bfcf682b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 51239
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51239/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51239/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.159.204/tcp/51240/p2p/16Uiu2HAmJbAUYzf4XrN3FfsS4hCGUN8hWPYRoYFepG6C9jA6Dyy8","/ip4/172.18.159.204/tcp/51241/ws/p2p/16Uiu2HAmJbAUYzf4XrN3FfsS4hCGUN8hWPYRoYFepG6C9jA6Dyy8"],"enrUri":"enr:-LO4QKD2ebGVsCliSMdU-IvRv75STKY1B4FXa8Gzgojud1H8B4LllOyiPoKNMLRJvFBHSDqKyNd6FheqH_u_jTjn9UUBgmlkgnY0gmlwhKwSn8yKbXVsdGlhZGRyc4wACgSsEp_MBsgp3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNYKz83ga2haQ-7TAQOnG_zmtJ0TOtiBk5JUeZdC2uV54N0Y3CCyCiDdWRwgsgqhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_15-00-41__669dfde2-a51f-460c-a7f4-c55bfcf682b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.140.215
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['41159', '41160', '41161', '41162', '41163']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 41159:41159 -p 41160:41160 -p 41161:41161 -p 41162:41162 -p 41163:41163 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41161 --rest-port=41159 --tcp-port=41160 --discv5-udp-port=41162 --rest-address=0.0.0.0 --nat=extip:172.18.140.215 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=76752a14df3fbabc2ba1f5fa2551baafb2abc380b55cdcfb16dd3cc7d9bea8ec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41163 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QKD2ebGVsCliSMdU-IvRv75STKY1B4FXa8Gzgojud1H8B4LllOyiPoKNMLRJvFBHSDqKyNd6FheqH_u_jTjn9UUBgmlkgnY0gmlwhKwSn8yKbXVsdGlhZGRyc4wACgSsEp_MBsgp3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNYKz83ga2haQ-7TAQOnG_zmtJ0TOtiBk5JUeZdC2uV54N0Y3CCyCiDdWRwgsgqhXdha3UyCQ --lightpushnode=/ip4/172.18.159.204/tcp/51240/p2p/16Uiu2HAmJbAUYzf4XrN3FfsS4hCGUN8hWPYRoYFepG6C9jA6Dyy8 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.140.215 waku 384e3c1c89d8bdae6cf762b2ff90f3456e51673ed9e6757e7470de378ae9d0aa
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 384e3c1c89d8. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_15-00-41__669dfde2-a51f-460c-a7f4-c55bfcf682b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 41159
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41159/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41159/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.140.215/tcp/41160/p2p/16Uiu2HAm9ZbqFF5WFv6qaKkoWPBtSvn2ifsEXeZdh15ecBjg4avt","/ip4/172.18.140.215/tcp/41161/ws/p2p/16Uiu2HAm9ZbqFF5WFv6qaKkoWPBtSvn2ifsEXeZdh15ecBjg4avt"],"enrUri":"enr:-LO4QBFL6q87mkOf3QHujqqg4gdJrmcsaeztGwsjm6s57iECQ8UxrOfj995EQHh5yn4gkSP-o9PAybbuuWenX2gARFcBgmlkgnY0gmlwhKwSjNeKbXVsdGlhZGRyc4wACgSsEozXBqDJ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLSC5LxxVdhquVoFmLnd6ZobwZeKkJ94FxvCezldlORAYN0Y3CCoMiDdWRwgqDKhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41159/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.159.204/tcp/51240/p2p/16Uiu2HAmJbAUYzf4XrN3FfsS4hCGUN8hWPYRoYFepG6C9jA6Dyy8"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51239/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41159/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724684444911211008}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41159/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0xb1f739d925db5f99876daed2f629b029d7fbf2806b060e117d7e14d5066eef15'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 51b7b8ec43a9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 384e3c1c89d8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['ERR 2024-08-26 15:00:44.917+00:00 failed to push message                     topics="waku lightpush" tid=1 file=protocol.nim:60 error="Lightpush request has not been published to any peers. msg_hash: 0xb1f739d925db5f99876daed2f629b029d7fbf2806b060e117d7e14d5066eef15"']
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush_with_a_single_receiving_node with id: 2024-08-26_15-00-48__e90eaff4-9121-4c76-bd7d-43a478fe8381
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_15-00-48__e90eaff4-9121-4c76-bd7d-43a478fe8381__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.164.90
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['38431', '38432', '38433', '38434', '38435']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 38431:38431 -p 38432:38432 -p 38433:38433 -p 38434:38434 -p 38435:38435 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38433 --rest-port=38431 --tcp-port=38432 --discv5-udp-port=38434 --rest-address=0.0.0.0 --nat=extip:172.18.164.90 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b4ecfcdb4f3cf89bbdc2ce65fb4a6a91b56d34bcf1dab421ad926ff660ffa72d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38435 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.164.90 waku 8dad6ca3e954dbc09f2cf2fa213b9868cd0f6a3b1fa0fd84aa3e43322ddd6c4b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 8dad6ca3e954. Setting up logs at ./log/docker/receiving_node1_2024-08-26_15-00-48__e90eaff4-9121-4c76-bd7d-43a478fe8381__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 38431
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38431/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38431/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.164.90/tcp/38432/p2p/16Uiu2HAmQxQ4FyBpCDevav5y5vAvTgwKD5LyGiMWSUVJzp5HpEsa","/ip4/172.18.164.90/tcp/38433/ws/p2p/16Uiu2HAmQxQ4FyBpCDevav5y5vAvTgwKD5LyGiMWSUVJzp5HpEsa"],"enrUri":"enr:-LO4QD9DkOqnedQxtUlaLR2ZqOhYWL0YUadeIRxTDqUvm02aYuEj3koLcXna6DejtBmkbALnfehhEVntESNMm2_rQMMBgmlkgnY0gmlwhKwSpFqKbXVsdGlhZGRyc4wACgSsEqRaBpYh3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO2wev3Jreupn7INdw3aD9JFYCxRuZdT182i_fF1aOUYYN0Y3CCliCDdWRwgpYihXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_15-00-48__e90eaff4-9121-4c76-bd7d-43a478fe8381__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.111.93
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['5604', '5605', '5606', '5607', '5608']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 5604:5604 -p 5605:5605 -p 5606:5606 -p 5607:5607 -p 5608:5608 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5606 --rest-port=5604 --tcp-port=5605 --discv5-udp-port=5607 --rest-address=0.0.0.0 --nat=extip:172.18.111.93 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c3647d9c6fe2eea54d4c409f2a0c65b9debcdbffbda2c08dbeb6beef71f319f6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5608 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QD9DkOqnedQxtUlaLR2ZqOhYWL0YUadeIRxTDqUvm02aYuEj3koLcXna6DejtBmkbALnfehhEVntESNMm2_rQMMBgmlkgnY0gmlwhKwSpFqKbXVsdGlhZGRyc4wACgSsEqRaBpYh3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO2wev3Jreupn7INdw3aD9JFYCxRuZdT182i_fF1aOUYYN0Y3CCliCDdWRwgpYihXdha3UyCQ --lightpushnode=/ip4/172.18.164.90/tcp/38432/p2p/16Uiu2HAmQxQ4FyBpCDevav5y5vAvTgwKD5LyGiMWSUVJzp5HpEsa --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.111.93 waku 2a170ce6b74c41479b22f71a2075af08a10ac7807a214b04f5a3ce154b64cf93
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2a170ce6b74c. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_15-00-48__e90eaff4-9121-4c76-bd7d-43a478fe8381__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 5604
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5604/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5604/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.111.93/tcp/5605/p2p/16Uiu2HAkumKR5BxG9gJ7JMzrhy4XBRgWTdVkrAYQAiarUpM1rjXd","/ip4/172.18.111.93/tcp/5606/ws/p2p/16Uiu2HAkumKR5BxG9gJ7JMzrhy4XBRgWTdVkrAYQAiarUpM1rjXd"],"enrUri":"enr:-LO4QNKk_uUj8cX5NXX0ZFFv-hhmfhQOUUNsY18ySJDE2zlkFOxCmutjAFfiUrHMXRKd9XoSCFRpzyGqqdtfh2qH8P8BgmlkgnY0gmlwhKwSb12KbXVsdGlhZGRyc4wACgSsEm9dBhXm3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIFCF09_5pDvhLxFGML5un_sp88KeryJCJA4K-6pbgJQIN0Y3CCFeWDdWRwghXnhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5604/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.164.90/tcp/38432/p2p/16Uiu2HAmQxQ4FyBpCDevav5y5vAvTgwKD5LyGiMWSUVJzp5HpEsa"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38431/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5604/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724684451897206272}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:5604/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0xcfeb86915995dbb7f8410958157ddf64b52ec31f3f0ee133cf0dd5fcc1ad4fd8'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 8dad6ca3e954
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2a170ce6b74c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['ERR 2024-08-26 15:00:51.908+00:00 failed to push message                     topics="waku lightpush" tid=1 file=protocol.nim:60 error="Lightpush request has not been published to any peers. msg_hash: 0xcfeb86915995dbb7f8410958157ddf64b52ec31f3f0ee133cf0dd5fcc1ad4fd8"']
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush_with_a_single_receiving_node with id: 2024-08-26_15-00-56__dadfef1c-dfa6-45d7-ba9d-11bbd717ad59
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_15-00-56__dadfef1c-dfa6-45d7-ba9d-11bbd717ad59__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.31.98
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['9777', '9778', '9779', '9780', '9781']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 9777:9777 -p 9778:9778 -p 9779:9779 -p 9780:9780 -p 9781:9781 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9779 --rest-port=9777 --tcp-port=9778 --discv5-udp-port=9780 --rest-address=0.0.0.0 --nat=extip:172.18.31.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f3f9edee3afb8b5eacdeea62b79d18e8ce9fddfa5bd22b6afab5b3b7359b681d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9781 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.132.115
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['34491', '34492', '34493', '34494', '34495']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 34491:34491 -p 34492:34492 -p 34493:34493 -p 34494:34494 -p 34495:34495 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34493 --rest-port=34491 --tcp-port=34492 --discv5-udp-port=34494 --rest-address=0.0.0.0 --nat=extip:172.18.132.115 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ecdb6b68bcc8cf60501cc578dba4b7ea4836ab6c4be7de98bfbcf1dfb7f2fdcd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34495 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.132.115 waku eb97b73639f41ecde75c3113baf44a676cac3a2f26b7920e9c2b4b48d572e52a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID eb97b73639f4. Setting up logs at ./log/docker/receiving_node1_2024-08-26_15-00-56__dadfef1c-dfa6-45d7-ba9d-11bbd717ad59__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 34491
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34491/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34491/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.132.115/tcp/34492/p2p/16Uiu2HAmHWGLGgdMRd9o9nJhbhf6BSSwv3CyU29aooZSpWfoH2EW","/ip4/172.18.132.115/tcp/34493/ws/p2p/16Uiu2HAmHWGLGgdMRd9o9nJhbhf6BSSwv3CyU29aooZSpWfoH2EW"],"enrUri":"enr:-LO4QJgtySVtgxW9WWhkEgZGJhGmJzeCvMp-cZGct4ulCLuiAAFfZxitSUrzsJKASUHBNZ6esC5MZnFzgv5RHxxmsaoBgmlkgnY0gmlwhKwShHOKbXVsdGlhZGRyc4wACgSsEoRzBoa93QOCcnOFAAMBAACJc2VjcDI1NmsxoQNIDkdcGg6kp-mNLRmdDZBl09kZPK8Enrky-6W09IXVE4N0Y3CChryDdWRwgoa-hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_15-00-56__dadfef1c-dfa6-45d7-ba9d-11bbd717ad59__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.14.133
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['12084', '12085', '12086', '12087', '12088']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 12084:12084 -p 12085:12085 -p 12086:12086 -p 12087:12087 -p 12088:12088 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12086 --rest-port=12084 --tcp-port=12085 --discv5-udp-port=12087 --rest-address=0.0.0.0 --nat=extip:172.18.14.133 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1be85682daea7a7e70d7f4cfbee520b7fc8ba5bd4ba7dafe8fd8da92d51fc2e0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12088 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QJgtySVtgxW9WWhkEgZGJhGmJzeCvMp-cZGct4ulCLuiAAFfZxitSUrzsJKASUHBNZ6esC5MZnFzgv5RHxxmsaoBgmlkgnY0gmlwhKwShHOKbXVsdGlhZGRyc4wACgSsEoRzBoa93QOCcnOFAAMBAACJc2VjcDI1NmsxoQNIDkdcGg6kp-mNLRmdDZBl09kZPK8Enrky-6W09IXVE4N0Y3CChryDdWRwgoa-hXdha3UyCQ --lightpushnode=/ip4/172.18.132.115/tcp/34492/p2p/16Uiu2HAmHWGLGgdMRd9o9nJhbhf6BSSwv3CyU29aooZSpWfoH2EW --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.14.133 waku 470078cccaa1acf80bd51e113b7c7cf49d5f1842b62cfded3e9eace0294fbabc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 470078cccaa1. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_15-00-56__dadfef1c-dfa6-45d7-ba9d-11bbd717ad59__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 12084
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12084/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12084/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.14.133/tcp/12085/p2p/16Uiu2HAmQCP4Y5Szs3URBiXDt76uog3TrcUirtGscQkRaGMgwT6r","/ip4/172.18.14.133/tcp/12086/ws/p2p/16Uiu2HAmQCP4Y5Szs3URBiXDt76uog3TrcUirtGscQkRaGMgwT6r"],"enrUri":"enr:-LO4QFBD93tpCSosBk7HVxBmidz83z2WRTMG_7PRjPNjaNtnE4xuJiqm-HhXJfHUNNki9x-6KCkhfjCVHPAAerERuFIBgmlkgnY0gmlwhKwSDoWKbXVsdGlhZGRyc4wACgSsEg6FBi823QOCcnOFAAMBAACJc2VjcDI1NmsxoQOrez2obaAe03fmg99KLAgJykf69fRMmQjlPI57UVZrm4N0Y3CCLzWDdWRwgi83hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12084/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.132.115/tcp/34492/p2p/16Uiu2HAmHWGLGgdMRd9o9nJhbhf6BSSwv3CyU29aooZSpWfoH2EW"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34491/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12084/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724684459511879680}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:12084/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0xe21e8e7af366d7b125553d00ee5fa0fce32693536d7af010881a3a6aa63cc677'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id eb97b73639f4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 470078cccaa1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['ERR 2024-08-26 15:00:59.518+00:00 failed to push message                     topics="waku lightpush" tid=1 file=protocol.nim:60 error="Lightpush request has not been published to any peers. msg_hash: 0xe21e8e7af366d7b125553d00ee5fa0fce32693536d7af010881a3a6aa63cc677"']