[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_meta with id: 2024-08-26_14-58-04__789157ce-fc7e-45f6-b108-b9f0d50d0ff7
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_14-58-04__789157ce-fc7e-45f6-b108-b9f0d50d0ff7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.240.218
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['4242', '4243', '4244', '4245', '4246']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 4242:4242 -p 4243:4243 -p 4244:4244 -p 4245:4245 -p 4246:4246 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4244 --rest-port=4242 --tcp-port=4243 --discv5-udp-port=4245 --rest-address=0.0.0.0 --nat=extip:172.18.240.218 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eba44ce050193cee151befb4ffb7a6ed923de33b3c13dc093db3cbe97bc452eb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4246 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.240.218 waku 7e5497253f48c5d24623a0f33ba7d67d5586cb42a93b4e340f1068181f39fb99
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7e5497253f48. Setting up logs at ./log/docker/receiving_node1_2024-08-26_14-58-04__789157ce-fc7e-45f6-b108-b9f0d50d0ff7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 4242
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4242/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4242/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.240.218/tcp/4243/p2p/16Uiu2HAmL8LHoaw4BpeuipyTqoAJ4sK1uttCeE3j8WZTZhEDR1Gk","/ip4/172.18.240.218/tcp/4244/ws/p2p/16Uiu2HAmL8LHoaw4BpeuipyTqoAJ4sK1uttCeE3j8WZTZhEDR1Gk"],"enrUri":"enr:-LO4QKRALeidXm1KydMxGS1ZMG9SidglrmW5ej63SWhSYsyTATHzumd4m81zEg0qQgmdSUkBxvQOzV9FkTpLeCsFkWwBgmlkgnY0gmlwhKwS8NqKbXVsdGlhZGRyc4wACgSsEvDaBhCU3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNvAwlUdMP0EX_FDK1TZidxYAUKJRnFzeK_OjggGvJ9MYN0Y3CCEJODdWRwghCVhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-26_14-58-04__789157ce-fc7e-45f6-b108-b9f0d50d0ff7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.52.102
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['32534', '32535', '32536', '32537', '32538']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 32534:32534 -p 32535:32535 -p 32536:32536 -p 32537:32537 -p 32538:32538 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32536 --rest-port=32534 --tcp-port=32535 --discv5-udp-port=32537 --rest-address=0.0.0.0 --nat=extip:172.18.52.102 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5fdfe084a96ed6cdbcfabb10a3fee65efefa25ab1cf917cf1b02dad4df5f6dd1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32538 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.52.102 waku 1d4bd6bf0a24733aab5903ebee160be4994a69b09516ec366c5f95320837a9a5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 1d4bd6bf0a24. Setting up logs at ./log/docker/receiving_node2_2024-08-26_14-58-04__789157ce-fc7e-45f6-b108-b9f0d50d0ff7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 32534
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32534/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32534/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.52.102/tcp/32535/p2p/16Uiu2HAmFt7BdepzUEqDneQcc1YGXsvSZajnq7oDnspj3tzb5BDH","/ip4/172.18.52.102/tcp/32536/ws/p2p/16Uiu2HAmFt7BdepzUEqDneQcc1YGXsvSZajnq7oDnspj3tzb5BDH"],"enrUri":"enr:-LO4QAoPOz7sktLrNy_H1WmerIDHkyL3XPoyzxeIbpk4kKHvI4J6pVBX3UJY6REVyRmqVI8xg4Z1OxUjNv4JUk6vJkIBgmlkgnY0gmlwhKwSNGaKbXVsdGlhZGRyc4wACgSsEjRmBn8Y3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMv71aEZOhXU_PdSjSLFYJTy6ZFyj5OhVqlpU3t0CgvUIN0Y3CCfxeDdWRwgn8ZhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32534/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.240.218/tcp/4243/p2p/16Uiu2HAmL8LHoaw4BpeuipyTqoAJ4sK1uttCeE3j8WZTZhEDR1Gk"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_14-58-04__789157ce-fc7e-45f6-b108-b9f0d50d0ff7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.2.58
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['53020', '53021', '53022', '53023', '53024']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 53020:53020 -p 53021:53021 -p 53022:53022 -p 53023:53023 -p 53024:53024 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53022 --rest-port=53020 --tcp-port=53021 --discv5-udp-port=53023 --rest-address=0.0.0.0 --nat=extip:172.18.2.58 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a05feedacfb93aeb33b4f3d7b2aa04408be4ee8b3cb09b6c4f978155acdb0cfc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53024 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QKRALeidXm1KydMxGS1ZMG9SidglrmW5ej63SWhSYsyTATHzumd4m81zEg0qQgmdSUkBxvQOzV9FkTpLeCsFkWwBgmlkgnY0gmlwhKwS8NqKbXVsdGlhZGRyc4wACgSsEvDaBhCU3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNvAwlUdMP0EX_FDK1TZidxYAUKJRnFzeK_OjggGvJ9MYN0Y3CCEJODdWRwghCVhXdha3UyCQ --lightpushnode=/ip4/172.18.240.218/tcp/4243/p2p/16Uiu2HAmL8LHoaw4BpeuipyTqoAJ4sK1uttCeE3j8WZTZhEDR1Gk --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.2.58 waku c4793e9fe69f25b673dbed871fc4c3dcfa9be349a52716d0ebc7b3e518f35afb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c4793e9fe69f. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_14-58-04__789157ce-fc7e-45f6-b108-b9f0d50d0ff7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 53020
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53020/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53020/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.2.58/tcp/53021/p2p/16Uiu2HAmRStWvqgUxW9EqP5TYRNQQm1xmG5wSSVwnUDzwwdumzvi","/ip4/172.18.2.58/tcp/53022/ws/p2p/16Uiu2HAmRStWvqgUxW9EqP5TYRNQQm1xmG5wSSVwnUDzwwdumzvi"],"enrUri":"enr:-LO4QHzWlJ-l4vcsASM26QElx_84ciwFkTLHTN3U2iUl0eHLdRSCAKT2I7Y3sJX2RT_CHfIBlJBT9Uhfdnzj8mr3rIYBgmlkgnY0gmlwhKwSAjqKbXVsdGlhZGRyc4wACgSsEgI6Bs8e3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO-Dl0w5FXH_7Vayrg5BvSZXzXgbehJI4-VfIen5Xw3T4N0Y3CCzx2DdWRwgs8fhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53020/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.240.218/tcp/4243/p2p/16Uiu2HAmL8LHoaw4BpeuipyTqoAJ4sK1uttCeE3j8WZTZhEDR1Gk"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53020/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.52.102/tcp/32535/p2p/16Uiu2HAmFt7BdepzUEqDneQcc1YGXsvSZajnq7oDnspj3tzb5BDH"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4242/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32534/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53020/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724684289183781632, "meta": "Light push works!!"}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:53020/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7e5497253f48
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1d4bd6bf0a24
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c4793e9fe69f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['DBG 2024-08-26 14:58:09.186+00:00 Received error response from handler       tid=1 file=serverprivate.nim:314 status=400 meth=POST peer=172.17.0.1:33544 uri=/lightpush/v1/message error_status="400 Bad Request" error_content_type=text/plain error_message="Invalid message: Incorrect base64 string"']
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_meta with id: 2024-08-26_14-58-18__e2986822-21b2-4d39-aa8a-8e9ad8ade837
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_14-58-18__e2986822-21b2-4d39-aa8a-8e9ad8ade837__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.60.121
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['10621', '10622', '10623', '10624', '10625']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 10621:10621 -p 10622:10622 -p 10623:10623 -p 10624:10624 -p 10625:10625 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10623 --rest-port=10621 --tcp-port=10622 --discv5-udp-port=10624 --rest-address=0.0.0.0 --nat=extip:172.18.60.121 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d1f3aedd89aec0fed1ade140cbb9ac5d5cf5fc2761ce961b9e1cde8eaf37edff --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10625 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.60.121 waku 718faff20e4ef4f0e2570a373f05113c350f5725c20bcf6f1f4086b99a2474a5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 718faff20e4e. Setting up logs at ./log/docker/receiving_node1_2024-08-26_14-58-18__e2986822-21b2-4d39-aa8a-8e9ad8ade837__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 10621
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10621/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10621/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.60.121/tcp/10622/p2p/16Uiu2HAkxyVeWquQfRsrPE8QQ1Zpwkkeu82ydpTsVM9ouDdLvwRe","/ip4/172.18.60.121/tcp/10623/ws/p2p/16Uiu2HAkxyVeWquQfRsrPE8QQ1Zpwkkeu82ydpTsVM9ouDdLvwRe"],"enrUri":"enr:-LO4QPZPwPRKS8it_ChjDd4ZLwsTKo97j8lUEdjNgoj9yupbdhO--FPHkBokD6M_0_wuaZPku6E3oSj_jikjmCPlyCQBgmlkgnY0gmlwhKwSPHmKbXVsdGlhZGRyc4wACgSsEjx5Bil_3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI0ufa8GrDcoG-v4EvQzxj4-luBWayCyJl5b_JuijhzJYN0Y3CCKX6DdWRwgimAhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-26_14-58-18__e2986822-21b2-4d39-aa8a-8e9ad8ade837__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.154.232
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['12734', '12735', '12736', '12737', '12738']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 12734:12734 -p 12735:12735 -p 12736:12736 -p 12737:12737 -p 12738:12738 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12736 --rest-port=12734 --tcp-port=12735 --discv5-udp-port=12737 --rest-address=0.0.0.0 --nat=extip:172.18.154.232 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=51d16e62e66c0a751fbdb4143df7f0e6424da2ba8153afb854b1cabf9c039ce5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12738 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.154.232 waku e9a6d470051734968253849baff9656ee5880e0564c24e03babd93df8a545606
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e9a6d4700517. Setting up logs at ./log/docker/receiving_node2_2024-08-26_14-58-18__e2986822-21b2-4d39-aa8a-8e9ad8ade837__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 12734
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12734/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12734/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.154.232/tcp/12735/p2p/16Uiu2HAkyAFk6tFii8sidb8hv2ntcRG89YjBmoqciRrzohh7jPff","/ip4/172.18.154.232/tcp/12736/ws/p2p/16Uiu2HAkyAFk6tFii8sidb8hv2ntcRG89YjBmoqciRrzohh7jPff"],"enrUri":"enr:-LO4QFMphTwbX73tlfXlzl_l768LyqODiIcmj9mAsAX-DFneJxgVppDa6TbeevwrMdGHRhSVVxKrQ9n0SUejst0ZKuUBgmlkgnY0gmlwhKwSmuiKbXVsdGlhZGRyc4wACgSsEproBjHA3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI3e6G745lhiWFQinM654-CyyJf-QuWmharl_vN8OXryoN0Y3CCMb-DdWRwgjHBhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12734/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.60.121/tcp/10622/p2p/16Uiu2HAkxyVeWquQfRsrPE8QQ1Zpwkkeu82ydpTsVM9ouDdLvwRe"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_14-58-18__e2986822-21b2-4d39-aa8a-8e9ad8ade837__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.140.192
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['11235', '11236', '11237', '11238', '11239']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 11235:11235 -p 11236:11236 -p 11237:11237 -p 11238:11238 -p 11239:11239 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11237 --rest-port=11235 --tcp-port=11236 --discv5-udp-port=11238 --rest-address=0.0.0.0 --nat=extip:172.18.140.192 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e04becabc41df5bf6e44fd15ac23cbaee74ad8cfb5a9253fef730d106ebaadcd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11239 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QPZPwPRKS8it_ChjDd4ZLwsTKo97j8lUEdjNgoj9yupbdhO--FPHkBokD6M_0_wuaZPku6E3oSj_jikjmCPlyCQBgmlkgnY0gmlwhKwSPHmKbXVsdGlhZGRyc4wACgSsEjx5Bil_3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI0ufa8GrDcoG-v4EvQzxj4-luBWayCyJl5b_JuijhzJYN0Y3CCKX6DdWRwgimAhXdha3UyCQ --lightpushnode=/ip4/172.18.60.121/tcp/10622/p2p/16Uiu2HAkxyVeWquQfRsrPE8QQ1Zpwkkeu82ydpTsVM9ouDdLvwRe --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.140.192 waku 2379be0471dd5d0b8d944e715d3418f9e934b2bc461a85210774a0a5af570186
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2379be0471dd. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_14-58-18__e2986822-21b2-4d39-aa8a-8e9ad8ade837__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 11235
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11235/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11235/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.140.192/tcp/11236/p2p/16Uiu2HAm8ZMmvBke6xZWPWc8xySoVgkdJ7F8FTmNDLDLd6yFVfyJ","/ip4/172.18.140.192/tcp/11237/ws/p2p/16Uiu2HAm8ZMmvBke6xZWPWc8xySoVgkdJ7F8FTmNDLDLd6yFVfyJ"],"enrUri":"enr:-LO4QBugdhWAXcPBJHVfFp7r6YbB_4fK5RgVe1SlJpTX1eOuboHdk3PatZfzoaC6ViTX4EbDfT49wc6oaMN6gy_jHW8BgmlkgnY0gmlwhKwSjMCKbXVsdGlhZGRyc4wACgSsEozABivl3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLDH_4JpC93HzMQkeDjZ2-c1Tgo8SOpAvtrDeiB32BOmYN0Y3CCK-SDdWRwgivmhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11235/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.60.121/tcp/10622/p2p/16Uiu2HAkxyVeWquQfRsrPE8QQ1Zpwkkeu82ydpTsVM9ouDdLvwRe"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11235/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.154.232/tcp/12735/p2p/16Uiu2HAkyAFk6tFii8sidb8hv2ntcRG89YjBmoqciRrzohh7jPff"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10621/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12734/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11235/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724684303103712000, "meta": "Light push works!!"}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:11235/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 718faff20e4e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e9a6d4700517
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2379be0471dd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['DBG 2024-08-26 14:58:23.106+00:00 Received error response from handler       tid=1 file=serverprivate.nim:314 status=400 meth=POST peer=172.17.0.1:35756 uri=/lightpush/v1/message error_status="400 Bad Request" error_content_type=text/plain error_message="Invalid message: Incorrect base64 string"']
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_meta with id: 2024-08-26_14-58-32__c688dd73-1288-42d2-9d1a-44bf7a062e95
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_14-58-32__c688dd73-1288-42d2-9d1a-44bf7a062e95__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.73.64
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['33408', '33409', '33410', '33411', '33412']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 33408:33408 -p 33409:33409 -p 33410:33410 -p 33411:33411 -p 33412:33412 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33410 --rest-port=33408 --tcp-port=33409 --discv5-udp-port=33411 --rest-address=0.0.0.0 --nat=extip:172.18.73.64 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=acca27ed8dffc9da56d10cffdcfa704c12ffa482dbba5eadaebfab78d62ea573 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33412 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.73.64 waku 089ed6c7665a2f28f2059174b5534a887fc656a19df3141fb7757044a4501fef
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 089ed6c7665a. Setting up logs at ./log/docker/receiving_node1_2024-08-26_14-58-32__c688dd73-1288-42d2-9d1a-44bf7a062e95__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 33408
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33408/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33408/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.73.64/tcp/33409/p2p/16Uiu2HAkvfWwmXBvCMDfiJb3bt3woXYdrQj4aaeDsCPFGCKraZE4","/ip4/172.18.73.64/tcp/33410/ws/p2p/16Uiu2HAkvfWwmXBvCMDfiJb3bt3woXYdrQj4aaeDsCPFGCKraZE4"],"enrUri":"enr:-LO4QOJ-mIRkKE_UQa8RAcvTqwTU3h1P8H45zjis0-vBK2Z-Va26jLz0lmTKsmMWt54pNSKDHW7HooRvGTvGpuhkSR8BgmlkgnY0gmlwhKwSSUCKbXVsdGlhZGRyc4wACgSsEklABoKC3QOCcnOFAAMBAACJc2VjcDI1NmsxoQISZ5o5nzmKw_elWpzvLWofYN0QfqHl0-Z_iuEaqfI0LYN0Y3CCgoGDdWRwgoKDhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-26_14-58-32__c688dd73-1288-42d2-9d1a-44bf7a062e95__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.67.159
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['64339', '64340', '64341', '64342', '64343']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 64339:64339 -p 64340:64340 -p 64341:64341 -p 64342:64342 -p 64343:64343 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64341 --rest-port=64339 --tcp-port=64340 --discv5-udp-port=64342 --rest-address=0.0.0.0 --nat=extip:172.18.67.159 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9fc0e6ae74f4f826ddeafae6f261b15bba5464f91991f2dd4d93ddbe0bf70f44 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64343 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.67.159 waku 8d1d890c7395986907f9818ce3b4f092248b59503f9dbc979efab87d6814a226
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 8d1d890c7395. Setting up logs at ./log/docker/receiving_node2_2024-08-26_14-58-32__c688dd73-1288-42d2-9d1a-44bf7a062e95__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 64339
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64339/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64339/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.67.159/tcp/64340/p2p/16Uiu2HAmKfhnMxPftpRPeP7H1GR3ZekvhthkjhqQgpqdz9WTiTZS","/ip4/172.18.67.159/tcp/64341/ws/p2p/16Uiu2HAmKfhnMxPftpRPeP7H1GR3ZekvhthkjhqQgpqdz9WTiTZS"],"enrUri":"enr:-LO4QFtn9exE-Wj3vDt9LAMBHOdnKkSpFlbKf6gj8ExpyDh5GMe5EbIBMFZHwriIjc0A9BO-_QlJ-ynaQnk-i6ttlBEBgmlkgnY0gmlwhKwSQ5-KbXVsdGlhZGRyc4wACgSsEkOfBvtV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNoMKf3AF6KuBt29NvQTWe1kN1iUjjSoNvtlOWBo_9kqYN0Y3CC-1SDdWRwgvtWhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64339/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.73.64/tcp/33409/p2p/16Uiu2HAkvfWwmXBvCMDfiJb3bt3woXYdrQj4aaeDsCPFGCKraZE4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_14-58-32__c688dd73-1288-42d2-9d1a-44bf7a062e95__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.202.238
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['29486', '29487', '29488', '29489', '29490']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 29486:29486 -p 29487:29487 -p 29488:29488 -p 29489:29489 -p 29490:29490 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29488 --rest-port=29486 --tcp-port=29487 --discv5-udp-port=29489 --rest-address=0.0.0.0 --nat=extip:172.18.202.238 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3e3f103aaa2d8c88ba2b6dfc4bf4b776708d6bbf5bdb27bc3b1ef1ac632dee50 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29490 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QOJ-mIRkKE_UQa8RAcvTqwTU3h1P8H45zjis0-vBK2Z-Va26jLz0lmTKsmMWt54pNSKDHW7HooRvGTvGpuhkSR8BgmlkgnY0gmlwhKwSSUCKbXVsdGlhZGRyc4wACgSsEklABoKC3QOCcnOFAAMBAACJc2VjcDI1NmsxoQISZ5o5nzmKw_elWpzvLWofYN0QfqHl0-Z_iuEaqfI0LYN0Y3CCgoGDdWRwgoKDhXdha3UyCQ --lightpushnode=/ip4/172.18.73.64/tcp/33409/p2p/16Uiu2HAkvfWwmXBvCMDfiJb3bt3woXYdrQj4aaeDsCPFGCKraZE4 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.202.238 waku fd07078928d20374c8fdfb84272dde87c6238287fa9d2f062e96f588a5458988
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID fd07078928d2. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_14-58-32__c688dd73-1288-42d2-9d1a-44bf7a062e95__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 29486
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29486/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29486/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.202.238/tcp/29487/p2p/16Uiu2HAmPsWoZaCN1sD814mCjxA1JpwrWTJor5L2WK4QRUKT28EV","/ip4/172.18.202.238/tcp/29488/ws/p2p/16Uiu2HAmPsWoZaCN1sD814mCjxA1JpwrWTJor5L2WK4QRUKT28EV"],"enrUri":"enr:-LO4QDKnBzpStEFgmV4CRKW7DXgWxNfF_9hw0hX16ccTx-dddZ2N0GUMuMTSye453JkPqXAjEsGnp6Xi4xx9r8bYtS8BgmlkgnY0gmlwhKwSyu6KbXVsdGlhZGRyc4wACgSsEsruBnMw3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOmpfWNSDNFNqjO6cSIONC9KSSFlE2ycxqt3N1K3kkb0oN0Y3CCcy-DdWRwgnMxhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29486/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.73.64/tcp/33409/p2p/16Uiu2HAkvfWwmXBvCMDfiJb3bt3woXYdrQj4aaeDsCPFGCKraZE4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29486/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.67.159/tcp/64340/p2p/16Uiu2HAmKfhnMxPftpRPeP7H1GR3ZekvhthkjhqQgpqdz9WTiTZS"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33408/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64339/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29486/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724684317388684544, "meta": "Light push works!!"}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:29486/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 089ed6c7665a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 8d1d890c7395
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id fd07078928d2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['DBG 2024-08-26 14:58:37.397+00:00 Received error response from handler       tid=1 file=serverprivate.nim:314 status=400 meth=POST peer=172.17.0.1:43550 uri=/lightpush/v1/message error_status="400 Bad Request" error_content_type=text/plain error_message="Invalid message: Incorrect base64 string"']