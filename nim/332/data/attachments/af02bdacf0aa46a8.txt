[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_pubsub_topics with id: 2024-08-26_14-56-54__5f281e7d-05cc-4e7a-8cf6-a1884b424f79
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_14-56-54__5f281e7d-05cc-4e7a-8cf6-a1884b424f79__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.75.163
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['7034', '7035', '7036', '7037', '7038']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 7034:7034 -p 7035:7035 -p 7036:7036 -p 7037:7037 -p 7038:7038 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7036 --rest-port=7034 --tcp-port=7035 --discv5-udp-port=7037 --rest-address=0.0.0.0 --nat=extip:172.18.75.163 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=055fbad8ab6c1c552fe60b3fb1ac368f84bff9acb5d4d3e17bd8f497fb20923a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7038 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.75.163 waku d5217b4fac5996d76c7cb0a64ad383205328e288a94c063df5467236165ffa18
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d5217b4fac59. Setting up logs at ./log/docker/receiving_node1_2024-08-26_14-56-54__5f281e7d-05cc-4e7a-8cf6-a1884b424f79__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 7034
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7034/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7034/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.75.163/tcp/7035/p2p/16Uiu2HAkzYfdNmwyiqVwFo5wWX1EeZbcwhUZAQ6ESvkVeFMsoqew","/ip4/172.18.75.163/tcp/7036/ws/p2p/16Uiu2HAkzYfdNmwyiqVwFo5wWX1EeZbcwhUZAQ6ESvkVeFMsoqew"],"enrUri":"enr:-LO4QK1ddXl7WyW8xULcJwf1_A6agbKSy7OqgQz_9e_rdgSaTKE9STfyq_I90twZUR_4goIl1VW5DdKWhARH_tJEQvgBgmlkgnY0gmlwhKwSS6OKbXVsdGlhZGRyc4wACgSsEkujBht83QOCcnOFAAMBAACJc2VjcDI1NmsxoQJMFRot5gQRj0VyEybaXDkeZUAa9XkW9fE_nVuRMf5SKIN0Y3CCG3uDdWRwght9hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-26_14-56-54__5f281e7d-05cc-4e7a-8cf6-a1884b424f79__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.224.223
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['3614', '3615', '3616', '3617', '3618']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 3614:3614 -p 3615:3615 -p 3616:3616 -p 3617:3617 -p 3618:3618 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3616 --rest-port=3614 --tcp-port=3615 --discv5-udp-port=3617 --rest-address=0.0.0.0 --nat=extip:172.18.224.223 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9ed76cb8e139ecacbc4ad3b185ebac330cbff5384b8c9acd9ca5ba3cfb2c28df --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3618 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.224.223 waku 6968817ae20856969e1452a6851ada376152cad4a3c1a2e00191abe273d58d5c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 6968817ae208. Setting up logs at ./log/docker/receiving_node2_2024-08-26_14-56-54__5f281e7d-05cc-4e7a-8cf6-a1884b424f79__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 3614
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3614/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3614/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.224.223/tcp/3615/p2p/16Uiu2HAmMGn6VvysvEEDmUYYTDK9GLB9E9PL7BNra31MnUuVSgeo","/ip4/172.18.224.223/tcp/3616/ws/p2p/16Uiu2HAmMGn6VvysvEEDmUYYTDK9GLB9E9PL7BNra31MnUuVSgeo"],"enrUri":"enr:-LO4QOSJMcNNuKjAcGHjyD3QDERhOzkg0amz9QEqGAHfuCx3UlynJcMm-WCv6XOl6g2jQ3mR_Zm13vgUR3f8367GW5oBgmlkgnY0gmlwhKwS4N-KbXVsdGlhZGRyc4wACgSsEuDfBg4g3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOACIw5_eMdc_ewkRb41tzkURH6nfCIa_NqlGLXI6b-dIN0Y3CCDh-DdWRwgg4hhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3614/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.75.163/tcp/7035/p2p/16Uiu2HAkzYfdNmwyiqVwFo5wWX1EeZbcwhUZAQ6ESvkVeFMsoqew"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_14-56-54__5f281e7d-05cc-4e7a-8cf6-a1884b424f79__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.126.49
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['57745', '57746', '57747', '57748', '57749']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 57745:57745 -p 57746:57746 -p 57747:57747 -p 57748:57748 -p 57749:57749 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57747 --rest-port=57745 --tcp-port=57746 --discv5-udp-port=57748 --rest-address=0.0.0.0 --nat=extip:172.18.126.49 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9f19b8b041cdb991a14db9c5c500e3b06cd740bc10de7b25da0b568dac66d727 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57749 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QK1ddXl7WyW8xULcJwf1_A6agbKSy7OqgQz_9e_rdgSaTKE9STfyq_I90twZUR_4goIl1VW5DdKWhARH_tJEQvgBgmlkgnY0gmlwhKwSS6OKbXVsdGlhZGRyc4wACgSsEkujBht83QOCcnOFAAMBAACJc2VjcDI1NmsxoQJMFRot5gQRj0VyEybaXDkeZUAa9XkW9fE_nVuRMf5SKIN0Y3CCG3uDdWRwght9hXdha3UyCQ --lightpushnode=/ip4/172.18.75.163/tcp/7035/p2p/16Uiu2HAkzYfdNmwyiqVwFo5wWX1EeZbcwhUZAQ6ESvkVeFMsoqew --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.126.49 waku 3a99051e7718ba0d59f8e064d86531bb429df6f9dadb8365f0cc1772e5aab485
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3a99051e7718. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_14-56-54__5f281e7d-05cc-4e7a-8cf6-a1884b424f79__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 57745
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57745/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57745/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.126.49/tcp/57746/p2p/16Uiu2HAm1QroosxuZGsQgnXFixi6BmZjoK3V5X2o7RqUQNKf7PQx","/ip4/172.18.126.49/tcp/57747/ws/p2p/16Uiu2HAm1QroosxuZGsQgnXFixi6BmZjoK3V5X2o7RqUQNKf7PQx"],"enrUri":"enr:-LO4QCK0xDqAqEHi__DcZeDew5s7NODsccuHvc4pZMzoObnfYl6uj_y8VVAP915r4d9NVubMj3Ty06lZBfsFqfuYuf8BgmlkgnY0gmlwhKwSfjGKbXVsdGlhZGRyc4wACgSsEn4xBuGT3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJY8Mip7ylDNI3ER5OZZphnWrdindMxaUTbfNaqeu8Y1YN0Y3CC4ZKDdWRwguGUhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57745/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.75.163/tcp/7035/p2p/16Uiu2HAkzYfdNmwyiqVwFo5wWX1EeZbcwhUZAQ6ESvkVeFMsoqew"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57745/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.224.223/tcp/3615/p2p/16Uiu2HAmMGn6VvysvEEDmUYYTDK9GLB9E9PL7BNra31MnUuVSgeo"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7034/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3614/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57745/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724684220403718912}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:57745/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0xabc55d6c61963f5d28ce36995f2f6fabaf47fae69d086f6cdbba547701fe94a6'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d5217b4fac59
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 6968817ae208
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3a99051e7718
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['ERR 2024-08-26 14:57:00.408+00:00 failed to push message                     topics="waku lightpush" tid=1 file=protocol.nim:60 error="Lightpush request has not been published to any peers. msg_hash: 0xabc55d6c61963f5d28ce36995f2f6fabaf47fae69d086f6cdbba547701fe94a6"']
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_pubsub_topics with id: 2024-08-26_14-57-07__be2edc28-27b1-4e0a-aff4-9ea4938f5224
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_14-57-07__be2edc28-27b1-4e0a-aff4-9ea4938f5224__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.42.176
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['64085', '64086', '64087', '64088', '64089']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 64085:64085 -p 64086:64086 -p 64087:64087 -p 64088:64088 -p 64089:64089 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64087 --rest-port=64085 --tcp-port=64086 --discv5-udp-port=64088 --rest-address=0.0.0.0 --nat=extip:172.18.42.176 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ea4fe9ac240a50bf2b6eb5dacb58e4d3f7777dd9bbd401a03e3166e6faf5fecf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64089 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.42.176 waku 7970514b8d1cef829ad88dd70ac80e9a44979dd0e4222d200b8ccae908bf98bc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7970514b8d1c. Setting up logs at ./log/docker/receiving_node1_2024-08-26_14-57-07__be2edc28-27b1-4e0a-aff4-9ea4938f5224__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 64085
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64085/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64085/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.42.176/tcp/64086/p2p/16Uiu2HAm6JUHRKFD5DYuvKwJgE6ggY6yTDx5YJzPBf2VLcfzd3Zo","/ip4/172.18.42.176/tcp/64087/ws/p2p/16Uiu2HAm6JUHRKFD5DYuvKwJgE6ggY6yTDx5YJzPBf2VLcfzd3Zo"],"enrUri":"enr:-LO4QLzLxjFJFSLusLmir6jhavMZG0fF2OlRXUmcSyJp05MoFFTXMf9X0VlyRsLPLlB_hqF79ZCZn-bl46IxDjxE_dUBgmlkgnY0gmlwhKwSKrCKbXVsdGlhZGRyc4wACgSsEiqwBvpX3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKhmEQFk2zKLGpQ1yeWy5rRu-Dr0zy6lLEKMRPjwRFt5oN0Y3CC-laDdWRwgvpYhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-26_14-57-07__be2edc28-27b1-4e0a-aff4-9ea4938f5224__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.173.254
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['12698', '12699', '12700', '12701', '12702']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 12698:12698 -p 12699:12699 -p 12700:12700 -p 12701:12701 -p 12702:12702 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12700 --rest-port=12698 --tcp-port=12699 --discv5-udp-port=12701 --rest-address=0.0.0.0 --nat=extip:172.18.173.254 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c45bf77bf7ca9edbae19bc83b100afb7cafdc3eddc9b60fd4bae280af80c6a20 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12702 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.173.254 waku 39527023ff5ffffd113db36461e566aa0865a44f0bfaf8720a88f1b890ea33b8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 39527023ff5f. Setting up logs at ./log/docker/receiving_node2_2024-08-26_14-57-07__be2edc28-27b1-4e0a-aff4-9ea4938f5224__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 12698
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12698/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12698/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.173.254/tcp/12699/p2p/16Uiu2HAmNQswkhXo63QXqjWbqH92h2tB3GUcUtE2acDyFypW5vrN","/ip4/172.18.173.254/tcp/12700/ws/p2p/16Uiu2HAmNQswkhXo63QXqjWbqH92h2tB3GUcUtE2acDyFypW5vrN"],"enrUri":"enr:-LO4QMTdf32UIZG34gvmdHbcQT7sd5tBl9xGSzFQmgnzgxlEMMFzmFKgYAxbi13wUwlClZ8W5Yf2LMUhAQIdSyVUpHEBgmlkgnY0gmlwhKwSrf6KbXVsdGlhZGRyc4wACgSsEq3-BjGc3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOQ936xIWS04jcOjLuG-XHsVJC_8_teeDGZCeHhQL7Ec4N0Y3CCMZuDdWRwgjGdhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12698/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.42.176/tcp/64086/p2p/16Uiu2HAm6JUHRKFD5DYuvKwJgE6ggY6yTDx5YJzPBf2VLcfzd3Zo"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_14-57-07__be2edc28-27b1-4e0a-aff4-9ea4938f5224__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.245.146
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['56944', '56945', '56946', '56947', '56948']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 56944:56944 -p 56945:56945 -p 56946:56946 -p 56947:56947 -p 56948:56948 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56946 --rest-port=56944 --tcp-port=56945 --discv5-udp-port=56947 --rest-address=0.0.0.0 --nat=extip:172.18.245.146 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=348c16bcb87c2948c11dfe28d3bb0deca60aafad70c764b6f3649fcea79bdcd1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56948 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QLzLxjFJFSLusLmir6jhavMZG0fF2OlRXUmcSyJp05MoFFTXMf9X0VlyRsLPLlB_hqF79ZCZn-bl46IxDjxE_dUBgmlkgnY0gmlwhKwSKrCKbXVsdGlhZGRyc4wACgSsEiqwBvpX3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKhmEQFk2zKLGpQ1yeWy5rRu-Dr0zy6lLEKMRPjwRFt5oN0Y3CC-laDdWRwgvpYhXdha3UyCQ --lightpushnode=/ip4/172.18.42.176/tcp/64086/p2p/16Uiu2HAm6JUHRKFD5DYuvKwJgE6ggY6yTDx5YJzPBf2VLcfzd3Zo --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.245.146 waku 8eb7e39f4212cab810a2a5d09f7bf55cfc93c36e187d13281d9883f7154984b2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 8eb7e39f4212. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_14-57-07__be2edc28-27b1-4e0a-aff4-9ea4938f5224__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 56944
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56944/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56944/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.245.146/tcp/56945/p2p/16Uiu2HAkxCmUB3YjcrhKSwwitR9b4KvsvwDaKX2Q4Vyo81ZRxhnW","/ip4/172.18.245.146/tcp/56946/ws/p2p/16Uiu2HAkxCmUB3YjcrhKSwwitR9b4KvsvwDaKX2Q4Vyo81ZRxhnW"],"enrUri":"enr:-LO4QK0WCIQYPyLzAQr5T9zqQd-8XxEZCfUw8Qx-v55vPr3GJxktLJ4vNvk_qejjC-yCOcqPXM7988DtgKXJOWLBeLQBgmlkgnY0gmlwhKwS9ZKKbXVsdGlhZGRyc4wACgSsEvWSBt5y3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIpRLeQzS5RROuocrGhZEtjZBMrd94o-5k_S9WDj14Dh4N0Y3CC3nGDdWRwgt5zhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56944/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.42.176/tcp/64086/p2p/16Uiu2HAm6JUHRKFD5DYuvKwJgE6ggY6yTDx5YJzPBf2VLcfzd3Zo"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56944/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.173.254/tcp/12699/p2p/16Uiu2HAmNQswkhXo63QXqjWbqH92h2tB3GUcUtE2acDyFypW5vrN"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64085/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12698/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56944/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724684233640570112}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:56944/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x073ef045fad77bc0adfa2d583023c5bebf8fe5166c7778a31153c221f57f9da8'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7970514b8d1c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 39527023ff5f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 8eb7e39f4212
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['ERR 2024-08-26 14:57:13.646+00:00 failed to push message                     topics="waku lightpush" tid=1 file=protocol.nim:60 error="Lightpush request has not been published to any peers. msg_hash: 0x073ef045fad77bc0adfa2d583023c5bebf8fe5166c7778a31153c221f57f9da8"']
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_pubsub_topics with id: 2024-08-26_14-57-21__d7b9fd8d-76ef-4f35-8333-4e8e36a6e272
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_14-57-21__d7b9fd8d-76ef-4f35-8333-4e8e36a6e272__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.48.241
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['23785', '23786', '23787', '23788', '23789']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 23785:23785 -p 23786:23786 -p 23787:23787 -p 23788:23788 -p 23789:23789 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23787 --rest-port=23785 --tcp-port=23786 --discv5-udp-port=23788 --rest-address=0.0.0.0 --nat=extip:172.18.48.241 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=df47aa2cf83daf8fff8ed3fd7dbec547f45ba0688afab9acdb32fc07d7c6340e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23789 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.48.241 waku 72ad8cc9436842eeb3aa107ae2994b5a708c63ce8bb951b71fced7a6cab840ba
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 72ad8cc94368. Setting up logs at ./log/docker/receiving_node1_2024-08-26_14-57-21__d7b9fd8d-76ef-4f35-8333-4e8e36a6e272__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 23785
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23785/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23785/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.48.241/tcp/23786/p2p/16Uiu2HAmPqRngdc9P4kXLneuv3EETzZ8FDRNmoA1nWA1Ubdi6kPn","/ip4/172.18.48.241/tcp/23787/ws/p2p/16Uiu2HAmPqRngdc9P4kXLneuv3EETzZ8FDRNmoA1nWA1Ubdi6kPn"],"enrUri":"enr:-LO4QImZTu11D4H-CAPHy6Dxr37_WDGKgE8W6rRf3M2cWdE4IP0PmHUABm_ND0tAUshJuCKSzNLMA4NkgLMPXKUYQjQBgmlkgnY0gmlwhKwSMPGKbXVsdGlhZGRyc4wACgSsEjDxBlzr3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOmHSB-ZBNmQmM-76U085tyBO-EUWFEPZOhGVExcQh1DYN0Y3CCXOqDdWRwglzshXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-26_14-57-21__d7b9fd8d-76ef-4f35-8333-4e8e36a6e272__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.241.147
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['24034', '24035', '24036', '24037', '24038']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 24034:24034 -p 24035:24035 -p 24036:24036 -p 24037:24037 -p 24038:24038 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24036 --rest-port=24034 --tcp-port=24035 --discv5-udp-port=24037 --rest-address=0.0.0.0 --nat=extip:172.18.241.147 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=03d5fbf40bdeab43beef9b7f918ffff99f8fbce7c5a93abf40e588e05b5c9a88 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24038 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.241.147 waku f6b61290f14ae973afaeaeb65a88517f3864c5fd2d7f012221570729b9f61f85
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f6b61290f14a. Setting up logs at ./log/docker/receiving_node2_2024-08-26_14-57-21__d7b9fd8d-76ef-4f35-8333-4e8e36a6e272__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 24034
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24034/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24034/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.241.147/tcp/24035/p2p/16Uiu2HAm7YSw7SAFag1TrQGbGKry6pYNhQfRXsdDhK3h3B6ajRTA","/ip4/172.18.241.147/tcp/24036/ws/p2p/16Uiu2HAm7YSw7SAFag1TrQGbGKry6pYNhQfRXsdDhK3h3B6ajRTA"],"enrUri":"enr:-LO4QAo3acZlxxDATIeDLd9ZcNpWD8suKmmmzf49neA6wHm3UHLqDChPTeB9B2mhwRAl34MHnj86uv4BOKtpAWIxUjoBgmlkgnY0gmlwhKwS8ZOKbXVsdGlhZGRyc4wACgSsEvGTBl3k3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK0CI6uny5eBMCXIlP-pakvxE8RHZEpu5_yUvRIxxgejYN0Y3CCXeODdWRwgl3lhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24034/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.48.241/tcp/23786/p2p/16Uiu2HAmPqRngdc9P4kXLneuv3EETzZ8FDRNmoA1nWA1Ubdi6kPn"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_14-57-21__d7b9fd8d-76ef-4f35-8333-4e8e36a6e272__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.104.246
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['46674', '46675', '46676', '46677', '46678']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 46674:46674 -p 46675:46675 -p 46676:46676 -p 46677:46677 -p 46678:46678 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46676 --rest-port=46674 --tcp-port=46675 --discv5-udp-port=46677 --rest-address=0.0.0.0 --nat=extip:172.18.104.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=58abd62b12e8aefbcac012eddc7ebb072f785b9f87b7de340703cb3325fa9a4a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46678 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QImZTu11D4H-CAPHy6Dxr37_WDGKgE8W6rRf3M2cWdE4IP0PmHUABm_ND0tAUshJuCKSzNLMA4NkgLMPXKUYQjQBgmlkgnY0gmlwhKwSMPGKbXVsdGlhZGRyc4wACgSsEjDxBlzr3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOmHSB-ZBNmQmM-76U085tyBO-EUWFEPZOhGVExcQh1DYN0Y3CCXOqDdWRwglzshXdha3UyCQ --lightpushnode=/ip4/172.18.48.241/tcp/23786/p2p/16Uiu2HAmPqRngdc9P4kXLneuv3EETzZ8FDRNmoA1nWA1Ubdi6kPn --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.104.246 waku 21052d6c8d2fbabe4a8ae4dd3361d45dff23ce281c94657b28aae59cf2fbcf92
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 21052d6c8d2f. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_14-57-21__d7b9fd8d-76ef-4f35-8333-4e8e36a6e272__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 46674
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46674/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46674/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.246/tcp/46675/p2p/16Uiu2HAkvTMiM8FECyQ1kD4n3yn2dFVjncZCLkJR3TACpkq1ifzY","/ip4/172.18.104.246/tcp/46676/ws/p2p/16Uiu2HAkvTMiM8FECyQ1kD4n3yn2dFVjncZCLkJR3TACpkq1ifzY"],"enrUri":"enr:-LO4QLmzuTYzfj8qoPIgu2q1oykOerPFMJB3LRlsJ8SVta97DWauardrNX9m9Bs7gqbhn2s1UllyT-JxGxkIk-QmNt8BgmlkgnY0gmlwhKwSaPaKbXVsdGlhZGRyc4wACgSsEmj2BrZU3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIPSjHcQGqsOiCk2SyKR42OscHdYYXgssbdzhus__hmCYN0Y3CCtlODdWRwgrZVhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46674/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.48.241/tcp/23786/p2p/16Uiu2HAmPqRngdc9P4kXLneuv3EETzZ8FDRNmoA1nWA1Ubdi6kPn"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46674/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.241.147/tcp/24035/p2p/16Uiu2HAm7YSw7SAFag1TrQGbGKry6pYNhQfRXsdDhK3h3B6ajRTA"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23785/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24034/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46674/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724684246830467328}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:46674/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x28ba3dd26ef2d224f20817f6998d5ab9bf7b1887035dc1416a6a6db4c3d020e1'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 72ad8cc94368
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f6b61290f14a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 21052d6c8d2f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['ERR 2024-08-26 14:57:26.838+00:00 failed to push message                     topics="waku lightpush" tid=1 file=protocol.nim:60 error="Lightpush request has not been published to any peers. msg_hash: 0x28ba3dd26ef2d224f20817f6998d5ab9bf7b1887035dc1416a6a6db4c3d020e1"']