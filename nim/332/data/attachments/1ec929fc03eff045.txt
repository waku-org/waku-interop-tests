[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_nodes_different_content_topic_same_shard with id: 2024-08-26_15-10-30__bdc3a3ad-20c0-437f-a83c-831d54247cf1
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-26_15-10-30__bdc3a3ad-20c0-437f-a83c-831d54247cf1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.167.245
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['17873', '17874', '17875', '17876', '17877']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 17873:17873 -p 17874:17874 -p 17875:17875 -p 17876:17876 -p 17877:17877 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17875 --rest-port=17873 --tcp-port=17874 --discv5-udp-port=17876 --rest-address=0.0.0.0 --nat=extip:172.18.167.245 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=9deaf0cda2def3c38a1e02bc3ff7bc6b0e9d2f610dcaa8dc2fe3487c8be3ba8b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17877 --metrics-logging=true --relay=true --filter=true --content-topic=/newsService/1.0/weekly/protobuf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.167.245 waku 9c75387ebd6643b9e7c46ce126e9dd622b7e6d607403b2b821a7f4993df6a2d1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 9c75387ebd66. Setting up logs at ./log/docker/node1_2024-08-26_15-10-30__bdc3a3ad-20c0-437f-a83c-831d54247cf1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 17873
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17873/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17873/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.167.245/tcp/17874/p2p/16Uiu2HAmN1C3JiVKzaNihxdhaQGVgxUiHqfP8FUbVzpQ3yv9fVLu","/ip4/172.18.167.245/tcp/17875/ws/p2p/16Uiu2HAmN1C3JiVKzaNihxdhaQGVgxUiHqfP8FUbVzpQ3yv9fVLu"],"enrUri":"enr:-LO4QMmLm5n4h6m9pm2FYuleNWwVjv6S6130lCXbWnMiyC_SPQwklMdeUe59lf7YdzcNtGANmz7C4DbPUo__rDqIg2YBgmlkgnY0gmlwhKwSp_WKbXVsdGlhZGRyc4wACgSsEqf1BkXT3QOCcnOFAAIBAACJc2VjcDI1NmsxoQOK5gQxCFxYBrQdh1gebNVBe6h70tp0A6cHyxgMNU2NAoN0Y3CCRdKDdWRwgkXUhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-08-26_15-10-30__bdc3a3ad-20c0-437f-a83c-831d54247cf1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.29.188
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['60206', '60207', '60208', '60209', '60210']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 60206:60206 -p 60207:60207 -p 60208:60208 -p 60209:60209 -p 60210:60210 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60208 --rest-port=60206 --tcp-port=60207 --discv5-udp-port=60209 --rest-address=0.0.0.0 --nat=extip:172.18.29.188 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=36872b1b8fec437fc0487adf19bf0d5dc07b2d32cfafb55fdc10a8f3de289bf4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60210 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QMmLm5n4h6m9pm2FYuleNWwVjv6S6130lCXbWnMiyC_SPQwklMdeUe59lf7YdzcNtGANmz7C4DbPUo__rDqIg2YBgmlkgnY0gmlwhKwSp_WKbXVsdGlhZGRyc4wACgSsEqf1BkXT3QOCcnOFAAIBAACJc2VjcDI1NmsxoQOK5gQxCFxYBrQdh1gebNVBe6h70tp0A6cHyxgMNU2NAoN0Y3CCRdKDdWRwgkXUhXdha3UyBQ --content-topic=/newsService/1.0/alerts/xml
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.29.188 waku 22dd56d174c67b045eb7ae344addfde278af7a77a64c4ba41faf47e683e1ca37
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 22dd56d174c6. Setting up logs at ./log/docker/node2_2024-08-26_15-10-30__bdc3a3ad-20c0-437f-a83c-831d54247cf1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 60206
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60206/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60206/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.29.188/tcp/60207/p2p/16Uiu2HAmD7hFQgmqR221waaMPMenmTX8Z7WKfwXxGBZ7E7N5G1te","/ip4/172.18.29.188/tcp/60208/ws/p2p/16Uiu2HAmD7hFQgmqR221waaMPMenmTX8Z7WKfwXxGBZ7E7N5G1te"],"enrUri":"enr:-LO4QAJLL5krWV58nL96W4krOr8Vlw9Y75aaWztE8z8syHT8etxS-Oqv6MJIya0j9WGFXfT-DGSjTD-m58czv0kpgGQBgmlkgnY0gmlwhKwSHbyKbXVsdGlhZGRyc4wACgSsEh28Busw3QOCcnOFAAIBAACJc2VjcDI1NmsxoQMG11hhrYA_kkMjb9K0JcHslevqYLnhjppQPYEGF8zSa4N0Y3CC6y-DdWRwgusxhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60206/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.167.245/tcp/17874/p2p/16Uiu2HAmN1C3JiVKzaNihxdhaQGVgxUiHqfP8FUbVzpQ3yv9fVLu"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17873/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/newsService/1.0/weekly/protobuf"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60206/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/newsService/1.0/alerts/xml"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17873/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/newsService/1.0/weekly/protobuf", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17873/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/newsService/1.0/weekly/protobuf","version":0,"timestamp":1724685034369689344,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60206/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:60206/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf. Response content: b'/newsService/1.0/weekly/protobuf'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9c75387ebd66
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 22dd56d174c6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['DBG 2024-08-26 15:10:34.485+00:00 Received error response from handler       tid=1 file=serverprivate.nim:314 status=404 meth=GET peer=172.17.0.1:55724 uri=/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf error_status="404 Not Found" error_content_type=text/plain error_message=/newsService/1.0/weekly/protobuf']
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_nodes_different_content_topic_same_shard with id: 2024-08-26_15-10-40__1e36b7f4-fd5a-4458-b402-06d73111db75
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-26_15-10-40__1e36b7f4-fd5a-4458-b402-06d73111db75__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.151.123
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['8976', '8977', '8978', '8979', '8980']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 8976:8976 -p 8977:8977 -p 8978:8978 -p 8979:8979 -p 8980:8980 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8978 --rest-port=8976 --tcp-port=8977 --discv5-udp-port=8979 --rest-address=0.0.0.0 --nat=extip:172.18.151.123 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ef569ff3bdc0adb4bcb99ec3daca5b4ec5c9affb7a212ffa333ce3b2bfdd561d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8980 --metrics-logging=true --relay=true --filter=true --content-topic=/newsService/1.0/weekly/protobuf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.151.123 waku aa3b169595ae438a490c1cba323ab5c2abe7cef460f8031e9171ee58888b1fc1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID aa3b169595ae. Setting up logs at ./log/docker/node1_2024-08-26_15-10-40__1e36b7f4-fd5a-4458-b402-06d73111db75__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 8976
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8976/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8976/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.151.123/tcp/8977/p2p/16Uiu2HAmUmudLvj6qitxgbX2woNyowGNkNiq5BZFLYsNwyxBwePU","/ip4/172.18.151.123/tcp/8978/ws/p2p/16Uiu2HAmUmudLvj6qitxgbX2woNyowGNkNiq5BZFLYsNwyxBwePU"],"enrUri":"enr:-LO4QEiMZ9DUJYnZHGTlQNUmz0JJbqPeAteyk_RC1FvnlSDUdit7dangHlZyh5Z0YLfLyG0_7d4YQwFW3sFhWSujjKYBgmlkgnY0gmlwhKwSl3uKbXVsdGlhZGRyc4wACgSsEpd7BiMS3QOCcnOFAAIBAACJc2VjcDI1NmsxoQPvgLdIWtHtdD7NScWG4eskOzweIEVJ1kgn5saXCS-Ju4N0Y3CCIxGDdWRwgiMThXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-08-26_15-10-40__1e36b7f4-fd5a-4458-b402-06d73111db75__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.139.58
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['7513', '7514', '7515', '7516', '7517']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 7513:7513 -p 7514:7514 -p 7515:7515 -p 7516:7516 -p 7517:7517 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7515 --rest-port=7513 --tcp-port=7514 --discv5-udp-port=7516 --rest-address=0.0.0.0 --nat=extip:172.18.139.58 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=6ea70d7e932193bbd6e4e92a15711cbefb4cc6fc076c6ddfbcbc0cc1ea0eaa32 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7517 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QEiMZ9DUJYnZHGTlQNUmz0JJbqPeAteyk_RC1FvnlSDUdit7dangHlZyh5Z0YLfLyG0_7d4YQwFW3sFhWSujjKYBgmlkgnY0gmlwhKwSl3uKbXVsdGlhZGRyc4wACgSsEpd7BiMS3QOCcnOFAAIBAACJc2VjcDI1NmsxoQPvgLdIWtHtdD7NScWG4eskOzweIEVJ1kgn5saXCS-Ju4N0Y3CCIxGDdWRwgiMThXdha3UyBQ --content-topic=/newsService/1.0/alerts/xml
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.139.58 waku 583bda9d8625d1950616a88fbef68247ebf4ee92cf6dbc1f732a79d81d83f0a9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 583bda9d8625. Setting up logs at ./log/docker/node2_2024-08-26_15-10-40__1e36b7f4-fd5a-4458-b402-06d73111db75__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 7513
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7513/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7513/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.139.58/tcp/7514/p2p/16Uiu2HAm58HnYnzNxtqHiFnsuJKM5g2a3qxFTN8PMscQHsDbrC2u","/ip4/172.18.139.58/tcp/7515/ws/p2p/16Uiu2HAm58HnYnzNxtqHiFnsuJKM5g2a3qxFTN8PMscQHsDbrC2u"],"enrUri":"enr:-LO4QDOP5_i2zJ_YFKq5EoguuQz7lW-pKTzZDSdYUmR5rGVhFh7gn4y6Bq72XoOrjQjIiSMF5pc7SYUaP27uCVGJ8soBgmlkgnY0gmlwhKwSizqKbXVsdGlhZGRyc4wACgSsEos6Bh1b3QOCcnOFAAIBAACJc2VjcDI1NmsxoQKQIOacDp8-28KSEGmXI0ewqF1umOf81ppeZGb0hONfwoN0Y3CCHVqDdWRwgh1chXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7513/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.151.123/tcp/8977/p2p/16Uiu2HAmUmudLvj6qitxgbX2woNyowGNkNiq5BZFLYsNwyxBwePU"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8976/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/newsService/1.0/weekly/protobuf"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7513/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/newsService/1.0/alerts/xml"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8976/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/newsService/1.0/weekly/protobuf", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8976/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/newsService/1.0/weekly/protobuf","version":0,"timestamp":1724685044294632704,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7513/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:7513/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf. Response content: b'/newsService/1.0/weekly/protobuf'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id aa3b169595ae
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 583bda9d8625
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['DBG 2024-08-26 15:10:44.406+00:00 Received error response from handler       tid=1 file=serverprivate.nim:314 status=404 meth=GET peer=172.17.0.1:42444 uri=/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf error_status="404 Not Found" error_content_type=text/plain error_message=/newsService/1.0/weekly/protobuf']
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_nodes_different_content_topic_same_shard with id: 2024-08-26_15-10-50__a9592c4c-7df9-47f8-b2f4-1bce50e69811
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-26_15-10-50__a9592c4c-7df9-47f8-b2f4-1bce50e69811__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.152.212
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['25948', '25949', '25950', '25951', '25952']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 25948:25948 -p 25949:25949 -p 25950:25950 -p 25951:25951 -p 25952:25952 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25950 --rest-port=25948 --tcp-port=25949 --discv5-udp-port=25951 --rest-address=0.0.0.0 --nat=extip:172.18.152.212 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=4ad84886cc0b258b95fe4ffde57c37daedad9578738269bae4b2f47a3d822ed6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25952 --metrics-logging=true --relay=true --filter=true --content-topic=/newsService/1.0/weekly/protobuf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.152.212 waku 313ffefc9a96382a29e5e0c39e8d7187f7b6ae84918d25423c4d5354da768d6a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 313ffefc9a96. Setting up logs at ./log/docker/node1_2024-08-26_15-10-50__a9592c4c-7df9-47f8-b2f4-1bce50e69811__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 25948
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25948/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25948/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.152.212/tcp/25949/p2p/16Uiu2HAmHWS2j3hgYmHrZuRnjVVcWoPjUL4YYajKpTbUEDS8whcA","/ip4/172.18.152.212/tcp/25950/ws/p2p/16Uiu2HAmHWS2j3hgYmHrZuRnjVVcWoPjUL4YYajKpTbUEDS8whcA"],"enrUri":"enr:-LO4QKkTt-H9rEdJDGbzHIvXdVXe-gQFGZW54EptcT7FrBYWOd3Sv8Y5RnNfJy9irXAD6zpY3loucr3nQtnnrbLxUH8BgmlkgnY0gmlwhKwSmNSKbXVsdGlhZGRyc4wACgSsEpjUBmVe3QOCcnOFAAIBAACJc2VjcDI1NmsxoQNIGT5loyqcnOsuPwu4GohGhhsMxLkTqgZZfd7MMDSUl4N0Y3CCZV2DdWRwgmVfhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-08-26_15-10-50__a9592c4c-7df9-47f8-b2f4-1bce50e69811__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.12.13
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['24539', '24540', '24541', '24542', '24543']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 24539:24539 -p 24540:24540 -p 24541:24541 -p 24542:24542 -p 24543:24543 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24541 --rest-port=24539 --tcp-port=24540 --discv5-udp-port=24542 --rest-address=0.0.0.0 --nat=extip:172.18.12.13 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=2bfb1e15b0f27ef9f866e6dbcaed6fc0abddb78fad7d67351ac7a2eecef95ded --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24543 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QKkTt-H9rEdJDGbzHIvXdVXe-gQFGZW54EptcT7FrBYWOd3Sv8Y5RnNfJy9irXAD6zpY3loucr3nQtnnrbLxUH8BgmlkgnY0gmlwhKwSmNSKbXVsdGlhZGRyc4wACgSsEpjUBmVe3QOCcnOFAAIBAACJc2VjcDI1NmsxoQNIGT5loyqcnOsuPwu4GohGhhsMxLkTqgZZfd7MMDSUl4N0Y3CCZV2DdWRwgmVfhXdha3UyBQ --content-topic=/newsService/1.0/alerts/xml
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.12.13 waku 7779e22ab2a4c483d5ed1fad6d8f70033eb9011f444208114f3eb17e3cfe8dfd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7779e22ab2a4. Setting up logs at ./log/docker/node2_2024-08-26_15-10-50__a9592c4c-7df9-47f8-b2f4-1bce50e69811__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 24539
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24539/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24539/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.12.13/tcp/24540/p2p/16Uiu2HAkxdkRPr1Yq1ERjTWdFu2ZMG1NDuYCZMPDX2RDvXgLwYkA","/ip4/172.18.12.13/tcp/24541/ws/p2p/16Uiu2HAkxdkRPr1Yq1ERjTWdFu2ZMG1NDuYCZMPDX2RDvXgLwYkA"],"enrUri":"enr:-LO4QO6NuQh8Fmoy0EVe8FB0ak2kTsOEgjyxsaedKGeUABNxXB0rB5Y1zr8Tp4ITy94ODNEeYriC9GzKNr9XmuUwaVwBgmlkgnY0gmlwhKwSDA2KbXVsdGlhZGRyc4wACgSsEgwNBl_d3QOCcnOFAAIBAACJc2VjcDI1NmsxoQIvqw1pulSg-K6o9NDVPKybPoqEVbdIq0GC6ZJMhSABI4N0Y3CCX9yDdWRwgl_ehXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24539/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.152.212/tcp/25949/p2p/16Uiu2HAmHWS2j3hgYmHrZuRnjVVcWoPjUL4YYajKpTbUEDS8whcA"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25948/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/newsService/1.0/weekly/protobuf"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24539/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/newsService/1.0/alerts/xml"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25948/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/newsService/1.0/weekly/protobuf", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25948/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/newsService/1.0/weekly/protobuf","version":0,"timestamp":1724685053422383360,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24539/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:24539/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf. Response content: b'/newsService/1.0/weekly/protobuf'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 313ffefc9a96
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7779e22ab2a4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['DBG 2024-08-26 15:10:53.533+00:00 Received error response from handler       tid=1 file=serverprivate.nim:314 status=404 meth=GET peer=172.17.0.1:45144 uri=/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf error_status="404 Not Found" error_content_type=text/plain error_message=/newsService/1.0/weekly/protobuf']