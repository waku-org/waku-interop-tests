[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-08-26_15-00-19__7e5a9ec1-f627-4e3f-b7c4-746a1dd043d5
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_15-00-19__7e5a9ec1-f627-4e3f-b7c4-746a1dd043d5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.41.72
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['53797', '53798', '53799', '53800', '53801']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 53797:53797 -p 53798:53798 -p 53799:53799 -p 53800:53800 -p 53801:53801 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53799 --rest-port=53797 --tcp-port=53798 --discv5-udp-port=53800 --rest-address=0.0.0.0 --nat=extip:172.18.41.72 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=917db7d291d4143bcfcdde8efc3eadf4a7e7595b972f2193cebedd45aebe437b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53801 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.41.72 waku 6ac39419bc15aaaa730abe0dd0ddf5e79ee8d387048406f891406311384ce4e2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 6ac39419bc15. Setting up logs at ./log/docker/receiving_node1_2024-08-26_15-00-19__7e5a9ec1-f627-4e3f-b7c4-746a1dd043d5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 53797
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53797/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53797/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.41.72/tcp/53798/p2p/16Uiu2HAkwctjPuaKTTfWuci3Bw9SU75Wx4TwMeAQdUhVCTWQniVn","/ip4/172.18.41.72/tcp/53799/ws/p2p/16Uiu2HAkwctjPuaKTTfWuci3Bw9SU75Wx4TwMeAQdUhVCTWQniVn"],"enrUri":"enr:-LO4QB1AdTBxMPsce3SQjCPoC3RdAKi61-bWLOnZ3Qj-Q-BVZnjUteB_L8Ol3teMLC93poTtGKhVlHGmwdzO5yWCmL0BgmlkgnY0gmlwhKwSKUiKbXVsdGlhZGRyc4wACgSsEilIBtIn3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIgly5kNkievUKaaM0hht4uyJ5n5S4icA6v9x9ncdjX4YN0Y3CC0iaDdWRwgtIohXdha3UyDQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-26_15-00-19__7e5a9ec1-f627-4e3f-b7c4-746a1dd043d5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.34.209
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['3085', '3086', '3087', '3088', '3089']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 3085:3085 -p 3086:3086 -p 3087:3087 -p 3088:3088 -p 3089:3089 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3087 --rest-port=3085 --tcp-port=3086 --discv5-udp-port=3088 --rest-address=0.0.0.0 --nat=extip:172.18.34.209 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f4f977eb1ccec066c3ee83d5caf3d22abfff2dd5e7ed4d870f46f1f8211ab4bb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3089 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.34.209 waku 488983e176999f5ff9171faef60c2fda26e9fc6040ddc6dc3a664a7a94096c8d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 488983e17699. Setting up logs at ./log/docker/receiving_node2_2024-08-26_15-00-19__7e5a9ec1-f627-4e3f-b7c4-746a1dd043d5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 3085
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3085/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3085/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.34.209/tcp/3086/p2p/16Uiu2HAmAesS9ZE67krtSwEUCgxsMJuPuTD711oUnJJjFJTKvJo2","/ip4/172.18.34.209/tcp/3087/ws/p2p/16Uiu2HAmAesS9ZE67krtSwEUCgxsMJuPuTD711oUnJJjFJTKvJo2"],"enrUri":"enr:-LO4QK9vPoCsiQyDvFvm34Jxpu6Jg9NDwfrqTUa_Ycwqy19tLbhGl3MqHc0GQ4u8DRul5rmOCxPkUgSxoRYVHq5ch2EBgmlkgnY0gmlwhKwSItGKbXVsdGlhZGRyc4wACgSsEiLRBgwP3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLiQM5R45j5aW2lN2HA23eXSc50qveTUDc56B1F7sYOuYN0Y3CCDA6DdWRwggwQhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3085/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.41.72/tcp/53798/p2p/16Uiu2HAkwctjPuaKTTfWuci3Bw9SU75Wx4TwMeAQdUhVCTWQniVn"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_15-00-19__7e5a9ec1-f627-4e3f-b7c4-746a1dd043d5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.156.94
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['57955', '57956', '57957', '57958', '57959']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 57955:57955 -p 57956:57956 -p 57957:57957 -p 57958:57958 -p 57959:57959 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57957 --rest-port=57955 --tcp-port=57956 --discv5-udp-port=57958 --rest-address=0.0.0.0 --nat=extip:172.18.156.94 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a69e523fe2cefba8d1dafc0cd9d489e7dbc9e154c515c16a832d9ab7d2dbe7ec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57959 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QB1AdTBxMPsce3SQjCPoC3RdAKi61-bWLOnZ3Qj-Q-BVZnjUteB_L8Ol3teMLC93poTtGKhVlHGmwdzO5yWCmL0BgmlkgnY0gmlwhKwSKUiKbXVsdGlhZGRyc4wACgSsEilIBtIn3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIgly5kNkievUKaaM0hht4uyJ5n5S4icA6v9x9ncdjX4YN0Y3CC0iaDdWRwgtIohXdha3UyDQ --lightpushnode=/ip4/172.18.41.72/tcp/53798/p2p/16Uiu2HAkwctjPuaKTTfWuci3Bw9SU75Wx4TwMeAQdUhVCTWQniVn --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.156.94 waku d696b11ea9429a16acc8fc817a49b8bae8ef263545bbe1c7e1a4454b1a2dc436
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d696b11ea942. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_15-00-19__7e5a9ec1-f627-4e3f-b7c4-746a1dd043d5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 57955
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57955/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57955/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.156.94/tcp/57956/p2p/16Uiu2HAkytRunbn2WUBsoToyVVjNLhUesXuiKMdqp7XGNa3zy1kP","/ip4/172.18.156.94/tcp/57957/ws/p2p/16Uiu2HAkytRunbn2WUBsoToyVVjNLhUesXuiKMdqp7XGNa3zy1kP"],"enrUri":"enr:-LO4QDkUxdBje1BZSnd1h0sD-N2Z5tqe06JXaEI3tdw2lL9kIMJrhMLHCXgg6kT3Ch6B_LIuXYpcK0Rolb96k2xgnjEBgmlkgnY0gmlwhKwSnF6KbXVsdGlhZGRyc4wACgSsEpxeBuJl3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJCSYWHKc6YVgnkX8rG-5le4_23ySitH23Irfwvai0MJIN0Y3CC4mSDdWRwguJmhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57955/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.41.72/tcp/53798/p2p/16Uiu2HAkwctjPuaKTTfWuci3Bw9SU75Wx4TwMeAQdUhVCTWQniVn"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57955/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.34.209/tcp/3086/p2p/16Uiu2HAmAesS9ZE67krtSwEUCgxsMJuPuTD711oUnJJjFJTKvJo2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53797/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3085/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57955/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724684423719772160}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53797/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724684423719772160,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3085/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724684423719772160,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 6ac39419bc15
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 488983e17699
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d696b11ea942
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.