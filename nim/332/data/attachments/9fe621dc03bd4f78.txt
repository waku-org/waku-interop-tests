[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_cant_retrieve_messages_on_not_subscribed_content_topic with id: 2024-08-26_15-07-09__b9f20a43-2da5-4328-a06c-65db8fbaebe8
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-26_15-07-09__b9f20a43-2da5-4328-a06c-65db8fbaebe8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.118.52
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['4797', '4798', '4799', '4800', '4801']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 4797:4797 -p 4798:4798 -p 4799:4799 -p 4800:4800 -p 4801:4801 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4799 --rest-port=4797 --tcp-port=4798 --discv5-udp-port=4800 --rest-address=0.0.0.0 --nat=extip:172.18.118.52 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=fb616ec19ff163d268dd1917f0ac43e32cf1bebfcb1cc05fbe6d9fd9b1da6dec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4801 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.118.52 waku 3bdad9e49bcf51fe8264cce2caf5ebb8bf70c3ea76179557d43764ccf4c832cd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3bdad9e49bcf. Setting up logs at ./log/docker/node1_2024-08-26_15-07-09__b9f20a43-2da5-4328-a06c-65db8fbaebe8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 4797
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4797/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4797/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.118.52/tcp/4798/p2p/16Uiu2HAmRLJCyF14BRQtbbKnokbTPRhWNHsyKiWSx1XY9hXD3ywa","/ip4/172.18.118.52/tcp/4799/ws/p2p/16Uiu2HAmRLJCyF14BRQtbbKnokbTPRhWNHsyKiWSx1XY9hXD3ywa"],"enrUri":"enr:-LO4QDYeegpj6mljyoTaQgQD-oc--wUWbcBiI381xD3Tw7oIM31dQ3kPVy8YeDngsZXpPCf9SUFEDW7AwaUNbgBkkI4BgmlkgnY0gmlwhKwSdjSKbXVsdGlhZGRyc4wACgSsEnY0BhK_3QOCcnOFAAIBAACJc2VjcDI1NmsxoQO8XhXMXdkhVHG4enBFPbhBGt25qGuR0VRyqwo6MqbnDYN0Y3CCEr6DdWRwghLAhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-08-26_15-07-09__b9f20a43-2da5-4328-a06c-65db8fbaebe8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.240.132
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['49207', '49208', '49209', '49210', '49211']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 49207:49207 -p 49208:49208 -p 49209:49209 -p 49210:49210 -p 49211:49211 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49209 --rest-port=49207 --tcp-port=49208 --discv5-udp-port=49210 --rest-address=0.0.0.0 --nat=extip:172.18.240.132 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=b21a5b9fcd4ca28daeaebe7bd8576f2e78fda697b375c417068c4b2d8a8adfb0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49211 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QDYeegpj6mljyoTaQgQD-oc--wUWbcBiI381xD3Tw7oIM31dQ3kPVy8YeDngsZXpPCf9SUFEDW7AwaUNbgBkkI4BgmlkgnY0gmlwhKwSdjSKbXVsdGlhZGRyc4wACgSsEnY0BhK_3QOCcnOFAAIBAACJc2VjcDI1NmsxoQO8XhXMXdkhVHG4enBFPbhBGt25qGuR0VRyqwo6MqbnDYN0Y3CCEr6DdWRwghLAhXdha3UyBQ --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.240.132 waku 76f5c0954d202edd931f7c4fab11de82ef8615728f4fc59ae1a98639be8f73d2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 76f5c0954d20. Setting up logs at ./log/docker/node2_2024-08-26_15-07-09__b9f20a43-2da5-4328-a06c-65db8fbaebe8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 49207
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49207/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49207/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.240.132/tcp/49208/p2p/16Uiu2HAmSpjkccfHVnHpjaAzxYpcG5LKEfMchS6A8mn5MHq5UymQ","/ip4/172.18.240.132/tcp/49209/ws/p2p/16Uiu2HAmSpjkccfHVnHpjaAzxYpcG5LKEfMchS6A8mn5MHq5UymQ"],"enrUri":"enr:-LO4QCq0F5hlrPLVVtg8fhE7FOP-z9nY1v9z1xnBt18k4PQ9TZlSqFBsU_VYvto9kOKZVCAw3BUBZBJhN1Aw3G04_f4BgmlkgnY0gmlwhKwS8ISKbXVsdGlhZGRyc4wACgSsEvCEBsA53QOCcnOFAAIBAACJc2VjcDI1NmsxoQPSgutSPqGFXpL_KinDv7GQblecGQ1sCWRSKy_S_LjyZ4N0Y3CCwDiDdWRwgsA6hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49207/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.118.52/tcp/4798/p2p/16Uiu2HAmRLJCyF14BRQtbbKnokbTPRhWNHsyKiWSx1XY9hXD3ywa"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4797/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49207/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4797/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4797/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:4797/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto. Response content: b'/toychat/2/huilong/proto'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3bdad9e49bcf
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 76f5c0954d20
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'error': ['DBG 2024-08-26 15:07:13.648+00:00 Received error response from handler       tid=1 file=serverprivate.nim:314 status=404 meth=GET peer=172.17.0.1:36072 uri=/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto error_status="404 Not Found" error_content_type=text/plain error_message=/toychat/2/huilong/proto']