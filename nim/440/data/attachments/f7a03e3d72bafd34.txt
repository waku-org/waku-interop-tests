[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_get_store_duplicate_messages with id: 2024-11-07_15-53-41__f86d7153-3778-4c8a-b4d5-38a0c1786f4e
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-11-07_15-53-41__f86d7153-3778-4c8a-b4d5-38a0c1786f4e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.213.54
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['38722', '38723', '38724', '38725', '38726']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 38722:38722 -p 38723:38723 -p 38724:38724 -p 38725:38725 -p 38726:38726 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38724 --rest-port=38722 --tcp-port=38723 --discv5-udp-port=38725 --rest-address=0.0.0.0 --nat=extip:172.18.213.54 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1cab8a092dbfa2be7c52bba56b6fe1f902aa0c04dec55139b9bc90fe76fbdd70 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38726 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.213.54 waku 9cb08924384d20c530b92480749e117b4a896c74581ce6513832b5f0754465d9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9cb08924384d. Setting up logs at ./log/docker/publishing_node1_2024-11-07_15-53-41__f86d7153-3778-4c8a-b4d5-38a0c1786f4e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 38722
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 35ae5b7393b8. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38722/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38722/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.213.54/tcp/38723/p2p/16Uiu2HAmVhKbpjVAf7QP9v5HCiEwPdKrP4jG218RZXGQseYHCtB7","/ip4/172.18.213.54/tcp/38724/ws/p2p/16Uiu2HAmVhKbpjVAf7QP9v5HCiEwPdKrP4jG218RZXGQseYHCtB7"],"enrUri":"enr:-L24QEc7IVUQQotmS0V0XwsXFy67AOTwQ-gcSPzRtirVEMB5BXwdyQrsWo_FtRnd--VUBH1qauq51lfRuGAT_WwgSE4CgmlkgnY0gmlwhKwS1TaKbXVsdGlhZGRyc5YACASsEtU2BpdDAAoErBLVNgaXRN0DgnJzhQADAQAAiXNlY3AyNTZrMaED_S-bJ4O8FmDuxOKNNFtnted7Yhu92v7Gv8r9OVq-uM6DdGNwgpdDg3VkcIKXRYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-11-07_15-53-41__f86d7153-3778-4c8a-b4d5-38a0c1786f4e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.146.159
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37857', '37858', '37859', '37860', '37861']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37857:37857 -p 37858:37858 -p 37859:37859 -p 37860:37860 -p 37861:37861 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37859 --rest-port=37857 --tcp-port=37858 --discv5-udp-port=37860 --rest-address=0.0.0.0 --nat=extip:172.18.146.159 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0ffa76dec5b496bfcbbddd6d53ec129bfdbba99fd6e8bb1b4a583bb065c5ce3b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37861 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QEc7IVUQQotmS0V0XwsXFy67AOTwQ-gcSPzRtirVEMB5BXwdyQrsWo_FtRnd--VUBH1qauq51lfRuGAT_WwgSE4CgmlkgnY0gmlwhKwS1TaKbXVsdGlhZGRyc5YACASsEtU2BpdDAAoErBLVNgaXRN0DgnJzhQADAQAAiXNlY3AyNTZrMaED_S-bJ4O8FmDuxOKNNFtnted7Yhu92v7Gv8r9OVq-uM6DdGNwgpdDg3VkcIKXRYV3YWt1MgM --storenode=/ip4/172.18.213.54/tcp/38723/p2p/16Uiu2HAmVhKbpjVAf7QP9v5HCiEwPdKrP4jG218RZXGQseYHCtB7 --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.146.159 waku 56b80c7187d92aa56281f0ec50a989cfaaf18b0f8dd321bd81b7d5e335322f76
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 56b80c7187d9. Setting up logs at ./log/docker/store_node1_2024-11-07_15-53-41__f86d7153-3778-4c8a-b4d5-38a0c1786f4e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 37857
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37857/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37857/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.146.159/tcp/37858/p2p/16Uiu2HAmAUZUopPr2oumD2UwPdTRtAE6H1Cfq4SgnGn7AG9gbhkG","/ip4/172.18.146.159/tcp/37859/ws/p2p/16Uiu2HAmAUZUopPr2oumD2UwPdTRtAE6H1Cfq4SgnGn7AG9gbhkG"],"enrUri":"enr:-L24QLWpl8nUeb2ilP9MlnAvy5Kbwdgy28FcOqXm4TRiSkovcxF47ZGnqKM22OCD_t7kXd2pWh3hYe-IrN-QD-FGWdICgmlkgnY0gmlwhKwSkp-KbXVsdGlhZGRyc5YACASsEpKfBpPiAAoErBKSnwaT490DgnJzhQADAQAAiXNlY3AyNTZrMaEC35yycKmBJmWY9XDq6zdTveu8voDlu0JVofzNLe7GQ22DdGNwgpPig3VkcIKT5IV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37857/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.213.54/tcp/38723/p2p/16Uiu2HAmVhKbpjVAf7QP9v5HCiEwPdKrP4jG218RZXGQseYHCtB7"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38722/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37857/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38722/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38722/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38722/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"fL751ne8+0KVf69n8+g1qycvDmZVdCHAiBJTPcr4vic="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37857/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"fL751ne8+0KVf69n8+g1qycvDmZVdCHAiBJTPcr4vic="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9cb08924384d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 56b80c7187d9
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9cb08924384d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.