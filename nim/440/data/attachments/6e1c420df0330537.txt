[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_with_extra_field with id: 2024-11-07_15-38-24__51920674-ea93-4edf-935e-086a2d6598dd
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-07_15-38-24__51920674-ea93-4edf-935e-086a2d6598dd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.37.53
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10774', '10775', '10776', '10777', '10778']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10774:10774 -p 10775:10775 -p 10776:10776 -p 10777:10777 -p 10778:10778 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10776 --rest-port=10774 --tcp-port=10775 --discv5-udp-port=10777 --rest-address=0.0.0.0 --nat=extip:172.18.37.53 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8585edbcdce54fbe27bae6d76fe53651fedd2b0ef12ec9decaec1a178f591ed8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10778 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.37.53 waku 2f8aac751ae9dfb8d1289ac8479cfe0ea3a7308e432584a35a7a1d91b3735788
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2f8aac751ae9. Setting up logs at ./log/docker/node1_2024-11-07_15-38-24__51920674-ea93-4edf-935e-086a2d6598dd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 10774
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 28919671150c. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10774/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10774/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.37.53/tcp/10775/p2p/16Uiu2HAmSvPi2UhBG3CGScGEJpLyxY4A8hZ8o58FFCi19pUa3G9j","/ip4/172.18.37.53/tcp/10776/ws/p2p/16Uiu2HAmSvPi2UhBG3CGScGEJpLyxY4A8hZ8o58FFCi19pUa3G9j"],"enrUri":"enr:-L24QAnVXaSXR3V-2iVd5BxLFmmF13pKh2227axczs0HccgXNFsPZpjM2N04VEbhBoekUt0c0bQnSjeTId1wcsCTOP0CgmlkgnY0gmlwhKwSJTWKbXVsdGlhZGRyc5YACASsEiU1BioXAAoErBIlNQYqGN0DgnJzhQADAQAAiXNlY3AyNTZrMaED0_W9UqEHe7XL8StbuXfPNK0xoPvlBxblVlcAGq-PEhaDdGNwgioXg3VkcIIqGYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-07_15-38-24__51920674-ea93-4edf-935e-086a2d6598dd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.241.146
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['44969', '44970', '44971', '44972', '44973']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 44969:44969 -p 44970:44970 -p 44971:44971 -p 44972:44972 -p 44973:44973 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44971 --rest-port=44969 --tcp-port=44970 --discv5-udp-port=44972 --rest-address=0.0.0.0 --nat=extip:172.18.241.146 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f0e0ab6ac1cea8ecded0bb17467e65f6cd3fceb48e9b2aa5649bd4ac68caf9ec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44973 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QAnVXaSXR3V-2iVd5BxLFmmF13pKh2227axczs0HccgXNFsPZpjM2N04VEbhBoekUt0c0bQnSjeTId1wcsCTOP0CgmlkgnY0gmlwhKwSJTWKbXVsdGlhZGRyc5YACASsEiU1BioXAAoErBIlNQYqGN0DgnJzhQADAQAAiXNlY3AyNTZrMaED0_W9UqEHe7XL8StbuXfPNK0xoPvlBxblVlcAGq-PEhaDdGNwgioXg3VkcIIqGYV3YWt1MgU --filternode=/ip4/172.18.37.53/tcp/10775/p2p/16Uiu2HAmSvPi2UhBG3CGScGEJpLyxY4A8hZ8o58FFCi19pUa3G9j
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.241.146 waku 8d1e5a18016bdea8617dd2ca105f8280f422500cc5e0e779cfb4c719e179570e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8d1e5a18016b. Setting up logs at ./log/docker/node2_2024-11-07_15-38-24__51920674-ea93-4edf-935e-086a2d6598dd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 44969
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44969/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44969/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.241.146/tcp/44970/p2p/16Uiu2HAkz7m9SGvRUPTD8oywQLD7bQwS3tQx83Nxg11tbXTVbAPh","/ip4/172.18.241.146/tcp/44971/ws/p2p/16Uiu2HAkz7m9SGvRUPTD8oywQLD7bQwS3tQx83Nxg11tbXTVbAPh"],"enrUri":"enr:-L24QKhijO52K1a6RpN14R4P6xHohXC2_aOziRWy27bNWln3E0gPsBJPig7yLrIvgAi6UjsendB_FuSmStg3oahhTrwCgmlkgnY0gmlwhKwS8ZKKbXVsdGlhZGRyc5YACASsEvGSBq-qAAoErBLxkgavq90DgnJzhQADAQAAiXNlY3AyNTZrMaECRbPSUt4LeWjZ-V4VHJ8uv5rvC7FBnBgrfiif8WhV8DiDdGNwgq-qg3VkcIKvrIV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44969/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.37.53/tcp/10775/p2p/16Uiu2HAmSvPi2UhBG3CGScGEJpLyxY4A8hZ8o58FFCi19pUa3G9j"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10774/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44969/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e923921a-b3b7-4eac-899b-8d1c735a73b8", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"e923921a-b3b7-4eac-899b-8d1c735a73b8","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:44969/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1", "extraField": "extraValue"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:44969/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2f8aac751ae9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 8d1e5a18016b
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2f8aac751ae9. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.