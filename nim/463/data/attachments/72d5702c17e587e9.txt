[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_no_content_topic with id: 2024-11-25_07-32-36__6a127b9a-7d57-420c-afd2-85e3c0095821
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-25_07-32-36__6a127b9a-7d57-420c-afd2-85e3c0095821__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.34.188
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['13729', '13730', '13731', '13732', '13733']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 13729:13729 -p 13730:13730 -p 13731:13731 -p 13732:13732 -p 13733:13733 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13731 --rest-port=13729 --tcp-port=13730 --discv5-udp-port=13732 --rest-address=0.0.0.0 --nat=extip:172.18.34.188 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=933d9e528c2bb4ae86a966e1435dde206bdedce5041ba38fbde1ea0fe41ed5d0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13733 --metrics-logging=true --relay=true --filter=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 39cbe6e87304. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.34.188 waku 24b0f9756966adc127bbc572e487a24428b10352f3b237d937dc37adca40ccde
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 24b0f9756966. Setting up logs at ./log/docker/node1_2024-11-25_07-32-36__6a127b9a-7d57-420c-afd2-85e3c0095821__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 13729
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13729/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13729/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.34.188/tcp/13730/p2p/16Uiu2HAmHyRBdHhxxFzPKuAVAJ3EHmi2K9tEHvTfA6w3p7yV5Axa","/ip4/172.18.34.188/tcp/13731/ws/p2p/16Uiu2HAmHyRBdHhxxFzPKuAVAJ3EHmi2K9tEHvTfA6w3p7yV5Axa"],"enrUri":"enr:-L24QBbC56jl-J3cOP-q7TDPbeU9rfORih_GgpqTHUYoKjBjDprg4lY2JJdJ7jz1Fgx7Ca_knQZaX-bk9Kk5rJ0PGdoCgmlkgnY0gmlwhKwSIryKbXVsdGlhZGRyc5YACASsEiK8BjWiAAoErBIivAY1o90DgnJzhQADAQAAiXNlY3AyNTZrMaEDTwL36PJxiQpSULVz3L1S-Iiggm5aV4_2ztdTRslNwTuDdGNwgjWig3VkcII1pIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-25_07-32-36__6a127b9a-7d57-420c-afd2-85e3c0095821__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.63.230
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['33764', '33765', '33766', '33767', '33768']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 33764:33764 -p 33765:33765 -p 33766:33766 -p 33767:33767 -p 33768:33768 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33766 --rest-port=33764 --tcp-port=33765 --discv5-udp-port=33767 --rest-address=0.0.0.0 --nat=extip:172.18.63.230 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e40d3cb1831f2aaff5ab2ee1ebcd15dcead55f0c52fbfe573c2446cea4dcbf2a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33768 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QBbC56jl-J3cOP-q7TDPbeU9rfORih_GgpqTHUYoKjBjDprg4lY2JJdJ7jz1Fgx7Ca_knQZaX-bk9Kk5rJ0PGdoCgmlkgnY0gmlwhKwSIryKbXVsdGlhZGRyc5YACASsEiK8BjWiAAoErBIivAY1o90DgnJzhQADAQAAiXNlY3AyNTZrMaEDTwL36PJxiQpSULVz3L1S-Iiggm5aV4_2ztdTRslNwTuDdGNwgjWig3VkcII1pIV3YWt1MgU --filternode=/ip4/172.18.34.188/tcp/13730/p2p/16Uiu2HAmHyRBdHhxxFzPKuAVAJ3EHmi2K9tEHvTfA6w3p7yV5Axa
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.63.230 waku bcc8a395b4ef987f7390b52e8b6bc794015e60224408803b123e4a4819ae7eb3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID bcc8a395b4ef. Setting up logs at ./log/docker/node2_2024-11-25_07-32-36__6a127b9a-7d57-420c-afd2-85e3c0095821__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 33764
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33764/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33764/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.63.230/tcp/33765/p2p/16Uiu2HAkwq6BMWtvimMhwVC7YBy95EMu1gw1hmFuvDFrSTMTaKEd","/ip4/172.18.63.230/tcp/33766/ws/p2p/16Uiu2HAkwq6BMWtvimMhwVC7YBy95EMu1gw1hmFuvDFrSTMTaKEd"],"enrUri":"enr:-L24QPCiJnxLRfWqVM2ebAEUCWKyGSxtzZNwzaH8b0eZLsPXf9sXMksYR1xbOWl2c-D1ESntFdsLuNQxO_aF17bGawUCgmlkgnY0gmlwhKwSP-aKbXVsdGlhZGRyc5YACASsEj_mBoPlAAoErBI_5gaD5t0DgnJzhQADAQAAiXNlY3AyNTZrMaECI7cYQCK-ttIPwSxUZt5Tm-5z1L-3C0x1N3UaVdF88OaDdGNwgoPlg3VkcIKD54V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33764/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.34.188/tcp/13730/p2p/16Uiu2HAmHyRBdHhxxFzPKuAVAJ3EHmi2K9tEHvTfA6w3p7yV5Axa"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13729/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33764/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "b8ef45da-a0b5-43a7-8f02-c428f58e6f5d", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"b8ef45da-a0b5-43a7-8f02-c428f58e6f5d","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:33764/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:33764/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 24b0f9756966
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id bcc8a395b4ef
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 24b0f9756966. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.