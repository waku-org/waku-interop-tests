[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_receiving_nodes__relay_node1_forwards_lightpushed_message_to_relay_node2 with id: 2024-11-25_07-33-45__43110fe9-6572-4dfa-b592-7e04c8953f67
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-25_07-33-45__43110fe9-6572-4dfa-b592-7e04c8953f67__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.181.248
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['19603', '19604', '19605', '19606', '19607']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 19603:19603 -p 19604:19604 -p 19605:19605 -p 19606:19606 -p 19607:19607 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19605 --rest-port=19603 --tcp-port=19604 --discv5-udp-port=19606 --rest-address=0.0.0.0 --nat=extip:172.18.181.248 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b797210e826fe9a6e0fd0b859c5c0cdedffc0bf82213bbd88fa06a7eec9f1cc5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19607 --metrics-logging=true --lightpush=true --relay=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 795dd24b619b. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.181.248 waku 9a170207ecf03bceea8b9c9acd50c5788e5bedb52776478d6eaa7b83f988a95c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9a170207ecf0. Setting up logs at ./log/docker/receiving_node1_2024-11-25_07-33-45__43110fe9-6572-4dfa-b592-7e04c8953f67__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 19603
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19603/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19603/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.181.248/tcp/19604/p2p/16Uiu2HAm2bsNVLfdQrWf1KHk1kRzqL6saqCzfhAoTVPwQ2LTDQBb","/ip4/172.18.181.248/tcp/19605/ws/p2p/16Uiu2HAm2bsNVLfdQrWf1KHk1kRzqL6saqCzfhAoTVPwQ2LTDQBb"],"enrUri":"enr:-L24QBGSiBejPhZNeLteNWxR8dtiMKbyGDej99BLo9yzShqOe5D5z_H2UhjwmlHF5XuvmulO49wyuxMFCmp7tOyoSnECgmlkgnY0gmlwhKwStfiKbXVsdGlhZGRyc5YACASsErX4BkyUAAoErBK1-AZMld0DgnJzhQADAQAAiXNlY3AyNTZrMaECap5_LEESgrB6xmSCnfa3_IMStJ0HCbWnevbZE7PQ4sKDdGNwgkyUg3VkcIJMloV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-25_07-33-45__43110fe9-6572-4dfa-b592-7e04c8953f67__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.245.3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['45185', '45186', '45187', '45188', '45189']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 45185:45185 -p 45186:45186 -p 45187:45187 -p 45188:45188 -p 45189:45189 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45187 --rest-port=45185 --tcp-port=45186 --discv5-udp-port=45188 --rest-address=0.0.0.0 --nat=extip:172.18.245.3 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bae5acb4fa1d6add9d62f31fdff0e1d9ada937d42c29c17a0de30b35dbff17a6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45189 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.245.3 waku ed42730f51557c66d03b4dad89c8be8f0730879fe6c850dfa23cf065ba8dc4d8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ed42730f5155. Setting up logs at ./log/docker/receiving_node2_2024-11-25_07-33-45__43110fe9-6572-4dfa-b592-7e04c8953f67__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 45185
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45185/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45185/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.245.3/tcp/45186/p2p/16Uiu2HAmSkkvrVxXeouxF6wvrYX8VCx81LMHhBQA4cUp6wZrDCLE","/ip4/172.18.245.3/tcp/45187/ws/p2p/16Uiu2HAmSkkvrVxXeouxF6wvrYX8VCx81LMHhBQA4cUp6wZrDCLE"],"enrUri":"enr:-L24QD5H8OcZaVuJkHPD2y9KLebn8hMf8vc6YyXeXq54Y9raFsSutxi7bmwhCoUHDC5T5oq2OoK1DsagDd_48OEvTKICgmlkgnY0gmlwhKwS9QOKbXVsdGlhZGRyc5YACASsEvUDBrCCAAoErBL1Awawg90DgnJzhQADAQAAiXNlY3AyNTZrMaED0X3tInAE5vwE65eIbkEvAIgxnapATT1f0Np-u0asSdeDdGNwgrCCg3VkcIKwhIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45185/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.181.248/tcp/19604/p2p/16Uiu2HAm2bsNVLfdQrWf1KHk1kRzqL6saqCzfhAoTVPwQ2LTDQBb"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-25_07-33-45__43110fe9-6572-4dfa-b592-7e04c8953f67__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.252.40
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['64949', '64950', '64951', '64952', '64953']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 64949:64949 -p 64950:64950 -p 64951:64951 -p 64952:64952 -p 64953:64953 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64951 --rest-port=64949 --tcp-port=64950 --discv5-udp-port=64952 --rest-address=0.0.0.0 --nat=extip:172.18.252.40 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b0dfd8f4ccbfad0ce37b74ccf3ed3bfcfe3179c2aff8daabccac0ce2c57eef07 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64953 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QBGSiBejPhZNeLteNWxR8dtiMKbyGDej99BLo9yzShqOe5D5z_H2UhjwmlHF5XuvmulO49wyuxMFCmp7tOyoSnECgmlkgnY0gmlwhKwStfiKbXVsdGlhZGRyc5YACASsErX4BkyUAAoErBK1-AZMld0DgnJzhQADAQAAiXNlY3AyNTZrMaECap5_LEESgrB6xmSCnfa3_IMStJ0HCbWnevbZE7PQ4sKDdGNwgkyUg3VkcIJMloV3YWt1Mgk --lightpushnode=/ip4/172.18.181.248/tcp/19604/p2p/16Uiu2HAm2bsNVLfdQrWf1KHk1kRzqL6saqCzfhAoTVPwQ2LTDQBb --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.252.40 waku 523e9c9b89d3353c556d3f16a490647fcc397e8e57dcf952c85894cb108e5cca
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 523e9c9b89d3. Setting up logs at ./log/docker/lightpush_node1_2024-11-25_07-33-45__43110fe9-6572-4dfa-b592-7e04c8953f67__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 64949
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64949/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64949/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.252.40/tcp/64950/p2p/16Uiu2HAmDmmz4eCCsXec2zc7ocHGpxNHmPB7W1ThDFXFt7sKRrEN","/ip4/172.18.252.40/tcp/64951/ws/p2p/16Uiu2HAmDmmz4eCCsXec2zc7ocHGpxNHmPB7W1ThDFXFt7sKRrEN"],"enrUri":"enr:-L24QBRIVdFYNBG7QuBu2gEJvFrJJ-ExhGxDlogmSjgB9WE4fReoI7TtvxhgAxYDXMChjphKo7EDRZtzuRq8Vp2Z23gCgmlkgnY0gmlwhKwS_CiKbXVsdGlhZGRyc5YACASsEvwoBv22AAoErBL8KAb9t90DgnJzhQADAQAAiXNlY3AyNTZrMaEDEJjFNSz7Wrfp2Vcch0HgpbJ9AG81EjQoQz2Ct-HkrguDdGNwgv22g3VkcIL9uIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64949/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.181.248/tcp/19604/p2p/16Uiu2HAm2bsNVLfdQrWf1KHk1kRzqL6saqCzfhAoTVPwQ2LTDQBb"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64949/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.245.3/tcp/45186/p2p/16Uiu2HAmSkkvrVxXeouxF6wvrYX8VCx81LMHhBQA4cUp6wZrDCLE"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19603/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45185/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64949/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1732520032582493440}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19603/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732520032582493440,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45185/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732520032582493440,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 9a170207ecf0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id ed42730f5155
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9a170207ecf0. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 523e9c9b89d3
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ed42730f5155. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.