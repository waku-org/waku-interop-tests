[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_ping_on_unsubscribed_peer with id: 2024-11-25_07-31-19__ae317dac-f4ec-48e1-b89b-4ca395d2bad5
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-25_07-31-19__ae317dac-f4ec-48e1-b89b-4ca395d2bad5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.218.58
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['6000', '6001', '6002', '6003', '6004']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 6000:6000 -p 6001:6001 -p 6002:6002 -p 6003:6003 -p 6004:6004 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6002 --rest-port=6000 --tcp-port=6001 --discv5-udp-port=6003 --rest-address=0.0.0.0 --nat=extip:172.18.218.58 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b62cf2d0a5afbb9f97ff547aea7abf6233ea936b7e5a445de044bc7b7f8150e3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6004 --metrics-logging=true --relay=true --filter=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3a04768a05a3. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.218.58 waku 17130e0c139e2ff24adc9cd3d97224e08cc872579d564e6a3ef173438ced567a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 17130e0c139e. Setting up logs at ./log/docker/node1_2024-11-25_07-31-19__ae317dac-f4ec-48e1-b89b-4ca395d2bad5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 6000
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6000/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6000/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.218.58/tcp/6001/p2p/16Uiu2HAmEwSsBTNZtNzK3XzJerqDYYbrT2drjocU6RqUr1PUhgeT","/ip4/172.18.218.58/tcp/6002/ws/p2p/16Uiu2HAmEwSsBTNZtNzK3XzJerqDYYbrT2drjocU6RqUr1PUhgeT"],"enrUri":"enr:-L24QE3tuWvDAWUUTDAte2spJtB32SHZvlXRTrua2BvMEZI_QgaD02dVm1fQ3EpTc6bKoKOgIjxx_e4pI0-Yd4vZN4kCgmlkgnY0gmlwhKwS2jqKbXVsdGlhZGRyc5YACASsEto6BhdxAAoErBLaOgYXct0DgnJzhQADAQAAiXNlY3AyNTZrMaEDIe6l11hIUItgUY7gsyMVJVR7mANRVJVYxojtjkxosSiDdGNwghdxg3VkcIIXc4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-25_07-31-19__ae317dac-f4ec-48e1-b89b-4ca395d2bad5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.10.142
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['26400', '26401', '26402', '26403', '26404']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 26400:26400 -p 26401:26401 -p 26402:26402 -p 26403:26403 -p 26404:26404 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26402 --rest-port=26400 --tcp-port=26401 --discv5-udp-port=26403 --rest-address=0.0.0.0 --nat=extip:172.18.10.142 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6259aa1c27cb7f68c5d1d63cbc2cabc0bb4d69fa727989fd5f8eddbee7bd4e4c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26404 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QE3tuWvDAWUUTDAte2spJtB32SHZvlXRTrua2BvMEZI_QgaD02dVm1fQ3EpTc6bKoKOgIjxx_e4pI0-Yd4vZN4kCgmlkgnY0gmlwhKwS2jqKbXVsdGlhZGRyc5YACASsEto6BhdxAAoErBLaOgYXct0DgnJzhQADAQAAiXNlY3AyNTZrMaEDIe6l11hIUItgUY7gsyMVJVR7mANRVJVYxojtjkxosSiDdGNwghdxg3VkcIIXc4V3YWt1MgU --filternode=/ip4/172.18.218.58/tcp/6001/p2p/16Uiu2HAmEwSsBTNZtNzK3XzJerqDYYbrT2drjocU6RqUr1PUhgeT
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.10.142 waku 8955e5c2d112f538c18948e53f246a329319d3fe2aeff527a611c648a679ee92
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8955e5c2d112. Setting up logs at ./log/docker/node2_2024-11-25_07-31-19__ae317dac-f4ec-48e1-b89b-4ca395d2bad5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 26400
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26400/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26400/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.10.142/tcp/26401/p2p/16Uiu2HAmPaTr33PaNBP6K9JG6KP1LzbeuWKTMVpQhPNY9mUv3UZB","/ip4/172.18.10.142/tcp/26402/ws/p2p/16Uiu2HAmPaTr33PaNBP6K9JG6KP1LzbeuWKTMVpQhPNY9mUv3UZB"],"enrUri":"enr:-L24QD9wfqn2_CRAHkiKLa8o1MlU45K8TBp9pODXNKngSVGsCzAvdO8pHH6T9QdUvDbUJAL9zoTd3A672CEbBLyfyOwCgmlkgnY0gmlwhKwSCo6KbXVsdGlhZGRyc5YACASsEgqOBmchAAoErBIKjgZnIt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDoke91dy8qplajROZ5THMSnEZxCp1MWOgFYF5myYdapaDdGNwgmchg3VkcIJnI4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26400/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.218.58/tcp/6001/p2p/16Uiu2HAmEwSsBTNZtNzK3XzJerqDYYbrT2drjocU6RqUr1PUhgeT"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6000/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26400/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "5532e1e5-d9e1-4ff5-a50d-e9e5a359a46b", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"5532e1e5-d9e1-4ff5-a50d-e9e5a359a46b","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26400/filter/v2/subscriptions/7e9d480c-f7c1-4c20-ac54-63a6e07fed35" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"7e9d480c-f7c1-4c20-ac54-63a6e07fed35","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:26400/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"12345","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26400/filter/v2/subscriptions/f2bd4616-0aca-4226-a490-85fe8f492312" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:26400/filter/v2/subscriptions/f2bd4616-0aca-4226-a490-85fe8f492312. Response content: b'{"requestId":"f2bd4616-0aca-4226-a490-85fe8f492312","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 17130e0c139e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 8955e5c2d112
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 17130e0c139e. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.