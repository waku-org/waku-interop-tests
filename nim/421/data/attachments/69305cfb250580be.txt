[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_receiving_nodes__relay_node1_forwards_lightpushed_message_to_relay_node2 with id: 2024-11-06_04-08-21__a9b593ff-5425-40d6-8d16-4acac1c4343e
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-06_04-08-21__a9b593ff-5425-40d6-8d16-4acac1c4343e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.38.92
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['16084', '16085', '16086', '16087', '16088']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 16084:16084 -p 16085:16085 -p 16086:16086 -p 16087:16087 -p 16088:16088 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16086 --rest-port=16084 --tcp-port=16085 --discv5-udp-port=16087 --rest-address=0.0.0.0 --nat=extip:172.18.38.92 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6ac6cb2dec0f4c2ade4b1a26a264baad45ccd649b1fcd3e61c7bca5ff94fd6f8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16088 --metrics-logging=true --lightpush=true --relay=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 60d39df00dd6. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.38.92 waku fcfc28fefed9099d62bb6748ba50257454bbe797640a37290ca5c6474b5f085a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fcfc28fefed9. Setting up logs at ./log/docker/receiving_node1_2024-11-06_04-08-21__a9b593ff-5425-40d6-8d16-4acac1c4343e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 16084
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16084/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16084/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.38.92/tcp/16085/p2p/16Uiu2HAkxXcfj2tCF6vRyN9U7pHofkn5aEMXysSMJbn1VvYkd3sa","/ip4/172.18.38.92/tcp/16086/ws/p2p/16Uiu2HAkxXcfj2tCF6vRyN9U7pHofkn5aEMXysSMJbn1VvYkd3sa"],"enrUri":"enr:-L24QADBgHLrBeGpAvOfDchs9q06wzoxs_QQ5IAL9k-L6ENudi255xrxbiIYf8-vBIoCym_XzT1OGFBLGwGKU903X8sCgmlkgnY0gmlwhKwSJlyKbXVsdGlhZGRyc5YACASsEiZcBj7VAAoErBImXAY-1t0DgnJzhQADAQAAiXNlY3AyNTZrMaECLhjNIUYPTpOgCHy3_6y_bYQDNXCvvmGT2KSFJGHDtq2DdGNwgj7Vg3VkcII-14V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-06_04-08-21__a9b593ff-5425-40d6-8d16-4acac1c4343e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.114.74
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['18097', '18098', '18099', '18100', '18101']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 18097:18097 -p 18098:18098 -p 18099:18099 -p 18100:18100 -p 18101:18101 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18099 --rest-port=18097 --tcp-port=18098 --discv5-udp-port=18100 --rest-address=0.0.0.0 --nat=extip:172.18.114.74 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=edeca3fb5c297fd50a56d9cb0dddf4d8f9d5515cfa57bf4c2104d01ecccaaffb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18101 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.114.74 waku 744a47dfcffded45f045dc164bb47595aec1a76da17074387a337736535ca7c3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 744a47dfcffd. Setting up logs at ./log/docker/receiving_node2_2024-11-06_04-08-21__a9b593ff-5425-40d6-8d16-4acac1c4343e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 18097
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18097/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18097/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.114.74/tcp/18098/p2p/16Uiu2HAmEmZPM97dpra37CyFW5vuUhsuGZfKkVXYrtd2brfKq7sN","/ip4/172.18.114.74/tcp/18099/ws/p2p/16Uiu2HAmEmZPM97dpra37CyFW5vuUhsuGZfKkVXYrtd2brfKq7sN"],"enrUri":"enr:-L24QP5lY-P5X7AUgWXBA_r8aAxVFlb1QQQTfED_ptn5D7bcCkrmSxZ0o91FrZTqiK5_MlfMfrEqi40SbqlOm8Rtj84CgmlkgnY0gmlwhKwSckqKbXVsdGlhZGRyc5YACASsEnJKBkayAAoErBJySgZGs90DgnJzhQADAQAAiXNlY3AyNTZrMaEDH2Y2SOpqRjmJreYjJhD0EfUX3gkWfDrAJMltr659puGDdGNwgkayg3VkcIJGtIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18097/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.38.92/tcp/16085/p2p/16Uiu2HAkxXcfj2tCF6vRyN9U7pHofkn5aEMXysSMJbn1VvYkd3sa"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-06_04-08-21__a9b593ff-5425-40d6-8d16-4acac1c4343e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.174.248
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['42605', '42606', '42607', '42608', '42609']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 42605:42605 -p 42606:42606 -p 42607:42607 -p 42608:42608 -p 42609:42609 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42607 --rest-port=42605 --tcp-port=42606 --discv5-udp-port=42608 --rest-address=0.0.0.0 --nat=extip:172.18.174.248 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=687e764c8b0faeff27d44a5053dedaa94c8a6eaa7f914baebbc78ce94efedf3b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42609 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QADBgHLrBeGpAvOfDchs9q06wzoxs_QQ5IAL9k-L6ENudi255xrxbiIYf8-vBIoCym_XzT1OGFBLGwGKU903X8sCgmlkgnY0gmlwhKwSJlyKbXVsdGlhZGRyc5YACASsEiZcBj7VAAoErBImXAY-1t0DgnJzhQADAQAAiXNlY3AyNTZrMaECLhjNIUYPTpOgCHy3_6y_bYQDNXCvvmGT2KSFJGHDtq2DdGNwgj7Vg3VkcII-14V3YWt1Mgk --lightpushnode=/ip4/172.18.38.92/tcp/16085/p2p/16Uiu2HAkxXcfj2tCF6vRyN9U7pHofkn5aEMXysSMJbn1VvYkd3sa --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.174.248 waku 00f04e2ad42a75a7b8259e62f60b1b0792a72f0cc88da49b88adf0ae7fc2621e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 00f04e2ad42a. Setting up logs at ./log/docker/lightpush_node1_2024-11-06_04-08-21__a9b593ff-5425-40d6-8d16-4acac1c4343e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 42605
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42605/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42605/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.174.248/tcp/42606/p2p/16Uiu2HAmUhCQB67YtA4X3SbAh9mNRN6SF1yBhKSj9RJseiUWUxtt","/ip4/172.18.174.248/tcp/42607/ws/p2p/16Uiu2HAmUhCQB67YtA4X3SbAh9mNRN6SF1yBhKSj9RJseiUWUxtt"],"enrUri":"enr:-L24QE2wn0qTek4VKiP9udVWP3C1HmbF2rTAlmy2sH7GqjqiU3IEKO9bScef9FbBnN2Tb7A4XnYR7ulVA7z1HFvEm7YCgmlkgnY0gmlwhKwSrviKbXVsdGlhZGRyc5YACASsEq74BqZuAAoErBKu-Aamb90DgnJzhQADAQAAiXNlY3AyNTZrMaED7kvG8Y496vofZpvmDPM1ForhuFtWhabAbOZYwGjGNCWDdGNwgqZug3VkcIKmcIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42605/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.38.92/tcp/16085/p2p/16Uiu2HAkxXcfj2tCF6vRyN9U7pHofkn5aEMXysSMJbn1VvYkd3sa"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42605/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.114.74/tcp/18098/p2p/16Uiu2HAmEmZPM97dpra37CyFW5vuUhsuGZfKkVXYrtd2brfKq7sN"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16084/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18097/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42605/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730866106720927232}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16084/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1730866106720927232,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18097/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1730866106720927232,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id fcfc28fefed9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 744a47dfcffd
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fcfc28fefed9. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 00f04e2ad42a
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 744a47dfcffd. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.