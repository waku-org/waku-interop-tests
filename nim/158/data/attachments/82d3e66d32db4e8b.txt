[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_2_lightpush_nodes_and_1_receiving_node with id: 2024-04-21_04-13-33__5e915c1d-2140-4ca7-a914-5bf7160910a3
[35mDEBUG   [0m src.steps.light_push:light_push.py:26 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-04-21_04-13-33__5e915c1d-2140-4ca7-a914-5bf7160910a3__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.155.254
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['18291', '18292', '18293', '18294', '18295']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:315 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 18291:18291 -p 18292:18292 -p 18293:18293 -p 18294:18294 -p 18295:18295 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18293 --rest-port=18291 --tcp-port=18292 --discv5-udp-port=18294 --rest-address=0.0.0.0 --nat=extip:172.18.155.254 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18295 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.155.254 waku 74b29ea2f65675f2e416c94ae901424f4588727f6171f57c6f2da655bdd85749
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 74b29ea2f656. Setting up logs at ./log/docker/receiving_node1_2024-04-21_04-13-33__5e915c1d-2140-4ca7-a914-5bf7160910a3__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 18291
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18291/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.155.254/tcp/18292/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.155.254/tcp/18293/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QCSotpaEVkIPNQ8GB6mrAN46UbCYkq9cWe157GZr9dd-VuCWWlmQ32gU2TmepwoTl97k7gyYuwRW6NLqj_QpKUMBgmlkgnY0gmlwhKwSm_6KbXVsdGlhZGRyc4wACgSsEpv-Bkd13QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCR3SDdWRwgkd2hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-04-21_04-13-33__5e915c1d-2140-4ca7-a914-5bf7160910a3__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.22.28
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['29816', '29817', '29818', '29819', '29820']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:315 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 29816:29816 -p 29817:29817 -p 29818:29818 -p 29819:29819 -p 29820:29820 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29818 --rest-port=29816 --tcp-port=29817 --discv5-udp-port=29819 --rest-address=0.0.0.0 --nat=extip:172.18.22.28 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29820 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QCSotpaEVkIPNQ8GB6mrAN46UbCYkq9cWe157GZr9dd-VuCWWlmQ32gU2TmepwoTl97k7gyYuwRW6NLqj_QpKUMBgmlkgnY0gmlwhKwSm_6KbXVsdGlhZGRyc4wACgSsEpv-Bkd13QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCR3SDdWRwgkd2hXdha3UyCQ --lightpushnode=/ip4/172.18.155.254/tcp/18292/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.22.28 waku 87a02e632ff85a858332d9680685cce568f4377d6e67c08e7cee04d135426f5d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 87a02e632ff8. Setting up logs at ./log/docker/lightpush_node1_2024-04-21_04-13-33__5e915c1d-2140-4ca7-a914-5bf7160910a3__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 29816
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29816/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.22.28/tcp/29817/p2p/16Uiu2HAkusnhzqf6kBF5fAc4W5V6PHaJAywnEVL9NwoNS84sUVdC","/ip4/172.18.22.28/tcp/29818/ws/p2p/16Uiu2HAkusnhzqf6kBF5fAc4W5V6PHaJAywnEVL9NwoNS84sUVdC"],"enrUri":"enr:-LO4QDfMXJhQamGPcbQo59NM74TCC6_Cy24pj4MTJQYVvoMXTdFaRTNJE7NpLKufP8VoAETufNBvewazPPrWzglEcdoBgmlkgnY0gmlwhKwSFhyKbXVsdGlhZGRyc4wACgSsEhYcBnR63QOCcnOFAAABAACJc2VjcDI1NmsxoQIGsLVBdZ8cvuHFXpHeH9rY69VXpmbuOeP43wSHOQzbm4N0Y3CCdHmDdWRwgnR7hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29816/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.155.254/tcp/18292/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/lightpush_node2_2024-04-21_04-13-33__5e915c1d-2140-4ca7-a914-5bf7160910a3__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.64.199
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['36556', '36557', '36558', '36559', '36560']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:315 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 36556:36556 -p 36557:36557 -p 36558:36558 -p 36559:36559 -p 36560:36560 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36558 --rest-port=36556 --tcp-port=36557 --discv5-udp-port=36559 --rest-address=0.0.0.0 --nat=extip:172.18.64.199 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36560 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QCSotpaEVkIPNQ8GB6mrAN46UbCYkq9cWe157GZr9dd-VuCWWlmQ32gU2TmepwoTl97k7gyYuwRW6NLqj_QpKUMBgmlkgnY0gmlwhKwSm_6KbXVsdGlhZGRyc4wACgSsEpv-Bkd13QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCR3SDdWRwgkd2hXdha3UyCQ --lightpushnode=/ip4/172.18.155.254/tcp/18292/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.64.199 waku 519cacefa2784962e85be17179074f2970e9b17f9c197afb40dd4012995f4262
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 519cacefa278. Setting up logs at ./log/docker/lightpush_node2_2024-04-21_04-13-33__5e915c1d-2140-4ca7-a914-5bf7160910a3__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 36556
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36556/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.64.199/tcp/36557/p2p/16Uiu2HAm8Mzs6ASWKM8T5wfaAj5RpT8hrZBHeGASs3oArTSPpnwj","/ip4/172.18.64.199/tcp/36558/ws/p2p/16Uiu2HAm8Mzs6ASWKM8T5wfaAj5RpT8hrZBHeGASs3oArTSPpnwj"],"enrUri":"enr:-LO4QM8usOlFRSABSPsHqgYzKGUS-jH1F61ILE0xPKxlNqCcQntQCeMJJOZcuZjwxCf7nCsbI39UB6QDpBnJ6fTv8_IBgmlkgnY0gmlwhKwSQMeKbXVsdGlhZGRyc4wACgSsEkDHBo7O3QOCcnOFAAABAACJc2VjcDI1NmsxoQLANvWg8qhun_DM-3JgsABoLc7LvM8zf0zx07RqCdIHEoN0Y3CCjs2DdWRwgo7PhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36556/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.155.254/tcp/18292/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18291/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29816/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/0/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1713672818645469184}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:129 Checking that peer NODE_1:harbor.status.im/wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18291/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1713672818645469184,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36556/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/0/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1713672818756106752}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:129 Checking that peer NODE_1:harbor.status.im/wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18291/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1713672818756106752,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id 74b29ea2f656
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id 87a02e632ff8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id 519cacefa278
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.