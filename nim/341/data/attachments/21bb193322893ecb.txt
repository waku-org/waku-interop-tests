[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2024-09-01_04-21-18__fda81002-6f95-4724-bb80-6e8ee6a28acb
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-01_04-21-18__fda81002-6f95-4724-bb80-6e8ee6a28acb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.13.169
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['34315', '34316', '34317', '34318', '34319']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 34315:34315 -p 34316:34316 -p 34317:34317 -p 34318:34318 -p 34319:34319 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34317 --rest-port=34315 --tcp-port=34316 --discv5-udp-port=34318 --rest-address=0.0.0.0 --nat=extip:172.18.13.169 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=13bb75c4d3d34fec1c500bc0f52fde51fc5db27f989bdf47fb8bcff7fc76fba1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34319 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.13.169 waku f6340358df51a5dfd67cc37d4ad344c3d527d88a944d3789a9911bbc0b3e9cb9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f6340358df51. Setting up logs at ./log/docker/receiving_node1_2024-09-01_04-21-18__fda81002-6f95-4724-bb80-6e8ee6a28acb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 34315
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34315/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34315/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.13.169/tcp/34316/p2p/16Uiu2HAkzaF38ZGUWeyZcMrqiJ4PpxyELWCkD7oArKZmJmbnikJV","/ip4/172.18.13.169/tcp/34317/ws/p2p/16Uiu2HAkzaF38ZGUWeyZcMrqiJ4PpxyELWCkD7oArKZmJmbnikJV"],"enrUri":"enr:-LO4QEoKls5hFL_YD5ZRp1LK1_qYUpk21sz4-0tLnhhWrAcMAJyaaW3a_SEeM9Vwbv927KKWWmAfaQ03duBlJcjbVxkBgmlkgnY0gmlwhKwSDamKbXVsdGlhZGRyc4wACgSsEg2pBoYN3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJMfHWahfigoBNpKTJYU2YGXLx-eovSKBf1ERM2gIOl-oN0Y3CChgyDdWRwgoYOhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-01_04-21-18__fda81002-6f95-4724-bb80-6e8ee6a28acb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.69.170
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['28495', '28496', '28497', '28498', '28499']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 28495:28495 -p 28496:28496 -p 28497:28497 -p 28498:28498 -p 28499:28499 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28497 --rest-port=28495 --tcp-port=28496 --discv5-udp-port=28498 --rest-address=0.0.0.0 --nat=extip:172.18.69.170 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6c2a9d475f273b7d2c1edd146e45bc24bc84cf18c575d0b3afe4859bb1900e0f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28499 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.69.170 waku 54b3d05498285f6e2f6dda9678705c684298a36e2ecd2a0e012059f62bacada6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 54b3d0549828. Setting up logs at ./log/docker/receiving_node2_2024-09-01_04-21-18__fda81002-6f95-4724-bb80-6e8ee6a28acb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 28495
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28495/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28495/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.69.170/tcp/28496/p2p/16Uiu2HAmRMSAqNQcdcvuykidvgmnr7wJ2HeTi6MDiUoqRL2RX4Mc","/ip4/172.18.69.170/tcp/28497/ws/p2p/16Uiu2HAmRMSAqNQcdcvuykidvgmnr7wJ2HeTi6MDiUoqRL2RX4Mc"],"enrUri":"enr:-LO4QKYMVG1GSS3vdcxY1jw9I4rHVLCoHldMkX6RTFMDJa8UC50GcQU3UoQ1wpv2MShQ32tuQoNr7H1eO-WFQknO-zYBgmlkgnY0gmlwhKwSRaqKbXVsdGlhZGRyc4wACgSsEkWqBm9R3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO8qKuB9Q0rCUIvvAz3J-ORrTSn8_vxGoMhzroSGyCOp4N0Y3CCb1CDdWRwgm9ShXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28495/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.13.169/tcp/34316/p2p/16Uiu2HAkzaF38ZGUWeyZcMrqiJ4PpxyELWCkD7oArKZmJmbnikJV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-01_04-21-18__fda81002-6f95-4724-bb80-6e8ee6a28acb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.89.186
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['54500', '54501', '54502', '54503', '54504']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 54500:54500 -p 54501:54501 -p 54502:54502 -p 54503:54503 -p 54504:54504 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54502 --rest-port=54500 --tcp-port=54501 --discv5-udp-port=54503 --rest-address=0.0.0.0 --nat=extip:172.18.89.186 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a533ee6b787d643a0e4f9ec4dbcc941d782a3017bbcf3d0aef3dc54acb5b7fb9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54504 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QEoKls5hFL_YD5ZRp1LK1_qYUpk21sz4-0tLnhhWrAcMAJyaaW3a_SEeM9Vwbv927KKWWmAfaQ03duBlJcjbVxkBgmlkgnY0gmlwhKwSDamKbXVsdGlhZGRyc4wACgSsEg2pBoYN3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJMfHWahfigoBNpKTJYU2YGXLx-eovSKBf1ERM2gIOl-oN0Y3CChgyDdWRwgoYOhXdha3UyCQ --lightpushnode=/ip4/172.18.13.169/tcp/34316/p2p/16Uiu2HAkzaF38ZGUWeyZcMrqiJ4PpxyELWCkD7oArKZmJmbnikJV --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.89.186 waku 48a4092191b16c0cea4da1890441db4b68b2bc729447a6d6a7da46def9879cd8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 48a4092191b1. Setting up logs at ./log/docker/lightpush_node1_2024-09-01_04-21-18__fda81002-6f95-4724-bb80-6e8ee6a28acb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 54500
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54500/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54500/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.89.186/tcp/54501/p2p/16Uiu2HAkx93pCcGNDWiPGNMZmjAvNbePdRxhnX4kWSMkheH1bc7p","/ip4/172.18.89.186/tcp/54502/ws/p2p/16Uiu2HAkx93pCcGNDWiPGNMZmjAvNbePdRxhnX4kWSMkheH1bc7p"],"enrUri":"enr:-LO4QIhHCQhnxBcdpJEX1ULiOk1Er-TYiIQUUMRKVmOEjpkrL4Ja7zQXCimXuHCkhqjdj1yStFn_GeHU_P2zLy4ovfoBgmlkgnY0gmlwhKwSWbqKbXVsdGlhZGRyc4wACgSsElm6BtTm3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIoUOAgpWL_PlXU-r53OQQJZTifxC6NJ8ZRNflt3TA7B4N0Y3CC1OWDdWRwgtTnhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54500/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.13.169/tcp/34316/p2p/16Uiu2HAkzaF38ZGUWeyZcMrqiJ4PpxyELWCkD7oArKZmJmbnikJV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54500/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.69.170/tcp/28496/p2p/16Uiu2HAmRMSAqNQcdcvuykidvgmnr7wJ2HeTi6MDiUoqRL2RX4Mc"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34315/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28495/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54500/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725164483284098048}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:54500/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x44821b111f3c56c6a81c07a309e14ff2c106b3b4fb2a08dbab3e8be6ee11e8dc'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f6340358df51
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 54b3d0549828
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 48a4092191b1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.