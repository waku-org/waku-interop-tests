[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_to_single_topics with id: 2024-09-01_04-17-21__9eddba5b-6a50-4705-be6e-06369ad42854
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-01_04-17-21__9eddba5b-6a50-4705-be6e-06369ad42854__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.89.229
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['36216', '36217', '36218', '36219', '36220']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 36216:36216 -p 36217:36217 -p 36218:36218 -p 36219:36219 -p 36220:36220 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36218 --rest-port=36216 --tcp-port=36217 --discv5-udp-port=36219 --rest-address=0.0.0.0 --nat=extip:172.18.89.229 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7539fececc3acecc06e5efffc0dcf24bbf6cecaebe4c82cc6dc67c2c27fe1bf5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36220 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.89.229 waku 926392d8fc27d4ea5ccedf30d9935472a6a12d33b7de910e97144e79c20849df
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 926392d8fc27. Setting up logs at ./log/docker/node1_2024-09-01_04-17-21__9eddba5b-6a50-4705-be6e-06369ad42854__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 36216
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36216/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36216/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.89.229/tcp/36217/p2p/16Uiu2HAmMu7tL2rZQSK3Z2x5fghMDyZAsLGUz6ccmSHU96gNooCf","/ip4/172.18.89.229/tcp/36218/ws/p2p/16Uiu2HAmMu7tL2rZQSK3Z2x5fghMDyZAsLGUz6ccmSHU96gNooCf"],"enrUri":"enr:-LO4QHg4EM2_wK-4GQtp-iVffJkJtRQv4J1d_BmRZ_0k9sKKFxenhgo7tJgs-RY3_j3jm8fRAzV2GBwSukUUkyicahUBgmlkgnY0gmlwhKwSWeWKbXVsdGlhZGRyc4wACgSsElnlBo163QOCcnOFAAMBAACJc2VjcDI1NmsxoQOJV9Vs5Rs3uxHJgCRaLNwcxLfnlO0KKbjmY8BfHXoSPIN0Y3CCjXmDdWRwgo17hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-01_04-17-21__9eddba5b-6a50-4705-be6e-06369ad42854__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.114.102
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['63983', '63984', '63985', '63986', '63987']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 63983:63983 -p 63984:63984 -p 63985:63985 -p 63986:63986 -p 63987:63987 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63985 --rest-port=63983 --tcp-port=63984 --discv5-udp-port=63986 --rest-address=0.0.0.0 --nat=extip:172.18.114.102 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a010b244bdcef6e3da34bd62ae9be71684bd0eb8eb96ccd813566ce4ccb52ea9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63987 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QHg4EM2_wK-4GQtp-iVffJkJtRQv4J1d_BmRZ_0k9sKKFxenhgo7tJgs-RY3_j3jm8fRAzV2GBwSukUUkyicahUBgmlkgnY0gmlwhKwSWeWKbXVsdGlhZGRyc4wACgSsElnlBo163QOCcnOFAAMBAACJc2VjcDI1NmsxoQOJV9Vs5Rs3uxHJgCRaLNwcxLfnlO0KKbjmY8BfHXoSPIN0Y3CCjXmDdWRwgo17hXdha3UyBQ --filternode=/ip4/172.18.89.229/tcp/36217/p2p/16Uiu2HAmMu7tL2rZQSK3Z2x5fghMDyZAsLGUz6ccmSHU96gNooCf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.114.102 waku 359e1fb25fa028f041e86431b971bf9d011a42c749532b090fe5b76576517a29
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 359e1fb25fa0. Setting up logs at ./log/docker/node2_2024-09-01_04-17-21__9eddba5b-6a50-4705-be6e-06369ad42854__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 63983
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63983/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63983/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.114.102/tcp/63984/p2p/16Uiu2HAmFntfhQdiUKxmycbWeX6i3N7L8TEMtgqeRW9iodk3T5uX","/ip4/172.18.114.102/tcp/63985/ws/p2p/16Uiu2HAmFntfhQdiUKxmycbWeX6i3N7L8TEMtgqeRW9iodk3T5uX"],"enrUri":"enr:-LO4QMlNDKA2kH4sc2OtFDw2kedxjFfKDZnwniY1jMATfPG9TKkSE-GIfRrNwvhDtdxqajiFO30rZCa4ePVLMyDfnTMBgmlkgnY0gmlwhKwScmaKbXVsdGlhZGRyc4wACgSsEnJmBvnx3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMumUgplkQLMv-SJlZswFHcu6fAsh4XyXx_uoE-UT6FhoN0Y3CC-fCDdWRwgvnyhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63983/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.89.229/tcp/36217/p2p/16Uiu2HAmMu7tL2rZQSK3Z2x5fghMDyZAsLGUz6ccmSHU96gNooCf"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36216/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63983/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "30e10c0e-baa4-4033-b1f3-f7b119b839fb", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"30e10c0e-baa4-4033-b1f3-f7b119b839fb","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36216/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63983/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1725164244665705728,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 926392d8fc27
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 359e1fb25fa0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.