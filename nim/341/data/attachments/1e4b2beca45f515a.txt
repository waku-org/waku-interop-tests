[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_invalid_request_id with id: 2024-09-01_04-18-06__b74fc583-b053-494b-a13e-a4e43c1ff6d9
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-01_04-18-06__b74fc583-b053-494b-a13e-a4e43c1ff6d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.250.77
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['20367', '20368', '20369', '20370', '20371']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 20367:20367 -p 20368:20368 -p 20369:20369 -p 20370:20370 -p 20371:20371 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20369 --rest-port=20367 --tcp-port=20368 --discv5-udp-port=20370 --rest-address=0.0.0.0 --nat=extip:172.18.250.77 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=212e0beec84d63959ca2ef5e8f7d05cb64f5ce0a6ffbbec6a5555ea6fcf6b0c8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20371 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.250.77 waku 5776d1a74d39e7d3aaad0393346b62f3b5ae2e20e1580272fcc89ab344f2d15e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5776d1a74d39. Setting up logs at ./log/docker/node1_2024-09-01_04-18-06__b74fc583-b053-494b-a13e-a4e43c1ff6d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 20367
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20367/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20367/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.250.77/tcp/20368/p2p/16Uiu2HAkwUaFgWqTws3PDsLLFcUy2Ue7FueMBLbZemaqpLnp6T2T","/ip4/172.18.250.77/tcp/20369/ws/p2p/16Uiu2HAkwUaFgWqTws3PDsLLFcUy2Ue7FueMBLbZemaqpLnp6T2T"],"enrUri":"enr:-LO4QE6eDYeS5g-G8zqz3OpcOLplDGm-LiA_15cWbXBtD1JlDbOuRb-U0SuiCPhRmsGXshIjoZfY410fSs_AYZbFwP0BgmlkgnY0gmlwhKwS-k2KbXVsdGlhZGRyc4wACgSsEvpNBk-R3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIedaRNTBABvR5qOEtw5tonmnyG10Qvmhs-sdXNgyZyFIN0Y3CCT5CDdWRwgk-ShXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-01_04-18-06__b74fc583-b053-494b-a13e-a4e43c1ff6d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.224.225
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['21783', '21784', '21785', '21786', '21787']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 21783:21783 -p 21784:21784 -p 21785:21785 -p 21786:21786 -p 21787:21787 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21785 --rest-port=21783 --tcp-port=21784 --discv5-udp-port=21786 --rest-address=0.0.0.0 --nat=extip:172.18.224.225 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7fcc7c9d54f21f23e2eea1cc5cbde4448c90ce52ea73b1be7d7253ce6f380e8d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21787 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QE6eDYeS5g-G8zqz3OpcOLplDGm-LiA_15cWbXBtD1JlDbOuRb-U0SuiCPhRmsGXshIjoZfY410fSs_AYZbFwP0BgmlkgnY0gmlwhKwS-k2KbXVsdGlhZGRyc4wACgSsEvpNBk-R3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIedaRNTBABvR5qOEtw5tonmnyG10Qvmhs-sdXNgyZyFIN0Y3CCT5CDdWRwgk-ShXdha3UyBQ --filternode=/ip4/172.18.250.77/tcp/20368/p2p/16Uiu2HAkwUaFgWqTws3PDsLLFcUy2Ue7FueMBLbZemaqpLnp6T2T
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.224.225 waku a9b5899847325c64ed3781a47162f31a0d31d21a3b0ec786984fba6956e7eef5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a9b589984732. Setting up logs at ./log/docker/node2_2024-09-01_04-18-06__b74fc583-b053-494b-a13e-a4e43c1ff6d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 21783
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21783/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21783/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.224.225/tcp/21784/p2p/16Uiu2HAkzPoq9EqbDFz8qvViL29Lpz6GgXgwzmKe9W1kqEUJkMYD","/ip4/172.18.224.225/tcp/21785/ws/p2p/16Uiu2HAkzPoq9EqbDFz8qvViL29Lpz6GgXgwzmKe9W1kqEUJkMYD"],"enrUri":"enr:-LO4QDuSiUcYEJjtw2JJo_v8HfW4ec46KC-6IGK8z_XekaZVawdq5tEgLAqmjVsY8xCf-8X_t57tF-RWpiDS0OypxeEBgmlkgnY0gmlwhKwS4OGKbXVsdGlhZGRyc4wACgSsEuDhBlUZ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJJ0CZmU1HGZAOgHuLdCb_FwdDMftEXTpKL3Az47BcQyoN0Y3CCVRiDdWRwglUahXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21783/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.250.77/tcp/20368/p2p/16Uiu2HAkwUaFgWqTws3PDsLLFcUy2Ue7FueMBLbZemaqpLnp6T2T"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20367/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21783/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e9c5d07f-9fe2-4a32-a450-b8eb420a5008", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"e9c5d07f-9fe2-4a32-a450-b8eb420a5008","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21783/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:21783/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5776d1a74d39
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a9b589984732
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.