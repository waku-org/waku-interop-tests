[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_repeated_filter_requestID with id: 2025-01-06_13-32-06__717dcd6b-abdd-4b87-808a-2ebfec3c813c
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-06_13-32-06__717dcd6b-abdd-4b87-808a-2ebfec3c813c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-06_13-32-06__717dcd6b-abdd-4b87-808a-2ebfec3c813c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-06_13-32-06__717dcd6b-abdd-4b87-808a-2ebfec3c813c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:348 Create 3 nodes
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:349 Start 3 nodes with their corresponding config
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:33 Network waku created
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.233.157
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['3892', '3893', '3894', '3895', '3896']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 3892:3892 -p 3893:3893 -p 3894:3894 -p 3895:3895 -p 3896:3896 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3894 --rest-port=3892 --tcp-port=3893 --discv5-udp-port=3895 --rest-address=0.0.0.0 --nat=extip:172.18.233.157 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f78fdb1db6563e0557dfd6b12b45de67db3ec1ec6190c02588d7de2dd7dd51ba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3896 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.233.157 waku cac5e4ba555879effac3fe8be289085d83c0f9788173314fdc2af08ffa348339
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID cac5e4ba5558. Setting up logs at ./log/docker/node1_2025-01-06_13-32-06__717dcd6b-abdd-4b87-808a-2ebfec3c813c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 3892
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3892/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3892/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.233.157/tcp/3893/p2p/16Uiu2HAmS6D1UQfWsKtZnC1c7JtiPBrtMY8MErjyDaTcHHeD8aMi","/ip4/172.18.233.157/tcp/3894/ws/p2p/16Uiu2HAmS6D1UQfWsKtZnC1c7JtiPBrtMY8MErjyDaTcHHeD8aMi"],"enrUri":"enr:-L24QOpGH4wx2kHmKTyaZItcSAwYKzd3INcxB8z_Qy38GtNvWSbei1AK05A_mwIcDi5Xew0naFg5CDKM3_vD6zfq7cQCgmlkgnY0gmlwhKwS6Z2KbXVsdGlhZGRyc5YACASsEumdBg81AAoErBLpnQYPNt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDx53DWj0WDzcUZ17IdRJYnEGryH763bQadeQnsJCZYU2DdGNwgg81g3VkcIIPN4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.227.27
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['6468', '6469', '6470', '6471', '6472']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 6468:6468 -p 6469:6469 -p 6470:6470 -p 6471:6471 -p 6472:6472 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6470 --rest-port=6468 --tcp-port=6469 --discv5-udp-port=6471 --rest-address=0.0.0.0 --nat=extip:172.18.227.27 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6de7bd1d8e7065aa626ef9ae27d8e515faed99ae4536dfdb0d5a552f4bf0b8e0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6472 --metrics-logging=true --relay=true --store=true --filter=true --discv5-bootstrap-node=enr:-L24QOpGH4wx2kHmKTyaZItcSAwYKzd3INcxB8z_Qy38GtNvWSbei1AK05A_mwIcDi5Xew0naFg5CDKM3_vD6zfq7cQCgmlkgnY0gmlwhKwS6Z2KbXVsdGlhZGRyc5YACASsEumdBg81AAoErBLpnQYPNt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDx53DWj0WDzcUZ17IdRJYnEGryH763bQadeQnsJCZYU2DdGNwgg81g3VkcIIPN4V3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.227.27 waku 72c026e11410cf62fa8242ed31047ec9ea1a148dcb46b6e573f3e118da2de228
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 72c026e11410. Setting up logs at ./log/docker/node2_2025-01-06_13-32-06__717dcd6b-abdd-4b87-808a-2ebfec3c813c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 6468
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6468/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6468/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.227.27/tcp/6469/p2p/16Uiu2HAm4VCLPiDKtq283FP1KoFUGX1gZRFEmAPeoGdUWHUSjCF8","/ip4/172.18.227.27/tcp/6470/ws/p2p/16Uiu2HAm4VCLPiDKtq283FP1KoFUGX1gZRFEmAPeoGdUWHUSjCF8"],"enrUri":"enr:-L24QID2ybdbWgOsBccpd74G23_WpIZADM41UZEUKaq5uKhQIZjJh_GJ2F4NPgnVBrGayiqxArwVcaXAfp391aTAhEsCgmlkgnY0gmlwhKwS4xuKbXVsdGlhZGRyc5YACASsEuMbBhlFAAoErBLjGwYZRt0DgnJzhQADAQAAiXNlY3AyNTZrMaEChqA_WI8vv_jGIrfdLDNg49ZqsUruXJYki3wC6VvDID-DdGNwghlFg3VkcIIZR4V3YWt1Mgc"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.195.68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['45484', '45485', '45486', '45487', '45488']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 45484:45484 -p 45485:45485 -p 45486:45486 -p 45487:45487 -p 45488:45488 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45486 --rest-port=45484 --tcp-port=45485 --discv5-udp-port=45487 --rest-address=0.0.0.0 --nat=extip:172.18.195.68 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cdfcff31dddbe9baacfff4c5b80baf199ea12fce0ce3bde0fea4bb6efb0617bb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45488 --metrics-logging=true --relay=true --filternode=/ip4/172.18.227.27/tcp/6469/p2p/16Uiu2HAm4VCLPiDKtq283FP1KoFUGX1gZRFEmAPeoGdUWHUSjCF8 --store=false --pubsub-topic=/waku/2/rs/3/1 --discv5-bootstrap-node=enr:-L24QID2ybdbWgOsBccpd74G23_WpIZADM41UZEUKaq5uKhQIZjJh_GJ2F4NPgnVBrGayiqxArwVcaXAfp391aTAhEsCgmlkgnY0gmlwhKwS4xuKbXVsdGlhZGRyc5YACASsEuMbBhlFAAoErBLjGwYZRt0DgnJzhQADAQAAiXNlY3AyNTZrMaEChqA_WI8vv_jGIrfdLDNg49ZqsUruXJYki3wC6VvDID-DdGNwghlFg3VkcIIZR4V3YWt1Mgc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.195.68 waku 8ac67ed5bb04510bd009c4b60e8979636077285bab8734d3f5a409044c206b97
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8ac67ed5bb04. Setting up logs at ./log/docker/node3_2025-01-06_13-32-06__717dcd6b-abdd-4b87-808a-2ebfec3c813c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 45484
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45484/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45484/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.195.68/tcp/45485/p2p/16Uiu2HAm8tRPNdg1xAaKtLw9rhTXDGdExA7Xqrj1auVaBjMZ4WTp","/ip4/172.18.195.68/tcp/45486/ws/p2p/16Uiu2HAm8tRPNdg1xAaKtLw9rhTXDGdExA7Xqrj1auVaBjMZ4WTp"],"enrUri":"enr:-L24QMOoa_OpJUEWRTOfQ0YGNBnKN2AWgwmC_8b4ZpjI3BidAvzBHLsCfK6Sb5FVMbBJAmsh2zxzYyTcjSMo2XNSH1YCgmlkgnY0gmlwhKwSw0SKbXVsdGlhZGRyc5YACASsEsNEBrGtAAoErBLDRAaxrt0DgnJzhQADAQABiXNlY3AyNTZrMaECyAIcbFm232oW3AoGKWph_dUKXl26JKgAZjB1TeNbRJ-DdGNwgrGtg3VkcIKxr4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:360 Subscribe nodes to relay  pubsub topics
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3892/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6468/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:364 Wait for all nodes auto connection
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3892/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.227.27/tcp/6469/p2p/16Uiu2HAm4VCLPiDKtq283FP1KoFUGX1gZRFEmAPeoGdUWHUSjCF8","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6468/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.233.157/tcp/3893/p2p/16Uiu2HAmS6D1UQfWsKtZnC1c7JtiPBrtMY8MErjyDaTcHHeD8aMi","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:368 Node3 subscribe to filter for pubsubtopic  /waku/2/rs/3/1 2 times with same request id
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45484/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45484/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:377 Node1 publish message for topic /waku/2/rs/3/1
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3892/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 5 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45484/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:381 Response for node 3 is []
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45484/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:385 Response for node3 using same request ID is []
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id cac5e4ba5558
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 72c026e11410
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container cac5e4ba5558. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 8ac67ed5bb04
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 72c026e11410. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.