[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_invalid_request_id with id: 2024-09-22_04-17-37__ad3c1ec5-8dce-40cd-a7f2-1d582ccd5776
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-22_04-17-37__ad3c1ec5-8dce-40cd-a7f2-1d582ccd5776__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.26.119
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['4924', '4925', '4926', '4927', '4928']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 4924:4924 -p 4925:4925 -p 4926:4926 -p 4927:4927 -p 4928:4928 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4926 --rest-port=4924 --tcp-port=4925 --discv5-udp-port=4927 --rest-address=0.0.0.0 --nat=extip:172.18.26.119 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e9a7af41a8886a3b8e9dad67deda4b85c3cddead61a6381c6b8eddfae1ffdef8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4928 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.26.119 waku 9cb677352d71a53d66c5a7aa0cdd09fd055b644b3ef53f4a0fb176a47c2f08f2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 9cb677352d71. Setting up logs at ./log/docker/node1_2024-09-22_04-17-37__ad3c1ec5-8dce-40cd-a7f2-1d582ccd5776__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 4924
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4924/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4924/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.26.119/tcp/4925/p2p/16Uiu2HAkx3jGw5XoEqgFWRmjyngw1tLRDYeCd3f2AjoxtVZiQy9v","/ip4/172.18.26.119/tcp/4926/ws/p2p/16Uiu2HAkx3jGw5XoEqgFWRmjyngw1tLRDYeCd3f2AjoxtVZiQy9v"],"enrUri":"enr:-LO4QK1NoXkmvrZ9ze8W3Fycpn0tTNtcUSIO9TgLlgHlc7frOJkwgPSA9ifjHFjraiKuM6MLyD8y8KYiSgBFEoYRw8QBgmlkgnY0gmlwhKwSGneKbXVsdGlhZGRyc4wACgSsEhp3BhM-3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIm9AJcqWxDZP_ewK54z3KGYd9udp3_UN3OxIuzPvwQjYN0Y3CCEz2DdWRwghM_hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-22_04-17-37__ad3c1ec5-8dce-40cd-a7f2-1d582ccd5776__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.250.244
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['48908', '48909', '48910', '48911', '48912']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 48908:48908 -p 48909:48909 -p 48910:48910 -p 48911:48911 -p 48912:48912 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48910 --rest-port=48908 --tcp-port=48909 --discv5-udp-port=48911 --rest-address=0.0.0.0 --nat=extip:172.18.250.244 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a8fefc2be16babd42ea6e1ad47eafac737e8ef6fa2d035c1d5de88d119bfd575 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48912 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QK1NoXkmvrZ9ze8W3Fycpn0tTNtcUSIO9TgLlgHlc7frOJkwgPSA9ifjHFjraiKuM6MLyD8y8KYiSgBFEoYRw8QBgmlkgnY0gmlwhKwSGneKbXVsdGlhZGRyc4wACgSsEhp3BhM-3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIm9AJcqWxDZP_ewK54z3KGYd9udp3_UN3OxIuzPvwQjYN0Y3CCEz2DdWRwghM_hXdha3UyBQ --filternode=/ip4/172.18.26.119/tcp/4925/p2p/16Uiu2HAkx3jGw5XoEqgFWRmjyngw1tLRDYeCd3f2AjoxtVZiQy9v
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.250.244 waku 92034c5269a8b000e1b19998de5e41f41fa4d82e70eb4b4fcb9e2defdda912c2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 92034c5269a8. Setting up logs at ./log/docker/node2_2024-09-22_04-17-37__ad3c1ec5-8dce-40cd-a7f2-1d582ccd5776__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 48908
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48908/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48908/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.250.244/tcp/48909/p2p/16Uiu2HAm6YRTfUV4Hn9DNpQZ6R7r9TnGP9ZewnMvV9UNyaJb36eT","/ip4/172.18.250.244/tcp/48910/ws/p2p/16Uiu2HAm6YRTfUV4Hn9DNpQZ6R7r9TnGP9ZewnMvV9UNyaJb36eT"],"enrUri":"enr:-LO4QEaD-uj5Ua6JJoSa81yurQ_riZrsUbdyt97LNidxm4rZcNZQ1RllyLASH8yJKVdFAE-u-yRjb1uGsZE0hqX08vQBgmlkgnY0gmlwhKwS-vSKbXVsdGlhZGRyc4wACgSsEvr0Br8O3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKlKzRi69TYSyTX4qJ-PFzVM9xkZdNb8UrcfmGdL12ngIN0Y3CCvw2DdWRwgr8PhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48908/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.26.119/tcp/4925/p2p/16Uiu2HAkx3jGw5XoEqgFWRmjyngw1tLRDYeCd3f2AjoxtVZiQy9v"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4924/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48908/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "7327e3dd-fd74-4bb4-a5d5-676a078a23e5", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"7327e3dd-fd74-4bb4-a5d5-676a078a23e5","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:48908/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:48908/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9cb677352d71
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 92034c5269a8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.