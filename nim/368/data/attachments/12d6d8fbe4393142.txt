[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_to_pubsub_topic_from_another_cluster_id with id: 2024-09-22_04-16-35__cbcd6546-f702-4dda-af53-5a68e6a8afd0
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-22_04-16-35__cbcd6546-f702-4dda-af53-5a68e6a8afd0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.82.238
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['57219', '57220', '57221', '57222', '57223']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 57219:57219 -p 57220:57220 -p 57221:57221 -p 57222:57222 -p 57223:57223 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57221 --rest-port=57219 --tcp-port=57220 --discv5-udp-port=57222 --rest-address=0.0.0.0 --nat=extip:172.18.82.238 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1cd47e0e664ad39efb20913e4487eefb35fe7dd0dcfc5eca4340d7c678e9ef55 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57223 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.82.238 waku ac7a34b4e9fd19def24b538518b08d1ac6f24509e5813f3578557be7ff6a980b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ac7a34b4e9fd. Setting up logs at ./log/docker/node1_2024-09-22_04-16-35__cbcd6546-f702-4dda-af53-5a68e6a8afd0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 57219
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57219/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57219/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.82.238/tcp/57220/p2p/16Uiu2HAm8tQKBPBbwTKHcDX97acuYQ6yxn4cRUxguYEEwj8bWper","/ip4/172.18.82.238/tcp/57221/ws/p2p/16Uiu2HAm8tQKBPBbwTKHcDX97acuYQ6yxn4cRUxguYEEwj8bWper"],"enrUri":"enr:-LO4QHdnS9q0UjrjMHNxsE5SnQo2Kj5NCJNCBv1NpjD3lchVbjebCDqcd8CGqF8kQ7M_HkH53BV4JdoJgH9x9MZBnQQBgmlkgnY0gmlwhKwSUu6KbXVsdGlhZGRyc4wACgSsElLuBt-F3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLIAOYIR-MFhm9gYmfC3SR2z99_wNnrJIEqMJ-FQghkt4N0Y3CC34SDdWRwgt-GhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-22_04-16-35__cbcd6546-f702-4dda-af53-5a68e6a8afd0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.227.202
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['2536', '2537', '2538', '2539', '2540']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 2536:2536 -p 2537:2537 -p 2538:2538 -p 2539:2539 -p 2540:2540 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2538 --rest-port=2536 --tcp-port=2537 --discv5-udp-port=2539 --rest-address=0.0.0.0 --nat=extip:172.18.227.202 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a100a1c2f6eff2feae6606c5ba97e033f58cde01f0fbefc1adffc02ba0e9619a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2540 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QHdnS9q0UjrjMHNxsE5SnQo2Kj5NCJNCBv1NpjD3lchVbjebCDqcd8CGqF8kQ7M_HkH53BV4JdoJgH9x9MZBnQQBgmlkgnY0gmlwhKwSUu6KbXVsdGlhZGRyc4wACgSsElLuBt-F3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLIAOYIR-MFhm9gYmfC3SR2z99_wNnrJIEqMJ-FQghkt4N0Y3CC34SDdWRwgt-GhXdha3UyBQ --filternode=/ip4/172.18.82.238/tcp/57220/p2p/16Uiu2HAm8tQKBPBbwTKHcDX97acuYQ6yxn4cRUxguYEEwj8bWper
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.227.202 waku e90c6d2b82bdd50a1f25662eb6d0b921f07b43bcce817caec5e260a62667b11a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e90c6d2b82bd. Setting up logs at ./log/docker/node2_2024-09-22_04-16-35__cbcd6546-f702-4dda-af53-5a68e6a8afd0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 2536
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2536/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2536/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.227.202/tcp/2537/p2p/16Uiu2HAmGrAAaeCzyeyX6MvsfN9EzHxJBK66hUvGY2JEbm21fQcE","/ip4/172.18.227.202/tcp/2538/ws/p2p/16Uiu2HAmGrAAaeCzyeyX6MvsfN9EzHxJBK66hUvGY2JEbm21fQcE"],"enrUri":"enr:-LO4QM2rg3j3sGktt1m5LuMNY4ngVZWEWj_Rpx2464bhIzhNDj8ngY1tuEClgENfHQVdAxS020iCyPuDt0qdzHAt2G8BgmlkgnY0gmlwhKwS48qKbXVsdGlhZGRyc4wACgSsEuPKBgnq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM-SzwgbjBY19EYgIOehoBX3SDiLmkbOP1TD8ZO9v5Yx4N0Y3CCCemDdWRwggnrhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2536/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.82.238/tcp/57220/p2p/16Uiu2HAm8tQKBPBbwTKHcDX97acuYQ6yxn4cRUxguYEEwj8bWper"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57219/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2536/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "a96e0a7f-d78a-410a-9b2d-105d525c7c9c", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/2/2"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"a96e0a7f-d78a-410a-9b2d-105d525c7c9c","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57219/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2536/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1726978599007535616,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ac7a34b4e9fd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e90c6d2b82bd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.