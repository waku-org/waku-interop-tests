[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-09-22_04-14-32__659a4a14-d08a-46d0-ba0b-3af260afed1b
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-22_04-14-32__659a4a14-d08a-46d0-ba0b-3af260afed1b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-22_04-14-32__659a4a14-d08a-46d0-ba0b-3af260afed1b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-09-22_04-14-32__659a4a14-d08a-46d0-ba0b-3af260afed1b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.98.234
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['27585', '27586', '27587', '27588', '27589']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 27585:27585 -p 27586:27586 -p 27587:27587 -p 27588:27588 -p 27589:27589 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27587 --rest-port=27585 --tcp-port=27586 --discv5-udp-port=27588 --rest-address=0.0.0.0 --nat=extip:172.18.98.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ac7a64de47f94ba5fe60edafe551ac830aca48ab15fea6fbe4d6cca6ba7ce0bd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27589 --metrics-logging=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.98.234 waku 469ef95268fe2a55c7929bf8298934029b5919b9a4d5d261c9b9a3a83500342f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 469ef95268fe. Setting up logs at ./log/docker/node1_2024-09-22_04-14-32__659a4a14-d08a-46d0-ba0b-3af260afed1b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 27585
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27585/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27585/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.98.234/tcp/27586/p2p/16Uiu2HAmQa7ZJVrjNJZRQGURznRJSa7QVmUfYsyND5mRR5uj9Grd","/ip4/172.18.98.234/tcp/27587/ws/p2p/16Uiu2HAmQa7ZJVrjNJZRQGURznRJSa7QVmUfYsyND5mRR5uj9Grd"],"enrUri":"enr:-LO4QKKW9uV-iRkIgoyCW2qqB_thjZX-zIdKhVjmpw20mM56VxmNHHWDHbBO7ImAyL7qjin_3kBHI4bv1XRqbiOpTXYBgmlkgnY0gmlwhKwSYuqKbXVsdGlhZGRyc4wACgSsEmLqBmvD3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOxDHz5azuTyV9X9jQdHob7a1rXcyIxaUTQWZXY-EZPuoN0Y3CCa8KDdWRwgmvEhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.228.148
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['5429', '5430', '5431', '5432', '5433']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 5429:5429 -p 5430:5430 -p 5431:5431 -p 5432:5432 -p 5433:5433 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5431 --rest-port=5429 --tcp-port=5430 --discv5-udp-port=5432 --rest-address=0.0.0.0 --nat=extip:172.18.228.148 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c11418ebd4ab8eb6ca8d95face2d7b2ccba274352a8cbaecfbdabb8eda4cbda7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5433 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-LO4QKKW9uV-iRkIgoyCW2qqB_thjZX-zIdKhVjmpw20mM56VxmNHHWDHbBO7ImAyL7qjin_3kBHI4bv1XRqbiOpTXYBgmlkgnY0gmlwhKwSYuqKbXVsdGlhZGRyc4wACgSsEmLqBmvD3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOxDHz5azuTyV9X9jQdHob7a1rXcyIxaUTQWZXY-EZPuoN0Y3CCa8KDdWRwgmvEhXdha3UyCQ --lightpushnode=/ip4/172.18.98.234/tcp/27586/p2p/16Uiu2HAmQa7ZJVrjNJZRQGURznRJSa7QVmUfYsyND5mRR5uj9Grd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.228.148 waku a70f420f4f0eab8b3c3b0446f3f3d95875e23a7f2f020cbed86e2f1c65680b5a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a70f420f4f0e. Setting up logs at ./log/docker/node2_2024-09-22_04-14-32__659a4a14-d08a-46d0-ba0b-3af260afed1b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 5429
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5429/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5429/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.228.148/tcp/5430/p2p/16Uiu2HAmFHfFojauopMJJZ1rFzpJMUVRKDtVmJy1GvuH79Uge789","/ip4/172.18.228.148/tcp/5431/ws/p2p/16Uiu2HAmFHfFojauopMJJZ1rFzpJMUVRKDtVmJy1GvuH79Uge789"],"enrUri":"enr:-LO4QEI8qXULJx960w7UGSxqMhBJaXs7hqYExR3Nhinsmq8RQOri5WqLm7_hhhYVcPhEvT0yKhExonFu-8DLNlnW7y8BgmlkgnY0gmlwhKwS5JSKbXVsdGlhZGRyc4wACgSsEuSUBhU33QOCcnOFAAMBAACJc2VjcDI1NmsxoQMnHEYFpnXdw2A4z7QuBbJHUe1lZP46F_6SEnF_mNUSjoN0Y3CCFTaDdWRwghU4hXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.84.69
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['35420', '35421', '35422', '35423', '35424']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 35420:35420 -p 35421:35421 -p 35422:35422 -p 35423:35423 -p 35424:35424 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35422 --rest-port=35420 --tcp-port=35421 --discv5-udp-port=35423 --rest-address=0.0.0.0 --nat=extip:172.18.84.69 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d8bcaef156602ef2f24835305b8157ebbd9ce1bcac0b42ac09a24be3ebdfe3ef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35424 --metrics-logging=true --relay=false --storenode=/ip4/172.18.228.148/tcp/5430/p2p/16Uiu2HAmFHfFojauopMJJZ1rFzpJMUVRKDtVmJy1GvuH79Uge789 --discv5-bootstrap-node=enr:-LO4QEI8qXULJx960w7UGSxqMhBJaXs7hqYExR3Nhinsmq8RQOri5WqLm7_hhhYVcPhEvT0yKhExonFu-8DLNlnW7y8BgmlkgnY0gmlwhKwS5JSKbXVsdGlhZGRyc4wACgSsEuSUBhU33QOCcnOFAAMBAACJc2VjcDI1NmsxoQMnHEYFpnXdw2A4z7QuBbJHUe1lZP46F_6SEnF_mNUSjoN0Y3CCFTaDdWRwghU4hXdha3UyCw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.84.69 waku 5c891f33da9e0d0e247746a47b47789e704b741647053e29380909d5cf6e9012
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5c891f33da9e. Setting up logs at ./log/docker/node3_2024-09-22_04-14-32__659a4a14-d08a-46d0-ba0b-3af260afed1b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 35420
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35420/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35420/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.69/tcp/35421/p2p/16Uiu2HAmCdM2N9N4B5VaWF9xfx312b8qGkkYaWfmjHEyLkQ1dm2U","/ip4/172.18.84.69/tcp/35422/ws/p2p/16Uiu2HAmCdM2N9N4B5VaWF9xfx312b8qGkkYaWfmjHEyLkQ1dm2U"],"enrUri":"enr:-LO4QH5BeLcttqacTcdkA05Nd_CHUEuuR93eQiKZpAOfQ778b_2D_iPkHlsEo8ww-YAYMqId6iJaOmzh5f9Owuqdu7EBgmlkgnY0gmlwhKwSVEWKbXVsdGlhZGRyc4wACgSsElRFBope3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL_lDbXiuPhHbOi7w9WobHDiFsYcebgLRd1PT7iGV3PxYN0Y3CCil2DdWRwgopfhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27585/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5429/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27585/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.228.148/tcp/5430/p2p/16Uiu2HAmFHfFojauopMJJZ1rFzpJMUVRKDtVmJy1GvuH79Uge789","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5429/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.98.234/tcp/27586/p2p/16Uiu2HAmQa7ZJVrjNJZRQGURznRJSa7QVmUfYsyND5mRR5uj9Grd","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27585/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1726978507267592192}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35420/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"83b9d0f1d66c8aea4336","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"S4rKnO9ox7zGXgDZAIB0cxwk/AZY8QZlc27844rH1BM="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 469ef95268fe
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a70f420f4f0e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5c891f33da9e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.