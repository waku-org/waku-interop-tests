[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-10-24_11-22-58__4084c2ea-5f1e-4883-9be8-7b8c3d7898f2
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-24_11-22-58__4084c2ea-5f1e-4883-9be8-7b8c3d7898f2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-24_11-22-58__4084c2ea-5f1e-4883-9be8-7b8c3d7898f2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-10-24_11-22-58__4084c2ea-5f1e-4883-9be8-7b8c3d7898f2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.254.241
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['39916', '39917', '39918', '39919', '39920']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 39916:39916 -p 39917:39917 -p 39918:39918 -p 39919:39919 -p 39920:39920 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39918 --rest-port=39916 --tcp-port=39917 --discv5-udp-port=39919 --rest-address=0.0.0.0 --nat=extip:172.18.254.241 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=03d4c244afa3d49ee80ce2dfe09f3edebc8f7d1e4b0fcc8b26b9f0c915da33ff --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39920 --metrics-logging=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.254.241 waku 9dc9ce6ba244f40ce87d12eaa5e63ce449eb39bb1550bfc429d28c2c972a7c29
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9dc9ce6ba244. Setting up logs at ./log/docker/node1_2024-10-24_11-22-58__4084c2ea-5f1e-4883-9be8-7b8c3d7898f2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 39916
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container af1a2b79c395. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39916/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39916/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.254.241/tcp/39917/p2p/16Uiu2HAm7ztqkqGWsonDRJiU9QfiiF4UZzXQs1a9DCzYKvjdMiWw","/ip4/172.18.254.241/tcp/39918/ws/p2p/16Uiu2HAm7ztqkqGWsonDRJiU9QfiiF4UZzXQs1a9DCzYKvjdMiWw"],"enrUri":"enr:-LO4QOqG8E9nMKId_ZfGVZ7VFPdYNPInGRPEwOfRtnSmH5OycXdmvtEGWAeJ2eMmhtOTSHg-NVmnmhVabuhVlFbG-ToBgmlkgnY0gmlwhKwS_vGKbXVsdGlhZGRyc4wACgSsEv7xBpvu3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK6zvPIy-zAxACYER959nsMBCm1YuqeCLo-nP9JBwtsbIN0Y3CCm-2DdWRwgpvvhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.185.220
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['2693', '2694', '2695', '2696', '2697']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 2693:2693 -p 2694:2694 -p 2695:2695 -p 2696:2696 -p 2697:2697 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2695 --rest-port=2693 --tcp-port=2694 --discv5-udp-port=2696 --rest-address=0.0.0.0 --nat=extip:172.18.185.220 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a88e2de5d9cb764e05251c07baafeab01e9d32e830f2f67c83e2cd145cbda5aa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2697 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-LO4QOqG8E9nMKId_ZfGVZ7VFPdYNPInGRPEwOfRtnSmH5OycXdmvtEGWAeJ2eMmhtOTSHg-NVmnmhVabuhVlFbG-ToBgmlkgnY0gmlwhKwS_vGKbXVsdGlhZGRyc4wACgSsEv7xBpvu3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK6zvPIy-zAxACYER959nsMBCm1YuqeCLo-nP9JBwtsbIN0Y3CCm-2DdWRwgpvvhXdha3UyCQ --lightpushnode=/ip4/172.18.254.241/tcp/39917/p2p/16Uiu2HAm7ztqkqGWsonDRJiU9QfiiF4UZzXQs1a9DCzYKvjdMiWw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.185.220 waku c498a877654aae40d2acb46d79256487c3b1268191dd6d7fcb68d25898513c38
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c498a877654a. Setting up logs at ./log/docker/node2_2024-10-24_11-22-58__4084c2ea-5f1e-4883-9be8-7b8c3d7898f2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 2693
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2693/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2693/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.185.220/tcp/2694/p2p/16Uiu2HAmM4jnYYq8f9xEv7nHdyuWnBxcVTVqiboWSqTs4aZfuobk","/ip4/172.18.185.220/tcp/2695/ws/p2p/16Uiu2HAmM4jnYYq8f9xEv7nHdyuWnBxcVTVqiboWSqTs4aZfuobk"],"enrUri":"enr:-LO4QFAcUBlk929zWm5JIcoflao4DtYy1iG1WhVhUpIynUP5SwY9wquqs1ooUOJA9WBMTvr0n88CgqSvTOnRXAcU6vABgmlkgnY0gmlwhKwSudyKbXVsdGlhZGRyc4wACgSsErncBgqH3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN88vd0ITB1-h4BpxjmMr-9z7lrBdd2I1YFwNRgpvKUl4N0Y3CCCoaDdWRwggqIhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.100.64
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['63648', '63649', '63650', '63651', '63652']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 63648:63648 -p 63649:63649 -p 63650:63650 -p 63651:63651 -p 63652:63652 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63650 --rest-port=63648 --tcp-port=63649 --discv5-udp-port=63651 --rest-address=0.0.0.0 --nat=extip:172.18.100.64 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b9abcafac5d6af04a0deb6e9f6d5a0d25ef171d0bcbfbda29f0fe392ef8cca96 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63652 --metrics-logging=true --relay=false --storenode=/ip4/172.18.185.220/tcp/2694/p2p/16Uiu2HAmM4jnYYq8f9xEv7nHdyuWnBxcVTVqiboWSqTs4aZfuobk --discv5-bootstrap-node=enr:-LO4QFAcUBlk929zWm5JIcoflao4DtYy1iG1WhVhUpIynUP5SwY9wquqs1ooUOJA9WBMTvr0n88CgqSvTOnRXAcU6vABgmlkgnY0gmlwhKwSudyKbXVsdGlhZGRyc4wACgSsErncBgqH3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN88vd0ITB1-h4BpxjmMr-9z7lrBdd2I1YFwNRgpvKUl4N0Y3CCCoaDdWRwggqIhXdha3UyCw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.100.64 waku d0c1815a38091ba85cf1fedd407970ff754f47c0ef8882c3294fad2a24aa3afd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d0c1815a3809. Setting up logs at ./log/docker/node3_2024-10-24_11-22-58__4084c2ea-5f1e-4883-9be8-7b8c3d7898f2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 63648
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63648/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63648/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.100.64/tcp/63649/p2p/16Uiu2HAm9M1Q19p3q7bY7VJbED5QPh6Sg2QtQEocJJnmE9oonxs5","/ip4/172.18.100.64/tcp/63650/ws/p2p/16Uiu2HAm9M1Q19p3q7bY7VJbED5QPh6Sg2QtQEocJJnmE9oonxs5"],"enrUri":"enr:-LO4QKj9ERDeHk9bgbEcnZmoo4Txuz2oHMjRAEyGiMB39eHLd7_O_ra5R2mfVh4Qp_Wm3LIIW4YAeYPVJ4XCerF5ULUBgmlkgnY0gmlwhKwSZECKbXVsdGlhZGRyc4wACgSsEmRABvii3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLO0asTM5jPYowH7PQF2ILxSNFFHL-lLFF9bqjxoNfHPIN0Y3CC-KGDdWRwgvijhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39916/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2693/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39916/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39916/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39916/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39916/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39916/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39916/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39916/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.185.220/tcp/2694/p2p/16Uiu2HAmM4jnYYq8f9xEv7nHdyuWnBxcVTVqiboWSqTs4aZfuobk","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2693/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.254.241/tcp/39917/p2p/16Uiu2HAm7ztqkqGWsonDRJiU9QfiiF4UZzXQs1a9DCzYKvjdMiWw","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39916/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1729769018993577472}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63648/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"a962eb22736979c4ae99","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"77hjRutLwr25gZqkiJyqhHKSMwhcvhcwVoYL3Zjqy54="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9dc9ce6ba244
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c498a877654a
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9dc9ce6ba244. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d0c1815a3809
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c498a877654a. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.