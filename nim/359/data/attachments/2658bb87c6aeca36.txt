[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_multiple_lightpush_nodes with id: 2024-09-13_04-19-20__6a84d0f9-8b82-49ff-8d4d-4b5f5dfde5f6
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-13_04-19-20__6a84d0f9-8b82-49ff-8d4d-4b5f5dfde5f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.220.49
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['6898', '6899', '6900', '6901', '6902']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 6898:6898 -p 6899:6899 -p 6900:6900 -p 6901:6901 -p 6902:6902 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6900 --rest-port=6898 --tcp-port=6899 --discv5-udp-port=6901 --rest-address=0.0.0.0 --nat=extip:172.18.220.49 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7b9cc8ee90bffaf16bb8c86fe612e2e6b38cc0d44ecf32f6c5f2d25d2bcef054 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6902 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.220.49 waku c494e367c34bebb9f43bef8cfbe68a9afd0766f38a8c7c93cb473712bc80d0dc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c494e367c34b. Setting up logs at ./log/docker/receiving_node1_2024-09-13_04-19-20__6a84d0f9-8b82-49ff-8d4d-4b5f5dfde5f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 6898
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6898/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6898/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.220.49/tcp/6899/p2p/16Uiu2HAmUEYJaYTGmqs65WtMvMoV7ciQgwf7reEe4GrUoT2Rcpgr","/ip4/172.18.220.49/tcp/6900/ws/p2p/16Uiu2HAmUEYJaYTGmqs65WtMvMoV7ciQgwf7reEe4GrUoT2Rcpgr"],"enrUri":"enr:-LO4QLyo4WH5u0CHHkxuVLNZJ5C5vg9GxT2Iv7N18hMFwAz3NgSQgTU6tFwArWNwvkh2633c-2sMzs3410M_VbPozT4BgmlkgnY0gmlwhKwS3DGKbXVsdGlhZGRyc4wACgSsEtwxBhr03QOCcnOFAAMBAACJc2VjcDI1NmsxoQPnd5mq7mRXAZ3Zf3RHAc1dtLev9rqSKA84z02B0qkzu4N0Y3CCGvODdWRwghr1hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-13_04-19-20__6a84d0f9-8b82-49ff-8d4d-4b5f5dfde5f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.66.137
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['2707', '2708', '2709', '2710', '2711']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 2707:2707 -p 2708:2708 -p 2709:2709 -p 2710:2710 -p 2711:2711 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2709 --rest-port=2707 --tcp-port=2708 --discv5-udp-port=2710 --rest-address=0.0.0.0 --nat=extip:172.18.66.137 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a60825c95df896d45cf0b1beff141ae41d164aab2abb2c91ed88d4c4ebff4ca0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2711 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.66.137 waku cbb53d410aa5c8bc5a17373231576c1f994bb91d9e89a83fc944324fe05c165a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID cbb53d410aa5. Setting up logs at ./log/docker/receiving_node2_2024-09-13_04-19-20__6a84d0f9-8b82-49ff-8d4d-4b5f5dfde5f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 2707
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2707/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2707/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.66.137/tcp/2708/p2p/16Uiu2HAm7ZBqyWTk13x91rLSmZ315RyvSimmrJLuHzMkt9cibAY9","/ip4/172.18.66.137/tcp/2709/ws/p2p/16Uiu2HAm7ZBqyWTk13x91rLSmZ315RyvSimmrJLuHzMkt9cibAY9"],"enrUri":"enr:-LO4QA1p9oqvpy-Jclc3zvIE5NZu-sdFTLRjfMAw71X0jICRFIdtaY8i8offWH6r3r64q2EyhTtoMhJYx0Ot3VEgIqkBgmlkgnY0gmlwhKwSQomKbXVsdGlhZGRyc4wACgSsEkKJBgqV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK0ORPU-pn5MnUGPj8ewLBV_A_Gq5lVDjoTVMJ4_NxjkoN0Y3CCCpSDdWRwggqWhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2707/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.220.49/tcp/6899/p2p/16Uiu2HAmUEYJaYTGmqs65WtMvMoV7ciQgwf7reEe4GrUoT2Rcpgr"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-13_04-19-20__6a84d0f9-8b82-49ff-8d4d-4b5f5dfde5f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.238.49
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['7312', '7313', '7314', '7315', '7316']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 7312:7312 -p 7313:7313 -p 7314:7314 -p 7315:7315 -p 7316:7316 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7314 --rest-port=7312 --tcp-port=7313 --discv5-udp-port=7315 --rest-address=0.0.0.0 --nat=extip:172.18.238.49 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ca8e9f18a4cfd8fe094bcd4fcfe25d9df9cd7ffd5de1d93ad93ecb9cadfed2bb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7316 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QLyo4WH5u0CHHkxuVLNZJ5C5vg9GxT2Iv7N18hMFwAz3NgSQgTU6tFwArWNwvkh2633c-2sMzs3410M_VbPozT4BgmlkgnY0gmlwhKwS3DGKbXVsdGlhZGRyc4wACgSsEtwxBhr03QOCcnOFAAMBAACJc2VjcDI1NmsxoQPnd5mq7mRXAZ3Zf3RHAc1dtLev9rqSKA84z02B0qkzu4N0Y3CCGvODdWRwghr1hXdha3UyCQ --lightpushnode=/ip4/172.18.220.49/tcp/6899/p2p/16Uiu2HAmUEYJaYTGmqs65WtMvMoV7ciQgwf7reEe4GrUoT2Rcpgr --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.238.49 waku 75fab38ebe89e3408599681c2175c667d83a25219916d1548f71ab059d22ce59
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 75fab38ebe89. Setting up logs at ./log/docker/lightpush_node1_2024-09-13_04-19-20__6a84d0f9-8b82-49ff-8d4d-4b5f5dfde5f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 7312
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7312/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7312/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.238.49/tcp/7313/p2p/16Uiu2HAmRqtoidFeZKUpQ3zv9cHZLqv9Wd2XDw6KGZfHK8XSvPvm","/ip4/172.18.238.49/tcp/7314/ws/p2p/16Uiu2HAmRqtoidFeZKUpQ3zv9cHZLqv9Wd2XDw6KGZfHK8XSvPvm"],"enrUri":"enr:-LO4QD-K8eKvVhM-83ghHe_DekntwTnEKYbWr6qYUVJcVryEJI0LRwm84AzOhWD5MandBX9_3DvSVnLAAeX1MpMoYJIBgmlkgnY0gmlwhKwS7jGKbXVsdGlhZGRyc4wACgSsEu4xBhyS3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPD8wzJG_urtm6kA6HlOnrRZJhYO1leq5mnWJDn5HXznoN0Y3CCHJGDdWRwghyThXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7312/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.220.49/tcp/6899/p2p/16Uiu2HAmUEYJaYTGmqs65WtMvMoV7ciQgwf7reEe4GrUoT2Rcpgr"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7312/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.66.137/tcp/2708/p2p/16Uiu2HAm7ZBqyWTk13x91rLSmZ315RyvSimmrJLuHzMkt9cibAY9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node2_2024-09-13_04-19-20__6a84d0f9-8b82-49ff-8d4d-4b5f5dfde5f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.64.49
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['21755', '21756', '21757', '21758', '21759']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 21755:21755 -p 21756:21756 -p 21757:21757 -p 21758:21758 -p 21759:21759 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21757 --rest-port=21755 --tcp-port=21756 --discv5-udp-port=21758 --rest-address=0.0.0.0 --nat=extip:172.18.64.49 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0cbde56f1dd0bfed1f9e980f489facacba247bdd66c3fd324702bcd4ffef9a3d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21759 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QLyo4WH5u0CHHkxuVLNZJ5C5vg9GxT2Iv7N18hMFwAz3NgSQgTU6tFwArWNwvkh2633c-2sMzs3410M_VbPozT4BgmlkgnY0gmlwhKwS3DGKbXVsdGlhZGRyc4wACgSsEtwxBhr03QOCcnOFAAMBAACJc2VjcDI1NmsxoQPnd5mq7mRXAZ3Zf3RHAc1dtLev9rqSKA84z02B0qkzu4N0Y3CCGvODdWRwghr1hXdha3UyCQ --lightpushnode=/ip4/172.18.220.49/tcp/6899/p2p/16Uiu2HAmUEYJaYTGmqs65WtMvMoV7ciQgwf7reEe4GrUoT2Rcpgr --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.64.49 waku 9e40c2ba058a97d9b46383dfa5aa8d2667b5f75c2d07d87e36ad554af32e2849
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 9e40c2ba058a. Setting up logs at ./log/docker/lightpush_node2_2024-09-13_04-19-20__6a84d0f9-8b82-49ff-8d4d-4b5f5dfde5f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 21755
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21755/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21755/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.64.49/tcp/21756/p2p/16Uiu2HAmV58dfyRFiKSAgQJ63FGpjiMVC8WcmcVtTEZGM8icLNDu","/ip4/172.18.64.49/tcp/21757/ws/p2p/16Uiu2HAmV58dfyRFiKSAgQJ63FGpjiMVC8WcmcVtTEZGM8icLNDu"],"enrUri":"enr:-LO4QM-6SB0bNz7H7KaeZ-5uRPeCJNEU5CTX2n7yq5qGgpkkYpbjR0APwA7lly58x850JXwsYJHe43fGYpWPye91v-oBgmlkgnY0gmlwhKwSQDGKbXVsdGlhZGRyc4wACgSsEkAxBlT93QOCcnOFAAMBAACJc2VjcDI1NmsxoQPz6kuVjlKrj3DE289V2saWkvUVgxCcyNwwDsa4sZTIaIN0Y3CCVPyDdWRwglT-hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21755/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.220.49/tcp/6899/p2p/16Uiu2HAmUEYJaYTGmqs65WtMvMoV7ciQgwf7reEe4GrUoT2Rcpgr"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21755/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.66.137/tcp/2708/p2p/16Uiu2HAm7ZBqyWTk13x91rLSmZ315RyvSimmrJLuHzMkt9cibAY9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node3_2024-09-13_04-19-20__6a84d0f9-8b82-49ff-8d4d-4b5f5dfde5f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.228.174
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['28826', '28827', '28828', '28829', '28830']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 28826:28826 -p 28827:28827 -p 28828:28828 -p 28829:28829 -p 28830:28830 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28828 --rest-port=28826 --tcp-port=28827 --discv5-udp-port=28829 --rest-address=0.0.0.0 --nat=extip:172.18.228.174 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a9e0b5ba199ebfa3ee6deec948054b1a03c1865ec9f7a8cbdc835ac02697dbb4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28830 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QLyo4WH5u0CHHkxuVLNZJ5C5vg9GxT2Iv7N18hMFwAz3NgSQgTU6tFwArWNwvkh2633c-2sMzs3410M_VbPozT4BgmlkgnY0gmlwhKwS3DGKbXVsdGlhZGRyc4wACgSsEtwxBhr03QOCcnOFAAMBAACJc2VjcDI1NmsxoQPnd5mq7mRXAZ3Zf3RHAc1dtLev9rqSKA84z02B0qkzu4N0Y3CCGvODdWRwghr1hXdha3UyCQ --lightpushnode=/ip4/172.18.220.49/tcp/6899/p2p/16Uiu2HAmUEYJaYTGmqs65WtMvMoV7ciQgwf7reEe4GrUoT2Rcpgr --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.228.174 waku bd2ae39a7c0eb2a8435ca6f4adb42c393c99b5ffa25801b98e3434f39b635e42
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID bd2ae39a7c0e. Setting up logs at ./log/docker/lightpush_node3_2024-09-13_04-19-20__6a84d0f9-8b82-49ff-8d4d-4b5f5dfde5f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 28826
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28826/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28826/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.228.174/tcp/28827/p2p/16Uiu2HAm2DPWb7dHnHzJT6yR9YjnpUWAdNawWBjFQEfij4gBcEoq","/ip4/172.18.228.174/tcp/28828/ws/p2p/16Uiu2HAm2DPWb7dHnHzJT6yR9YjnpUWAdNawWBjFQEfij4gBcEoq"],"enrUri":"enr:-LO4QK-6g8KDDgN5Knx-7fUERtKlRWLTtU4ifNvOCgFXrO4ZN3wrjtaUF_ch1yA9IlcsM2zJThZ3QMT-4yRuu0dXE9cBgmlkgnY0gmlwhKwS5K6KbXVsdGlhZGRyc4wACgSsEuSuBnCc3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJk3DeYXgxixnh5uutRFJrOVUqn8TxwIJ2aE-PXKLczqIN0Y3CCcJuDdWRwgnCdhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28826/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.220.49/tcp/6899/p2p/16Uiu2HAmUEYJaYTGmqs65WtMvMoV7ciQgwf7reEe4GrUoT2Rcpgr"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28826/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.66.137/tcp/2708/p2p/16Uiu2HAm7ZBqyWTk13x91rLSmZ315RyvSimmrJLuHzMkt9cibAY9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node4_2024-09-13_04-19-20__6a84d0f9-8b82-49ff-8d4d-4b5f5dfde5f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.105.107
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['28655', '28656', '28657', '28658', '28659']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 28655:28655 -p 28656:28656 -p 28657:28657 -p 28658:28658 -p 28659:28659 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28657 --rest-port=28655 --tcp-port=28656 --discv5-udp-port=28658 --rest-address=0.0.0.0 --nat=extip:172.18.105.107 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9ef2f3dcde8abe733fa328ef7d9db89cff1ae5372d3facec97b0c3c0b46b5b2b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28659 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QLyo4WH5u0CHHkxuVLNZJ5C5vg9GxT2Iv7N18hMFwAz3NgSQgTU6tFwArWNwvkh2633c-2sMzs3410M_VbPozT4BgmlkgnY0gmlwhKwS3DGKbXVsdGlhZGRyc4wACgSsEtwxBhr03QOCcnOFAAMBAACJc2VjcDI1NmsxoQPnd5mq7mRXAZ3Zf3RHAc1dtLev9rqSKA84z02B0qkzu4N0Y3CCGvODdWRwghr1hXdha3UyCQ --lightpushnode=/ip4/172.18.220.49/tcp/6899/p2p/16Uiu2HAmUEYJaYTGmqs65WtMvMoV7ciQgwf7reEe4GrUoT2Rcpgr --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.105.107 waku c7e5bde487cbca175f5bbfa456092034e59ac47b78673aa8555b57ac2f28c2a4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c7e5bde487cb. Setting up logs at ./log/docker/lightpush_node4_2024-09-13_04-19-20__6a84d0f9-8b82-49ff-8d4d-4b5f5dfde5f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 28655
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28655/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28655/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.105.107/tcp/28656/p2p/16Uiu2HAm8xM9FYse5jyNi8nEnnTg7gEdp6ZDYCDPuKZviGwsUqKD","/ip4/172.18.105.107/tcp/28657/ws/p2p/16Uiu2HAm8xM9FYse5jyNi8nEnnTg7gEdp6ZDYCDPuKZviGwsUqKD"],"enrUri":"enr:-LO4QAWr2ytfob0REUaFKXPNlbT2W2NED2VnkiL--yiXVitOToOUXwzNblnEOSLvNmfbieHw9174kVlAC3kR6youXAgBgmlkgnY0gmlwhKwSaWuKbXVsdGlhZGRyc4wACgSsEmlrBm_x3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLJA6LaJDsPd7F1tU7-b65-5zp_V5I1aJlaX6Y_jP7jOIN0Y3CCb_CDdWRwgm_yhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28655/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.220.49/tcp/6899/p2p/16Uiu2HAmUEYJaYTGmqs65WtMvMoV7ciQgwf7reEe4GrUoT2Rcpgr"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28655/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.66.137/tcp/2708/p2p/16Uiu2HAm7ZBqyWTk13x91rLSmZ315RyvSimmrJLuHzMkt9cibAY9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6898/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2707/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7312/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726201170595739648}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6898/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726201170595739648,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2707/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726201170595739648,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21755/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726201170712436992}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6898/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726201170712436992,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2707/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726201170712436992,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28826/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726201170825881600}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6898/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726201170825881600,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2707/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726201170825881600,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28655/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726201170940913408}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6898/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726201170940913408,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2707/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726201170940913408,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c494e367c34b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id cbb53d410aa5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 75fab38ebe89
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9e40c2ba058a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id bd2ae39a7c0e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c7e5bde487cb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.