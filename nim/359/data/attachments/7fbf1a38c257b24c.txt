[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_content_topic[/app/20/sometopic/someencoding] with id: 2024-09-13_04-29-01__e7b171df-a9ec-4b7b-8cc5-a3957f29609f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-13_04-29-01__e7b171df-a9ec-4b7b-8cc5-a3957f29609f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.90.207
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['52860', '52861', '52862', '52863', '52864']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 52860:52860 -p 52861:52861 -p 52862:52862 -p 52863:52863 -p 52864:52864 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52862 --rest-port=52860 --tcp-port=52861 --discv5-udp-port=52863 --rest-address=0.0.0.0 --nat=extip:172.18.90.207 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=e946ab5ae818cd2f48b3a6afbe0cda8af22bbf2e1ea8fa33a90e2b831fcc7f03 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52864 --metrics-logging=true --relay=true --filter=true --content-topic=/app/20/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.90.207 waku de52e387ce856bd140fc7c4ddcc92e31a9383e9d0fb65fca0313bccc25258699
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID de52e387ce85. Setting up logs at ./log/docker/node1_2024-09-13_04-29-01__e7b171df-a9ec-4b7b-8cc5-a3957f29609f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 52860
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52860/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52860/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.90.207/tcp/52861/p2p/16Uiu2HAkuccMizbD9C7uciYCpxSXccc2tZxxDPiq4pTsw6bg1oGB","/ip4/172.18.90.207/tcp/52862/ws/p2p/16Uiu2HAkuccMizbD9C7uciYCpxSXccc2tZxxDPiq4pTsw6bg1oGB"],"enrUri":"enr:-LO4QNGftKrvxj2llZiRWuSinV4RapfPZNSSCK26WaLtZqxgQKmNfShAwITqqj6JRbNY9gxAkhSmFpib3kW5G1D_920BgmlkgnY0gmlwhKwSWs-KbXVsdGlhZGRyc4wACgSsElrPBs5-3QOCcnOFAAIBAACJc2VjcDI1NmsxoQICzUsrmLshj9MKNtfqQMtRFR4jiA5LJxtNOzrp7Bsc2IN0Y3CCzn2DdWRwgs5_hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-13_04-29-01__e7b171df-a9ec-4b7b-8cc5-a3957f29609f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.163.159
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['27740', '27741', '27742', '27743', '27744']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 27740:27740 -p 27741:27741 -p 27742:27742 -p 27743:27743 -p 27744:27744 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27742 --rest-port=27740 --tcp-port=27741 --discv5-udp-port=27743 --rest-address=0.0.0.0 --nat=extip:172.18.163.159 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=8efd8dcc77fcbd009f88a8dea4fb4be2682cc2371e43cb1fed97e95dee2ed94b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27744 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QNGftKrvxj2llZiRWuSinV4RapfPZNSSCK26WaLtZqxgQKmNfShAwITqqj6JRbNY9gxAkhSmFpib3kW5G1D_920BgmlkgnY0gmlwhKwSWs-KbXVsdGlhZGRyc4wACgSsElrPBs5-3QOCcnOFAAIBAACJc2VjcDI1NmsxoQICzUsrmLshj9MKNtfqQMtRFR4jiA5LJxtNOzrp7Bsc2IN0Y3CCzn2DdWRwgs5_hXdha3UyBQ --content-topic=/app/20/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.163.159 waku 0ac5a0fcc71822fd3bc957da892c1995cebacafaad6b1ccbd3c8867eb3007437
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 0ac5a0fcc718. Setting up logs at ./log/docker/node2_2024-09-13_04-29-01__e7b171df-a9ec-4b7b-8cc5-a3957f29609f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 27740
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27740/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27740/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.163.159/tcp/27741/p2p/16Uiu2HAkudE35jbNUo8hC2sEZykZbAYakwxUYhnBjxbZR9JVFcLE","/ip4/172.18.163.159/tcp/27742/ws/p2p/16Uiu2HAkudE35jbNUo8hC2sEZykZbAYakwxUYhnBjxbZR9JVFcLE"],"enrUri":"enr:-LO4QMBOtRM5Gbmisl6Ia1QEt-kLNeuJDqq1d1CQSJxeB-tvB0ZeHTQdngDCXNEluvwJr_dKYYXDceDB8PJCV732xVEBgmlkgnY0gmlwhKwSo5-KbXVsdGlhZGRyc4wACgSsEqOfBmxe3QOCcnOFAAIBAACJc2VjcDI1NmsxoQIC9aKyQNyDNFIqa6g9YOVHyEaI7US0TVbCv5OGjeOJ14N0Y3CCbF2DdWRwgmxfhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27740/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.90.207/tcp/52861/p2p/16Uiu2HAkuccMizbD9C7uciYCpxSXccc2tZxxDPiq4pTsw6bg1oGB"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52860/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/20/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27740/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/20/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52860/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52860/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/20/sometopic/someencoding","version":0,"timestamp":1726201744809119744,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27740/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/20/sometopic/someencoding","version":0,"timestamp":1726201744809119744,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id de52e387ce85
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0ac5a0fcc718
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.