[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_retrieve_messages_without_subscribing_via_api with id: 2024-09-13_04-28-09__cc62f30b-c6e4-4bc9-9af6-abb7ef4dc350
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-13_04-28-09__cc62f30b-c6e4-4bc9-9af6-abb7ef4dc350__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.254.175
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['39170', '39171', '39172', '39173', '39174']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 39170:39170 -p 39171:39171 -p 39172:39172 -p 39173:39173 -p 39174:39174 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39172 --rest-port=39170 --tcp-port=39171 --discv5-udp-port=39173 --rest-address=0.0.0.0 --nat=extip:172.18.254.175 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=2bdd672d2387aea41d45adce56f71c1da1eb0e428aec6feaa02eecb182e1aabe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39174 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.254.175 waku b2b173385b3266c257b9d9405c9ef820b01ca08bc65e94fbfa19da8d93d114a1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b2b173385b32. Setting up logs at ./log/docker/node1_2024-09-13_04-28-09__cc62f30b-c6e4-4bc9-9af6-abb7ef4dc350__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 39170
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39170/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39170/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.254.175/tcp/39171/p2p/16Uiu2HAmVgQZimNUPZd1wX5oq4Yv2hURxk8DAM72kzh3K5xzXbEJ","/ip4/172.18.254.175/tcp/39172/ws/p2p/16Uiu2HAmVgQZimNUPZd1wX5oq4Yv2hURxk8DAM72kzh3K5xzXbEJ"],"enrUri":"enr:-LO4QLOe8mEbcIpvNbCEd1zOLpNBwIGOJnPfSJcEOKEKQaLlXEIEdwxBd9tif4tB3w89BgqNj6QL-lvVDYJ_Pp4Syo4BgmlkgnY0gmlwhKwS_q-KbXVsdGlhZGRyc4wACgSsEv6vBpkE3QOCcnOFAAIBAACJc2VjcDI1NmsxoQP886NF4e0Cix9QHiGaFh695K9nbNKoY540C9cFqlCUa4N0Y3CCmQODdWRwgpkFhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-13_04-28-09__cc62f30b-c6e4-4bc9-9af6-abb7ef4dc350__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.135.236
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['56621', '56622', '56623', '56624', '56625']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 56621:56621 -p 56622:56622 -p 56623:56623 -p 56624:56624 -p 56625:56625 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56623 --rest-port=56621 --tcp-port=56622 --discv5-udp-port=56624 --rest-address=0.0.0.0 --nat=extip:172.18.135.236 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=248f1471c007bfebffe920f3f445a3faaf3f4f1d1535dea7cbdf30ada21d7b7f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56625 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QLOe8mEbcIpvNbCEd1zOLpNBwIGOJnPfSJcEOKEKQaLlXEIEdwxBd9tif4tB3w89BgqNj6QL-lvVDYJ_Pp4Syo4BgmlkgnY0gmlwhKwS_q-KbXVsdGlhZGRyc4wACgSsEv6vBpkE3QOCcnOFAAIBAACJc2VjcDI1NmsxoQP886NF4e0Cix9QHiGaFh695K9nbNKoY540C9cFqlCUa4N0Y3CCmQODdWRwgpkFhXdha3UyBQ --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.135.236 waku 01f9c97920c6ebc289e2b6a78e26cff0cb7f54eff2fb8124cdc68b7594b0b33c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 01f9c97920c6. Setting up logs at ./log/docker/node2_2024-09-13_04-28-09__cc62f30b-c6e4-4bc9-9af6-abb7ef4dc350__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 56621
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56621/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56621/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.135.236/tcp/56622/p2p/16Uiu2HAkyTRRCnf1TnKomMEifkTnftqKYLv1GYkSemtpfGYkcNfo","/ip4/172.18.135.236/tcp/56623/ws/p2p/16Uiu2HAkyTRRCnf1TnKomMEifkTnftqKYLv1GYkSemtpfGYkcNfo"],"enrUri":"enr:-LO4QHt6fg2yq47nK7xJqfjGe_SLfn87zyTkyfGcS1SyDBbFKXPE6ce72M12BQDMMXkg_u7Bb8NjdiC3SGwwgd-U3UgBgmlkgnY0gmlwhKwSh-yKbXVsdGlhZGRyc4wACgSsEofsBt0v3QOCcnOFAAIBAACJc2VjcDI1NmsxoQI74XGzety0KsbPRQbd40_-33tTvnJJu34mJYxLlnvyBoN0Y3CC3S6DdWRwgt0whXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56621/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.254.175/tcp/39171/p2p/16Uiu2HAmVgQZimNUPZd1wX5oq4Yv2hURxk8DAM72kzh3K5xzXbEJ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39170/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39170/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726201692709406464,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56621/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726201692709406464,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b2b173385b32
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 01f9c97920c6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.