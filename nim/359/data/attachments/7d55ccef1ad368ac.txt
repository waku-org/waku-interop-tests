[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_nodes_same_cluster_different_shards with id: 2024-09-13_04-30-11__a7cfd2f5-6e24-4f84-aa7f-9f0e09bdc4cb
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-13_04-30-11__a7cfd2f5-6e24-4f84-aa7f-9f0e09bdc4cb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.228.37
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['49582', '49583', '49584', '49585', '49586']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 49582:49582 -p 49583:49583 -p 49584:49584 -p 49585:49585 -p 49586:49586 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49584 --rest-port=49582 --tcp-port=49583 --discv5-udp-port=49585 --rest-address=0.0.0.0 --nat=extip:172.18.228.37 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=23d5ee4ee5a50b6fa6fb4d743eca21fcc011ccbbad9ee3e4bacb4de36d9e390e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49586 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.228.37 waku d2c1b2726b8b6702ade122319fd1342be0c59bfba8b30c4d451fba5b3a3bc900
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d2c1b2726b8b. Setting up logs at ./log/docker/node1_2024-09-13_04-30-11__a7cfd2f5-6e24-4f84-aa7f-9f0e09bdc4cb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 49582
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49582/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49582/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.228.37/tcp/49583/p2p/16Uiu2HAmBzFaz2fuwxx2K6VnGoT5NkWKJTmQ8XqQuL8pLKArTXhM","/ip4/172.18.228.37/tcp/49584/ws/p2p/16Uiu2HAmBzFaz2fuwxx2K6VnGoT5NkWKJTmQ8XqQuL8pLKArTXhM"],"enrUri":"enr:-LO4QNfr9pm3ioFokr9sen085m6u8hw3tjOSOjItKpRe-IgwIzrYLuX0DbdVEaJjaKASg5_ppIZjTGtao37upc_I5KoBgmlkgnY0gmlwhKwS5CWKbXVsdGlhZGRyc4wACgSsEuQlBsGw3QOCcnOFAAIBAACJc2VjcDI1NmsxoQL2E5Nykmwm6kOvEmtCsIs85-4__-zlDteCqT_KeWT3HIN0Y3CCwa-DdWRwgsGxhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-13_04-30-11__a7cfd2f5-6e24-4f84-aa7f-9f0e09bdc4cb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.176.206
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['22613', '22614', '22615', '22616', '22617']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 22613:22613 -p 22614:22614 -p 22615:22615 -p 22616:22616 -p 22617:22617 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22615 --rest-port=22613 --tcp-port=22614 --discv5-udp-port=22616 --rest-address=0.0.0.0 --nat=extip:172.18.176.206 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=abfcf4dba9b881756bdcb3e4a6fb800ea52e0ed0a10fdaab0d66ef6f0d81ae28 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22617 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QNfr9pm3ioFokr9sen085m6u8hw3tjOSOjItKpRe-IgwIzrYLuX0DbdVEaJjaKASg5_ppIZjTGtao37upc_I5KoBgmlkgnY0gmlwhKwS5CWKbXVsdGlhZGRyc4wACgSsEuQlBsGw3QOCcnOFAAIBAACJc2VjcDI1NmsxoQL2E5Nykmwm6kOvEmtCsIs85-4__-zlDteCqT_KeWT3HIN0Y3CCwa-DdWRwgsGxhXdha3UyBQ --pubsub-topic=/waku/2/rs/2/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.176.206 waku 831f644972f3b592da64aff7fb3ede949ae52c31e2a259564295a26c7bb558f8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 831f644972f3. Setting up logs at ./log/docker/node2_2024-09-13_04-30-11__a7cfd2f5-6e24-4f84-aa7f-9f0e09bdc4cb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 22613
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22613/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22613/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.176.206/tcp/22614/p2p/16Uiu2HAkv7Jkssqgov5yCQycTL43mrvWL4Zt3nv33tbq92q5ikzZ","/ip4/172.18.176.206/tcp/22615/ws/p2p/16Uiu2HAkv7Jkssqgov5yCQycTL43mrvWL4Zt3nv33tbq92q5ikzZ"],"enrUri":"enr:-LO4QHiBPODoJTNAUfZmFHxGsdWlgojYr4PGerYZyigpCbfTZ_tD1Hl1brKNHX_wiYSU32_ALuPpSSyVX08uSO5VISIBgmlkgnY0gmlwhKwSsM6KbXVsdGlhZGRyc4wACgSsErDOBlhX3QOCcnOFAAIBAAGJc2VjcDI1NmsxoQIKJzxdbwmEofEsa7ExMg2gvpnWjbDEkPMxIcfDSzBu_oN0Y3CCWFaDdWRwglhYhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22613/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.228.37/tcp/49583/p2p/16Uiu2HAmBzFaz2fuwxx2K6VnGoT5NkWKJTmQ8XqQuL8pLKArTXhM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49582/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22613/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49582/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49582/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726201815031430656,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22613/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726201815031430656,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d2c1b2726b8b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 831f644972f3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2024-09-13_04-30-11__a7cfd2f5-6e24-4f84-aa7f-9f0e09bdc4cb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2024-09-13_04-30-11__a7cfd2f5-6e24-4f84-aa7f-9f0e09bdc4cb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_nodes_same_cluster_different_shards with id: 2024-09-13_04-30-19__e1554461-a386-449c-8780-c66a80d95efd
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-13_04-30-19__e1554461-a386-449c-8780-c66a80d95efd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.215.158
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['4458', '4459', '4460', '4461', '4462']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 4458:4458 -p 4459:4459 -p 4460:4460 -p 4461:4461 -p 4462:4462 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4460 --rest-port=4458 --tcp-port=4459 --discv5-udp-port=4461 --rest-address=0.0.0.0 --nat=extip:172.18.215.158 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=51c6dc5f5ff8ecf9bb41372731c1b21dd02f1b7dbad4c643b2e3dafe7ae7abeb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4462 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.215.158 waku 2be4979774736b10233f0232e2887d7646e0e17b7f51a6fc65c73473580cb260
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2be497977473. Setting up logs at ./log/docker/node1_2024-09-13_04-30-19__e1554461-a386-449c-8780-c66a80d95efd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 4458
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4458/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4458/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.215.158/tcp/4459/p2p/16Uiu2HAkw6RV4afJtFyF7HyuCMYtApu134TXkLQAu81T7UpsStWZ","/ip4/172.18.215.158/tcp/4460/ws/p2p/16Uiu2HAkw6RV4afJtFyF7HyuCMYtApu134TXkLQAu81T7UpsStWZ"],"enrUri":"enr:-LO4QOWtNGez691a-TnvnDDkVxW9w0mMyG_nyMPYfdKGs9yZbNYxzmfGKa3rsc919_ggBR448h1IzMq5Seya8zG-NCQBgmlkgnY0gmlwhKwS156KbXVsdGlhZGRyc4wACgSsEteeBhFs3QOCcnOFAAIBAACJc2VjcDI1NmsxoQIYyPLSYm40DvvelvkDHnxN9Bw0k5clT5ClXNw-UHbmBoN0Y3CCEWuDdWRwghFthXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-13_04-30-19__e1554461-a386-449c-8780-c66a80d95efd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.157.74
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['41275', '41276', '41277', '41278', '41279']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 41275:41275 -p 41276:41276 -p 41277:41277 -p 41278:41278 -p 41279:41279 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41277 --rest-port=41275 --tcp-port=41276 --discv5-udp-port=41278 --rest-address=0.0.0.0 --nat=extip:172.18.157.74 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=d7f8d9e4e480ac274adfdbddab75ffcebf2707771e3f04fa3f3bddd5f49577c2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41279 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QOWtNGez691a-TnvnDDkVxW9w0mMyG_nyMPYfdKGs9yZbNYxzmfGKa3rsc919_ggBR448h1IzMq5Seya8zG-NCQBgmlkgnY0gmlwhKwS156KbXVsdGlhZGRyc4wACgSsEteeBhFs3QOCcnOFAAIBAACJc2VjcDI1NmsxoQIYyPLSYm40DvvelvkDHnxN9Bw0k5clT5ClXNw-UHbmBoN0Y3CCEWuDdWRwghFthXdha3UyBQ --pubsub-topic=/waku/2/rs/2/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.157.74 waku 4afde95321d99f3b06906169c5e2f08be8b0bc5083baad85cb3a30c0311a5d22
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4afde95321d9. Setting up logs at ./log/docker/node2_2024-09-13_04-30-19__e1554461-a386-449c-8780-c66a80d95efd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 41275
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41275/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41275/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.157.74/tcp/41276/p2p/16Uiu2HAmViWEq7tH4Pwagb6NLNrXVmMVYMuJcHRF5m8weDVJcQSK","/ip4/172.18.157.74/tcp/41277/ws/p2p/16Uiu2HAmViWEq7tH4Pwagb6NLNrXVmMVYMuJcHRF5m8weDVJcQSK"],"enrUri":"enr:-LO4QMW7BKa5tSHpTU3gPaXbsG4iGwcKtmoGLX_9yYjCgSGWbG6rjytKd_G_08210LC7gO05ZX5PN3Wcy9Nae-KmLCgBgmlkgnY0gmlwhKwSnUqKbXVsdGlhZGRyc4wACgSsEp1KBqE93QOCcnOFAAIBAAGJc2VjcDI1NmsxoQP9fTchq_b-3Gxprgu_udk8v_lZFbgdaMjN_9y_q22ugIN0Y3CCoTyDdWRwgqE-hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41275/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.215.158/tcp/4459/p2p/16Uiu2HAkw6RV4afJtFyF7HyuCMYtApu134TXkLQAu81T7UpsStWZ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4458/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41275/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4458/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4458/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726201823376101376,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41275/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726201823376101376,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2be497977473
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4afde95321d9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2024-09-13_04-30-19__e1554461-a386-449c-8780-c66a80d95efd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2024-09-13_04-30-19__e1554461-a386-449c-8780-c66a80d95efd__wakuorg_nwaku:latest.log