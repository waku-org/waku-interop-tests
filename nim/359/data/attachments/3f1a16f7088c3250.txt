[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_sender_uses_regular_api_receiver_uses_auto_api with id: 2024-09-13_04-29-35__2e50e28a-3ec0-421f-8957-8f54c731f8a3
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-13_04-29-35__2e50e28a-3ec0-421f-8957-8f54c731f8a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.14.122
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['49502', '49503', '49504', '49505', '49506']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 49502:49502 -p 49503:49503 -p 49504:49504 -p 49505:49505 -p 49506:49506 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49504 --rest-port=49502 --tcp-port=49503 --discv5-udp-port=49505 --rest-address=0.0.0.0 --nat=extip:172.18.14.122 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=0bf4ddaeed2f4a5b69be78b4bbea672cfb585b4fe8ded40bada5228ebe212eab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49506 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.14.122 waku 106ecd6c69be5f498a0940656b988165854a3c04e47097f8d2f24c9d50d5409a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 106ecd6c69be. Setting up logs at ./log/docker/node1_2024-09-13_04-29-35__2e50e28a-3ec0-421f-8957-8f54c731f8a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 49502
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49502/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49502/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.14.122/tcp/49503/p2p/16Uiu2HAmPvXdFZsH7dT7LdQqDxwDiT496F7NuJnRjvmaYzUGeq9N","/ip4/172.18.14.122/tcp/49504/ws/p2p/16Uiu2HAmPvXdFZsH7dT7LdQqDxwDiT496F7NuJnRjvmaYzUGeq9N"],"enrUri":"enr:-LO4QEznYJEUq4zAZx_2ye2sTNKF9IF_Aly4QLKAJaBhihblQMCzaNICw5w-aijxyM4w4-GRol0tYdldcTwqfIsMOfsBgmlkgnY0gmlwhKwSDnqKbXVsdGlhZGRyc4wACgSsEg56BsFg3QOCcnOFAAIBAACJc2VjcDI1NmsxoQOna6Gd_ICFaWfCmxti-F7qieQeAqQRzurfNhqjcVGy_YN0Y3CCwV-DdWRwgsFhhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-13_04-29-35__2e50e28a-3ec0-421f-8957-8f54c731f8a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.3.41
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['60977', '60978', '60979', '60980', '60981']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 60977:60977 -p 60978:60978 -p 60979:60979 -p 60980:60980 -p 60981:60981 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60979 --rest-port=60977 --tcp-port=60978 --discv5-udp-port=60980 --rest-address=0.0.0.0 --nat=extip:172.18.3.41 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=0d31b9096d1cbc64a7faaa37ecb7ffadb56a70287c3fcfda62d6a988fee2ab3c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60981 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QEznYJEUq4zAZx_2ye2sTNKF9IF_Aly4QLKAJaBhihblQMCzaNICw5w-aijxyM4w4-GRol0tYdldcTwqfIsMOfsBgmlkgnY0gmlwhKwSDnqKbXVsdGlhZGRyc4wACgSsEg56BsFg3QOCcnOFAAIBAACJc2VjcDI1NmsxoQOna6Gd_ICFaWfCmxti-F7qieQeAqQRzurfNhqjcVGy_YN0Y3CCwV-DdWRwgsFhhXdha3UyBQ --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.3.41 waku c04b8db6007eca1b47a27e988aeb6faaa94ea2102f604e73d946e11c4b46bf4a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c04b8db6007e. Setting up logs at ./log/docker/node2_2024-09-13_04-29-35__2e50e28a-3ec0-421f-8957-8f54c731f8a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 60977
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60977/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60977/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.3.41/tcp/60978/p2p/16Uiu2HAkzSKFaGiixBRgsHxLw3mSCG6PkxW6wxProK2c7R59RGtb","/ip4/172.18.3.41/tcp/60979/ws/p2p/16Uiu2HAkzSKFaGiixBRgsHxLw3mSCG6PkxW6wxProK2c7R59RGtb"],"enrUri":"enr:-LO4QAF1B1L5vm_xQx3lTz8LERjimFQXXXljdvPyX9pAwJinE4EmvRO7SlM68UrfyJxehA1e2SfCHy9HS0BHvo9BwvEBgmlkgnY0gmlwhKwSAymKbXVsdGlhZGRyc4wACgSsEgMpBu4z3QOCcnOFAAIBAACJc2VjcDI1NmsxoQJKdJQMTmQWcqP5Fmet_jjiZMUaarBwL7eApoaVr7zdjIN0Y3CC7jKDdWRwgu40hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60977/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.14.122/tcp/49503/p2p/16Uiu2HAmPvXdFZsH7dT7LdQqDxwDiT496F7NuJnRjvmaYzUGeq9N"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49502/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60977/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49502/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60977/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726201779182564864,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 106ecd6c69be
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c04b8db6007e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.