[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_message_with_ephemeral_true with id: 2025-01-29_04-05-50__e5f8c690-d218-4aba-af70-024619ce77aa
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-29_04-05-50__e5f8c690-d218-4aba-af70-024619ce77aa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.208.77
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['57499', '57500', '57501', '57502', '57503']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 57499:57499 -p 57500:57500 -p 57501:57501 -p 57502:57502 -p 57503:57503 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57501 --rest-port=57499 --tcp-port=57500 --discv5-udp-port=57502 --rest-address=0.0.0.0 --nat=extip:172.18.208.77 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=44fdf6c0ad8cfc7abeb14a0f926d4f46a3878ac1f0136172e539f0e8dd5e25f7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57503 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.208.77 waku a6123efba6e942bf2f9751b2bc8e4d7f207f6badc88ea0606f81380798ed2679
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a6123efba6e9. Setting up logs at ./log/docker/publishing_node1_2025-01-29_04-05-50__e5f8c690-d218-4aba-af70-024619ce77aa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 57499
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 531232dd2eb5. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57499/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57499/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.208.77/tcp/57500/p2p/16Uiu2HAmHYpJKTsZxaCWRDLZ5XEfseuvkEf4SWsy6dYURX4aDehU","/ip4/172.18.208.77/tcp/57501/ws/p2p/16Uiu2HAmHYpJKTsZxaCWRDLZ5XEfseuvkEf4SWsy6dYURX4aDehU"],"enrUri":"enr:-L24QJjJM8Dvyli8_oUJUeyDIloM89tQSWsOaQLxLQN8X6CaQOswrGRJYjLWuPO0PEcjYu_W-AHWdXSweNdSfmz7CGACgmlkgnY0gmlwhKwS0E2KbXVsdGlhZGRyc5YACASsEtBNBuCcAAoErBLQTQbgnd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDSLWVtz1_MQEZRooMV6J7jhUpzQPgaLhTQJzsWWNeKa-DdGNwguCcg3VkcILgnoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-29_04-05-50__e5f8c690-d218-4aba-af70-024619ce77aa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.54.91
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['30102', '30103', '30104', '30105', '30106']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 30102:30102 -p 30103:30103 -p 30104:30104 -p 30105:30105 -p 30106:30106 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30104 --rest-port=30102 --tcp-port=30103 --discv5-udp-port=30105 --rest-address=0.0.0.0 --nat=extip:172.18.54.91 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d410adfabc2ce71bd52af6ba34c2b35b61fbecaecbf4e8d2390aef0fd3daa3b4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30106 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJjJM8Dvyli8_oUJUeyDIloM89tQSWsOaQLxLQN8X6CaQOswrGRJYjLWuPO0PEcjYu_W-AHWdXSweNdSfmz7CGACgmlkgnY0gmlwhKwS0E2KbXVsdGlhZGRyc5YACASsEtBNBuCcAAoErBLQTQbgnd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDSLWVtz1_MQEZRooMV6J7jhUpzQPgaLhTQJzsWWNeKa-DdGNwguCcg3VkcILgnoV3YWt1MgM --storenode=/ip4/172.18.208.77/tcp/57500/p2p/16Uiu2HAmHYpJKTsZxaCWRDLZ5XEfseuvkEf4SWsy6dYURX4aDehU --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.54.91 waku 1cd1a94a11b0064092973c364c0a2aa3ce8790c6eb20618b449784cffacb4eea
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1cd1a94a11b0. Setting up logs at ./log/docker/store_node1_2025-01-29_04-05-50__e5f8c690-d218-4aba-af70-024619ce77aa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 30102
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30102/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30102/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.54.91/tcp/30103/p2p/16Uiu2HAm9TzLgVPpLDYLcrwqKq6Jfp6aXAHBoPsbREVMd7p2Ea8c","/ip4/172.18.54.91/tcp/30104/ws/p2p/16Uiu2HAm9TzLgVPpLDYLcrwqKq6Jfp6aXAHBoPsbREVMd7p2Ea8c"],"enrUri":"enr:-L24QDSzCfsoi-IxVlIWfOdWZ8g4kqXenaU4psWk4i5c_lUrMna-GC_hV8CsUtK7oJgoIm70s4kwEnv1NDotdzXpStwCgmlkgnY0gmlwhKwSNluKbXVsdGlhZGRyc5YACASsEjZbBnWXAAoErBI2WwZ1mN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC0JuJ2MqAtMMAy2NVUG00c4wAKvqEpOxeKp5rEOUlrFWDdGNwgnWXg3VkcIJ1mYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30102/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.208.77/tcp/57500/p2p/16Uiu2HAmHYpJKTsZxaCWRDLZ5XEfseuvkEf4SWsy6dYURX4aDehU"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57499/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30102/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57499/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)', "ephemeral": true}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57499/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a6123efba6e9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1cd1a94a11b0
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a6123efba6e9. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.