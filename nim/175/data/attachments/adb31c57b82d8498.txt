[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_store_with_filter with id: 2024-05-04_04-22-25__0a64b255-7db4-445d-a1fe-1472a7419f69
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-04_04-22-25__0a64b255-7db4-445d-a1fe-1472a7419f69__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.42.89
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['57104', '57105', '57106', '57107', '57108']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 57104:57104 -p 57105:57105 -p 57106:57106 -p 57107:57107 -p 57108:57108 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57106 --rest-port=57104 --tcp-port=57105 --discv5-udp-port=57107 --rest-address=0.0.0.0 --nat=extip:172.18.42.89 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57108 --metrics-logging=true --store=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.42.89 waku ad973afb62a1b1aedcbd91fa5320d047ec40fd75884106b9c8877474dfe8d390
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID ad973afb62a1. Setting up logs at ./log/docker/publishing_node1_2024-05-04_04-22-25__0a64b255-7db4-445d-a1fe-1472a7419f69__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 57104
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57104/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.42.89/tcp/57105/p2p/16Uiu2HAmCAX8aabAHC6eyNWu8uYCKndHEx5ZFUxCPDrY3ScN778B","/ip4/172.18.42.89/tcp/57106/ws/p2p/16Uiu2HAmCAX8aabAHC6eyNWu8uYCKndHEx5ZFUxCPDrY3ScN778B"],"enrUri":"enr:-LO4QCbobI6HoDx7Ide2_4KtJ2xQicAsjtQD01Mag_jz7B8cPU2yiD_bowM8AtHirJ7F-L6LFIrakeudsI8fLo-_QaoBgmlkgnY0gmlwhKwSKlmKbXVsdGlhZGRyc4wACgSsEipZBt8S3QOCcnOFAAABAACJc2VjcDI1NmsxoQL4tPXnrdVoupCxAwmlVatJSRRA4vGF1l9EoF_maWyO2IN0Y3CC3xGDdWRwgt8ThXdha3UyBw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-04_04-22-25__0a64b255-7db4-445d-a1fe-1472a7419f69__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.27.35
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['51911', '51912', '51913', '51914', '51915']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 51911:51911 -p 51912:51912 -p 51913:51913 -p 51914:51914 -p 51915:51915 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51913 --rest-port=51911 --tcp-port=51912 --discv5-udp-port=51914 --rest-address=0.0.0.0 --nat=extip:172.18.27.35 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51915 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QCbobI6HoDx7Ide2_4KtJ2xQicAsjtQD01Mag_jz7B8cPU2yiD_bowM8AtHirJ7F-L6LFIrakeudsI8fLo-_QaoBgmlkgnY0gmlwhKwSKlmKbXVsdGlhZGRyc4wACgSsEipZBt8S3QOCcnOFAAABAACJc2VjcDI1NmsxoQL4tPXnrdVoupCxAwmlVatJSRRA4vGF1l9EoF_maWyO2IN0Y3CC3xGDdWRwgt8ThXdha3UyBw --storenode=/ip4/172.18.42.89/tcp/57105/p2p/16Uiu2HAmCAX8aabAHC6eyNWu8uYCKndHEx5ZFUxCPDrY3ScN778B --store=false --relay=false --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.27.35 waku 0978e701c2921f41b3ace110538c3de5c373f9c6c75d49ab6221cea94b96bf4f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 0978e701c292. Setting up logs at ./log/docker/store_node1_2024-05-04_04-22-25__0a64b255-7db4-445d-a1fe-1472a7419f69__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 51911
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51911/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.27.35/tcp/51912/p2p/16Uiu2HAm5HvKxfuhR5Vkinue9bcpuL7Lsq8h4gNwuRcXREwoLhBW","/ip4/172.18.27.35/tcp/51913/ws/p2p/16Uiu2HAm5HvKxfuhR5Vkinue9bcpuL7Lsq8h4gNwuRcXREwoLhBW"],"enrUri":"enr:-LO4QCO9Oa6V8bl3CP3rt-yfyvznXNXI29qaROEAxG6NAfdvdiCNCl5yZEOiDdi8S8nvm8vX_XtCu60FhFSfPY8yGq4BgmlkgnY0gmlwhKwSGyOKbXVsdGlhZGRyc4wACgSsEhsjBsrJ3QOCcnOFAAABAACJc2VjcDI1NmsxoQKSmHIfymuF5gZ0EM0Xg9E6HudmWpUQ4yg6VPUhmhbC2YN0Y3CCysiDdWRwgsrKhXdha3UyBA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51911/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.42.89/tcp/57105/p2p/16Uiu2HAmCAX8aabAHC6eyNWu8uYCKndHEx5ZFUxCPDrY3ScN778B"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57104/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57104/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57104/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714796548254981888,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id ad973afb62a1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id 0978e701c292
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-04_04-22-25__0a64b255-7db4-445d-a1fe-1472a7419f69__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-04_04-22-25__0a64b255-7db4-445d-a1fe-1472a7419f69__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_store_with_filter with id: 2024-05-04_04-22-32__b337df4f-9692-4f20-8038-e19b46669efa
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-04_04-22-32__b337df4f-9692-4f20-8038-e19b46669efa__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.71.250
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['15189', '15190', '15191', '15192', '15193']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 15189:15189 -p 15190:15190 -p 15191:15191 -p 15192:15192 -p 15193:15193 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15191 --rest-port=15189 --tcp-port=15190 --discv5-udp-port=15192 --rest-address=0.0.0.0 --nat=extip:172.18.71.250 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15193 --metrics-logging=true --store=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.71.250 waku 5d4d2c62c2398d7ec66ca2e0f5b4de3f15ab305cef09893833c0b84d200dbd47
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 5d4d2c62c239. Setting up logs at ./log/docker/publishing_node1_2024-05-04_04-22-32__b337df4f-9692-4f20-8038-e19b46669efa__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 15189
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15189/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.71.250/tcp/15190/p2p/16Uiu2HAkvnMsUn3VTjdM2gEZSwD7mCyzcfpMYxv9Lwz1DzHfaNaQ","/ip4/172.18.71.250/tcp/15191/ws/p2p/16Uiu2HAkvnMsUn3VTjdM2gEZSwD7mCyzcfpMYxv9Lwz1DzHfaNaQ"],"enrUri":"enr:-LO4QBUz9RV1h1mZlmaiY1QqSFu_2wYcLuuDGOfMlF7-CmYpABCSS5AcwDR_BoklICkOeyh21KnBY73yhJ8905T8rX8BgmlkgnY0gmlwhKwSR_qKbXVsdGlhZGRyc4wACgSsEkf6BjtX3QOCcnOFAAABAACJc2VjcDI1NmsxoQIUKGh9hext0RH3c9R7r0PkD9UrhtjWpBZXm0myjtyBTYN0Y3CCO1aDdWRwgjtYhXdha3UyBw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-04_04-22-32__b337df4f-9692-4f20-8038-e19b46669efa__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.241.208
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['44338', '44339', '44340', '44341', '44342']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 44338:44338 -p 44339:44339 -p 44340:44340 -p 44341:44341 -p 44342:44342 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44340 --rest-port=44338 --tcp-port=44339 --discv5-udp-port=44341 --rest-address=0.0.0.0 --nat=extip:172.18.241.208 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44342 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QBUz9RV1h1mZlmaiY1QqSFu_2wYcLuuDGOfMlF7-CmYpABCSS5AcwDR_BoklICkOeyh21KnBY73yhJ8905T8rX8BgmlkgnY0gmlwhKwSR_qKbXVsdGlhZGRyc4wACgSsEkf6BjtX3QOCcnOFAAABAACJc2VjcDI1NmsxoQIUKGh9hext0RH3c9R7r0PkD9UrhtjWpBZXm0myjtyBTYN0Y3CCO1aDdWRwgjtYhXdha3UyBw --storenode=/ip4/172.18.71.250/tcp/15190/p2p/16Uiu2HAkvnMsUn3VTjdM2gEZSwD7mCyzcfpMYxv9Lwz1DzHfaNaQ --store=false --relay=false --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.241.208 waku a296409b946a48380fcc2a6098f9f79eaea961e9be5e4374d886c7975a5d0750
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID a296409b946a. Setting up logs at ./log/docker/store_node1_2024-05-04_04-22-32__b337df4f-9692-4f20-8038-e19b46669efa__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 44338
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44338/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.241.208/tcp/44339/p2p/16Uiu2HAmGSkcvMnBFp5QCCzViktGfTNnai5RRh5hwUysNsHYzyiN","/ip4/172.18.241.208/tcp/44340/ws/p2p/16Uiu2HAmGSkcvMnBFp5QCCzViktGfTNnai5RRh5hwUysNsHYzyiN"],"enrUri":"enr:-LO4QJuEkV6SgpNeji5EeorFqaD2mxaVzDVYMgbn7LLSHwZRVsFIP9ubRn6ulF3mhOcpkq7EZPzxok2e0lm1Iach9VQBgmlkgnY0gmlwhKwS8dCKbXVsdGlhZGRyc4wACgSsEvHQBq003QOCcnOFAAABAACJc2VjcDI1NmsxoQM4TEC8BGqLfeYUB6hDaIe-GybD_SZ6XAPswciHQ4w-F4N0Y3CCrTODdWRwgq01hXdha3UyBA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44338/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.71.250/tcp/15190/p2p/16Uiu2HAkvnMsUn3VTjdM2gEZSwD7mCyzcfpMYxv9Lwz1DzHfaNaQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15189/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15189/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15189/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714796557245435904,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id 5d4d2c62c239
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id a296409b946a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-04_04-22-32__b337df4f-9692-4f20-8038-e19b46669efa__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-04_04-22-32__b337df4f-9692-4f20-8038-e19b46669efa__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_store_with_filter with id: 2024-05-04_04-22-42__574f1c93-f010-41c8-bc13-7970ccacb560
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-04_04-22-42__574f1c93-f010-41c8-bc13-7970ccacb560__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.242.187
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['40835', '40836', '40837', '40838', '40839']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 40835:40835 -p 40836:40836 -p 40837:40837 -p 40838:40838 -p 40839:40839 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40837 --rest-port=40835 --tcp-port=40836 --discv5-udp-port=40838 --rest-address=0.0.0.0 --nat=extip:172.18.242.187 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40839 --metrics-logging=true --store=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.242.187 waku 4a2c24b076d847b9086b4b1a31e3a2fa3fded757c425acc22089e328b1a039de
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 4a2c24b076d8. Setting up logs at ./log/docker/publishing_node1_2024-05-04_04-22-42__574f1c93-f010-41c8-bc13-7970ccacb560__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 40835
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40835/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.242.187/tcp/40836/p2p/16Uiu2HAmTZdjY7H9YgGba6a8XWiPaP1ifjNbFfGZDZTGmPiDiM9P","/ip4/172.18.242.187/tcp/40837/ws/p2p/16Uiu2HAmTZdjY7H9YgGba6a8XWiPaP1ifjNbFfGZDZTGmPiDiM9P"],"enrUri":"enr:-LO4QG_RoWfrhodfvHkBtLP_6iQZn6M7LLi1nFjxCA1vAKo9RCgHHTyVewhvmR2fwl9pU90UFL7yCxnR0xNEE715lW4BgmlkgnY0gmlwhKwS8ruKbXVsdGlhZGRyc4wACgSsEvK7Bp-F3QOCcnOFAAABAACJc2VjcDI1NmsxoQPdgBa6dfbFm_vKuEDeXzyyyH3KvJ3Z4BorfS2pDKB2_oN0Y3CCn4SDdWRwgp-GhXdha3UyBw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-04_04-22-42__574f1c93-f010-41c8-bc13-7970ccacb560__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.75.221
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['6478', '6479', '6480', '6481', '6482']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 6478:6478 -p 6479:6479 -p 6480:6480 -p 6481:6481 -p 6482:6482 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6480 --rest-port=6478 --tcp-port=6479 --discv5-udp-port=6481 --rest-address=0.0.0.0 --nat=extip:172.18.75.221 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6482 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QG_RoWfrhodfvHkBtLP_6iQZn6M7LLi1nFjxCA1vAKo9RCgHHTyVewhvmR2fwl9pU90UFL7yCxnR0xNEE715lW4BgmlkgnY0gmlwhKwS8ruKbXVsdGlhZGRyc4wACgSsEvK7Bp-F3QOCcnOFAAABAACJc2VjcDI1NmsxoQPdgBa6dfbFm_vKuEDeXzyyyH3KvJ3Z4BorfS2pDKB2_oN0Y3CCn4SDdWRwgp-GhXdha3UyBw --storenode=/ip4/172.18.242.187/tcp/40836/p2p/16Uiu2HAmTZdjY7H9YgGba6a8XWiPaP1ifjNbFfGZDZTGmPiDiM9P --store=false --relay=false --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.75.221 waku ba4b2c6c2cc5e59496c6a5191f8c3bc3fece022c5a28ceb1dbc240dbee165b66
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID ba4b2c6c2cc5. Setting up logs at ./log/docker/store_node1_2024-05-04_04-22-42__574f1c93-f010-41c8-bc13-7970ccacb560__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 6478
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6478/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.75.221/tcp/6479/p2p/16Uiu2HAmCwWxbV1Fd3V3w814S83jUy4VXffPuwqhuDUhgEUBbMo7","/ip4/172.18.75.221/tcp/6480/ws/p2p/16Uiu2HAmCwWxbV1Fd3V3w814S83jUy4VXffPuwqhuDUhgEUBbMo7"],"enrUri":"enr:-LO4QDXUlp9B8Ghrm017m9xUjcQXfksU2UlZ1j5KvuhYrtcYTSq6LRtEdBW8YblxFF0_8Q7UnSM6Pxu5URRmx5tnb6gBgmlkgnY0gmlwhKwSS92KbXVsdGlhZGRyc4wACgSsEkvdBhlQ3QOCcnOFAAABAACJc2VjcDI1NmsxoQMEO-b_Ewpgvf0EFMuygXW2TO4WPqCubKmeQx6PTTV10oN0Y3CCGU-DdWRwghlRhXdha3UyBA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6478/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.242.187/tcp/40836/p2p/16Uiu2HAmTZdjY7H9YgGba6a8XWiPaP1ifjNbFfGZDZTGmPiDiM9P"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40835/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40835/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40835/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714796565033392896,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id 4a2c24b076d8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id ba4b2c6c2cc5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-04_04-22-42__574f1c93-f010-41c8-bc13-7970ccacb560__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-04_04-22-42__574f1c93-f010-41c8-bc13-7970ccacb560__harbor.status.im_wakuorg_nwaku:latest.log