[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2024-08-26_15-59-50__5b4b6710-303f-4cae-bf88-41d0ab7b9471
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-08-26_15-59-50__5b4b6710-303f-4cae-bf88-41d0ab7b9471__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.126.3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['42817', '42818', '42819', '42820', '42821']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 42817:42817 -p 42818:42818 -p 42819:42819 -p 42820:42820 -p 42821:42821 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42819 --rest-port=42817 --tcp-port=42818 --discv5-udp-port=42820 --rest-address=0.0.0.0 --nat=extip:172.18.126.3 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c7d039725b7bd216f3f6b9af28c5c85d7e7c73eb82d6aad0770e5e493cad6eaa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42821 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.126.3 waku fdff5ef19e8434a24d9f4f6d1dcb6595b01a7496ee71735ad7804c8b7d93cded
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID fdff5ef19e84. Setting up logs at ./log/docker/publishing_node1_2024-08-26_15-59-50__5b4b6710-303f-4cae-bf88-41d0ab7b9471__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 42817
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42817/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42817/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.126.3/tcp/42818/p2p/16Uiu2HAmF8E1KrynaxQA7VrN6AAsEtnGMcW5Aom6WXBuzpogpd58","/ip4/172.18.126.3/tcp/42819/ws/p2p/16Uiu2HAmF8E1KrynaxQA7VrN6AAsEtnGMcW5Aom6WXBuzpogpd58"],"enrUri":"enr:-LO4QETWI3KilQS3dxr0_fNBTiQ_AyN5ryL1g0JeDGk6JM71PrnL4E36hVLs9ROusNmc-hDssLeiMPiQv1mO1Kbb5NgBgmlkgnY0gmlwhKwSfgOKbXVsdGlhZGRyc4wACgSsEn4DBqdD3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMksX8RHuYliS8FQsQwLJZn5b-U8-Ajuar3OqmC0y_Lx4N0Y3CCp0KDdWRwgqdEhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node2_2024-08-26_15-59-50__5b4b6710-303f-4cae-bf88-41d0ab7b9471__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.147.161
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['40295', '40296', '40297', '40298', '40299']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 40295:40295 -p 40296:40296 -p 40297:40297 -p 40298:40298 -p 40299:40299 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40297 --rest-port=40295 --tcp-port=40296 --discv5-udp-port=40298 --rest-address=0.0.0.0 --nat=extip:172.18.147.161 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e3a8173906d79bd7ae9eebf9c42aea7d9806fff48d8fb2fbc2a641dbc0c3b03c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40299 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.147.161 waku 103235d0ec814ee3f84d12ada4e4f1c5a6c4c6e60fc2460bcf7a4385ce38352f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 103235d0ec81. Setting up logs at ./log/docker/publishing_node2_2024-08-26_15-59-50__5b4b6710-303f-4cae-bf88-41d0ab7b9471__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 40295
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40295/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40295/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.147.161/tcp/40296/p2p/16Uiu2HAmGQTxsTRiux6mWqfWGEH4F3tcTVso7FpJ528S9auUjbMP","/ip4/172.18.147.161/tcp/40297/ws/p2p/16Uiu2HAmGQTxsTRiux6mWqfWGEH4F3tcTVso7FpJ528S9auUjbMP"],"enrUri":"enr:-LO4QKtFoyyWyNhVMf4eErsM-fMSc7-q94gqzES6_qvtqZlkOCZYbKYwUkCLXBxrMRUZqKZ_W45MyU0JosBPVi2eYZMBgmlkgnY0gmlwhKwSk6GKbXVsdGlhZGRyc4wACgSsEpOhBp1p3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3tkIaKKIcaQqQhcwzOxv1udIeHwoOg3NjhJw4-7Z4ZoN0Y3CCnWiDdWRwgp1qhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40295/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.126.3/tcp/42818/p2p/16Uiu2HAmF8E1KrynaxQA7VrN6AAsEtnGMcW5Aom6WXBuzpogpd58"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-08-26_15-59-50__5b4b6710-303f-4cae-bf88-41d0ab7b9471__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.75.251
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['2171', '2172', '2173', '2174', '2175']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 2171:2171 -p 2172:2172 -p 2173:2173 -p 2174:2174 -p 2175:2175 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2173 --rest-port=2171 --tcp-port=2172 --discv5-udp-port=2174 --rest-address=0.0.0.0 --nat=extip:172.18.75.251 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bd7ee1c9dce9e89cac95fcfb08204d40aa29bd7c0f010b58eefed820dceeed2c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2175 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QETWI3KilQS3dxr0_fNBTiQ_AyN5ryL1g0JeDGk6JM71PrnL4E36hVLs9ROusNmc-hDssLeiMPiQv1mO1Kbb5NgBgmlkgnY0gmlwhKwSfgOKbXVsdGlhZGRyc4wACgSsEn4DBqdD3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMksX8RHuYliS8FQsQwLJZn5b-U8-Ajuar3OqmC0y_Lx4N0Y3CCp0KDdWRwgqdEhXdha3UyCw --storenode=/ip4/172.18.126.3/tcp/42818/p2p/16Uiu2HAmF8E1KrynaxQA7VrN6AAsEtnGMcW5Aom6WXBuzpogpd58 --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.126.3/tcp/42818/p2p/16Uiu2HAmF8E1KrynaxQA7VrN6AAsEtnGMcW5Aom6WXBuzpogpd58
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.75.251 waku 1355b3047c823984b364a3bb0ab5dfd1148161937ba947f4c6257e388a9a7483
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 1355b3047c82. Setting up logs at ./log/docker/store_node1_2024-08-26_15-59-50__5b4b6710-303f-4cae-bf88-41d0ab7b9471__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 2171
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2171/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2171/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.75.251/tcp/2172/p2p/16Uiu2HAmD9uDLbyfz5pp7eSVp3CbjKp3Ux62mPV5C9guCCRncLvV","/ip4/172.18.75.251/tcp/2173/ws/p2p/16Uiu2HAmD9uDLbyfz5pp7eSVp3CbjKp3Ux62mPV5C9guCCRncLvV"],"enrUri":"enr:-LO4QHV23CLRkFXC71oiZUH6NBAA5Z5hOLXfUgu48YZ67N7EBEY5wYzMSN1-LY6emTYurygAf3GIjsyKlZRgV3s1vRwBgmlkgnY0gmlwhKwSS_uKbXVsdGlhZGRyc4wACgSsEkv7Bgh93QOCcnOFAAMBAACJc2VjcDI1NmsxoQMHaAjx0KC-D9bTTaN35CAVhknRjabp-J5PCfsLPZcGUoN0Y3CCCHyDdWRwggh-hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2171/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.126.3/tcp/42818/p2p/16Uiu2HAmF8E1KrynaxQA7VrN6AAsEtnGMcW5Aom6WXBuzpogpd58"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2171/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.147.161/tcp/40296/p2p/16Uiu2HAmGQTxsTRiux6mWqfWGEH4F3tcTVso7FpJ528S9auUjbMP"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42817/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40295/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2171/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724687995281662208}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:216 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42817/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"+vx0oRn2+um2p6qgzkPAUmSQgN/x/G7xJFP+1nTo6bs="}]}'
[35mDEBUG   [0m src.steps.store:store.py:216 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2171/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"7ae802363c106244d9cc","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"+vx0oRn2+um2p6qgzkPAUmSQgN/x/G7xJFP+1nTo6bs="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id fdff5ef19e84
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 103235d0ec81
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1355b3047c82
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.