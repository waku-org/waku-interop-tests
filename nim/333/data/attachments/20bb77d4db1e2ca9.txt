[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_after_node_pauses_and_pauses with id: 2024-08-26_15-38-42__e52a5be4-02eb-4073-9924-4cbbe961a89e
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-26_15-38-42__e52a5be4-02eb-4073-9924-4cbbe961a89e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.12.110
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['36977', '36978', '36979', '36980', '36981']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 36977:36977 -p 36978:36978 -p 36979:36979 -p 36980:36980 -p 36981:36981 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36979 --rest-port=36977 --tcp-port=36978 --discv5-udp-port=36980 --rest-address=0.0.0.0 --nat=extip:172.18.12.110 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7bfee9caa498d83eebbcde0aa12bfaaebadffdb8c298dad5afbff7b765e1c568 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36981 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.12.110 waku f5364bcc8cb89c2bc784cdc7af3db4ef9e94cb35a929a698200c2f4b88d8d35f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f5364bcc8cb8. Setting up logs at ./log/docker/node1_2024-08-26_15-38-42__e52a5be4-02eb-4073-9924-4cbbe961a89e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 36977
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36977/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36977/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.12.110/tcp/36978/p2p/16Uiu2HAm41nxm1BfuYYjLby7wCKrMYtaXnoLdzqHi8jzbofkop77","/ip4/172.18.12.110/tcp/36979/ws/p2p/16Uiu2HAm41nxm1BfuYYjLby7wCKrMYtaXnoLdzqHi8jzbofkop77"],"enrUri":"enr:-LO4QGoRvRzMVr1FpbXEtYawtPlQ3cEPSERt7zWkSfl-gWqsSwunze9u046zI11dMLz1_WIPx7UONH4ODZl9yeZSy0gBgmlkgnY0gmlwhKwSDG6KbXVsdGlhZGRyc4wACgSsEgxuBpBz3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ_myM_amVlDlSoSlfiGqc5r_srgXYNVLQj0xIFs-DrHoN0Y3CCkHKDdWRwgpB0hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-08-26_15-38-42__e52a5be4-02eb-4073-9924-4cbbe961a89e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.54.250
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['15959', '15960', '15961', '15962', '15963']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 15959:15959 -p 15960:15960 -p 15961:15961 -p 15962:15962 -p 15963:15963 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15961 --rest-port=15959 --tcp-port=15960 --discv5-udp-port=15962 --rest-address=0.0.0.0 --nat=extip:172.18.54.250 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e29f11aaea3a6e8fabea81453f6cfedebf0e05e64e03faec3e1cedfdb7b432fd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15963 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QGoRvRzMVr1FpbXEtYawtPlQ3cEPSERt7zWkSfl-gWqsSwunze9u046zI11dMLz1_WIPx7UONH4ODZl9yeZSy0gBgmlkgnY0gmlwhKwSDG6KbXVsdGlhZGRyc4wACgSsEgxuBpBz3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ_myM_amVlDlSoSlfiGqc5r_srgXYNVLQj0xIFs-DrHoN0Y3CCkHKDdWRwgpB0hXdha3UyBQ --filternode=/ip4/172.18.12.110/tcp/36978/p2p/16Uiu2HAm41nxm1BfuYYjLby7wCKrMYtaXnoLdzqHi8jzbofkop77
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.54.250 waku f6915b5531864e664419d368bdeb9c0c7f78732332186d588de56cf7ea4d9fd7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f6915b553186. Setting up logs at ./log/docker/node2_2024-08-26_15-38-42__e52a5be4-02eb-4073-9924-4cbbe961a89e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 15959
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15959/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15959/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.54.250/tcp/15960/p2p/16Uiu2HAmLanx7Hbd3bsWqGFZ8L4ZUWkew1TzsFJuf2Haj3uguTnk","/ip4/172.18.54.250/tcp/15961/ws/p2p/16Uiu2HAmLanx7Hbd3bsWqGFZ8L4ZUWkew1TzsFJuf2Haj3uguTnk"],"enrUri":"enr:-LO4QDa_UfiOoA40nj7kMiUYwSWetwH1UeRbe-s3g75mlL5KNi6xCFEyGQVBoxzvw1FBVg8zWM6C2BuBXc0Ab09SuEMBgmlkgnY0gmlwhKwSNvqKbXVsdGlhZGRyc4wACgSsEjb6Bj5Z3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN1ykhT5LQtFIRHLvkkCs9Fdu29Q5c-kZCO0VVCXhwMlYN0Y3CCPliDdWRwgj5ahXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15959/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.12.110/tcp/36978/p2p/16Uiu2HAm41nxm1BfuYYjLby7wCKrMYtaXnoLdzqHi8jzbofkop77"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36977/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15959/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "aa66d376-090b-490f-9d14-25aa9ce3cfb9", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"aa66d376-090b-490f-9d14-25aa9ce3cfb9","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36977/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15959/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1724686726204458496,"ephemeral":false}]'
[35mDEBUG   [0m src.node.waku_node:waku_node.py:249 Pausing container with id f5364bcc8cb8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:254 Unpause container with id f5364bcc8cb8
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36977/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "TTE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15959/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TTE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1724686726336787968,"ephemeral":false}]'
[35mDEBUG   [0m src.node.waku_node:waku_node.py:249 Pausing container with id f6915b553186
[35mDEBUG   [0m src.node.waku_node:waku_node.py:254 Unpause container with id f6915b553186
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36977/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "TTI=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15959/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TTI=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1724686726468741888,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f5364bcc8cb8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f6915b553186
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.