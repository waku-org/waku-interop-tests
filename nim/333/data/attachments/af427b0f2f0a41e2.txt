[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publish_on_not_subscribed_content_topic_works with id: 2024-08-26_15-49-46__a001c9eb-37e3-45f2-913e-67e87ff8f85f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-26_15-49-46__a001c9eb-37e3-45f2-913e-67e87ff8f85f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.218.167
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['62685', '62686', '62687', '62688', '62689']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 62685:62685 -p 62686:62686 -p 62687:62687 -p 62688:62688 -p 62689:62689 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62687 --rest-port=62685 --tcp-port=62686 --discv5-udp-port=62688 --rest-address=0.0.0.0 --nat=extip:172.18.218.167 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ccedb2384ceff6cbfefd1d02392ef7bd38a89571fbf3bdb1dce5afdbebfbad4b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62689 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.218.167 waku d5a55bdf081c9bfbb7ae8099f0dad459a725f69ab52fb31741876053bf2d4090
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d5a55bdf081c. Setting up logs at ./log/docker/node1_2024-08-26_15-49-46__a001c9eb-37e3-45f2-913e-67e87ff8f85f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 62685
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62685/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62685/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.218.167/tcp/62686/p2p/16Uiu2HAm7xVzapjgjL4yTsaxTVrHc9B55X25TEkNb7x4xAcFNZGG","/ip4/172.18.218.167/tcp/62687/ws/p2p/16Uiu2HAm7xVzapjgjL4yTsaxTVrHc9B55X25TEkNb7x4xAcFNZGG"],"enrUri":"enr:-LO4QPO6gkqmNFKa4vUgePqa5mnlckGTcAiBFQ_nwLy_k-7EQM34jFX3udy0Svok1ypNeN-m7jCZfUVixPtN32da-sMBgmlkgnY0gmlwhKwS2qeKbXVsdGlhZGRyc4wACgSsEtqnBvTf3QOCcnOFAAIBAACJc2VjcDI1NmsxoQK6MfTh3AnMPcolj-DasyJRj_ZjKSfWlnyqTzwy3aujvYN0Y3CC9N6DdWRwgvTghXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-08-26_15-49-46__a001c9eb-37e3-45f2-913e-67e87ff8f85f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.136.159
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['46766', '46767', '46768', '46769', '46770']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 46766:46766 -p 46767:46767 -p 46768:46768 -p 46769:46769 -p 46770:46770 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46768 --rest-port=46766 --tcp-port=46767 --discv5-udp-port=46769 --rest-address=0.0.0.0 --nat=extip:172.18.136.159 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=14d808d4abd44adaa9b9cd71bebdbd6dfda87254cfbae5daefcd54a7cf830fd2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46770 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QPO6gkqmNFKa4vUgePqa5mnlckGTcAiBFQ_nwLy_k-7EQM34jFX3udy0Svok1ypNeN-m7jCZfUVixPtN32da-sMBgmlkgnY0gmlwhKwS2qeKbXVsdGlhZGRyc4wACgSsEtqnBvTf3QOCcnOFAAIBAACJc2VjcDI1NmsxoQK6MfTh3AnMPcolj-DasyJRj_ZjKSfWlnyqTzwy3aujvYN0Y3CC9N6DdWRwgvTghXdha3UyBQ --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.136.159 waku c4b0fdd705207cd1aee5c6ae633995ac62e376b1d5dee4ce9fc79489ee1b3ff2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c4b0fdd70520. Setting up logs at ./log/docker/node2_2024-08-26_15-49-46__a001c9eb-37e3-45f2-913e-67e87ff8f85f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 46766
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46766/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46766/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.159/tcp/46767/p2p/16Uiu2HAmS6dT9B2Tdk8GASYSinufpyoWZ96FGrMVdri9XNsHgLKU","/ip4/172.18.136.159/tcp/46768/ws/p2p/16Uiu2HAmS6dT9B2Tdk8GASYSinufpyoWZ96FGrMVdri9XNsHgLKU"],"enrUri":"enr:-LO4QDjexEj-y_lHDnqrVvgdWdxqqAUe7f96Cn211dH1Rcw2JUumr9Ut363OnLA8RSN6QikAa6zz1DeV8aqdmHxNWR0BgmlkgnY0gmlwhKwSiJ-KbXVsdGlhZGRyc4wACgSsEoifBraw3QOCcnOFAAIBAACJc2VjcDI1NmsxoQPHuWZ_kWW_Mn1eaQ03tYNRhFUJR6asf7sLoYmFWpQYc4N0Y3CCtq-DdWRwgraxhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46766/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.218.167/tcp/62686/p2p/16Uiu2HAm7xVzapjgjL4yTsaxTVrHc9B55X25TEkNb7x4xAcFNZGG"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62685/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46766/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62685/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46766/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d5a55bdf081c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c4b0fdd70520
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.