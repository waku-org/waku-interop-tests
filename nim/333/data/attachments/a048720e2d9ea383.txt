[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_to_pubsub_topic_from_another_cluster_id with id: 2024-08-26_15-39-57__29d9dbec-134d-4525-aa75-26c599d635f1
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-26_15-39-57__29d9dbec-134d-4525-aa75-26c599d635f1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.79.83
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['59876', '59877', '59878', '59879', '59880']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 59876:59876 -p 59877:59877 -p 59878:59878 -p 59879:59879 -p 59880:59880 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59878 --rest-port=59876 --tcp-port=59877 --discv5-udp-port=59879 --rest-address=0.0.0.0 --nat=extip:172.18.79.83 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eeaba3e08e272240692fa705beec25ddad4dfb1d4150a90248dbe96d33ef6e4c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59880 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.79.83 waku c6980e1778b05ea6eaf19da1d250c579006f8f0f2076e8121c549accf095e005
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c6980e1778b0. Setting up logs at ./log/docker/node1_2024-08-26_15-39-57__29d9dbec-134d-4525-aa75-26c599d635f1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 59876
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59876/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59876/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.79.83/tcp/59877/p2p/16Uiu2HAm1UMWHk5xpmSnZ1WnNgzZwmxg9Qb6mucvLq1bbSCJJJT2","/ip4/172.18.79.83/tcp/59878/ws/p2p/16Uiu2HAm1UMWHk5xpmSnZ1WnNgzZwmxg9Qb6mucvLq1bbSCJJJT2"],"enrUri":"enr:-LO4QE0pcHz8azX8lB2EMxzUx9fXIjywyCVbba6Ph2UGyjaqcJEWzmV2o7aZEhsWbOSTImUMzoCvhv7VHaY4mSJ1v9kBgmlkgnY0gmlwhKwST1OKbXVsdGlhZGRyc4wACgSsEk9TBunm3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJZ1fmiRwiXWjWqWv59L0XwrjmZluDDGgREkuAwMJH5IYN0Y3CC6eWDdWRwgunnhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-08-26_15-39-57__29d9dbec-134d-4525-aa75-26c599d635f1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.172.151
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['21777', '21778', '21779', '21780', '21781']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 21777:21777 -p 21778:21778 -p 21779:21779 -p 21780:21780 -p 21781:21781 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21779 --rest-port=21777 --tcp-port=21778 --discv5-udp-port=21780 --rest-address=0.0.0.0 --nat=extip:172.18.172.151 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3cd75df6acd9e6afef8fda0eae0be21bdd5ed6f0babab08cc9aecf13b0f17b87 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21781 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QE0pcHz8azX8lB2EMxzUx9fXIjywyCVbba6Ph2UGyjaqcJEWzmV2o7aZEhsWbOSTImUMzoCvhv7VHaY4mSJ1v9kBgmlkgnY0gmlwhKwST1OKbXVsdGlhZGRyc4wACgSsEk9TBunm3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJZ1fmiRwiXWjWqWv59L0XwrjmZluDDGgREkuAwMJH5IYN0Y3CC6eWDdWRwgunnhXdha3UyBQ --filternode=/ip4/172.18.79.83/tcp/59877/p2p/16Uiu2HAm1UMWHk5xpmSnZ1WnNgzZwmxg9Qb6mucvLq1bbSCJJJT2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.172.151 waku 61089f7dfe93ee182084c5852f7285d649bf6eee92de08e01e872f886ba98a2a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 61089f7dfe93. Setting up logs at ./log/docker/node2_2024-08-26_15-39-57__29d9dbec-134d-4525-aa75-26c599d635f1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 21777
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21777/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21777/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.172.151/tcp/21778/p2p/16Uiu2HAm7qui8uoSNmeQ9D9S9PAe6oAyL824bdo3cWCpRvWP5qDR","/ip4/172.18.172.151/tcp/21779/ws/p2p/16Uiu2HAm7qui8uoSNmeQ9D9S9PAe6oAyL824bdo3cWCpRvWP5qDR"],"enrUri":"enr:-LO4QDU6Xs0cqy_fxROeVOb8-smbhMLA4vEq-FgyX7ChQPuQcpKguyrREH2O7PVXc1niZe2Wpr-lmC294kanQxwqKFcBgmlkgnY0gmlwhKwSrJeKbXVsdGlhZGRyc4wACgSsEqyXBlUT3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK4gbUI2rtwamYVaQlSSbi-_GBkTKDODFTd2cner0T08IN0Y3CCVRKDdWRwglUUhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21777/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.79.83/tcp/59877/p2p/16Uiu2HAm1UMWHk5xpmSnZ1WnNgzZwmxg9Qb6mucvLq1bbSCJJJT2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59876/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21777/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "ca9c9e96-ed54-4c85-b761-1da006407eb3", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/2/2"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"ca9c9e96-ed54-4c85-b761-1da006407eb3","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59876/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21777/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1724686801075525120,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c6980e1778b0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 61089f7dfe93
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.