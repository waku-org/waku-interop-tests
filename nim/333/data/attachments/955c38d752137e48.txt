[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_meta with id: 2024-08-26_15-44-23__482bc545-e9e7-4e2b-ba52-f2cb798b727c
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_15-44-23__482bc545-e9e7-4e2b-ba52-f2cb798b727c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.19.18
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['63110', '63111', '63112', '63113', '63114']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 63110:63110 -p 63111:63111 -p 63112:63112 -p 63113:63113 -p 63114:63114 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63112 --rest-port=63110 --tcp-port=63111 --discv5-udp-port=63113 --rest-address=0.0.0.0 --nat=extip:172.18.19.18 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4b69dbebc0bea62dbbc5cc4069b4ed55d4e6bcf4c8d4402502f7bedbff8ef25c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63114 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.19.18 waku 2d93146ccf0f320b4ca289d83d6315de3bbd2ba64d735f4be582ad0b110562ef
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2d93146ccf0f. Setting up logs at ./log/docker/receiving_node1_2024-08-26_15-44-23__482bc545-e9e7-4e2b-ba52-f2cb798b727c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 63110
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63110/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63110/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.19.18/tcp/63111/p2p/16Uiu2HAmA63Y2eUwQzuhxicpkuRwuKoK4hpQND4QU5EUez4ogcQc","/ip4/172.18.19.18/tcp/63112/ws/p2p/16Uiu2HAmA63Y2eUwQzuhxicpkuRwuKoK4hpQND4QU5EUez4ogcQc"],"enrUri":"enr:-LO4QNxM1iYbKUMX8xUftOPnq91UBaBNzmHYLf1rxjVkc9oZbbyh__q7QxRATo6aDpLaXw-i0UAxLMcFjUl7wz6Azs8BgmlkgnY0gmlwhKwSExKKbXVsdGlhZGRyc4wACgSsEhMSBvaI3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLZ2A-YfXt6ktYhbrlQrNG9ubco2cS_6pTpcrdXZWqU3YN0Y3CC9oeDdWRwgvaJhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-26_15-44-23__482bc545-e9e7-4e2b-ba52-f2cb798b727c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.15.32
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['12529', '12530', '12531', '12532', '12533']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 12529:12529 -p 12530:12530 -p 12531:12531 -p 12532:12532 -p 12533:12533 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12531 --rest-port=12529 --tcp-port=12530 --discv5-udp-port=12532 --rest-address=0.0.0.0 --nat=extip:172.18.15.32 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8ecba3b6b6cfe9f7da27a20447e21eddaaaa3e4f44d01d780ae3fefebe1145ea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12533 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.15.32 waku 7fe09d833642e1ff247aa30cfec2fbc85bb01c3790f445eebe3ee59e576cd892
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7fe09d833642. Setting up logs at ./log/docker/receiving_node2_2024-08-26_15-44-23__482bc545-e9e7-4e2b-ba52-f2cb798b727c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 12529
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12529/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12529/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.15.32/tcp/12530/p2p/16Uiu2HAmM6eSt5y3Fe5yvLoe77zhPg5H5fPqktU23PWqgVDYjAVq","/ip4/172.18.15.32/tcp/12531/ws/p2p/16Uiu2HAmM6eSt5y3Fe5yvLoe77zhPg5H5fPqktU23PWqgVDYjAVq"],"enrUri":"enr:-LO4QEM9SxcPHvCYEp_6Wc5NIv5Jxqr9aAWTvZLhUu0uNfzdYqAGs3_yyPPYCrcsOGxAZ6bouhiHjK5NIk85xrSVGvcBgmlkgnY0gmlwhKwSDyCKbXVsdGlhZGRyc4wACgSsEg8gBjDz3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN9cBdk_iCzqRPNUmaLBgOsZgE6pjnPgelpg273eLLCTIN0Y3CCMPKDdWRwgjD0hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12529/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.19.18/tcp/63111/p2p/16Uiu2HAmA63Y2eUwQzuhxicpkuRwuKoK4hpQND4QU5EUez4ogcQc"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_15-44-23__482bc545-e9e7-4e2b-ba52-f2cb798b727c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.133.143
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['10583', '10584', '10585', '10586', '10587']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 10583:10583 -p 10584:10584 -p 10585:10585 -p 10586:10586 -p 10587:10587 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10585 --rest-port=10583 --tcp-port=10584 --discv5-udp-port=10586 --rest-address=0.0.0.0 --nat=extip:172.18.133.143 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7d0fa85ef7a6166da0aec78a3ba9a0e52b4cd342a7e8a8e748bdcec0f2cdfca2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10587 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QNxM1iYbKUMX8xUftOPnq91UBaBNzmHYLf1rxjVkc9oZbbyh__q7QxRATo6aDpLaXw-i0UAxLMcFjUl7wz6Azs8BgmlkgnY0gmlwhKwSExKKbXVsdGlhZGRyc4wACgSsEhMSBvaI3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLZ2A-YfXt6ktYhbrlQrNG9ubco2cS_6pTpcrdXZWqU3YN0Y3CC9oeDdWRwgvaJhXdha3UyCQ --lightpushnode=/ip4/172.18.19.18/tcp/63111/p2p/16Uiu2HAmA63Y2eUwQzuhxicpkuRwuKoK4hpQND4QU5EUez4ogcQc --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.133.143 waku 3433316bb0e20b1d25037a818db25aa92b68e8532eb012fd753f63d0e4a39294
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3433316bb0e2. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_15-44-23__482bc545-e9e7-4e2b-ba52-f2cb798b727c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 10583
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10583/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10583/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.133.143/tcp/10584/p2p/16Uiu2HAkugPWbPm52DfizqS8ZjeQXtW2mKXprmPvPuWnpFJt9psN","/ip4/172.18.133.143/tcp/10585/ws/p2p/16Uiu2HAkugPWbPm52DfizqS8ZjeQXtW2mKXprmPvPuWnpFJt9psN"],"enrUri":"enr:-LO4QCdrQQ36wUI7jJJbJWCR-RieVAo1Pgrwxip46YpcYJtkBE-csV7KdggNR8fjntaFYuoMtPtXaBuTMFqQe0bN28IBgmlkgnY0gmlwhKwShY-KbXVsdGlhZGRyc4wACgSsEoWPBilZ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIDxRczDXdq4xgrR8sruTboL2SRqRxKxJ1fIWrF8ookFYN0Y3CCKViDdWRwgilahXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10583/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.19.18/tcp/63111/p2p/16Uiu2HAmA63Y2eUwQzuhxicpkuRwuKoK4hpQND4QU5EUez4ogcQc"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10583/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.15.32/tcp/12530/p2p/16Uiu2HAmM6eSt5y3Fe5yvLoe77zhPg5H5fPqktU23PWqgVDYjAVq"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63110/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12529/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10583/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724687069150554368, "meta": "Light push works!!"}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10583/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2d93146ccf0f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7fe09d833642
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3433316bb0e2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.