[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_pubsub_topics with id: 2024-08-26_15-43-57__635af12c-37aa-48da-b8ba-3fda4cc11a14
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_15-43-57__635af12c-37aa-48da-b8ba-3fda4cc11a14__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.169.91
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['50934', '50935', '50936', '50937', '50938']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 50934:50934 -p 50935:50935 -p 50936:50936 -p 50937:50937 -p 50938:50938 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50936 --rest-port=50934 --tcp-port=50935 --discv5-udp-port=50937 --rest-address=0.0.0.0 --nat=extip:172.18.169.91 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0d9062b58c79cc440fd58e04150cfce200ac43609d61afa4bad9e6d2d5c96ff9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50938 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.169.91 waku d0961180389cc6e6879ec0b74ccee01847cd78206fdee51819db918e0e575a51
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d0961180389c. Setting up logs at ./log/docker/receiving_node1_2024-08-26_15-43-57__635af12c-37aa-48da-b8ba-3fda4cc11a14__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 50934
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50934/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50934/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.169.91/tcp/50935/p2p/16Uiu2HAmQt7NhdFwHdSNXr2D3cZESubF28YBNq2J2pQFaRtkP2n5","/ip4/172.18.169.91/tcp/50936/ws/p2p/16Uiu2HAmQt7NhdFwHdSNXr2D3cZESubF28YBNq2J2pQFaRtkP2n5"],"enrUri":"enr:-LO4QC9X8UJp30WOtICowNowJzGUULGwKECyWWQXKea7nCd-RWi_DymninCbxTgoNKIdl7XuRo44KEKTLpsHIqX_pUkBgmlkgnY0gmlwhKwSqVuKbXVsdGlhZGRyc4wACgSsEqlbBsb43QOCcnOFAAMBAACJc2VjcDI1NmsxoQO1qLxvWKp3nDEvKeqfEwPVDdXKbdYfVQJTqLdUFswf2oN0Y3CCxveDdWRwgsb5hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-26_15-43-57__635af12c-37aa-48da-b8ba-3fda4cc11a14__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.243.224
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['53433', '53434', '53435', '53436', '53437']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 53433:53433 -p 53434:53434 -p 53435:53435 -p 53436:53436 -p 53437:53437 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53435 --rest-port=53433 --tcp-port=53434 --discv5-udp-port=53436 --rest-address=0.0.0.0 --nat=extip:172.18.243.224 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3da1c6da3e0259b2faf6fb7ddabda899bfaa45e9ff2a9febb428acbef5ceacb5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53437 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.243.224 waku 43c113f355d9de8b12d11125d9f29df2551303d16748b032da5593b505941b1f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 43c113f355d9. Setting up logs at ./log/docker/receiving_node2_2024-08-26_15-43-57__635af12c-37aa-48da-b8ba-3fda4cc11a14__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 53433
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53433/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53433/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.243.224/tcp/53434/p2p/16Uiu2HAm7VEVLFo6nCXmXTE2QAfHovaqLaHqXqhxEmqDbCXd9JoX","/ip4/172.18.243.224/tcp/53435/ws/p2p/16Uiu2HAm7VEVLFo6nCXmXTE2QAfHovaqLaHqXqhxEmqDbCXd9JoX"],"enrUri":"enr:-LO4QMLU0d2RkXJ_xB0TFo1t2YOFMAWvZRHsx-CKOnD1f7bGGoD_lM584N9UNsvjJ9xtVoQ_5UwJkUmUZH5DVq2RFMgBgmlkgnY0gmlwhKwS8-CKbXVsdGlhZGRyc4wACgSsEvPgBtC73QOCcnOFAAMBAACJc2VjcDI1NmsxoQKzNb5xy6U1ctfV-a64TSxgAOAePFENtfg7Gzn_oTe37oN0Y3CC0LqDdWRwgtC8hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53433/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.169.91/tcp/50935/p2p/16Uiu2HAmQt7NhdFwHdSNXr2D3cZESubF28YBNq2J2pQFaRtkP2n5"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_15-43-57__635af12c-37aa-48da-b8ba-3fda4cc11a14__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.69.104
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['40469', '40470', '40471', '40472', '40473']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 40469:40469 -p 40470:40470 -p 40471:40471 -p 40472:40472 -p 40473:40473 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40471 --rest-port=40469 --tcp-port=40470 --discv5-udp-port=40472 --rest-address=0.0.0.0 --nat=extip:172.18.69.104 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=effee0bedaf6decffff81c1eb9848df30dcbbbf6c2decb7d7be4698afceecfd4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40473 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QC9X8UJp30WOtICowNowJzGUULGwKECyWWQXKea7nCd-RWi_DymninCbxTgoNKIdl7XuRo44KEKTLpsHIqX_pUkBgmlkgnY0gmlwhKwSqVuKbXVsdGlhZGRyc4wACgSsEqlbBsb43QOCcnOFAAMBAACJc2VjcDI1NmsxoQO1qLxvWKp3nDEvKeqfEwPVDdXKbdYfVQJTqLdUFswf2oN0Y3CCxveDdWRwgsb5hXdha3UyCQ --lightpushnode=/ip4/172.18.169.91/tcp/50935/p2p/16Uiu2HAmQt7NhdFwHdSNXr2D3cZESubF28YBNq2J2pQFaRtkP2n5 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.69.104 waku 172453fa270654d31600d89923ce254dc2278fd2b65dafa56d9bc8822a96278f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 172453fa2706. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_15-43-57__635af12c-37aa-48da-b8ba-3fda4cc11a14__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 40469
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40469/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40469/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.69.104/tcp/40470/p2p/16Uiu2HAm9siGduD1i2NGpRQjB5gg44b9q6PPdRAP76KJfYmnN5q2","/ip4/172.18.69.104/tcp/40471/ws/p2p/16Uiu2HAm9siGduD1i2NGpRQjB5gg44b9q6PPdRAP76KJfYmnN5q2"],"enrUri":"enr:-LO4QINxKERyHH8P269C5aCpKTGXGFBqZEUqxsAIYqLqR7zMfFNayXbiYg6mgnerJ_gGuFOnGflU6vXKmX9g9mF_VjEBgmlkgnY0gmlwhKwSRWiKbXVsdGlhZGRyc4wACgSsEkVoBp4X3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLWr07KTiIZhw5K1zwGZAN0N7l1H3Hu3Xj9wlG11ZDByYN0Y3CCnhaDdWRwgp4YhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40469/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.169.91/tcp/50935/p2p/16Uiu2HAmQt7NhdFwHdSNXr2D3cZESubF28YBNq2J2pQFaRtkP2n5"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40469/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.243.224/tcp/53434/p2p/16Uiu2HAm7VEVLFo6nCXmXTE2QAfHovaqLaHqXqhxEmqDbCXd9JoX"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50934/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53433/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40469/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724687042596300800}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:40469/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0xdec8c0a28ae876085a2434833cd7289bb29fb0e096e4a3469ea60779b885a1d9'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d0961180389c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 43c113f355d9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 172453fa2706
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.