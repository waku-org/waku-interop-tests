[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_ping_on_unsubscribed_peer with id: 2024-08-26_15-39-59__2f5594a6-53e3-42fc-a6e9-f73d52cd8a96
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-26_15-39-59__2f5594a6-53e3-42fc-a6e9-f73d52cd8a96__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.203.9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['32791', '32792', '32793', '32794', '32795']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 32791:32791 -p 32792:32792 -p 32793:32793 -p 32794:32794 -p 32795:32795 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32793 --rest-port=32791 --tcp-port=32792 --discv5-udp-port=32794 --rest-address=0.0.0.0 --nat=extip:172.18.203.9 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=abe64fcb1eccf9a8ee79abb0ff1f62bab3b31fcaf8d263d0eed3620aabcdd573 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32795 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.203.9 waku 53f1352dddb77a498e462b5c7a29f2c6955d7a1eb5ac0c8f9286af56f9a2ff32
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 53f1352dddb7. Setting up logs at ./log/docker/node1_2024-08-26_15-39-59__2f5594a6-53e3-42fc-a6e9-f73d52cd8a96__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 32791
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32791/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32791/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.203.9/tcp/32792/p2p/16Uiu2HAmHg2BfesgHSCaRtHEapkcpJjCjNVyuyZ4hfCyuN3ozApi","/ip4/172.18.203.9/tcp/32793/ws/p2p/16Uiu2HAmHg2BfesgHSCaRtHEapkcpJjCjNVyuyZ4hfCyuN3ozApi"],"enrUri":"enr:-LO4QOYPuR06IMWzWkGwTi0KSW4DlYYIcax8r5BazLvociHaTzE0aRJTVQ_iD6bcHkyz4JN19Wlnf_69KRJ2jTqtbIgBgmlkgnY0gmlwhKwSywmKbXVsdGlhZGRyc4wACgSsEssJBoAZ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNKjhbZeoqZtMw7kASsb6LExbPBzL3xWllGtsrVKn27W4N0Y3CCgBiDdWRwgoAahXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-08-26_15-39-59__2f5594a6-53e3-42fc-a6e9-f73d52cd8a96__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.164.27
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['19929', '19930', '19931', '19932', '19933']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 19929:19929 -p 19930:19930 -p 19931:19931 -p 19932:19932 -p 19933:19933 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19931 --rest-port=19929 --tcp-port=19930 --discv5-udp-port=19932 --rest-address=0.0.0.0 --nat=extip:172.18.164.27 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c2feef0af5c60bb7d6de12280b1ac57fd2334236c1fe587f1d9d7c78faaa23bc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19933 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QOYPuR06IMWzWkGwTi0KSW4DlYYIcax8r5BazLvociHaTzE0aRJTVQ_iD6bcHkyz4JN19Wlnf_69KRJ2jTqtbIgBgmlkgnY0gmlwhKwSywmKbXVsdGlhZGRyc4wACgSsEssJBoAZ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNKjhbZeoqZtMw7kASsb6LExbPBzL3xWllGtsrVKn27W4N0Y3CCgBiDdWRwgoAahXdha3UyBQ --filternode=/ip4/172.18.203.9/tcp/32792/p2p/16Uiu2HAmHg2BfesgHSCaRtHEapkcpJjCjNVyuyZ4hfCyuN3ozApi
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.164.27 waku 58371ea343ae9d94e8e9cd23c7c42c85a79b3ee93a98d49595d746aca682a827
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 58371ea343ae. Setting up logs at ./log/docker/node2_2024-08-26_15-39-59__2f5594a6-53e3-42fc-a6e9-f73d52cd8a96__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 19929
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19929/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19929/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.164.27/tcp/19930/p2p/16Uiu2HAmUoeDPEgR9jCyMgcjghERzD1p1jCV3gPAxiMgbzDVUR8Z","/ip4/172.18.164.27/tcp/19931/ws/p2p/16Uiu2HAmUoeDPEgR9jCyMgcjghERzD1p1jCV3gPAxiMgbzDVUR8Z"],"enrUri":"enr:-LO4QDmkzTet4uisJl-BxHchIlGdzcoh5XNbLJN29QY_dFUSCg492hDcuw3qXbmcbzh2YRA6RuOQHyCQwSJOvKDn5lIBgmlkgnY0gmlwhKwSpBuKbXVsdGlhZGRyc4wACgSsEqQbBk3b3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPv8nMtWrsGg1Oq-hFe-ZByu8cV2rECkk7jBHevPgk0zoN0Y3CCTdqDdWRwgk3chXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19929/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.203.9/tcp/32792/p2p/16Uiu2HAmHg2BfesgHSCaRtHEapkcpJjCjNVyuyZ4hfCyuN3ozApi"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32791/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19929/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "6dd73295-fd97-49c7-83f4-a07b088faf93", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"6dd73295-fd97-49c7-83f4-a07b088faf93","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19929/filter/v2/subscriptions/6ec8dbdc-9409-4de9-a552-c50f973d74a1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"6ec8dbdc-9409-4de9-a552-c50f973d74a1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:19929/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"12345","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19929/filter/v2/subscriptions/569c199c-7c8d-4177-b11c-4103e046aaf8" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:19929/filter/v2/subscriptions/569c199c-7c8d-4177-b11c-4103e046aaf8. Response content: b'{"requestId":"569c199c-7c8d-4177-b11c-4103e046aaf8","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 53f1352dddb7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 58371ea343ae
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.