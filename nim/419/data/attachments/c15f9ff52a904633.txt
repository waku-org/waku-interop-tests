[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_pubsub_topics with id: 2024-11-04_04-10-58__5b2503bc-5797-4751-9e19-9bbbfa478c63
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-04_04-10-58__5b2503bc-5797-4751-9e19-9bbbfa478c63__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.212.34
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['15142', '15143', '15144', '15145', '15146']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 15142:15142 -p 15143:15143 -p 15144:15144 -p 15145:15145 -p 15146:15146 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15144 --rest-port=15142 --tcp-port=15143 --discv5-udp-port=15145 --rest-address=0.0.0.0 --nat=extip:172.18.212.34 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dcebc049cfc6443bafda5cfec8af5b8b3f0feda89bc0bbd2c1a92af88ce8bf64 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15146 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.212.34 waku 1947281bc534a002e877a4f28349676fe5bc579050f73c873d830796d3d95589
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b2a270ade4bc. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1947281bc534. Setting up logs at ./log/docker/receiving_node1_2024-11-04_04-10-58__5b2503bc-5797-4751-9e19-9bbbfa478c63__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 15142
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15142/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15142/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.212.34/tcp/15143/p2p/16Uiu2HAmJc4ShrBnCEEnTnXw2DVeXSM9c63ZHpELS8Fk8UHWUrhV","/ip4/172.18.212.34/tcp/15144/ws/p2p/16Uiu2HAmJc4ShrBnCEEnTnXw2DVeXSM9c63ZHpELS8Fk8UHWUrhV"],"enrUri":"enr:-L24QJWEr54gv2De-TKmQXZcTb3boLphHW1W7dZEnInTVwXmNuQET0ffddPXFRt5sT6tdtZUwy5X224IheG9w8sH4ysCgmlkgnY0gmlwhKwS1CKKbXVsdGlhZGRyc5YACASsEtQiBjsnAAoErBLUIgY7KN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDWGYB7HYSwnvB4IiXXl-Xq8uScBDMRxjnDYBSSugtwViDdGNwgjsng3VkcII7KYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-04_04-10-58__5b2503bc-5797-4751-9e19-9bbbfa478c63__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.116.193
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['18139', '18140', '18141', '18142', '18143']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 18139:18139 -p 18140:18140 -p 18141:18141 -p 18142:18142 -p 18143:18143 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18141 --rest-port=18139 --tcp-port=18140 --discv5-udp-port=18142 --rest-address=0.0.0.0 --nat=extip:172.18.116.193 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=24fd5fb8a7f1dea1ee307dd7abe3d69aba1c2f24a65ff5f0a12f2845a6d17389 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18143 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.116.193 waku 354f745db23f65a10866c39664cfd6f18d90c6cea60e7fc42c2864a1494527da
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 354f745db23f. Setting up logs at ./log/docker/receiving_node2_2024-11-04_04-10-58__5b2503bc-5797-4751-9e19-9bbbfa478c63__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 18139
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18139/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18139/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.116.193/tcp/18140/p2p/16Uiu2HAmCbWYfJ174Vns9qDhVNMxg7f7P5HGPzY4rPMJmhSybcCx","/ip4/172.18.116.193/tcp/18141/ws/p2p/16Uiu2HAmCbWYfJ174Vns9qDhVNMxg7f7P5HGPzY4rPMJmhSybcCx"],"enrUri":"enr:-L24QG5orW9JpAgpd0pd7m5Ir0NbQkZUhUkB_cvXb9p8yIiKR_gTysKyBUBOtBXsI3dqLPcEQxFHWF2K40QpoWpbKZICgmlkgnY0gmlwhKwSdMGKbXVsdGlhZGRyc5YACASsEnTBBkbcAAoErBJ0wQZG3d0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_xvRziBK9lnBbWGqApu3wNCL1rwiVxh8DkiWCCuLMRGDdGNwgkbcg3VkcIJG3oV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18139/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.212.34/tcp/15143/p2p/16Uiu2HAmJc4ShrBnCEEnTnXw2DVeXSM9c63ZHpELS8Fk8UHWUrhV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-04_04-10-58__5b2503bc-5797-4751-9e19-9bbbfa478c63__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.91.105
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['48130', '48131', '48132', '48133', '48134']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 48130:48130 -p 48131:48131 -p 48132:48132 -p 48133:48133 -p 48134:48134 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48132 --rest-port=48130 --tcp-port=48131 --discv5-udp-port=48133 --rest-address=0.0.0.0 --nat=extip:172.18.91.105 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d9cbe66efeef6f4befeda6851a6399967cabaa87a8eedfc8ddeaa8b6312de7f1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48134 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJWEr54gv2De-TKmQXZcTb3boLphHW1W7dZEnInTVwXmNuQET0ffddPXFRt5sT6tdtZUwy5X224IheG9w8sH4ysCgmlkgnY0gmlwhKwS1CKKbXVsdGlhZGRyc5YACASsEtQiBjsnAAoErBLUIgY7KN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDWGYB7HYSwnvB4IiXXl-Xq8uScBDMRxjnDYBSSugtwViDdGNwgjsng3VkcII7KYV3YWt1Mgk --lightpushnode=/ip4/172.18.212.34/tcp/15143/p2p/16Uiu2HAmJc4ShrBnCEEnTnXw2DVeXSM9c63ZHpELS8Fk8UHWUrhV --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.91.105 waku db59b5299919d13d35669210422c9184cf3e0c1bd87e2473701e528e6c2762ff
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID db59b5299919. Setting up logs at ./log/docker/lightpush_node1_2024-11-04_04-10-58__5b2503bc-5797-4751-9e19-9bbbfa478c63__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 48130
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48130/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48130/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.91.105/tcp/48131/p2p/16Uiu2HAmQoP98QjtHX94JVNRneKWsxZ2zPLEy9butpw4uRYzKJwH","/ip4/172.18.91.105/tcp/48132/ws/p2p/16Uiu2HAmQoP98QjtHX94JVNRneKWsxZ2zPLEy9butpw4uRYzKJwH"],"enrUri":"enr:-L24QAuXwgHehAk0vX8WNoiFJVzDZRx6tvn774cy1NaEgUn2KFC6gS5ze-DgshHYY3nqst3QFdzKXYuVL005rT1AeLICgmlkgnY0gmlwhKwSW2mKbXVsdGlhZGRyc5YACASsEltpBrwDAAoErBJbaQa8BN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDtHKon8uNJyVAu_9UmmprXyGcnMwkH0U-2p3IPx3_9HCDdGNwgrwDg3VkcIK8BYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48130/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.212.34/tcp/15143/p2p/16Uiu2HAmJc4ShrBnCEEnTnXw2DVeXSM9c63ZHpELS8Fk8UHWUrhV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48130/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.116.193/tcp/18140/p2p/16Uiu2HAmCbWYfJ174Vns9qDhVNMxg7f7P5HGPzY4rPMJmhSybcCx"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15142/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18139/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48130/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730693463770754304}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:48130/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1947281bc534
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 354f745db23f
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1947281bc534. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id db59b5299919
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 354f745db23f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.