[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2024-11-04_04-11-40__ee601ef1-327a-42ef-a90d-802a1b8787b0
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-04_04-11-40__ee601ef1-327a-42ef-a90d-802a1b8787b0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.195.213
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['19455', '19456', '19457', '19458', '19459']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 19455:19455 -p 19456:19456 -p 19457:19457 -p 19458:19458 -p 19459:19459 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19457 --rest-port=19455 --tcp-port=19456 --discv5-udp-port=19458 --rest-address=0.0.0.0 --nat=extip:172.18.195.213 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4162bd428b4b8baa5f8ece5fbba0fb12dad4e5d2a7714faedaafa6ce259e4dff --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19459 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.195.213 waku 358538b8afc1e19f7c2f0720a114a54dbe83cffc128c0969c34897cef4f5e9e3
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 879f111e2939. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 358538b8afc1. Setting up logs at ./log/docker/receiving_node1_2024-11-04_04-11-40__ee601ef1-327a-42ef-a90d-802a1b8787b0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 19455
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19455/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19455/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.195.213/tcp/19456/p2p/16Uiu2HAkw7uxXcBJ8bsHGGQYBiD6XA9BNcr427picDwkWosftmUk","/ip4/172.18.195.213/tcp/19457/ws/p2p/16Uiu2HAkw7uxXcBJ8bsHGGQYBiD6XA9BNcr427picDwkWosftmUk"],"enrUri":"enr:-L24QGB0m_dxaaP_y62BtA6wcR7Igmz9ChyjYVvPxPx9c56vFLytz1-NVVLZHjfh0Al2sbA8vzujYyq0cYt3avGr7QcCgmlkgnY0gmlwhKwSw9WKbXVsdGlhZGRyc5YACASsEsPVBkwAAAoErBLD1QZMAd0DgnJzhQADAQAAiXNlY3AyNTZrMaECGSq5d3BXaqVlOD_G6t9-aWKbEkrHLuH3a-nc06w2VxGDdGNwgkwAg3VkcIJMAoV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-04_04-11-40__ee601ef1-327a-42ef-a90d-802a1b8787b0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.162.16
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['3034', '3035', '3036', '3037', '3038']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 3034:3034 -p 3035:3035 -p 3036:3036 -p 3037:3037 -p 3038:3038 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3036 --rest-port=3034 --tcp-port=3035 --discv5-udp-port=3037 --rest-address=0.0.0.0 --nat=extip:172.18.162.16 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=db9e3ad8f521fbd79f1a0e3ff5d3bee2a7b220e0527417662fcff448eeaac1b4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3038 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.162.16 waku c325e8bb13dff829c0afc2c9a1bf6cb3d21a46a7ad6de027ab8cf8cc65fb52e0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c325e8bb13df. Setting up logs at ./log/docker/receiving_node2_2024-11-04_04-11-40__ee601ef1-327a-42ef-a90d-802a1b8787b0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 3034
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3034/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3034/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.162.16/tcp/3035/p2p/16Uiu2HAmRMJvVuNkyoE3tYnnaRgs1Km4aDEi6KarMhgkZr5Ch22i","/ip4/172.18.162.16/tcp/3036/ws/p2p/16Uiu2HAmRMJvVuNkyoE3tYnnaRgs1Km4aDEi6KarMhgkZr5Ch22i"],"enrUri":"enr:-L24QBLKBMTjVyxwkv3z4k_NVEAuDnRXGg5fnWTinJmrnBFZSjRAbVrxAqroceAp5bxoHhsNTwx4a_EsrDaXZRi5NQoCgmlkgnY0gmlwhKwSohCKbXVsdGlhZGRyc5YACASsEqIQBgvbAAoErBKiEAYL3N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDvKB5vftJQg6_NW25JgBdxtQ63AgcPDSQwcidguHmHTeDdGNwggvbg3VkcIIL3YV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3034/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.195.213/tcp/19456/p2p/16Uiu2HAkw7uxXcBJ8bsHGGQYBiD6XA9BNcr427picDwkWosftmUk"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-04_04-11-40__ee601ef1-327a-42ef-a90d-802a1b8787b0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.229.46
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['15805', '15806', '15807', '15808', '15809']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 15805:15805 -p 15806:15806 -p 15807:15807 -p 15808:15808 -p 15809:15809 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15807 --rest-port=15805 --tcp-port=15806 --discv5-udp-port=15808 --rest-address=0.0.0.0 --nat=extip:172.18.229.46 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ddd451ebdffcfb3cdd72b7eaebeaffdb28af3eaf78bf76aaabae777589d735d5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15809 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QGB0m_dxaaP_y62BtA6wcR7Igmz9ChyjYVvPxPx9c56vFLytz1-NVVLZHjfh0Al2sbA8vzujYyq0cYt3avGr7QcCgmlkgnY0gmlwhKwSw9WKbXVsdGlhZGRyc5YACASsEsPVBkwAAAoErBLD1QZMAd0DgnJzhQADAQAAiXNlY3AyNTZrMaECGSq5d3BXaqVlOD_G6t9-aWKbEkrHLuH3a-nc06w2VxGDdGNwgkwAg3VkcIJMAoV3YWt1Mgk --lightpushnode=/ip4/172.18.195.213/tcp/19456/p2p/16Uiu2HAkw7uxXcBJ8bsHGGQYBiD6XA9BNcr427picDwkWosftmUk --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.229.46 waku 3fcbfe61c54961573daa66b7fe3472451d087753015e23d72a4b4c9db561bec2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3fcbfe61c549. Setting up logs at ./log/docker/lightpush_node1_2024-11-04_04-11-40__ee601ef1-327a-42ef-a90d-802a1b8787b0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 15805
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15805/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15805/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.229.46/tcp/15806/p2p/16Uiu2HAmPiRMM1biPTXN6vVBkdRs8oqbeZHuFQqNWL4rATGRtery","/ip4/172.18.229.46/tcp/15807/ws/p2p/16Uiu2HAmPiRMM1biPTXN6vVBkdRs8oqbeZHuFQqNWL4rATGRtery"],"enrUri":"enr:-L24QBaUpnKN18N7qgmw6qWff8WrMLBpQiCiflh3Qp_Pg3EKb-9UW50lbkvnyxwD6OMEnlqZ3u-cKhcrLWBADyZIp2gCgmlkgnY0gmlwhKwS5S6KbXVsdGlhZGRyc5YACASsEuUuBj2-AAoErBLlLgY9v90DgnJzhQADAQAAiXNlY3AyNTZrMaEDpFGROm8J9RGuKx8LxtiScUdSR8_CKhUKIqpue8DYCV6DdGNwgj2-g3VkcII9wIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15805/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.195.213/tcp/19456/p2p/16Uiu2HAkw7uxXcBJ8bsHGGQYBiD6XA9BNcr427picDwkWosftmUk"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15805/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.162.16/tcp/3035/p2p/16Uiu2HAmRMJvVuNkyoE3tYnnaRgs1Km4aDEi6KarMhgkZr5Ch22i"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19455/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3034/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15805/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730693505823361024, "extraField": "extraValue"}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:15805/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 358538b8afc1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c325e8bb13df
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 358538b8afc1. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3fcbfe61c549
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c325e8bb13df. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.