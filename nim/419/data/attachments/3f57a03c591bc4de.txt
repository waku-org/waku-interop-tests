[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-11-04_04-12-22__19bac3b8-90bc-462f-8340-b94e3b67dbaa
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-04_04-12-22__19bac3b8-90bc-462f-8340-b94e3b67dbaa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.201.142
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['18924', '18925', '18926', '18927', '18928']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 18924:18924 -p 18925:18925 -p 18926:18926 -p 18927:18927 -p 18928:18928 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18926 --rest-port=18924 --tcp-port=18925 --discv5-udp-port=18927 --rest-address=0.0.0.0 --nat=extip:172.18.201.142 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bf4ab7e4f9fd05197fa4f36cb2dbf4e5a55313af32c56cf99d2392cd373275cd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18928 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.201.142 waku 003d0e67e01119abbaa8d9c7045e3906e22b5c06f2d424930db199c8b6bad1d7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 003d0e67e011. Setting up logs at ./log/docker/receiving_node1_2024-11-04_04-12-22__19bac3b8-90bc-462f-8340-b94e3b67dbaa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 18924
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5fcbba090881. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18924/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18924/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.201.142/tcp/18925/p2p/16Uiu2HAkvqvjnCzwawhTHi9GvbpCkSLgnU8q8Pi5juzvRr7oE7Xq","/ip4/172.18.201.142/tcp/18926/ws/p2p/16Uiu2HAkvqvjnCzwawhTHi9GvbpCkSLgnU8q8Pi5juzvRr7oE7Xq"],"enrUri":"enr:-L24QFQTum_US9_sPJNgZTA6SpUigN-XgkzoWzt0DpRaKACjHo0Fbczuw9xAIizzI6SdiVZUrrUd3HDRT7nGG7ykhtwCgmlkgnY0gmlwhKwSyY6KbXVsdGlhZGRyc5YACASsEsmOBkntAAoErBLJjgZJ7t0DgnJzhQADAQAAiXNlY3AyNTZrMaECFRJQT13ZvHUjoQfNdit0Dm04cJhUOOd3dtImPB6K8byDdGNwgkntg3VkcIJJ74V3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-04_04-12-22__19bac3b8-90bc-462f-8340-b94e3b67dbaa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.184.153
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['54494', '54495', '54496', '54497', '54498']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 54494:54494 -p 54495:54495 -p 54496:54496 -p 54497:54497 -p 54498:54498 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54496 --rest-port=54494 --tcp-port=54495 --discv5-udp-port=54497 --rest-address=0.0.0.0 --nat=extip:172.18.184.153 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0e9ceb23dbec763d0d96db8cb432ad7fff8da44e6a03ad51effca7f88919da2b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54498 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.184.153 waku ece5a5d6181727e2c99134d754514edd8e8a9a5011ef751751e10ca47b58153a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ece5a5d61817. Setting up logs at ./log/docker/receiving_node2_2024-11-04_04-12-22__19bac3b8-90bc-462f-8340-b94e3b67dbaa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 54494
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54494/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54494/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.184.153/tcp/54495/p2p/16Uiu2HAmLcu3S4bcU1M4n1WXQN61gWGE3RtwmxUWitgVKH84RXGC","/ip4/172.18.184.153/tcp/54496/ws/p2p/16Uiu2HAmLcu3S4bcU1M4n1WXQN61gWGE3RtwmxUWitgVKH84RXGC"],"enrUri":"enr:-L24QBcJJK3y66BahaMzCf7W2WL2l9FysKusf_CFAEDpIDagNLs9f61bH-bYjqpeX8dfDTkp1U8hoRPpBVYXVr4WFpICgmlkgnY0gmlwhKwSuJmKbXVsdGlhZGRyc5YACASsEriZBtTfAAoErBK4mQbU4N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDdlRVCCCAT6y5oZrK2ks_E94rBdd0TlS_kiCREfhBlvmDdGNwgtTfg3VkcILU4YV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54494/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.201.142/tcp/18925/p2p/16Uiu2HAkvqvjnCzwawhTHi9GvbpCkSLgnU8q8Pi5juzvRr7oE7Xq"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-04_04-12-22__19bac3b8-90bc-462f-8340-b94e3b67dbaa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.212.92
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['14457', '14458', '14459', '14460', '14461']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 14457:14457 -p 14458:14458 -p 14459:14459 -p 14460:14460 -p 14461:14461 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14459 --rest-port=14457 --tcp-port=14458 --discv5-udp-port=14460 --rest-address=0.0.0.0 --nat=extip:172.18.212.92 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3b6d9d192ffbec7dcae0adf5f208dfecd9d596d6adff7d8c1d2921fdf71cdabc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14461 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFQTum_US9_sPJNgZTA6SpUigN-XgkzoWzt0DpRaKACjHo0Fbczuw9xAIizzI6SdiVZUrrUd3HDRT7nGG7ykhtwCgmlkgnY0gmlwhKwSyY6KbXVsdGlhZGRyc5YACASsEsmOBkntAAoErBLJjgZJ7t0DgnJzhQADAQAAiXNlY3AyNTZrMaECFRJQT13ZvHUjoQfNdit0Dm04cJhUOOd3dtImPB6K8byDdGNwgkntg3VkcIJJ74V3YWt1Mg0 --lightpushnode=/ip4/172.18.201.142/tcp/18925/p2p/16Uiu2HAkvqvjnCzwawhTHi9GvbpCkSLgnU8q8Pi5juzvRr7oE7Xq --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.212.92 waku 30d2cc4392256871a69f2581188a8cf0c4dde53965533f27fe095818fc730f59
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 30d2cc439225. Setting up logs at ./log/docker/lightpush_node1_2024-11-04_04-12-22__19bac3b8-90bc-462f-8340-b94e3b67dbaa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 14457
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14457/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14457/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.212.92/tcp/14458/p2p/16Uiu2HAmVBPc1TNCc9mDvbtybNyeNis5L8gbTktMoKSoVFLMXtuW","/ip4/172.18.212.92/tcp/14459/ws/p2p/16Uiu2HAmVBPc1TNCc9mDvbtybNyeNis5L8gbTktMoKSoVFLMXtuW"],"enrUri":"enr:-L24QP4vl82VjtHqcOxvskDS0JyyNPl3TzBGCEB4lpL00L_EHymqL04Mk8DN3gm2tu9YAuFKfpJCWbN4pMkh2RQ3AkUCgmlkgnY0gmlwhKwS1FyKbXVsdGlhZGRyc5YACASsEtRcBjh6AAoErBLUXAY4e90DgnJzhQADAQAAiXNlY3AyNTZrMaED9YS1TcItuvBDz3WTB_Uvjbn_MAywVq-7RCqPpOwUqGGDdGNwgjh6g3VkcII4fIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14457/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.201.142/tcp/18925/p2p/16Uiu2HAkvqvjnCzwawhTHi9GvbpCkSLgnU8q8Pi5juzvRr7oE7Xq"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14457/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.184.153/tcp/54495/p2p/16Uiu2HAmLcu3S4bcU1M4n1WXQN61gWGE3RtwmxUWitgVKH84RXGC"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18924/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54494/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14457/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730693547242435584}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18924/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1730693547242435584,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54494/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1730693547242435584,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 003d0e67e011
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ece5a5d61817
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 003d0e67e011. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 30d2cc439225
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ece5a5d61817. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.