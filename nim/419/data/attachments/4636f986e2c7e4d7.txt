[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_invalid_request_id with id: 2024-11-04_04-08-18__c029d798-a8ea-45d4-a02d-cc6220a3c6e0
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-04_04-08-18__c029d798-a8ea-45d4-a02d-cc6220a3c6e0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.201.46
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['47792', '47793', '47794', '47795', '47796']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 47792:47792 -p 47793:47793 -p 47794:47794 -p 47795:47795 -p 47796:47796 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47794 --rest-port=47792 --tcp-port=47793 --discv5-udp-port=47795 --rest-address=0.0.0.0 --nat=extip:172.18.201.46 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c5df5a0ec47102efdd2a2a5507e2bab211aa7a173f0feeacb6be79583adbca49 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47796 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.201.46 waku 2569188a65005227e9f4dede63bd1ee89bb392d8d13b0497bd0d6c54cb83d201
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f6156da37be8. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2569188a6500. Setting up logs at ./log/docker/node1_2024-11-04_04-08-18__c029d798-a8ea-45d4-a02d-cc6220a3c6e0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 47792
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47792/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47792/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.201.46/tcp/47793/p2p/16Uiu2HAmLmEfocbB9kxVAEFtDszgzFUC73XtB67pWZ8Kq2G9iPkg","/ip4/172.18.201.46/tcp/47794/ws/p2p/16Uiu2HAmLmEfocbB9kxVAEFtDszgzFUC73XtB67pWZ8Kq2G9iPkg"],"enrUri":"enr:-L24QGP5_2Z1DL-N--DCJYpv_q2gyag5e24huIKPwwkcu7PiWg0hdw-PYV9l5-SYl319zpBH7jaNjOY3xIX4fQN6NwwCgmlkgnY0gmlwhKwSyS6KbXVsdGlhZGRyc5YACASsEskuBrqxAAoErBLJLga6st0DgnJzhQADAQAAiXNlY3AyNTZrMaEDeHcrylgP3FHu4s-lAwpo7Jyz2rMebSryQWFGzhO-hoWDdGNwgrqxg3VkcIK6s4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-04_04-08-18__c029d798-a8ea-45d4-a02d-cc6220a3c6e0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.181.178
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['13216', '13217', '13218', '13219', '13220']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 13216:13216 -p 13217:13217 -p 13218:13218 -p 13219:13219 -p 13220:13220 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13218 --rest-port=13216 --tcp-port=13217 --discv5-udp-port=13219 --rest-address=0.0.0.0 --nat=extip:172.18.181.178 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3fc8cd2427edc4e072cafdaf6b4fb08d61c29aeb8ac7e7f1c7accbca2fa05b76 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13220 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QGP5_2Z1DL-N--DCJYpv_q2gyag5e24huIKPwwkcu7PiWg0hdw-PYV9l5-SYl319zpBH7jaNjOY3xIX4fQN6NwwCgmlkgnY0gmlwhKwSyS6KbXVsdGlhZGRyc5YACASsEskuBrqxAAoErBLJLga6st0DgnJzhQADAQAAiXNlY3AyNTZrMaEDeHcrylgP3FHu4s-lAwpo7Jyz2rMebSryQWFGzhO-hoWDdGNwgrqxg3VkcIK6s4V3YWt1MgU --filternode=/ip4/172.18.201.46/tcp/47793/p2p/16Uiu2HAmLmEfocbB9kxVAEFtDszgzFUC73XtB67pWZ8Kq2G9iPkg
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.181.178 waku 8df8c6a19866d7e4ce3fa92a117937972b9b0c42cb1cad6ae49a909e1eedc75e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8df8c6a19866. Setting up logs at ./log/docker/node2_2024-11-04_04-08-18__c029d798-a8ea-45d4-a02d-cc6220a3c6e0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 13216
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13216/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13216/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.181.178/tcp/13217/p2p/16Uiu2HAmJPPDFepYdnLyJxJPRdJyJ2KFZieieHMCd9L1DLiVVgvB","/ip4/172.18.181.178/tcp/13218/ws/p2p/16Uiu2HAmJPPDFepYdnLyJxJPRdJyJ2KFZieieHMCd9L1DLiVVgvB"],"enrUri":"enr:-L24QAmamW4NDe4-rb7RDUqctgWKw1qhJdkPnkV8lxk67wribr8R9raUp4EOX8TuTqFlN7pMM7PqHShS2b54L763BnoCgmlkgnY0gmlwhKwStbKKbXVsdGlhZGRyc5YACASsErWyBjOhAAoErBK1sgYzot0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVSatmbBNVGw-xhkj2HYGz_Lar-ZtX0w3KQXxuq72QAiDdGNwgjOhg3VkcIIzo4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13216/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.201.46/tcp/47793/p2p/16Uiu2HAmLmEfocbB9kxVAEFtDszgzFUC73XtB67pWZ8Kq2G9iPkg"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47792/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13216/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "4288cb01-4be5-4c2b-a2e1-0c987370e256", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"4288cb01-4be5-4c2b-a2e1-0c987370e256","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:13216/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13216/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2569188a6500
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 8df8c6a19866
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2569188a6500. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.