[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_relay_and_store__peer_neither_relay_nor_store with id: 2025-01-22_04-07-09__7afcec22-90b1-4931-aa41-c8424e91edee
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-22_04-07-09__7afcec22-90b1-4931-aa41-c8424e91edee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.155.234
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37667', '37668', '37669', '37670', '37671']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37667:37667 -p 37668:37668 -p 37669:37669 -p 37670:37670 -p 37671:37671 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37669 --rest-port=37667 --tcp-port=37668 --discv5-udp-port=37670 --rest-address=0.0.0.0 --nat=extip:172.18.155.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fe2eb9c009c1c47a786980bbdbde1799ac10265ae5eeb9cdefe24faed65641a9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37671 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.155.234 waku 594c6d49bff43476265876486be4137eba2761df898ef87eac696d687d60254c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 594c6d49bff4. Setting up logs at ./log/docker/publishing_node1_2025-01-22_04-07-09__7afcec22-90b1-4931-aa41-c8424e91edee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 37667
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container afb94e8264dd. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37667/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37667/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.155.234/tcp/37668/p2p/16Uiu2HAmS68GACAmGLSAftc5PFS1DKZdR1jMkE3q3x4gJ3SUem6W","/ip4/172.18.155.234/tcp/37669/ws/p2p/16Uiu2HAmS68GACAmGLSAftc5PFS1DKZdR1jMkE3q3x4gJ3SUem6W"],"enrUri":"enr:-L24QGUXrLKQTP52AEhwyGtco8jdcB9Tar3coGGit5cPmuLuTOEb3ghXWpatdbtu4owkjNOyLSekC67yUkAFT_hQkz4CgmlkgnY0gmlwhKwSm-qKbXVsdGlhZGRyc5YACASsEpvqBpMkAAoErBKb6gaTJd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDx5hlWEpKxs1OhNZaxhFCJB_IEjeYVAuwpaovNWKcCIeDdGNwgpMkg3VkcIKTJoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-22_04-07-09__7afcec22-90b1-4931-aa41-c8424e91edee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.202.170
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['28610', '28611', '28612', '28613', '28614']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 28610:28610 -p 28611:28611 -p 28612:28612 -p 28613:28613 -p 28614:28614 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28612 --rest-port=28610 --tcp-port=28611 --discv5-udp-port=28613 --rest-address=0.0.0.0 --nat=extip:172.18.202.170 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cea550dfad2e51c77ff6a691c8e2d0b7ccbff11bff14dcf44445acfc54f28d0a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28614 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QGUXrLKQTP52AEhwyGtco8jdcB9Tar3coGGit5cPmuLuTOEb3ghXWpatdbtu4owkjNOyLSekC67yUkAFT_hQkz4CgmlkgnY0gmlwhKwSm-qKbXVsdGlhZGRyc5YACASsEpvqBpMkAAoErBKb6gaTJd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDx5hlWEpKxs1OhNZaxhFCJB_IEjeYVAuwpaovNWKcCIeDdGNwgpMkg3VkcIKTJoV3YWt1MgM --storenode=/ip4/172.18.155.234/tcp/37668/p2p/16Uiu2HAmS68GACAmGLSAftc5PFS1DKZdR1jMkE3q3x4gJ3SUem6W --store=false --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.202.170 waku e8d9c8a86942332c8242e407b34b2c810f29d8235b4484da981f5ebea1fb183e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e8d9c8a86942. Setting up logs at ./log/docker/store_node1_2025-01-22_04-07-09__7afcec22-90b1-4931-aa41-c8424e91edee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 28610
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28610/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28610/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.202.170/tcp/28611/p2p/16Uiu2HAmMEkfqfXMxEBpVrjrSqZTo8FuZs3H83szmwKjtG71RW5K","/ip4/172.18.202.170/tcp/28612/ws/p2p/16Uiu2HAmMEkfqfXMxEBpVrjrSqZTo8FuZs3H83szmwKjtG71RW5K"],"enrUri":"enr:-L24QKKLe5japBCDc6t54dCf15mzPdOArj5Iwbjdgz25Jw-NfFZyQG-21r38sWyyXD93A3G6e4BM68UC0iGvf3q2Jr0CgmlkgnY0gmlwhKwSyqqKbXVsdGlhZGRyc5YACASsEsqqBm_DAAoErBLKqgZvxN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDf4PGUqcqwfVTqmVlC6DS0pK7CPlCxjlDtU0CtDcers6DdGNwgm_Dg3VkcIJvxYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28610/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.155.234/tcp/37668/p2p/16Uiu2HAmS68GACAmGLSAftc5PFS1DKZdR1jMkE3q3x4gJ3SUem6W"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37667/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37667/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37667/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"YPowW3iGIWC8d/zfw3Bh3k3UfWISXHkG/tE10RcxzUg="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28610/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"d31b35ab4bef87596abc","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"YPowW3iGIWC8d/zfw3Bh3k3UfWISXHkG/tE10RcxzUg="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 594c6d49bff4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e8d9c8a86942
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 594c6d49bff4. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.