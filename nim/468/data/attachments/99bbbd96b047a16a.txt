[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_time_filter_small_timestamp with id: 2024-11-28_04-39-05__36772723-b2e3-4334-8a30-366fef7797f6
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-11-28_04-39-05__36772723-b2e3-4334-8a30-366fef7797f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.252.219
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['25674', '25675', '25676', '25677', '25678']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 25674:25674 -p 25675:25675 -p 25676:25676 -p 25677:25677 -p 25678:25678 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25676 --rest-port=25674 --tcp-port=25675 --discv5-udp-port=25677 --rest-address=0.0.0.0 --nat=extip:172.18.252.219 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c1de06bdef22fef747de0785fca3cbecf3293abac64b9f15e6bcc96f5323d9bd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25678 --metrics-logging=true --store=true --relay=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5320d119a3d2. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.252.219 waku 0c618290061dc7c7ed4af91bfc62e640f203dfebfff6fcdc2125e759d80bf7fe
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0c618290061d. Setting up logs at ./log/docker/publishing_node1_2024-11-28_04-39-05__36772723-b2e3-4334-8a30-366fef7797f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 25674
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25674/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25674/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.252.219/tcp/25675/p2p/16Uiu2HAkw9VqtF4Bm84o6s88MgVqPQjLYyNCMaLcqTmLkneR66FV","/ip4/172.18.252.219/tcp/25676/ws/p2p/16Uiu2HAkw9VqtF4Bm84o6s88MgVqPQjLYyNCMaLcqTmLkneR66FV"],"enrUri":"enr:-L24QOrz07N7TjiD725Q-7mPNCOf-xp0Y_O4S5bO7KYn9t1Xcn0jBQjZHVWDROrAXM7susGszEQzXOrhGsVPn7LfV0ICgmlkgnY0gmlwhKwS_NuKbXVsdGlhZGRyc5YACASsEvzbBmRLAAoErBL82wZkTN0DgnJzhQADAQAAiXNlY3AyNTZrMaECGZKeo3652btVSXbCKwReGoR5F6aE7IV4zDi5e6iP4SSDdGNwgmRLg3VkcIJkTYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-11-28_04-39-05__36772723-b2e3-4334-8a30-366fef7797f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.25.152
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['23450', '23451', '23452', '23453', '23454']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 23450:23450 -p 23451:23451 -p 23452:23452 -p 23453:23453 -p 23454:23454 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23452 --rest-port=23450 --tcp-port=23451 --discv5-udp-port=23453 --rest-address=0.0.0.0 --nat=extip:172.18.25.152 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=547966efb4ebb420fa214ddc4dffe96f1fe6ce0d2f500e5dcbdb3b8c1cf5fd1b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23454 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QOrz07N7TjiD725Q-7mPNCOf-xp0Y_O4S5bO7KYn9t1Xcn0jBQjZHVWDROrAXM7susGszEQzXOrhGsVPn7LfV0ICgmlkgnY0gmlwhKwS_NuKbXVsdGlhZGRyc5YACASsEvzbBmRLAAoErBL82wZkTN0DgnJzhQADAQAAiXNlY3AyNTZrMaECGZKeo3652btVSXbCKwReGoR5F6aE7IV4zDi5e6iP4SSDdGNwgmRLg3VkcIJkTYV3YWt1MgM --storenode=/ip4/172.18.252.219/tcp/25675/p2p/16Uiu2HAkw9VqtF4Bm84o6s88MgVqPQjLYyNCMaLcqTmLkneR66FV --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.25.152 waku c12de3ebd96ee695797eeeb09695ce75e99ce0a34f8287699026862bc37d89b7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c12de3ebd96e. Setting up logs at ./log/docker/store_node1_2024-11-28_04-39-05__36772723-b2e3-4334-8a30-366fef7797f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 23450
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23450/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23450/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.25.152/tcp/23451/p2p/16Uiu2HAkzpyixhrVrqckUitLVEemM98UzkGxtMnyXDfiSf1unhd9","/ip4/172.18.25.152/tcp/23452/ws/p2p/16Uiu2HAkzpyixhrVrqckUitLVEemM98UzkGxtMnyXDfiSf1unhd9"],"enrUri":"enr:-L24QM9fvC_JQ_0K8RRIXDtfAmUWmRVdhD3WM-3BY9CXehYVO7jWwXj6PPuKdyHuNAICOBuqPw8sWDuaDRDuBNWVUF4CgmlkgnY0gmlwhKwSGZiKbXVsdGlhZGRyc5YACASsEhmYBlubAAoErBIZmAZbnN0DgnJzhQADAQAAiXNlY3AyNTZrMaECUELbVBRX7XQMkARfGuQczQ7_V7Jp23dLXYVM1UHP7xiDdGNwglubg3VkcIJbnYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23450/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.252.219/tcp/25675/p2p/16Uiu2HAkw9VqtF4Bm84o6s88MgVqPQjLYyNCMaLcqTmLkneR66FV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25674/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23450/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25674/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25674/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25674/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25674/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25674/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25674/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:218 inquering stored messages with start time 1732768755083955968 after end time 1732768768083970049
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25674/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1732768755083955968&endTime=1732768768083970049&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"2CCqF4PX+nIF4ntVrze3/88pB+HXMob4sdAscvqojE8=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732768755083955968,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"u0zAJZ9/kAyJGf0vaqnxKyuH6abVcurXjWa9xNJH1ng=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732768757083962880,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"rMjeEeX3uiFgO0LRAhZsLr0UIzIWN97KnEo1wBaPmPg=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732768757983964928,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"iYVU8qFwYRB16QyxXL+9IOZtEVjT00XSrAiXaS50ubo=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732768758183967232,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"TvUgKS/XQGpXLvvOQsU/AX/VlNjhLMFmaUEQl5TaF60=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732768760083969024,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"ORf9Dhh9+r/eEIufEbTU8oDSR2wsPZbEJoLkzXAx9xk=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732768768083970048,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:221 number of messages stored for start time 1732768755083955968 and end time = 1732768768083970049 is  6
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23450/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1732768755083955968&endTime=1732768768083970049&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"2CCqF4PX+nIF4ntVrze3/88pB+HXMob4sdAscvqojE8=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732768755083955968,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"u0zAJZ9/kAyJGf0vaqnxKyuH6abVcurXjWa9xNJH1ng=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732768757083962880,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"rMjeEeX3uiFgO0LRAhZsLr0UIzIWN97KnEo1wBaPmPg=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732768757983964928,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"iYVU8qFwYRB16QyxXL+9IOZtEVjT00XSrAiXaS50ubo=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732768758183967232,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"TvUgKS/XQGpXLvvOQsU/AX/VlNjhLMFmaUEQl5TaF60=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732768760083969024,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"ORf9Dhh9+r/eEIufEbTU8oDSR2wsPZbEJoLkzXAx9xk=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732768768083970048,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:221 number of messages stored for start time 1732768755083955968 and end time = 1732768768083970049 is  6
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0c618290061d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c12de3ebd96e
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0c618290061d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.