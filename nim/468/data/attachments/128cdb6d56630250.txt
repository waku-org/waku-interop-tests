[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_relaying_node with id: 2024-11-28_04-03-01__37c89631-fa4c-452d-8516-4801a60d036d
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-28_04-03-01__37c89631-fa4c-452d-8516-4801a60d036d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-28_04-03-01__37c89631-fa4c-452d-8516-4801a60d036d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-28_04-03-01__37c89631-fa4c-452d-8516-4801a60d036d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.50.82
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['56035', '56036', '56037', '56038', '56039']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 56035:56035 -p 56036:56036 -p 56037:56037 -p 56038:56038 -p 56039:56039 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56037 --rest-port=56035 --tcp-port=56036 --discv5-udp-port=56038 --rest-address=0.0.0.0 --nat=extip:172.18.50.82 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bd4fd4a9e85edad0c632cc80c795adee87da2efefa6b8e1dcbafcb1a7e4d632c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56039 --metrics-logging=true --filter=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.50.82 waku a526669c676ee4ed8d597c3a9f55925de81b59edb10e3e620ab5a8b351772d44
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a526669c676e. Setting up logs at ./log/docker/node1_2024-11-28_04-03-01__37c89631-fa4c-452d-8516-4801a60d036d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 56035
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d4907336997a. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56035/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56035/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.50.82/tcp/56036/p2p/16Uiu2HAm3bU6KVYBscVpD9gxMQvQSqiStHbXRUwFP1KPxad8kYJa","/ip4/172.18.50.82/tcp/56037/ws/p2p/16Uiu2HAm3bU6KVYBscVpD9gxMQvQSqiStHbXRUwFP1KPxad8kYJa"],"enrUri":"enr:-L24QAc8L9UlpJahuchdfmiNzFeeb5vYGZhNOVmumbvHxtUnIwJF2izz_40iE13Kojo2gzL3zFoOPdDMKe5FIt-e2r8CgmlkgnY0gmlwhKwSMlKKbXVsdGlhZGRyc5YACASsEjJSBtrkAAoErBIyUgba5d0DgnJzhQADAQAAiXNlY3AyNTZrMaECeV_cvqxvpWSdYP61AqCHAM8fAjslO__FPra82_kOr7-DdGNwgtrkg3VkcILa5oV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.200.177
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['59485', '59486', '59487', '59488', '59489']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 59485:59485 -p 59486:59486 -p 59487:59487 -p 59488:59488 -p 59489:59489 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59487 --rest-port=59485 --tcp-port=59486 --discv5-udp-port=59488 --rest-address=0.0.0.0 --nat=extip:172.18.200.177 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aae4aed7bf1c1ce0ef9fafb2284f942c49f0f3e4cb18ceffa9aa7cfdf0bb0013 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59489 --metrics-logging=true --filter=true --relay=true --discv5-bootstrap-node=enr:-L24QAc8L9UlpJahuchdfmiNzFeeb5vYGZhNOVmumbvHxtUnIwJF2izz_40iE13Kojo2gzL3zFoOPdDMKe5FIt-e2r8CgmlkgnY0gmlwhKwSMlKKbXVsdGlhZGRyc5YACASsEjJSBtrkAAoErBIyUgba5d0DgnJzhQADAQAAiXNlY3AyNTZrMaECeV_cvqxvpWSdYP61AqCHAM8fAjslO__FPra82_kOr7-DdGNwgtrkg3VkcILa5oV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.200.177 waku c8bcc0f361da3ee91705f84b14490346ce9a9127f86b871f9035c8a5b40f22af
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c8bcc0f361da. Setting up logs at ./log/docker/node2_2024-11-28_04-03-01__37c89631-fa4c-452d-8516-4801a60d036d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 59485
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59485/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59485/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.200.177/tcp/59486/p2p/16Uiu2HAkvAZCWXUkLyRHnNctKztpxtqCUEN8hGjbrXkvcCmidRZ1","/ip4/172.18.200.177/tcp/59487/ws/p2p/16Uiu2HAkvAZCWXUkLyRHnNctKztpxtqCUEN8hGjbrXkvcCmidRZ1"],"enrUri":"enr:-L24QMqeQcQ0iXu9RuSKI0csVSrNoyv82kJrkXXY3wNVNU75b4U5KICEPmnsHEzKxJcxZ57JXscuORQ7sqE54_OeAqQCgmlkgnY0gmlwhKwSyLGKbXVsdGlhZGRyc5YACASsEsixBuheAAoErBLIsQboX90DgnJzhQADAQAAiXNlY3AyNTZrMaECCvxOyfNWYYn5PF2ibnyGXHmw6w1pLrAUwmLrk-HbJpCDdGNwguheg3VkcILoYIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.49.9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['48538', '48539', '48540', '48541', '48542']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 48538:48538 -p 48539:48539 -p 48540:48540 -p 48541:48541 -p 48542:48542 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48540 --rest-port=48538 --tcp-port=48539 --discv5-udp-port=48541 --rest-address=0.0.0.0 --nat=extip:172.18.49.9 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8800c518beffab6cf95117ad20b2afb26a70ba0b4edf45bf3a6d0073c39eec4a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48542 --metrics-logging=true --relay=false --filternode=/ip4/172.18.200.177/tcp/59486/p2p/16Uiu2HAkvAZCWXUkLyRHnNctKztpxtqCUEN8hGjbrXkvcCmidRZ1 --discv5-bootstrap-node=enr:-L24QMqeQcQ0iXu9RuSKI0csVSrNoyv82kJrkXXY3wNVNU75b4U5KICEPmnsHEzKxJcxZ57JXscuORQ7sqE54_OeAqQCgmlkgnY0gmlwhKwSyLGKbXVsdGlhZGRyc5YACASsEsixBuheAAoErBLIsQboX90DgnJzhQADAQAAiXNlY3AyNTZrMaECCvxOyfNWYYn5PF2ibnyGXHmw6w1pLrAUwmLrk-HbJpCDdGNwguheg3VkcILoYIV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.49.9 waku 1456b08fe80a2be79a55be43d13907931e4f4ec1e5225f6835f80c5335931f1f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1456b08fe80a. Setting up logs at ./log/docker/node3_2024-11-28_04-03-01__37c89631-fa4c-452d-8516-4801a60d036d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 48538
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48538/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48538/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.49.9/tcp/48539/p2p/16Uiu2HAmGsCUsiQHVsSLuHbZKpxsMbADJU3yq37jsjrLQadwmuyD","/ip4/172.18.49.9/tcp/48540/ws/p2p/16Uiu2HAmGsCUsiQHVsSLuHbZKpxsMbADJU3yq37jsjrLQadwmuyD"],"enrUri":"enr:-L24QOH51RR22fq4_f15QA6176hyNDToKJwnWsJjpigSemyxEmdd9i5yaRreu9ko71_slomylJIGEExt-TJvNkymeb8CgmlkgnY0gmlwhKwSMQmKbXVsdGlhZGRyc5YACASsEjEJBr2bAAoErBIxCQa9nN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDPo9vCRdxLkBXl_-TNMNv-n7BFjQeTS74u2TJLVtK54yDdGNwgr2bg3VkcIK9nYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56035/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59485/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48538/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56035/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.200.177/tcp/59486/p2p/16Uiu2HAkvAZCWXUkLyRHnNctKztpxtqCUEN8hGjbrXkvcCmidRZ1","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59485/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.50.82/tcp/56036/p2p/16Uiu2HAm3bU6KVYBscVpD9gxMQvQSqiStHbXRUwFP1KPxad8kYJa","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.49.9/tcp/48539/p2p/16Uiu2HAmGsCUsiQHVsSLuHbZKpxsMbADJU3yq37jsjrLQadwmuyD","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48538/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.200.177/tcp/59486/p2p/16Uiu2HAkvAZCWXUkLyRHnNctKztpxtqCUEN8hGjbrXkvcCmidRZ1","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56035/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48538/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1732766616576586752,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a526669c676e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c8bcc0f361da
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a526669c676e. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1456b08fe80a
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c8bcc0f361da. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.