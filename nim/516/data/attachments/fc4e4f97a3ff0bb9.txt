[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush with id: 2024-12-12_08-45-37__29dd00da-e021-465d-9b1e-39c6330309e1
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-12_08-45-37__29dd00da-e021-465d-9b1e-39c6330309e1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.57.82
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['56703', '56704', '56705', '56706', '56707']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 56703:56703 -p 56704:56704 -p 56705:56705 -p 56706:56706 -p 56707:56707 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56705 --rest-port=56703 --tcp-port=56704 --discv5-udp-port=56706 --rest-address=0.0.0.0 --nat=extip:172.18.57.82 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=81206df67d024ccfc416a1da0ee9ca82288a7bc33d6b5f8b7d0f5f860aae46ab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56707 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.57.82 waku 2b2f3a8c4015d05c44b5cb5f0c7f0b1b6a38b8f9338f1ce94009e591016276e5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2b2f3a8c4015. Setting up logs at ./log/docker/node1_2024-12-12_08-45-37__29dd00da-e021-465d-9b1e-39c6330309e1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 56703
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6676a0a799fe. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56703/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56703/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.57.82/tcp/56704/p2p/16Uiu2HAm41XVtG2mkvcJuKnREuMvLz8YtgYmEmPmTQrhvifwTEUa","/ip4/172.18.57.82/tcp/56705/ws/p2p/16Uiu2HAm41XVtG2mkvcJuKnREuMvLz8YtgYmEmPmTQrhvifwTEUa"],"enrUri":"enr:-L24QKVtbmTcAhbhp-589Tk1apZrp4jY8wt94B5dTLIj_DkVdkTTDs3QkQ72PVzcwTBu4Hxo3geAhQ-TUd6_qDti1eICgmlkgnY0gmlwhKwSOVKKbXVsdGlhZGRyc5YACASsEjlSBt2AAAoErBI5Ugbdgd0DgnJzhQADAQAAiXNlY3AyNTZrMaECf4mnOLda7T0Gk50vWXMeuIHlKxH37EAgTaSMVPI-SwODdGNwgt2Ag3VkcILdgoV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-12_08-45-37__29dd00da-e021-465d-9b1e-39c6330309e1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.22.11
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['54167', '54168', '54169', '54170', '54171']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 54167:54167 -p 54168:54168 -p 54169:54169 -p 54170:54170 -p 54171:54171 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54169 --rest-port=54167 --tcp-port=54168 --discv5-udp-port=54170 --rest-address=0.0.0.0 --nat=extip:172.18.22.11 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4f648d256cad82cb5c8f84d5deb791a25eddcabcca58ecbe2dceffaa8fe7a03d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54171 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QKVtbmTcAhbhp-589Tk1apZrp4jY8wt94B5dTLIj_DkVdkTTDs3QkQ72PVzcwTBu4Hxo3geAhQ-TUd6_qDti1eICgmlkgnY0gmlwhKwSOVKKbXVsdGlhZGRyc5YACASsEjlSBt2AAAoErBI5Ugbdgd0DgnJzhQADAQAAiXNlY3AyNTZrMaECf4mnOLda7T0Gk50vWXMeuIHlKxH37EAgTaSMVPI-SwODdGNwgt2Ag3VkcILdgoV3YWt1Mgk
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.22.11 waku bf09e25909f0eaeccc9af1576219805bb732184e8b8a9c8614191fa62cccf7d5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID bf09e25909f0. Setting up logs at ./log/docker/node1_2024-12-12_08-45-37__29dd00da-e021-465d-9b1e-39c6330309e1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 54167
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54167/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54167/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.22.11/tcp/54168/p2p/16Uiu2HAmU7WdWR6PR25p4UAeEFG7zcSSBwFm8oBF9J5nsmi5W4Df","/ip4/172.18.22.11/tcp/54169/ws/p2p/16Uiu2HAmU7WdWR6PR25p4UAeEFG7zcSSBwFm8oBF9J5nsmi5W4Df"],"enrUri":"enr:-L24QJ0nje5Kuyf3532viQSJdcKonEfb4m7azqWo6iRs347wMKGI2J7xt_tj3N9gysBY8RixzTZAUnEY_ZXbmtbjIv8CgmlkgnY0gmlwhKwSFguKbXVsdGlhZGRyc5YACASsEhYLBtOYAAoErBIWCwbTmd0DgnJzhQADAQAAiXNlY3AyNTZrMaED5aqkZ9ds3lD-sjdCVszKj9oPe99koTaQnqQKgblwJLKDdGNwgtOYg3VkcILTmoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-12_08-45-37__29dd00da-e021-465d-9b1e-39c6330309e1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.100.183
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['57083', '57084', '57085', '57086', '57087']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 57083:57083 -p 57084:57084 -p 57085:57085 -p 57086:57086 -p 57087:57087 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57085 --rest-port=57083 --tcp-port=57084 --discv5-udp-port=57086 --rest-address=0.0.0.0 --nat=extip:172.18.100.183 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e279c64df86ce63aece1effccfafb6c5cbf8e0992756b93e830cfac86cb3f13d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57087 --metrics-logging=true --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QKVtbmTcAhbhp-589Tk1apZrp4jY8wt94B5dTLIj_DkVdkTTDs3QkQ72PVzcwTBu4Hxo3geAhQ-TUd6_qDti1eICgmlkgnY0gmlwhKwSOVKKbXVsdGlhZGRyc5YACASsEjlSBt2AAAoErBI5Ugbdgd0DgnJzhQADAQAAiXNlY3AyNTZrMaECf4mnOLda7T0Gk50vWXMeuIHlKxH37EAgTaSMVPI-SwODdGNwgt2Ag3VkcILdgoV3YWt1Mgk --lightpushnode=/ip4/172.18.57.82/tcp/56704/p2p/16Uiu2HAm41XVtG2mkvcJuKnREuMvLz8YtgYmEmPmTQrhvifwTEUa
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.100.183 waku 0af08815bd81ccc469152f8c2e5e8fda422fb1fbb1140af9a546f1127a9b36d1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0af08815bd81. Setting up logs at ./log/docker/node1_2024-12-12_08-45-37__29dd00da-e021-465d-9b1e-39c6330309e1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 57083
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57083/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57083/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.100.183/tcp/57084/p2p/16Uiu2HAmHin8qQLyTEb9htWi6TWCGpLXSBqWF7aFsv8muuPGBsiv","/ip4/172.18.100.183/tcp/57085/ws/p2p/16Uiu2HAmHin8qQLyTEb9htWi6TWCGpLXSBqWF7aFsv8muuPGBsiv"],"enrUri":"enr:-L24QGYlDQTtYWBCX8wmmeUmNLf0WalOuaYbMYTOGSXz5Nmacko_LbnfGM-zduL6EBBzD9YD-lAfHGieXwjI1PnVnyoCgmlkgnY0gmlwhKwSZLeKbXVsdGlhZGRyc5YACASsEmS3Bt78AAoErBJktwbe_d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDS0LyVgS-36Zs-pOTXRoIPOZKWhlexj1zYEO886eDTMeDdGNwgt78g3VkcILe_oV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56703/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54167/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57083/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1733993141839561728}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1733993141839561728,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54167/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1733993141839561728,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2b2f3a8c4015
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id bf09e25909f0
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2b2f3a8c4015. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0af08815bd81
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container bf09e25909f0. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.