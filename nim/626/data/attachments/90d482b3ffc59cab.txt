[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_relay_receiving_node_not_connected_directly_to_relaying_node with id: 2025-01-24_04-03-14__37140c2e-9326-4cd9-96ee-a0a79c3a4c3f
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-24_04-03-14__37140c2e-9326-4cd9-96ee-a0a79c3a4c3f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-24_04-03-14__37140c2e-9326-4cd9-96ee-a0a79c3a4c3f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-24_04-03-14__37140c2e-9326-4cd9-96ee-a0a79c3a4c3f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:33 Network waku created
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.104.168
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['23612', '23613', '23614', '23615', '23616']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 23612:23612 -p 23613:23613 -p 23614:23614 -p 23615:23615 -p 23616:23616 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23614 --rest-port=23612 --tcp-port=23613 --discv5-udp-port=23615 --rest-address=0.0.0.0 --nat=extip:172.18.104.168 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d5ed3d3f3da8fdb729033befa02eb7ebfde34eca660e6ac70bddeacb0fa2a4fb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23616 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.104.168 waku 88b7fdeef9241f1de23f225e8b13e3692ce31b42123664b9bce020420a42c162
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 88b7fdeef924. Setting up logs at ./log/docker/node1_2025-01-24_04-03-14__37140c2e-9326-4cd9-96ee-a0a79c3a4c3f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 23612
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23612/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23612/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.168/tcp/23613/p2p/16Uiu2HAmCAi4S5qJTqUni9tVx8fCERk3zN3NZFUYotgZbNhBqcti","/ip4/172.18.104.168/tcp/23614/ws/p2p/16Uiu2HAmCAi4S5qJTqUni9tVx8fCERk3zN3NZFUYotgZbNhBqcti"],"enrUri":"enr:-L24QJNBY7Jw_IfdqI-2LQxSShE8gwuQVyKytoJ1meGcO8O_UN_WLd1f3tkFWNdxyg1tpGLCMr8V2rUT7Rs0dJTfIwgCgmlkgnY0gmlwhKwSaKiKbXVsdGlhZGRyc5YACASsEmioBlw9AAoErBJoqAZcPt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-MFRRcWpadLVU7HGqbOR5WEUBXjd05vZ187a558gjQODdGNwglw9g3VkcIJcP4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.211.77
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['56958', '56959', '56960', '56961', '56962']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 56958:56958 -p 56959:56959 -p 56960:56960 -p 56961:56961 -p 56962:56962 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56960 --rest-port=56958 --tcp-port=56959 --discv5-udp-port=56961 --rest-address=0.0.0.0 --nat=extip:172.18.211.77 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=57d084fbeeaf0ccb2efb9ddaeee2ce706fddd5434aaac8d4bddacdba0b6ba0ad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56962 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QJNBY7Jw_IfdqI-2LQxSShE8gwuQVyKytoJ1meGcO8O_UN_WLd1f3tkFWNdxyg1tpGLCMr8V2rUT7Rs0dJTfIwgCgmlkgnY0gmlwhKwSaKiKbXVsdGlhZGRyc5YACASsEmioBlw9AAoErBJoqAZcPt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-MFRRcWpadLVU7HGqbOR5WEUBXjd05vZ187a558gjQODdGNwglw9g3VkcIJcP4V3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.211.77 waku 63874d563565eed6c103fae0c90715998927cd93812d5573434bdf8ed72be704
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 63874d563565. Setting up logs at ./log/docker/node2_2025-01-24_04-03-14__37140c2e-9326-4cd9-96ee-a0a79c3a4c3f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 56958
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56958/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56958/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.211.77/tcp/56959/p2p/16Uiu2HAmAyFyvtYCNP1XZ1hyjtM2EsAJndh4i4JMkMETAEE5JCxY","/ip4/172.18.211.77/tcp/56960/ws/p2p/16Uiu2HAmAyFyvtYCNP1XZ1hyjtM2EsAJndh4i4JMkMETAEE5JCxY"],"enrUri":"enr:-L24QF3PlRCOKLDRq4pnIQaqO6fn8YMfBeI4rDwBYMZA3VuXYijD54ChSWt_WNZ4GVvnGYENYvQAXHvDr3rOPACN7EwCgmlkgnY0gmlwhKwS002KbXVsdGlhZGRyc5YACASsEtNNBt5_AAoErBLTTQbegN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC5vbBbEidEhvXHqtSP6322Wx0D5KxGGJdXX1M01pxyumDdGNwgt5_g3VkcILegYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.104.227
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['39324', '39325', '39326', '39327', '39328']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 39324:39324 -p 39325:39325 -p 39326:39326 -p 39327:39327 -p 39328:39328 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39326 --rest-port=39324 --tcp-port=39325 --discv5-udp-port=39327 --rest-address=0.0.0.0 --nat=extip:172.18.104.227 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b4b9cdbcc2e9d85d388b417519e7ecf4fbecb9a4faa05ccc40cbac4cbdb9da5d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39328 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QF3PlRCOKLDRq4pnIQaqO6fn8YMfBeI4rDwBYMZA3VuXYijD54ChSWt_WNZ4GVvnGYENYvQAXHvDr3rOPACN7EwCgmlkgnY0gmlwhKwS002KbXVsdGlhZGRyc5YACASsEtNNBt5_AAoErBLTTQbegN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC5vbBbEidEhvXHqtSP6322Wx0D5KxGGJdXX1M01pxyumDdGNwgt5_g3VkcILegYV3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.104.227 waku 5630bd9d2e7e94fcd5b13fc5fd497296a0ab9e2a3023121b15abe180d9381239
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5630bd9d2e7e. Setting up logs at ./log/docker/node3_2025-01-24_04-03-14__37140c2e-9326-4cd9-96ee-a0a79c3a4c3f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 39324
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39324/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39324/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.227/tcp/39325/p2p/16Uiu2HAm8WmvUoBFxX37gw8zoNXgTEB8u7ncfNjbytzpg6kHsM1h","/ip4/172.18.104.227/tcp/39326/ws/p2p/16Uiu2HAm8WmvUoBFxX37gw8zoNXgTEB8u7ncfNjbytzpg6kHsM1h"],"enrUri":"enr:-L24QHER_m5UOhB_TPr6pwYngmslB5hx5I5xyPK_MVJQyFjmJrDzwZYYD4qFZ2GGJsE4f84I8D9aQPLV5-hBJbmgdRwCgmlkgnY0gmlwhKwSaOOKbXVsdGlhZGRyc5YACASsEmjjBpmdAAoErBJo4waZnt0DgnJzhQADAQAAiXNlY3AyNTZrMaECwnaNwDVHgaNe51mRe6keiCPOLq1ZuGsGQHpjR3fQM2iDdGNwgpmdg3VkcIKZn4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23612/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56958/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39324/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23612/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.211.77/tcp/56959/p2p/16Uiu2HAmAyFyvtYCNP1XZ1hyjtM2EsAJndh4i4JMkMETAEE5JCxY","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56958/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.104.227/tcp/39325/p2p/16Uiu2HAm8WmvUoBFxX37gw8zoNXgTEB8u7ncfNjbytzpg6kHsM1h","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"},{"multiaddr":"/ip4/172.18.104.168/tcp/23613/p2p/16Uiu2HAmCAi4S5qJTqUni9tVx8fCERk3zN3NZFUYotgZbNhBqcti","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39324/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.211.77/tcp/56959/p2p/16Uiu2HAmAyFyvtYCNP1XZ1hyjtM2EsAJndh4i4JMkMETAEE5JCxY","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23612/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39324/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1737691430446317568,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 88b7fdeef924
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 63874d563565
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 88b7fdeef924. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5630bd9d2e7e
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 63874d563565. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.