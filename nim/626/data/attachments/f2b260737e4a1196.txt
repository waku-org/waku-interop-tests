[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_cant_publish_on_not_subscribed_shard with id: 2025-01-24_04-09-25__c094f590-ce57-423d-ab67-83cc8f8cb644
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-24_04-09-25__c094f590-ce57-423d-ab67-83cc8f8cb644__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.153.189
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['3144', '3145', '3146', '3147', '3148']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 3144:3144 -p 3145:3145 -p 3146:3146 -p 3147:3147 -p 3148:3148 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3146 --rest-port=3144 --tcp-port=3145 --discv5-udp-port=3147 --rest-address=0.0.0.0 --nat=extip:172.18.153.189 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=b8ddda755976efcfd1b52d5ca4de315fe7fe4fa9ddfcb369d90acf1dfe2fd69a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3148 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.153.189 waku 13ae64e7ee52ef8eba2307241cce5adfc5b8644fdfaf2698321ffd1c3a9ebbf4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 13ae64e7ee52. Setting up logs at ./log/docker/node1_2025-01-24_04-09-25__c094f590-ce57-423d-ab67-83cc8f8cb644__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 3144
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 309d65c479bb. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3144/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3144/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.153.189/tcp/3145/p2p/16Uiu2HAm2QUgHf8kbG8KmYr9Ci53wPL111BtgMRvcrzGvnerXm1Q","/ip4/172.18.153.189/tcp/3146/ws/p2p/16Uiu2HAm2QUgHf8kbG8KmYr9Ci53wPL111BtgMRvcrzGvnerXm1Q"],"enrUri":"enr:-L24QNByCFcIc2fDxnF8odtxf7Vl-aKXjrb4VTxIZobhsJ5Ea5dDsiWC0mO9iYeBp-FXPcAJ8jl5xrXI-atqJOlTSboCgmlkgnY0gmlwhKwSmb2KbXVsdGlhZGRyc5YACASsEpm9BgxJAAoErBKZvQYMSt0DgnJzhQACAQAAiXNlY3AyNTZrMaECZ7Ny2-YpJI8w9NY-Kmlzlg-KgttOxPftn7fG19hFveeDdGNwggxJg3VkcIIMS4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-24_04-09-25__c094f590-ce57-423d-ab67-83cc8f8cb644__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.163.140
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['35859', '35860', '35861', '35862', '35863']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 35859:35859 -p 35860:35860 -p 35861:35861 -p 35862:35862 -p 35863:35863 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35861 --rest-port=35859 --tcp-port=35860 --discv5-udp-port=35862 --rest-address=0.0.0.0 --nat=extip:172.18.163.140 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=e942ae9f27e5b9fe4bbe3fd2dc31dffa40e01992cbfddaf69edcdcddc31dcf0b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35863 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QNByCFcIc2fDxnF8odtxf7Vl-aKXjrb4VTxIZobhsJ5Ea5dDsiWC0mO9iYeBp-FXPcAJ8jl5xrXI-atqJOlTSboCgmlkgnY0gmlwhKwSmb2KbXVsdGlhZGRyc5YACASsEpm9BgxJAAoErBKZvQYMSt0DgnJzhQACAQAAiXNlY3AyNTZrMaECZ7Ny2-YpJI8w9NY-Kmlzlg-KgttOxPftn7fG19hFveeDdGNwggxJg3VkcIIMS4V3YWt1MgU --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.163.140 waku bf6643fa96fba21d05589ed534850308fe62149e87906b3b753675b008ce01c9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID bf6643fa96fb. Setting up logs at ./log/docker/node2_2025-01-24_04-09-25__c094f590-ce57-423d-ab67-83cc8f8cb644__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 35859
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35859/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35859/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.163.140/tcp/35860/p2p/16Uiu2HAmK2REpdFbhq7piAqG6UGcqZro2wpetc6xr1eiUo3Q1qkK","/ip4/172.18.163.140/tcp/35861/ws/p2p/16Uiu2HAmK2REpdFbhq7piAqG6UGcqZro2wpetc6xr1eiUo3Q1qkK"],"enrUri":"enr:-L24QBbDWmGMw69hrgltdlnvjEkg6xPnpxZzcMEWO7fJoi2fGiy_O-Q-ckruNgcJJLNVTYySfqsS5W1ucz2lxoHTWWQCgmlkgnY0gmlwhKwSo4yKbXVsdGlhZGRyc5YACASsEqOMBowUAAoErBKjjAaMFd0DgnJzhQACAQAAiXNlY3AyNTZrMaEDXqN1xaTtEV3ZCwYaBt_IbU6ciXdhAKi-jXelLHYLNkCDdGNwgowUg3VkcIKMFoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35859/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.153.189/tcp/3145/p2p/16Uiu2HAm2QUgHf8kbG8KmYr9Ci53wPL111BtgMRvcrzGvnerXm1Q"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3144/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35859/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3144/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3144/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/1'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 13ae64e7ee52
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id bf6643fa96fb
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 13ae64e7ee52. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.