[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2025-01-24_04-03-29__845f8827-d16b-438b-8853-8404920c63f8
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-24_04-03-29__845f8827-d16b-438b-8853-8404920c63f8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.88.149
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['29109', '29110', '29111', '29112', '29113']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 29109:29109 -p 29110:29110 -p 29111:29111 -p 29112:29112 -p 29113:29113 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29111 --rest-port=29109 --tcp-port=29110 --discv5-udp-port=29112 --rest-address=0.0.0.0 --nat=extip:172.18.88.149 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1a9daac00fea639ee0d4ed3ff61ebbffbebbd2bdedfbe4d0e9bfb3eb00ecbad0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29113 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.88.149 waku 4742d915ac41fbaa847be5efcc081ad9c8dfd1ddebc312143e207ea17a07dec5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4742d915ac41. Setting up logs at ./log/docker/receiving_node1_2025-01-24_04-03-29__845f8827-d16b-438b-8853-8404920c63f8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 29109
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 349280b5e23a. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29109/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29109/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.88.149/tcp/29110/p2p/16Uiu2HAm1H2XtcZrira1z69qcK9EUZm8qFRDES66NwqqpC7VXYWi","/ip4/172.18.88.149/tcp/29111/ws/p2p/16Uiu2HAm1H2XtcZrira1z69qcK9EUZm8qFRDES66NwqqpC7VXYWi"],"enrUri":"enr:-L24QP_kMnaCfrg4WRB6mT1_otwbBdeY4XxKZ-fUDj8kdZHFCXsJwI_wkIvwoAm3eHH9u8jWlTLXKvheuQjvHcypHe0CgmlkgnY0gmlwhKwSWJWKbXVsdGlhZGRyc5YACASsEliVBnG2AAoErBJYlQZxt90DgnJzhQADAQAAiXNlY3AyNTZrMaECVu8iUwnUzJQkMcn_bDOyKnLjKHR2Im5MCs_UFpJkMIeDdGNwgnG2g3VkcIJxuIV3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-24_04-03-29__845f8827-d16b-438b-8853-8404920c63f8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.184.16
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10683', '10684', '10685', '10686', '10687']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10683:10683 -p 10684:10684 -p 10685:10685 -p 10686:10686 -p 10687:10687 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10685 --rest-port=10683 --tcp-port=10684 --discv5-udp-port=10686 --rest-address=0.0.0.0 --nat=extip:172.18.184.16 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e8f7d6fc64d0f27282ec57e8796ea2bbdbd2bbb73c38d5dae3dbd1d7ada5eb9e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10687 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.184.16 waku 416d98004012c40266547c99bdcb227fce045c2444b9e50281d27b791839ce96
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 416d98004012. Setting up logs at ./log/docker/receiving_node2_2025-01-24_04-03-29__845f8827-d16b-438b-8853-8404920c63f8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 10683
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10683/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10683/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.184.16/tcp/10684/p2p/16Uiu2HAmSsdenrq728BjtQtrp1DwUgKVmmWcPxyjvj7egGJqhnqY","/ip4/172.18.184.16/tcp/10685/ws/p2p/16Uiu2HAmSsdenrq728BjtQtrp1DwUgKVmmWcPxyjvj7egGJqhnqY"],"enrUri":"enr:-L24QO1o8Zn5zCy7M6wu0tJkh1EJJPIM2oUajL0m3goS4SI2Vyg0fCBfEwVjDHPfq9DqS2y_K5VXYQICoKy-uTkPHacCgmlkgnY0gmlwhKwSuBCKbXVsdGlhZGRyc5YACASsErgQBim8AAoErBK4EAYpvd0DgnJzhQADAQAAiXNlY3AyNTZrMaED00DDjyoMnwL8rui_Mqd1lMTgkuXOcQLSyPJD2fU6W3ODdGNwgim8g3VkcIIpvoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10683/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.88.149/tcp/29110/p2p/16Uiu2HAm1H2XtcZrira1z69qcK9EUZm8qFRDES66NwqqpC7VXYWi"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-24_04-03-29__845f8827-d16b-438b-8853-8404920c63f8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.186.164
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37762', '37763', '37764', '37765', '37766']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37762:37762 -p 37763:37763 -p 37764:37764 -p 37765:37765 -p 37766:37766 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37764 --rest-port=37762 --tcp-port=37763 --discv5-udp-port=37765 --rest-address=0.0.0.0 --nat=extip:172.18.186.164 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=55afecb8e4a4a15f5248ce90fa9ddeff0bda5f31a21e35dccac9ff2fe56ceef5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37766 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QP_kMnaCfrg4WRB6mT1_otwbBdeY4XxKZ-fUDj8kdZHFCXsJwI_wkIvwoAm3eHH9u8jWlTLXKvheuQjvHcypHe0CgmlkgnY0gmlwhKwSWJWKbXVsdGlhZGRyc5YACASsEliVBnG2AAoErBJYlQZxt90DgnJzhQADAQAAiXNlY3AyNTZrMaECVu8iUwnUzJQkMcn_bDOyKnLjKHR2Im5MCs_UFpJkMIeDdGNwgnG2g3VkcIJxuIV3YWt1Mg0 --lightpushnode=/ip4/172.18.88.149/tcp/29110/p2p/16Uiu2HAm1H2XtcZrira1z69qcK9EUZm8qFRDES66NwqqpC7VXYWi --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.186.164 waku cd365bce66176a0acbb3c78b3ade94b0218b10b3b42d82cfe95649edeb4f9258
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID cd365bce6617. Setting up logs at ./log/docker/lightpush_node1_2025-01-24_04-03-29__845f8827-d16b-438b-8853-8404920c63f8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 37762
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37762/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37762/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.186.164/tcp/37763/p2p/16Uiu2HAmRhhRamfJj92H1ZZTMRzDTA8FGdHmaSkJDJdu8L1Gopzz","/ip4/172.18.186.164/tcp/37764/ws/p2p/16Uiu2HAmRhhRamfJj92H1ZZTMRzDTA8FGdHmaSkJDJdu8L1Gopzz"],"enrUri":"enr:-L24QIR1367K-DwKcmUQoQ0m0UGK3EVkIXluKC6G7sizrI5ZeOApV4pdxxA190ftRcfYicuPj1xHTXsCrj-fDwaA5p4CgmlkgnY0gmlwhKwSuqSKbXVsdGlhZGRyc5YACASsErqkBpODAAoErBK6pAaThN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDwdmIwZG7Ow9iIU-9vPv3vspUf7A_IiIixzADfHHpXh-DdGNwgpODg3VkcIKThYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37762/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.88.149/tcp/29110/p2p/16Uiu2HAm1H2XtcZrira1z69qcK9EUZm8qFRDES66NwqqpC7VXYWi"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37762/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.184.16/tcp/10684/p2p/16Uiu2HAmSsdenrq728BjtQtrp1DwUgKVmmWcPxyjvj7egGJqhnqY"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29109/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10683/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37762/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1737691413330410752}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29109/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1737691413330410752,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10683/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1737691413330410752,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4742d915ac41
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 416d98004012
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4742d915ac41. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id cd365bce6617
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 416d98004012. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.