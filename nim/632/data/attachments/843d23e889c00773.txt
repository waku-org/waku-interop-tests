[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2025-01-29_12-34-03__e7aa3c8c-172f-4a37-bd51-ce7b1ff4aca0
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-29_12-34-03__e7aa3c8c-172f-4a37-bd51-ce7b1ff4aca0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.189.233
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['62863', '62864', '62865', '62866', '62867']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 62863:62863 -p 62864:62864 -p 62865:62865 -p 62866:62866 -p 62867:62867 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62865 --rest-port=62863 --tcp-port=62864 --discv5-udp-port=62866 --rest-address=0.0.0.0 --nat=extip:172.18.189.233 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a5efc1dde7cecb33c9d0c53a0ceef5be323aa0cc1ef34016e69a010bf66e5dd4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62867 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.189.233 waku 43f4abb96070bc7648d07b83e8202d7fbc5c1910492d350fe225ed177c076485
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 43f4abb96070. Setting up logs at ./log/docker/receiving_node1_2025-01-29_12-34-03__e7aa3c8c-172f-4a37-bd51-ce7b1ff4aca0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 62863
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 59f9cc97f2db. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62863/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62863/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.189.233/tcp/62864/p2p/16Uiu2HAmBWESMwRtN795KeBLz1Eb69igrZAyUbhd1W3pQuK5tvfG","/ip4/172.18.189.233/tcp/62865/ws/p2p/16Uiu2HAmBWESMwRtN795KeBLz1Eb69igrZAyUbhd1W3pQuK5tvfG"],"enrUri":"enr:-L24QKExVsgsO08N8BjVBdQ88XxRicf-OSIwAg2X7ocsFHrIdvUvsVdG5QNIckbT4ytCSqZ5S65TPBW-EZsS9_oLjN8CgmlkgnY0gmlwhKwSvemKbXVsdGlhZGRyc5YACASsEr3pBvWQAAoErBK96Qb1kd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC7uYDt4zR6qAyr1qkbYKsKDa0CDz1h1ZoES6GVJMtfheDdGNwgvWQg3VkcIL1koV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-29_12-34-03__e7aa3c8c-172f-4a37-bd51-ce7b1ff4aca0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.221.74
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37524', '37525', '37526', '37527', '37528']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37524:37524 -p 37525:37525 -p 37526:37526 -p 37527:37527 -p 37528:37528 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37526 --rest-port=37524 --tcp-port=37525 --discv5-udp-port=37527 --rest-address=0.0.0.0 --nat=extip:172.18.221.74 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=95c0bdf9b1e6c6b5806ee02af9eefa90b9a68ac9cabbd3e19b5a9216ebbecdb0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37528 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.221.74 waku 244d0c10768ddc79cdbca5d13a05d9574ec865b37c10d0d03aec3ae1d5dc8788
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 244d0c10768d. Setting up logs at ./log/docker/receiving_node2_2025-01-29_12-34-03__e7aa3c8c-172f-4a37-bd51-ce7b1ff4aca0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 37524
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37524/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37524/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.221.74/tcp/37525/p2p/16Uiu2HAm1VDieHv51FgYHQ74g3iucGYuZHPpxZuXnmvKQgayPAfN","/ip4/172.18.221.74/tcp/37526/ws/p2p/16Uiu2HAm1VDieHv51FgYHQ74g3iucGYuZHPpxZuXnmvKQgayPAfN"],"enrUri":"enr:-L24QE8EzMbl0QqpWAW8ZUILgZOMwyV8UJMlgAs-hGS5syf4TSj7J3CKUF7nfVmcdmZLU0SG_0YgzrnLv9kQnRAVdvECgmlkgnY0gmlwhKwS3UqKbXVsdGlhZGRyc5YACASsEt1KBpKVAAoErBLdSgaSlt0DgnJzhQADAQAAiXNlY3AyNTZrMaECWg7AS-aYvErW98pHMpT7p6qJUGLCTN-N6cVUef0wlMWDdGNwgpKVg3VkcIKSl4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37524/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.189.233/tcp/62864/p2p/16Uiu2HAmBWESMwRtN795KeBLz1Eb69igrZAyUbhd1W3pQuK5tvfG"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-29_12-34-03__e7aa3c8c-172f-4a37-bd51-ce7b1ff4aca0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.40.7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37633', '37634', '37635', '37636', '37637']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37633:37633 -p 37634:37634 -p 37635:37635 -p 37636:37636 -p 37637:37637 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37635 --rest-port=37633 --tcp-port=37634 --discv5-udp-port=37636 --rest-address=0.0.0.0 --nat=extip:172.18.40.7 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6fa0a209e65d95cb3fbd9af9cf9a91d1ff0a915ebe0b87f773c4aafb7a56fa6e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37637 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QKExVsgsO08N8BjVBdQ88XxRicf-OSIwAg2X7ocsFHrIdvUvsVdG5QNIckbT4ytCSqZ5S65TPBW-EZsS9_oLjN8CgmlkgnY0gmlwhKwSvemKbXVsdGlhZGRyc5YACASsEr3pBvWQAAoErBK96Qb1kd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC7uYDt4zR6qAyr1qkbYKsKDa0CDz1h1ZoES6GVJMtfheDdGNwgvWQg3VkcIL1koV3YWt1Mgk --lightpushnode=/ip4/172.18.189.233/tcp/62864/p2p/16Uiu2HAmBWESMwRtN795KeBLz1Eb69igrZAyUbhd1W3pQuK5tvfG --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.40.7 waku 359045af1a0328b0fc97ea299d11cd51b41d7e918a1abeda8b1ce573114015bc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 359045af1a03. Setting up logs at ./log/docker/lightpush_node1_2025-01-29_12-34-03__e7aa3c8c-172f-4a37-bd51-ce7b1ff4aca0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 37633
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37633/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37633/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.40.7/tcp/37634/p2p/16Uiu2HAmRAaUQD3x6psnnYtasEUy2N3RUB4rMaJFysDV4kFVPFp9","/ip4/172.18.40.7/tcp/37635/ws/p2p/16Uiu2HAmRAaUQD3x6psnnYtasEUy2N3RUB4rMaJFysDV4kFVPFp9"],"enrUri":"enr:-L24QL6bFOh2UQBgDeiAZ58w98MAHkeiIhtDVltp6btsFmWIE9cIQ8EQe6NeCT2XbUHqbuiocjlfp_fADZSd4EcSNpYCgmlkgnY0gmlwhKwSKAeKbXVsdGlhZGRyc5YACASsEigHBpMCAAoErBIoBwaTA90DgnJzhQADAQAAiXNlY3AyNTZrMaEDueCrTDT_xFqoxrkyx2QWhvzKSR-uIE3ibo1XqznwZtaDdGNwgpMCg3VkcIKTBIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37633/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.189.233/tcp/62864/p2p/16Uiu2HAmBWESMwRtN795KeBLz1Eb69igrZAyUbhd1W3pQuK5tvfG"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37633/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.221.74/tcp/37525/p2p/16Uiu2HAm1VDieHv51FgYHQ74g3iucGYuZHPpxZuXnmvKQgayPAfN"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62863/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37524/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37633/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738154047794473728}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:37633/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37633/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738154047801620736}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:37633/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37633/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738154047805282304}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:37633/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37633/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738154047808768768}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:37633/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 43f4abb96070
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 244d0c10768d
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 43f4abb96070. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 359045af1a03
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 244d0c10768d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.