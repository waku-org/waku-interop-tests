[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_relaying_node with id: 2025-01-29_12-31-07__60ca3103-e50b-4c25-9492-b06bc3c371b1
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-29_12-31-07__60ca3103-e50b-4c25-9492-b06bc3c371b1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-29_12-31-07__60ca3103-e50b-4c25-9492-b06bc3c371b1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-29_12-31-07__60ca3103-e50b-4c25-9492-b06bc3c371b1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:33 Network waku created
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.130.138
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['27410', '27411', '27412', '27413', '27414']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 27410:27410 -p 27411:27411 -p 27412:27412 -p 27413:27413 -p 27414:27414 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27412 --rest-port=27410 --tcp-port=27411 --discv5-udp-port=27413 --rest-address=0.0.0.0 --nat=extip:172.18.130.138 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a2e5ccacb8d337de25daaad5cdae3b99bdd5d8d39f52ac9a5a792fb50416dc1b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27414 --metrics-logging=true --filter=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.130.138 waku 16319b015b707915ff57e273a5e737f7a85cb37937fec5c4c213f337316ec308
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 16319b015b70. Setting up logs at ./log/docker/node1_2025-01-29_12-31-07__60ca3103-e50b-4c25-9492-b06bc3c371b1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 27410
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27410/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27410/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.130.138/tcp/27411/p2p/16Uiu2HAmBVf2JGXatyVnY36RXCt3FCYXPDgkJJJALwcBLopvppRZ","/ip4/172.18.130.138/tcp/27412/ws/p2p/16Uiu2HAmBVf2JGXatyVnY36RXCt3FCYXPDgkJJJALwcBLopvppRZ"],"enrUri":"enr:-L24QGZ4rb7LO2wK0qBghj7qbjQU3TIPPsOPbsQLFB5lkYOzOiQDshjn59qYmtZFSYcrIgoog8XRD5UtjAFccF1LNRoCgmlkgnY0gmlwhKwSgoqKbXVsdGlhZGRyc5YACASsEoKKBmsTAAoErBKCigZrFN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC7sA7cMOdMUolYTMicA9o7t8jjMoyjvQZQabrjd0JCDSDdGNwgmsTg3VkcIJrFYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.155.228
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['55015', '55016', '55017', '55018', '55019']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 55015:55015 -p 55016:55016 -p 55017:55017 -p 55018:55018 -p 55019:55019 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55017 --rest-port=55015 --tcp-port=55016 --discv5-udp-port=55018 --rest-address=0.0.0.0 --nat=extip:172.18.155.228 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5a8f2829ffedc6aceefccdbd6af45b6da44fcd3f77a21ecddefae5ab4651006a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55019 --metrics-logging=true --filter=true --relay=true --discv5-bootstrap-node=enr:-L24QGZ4rb7LO2wK0qBghj7qbjQU3TIPPsOPbsQLFB5lkYOzOiQDshjn59qYmtZFSYcrIgoog8XRD5UtjAFccF1LNRoCgmlkgnY0gmlwhKwSgoqKbXVsdGlhZGRyc5YACASsEoKKBmsTAAoErBKCigZrFN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC7sA7cMOdMUolYTMicA9o7t8jjMoyjvQZQabrjd0JCDSDdGNwgmsTg3VkcIJrFYV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.155.228 waku 440f0b05debf8ee3954050883ae9c6d0e2a1a82059083f4740b1fa4d250e0121
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 440f0b05debf. Setting up logs at ./log/docker/node2_2025-01-29_12-31-07__60ca3103-e50b-4c25-9492-b06bc3c371b1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 55015
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55015/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55015/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.155.228/tcp/55016/p2p/16Uiu2HAmPb9rWiakQ1pjjfhBrBKZH7xWwYfG8jDKSkr9YPm6WBaS","/ip4/172.18.155.228/tcp/55017/ws/p2p/16Uiu2HAmPb9rWiakQ1pjjfhBrBKZH7xWwYfG8jDKSkr9YPm6WBaS"],"enrUri":"enr:-L24QIQ1VUosq6Zkv9cHEWClmZb6Nl7ak-mmAOtaMVKUsr1oHACek91if0N487jUnNhva_gy3cVqQpbx4iHnc-h72esCgmlkgnY0gmlwhKwSm-SKbXVsdGlhZGRyc5YACASsEpvkBtboAAoErBKb5AbW6d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDonT6nyhc2leiAqt9ppsy6ZbZgsAC7ZsYzrVJh3jU31ODdGNwgtbog3VkcILW6oV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.64.121
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['23604', '23605', '23606', '23607', '23608']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 23604:23604 -p 23605:23605 -p 23606:23606 -p 23607:23607 -p 23608:23608 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23606 --rest-port=23604 --tcp-port=23605 --discv5-udp-port=23607 --rest-address=0.0.0.0 --nat=extip:172.18.64.121 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=001aaea4e24bfcafac26e7bdbe0ddcebd4baab6247f0e43ee5afef4e8eadd158 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23608 --metrics-logging=true --relay=false --filternode=/ip4/172.18.155.228/tcp/55016/p2p/16Uiu2HAmPb9rWiakQ1pjjfhBrBKZH7xWwYfG8jDKSkr9YPm6WBaS --discv5-bootstrap-node=enr:-L24QIQ1VUosq6Zkv9cHEWClmZb6Nl7ak-mmAOtaMVKUsr1oHACek91if0N487jUnNhva_gy3cVqQpbx4iHnc-h72esCgmlkgnY0gmlwhKwSm-SKbXVsdGlhZGRyc5YACASsEpvkBtboAAoErBKb5AbW6d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDonT6nyhc2leiAqt9ppsy6ZbZgsAC7ZsYzrVJh3jU31ODdGNwgtbog3VkcILW6oV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.64.121 waku 49a61673034e29dbb4b297d610b2a70cb303fee8a9183568c828ed2d49bb21d3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 49a61673034e. Setting up logs at ./log/docker/node3_2025-01-29_12-31-07__60ca3103-e50b-4c25-9492-b06bc3c371b1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 23604
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23604/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23604/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.64.121/tcp/23605/p2p/16Uiu2HAm5aZkKJbTzAJeMQRMdwK6oN3oyeTEhs2S4F31rGEd5cGh","/ip4/172.18.64.121/tcp/23606/ws/p2p/16Uiu2HAm5aZkKJbTzAJeMQRMdwK6oN3oyeTEhs2S4F31rGEd5cGh"],"enrUri":"enr:-L24QFBMUekT76aoRiHa2RSl4aZAWzlUYjK3yRB5Bmk78IddVRsHNddAgR6QR5rF_1SiYFsWlm2hBdfVTYrSNExC424CgmlkgnY0gmlwhKwSQHmKbXVsdGlhZGRyc5YACASsEkB5Blw1AAoErBJAeQZcNt0DgnJzhQADAQAAiXNlY3AyNTZrMaECltwMsdTYLA0DsXBcqQSQEHQl4Gib_zXXW2v9v4Vxu7qDdGNwglw1g3VkcIJcN4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27410/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55015/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23604/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27410/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.155.228/tcp/55016/p2p/16Uiu2HAmPb9rWiakQ1pjjfhBrBKZH7xWwYfG8jDKSkr9YPm6WBaS","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55015/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.130.138/tcp/27411/p2p/16Uiu2HAmBVf2JGXatyVnY36RXCt3FCYXPDgkJJJALwcBLopvppRZ","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.64.121/tcp/23605/p2p/16Uiu2HAm5aZkKJbTzAJeMQRMdwK6oN3oyeTEhs2S4F31rGEd5cGh","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23604/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.155.228/tcp/55016/p2p/16Uiu2HAmPb9rWiakQ1pjjfhBrBKZH7xWwYfG8jDKSkr9YPm6WBaS","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27410/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23604/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1738153903289273856,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 16319b015b70
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 440f0b05debf
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 16319b015b70. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 49a61673034e
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 440f0b05debf. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.