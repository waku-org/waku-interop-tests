[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_cant_retrieve_messages_on_not_subscribed_content_topic with id: 2025-01-29_12-37-51__8a24714e-fe61-422a-8728-0bacc2ee7481
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-29_12-37-51__8a24714e-fe61-422a-8728-0bacc2ee7481__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.232.118
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['23498', '23499', '23500', '23501', '23502']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 23498:23498 -p 23499:23499 -p 23500:23500 -p 23501:23501 -p 23502:23502 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23500 --rest-port=23498 --tcp-port=23499 --discv5-udp-port=23501 --rest-address=0.0.0.0 --nat=extip:172.18.232.118 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=1eaff68c9cdccff74e56a111bcb7c2c5cd368d1deaec9eca0b85df9b4d2691c7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23502 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.232.118 waku 1915aea0d9b8cc397bd1fea141170d50c6433c5725db193478dacd34b8db52f6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1915aea0d9b8. Setting up logs at ./log/docker/node1_2025-01-29_12-37-51__8a24714e-fe61-422a-8728-0bacc2ee7481__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 23498
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4fd403efa2be. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23498/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23498/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.232.118/tcp/23499/p2p/16Uiu2HAmEkab23M8DGa8bgm4eGtptvzxB1oHLa4Xb3t2oyvsCmez","/ip4/172.18.232.118/tcp/23500/ws/p2p/16Uiu2HAmEkab23M8DGa8bgm4eGtptvzxB1oHLa4Xb3t2oyvsCmez"],"enrUri":"enr:-L24QNb8FVDxXMeS6BiWp94wiXzjEB5Dng7_fB8CaYs3SWz9CMq20sj3bLvKGwz8Ww45Jr-Xg_iqVW3pBoraXDuk3e8CgmlkgnY0gmlwhKwS6HaKbXVsdGlhZGRyc5YACASsEuh2BlvLAAoErBLodgZbzN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDHyX9TX0R6uQ2T-THtqROEbGFzfXjcAKJu4GQj03l-cODdGNwglvLg3VkcIJbzYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-29_12-37-51__8a24714e-fe61-422a-8728-0bacc2ee7481__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.87.52
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['51672', '51673', '51674', '51675', '51676']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 51672:51672 -p 51673:51673 -p 51674:51674 -p 51675:51675 -p 51676:51676 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51674 --rest-port=51672 --tcp-port=51673 --discv5-udp-port=51675 --rest-address=0.0.0.0 --nat=extip:172.18.87.52 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=75daefbcbaf4fec68d90f7fa2cfeff6da23a82db04a64d2e4bcaec1402294e98 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51676 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QNb8FVDxXMeS6BiWp94wiXzjEB5Dng7_fB8CaYs3SWz9CMq20sj3bLvKGwz8Ww45Jr-Xg_iqVW3pBoraXDuk3e8CgmlkgnY0gmlwhKwS6HaKbXVsdGlhZGRyc5YACASsEuh2BlvLAAoErBLodgZbzN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDHyX9TX0R6uQ2T-THtqROEbGFzfXjcAKJu4GQj03l-cODdGNwglvLg3VkcIJbzYV3YWt1MgU --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.87.52 waku db24d935a45be6d7aeacb5abfdb7a649ee4602db6fbdc78d0026cc7b559fbfaa
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID db24d935a45b. Setting up logs at ./log/docker/node2_2025-01-29_12-37-51__8a24714e-fe61-422a-8728-0bacc2ee7481__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 51672
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51672/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51672/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.87.52/tcp/51673/p2p/16Uiu2HAm7KgCpoeNpv1mqthQgYW5H3NCLma3QYjcuvVtDXNQ6SQr","/ip4/172.18.87.52/tcp/51674/ws/p2p/16Uiu2HAm7KgCpoeNpv1mqthQgYW5H3NCLma3QYjcuvVtDXNQ6SQr"],"enrUri":"enr:-L24QNTAgKbQkmH_1v6dlciq2d33A3iFvFoyF3F0mcqaaOmwAtMfJiP_fdn6Fi6vsMmtNwIxjzvRAXKUnnKkNr3umc4CgmlkgnY0gmlwhKwSVzSKbXVsdGlhZGRyc5YACASsElc0BsnZAAoErBJXNAbJ2t0DgnJzhQACAQAAiXNlY3AyNTZrMaECsMMDJrlJ6z_dlKkAGm_W1_I2MKBykmuEA65gk_VKy8ODdGNwgsnZg3VkcILJ24V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51672/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.232.118/tcp/23499/p2p/16Uiu2HAmEkab23M8DGa8bgm4eGtptvzxB1oHLa4Xb3t2oyvsCmez"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23498/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51672/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23498/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23498/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:23498/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto. Response content: b'/toychat/2/huilong/proto'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1915aea0d9b8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id db24d935a45b
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1915aea0d9b8. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.