[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_content_topic_not_in_docker_flags with id: 2025-01-29_12-36-53__88d8cae5-6568-4ca9-b7fe-fe65c48b71ec
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-29_12-36-53__88d8cae5-6568-4ca9-b7fe-fe65c48b71ec__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.81.19
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['49878', '49879', '49880', '49881', '49882']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 49878:49878 -p 49879:49879 -p 49880:49880 -p 49881:49881 -p 49882:49882 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49880 --rest-port=49878 --tcp-port=49879 --discv5-udp-port=49881 --rest-address=0.0.0.0 --nat=extip:172.18.81.19 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=c47bd1f9babeabadd701b2f4a2ea1dc6e2e58292ac2afc5a870f46d864aedb54 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49882 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.81.19 waku ccd900131b6122c0293942d3d3c87154cc2dfefad0fe15d4aa3ac72e65e80b1c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ccd900131b61. Setting up logs at ./log/docker/node1_2025-01-29_12-36-53__88d8cae5-6568-4ca9-b7fe-fe65c48b71ec__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 49878
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9d9d03240c61. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49878/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49878/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.81.19/tcp/49879/p2p/16Uiu2HAm8xjMGKffj5anyCdvF2yRd9LfxhHJ899Qq82GjVdeTV9s","/ip4/172.18.81.19/tcp/49880/ws/p2p/16Uiu2HAm8xjMGKffj5anyCdvF2yRd9LfxhHJ899Qq82GjVdeTV9s"],"enrUri":"enr:-L24QAzLZh14_g-CtNeXrIY1PNZ7KmBMmglipQnSW4hlqrmVPhj6VmOsJN2xLzHpIWkh3k9lHj7l8fQnHPNwDKs9wPECgmlkgnY0gmlwhKwSUROKbXVsdGlhZGRyc5YACASsElETBsLXAAoErBJREwbC2N0DgnJzhQACAQAAiXNlY3AyNTZrMaECyRy-7fh1qx7caaHte7lZK5CH6dooA5WaTEGqhX-gZNKDdGNwgsLXg3VkcILC2YV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-29_12-36-53__88d8cae5-6568-4ca9-b7fe-fe65c48b71ec__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.200.199
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['18418', '18419', '18420', '18421', '18422']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 18418:18418 -p 18419:18419 -p 18420:18420 -p 18421:18421 -p 18422:18422 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18420 --rest-port=18418 --tcp-port=18419 --discv5-udp-port=18421 --rest-address=0.0.0.0 --nat=extip:172.18.200.199 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=e26dccebd5ae5442efe12edee906a034723f73d0938b6bc73a1a24c69e451579 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18422 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QAzLZh14_g-CtNeXrIY1PNZ7KmBMmglipQnSW4hlqrmVPhj6VmOsJN2xLzHpIWkh3k9lHj7l8fQnHPNwDKs9wPECgmlkgnY0gmlwhKwSUROKbXVsdGlhZGRyc5YACASsElETBsLXAAoErBJREwbC2N0DgnJzhQACAQAAiXNlY3AyNTZrMaECyRy-7fh1qx7caaHte7lZK5CH6dooA5WaTEGqhX-gZNKDdGNwgsLXg3VkcILC2YV3YWt1MgU --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.200.199 waku 8e2436be54183a79c1a5d274cce2c93da4ed4245fa109af63eff3fc931af654c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8e2436be5418. Setting up logs at ./log/docker/node2_2025-01-29_12-36-53__88d8cae5-6568-4ca9-b7fe-fe65c48b71ec__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 18418
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18418/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18418/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.200.199/tcp/18419/p2p/16Uiu2HAm8nrugm6ogpKB15gcQxGfSNQ8imEkqwcesBqRH6yUne4a","/ip4/172.18.200.199/tcp/18420/ws/p2p/16Uiu2HAm8nrugm6ogpKB15gcQxGfSNQ8imEkqwcesBqRH6yUne4a"],"enrUri":"enr:-L24QJ1zc6o6nU0SxAAZc2QDVyzc9FQXmmxxN9pzSsjJaewKNyKmyMkIMo7HiC9KVAqPNy4evKpvPXamnUhzDWWbGxgCgmlkgnY0gmlwhKwSyMeKbXVsdGlhZGRyc5YACASsEsjHBkfzAAoErBLIxwZH9N0DgnJzhQACAQAAiXNlY3AyNTZrMaECxpV8FYz8uGl_8gqBcZd5_1wdYtdLF1NTHCWpqgG0IvuDdGNwgkfzg3VkcIJH9YV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18418/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.81.19/tcp/49879/p2p/16Uiu2HAm8xjMGKffj5anyCdvF2yRd9LfxhHJ899Qq82GjVdeTV9s"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49878/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18418/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49878/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49878/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738154215810036992,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18418/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738154215810036992,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ccd900131b61
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 8e2436be5418
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ccd900131b61. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.