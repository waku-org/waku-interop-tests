[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_after_node2_restarts with id: 2025-01-29_12-33-30__abc98378-a5ca-41b7-a89f-4ec060bd2f61
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-29_12-33-30__abc98378-a5ca-41b7-a89f-4ec060bd2f61__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.54.17
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['27346', '27347', '27348', '27349', '27350']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 27346:27346 -p 27347:27347 -p 27348:27348 -p 27349:27349 -p 27350:27350 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27348 --rest-port=27346 --tcp-port=27347 --discv5-udp-port=27349 --rest-address=0.0.0.0 --nat=extip:172.18.54.17 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ff5af93fa97aec69ebf1b8d21aaa57fbe50cc7b37ffb98cdefa87190060c8c63 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27350 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.54.17 waku 6a30d62060b6051b61b1b9f62293f9a7a81f3f3e9faca119afd03f71a8884531
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6a30d62060b6. Setting up logs at ./log/docker/node1_2025-01-29_12-33-30__abc98378-a5ca-41b7-a89f-4ec060bd2f61__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 27346
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a54257457215. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27346/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27346/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.54.17/tcp/27347/p2p/16Uiu2HAm68gJRBvPqURfV6csE4q1oyiFk6HFUMphpy1G4U5yHgLA","/ip4/172.18.54.17/tcp/27348/ws/p2p/16Uiu2HAm68gJRBvPqURfV6csE4q1oyiFk6HFUMphpy1G4U5yHgLA"],"enrUri":"enr:-L24QLxCMKUhskMlyY1tFatF_r3Y6-irpJ-8WTib9Zgh7cr3SNe9_9xFrUoVZ5WiMLNqqON3fwC5h1KDCwEm-s7P1q8CgmlkgnY0gmlwhKwSNhGKbXVsdGlhZGRyc5YACASsEjYRBmrTAAoErBI2EQZq1N0DgnJzhQADAQAAiXNlY3AyNTZrMaECnxYLpt-Dl9KWNlps_Z-CTJEXqWy3LGMFrNFuFNIRaJODdGNwgmrTg3VkcIJq1YV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-29_12-33-30__abc98378-a5ca-41b7-a89f-4ec060bd2f61__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.106.8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['26570', '26571', '26572', '26573', '26574']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 26570:26570 -p 26571:26571 -p 26572:26572 -p 26573:26573 -p 26574:26574 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26572 --rest-port=26570 --tcp-port=26571 --discv5-udp-port=26573 --rest-address=0.0.0.0 --nat=extip:172.18.106.8 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dfca1ebebc7d3acf5309081ccd7a685aadf3c4b5fc43920d922c2ce2c96ccfde --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26574 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QLxCMKUhskMlyY1tFatF_r3Y6-irpJ-8WTib9Zgh7cr3SNe9_9xFrUoVZ5WiMLNqqON3fwC5h1KDCwEm-s7P1q8CgmlkgnY0gmlwhKwSNhGKbXVsdGlhZGRyc5YACASsEjYRBmrTAAoErBI2EQZq1N0DgnJzhQADAQAAiXNlY3AyNTZrMaECnxYLpt-Dl9KWNlps_Z-CTJEXqWy3LGMFrNFuFNIRaJODdGNwgmrTg3VkcIJq1YV3YWt1MgU --filternode=/ip4/172.18.54.17/tcp/27347/p2p/16Uiu2HAm68gJRBvPqURfV6csE4q1oyiFk6HFUMphpy1G4U5yHgLA
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.106.8 waku e18055d037175b7de79c8e442047a6e8b3ba93de608cd3ff6626d497b98bb9ef
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e18055d03717. Setting up logs at ./log/docker/node2_2025-01-29_12-33-30__abc98378-a5ca-41b7-a89f-4ec060bd2f61__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 26570
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26570/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26570/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.106.8/tcp/26571/p2p/16Uiu2HAm1hfwLzLjt5jeaHjyiEMKTTCwL7uuZyk9BCgCQF6BMjbH","/ip4/172.18.106.8/tcp/26572/ws/p2p/16Uiu2HAm1hfwLzLjt5jeaHjyiEMKTTCwL7uuZyk9BCgCQF6BMjbH"],"enrUri":"enr:-L24QPWXp2DOHfrsobejDt-5Z9lwFFRwRDutVWoi0-KTF5sbBvOcRE1vxTzRT3HYh2SQQa9gdNqQqFkeDWNKtBzmInECgmlkgnY0gmlwhKwSagiKbXVsdGlhZGRyc5YACASsEmoIBmfLAAoErBJqCAZnzN0DgnJzhQADAQAAiXNlY3AyNTZrMaECXT9d5TG7oHYwTGMA2gymO5-NlYVbAhesPQSqBUWNb4yDdGNwgmfLg3VkcIJnzYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26570/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.54.17/tcp/27347/p2p/16Uiu2HAm68gJRBvPqURfV6csE4q1oyiFk6HFUMphpy1G4U5yHgLA"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27346/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26570/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "13571cb7-b8d3-4a02-9b99-73226b762dd7", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"13571cb7-b8d3-4a02-9b99-73226b762dd7","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27346/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26570/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1738154012908783360,"ephemeral":false}]'
[35mDEBUG   [0m src.node.waku_node:waku_node.py:249 Restarting container with id e18055d03717
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26570/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26570/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26570/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.106.8/tcp/26571/p2p/16Uiu2HAm1hfwLzLjt5jeaHjyiEMKTTCwL7uuZyk9BCgCQF6BMjbH","/ip4/172.18.106.8/tcp/26572/ws/p2p/16Uiu2HAm1hfwLzLjt5jeaHjyiEMKTTCwL7uuZyk9BCgCQF6BMjbH"],"enrUri":"enr:-L24QPWXp2DOHfrsobejDt-5Z9lwFFRwRDutVWoi0-KTF5sbBvOcRE1vxTzRT3HYh2SQQa9gdNqQqFkeDWNKtBzmInECgmlkgnY0gmlwhKwSagiKbXVsdGlhZGRyc5YACASsEmoIBmfLAAoErBJqCAZnzN0DgnJzhQADAQAAiXNlY3AyNTZrMaECXT9d5TG7oHYwTGMA2gymO5-NlYVbAhesPQSqBUWNb4yDdGNwgmfLg3VkcIJnzYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 2 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27346/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26570/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e2abca9c-fca4-4426-b4d8-7de8aa3f1540", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"e2abca9c-fca4-4426-b4d8-7de8aa3f1540","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27346/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26570/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 6a30d62060b6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e18055d03717
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6a30d62060b6. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2025-01-29_12-33-30__abc98378-a5ca-41b7-a89f-4ec060bd2f61__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2025-01-29_12-33-30__abc98378-a5ca-41b7-a89f-4ec060bd2f61__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_after_node2_restarts with id: 2025-01-29_12-33-39__39a9e408-5046-4955-bc23-98ad20c684f6
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-29_12-33-39__39a9e408-5046-4955-bc23-98ad20c684f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.228.248
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['23943', '23944', '23945', '23946', '23947']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 23943:23943 -p 23944:23944 -p 23945:23945 -p 23946:23946 -p 23947:23947 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23945 --rest-port=23943 --tcp-port=23944 --discv5-udp-port=23946 --rest-address=0.0.0.0 --nat=extip:172.18.228.248 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c1ab86dea29c6ed1bddf7b0ffdcde44cc9097fcdfcb02eb2c238b5aacfd430ed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23947 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.228.248 waku 256fb0b5533c94240a9de41f8ef1203d1acc3e18ff51ec4e948225985bb79029
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 256fb0b5533c. Setting up logs at ./log/docker/node1_2025-01-29_12-33-39__39a9e408-5046-4955-bc23-98ad20c684f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 23943
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e18055d03717. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23943/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23943/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.228.248/tcp/23944/p2p/16Uiu2HAm88JyB1p3NLCeKimeGp15p4btuyeeRLZVBJTVRRZbxeca","/ip4/172.18.228.248/tcp/23945/ws/p2p/16Uiu2HAm88JyB1p3NLCeKimeGp15p4btuyeeRLZVBJTVRRZbxeca"],"enrUri":"enr:-L24QP6v7_qRaf6bua_gSZlgjm8koob0Pcad3b25lEF_rRq-cFmaJfkqsOFRDkGt_sNiTDYfdqTxSu4zFeig5a37YsICgmlkgnY0gmlwhKwS5PiKbXVsdGlhZGRyc5YACASsEuT4Bl2IAAoErBLk-AZdid0DgnJzhQADAQAAiXNlY3AyNTZrMaECvLVMpxvtIyRcfWby1pyF01PQVOPzYSS34Q3_CM614vuDdGNwgl2Ig3VkcIJdioV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-29_12-33-39__39a9e408-5046-4955-bc23-98ad20c684f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.85.225
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['34048', '34049', '34050', '34051', '34052']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 34048:34048 -p 34049:34049 -p 34050:34050 -p 34051:34051 -p 34052:34052 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34050 --rest-port=34048 --tcp-port=34049 --discv5-udp-port=34051 --rest-address=0.0.0.0 --nat=extip:172.18.85.225 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=edb6bc00cacfd1bd4ddcfbc1f14caec3ab5560a1eac76bebbe6feda11dd6b3ea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34052 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QP6v7_qRaf6bua_gSZlgjm8koob0Pcad3b25lEF_rRq-cFmaJfkqsOFRDkGt_sNiTDYfdqTxSu4zFeig5a37YsICgmlkgnY0gmlwhKwS5PiKbXVsdGlhZGRyc5YACASsEuT4Bl2IAAoErBLk-AZdid0DgnJzhQADAQAAiXNlY3AyNTZrMaECvLVMpxvtIyRcfWby1pyF01PQVOPzYSS34Q3_CM614vuDdGNwgl2Ig3VkcIJdioV3YWt1MgU --filternode=/ip4/172.18.228.248/tcp/23944/p2p/16Uiu2HAm88JyB1p3NLCeKimeGp15p4btuyeeRLZVBJTVRRZbxeca
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.85.225 waku 71a526aca6752b85cef7315245058cd89d647a97f5fe54a2399cdb4d4a0e3557
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 71a526aca675. Setting up logs at ./log/docker/node2_2025-01-29_12-33-39__39a9e408-5046-4955-bc23-98ad20c684f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 34048
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34048/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34048/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.85.225/tcp/34049/p2p/16Uiu2HAm6WDzrBaJaJAaRFhhGF5bvmerQmXtfYTJCiJPvoxYxvXE","/ip4/172.18.85.225/tcp/34050/ws/p2p/16Uiu2HAm6WDzrBaJaJAaRFhhGF5bvmerQmXtfYTJCiJPvoxYxvXE"],"enrUri":"enr:-L24QMdVMBj1OF6sslVoDKsORgIjJh4Lg2_w0JLBe0TeTlVadVjXgzHzPYUOubOVhOLz9k8Q48k3O2oVYW_zcPpRs_gCgmlkgnY0gmlwhKwSVeGKbXVsdGlhZGRyc5YACASsElXhBoUBAAoErBJV4QaFAt0DgnJzhQADAQAAiXNlY3AyNTZrMaECpJsVH6GgQ4vqMN6U8O75PMU4GDdS3u7UDPHtMiQiIDWDdGNwgoUBg3VkcIKFA4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34048/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.228.248/tcp/23944/p2p/16Uiu2HAm88JyB1p3NLCeKimeGp15p4btuyeeRLZVBJTVRRZbxeca"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23943/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34048/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "48ceb554-384a-4dc9-866d-c0a5269425aa", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"48ceb554-384a-4dc9-866d-c0a5269425aa","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23943/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34048/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1738154022296799744,"ephemeral":false}]'
[35mDEBUG   [0m src.node.waku_node:waku_node.py:249 Restarting container with id 71a526aca675
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34048/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34048/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34048/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.85.225/tcp/34049/p2p/16Uiu2HAm6WDzrBaJaJAaRFhhGF5bvmerQmXtfYTJCiJPvoxYxvXE","/ip4/172.18.85.225/tcp/34050/ws/p2p/16Uiu2HAm6WDzrBaJaJAaRFhhGF5bvmerQmXtfYTJCiJPvoxYxvXE"],"enrUri":"enr:-L24QMdVMBj1OF6sslVoDKsORgIjJh4Lg2_w0JLBe0TeTlVadVjXgzHzPYUOubOVhOLz9k8Q48k3O2oVYW_zcPpRs_gCgmlkgnY0gmlwhKwSVeGKbXVsdGlhZGRyc5YACASsElXhBoUBAAoErBJV4QaFAt0DgnJzhQADAQAAiXNlY3AyNTZrMaECpJsVH6GgQ4vqMN6U8O75PMU4GDdS3u7UDPHtMiQiIDWDdGNwgoUBg3VkcIKFA4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 2 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23943/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34048/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "3395ac88-9257-43c3-a74e-d255a37141fc", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"3395ac88-9257-43c3-a74e-d255a37141fc","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23943/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34048/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 256fb0b5533c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 71a526aca675
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 256fb0b5533c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2025-01-29_12-33-39__39a9e408-5046-4955-bc23-98ad20c684f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2025-01-29_12-33-39__39a9e408-5046-4955-bc23-98ad20c684f6__wakuorg_nwaku:latest.log