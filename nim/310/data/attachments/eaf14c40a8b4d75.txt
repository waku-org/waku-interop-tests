[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2024-08-09_06-55-54__76dccf36-d19c-47e0-a111-689c4f593af8
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:29 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-08-09_06-55-54__76dccf36-d19c-47e0-a111-689c4f593af8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.0.160
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['33795', '33796', '33797', '33798', '33799']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:429 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:161 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:163 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 33795:33795 -p 33796:33796 -p 33797:33797 -p 33798:33798 -p 33799:33799 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33797 --rest-port=33795 --tcp-port=33796 --discv5-udp-port=33798 --rest-address=0.0.0.0 --nat=extip:172.18.0.160 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33799 --metrics-logging=true --store=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68 --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.0.160 waku 2a0cb60c14d260efb1c93080eff99ecbe03d0cdb57229aa77e6bb55f93a03628
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 2a0cb60c14d2. Setting up logs at ./log/docker/publishing_node1_2024-08-09_06-55-54__76dccf36-d19c-47e0-a111-689c4f593af8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:175 Started container from image wakuorg/nwaku:latest. REST: 33795
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33795/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:275 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33795/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.0.160/tcp/33796/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.0.160/tcp/33797/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QOZjUXM0zeaVD_qnccdb45CrWja-ENH43fw0UVH3qT-MfBzIL31ZAniqJFmXKxDFHAPLTVrH0Pv5bWxFh7N9NGUBgmlkgnY0gmlwhKwSAKCKbXVsdGlhZGRyc4wACgSsEgCgBoQF3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CChASDdWRwgoQGhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:280 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/publishing_node2_2024-08-09_06-55-54__76dccf36-d19c-47e0-a111-689c4f593af8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.201.191
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['14922', '14923', '14924', '14925', '14926']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:429 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:161 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:163 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 14922:14922 -p 14923:14923 -p 14924:14924 -p 14925:14925 -p 14926:14926 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14924 --rest-port=14922 --tcp-port=14923 --discv5-udp-port=14925 --rest-address=0.0.0.0 --nat=extip:172.18.201.191 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14926 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.201.191 waku a22ed6ee2e871942f64f15187ec4209b8cc23f936ed32a9cc4c26230a99e7990
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID a22ed6ee2e87. Setting up logs at ./log/docker/publishing_node2_2024-08-09_06-55-54__76dccf36-d19c-47e0-a111-689c4f593af8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:175 Started container from image wakuorg/nwaku:latest. REST: 14922
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14922/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:275 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14922/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.201.191/tcp/14923/p2p/16Uiu2HAmKtRntH8Ju6NZoq2goUQvbiuGnPLbJqGuy6CUd5T34QP5","/ip4/172.18.201.191/tcp/14924/ws/p2p/16Uiu2HAmKtRntH8Ju6NZoq2goUQvbiuGnPLbJqGuy6CUd5T34QP5"],"enrUri":"enr:-LO4QLe-nkSUuRrOt7ViY4wzRks286MyRJ_7_O0928GNpgqAFrfdsFq3i17L4TXXpYLSNTYZW6GuZTZdvt-OcaehwCgBgmlkgnY0gmlwhKwSyb-KbXVsdGlhZGRyc4wACgSsEsm_BjpM3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNrcyAlCUtlFmu8qI_OslNgagpvzFedJT1dXfnSmYjOFIN0Y3CCOkuDdWRwgjpNhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:280 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14922/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.0.160/tcp/33796/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/store_node1_2024-08-09_06-55-54__76dccf36-d19c-47e0-a111-689c4f593af8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.9.71
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['38458', '38459', '38460', '38461', '38462']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:429 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:161 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:163 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 38458:38458 -p 38459:38459 -p 38460:38460 -p 38461:38461 -p 38462:38462 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38460 --rest-port=38458 --tcp-port=38459 --discv5-udp-port=38461 --rest-address=0.0.0.0 --nat=extip:172.18.9.71 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38462 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QOZjUXM0zeaVD_qnccdb45CrWja-ENH43fw0UVH3qT-MfBzIL31ZAniqJFmXKxDFHAPLTVrH0Pv5bWxFh7N9NGUBgmlkgnY0gmlwhKwSAKCKbXVsdGlhZGRyc4wACgSsEgCgBoQF3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CChASDdWRwgoQGhXdha3UyCw --storenode=/ip4/172.18.0.160/tcp/33796/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.0.160/tcp/33796/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.9.71 waku 2ea77ab5b4a365eebf5aaa7e07336caeeef91812721c69d908f78d2b2fc47a3f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 2ea77ab5b4a3. Setting up logs at ./log/docker/store_node1_2024-08-09_06-55-54__76dccf36-d19c-47e0-a111-689c4f593af8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:175 Started container from image wakuorg/nwaku:latest. REST: 38458
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38458/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:275 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38458/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.71/tcp/38459/p2p/16Uiu2HAm424qzKzEVrpkuUGfmZQCxLEriVwJJne99GzxcSHdsQWj","/ip4/172.18.9.71/tcp/38460/ws/p2p/16Uiu2HAm424qzKzEVrpkuUGfmZQCxLEriVwJJne99GzxcSHdsQWj"],"enrUri":"enr:-LO4QFg33Qb4Pkf-fMYawSmIa0m425mMzw3wUEii3wVNXbyLXNpL7-3OQ5bT1QipUh8aFM1py8u9kEEQZWWvojc3m1cBgmlkgnY0gmlwhKwSCUeKbXVsdGlhZGRyc4wACgSsEglHBpY83QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ_rRjSQzinQ4jkZjVIYfDDEeB6L7X1DV8lUjPvmV_JyIN0Y3CCljuDdWRwgpY9hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:280 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38458/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.0.160/tcp/33796/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38458/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.201.191/tcp/14923/p2p/16Uiu2HAmKtRntH8Ju6NZoq2goUQvbiuGnPLbJqGuy6CUd5T34QP5"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33795/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14922/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38458/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1723186558779604736}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:217 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33795/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"mboiIkf4cWlSAsMW9eZGO/NIPceFLvaFXyVKfCHIKrA="}]}'
[35mDEBUG   [0m src.steps.store:store.py:217 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38458/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"6d689d402d80c181fc06","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"mboiIkf4cWlSAsMW9eZGO/NIPceFLvaFXyVKfCHIKrA="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:219 Stopping container with id 2a0cb60c14d2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:219 Stopping container with id a22ed6ee2e87
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:219 Stopping container with id 2ea77ab5b4a3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Container stopped.