[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_pubsub_topic_list_instead_of_string with id: 2025-01-18_04-03-29__2d9c1b52-6c86-4739-9433-00d9621b1167
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-18_04-03-29__2d9c1b52-6c86-4739-9433-00d9621b1167__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.124.226
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['44081', '44082', '44083', '44084', '44085']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 44081:44081 -p 44082:44082 -p 44083:44083 -p 44084:44084 -p 44085:44085 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44083 --rest-port=44081 --tcp-port=44082 --discv5-udp-port=44084 --rest-address=0.0.0.0 --nat=extip:172.18.124.226 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4e2dddff4efccf64a49cf2d8e5de2a98beeff5ac512fb24bc7a45d60d43eb775 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44085 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.124.226 waku 4d3d0fa0727d6c5d2f7d3a1cda7e1c8bd20d791181213f688eda3a0c982f799f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4d3d0fa0727d. Setting up logs at ./log/docker/node1_2025-01-18_04-03-29__2d9c1b52-6c86-4739-9433-00d9621b1167__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 44081
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container cf97284ac126. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44081/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44081/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.124.226/tcp/44082/p2p/16Uiu2HAm42YQcdcJqiFZkFMfohsSHJX8PZvAF9xhyCQyYmrB9g68","/ip4/172.18.124.226/tcp/44083/ws/p2p/16Uiu2HAm42YQcdcJqiFZkFMfohsSHJX8PZvAF9xhyCQyYmrB9g68"],"enrUri":"enr:-L24QHtgNoAKcajgYYovqctSe-VGn4fUlx7wDkdoReQEjzamYfpEwhdyrFV4D3Ey2aeI-TqNVQR1slgEk-oayoHk6nACgmlkgnY0gmlwhKwSfOKKbXVsdGlhZGRyc5YACASsEnziBqwyAAoErBJ84gasM90DgnJzhQADAQAAiXNlY3AyNTZrMaECf8xDEhMp8x-Hm5I_a8pm-Le7OcPQFsL4wjypu0sD66WDdGNwgqwyg3VkcIKsNIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-18_04-03-29__2d9c1b52-6c86-4739-9433-00d9621b1167__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.174.250
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['38288', '38289', '38290', '38291', '38292']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 38288:38288 -p 38289:38289 -p 38290:38290 -p 38291:38291 -p 38292:38292 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38290 --rest-port=38288 --tcp-port=38289 --discv5-udp-port=38291 --rest-address=0.0.0.0 --nat=extip:172.18.174.250 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c382cc6d0fedce8aaf4a6676b0b995ee0a8bfe1ee2fbcffca35fdc6ff06b78f6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38292 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QHtgNoAKcajgYYovqctSe-VGn4fUlx7wDkdoReQEjzamYfpEwhdyrFV4D3Ey2aeI-TqNVQR1slgEk-oayoHk6nACgmlkgnY0gmlwhKwSfOKKbXVsdGlhZGRyc5YACASsEnziBqwyAAoErBJ84gasM90DgnJzhQADAQAAiXNlY3AyNTZrMaECf8xDEhMp8x-Hm5I_a8pm-Le7OcPQFsL4wjypu0sD66WDdGNwgqwyg3VkcIKsNIV3YWt1MgU --filternode=/ip4/172.18.124.226/tcp/44082/p2p/16Uiu2HAm42YQcdcJqiFZkFMfohsSHJX8PZvAF9xhyCQyYmrB9g68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.174.250 waku ecae5afdab71c9a1d1cf234d3cb7928113d8949769d548d4ce580b9002fb5d85
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ecae5afdab71. Setting up logs at ./log/docker/node2_2025-01-18_04-03-29__2d9c1b52-6c86-4739-9433-00d9621b1167__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 38288
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38288/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38288/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.174.250/tcp/38289/p2p/16Uiu2HAmFXoUqKxtYfJHYMhYDyAjEQtoLazA3J6wpHX3aUcCfAoK","/ip4/172.18.174.250/tcp/38290/ws/p2p/16Uiu2HAmFXoUqKxtYfJHYMhYDyAjEQtoLazA3J6wpHX3aUcCfAoK"],"enrUri":"enr:-L24QPcDTnzReJDGosyWvHPtx5f0rBcdQUzmxhnBuufIZ5mbSGz7gd7MAr7NDco5_rbJ-TDC48vQHs1IeOdWDk-pUZMCgmlkgnY0gmlwhKwSrvqKbXVsdGlhZGRyc5YACASsEq76BpWRAAoErBKu-gaVkt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDKru0Vrz-dRvS7iIYUY0h-kDOD01tkM5QwQMoAa3rUIKDdGNwgpWRg3VkcIKVk4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38288/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.124.226/tcp/44082/p2p/16Uiu2HAm42YQcdcJqiFZkFMfohsSHJX8PZvAF9xhyCQyYmrB9g68"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44081/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38288/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0efa0a01-6935-499e-8108-1bb428427c0b", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"0efa0a01-6935-499e-8108-1bb428427c0b","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:38288/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": ["/waku/2/rs/3/1"]}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:38288/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4d3d0fa0727d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ecae5afdab71
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4d3d0fa0727d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.