[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publish_with_invalid_meta with id: 2025-01-18_04-05-59__60472d11-ea04-4da5-a34f-0d50b8726a7a
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.relay:relay.py:34 Running fixture setup: setup_main_relay_nodes
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-18_04-05-59__60472d11-ea04-4da5-a34f-0d50b8726a7a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.2.159
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['21707', '21708', '21709', '21710', '21711']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 21707:21707 -p 21708:21708 -p 21709:21709 -p 21710:21710 -p 21711:21711 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21709 --rest-port=21707 --tcp-port=21708 --discv5-udp-port=21710 --rest-address=0.0.0.0 --nat=extip:172.18.2.159 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5b054af371ea418a2a0f74ce89748d52a9cb54ff35027d98e5b3b71cbf8824a9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21711 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.2.159 waku 2f0f34268685cea3edf0f668832b27832ea70618842307b04adba388a801192a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2f0f34268685. Setting up logs at ./log/docker/node1_2025-01-18_04-05-59__60472d11-ea04-4da5-a34f-0d50b8726a7a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 21707
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7dcd98a19f0c. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21707/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21707/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.2.159/tcp/21708/p2p/16Uiu2HAm96GZnHPZH7boi3Z4UuChZWrQRDjiMwJpLfdEvJPfp3ic","/ip4/172.18.2.159/tcp/21709/ws/p2p/16Uiu2HAm96GZnHPZH7boi3Z4UuChZWrQRDjiMwJpLfdEvJPfp3ic"],"enrUri":"enr:-L24QFdaYjQ3wVjX921wj9bHsSziLXJjnd3F4B6S8BV3KO6sFAGLJvQEjC_G7Sa7qKlK4pzRFOTr24dDF7cPL_EpuMECgmlkgnY0gmlwhKwSAp-KbXVsdGlhZGRyc5YACASsEgKfBlTMAAoErBICnwZUzd0DgnJzhQADAQAAiXNlY3AyNTZrMaECywsbeDTaz_DJo7ceb7yzeA3bPFIIMk7i8P-errbF6O2DdGNwglTMg3VkcIJUzoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-18_04-05-59__60472d11-ea04-4da5-a34f-0d50b8726a7a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.159.37
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['63260', '63261', '63262', '63263', '63264']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 63260:63260 -p 63261:63261 -p 63262:63262 -p 63263:63263 -p 63264:63264 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63262 --rest-port=63260 --tcp-port=63261 --discv5-udp-port=63263 --rest-address=0.0.0.0 --nat=extip:172.18.159.37 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ae3c67cd2ea31c0d4eae1d2bcecb68857a0e8a3f268e6b3dac1be7541be95295 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63264 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QFdaYjQ3wVjX921wj9bHsSziLXJjnd3F4B6S8BV3KO6sFAGLJvQEjC_G7Sa7qKlK4pzRFOTr24dDF7cPL_EpuMECgmlkgnY0gmlwhKwSAp-KbXVsdGlhZGRyc5YACASsEgKfBlTMAAoErBICnwZUzd0DgnJzhQADAQAAiXNlY3AyNTZrMaECywsbeDTaz_DJo7ceb7yzeA3bPFIIMk7i8P-errbF6O2DdGNwglTMg3VkcIJUzoV3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.159.37 waku f013c1d88349f8f1c968f2023fe2740b1cf96c51ca331d536cd4512ea883851f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f013c1d88349. Setting up logs at ./log/docker/node2_2025-01-18_04-05-59__60472d11-ea04-4da5-a34f-0d50b8726a7a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 63260
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63260/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63260/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.159.37/tcp/63261/p2p/16Uiu2HAkvF7MN4k9uSXTnKGArTWX9mfjcnnEMMrjPPiym3mwU1nB","/ip4/172.18.159.37/tcp/63262/ws/p2p/16Uiu2HAkvF7MN4k9uSXTnKGArTWX9mfjcnnEMMrjPPiym3mwU1nB"],"enrUri":"enr:-L24QIN6Or2xHmbs6H0y8dlfD2Ryp2BdKL77Z6XtXOsLVuBDQ1vgVX84AUBpZzCLjIC0OBGsOWXvp0O0laguzXOPArwCgmlkgnY0gmlwhKwSnyWKbXVsdGlhZGRyc5YACASsEp8lBvcdAAoErBKfJQb3Ht0DgnJzhQADAQAAiXNlY3AyNTZrMaECDCb8cxFwFdg-E--WOTvTGkLZ_zzyBxDhofFagF0ySdSDdGNwgvcdg3VkcIL3H4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63260/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.2.159/tcp/21708/p2p/16Uiu2HAm96GZnHPZH7boi3Z4UuChZWrQRDjiMwJpLfdEvJPfp3ic"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.relay:relay.py:59 Running fixture setup: subscribe_main_relay_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21707/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63260/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21707/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21707/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1737173161933240832,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63260/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1737173161933240832,"ephemeral":false}]'
[32mINFO    [0m src.steps.relay:relay.py:71 WARM UP successful!!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21707/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)', "meta": "Relay works!!"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:21707/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Incorrect base64 string'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2f0f34268685
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f013c1d88349
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2f0f34268685. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.