[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_relay_and_store__peer_neither_relay_nor_store with id: 2025-01-18_04-12-30__de3cf411-18ce-4528-8709-790fa4bb3d51
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-18_04-12-30__de3cf411-18ce-4528-8709-790fa4bb3d51__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.51.252
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['32239', '32240', '32241', '32242', '32243']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 32239:32239 -p 32240:32240 -p 32241:32241 -p 32242:32242 -p 32243:32243 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32241 --rest-port=32239 --tcp-port=32240 --discv5-udp-port=32242 --rest-address=0.0.0.0 --nat=extip:172.18.51.252 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dde7c3c27e152acecff31217e13d8547ce04ca3ab0c08c5f5edbbebfb5b6d8da --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32243 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.51.252 waku 1a6f1d08f4f6dba4e9084c05211cf389528720c3e6b7d6f932951b2cd1974735
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1a6f1d08f4f6. Setting up logs at ./log/docker/publishing_node1_2025-01-18_04-12-30__de3cf411-18ce-4528-8709-790fa4bb3d51__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 32239
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 566cbe1b45cb. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32239/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32239/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.51.252/tcp/32240/p2p/16Uiu2HAmBsTPJbyj1fsma2HWQHFV6sTpcyGFvKM5hXmeawNi5ys9","/ip4/172.18.51.252/tcp/32241/ws/p2p/16Uiu2HAmBsTPJbyj1fsma2HWQHFV6sTpcyGFvKM5hXmeawNi5ys9"],"enrUri":"enr:-L24QC9J8Qyv0V1alhBIGufcjRUxoLbya_Sk7_4M-lOuXW8APi0wig3M4wfT_TZwJ3yXp5N1nxRAKV6HM2qc5tv4kYICgmlkgnY0gmlwhKwSM_yKbXVsdGlhZGRyc5YACASsEjP8Bn3wAAoErBIz_AZ98d0DgnJzhQADAQAAiXNlY3AyNTZrMaEC9FXZ3n2tBiX2gP9T8uK1nfXcWH46PftfAn-EtpjfcoyDdGNwgn3wg3VkcIJ98oV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-18_04-12-30__de3cf411-18ce-4528-8709-790fa4bb3d51__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.34.246
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37518', '37519', '37520', '37521', '37522']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37518:37518 -p 37519:37519 -p 37520:37520 -p 37521:37521 -p 37522:37522 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37520 --rest-port=37518 --tcp-port=37519 --discv5-udp-port=37521 --rest-address=0.0.0.0 --nat=extip:172.18.34.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a6b3b0bd9f8dbf29e3e30c5aeabf1f5c3b0c8723dc36fdafe2a2390a80f12408 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37522 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QC9J8Qyv0V1alhBIGufcjRUxoLbya_Sk7_4M-lOuXW8APi0wig3M4wfT_TZwJ3yXp5N1nxRAKV6HM2qc5tv4kYICgmlkgnY0gmlwhKwSM_yKbXVsdGlhZGRyc5YACASsEjP8Bn3wAAoErBIz_AZ98d0DgnJzhQADAQAAiXNlY3AyNTZrMaEC9FXZ3n2tBiX2gP9T8uK1nfXcWH46PftfAn-EtpjfcoyDdGNwgn3wg3VkcIJ98oV3YWt1MgM --storenode=/ip4/172.18.51.252/tcp/32240/p2p/16Uiu2HAmBsTPJbyj1fsma2HWQHFV6sTpcyGFvKM5hXmeawNi5ys9 --store=false --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.34.246 waku 57cc7dfccda2dffd0d5b1658f828cc7ed4832367b3930840eec3fe040ca7a740
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 57cc7dfccda2. Setting up logs at ./log/docker/store_node1_2025-01-18_04-12-30__de3cf411-18ce-4528-8709-790fa4bb3d51__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 37518
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37518/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37518/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.34.246/tcp/37519/p2p/16Uiu2HAm2yXVE2pkMiTnsDyAKMar4oyhPWHMaE1XyJHuw4TYwB3P","/ip4/172.18.34.246/tcp/37520/ws/p2p/16Uiu2HAm2yXVE2pkMiTnsDyAKMar4oyhPWHMaE1XyJHuw4TYwB3P"],"enrUri":"enr:-L24QMzme-jtnCMbk5EidnMTlnaaaipPQo35zr8oCbscydmxGgc-mxMaIv35uJiJhhIjLQfUYg6uUkX_BQSwnLVW9rQCgmlkgnY0gmlwhKwSIvaKbXVsdGlhZGRyc5YACASsEiL2BpKPAAoErBIi9gaSkN0DgnJzhQADAQAAiXNlY3AyNTZrMaECcCrKtG2gEOYVAvZZ-0eQkmh0QNxLt0IXCW5-nVYOsVKDdGNwgpKPg3VkcIKSkYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37518/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.51.252/tcp/32240/p2p/16Uiu2HAmBsTPJbyj1fsma2HWQHFV6sTpcyGFvKM5hXmeawNi5ys9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32239/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32239/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32239/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1a6f1d08f4f6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 57cc7dfccda2
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1a6f1d08f4f6. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-18_04-12-30__de3cf411-18ce-4528-8709-790fa4bb3d51__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-18_04-12-30__de3cf411-18ce-4528-8709-790fa4bb3d51__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_relay_and_store__peer_neither_relay_nor_store with id: 2025-01-18_04-12-35__21edf2c9-1f7b-4f39-8312-902060321053
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-18_04-12-35__21edf2c9-1f7b-4f39-8312-902060321053__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.57.126
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['58161', '58162', '58163', '58164', '58165']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 58161:58161 -p 58162:58162 -p 58163:58163 -p 58164:58164 -p 58165:58165 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58163 --rest-port=58161 --tcp-port=58162 --discv5-udp-port=58164 --rest-address=0.0.0.0 --nat=extip:172.18.57.126 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dfdcf8f7aa91e0eac9ebcf037959b901f90d47cf8a7f7bd3bf11fe7aad7acae7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58165 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.57.126 waku 41b41d8e97a3c33657ade36c6074889bdf5602cf540d4e1fd231602d80024ad3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 41b41d8e97a3. Setting up logs at ./log/docker/publishing_node1_2025-01-18_04-12-35__21edf2c9-1f7b-4f39-8312-902060321053__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 58161
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 57cc7dfccda2. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58161/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58161/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.57.126/tcp/58162/p2p/16Uiu2HAkwUMGifFSnw8JiZfQsCppSzHjpAUvBwoNpBpT4c6jxz8e","/ip4/172.18.57.126/tcp/58163/ws/p2p/16Uiu2HAkwUMGifFSnw8JiZfQsCppSzHjpAUvBwoNpBpT4c6jxz8e"],"enrUri":"enr:-L24QA0fxS_Qr3OKWoA4FBCcQEWot9IPX7QWOcFmx0B5A5RvN0vTUBIHQUQDp770ktWl3KKThSCthVdlyn__Yo60B4sCgmlkgnY0gmlwhKwSOX6KbXVsdGlhZGRyc5YACASsEjl-BuMyAAoErBI5fgbjM90DgnJzhQADAQAAiXNlY3AyNTZrMaECHmb2fuBpDnX2aE_MLb5ET7827sXvDbgp6auABLFMaFeDdGNwguMyg3VkcILjNIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-18_04-12-35__21edf2c9-1f7b-4f39-8312-902060321053__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.24.34
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['41952', '41953', '41954', '41955', '41956']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 41952:41952 -p 41953:41953 -p 41954:41954 -p 41955:41955 -p 41956:41956 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41954 --rest-port=41952 --tcp-port=41953 --discv5-udp-port=41955 --rest-address=0.0.0.0 --nat=extip:172.18.24.34 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=be3cb44af1404c1dc2be6e8c05bf28a1afec7cfeb35ee7d1449b21361c9a25fd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41956 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QA0fxS_Qr3OKWoA4FBCcQEWot9IPX7QWOcFmx0B5A5RvN0vTUBIHQUQDp770ktWl3KKThSCthVdlyn__Yo60B4sCgmlkgnY0gmlwhKwSOX6KbXVsdGlhZGRyc5YACASsEjl-BuMyAAoErBI5fgbjM90DgnJzhQADAQAAiXNlY3AyNTZrMaECHmb2fuBpDnX2aE_MLb5ET7827sXvDbgp6auABLFMaFeDdGNwguMyg3VkcILjNIV3YWt1MgM --storenode=/ip4/172.18.57.126/tcp/58162/p2p/16Uiu2HAkwUMGifFSnw8JiZfQsCppSzHjpAUvBwoNpBpT4c6jxz8e --store=false --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.24.34 waku 2c80fc7f32686038910f5f81d85253f0d7462c1a1bae6f5db43d6b4dd2b71ef0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2c80fc7f3268. Setting up logs at ./log/docker/store_node1_2025-01-18_04-12-35__21edf2c9-1f7b-4f39-8312-902060321053__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 41952
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41952/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41952/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.24.34/tcp/41953/p2p/16Uiu2HAm66z1MqFShHMiJA5AujfXVeKcSSDRMRfMhHnRxiLoLanQ","/ip4/172.18.24.34/tcp/41954/ws/p2p/16Uiu2HAm66z1MqFShHMiJA5AujfXVeKcSSDRMRfMhHnRxiLoLanQ"],"enrUri":"enr:-L24QB4P_IDI6GwkeQ9P6fbS1fJASf1vAL0Hp0N-_T1MZTRtS5sdm0inAosSFXDbX0ubqT5uaGGSBd2To04qp3tlTK0CgmlkgnY0gmlwhKwSGCKKbXVsdGlhZGRyc5YACASsEhgiBqPhAAoErBIYIgaj4t0DgnJzhQADAQAAiXNlY3AyNTZrMaECnqbnbeMHceASGj2zM8Y6uqMyaskPti4PRwFrmQfvLGWDdGNwgqPhg3VkcIKj44V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41952/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.57.126/tcp/58162/p2p/16Uiu2HAkwUMGifFSnw8JiZfQsCppSzHjpAUvBwoNpBpT4c6jxz8e"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58161/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58161/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58161/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 41b41d8e97a3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2c80fc7f3268
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 41b41d8e97a3. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-18_04-12-35__21edf2c9-1f7b-4f39-8312-902060321053__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-18_04-12-35__21edf2c9-1f7b-4f39-8312-902060321053__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_relay_and_store__peer_neither_relay_nor_store with id: 2025-01-18_04-12-40__55c52e8c-023d-426a-8814-f483ecd0ddf2
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-18_04-12-40__55c52e8c-023d-426a-8814-f483ecd0ddf2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.7.253
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['53904', '53905', '53906', '53907', '53908']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 53904:53904 -p 53905:53905 -p 53906:53906 -p 53907:53907 -p 53908:53908 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53906 --rest-port=53904 --tcp-port=53905 --discv5-udp-port=53907 --rest-address=0.0.0.0 --nat=extip:172.18.7.253 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=536ddf92cf0bd5bcdc8156a5b71ffea2d00afc5dc17af8d285fabe4930ea9a87 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53908 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.7.253 waku 38e42a5e3a9b68dc35d278fe6bfde0832469dec7a588409963c89b9243dd8648
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 38e42a5e3a9b. Setting up logs at ./log/docker/publishing_node1_2025-01-18_04-12-40__55c52e8c-023d-426a-8814-f483ecd0ddf2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 53904
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2c80fc7f3268. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53904/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53904/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.7.253/tcp/53905/p2p/16Uiu2HAmAG2VNeJVMWw7k6zjMpSYgS2GyWdCHH4s9LJeus2bL58z","/ip4/172.18.7.253/tcp/53906/ws/p2p/16Uiu2HAmAG2VNeJVMWw7k6zjMpSYgS2GyWdCHH4s9LJeus2bL58z"],"enrUri":"enr:-L24QCuvga2yEHFhPErayKvdBEnba3vPZbw5Trv-x_mVcVYtQNwb6PG1dHYVJgODnYgZAvaMxXeery0ecOw7BxMJ4TcCgmlkgnY0gmlwhKwSB_2KbXVsdGlhZGRyc5YACASsEgf9BtKRAAoErBIH_QbSkt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3GavwV8_K47nNhJrfvwooj5Lfrqt1NaKBqbV0w1B3peDdGNwgtKRg3VkcILSk4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-18_04-12-40__55c52e8c-023d-426a-8814-f483ecd0ddf2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.150.27
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['52782', '52783', '52784', '52785', '52786']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 52782:52782 -p 52783:52783 -p 52784:52784 -p 52785:52785 -p 52786:52786 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52784 --rest-port=52782 --tcp-port=52783 --discv5-udp-port=52785 --rest-address=0.0.0.0 --nat=extip:172.18.150.27 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ff24c32bafb9c99e9be67a8451960bccfc0ec65a7b22cbaf58ddcbffeae577ee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52786 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QCuvga2yEHFhPErayKvdBEnba3vPZbw5Trv-x_mVcVYtQNwb6PG1dHYVJgODnYgZAvaMxXeery0ecOw7BxMJ4TcCgmlkgnY0gmlwhKwSB_2KbXVsdGlhZGRyc5YACASsEgf9BtKRAAoErBIH_QbSkt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3GavwV8_K47nNhJrfvwooj5Lfrqt1NaKBqbV0w1B3peDdGNwgtKRg3VkcILSk4V3YWt1MgM --storenode=/ip4/172.18.7.253/tcp/53905/p2p/16Uiu2HAmAG2VNeJVMWw7k6zjMpSYgS2GyWdCHH4s9LJeus2bL58z --store=false --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.150.27 waku 33c62ef8c4ba2e3d09e1439d430e85eeaae8d55af0398df329fb6f379af0ef74
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 33c62ef8c4ba. Setting up logs at ./log/docker/store_node1_2025-01-18_04-12-40__55c52e8c-023d-426a-8814-f483ecd0ddf2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 52782
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52782/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52782/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.150.27/tcp/52783/p2p/16Uiu2HAmDbvp5o72oii7a9iXTrB8xNSNWigTSzKMZEpxvNu7yiaX","/ip4/172.18.150.27/tcp/52784/ws/p2p/16Uiu2HAmDbvp5o72oii7a9iXTrB8xNSNWigTSzKMZEpxvNu7yiaX"],"enrUri":"enr:-L24QNP6pyIvbp2N-RVFulIfcrwscfjZn5hsi5RTdeKS514lEFIcrA93mrnwTv6q8txAWamAojisKHFkg9I_hXSJVtUCgmlkgnY0gmlwhKwSlhuKbXVsdGlhZGRyc5YACASsEpYbBs4vAAoErBKWGwbOMN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDhLxq4Ei_7Fu_wHZRMdKHi1lhy2NzM6m0G-RhohozryDdGNwgs4vg3VkcILOMYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52782/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.7.253/tcp/53905/p2p/16Uiu2HAmAG2VNeJVMWw7k6zjMpSYgS2GyWdCHH4s9LJeus2bL58z"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53904/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53904/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53904/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 38e42a5e3a9b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 33c62ef8c4ba
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 38e42a5e3a9b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-18_04-12-40__55c52e8c-023d-426a-8814-f483ecd0ddf2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-18_04-12-40__55c52e8c-023d-426a-8814-f483ecd0ddf2__wakuorg_nwaku:latest.log