[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_relaying_node with id: 2025-01-18_04-02-25__a235fdb5-f33a-41a4-b0fe-24524382d1d3
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-18_04-02-25__a235fdb5-f33a-41a4-b0fe-24524382d1d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-18_04-02-25__a235fdb5-f33a-41a4-b0fe-24524382d1d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-18_04-02-25__a235fdb5-f33a-41a4-b0fe-24524382d1d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:33 Network waku created
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.222.240
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['2834', '2835', '2836', '2837', '2838']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 2834:2834 -p 2835:2835 -p 2836:2836 -p 2837:2837 -p 2838:2838 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2836 --rest-port=2834 --tcp-port=2835 --discv5-udp-port=2837 --rest-address=0.0.0.0 --nat=extip:172.18.222.240 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ce7b0b1be8b46f219fd3f7fcd02dfd0e7f0a10fd197a5dffecb9a3de197c5641 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2838 --metrics-logging=true --filter=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.222.240 waku ed3ea958c2c7b51553aa227546a1e26ac9fef051c05bec92b2bcd3600f664b0b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ed3ea958c2c7. Setting up logs at ./log/docker/node1_2025-01-18_04-02-25__a235fdb5-f33a-41a4-b0fe-24524382d1d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 2834
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2834/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2834/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.222.240/tcp/2835/p2p/16Uiu2HAkyAsLwJzQMAmyQrxfYkZt3PvkMhqjfp6d4Qua9UnbdqRz","/ip4/172.18.222.240/tcp/2836/ws/p2p/16Uiu2HAkyAsLwJzQMAmyQrxfYkZt3PvkMhqjfp6d4Qua9UnbdqRz"],"enrUri":"enr:-L24QHimIbTI22wQvI9WQcgKb-OYu1EypvXU0wREdb4tSFqFZ32sM_Zy1w_1JFkHzFgugMXB6Wj7Ba3FtMt_4Yz-focCgmlkgnY0gmlwhKwS3vCKbXVsdGlhZGRyc5YACASsEt7wBgsTAAoErBLe8AYLFN0DgnJzhQADAQAAiXNlY3AyNTZrMaECN6PisE2tbR8nBd5Sy33w79jtI2o3CQVIH4sdiuj-TQmDdGNwggsTg3VkcIILFYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.173.212
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['20487', '20488', '20489', '20490', '20491']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 20487:20487 -p 20488:20488 -p 20489:20489 -p 20490:20490 -p 20491:20491 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20489 --rest-port=20487 --tcp-port=20488 --discv5-udp-port=20490 --rest-address=0.0.0.0 --nat=extip:172.18.173.212 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5de1dbda8eba6ab2ec96ffcaa1af9e0f3fa9f6d33bebb0ca9e8c3785ac491ff8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20491 --metrics-logging=true --filter=true --relay=true --discv5-bootstrap-node=enr:-L24QHimIbTI22wQvI9WQcgKb-OYu1EypvXU0wREdb4tSFqFZ32sM_Zy1w_1JFkHzFgugMXB6Wj7Ba3FtMt_4Yz-focCgmlkgnY0gmlwhKwS3vCKbXVsdGlhZGRyc5YACASsEt7wBgsTAAoErBLe8AYLFN0DgnJzhQADAQAAiXNlY3AyNTZrMaECN6PisE2tbR8nBd5Sy33w79jtI2o3CQVIH4sdiuj-TQmDdGNwggsTg3VkcIILFYV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.173.212 waku d72cc0bc424a1656230034bf5ab3cea2549aef0c6f825770734a1880de55aa94
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d72cc0bc424a. Setting up logs at ./log/docker/node2_2025-01-18_04-02-25__a235fdb5-f33a-41a4-b0fe-24524382d1d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 20487
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20487/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20487/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.173.212/tcp/20488/p2p/16Uiu2HAmAEDWoSMkBPWQZiokC5PUntg19hvDkbX23rNsfQfLQ6tc","/ip4/172.18.173.212/tcp/20489/ws/p2p/16Uiu2HAmAEDWoSMkBPWQZiokC5PUntg19hvDkbX23rNsfQfLQ6tc"],"enrUri":"enr:-L24QMjfJsI486miir-qv8LsOG2kUJzd_AQn7nywliFMUJu_QT-yubETg0iEkwGCx__SeLhGVZUhXhQXzZ6X24VTyHICgmlkgnY0gmlwhKwSrdSKbXVsdGlhZGRyc5YACASsEq3UBlAIAAoErBKt1AZQCd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC2-_9kQx7ki_8m0Loevi2u6mxLAj2dUQQVj70_za-S62DdGNwglAIg3VkcIJQCoV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.26.185
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['12547', '12548', '12549', '12550', '12551']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 12547:12547 -p 12548:12548 -p 12549:12549 -p 12550:12550 -p 12551:12551 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12549 --rest-port=12547 --tcp-port=12548 --discv5-udp-port=12550 --rest-address=0.0.0.0 --nat=extip:172.18.26.185 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bcdeed6d5fd00f9c9f0ff1046c4fc0b8d5a1d6f1a6d2dc2ac6a86e21d6ca5ae2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12551 --metrics-logging=true --relay=false --filternode=/ip4/172.18.173.212/tcp/20488/p2p/16Uiu2HAmAEDWoSMkBPWQZiokC5PUntg19hvDkbX23rNsfQfLQ6tc --discv5-bootstrap-node=enr:-L24QMjfJsI486miir-qv8LsOG2kUJzd_AQn7nywliFMUJu_QT-yubETg0iEkwGCx__SeLhGVZUhXhQXzZ6X24VTyHICgmlkgnY0gmlwhKwSrdSKbXVsdGlhZGRyc5YACASsEq3UBlAIAAoErBKt1AZQCd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC2-_9kQx7ki_8m0Loevi2u6mxLAj2dUQQVj70_za-S62DdGNwglAIg3VkcIJQCoV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.26.185 waku 5ad9a57448cc780d50a14831d7cd7c4f1f95da357cec2021a23d619605b0caa5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5ad9a57448cc. Setting up logs at ./log/docker/node3_2025-01-18_04-02-25__a235fdb5-f33a-41a4-b0fe-24524382d1d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 12547
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12547/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12547/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.26.185/tcp/12548/p2p/16Uiu2HAm9SMoa9HowtaLvouWeTfySQJdF24aSxT48AJG1xejMdsM","/ip4/172.18.26.185/tcp/12549/ws/p2p/16Uiu2HAm9SMoa9HowtaLvouWeTfySQJdF24aSxT48AJG1xejMdsM"],"enrUri":"enr:-L24QLn-5RkaOVQwPAUy1493zvfxHxvqJ-v0J1qFQu6-idCYeg2UVrfpfjlqyMAKVSKMFDRLEfffArDv1G7lzw-1PRcCgmlkgnY0gmlwhKwSGrmKbXVsdGlhZGRyc5YACASsEhq5BjEEAAoErBIauQYxBd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC0DClVnaZzhcqARPUXX5RxdzFXeeGAUy07YFlGhjV4RiDdGNwgjEEg3VkcIIxBoV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2834/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20487/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12547/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2834/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.173.212/tcp/20488/p2p/16Uiu2HAmAEDWoSMkBPWQZiokC5PUntg19hvDkbX23rNsfQfLQ6tc","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20487/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.222.240/tcp/2835/p2p/16Uiu2HAkyAsLwJzQMAmyQrxfYkZt3PvkMhqjfp6d4Qua9UnbdqRz","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.26.185/tcp/12548/p2p/16Uiu2HAm9SMoa9HowtaLvouWeTfySQJdF24aSxT48AJG1xejMdsM","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12547/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.173.212/tcp/20488/p2p/16Uiu2HAmAEDWoSMkBPWQZiokC5PUntg19hvDkbX23rNsfQfLQ6tc","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2834/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12547/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1737172981872044032,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ed3ea958c2c7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d72cc0bc424a
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ed3ea958c2c7. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5ad9a57448cc
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d72cc0bc424a. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.