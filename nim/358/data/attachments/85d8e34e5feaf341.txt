[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-09-12_06-09-27__85edd389-1b79-4ace-be99-a791cc797832
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-12_06-09-27__85edd389-1b79-4ace-be99-a791cc797832__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.39.47
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['30364', '30365', '30366', '30367', '30368']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 30364:30364 -p 30365:30365 -p 30366:30366 -p 30367:30367 -p 30368:30368 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30366 --rest-port=30364 --tcp-port=30365 --discv5-udp-port=30367 --rest-address=0.0.0.0 --nat=extip:172.18.39.47 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7abac7a867f3ad4ab35e96da5806bac0a99ab8e76af9bdbbd89d75c39649beb8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30368 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.39.47 waku b78efc5fe8b15b15590e3789c1c2e91075bfc413250f85edfb9b752de74f5890
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b78efc5fe8b1. Setting up logs at ./log/docker/receiving_node1_2024-09-12_06-09-27__85edd389-1b79-4ace-be99-a791cc797832__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 30364
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30364/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30364/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.39.47/tcp/30365/p2p/16Uiu2HAmT6yPtaDVGYZPXRAfdLyNJk5Vigz5niTvYAVhMx2BALP6","/ip4/172.18.39.47/tcp/30366/ws/p2p/16Uiu2HAmT6yPtaDVGYZPXRAfdLyNJk5Vigz5niTvYAVhMx2BALP6"],"enrUri":"enr:-LO4QByOqgzibpHHH-iS5Iwx9feNoPvR32JlucWQdSOht19MKkPhilSlT3rXxRA3arA5MiDTPNGqoDluFEVeWnHQzukBgmlkgnY0gmlwhKwSJy-KbXVsdGlhZGRyc4wACgSsEicvBnae3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPWq6NTVxFXX8Ke2n1aNFLQ6SCxcnDiFTWr2ZxL8pG4FYN0Y3CCdp2DdWRwgnafhXdha3UyDQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-12_06-09-27__85edd389-1b79-4ace-be99-a791cc797832__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.89.188
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['32123', '32124', '32125', '32126', '32127']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 32123:32123 -p 32124:32124 -p 32125:32125 -p 32126:32126 -p 32127:32127 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32125 --rest-port=32123 --tcp-port=32124 --discv5-udp-port=32126 --rest-address=0.0.0.0 --nat=extip:172.18.89.188 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=db9cfbcfe03fca51f65dfffb1aeadfb20b1f346baa6f0a8924fa4b6f5b9d5b59 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32127 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.89.188 waku 4448f8a1f8ee197b8755fd45d56f2d84f2bf4118a3706f20fccf9f0beccebc44
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4448f8a1f8ee. Setting up logs at ./log/docker/receiving_node2_2024-09-12_06-09-27__85edd389-1b79-4ace-be99-a791cc797832__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 32123
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32123/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32123/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.89.188/tcp/32124/p2p/16Uiu2HAmU4LWqJj96At7uUhWjjfVcVNBnnQJNhF3eRh4LhwTEHgw","/ip4/172.18.89.188/tcp/32125/ws/p2p/16Uiu2HAmU4LWqJj96At7uUhWjjfVcVNBnnQJNhF3eRh4LhwTEHgw"],"enrUri":"enr:-LO4QHTqDcXwQWVz5rN5KyBk5D91HZVwgmdhYnJdWL9U-ea6SqNdoQ9JFZ8UsqOUCicGvBS4taeDo1L7Yk7atKEJwSMBgmlkgnY0gmlwhKwSWbyKbXVsdGlhZGRyc4wACgSsElm8Bn193QOCcnOFAAMBAACJc2VjcDI1NmsxoQPk2nZvAjkC6Si7T6qNikMCk_z_AzJkbXnWPXEG1xaPNIN0Y3CCfXyDdWRwgn1-hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32123/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.39.47/tcp/30365/p2p/16Uiu2HAmT6yPtaDVGYZPXRAfdLyNJk5Vigz5niTvYAVhMx2BALP6"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-12_06-09-27__85edd389-1b79-4ace-be99-a791cc797832__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.225.168
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['7699', '7700', '7701', '7702', '7703']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 7699:7699 -p 7700:7700 -p 7701:7701 -p 7702:7702 -p 7703:7703 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7701 --rest-port=7699 --tcp-port=7700 --discv5-udp-port=7702 --rest-address=0.0.0.0 --nat=extip:172.18.225.168 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=09373b9b62fd68b64dd2f5b4bec96eabf891de55b2fafb69f802ce98aeccdf8f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7703 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QByOqgzibpHHH-iS5Iwx9feNoPvR32JlucWQdSOht19MKkPhilSlT3rXxRA3arA5MiDTPNGqoDluFEVeWnHQzukBgmlkgnY0gmlwhKwSJy-KbXVsdGlhZGRyc4wACgSsEicvBnae3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPWq6NTVxFXX8Ke2n1aNFLQ6SCxcnDiFTWr2ZxL8pG4FYN0Y3CCdp2DdWRwgnafhXdha3UyDQ --lightpushnode=/ip4/172.18.39.47/tcp/30365/p2p/16Uiu2HAmT6yPtaDVGYZPXRAfdLyNJk5Vigz5niTvYAVhMx2BALP6 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.225.168 waku 63ffcaee6ffc5114e6ee196f55159b165208e5ba4b8c6df6eb78975cd5303eb8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 63ffcaee6ffc. Setting up logs at ./log/docker/lightpush_node1_2024-09-12_06-09-27__85edd389-1b79-4ace-be99-a791cc797832__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 7699
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7699/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7699/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.225.168/tcp/7700/p2p/16Uiu2HAmDUVhjHLQFhpGi86ENZ8zeBoR7wcCV149SgD6VWihwoNc","/ip4/172.18.225.168/tcp/7701/ws/p2p/16Uiu2HAmDUVhjHLQFhpGi86ENZ8zeBoR7wcCV149SgD6VWihwoNc"],"enrUri":"enr:-LO4QEhv1AvufWwpN4Zg_hfIQrdtj7YDRHvdNgvFJkUUZrQJZV668HWsOPmIUpE0go3SqF-x-hvpx7AMpqHns67Pud0BgmlkgnY0gmlwhKwS4aiKbXVsdGlhZGRyc4wACgSsEuGoBh4V3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMMK3yl08gWNt4NAFpj0zMF2dTvD3OejgKcA7T6_77jLYN0Y3CCHhSDdWRwgh4WhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7699/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.39.47/tcp/30365/p2p/16Uiu2HAmT6yPtaDVGYZPXRAfdLyNJk5Vigz5niTvYAVhMx2BALP6"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7699/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.89.188/tcp/32124/p2p/16Uiu2HAmU4LWqJj96At7uUhWjjfVcVNBnnQJNhF3eRh4LhwTEHgw"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30364/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32123/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7699/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726121372813875968}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30364/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726121372813875968,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32123/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726121372813875968,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b78efc5fe8b1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4448f8a1f8ee
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 63ffcaee6ffc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.