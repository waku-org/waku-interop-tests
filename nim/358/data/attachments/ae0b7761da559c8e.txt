[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter with id: 2024-09-12_05-59-16__8020d9a7-c88f-4ec9-8e7c-403b2bf616f9
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-12_05-59-16__8020d9a7-c88f-4ec9-8e7c-403b2bf616f9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.199.95
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['3156', '3157', '3158', '3159', '3160']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 3156:3156 -p 3157:3157 -p 3158:3158 -p 3159:3159 -p 3160:3160 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3158 --rest-port=3156 --tcp-port=3157 --discv5-udp-port=3159 --rest-address=0.0.0.0 --nat=extip:172.18.199.95 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f6a8e9b1bb2bb3953d3bb6aaeccb89ffc90fdbea3abbc79a8a4b1dcd0e6b8d87 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3160 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.199.95 waku f4186f61a02d3f7138c76f6935bbfba0157511295a769610c69fe40ee575143d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f4186f61a02d. Setting up logs at ./log/docker/node1_2024-09-12_05-59-16__8020d9a7-c88f-4ec9-8e7c-403b2bf616f9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 3156
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3156/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3156/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.199.95/tcp/3157/p2p/16Uiu2HAmD7Bmtg67PoY4Mq7VshN7rC6stFHtcT9wdBKfyvb9mdp6","/ip4/172.18.199.95/tcp/3158/ws/p2p/16Uiu2HAmD7Bmtg67PoY4Mq7VshN7rC6stFHtcT9wdBKfyvb9mdp6"],"enrUri":"enr:-LO4QD-hNLbHBC60Hyrg_sw-P7BVjdIOxsCbMP4pfrUNSI11ctFD-tBZsPmSoXTzLYGy7-ahcqjRLcKyqkqd4eyO6EMBgmlkgnY0gmlwhKwSx1-KbXVsdGlhZGRyc4wACgSsEsdfBgxW3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMGtgS098dfvT6DyeTSNIEAk1s_lDZXb26deF6WXXCDm4N0Y3CCDFWDdWRwggxXhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-12_05-59-16__8020d9a7-c88f-4ec9-8e7c-403b2bf616f9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.26.210
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['56888', '56889', '56890', '56891', '56892']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 56888:56888 -p 56889:56889 -p 56890:56890 -p 56891:56891 -p 56892:56892 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56890 --rest-port=56888 --tcp-port=56889 --discv5-udp-port=56891 --rest-address=0.0.0.0 --nat=extip:172.18.26.210 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2db6f4dba020cf48fccb7ceb2b1a4ac4850a2e5c0ec87ed1b19d3286a8064ac2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56892 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QD-hNLbHBC60Hyrg_sw-P7BVjdIOxsCbMP4pfrUNSI11ctFD-tBZsPmSoXTzLYGy7-ahcqjRLcKyqkqd4eyO6EMBgmlkgnY0gmlwhKwSx1-KbXVsdGlhZGRyc4wACgSsEsdfBgxW3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMGtgS098dfvT6DyeTSNIEAk1s_lDZXb26deF6WXXCDm4N0Y3CCDFWDdWRwggxXhXdha3UyBQ --filternode=/ip4/172.18.199.95/tcp/3157/p2p/16Uiu2HAmD7Bmtg67PoY4Mq7VshN7rC6stFHtcT9wdBKfyvb9mdp6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.26.210 waku f023cdb2a889e4e94ae9f4bcaceafc1dd1b9ddbaacfcd5043c0064ec40497e8f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f023cdb2a889. Setting up logs at ./log/docker/node1_2024-09-12_05-59-16__8020d9a7-c88f-4ec9-8e7c-403b2bf616f9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 56888
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56888/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56888/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.26.210/tcp/56889/p2p/16Uiu2HAmNsWsQdQ6x4u3JnRToEFtP2m2t4RcufpzcdnDvcb3LfJw","/ip4/172.18.26.210/tcp/56890/ws/p2p/16Uiu2HAmNsWsQdQ6x4u3JnRToEFtP2m2t4RcufpzcdnDvcb3LfJw"],"enrUri":"enr:-LO4QIPB-wBEZ95LA7x1iP3dXKjtLrzJKTAakp14qDQeV0POB-whIswbtvHsoeXj24kyOYttjJdGaJ0MPFBm3gW2kcMBgmlkgnY0gmlwhKwSGtKKbXVsdGlhZGRyc4wACgSsEhrSBt463QOCcnOFAAMBAACJc2VjcDI1NmsxoQOXyljkT2_LbtScZAujisEO6djEq42FJnXRRE8qIod_AIN0Y3CC3jmDdWRwgt47hXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3156/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56888/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "5e5f5a75-d8e2-4ee0-8f88-65c82c4fded0", "contentFilters": ["/test/1/waku-relay/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"5e5f5a75-d8e2-4ee0-8f88-65c82c4fded0","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3156/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56888/filter/v2/messages/%2Ftest%2F1%2Fwaku-relay%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1726120763453436928,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f4186f61a02d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f023cdb2a889
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.