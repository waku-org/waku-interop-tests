[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_content_topic[/app/29/sometopic/someencoding] with id: 2024-09-12_06-16-39__f06a7871-32a3-47b2-a667-ac2cf3c9727f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-12_06-16-39__f06a7871-32a3-47b2-a667-ac2cf3c9727f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.249.32
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['31321', '31322', '31323', '31324', '31325']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 31321:31321 -p 31322:31322 -p 31323:31323 -p 31324:31324 -p 31325:31325 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31323 --rest-port=31321 --tcp-port=31322 --discv5-udp-port=31324 --rest-address=0.0.0.0 --nat=extip:172.18.249.32 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ff9834bbb68acf6ca89c5ddee7c48e83298056bccca7dfb1e89e7e876c3f7098 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31325 --metrics-logging=true --relay=true --filter=true --content-topic=/app/29/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.249.32 waku 672623a21206e3f47a1b2c4a88f294cb3b076c5427a691cb51617818973e0cbf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 672623a21206. Setting up logs at ./log/docker/node1_2024-09-12_06-16-39__f06a7871-32a3-47b2-a667-ac2cf3c9727f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 31321
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31321/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31321/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.249.32/tcp/31322/p2p/16Uiu2HAmRWzYtqjF3C9Q7MfKU1xnmCQb8jBWep2DfDxKw9TKxvd6","/ip4/172.18.249.32/tcp/31323/ws/p2p/16Uiu2HAmRWzYtqjF3C9Q7MfKU1xnmCQb8jBWep2DfDxKw9TKxvd6"],"enrUri":"enr:-LO4QHUEjYOOML4XviXFhKcq-atvWXT1F2kCYrVds1M-SF6ZCJZWbW6-SrbShVuuxjcZVuWPEs6ZTzub3aY7Eq4CX1kBgmlkgnY0gmlwhKwS-SCKbXVsdGlhZGRyc4wACgSsEvkgBnpb3QOCcnOFAAIBAACJc2VjcDI1NmsxoQO_G4KCc4Se0rTEdlwhfqE8T7QK78mSrMESAwl-4SoNmYN0Y3CCelqDdWRwgnpchXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-12_06-16-39__f06a7871-32a3-47b2-a667-ac2cf3c9727f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.206.180
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['33352', '33353', '33354', '33355', '33356']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 33352:33352 -p 33353:33353 -p 33354:33354 -p 33355:33355 -p 33356:33356 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33354 --rest-port=33352 --tcp-port=33353 --discv5-udp-port=33355 --rest-address=0.0.0.0 --nat=extip:172.18.206.180 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=3bdb2fdb5ae65a37255ad37bd4b0b53db75f6d9517ff2cf7aee3f76a2efca7be --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33356 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QHUEjYOOML4XviXFhKcq-atvWXT1F2kCYrVds1M-SF6ZCJZWbW6-SrbShVuuxjcZVuWPEs6ZTzub3aY7Eq4CX1kBgmlkgnY0gmlwhKwS-SCKbXVsdGlhZGRyc4wACgSsEvkgBnpb3QOCcnOFAAIBAACJc2VjcDI1NmsxoQO_G4KCc4Se0rTEdlwhfqE8T7QK78mSrMESAwl-4SoNmYN0Y3CCelqDdWRwgnpchXdha3UyBQ --content-topic=/app/29/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.206.180 waku 68b7e3f5cd3daf1aedb12a43825c6c0078dfa420f285647c7f31bc8fc4d2bdf3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 68b7e3f5cd3d. Setting up logs at ./log/docker/node2_2024-09-12_06-16-39__f06a7871-32a3-47b2-a667-ac2cf3c9727f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 33352
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33352/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33352/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.206.180/tcp/33353/p2p/16Uiu2HAmSxsgKNqij9cHGCKu1dHnbFWKUgESLdcDjLD6TCyE9szD","/ip4/172.18.206.180/tcp/33354/ws/p2p/16Uiu2HAmSxsgKNqij9cHGCKu1dHnbFWKUgESLdcDjLD6TCyE9szD"],"enrUri":"enr:-LO4QOx-n-OLxZsjylEcORM-qnrp5WKMH0uZFWs7M5zsvfv7QXaEpL06WxihJ2BDxThszESmlPBKWVw4kYXY-HHn28ABgmlkgnY0gmlwhKwSzrSKbXVsdGlhZGRyc4wACgSsEs60BoJK3QOCcnOFAAIBAACJc2VjcDI1NmsxoQPUmIcNnQi3LLbhn91y2felxZpvzjTcwSma7DWhCCGizoN0Y3CCgkmDdWRwgoJLhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33352/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.249.32/tcp/31322/p2p/16Uiu2HAmRWzYtqjF3C9Q7MfKU1xnmCQb8jBWep2DfDxKw9TKxvd6"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31321/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/29/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33352/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/29/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31321/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31321/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/29/sometopic/someencoding","version":0,"timestamp":1726121803070121728,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33352/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/29/sometopic/someencoding","version":0,"timestamp":1726121803070121728,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 672623a21206
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 68b7e3f5cd3d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.