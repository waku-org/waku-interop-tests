2025-02-13 04:04:34.256 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:04:34.257 DEBUG [tests.conftest] Running test: test_unsubscribe_from_non_subscribed_content_topics with id: 2025-02-13_04-04-34__4bcec95a-c45e-4f46-bfc0-0bc91bffd61b
2025-02-13 04:04:34.257 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:04:34.257 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-13 04:04:34.257 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-13 04:04:34.264 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:04:34.265 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_04-04-34__4bcec95a-c45e-4f46-bfc0-0bc91bffd61b__wakuorg_nwaku:latest.log
2025-02-13 04:04:34.265 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:04:34.265 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:04:34.266 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:04:34.266 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.27.4
2025-02-13 04:04:34.267 DEBUG [src.node.docker_mananger] Generated ports ['59719', '59720', '59721', '59722', '59723']
2025-02-13 04:04:34.267 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:04:34.267 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:04:34.267 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:04:34.267 DEBUG [src.node.docker_mananger] docker run -i -t -p 59719:59719 -p 59720:59720 -p 59721:59721 -p 59722:59722 -p 59723:59723 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59721 --rest-port=59719 --tcp-port=59720 --discv5-udp-port=59722 --rest-address=0.0.0.0 --nat=extip:172.18.27.4 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=cadda3f5db05eda693ed175096be3c03c3e8cdcedb2be7debdc1390f93f9736c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59723 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2025-02-13 04:04:34.502 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.27.4 waku 8e65b06620e6dccb510902bd0b34bb4391c8cab2cfa41a5db16faee34b111181
2025-02-13 04:04:34.553 DEBUG [src.node.docker_mananger] Container started with ID 8e65b06620e6. Setting up logs at ./log/docker/node1_2025-02-13_04-04-34__4bcec95a-c45e-4f46-bfc0-0bc91bffd61b__wakuorg_nwaku:latest.log
2025-02-13 04:04:34.553 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 59719
2025-02-13 04:04:34.553 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:04:35.059 ERROR [src.node.docker_mananger] Max retries reached for container c9cdcddf7b22. Exiting log stream.
2025-02-13 04:04:35.554 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59719/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:04:35.556 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:04:35.557 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:04:35.557 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59719/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:04:35.559 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.27.4/tcp/59720/p2p/16Uiu2HAmMkEYhBcsLkEeHNGdQY224PRsVX4T5TjB3hMQjADpwYJy","/ip4/172.18.27.4/tcp/59721/ws/p2p/16Uiu2HAmMkEYhBcsLkEeHNGdQY224PRsVX4T5TjB3hMQjADpwYJy"],"enrUri":"enr:-L24QOJjaP9ncitUceamuZjmClBE6_oUOFLRx2MT_csBpiNXQfepUQkxVYgMns0YC6c7ZmWRktcVTxy8NJde6BLF2LsCgmlkgnY0gmlwhKwSGwSKbXVsdGlhZGRyc5YACASsEhsEBulIAAoErBIbBAbpSd0DgnJzhQACAQAAiXNlY3AyNTZrMaEDhxEjd-AQJxCtVL3yc1TT8K2dYK2wQgXGfoK2MAadSY6DdGNwgulIg3VkcILpSoV3YWt1MgU"}'
2025-02-13 04:04:35.559 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:04:35.565 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:04:35.566 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-13_04-04-34__4bcec95a-c45e-4f46-bfc0-0bc91bffd61b__wakuorg_nwaku:latest.log
2025-02-13 04:04:35.566 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:04:35.566 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:04:35.567 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:04:35.567 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.170.85
2025-02-13 04:04:35.568 DEBUG [src.node.docker_mananger] Generated ports ['48274', '48275', '48276', '48277', '48278']
2025-02-13 04:04:35.568 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:04:35.568 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:04:35.568 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:04:35.568 DEBUG [src.node.docker_mananger] docker run -i -t -p 48274:48274 -p 48275:48275 -p 48276:48276 -p 48277:48277 -p 48278:48278 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48276 --rest-port=48274 --tcp-port=48275 --discv5-udp-port=48277 --rest-address=0.0.0.0 --nat=extip:172.18.170.85 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=cdedfe977de811856b158ccd5b92cee64e82d87b5f3ad665cfe1ba6e53334cf3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48278 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QOJjaP9ncitUceamuZjmClBE6_oUOFLRx2MT_csBpiNXQfepUQkxVYgMns0YC6c7ZmWRktcVTxy8NJde6BLF2LsCgmlkgnY0gmlwhKwSGwSKbXVsdGlhZGRyc5YACASsEhsEBulIAAoErBIbBAbpSd0DgnJzhQACAQAAiXNlY3AyNTZrMaEDhxEjd-AQJxCtVL3yc1TT8K2dYK2wQgXGfoK2MAadSY6DdGNwgulIg3VkcILpSoV3YWt1MgU --content-topic=/myapp/1/latest/proto
2025-02-13 04:04:35.796 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.170.85 waku 7b3debf1ed9c274f113132309e695d1a5baf9aad819fa5898414ff96b1d410f6
2025-02-13 04:04:35.847 DEBUG [src.node.docker_mananger] Container started with ID 7b3debf1ed9c. Setting up logs at ./log/docker/node2_2025-02-13_04-04-34__4bcec95a-c45e-4f46-bfc0-0bc91bffd61b__wakuorg_nwaku:latest.log
2025-02-13 04:04:35.848 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 48274
2025-02-13 04:04:35.848 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:04:36.849 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48274/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:04:36.857 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:04:36.858 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:04:36.858 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48274/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:04:36.861 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.170.85/tcp/48275/p2p/16Uiu2HAmMPaWhtpZbpTiwsMz4u9N6CtPARukqiMmWZAEhBVwtBTS","/ip4/172.18.170.85/tcp/48276/ws/p2p/16Uiu2HAmMPaWhtpZbpTiwsMz4u9N6CtPARukqiMmWZAEhBVwtBTS"],"enrUri":"enr:-L24QLo_UTUxhWZzg2V14TAXbCAWON3eXqrN-c-Jupsq5sqqLgTeti6wqSnw4fYOmM43PB1OhqW94ou8Kq3Ce7gt_1ICgmlkgnY0gmlwhKwSqlWKbXVsdGlhZGRyc5YACASsEqpVBryTAAoErBKqVQa8lN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDgcaEUiS8Dr4Yp1UIrT7ScsV8ziEfPCNCcls5TSnD372DdGNwgryTg3VkcIK8lYV3YWt1MgE"}'
2025-02-13 04:04:36.861 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:04:36.861 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48274/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.27.4/tcp/59720/p2p/16Uiu2HAmMkEYhBcsLkEeHNGdQY224PRsVX4T5TjB3hMQjADpwYJy"]'
2025-02-13 04:04:36.864 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:04:36.864 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:59719/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-13 04:04:36.869 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:04:36.870 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:48274/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-13 04:04:36.875 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:04:36.876 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59719/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:04:36.879 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:04:36.879 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-13 04:04:36.980 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-13 04:04:36.980 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59719/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:04:36.983 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:59719/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto. Response content: b'/myapp/1/latest/proto'
2025-02-13 04:04:36.984 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59719/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:04:36.987 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:04:36.987 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-13 04:04:37.088 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-13 04:04:37.088 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59719/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:04:37.091 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:59719/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js. Response content: b'/waku/2/content/test.js'
2025-02-13 04:04:37.093 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59719/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:04:37.095 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:04:37.096 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-13 04:04:37.196 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-13 04:04:37.196 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59719/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:04:37.199 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:59719/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding. Response content: b'/app/22/sometopic/someencoding'
2025-02-13 04:04:37.201 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59719/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:04:37.204 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:04:37.204 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-13 04:04:37.304 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-13 04:04:37.305 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59719/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:04:37.307 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:59719/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto. Response content: b'/toychat/2/huilong/proto'
2025-02-13 04:04:37.309 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59719/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:04:37.312 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:04:37.312 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-13 04:04:37.412 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-13 04:04:37.413 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59719/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:04:37.415 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:59719/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor. Response content: b'/statusim/1/community/cbor'
2025-02-13 04:04:37.417 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59719/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:04:37.420 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:04:37.420 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-13 04:04:37.520 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-13 04:04:37.521 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59719/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:04:37.524 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:59719/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding. Response content: b'/app/27/sometopic/someencoding'
2025-02-13 04:04:37.525 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59719/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:04:37.528 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:04:37.528 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-13 04:04:37.628 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-13 04:04:37.629 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59719/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:04:37.632 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:59719/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding. Response content: b'/app/29/sometopic/someencoding'
2025-02-13 04:04:37.633 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59719/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:04:37.636 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:04:37.636 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-13 04:04:37.736 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-13 04:04:37.737 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59719/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:04:37.739 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:59719/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding. Response content: b'/app/20/sometopic/someencoding'
2025-02-13 04:04:37.742 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:04:37.743 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:04:37.743 DEBUG [src.node.waku_node] Stopping container with id 8e65b06620e6
2025-02-13 04:04:39.060 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:04:39.060 DEBUG [src.node.waku_node] Stopping container with id 7b3debf1ed9c
2025-02-13 04:04:39.873 ERROR [src.node.docker_mananger] Max retries reached for container 8e65b06620e6. Exiting log stream.
2025-02-13 04:04:39.905 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:04:39.907 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:04:39.913 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:04:39.918 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
