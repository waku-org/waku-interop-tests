2025-02-13 04:03:15.762 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:03:15.763 DEBUG [tests.conftest] Running test: test_light_push_with_missing_payload with id: 2025-02-13_04-03-15__1b860b2e-c40d-4c48-b7c2-81c800f9df0a
2025-02-13 04:03:15.764 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:03:15.765 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-13 04:03:15.773 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:03:15.773 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-13_04-03-15__1b860b2e-c40d-4c48-b7c2-81c800f9df0a__wakuorg_nwaku:latest.log
2025-02-13 04:03:15.773 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:03:15.774 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:03:15.777 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:03:15.777 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.125.28
2025-02-13 04:03:15.777 DEBUG [src.node.docker_mananger] Generated ports ['19721', '19722', '19723', '19724', '19725']
2025-02-13 04:03:15.778 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:03:15.778 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:03:15.778 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:03:15.778 DEBUG [src.node.docker_mananger] docker run -i -t -p 19721:19721 -p 19722:19722 -p 19723:19723 -p 19724:19724 -p 19725:19725 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19723 --rest-port=19721 --tcp-port=19722 --discv5-udp-port=19724 --rest-address=0.0.0.0 --nat=extip:172.18.125.28 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=adc0140f3f8a83dffadbaaf45eb38df5dfe82fe99c13849bfe92f5ed5a0b6fda --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19725 --metrics-logging=true --lightpush=true --relay=true
2025-02-13 04:03:16.011 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.125.28 waku df3b7c8983cc7e303e73842c610a59a25a46e4166032d1fd7827374812712424
2025-02-13 04:03:16.060 DEBUG [src.node.docker_mananger] Container started with ID df3b7c8983cc. Setting up logs at ./log/docker/receiving_node1_2025-02-13_04-03-15__1b860b2e-c40d-4c48-b7c2-81c800f9df0a__wakuorg_nwaku:latest.log
2025-02-13 04:03:16.061 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 19721
2025-02-13 04:03:16.062 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:03:16.604 ERROR [src.node.docker_mananger] Max retries reached for container dd22c7bcf2a4. Exiting log stream.
2025-02-13 04:03:17.062 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19721/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:17.065 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:03:17.066 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:03:17.066 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19721/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:17.068 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.125.28/tcp/19722/p2p/16Uiu2HAkubrV7ho3KaMoNSGjEhrGqN1CYVJcoaKCCNvJccayFjF1","/ip4/172.18.125.28/tcp/19723/ws/p2p/16Uiu2HAkubrV7ho3KaMoNSGjEhrGqN1CYVJcoaKCCNvJccayFjF1"],"enrUri":"enr:-L24QECpZEEr1YxJb0cyGeTe24HIVOfENAZnWxuLoClgo0c5YkEu_UOOuzCT9IeXuE4qGtpo-x6kftf9Pl8iPFRvBzMCgmlkgnY0gmlwhKwSfRyKbXVsdGlhZGRyc5YACASsEn0cBk0KAAoErBJ9HAZNC90DgnJzhQADAQAAiXNlY3AyNTZrMaECApuv0FrsQrCuVa-KRm1fiIreumk40GdgmHgrVFtQd6SDdGNwgk0Kg3VkcIJNDIV3YWt1Mgk"}'
2025-02-13 04:03:17.069 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:03:17.076 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:03:17.076 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-13_04-03-15__1b860b2e-c40d-4c48-b7c2-81c800f9df0a__wakuorg_nwaku:latest.log
2025-02-13 04:03:17.076 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:03:17.076 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:03:17.077 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:03:17.078 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.222.246
2025-02-13 04:03:17.078 DEBUG [src.node.docker_mananger] Generated ports ['42444', '42445', '42446', '42447', '42448']
2025-02-13 04:03:17.078 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:03:17.078 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:03:17.078 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:03:17.078 DEBUG [src.node.docker_mananger] docker run -i -t -p 42444:42444 -p 42445:42445 -p 42446:42446 -p 42447:42447 -p 42448:42448 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42446 --rest-port=42444 --tcp-port=42445 --discv5-udp-port=42447 --rest-address=0.0.0.0 --nat=extip:172.18.222.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=df6db73a5908b67ad438d4723c87a3973f3ed7f2f16f6ddb51baaaccfaa3bbca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42448 --metrics-logging=true --lightpush=false --relay=true
2025-02-13 04:03:17.311 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.222.246 waku 0a789a9823043b1b1cb5a87c9df8a44f1fbba2ff533fbdd9fd34c6a0af25737c
2025-02-13 04:03:17.360 DEBUG [src.node.docker_mananger] Container started with ID 0a789a982304. Setting up logs at ./log/docker/receiving_node2_2025-02-13_04-03-15__1b860b2e-c40d-4c48-b7c2-81c800f9df0a__wakuorg_nwaku:latest.log
2025-02-13 04:03:17.361 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42444
2025-02-13 04:03:17.361 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:03:18.361 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42444/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:18.364 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:03:18.364 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:03:18.364 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42444/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:18.367 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.222.246/tcp/42445/p2p/16Uiu2HAmHmAY63N3zvC6wr1UoWfzLeov7gyUotuoayBtbs31h54e","/ip4/172.18.222.246/tcp/42446/ws/p2p/16Uiu2HAmHmAY63N3zvC6wr1UoWfzLeov7gyUotuoayBtbs31h54e"],"enrUri":"enr:-L24QKu4hn86aISr4qEHOUP-OUtxniTYXKU_BQbX5HSWe2kIT-Bmf9WjTjp5LwxDVFLPWy_tpvsolxXQMq3nsDcF2L8CgmlkgnY0gmlwhKwS3vaKbXVsdGlhZGRyc5YACASsEt72BqXNAAoErBLe9galzt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDS99v4OFQNocAOAdJjaAaWuUGircqCjHYsqMc8v3c02ODdGNwgqXNg3VkcIKlz4V3YWt1MgE"}'
2025-02-13 04:03:18.367 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:03:18.367 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42444/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.125.28/tcp/19722/p2p/16Uiu2HAkubrV7ho3KaMoNSGjEhrGqN1CYVJcoaKCCNvJccayFjF1"]'
2025-02-13 04:03:18.412 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:03:18.419 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:03:18.420 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-13_04-03-15__1b860b2e-c40d-4c48-b7c2-81c800f9df0a__wakuorg_nwaku:latest.log
2025-02-13 04:03:18.420 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:03:18.420 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:03:18.422 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:03:18.422 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.88.39
2025-02-13 04:03:18.422 DEBUG [src.node.docker_mananger] Generated ports ['46229', '46230', '46231', '46232', '46233']
2025-02-13 04:03:18.422 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:03:18.422 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:03:18.423 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:03:18.423 DEBUG [src.node.docker_mananger] docker run -i -t -p 46229:46229 -p 46230:46230 -p 46231:46231 -p 46232:46232 -p 46233:46233 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46231 --rest-port=46229 --tcp-port=46230 --discv5-udp-port=46232 --rest-address=0.0.0.0 --nat=extip:172.18.88.39 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=90bdc8a7094934aec6022f003c1e3e0c11cb00bef144dfeeb79a60a9b3ebcced --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46233 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QECpZEEr1YxJb0cyGeTe24HIVOfENAZnWxuLoClgo0c5YkEu_UOOuzCT9IeXuE4qGtpo-x6kftf9Pl8iPFRvBzMCgmlkgnY0gmlwhKwSfRyKbXVsdGlhZGRyc5YACASsEn0cBk0KAAoErBJ9HAZNC90DgnJzhQADAQAAiXNlY3AyNTZrMaECApuv0FrsQrCuVa-KRm1fiIreumk40GdgmHgrVFtQd6SDdGNwgk0Kg3VkcIJNDIV3YWt1Mgk --lightpushnode=/ip4/172.18.125.28/tcp/19722/p2p/16Uiu2HAkubrV7ho3KaMoNSGjEhrGqN1CYVJcoaKCCNvJccayFjF1 --lightpush=true --relay=false
2025-02-13 04:03:18.660 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.88.39 waku a827f9b65c0ea7066496dac9993c06762b2a50cd533e92a3073cade94ecb1a9c
2025-02-13 04:03:18.713 DEBUG [src.node.docker_mananger] Container started with ID a827f9b65c0e. Setting up logs at ./log/docker/lightpush_node1_2025-02-13_04-03-15__1b860b2e-c40d-4c48-b7c2-81c800f9df0a__wakuorg_nwaku:latest.log
2025-02-13 04:03:18.714 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46229
2025-02-13 04:03:18.714 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:03:19.714 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46229/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:19.717 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:03:19.718 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:03:19.718 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46229/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:19.720 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.88.39/tcp/46230/p2p/16Uiu2HAmJsKK9Y88BSHSqWtL1tZqYch2RHupYAEec5KJbqSDrbZZ","/ip4/172.18.88.39/tcp/46231/ws/p2p/16Uiu2HAmJsKK9Y88BSHSqWtL1tZqYch2RHupYAEec5KJbqSDrbZZ"],"enrUri":"enr:-L24QABiw4kQkU9ZHgEzQVIB2CfLd5faKW3zYjXGYjDHl83Bf2xFok7ullJoMod9Tn4rql_-J9Mr6rwd2hHCHy0XOXECgmlkgnY0gmlwhKwSWCeKbXVsdGlhZGRyc5YACASsElgnBrSWAAoErBJYJwa0l90DgnJzhQADAQAAiXNlY3AyNTZrMaEDXE6IatBeI2Utrc1x5PocQdlMf2gjK3htmi0R-IXbTzCDdGNwgrSWg3VkcIK0mIV3YWt1Mgg"}'
2025-02-13 04:03:19.720 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:03:19.721 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46229/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.125.28/tcp/19722/p2p/16Uiu2HAkubrV7ho3KaMoNSGjEhrGqN1CYVJcoaKCCNvJccayFjF1"]'
2025-02-13 04:03:19.759 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:03:19.763 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46229/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.222.246/tcp/42445/p2p/16Uiu2HAmHmAY63N3zvC6wr1UoWfzLeov7gyUotuoayBtbs31h54e"]'
2025-02-13 04:03:19.792 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:03:19.793 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19721/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 04:03:19.798 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:03:19.800 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42444/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 04:03:19.807 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:03:19.808 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46229/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1739419399808690688}}'
2025-02-13 04:03:19.811 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:46229/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-13 04:03:19.813 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:03:19.813 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:03:19.814 DEBUG [src.node.waku_node] Stopping container with id df3b7c8983cc
2025-02-13 04:03:20.566 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:03:20.566 DEBUG [src.node.waku_node] Stopping container with id 0a789a982304
2025-02-13 04:03:21.379 ERROR [src.node.docker_mananger] Max retries reached for container df3b7c8983cc. Exiting log stream.
2025-02-13 04:03:22.094 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:03:22.095 DEBUG [src.node.waku_node] Stopping container with id a827f9b65c0e
2025-02-13 04:03:22.907 ERROR [src.node.docker_mananger] Max retries reached for container 0a789a982304. Exiting log stream.
2025-02-13 04:03:23.607 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:03:23.608 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:03:23.617 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:03:23.623 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:03:23.629 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
