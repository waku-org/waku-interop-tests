2025-02-13 04:05:37.576 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:05:37.577 DEBUG [tests.conftest] Running test: test_store_without_pubsub_topic_and_content_topic with id: 2025-02-13_04-05-37__514d33ea-56c2-4c06-bac4-f96b4f45ceb0
2025-02-13 04:05:37.577 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:05:37.577 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-13 04:05:37.578 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-13 04:05:37.584 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:05:37.585 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-13_04-05-37__514d33ea-56c2-4c06-bac4-f96b4f45ceb0__wakuorg_nwaku:latest.log
2025-02-13 04:05:37.585 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:05:37.585 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:05:37.586 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:05:37.587 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.58.55
2025-02-13 04:05:37.587 DEBUG [src.node.docker_mananger] Generated ports ['30463', '30464', '30465', '30466', '30467']
2025-02-13 04:05:37.587 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:05:37.587 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:05:37.587 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:05:37.587 DEBUG [src.node.docker_mananger] docker run -i -t -p 30463:30463 -p 30464:30464 -p 30465:30465 -p 30466:30466 -p 30467:30467 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30465 --rest-port=30463 --tcp-port=30464 --discv5-udp-port=30466 --rest-address=0.0.0.0 --nat=extip:172.18.58.55 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c9fa1fdfd4f56365a1de33052f82ca08018efa7dc2baba5e99a3ef81f4ab8ba7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30467 --metrics-logging=true --store=true --relay=true
2025-02-13 04:05:37.824 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.58.55 waku d172bee9353d55014ecf2c801a17c86d2c1b6f194fd06dfec4395ea8f521635f
2025-02-13 04:05:37.874 DEBUG [src.node.docker_mananger] Container started with ID d172bee9353d. Setting up logs at ./log/docker/publishing_node1_2025-02-13_04-05-37__514d33ea-56c2-4c06-bac4-f96b4f45ceb0__wakuorg_nwaku:latest.log
2025-02-13 04:05:37.876 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 30463
2025-02-13 04:05:37.877 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:05:38.371 ERROR [src.node.docker_mananger] Max retries reached for container 1a7f4d696448. Exiting log stream.
2025-02-13 04:05:38.877 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30463/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:38.880 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:05:38.881 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:05:38.881 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30463/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:38.883 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.58.55/tcp/30464/p2p/16Uiu2HAmGZNf2TGvo3GFuejJahbSngSaViPwiPPCyHKS3F9UFsp4","/ip4/172.18.58.55/tcp/30465/ws/p2p/16Uiu2HAmGZNf2TGvo3GFuejJahbSngSaViPwiPPCyHKS3F9UFsp4"],"enrUri":"enr:-L24QAo8fFEcaxUx35KuWN4vp4N2g2EBHNcapKFO73kj8aE_DrUSfel0o2nj3rr9Q0L80V--3Za_iUEoR3X_g-uvIOUCgmlkgnY0gmlwhKwSOjeKbXVsdGlhZGRyc5YACASsEjo3BncAAAoErBI6NwZ3Ad0DgnJzhQADAQAAiXNlY3AyNTZrMaEDOf577WtGqBqCNEprgKy_CHt9cftEgc8CWhLaKKp0YRGDdGNwgncAg3VkcIJ3AoV3YWt1MgM"}'
2025-02-13 04:05:38.883 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:05:38.890 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:05:38.891 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-13_04-05-37__514d33ea-56c2-4c06-bac4-f96b4f45ceb0__wakuorg_nwaku:latest.log
2025-02-13 04:05:38.891 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:05:38.891 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:05:38.892 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:05:38.893 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.214.177
2025-02-13 04:05:38.893 DEBUG [src.node.docker_mananger] Generated ports ['21838', '21839', '21840', '21841', '21842']
2025-02-13 04:05:38.893 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:05:38.893 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:05:38.893 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:05:38.893 DEBUG [src.node.docker_mananger] docker run -i -t -p 21838:21838 -p 21839:21839 -p 21840:21840 -p 21841:21841 -p 21842:21842 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21840 --rest-port=21838 --tcp-port=21839 --discv5-udp-port=21841 --rest-address=0.0.0.0 --nat=extip:172.18.214.177 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d86e64da2f03cbeceb5ddcde88d5ddfa2b8b88fbac38b43ab68716805183a33b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21842 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QAo8fFEcaxUx35KuWN4vp4N2g2EBHNcapKFO73kj8aE_DrUSfel0o2nj3rr9Q0L80V--3Za_iUEoR3X_g-uvIOUCgmlkgnY0gmlwhKwSOjeKbXVsdGlhZGRyc5YACASsEjo3BncAAAoErBI6NwZ3Ad0DgnJzhQADAQAAiXNlY3AyNTZrMaEDOf577WtGqBqCNEprgKy_CHt9cftEgc8CWhLaKKp0YRGDdGNwgncAg3VkcIJ3AoV3YWt1MgM --storenode=/ip4/172.18.58.55/tcp/30464/p2p/16Uiu2HAmGZNf2TGvo3GFuejJahbSngSaViPwiPPCyHKS3F9UFsp4 --store=true --relay=true
2025-02-13 04:05:39.129 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.214.177 waku 3c18ae0bf057c0e17dce36c7abc62abbc621e826407cb7719b9105ff660f33f9
2025-02-13 04:05:39.178 DEBUG [src.node.docker_mananger] Container started with ID 3c18ae0bf057. Setting up logs at ./log/docker/store_node1_2025-02-13_04-05-37__514d33ea-56c2-4c06-bac4-f96b4f45ceb0__wakuorg_nwaku:latest.log
2025-02-13 04:05:39.179 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 21838
2025-02-13 04:05:39.179 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:05:40.180 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21838/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:40.183 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:05:40.183 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:05:40.184 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21838/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:40.186 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.214.177/tcp/21839/p2p/16Uiu2HAm5ah5dvt6pFEDxPmznhT918xGXsk6mkKfxWykAt5WVdSt","/ip4/172.18.214.177/tcp/21840/ws/p2p/16Uiu2HAm5ah5dvt6pFEDxPmznhT918xGXsk6mkKfxWykAt5WVdSt"],"enrUri":"enr:-L24QKOUSZKrjbC_8imEbC7fb4wOTd2lVFz07SmA8DpjR89QScrUH1XPBNLNNtnAP9rVqLtTJfuYyo-TY55sKorr93kCgmlkgnY0gmlwhKwS1rGKbXVsdGlhZGRyc5YACASsEtaxBlVPAAoErBLWsQZVUN0DgnJzhQADAQAAiXNlY3AyNTZrMaECluRXV2EqPTCHs1YVAbsq3g5ps7Mf_lDjbVDz8-IHkN2DdGNwglVPg3VkcIJVUYV3YWt1MgM"}'
2025-02-13 04:05:40.186 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:05:40.186 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21838/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.58.55/tcp/30464/p2p/16Uiu2HAmGZNf2TGvo3GFuejJahbSngSaViPwiPPCyHKS3F9UFsp4"]'
2025-02-13 04:05:40.189 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:40.189 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30463/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 04:05:40.192 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:40.192 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21838/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 04:05:40.194 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:40.195 DEBUG [src.steps.store] Relaying message
2025-02-13 04:05:40.195 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30463/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:05:40.201 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:40.202 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:05:40.402 DEBUG [src.steps.store] Relaying message
2025-02-13 04:05:40.403 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30463/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:05:40.409 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:40.409 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:05:40.610 DEBUG [src.steps.store] Relaying message
2025-02-13 04:05:40.610 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30463/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:05:40.616 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:40.617 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:05:40.819 DEBUG [src.steps.store] Relaying message
2025-02-13 04:05:40.819 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30463/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:05:40.826 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:40.826 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:05:41.027 DEBUG [src.steps.store] Relaying message
2025-02-13 04:05:41.028 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30463/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:05:41.034 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:41.035 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:05:41.236 DEBUG [src.steps.store] Relaying message
2025-02-13 04:05:41.236 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30463/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:05:41.243 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:41.243 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:05:41.444 DEBUG [src.steps.store] Relaying message
2025-02-13 04:05:41.444 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30463/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:05:41.450 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:41.451 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:05:41.652 DEBUG [src.steps.store] Relaying message
2025-02-13 04:05:41.652 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30463/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:05:41.659 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:41.659 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:05:41.860 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30463/store/v3/messages?pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:41.864 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xf286d9d56213b611f09fca563fd515d71971e65ae1e5d1458d8b5c0ed06abf21"},{"messageHash":"0x34399a062c2ff5d2afefb5ff18c95aaf20470889687292678b73ec483bd9413d"},{"messageHash":"0x7e401cedbfe84f23508a2f7b2d9d98ed9e5e294ebc463affea6601ffdba5c368"},{"messageHash":"0x2ac08b4a0da5aa637acbd5589d687fd5b56929b89c29a514469bcc24008ed2db"},{"messageHash":"0x50ab1e8a2d4cc3444b047ef8214d4893682b2d503b72b513f04bf5dc51e475c0"},{"messageHash":"0x44a4734d0465fd6671de57058891870a5b22f1b5d4f63d285b315d0ccec9530d"},{"messageHash":"0x257dbe94dc2608cfd1385848f1c85c70d851b31e7050b84f9215d94ea579f03f"},{"messageHash":"0xd4ebd301e5af5628bfa8430e8f52f1a88806698d1485570576a39ed83a6b7c00"}]}'
2025-02-13 04:05:41.864 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21838/store/v3/messages?pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:41.867 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xf286d9d56213b611f09fca563fd515d71971e65ae1e5d1458d8b5c0ed06abf21"},{"messageHash":"0x34399a062c2ff5d2afefb5ff18c95aaf20470889687292678b73ec483bd9413d"},{"messageHash":"0x7e401cedbfe84f23508a2f7b2d9d98ed9e5e294ebc463affea6601ffdba5c368"},{"messageHash":"0x2ac08b4a0da5aa637acbd5589d687fd5b56929b89c29a514469bcc24008ed2db"},{"messageHash":"0x50ab1e8a2d4cc3444b047ef8214d4893682b2d503b72b513f04bf5dc51e475c0"},{"messageHash":"0x44a4734d0465fd6671de57058891870a5b22f1b5d4f63d285b315d0ccec9530d"},{"messageHash":"0x257dbe94dc2608cfd1385848f1c85c70d851b31e7050b84f9215d94ea579f03f"},{"messageHash":"0xd4ebd301e5af5628bfa8430e8f52f1a88806698d1485570576a39ed83a6b7c00"}]}'
2025-02-13 04:05:41.871 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:05:41.872 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:05:41.872 DEBUG [src.node.waku_node] Stopping container with id d172bee9353d
2025-02-13 04:05:42.414 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:05:42.416 DEBUG [src.node.waku_node] Stopping container with id 3c18ae0bf057
2025-02-13 04:05:43.247 ERROR [src.node.docker_mananger] Max retries reached for container d172bee9353d. Exiting log stream.
2025-02-13 04:05:43.915 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:05:43.916 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:05:43.929 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:05:43.937 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
