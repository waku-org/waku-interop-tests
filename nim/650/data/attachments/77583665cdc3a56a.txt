2025-02-13 04:03:20.779 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:03:20.780 DEBUG [tests.conftest] Running test: test_filter_ping_on_subscribed_peer with id: 2025-02-13_04-03-20__803671f1-27a5-4a32-98c7-6b2ebe3485f3
2025-02-13 04:03:20.780 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:03:20.780 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-13 04:03:20.780 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-13 04:03:20.786 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:03:20.787 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_04-03-20__803671f1-27a5-4a32-98c7-6b2ebe3485f3__wakuorg_nwaku:latest.log
2025-02-13 04:03:20.787 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:03:20.787 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:03:20.788 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:03:20.788 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.208.214
2025-02-13 04:03:20.788 DEBUG [src.node.docker_mananger] Generated ports ['23094', '23095', '23096', '23097', '23098']
2025-02-13 04:03:20.789 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:03:20.789 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:03:20.789 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:03:20.789 DEBUG [src.node.docker_mananger] docker run -i -t -p 23094:23094 -p 23095:23095 -p 23096:23096 -p 23097:23097 -p 23098:23098 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23096 --rest-port=23094 --tcp-port=23095 --discv5-udp-port=23097 --rest-address=0.0.0.0 --nat=extip:172.18.208.214 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dedce6cae8ebfdfeee07a090f00e7f85d75fd2186a4ecdef8dfe809fa4cd23ed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23098 --metrics-logging=true --relay=true --filter=true
2025-02-13 04:03:21.014 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.208.214 waku 9dda64d1c28a2b4841989f8350cb2c093ef2481b26dca9f38d7cba4b2c328b13
2025-02-13 04:03:21.063 DEBUG [src.node.docker_mananger] Container started with ID 9dda64d1c28a. Setting up logs at ./log/docker/node1_2025-02-13_04-03-20__803671f1-27a5-4a32-98c7-6b2ebe3485f3__wakuorg_nwaku:latest.log
2025-02-13 04:03:21.064 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23094
2025-02-13 04:03:21.064 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:03:21.571 ERROR [src.node.docker_mananger] Max retries reached for container 28ebcacd6398. Exiting log stream.
2025-02-13 04:03:22.064 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23094/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:22.067 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:03:22.068 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:03:22.068 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23094/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:22.070 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.208.214/tcp/23095/p2p/16Uiu2HAm7ZWu6JTaM9jqRUuui6f2Dv3Z1cN8qXcEtMw9zGyHpo7Q","/ip4/172.18.208.214/tcp/23096/ws/p2p/16Uiu2HAm7ZWu6JTaM9jqRUuui6f2Dv3Z1cN8qXcEtMw9zGyHpo7Q"],"enrUri":"enr:-L24QBCaVc73dD8W4pVH3QAJAbafcVs1pTtb5TFWCzMdzn3XMzhESgoJSv-4BTMx9zV1eLpjnNFEoLj8bjZQxseMGrMCgmlkgnY0gmlwhKwS0NaKbXVsdGlhZGRyc5YACASsEtDWBlo3AAoErBLQ1gZaON0DgnJzhQADAQAAiXNlY3AyNTZrMaECtE6fIYEPnd7cUBOEd5HW4Gp4pcINb7o9r_TeGowcx4ODdGNwglo3g3VkcIJaOYV3YWt1MgU"}'
2025-02-13 04:03:22.070 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:03:22.071 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-13 04:03:22.077 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:03:22.077 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-13_04-03-20__803671f1-27a5-4a32-98c7-6b2ebe3485f3__wakuorg_nwaku:latest.log
2025-02-13 04:03:22.077 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:03:22.077 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:03:22.079 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:03:22.079 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.212.122
2025-02-13 04:03:22.079 DEBUG [src.node.docker_mananger] Generated ports ['52073', '52074', '52075', '52076', '52077']
2025-02-13 04:03:22.079 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:03:22.079 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:03:22.079 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:03:22.080 DEBUG [src.node.docker_mananger] docker run -i -t -p 52073:52073 -p 52074:52074 -p 52075:52075 -p 52076:52076 -p 52077:52077 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52075 --rest-port=52073 --tcp-port=52074 --discv5-udp-port=52076 --rest-address=0.0.0.0 --nat=extip:172.18.212.122 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2c34063a586e1ba2215ee2ad17ec186a9ba2834a5ef7d75f8b73fc4efa25d4cb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52077 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QBCaVc73dD8W4pVH3QAJAbafcVs1pTtb5TFWCzMdzn3XMzhESgoJSv-4BTMx9zV1eLpjnNFEoLj8bjZQxseMGrMCgmlkgnY0gmlwhKwS0NaKbXVsdGlhZGRyc5YACASsEtDWBlo3AAoErBLQ1gZaON0DgnJzhQADAQAAiXNlY3AyNTZrMaECtE6fIYEPnd7cUBOEd5HW4Gp4pcINb7o9r_TeGowcx4ODdGNwglo3g3VkcIJaOYV3YWt1MgU --filternode=/ip4/172.18.208.214/tcp/23095/p2p/16Uiu2HAm7ZWu6JTaM9jqRUuui6f2Dv3Z1cN8qXcEtMw9zGyHpo7Q
2025-02-13 04:03:22.310 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.212.122 waku 30c9be3a8f4fba8496e5d4517ea682f85873db77fa3dfd3c3b19e559f05ac8fb
2025-02-13 04:03:22.357 DEBUG [src.node.docker_mananger] Container started with ID 30c9be3a8f4f. Setting up logs at ./log/docker/node2_2025-02-13_04-03-20__803671f1-27a5-4a32-98c7-6b2ebe3485f3__wakuorg_nwaku:latest.log
2025-02-13 04:03:22.357 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 52073
2025-02-13 04:03:22.357 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:03:23.358 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52073/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:23.361 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:03:23.361 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:03:23.361 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52073/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:23.363 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.212.122/tcp/52074/p2p/16Uiu2HAm9TqRrhGFxZRWWXEhYJNx7Do5srANEmrgfaHa7uUYNmhE","/ip4/172.18.212.122/tcp/52075/ws/p2p/16Uiu2HAm9TqRrhGFxZRWWXEhYJNx7Do5srANEmrgfaHa7uUYNmhE"],"enrUri":"enr:-L24QB_yx9ty9qNv7A_uopggsz-2OOtvI-3Rm_UguVyNiumSKfYrc_VnA83GFk7SKcwnK814IfsbV14EKdS5gEZBiXgCgmlkgnY0gmlwhKwS1HqKbXVsdGlhZGRyc5YACASsEtR6BstqAAoErBLUegbLa90DgnJzhQADAQAAiXNlY3AyNTZrMaEC0JF2iYpT3HFHy9uXFCOhvfnUi-SARYoyK3a4krQ8NmWDdGNwgstqg3VkcILLbIV3YWt1MgA"}'
2025-02-13 04:03:23.364 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:03:23.364 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52073/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.208.214/tcp/23095/p2p/16Uiu2HAm7ZWu6JTaM9jqRUuui6f2Dv3Z1cN8qXcEtMw9zGyHpo7Q"]'
2025-02-13 04:03:23.406 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:03:23.407 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-13 04:03:23.408 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23094/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-13 04:03:23.424 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:03:23.424 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52073/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "579753c9-432c-48c0-9307-0e9e64c079b3", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-13 04:03:23.436 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"579753c9-432c-48c0-9307-0e9e64c079b3","statusDesc":"OK"}'
2025-02-13 04:03:23.437 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52073/filter/v2/subscriptions/c8e64a46-2946-4549-92c4-09ba4463cb17" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:23.444 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"c8e64a46-2946-4549-92c4-09ba4463cb17","statusDesc":"OK"}'
2025-02-13 04:03:23.446 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:03:23.447 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:03:23.447 DEBUG [src.node.waku_node] Stopping container with id 9dda64d1c28a
2025-02-13 04:03:24.541 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:03:24.541 DEBUG [src.node.waku_node] Stopping container with id 30c9be3a8f4f
2025-02-13 04:03:25.354 ERROR [src.node.docker_mananger] Max retries reached for container 9dda64d1c28a. Exiting log stream.
2025-02-13 04:03:25.522 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:03:25.524 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:03:25.529 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:03:25.534 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
