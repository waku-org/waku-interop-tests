2025-02-13 04:07:46.807 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:07:46.808 DEBUG [tests.conftest] Running test: test_store_with_wrong_url_content_topic with id: 2025-02-13_04-07-46__a4c929f1-9da9-41b8-8779-accd5f30eb36
2025-02-13 04:07:46.808 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:07:46.808 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-13 04:07:46.808 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-13 04:07:46.814 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:07:46.815 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-13_04-07-46__a4c929f1-9da9-41b8-8779-accd5f30eb36__wakuorg_nwaku:latest.log
2025-02-13 04:07:46.815 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:07:46.815 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:07:46.816 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:07:46.816 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.114.251
2025-02-13 04:07:46.816 DEBUG [src.node.docker_mananger] Generated ports ['11284', '11285', '11286', '11287', '11288']
2025-02-13 04:07:46.817 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:07:46.817 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:07:46.817 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:07:46.817 DEBUG [src.node.docker_mananger] docker run -i -t -p 11284:11284 -p 11285:11285 -p 11286:11286 -p 11287:11287 -p 11288:11288 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11286 --rest-port=11284 --tcp-port=11285 --discv5-udp-port=11287 --rest-address=0.0.0.0 --nat=extip:172.18.114.251 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1dd12a29ff6dafa0bb8fb798c6a6792cc6c05eea319dbb84c4f9afe0b83ea9dd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11288 --metrics-logging=true --store=true --relay=true
2025-02-13 04:07:47.041 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.114.251 waku 11bb4938a11b37c096c37747d3abb45504165471917988da1239dcdcb1037660
2025-02-13 04:07:47.091 DEBUG [src.node.docker_mananger] Container started with ID 11bb4938a11b. Setting up logs at ./log/docker/publishing_node1_2025-02-13_04-07-46__a4c929f1-9da9-41b8-8779-accd5f30eb36__wakuorg_nwaku:latest.log
2025-02-13 04:07:47.093 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11284
2025-02-13 04:07:47.093 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:07:47.612 ERROR [src.node.docker_mananger] Max retries reached for container 0470dac8e6f6. Exiting log stream.
2025-02-13 04:07:48.094 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11284/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:07:48.097 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:07:48.097 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:07:48.097 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11284/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:07:48.099 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.114.251/tcp/11285/p2p/16Uiu2HAmQTvyC8p9WohDQhnrWwFbeEpXCS4db5ZMEEsvKyz4aXLG","/ip4/172.18.114.251/tcp/11286/ws/p2p/16Uiu2HAmQTvyC8p9WohDQhnrWwFbeEpXCS4db5ZMEEsvKyz4aXLG"],"enrUri":"enr:-L24QMuF1VXA5D21Bd9c6lneqrwo_nJTG52jW7VtFybC6CRoc7OKgPV0OIDrs6yf60IACCJtt70xtwKmWvmvOVnw7_MCgmlkgnY0gmlwhKwScvuKbXVsdGlhZGRyc5YACASsEnL7BiwVAAoErBJy-wYsFt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDr3cIBPE1LacdMijteDwCL7n5xMEkO0zugPoJXpoF5Y2DdGNwgiwVg3VkcIIsF4V3YWt1MgM"}'
2025-02-13 04:07:48.099 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:07:48.106 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:07:48.106 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-13_04-07-46__a4c929f1-9da9-41b8-8779-accd5f30eb36__wakuorg_nwaku:latest.log
2025-02-13 04:07:48.106 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:07:48.106 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:07:48.107 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:07:48.108 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.45.6
2025-02-13 04:07:48.108 DEBUG [src.node.docker_mananger] Generated ports ['63983', '63984', '63985', '63986', '63987']
2025-02-13 04:07:48.108 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:07:48.108 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:07:48.108 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:07:48.108 DEBUG [src.node.docker_mananger] docker run -i -t -p 63983:63983 -p 63984:63984 -p 63985:63985 -p 63986:63986 -p 63987:63987 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63985 --rest-port=63983 --tcp-port=63984 --discv5-udp-port=63986 --rest-address=0.0.0.0 --nat=extip:172.18.45.6 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6ffb5a99e17d3f27c5e03bb1dd05ef00c43afed7e85d15fd9c22e5621fd849a4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63987 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMuF1VXA5D21Bd9c6lneqrwo_nJTG52jW7VtFybC6CRoc7OKgPV0OIDrs6yf60IACCJtt70xtwKmWvmvOVnw7_MCgmlkgnY0gmlwhKwScvuKbXVsdGlhZGRyc5YACASsEnL7BiwVAAoErBJy-wYsFt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDr3cIBPE1LacdMijteDwCL7n5xMEkO0zugPoJXpoF5Y2DdGNwgiwVg3VkcIIsF4V3YWt1MgM --storenode=/ip4/172.18.114.251/tcp/11285/p2p/16Uiu2HAmQTvyC8p9WohDQhnrWwFbeEpXCS4db5ZMEEsvKyz4aXLG --store=true --relay=true
2025-02-13 04:07:48.333 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.45.6 waku 511f2347840606b01554952737b929625e03f23621542ad89574a3fa1b0a2150
2025-02-13 04:07:48.382 DEBUG [src.node.docker_mananger] Container started with ID 511f23478406. Setting up logs at ./log/docker/store_node1_2025-02-13_04-07-46__a4c929f1-9da9-41b8-8779-accd5f30eb36__wakuorg_nwaku:latest.log
2025-02-13 04:07:48.383 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63983
2025-02-13 04:07:48.383 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:07:49.384 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63983/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:07:49.387 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:07:49.387 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:07:49.387 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63983/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:07:49.389 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.6/tcp/63984/p2p/16Uiu2HAmJE8JPKDf7RRRsfBkZq1qYNmVJ3GaaAu9Sm7LEVZchzwK","/ip4/172.18.45.6/tcp/63985/ws/p2p/16Uiu2HAmJE8JPKDf7RRRsfBkZq1qYNmVJ3GaaAu9Sm7LEVZchzwK"],"enrUri":"enr:-L24QKOhz9YOvKsRrBBhq0UynE_yZSMv6ZpWi9gU8SThGOt0GbNlfS6SzXphyo32_VK8i_eEr8BOJOjm0cnY2grSGDQCgmlkgnY0gmlwhKwSLQaKbXVsdGlhZGRyc5YACASsEi0GBvnwAAoErBItBgb58d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDUseXIIyaYqtWAiWc4jwWTDwdTJ4FJUJnFsv8Qeaz60KDdGNwgvnwg3VkcIL58oV3YWt1MgM"}'
2025-02-13 04:07:49.390 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:07:49.390 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63983/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.114.251/tcp/11285/p2p/16Uiu2HAmQTvyC8p9WohDQhnrWwFbeEpXCS4db5ZMEEsvKyz4aXLG"]'
2025-02-13 04:07:49.392 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:07:49.393 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11284/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 04:07:49.395 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:07:49.395 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63983/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 04:07:49.397 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:07:49.398 DEBUG [src.steps.store] Relaying message
2025-02-13 04:07:49.398 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11284/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:07:49.404 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:07:49.404 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:07:49.606 DEBUG [src.steps.store] Relaying message
2025-02-13 04:07:49.606 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11284/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:07:49.612 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:07:49.612 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:07:49.813 DEBUG [src.steps.store] Relaying message
2025-02-13 04:07:49.813 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11284/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:07:49.820 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:07:49.820 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:07:50.021 DEBUG [src.steps.store] Relaying message
2025-02-13 04:07:50.021 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11284/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:07:50.027 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:07:50.028 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:07:50.228 DEBUG [src.steps.store] Relaying message
2025-02-13 04:07:50.229 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11284/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:07:50.235 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:07:50.235 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:07:50.436 DEBUG [src.steps.store] Relaying message
2025-02-13 04:07:50.437 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11284/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:07:50.443 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:07:50.444 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:07:50.645 DEBUG [src.steps.store] Relaying message
2025-02-13 04:07:50.645 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11284/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:07:50.650 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:07:50.650 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:07:50.851 DEBUG [src.steps.store] Relaying message
2025-02-13 04:07:50.852 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11284/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:07:50.859 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:07:50.859 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:07:51.061 DEBUG [tests.store.test_topics] trying to find stored messages with wrong content_topic =myapp/1/latest/proto
2025-02-13 04:07:51.061 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11284/store/v3/messages?includeData=true&contentTopics=myapp%2F1%2Flatest%2Fproto&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:07:51.064 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-13 04:07:51.064 DEBUG [tests.store.test_topics]  response for wrong url content topic is {'requestId': '', 'statusCode': 200, 'statusDesc': 'OK', 'messages': []}
2025-02-13 04:07:51.067 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:07:51.068 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:07:51.068 DEBUG [src.node.waku_node] Stopping container with id 11bb4938a11b
2025-02-13 04:07:51.618 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:07:51.619 DEBUG [src.node.waku_node] Stopping container with id 511f23478406
2025-02-13 04:07:52.431 ERROR [src.node.docker_mananger] Max retries reached for container 11bb4938a11b. Exiting log stream.
2025-02-13 04:07:52.871 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:07:52.873 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:07:52.880 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:07:52.887 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
